function c6(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function na(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var By={exports:{}},_c={};var NO;function f6(){if(NO)return _c;NO=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:a,ref:i!==void 0?i:null,props:s}}return _c.Fragment=e,_c.jsx=t,_c.jsxs=t,_c}var BO;function h6(){return BO||(BO=1,By.exports=f6()),By.exports}var G=h6(),Uy={exports:{}},ht={};var UO;function d6(){if(UO)return ht;UO=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),g=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function E($,F,Z){this.props=$,this.context=F,this.refs=b,this.updater=Z||y}E.prototype.isReactComponent={},E.prototype.setState=function($,F){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,F,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function S(){}S.prototype=E.prototype;function T($,F,Z){this.props=$,this.context=F,this.refs=b,this.updater=Z||y}var I=T.prototype=new S;I.constructor=T,x(I,E.prototype),I.isPureReactComponent=!0;var w=Array.isArray;function R(){}var _={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k($,F,Z){var de=Z.ref;return{$$typeof:r,type:$,key:F,ref:de!==void 0?de:null,props:Z}}function D($,F){return k($.type,F,$.props)}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function N($){var F={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Z){return F[Z]})}var q=/\/+/g;function X($,F){return typeof $=="object"&&$!==null&&$.key!=null?N(""+$.key):F.toString(36)}function V($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(R,R):($.status="pending",$.then(function(F){$.status==="pending"&&($.status="fulfilled",$.value=F)},function(F){$.status==="pending"&&($.status="rejected",$.reason=F)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function H($,F,Z,de,oe){var Se=typeof $;(Se==="undefined"||Se==="boolean")&&($=null);var ae=!1;if($===null)ae=!0;else switch(Se){case"bigint":case"string":case"number":ae=!0;break;case"object":switch($.$$typeof){case r:case e:ae=!0;break;case h:return ae=$._init,H(ae($._payload),F,Z,de,oe)}}if(ae)return oe=oe($),ae=de===""?"."+X($,0):de,w(oe)?(Z="",ae!=null&&(Z=ae.replace(q,"$&/")+"/"),H(oe,F,Z,"",function(le){return le})):oe!=null&&(U(oe)&&(oe=D(oe,Z+(oe.key==null||$&&$.key===oe.key?"":(""+oe.key).replace(q,"$&/")+"/")+ae)),F.push(oe)),1;ae=0;var re=de===""?".":de+":";if(w($))for(var te=0;te<$.length;te++)de=$[te],Se=re+X(de,te),ae+=H(de,F,Z,Se,oe);else if(te=m($),typeof te=="function")for($=te.call($),te=0;!(de=$.next()).done;)de=de.value,Se=re+X(de,te++),ae+=H(de,F,Z,Se,oe);else if(Se==="object"){if(typeof $.then=="function")return H(V($),F,Z,de,oe);throw F=String($),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ae}function K($,F,Z){if($==null)return $;var de=[],oe=0;return H($,de,"","",function(Se){return F.call(Z,Se,oe++)}),de}function Y($){if($._status===-1){var F=$._result;F=F(),F.then(function(Z){($._status===0||$._status===-1)&&($._status=1,$._result=Z)},function(Z){($._status===0||$._status===-1)&&($._status=2,$._result=Z)}),$._status===-1&&($._status=0,$._result=F)}if($._status===1)return $._result.default;throw $._result}var ee=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Q={map:K,forEach:function($,F,Z){K($,function(){F.apply(this,arguments)},Z)},count:function($){var F=0;return K($,function(){F++}),F},toArray:function($){return K($,function(F){return F})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ht.Activity=d,ht.Children=Q,ht.Component=E,ht.Fragment=t,ht.Profiler=i,ht.PureComponent=T,ht.StrictMode=n,ht.Suspense=u,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,ht.__COMPILER_RUNTIME={__proto__:null,c:function($){return _.H.useMemoCache($)}},ht.cache=function($){return function(){return $.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function($,F,Z){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var de=x({},$.props),oe=$.key;if(F!=null)for(Se in F.key!==void 0&&(oe=""+F.key),F)!C.call(F,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&F.ref===void 0||(de[Se]=F[Se]);var Se=arguments.length-2;if(Se===1)de.children=Z;else if(1<Se){for(var ae=Array(Se),re=0;re<Se;re++)ae[re]=arguments[re+2];de.children=ae}return k($.type,oe,de)},ht.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},ht.createElement=function($,F,Z){var de,oe={},Se=null;if(F!=null)for(de in F.key!==void 0&&(Se=""+F.key),F)C.call(F,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(oe[de]=F[de]);var ae=arguments.length-2;if(ae===1)oe.children=Z;else if(1<ae){for(var re=Array(ae),te=0;te<ae;te++)re[te]=arguments[te+2];oe.children=re}if($&&$.defaultProps)for(de in ae=$.defaultProps,ae)oe[de]===void 0&&(oe[de]=ae[de]);return k($,Se,oe)},ht.createRef=function(){return{current:null}},ht.forwardRef=function($){return{$$typeof:o,render:$}},ht.isValidElement=U,ht.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:Y}},ht.memo=function($,F){return{$$typeof:c,type:$,compare:F===void 0?null:F}},ht.startTransition=function($){var F=_.T,Z={};_.T=Z;try{var de=$(),oe=_.S;oe!==null&&oe(Z,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(R,ee)}catch(Se){ee(Se)}finally{F!==null&&Z.types!==null&&(F.types=Z.types),_.T=F}},ht.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},ht.use=function($){return _.H.use($)},ht.useActionState=function($,F,Z){return _.H.useActionState($,F,Z)},ht.useCallback=function($,F){return _.H.useCallback($,F)},ht.useContext=function($){return _.H.useContext($)},ht.useDebugValue=function(){},ht.useDeferredValue=function($,F){return _.H.useDeferredValue($,F)},ht.useEffect=function($,F){return _.H.useEffect($,F)},ht.useEffectEvent=function($){return _.H.useEffectEvent($)},ht.useId=function(){return _.H.useId()},ht.useImperativeHandle=function($,F,Z){return _.H.useImperativeHandle($,F,Z)},ht.useInsertionEffect=function($,F){return _.H.useInsertionEffect($,F)},ht.useLayoutEffect=function($,F){return _.H.useLayoutEffect($,F)},ht.useMemo=function($,F){return _.H.useMemo($,F)},ht.useOptimistic=function($,F){return _.H.useOptimistic($,F)},ht.useReducer=function($,F,Z){return _.H.useReducer($,F,Z)},ht.useRef=function($){return _.H.useRef($)},ht.useState=function($){return _.H.useState($)},ht.useSyncExternalStore=function($,F,Z){return _.H.useSyncExternalStore($,F,Z)},ht.useTransition=function(){return _.H.useTransition()},ht.version="19.2.0",ht}var jO;function Tu(){return jO||(jO=1,Uy.exports=d6()),Uy.exports}var P=Tu();const p6=na(P),g6=c6({__proto__:null,default:p6},[P]);var jy={exports:{}},Ic={},Fy={exports:{}},$y={};var FO;function m6(){return FO||(FO=1,(function(r){function e(H,K){var Y=H.length;H.push(K);e:for(;0<Y;){var ee=Y-1>>>1,Q=H[ee];if(0<i(Q,K))H[ee]=K,H[Y]=Q,Y=ee;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],Y=H.pop();if(Y!==K){H[0]=Y;e:for(var ee=0,Q=H.length,$=Q>>>1;ee<$;){var F=2*(ee+1)-1,Z=H[F],de=F+1,oe=H[de];if(0>i(Z,Y))de<Q&&0>i(oe,Z)?(H[ee]=oe,H[de]=Y,ee=de):(H[ee]=Z,H[F]=Y,ee=F);else if(de<Q&&0>i(oe,Y))H[ee]=oe,H[de]=Y,ee=de;else break e}}return K}function i(H,K){var Y=H.sortIndex-K.sortIndex;return Y!==0?Y:H.id-K.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var u=[],c=[],h=1,d=null,g=3,m=!1,y=!1,x=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var K=t(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=H)n(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(c)}}function w(H){if(x=!1,I(H),!y)if(t(u)!==null)y=!0,R||(R=!0,N());else{var K=t(c);K!==null&&V(w,K.startTime-H)}}var R=!1,_=-1,C=5,k=-1;function D(){return b?!0:!(r.unstable_now()-k<C)}function U(){if(b=!1,R){var H=r.unstable_now();k=H;var K=!0;try{e:{y=!1,x&&(x=!1,S(_),_=-1),m=!0;var Y=g;try{t:{for(I(H),d=t(u);d!==null&&!(d.expirationTime>H&&D());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,g=d.priorityLevel;var Q=ee(d.expirationTime<=H);if(H=r.unstable_now(),typeof Q=="function"){d.callback=Q,I(H),K=!0;break t}d===t(u)&&n(u),I(H)}else n(u);d=t(u)}if(d!==null)K=!0;else{var $=t(c);$!==null&&V(w,$.startTime-H),K=!1}}break e}finally{d=null,g=Y,m=!1}K=void 0}}finally{K?N():R=!1}}}var N;if(typeof T=="function")N=function(){T(U)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=U,N=function(){X.postMessage(null)}}else N=function(){E(U,0)};function V(H,K){_=E(function(){H(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_next=function(H){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var Y=g;g=K;try{return H()}finally{g=Y}},r.unstable_requestPaint=function(){b=!0},r.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=g;g=H;try{return K()}finally{g=Y}},r.unstable_scheduleCallback=function(H,K,Y){var ee=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ee+Y:ee):Y=ee,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Y+Q,H={id:h++,callback:K,priorityLevel:H,startTime:Y,expirationTime:Q,sortIndex:-1},Y>ee?(H.sortIndex=Y,e(c,H),t(u)===null&&H===t(c)&&(x?(S(_),_=-1):x=!0,V(w,Y-ee))):(H.sortIndex=Q,e(u,H),y||m||(y=!0,R||(R=!0,N()))),H},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(H){var K=g;return function(){var Y=g;g=K;try{return H.apply(this,arguments)}finally{g=Y}}}})($y)),$y}var $O;function y6(){return $O||($O=1,Fy.exports=m6()),Fy.exports}var Gy={exports:{}},Qr={};var GO;function v6(){if(GO)return Qr;GO=1;var r=Tu();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,c,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:u,containerInfo:c,implementation:h}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(u,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(u,c,null,h)},Qr.flushSync=function(u){var c=a.T,h=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=c,n.p=h,n.d.f()}},Qr.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(u,c))},Qr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Qr.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?n.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:g,fetchPriority:m}):h==="script"&&n.d.X(u,{crossOrigin:d,integrity:g,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Qr.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);n.d.M(u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(u)},Qr.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin);n.d.L(u,h,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Qr.preloadModule=function(u,c){if(typeof u=="string")if(c){var h=o(c.as,c.crossOrigin);n.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(u)},Qr.requestFormReset=function(u){n.d.r(u)},Qr.unstable_batchedUpdates=function(u,c){return u(c)},Qr.useFormState=function(u,c,h){return a.H.useFormState(u,c,h)},Qr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qr.version="19.2.0",Qr}var zO;function UM(){if(zO)return Gy.exports;zO=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gy.exports=v6(),Gy.exports}var HO;function b6(){if(HO)return Ic;HO=1;var r=y6(),e=Tu(),t=UM();function n(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var f=l,p=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(p=f.return),l=f.return;while(l)}return f.tag===3?p:null}function a(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function u(l){if(s(l)!==l)throw Error(n(188))}function c(l){var f=l.alternate;if(!f){if(f=s(l),f===null)throw Error(n(188));return f!==l?null:l}for(var p=l,v=f;;){var A=p.return;if(A===null)break;var O=A.alternate;if(O===null){if(v=A.return,v!==null){p=v;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===p)return u(A),l;if(O===v)return u(A),f;O=O.sibling}throw Error(n(188))}if(p.return!==v.return)p=A,v=O;else{for(var B=!1,W=A.child;W;){if(W===p){B=!0,p=A,v=O;break}if(W===v){B=!0,v=A,p=O;break}W=W.sibling}if(!B){for(W=O.child;W;){if(W===p){B=!0,p=O,v=A;break}if(W===v){B=!0,v=O,p=A;break}W=W.sibling}if(!B)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:f}function h(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=h(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var q=Symbol.for("react.client.reference");function X(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===q?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case w:return"Suspense";case R:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case T:return l.displayName||"Context";case S:return(l._context.displayName||"Context")+".Consumer";case I:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case _:return f=l.displayName||null,f!==null?f:X(l.type)||"Memo";case C:f=l._payload,l=l._init;try{return X(l(f))}catch{}}return null}var V=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ee=[],Q=-1;function $(l){return{current:l}}function F(l){0>Q||(l.current=ee[Q],ee[Q]=null,Q--)}function Z(l,f){Q++,ee[Q]=l.current,l.current=f}var de=$(null),oe=$(null),Se=$(null),ae=$(null);function re(l,f){switch(Z(Se,f),Z(oe,l),Z(de,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?sO(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=sO(f),l=aO(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}F(de),Z(de,l)}function te(){F(de),F(oe),F(Se)}function le(l){l.memoizedState!==null&&Z(ae,l);var f=de.current,p=aO(f,l.type);f!==p&&(Z(oe,l),Z(de,p))}function ce(l){oe.current===l&&(F(de),F(oe)),ae.current===l&&(F(ae),Ec._currentValue=Y)}var ne,Le;function xe(l){if(ne===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);ne=f&&f[1]||"",Le=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+Le}var ie=!1;function se(l,f){if(!l||ie)return"";ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(De){var Oe=De}Reflect.construct(l,[],He)}else{try{He.call()}catch(De){Oe=De}l.call(He.prototype)}}else{try{throw Error()}catch(De){Oe=De}(He=l())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(De){if(De&&Oe&&typeof De.stack=="string")return[De.stack,Oe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=v.DetermineComponentFrameRoot(),B=O[0],W=O[1];if(B&&W){var he=B.split(`
`),_e=W.split(`
`);for(A=v=0;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;for(;A<_e.length&&!_e[A].includes("DetermineComponentFrameRoot");)A++;if(v===he.length||A===_e.length)for(v=he.length-1,A=_e.length-1;1<=v&&0<=A&&he[v]!==_e[A];)A--;for(;1<=v&&0<=A;v--,A--)if(he[v]!==_e[A]){if(v!==1||A!==1)do if(v--,A--,0>A||he[v]!==_e[A]){var Fe=`
`+he[v].replace(" at new "," at ");return l.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",l.displayName)),Fe}while(1<=v&&0<=A);break}}}finally{ie=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?xe(p):""}function ye(l,f){switch(l.tag){case 26:case 27:case 5:return xe(l.type);case 16:return xe("Lazy");case 13:return l.child!==f&&f!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return se(l.type,!1);case 11:return se(l.type.render,!1);case 1:return se(l.type,!0);case 31:return xe("Activity");default:return""}}function Re(l){try{var f="",p=null;do f+=ye(l,p),p=l,l=l.return;while(l);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Ce=Object.prototype.hasOwnProperty,je=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,Ue=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Ie=r.unstable_now,lt=r.unstable_getCurrentPriorityLevel,L=r.unstable_ImmediatePriority,M=r.unstable_UserBlockingPriority,z=r.unstable_NormalPriority,fe=r.unstable_LowPriority,ve=r.unstable_IdlePriority,Pe=r.log,Ve=r.unstable_setDisableYieldValue,me=null,Ae=null;function Je(l){if(typeof Pe=="function"&&Ve(l),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(me,l)}catch{}}var Xe=Math.clz32?Math.clz32:ii,ct=Math.log,dt=Math.LN2;function ii(l){return l>>>=0,l===0?32:31-(ct(l)/dt|0)|0}var on=256,or=262144,ln=4194304;function bn(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function un(l,f,p){var v=l.pendingLanes;if(v===0)return 0;var A=0,O=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var W=v&134217727;return W!==0?(v=W&~O,v!==0?A=bn(v):(B&=W,B!==0?A=bn(B):p||(p=W&~l,p!==0&&(A=bn(p))))):(W=v&~O,W!==0?A=bn(W):B!==0?A=bn(B):p||(p=v&~l,p!==0&&(A=bn(p)))),A===0?0:f!==0&&f!==A&&(f&O)===0&&(O=A&-A,p=f&-f,O>=p||O===32&&(p&4194048)!==0)?f:A}function br(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function al(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cs(){var l=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),l}function fs(l){for(var f=[],p=0;31>p;p++)f.push(l);return f}function J(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ue(l,f,p,v,A,O){var B=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var W=l.entanglements,he=l.expirationTimes,_e=l.hiddenUpdates;for(p=B&~p;0<p;){var Fe=31-Xe(p),He=1<<Fe;W[Fe]=0,he[Fe]=-1;var Oe=_e[Fe];if(Oe!==null)for(_e[Fe]=null,Fe=0;Fe<Oe.length;Fe++){var De=Oe[Fe];De!==null&&(De.lane&=-536870913)}p&=~He}v!==0&&qe(l,v,0),O!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=O&~(B&~f))}function qe(l,f,p){l.pendingLanes|=f,l.suspendedLanes&=~f;var v=31-Xe(f);l.entangledLanes|=f,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function We(l,f){var p=l.entangledLanes|=f;for(l=l.entanglements;p;){var v=31-Xe(p),A=1<<v;A&f|l[v]&f&&(l[v]|=f),p&=~A}}function Qe(l,f){var p=f&-f;return p=(p&42)!==0?1:Zt(p),(p&(l.suspendedLanes|f))!==0?0:p}function Zt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function xr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function xn(){var l=K.p;return l!==0?l:(l=window.event,l===void 0?32:RO(l.type))}function ga(l,f){var p=K.p;try{return K.p=l,f()}finally{K.p=p}}var Sn=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Sn,Sr="__reactProps$"+Sn,En="__reactContainer$"+Sn,Tn="__reactEvents$"+Sn,Ui="__reactListeners$"+Sn,hs="__reactHandles$"+Sn,jn="__reactResources$"+Sn,cn="__reactMarker$"+Sn;function Rm(l){delete l[Jt],delete l[Sr],delete l[Tn],delete l[Ui],delete l[hs]}function ol(l){var f=l[Jt];if(f)return f;for(var p=l.parentNode;p;){if(f=p[En]||p[Jt]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(l=dO(l);l!==null;){if(p=l[Jt])return p;l=dO(l)}return f}l=p,p=l.parentNode}return null}function ll(l){if(l=l[Jt]||l[En]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function Uu(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(n(33))}function ul(l){var f=l[jn];return f||(f=l[jn]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Lr(l){l[cn]=!0}var V1=new Set,W1={};function co(l,f){cl(l,f),cl(l+"Capture",f)}function cl(l,f){for(W1[l]=f,l=0;l<f.length;l++)V1.add(f[l])}var t4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Y1={},X1={};function r4(l){return Ce.call(X1,l)?!0:Ce.call(Y1,l)?!1:t4.test(l)?X1[l]=!0:(Y1[l]=!0,!1)}function Yf(l,f,p){if(r4(f))if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+p)}}function Xf(l,f,p){if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+p)}}function ds(l,f,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(f,p,""+v)}}function si(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Q1(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function n4(l,f,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,O=v.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return A.call(this)},set:function(B){p=""+B,O.call(this,B)}}),Object.defineProperty(l,f,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(B){p=""+B},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Lm(l){if(!l._valueTracker){var f=Q1(l)?"checked":"value";l._valueTracker=n4(l,f,""+l[f])}}function Z1(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var p=f.getValue(),v="";return l&&(v=Q1(l)?l.checked?"true":"false":l.value),l=v,l!==p?(f.setValue(l),!0):!1}function Qf(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var i4=/[\n"\\]/g;function ai(l){return l.replace(i4,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Cm(l,f,p,v,A,O,B,W){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),f!=null?B==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+si(f)):l.value!==""+si(f)&&(l.value=""+si(f)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),f!=null?Pm(l,B,si(f)):p!=null?Pm(l,B,si(p)):v!=null&&l.removeAttribute("value"),A==null&&O!=null&&(l.defaultChecked=!!O),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?l.name=""+si(W):l.removeAttribute("name")}function J1(l,f,p,v,A,O,B,W){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),f!=null||p!=null){if(!(O!=="submit"&&O!=="reset"||f!=null)){Lm(l);return}p=p!=null?""+si(p):"",f=f!=null?""+si(f):p,W||f===l.value||(l.value=f),l.defaultValue=f}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=W?l.checked:!!v,l.defaultChecked=!!v,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),Lm(l)}function Pm(l,f,p){f==="number"&&Qf(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function fl(l,f,p,v){if(l=l.options,f){f={};for(var A=0;A<p.length;A++)f["$"+p[A]]=!0;for(p=0;p<l.length;p++)A=f.hasOwnProperty("$"+l[p].value),l[p].selected!==A&&(l[p].selected=A),A&&v&&(l[p].defaultSelected=!0)}else{for(p=""+si(p),f=null,A=0;A<l.length;A++){if(l[A].value===p){l[A].selected=!0,v&&(l[A].defaultSelected=!0);return}f!==null||l[A].disabled||(f=l[A])}f!==null&&(f.selected=!0)}}function ew(l,f,p){if(f!=null&&(f=""+si(f),f!==l.value&&(l.value=f),p==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=p!=null?""+si(p):""}function tw(l,f,p,v){if(f==null){if(v!=null){if(p!=null)throw Error(n(92));if(V(v)){if(1<v.length)throw Error(n(93));v=v[0]}p=v}p==null&&(p=""),f=p}p=si(f),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),Lm(l)}function hl(l,f){if(f){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=f;return}}l.textContent=f}var s4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rw(l,f,p){var v=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":v?l.setProperty(f,p):typeof p!="number"||p===0||s4.has(f)?f==="float"?l.cssFloat=p:l[f]=(""+p).trim():l[f]=p+"px"}function nw(l,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var A in f)v=f[A],f.hasOwnProperty(A)&&p[A]!==v&&rw(l,A,v)}else for(var O in f)f.hasOwnProperty(O)&&rw(l,O,f[O])}function Dm(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),o4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zf(l){return o4.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ps(){}var km=null;function Mm(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var dl=null,pl=null;function iw(l){var f=ll(l);if(f&&(l=f.stateNode)){var p=l[Sr]||null;e:switch(l=f.stateNode,f.type){case"input":if(Cm(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ai(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var v=p[f];if(v!==l&&v.form===l.form){var A=v[Sr]||null;if(!A)throw Error(n(90));Cm(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<p.length;f++)v=p[f],v.form===l.form&&Z1(v)}break e;case"textarea":ew(l,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&fl(l,!!p.multiple,f,!1)}}}var Nm=!1;function sw(l,f,p){if(Nm)return l(f,p);Nm=!0;try{var v=l(f);return v}finally{if(Nm=!1,(dl!==null||pl!==null)&&(jh(),dl&&(f=dl,l=pl,pl=dl=null,iw(f),l)))for(f=0;f<l.length;f++)iw(l[f])}}function ju(l,f){var p=l.stateNode;if(p===null)return null;var v=p[Sr]||null;if(v===null)return null;p=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bm=!1;if(gs)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{Bm=!1}var ma=null,Um=null,Jf=null;function aw(){if(Jf)return Jf;var l,f=Um,p=f.length,v,A="value"in ma?ma.value:ma.textContent,O=A.length;for(l=0;l<p&&f[l]===A[l];l++);var B=p-l;for(v=1;v<=B&&f[p-v]===A[O-v];v++);return Jf=A.slice(l,1<v?1-v:void 0)}function eh(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function th(){return!0}function ow(){return!1}function An(l){function f(p,v,A,O,B){this._reactName=p,this._targetInst=A,this.type=v,this.nativeEvent=O,this.target=B,this.currentTarget=null;for(var W in l)l.hasOwnProperty(W)&&(p=l[W],this[W]=p?p(O):O[W]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?th:ow,this.isPropagationStopped=ow,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),f}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=An(fo),$u=d({},fo,{view:0,detail:0}),l4=An($u),jm,Fm,Gu,nh=d({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Gu&&(Gu&&l.type==="mousemove"?(jm=l.screenX-Gu.screenX,Fm=l.screenY-Gu.screenY):Fm=jm=0,Gu=l),jm)},movementY:function(l){return"movementY"in l?l.movementY:Fm}}),lw=An(nh),u4=d({},nh,{dataTransfer:0}),c4=An(u4),f4=d({},$u,{relatedTarget:0}),$m=An(f4),h4=d({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),d4=An(h4),p4=d({},fo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),g4=An(p4),m4=d({},fo,{data:0}),uw=An(m4),y4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x4(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=b4[l])?!!f[l]:!1}function Gm(){return x4}var S4=d({},$u,{key:function(l){if(l.key){var f=y4[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=eh(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?v4[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(l){return l.type==="keypress"?eh(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?eh(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),E4=An(S4),T4=d({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=An(T4),A4=d({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),w4=An(A4),_4=d({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),I4=An(_4),O4=d({},nh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),R4=An(O4),L4=d({},fo,{newState:0,oldState:0}),C4=An(L4),P4=[9,13,27,32],zm=gs&&"CompositionEvent"in window,zu=null;gs&&"documentMode"in document&&(zu=document.documentMode);var D4=gs&&"TextEvent"in window&&!zu,fw=gs&&(!zm||zu&&8<zu&&11>=zu),hw=" ",dw=!1;function pw(l,f){switch(l){case"keyup":return P4.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var gl=!1;function k4(l,f){switch(l){case"compositionend":return gw(f);case"keypress":return f.which!==32?null:(dw=!0,hw);case"textInput":return l=f.data,l===hw&&dw?null:l;default:return null}}function M4(l,f){if(gl)return l==="compositionend"||!zm&&pw(l,f)?(l=aw(),Jf=Um=ma=null,gl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return fw&&f.locale!=="ko"?null:f.data;default:return null}}var N4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mw(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!N4[l.type]:f==="textarea"}function yw(l,f,p,v){dl?pl?pl.push(v):pl=[v]:dl=v,f=qh(f,"onChange"),0<f.length&&(p=new rh("onChange","change",null,p,v),l.push({event:p,listeners:f}))}var Hu=null,Ku=null;function B4(l){JI(l,0)}function ih(l){var f=Uu(l);if(Z1(f))return l}function vw(l,f){if(l==="change")return f}var bw=!1;if(gs){var Hm;if(gs){var Km="oninput"in document;if(!Km){var xw=document.createElement("div");xw.setAttribute("oninput","return;"),Km=typeof xw.oninput=="function"}Hm=Km}else Hm=!1;bw=Hm&&(!document.documentMode||9<document.documentMode)}function Sw(){Hu&&(Hu.detachEvent("onpropertychange",Ew),Ku=Hu=null)}function Ew(l){if(l.propertyName==="value"&&ih(Ku)){var f=[];yw(f,Ku,l,Mm(l)),sw(B4,f)}}function U4(l,f,p){l==="focusin"?(Sw(),Hu=f,Ku=p,Hu.attachEvent("onpropertychange",Ew)):l==="focusout"&&Sw()}function j4(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ih(Ku)}function F4(l,f){if(l==="click")return ih(f)}function $4(l,f){if(l==="input"||l==="change")return ih(f)}function G4(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Fn=typeof Object.is=="function"?Object.is:G4;function qu(l,f){if(Fn(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var p=Object.keys(l),v=Object.keys(f);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var A=p[v];if(!Ce.call(f,A)||!Fn(l[A],f[A]))return!1}return!0}function Tw(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Aw(l,f){var p=Tw(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=f&&v>=f)return{node:p,offset:f-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Tw(p)}}function ww(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?ww(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function _w(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=Qf(l.document);f instanceof l.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)l=f.contentWindow;else break;f=Qf(l.document)}return f}function qm(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var z4=gs&&"documentMode"in document&&11>=document.documentMode,ml=null,Vm=null,Vu=null,Wm=!1;function Iw(l,f,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Wm||ml==null||ml!==Qf(v)||(v=ml,"selectionStart"in v&&qm(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Vu&&qu(Vu,v)||(Vu=v,v=qh(Vm,"onSelect"),0<v.length&&(f=new rh("onSelect","select",null,f,p),l.push({event:f,listeners:v}),f.target=ml)))}function ho(l,f){var p={};return p[l.toLowerCase()]=f.toLowerCase(),p["Webkit"+l]="webkit"+f,p["Moz"+l]="moz"+f,p}var yl={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Ym={},Ow={};gs&&(Ow=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function po(l){if(Ym[l])return Ym[l];if(!yl[l])return l;var f=yl[l],p;for(p in f)if(f.hasOwnProperty(p)&&p in Ow)return Ym[l]=f[p];return l}var Rw=po("animationend"),Lw=po("animationiteration"),Cw=po("animationstart"),H4=po("transitionrun"),K4=po("transitionstart"),q4=po("transitioncancel"),Pw=po("transitionend"),Dw=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function _i(l,f){Dw.set(l,f),co(f,[l])}var sh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},oi=[],vl=0,Qm=0;function ah(){for(var l=vl,f=Qm=vl=0;f<l;){var p=oi[f];oi[f++]=null;var v=oi[f];oi[f++]=null;var A=oi[f];oi[f++]=null;var O=oi[f];if(oi[f++]=null,v!==null&&A!==null){var B=v.pending;B===null?A.next=A:(A.next=B.next,B.next=A),v.pending=A}O!==0&&kw(p,A,O)}}function oh(l,f,p,v){oi[vl++]=l,oi[vl++]=f,oi[vl++]=p,oi[vl++]=v,Qm|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Zm(l,f,p,v){return oh(l,f,p,v),lh(l)}function go(l,f){return oh(l,null,null,f),lh(l)}function kw(l,f,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var A=!1,O=l.return;O!==null;)O.childLanes|=p,v=O.alternate,v!==null&&(v.childLanes|=p),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(A=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,A&&f!==null&&(A=31-Xe(p),l=O.hiddenUpdates,v=l[A],v===null?l[A]=[f]:v.push(f),f.lane=p|536870912),O):null}function lh(l){if(50<gc)throw gc=0,oy=null,Error(n(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var bl={};function V4(l,f,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(l,f,p,v){return new V4(l,f,p,v)}function Jm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ms(l,f){var p=l.alternate;return p===null?(p=$n(l.tag,f,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=f,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,f=l.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Mw(l,f){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,f=p.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function uh(l,f,p,v,A,O){var B=0;if(v=l,typeof l=="function")Jm(l)&&(B=1);else if(typeof l=="string")B=Z8(l,p,de.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=$n(31,p,f,A),l.elementType=k,l.lanes=O,l;case x:return mo(p.children,A,O,f);case b:B=8,A|=24;break;case E:return l=$n(12,p,f,A|2),l.elementType=E,l.lanes=O,l;case w:return l=$n(13,p,f,A),l.elementType=w,l.lanes=O,l;case R:return l=$n(19,p,f,A),l.elementType=R,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:B=10;break e;case S:B=9;break e;case I:B=11;break e;case _:B=14;break e;case C:B=16,v=null;break e}B=29,p=Error(n(130,l===null?"null":typeof l,"")),v=null}return f=$n(B,p,f,A),f.elementType=l,f.type=v,f.lanes=O,f}function mo(l,f,p,v){return l=$n(7,l,v,f),l.lanes=p,l}function e0(l,f,p){return l=$n(6,l,null,f),l.lanes=p,l}function Nw(l){var f=$n(18,null,null,0);return f.stateNode=l,f}function t0(l,f,p){return f=$n(4,l.children!==null?l.children:[],l.key,f),f.lanes=p,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Bw=new WeakMap;function li(l,f){if(typeof l=="object"&&l!==null){var p=Bw.get(l);return p!==void 0?p:(f={value:l,source:f,stack:Re(f)},Bw.set(l,f),f)}return{value:l,source:f,stack:Re(f)}}var xl=[],Sl=0,ch=null,Wu=0,ui=[],ci=0,ya=null,ji=1,Fi="";function ys(l,f){xl[Sl++]=Wu,xl[Sl++]=ch,ch=l,Wu=f}function Uw(l,f,p){ui[ci++]=ji,ui[ci++]=Fi,ui[ci++]=ya,ya=l;var v=ji;l=Fi;var A=32-Xe(v)-1;v&=~(1<<A),p+=1;var O=32-Xe(f)+A;if(30<O){var B=A-A%5;O=(v&(1<<B)-1).toString(32),v>>=B,A-=B,ji=1<<32-Xe(f)+A|p<<A|v,Fi=O+l}else ji=1<<O|p<<A|v,Fi=l}function r0(l){l.return!==null&&(ys(l,1),Uw(l,1,0))}function n0(l){for(;l===ch;)ch=xl[--Sl],xl[Sl]=null,Wu=xl[--Sl],xl[Sl]=null;for(;l===ya;)ya=ui[--ci],ui[ci]=null,Fi=ui[--ci],ui[ci]=null,ji=ui[--ci],ui[ci]=null}function jw(l,f){ui[ci++]=ji,ui[ci++]=Fi,ui[ci++]=ya,ji=f.id,Fi=f.overflow,ya=l}var $r=null,Ht=null,Et=!1,va=null,fi=!1,i0=Error(n(519));function ba(l){var f=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yu(li(f,l)),i0}function Fw(l){var f=l.stateNode,p=l.type,v=l.memoizedProps;switch(f[Jt]=l,f[Sr]=v,p){case"dialog":bt("cancel",f),bt("close",f);break;case"iframe":case"object":case"embed":bt("load",f);break;case"video":case"audio":for(p=0;p<yc.length;p++)bt(yc[p],f);break;case"source":bt("error",f);break;case"img":case"image":case"link":bt("error",f),bt("load",f);break;case"details":bt("toggle",f);break;case"input":bt("invalid",f),J1(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":bt("invalid",f);break;case"textarea":bt("invalid",f),tw(f,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||v.suppressHydrationWarning===!0||nO(f.textContent,p)?(v.popover!=null&&(bt("beforetoggle",f),bt("toggle",f)),v.onScroll!=null&&bt("scroll",f),v.onScrollEnd!=null&&bt("scrollend",f),v.onClick!=null&&(f.onclick=ps),f=!0):f=!1,f||ba(l,!0)}function $w(l){for($r=l.return;$r;)switch($r.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:$r=$r.return}}function El(l){if(l!==$r)return!1;if(!Et)return $w(l),Et=!0,!1;var f=l.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Ey(l.type,l.memoizedProps)),p=!p),p&&Ht&&ba(l),$w(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Ht=hO(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Ht=hO(l)}else f===27?(f=Ht,Da(l.type)?(l=Iy,Iy=null,Ht=l):Ht=f):Ht=$r?di(l.stateNode.nextSibling):null;return!0}function yo(){Ht=$r=null,Et=!1}function s0(){var l=va;return l!==null&&(On===null?On=l:On.push.apply(On,l),va=null),l}function Yu(l){va===null?va=[l]:va.push(l)}var a0=$(null),vo=null,vs=null;function xa(l,f,p){Z(a0,f._currentValue),f._currentValue=p}function bs(l){l._currentValue=a0.current,F(a0)}function o0(l,f,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),l===p)break;l=l.return}}function l0(l,f,p,v){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var O=A.dependencies;if(O!==null){var B=A.child;O=O.firstContext;e:for(;O!==null;){var W=O;O=A;for(var he=0;he<f.length;he++)if(W.context===f[he]){O.lanes|=p,W=O.alternate,W!==null&&(W.lanes|=p),o0(O.return,p,l),v||(B=null);break e}O=W.next}}else if(A.tag===18){if(B=A.return,B===null)throw Error(n(341));B.lanes|=p,O=B.alternate,O!==null&&(O.lanes|=p),o0(B,p,l),B=null}else B=A.child;if(B!==null)B.return=A;else for(B=A;B!==null;){if(B===l){B=null;break}if(A=B.sibling,A!==null){A.return=B.return,B=A;break}B=B.return}A=B}}function Tl(l,f,p,v){l=null;for(var A=f,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var B=A.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var W=A.type;Fn(A.pendingProps.value,B.value)||(l!==null?l.push(W):l=[W])}}else if(A===ae.current){if(B=A.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(Ec):l=[Ec])}A=A.return}l!==null&&l0(f,l,p,v),f.flags|=262144}function fh(l){for(l=l.firstContext;l!==null;){if(!Fn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function bo(l){vo=l,vs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gr(l){return Gw(vo,l)}function hh(l,f){return vo===null&&bo(l),Gw(l,f)}function Gw(l,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},vs===null){if(l===null)throw Error(n(308));vs=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else vs=vs.next=f;return p}var W4=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){f.aborted=!0,l.forEach(function(p){return p()})}},Y4=r.unstable_scheduleCallback,X4=r.unstable_NormalPriority,hr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function u0(){return{controller:new W4,data:new Map,refCount:0}}function Xu(l){l.refCount--,l.refCount===0&&Y4(X4,function(){l.controller.abort()})}var Qu=null,c0=0,Al=0,wl=null;function Q4(l,f){if(Qu===null){var p=Qu=[];c0=0,Al=dy(),wl={status:"pending",value:void 0,then:function(v){p.push(v)}}}return c0++,f.then(zw,zw),f}function zw(){if(--c0===0&&Qu!==null){wl!==null&&(wl.status="fulfilled");var l=Qu;Qu=null,Al=0,wl=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function Z4(l,f){var p=[],v={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return l.then(function(){v.status="fulfilled",v.value=f;for(var A=0;A<p.length;A++)(0,p[A])(f)},function(A){for(v.status="rejected",v.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),v}var Hw=H.S;H.S=function(l,f){II=Ie(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&Q4(l,f),Hw!==null&&Hw(l,f)};var xo=$(null);function f0(){var l=xo.current;return l!==null?l:Ut.pooledCache}function dh(l,f){f===null?Z(xo,xo.current):Z(xo,f.pool)}function Kw(){var l=f0();return l===null?null:{parent:hr._currentValue,pool:l}}var _l=Error(n(460)),h0=Error(n(474)),ph=Error(n(542)),gh={then:function(){}};function qw(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Vw(l,f,p){switch(p=l[p],p===void 0?l.push(f):p!==f&&(f.then(ps,ps),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Yw(l),l;default:if(typeof f.status=="string")f.then(ps,ps);else{if(l=Ut,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=f,l.status="pending",l.then(function(v){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=v}},function(v){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Yw(l),l}throw Eo=f,_l}}function So(l){try{var f=l._init;return f(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Eo=p,_l):p}}var Eo=null;function Ww(){if(Eo===null)throw Error(n(459));var l=Eo;return Eo=null,l}function Yw(l){if(l===_l||l===ph)throw Error(n(483))}var Il=null,Zu=0;function mh(l){var f=Zu;return Zu+=1,Il===null&&(Il=[]),Vw(Il,l,f)}function Ju(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function yh(l,f){throw f.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(f),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function Xw(l){function f(be,ge){if(l){var we=be.deletions;we===null?(be.deletions=[ge],be.flags|=16):we.push(ge)}}function p(be,ge){if(!l)return null;for(;ge!==null;)f(be,ge),ge=ge.sibling;return null}function v(be){for(var ge=new Map;be!==null;)be.key!==null?ge.set(be.key,be):ge.set(be.index,be),be=be.sibling;return ge}function A(be,ge){return be=ms(be,ge),be.index=0,be.sibling=null,be}function O(be,ge,we){return be.index=we,l?(we=be.alternate,we!==null?(we=we.index,we<ge?(be.flags|=67108866,ge):we):(be.flags|=67108866,ge)):(be.flags|=1048576,ge)}function B(be){return l&&be.alternate===null&&(be.flags|=67108866),be}function W(be,ge,we,ze){return ge===null||ge.tag!==6?(ge=e0(we,be.mode,ze),ge.return=be,ge):(ge=A(ge,we),ge.return=be,ge)}function he(be,ge,we,ze){var st=we.type;return st===x?Fe(be,ge,we.props.children,ze,we.key):ge!==null&&(ge.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===C&&So(st)===ge.type)?(ge=A(ge,we.props),Ju(ge,we),ge.return=be,ge):(ge=uh(we.type,we.key,we.props,null,be.mode,ze),Ju(ge,we),ge.return=be,ge)}function _e(be,ge,we,ze){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==we.containerInfo||ge.stateNode.implementation!==we.implementation?(ge=t0(we,be.mode,ze),ge.return=be,ge):(ge=A(ge,we.children||[]),ge.return=be,ge)}function Fe(be,ge,we,ze,st){return ge===null||ge.tag!==7?(ge=mo(we,be.mode,ze,st),ge.return=be,ge):(ge=A(ge,we),ge.return=be,ge)}function He(be,ge,we){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=e0(""+ge,be.mode,we),ge.return=be,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:return we=uh(ge.type,ge.key,ge.props,null,be.mode,we),Ju(we,ge),we.return=be,we;case y:return ge=t0(ge,be.mode,we),ge.return=be,ge;case C:return ge=So(ge),He(be,ge,we)}if(V(ge)||N(ge))return ge=mo(ge,be.mode,we,null),ge.return=be,ge;if(typeof ge.then=="function")return He(be,mh(ge),we);if(ge.$$typeof===T)return He(be,hh(be,ge),we);yh(be,ge)}return null}function Oe(be,ge,we,ze){var st=ge!==null?ge.key:null;if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return st!==null?null:W(be,ge,""+we,ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case m:return we.key===st?he(be,ge,we,ze):null;case y:return we.key===st?_e(be,ge,we,ze):null;case C:return we=So(we),Oe(be,ge,we,ze)}if(V(we)||N(we))return st!==null?null:Fe(be,ge,we,ze,null);if(typeof we.then=="function")return Oe(be,ge,mh(we),ze);if(we.$$typeof===T)return Oe(be,ge,hh(be,we),ze);yh(be,we)}return null}function De(be,ge,we,ze,st){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return be=be.get(we)||null,W(ge,be,""+ze,st);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case m:return be=be.get(ze.key===null?we:ze.key)||null,he(ge,be,ze,st);case y:return be=be.get(ze.key===null?we:ze.key)||null,_e(ge,be,ze,st);case C:return ze=So(ze),De(be,ge,we,ze,st)}if(V(ze)||N(ze))return be=be.get(we)||null,Fe(ge,be,ze,st,null);if(typeof ze.then=="function")return De(be,ge,we,mh(ze),st);if(ze.$$typeof===T)return De(be,ge,we,hh(ge,ze),st);yh(ge,ze)}return null}function tt(be,ge,we,ze){for(var st=null,Tt=null,rt=ge,gt=ge=0,St=null;rt!==null&&gt<we.length;gt++){rt.index>gt?(St=rt,rt=null):St=rt.sibling;var At=Oe(be,rt,we[gt],ze);if(At===null){rt===null&&(rt=St);break}l&&rt&&At.alternate===null&&f(be,rt),ge=O(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At,rt=St}if(gt===we.length)return p(be,rt),Et&&ys(be,gt),st;if(rt===null){for(;gt<we.length;gt++)rt=He(be,we[gt],ze),rt!==null&&(ge=O(rt,ge,gt),Tt===null?st=rt:Tt.sibling=rt,Tt=rt);return Et&&ys(be,gt),st}for(rt=v(rt);gt<we.length;gt++)St=De(rt,be,gt,we[gt],ze),St!==null&&(l&&St.alternate!==null&&rt.delete(St.key===null?gt:St.key),ge=O(St,ge,gt),Tt===null?st=St:Tt.sibling=St,Tt=St);return l&&rt.forEach(function(Ua){return f(be,Ua)}),Et&&ys(be,gt),st}function ot(be,ge,we,ze){if(we==null)throw Error(n(151));for(var st=null,Tt=null,rt=ge,gt=ge=0,St=null,At=we.next();rt!==null&&!At.done;gt++,At=we.next()){rt.index>gt?(St=rt,rt=null):St=rt.sibling;var Ua=Oe(be,rt,At.value,ze);if(Ua===null){rt===null&&(rt=St);break}l&&rt&&Ua.alternate===null&&f(be,rt),ge=O(Ua,ge,gt),Tt===null?st=Ua:Tt.sibling=Ua,Tt=Ua,rt=St}if(At.done)return p(be,rt),Et&&ys(be,gt),st;if(rt===null){for(;!At.done;gt++,At=we.next())At=He(be,At.value,ze),At!==null&&(ge=O(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At);return Et&&ys(be,gt),st}for(rt=v(rt);!At.done;gt++,At=we.next())At=De(rt,be,gt,At.value,ze),At!==null&&(l&&At.alternate!==null&&rt.delete(At.key===null?gt:At.key),ge=O(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At);return l&&rt.forEach(function(u6){return f(be,u6)}),Et&&ys(be,gt),st}function kt(be,ge,we,ze){if(typeof we=="object"&&we!==null&&we.type===x&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case m:e:{for(var st=we.key;ge!==null;){if(ge.key===st){if(st=we.type,st===x){if(ge.tag===7){p(be,ge.sibling),ze=A(ge,we.props.children),ze.return=be,be=ze;break e}}else if(ge.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===C&&So(st)===ge.type){p(be,ge.sibling),ze=A(ge,we.props),Ju(ze,we),ze.return=be,be=ze;break e}p(be,ge);break}else f(be,ge);ge=ge.sibling}we.type===x?(ze=mo(we.props.children,be.mode,ze,we.key),ze.return=be,be=ze):(ze=uh(we.type,we.key,we.props,null,be.mode,ze),Ju(ze,we),ze.return=be,be=ze)}return B(be);case y:e:{for(st=we.key;ge!==null;){if(ge.key===st)if(ge.tag===4&&ge.stateNode.containerInfo===we.containerInfo&&ge.stateNode.implementation===we.implementation){p(be,ge.sibling),ze=A(ge,we.children||[]),ze.return=be,be=ze;break e}else{p(be,ge);break}else f(be,ge);ge=ge.sibling}ze=t0(we,be.mode,ze),ze.return=be,be=ze}return B(be);case C:return we=So(we),kt(be,ge,we,ze)}if(V(we))return tt(be,ge,we,ze);if(N(we)){if(st=N(we),typeof st!="function")throw Error(n(150));return we=st.call(we),ot(be,ge,we,ze)}if(typeof we.then=="function")return kt(be,ge,mh(we),ze);if(we.$$typeof===T)return kt(be,ge,hh(be,we),ze);yh(be,we)}return typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint"?(we=""+we,ge!==null&&ge.tag===6?(p(be,ge.sibling),ze=A(ge,we),ze.return=be,be=ze):(p(be,ge),ze=e0(we,be.mode,ze),ze.return=be,be=ze),B(be)):p(be,ge)}return function(be,ge,we,ze){try{Zu=0;var st=kt(be,ge,we,ze);return Il=null,st}catch(rt){if(rt===_l||rt===ph)throw rt;var Tt=$n(29,rt,null,be.mode);return Tt.lanes=ze,Tt.return=be,Tt}finally{}}}var To=Xw(!0),Qw=Xw(!1),Sa=!1;function d0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ea(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ta(l,f,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(_t&2)!==0){var A=v.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),v.pending=f,f=lh(l),kw(l,null,p),f}return oh(l,v,f,p),lh(l)}function ec(l,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,We(l,p)}}function g0(l,f){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var A=null,O=null;if(p=p.firstBaseUpdate,p!==null){do{var B={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};O===null?A=O=B:O=O.next=B,p=p.next}while(p!==null);O===null?A=O=f:O=O.next=f}else A=O=f;p={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=f}var m0=!1;function tc(){if(m0){var l=wl;if(l!==null)throw l}}function rc(l,f,p,v){m0=!1;var A=l.updateQueue;Sa=!1;var O=A.firstBaseUpdate,B=A.lastBaseUpdate,W=A.shared.pending;if(W!==null){A.shared.pending=null;var he=W,_e=he.next;he.next=null,B===null?O=_e:B.next=_e,B=he;var Fe=l.alternate;Fe!==null&&(Fe=Fe.updateQueue,W=Fe.lastBaseUpdate,W!==B&&(W===null?Fe.firstBaseUpdate=_e:W.next=_e,Fe.lastBaseUpdate=he))}if(O!==null){var He=A.baseState;B=0,Fe=_e=he=null,W=O;do{var Oe=W.lane&-536870913,De=Oe!==W.lane;if(De?(xt&Oe)===Oe:(v&Oe)===Oe){Oe!==0&&Oe===Al&&(m0=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var tt=l,ot=W;Oe=f;var kt=p;switch(ot.tag){case 1:if(tt=ot.payload,typeof tt=="function"){He=tt.call(kt,He,Oe);break e}He=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=ot.payload,Oe=typeof tt=="function"?tt.call(kt,He,Oe):tt,Oe==null)break e;He=d({},He,Oe);break e;case 2:Sa=!0}}Oe=W.callback,Oe!==null&&(l.flags|=64,De&&(l.flags|=8192),De=A.callbacks,De===null?A.callbacks=[Oe]:De.push(Oe))}else De={lane:Oe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Fe===null?(_e=Fe=De,he=He):Fe=Fe.next=De,B|=Oe;if(W=W.next,W===null){if(W=A.shared.pending,W===null)break;De=W,W=De.next,De.next=null,A.lastBaseUpdate=De,A.shared.pending=null}}while(!0);Fe===null&&(he=He),A.baseState=he,A.firstBaseUpdate=_e,A.lastBaseUpdate=Fe,O===null&&(A.shared.lanes=0),Oa|=B,l.lanes=B,l.memoizedState=He}}function Zw(l,f){if(typeof l!="function")throw Error(n(191,l));l.call(f)}function Jw(l,f){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)Zw(p[l],f)}var Ol=$(null),vh=$(0);function e_(l,f){l=Os,Z(vh,l),Z(Ol,f),Os=l|f.baseLanes}function y0(){Z(vh,Os),Z(Ol,Ol.current)}function v0(){Os=vh.current,F(Ol),F(vh)}var Gn=$(null),hi=null;function Aa(l){var f=l.alternate;Z(lr,lr.current&1),Z(Gn,l),hi===null&&(f===null||Ol.current!==null||f.memoizedState!==null)&&(hi=l)}function b0(l){Z(lr,lr.current),Z(Gn,l),hi===null&&(hi=l)}function t_(l){l.tag===22?(Z(lr,lr.current),Z(Gn,l),hi===null&&(hi=l)):wa()}function wa(){Z(lr,lr.current),Z(Gn,Gn.current)}function zn(l){F(Gn),hi===l&&(hi=null),F(lr)}var lr=$(0);function bh(l){for(var f=l;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||wy(p)||_y(p)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var xs=0,pt=null,Pt=null,dr=null,xh=!1,Rl=!1,Ao=!1,Sh=0,nc=0,Ll=null,J4=0;function ir(){throw Error(n(321))}function x0(l,f){if(f===null)return!1;for(var p=0;p<f.length&&p<l.length;p++)if(!Fn(l[p],f[p]))return!1;return!0}function S0(l,f,p,v,A,O){return xs=O,pt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,H.H=l===null||l.memoizedState===null?U_:N0,Ao=!1,O=p(v,A),Ao=!1,Rl&&(O=n_(f,p,v,A)),r_(l),O}function r_(l){H.H=ac;var f=Pt!==null&&Pt.next!==null;if(xs=0,dr=Pt=pt=null,xh=!1,nc=0,Ll=null,f)throw Error(n(300));l===null||pr||(l=l.dependencies,l!==null&&fh(l)&&(pr=!0))}function n_(l,f,p,v){pt=l;var A=0;do{if(Rl&&(Ll=null),nc=0,Rl=!1,25<=A)throw Error(n(301));if(A+=1,dr=Pt=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}H.H=j_,O=f(p,v)}while(Rl);return O}function e8(){var l=H.H,f=l.useState()[0];return f=typeof f.then=="function"?ic(f):f,l=l.useState()[0],(Pt!==null?Pt.memoizedState:null)!==l&&(pt.flags|=1024),f}function E0(){var l=Sh!==0;return Sh=0,l}function T0(l,f,p){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~p}function A0(l){if(xh){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}xh=!1}xs=0,dr=Pt=pt=null,Rl=!1,nc=Sh=0,Ll=null}function fn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?pt.memoizedState=dr=l:dr=dr.next=l,dr}function ur(){if(Pt===null){var l=pt.alternate;l=l!==null?l.memoizedState:null}else l=Pt.next;var f=dr===null?pt.memoizedState:dr.next;if(f!==null)dr=f,Pt=l;else{if(l===null)throw pt.alternate===null?Error(n(467)):Error(n(310));Pt=l,l={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},dr===null?pt.memoizedState=dr=l:dr=dr.next=l}return dr}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(l){var f=nc;return nc+=1,Ll===null&&(Ll=[]),l=Vw(Ll,l,f),f=pt,(dr===null?f.memoizedState:dr.next)===null&&(f=f.alternate,H.H=f===null||f.memoizedState===null?U_:N0),l}function Th(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return ic(l);if(l.$$typeof===T)return Gr(l)}throw Error(n(438,String(l)))}function w0(l){var f=null,p=pt.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var v=pt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=Eh(),pt.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(l),v=0;v<l;v++)p[v]=D;return f.index++,p}function Ss(l,f){return typeof f=="function"?f(l):f}function Ah(l){var f=ur();return _0(f,Pt,l)}function _0(l,f,p){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var A=l.baseQueue,O=v.pending;if(O!==null){if(A!==null){var B=A.next;A.next=O.next,O.next=B}f.baseQueue=A=O,v.pending=null}if(O=l.baseState,A===null)l.memoizedState=O;else{f=A.next;var W=B=null,he=null,_e=f,Fe=!1;do{var He=_e.lane&-536870913;if(He!==_e.lane?(xt&He)===He:(xs&He)===He){var Oe=_e.revertLane;if(Oe===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),He===Al&&(Fe=!0);else if((xs&Oe)===Oe){_e=_e.next,Oe===Al&&(Fe=!0);continue}else He={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},he===null?(W=he=He,B=O):he=he.next=He,pt.lanes|=Oe,Oa|=Oe;He=_e.action,Ao&&p(O,He),O=_e.hasEagerState?_e.eagerState:p(O,He)}else Oe={lane:He,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},he===null?(W=he=Oe,B=O):he=he.next=Oe,pt.lanes|=He,Oa|=He;_e=_e.next}while(_e!==null&&_e!==f);if(he===null?B=O:he.next=W,!Fn(O,l.memoizedState)&&(pr=!0,Fe&&(p=wl,p!==null)))throw p;l.memoizedState=O,l.baseState=B,l.baseQueue=he,v.lastRenderedState=O}return A===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function I0(l){var f=ur(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var v=p.dispatch,A=p.pending,O=f.memoizedState;if(A!==null){p.pending=null;var B=A=A.next;do O=l(O,B.action),B=B.next;while(B!==A);Fn(O,f.memoizedState)||(pr=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),p.lastRenderedState=O}return[O,v]}function i_(l,f,p){var v=pt,A=ur(),O=Et;if(O){if(p===void 0)throw Error(n(407));p=p()}else p=f();var B=!Fn((Pt||A).memoizedState,p);if(B&&(A.memoizedState=p,pr=!0),A=A.queue,L0(o_.bind(null,v,A,l),[l]),A.getSnapshot!==f||B||dr!==null&&dr.memoizedState.tag&1){if(v.flags|=2048,Cl(9,{destroy:void 0},a_.bind(null,v,A,p,f),null),Ut===null)throw Error(n(349));O||(xs&127)!==0||s_(v,f,p)}return p}function s_(l,f,p){l.flags|=16384,l={getSnapshot:f,value:p},f=pt.updateQueue,f===null?(f=Eh(),pt.updateQueue=f,f.stores=[l]):(p=f.stores,p===null?f.stores=[l]:p.push(l))}function a_(l,f,p,v){f.value=p,f.getSnapshot=v,l_(f)&&u_(l)}function o_(l,f,p){return p(function(){l_(f)&&u_(l)})}function l_(l){var f=l.getSnapshot;l=l.value;try{var p=f();return!Fn(l,p)}catch{return!0}}function u_(l){var f=go(l,2);f!==null&&Rn(f,l,2)}function O0(l){var f=fn();if(typeof l=="function"){var p=l;if(l=p(),Ao){Je(!0);try{p()}finally{Je(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:l},f}function c_(l,f,p,v){return l.baseState=p,_0(l,Pt,typeof v=="function"?v:Ss)}function t8(l,f,p,v,A){if(Ih(l))throw Error(n(485));if(l=f.action,l!==null){var O={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){O.listeners.push(B)}};H.T!==null?p(!0):O.isTransition=!1,v(O),p=f.pending,p===null?(O.next=f.pending=O,f_(f,O)):(O.next=p.next,f.pending=p.next=O)}}function f_(l,f){var p=f.action,v=f.payload,A=l.state;if(f.isTransition){var O=H.T,B={};H.T=B;try{var W=p(A,v),he=H.S;he!==null&&he(B,W),h_(l,f,W)}catch(_e){R0(l,f,_e)}finally{O!==null&&B.types!==null&&(O.types=B.types),H.T=O}}else try{O=p(A,v),h_(l,f,O)}catch(_e){R0(l,f,_e)}}function h_(l,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){d_(l,f,v)},function(v){return R0(l,f,v)}):d_(l,f,p)}function d_(l,f,p){f.status="fulfilled",f.value=p,p_(f),l.state=p,f=l.pending,f!==null&&(p=f.next,p===f?l.pending=null:(p=p.next,f.next=p,f_(l,p)))}function R0(l,f,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=p,p_(f),f=f.next;while(f!==v)}l.action=null}function p_(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function g_(l,f){return f}function m_(l,f){if(Et){var p=Ut.formState;if(p!==null){e:{var v=pt;if(Et){if(Ht){t:{for(var A=Ht,O=fi;A.nodeType!==8;){if(!O){A=null;break t}if(A=di(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Ht=di(A.nextSibling),v=A.data==="F!";break e}}ba(v)}v=!1}v&&(f=p[0])}}return p=fn(),p.memoizedState=p.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g_,lastRenderedState:f},p.queue=v,p=M_.bind(null,pt,v),v.dispatch=p,v=O0(!1),O=M0.bind(null,pt,!1,v.queue),v=fn(),A={state:f,dispatch:null,action:l,pending:null},v.queue=A,p=t8.bind(null,pt,A,O,p),A.dispatch=p,v.memoizedState=l,[f,p,!1]}function y_(l){var f=ur();return v_(f,Pt,l)}function v_(l,f,p){if(f=_0(l,f,g_)[0],l=Ah(Ss)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=ic(f)}catch(B){throw B===_l?ph:B}else v=f;f=ur();var A=f.queue,O=A.dispatch;return p!==f.memoizedState&&(pt.flags|=2048,Cl(9,{destroy:void 0},r8.bind(null,A,p),null)),[v,O,l]}function r8(l,f){l.action=f}function b_(l){var f=ur(),p=Pt;if(p!==null)return v_(f,p,l);ur(),f=f.memoizedState,p=ur();var v=p.queue.dispatch;return p.memoizedState=l,[f,v,!1]}function Cl(l,f,p,v){return l={tag:l,create:p,deps:v,inst:f,next:null},f=pt.updateQueue,f===null&&(f=Eh(),pt.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,f.lastEffect=l),l}function x_(){return ur().memoizedState}function wh(l,f,p,v){var A=fn();pt.flags|=l,A.memoizedState=Cl(1|f,{destroy:void 0},p,v===void 0?null:v)}function _h(l,f,p,v){var A=ur();v=v===void 0?null:v;var O=A.memoizedState.inst;Pt!==null&&v!==null&&x0(v,Pt.memoizedState.deps)?A.memoizedState=Cl(f,O,p,v):(pt.flags|=l,A.memoizedState=Cl(1|f,O,p,v))}function S_(l,f){wh(8390656,8,l,f)}function L0(l,f){_h(2048,8,l,f)}function n8(l){pt.flags|=4;var f=pt.updateQueue;if(f===null)f=Eh(),pt.updateQueue=f,f.events=[l];else{var p=f.events;p===null?f.events=[l]:p.push(l)}}function E_(l){var f=ur().memoizedState;return n8({ref:f,nextImpl:l}),function(){if((_t&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}function T_(l,f){return _h(4,2,l,f)}function A_(l,f){return _h(4,4,l,f)}function w_(l,f){if(typeof f=="function"){l=l();var p=f(l);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function __(l,f,p){p=p!=null?p.concat([l]):null,_h(4,4,w_.bind(null,f,l),p)}function C0(){}function I_(l,f){var p=ur();f=f===void 0?null:f;var v=p.memoizedState;return f!==null&&x0(f,v[1])?v[0]:(p.memoizedState=[l,f],l)}function O_(l,f){var p=ur();f=f===void 0?null:f;var v=p.memoizedState;if(f!==null&&x0(f,v[1]))return v[0];if(v=l(),Ao){Je(!0);try{l()}finally{Je(!1)}}return p.memoizedState=[v,f],v}function P0(l,f,p){return p===void 0||(xs&1073741824)!==0&&(xt&261930)===0?l.memoizedState=f:(l.memoizedState=p,l=RI(),pt.lanes|=l,Oa|=l,p)}function R_(l,f,p,v){return Fn(p,f)?p:Ol.current!==null?(l=P0(l,p,v),Fn(l,f)||(pr=!0),l):(xs&42)===0||(xs&1073741824)!==0&&(xt&261930)===0?(pr=!0,l.memoizedState=p):(l=RI(),pt.lanes|=l,Oa|=l,f)}function L_(l,f,p,v,A){var O=K.p;K.p=O!==0&&8>O?O:8;var B=H.T,W={};H.T=W,M0(l,!1,f,p);try{var he=A(),_e=H.S;if(_e!==null&&_e(W,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var Fe=Z4(he,v);sc(l,f,Fe,qn(l))}else sc(l,f,v,qn(l))}catch(He){sc(l,f,{then:function(){},status:"rejected",reason:He},qn())}finally{K.p=O,B!==null&&W.types!==null&&(B.types=W.types),H.T=B}}function i8(){}function D0(l,f,p,v){if(l.tag!==5)throw Error(n(476));var A=C_(l).queue;L_(l,A,f,Y,p===null?i8:function(){return P_(l),p(v)})}function C_(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:Y},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:p},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function P_(l){var f=C_(l);f.next===null&&(f=l.alternate.memoizedState),sc(l,f.next.queue,{},qn())}function k0(){return Gr(Ec)}function D_(){return ur().memoizedState}function k_(){return ur().memoizedState}function s8(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var p=qn();l=Ea(p);var v=Ta(f,l,p);v!==null&&(Rn(v,f,p),ec(v,f,p)),f={cache:u0()},l.payload=f;return}f=f.return}}function a8(l,f,p){var v=qn();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ih(l)?N_(f,p):(p=Zm(l,f,p,v),p!==null&&(Rn(p,l,v),B_(p,f,v)))}function M_(l,f,p){var v=qn();sc(l,f,p,v)}function sc(l,f,p,v){var A={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ih(l))N_(f,A);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var B=f.lastRenderedState,W=O(B,p);if(A.hasEagerState=!0,A.eagerState=W,Fn(W,B))return oh(l,f,A,0),Ut===null&&ah(),!1}catch{}finally{}if(p=Zm(l,f,A,v),p!==null)return Rn(p,l,v),B_(p,f,v),!0}return!1}function M0(l,f,p,v){if(v={lane:2,revertLane:dy(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Ih(l)){if(f)throw Error(n(479))}else f=Zm(l,p,v,2),f!==null&&Rn(f,l,2)}function Ih(l){var f=l.alternate;return l===pt||f!==null&&f===pt}function N_(l,f){Rl=xh=!0;var p=l.pending;p===null?f.next=f:(f.next=p.next,p.next=f),l.pending=f}function B_(l,f,p){if((p&4194048)!==0){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,We(l,p)}}var ac={readContext:Gr,use:Th,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useLayoutEffect:ir,useInsertionEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useSyncExternalStore:ir,useId:ir,useHostTransitionStatus:ir,useFormState:ir,useActionState:ir,useOptimistic:ir,useMemoCache:ir,useCacheRefresh:ir};ac.useEffectEvent=ir;var U_={readContext:Gr,use:Th,useCallback:function(l,f){return fn().memoizedState=[l,f===void 0?null:f],l},useContext:Gr,useEffect:S_,useImperativeHandle:function(l,f,p){p=p!=null?p.concat([l]):null,wh(4194308,4,w_.bind(null,f,l),p)},useLayoutEffect:function(l,f){return wh(4194308,4,l,f)},useInsertionEffect:function(l,f){wh(4,2,l,f)},useMemo:function(l,f){var p=fn();f=f===void 0?null:f;var v=l();if(Ao){Je(!0);try{l()}finally{Je(!1)}}return p.memoizedState=[v,f],v},useReducer:function(l,f,p){var v=fn();if(p!==void 0){var A=p(f);if(Ao){Je(!0);try{p(f)}finally{Je(!1)}}}else A=f;return v.memoizedState=v.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},v.queue=l,l=l.dispatch=a8.bind(null,pt,l),[v.memoizedState,l]},useRef:function(l){var f=fn();return l={current:l},f.memoizedState=l},useState:function(l){l=O0(l);var f=l.queue,p=M_.bind(null,pt,f);return f.dispatch=p,[l.memoizedState,p]},useDebugValue:C0,useDeferredValue:function(l,f){var p=fn();return P0(p,l,f)},useTransition:function(){var l=O0(!1);return l=L_.bind(null,pt,l.queue,!0,!1),fn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,p){var v=pt,A=fn();if(Et){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),Ut===null)throw Error(n(349));(xt&127)!==0||s_(v,f,p)}A.memoizedState=p;var O={value:p,getSnapshot:f};return A.queue=O,S_(o_.bind(null,v,O,l),[l]),v.flags|=2048,Cl(9,{destroy:void 0},a_.bind(null,v,O,p,f),null),p},useId:function(){var l=fn(),f=Ut.identifierPrefix;if(Et){var p=Fi,v=ji;p=(v&~(1<<32-Xe(v)-1)).toString(32)+p,f="_"+f+"R_"+p,p=Sh++,0<p&&(f+="H"+p.toString(32)),f+="_"}else p=J4++,f="_"+f+"r_"+p.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:k0,useFormState:m_,useActionState:m_,useOptimistic:function(l){var f=fn();f.memoizedState=f.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=M0.bind(null,pt,!0,p),p.dispatch=f,[l,f]},useMemoCache:w0,useCacheRefresh:function(){return fn().memoizedState=s8.bind(null,pt)},useEffectEvent:function(l){var f=fn(),p={impl:l};return f.memoizedState=p,function(){if((_t&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},N0={readContext:Gr,use:Th,useCallback:I_,useContext:Gr,useEffect:L0,useImperativeHandle:__,useInsertionEffect:T_,useLayoutEffect:A_,useMemo:O_,useReducer:Ah,useRef:x_,useState:function(){return Ah(Ss)},useDebugValue:C0,useDeferredValue:function(l,f){var p=ur();return R_(p,Pt.memoizedState,l,f)},useTransition:function(){var l=Ah(Ss)[0],f=ur().memoizedState;return[typeof l=="boolean"?l:ic(l),f]},useSyncExternalStore:i_,useId:D_,useHostTransitionStatus:k0,useFormState:y_,useActionState:y_,useOptimistic:function(l,f){var p=ur();return c_(p,Pt,l,f)},useMemoCache:w0,useCacheRefresh:k_};N0.useEffectEvent=E_;var j_={readContext:Gr,use:Th,useCallback:I_,useContext:Gr,useEffect:L0,useImperativeHandle:__,useInsertionEffect:T_,useLayoutEffect:A_,useMemo:O_,useReducer:I0,useRef:x_,useState:function(){return I0(Ss)},useDebugValue:C0,useDeferredValue:function(l,f){var p=ur();return Pt===null?P0(p,l,f):R_(p,Pt.memoizedState,l,f)},useTransition:function(){var l=I0(Ss)[0],f=ur().memoizedState;return[typeof l=="boolean"?l:ic(l),f]},useSyncExternalStore:i_,useId:D_,useHostTransitionStatus:k0,useFormState:b_,useActionState:b_,useOptimistic:function(l,f){var p=ur();return Pt!==null?c_(p,Pt,l,f):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:w0,useCacheRefresh:k_};j_.useEffectEvent=E_;function B0(l,f,p,v){f=l.memoizedState,p=p(v,f),p=p==null?f:d({},f,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var U0={enqueueSetState:function(l,f,p){l=l._reactInternals;var v=qn(),A=Ea(v);A.payload=f,p!=null&&(A.callback=p),f=Ta(l,A,v),f!==null&&(Rn(f,l,v),ec(f,l,v))},enqueueReplaceState:function(l,f,p){l=l._reactInternals;var v=qn(),A=Ea(v);A.tag=1,A.payload=f,p!=null&&(A.callback=p),f=Ta(l,A,v),f!==null&&(Rn(f,l,v),ec(f,l,v))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var p=qn(),v=Ea(p);v.tag=2,f!=null&&(v.callback=f),f=Ta(l,v,p),f!==null&&(Rn(f,l,p),ec(f,l,p))}};function F_(l,f,p,v,A,O,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,O,B):f.prototype&&f.prototype.isPureReactComponent?!qu(p,v)||!qu(A,O):!0}function $_(l,f,p,v){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,v),f.state!==l&&U0.enqueueReplaceState(f,f.state,null)}function wo(l,f){var p=f;if("ref"in f){p={};for(var v in f)v!=="ref"&&(p[v]=f[v])}if(l=l.defaultProps){p===f&&(p=d({},p));for(var A in l)p[A]===void 0&&(p[A]=l[A])}return p}function G_(l){sh(l)}function z_(l){console.error(l)}function H_(l){sh(l)}function Oh(l,f){try{var p=l.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function K_(l,f,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function j0(l,f,p){return p=Ea(p),p.tag=3,p.payload={element:null},p.callback=function(){Oh(l,f)},p}function q_(l){return l=Ea(l),l.tag=3,l}function V_(l,f,p,v){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var O=v.value;l.payload=function(){return A(O)},l.callback=function(){K_(f,p,v)}}var B=p.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){K_(f,p,v),typeof A!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var W=v.stack;this.componentDidCatch(v.value,{componentStack:W!==null?W:""})})}function o8(l,f,p,v,A){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=p.alternate,f!==null&&Tl(f,p,A,!0),p=Gn.current,p!==null){switch(p.tag){case 31:case 13:return hi===null?Fh():p.alternate===null&&sr===0&&(sr=3),p.flags&=-257,p.flags|=65536,p.lanes=A,v===gh?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([v]):f.add(v),cy(l,v,A)),!1;case 22:return p.flags|=65536,v===gh?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([v]):p.add(v)),cy(l,v,A)),!1}throw Error(n(435,p.tag))}return cy(l,v,A),Fh(),!1}if(Et)return f=Gn.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,v!==i0&&(l=Error(n(422),{cause:v}),Yu(li(l,p)))):(v!==i0&&(f=Error(n(423),{cause:v}),Yu(li(f,p))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,v=li(v,p),A=j0(l.stateNode,v,A),g0(l,A),sr!==4&&(sr=2)),!1;var O=Error(n(520),{cause:v});if(O=li(O,p),pc===null?pc=[O]:pc.push(O),sr!==4&&(sr=2),f===null)return!0;v=li(v,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,l=A&-A,p.lanes|=l,l=j0(p.stateNode,v,l),g0(p,l),!1;case 1:if(f=p.type,O=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ra===null||!Ra.has(O))))return p.flags|=65536,A&=-A,p.lanes|=A,A=q_(A),V_(A,l,p,v),g0(p,A),!1}p=p.return}while(p!==null);return!1}var F0=Error(n(461)),pr=!1;function zr(l,f,p,v){f.child=l===null?Qw(f,null,p,v):To(f,l.child,p,v)}function W_(l,f,p,v,A){p=p.render;var O=f.ref;if("ref"in v){var B={};for(var W in v)W!=="ref"&&(B[W]=v[W])}else B=v;return bo(f),v=S0(l,f,p,B,O,A),W=E0(),l!==null&&!pr?(T0(l,f,A),Es(l,f,A)):(Et&&W&&r0(f),f.flags|=1,zr(l,f,v,A),f.child)}function Y_(l,f,p,v,A){if(l===null){var O=p.type;return typeof O=="function"&&!Jm(O)&&O.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=O,X_(l,f,O,v,A)):(l=uh(p.type,null,v,f,f.mode,A),l.ref=f.ref,l.return=f,f.child=l)}if(O=l.child,!W0(l,A)){var B=O.memoizedProps;if(p=p.compare,p=p!==null?p:qu,p(B,v)&&l.ref===f.ref)return Es(l,f,A)}return f.flags|=1,l=ms(O,v),l.ref=f.ref,l.return=f,f.child=l}function X_(l,f,p,v,A){if(l!==null){var O=l.memoizedProps;if(qu(O,v)&&l.ref===f.ref)if(pr=!1,f.pendingProps=v=O,W0(l,A))(l.flags&131072)!==0&&(pr=!0);else return f.lanes=l.lanes,Es(l,f,A)}return $0(l,f,p,v,A)}function Q_(l,f,p,v){var A=v.children,O=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((f.flags&128)!==0){if(O=O!==null?O.baseLanes|p:p,l!==null){for(v=f.child=l.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;v=A&~O}else v=0,f.child=null;return Z_(l,f,O,p,v)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&dh(f,O!==null?O.cachePool:null),O!==null?e_(f,O):y0(),t_(f);else return v=f.lanes=536870912,Z_(l,f,O!==null?O.baseLanes|p:p,p,v)}else O!==null?(dh(f,O.cachePool),e_(f,O),wa(),f.memoizedState=null):(l!==null&&dh(f,null),y0(),wa());return zr(l,f,A,p),f.child}function oc(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Z_(l,f,p,v,A){var O=f0();return O=O===null?null:{parent:hr._currentValue,pool:O},f.memoizedState={baseLanes:p,cachePool:O},l!==null&&dh(f,null),y0(),t_(f),l!==null&&Tl(l,f,v,!0),f.childLanes=A,null}function Rh(l,f){return f=Ch({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function J_(l,f,p){return To(f,l.child,null,p),l=Rh(f,f.pendingProps),l.flags|=2,zn(f),f.memoizedState=null,l}function l8(l,f,p){var v=f.pendingProps,A=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(Et){if(v.mode==="hidden")return l=Rh(f,v),f.lanes=536870912,oc(null,l);if(b0(f),(l=Ht)?(l=fO(l,fi),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ya!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},p=Nw(l),p.return=f,f.child=p,$r=f,Ht=null)):l=null,l===null)throw ba(f);return f.lanes=536870912,null}return Rh(f,v)}var O=l.memoizedState;if(O!==null){var B=O.dehydrated;if(b0(f),A)if(f.flags&256)f.flags&=-257,f=J_(l,f,p);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(n(558));else if(pr||Tl(l,f,p,!1),A=(p&l.childLanes)!==0,pr||A){if(v=Ut,v!==null&&(B=Qe(v,p),B!==0&&B!==O.retryLane))throw O.retryLane=B,go(l,B),Rn(v,l,B),F0;Fh(),f=J_(l,f,p)}else l=O.treeContext,Ht=di(B.nextSibling),$r=f,Et=!0,va=null,fi=!1,l!==null&&jw(f,l),f=Rh(f,v),f.flags|=4096;return f}return l=ms(l.child,{mode:v.mode,children:v.children}),l.ref=f.ref,f.child=l,l.return=f,l}function Lh(l,f){var p=f.ref;if(p===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(l===null||l.ref!==p)&&(f.flags|=4194816)}}function $0(l,f,p,v,A){return bo(f),p=S0(l,f,p,v,void 0,A),v=E0(),l!==null&&!pr?(T0(l,f,A),Es(l,f,A)):(Et&&v&&r0(f),f.flags|=1,zr(l,f,p,A),f.child)}function eI(l,f,p,v,A,O){return bo(f),f.updateQueue=null,p=n_(f,v,p,A),r_(l),v=E0(),l!==null&&!pr?(T0(l,f,O),Es(l,f,O)):(Et&&v&&r0(f),f.flags|=1,zr(l,f,p,O),f.child)}function tI(l,f,p,v,A){if(bo(f),f.stateNode===null){var O=bl,B=p.contextType;typeof B=="object"&&B!==null&&(O=Gr(B)),O=new p(v,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=U0,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=v,O.state=f.memoizedState,O.refs={},d0(f),B=p.contextType,O.context=typeof B=="object"&&B!==null?Gr(B):bl,O.state=f.memoizedState,B=p.getDerivedStateFromProps,typeof B=="function"&&(B0(f,p,B,v),O.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(B=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),B!==O.state&&U0.enqueueReplaceState(O,O.state,null),rc(f,v,O,A),tc(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(l===null){O=f.stateNode;var W=f.memoizedProps,he=wo(p,W);O.props=he;var _e=O.context,Fe=p.contextType;B=bl,typeof Fe=="object"&&Fe!==null&&(B=Gr(Fe));var He=p.getDerivedStateFromProps;Fe=typeof He=="function"||typeof O.getSnapshotBeforeUpdate=="function",W=f.pendingProps!==W,Fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W||_e!==B)&&$_(f,O,v,B),Sa=!1;var Oe=f.memoizedState;O.state=Oe,rc(f,v,O,A),tc(),_e=f.memoizedState,W||Oe!==_e||Sa?(typeof He=="function"&&(B0(f,p,He,v),_e=f.memoizedState),(he=Sa||F_(f,p,he,v,Oe,_e,B))?(Fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=_e),O.props=v,O.state=_e,O.context=B,v=he):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{O=f.stateNode,p0(l,f),B=f.memoizedProps,Fe=wo(p,B),O.props=Fe,He=f.pendingProps,Oe=O.context,_e=p.contextType,he=bl,typeof _e=="object"&&_e!==null&&(he=Gr(_e)),W=p.getDerivedStateFromProps,(_e=typeof W=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==He||Oe!==he)&&$_(f,O,v,he),Sa=!1,Oe=f.memoizedState,O.state=Oe,rc(f,v,O,A),tc();var De=f.memoizedState;B!==He||Oe!==De||Sa||l!==null&&l.dependencies!==null&&fh(l.dependencies)?(typeof W=="function"&&(B0(f,p,W,v),De=f.memoizedState),(Fe=Sa||F_(f,p,Fe,v,Oe,De,he)||l!==null&&l.dependencies!==null&&fh(l.dependencies))?(_e||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,De,he),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,De,he)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||B===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=De),O.props=v,O.state=De,O.context=he,v=Fe):(typeof O.componentDidUpdate!="function"||B===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=1024),v=!1)}return O=v,Lh(l,f),v=(f.flags&128)!==0,O||v?(O=f.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,l!==null&&v?(f.child=To(f,l.child,null,A),f.child=To(f,null,p,A)):zr(l,f,p,A),f.memoizedState=O.state,l=f.child):l=Es(l,f,A),l}function rI(l,f,p,v){return yo(),f.flags|=256,zr(l,f,p,v),f.child}var G0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z0(l){return{baseLanes:l,cachePool:Kw()}}function H0(l,f,p){return l=l!==null?l.childLanes&~p:0,f&&(l|=Kn),l}function nI(l,f,p){var v=f.pendingProps,A=!1,O=(f.flags&128)!==0,B;if((B=O)||(B=l!==null&&l.memoizedState===null?!1:(lr.current&2)!==0),B&&(A=!0,f.flags&=-129),B=(f.flags&32)!==0,f.flags&=-33,l===null){if(Et){if(A?Aa(f):wa(),(l=Ht)?(l=fO(l,fi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ya!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},p=Nw(l),p.return=f,f.child=p,$r=f,Ht=null)):l=null,l===null)throw ba(f);return _y(l)?f.lanes=32:f.lanes=536870912,null}var W=v.children;return v=v.fallback,A?(wa(),A=f.mode,W=Ch({mode:"hidden",children:W},A),v=mo(v,A,p,null),W.return=f,v.return=f,W.sibling=v,f.child=W,v=f.child,v.memoizedState=z0(p),v.childLanes=H0(l,B,p),f.memoizedState=G0,oc(null,v)):(Aa(f),K0(f,W))}var he=l.memoizedState;if(he!==null&&(W=he.dehydrated,W!==null)){if(O)f.flags&256?(Aa(f),f.flags&=-257,f=q0(l,f,p)):f.memoizedState!==null?(wa(),f.child=l.child,f.flags|=128,f=null):(wa(),W=v.fallback,A=f.mode,v=Ch({mode:"visible",children:v.children},A),W=mo(W,A,p,null),W.flags|=2,v.return=f,W.return=f,v.sibling=W,f.child=v,To(f,l.child,null,p),v=f.child,v.memoizedState=z0(p),v.childLanes=H0(l,B,p),f.memoizedState=G0,f=oc(null,v));else if(Aa(f),_y(W)){if(B=W.nextSibling&&W.nextSibling.dataset,B)var _e=B.dgst;B=_e,v=Error(n(419)),v.stack="",v.digest=B,Yu({value:v,source:null,stack:null}),f=q0(l,f,p)}else if(pr||Tl(l,f,p,!1),B=(p&l.childLanes)!==0,pr||B){if(B=Ut,B!==null&&(v=Qe(B,p),v!==0&&v!==he.retryLane))throw he.retryLane=v,go(l,v),Rn(B,l,v),F0;wy(W)||Fh(),f=q0(l,f,p)}else wy(W)?(f.flags|=192,f.child=l.child,f=null):(l=he.treeContext,Ht=di(W.nextSibling),$r=f,Et=!0,va=null,fi=!1,l!==null&&jw(f,l),f=K0(f,v.children),f.flags|=4096);return f}return A?(wa(),W=v.fallback,A=f.mode,he=l.child,_e=he.sibling,v=ms(he,{mode:"hidden",children:v.children}),v.subtreeFlags=he.subtreeFlags&65011712,_e!==null?W=ms(_e,W):(W=mo(W,A,p,null),W.flags|=2),W.return=f,v.return=f,v.sibling=W,f.child=v,oc(null,v),v=f.child,W=l.child.memoizedState,W===null?W=z0(p):(A=W.cachePool,A!==null?(he=hr._currentValue,A=A.parent!==he?{parent:he,pool:he}:A):A=Kw(),W={baseLanes:W.baseLanes|p,cachePool:A}),v.memoizedState=W,v.childLanes=H0(l,B,p),f.memoizedState=G0,oc(l.child,v)):(Aa(f),p=l.child,l=p.sibling,p=ms(p,{mode:"visible",children:v.children}),p.return=f,p.sibling=null,l!==null&&(B=f.deletions,B===null?(f.deletions=[l],f.flags|=16):B.push(l)),f.child=p,f.memoizedState=null,p)}function K0(l,f){return f=Ch({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Ch(l,f){return l=$n(22,l,null,f),l.lanes=0,l}function q0(l,f,p){return To(f,l.child,null,p),l=K0(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function iI(l,f,p){l.lanes|=f;var v=l.alternate;v!==null&&(v.lanes|=f),o0(l.return,f,p)}function V0(l,f,p,v,A,O){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:A,treeForkCount:O}:(B.isBackwards=f,B.rendering=null,B.renderingStartTime=0,B.last=v,B.tail=p,B.tailMode=A,B.treeForkCount=O)}function sI(l,f,p){var v=f.pendingProps,A=v.revealOrder,O=v.tail;v=v.children;var B=lr.current,W=(B&2)!==0;if(W?(B=B&1|2,f.flags|=128):B&=1,Z(lr,B),zr(l,f,v,p),v=Et?Wu:0,!W&&l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&iI(l,p,f);else if(l.tag===19)iI(l,p,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(A){case"forwards":for(p=f.child,A=null;p!==null;)l=p.alternate,l!==null&&bh(l)===null&&(A=p),p=p.sibling;p=A,p===null?(A=f.child,f.child=null):(A=p.sibling,p.sibling=null),V0(f,!1,A,p,O,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,A=f.child,f.child=null;A!==null;){if(l=A.alternate,l!==null&&bh(l)===null){f.child=A;break}l=A.sibling,A.sibling=p,p=A,A=l}V0(f,!0,p,null,O,v);break;case"together":V0(f,!1,null,null,void 0,v);break;default:f.memoizedState=null}return f.child}function Es(l,f,p){if(l!==null&&(f.dependencies=l.dependencies),Oa|=f.lanes,(p&f.childLanes)===0)if(l!==null){if(Tl(l,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(n(153));if(f.child!==null){for(l=f.child,p=ms(l,l.pendingProps),f.child=p,p.return=f;l.sibling!==null;)l=l.sibling,p=p.sibling=ms(l,l.pendingProps),p.return=f;p.sibling=null}return f.child}function W0(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&fh(l)))}function u8(l,f,p){switch(f.tag){case 3:re(f,f.stateNode.containerInfo),xa(f,hr,l.memoizedState.cache),yo();break;case 27:case 5:le(f);break;case 4:re(f,f.stateNode.containerInfo);break;case 10:xa(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,b0(f),null;break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(Aa(f),f.flags|=128,null):(p&f.child.childLanes)!==0?nI(l,f,p):(Aa(f),l=Es(l,f,p),l!==null?l.sibling:null);Aa(f);break;case 19:var A=(l.flags&128)!==0;if(v=(p&f.childLanes)!==0,v||(Tl(l,f,p,!1),v=(p&f.childLanes)!==0),A){if(v)return sI(l,f,p);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Z(lr,lr.current),v)break;return null;case 22:return f.lanes=0,Q_(l,f,p,f.pendingProps);case 24:xa(f,hr,l.memoizedState.cache)}return Es(l,f,p)}function aI(l,f,p){if(l!==null)if(l.memoizedProps!==f.pendingProps)pr=!0;else{if(!W0(l,p)&&(f.flags&128)===0)return pr=!1,u8(l,f,p);pr=(l.flags&131072)!==0}else pr=!1,Et&&(f.flags&1048576)!==0&&Uw(f,Wu,f.index);switch(f.lanes=0,f.tag){case 16:e:{var v=f.pendingProps;if(l=So(f.elementType),f.type=l,typeof l=="function")Jm(l)?(v=wo(l,v),f.tag=1,f=tI(null,f,l,v,p)):(f.tag=0,f=$0(null,f,l,v,p));else{if(l!=null){var A=l.$$typeof;if(A===I){f.tag=11,f=W_(null,f,l,v,p);break e}else if(A===_){f.tag=14,f=Y_(null,f,l,v,p);break e}}throw f=X(l)||l,Error(n(306,f,""))}}return f;case 0:return $0(l,f,f.type,f.pendingProps,p);case 1:return v=f.type,A=wo(v,f.pendingProps),tI(l,f,v,A,p);case 3:e:{if(re(f,f.stateNode.containerInfo),l===null)throw Error(n(387));v=f.pendingProps;var O=f.memoizedState;A=O.element,p0(l,f),rc(f,v,null,p);var B=f.memoizedState;if(v=B.cache,xa(f,hr,v),v!==O.cache&&l0(f,[hr],p,!0),tc(),v=B.element,O.isDehydrated)if(O={element:v,isDehydrated:!1,cache:B.cache},f.updateQueue.baseState=O,f.memoizedState=O,f.flags&256){f=rI(l,f,v,p);break e}else if(v!==A){A=li(Error(n(424)),f),Yu(A),f=rI(l,f,v,p);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ht=di(l.firstChild),$r=f,Et=!0,va=null,fi=!0,p=Qw(f,null,v,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(yo(),v===A){f=Es(l,f,p);break e}zr(l,f,v,p)}f=f.child}return f;case 26:return Lh(l,f),l===null?(p=yO(f.type,null,f.pendingProps,null))?f.memoizedState=p:Et||(p=f.type,l=f.pendingProps,v=Vh(Se.current).createElement(p),v[Jt]=f,v[Sr]=l,Hr(v,p,l),Lr(v),f.stateNode=v):f.memoizedState=yO(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return le(f),l===null&&Et&&(v=f.stateNode=pO(f.type,f.pendingProps,Se.current),$r=f,fi=!0,A=Ht,Da(f.type)?(Iy=A,Ht=di(v.firstChild)):Ht=A),zr(l,f,f.pendingProps.children,p),Lh(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Et&&((A=v=Ht)&&(v=j8(v,f.type,f.pendingProps,fi),v!==null?(f.stateNode=v,$r=f,Ht=di(v.firstChild),fi=!1,A=!0):A=!1),A||ba(f)),le(f),A=f.type,O=f.pendingProps,B=l!==null?l.memoizedProps:null,v=O.children,Ey(A,O)?v=null:B!==null&&Ey(A,B)&&(f.flags|=32),f.memoizedState!==null&&(A=S0(l,f,e8,null,null,p),Ec._currentValue=A),Lh(l,f),zr(l,f,v,p),f.child;case 6:return l===null&&Et&&((l=p=Ht)&&(p=F8(p,f.pendingProps,fi),p!==null?(f.stateNode=p,$r=f,Ht=null,l=!0):l=!1),l||ba(f)),null;case 13:return nI(l,f,p);case 4:return re(f,f.stateNode.containerInfo),v=f.pendingProps,l===null?f.child=To(f,null,v,p):zr(l,f,v,p),f.child;case 11:return W_(l,f,f.type,f.pendingProps,p);case 7:return zr(l,f,f.pendingProps,p),f.child;case 8:return zr(l,f,f.pendingProps.children,p),f.child;case 12:return zr(l,f,f.pendingProps.children,p),f.child;case 10:return v=f.pendingProps,xa(f,f.type,v.value),zr(l,f,v.children,p),f.child;case 9:return A=f.type._context,v=f.pendingProps.children,bo(f),A=Gr(A),v=v(A),f.flags|=1,zr(l,f,v,p),f.child;case 14:return Y_(l,f,f.type,f.pendingProps,p);case 15:return X_(l,f,f.type,f.pendingProps,p);case 19:return sI(l,f,p);case 31:return l8(l,f,p);case 22:return Q_(l,f,p,f.pendingProps);case 24:return bo(f),v=Gr(hr),l===null?(A=f0(),A===null&&(A=Ut,O=u0(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=p),A=O),f.memoizedState={parent:v,cache:A},d0(f),xa(f,hr,A)):((l.lanes&p)!==0&&(p0(l,f),rc(f,null,null,p),tc()),A=l.memoizedState,O=f.memoizedState,A.parent!==v?(A={parent:v,cache:v},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),xa(f,hr,v)):(v=O.cache,xa(f,hr,v),v!==A.cache&&l0(f,[hr],p,!0))),zr(l,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function Ts(l){l.flags|=4}function Y0(l,f,p,v,A){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(A&335544128)===A)if(l.stateNode.complete)l.flags|=8192;else if(DI())l.flags|=8192;else throw Eo=gh,h0}else l.flags&=-16777217}function oI(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!EO(f))if(DI())l.flags|=8192;else throw Eo=gh,h0}function Ph(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?cs():536870912,l.lanes|=f,Ml|=f)}function lc(l,f){if(!Et)switch(l.tailMode){case"hidden":f=l.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Kt(l){var f=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(f)for(var A=l.child;A!==null;)p|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)p|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=v,l.childLanes=p,f}function c8(l,f,p){var v=f.pendingProps;switch(n0(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(f),null;case 1:return Kt(f),null;case 3:return p=f.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),bs(hr),te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(El(f)?Ts(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,s0())),Kt(f),null;case 26:var A=f.type,O=f.memoizedState;return l===null?(Ts(f),O!==null?(Kt(f),oI(f,O)):(Kt(f),Y0(f,A,null,v,p))):O?O!==l.memoizedState?(Ts(f),Kt(f),oI(f,O)):(Kt(f),f.flags&=-16777217):(l=l.memoizedProps,l!==v&&Ts(f),Kt(f),Y0(f,A,l,v,p)),null;case 27:if(ce(f),p=Se.current,A=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==v&&Ts(f);else{if(!v){if(f.stateNode===null)throw Error(n(166));return Kt(f),null}l=de.current,El(f)?Fw(f):(l=pO(A,v,p),f.stateNode=l,Ts(f))}return Kt(f),null;case 5:if(ce(f),A=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==v&&Ts(f);else{if(!v){if(f.stateNode===null)throw Error(n(166));return Kt(f),null}if(O=de.current,El(f))Fw(f);else{var B=Vh(Se.current);switch(O){case 1:O=B.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:O=B.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":O=B.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":O=B.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":O=B.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof v.is=="string"?B.createElement("select",{is:v.is}):B.createElement("select"),v.multiple?O.multiple=!0:v.size&&(O.size=v.size);break;default:O=typeof v.is=="string"?B.createElement(A,{is:v.is}):B.createElement(A)}}O[Jt]=f,O[Sr]=v;e:for(B=f.child;B!==null;){if(B.tag===5||B.tag===6)O.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===f)break e;for(;B.sibling===null;){if(B.return===null||B.return===f)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}f.stateNode=O;e:switch(Hr(O,A,v),A){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Ts(f)}}return Kt(f),Y0(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,p),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==v&&Ts(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(n(166));if(l=Se.current,El(f)){if(l=f.stateNode,p=f.memoizedProps,v=null,A=$r,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}l[Jt]=f,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||nO(l.nodeValue,p)),l||ba(f,!0)}else l=Vh(l).createTextNode(v),l[Jt]=f,f.stateNode=l}return Kt(f),null;case 31:if(p=f.memoizedState,l===null||l.memoizedState!==null){if(v=El(f),p!==null){if(l===null){if(!v)throw Error(n(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Jt]=f}else yo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Kt(f),l=!1}else p=s0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return f.flags&256?(zn(f),f):(zn(f),null);if((f.flags&128)!==0)throw Error(n(558))}return Kt(f),null;case 13:if(v=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=El(f),v!==null&&v.dehydrated!==null){if(l===null){if(!A)throw Error(n(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Jt]=f}else yo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Kt(f),A=!1}else A=s0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return f.flags&256?(zn(f),f):(zn(f),null)}return zn(f),(f.flags&128)!==0?(f.lanes=p,f):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=f.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool),O=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==A&&(v.flags|=2048)),p!==l&&p&&(f.child.flags|=8192),Ph(f,f.updateQueue),Kt(f),null);case 4:return te(),l===null&&yy(f.stateNode.containerInfo),Kt(f),null;case 10:return bs(f.type),Kt(f),null;case 19:if(F(lr),v=f.memoizedState,v===null)return Kt(f),null;if(A=(f.flags&128)!==0,O=v.rendering,O===null)if(A)lc(v,!1);else{if(sr!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(O=bh(l),O!==null){for(f.flags|=128,lc(v,!1),l=O.updateQueue,f.updateQueue=l,Ph(f,l),f.subtreeFlags=0,l=p,p=f.child;p!==null;)Mw(p,l),p=p.sibling;return Z(lr,lr.current&1|2),Et&&ys(f,v.treeForkCount),f.child}l=l.sibling}v.tail!==null&&Ie()>Bh&&(f.flags|=128,A=!0,lc(v,!1),f.lanes=4194304)}else{if(!A)if(l=bh(O),l!==null){if(f.flags|=128,A=!0,l=l.updateQueue,f.updateQueue=l,Ph(f,l),lc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!O.alternate&&!Et)return Kt(f),null}else 2*Ie()-v.renderingStartTime>Bh&&p!==536870912&&(f.flags|=128,A=!0,lc(v,!1),f.lanes=4194304);v.isBackwards?(O.sibling=f.child,f.child=O):(l=v.last,l!==null?l.sibling=O:f.child=O,v.last=O)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Ie(),l.sibling=null,p=lr.current,Z(lr,A?p&1|2:p&1),Et&&ys(f,v.treeForkCount),l):(Kt(f),null);case 22:case 23:return zn(f),v0(),v=f.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(p&536870912)!==0&&(f.flags&128)===0&&(Kt(f),f.subtreeFlags&6&&(f.flags|=8192)):Kt(f),p=f.updateQueue,p!==null&&Ph(f,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==p&&(f.flags|=2048),l!==null&&F(xo),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),bs(hr),Kt(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function f8(l,f){switch(n0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return bs(hr),te(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return ce(f),null;case 31:if(f.memoizedState!==null){if(zn(f),f.alternate===null)throw Error(n(340));yo()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if(zn(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(n(340));yo()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return F(lr),null;case 4:return te(),null;case 10:return bs(f.type),null;case 22:case 23:return zn(f),v0(),l!==null&&F(xo),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return bs(hr),null;case 25:return null;default:return null}}function lI(l,f){switch(n0(f),f.tag){case 3:bs(hr),te();break;case 26:case 27:case 5:ce(f);break;case 4:te();break;case 31:f.memoizedState!==null&&zn(f);break;case 13:zn(f);break;case 19:F(lr);break;case 10:bs(f.type);break;case 22:case 23:zn(f),v0(),l!==null&&F(xo);break;case 24:bs(hr)}}function uc(l,f){try{var p=f.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var A=v.next;p=A;do{if((p.tag&l)===l){v=void 0;var O=p.create,B=p.inst;v=O(),B.destroy=v}p=p.next}while(p!==A)}}catch(W){Ot(f,f.return,W)}}function _a(l,f,p){try{var v=f.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var O=A.next;v=O;do{if((v.tag&l)===l){var B=v.inst,W=B.destroy;if(W!==void 0){B.destroy=void 0,A=f;var he=p,_e=W;try{_e()}catch(Fe){Ot(A,he,Fe)}}}v=v.next}while(v!==O)}}catch(Fe){Ot(f,f.return,Fe)}}function uI(l){var f=l.updateQueue;if(f!==null){var p=l.stateNode;try{Jw(f,p)}catch(v){Ot(l,l.return,v)}}}function cI(l,f,p){p.props=wo(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Ot(l,f,v)}}function cc(l,f){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(A){Ot(l,f,A)}}function $i(l,f){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(A){Ot(l,f,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){Ot(l,f,A)}else p.current=null}function fI(l){var f=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(A){Ot(l,l.return,A)}}function X0(l,f,p){try{var v=l.stateNode;D8(v,l.type,p,f),v[Sr]=f}catch(A){Ot(l,l.return,A)}}function hI(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Da(l.type)||l.tag===4}function Q0(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||hI(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Da(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Z0(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(l),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=ps));else if(v!==4&&(v===27&&Da(l.type)&&(p=l.stateNode,f=null),l=l.child,l!==null))for(Z0(l,f,p),l=l.sibling;l!==null;)Z0(l,f,p),l=l.sibling}function Dh(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?p.insertBefore(l,f):p.appendChild(l);else if(v!==4&&(v===27&&Da(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Dh(l,f,p),l=l.sibling;l!==null;)Dh(l,f,p),l=l.sibling}function dI(l){var f=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,A=f.attributes;A.length;)f.removeAttributeNode(A[0]);Hr(f,v,p),f[Jt]=l,f[Sr]=p}catch(O){Ot(l,l.return,O)}}var As=!1,gr=!1,J0=!1,pI=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function h8(l,f){if(l=l.containerInfo,xy=ed,l=_w(l),qm(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var A=v.anchorOffset,O=v.focusNode;v=v.focusOffset;try{p.nodeType,O.nodeType}catch{p=null;break e}var B=0,W=-1,he=-1,_e=0,Fe=0,He=l,Oe=null;t:for(;;){for(var De;He!==p||A!==0&&He.nodeType!==3||(W=B+A),He!==O||v!==0&&He.nodeType!==3||(he=B+v),He.nodeType===3&&(B+=He.nodeValue.length),(De=He.firstChild)!==null;)Oe=He,He=De;for(;;){if(He===l)break t;if(Oe===p&&++_e===A&&(W=B),Oe===O&&++Fe===v&&(he=B),(De=He.nextSibling)!==null)break;He=Oe,Oe=He.parentNode}He=De}p=W===-1||he===-1?null:{start:W,end:he}}else p=null}p=p||{start:0,end:0}}else p=null;for(Sy={focusedElem:l,selectionRange:p},ed=!1,Cr=f;Cr!==null;)if(f=Cr,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,Cr=l;else for(;Cr!==null;){switch(f=Cr,O=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)A=l[p],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,p=f,A=O.memoizedProps,O=O.memoizedState,v=p.stateNode;try{var tt=wo(p.type,A);l=v.getSnapshotBeforeUpdate(tt,O),v.__reactInternalSnapshotBeforeUpdate=l}catch(ot){Ot(p,p.return,ot)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,p=l.nodeType,p===9)Ay(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ay(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=f.sibling,l!==null){l.return=f.return,Cr=l;break}Cr=f.return}}function gI(l,f,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:_s(l,p),v&4&&uc(5,p);break;case 1:if(_s(l,p),v&4)if(l=p.stateNode,f===null)try{l.componentDidMount()}catch(B){Ot(p,p.return,B)}else{var A=wo(p.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(A,f,l.__reactInternalSnapshotBeforeUpdate)}catch(B){Ot(p,p.return,B)}}v&64&&uI(p),v&512&&cc(p,p.return);break;case 3:if(_s(l,p),v&64&&(l=p.updateQueue,l!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Jw(l,f)}catch(B){Ot(p,p.return,B)}}break;case 27:f===null&&v&4&&dI(p);case 26:case 5:_s(l,p),f===null&&v&4&&fI(p),v&512&&cc(p,p.return);break;case 12:_s(l,p);break;case 31:_s(l,p),v&4&&vI(l,p);break;case 13:_s(l,p),v&4&&bI(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=S8.bind(null,p),$8(l,p))));break;case 22:if(v=p.memoizedState!==null||As,!v){f=f!==null&&f.memoizedState!==null||gr,A=As;var O=gr;As=v,(gr=f)&&!O?Is(l,p,(p.subtreeFlags&8772)!==0):_s(l,p),As=A,gr=O}break;case 30:break;default:_s(l,p)}}function mI(l){var f=l.alternate;f!==null&&(l.alternate=null,mI(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&Rm(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Wt=null,wn=!1;function ws(l,f,p){for(p=p.child;p!==null;)yI(l,f,p),p=p.sibling}function yI(l,f,p){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(me,p)}catch{}switch(p.tag){case 26:gr||$i(p,f),ws(l,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:gr||$i(p,f);var v=Wt,A=wn;Da(p.type)&&(Wt=p.stateNode,wn=!1),ws(l,f,p),bc(p.stateNode),Wt=v,wn=A;break;case 5:gr||$i(p,f);case 6:if(v=Wt,A=wn,Wt=null,ws(l,f,p),Wt=v,wn=A,Wt!==null)if(wn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(p.stateNode)}catch(O){Ot(p,f,O)}else try{Wt.removeChild(p.stateNode)}catch(O){Ot(p,f,O)}break;case 18:Wt!==null&&(wn?(l=Wt,uO(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),zl(l)):uO(Wt,p.stateNode));break;case 4:v=Wt,A=wn,Wt=p.stateNode.containerInfo,wn=!0,ws(l,f,p),Wt=v,wn=A;break;case 0:case 11:case 14:case 15:_a(2,p,f),gr||_a(4,p,f),ws(l,f,p);break;case 1:gr||($i(p,f),v=p.stateNode,typeof v.componentWillUnmount=="function"&&cI(p,f,v)),ws(l,f,p);break;case 21:ws(l,f,p);break;case 22:gr=(v=gr)||p.memoizedState!==null,ws(l,f,p),gr=v;break;default:ws(l,f,p)}}function vI(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{zl(l)}catch(p){Ot(f,f.return,p)}}}function bI(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{zl(l)}catch(p){Ot(f,f.return,p)}}function d8(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new pI),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new pI),f;default:throw Error(n(435,l.tag))}}function kh(l,f){var p=d8(l);f.forEach(function(v){if(!p.has(v)){p.add(v);var A=E8.bind(null,l,v);v.then(A,A)}})}function _n(l,f){var p=f.deletions;if(p!==null)for(var v=0;v<p.length;v++){var A=p[v],O=l,B=f,W=B;e:for(;W!==null;){switch(W.tag){case 27:if(Da(W.type)){Wt=W.stateNode,wn=!1;break e}break;case 5:Wt=W.stateNode,wn=!1;break e;case 3:case 4:Wt=W.stateNode.containerInfo,wn=!0;break e}W=W.return}if(Wt===null)throw Error(n(160));yI(O,B,A),Wt=null,wn=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)xI(f,l),f=f.sibling}var Ii=null;function xI(l,f){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:_n(f,l),In(l),v&4&&(_a(3,l,l.return),uc(3,l),_a(5,l,l.return));break;case 1:_n(f,l),In(l),v&512&&(gr||p===null||$i(p,p.return)),v&64&&As&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var A=Ii;if(_n(f,l),In(l),v&512&&(gr||p===null||$i(p,p.return)),v&4){var O=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":O=A.getElementsByTagName("title")[0],(!O||O[cn]||O[Jt]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(v),A.head.insertBefore(O,A.querySelector("head > title"))),Hr(O,v,p),O[Jt]=l,Lr(O),v=O;break e;case"link":var B=xO("link","href",A).get(v+(p.href||""));if(B){for(var W=0;W<B.length;W++)if(O=B[W],O.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&O.getAttribute("rel")===(p.rel==null?null:p.rel)&&O.getAttribute("title")===(p.title==null?null:p.title)&&O.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){B.splice(W,1);break t}}O=A.createElement(v),Hr(O,v,p),A.head.appendChild(O);break;case"meta":if(B=xO("meta","content",A).get(v+(p.content||""))){for(W=0;W<B.length;W++)if(O=B[W],O.getAttribute("content")===(p.content==null?null:""+p.content)&&O.getAttribute("name")===(p.name==null?null:p.name)&&O.getAttribute("property")===(p.property==null?null:p.property)&&O.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&O.getAttribute("charset")===(p.charSet==null?null:p.charSet)){B.splice(W,1);break t}}O=A.createElement(v),Hr(O,v,p),A.head.appendChild(O);break;default:throw Error(n(468,v))}O[Jt]=l,Lr(O),v=O}l.stateNode=v}else SO(A,l.type,l.stateNode);else l.stateNode=bO(A,v,l.memoizedProps);else O!==v?(O===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):O.count--,v===null?SO(A,l.type,l.stateNode):bO(A,v,l.memoizedProps)):v===null&&l.stateNode!==null&&X0(l,l.memoizedProps,p.memoizedProps)}break;case 27:_n(f,l),In(l),v&512&&(gr||p===null||$i(p,p.return)),p!==null&&v&4&&X0(l,l.memoizedProps,p.memoizedProps);break;case 5:if(_n(f,l),In(l),v&512&&(gr||p===null||$i(p,p.return)),l.flags&32){A=l.stateNode;try{hl(A,"")}catch(tt){Ot(l,l.return,tt)}}v&4&&l.stateNode!=null&&(A=l.memoizedProps,X0(l,A,p!==null?p.memoizedProps:A)),v&1024&&(J0=!0);break;case 6:if(_n(f,l),In(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch(tt){Ot(l,l.return,tt)}}break;case 3:if(Xh=null,A=Ii,Ii=Wh(f.containerInfo),_n(f,l),Ii=A,In(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{zl(f.containerInfo)}catch(tt){Ot(l,l.return,tt)}J0&&(J0=!1,SI(l));break;case 4:v=Ii,Ii=Wh(l.stateNode.containerInfo),_n(f,l),In(l),Ii=v;break;case 12:_n(f,l),In(l);break;case 31:_n(f,l),In(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 13:_n(f,l),In(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Nh=Ie()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 22:A=l.memoizedState!==null;var he=p!==null&&p.memoizedState!==null,_e=As,Fe=gr;if(As=_e||A,gr=Fe||he,_n(f,l),gr=Fe,As=_e,In(l),v&8192)e:for(f=l.stateNode,f._visibility=A?f._visibility&-2:f._visibility|1,A&&(p===null||he||As||gr||_o(l)),p=null,f=l;;){if(f.tag===5||f.tag===26){if(p===null){he=p=f;try{if(O=he.stateNode,A)B=O.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{W=he.stateNode;var He=he.memoizedProps.style,Oe=He!=null&&He.hasOwnProperty("display")?He.display:null;W.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(tt){Ot(he,he.return,tt)}}}else if(f.tag===6){if(p===null){he=f;try{he.stateNode.nodeValue=A?"":he.memoizedProps}catch(tt){Ot(he,he.return,tt)}}}else if(f.tag===18){if(p===null){he=f;try{var De=he.stateNode;A?cO(De,!0):cO(he.stateNode,!1)}catch(tt){Ot(he,he.return,tt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,kh(l,p))));break;case 19:_n(f,l),In(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 30:break;case 21:break;default:_n(f,l),In(l)}}function In(l){var f=l.flags;if(f&2){try{for(var p,v=l.return;v!==null;){if(hI(v)){p=v;break}v=v.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var A=p.stateNode,O=Q0(l);Dh(l,O,A);break;case 5:var B=p.stateNode;p.flags&32&&(hl(B,""),p.flags&=-33);var W=Q0(l);Dh(l,W,B);break;case 3:case 4:var he=p.stateNode.containerInfo,_e=Q0(l);Z0(l,_e,he);break;default:throw Error(n(161))}}catch(Fe){Ot(l,l.return,Fe)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function SI(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;SI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function _s(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)gI(l,f.alternate,f),f=f.sibling}function _o(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return),_o(f);break;case 1:$i(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&cI(f,f.return,p),_o(f);break;case 27:bc(f.stateNode);case 26:case 5:$i(f,f.return),_o(f);break;case 22:f.memoizedState===null&&_o(f);break;case 30:_o(f);break;default:_o(f)}l=l.sibling}}function Is(l,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,A=l,O=f,B=O.flags;switch(O.tag){case 0:case 11:case 15:Is(A,O,p),uc(4,O);break;case 1:if(Is(A,O,p),v=O,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(_e){Ot(v,v.return,_e)}if(v=O,A=v.updateQueue,A!==null){var W=v.stateNode;try{var he=A.shared.hiddenCallbacks;if(he!==null)for(A.shared.hiddenCallbacks=null,A=0;A<he.length;A++)Zw(he[A],W)}catch(_e){Ot(v,v.return,_e)}}p&&B&64&&uI(O),cc(O,O.return);break;case 27:dI(O);case 26:case 5:Is(A,O,p),p&&v===null&&B&4&&fI(O),cc(O,O.return);break;case 12:Is(A,O,p);break;case 31:Is(A,O,p),p&&B&4&&vI(A,O);break;case 13:Is(A,O,p),p&&B&4&&bI(A,O);break;case 22:O.memoizedState===null&&Is(A,O,p),cc(O,O.return);break;case 30:break;default:Is(A,O,p)}f=f.sibling}}function ey(l,f){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Xu(p))}function ty(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Xu(l))}function Oi(l,f,p,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)EI(l,f,p,v),f=f.sibling}function EI(l,f,p,v){var A=f.flags;switch(f.tag){case 0:case 11:case 15:Oi(l,f,p,v),A&2048&&uc(9,f);break;case 1:Oi(l,f,p,v);break;case 3:Oi(l,f,p,v),A&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Xu(l)));break;case 12:if(A&2048){Oi(l,f,p,v),l=f.stateNode;try{var O=f.memoizedProps,B=O.id,W=O.onPostCommit;typeof W=="function"&&W(B,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(he){Ot(f,f.return,he)}}else Oi(l,f,p,v);break;case 31:Oi(l,f,p,v);break;case 13:Oi(l,f,p,v);break;case 23:break;case 22:O=f.stateNode,B=f.alternate,f.memoizedState!==null?O._visibility&2?Oi(l,f,p,v):fc(l,f):O._visibility&2?Oi(l,f,p,v):(O._visibility|=2,Pl(l,f,p,v,(f.subtreeFlags&10256)!==0||!1)),A&2048&&ey(B,f);break;case 24:Oi(l,f,p,v),A&2048&&ty(f.alternate,f);break;default:Oi(l,f,p,v)}}function Pl(l,f,p,v,A){for(A=A&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var O=l,B=f,W=p,he=v,_e=B.flags;switch(B.tag){case 0:case 11:case 15:Pl(O,B,W,he,A),uc(8,B);break;case 23:break;case 22:var Fe=B.stateNode;B.memoizedState!==null?Fe._visibility&2?Pl(O,B,W,he,A):fc(O,B):(Fe._visibility|=2,Pl(O,B,W,he,A)),A&&_e&2048&&ey(B.alternate,B);break;case 24:Pl(O,B,W,he,A),A&&_e&2048&&ty(B.alternate,B);break;default:Pl(O,B,W,he,A)}f=f.sibling}}function fc(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=l,v=f,A=v.flags;switch(v.tag){case 22:fc(p,v),A&2048&&ey(v.alternate,v);break;case 24:fc(p,v),A&2048&&ty(v.alternate,v);break;default:fc(p,v)}f=f.sibling}}var hc=8192;function Dl(l,f,p){if(l.subtreeFlags&hc)for(l=l.child;l!==null;)TI(l,f,p),l=l.sibling}function TI(l,f,p){switch(l.tag){case 26:Dl(l,f,p),l.flags&hc&&l.memoizedState!==null&&J8(p,Ii,l.memoizedState,l.memoizedProps);break;case 5:Dl(l,f,p);break;case 3:case 4:var v=Ii;Ii=Wh(l.stateNode.containerInfo),Dl(l,f,p),Ii=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=hc,hc=16777216,Dl(l,f,p),hc=v):Dl(l,f,p));break;default:Dl(l,f,p)}}function AI(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function dc(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];Cr=v,_I(v,l)}AI(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)wI(l),l=l.sibling}function wI(l){switch(l.tag){case 0:case 11:case 15:dc(l),l.flags&2048&&_a(9,l,l.return);break;case 3:dc(l);break;case 12:dc(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Mh(l)):dc(l);break;default:dc(l)}}function Mh(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];Cr=v,_I(v,l)}AI(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:_a(8,f,f.return),Mh(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,Mh(f));break;default:Mh(f)}l=l.sibling}}function _I(l,f){for(;Cr!==null;){var p=Cr;switch(p.tag){case 0:case 11:case 15:_a(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Xu(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Cr=v;else e:for(p=l;Cr!==null;){v=Cr;var A=v.sibling,O=v.return;if(mI(v),v===p){Cr=null;break e}if(A!==null){A.return=O,Cr=A;break e}Cr=O}}}var p8={getCacheForType:function(l){var f=Gr(hr),p=f.data.get(l);return p===void 0&&(p=l(),f.data.set(l,p)),p},cacheSignal:function(){return Gr(hr).controller.signal}},g8=typeof WeakMap=="function"?WeakMap:Map,_t=0,Ut=null,vt=null,xt=0,It=0,Hn=null,Ia=!1,kl=!1,ry=!1,Os=0,sr=0,Oa=0,Io=0,ny=0,Kn=0,Ml=0,pc=null,On=null,iy=!1,Nh=0,II=0,Bh=1/0,Uh=null,Ra=null,Er=0,La=null,Nl=null,Rs=0,sy=0,ay=null,OI=null,gc=0,oy=null;function qn(){return(_t&2)!==0&&xt!==0?xt&-xt:H.T!==null?dy():xn()}function RI(){if(Kn===0)if((xt&536870912)===0||Et){var l=or;or<<=1,(or&3932160)===0&&(or=262144),Kn=l}else Kn=536870912;return l=Gn.current,l!==null&&(l.flags|=32),Kn}function Rn(l,f,p){(l===Ut&&(It===2||It===9)||l.cancelPendingCommit!==null)&&(Bl(l,0),Ca(l,xt,Kn,!1)),J(l,p),((_t&2)===0||l!==Ut)&&(l===Ut&&((_t&2)===0&&(Io|=p),sr===4&&Ca(l,xt,Kn,!1)),Gi(l))}function LI(l,f,p){if((_t&6)!==0)throw Error(n(327));var v=!p&&(f&127)===0&&(f&l.expiredLanes)===0||br(l,f),A=v?v8(l,f):uy(l,f,!0),O=v;do{if(A===0){kl&&!v&&Ca(l,f,0,!1);break}else{if(p=l.current.alternate,O&&!m8(p)){A=uy(l,f,!1),O=!1;continue}if(A===2){if(O=f,l.errorRecoveryDisabledLanes&O)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){f=B;e:{var W=l;A=pc;var he=W.current.memoizedState.isDehydrated;if(he&&(Bl(W,B).flags|=256),B=uy(W,B,!1),B!==2){if(ry&&!he){W.errorRecoveryDisabledLanes|=O,Io|=O,A=4;break e}O=On,On=A,O!==null&&(On===null?On=O:On.push.apply(On,O))}A=B}if(O=!1,A!==2)continue}}if(A===1){Bl(l,0),Ca(l,f,0,!0);break}e:{switch(v=l,O=A,O){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Ca(v,f,Kn,!Ia);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(A=Nh+300-Ie(),10<A)){if(Ca(v,f,Kn,!Ia),un(v,0,!0)!==0)break e;Rs=f,v.timeoutHandle=oO(CI.bind(null,v,p,On,Uh,iy,f,Kn,Io,Ml,Ia,O,"Throttled",-0,0),A);break e}CI(v,p,On,Uh,iy,f,Kn,Io,Ml,Ia,O,null,-0,0)}}break}while(!0);Gi(l)}function CI(l,f,p,v,A,O,B,W,he,_e,Fe,He,Oe,De){if(l.timeoutHandle=-1,He=f.subtreeFlags,He&8192||(He&16785408)===16785408){He={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ps},TI(f,O,He);var tt=(O&62914560)===O?Nh-Ie():(O&4194048)===O?II-Ie():0;if(tt=e6(He,tt),tt!==null){Rs=O,l.cancelPendingCommit=tt(jI.bind(null,l,f,O,p,v,A,B,W,he,Fe,He,null,Oe,De)),Ca(l,O,B,!_e);return}}jI(l,f,O,p,v,A,B,W,he)}function m8(l){for(var f=l;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var A=p[v],O=A.getSnapshot;A=A.value;try{if(!Fn(O(),A))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ca(l,f,p,v){f&=~ny,f&=~Io,l.suspendedLanes|=f,l.pingedLanes&=~f,v&&(l.warmLanes|=f),v=l.expirationTimes;for(var A=f;0<A;){var O=31-Xe(A),B=1<<O;v[O]=-1,A&=~B}p!==0&&qe(l,p,f)}function jh(){return(_t&6)===0?(mc(0),!1):!0}function ly(){if(vt!==null){if(It===0)var l=vt.return;else l=vt,vs=vo=null,A0(l),Il=null,Zu=0,l=vt;for(;l!==null;)lI(l.alternate,l),l=l.return;vt=null}}function Bl(l,f){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,N8(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Rs=0,ly(),Ut=l,vt=p=ms(l.current,null),xt=f,It=0,Hn=null,Ia=!1,kl=br(l,f),ry=!1,Ml=Kn=ny=Io=Oa=sr=0,On=pc=null,iy=!1,(f&8)!==0&&(f|=f&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=f;0<v;){var A=31-Xe(v),O=1<<A;f|=l[A],v&=~O}return Os=f,ah(),p}function PI(l,f){pt=null,H.H=ac,f===_l||f===ph?(f=Ww(),It=3):f===h0?(f=Ww(),It=4):It=f===F0?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Hn=f,vt===null&&(sr=1,Oh(l,li(f,l.current)))}function DI(){var l=Gn.current;return l===null?!0:(xt&4194048)===xt?hi===null:(xt&62914560)===xt||(xt&536870912)!==0?l===hi:!1}function kI(){var l=H.H;return H.H=ac,l===null?ac:l}function MI(){var l=H.A;return H.A=p8,l}function Fh(){sr=4,Ia||(xt&4194048)!==xt&&Gn.current!==null||(kl=!0),(Oa&134217727)===0&&(Io&134217727)===0||Ut===null||Ca(Ut,xt,Kn,!1)}function uy(l,f,p){var v=_t;_t|=2;var A=kI(),O=MI();(Ut!==l||xt!==f)&&(Uh=null,Bl(l,f)),f=!1;var B=sr;e:do try{if(It!==0&&vt!==null){var W=vt,he=Hn;switch(It){case 8:ly(),B=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(f=!0);var _e=It;if(It=0,Hn=null,Ul(l,W,he,_e),p&&kl){B=0;break e}break;default:_e=It,It=0,Hn=null,Ul(l,W,he,_e)}}y8(),B=sr;break}catch(Fe){PI(l,Fe)}while(!0);return f&&l.shellSuspendCounter++,vs=vo=null,_t=v,H.H=A,H.A=O,vt===null&&(Ut=null,xt=0,ah()),B}function y8(){for(;vt!==null;)NI(vt)}function v8(l,f){var p=_t;_t|=2;var v=kI(),A=MI();Ut!==l||xt!==f?(Uh=null,Bh=Ie()+500,Bl(l,f)):kl=br(l,f);e:do try{if(It!==0&&vt!==null){f=vt;var O=Hn;t:switch(It){case 1:It=0,Hn=null,Ul(l,f,O,1);break;case 2:case 9:if(qw(O)){It=0,Hn=null,BI(f);break}f=function(){It!==2&&It!==9||Ut!==l||(It=7),Gi(l)},O.then(f,f);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:qw(O)?(It=0,Hn=null,BI(f)):(It=0,Hn=null,Ul(l,f,O,7));break;case 5:var B=null;switch(vt.tag){case 26:B=vt.memoizedState;case 5:case 27:var W=vt;if(B?EO(B):W.stateNode.complete){It=0,Hn=null;var he=W.sibling;if(he!==null)vt=he;else{var _e=W.return;_e!==null?(vt=_e,$h(_e)):vt=null}break t}}It=0,Hn=null,Ul(l,f,O,5);break;case 6:It=0,Hn=null,Ul(l,f,O,6);break;case 8:ly(),sr=6;break e;default:throw Error(n(462))}}b8();break}catch(Fe){PI(l,Fe)}while(!0);return vs=vo=null,H.H=v,H.A=A,_t=p,vt!==null?0:(Ut=null,xt=0,ah(),sr)}function b8(){for(;vt!==null&&!Ue();)NI(vt)}function NI(l){var f=aI(l.alternate,l,Os);l.memoizedProps=l.pendingProps,f===null?$h(l):vt=f}function BI(l){var f=l,p=f.alternate;switch(f.tag){case 15:case 0:f=eI(p,f,f.pendingProps,f.type,void 0,xt);break;case 11:f=eI(p,f,f.pendingProps,f.type.render,f.ref,xt);break;case 5:A0(f);default:lI(p,f),f=vt=Mw(f,Os),f=aI(p,f,Os)}l.memoizedProps=l.pendingProps,f===null?$h(l):vt=f}function Ul(l,f,p,v){vs=vo=null,A0(f),Il=null,Zu=0;var A=f.return;try{if(o8(l,A,f,p,xt)){sr=1,Oh(l,li(p,l.current)),vt=null;return}}catch(O){if(A!==null)throw vt=A,O;sr=1,Oh(l,li(p,l.current)),vt=null;return}f.flags&32768?(Et||v===1?l=!0:kl||(xt&536870912)!==0?l=!1:(Ia=l=!0,(v===2||v===9||v===3||v===6)&&(v=Gn.current,v!==null&&v.tag===13&&(v.flags|=16384))),UI(f,l)):$h(f)}function $h(l){var f=l;do{if((f.flags&32768)!==0){UI(f,Ia);return}l=f.return;var p=c8(f.alternate,f,Os);if(p!==null){vt=p;return}if(f=f.sibling,f!==null){vt=f;return}vt=f=l}while(f!==null);sr===0&&(sr=5)}function UI(l,f){do{var p=f8(l.alternate,l);if(p!==null){p.flags&=32767,vt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(l=l.sibling,l!==null)){vt=l;return}vt=l=p}while(l!==null);sr=6,vt=null}function jI(l,f,p,v,A,O,B,W,he){l.cancelPendingCommit=null;do Gh();while(Er!==0);if((_t&6)!==0)throw Error(n(327));if(f!==null){if(f===l.current)throw Error(n(177));if(O=f.lanes|f.childLanes,O|=Qm,ue(l,p,O,B,W,he),l===Ut&&(vt=Ut=null,xt=0),Nl=f,La=l,Rs=p,sy=O,ay=A,OI=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,T8(z,function(){return HI(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=H.T,H.T=null,A=K.p,K.p=2,B=_t,_t|=4;try{h8(l,f,p)}finally{_t=B,K.p=A,H.T=v}}Er=1,FI(),$I(),GI()}}function FI(){if(Er===1){Er=0;var l=La,f=Nl,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var A=_t;_t|=4;try{xI(f,l);var O=Sy,B=_w(l.containerInfo),W=O.focusedElem,he=O.selectionRange;if(B!==W&&W&&W.ownerDocument&&ww(W.ownerDocument.documentElement,W)){if(he!==null&&qm(W)){var _e=he.start,Fe=he.end;if(Fe===void 0&&(Fe=_e),"selectionStart"in W)W.selectionStart=_e,W.selectionEnd=Math.min(Fe,W.value.length);else{var He=W.ownerDocument||document,Oe=He&&He.defaultView||window;if(Oe.getSelection){var De=Oe.getSelection(),tt=W.textContent.length,ot=Math.min(he.start,tt),kt=he.end===void 0?ot:Math.min(he.end,tt);!De.extend&&ot>kt&&(B=kt,kt=ot,ot=B);var be=Aw(W,ot),ge=Aw(W,kt);if(be&&ge&&(De.rangeCount!==1||De.anchorNode!==be.node||De.anchorOffset!==be.offset||De.focusNode!==ge.node||De.focusOffset!==ge.offset)){var we=He.createRange();we.setStart(be.node,be.offset),De.removeAllRanges(),ot>kt?(De.addRange(we),De.extend(ge.node,ge.offset)):(we.setEnd(ge.node,ge.offset),De.addRange(we))}}}}for(He=[],De=W;De=De.parentNode;)De.nodeType===1&&He.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<He.length;W++){var ze=He[W];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}ed=!!xy,Sy=xy=null}finally{_t=A,K.p=v,H.T=p}}l.current=f,Er=2}}function $I(){if(Er===2){Er=0;var l=La,f=Nl,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var A=_t;_t|=4;try{gI(l,f.alternate,f)}finally{_t=A,K.p=v,H.T=p}}Er=3}}function GI(){if(Er===4||Er===3){Er=0,Ke();var l=La,f=Nl,p=Rs,v=OI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Er=5:(Er=0,Nl=La=null,zI(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Ra=null),xr(p),f=f.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(me,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=H.T,A=K.p,K.p=2,H.T=null;try{for(var O=l.onRecoverableError,B=0;B<v.length;B++){var W=v[B];O(W.value,{componentStack:W.stack})}}finally{H.T=f,K.p=A}}(Rs&3)!==0&&Gh(),Gi(l),A=l.pendingLanes,(p&261930)!==0&&(A&42)!==0?l===oy?gc++:(gc=0,oy=l):gc=0,mc(0)}}function zI(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Xu(f)))}function Gh(){return FI(),$I(),GI(),HI()}function HI(){if(Er!==5)return!1;var l=La,f=sy;sy=0;var p=xr(Rs),v=H.T,A=K.p;try{K.p=32>p?32:p,H.T=null,p=ay,ay=null;var O=La,B=Rs;if(Er=0,Nl=La=null,Rs=0,(_t&6)!==0)throw Error(n(331));var W=_t;if(_t|=4,wI(O.current),EI(O,O.current,B,p),_t=W,mc(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(me,O)}catch{}return!0}finally{K.p=A,H.T=v,zI(l,f)}}function KI(l,f,p){f=li(p,f),f=j0(l.stateNode,f,2),l=Ta(l,f,2),l!==null&&(J(l,2),Gi(l))}function Ot(l,f,p){if(l.tag===3)KI(l,l,p);else for(;f!==null;){if(f.tag===3){KI(f,l,p);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ra===null||!Ra.has(v))){l=li(p,l),p=q_(2),v=Ta(f,p,2),v!==null&&(V_(p,v,f,l),J(v,2),Gi(v));break}}f=f.return}}function cy(l,f,p){var v=l.pingCache;if(v===null){v=l.pingCache=new g8;var A=new Set;v.set(f,A)}else A=v.get(f),A===void 0&&(A=new Set,v.set(f,A));A.has(p)||(ry=!0,A.add(p),l=x8.bind(null,l,f,p),f.then(l,l))}function x8(l,f,p){var v=l.pingCache;v!==null&&v.delete(f),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Ut===l&&(xt&p)===p&&(sr===4||sr===3&&(xt&62914560)===xt&&300>Ie()-Nh?(_t&2)===0&&Bl(l,0):ny|=p,Ml===xt&&(Ml=0)),Gi(l)}function qI(l,f){f===0&&(f=cs()),l=go(l,f),l!==null&&(J(l,f),Gi(l))}function S8(l){var f=l.memoizedState,p=0;f!==null&&(p=f.retryLane),qI(l,p)}function E8(l,f){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,A=l.memoizedState;A!==null&&(p=A.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(f),qI(l,p)}function T8(l,f){return je(l,f)}var zh=null,jl=null,fy=!1,Hh=!1,hy=!1,Pa=0;function Gi(l){l!==jl&&l.next===null&&(jl===null?zh=jl=l:jl=jl.next=l),Hh=!0,fy||(fy=!0,w8())}function mc(l,f){if(!hy&&Hh){hy=!0;do for(var p=!1,v=zh;v!==null;){if(l!==0){var A=v.pendingLanes;if(A===0)var O=0;else{var B=v.suspendedLanes,W=v.pingedLanes;O=(1<<31-Xe(42|l)+1)-1,O&=A&~(B&~W),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(p=!0,XI(v,O))}else O=xt,O=un(v,v===Ut?O:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(O&3)===0||br(v,O)||(p=!0,XI(v,O));v=v.next}while(p);hy=!1}}function A8(){VI()}function VI(){Hh=fy=!1;var l=0;Pa!==0&&M8()&&(l=Pa);for(var f=Ie(),p=null,v=zh;v!==null;){var A=v.next,O=WI(v,f);O===0?(v.next=null,p===null?zh=A:p.next=A,A===null&&(jl=p)):(p=v,(l!==0||(O&3)!==0)&&(Hh=!0)),v=A}Er!==0&&Er!==5||mc(l),Pa!==0&&(Pa=0)}function WI(l,f){for(var p=l.suspendedLanes,v=l.pingedLanes,A=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var B=31-Xe(O),W=1<<B,he=A[B];he===-1?((W&p)===0||(W&v)!==0)&&(A[B]=al(W,f)):he<=f&&(l.expiredLanes|=W),O&=~W}if(f=Ut,p=xt,p=un(l,l===f?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===f&&(It===2||It===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&pe(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||br(l,p)){if(f=p&-p,f===l.callbackPriority)return f;switch(v!==null&&pe(v),xr(p)){case 2:case 8:p=M;break;case 32:p=z;break;case 268435456:p=ve;break;default:p=z}return v=YI.bind(null,l),p=je(p,v),l.callbackPriority=f,l.callbackNode=p,f}return v!==null&&v!==null&&pe(v),l.callbackPriority=2,l.callbackNode=null,2}function YI(l,f){if(Er!==0&&Er!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Gh()&&l.callbackNode!==p)return null;var v=xt;return v=un(l,l===Ut?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(LI(l,v,f),WI(l,Ie()),l.callbackNode!=null&&l.callbackNode===p?YI.bind(null,l):null)}function XI(l,f){if(Gh())return null;LI(l,f,!0)}function w8(){B8(function(){(_t&6)!==0?je(L,A8):VI()})}function dy(){if(Pa===0){var l=Al;l===0&&(l=on,on<<=1,(on&261888)===0&&(on=256)),Pa=l}return Pa}function QI(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Zf(""+l)}function ZI(l,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,l.id&&p.setAttribute("form",l.id),f.parentNode.insertBefore(p,f),l=new FormData(l),p.parentNode.removeChild(p),l}function _8(l,f,p,v,A){if(f==="submit"&&p&&p.stateNode===A){var O=QI((A[Sr]||null).action),B=v.submitter;B&&(f=(f=B[Sr]||null)?QI(f.formAction):B.getAttribute("formAction"),f!==null&&(O=f,B=null));var W=new rh("action","action",null,v,A);l.push({event:W,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Pa!==0){var he=B?ZI(A,B):new FormData(A);D0(p,{pending:!0,data:he,method:A.method,action:O},null,he)}}else typeof O=="function"&&(W.preventDefault(),he=B?ZI(A,B):new FormData(A),D0(p,{pending:!0,data:he,method:A.method,action:O},O,he))},currentTarget:A}]})}}for(var py=0;py<Xm.length;py++){var gy=Xm[py],I8=gy.toLowerCase(),O8=gy[0].toUpperCase()+gy.slice(1);_i(I8,"on"+O8)}_i(Rw,"onAnimationEnd"),_i(Lw,"onAnimationIteration"),_i(Cw,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(H4,"onTransitionRun"),_i(K4,"onTransitionStart"),_i(q4,"onTransitionCancel"),_i(Pw,"onTransitionEnd"),cl("onMouseEnter",["mouseout","mouseover"]),cl("onMouseLeave",["mouseout","mouseover"]),cl("onPointerEnter",["pointerout","pointerover"]),cl("onPointerLeave",["pointerout","pointerover"]),co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),co("onBeforeInput",["compositionend","keypress","textInput","paste"]),co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yc));function JI(l,f){f=(f&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],A=v.event;v=v.listeners;e:{var O=void 0;if(f)for(var B=v.length-1;0<=B;B--){var W=v[B],he=W.instance,_e=W.currentTarget;if(W=W.listener,he!==O&&A.isPropagationStopped())break e;O=W,A.currentTarget=_e;try{O(A)}catch(Fe){sh(Fe)}A.currentTarget=null,O=he}else for(B=0;B<v.length;B++){if(W=v[B],he=W.instance,_e=W.currentTarget,W=W.listener,he!==O&&A.isPropagationStopped())break e;O=W,A.currentTarget=_e;try{O(A)}catch(Fe){sh(Fe)}A.currentTarget=null,O=he}}}}function bt(l,f){var p=f[Tn];p===void 0&&(p=f[Tn]=new Set);var v=l+"__bubble";p.has(v)||(eO(f,l,2,!1),p.add(v))}function my(l,f,p){var v=0;f&&(v|=4),eO(p,l,v,f)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function yy(l){if(!l[Kh]){l[Kh]=!0,V1.forEach(function(p){p!=="selectionchange"&&(R8.has(p)||my(p,!1,l),my(p,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Kh]||(f[Kh]=!0,my("selectionchange",!1,f))}}function eO(l,f,p,v){switch(RO(f)){case 2:var A=n6;break;case 8:A=i6;break;default:A=Py}p=A.bind(null,f,p,l),A=void 0,!Bm||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),v?A!==void 0?l.addEventListener(f,p,{capture:!0,passive:A}):l.addEventListener(f,p,!0):A!==void 0?l.addEventListener(f,p,{passive:A}):l.addEventListener(f,p,!1)}function vy(l,f,p,v,A){var O=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var B=v.tag;if(B===3||B===4){var W=v.stateNode.containerInfo;if(W===A)break;if(B===4)for(B=v.return;B!==null;){var he=B.tag;if((he===3||he===4)&&B.stateNode.containerInfo===A)return;B=B.return}for(;W!==null;){if(B=ol(W),B===null)return;if(he=B.tag,he===5||he===6||he===26||he===27){v=O=B;continue e}W=W.parentNode}}v=v.return}sw(function(){var _e=O,Fe=Mm(p),He=[];e:{var Oe=Dw.get(l);if(Oe!==void 0){var De=rh,tt=l;switch(l){case"keypress":if(eh(p)===0)break e;case"keydown":case"keyup":De=E4;break;case"focusin":tt="focus",De=$m;break;case"focusout":tt="blur",De=$m;break;case"beforeblur":case"afterblur":De=$m;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=c4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=w4;break;case Rw:case Lw:case Cw:De=d4;break;case Pw:De=I4;break;case"scroll":case"scrollend":De=l4;break;case"wheel":De=R4;break;case"copy":case"cut":case"paste":De=g4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=cw;break;case"toggle":case"beforetoggle":De=C4}var ot=(f&4)!==0,kt=!ot&&(l==="scroll"||l==="scrollend"),be=ot?Oe!==null?Oe+"Capture":null:Oe;ot=[];for(var ge=_e,we;ge!==null;){var ze=ge;if(we=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||we===null||be===null||(ze=ju(ge,be),ze!=null&&ot.push(vc(ge,ze,we))),kt)break;ge=ge.return}0<ot.length&&(Oe=new De(Oe,tt,null,p,Fe),He.push({event:Oe,listeners:ot}))}}if((f&7)===0){e:{if(Oe=l==="mouseover"||l==="pointerover",De=l==="mouseout"||l==="pointerout",Oe&&p!==km&&(tt=p.relatedTarget||p.fromElement)&&(ol(tt)||tt[En]))break e;if((De||Oe)&&(Oe=Fe.window===Fe?Fe:(Oe=Fe.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,De?(tt=p.relatedTarget||p.toElement,De=_e,tt=tt?ol(tt):null,tt!==null&&(kt=s(tt),ot=tt.tag,tt!==kt||ot!==5&&ot!==27&&ot!==6)&&(tt=null)):(De=null,tt=_e),De!==tt)){if(ot=lw,ze="onMouseLeave",be="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(ot=cw,ze="onPointerLeave",be="onPointerEnter",ge="pointer"),kt=De==null?Oe:Uu(De),we=tt==null?Oe:Uu(tt),Oe=new ot(ze,ge+"leave",De,p,Fe),Oe.target=kt,Oe.relatedTarget=we,ze=null,ol(Fe)===_e&&(ot=new ot(be,ge+"enter",tt,p,Fe),ot.target=we,ot.relatedTarget=kt,ze=ot),kt=ze,De&&tt)t:{for(ot=L8,be=De,ge=tt,we=0,ze=be;ze;ze=ot(ze))we++;ze=0;for(var st=ge;st;st=ot(st))ze++;for(;0<we-ze;)be=ot(be),we--;for(;0<ze-we;)ge=ot(ge),ze--;for(;we--;){if(be===ge||ge!==null&&be===ge.alternate){ot=be;break t}be=ot(be),ge=ot(ge)}ot=null}else ot=null;De!==null&&tO(He,Oe,De,ot,!1),tt!==null&&kt!==null&&tO(He,kt,tt,ot,!0)}}e:{if(Oe=_e?Uu(_e):window,De=Oe.nodeName&&Oe.nodeName.toLowerCase(),De==="select"||De==="input"&&Oe.type==="file")var Tt=vw;else if(mw(Oe))if(bw)Tt=$4;else{Tt=j4;var rt=U4}else De=Oe.nodeName,!De||De.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?_e&&Dm(_e.elementType)&&(Tt=vw):Tt=F4;if(Tt&&(Tt=Tt(l,_e))){yw(He,Tt,p,Fe);break e}rt&&rt(l,Oe,_e),l==="focusout"&&_e&&Oe.type==="number"&&_e.memoizedProps.value!=null&&Pm(Oe,"number",Oe.value)}switch(rt=_e?Uu(_e):window,l){case"focusin":(mw(rt)||rt.contentEditable==="true")&&(ml=rt,Vm=_e,Vu=null);break;case"focusout":Vu=Vm=ml=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Iw(He,p,Fe);break;case"selectionchange":if(z4)break;case"keydown":case"keyup":Iw(He,p,Fe)}var gt;if(zm)e:{switch(l){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else gl?pw(l,p)&&(St="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(St="onCompositionStart");St&&(fw&&p.locale!=="ko"&&(gl||St!=="onCompositionStart"?St==="onCompositionEnd"&&gl&&(gt=aw()):(ma=Fe,Um="value"in ma?ma.value:ma.textContent,gl=!0)),rt=qh(_e,St),0<rt.length&&(St=new uw(St,l,null,p,Fe),He.push({event:St,listeners:rt}),gt?St.data=gt:(gt=gw(p),gt!==null&&(St.data=gt)))),(gt=D4?k4(l,p):M4(l,p))&&(St=qh(_e,"onBeforeInput"),0<St.length&&(rt=new uw("onBeforeInput","beforeinput",null,p,Fe),He.push({event:rt,listeners:St}),rt.data=gt)),_8(He,l,_e,p,Fe)}JI(He,f)})}function vc(l,f,p){return{instance:l,listener:f,currentTarget:p}}function qh(l,f){for(var p=f+"Capture",v=[];l!==null;){var A=l,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=ju(l,p),A!=null&&v.unshift(vc(l,A,O)),A=ju(l,f),A!=null&&v.push(vc(l,A,O))),l.tag===3)return v;l=l.return}return[]}function L8(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function tO(l,f,p,v,A){for(var O=f._reactName,B=[];p!==null&&p!==v;){var W=p,he=W.alternate,_e=W.stateNode;if(W=W.tag,he!==null&&he===v)break;W!==5&&W!==26&&W!==27||_e===null||(he=_e,A?(_e=ju(p,O),_e!=null&&B.unshift(vc(p,_e,he))):A||(_e=ju(p,O),_e!=null&&B.push(vc(p,_e,he)))),p=p.return}B.length!==0&&l.push({event:f,listeners:B})}var C8=/\r\n?/g,P8=/\u0000|\uFFFD/g;function rO(l){return(typeof l=="string"?l:""+l).replace(C8,`
`).replace(P8,"")}function nO(l,f){return f=rO(f),rO(l)===f}function Dt(l,f,p,v,A,O){switch(p){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||hl(l,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&hl(l,""+v);break;case"className":Xf(l,"class",v);break;case"tabIndex":Xf(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Xf(l,p,v);break;case"style":nw(l,v,O);break;case"data":if(f!=="object"){Xf(l,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Zf(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(p==="formAction"?(f!=="input"&&Dt(l,f,"name",A.name,A,null),Dt(l,f,"formEncType",A.formEncType,A,null),Dt(l,f,"formMethod",A.formMethod,A,null),Dt(l,f,"formTarget",A.formTarget,A,null)):(Dt(l,f,"encType",A.encType,A,null),Dt(l,f,"method",A.method,A,null),Dt(l,f,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Zf(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=ps);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=Zf(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":bt("beforetoggle",l),bt("toggle",l),Yf(l,"popover",v);break;case"xlinkActuate":ds(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ds(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ds(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ds(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ds(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ds(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ds(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ds(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ds(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Yf(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=a4.get(p)||p,Yf(l,p,v))}}function by(l,f,p,v,A,O){switch(p){case"style":nw(l,v,O);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"children":typeof v=="string"?hl(l,v):(typeof v=="number"||typeof v=="bigint")&&hl(l,""+v);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!W1.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),f=p.slice(2,A?p.length-7:void 0),O=l[Sr]||null,O=O!=null?O[p]:null,typeof O=="function"&&l.removeEventListener(f,O,A),typeof v=="function")){typeof O!="function"&&O!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(f,v,A);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):Yf(l,p,v)}}}function Hr(l,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",l),bt("load",l);var v=!1,A=!1,O;for(O in p)if(p.hasOwnProperty(O)){var B=p[O];if(B!=null)switch(O){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Dt(l,f,O,B,p,null)}}A&&Dt(l,f,"srcSet",p.srcSet,p,null),v&&Dt(l,f,"src",p.src,p,null);return;case"input":bt("invalid",l);var W=O=B=A=null,he=null,_e=null;for(v in p)if(p.hasOwnProperty(v)){var Fe=p[v];if(Fe!=null)switch(v){case"name":A=Fe;break;case"type":B=Fe;break;case"checked":he=Fe;break;case"defaultChecked":_e=Fe;break;case"value":O=Fe;break;case"defaultValue":W=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,f));break;default:Dt(l,f,v,Fe,p,null)}}J1(l,O,W,he,_e,B,A,!1);return;case"select":bt("invalid",l),v=B=O=null;for(A in p)if(p.hasOwnProperty(A)&&(W=p[A],W!=null))switch(A){case"value":O=W;break;case"defaultValue":B=W;break;case"multiple":v=W;default:Dt(l,f,A,W,p,null)}f=O,p=B,l.multiple=!!v,f!=null?fl(l,!!v,f,!1):p!=null&&fl(l,!!v,p,!0);return;case"textarea":bt("invalid",l),O=A=v=null;for(B in p)if(p.hasOwnProperty(B)&&(W=p[B],W!=null))switch(B){case"value":v=W;break;case"defaultValue":A=W;break;case"children":O=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:Dt(l,f,B,W,p,null)}tw(l,v,A,O);return;case"option":for(he in p)if(p.hasOwnProperty(he)&&(v=p[he],v!=null))switch(he){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Dt(l,f,he,v,p,null)}return;case"dialog":bt("beforetoggle",l),bt("toggle",l),bt("cancel",l),bt("close",l);break;case"iframe":case"object":bt("load",l);break;case"video":case"audio":for(v=0;v<yc.length;v++)bt(yc[v],l);break;case"image":bt("error",l),bt("load",l);break;case"details":bt("toggle",l);break;case"embed":case"source":case"link":bt("error",l),bt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in p)if(p.hasOwnProperty(_e)&&(v=p[_e],v!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Dt(l,f,_e,v,p,null)}return;default:if(Dm(f)){for(Fe in p)p.hasOwnProperty(Fe)&&(v=p[Fe],v!==void 0&&by(l,f,Fe,v,p,void 0));return}}for(W in p)p.hasOwnProperty(W)&&(v=p[W],v!=null&&Dt(l,f,W,v,p,null))}function D8(l,f,p,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,B=null,W=null,he=null,_e=null,Fe=null;for(De in p){var He=p[De];if(p.hasOwnProperty(De)&&He!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":he=He;default:v.hasOwnProperty(De)||Dt(l,f,De,null,v,He)}}for(var Oe in v){var De=v[Oe];if(He=p[Oe],v.hasOwnProperty(Oe)&&(De!=null||He!=null))switch(Oe){case"type":O=De;break;case"name":A=De;break;case"checked":_e=De;break;case"defaultChecked":Fe=De;break;case"value":B=De;break;case"defaultValue":W=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,f));break;default:De!==He&&Dt(l,f,Oe,De,v,He)}}Cm(l,B,W,he,_e,Fe,O,A);return;case"select":De=B=W=Oe=null;for(O in p)if(he=p[O],p.hasOwnProperty(O)&&he!=null)switch(O){case"value":break;case"multiple":De=he;default:v.hasOwnProperty(O)||Dt(l,f,O,null,v,he)}for(A in v)if(O=v[A],he=p[A],v.hasOwnProperty(A)&&(O!=null||he!=null))switch(A){case"value":Oe=O;break;case"defaultValue":W=O;break;case"multiple":B=O;default:O!==he&&Dt(l,f,A,O,v,he)}f=W,p=B,v=De,Oe!=null?fl(l,!!p,Oe,!1):!!v!=!!p&&(f!=null?fl(l,!!p,f,!0):fl(l,!!p,p?[]:"",!1));return;case"textarea":De=Oe=null;for(W in p)if(A=p[W],p.hasOwnProperty(W)&&A!=null&&!v.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Dt(l,f,W,null,v,A)}for(B in v)if(A=v[B],O=p[B],v.hasOwnProperty(B)&&(A!=null||O!=null))switch(B){case"value":Oe=A;break;case"defaultValue":De=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==O&&Dt(l,f,B,A,v,O)}ew(l,Oe,De);return;case"option":for(var tt in p)if(Oe=p[tt],p.hasOwnProperty(tt)&&Oe!=null&&!v.hasOwnProperty(tt))switch(tt){case"selected":l.selected=!1;break;default:Dt(l,f,tt,null,v,Oe)}for(he in v)if(Oe=v[he],De=p[he],v.hasOwnProperty(he)&&Oe!==De&&(Oe!=null||De!=null))switch(he){case"selected":l.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:Dt(l,f,he,Oe,v,De)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in p)Oe=p[ot],p.hasOwnProperty(ot)&&Oe!=null&&!v.hasOwnProperty(ot)&&Dt(l,f,ot,null,v,Oe);for(_e in v)if(Oe=v[_e],De=p[_e],v.hasOwnProperty(_e)&&Oe!==De&&(Oe!=null||De!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,f));break;default:Dt(l,f,_e,Oe,v,De)}return;default:if(Dm(f)){for(var kt in p)Oe=p[kt],p.hasOwnProperty(kt)&&Oe!==void 0&&!v.hasOwnProperty(kt)&&by(l,f,kt,void 0,v,Oe);for(Fe in v)Oe=v[Fe],De=p[Fe],!v.hasOwnProperty(Fe)||Oe===De||Oe===void 0&&De===void 0||by(l,f,Fe,Oe,v,De);return}}for(var be in p)Oe=p[be],p.hasOwnProperty(be)&&Oe!=null&&!v.hasOwnProperty(be)&&Dt(l,f,be,null,v,Oe);for(He in v)Oe=v[He],De=p[He],!v.hasOwnProperty(He)||Oe===De||Oe==null&&De==null||Dt(l,f,He,Oe,v,De)}function iO(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k8(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var A=p[v],O=A.transferSize,B=A.initiatorType,W=A.duration;if(O&&W&&iO(B)){for(B=0,W=A.responseEnd,v+=1;v<p.length;v++){var he=p[v],_e=he.startTime;if(_e>W)break;var Fe=he.transferSize,He=he.initiatorType;Fe&&iO(He)&&(he=he.responseEnd,B+=Fe*(he<W?1:(W-_e)/(he-_e)))}if(--v,f+=8*(O+B)/(A.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var xy=null,Sy=null;function Vh(l){return l.nodeType===9?l:l.ownerDocument}function sO(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aO(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Ey(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Ty=null;function M8(){var l=window.event;return l&&l.type==="popstate"?l===Ty?!1:(Ty=l,!0):(Ty=null,!1)}var oO=typeof setTimeout=="function"?setTimeout:void 0,N8=typeof clearTimeout=="function"?clearTimeout:void 0,lO=typeof Promise=="function"?Promise:void 0,B8=typeof queueMicrotask=="function"?queueMicrotask:typeof lO<"u"?function(l){return lO.resolve(null).then(l).catch(U8)}:oO;function U8(l){setTimeout(function(){throw l})}function Da(l){return l==="head"}function uO(l,f){var p=f,v=0;do{var A=p.nextSibling;if(l.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(A),zl(f);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")bc(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,bc(p);for(var O=p.firstChild;O;){var B=O.nextSibling,W=O.nodeName;O[cn]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&O.rel.toLowerCase()==="stylesheet"||p.removeChild(O),O=B}}else p==="body"&&bc(l.ownerDocument.body);p=A}while(p);zl(f)}function cO(l,f){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?f?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(f?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function Ay(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Ay(p),Rm(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function j8(l,f,p,v){for(;l.nodeType===1;){var A=p;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[cn])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=di(l.nextSibling),l===null)break}return null}function F8(l,f,p){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=di(l.nextSibling),l===null))return null;return l}function fO(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=di(l.nextSibling),l===null))return null;return l}function wy(l){return l.data==="$?"||l.data==="$~"}function _y(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function $8(l,f){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||p.readyState!=="loading")f();else{var v=function(){f(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function di(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var Iy=null;function hO(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(f===0)return di(l.nextSibling);f--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||f++}l=l.nextSibling}return null}function dO(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(f===0)return l;f--}else p!=="/$"&&p!=="/&"||f++}l=l.previousSibling}return null}function pO(l,f,p){switch(f=Vh(p),l){case"html":if(l=f.documentElement,!l)throw Error(n(452));return l;case"head":if(l=f.head,!l)throw Error(n(453));return l;case"body":if(l=f.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function bc(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);Rm(l)}var pi=new Map,gO=new Set;function Wh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ls=K.d;K.d={f:G8,r:z8,D:H8,C:K8,L:q8,m:V8,X:Y8,S:W8,M:X8};function G8(){var l=Ls.f(),f=jh();return l||f}function z8(l){var f=ll(l);f!==null&&f.tag===5&&f.type==="form"?P_(f):Ls.r(l)}var Fl=typeof document>"u"?null:document;function mO(l,f,p){var v=Fl;if(v&&typeof f=="string"&&f){var A=ai(f);A='link[rel="'+l+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),gO.has(A)||(gO.add(A),l={rel:l,crossOrigin:p,href:f},v.querySelector(A)===null&&(f=v.createElement("link"),Hr(f,"link",l),Lr(f),v.head.appendChild(f)))}}function H8(l){Ls.D(l),mO("dns-prefetch",l,null)}function K8(l,f){Ls.C(l,f),mO("preconnect",l,f)}function q8(l,f,p){Ls.L(l,f,p);var v=Fl;if(v&&l&&f){var A='link[rel="preload"][as="'+ai(f)+'"]';f==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+ai(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+ai(p.imageSizes)+'"]')):A+='[href="'+ai(l)+'"]';var O=A;switch(f){case"style":O=$l(l);break;case"script":O=Gl(l)}pi.has(O)||(l=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:l,as:f},p),pi.set(O,l),v.querySelector(A)!==null||f==="style"&&v.querySelector(xc(O))||f==="script"&&v.querySelector(Sc(O))||(f=v.createElement("link"),Hr(f,"link",l),Lr(f),v.head.appendChild(f)))}}function V8(l,f){Ls.m(l,f);var p=Fl;if(p&&l){var v=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+ai(v)+'"][href="'+ai(l)+'"]',O=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Gl(l)}if(!pi.has(O)&&(l=d({rel:"modulepreload",href:l},f),pi.set(O,l),p.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Sc(O)))return}v=p.createElement("link"),Hr(v,"link",l),Lr(v),p.head.appendChild(v)}}}function W8(l,f,p){Ls.S(l,f,p);var v=Fl;if(v&&l){var A=ul(v).hoistableStyles,O=$l(l);f=f||"default";var B=A.get(O);if(!B){var W={loading:0,preload:null};if(B=v.querySelector(xc(O)))W.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},p),(p=pi.get(O))&&Oy(l,p);var he=B=v.createElement("link");Lr(he),Hr(he,"link",l),he._p=new Promise(function(_e,Fe){he.onload=_e,he.onerror=Fe}),he.addEventListener("load",function(){W.loading|=1}),he.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Yh(B,f,v)}B={type:"stylesheet",instance:B,count:1,state:W},A.set(O,B)}}}function Y8(l,f){Ls.X(l,f);var p=Fl;if(p&&l){var v=ul(p).hoistableScripts,A=Gl(l),O=v.get(A);O||(O=p.querySelector(Sc(A)),O||(l=d({src:l,async:!0},f),(f=pi.get(A))&&Ry(l,f),O=p.createElement("script"),Lr(O),Hr(O,"link",l),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function X8(l,f){Ls.M(l,f);var p=Fl;if(p&&l){var v=ul(p).hoistableScripts,A=Gl(l),O=v.get(A);O||(O=p.querySelector(Sc(A)),O||(l=d({src:l,async:!0,type:"module"},f),(f=pi.get(A))&&Ry(l,f),O=p.createElement("script"),Lr(O),Hr(O,"link",l),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},v.set(A,O))}}function yO(l,f,p,v){var A=(A=Se.current)?Wh(A):null;if(!A)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=$l(p.href),p=ul(A).hoistableStyles,v=p.get(f),v||(v={type:"style",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=$l(p.href);var O=ul(A).hoistableStyles,B=O.get(l);if(B||(A=A.ownerDocument||A,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,B),(O=A.querySelector(xc(l)))&&!O._p&&(B.instance=O,B.state.loading=5),pi.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},pi.set(l,p),O||Q8(A,l,p,B.state))),f&&v===null)throw Error(n(528,""));return B}if(f&&v!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Gl(p),p=ul(A).hoistableScripts,v=p.get(f),v||(v={type:"script",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function $l(l){return'href="'+ai(l)+'"'}function xc(l){return'link[rel="stylesheet"]['+l+"]"}function vO(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Q8(l,f,p,v){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=l.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),Hr(f,"link",p),Lr(f),l.head.appendChild(f))}function Gl(l){return'[src="'+ai(l)+'"]'}function Sc(l){return"script[async]"+l}function bO(l,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var v=l.querySelector('style[data-href~="'+ai(p.href)+'"]');if(v)return f.instance=v,Lr(v),v;var A=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Lr(v),Hr(v,"style",A),Yh(v,p.precedence,l),f.instance=v;case"stylesheet":A=$l(p.href);var O=l.querySelector(xc(A));if(O)return f.state.loading|=4,f.instance=O,Lr(O),O;v=vO(p),(A=pi.get(A))&&Oy(v,A),O=(l.ownerDocument||l).createElement("link"),Lr(O);var B=O;return B._p=new Promise(function(W,he){B.onload=W,B.onerror=he}),Hr(O,"link",v),f.state.loading|=4,Yh(O,p.precedence,l),f.instance=O;case"script":return O=Gl(p.src),(A=l.querySelector(Sc(O)))?(f.instance=A,Lr(A),A):(v=p,(A=pi.get(O))&&(v=d({},p),Ry(v,A)),l=l.ownerDocument||l,A=l.createElement("script"),Lr(A),Hr(A,"link",v),l.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,Yh(v,p.precedence,l));return f.instance}function Yh(l,f,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,O=A,B=0;B<v.length;B++){var W=v[B];if(W.dataset.precedence===f)O=W;else if(O!==A)break}O?O.parentNode.insertBefore(l,O.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(l,f.firstChild))}function Oy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function Ry(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var Xh=null;function xO(l,f,p){if(Xh===null){var v=new Map,A=Xh=new Map;A.set(p,v)}else A=Xh,v=A.get(p),v||(v=new Map,A.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),A=0;A<p.length;A++){var O=p[A];if(!(O[cn]||O[Jt]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var B=O.getAttribute(f)||"";B=l+B;var W=v.get(B);W?W.push(O):v.set(B,[O])}}return v}function SO(l,f,p){l=l.ownerDocument||l,l.head.insertBefore(p,f==="title"?l.querySelector("head > title"):null)}function Z8(l,f,p){if(p===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function EO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function J8(l,f,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var A=$l(v.href),O=f.querySelector(xc(A));if(O){f=O._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=Qh.bind(l),f.then(l,l)),p.state.loading|=4,p.instance=O,Lr(O);return}O=f.ownerDocument||f,v=vO(v),(A=pi.get(A))&&Oy(v,A),O=O.createElement("link"),Lr(O);var B=O;B._p=new Promise(function(W,he){B.onload=W,B.onerror=he}),Hr(O,"link",v),p.instance=O}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Qh.bind(l),f.addEventListener("load",p),f.addEventListener("error",p))}}var Ly=0;function e6(l,f){return l.stylesheets&&l.count===0&&Jh(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&Jh(l,l.stylesheets),l.unsuspend){var O=l.unsuspend;l.unsuspend=null,O()}},6e4+f);0<l.imgBytes&&Ly===0&&(Ly=62500*k8());var A=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Jh(l,l.stylesheets),l.unsuspend)){var O=l.unsuspend;l.unsuspend=null,O()}},(l.imgBytes>Ly?50:800)+f);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(A)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Zh=null;function Jh(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Zh=new Map,f.forEach(t6,l),Zh=null,Qh.call(l))}function t6(l,f){if(!(f.state.loading&4)){var p=Zh.get(l);if(p)var v=p.get(null);else{p=new Map,Zh.set(l,p);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var B=A[O];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(p.set(B.dataset.precedence,B),v=B)}v&&p.set(null,v)}A=f.instance,B=A.getAttribute("data-precedence"),O=p.get(B)||v,O===v&&p.set(null,A),p.set(B,A),this.count++,v=Qh.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),O?O.parentNode.insertBefore(A,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),f.state.loading|=4}}var Ec={$$typeof:T,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function r6(l,f,p,v,A,O,B,W,he){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.hiddenUpdates=fs(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function TO(l,f,p,v,A,O,B,W,he,_e,Fe,He){return l=new r6(l,f,p,B,he,_e,Fe,He,W),f=1,O===!0&&(f|=24),O=$n(3,null,null,f),l.current=O,O.stateNode=l,f=u0(),f.refCount++,l.pooledCache=f,f.refCount++,O.memoizedState={element:v,isDehydrated:p,cache:f},d0(O),l}function AO(l){return l?(l=bl,l):bl}function wO(l,f,p,v,A,O){A=AO(A),v.context===null?v.context=A:v.pendingContext=A,v=Ea(f),v.payload={element:p},O=O===void 0?null:O,O!==null&&(v.callback=O),p=Ta(l,v,f),p!==null&&(Rn(p,l,f),ec(p,l,f))}function _O(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<f?p:f}}function Cy(l,f){_O(l,f),(l=l.alternate)&&_O(l,f)}function IO(l){if(l.tag===13||l.tag===31){var f=go(l,67108864);f!==null&&Rn(f,l,67108864),Cy(l,67108864)}}function OO(l){if(l.tag===13||l.tag===31){var f=qn();f=Zt(f);var p=go(l,f);p!==null&&Rn(p,l,f),Cy(l,f)}}var ed=!0;function n6(l,f,p,v){var A=H.T;H.T=null;var O=K.p;try{K.p=2,Py(l,f,p,v)}finally{K.p=O,H.T=A}}function i6(l,f,p,v){var A=H.T;H.T=null;var O=K.p;try{K.p=8,Py(l,f,p,v)}finally{K.p=O,H.T=A}}function Py(l,f,p,v){if(ed){var A=Dy(v);if(A===null)vy(l,f,v,td,p),LO(l,v);else if(a6(A,l,f,p,v))v.stopPropagation();else if(LO(l,v),f&4&&-1<s6.indexOf(l)){for(;A!==null;){var O=ll(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var B=bn(O.pendingLanes);if(B!==0){var W=O;for(W.pendingLanes|=2,W.entangledLanes|=2;B;){var he=1<<31-Xe(B);W.entanglements[1]|=he,B&=~he}Gi(O),(_t&6)===0&&(Bh=Ie()+500,mc(0))}}break;case 31:case 13:W=go(O,2),W!==null&&Rn(W,O,2),jh(),Cy(O,2)}if(O=Dy(v),O===null&&vy(l,f,v,td,p),O===A)break;A=O}A!==null&&v.stopPropagation()}else vy(l,f,v,null,p)}}function Dy(l){return l=Mm(l),ky(l)}var td=null;function ky(l){if(td=null,l=ol(l),l!==null){var f=s(l);if(f===null)l=null;else{var p=f.tag;if(p===13){if(l=a(f),l!==null)return l;l=null}else if(p===31){if(l=o(f),l!==null)return l;l=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return td=l,null}function RO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case L:return 2;case M:return 8;case z:case fe:return 32;case ve:return 268435456;default:return 32}default:return 32}}var My=!1,ka=null,Ma=null,Na=null,Tc=new Map,Ac=new Map,Ba=[],s6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LO(l,f){switch(l){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":Tc.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(f.pointerId)}}function wc(l,f,p,v,A,O){return l===null||l.nativeEvent!==O?(l={blockedOn:f,domEventName:p,eventSystemFlags:v,nativeEvent:O,targetContainers:[A]},f!==null&&(f=ll(f),f!==null&&IO(f)),l):(l.eventSystemFlags|=v,f=l.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),l)}function a6(l,f,p,v,A){switch(f){case"focusin":return ka=wc(ka,l,f,p,v,A),!0;case"dragenter":return Ma=wc(Ma,l,f,p,v,A),!0;case"mouseover":return Na=wc(Na,l,f,p,v,A),!0;case"pointerover":var O=A.pointerId;return Tc.set(O,wc(Tc.get(O)||null,l,f,p,v,A)),!0;case"gotpointercapture":return O=A.pointerId,Ac.set(O,wc(Ac.get(O)||null,l,f,p,v,A)),!0}return!1}function CO(l){var f=ol(l.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=a(p),f!==null){l.blockedOn=f,ga(l.priority,function(){OO(p)});return}}else if(f===31){if(f=o(p),f!==null){l.blockedOn=f,ga(l.priority,function(){OO(p)});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function rd(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var p=Dy(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);km=v,p.target.dispatchEvent(v),km=null}else return f=ll(p),f!==null&&IO(f),l.blockedOn=p,!1;f.shift()}return!0}function PO(l,f,p){rd(l)&&p.delete(f)}function o6(){My=!1,ka!==null&&rd(ka)&&(ka=null),Ma!==null&&rd(Ma)&&(Ma=null),Na!==null&&rd(Na)&&(Na=null),Tc.forEach(PO),Ac.forEach(PO)}function nd(l,f){l.blockedOn===f&&(l.blockedOn=null,My||(My=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,o6)))}var id=null;function DO(l){id!==l&&(id=l,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){id===l&&(id=null);for(var f=0;f<l.length;f+=3){var p=l[f],v=l[f+1],A=l[f+2];if(typeof v!="function"){if(ky(v||p)===null)continue;break}var O=ll(p);O!==null&&(l.splice(f,3),f-=3,D0(O,{pending:!0,data:A,method:p.method,action:v},v,A))}}))}function zl(l){function f(he){return nd(he,l)}ka!==null&&nd(ka,l),Ma!==null&&nd(Ma,l),Na!==null&&nd(Na,l),Tc.forEach(f),Ac.forEach(f);for(var p=0;p<Ba.length;p++){var v=Ba[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Ba.length&&(p=Ba[0],p.blockedOn===null);)CO(p),p.blockedOn===null&&Ba.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var A=p[v],O=p[v+1],B=A[Sr]||null;if(typeof O=="function")B||DO(p);else if(B){var W=null;if(O&&O.hasAttribute("formAction")){if(A=O,B=O[Sr]||null)W=B.formAction;else if(ky(A)!==null)continue}else W=B.action;typeof W=="function"?p[v+1]=W:(p.splice(v,3),v-=3),DO(p)}}}function kO(){function l(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(B){return A=B})},focusReset:"manual",scroll:"manual"})}function f(){A!==null&&(A(),A=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,A=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),A!==null&&(A(),A=null)}}}function Ny(l){this._internalRoot=l}sd.prototype.render=Ny.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,v=qn();wO(p,v,l,f,null,null)},sd.prototype.unmount=Ny.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;wO(l.current,2,null,l,null,null),jh(),f[En]=null}};function sd(l){this._internalRoot=l}sd.prototype.unstable_scheduleHydration=function(l){if(l){var f=xn();l={blockedOn:null,target:l,priority:f};for(var p=0;p<Ba.length&&f!==0&&f<Ba[p].priority;p++);Ba.splice(p,0,l),p===0&&CO(l)}};var MO=e.version;if(MO!=="19.2.0")throw Error(n(527,MO,"19.2.0"));K.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=c(f),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var l6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{me=ad.inject(l6),Ae=ad}catch{}}return Ic.createRoot=function(l,f){if(!i(l))throw Error(n(299));var p=!1,v="",A=G_,O=z_,B=H_;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(B=f.onRecoverableError)),f=TO(l,1,!1,null,null,p,v,null,A,O,B,kO),l[En]=f.current,yy(l),new Ny(f)},Ic.hydrateRoot=function(l,f,p){if(!i(l))throw Error(n(299));var v=!1,A="",O=G_,B=z_,W=H_,he=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(W=p.onRecoverableError),p.formState!==void 0&&(he=p.formState)),f=TO(l,1,!0,f,p??null,v,A,he,O,B,W,kO),f.context=AO(null),p=f.current,v=qn(),v=Zt(v),A=Ea(v),A.callback=null,Ta(p,A,v),p=v,f.current.lanes=p,J(f,p),Gi(f),l[En]=f.current,yy(l),new sd(f)},Ic.version="19.2.0",Ic}var KO;function x6(){if(KO)return jy.exports;KO=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jy.exports=b6(),jy.exports}var S6=x6();var qO="popstate";function E6(r={}){function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return Zb("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Xc(i)}return A6(e,t,null,r)}function rr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Mi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T6(){return Math.random().toString(36).substring(2,10)}function VO(r,e){return{usr:r.state,key:r.key,idx:e}}function Zb(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Au(e):e,state:t,key:e&&e.key||n||T6()}}function Xc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Au(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function A6(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",u=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let b=h(),E=b==null?null:b-c;c=b,u&&u({action:o,location:x.location,delta:E})}function g(b,E){o="PUSH";let S=Zb(x.location,b,E);c=h()+1;let T=VO(S,c),I=x.createHref(S);try{a.pushState(T,"",I)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(I)}s&&u&&u({action:o,location:x.location,delta:1})}function m(b,E){o="REPLACE";let S=Zb(x.location,b,E);c=h();let T=VO(S,c),I=x.createHref(S);a.replaceState(T,"",I),s&&u&&u({action:o,location:x.location,delta:0})}function y(b){return w6(b)}let x={get action(){return o},get location(){return r(i,a)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qO,d),u=b,()=>{i.removeEventListener(qO,d),u=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let E=y(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:m,go(b){return a.go(b)}};return x}function w6(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),rr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Xc(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function jM(r,e,t="/"){return _6(r,e,t,!1)}function _6(r,e,t,n){let i=typeof e=="string"?Au(e):e,s=Ws(i.pathname||"/",t);if(s==null)return null;let a=FM(r);I6(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let c=U6(s);o=N6(a[u],c,n)}return o}function FM(r,e=[],t=[],n="",i=!1){let s=(a,o,u=i,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;rr(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=Ks([n,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(rr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),FM(a.children,e,g,d,u)),!(a.path==null&&!a.index)&&e.push({path:d,score:k6(d,a.index),routesMeta:g})};return r.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let u of $M(a.path))s(a,o,!0,u)}),e}function $M(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=$M(n.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>r.startsWith("/")&&u===""?"/":u)}function I6(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:M6(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var O6=/^:[\w-]+$/,R6=3,L6=2,C6=1,P6=10,D6=-2,WO=r=>r==="*";function k6(r,e){let t=r.split("/"),n=t.length;return t.some(WO)&&(n+=D6),e&&(n+=L6),t.filter(i=>!WO(i)).reduce((i,s)=>i+(O6.test(s)?R6:s===""?C6:P6),n)}function M6(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function N6(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let u=n[o],c=o===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Op({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!d&&c&&t&&!n[n.length-1].route.index&&(d=Op({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Ks([s,d.pathname]),pathnameBase:z6(Ks([s,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(s=Ks([s,d.pathnameBase]))}return a}function Op(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=B6(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:h,isOptional:d},g)=>{if(h==="*"){let y=o[g]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=o[g];return d&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:r}}function B6(r,e=!1,t=!0){Mi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function U6(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ws(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var j6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F6=r=>j6.test(r);function $6(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Au(r):r,s;if(t)if(F6(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Mi(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?s=YO(t.substring(1),"/"):s=YO(t,e)}else s=e;return{pathname:s,search:H6(n),hash:K6(i)}}function YO(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function zy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G6(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function GM(r){let e=G6(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function zM(r,e,t,n=!1){let i;typeof r=="string"?i=Au(r):(i={...r},rr(!i.pathname||!i.pathname.includes("?"),zy("?","pathname","search",i)),rr(!i.pathname||!i.pathname.includes("#"),zy("#","pathname","hash",i)),rr(!i.search||!i.search.includes("#"),zy("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),d-=1;i.pathname=g.join("/")}o=d>=0?e[d]:"/"}let u=$6(i,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var Ks=r=>r.join("/").replace(/\/\/+/g,"/"),z6=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),H6=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,K6=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function q6(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var HM=["POST","PUT","PATCH","DELETE"];new Set(HM);var V6=["GET",...HM];new Set(V6);var wu=P.createContext(null);wu.displayName="DataRouter";var Dg=P.createContext(null);Dg.displayName="DataRouterState";P.createContext(!1);var KM=P.createContext({isTransitioning:!1});KM.displayName="ViewTransition";var W6=P.createContext(new Map);W6.displayName="Fetchers";var Y6=P.createContext(null);Y6.displayName="Await";var us=P.createContext(null);us.displayName="Navigation";var Tf=P.createContext(null);Tf.displayName="Location";var ia=P.createContext({outlet:null,matches:[],isDataRoute:!1});ia.displayName="Route";var ST=P.createContext(null);ST.displayName="RouteError";function X6(r,{relative:e}={}){rr(Af(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=P.useContext(us),{hash:i,pathname:s,search:a}=wf(r,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Ks([t,s])),n.createHref({pathname:o,search:a,hash:i})}function Af(){return P.useContext(Tf)!=null}function el(){return rr(Af(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Tf).location}var qM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VM(r){P.useContext(us).static||P.useLayoutEffect(r)}function Q6(){let{isDataRoute:r}=P.useContext(ia);return r?c5():Z6()}function Z6(){rr(Af(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(wu),{basename:e,navigator:t}=P.useContext(us),{matches:n}=P.useContext(ia),{pathname:i}=el(),s=JSON.stringify(GM(n)),a=P.useRef(!1);return VM(()=>{a.current=!0}),P.useCallback((u,c={})=>{if(Mi(a.current,qM),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=zM(u,JSON.parse(s),i,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ks([e,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[e,t,s,i,r])}P.createContext(null);function wf(r,{relative:e}={}){let{matches:t}=P.useContext(ia),{pathname:n}=el(),i=JSON.stringify(GM(t));return P.useMemo(()=>zM(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function J6(r,e){return WM(r,e)}function WM(r,e,t,n,i){rr(Af(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(us),{matches:a}=P.useContext(ia),o=a[a.length-1],u=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let S=d&&d.path||"";YM(c,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=el(),m;if(e){let S=typeof e=="string"?Au(e):e;rr(h==="/"||S.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),m=S}else m=g;let y=m.pathname||"/",x=y;if(h!=="/"){let S=h.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=jM(r,{pathname:x});Mi(d||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Mi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=i5(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Ks([h,s.encodeLocation?s.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Ks([h,s.encodeLocation?s.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),a,t,n,i);return e&&E?P.createElement(Tf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},E):E}function e5(){let r=u5(),e=q6(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,a)}var t5=P.createElement(e5,null),r5=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?P.createElement(ia.Provider,{value:this.props.routeContext},P.createElement(ST.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n5({routeContext:r,match:e,children:t}){let n=P.useContext(wu);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ia.Provider,{value:r},t)}function i5(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,a=t?.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);rr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,u=-1;if(t)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:g,errors:m}=t,y=d.route.loader&&!g.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){o=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let c=t&&n?(h,d)=>{n(h,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,g)=>{let m,y=!1,x=null,b=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||t5,o&&(u<0&&g===0?(YM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):u===g&&(y=!0,b=d.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),S=()=>{let T;return m?T=x:y?T=b:d.route.Component?T=P.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,P.createElement(n5,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:T})};return t&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?P.createElement(r5,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:c}):S()},null)}function ET(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s5(r){let e=P.useContext(wu);return rr(e,ET(r)),e}function a5(r){let e=P.useContext(Dg);return rr(e,ET(r)),e}function o5(r){let e=P.useContext(ia);return rr(e,ET(r)),e}function TT(r){let e=o5(r),t=e.matches[e.matches.length-1];return rr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function l5(){return TT("useRouteId")}function u5(){let r=P.useContext(ST),e=a5("useRouteError"),t=TT("useRouteError");return r!==void 0?r:e.errors?.[t]}function c5(){let{router:r}=s5("useNavigate"),e=TT("useNavigate"),t=P.useRef(!1);return VM(()=>{t.current=!0}),P.useCallback(async(i,s={})=>{Mi(t.current,qM),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var XO={};function YM(r,e,t){!e&&!XO[r]&&(XO[r]=!0,Mi(!1,t))}P.memo(f5);function f5({routes:r,future:e,state:t,unstable_onError:n}){return WM(r,void 0,t,n,e)}function Jb(r){rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h5({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){rr(!Af(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Au(t));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:g="default"}=t,m=P.useMemo(()=>{let y=Ws(u,a);return y==null?null:{location:{pathname:y,search:c,hash:h,state:d,key:g},navigationType:n}},[a,u,c,h,d,g,n]);return Mi(m!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:P.createElement(us.Provider,{value:o},P.createElement(Tf.Provider,{children:e,value:m}))}function d5({children:r,location:e}){return J6(ex(r),e)}function ex(r,e=[]){let t=[];return P.Children.forEach(r,(n,i)=>{if(!P.isValidElement(n))return;let s=[...e,i];if(n.type===P.Fragment){t.push.apply(t,ex(n.props.children,s));return}rr(n.type===Jb,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=ex(n.props.children,s)),t.push(a)}),t}var Gd="get",zd="application/x-www-form-urlencoded";function kg(r){return r!=null&&typeof r.tagName=="string"}function p5(r){return kg(r)&&r.tagName.toLowerCase()==="button"}function g5(r){return kg(r)&&r.tagName.toLowerCase()==="form"}function m5(r){return kg(r)&&r.tagName.toLowerCase()==="input"}function y5(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function v5(r,e){return r.button===0&&(!e||e==="_self")&&!y5(r)}var od=null;function b5(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var x5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hy(r){return r!=null&&!x5.has(r)?(Mi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):r}function S5(r,e){let t,n,i,s,a;if(g5(r)){let o=r.getAttribute("action");n=o?Ws(o,e):null,t=r.getAttribute("method")||Gd,i=Hy(r.getAttribute("enctype"))||zd,s=new FormData(r)}else if(p5(r)||m5(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||o.getAttribute("action");if(n=u?Ws(u,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Gd,i=Hy(r.getAttribute("formenctype"))||Hy(o.getAttribute("enctype"))||zd,s=new FormData(o,r),!b5()){let{name:c,type:h,value:d}=r;if(h==="image"){let g=c?`${c}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else c&&s.append(c,d)}}else{if(kg(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Gd,n=null,i=zd,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function AT(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function E5(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ws(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function T5(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function A5(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function w5(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await T5(s,t);return a.links?a.links():[]}return[]}));return R5(n.flat(1).filter(A5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QO(r,e,t,n,i,s){let a=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,o=(u,c)=>t[c].pathname!==u.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,c)=>a(u,c)||o(u,c)):s==="data"?e.filter((u,c)=>{let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,c)||o(u,c))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function _5(r,e,{includeHydrateFallback:t}={}){return I5(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function I5(r){return[...new Set(r)]}function O5(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function R5(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(O5(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function XM(){let r=P.useContext(wu);return AT(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function L5(){let r=P.useContext(Dg);return AT(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var wT=P.createContext(void 0);wT.displayName="FrameworkContext";function QM(){let r=P.useContext(wT);return AT(r,"You must render this element inside a <HydratedRouter> element"),r}function C5(r,e){let t=P.useContext(wT),[n,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,g=P.useRef(null);P.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let x=E=>{E.forEach(S=>{a(S.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return g.current&&b.observe(g.current),()=>{b.disconnect()}}},[r]),P.useEffect(()=>{if(n){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[n]);let m=()=>{i(!0)},y=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,g,{}]:[s,g,{onFocus:Oc(o,m),onBlur:Oc(u,y),onMouseEnter:Oc(c,m),onMouseLeave:Oc(h,y),onTouchStart:Oc(d,m)}]:[!1,g,{}]}function Oc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function P5({page:r,...e}){let{router:t}=XM(),n=P.useMemo(()=>jM(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?P.createElement(k5,{page:r,matches:n,...e}):null}function D5(r){let{manifest:e,routeModules:t}=QM(),[n,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return w5(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function k5({page:r,matches:e,...t}){let n=el(),{manifest:i,routeModules:s}=QM(),{basename:a}=XM(),{loaderData:o,matches:u}=L5(),c=P.useMemo(()=>QO(r,e,u,i,n,"data"),[r,e,u,i,n]),h=P.useMemo(()=>QO(r,e,u,i,n,"assets"),[r,e,u,i,n]),d=P.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,x=!1;if(e.forEach(E=>{let S=i.routes[E.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===E.route.id)&&E.route.id in o&&s[E.route.id]?.shouldRevalidate||S.hasClientLoader?x=!0:y.add(E.route.id))}),y.size===0)return[];let b=E5(r,a,"data");return x&&y.size>0&&b.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[b.pathname+b.search]},[a,o,n,i,c,e,r,s]),g=P.useMemo(()=>_5(h,i),[h,i]),m=D5(h);return P.createElement(P.Fragment,null,d.map(y=>P.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>P.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),m.map(({key:y,link:x})=>P.createElement("link",{key:y,nonce:t.nonce,...x})))}function M5(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ZM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZM&&(window.__reactRouterVersion="7.9.6")}catch{}function N5({basename:r,children:e,window:t}){let n=P.useRef();n.current==null&&(n.current=E6({window:t,v5Compat:!0}));let i=n.current,[s,a]=P.useState({action:i.action,location:i.location}),o=P.useCallback(u=>{P.startTransition(()=>a(u))},[a]);return P.useLayoutEffect(()=>i.listen(o),[i,o]),P.createElement(h5,{basename:r,children:e,location:s.location,navigationType:s.action,navigator:i})}var JM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eN=P.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:u,to:c,preventScrollReset:h,viewTransition:d,...g},m){let{basename:y}=P.useContext(us),x=typeof c=="string"&&JM.test(c),b,E=!1;if(typeof c=="string"&&x&&(b=c,ZM))try{let k=new URL(window.location.href),D=c.startsWith("//")?new URL(k.protocol+c):new URL(c),U=Ws(D.pathname,y);D.origin===k.origin&&U!=null?c=U+D.search+D.hash:E=!0}catch{Mi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=X6(c,{relative:i}),[T,I,w]=C5(n,g),R=F5(c,{replace:a,state:o,target:u,preventScrollReset:h,relative:i,viewTransition:d});function _(k){e&&e(k),k.defaultPrevented||R(k)}let C=P.createElement("a",{...g,...w,href:b||S,onClick:E||s?e:_,ref:M5(m,I),target:u,"data-discover":!x&&t==="render"?"true":void 0});return T&&!x?P.createElement(P.Fragment,null,C,P.createElement(P5,{page:S})):C});eN.displayName="Link";var B5=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:u,...c},h){let d=wf(a,{relative:c.relative}),g=el(),m=P.useContext(Dg),{navigator:y,basename:x}=P.useContext(us),b=m!=null&&K5(d)&&o===!0,E=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,S=g.pathname,T=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(S=S.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&x&&(T=Ws(T,x)||T);const I=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let w=S===E||!i&&S.startsWith(E)&&S.charAt(I)==="/",R=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),_={isActive:w,isPending:R,isTransitioning:b},C=w?e:void 0,k;typeof n=="function"?k=n(_):k=[n,w?"active":null,R?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(_):s;return P.createElement(eN,{...c,"aria-current":C,className:k,ref:h,style:D,to:a,viewTransition:o},typeof u=="function"?u(_):u)});B5.displayName="NavLink";var U5=P.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=Gd,action:o,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:d,...g},m)=>{let y=z5(),x=H5(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&JM.test(o),S=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let I=T.nativeEvent.submitter,w=I?.getAttribute("formmethod")||a;y(I||T.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return P.createElement("form",{ref:m,method:b,action:x,onSubmit:n?u:S,...g,"data-discover":!E&&r==="render"?"true":void 0})});U5.displayName="Form";function j5(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tN(r){let e=P.useContext(wu);return rr(e,j5(r)),e}function F5(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=Q6(),u=el(),c=wf(r,{relative:s});return P.useCallback(h=>{if(v5(h,e)){h.preventDefault();let d=t!==void 0?t:Xc(u)===Xc(c);o(r,{replace:d,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[u,o,c,t,n,e,r,i,s,a])}var $5=0,G5=()=>`__${String(++$5)}__`;function z5(){let{router:r}=tN("useSubmit"),{basename:e}=P.useContext(us),t=l5();return P.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:u,body:c}=S5(n,e);if(i.navigate===!1){let h=i.fetcherKey||G5();await r.fetch(h,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function H5(r,{relative:e}={}){let{basename:t}=P.useContext(us),n=P.useContext(ia);rr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...wf(r||".",{relative:e})},a=el();if(r==null){s.search=a.search;let o=new URLSearchParams(s.search),u=o.getAll("index");if(u.some(h=>h==="")){o.delete("index"),u.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ks([t,s.pathname])),Xc(s)}function K5(r,{relative:e}={}){let t=P.useContext(KM);rr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=tN("useViewTransitionState"),i=wf(r,{relative:e});if(!t.isTransitioning)return!1;let s=Ws(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Ws(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Op(i.pathname,a)!=null||Op(i.pathname,s)!=null}var _T=UM();function q5({connectionState:r}){const[e,t]=P.useState(new Date);P.useEffect(()=>{const i=setInterval(()=>{t(new Date)},5e3);return()=>clearInterval(i)},[]);const n=()=>{switch(r){case"connected":return G.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-farm-100 text-farm-700 text-xs font-medium",children:[G.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-farm-500"}),"Connected"]});case"connecting":return G.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-medium",children:[G.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Connecting"]});case"disconnected":return G.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[G.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Disconnected"]});case"error":return G.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[G.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Error"]})}};return G.jsx("header",{className:"bg-farm-500 shadow-lg flex-shrink-0",children:G.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 py-3",children:G.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("div",{className:"text-lg font-bold text-gray-900",children:" | Tansaeng SmartFarm"}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("a",{href:"/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""}),G.jsx("a",{href:"/admin/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""})]})]}),G.jsx("div",{className:"text-sm font-medium text-gray-800",children:e.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),G.jsx("div",{className:"flex items-center gap-2",children:n()})]})})})}const V5=[{id:"devices",label:" ",icon:""},{id:"mist",label:"",icon:""},{id:"environment",label:" ",icon:""},{id:"cameras",label:"",icon:""},{id:"settings",label:"",icon:""}];function W5({activeTab:r,onTabChange:e}){return G.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:G.jsx("div",{className:"max-w-screen-2xl mx-auto px-2 sm:px-4",children:G.jsx("div",{className:"flex justify-start sm:justify-center gap-1 overflow-x-auto scrollbar-hide",children:V5.map(t=>G.jsxs("button",{onClick:()=>e(t.id),className:`
                flex items-center gap-1.5 px-3 sm:px-4 py-3 text-xs sm:text-sm font-medium
                transition-all duration-200 whitespace-nowrap border-b-2 flex-shrink-0
                ${r===t.id?"border-farm-500 bg-farm-50 text-farm-700":"border-transparent text-gray-500 hover:bg-gray-50 hover:text-farm-700"}
              `,children:[G.jsx("span",{className:"text-base sm:text-lg",children:t.icon}),G.jsx("span",{className:"hidden xs:inline sm:inline",children:t.label})]},t.id))})})})}const tx=[{id:"fan_front",name:" ",type:"fan",esp32Id:"ctlr-0001",commandTopic:"tansaeng/ctlr-0001/fan1/cmd",stateTopic:"tansaeng/ctlr-0001/fan1/state"},{id:"fan_back",name:" ",type:"fan",esp32Id:"ctlr-0002",commandTopic:"tansaeng/ctlr-0002/fan2/cmd",stateTopic:"tansaeng/ctlr-0002/fan2/state"},{id:"fan_top",name:"",type:"fan",esp32Id:"esp32-node-1",commandTopic:"tansaeng/esp32-node-1/fan_top/cmd",stateTopic:"tansaeng/esp32-node-1/fan_top/state"},{id:"vent_side_left",name:" Left",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_side_left/cmd",stateTopic:"tansaeng/esp32-node-2/vent_side_left/state",extra:{supportsPercentage:!0}},{id:"vent_side_right",name:" Right",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_side_right/cmd",stateTopic:"tansaeng/esp32-node-2/vent_side_right/state",extra:{supportsPercentage:!0}},{id:"vent_top_left",name:" Left",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_top_left/cmd",stateTopic:"tansaeng/esp32-node-2/vent_top_left/state",extra:{supportsPercentage:!0}},{id:"vent_top_right",name:" Right",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_top_right/cmd",stateTopic:"tansaeng/esp32-node-2/vent_top_right/state",extra:{supportsPercentage:!0}},{id:"pump_nutrient_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/state"},{id:"pump_water_curtain",name:"",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_water_curtain/cmd",stateTopic:"tansaeng/esp32-node-3/pump_water_curtain/state"},{id:"pump_heating_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_heating_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_heating_fill/state"}];function Ky(r){return tx.filter(e=>e.type===r)}const Cs=[{id:"esp32-in-fan-front",name:" ",controllerId:"ctlr-0001",statusTopic:"tansaeng/ctlr-0001/status"},{id:"esp32-in-fan-back",name:" ",controllerId:"ctlr-0002",statusTopic:"tansaeng/ctlr-0002/status"},{id:"esp32-in-top",name:" ",controllerId:"ctlr-0003",statusTopic:"tansaeng/ctlr-0003/status"},{id:"esp32-in-main-val",name:" ",controllerId:"ctlr-0004",statusTopic:"tansaeng/ctlr-0004/status"},{id:"esp32-in-line-val",name:" ",controllerId:"ctlr-0005",statusTopic:"tansaeng/ctlr-0005/status"},{id:"esp32-out-pressur-pump",name:" ",controllerId:"ctlr-0006",statusTopic:"tansaeng/ctlr-0006/status"},{id:"esp32-out-insert-pump",name:" ",controllerId:"ctlr-0007",statusTopic:"tansaeng/ctlr-0007/status"},{id:"esp32-out-hit-pump-val",name:" ",controllerId:"ctlr-0008",statusTopic:"tansaeng/ctlr-0008/status"},{id:"esp32-out-chiller-pump",name:" ",controllerId:"ctlr-0009",statusTopic:"tansaeng/ctlr-0009/status"},{id:"esp32-in-chil-hit-pump",name:"/  ",controllerId:"ctlr-0010",statusTopic:"tansaeng/ctlr-0010/status"},{id:"esp32-out-top-side-screen",name:"/ ",controllerId:"ctlr-0011",statusTopic:"tansaeng/ctlr-0011/status"},{id:"esp32-out-top-chillerline-pump-valve",name:"   ",controllerId:"ctlr-0012",statusTopic:"tansaeng/ctlr-0012/status"}];function qy({device:r,power:e,percentage:t,lastSavedAt:n,onToggle:i,onPercentageChange:s}){const a=e==="on",o=()=>r.type==="fan"?"":r.type==="vent"?"":r.type==="pump"?"":"";return G.jsxs("div",{className:"bg-white rounded-lg shadow-card hover:shadow-card-hover transition-all duration-200 p-3 border border-gray-200",children:[G.jsxs("div",{className:"flex items-center justify-between mb-2",children:[G.jsxs("div",{className:"flex items-center gap-1.5",children:[G.jsx("div",{className:"text-2xl",children:o()}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-sm font-bold text-gray-800 m-0",children:r.name}),G.jsx("p",{className:"text-2xs text-gray-500 m-0",children:r.type==="fan"?"":r.type==="vent"?"":""})]})]}),!r.extra?.supportsPercentage&&G.jsxs("div",{className:"flex flex-col items-end gap-1",children:[G.jsx("button",{onClick:()=>i?.(!a),className:`
                relative inline-flex h-9 w-18 cursor-pointer rounded-full
                border-2 border-transparent transition-all duration-300
                ${a?"bg-farm-500":"bg-gray-300"}
              `,role:"switch","aria-checked":a,children:G.jsx("span",{className:`
                flex items-center justify-center h-8 w-8 rounded-full
                bg-white shadow-md transition-transform duration-300
                ${a?"translate-x-9":"translate-x-0"}
              `,children:a?G.jsx("svg",{className:"w-4 h-4 text-farm-500",fill:"currentColor",viewBox:"0 0 20 20",children:G.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):G.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:G.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),G.jsx("span",{className:`text-xs font-semibold ${a?"text-farm-500":"text-gray-500"}`,children:a?"ON":"OFF"})]})]}),r.extra?.supportsPercentage&&G.jsxs("div",{className:"mb-3",children:[G.jsxs("div",{className:"flex items-center justify-between mb-2",children:[G.jsx("span",{className:"text-xs font-medium text-gray-600",children:" "}),G.jsxs("span",{className:"text-2xl font-bold text-farm-500",children:[t??0,"%"]})]}),G.jsx("input",{type:"range",min:"0",max:"100",value:t??0,onChange:u=>s?.(Number(u.target.value)),className:"slider-thumb w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${t??0}%, #e5e7eb ${t??0}%, #e5e7eb 100%)`}}),G.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[G.jsx("span",{children:""}),G.jsx("span",{children:""})]})]}),G.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[G.jsxs("div",{className:"flex items-center gap-1.5",children:[G.jsx("div",{className:`
            w-1.5 h-1.5 rounded-full
            ${a?"bg-farm-500 animate-pulse":"bg-gray-400"}
          `}),G.jsx("span",{className:`
            text-2xs font-semibold
            ${a?"text-farm-700":"text-gray-600"}
          `,children:a?" ":""})]}),G.jsx("div",{className:"text-2xs text-gray-400",children:n?new Date(n).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]})]})}var IT=Object.defineProperty,Y5=Object.getOwnPropertyDescriptor,X5=Object.getOwnPropertyNames,Q5=Object.prototype.hasOwnProperty,Nn=(r,e)=>()=>(r&&(e=r(r=0)),e),$e=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),_u=(r,e)=>{for(var t in e)IT(r,t,{get:e[t],enumerable:!0})},Z5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of X5(e))!Q5.call(r,i)&&i!==t&&IT(r,i,{get:()=>e[i],enumerable:!(n=Y5(e,i))||n.enumerable});return r},Nt=r=>Z5(IT({},"__esModule",{value:!0}),r),Me=Nn(()=>{}),zt={};_u(zt,{_debugEnd:()=>Nx,_debugProcess:()=>Mx,_events:()=>Qx,_eventsCount:()=>Zx,_exiting:()=>xx,_fatalExceptions:()=>Px,_getActiveHandles:()=>lN,_getActiveRequests:()=>oN,_kill:()=>Tx,_linkedBinding:()=>sN,_maxListeners:()=>Xx,_preload_modules:()=>Wx,_rawDebug:()=>yx,_startProfilerIdleNotifier:()=>Bx,_stopProfilerIdleNotifier:()=>Ux,_tickCallback:()=>kx,abort:()=>Gx,addListener:()=>Jx,allowedNodeEnvironmentFlags:()=>Lx,arch:()=>nx,argv:()=>ax,argv0:()=>Vx,assert:()=>uN,binding:()=>fx,browser:()=>mx,chdir:()=>px,config:()=>Sx,cpuUsage:()=>Bc,cwd:()=>dx,debugPort:()=>qx,default:()=>RT,dlopen:()=>aN,domain:()=>bx,emit:()=>iS,emitWarning:()=>cx,env:()=>sx,execArgv:()=>ox,execPath:()=>Kx,exit:()=>Ox,features:()=>Cx,hasUncaughtExceptionCaptureCallback:()=>cN,hrtime:()=>Hd,kill:()=>Ix,listeners:()=>hN,memoryUsage:()=>_x,moduleLoadList:()=>vx,nextTick:()=>nN,off:()=>tS,on:()=>ks,once:()=>eS,openStdin:()=>Rx,pid:()=>zx,platform:()=>ix,ppid:()=>Hx,prependListener:()=>sS,prependOnceListener:()=>aS,reallyExit:()=>Ex,release:()=>gx,removeAllListeners:()=>nS,removeListener:()=>rS,resourceUsage:()=>Ax,setSourceMapsEnabled:()=>Yx,setUncaughtExceptionCaptureCallback:()=>Dx,stderr:()=>Fx,stdin:()=>$x,stdout:()=>jx,title:()=>rx,umask:()=>hx,uptime:()=>fN,version:()=>lx,versions:()=>ux});function OT(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function J5(){!$o||!No||($o=!1,No.length?Xi=No.concat(Xi):Hc=-1,Xi.length&&rN())}function rN(){if(!$o){var r=setTimeout(J5,0);$o=!0;for(var e=Xi.length;e;){for(No=Xi,Xi=[];++Hc<e;)No&&No[Hc].run();Hc=-1,e=Xi.length}No=null,$o=!1,clearTimeout(r)}}function nN(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Xi.push(new iN(r,e)),Xi.length===1&&!$o&&setTimeout(rN,0)}function iN(r,e){this.fun=r,this.array=e}function Zr(){}function sN(r){OT("_linkedBinding")}function aN(r){OT("dlopen")}function oN(){return[]}function lN(){return[]}function uN(r,e){if(!r)throw new Error(e||"assertion error")}function cN(){return!1}function fN(){return Us.now()/1e3}function Hd(r){var e=Math.floor((Date.now()-Us.now())*.001),t=Us.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=Kd)),[n,i]}function ks(){return RT}function hN(r){return[]}var Xi,$o,No,Hc,rx,nx,ix,sx,ax,ox,lx,ux,cx,fx,hx,dx,px,gx,mx,yx,vx,bx,xx,Sx,Ex,Tx,Bc,Ax,_x,Ix,Ox,Rx,Lx,Cx,Px,Dx,kx,Mx,Nx,Bx,Ux,jx,Fx,$x,Gx,zx,Hx,Kx,qx,Vx,Wx,Yx,Us,Vy,Kd,Xx,Qx,Zx,Jx,eS,tS,rS,nS,iS,sS,aS,RT,eG=Nn(()=>{Me(),Be(),Ne(),Xi=[],$o=!1,Hc=-1,iN.prototype.run=function(){this.fun.apply(null,this.array)},rx="browser",nx="x64",ix="browser",sx={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},ax=["/usr/bin/node"],ox=[],lx="v16.8.0",ux={},cx=function(r,e){console.warn((e?e+": ":"")+r)},fx=function(r){OT("binding")},hx=function(r){return 0},dx=function(){return"/"},px=function(r){},gx={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},mx=!0,yx=Zr,vx=[],bx={},xx=!1,Sx={},Ex=Zr,Tx=Zr,Bc=function(){return{}},Ax=Bc,_x=Bc,Ix=Zr,Ox=Zr,Rx=Zr,Lx={},Cx={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Px=Zr,Dx=Zr,kx=Zr,Mx=Zr,Nx=Zr,Bx=Zr,Ux=Zr,jx=void 0,Fx=void 0,$x=void 0,Gx=Zr,zx=2,Hx=1,Kx="/bin/usr/node",qx=9229,Vx="node",Wx=[],Yx=Zr,Us={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Us.now===void 0&&(Vy=Date.now(),Us.timing&&Us.timing.navigationStart&&(Vy=Us.timing.navigationStart),Us.now=()=>Date.now()-Vy),Kd=1e9,Hd.bigint=function(r){var e=Hd(r);return typeof BigInt>"u"?e[0]*Kd+e[1]:BigInt(e[0]*Kd)+BigInt(e[1])},Xx=10,Qx={},Zx=0,Jx=ks,eS=ks,tS=ks,rS=ks,nS=ks,iS=Zr,sS=ks,aS=ks,RT={version:lx,versions:ux,arch:nx,platform:ix,browser:mx,release:gx,_rawDebug:yx,moduleLoadList:vx,binding:fx,_linkedBinding:sN,_events:Qx,_eventsCount:Zx,_maxListeners:Xx,on:ks,addListener:Jx,once:eS,off:tS,removeListener:rS,removeAllListeners:nS,emit:iS,prependListener:sS,prependOnceListener:aS,listeners:hN,domain:bx,_exiting:xx,config:Sx,dlopen:aN,uptime:fN,_getActiveRequests:oN,_getActiveHandles:lN,reallyExit:Ex,_kill:Tx,cpuUsage:Bc,resourceUsage:Ax,memoryUsage:_x,kill:Ix,exit:Ox,openStdin:Rx,allowedNodeEnvironmentFlags:Lx,assert:uN,features:Cx,_fatalExceptions:Px,setUncaughtExceptionCaptureCallback:Dx,hasUncaughtExceptionCaptureCallback:cN,emitWarning:cx,nextTick:nN,_tickCallback:kx,_debugProcess:Mx,_debugEnd:Nx,_startProfilerIdleNotifier:Bx,_stopProfilerIdleNotifier:Ux,stdout:jx,stdin:$x,stderr:Fx,abort:Gx,umask:hx,chdir:px,cwd:dx,env:sx,title:rx,argv:ax,execArgv:ox,pid:zx,ppid:Hx,execPath:Kx,debugPort:qx,hrtime:Hd,argv0:Vx,_preload_modules:Wx,setSourceMapsEnabled:Yx}}),Ne=Nn(()=>{eG()});function tG(){if(oS)return Zl;oS=!0,Zl.byteLength=o,Zl.toByteArray=c,Zl.fromByteArray=g;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(m){var y=m.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=m.indexOf("=");x===-1&&(x=y);var b=x===y?0:4-x%4;return[x,b]}function o(m){var y=a(m),x=y[0],b=y[1];return(x+b)*3/4-b}function u(m,y,x){return(y+x)*3/4-x}function c(m){var y,x=a(m),b=x[0],E=x[1],S=new t(u(m,b,E)),T=0,I=E>0?b-4:b,w;for(w=0;w<I;w+=4)y=e[m.charCodeAt(w)]<<18|e[m.charCodeAt(w+1)]<<12|e[m.charCodeAt(w+2)]<<6|e[m.charCodeAt(w+3)],S[T++]=y>>16&255,S[T++]=y>>8&255,S[T++]=y&255;return E===2&&(y=e[m.charCodeAt(w)]<<2|e[m.charCodeAt(w+1)]>>4,S[T++]=y&255),E===1&&(y=e[m.charCodeAt(w)]<<10|e[m.charCodeAt(w+1)]<<4|e[m.charCodeAt(w+2)]>>2,S[T++]=y>>8&255,S[T++]=y&255),S}function h(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function d(m,y,x){for(var b,E=[],S=y;S<x;S+=3)b=(m[S]<<16&16711680)+(m[S+1]<<8&65280)+(m[S+2]&255),E.push(h(b));return E.join("")}function g(m){for(var y,x=m.length,b=x%3,E=[],S=16383,T=0,I=x-b;T<I;T+=S)E.push(d(m,T,T+S>I?I:T+S));return b===1?(y=m[x-1],E.push(r[y>>2]+r[y<<4&63]+"==")):b===2&&(y=(m[x-2]<<8)+m[x-1],E.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),E.join("")}return Zl}function rG(){return lS?Uc:(lS=!0,Uc.read=function(r,e,t,n,i){var s,a,o=i*8-n-1,u=(1<<o)-1,c=u>>1,h=-7,d=t?i-1:0,g=t?-1:1,m=r[e+d];for(d+=g,s=m&(1<<-h)-1,m>>=-h,h+=o;h>0;s=s*256+r[e+d],d+=g,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=n;h>0;a=a*256+r[e+d],d+=g,h-=8);if(s===0)s=1-c;else{if(s===u)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(m?-1:1)*a*Math.pow(2,s-n)},Uc.write=function(r,e,t,n,i,s){var a,o,u,c=s*8-i-1,h=(1<<c)-1,d=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,y=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?e+=g/u:e+=g*Math.pow(2,1-d),e*u>=2&&(a++,u/=2),a+d>=h?(o=0,a=h):a+d>=1?(o=(e*u-1)*Math.pow(2,i),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;r[t+m]=o&255,m+=y,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;r[t+m]=a&255,m+=y,a/=256,c-=8);r[t+m-y]|=x*128},Uc)}function nG(){if(uS)return Ga;uS=!0;let r=tG(),e=rG(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ga.Buffer=a,Ga.SlowBuffer=E,Ga.INSPECT_MAX_BYTES=50;let n=2147483647;Ga.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let L=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(L,M),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');let M=new Uint8Array(L);return Object.setPrototypeOf(M,a.prototype),M}function a(L,M,z){if(typeof L=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(L)}return o(L,M,z)}a.poolSize=8192;function o(L,M,z){if(typeof L=="string")return d(L,M);if(ArrayBuffer.isView(L))return m(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(pe(L,ArrayBuffer)||L&&pe(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(L,SharedArrayBuffer)||L&&pe(L.buffer,SharedArrayBuffer)))return y(L,M,z);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let fe=L.valueOf&&L.valueOf();if(fe!=null&&fe!==L)return a.from(fe,M,z);let ve=x(L);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),M,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,M,z){return o(L,M,z)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function c(L,M,z){return u(L),L<=0?s(L):M!==void 0?typeof z=="string"?s(L).fill(M,z):s(L).fill(M):s(L)}a.alloc=function(L,M,z){return c(L,M,z)};function h(L){return u(L),s(L<0?0:b(L)|0)}a.allocUnsafe=function(L){return h(L)},a.allocUnsafeSlow=function(L){return h(L)};function d(L,M){if((typeof M!="string"||M==="")&&(M="utf8"),!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);let z=S(L,M)|0,fe=s(z),ve=fe.write(L,M);return ve!==z&&(fe=fe.slice(0,ve)),fe}function g(L){let M=L.length<0?0:b(L.length)|0,z=s(M);for(let fe=0;fe<M;fe+=1)z[fe]=L[fe]&255;return z}function m(L){if(pe(L,Uint8Array)){let M=new Uint8Array(L);return y(M.buffer,M.byteOffset,M.byteLength)}return g(L)}function y(L,M,z){if(M<0||L.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<M+(z||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return M===void 0&&z===void 0?fe=new Uint8Array(L):z===void 0?fe=new Uint8Array(L,M):fe=new Uint8Array(L,M,z),Object.setPrototypeOf(fe,a.prototype),fe}function x(L){if(a.isBuffer(L)){let M=b(L.length)|0,z=s(M);return z.length===0||L.copy(z,0,0,M),z}if(L.length!==void 0)return typeof L.length!="number"||Ue(L.length)?s(0):g(L);if(L.type==="Buffer"&&Array.isArray(L.data))return g(L.data)}function b(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function E(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,M){if(pe(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),pe(M,Uint8Array)&&(M=a.from(M,M.offset,M.byteLength)),!a.isBuffer(L)||!a.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===M)return 0;let z=L.length,fe=M.length;for(let ve=0,Pe=Math.min(z,fe);ve<Pe;++ve)if(L[ve]!==M[ve]){z=L[ve],fe=M[ve];break}return z<fe?-1:fe<z?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,M){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let z;if(M===void 0)for(M=0,z=0;z<L.length;++z)M+=L[z].length;let fe=a.allocUnsafe(M),ve=0;for(z=0;z<L.length;++z){let Pe=L[z];if(pe(Pe,Uint8Array))ve+Pe.length>fe.length?(a.isBuffer(Pe)||(Pe=a.from(Pe)),Pe.copy(fe,ve)):Uint8Array.prototype.set.call(fe,Pe,ve);else if(a.isBuffer(Pe))Pe.copy(fe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Pe.length}return fe};function S(L,M){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||pe(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);let z=L.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&z===0)return 0;let ve=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return se(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Ce(L).length;default:if(ve)return fe?-1:se(L).length;M=(""+M).toLowerCase(),ve=!0}}a.byteLength=S;function T(L,M,z){let fe=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,M>>>=0,z<=M))return"";for(L||(L="utf8");;)switch(L){case"hex":return Y(this,M,z);case"utf8":case"utf-8":return q(this,M,z);case"ascii":return H(this,M,z);case"latin1":case"binary":return K(this,M,z);case"base64":return N(this,M,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,M,z);default:if(fe)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),fe=!0}}a.prototype._isBuffer=!0;function I(L,M,z){let fe=L[M];L[M]=L[z],L[z]=fe}a.prototype.swap16=function(){let L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let M=0;M<L;M+=2)I(this,M,M+1);return this},a.prototype.swap32=function(){let L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let M=0;M<L;M+=4)I(this,M,M+3),I(this,M+1,M+2);return this},a.prototype.swap64=function(){let L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let M=0;M<L;M+=8)I(this,M,M+7),I(this,M+1,M+6),I(this,M+2,M+5),I(this,M+3,M+4);return this},a.prototype.toString=function(){let L=this.length;return L===0?"":arguments.length===0?q(this,0,L):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="",M=Ga.INSPECT_MAX_BYTES;return L=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(L+=" ... "),"<Buffer "+L+">"},t&&(a.prototype[t]=a.prototype.inspect),a.prototype.compare=function(L,M,z,fe,ve){if(pe(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(M===void 0&&(M=0),z===void 0&&(z=L?L.length:0),fe===void 0&&(fe=0),ve===void 0&&(ve=this.length),M<0||z>L.length||fe<0||ve>this.length)throw new RangeError("out of range index");if(fe>=ve&&M>=z)return 0;if(fe>=ve)return-1;if(M>=z)return 1;if(M>>>=0,z>>>=0,fe>>>=0,ve>>>=0,this===L)return 0;let Pe=ve-fe,Ve=z-M,me=Math.min(Pe,Ve),Ae=this.slice(fe,ve),Je=L.slice(M,z);for(let Xe=0;Xe<me;++Xe)if(Ae[Xe]!==Je[Xe]){Pe=Ae[Xe],Ve=Je[Xe];break}return Pe<Ve?-1:Ve<Pe?1:0};function w(L,M,z,fe,ve){if(L.length===0)return-1;if(typeof z=="string"?(fe=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,Ue(z)&&(z=ve?0:L.length-1),z<0&&(z=L.length+z),z>=L.length){if(ve)return-1;z=L.length-1}else if(z<0)if(ve)z=0;else return-1;if(typeof M=="string"&&(M=a.from(M,fe)),a.isBuffer(M))return M.length===0?-1:R(L,M,z,fe,ve);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(L,M,z):Uint8Array.prototype.lastIndexOf.call(L,M,z):R(L,[M],z,fe,ve);throw new TypeError("val must be string, number or Buffer")}function R(L,M,z,fe,ve){let Pe=1,Ve=L.length,me=M.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(L.length<2||M.length<2)return-1;Pe=2,Ve/=2,me/=2,z/=2}function Ae(Xe,ct){return Pe===1?Xe[ct]:Xe.readUInt16BE(ct*Pe)}let Je;if(ve){let Xe=-1;for(Je=z;Je<Ve;Je++)if(Ae(L,Je)===Ae(M,Xe===-1?0:Je-Xe)){if(Xe===-1&&(Xe=Je),Je-Xe+1===me)return Xe*Pe}else Xe!==-1&&(Je-=Je-Xe),Xe=-1}else for(z+me>Ve&&(z=Ve-me),Je=z;Je>=0;Je--){let Xe=!0;for(let ct=0;ct<me;ct++)if(Ae(L,Je+ct)!==Ae(M,ct)){Xe=!1;break}if(Xe)return Je}return-1}a.prototype.includes=function(L,M,z){return this.indexOf(L,M,z)!==-1},a.prototype.indexOf=function(L,M,z){return w(this,L,M,z,!0)},a.prototype.lastIndexOf=function(L,M,z){return w(this,L,M,z,!1)};function _(L,M,z,fe){z=Number(z)||0;let ve=L.length-z;fe?(fe=Number(fe),fe>ve&&(fe=ve)):fe=ve;let Pe=M.length;fe>Pe/2&&(fe=Pe/2);let Ve;for(Ve=0;Ve<fe;++Ve){let me=parseInt(M.substr(Ve*2,2),16);if(Ue(me))return Ve;L[z+Ve]=me}return Ve}function C(L,M,z,fe){return je(se(M,L.length-z),L,z,fe)}function k(L,M,z,fe){return je(ye(M),L,z,fe)}function D(L,M,z,fe){return je(Ce(M),L,z,fe)}function U(L,M,z,fe){return je(Re(M,L.length-z),L,z,fe)}a.prototype.write=function(L,M,z,fe){if(M===void 0)fe="utf8",z=this.length,M=0;else if(z===void 0&&typeof M=="string")fe=M,z=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(z)?(z=z>>>0,fe===void 0&&(fe="utf8")):(fe=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let ve=this.length-M;if((z===void 0||z>ve)&&(z=ve),L.length>0&&(z<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let Pe=!1;for(;;)switch(fe){case"hex":return _(this,L,M,z);case"utf8":case"utf-8":return C(this,L,M,z);case"ascii":case"latin1":case"binary":return k(this,L,M,z);case"base64":return D(this,L,M,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,L,M,z);default:if(Pe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),Pe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(L,M,z){return M===0&&z===L.length?r.fromByteArray(L):r.fromByteArray(L.slice(M,z))}function q(L,M,z){z=Math.min(L.length,z);let fe=[],ve=M;for(;ve<z;){let Pe=L[ve],Ve=null,me=Pe>239?4:Pe>223?3:Pe>191?2:1;if(ve+me<=z){let Ae,Je,Xe,ct;switch(me){case 1:Pe<128&&(Ve=Pe);break;case 2:Ae=L[ve+1],(Ae&192)===128&&(ct=(Pe&31)<<6|Ae&63,ct>127&&(Ve=ct));break;case 3:Ae=L[ve+1],Je=L[ve+2],(Ae&192)===128&&(Je&192)===128&&(ct=(Pe&15)<<12|(Ae&63)<<6|Je&63,ct>2047&&(ct<55296||ct>57343)&&(Ve=ct));break;case 4:Ae=L[ve+1],Je=L[ve+2],Xe=L[ve+3],(Ae&192)===128&&(Je&192)===128&&(Xe&192)===128&&(ct=(Pe&15)<<18|(Ae&63)<<12|(Je&63)<<6|Xe&63,ct>65535&&ct<1114112&&(Ve=ct))}}Ve===null?(Ve=65533,me=1):Ve>65535&&(Ve-=65536,fe.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),fe.push(Ve),ve+=me}return V(fe)}let X=4096;function V(L){let M=L.length;if(M<=X)return String.fromCharCode.apply(String,L);let z="",fe=0;for(;fe<M;)z+=String.fromCharCode.apply(String,L.slice(fe,fe+=X));return z}function H(L,M,z){let fe="";z=Math.min(L.length,z);for(let ve=M;ve<z;++ve)fe+=String.fromCharCode(L[ve]&127);return fe}function K(L,M,z){let fe="";z=Math.min(L.length,z);for(let ve=M;ve<z;++ve)fe+=String.fromCharCode(L[ve]);return fe}function Y(L,M,z){let fe=L.length;(!M||M<0)&&(M=0),(!z||z<0||z>fe)&&(z=fe);let ve="";for(let Pe=M;Pe<z;++Pe)ve+=Ke[L[Pe]];return ve}function ee(L,M,z){let fe=L.slice(M,z),ve="";for(let Pe=0;Pe<fe.length-1;Pe+=2)ve+=String.fromCharCode(fe[Pe]+fe[Pe+1]*256);return ve}a.prototype.slice=function(L,M){let z=this.length;L=~~L,M=M===void 0?z:~~M,L<0?(L+=z,L<0&&(L=0)):L>z&&(L=z),M<0?(M+=z,M<0&&(M=0)):M>z&&(M=z),M<L&&(M=L);let fe=this.subarray(L,M);return Object.setPrototypeOf(fe,a.prototype),fe};function Q(L,M,z){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+M>z)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,M,z){L=L>>>0,M=M>>>0,z||Q(L,M,this.length);let fe=this[L],ve=1,Pe=0;for(;++Pe<M&&(ve*=256);)fe+=this[L+Pe]*ve;return fe},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,M,z){L=L>>>0,M=M>>>0,z||Q(L,M,this.length);let fe=this[L+--M],ve=1;for(;M>0&&(ve*=256);)fe+=this[L+--M]*ve;return fe},a.prototype.readUint8=a.prototype.readUInt8=function(L,M){return L=L>>>0,M||Q(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,M){return L=L>>>0,M||Q(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,M){return L=L>>>0,M||Q(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ie(function(L){L=L>>>0,ne(L,"offset");let M=this[L],z=this[L+7];(M===void 0||z===void 0)&&Le(L,this.length-8);let fe=M+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,ve=this[++L]+this[++L]*2**8+this[++L]*2**16+z*2**24;return BigInt(fe)+(BigInt(ve)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ie(function(L){L=L>>>0,ne(L,"offset");let M=this[L],z=this[L+7];(M===void 0||z===void 0)&&Le(L,this.length-8);let fe=M*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],ve=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+z;return(BigInt(fe)<<BigInt(32))+BigInt(ve)}),a.prototype.readIntLE=function(L,M,z){L=L>>>0,M=M>>>0,z||Q(L,M,this.length);let fe=this[L],ve=1,Pe=0;for(;++Pe<M&&(ve*=256);)fe+=this[L+Pe]*ve;return ve*=128,fe>=ve&&(fe-=Math.pow(2,8*M)),fe},a.prototype.readIntBE=function(L,M,z){L=L>>>0,M=M>>>0,z||Q(L,M,this.length);let fe=M,ve=1,Pe=this[L+--fe];for(;fe>0&&(ve*=256);)Pe+=this[L+--fe]*ve;return ve*=128,Pe>=ve&&(Pe-=Math.pow(2,8*M)),Pe},a.prototype.readInt8=function(L,M){return L=L>>>0,M||Q(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,M){L=L>>>0,M||Q(L,2,this.length);let z=this[L]|this[L+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(L,M){L=L>>>0,M||Q(L,2,this.length);let z=this[L+1]|this[L]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ie(function(L){L=L>>>0,ne(L,"offset");let M=this[L],z=this[L+7];(M===void 0||z===void 0)&&Le(L,this.length-8);let fe=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(z<<24);return(BigInt(fe)<<BigInt(32))+BigInt(M+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ie(function(L){L=L>>>0,ne(L,"offset");let M=this[L],z=this[L+7];(M===void 0||z===void 0)&&Le(L,this.length-8);let fe=(M<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(fe)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+z)}),a.prototype.readFloatLE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),e.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,M){return L=L>>>0,M||Q(L,4,this.length),e.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,M){return L=L>>>0,M||Q(L,8,this.length),e.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,M){return L=L>>>0,M||Q(L,8,this.length),e.read(this,L,!1,52,8)};function $(L,M,z,fe,ve,Pe){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ve||M<Pe)throw new RangeError('"value" argument is out of bounds');if(z+fe>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,M,z,fe){if(L=+L,M=M>>>0,z=z>>>0,!fe){let Ve=Math.pow(2,8*z)-1;$(this,L,M,z,Ve,0)}let ve=1,Pe=0;for(this[M]=L&255;++Pe<z&&(ve*=256);)this[M+Pe]=L/ve&255;return M+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,M,z,fe){if(L=+L,M=M>>>0,z=z>>>0,!fe){let Ve=Math.pow(2,8*z)-1;$(this,L,M,z,Ve,0)}let ve=z-1,Pe=1;for(this[M+ve]=L&255;--ve>=0&&(Pe*=256);)this[M+ve]=L/Pe&255;return M+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,1,255,0),this[M]=L&255,M+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,2,65535,0),this[M]=L&255,this[M+1]=L>>>8,M+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,2,65535,0),this[M]=L>>>8,this[M+1]=L&255,M+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,4,4294967295,0),this[M+3]=L>>>24,this[M+2]=L>>>16,this[M+1]=L>>>8,this[M]=L&255,M+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,4,4294967295,0),this[M]=L>>>24,this[M+1]=L>>>16,this[M+2]=L>>>8,this[M+3]=L&255,M+4};function F(L,M,z,fe,ve){ce(M,fe,ve,L,z,7);let Pe=Number(M&BigInt(4294967295));L[z++]=Pe,Pe=Pe>>8,L[z++]=Pe,Pe=Pe>>8,L[z++]=Pe,Pe=Pe>>8,L[z++]=Pe;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return L[z++]=Ve,Ve=Ve>>8,L[z++]=Ve,Ve=Ve>>8,L[z++]=Ve,Ve=Ve>>8,L[z++]=Ve,z}function Z(L,M,z,fe,ve){ce(M,fe,ve,L,z,7);let Pe=Number(M&BigInt(4294967295));L[z+7]=Pe,Pe=Pe>>8,L[z+6]=Pe,Pe=Pe>>8,L[z+5]=Pe,Pe=Pe>>8,L[z+4]=Pe;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return L[z+3]=Ve,Ve=Ve>>8,L[z+2]=Ve,Ve=Ve>>8,L[z+1]=Ve,Ve=Ve>>8,L[z]=Ve,z+8}a.prototype.writeBigUInt64LE=Ie(function(L,M=0){return F(this,L,M,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ie(function(L,M=0){return Z(this,L,M,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,M,z,fe){if(L=+L,M=M>>>0,!fe){let me=Math.pow(2,8*z-1);$(this,L,M,z,me-1,-me)}let ve=0,Pe=1,Ve=0;for(this[M]=L&255;++ve<z&&(Pe*=256);)L<0&&Ve===0&&this[M+ve-1]!==0&&(Ve=1),this[M+ve]=(L/Pe>>0)-Ve&255;return M+z},a.prototype.writeIntBE=function(L,M,z,fe){if(L=+L,M=M>>>0,!fe){let me=Math.pow(2,8*z-1);$(this,L,M,z,me-1,-me)}let ve=z-1,Pe=1,Ve=0;for(this[M+ve]=L&255;--ve>=0&&(Pe*=256);)L<0&&Ve===0&&this[M+ve+1]!==0&&(Ve=1),this[M+ve]=(L/Pe>>0)-Ve&255;return M+z},a.prototype.writeInt8=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,1,127,-128),L<0&&(L=255+L+1),this[M]=L&255,M+1},a.prototype.writeInt16LE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,2,32767,-32768),this[M]=L&255,this[M+1]=L>>>8,M+2},a.prototype.writeInt16BE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,2,32767,-32768),this[M]=L>>>8,this[M+1]=L&255,M+2},a.prototype.writeInt32LE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,4,2147483647,-2147483648),this[M]=L&255,this[M+1]=L>>>8,this[M+2]=L>>>16,this[M+3]=L>>>24,M+4},a.prototype.writeInt32BE=function(L,M,z){return L=+L,M=M>>>0,z||$(this,L,M,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[M]=L>>>24,this[M+1]=L>>>16,this[M+2]=L>>>8,this[M+3]=L&255,M+4},a.prototype.writeBigInt64LE=Ie(function(L,M=0){return F(this,L,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ie(function(L,M=0){return Z(this,L,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(L,M,z,fe,ve,Pe){if(z+fe>L.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function oe(L,M,z,fe,ve){return M=+M,z=z>>>0,ve||de(L,M,z,4),e.write(L,M,z,fe,23,4),z+4}a.prototype.writeFloatLE=function(L,M,z){return oe(this,L,M,!0,z)},a.prototype.writeFloatBE=function(L,M,z){return oe(this,L,M,!1,z)};function Se(L,M,z,fe,ve){return M=+M,z=z>>>0,ve||de(L,M,z,8),e.write(L,M,z,fe,52,8),z+8}a.prototype.writeDoubleLE=function(L,M,z){return Se(this,L,M,!0,z)},a.prototype.writeDoubleBE=function(L,M,z){return Se(this,L,M,!1,z)},a.prototype.copy=function(L,M,z,fe){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(z||(z=0),!fe&&fe!==0&&(fe=this.length),M>=L.length&&(M=L.length),M||(M=0),fe>0&&fe<z&&(fe=z),fe===z||L.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),L.length-M<fe-z&&(fe=L.length-M+z);let ve=fe-z;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,z,fe):Uint8Array.prototype.set.call(L,this.subarray(z,fe),M),ve},a.prototype.fill=function(L,M,z,fe){if(typeof L=="string"){if(typeof M=="string"?(fe=M,M=0,z=this.length):typeof z=="string"&&(fe=z,z=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!a.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(L.length===1){let Pe=L.charCodeAt(0);(fe==="utf8"&&Pe<128||fe==="latin1")&&(L=Pe)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(M<0||this.length<M||this.length<z)throw new RangeError("Out of range index");if(z<=M)return this;M=M>>>0,z=z===void 0?this.length:z>>>0,L||(L=0);let ve;if(typeof L=="number")for(ve=M;ve<z;++ve)this[ve]=L;else{let Pe=a.isBuffer(L)?L:a.from(L,fe),Ve=Pe.length;if(Ve===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ve=0;ve<z-M;++ve)this[ve+M]=Pe[ve%Ve]}return this};let ae={};function re(L,M,z){ae[L]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(L,M){return`The "${L}" argument must be of type number. Received type ${typeof M}`},TypeError),re("ERR_OUT_OF_RANGE",function(L,M,z){let fe=`The value of "${L}" is out of range.`,ve=z;return Number.isInteger(z)&&Math.abs(z)>2**32?ve=te(String(z)):typeof z=="bigint"&&(ve=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(ve=te(ve)),ve+="n"),fe+=` It must be ${M}. Received ${ve}`,fe},RangeError);function te(L){let M="",z=L.length,fe=L[0]==="-"?1:0;for(;z>=fe+4;z-=3)M=`_${L.slice(z-3,z)}${M}`;return`${L.slice(0,z)}${M}`}function le(L,M,z){ne(M,"offset"),(L[M]===void 0||L[M+z]===void 0)&&Le(M,L.length-(z+1))}function ce(L,M,z,fe,ve,Pe){if(L>z||L<M){let Ve=typeof M=="bigint"?"n":"",me;throw M===0||M===BigInt(0)?me=`>= 0${Ve} and < 2${Ve} ** ${(Pe+1)*8}${Ve}`:me=`>= -(2${Ve} ** ${(Pe+1)*8-1}${Ve}) and < 2 ** ${(Pe+1)*8-1}${Ve}`,new ae.ERR_OUT_OF_RANGE("value",me,L)}le(fe,ve,Pe)}function ne(L,M){if(typeof L!="number")throw new ae.ERR_INVALID_ARG_TYPE(M,"number",L)}function Le(L,M,z){throw Math.floor(L)!==L?(ne(L,z),new ae.ERR_OUT_OF_RANGE("offset","an integer",L)):M<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,L)}let xe=/[^+/0-9A-Za-z-_]/g;function ie(L){if(L=L.split("=")[0],L=L.trim().replace(xe,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function se(L,M){M=M||1/0;let z,fe=L.length,ve=null,Pe=[];for(let Ve=0;Ve<fe;++Ve){if(z=L.charCodeAt(Ve),z>55295&&z<57344){if(!ve){if(z>56319){(M-=3)>-1&&Pe.push(239,191,189);continue}else if(Ve+1===fe){(M-=3)>-1&&Pe.push(239,191,189);continue}ve=z;continue}if(z<56320){(M-=3)>-1&&Pe.push(239,191,189),ve=z;continue}z=(ve-55296<<10|z-56320)+65536}else ve&&(M-=3)>-1&&Pe.push(239,191,189);if(ve=null,z<128){if((M-=1)<0)break;Pe.push(z)}else if(z<2048){if((M-=2)<0)break;Pe.push(z>>6|192,z&63|128)}else if(z<65536){if((M-=3)<0)break;Pe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((M-=4)<0)break;Pe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Pe}function ye(L){let M=[];for(let z=0;z<L.length;++z)M.push(L.charCodeAt(z)&255);return M}function Re(L,M){let z,fe,ve,Pe=[];for(let Ve=0;Ve<L.length&&!((M-=2)<0);++Ve)z=L.charCodeAt(Ve),fe=z>>8,ve=z%256,Pe.push(ve),Pe.push(fe);return Pe}function Ce(L){return r.toByteArray(ie(L))}function je(L,M,z,fe){let ve;for(ve=0;ve<fe&&!(ve+z>=M.length||ve>=L.length);++ve)M[ve+z]=L[ve];return ve}function pe(L,M){return L instanceof M||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===M.name}function Ue(L){return L!==L}let Ke=(function(){let L="0123456789abcdef",M=new Array(256);for(let z=0;z<16;++z){let fe=z*16;for(let ve=0;ve<16;++ve)M[fe+ve]=L[z]+L[ve]}return M})();function Ie(L){return typeof BigInt>"u"?lt:L}function lt(){throw new Error("BigInt not supported")}return Ga}var Zl,oS,Uc,lS,Ga,uS,iG=Nn(()=>{Me(),Be(),Ne(),Zl={},oS=!1,Uc={},lS=!1,Ga={},uS=!1}),Ur={};_u(Ur,{Buffer:()=>Rp,INSPECT_MAX_BYTES:()=>dN,default:()=>Ms,kMaxLength:()=>pN});var Ms,Rp,dN,pN,jr=Nn(()=>{Me(),Be(),Ne(),iG(),Ms=nG(),Ms.Buffer,Ms.SlowBuffer,Ms.INSPECT_MAX_BYTES,Ms.kMaxLength,Rp=Ms.Buffer,dN=Ms.INSPECT_MAX_BYTES,pN=Ms.kMaxLength}),Be=Nn(()=>{jr()}),nr=$e((r,e)=>{Me(),Be(),Ne();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let i="";for(let s=0;s<n.length;s++)i+=`    ${n[s].stack}
`;super(i),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,i){return n.includes(i)},ArrayPrototypeIndexOf(n,i){return n.indexOf(i)},ArrayPrototypeJoin(n,i){return n.join(i)},ArrayPrototypeMap(n,i){return n.map(i)},ArrayPrototypePop(n,i){return n.pop(i)},ArrayPrototypePush(n,i){return n.push(i)},ArrayPrototypeSlice(n,i,s){return n.slice(i,s)},Error,FunctionPrototypeCall(n,i,...s){return n.call(i,...s)},FunctionPrototypeSymbolHasInstance(n,i){return Function.prototype[Symbol.hasInstance].call(n,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,i){return Object.defineProperties(n,i)},ObjectDefineProperty(n,i,s){return Object.defineProperty(n,i,s)},ObjectGetOwnPropertyDescriptor(n,i){return Object.getOwnPropertyDescriptor(n,i)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,i){return Object.setPrototypeOf(n,i)},Promise,PromisePrototypeCatch(n,i){return n.catch(i)},PromisePrototypeThen(n,i,s){return n.then(i,s)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,i){return n.test(i)},SafeSet:Set,String,StringPrototypeSlice(n,i,s){return n.slice(i,s)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,i,s){return n.set(i,s)},Boolean,Uint8Array}}),gN=$e((r,e)=>{Me(),Be(),Ne(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[i,s]){let a=n.shift();return s==="f"?a.toFixed(6):s==="j"?JSON.stringify(a):s==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),yn=$e((r,e)=>{Me(),Be(),Ne();var{format:t,inspect:n}=gN(),{AggregateError:i}=nr(),s=globalThis.AggregateError||i,a=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",h={};function d(S,T){if(!S)throw new h.ERR_INTERNAL_ASSERTION(T)}function g(S){let T="",I=S.length,w=S[0]==="-"?1:0;for(;I>=w+4;I-=3)T=`_${S.slice(I-3,I)}${T}`;return`${S.slice(0,I)}${T}`}function m(S,T,I){if(typeof T=="function")return d(T.length<=I.length,`Code: ${S}; The provided arguments length (${I.length}) does not match the required ones (${T.length}).`),T(...I);let w=(T.match(/%[dfijoOs]/g)||[]).length;return d(w===I.length,`Code: ${S}; The provided arguments length (${I.length}) does not match the required ones (${w}).`),I.length===0?T:t(T,...I)}function y(S,T,I){I||(I=Error);class w extends I{constructor(..._){super(m(S,T,_))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(w.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=S,w.prototype[a]=!0,h[S]=w}function x(S){let T=c+S.name;return Object.defineProperty(S,"name",{value:T}),S}function b(S,T){if(S&&T&&S!==T){if(Array.isArray(T.errors))return T.errors.push(S),T;let I=new s([T,S],T.message);return I.code=T.code,I}return S||T}var E=class extends Error{constructor(S="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",T);super(S,T),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(S,T,I)=>{d(typeof S=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let w="The ";S.endsWith(" argument")?w+=`${S} `:w+=`"${S}" ${S.includes(".")?"property":"argument"} `,w+="must be ";let R=[],_=[],C=[];for(let D of T)d(typeof D=="string","All expected entries have to be of type string"),o.includes(D)?R.push(D.toLowerCase()):u.test(D)?_.push(D):(d(D!=="object",'The value "object" should be written as "Object"'),C.push(D));if(_.length>0){let D=R.indexOf("object");D!==-1&&(R.splice(R,D,1),_.push("Object"))}if(R.length>0){switch(R.length){case 1:w+=`of type ${R[0]}`;break;case 2:w+=`one of type ${R[0]} or ${R[1]}`;break;default:{let D=R.pop();w+=`one of type ${R.join(", ")}, or ${D}`}}(_.length>0||C.length>0)&&(w+=" or ")}if(_.length>0){switch(_.length){case 1:w+=`an instance of ${_[0]}`;break;case 2:w+=`an instance of ${_[0]} or ${_[1]}`;break;default:{let D=_.pop();w+=`an instance of ${_.join(", ")}, or ${D}`}}C.length>0&&(w+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(w+="an "),w+=`${C[0]}`;break;case 2:w+=`one of ${C[0]} or ${C[1]}`;break;default:{let D=C.pop();w+=`one of ${C.join(", ")}, or ${D}`}}if(I==null)w+=`. Received ${I}`;else if(typeof I=="function"&&I.name)w+=`. Received function ${I.name}`;else if(typeof I=="object"){var k;if((k=I.constructor)!==null&&k!==void 0&&k.name)w+=`. Received an instance of ${I.constructor.name}`;else{let D=n(I,{depth:-1});w+=`. Received ${D}`}}else{let D=n(I,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),w+=`. Received type ${typeof I} (${D})`}return w},TypeError),y("ERR_INVALID_ARG_VALUE",(S,T,I="is invalid")=>{let w=n(T);return w.length>128&&(w=w.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${I}. Received ${w}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(S,T,I)=>{var w;let R=I!=null&&(w=I.constructor)!==null&&w!==void 0&&w.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${S} to be returned from the "${T}" function but got ${R}.`},TypeError),y("ERR_MISSING_ARGS",(...S)=>{d(S.length>0,"At least one arg needs to be specified");let T,I=S.length;switch(S=(Array.isArray(S)?S:[S]).map(w=>`"${w}"`).join(" or "),I){case 1:T+=`The ${S[0]} argument`;break;case 2:T+=`The ${S[0]} and ${S[1]} arguments`;break;default:{let w=S.pop();T+=`The ${S.join(", ")}, and ${w} arguments`}break}return`${T} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(S,T,I)=>{d(T,'Missing "range" argument');let w;if(Number.isInteger(I)&&Math.abs(I)>2**32)w=g(String(I));else if(typeof I=="bigint"){w=String(I);let R=BigInt(2)**BigInt(32);(I>R||I<-R)&&(w=g(w)),w+="n"}else w=n(I);return`The value of "${S}" is out of range. It must be ${T}. Received ${w}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:E,aggregateTwoErrors:x(b),hideStackFrames:x,codes:h}}),Qc=$e((r,e)=>{Me(),Be(),Ne();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t}),io={};_u(io,{EventEmitter:()=>mN,default:()=>Jl,defaultMaxListeners:()=>yN,init:()=>vN,listenerCount:()=>bN,on:()=>xN,once:()=>SN});function sG(){if(cS)return jc;cS=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(I,w,R){return Function.prototype.apply.call(I,w,R)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:t=function(I){return Object.getOwnPropertyNames(I)};function n(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(I){return I!==I};function s(){s.init.call(this)}jc=s,jc.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");a=I}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function u(I){return I._maxListeners===void 0?s.defaultMaxListeners:I._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(I){for(var w=[],R=1;R<arguments.length;R++)w.push(arguments[R]);var _=I==="error",C=this._events;if(C!==void 0)_=_&&C.error===void 0;else if(!_)return!1;if(_){var k;if(w.length>0&&(k=w[0]),k instanceof Error)throw k;var D=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw D.context=k,D}var U=C[I];if(U===void 0)return!1;if(typeof U=="function")e(U,this,w);else for(var N=U.length,q=y(U,N),R=0;R<N;++R)e(q[R],this,w);return!0};function c(I,w,R,_){var C,k,D;if(o(R),k=I._events,k===void 0?(k=I._events=Object.create(null),I._eventsCount=0):(k.newListener!==void 0&&(I.emit("newListener",w,R.listener?R.listener:R),k=I._events),D=k[w]),D===void 0)D=k[w]=R,++I._eventsCount;else if(typeof D=="function"?D=k[w]=_?[R,D]:[D,R]:_?D.unshift(R):D.push(R),C=u(I),C>0&&D.length>C&&!D.warned){D.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=I,U.type=w,U.count=D.length,n(U)}return I}s.prototype.addListener=function(I,w){return c(this,I,w,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(I,w){return c(this,I,w,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(I,w,R){var _={fired:!1,wrapFn:void 0,target:I,type:w,listener:R},C=h.bind(_);return C.listener=R,_.wrapFn=C,C}s.prototype.once=function(I,w){return o(w),this.on(I,d(this,I,w)),this},s.prototype.prependOnceListener=function(I,w){return o(w),this.prependListener(I,d(this,I,w)),this},s.prototype.removeListener=function(I,w){var R,_,C,k,D;if(o(w),_=this._events,_===void 0)return this;if(R=_[I],R===void 0)return this;if(R===w||R.listener===w)--this._eventsCount===0?this._events=Object.create(null):(delete _[I],_.removeListener&&this.emit("removeListener",I,R.listener||w));else if(typeof R!="function"){for(C=-1,k=R.length-1;k>=0;k--)if(R[k]===w||R[k].listener===w){D=R[k].listener,C=k;break}if(C<0)return this;C===0?R.shift():x(R,C),R.length===1&&(_[I]=R[0]),_.removeListener!==void 0&&this.emit("removeListener",I,D||w)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(I){var w,R,_;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[I]),this;if(arguments.length===0){var C=Object.keys(R),k;for(_=0;_<C.length;++_)k=C[_],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=R[I],typeof w=="function")this.removeListener(I,w);else if(w!==void 0)for(_=w.length-1;_>=0;_--)this.removeListener(I,w[_]);return this};function g(I,w,R){var _=I._events;if(_===void 0)return[];var C=_[w];return C===void 0?[]:typeof C=="function"?R?[C.listener||C]:[C]:R?b(C):y(C,C.length)}s.prototype.listeners=function(I){return g(this,I,!0)},s.prototype.rawListeners=function(I){return g(this,I,!1)},s.listenerCount=function(I,w){return typeof I.listenerCount=="function"?I.listenerCount(w):m.call(I,w)},s.prototype.listenerCount=m;function m(I){var w=this._events;if(w!==void 0){var R=w[I];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(I,w){for(var R=new Array(w),_=0;_<w;++_)R[_]=I[_];return R}function x(I,w){for(;w+1<I.length;w++)I[w]=I[w+1];I.pop()}function b(I){for(var w=new Array(I.length),R=0;R<w.length;++R)w[R]=I[R].listener||I[R];return w}function E(I,w){return new Promise(function(R,_){function C(D){I.removeListener(w,k),_(D)}function k(){typeof I.removeListener=="function"&&I.removeListener("error",C),R([].slice.call(arguments))}T(I,w,k,{once:!0}),w!=="error"&&S(I,C,{once:!0})})}function S(I,w,R){typeof I.on=="function"&&T(I,"error",w,R)}function T(I,w,R,_){if(typeof I.on=="function")_.once?I.once(w,R):I.on(w,R);else if(typeof I.addEventListener=="function")I.addEventListener(w,function C(k){_.once&&I.removeEventListener(w,C),R(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return jc}var jc,cS,Jl,mN,yN,vN,bN,xN,SN,tl=Nn(()=>{Me(),Be(),Ne(),jc={},cS=!1,Jl=sG(),Jl.once,Jl.once=function(r,e){return new Promise((t,n)=>{function i(...a){s!==void 0&&r.removeListener("error",s),t(a)}let s;e!=="error"&&(s=a=>{r.removeListener(name,i),n(a)},r.once("error",s)),r.once(e,i)})},Jl.on=function(r,e){let t=[],n=[],i=null,s=!1,a={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let h=Promise.reject(i);return i=null,h}return s?createIterResult(void 0,!0):new Promise((h,d)=>n.push({resolve:h,reject:d}))},async return(){r.removeListener(e,o),r.removeListener("error",u),s=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,o),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,o),r.on("error",u),a;function o(...c){let h=n.shift();h?h.resolve(createIterResult(c,!1)):t.push(c)}function u(c){s=!0;let h=n.shift();h?h.reject(c):i=c,a.return()}},{EventEmitter:mN,defaultMaxListeners:yN,init:vN,listenerCount:bN,on:xN,once:SN}=Jl}),Mn=$e((r,e)=>{Me(),Be(),Ne();var t=(jr(),Nt(Ur)),{format:n,inspect:i}=gN(),{codes:{ERR_INVALID_ARG_TYPE:s}}=yn(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:u}=nr(),c=globalThis.AbortSignal||Qc().AbortSignal,h=globalThis.AbortController||Qc().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,g=globalThis.Blob||t.Blob,m=typeof g<"u"?function(b){return b instanceof g}:function(b){return!1},y=(b,E)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new s(E,"AbortSignal",b)},x=(b,E)=>{if(typeof b!="function")throw new s(E,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let E=!1;return function(...S){E||(E=!0,b.apply(this,S))}},createDeferredPromise:function(){let b,E;return{promise:new Promise((S,T)=>{b=S,E=T}),resolve:b,reject:E}},promisify(b){return new Promise((E,S)=>{b((T,...I)=>T?S(T):E(...I))})},debuglog(){return function(){}},format:n,inspect:i,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,E){return b},addAbortListener:(tl(),Nt(io)).addAbortListener||function(b,E){if(b===void 0)throw new s("signal","AbortSignal",b);y(b,"signal"),x(E,"listener");let S;return b.aborted?queueMicrotask(()=>E()):(b.addEventListener("abort",E,{__proto__:null,once:!0,[a]:!0}),S=()=>{b.removeEventListener("abort",E)}),{__proto__:null,[u](){var T;(T=S)===null||T===void 0||T()}}},AbortSignalAny:c.any||function(b){if(b.length===1)return b[0];let E=new h,S=()=>E.abort();return b.forEach(T=>{y(T,"signals"),T.addEventListener("abort",S,{once:!0})}),E.signal.addEventListener("abort",()=>{b.forEach(T=>T.removeEventListener("abort",S))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),_f=$e((r,e)=>{Me(),Be(),Ne();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:g,String:m,StringPrototypeToUpperCase:y,StringPrototypeTrim:x}=nr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:w}}=yn(),{normalizeEncoding:R}=Mn(),{isAsyncFunction:_,isArrayBufferView:C}=Mn().types,k={};function D(pe){return pe===(pe|0)}function U(pe){return pe===pe>>>0}var N=/^[0-7]+$/,q="must be a 32-bit unsigned integer or an octal string";function X(pe,Ue,Ke){if(typeof pe>"u"&&(pe=Ke),typeof pe=="string"){if(g(N,pe)===null)throw new T(Ue,pe,q);pe=h(pe,8)}return K(pe,Ue),pe}var V=b((pe,Ue,Ke=c,Ie=u)=>{if(typeof pe!="number")throw new S(Ue,"number",pe);if(!a(pe))throw new I(Ue,"an integer",pe);if(pe<Ke||pe>Ie)throw new I(Ue,`>= ${Ke} && <= ${Ie}`,pe)}),H=b((pe,Ue,Ke=-2147483648,Ie=2147483647)=>{if(typeof pe!="number")throw new S(Ue,"number",pe);if(!a(pe))throw new I(Ue,"an integer",pe);if(pe<Ke||pe>Ie)throw new I(Ue,`>= ${Ke} && <= ${Ie}`,pe)}),K=b((pe,Ue,Ke=!1)=>{if(typeof pe!="number")throw new S(Ue,"number",pe);if(!a(pe))throw new I(Ue,"an integer",pe);let Ie=Ke?1:0,lt=4294967295;if(pe<Ie||pe>lt)throw new I(Ue,`>= ${Ie} && <= ${lt}`,pe)});function Y(pe,Ue){if(typeof pe!="string")throw new S(Ue,"string",pe)}function ee(pe,Ue,Ke=void 0,Ie){if(typeof pe!="number")throw new S(Ue,"number",pe);if(Ke!=null&&pe<Ke||Ie!=null&&pe>Ie||(Ke!=null||Ie!=null)&&o(pe))throw new I(Ue,`${Ke!=null?`>= ${Ke}`:""}${Ke!=null&&Ie!=null?" && ":""}${Ie!=null?`<= ${Ie}`:""}`,pe)}var Q=b((pe,Ue,Ke)=>{if(!n(Ke,pe)){let Ie="must be one of: "+i(s(Ke,lt=>typeof lt=="string"?`'${lt}'`:m(lt)),", ");throw new T(Ue,pe,Ie)}});function $(pe,Ue){if(typeof pe!="boolean")throw new S(Ue,"boolean",pe)}function F(pe,Ue,Ke){return pe==null||!d(pe,Ue)?Ke:pe[Ue]}var Z=b((pe,Ue,Ke=null)=>{let Ie=F(Ke,"allowArray",!1),lt=F(Ke,"allowFunction",!1);if(!F(Ke,"nullable",!1)&&pe===null||!Ie&&t(pe)||typeof pe!="object"&&(!lt||typeof pe!="function"))throw new S(Ue,"Object",pe)}),de=b((pe,Ue)=>{if(pe!=null&&typeof pe!="object"&&typeof pe!="function")throw new S(Ue,"a dictionary",pe)}),oe=b((pe,Ue,Ke=0)=>{if(!t(pe))throw new S(Ue,"Array",pe);if(pe.length<Ke){let Ie=`must be longer than ${Ke}`;throw new T(Ue,pe,Ie)}});function Se(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++)Y(pe[Ke],`${Ue}[${Ke}]`)}function ae(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++)$(pe[Ke],`${Ue}[${Ke}]`)}function re(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++){let Ie=pe[Ke],lt=`${Ue}[${Ke}]`;if(Ie==null)throw new S(lt,"AbortSignal",Ie);Le(Ie,lt)}}function te(pe,Ue="signal"){if(Y(pe,Ue),k[pe]===void 0)throw k[y(pe)]!==void 0?new w(pe+" (signals must use all capital letters)"):new w(pe)}var le=b((pe,Ue="buffer")=>{if(!C(pe))throw new S(Ue,["Buffer","TypedArray","DataView"],pe)});function ce(pe,Ue){let Ke=R(Ue),Ie=pe.length;if(Ke==="hex"&&Ie%2!==0)throw new T("encoding",Ue,`is invalid for data of length ${Ie}`)}function ne(pe,Ue="Port",Ke=!0){if(typeof pe!="number"&&typeof pe!="string"||typeof pe=="string"&&x(pe).length===0||+pe!==+pe>>>0||pe>65535||pe===0&&!Ke)throw new E(Ue,pe,Ke);return pe|0}var Le=b((pe,Ue)=>{if(pe!==void 0&&(pe===null||typeof pe!="object"||!("aborted"in pe)))throw new S(Ue,"AbortSignal",pe)}),xe=b((pe,Ue)=>{if(typeof pe!="function")throw new S(Ue,"Function",pe)}),ie=b((pe,Ue)=>{if(typeof pe!="function"||_(pe))throw new S(Ue,"Function",pe)}),se=b((pe,Ue)=>{if(pe!==void 0)throw new S(Ue,"undefined",pe)});function ye(pe,Ue,Ke){if(!n(Ke,pe))throw new S(Ue,`('${i(Ke,"|")}')`,pe)}var Re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ce(pe,Ue){if(typeof pe>"u"||!g(Re,pe))throw new T(Ue,pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function je(pe){if(typeof pe=="string")return Ce(pe,"hints"),pe;if(t(pe)){let Ue=pe.length,Ke="";if(Ue===0)return Ke;for(let Ie=0;Ie<Ue;Ie++){let lt=pe[Ie];Ce(lt,"hints"),Ke+=lt,Ie!==Ue-1&&(Ke+=", ")}return Ke}throw new T("hints",pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:D,isUint32:U,parseFileMode:X,validateArray:oe,validateStringArray:Se,validateBooleanArray:ae,validateAbortSignalArray:re,validateBoolean:$,validateBuffer:le,validateDictionary:de,validateEncoding:ce,validateFunction:xe,validateInt32:H,validateInteger:V,validateNumber:ee,validateObject:Z,validateOneOf:Q,validatePlainFunction:ie,validatePort:ne,validateSignalName:te,validateString:Y,validateUint32:K,validateUndefined:se,validateUnion:ye,validateAbortSignal:Le,validateLinkHeaderValue:je}}),rl=$e((r,e)=>{Me(),Be(),Ne();var t=e.exports={},n,i;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=s}catch{n=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=a}catch{i=a}})();function o(E){if(n===setTimeout)return setTimeout(E,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(E,0);try{return n(E,0)}catch{try{return n.call(null,E,0)}catch{return n.call(this,E,0)}}}function u(E){if(i===clearTimeout)return clearTimeout(E);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{return i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}var c=[],h=!1,d,g=-1;function m(){!h||!d||(h=!1,d.length?c=d.concat(c):g=-1,c.length&&y())}function y(){if(!h){var E=o(m);h=!0;for(var S=c.length;S;){for(d=c,c=[];++g<S;)d&&d[g].run();g=-1,S=c.length}d=null,h=!1,u(E)}}t.nextTick=function(E){var S=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];c.push(new x(E,S)),c.length===1&&!h&&o(y)};function x(E,S){this.fun=E,this.array=S}x.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function b(){}t.on=b,t.addListener=b,t.once=b,t.off=b,t.removeListener=b,t.removeAllListeners=b,t.emit=b,t.prependListener=b,t.prependOnceListener=b,t.listeners=function(E){return[]},t.binding=function(E){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(E){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),sa=$e((r,e)=>{Me(),Be(),Ne();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:i}=nr(),s=i("nodejs.stream.destroyed"),a=i("nodejs.stream.errored"),o=i("nodejs.stream.readable"),u=i("nodejs.stream.writable"),c=i("nodejs.stream.disturbed"),h=i("nodejs.webstream.isClosedPromise"),d=i("nodejs.webstream.controllerErrorFunction");function g(F,Z=!1){var de;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!Z||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((de=F._readableState)===null||de===void 0?void 0:de.readable)!==!1)&&(!F._writableState||F._readableState))}function m(F){var Z;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((Z=F._writableState)===null||Z===void 0?void 0:Z.writable)!==!1))}function y(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function x(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function b(F){return!!(F&&!x(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function E(F){return!!(F&&!x(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function S(F){return!!(F&&!x(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function T(F){return b(F)||E(F)||S(F)}function I(F,Z){return F==null?!1:Z===!0?typeof F[t]=="function":Z===!1?typeof F[n]=="function":typeof F[t]=="function"||typeof F[n]=="function"}function w(F){if(!x(F))return null;let Z=F._writableState,de=F._readableState,oe=Z||de;return!!(F.destroyed||F[s]||oe!=null&&oe.destroyed)}function R(F){if(!m(F))return null;if(F.writableEnded===!0)return!0;let Z=F._writableState;return Z!=null&&Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function _(F,Z){if(!m(F))return null;if(F.writableFinished===!0)return!0;let de=F._writableState;return de!=null&&de.errored?!1:typeof de?.finished!="boolean"?null:!!(de.finished||Z===!1&&de.ended===!0&&de.length===0)}function C(F){if(!g(F))return null;if(F.readableEnded===!0)return!0;let Z=F._readableState;return!Z||Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function k(F,Z){if(!g(F))return null;let de=F._readableState;return de!=null&&de.errored?!1:typeof de?.endEmitted!="boolean"?null:!!(de.endEmitted||Z===!1&&de.ended===!0&&de.length===0)}function D(F){return F&&F[o]!=null?F[o]:typeof F?.readable!="boolean"?null:w(F)?!1:g(F)&&F.readable&&!k(F)}function U(F){return F&&F[u]!=null?F[u]:typeof F?.writable!="boolean"?null:w(F)?!1:m(F)&&F.writable&&!R(F)}function N(F,Z){return x(F)?w(F)?!0:!(Z?.readable!==!1&&D(F)||Z?.writable!==!1&&U(F)):null}function q(F){var Z,de;return x(F)?F.writableErrored?F.writableErrored:(Z=(de=F._writableState)===null||de===void 0?void 0:de.errored)!==null&&Z!==void 0?Z:null:null}function X(F){var Z,de;return x(F)?F.readableErrored?F.readableErrored:(Z=(de=F._readableState)===null||de===void 0?void 0:de.errored)!==null&&Z!==void 0?Z:null:null}function V(F){if(!x(F))return null;if(typeof F.closed=="boolean")return F.closed;let Z=F._writableState,de=F._readableState;return typeof Z?.closed=="boolean"||typeof de?.closed=="boolean"?Z?.closed||de?.closed:typeof F._closed=="boolean"&&H(F)?F._closed:null}function H(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function K(F){return typeof F._sent100=="boolean"&&H(F)}function Y(F){var Z;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((Z=F.req)===null||Z===void 0?void 0:Z.upgradeOrConnect)===void 0}function ee(F){if(!x(F))return null;let Z=F._writableState,de=F._readableState,oe=Z||de;return!oe&&K(F)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function Q(F){var Z;return!!(F&&((Z=F[c])!==null&&Z!==void 0?Z:F.readableDidRead||F.readableAborted))}function $(F){var Z,de,oe,Se,ae,re,te,le,ce,ne;return!!(F&&((Z=(de=(oe=(Se=(ae=(re=F[a])!==null&&re!==void 0?re:F.readableErrored)!==null&&ae!==void 0?ae:F.writableErrored)!==null&&Se!==void 0?Se:(te=F._readableState)===null||te===void 0?void 0:te.errorEmitted)!==null&&oe!==void 0?oe:(le=F._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&de!==void 0?de:(ce=F._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&Z!==void 0?Z:!((ne=F._writableState)===null||ne===void 0)&&ne.errored))}e.exports={isDestroyed:w,kIsDestroyed:s,isDisturbed:Q,kIsDisturbed:c,isErrored:$,kIsErrored:a,isReadable:D,kIsReadable:o,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:u,isClosed:V,isDuplexNodeStream:y,isFinished:N,isIterable:I,isReadableNodeStream:g,isReadableStream:b,isReadableEnded:C,isReadableFinished:k,isReadableErrored:X,isNodeStream:x,isWebStream:T,isWritable:U,isWritableNodeStream:m,isWritableStream:E,isWritableEnded:R,isWritableFinished:_,isWritableErrored:q,isServerRequest:Y,isServerResponse:K,willEmitClose:ee,isTransformStream:S}}),so=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{AbortError:n,codes:i}=yn(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=i,{kEmptyObject:o,once:u}=Mn(),{validateAbortSignal:c,validateFunction:h,validateObject:d,validateBoolean:g}=_f(),{Promise:m,PromisePrototypeThen:y,SymbolDispose:x}=nr(),{isClosed:b,isReadable:E,isReadableNodeStream:S,isReadableStream:T,isReadableFinished:I,isReadableErrored:w,isWritable:R,isWritableNodeStream:_,isWritableStream:C,isWritableFinished:k,isWritableErrored:D,isNodeStream:U,willEmitClose:N,kIsClosedPromise:q}=sa(),X;function V(Q){return Q.setHeader&&typeof Q.abort=="function"}var H=()=>{};function K(Q,$,F){var Z,de;if(arguments.length===2?(F=$,$=o):$==null?$=o:d($,"options"),h(F,"callback"),c($.signal,"options.signal"),F=u(F),T(Q)||C(Q))return Y(Q,$,F);if(!U(Q))throw new s("stream",["ReadableStream","WritableStream","Stream"],Q);let oe=(Z=$.readable)!==null&&Z!==void 0?Z:S(Q),Se=(de=$.writable)!==null&&de!==void 0?de:_(Q),ae=Q._writableState,re=Q._readableState,te=()=>{Q.writable||ne()},le=N(Q)&&S(Q)===oe&&_(Q)===Se,ce=k(Q,!1),ne=()=>{ce=!0,Q.destroyed&&(le=!1),!(le&&(!Q.readable||oe))&&(!oe||Le)&&F.call(Q)},Le=I(Q,!1),xe=()=>{Le=!0,Q.destroyed&&(le=!1),!(le&&(!Q.writable||Se))&&(!Se||ce)&&F.call(Q)},ie=pe=>{F.call(Q,pe)},se=b(Q),ye=()=>{se=!0;let pe=D(Q)||w(Q);if(pe&&typeof pe!="boolean")return F.call(Q,pe);if(oe&&!Le&&S(Q,!0)&&!I(Q,!1))return F.call(Q,new a);if(Se&&!ce&&!k(Q,!1))return F.call(Q,new a);F.call(Q)},Re=()=>{se=!0;let pe=D(Q)||w(Q);if(pe&&typeof pe!="boolean")return F.call(Q,pe);F.call(Q)},Ce=()=>{Q.req.on("finish",ne)};V(Q)?(Q.on("complete",ne),le||Q.on("abort",ye),Q.req?Ce():Q.on("request",Ce)):Se&&!ae&&(Q.on("end",te),Q.on("close",te)),!le&&typeof Q.aborted=="boolean"&&Q.on("aborted",ye),Q.on("end",xe),Q.on("finish",ne),$.error!==!1&&Q.on("error",ie),Q.on("close",ye),se?t.nextTick(ye):ae!=null&&ae.errorEmitted||re!=null&&re.errorEmitted?le||t.nextTick(Re):(!oe&&(!le||E(Q))&&(ce||R(Q)===!1)||!Se&&(!le||R(Q))&&(Le||E(Q)===!1)||re&&Q.req&&Q.aborted)&&t.nextTick(Re);let je=()=>{F=H,Q.removeListener("aborted",ye),Q.removeListener("complete",ne),Q.removeListener("abort",ye),Q.removeListener("request",Ce),Q.req&&Q.req.removeListener("finish",ne),Q.removeListener("end",te),Q.removeListener("close",te),Q.removeListener("finish",ne),Q.removeListener("end",xe),Q.removeListener("error",ie),Q.removeListener("close",ye)};if($.signal&&!se){let pe=()=>{let Ue=F;je(),Ue.call(Q,new n(void 0,{cause:$.signal.reason}))};if($.signal.aborted)t.nextTick(pe);else{X=X||Mn().addAbortListener;let Ue=X($.signal,pe),Ke=F;F=u((...Ie)=>{Ue[x](),Ke.apply(Q,Ie)})}}return je}function Y(Q,$,F){let Z=!1,de=H;if($.signal)if(de=()=>{Z=!0,F.call(Q,new n(void 0,{cause:$.signal.reason}))},$.signal.aborted)t.nextTick(de);else{X=X||Mn().addAbortListener;let Se=X($.signal,de),ae=F;F=u((...re)=>{Se[x](),ae.apply(Q,re)})}let oe=(...Se)=>{Z||t.nextTick(()=>F.apply(Q,Se))};return y(Q[q].promise,oe,oe),H}function ee(Q,$){var F;let Z=!1;return $===null&&($=o),(F=$)!==null&&F!==void 0&&F.cleanup&&(g($.cleanup,"cleanup"),Z=$.cleanup),new m((de,oe)=>{let Se=K(Q,$,ae=>{Z&&Se(),ae?oe(ae):de()})})}e.exports=K,e.exports.finished=ee}),Iu=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:s}=yn(),{Symbol:a}=nr(),{kIsDestroyed:o,isDestroyed:u,isFinished:c,isServerRequest:h}=sa(),d=a("kDestroy"),g=a("kConstruct");function m(N,q,X){N&&(N.stack,q&&!q.errored&&(q.errored=N),X&&!X.errored&&(X.errored=N))}function y(N,q){let X=this._readableState,V=this._writableState,H=V||X;return V!=null&&V.destroyed||X!=null&&X.destroyed?(typeof q=="function"&&q(),this):(m(N,V,X),V&&(V.destroyed=!0),X&&(X.destroyed=!0),H.constructed?x(this,N,q):this.once(d,function(K){x(this,n(K,N),q)}),this)}function x(N,q,X){let V=!1;function H(K){if(V)return;V=!0;let Y=N._readableState,ee=N._writableState;m(K,ee,Y),ee&&(ee.closed=!0),Y&&(Y.closed=!0),typeof X=="function"&&X(K),K?t.nextTick(b,N,K):t.nextTick(E,N)}try{N._destroy(q||null,H)}catch(K){H(K)}}function b(N,q){S(N,q),E(N)}function E(N){let q=N._readableState,X=N._writableState;X&&(X.closeEmitted=!0),q&&(q.closeEmitted=!0),(X!=null&&X.emitClose||q!=null&&q.emitClose)&&N.emit("close")}function S(N,q){let X=N._readableState,V=N._writableState;V!=null&&V.errorEmitted||X!=null&&X.errorEmitted||(V&&(V.errorEmitted=!0),X&&(X.errorEmitted=!0),N.emit("error",q))}function T(){let N=this._readableState,q=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),q&&(q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1)}function I(N,q,X){let V=N._readableState,H=N._writableState;if(H!=null&&H.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||H!=null&&H.autoDestroy?N.destroy(q):q&&(q.stack,H&&!H.errored&&(H.errored=q),V&&!V.errored&&(V.errored=q),X?t.nextTick(S,N,q):S(N,q))}function w(N,q){if(typeof N._construct!="function")return;let X=N._readableState,V=N._writableState;X&&(X.constructed=!1),V&&(V.constructed=!1),N.once(g,q),!(N.listenerCount(g)>1)&&t.nextTick(R,N)}function R(N){let q=!1;function X(V){if(q){I(N,V??new i);return}q=!0;let H=N._readableState,K=N._writableState,Y=K||H;H&&(H.constructed=!0),K&&(K.constructed=!0),Y.destroyed?N.emit(d,V):V?I(N,V,!0):t.nextTick(_,N)}try{N._construct(V=>{t.nextTick(X,V)})}catch(V){t.nextTick(X,V)}}function _(N){N.emit(g)}function C(N){return N?.setHeader&&typeof N.abort=="function"}function k(N){N.emit("close")}function D(N,q){N.emit("error",q),t.nextTick(k,N)}function U(N,q){!N||u(N)||(!q&&!c(N)&&(q=new s),h(N)?(N.socket=null,N.destroy(q)):C(N)?N.abort():C(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(q):typeof N.close=="function"?N.close():q?t.nextTick(D,N,q):t.nextTick(k,N),N.destroyed||(N[o]=!0))}e.exports={construct:w,destroyer:U,destroy:y,undestroy:T,errorOrDestroy:I}}),LT=$e((r,e)=>{Me(),Be(),Ne();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=nr(),{EventEmitter:i}=(tl(),Nt(io));function s(o){i.call(this,o)}n(s.prototype,i.prototype),n(s,i),s.prototype.pipe=function(o,u){let c=this;function h(E){o.writable&&o.write(E)===!1&&c.pause&&c.pause()}c.on("data",h);function d(){c.readable&&c.resume&&c.resume()}o.on("drain",d),!o._isStdio&&(!u||u.end!==!1)&&(c.on("end",m),c.on("close",y));let g=!1;function m(){g||(g=!0,o.end())}function y(){g||(g=!0,typeof o.destroy=="function"&&o.destroy())}function x(E){b(),i.listenerCount(this,"error")===0&&this.emit("error",E)}a(c,"error",x),a(o,"error",x);function b(){c.removeListener("data",h),o.removeListener("drain",d),c.removeListener("end",m),c.removeListener("close",y),c.removeListener("error",x),o.removeListener("error",x),c.removeListener("end",b),c.removeListener("close",b),o.removeListener("close",b)}return c.on("end",b),c.on("close",b),o.on("close",b),o.emit("pipe",c),o};function a(o,u,c){if(typeof o.prependListener=="function")return o.prependListener(u,c);!o._events||!o._events[u]?o.on(u,c):t(o._events[u])?o._events[u].unshift(c):o._events[u]=[c,o._events[u]]}e.exports={Stream:s,prependListener:a}}),Mg=$e((r,e)=>{Me(),Be(),Ne();var{SymbolDispose:t}=nr(),{AbortError:n,codes:i}=yn(),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:o}=sa(),u=so(),{ERR_INVALID_ARG_TYPE:c}=i,h,d=(g,m)=>{if(typeof g!="object"||!("aborted"in g))throw new c(m,"AbortSignal",g)};e.exports.addAbortSignal=function(g,m){if(d(g,"signal"),!s(m)&&!a(m))throw new c("stream",["ReadableStream","WritableStream","Stream"],m);return e.exports.addAbortSignalNoValidate(g,m)},e.exports.addAbortSignalNoValidate=function(g,m){if(typeof g!="object"||!("aborted"in g))return m;let y=s(m)?()=>{m.destroy(new n(void 0,{cause:g.reason}))}:()=>{m[o](new n(void 0,{cause:g.reason}))};if(g.aborted)y();else{h=h||Mn().addAbortListener;let x=h(g,y);u(m,x[t])}return m}}),aG=$e((r,e)=>{Me(),Be(),Ne();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:s}=nr(),{Buffer:a}=(jr(),Nt(Ur)),{inspect:o}=Mn();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){let c={data:u,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(u){let c={data:u,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let c=this.head,h=""+c.data;for(;(c=c.next)!==null;)h+=u+c.data;return h}concat(u){if(this.length===0)return a.alloc(0);let c=a.allocUnsafe(u>>>0),h=this.head,d=0;for(;h;)i(c,h.data,d),d+=h.data.length,h=h.next;return c}consume(u,c){let h=this.head.data;if(u<h.length){let d=h.slice(0,u);return this.head.data=h.slice(u),d}return u===h.length?this.shift():c?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[n](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let c="",h=this.head,d=0;do{let g=h.data;if(u>g.length)c+=g,u-=g.length;else{u===g.length?(c+=g,++d,h.next?this.head=h.next:this.head=this.tail=null):(c+=t(g,0,u),this.head=h,h.data=t(g,u));break}++d}while((h=h.next)!==null);return this.length-=d,c}_getBuffer(u){let c=a.allocUnsafe(u),h=u,d=this.head,g=0;do{let m=d.data;if(u>m.length)i(c,m,h-u),u-=m.length;else{u===m.length?(i(c,m,h-u),++g,d.next?this.head=d.next:this.head=this.tail=null):(i(c,new s(m.buffer,m.byteOffset,u),h-u),this.head=d,d.data=m.slice(u));break}++g}while((d=d.next)!==null);return this.length-=g,c}[Symbol.for("nodejs.util.inspect.custom")](u,c){return o(this,{...c,depth:0,customInspect:!1})}}}),Ng=$e((r,e)=>{Me(),Be(),Ne();var{MathFloor:t,NumberIsInteger:n}=nr(),{validateInteger:i}=_f(),{ERR_INVALID_ARG_VALUE:s}=yn().codes,a=16*1024,o=16;function u(g,m,y){return g.highWaterMark!=null?g.highWaterMark:m?g[y]:null}function c(g){return g?o:a}function h(g,m){i(m,"value",0),g?o=m:a=m}function d(g,m,y,x){let b=u(m,x,y);if(b!=null){if(!n(b)||b<0){let E=x?`options.${y}`:"options.highWaterMark";throw new s(E,b)}return t(b)}return c(g.objectMode)}e.exports={getHighWaterMark:d,getDefaultHighWaterMark:c,setDefaultHighWaterMark:h}}),oG=$e((r,e)=>{Me(),Be(),Ne();var t=(jr(),Nt(Ur)),n=t.Buffer;function i(a,o){for(var u in a)o[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=s);function s(a,o,u){return n(a,o,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,u)},s.alloc=function(a,o,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return o!==void 0?typeof u=="string"?c.fill(o,u):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}}),lG=$e(r=>{Me(),Be(),Ne();var e=oG().Buffer,t=e.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(S){if(!S)return"utf8";for(var T;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(T)return;S=(""+S).toLowerCase(),T=!0}}function i(S){var T=n(S);if(typeof T!="string"&&(e.isEncoding===t||!t(S)))throw new Error("Unknown encoding: "+S);return T||S}r.StringDecoder=s;function s(S){this.encoding=i(S);var T;switch(this.encoding){case"utf16le":this.text=g,this.end=m,T=4;break;case"utf8":this.fillLast=c,T=4;break;case"base64":this.text=y,this.end=x,T=3;break;default:this.write=b,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(T)}s.prototype.write=function(S){if(S.length===0)return"";var T,I;if(this.lastNeed){if(T=this.fillLast(S),T===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<S.length?T?T+this.text(S,I):this.text(S,I):T||""},s.prototype.end=d,s.prototype.text=h,s.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function a(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function o(S,T,I){var w=T.length-1;if(w<I)return 0;var R=a(T[w]);return R>=0?(R>0&&(S.lastNeed=R-1),R):--w<I||R===-2?0:(R=a(T[w]),R>=0?(R>0&&(S.lastNeed=R-2),R):--w<I||R===-2?0:(R=a(T[w]),R>=0?(R>0&&(R===2?R=0:S.lastNeed=R-3),R):0))}function u(S,T,I){if((T[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return S.lastNeed=2,""}}function c(S){var T=this.lastTotal-this.lastNeed,I=u(this,S);if(I!==void 0)return I;if(this.lastNeed<=S.length)return S.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,T,0,S.length),this.lastNeed-=S.length}function h(S,T){var I=o(this,S,T);if(!this.lastNeed)return S.toString("utf8",T);this.lastTotal=I;var w=S.length-(I-this.lastNeed);return S.copy(this.lastChar,0,w),S.toString("utf8",T,w)}function d(S){var T=S&&S.length?this.write(S):"";return this.lastNeed?T+"":T}function g(S,T){if((S.length-T)%2===0){var I=S.toString("utf16le",T);if(I){var w=I.charCodeAt(I.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",T,S.length-1)}function m(S){var T=S&&S.length?this.write(S):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,I)}return T}function y(S,T){var I=(S.length-T)%3;return I===0?S.toString("base64",T):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",T,S.length-I))}function x(S){var T=S&&S.length?this.write(S):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function b(S){return S.toString(this.encoding)}function E(S){return S&&S.length?this.write(S):""}}),EN=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:s}=nr(),{Buffer:a}=(jr(),Nt(Ur)),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:u}=yn().codes;function c(h,d,g){let m;if(typeof d=="string"||d instanceof a)return new h({objectMode:!0,...g,read(){this.push(d),this.push(null)}});let y;if(d&&d[i])y=!0,m=d[i]();else if(d&&d[s])y=!1,m=d[s]();else throw new o("iterable",["Iterable"],d);let x=new h({objectMode:!0,highWaterMark:1,...g}),b=!1;x._read=function(){b||(b=!0,S())},x._destroy=function(T,I){n(E(T),()=>t.nextTick(I,T),w=>t.nextTick(I,w||T))};async function E(T){let I=T!=null,w=typeof m.throw=="function";if(I&&w){let{value:R,done:_}=await m.throw(T);if(await R,_)return}if(typeof m.return=="function"){let{value:R}=await m.return();await R}}async function S(){for(;;){try{let{value:T,done:I}=y?await m.next():m.next();if(I)x.push(null);else{let w=T&&typeof T.then=="function"?await T:T;if(w===null)throw b=!1,new u;if(x.push(w))continue;b=!1}}catch(T){x.destroy(T)}break}}return x}e.exports=c}),Bg=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:o,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:h,SafeSet:d,SymbolAsyncDispose:g,SymbolAsyncIterator:m,Symbol:y}=nr();e.exports=Ie,Ie.ReadableState=Ke;var{EventEmitter:x}=(tl(),Nt(io)),{Stream:b,prependListener:E}=LT(),{Buffer:S}=(jr(),Nt(Ur)),{addAbortSignal:T}=Mg(),I=so(),w=Mn().debuglog("stream",J=>{w=J}),R=aG(),_=Iu(),{getHighWaterMark:C,getDefaultHighWaterMark:k}=Ng(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:q,ERR_STREAM_PUSH_AFTER_EOF:X,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:H}=yn(),{validateObject:K}=_f(),Y=y("kPaused"),{StringDecoder:ee}=lG(),Q=EN();c(Ie.prototype,b.prototype),c(Ie,b);var $=()=>{},{errorOrDestroy:F}=_,Z=1,de=2,oe=4,Se=8,ae=16,re=32,te=64,le=128,ce=256,ne=512,Le=1024,xe=2048,ie=4096,se=8192,ye=16384,Re=32768,Ce=65536,je=1<<17,pe=1<<18;function Ue(J){return{enumerable:!1,get(){return(this.state&J)!==0},set(ue){ue?this.state|=J:this.state&=~J}}}o(Ke.prototype,{objectMode:Ue(Z),ended:Ue(de),endEmitted:Ue(oe),reading:Ue(Se),constructed:Ue(ae),sync:Ue(re),needReadable:Ue(te),emittedReadable:Ue(le),readableListening:Ue(ce),resumeScheduled:Ue(ne),errorEmitted:Ue(Le),emitClose:Ue(xe),autoDestroy:Ue(ie),destroyed:Ue(se),closed:Ue(ye),closeEmitted:Ue(Re),multiAwaitDrain:Ue(Ce),readingMore:Ue(je),dataEmitted:Ue(pe)});function Ke(J,ue,qe){typeof qe!="boolean"&&(qe=ue instanceof Ys()),this.state=xe|ie|ae|re,J&&J.objectMode&&(this.state|=Z),qe&&J&&J.readableObjectMode&&(this.state|=Z),this.highWaterMark=J?C(this,J,"readableHighWaterMark",qe):k(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this[Y]=null,J&&J.emitClose===!1&&(this.state&=~xe),J&&J.autoDestroy===!1&&(this.state&=~ie),this.errored=null,this.defaultEncoding=J&&J.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,J&&J.encoding&&(this.decoder=new ee(J.encoding),this.encoding=J.encoding)}function Ie(J){if(!(this instanceof Ie))return new Ie(J);let ue=this instanceof Ys();this._readableState=new Ke(J,this,ue),J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.construct=="function"&&(this._construct=J.construct),J.signal&&!ue&&T(J.signal,this)),b.call(this,J),_.construct(this,()=>{this._readableState.needReadable&&me(this,this._readableState)})}Ie.prototype.destroy=_.destroy,Ie.prototype._undestroy=_.undestroy,Ie.prototype._destroy=function(J,ue){ue(J)},Ie.prototype[x.captureRejectionSymbol]=function(J){this.destroy(J)},Ie.prototype[g]=function(){let J;return this.destroyed||(J=this.readableEnded?null:new H,this.destroy(J)),new h((ue,qe)=>I(this,We=>We&&We!==J?qe(We):ue(null)))},Ie.prototype.push=function(J,ue){return lt(this,J,ue,!1)},Ie.prototype.unshift=function(J,ue){return lt(this,J,ue,!0)};function lt(J,ue,qe,We){w("readableAddChunk",ue);let Qe=J._readableState,Zt;if((Qe.state&Z)===0&&(typeof ue=="string"?(qe=qe||Qe.defaultEncoding,Qe.encoding!==qe&&(We&&Qe.encoding?ue=S.from(ue,qe).toString(Qe.encoding):(ue=S.from(ue,qe),qe=""))):ue instanceof S?qe="":b._isUint8Array(ue)?(ue=b._uint8ArrayToBuffer(ue),qe=""):ue!=null&&(Zt=new U("chunk",["string","Buffer","Uint8Array"],ue))),Zt)F(J,Zt);else if(ue===null)Qe.state&=~Se,ve(J,Qe);else if((Qe.state&Z)!==0||ue&&ue.length>0)if(We)if((Qe.state&oe)!==0)F(J,new V);else{if(Qe.destroyed||Qe.errored)return!1;L(J,Qe,ue,!0)}else if(Qe.ended)F(J,new X);else{if(Qe.destroyed||Qe.errored)return!1;Qe.state&=~Se,Qe.decoder&&!qe?(ue=Qe.decoder.write(ue),Qe.objectMode||ue.length!==0?L(J,Qe,ue,!1):me(J,Qe)):L(J,Qe,ue,!1)}else We||(Qe.state&=~Se,me(J,Qe));return!Qe.ended&&(Qe.length<Qe.highWaterMark||Qe.length===0)}function L(J,ue,qe,We){ue.flowing&&ue.length===0&&!ue.sync&&J.listenerCount("data")>0?((ue.state&Ce)!==0?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null,ue.dataEmitted=!0,J.emit("data",qe)):(ue.length+=ue.objectMode?1:qe.length,We?ue.buffer.unshift(qe):ue.buffer.push(qe),(ue.state&te)!==0&&Pe(J)),me(J,ue)}Ie.prototype.isPaused=function(){let J=this._readableState;return J[Y]===!0||J.flowing===!1},Ie.prototype.setEncoding=function(J){let ue=new ee(J);this._readableState.decoder=ue,this._readableState.encoding=this._readableState.decoder.encoding;let qe=this._readableState.buffer,We="";for(let Qe of qe)We+=ue.write(Qe);return qe.clear(),We!==""&&qe.push(We),this._readableState.length=We.length,this};var M=1073741824;function z(J){if(J>M)throw new q("size","<= 1GiB",J);return J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++,J}function fe(J,ue){return J<=0||ue.length===0&&ue.ended?0:(ue.state&Z)!==0?1:s(J)?ue.flowing&&ue.length?ue.buffer.first().length:ue.length:J<=ue.length?J:ue.ended?ue.length:0}Ie.prototype.read=function(J){w("read",J),J===void 0?J=NaN:i(J)||(J=a(J,10));let ue=this._readableState,qe=J;if(J>ue.highWaterMark&&(ue.highWaterMark=z(J)),J!==0&&(ue.state&=~le),J===0&&ue.needReadable&&((ue.highWaterMark!==0?ue.length>=ue.highWaterMark:ue.length>0)||ue.ended))return w("read: emitReadable",ue.length,ue.ended),ue.length===0&&ue.ended?un(this):Pe(this),null;if(J=fe(J,ue),J===0&&ue.ended)return ue.length===0&&un(this),null;let We=(ue.state&te)!==0;if(w("need readable",We),(ue.length===0||ue.length-J<ue.highWaterMark)&&(We=!0,w("length less than watermark",We)),ue.ended||ue.reading||ue.destroyed||ue.errored||!ue.constructed)We=!1,w("reading, ended or constructing",We);else if(We){w("do read"),ue.state|=Se|re,ue.length===0&&(ue.state|=te);try{this._read(ue.highWaterMark)}catch(Zt){F(this,Zt)}ue.state&=~re,ue.reading||(J=fe(qe,ue))}let Qe;return J>0?Qe=bn(J,ue):Qe=null,Qe===null?(ue.needReadable=ue.length<=ue.highWaterMark,J=0):(ue.length-=J,ue.multiAwaitDrain?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null),ue.length===0&&(ue.ended||(ue.needReadable=!0),qe!==J&&ue.ended&&un(this)),Qe!==null&&!ue.errorEmitted&&!ue.closeEmitted&&(ue.dataEmitted=!0,this.emit("data",Qe)),Qe};function ve(J,ue){if(w("onEofChunk"),!ue.ended){if(ue.decoder){let qe=ue.decoder.end();qe&&qe.length&&(ue.buffer.push(qe),ue.length+=ue.objectMode?1:qe.length)}ue.ended=!0,ue.sync?Pe(J):(ue.needReadable=!1,ue.emittedReadable=!0,Ve(J))}}function Pe(J){let ue=J._readableState;w("emitReadable",ue.needReadable,ue.emittedReadable),ue.needReadable=!1,ue.emittedReadable||(w("emitReadable",ue.flowing),ue.emittedReadable=!0,t.nextTick(Ve,J))}function Ve(J){let ue=J._readableState;w("emitReadable_",ue.destroyed,ue.length,ue.ended),!ue.destroyed&&!ue.errored&&(ue.length||ue.ended)&&(J.emit("readable"),ue.emittedReadable=!1),ue.needReadable=!ue.flowing&&!ue.ended&&ue.length<=ue.highWaterMark,on(J)}function me(J,ue){!ue.readingMore&&ue.constructed&&(ue.readingMore=!0,t.nextTick(Ae,J,ue))}function Ae(J,ue){for(;!ue.reading&&!ue.ended&&(ue.length<ue.highWaterMark||ue.flowing&&ue.length===0);){let qe=ue.length;if(w("maybeReadMore read 0"),J.read(0),qe===ue.length)break}ue.readingMore=!1}Ie.prototype._read=function(J){throw new N("_read()")},Ie.prototype.pipe=function(J,ue){let qe=this,We=this._readableState;We.pipes.length===1&&(We.multiAwaitDrain||(We.multiAwaitDrain=!0,We.awaitDrainWriters=new d(We.awaitDrainWriters?[We.awaitDrainWriters]:[]))),We.pipes.push(J),w("pipe count=%d opts=%j",We.pipes.length,ue);let Qe=(!ue||ue.end!==!1)&&J!==t.stdout&&J!==t.stderr?xr:hs;We.endEmitted?t.nextTick(Qe):qe.once("end",Qe),J.on("unpipe",Zt);function Zt(jn,cn){w("onunpipe"),jn===qe&&cn&&cn.hasUnpiped===!1&&(cn.hasUnpiped=!0,Sn())}function xr(){w("onend"),J.end()}let xn,ga=!1;function Sn(){w("cleanup"),J.removeListener("close",Tn),J.removeListener("finish",Ui),xn&&J.removeListener("drain",xn),J.removeListener("error",En),J.removeListener("unpipe",Zt),qe.removeListener("end",xr),qe.removeListener("end",hs),qe.removeListener("data",Sr),ga=!0,xn&&We.awaitDrainWriters&&(!J._writableState||J._writableState.needDrain)&&xn()}function Jt(){ga||(We.pipes.length===1&&We.pipes[0]===J?(w("false write response, pause",0),We.awaitDrainWriters=J,We.multiAwaitDrain=!1):We.pipes.length>1&&We.pipes.includes(J)&&(w("false write response, pause",We.awaitDrainWriters.size),We.awaitDrainWriters.add(J)),qe.pause()),xn||(xn=Je(qe,J),J.on("drain",xn))}qe.on("data",Sr);function Sr(jn){w("ondata");let cn=J.write(jn);w("dest.write",cn),cn===!1&&Jt()}function En(jn){if(w("onerror",jn),hs(),J.removeListener("error",En),J.listenerCount("error")===0){let cn=J._writableState||J._readableState;cn&&!cn.errorEmitted?F(J,jn):J.emit("error",jn)}}E(J,"error",En);function Tn(){J.removeListener("finish",Ui),hs()}J.once("close",Tn);function Ui(){w("onfinish"),J.removeListener("close",Tn),hs()}J.once("finish",Ui);function hs(){w("unpipe"),qe.unpipe(J)}return J.emit("pipe",qe),J.writableNeedDrain===!0?Jt():We.flowing||(w("pipe resume"),qe.resume()),J};function Je(J,ue){return function(){let qe=J._readableState;qe.awaitDrainWriters===ue?(w("pipeOnDrain",1),qe.awaitDrainWriters=null):qe.multiAwaitDrain&&(w("pipeOnDrain",qe.awaitDrainWriters.size),qe.awaitDrainWriters.delete(ue)),(!qe.awaitDrainWriters||qe.awaitDrainWriters.size===0)&&J.listenerCount("data")&&J.resume()}}Ie.prototype.unpipe=function(J){let ue=this._readableState,qe={hasUnpiped:!1};if(ue.pipes.length===0)return this;if(!J){let Qe=ue.pipes;ue.pipes=[],this.pause();for(let Zt=0;Zt<Qe.length;Zt++)Qe[Zt].emit("unpipe",this,{hasUnpiped:!1});return this}let We=n(ue.pipes,J);return We===-1?this:(ue.pipes.splice(We,1),ue.pipes.length===0&&this.pause(),J.emit("unpipe",this,qe),this)},Ie.prototype.on=function(J,ue){let qe=b.prototype.on.call(this,J,ue),We=this._readableState;return J==="data"?(We.readableListening=this.listenerCount("readable")>0,We.flowing!==!1&&this.resume()):J==="readable"&&!We.endEmitted&&!We.readableListening&&(We.readableListening=We.needReadable=!0,We.flowing=!1,We.emittedReadable=!1,w("on readable",We.length,We.reading),We.length?Pe(this):We.reading||t.nextTick(ct,this)),qe},Ie.prototype.addListener=Ie.prototype.on,Ie.prototype.removeListener=function(J,ue){let qe=b.prototype.removeListener.call(this,J,ue);return J==="readable"&&t.nextTick(Xe,this),qe},Ie.prototype.off=Ie.prototype.removeListener,Ie.prototype.removeAllListeners=function(J){let ue=b.prototype.removeAllListeners.apply(this,arguments);return(J==="readable"||J===void 0)&&t.nextTick(Xe,this),ue};function Xe(J){let ue=J._readableState;ue.readableListening=J.listenerCount("readable")>0,ue.resumeScheduled&&ue[Y]===!1?ue.flowing=!0:J.listenerCount("data")>0?J.resume():ue.readableListening||(ue.flowing=null)}function ct(J){w("readable nexttick read 0"),J.read(0)}Ie.prototype.resume=function(){let J=this._readableState;return J.flowing||(w("resume"),J.flowing=!J.readableListening,dt(this,J)),J[Y]=!1,this};function dt(J,ue){ue.resumeScheduled||(ue.resumeScheduled=!0,t.nextTick(ii,J,ue))}function ii(J,ue){w("resume",ue.reading),ue.reading||J.read(0),ue.resumeScheduled=!1,J.emit("resume"),on(J),ue.flowing&&!ue.reading&&J.read(0)}Ie.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Y]=!0,this};function on(J){let ue=J._readableState;for(w("flow",ue.flowing);ue.flowing&&J.read()!==null;);}Ie.prototype.wrap=function(J){let ue=!1;J.on("data",We=>{!this.push(We)&&J.pause&&(ue=!0,J.pause())}),J.on("end",()=>{this.push(null)}),J.on("error",We=>{F(this,We)}),J.on("close",()=>{this.destroy()}),J.on("destroy",()=>{this.destroy()}),this._read=()=>{ue&&J.resume&&(ue=!1,J.resume())};let qe=u(J);for(let We=1;We<qe.length;We++){let Qe=qe[We];this[Qe]===void 0&&typeof J[Qe]=="function"&&(this[Qe]=J[Qe].bind(J))}return this},Ie.prototype[m]=function(){return or(this)},Ie.prototype.iterator=function(J){return J!==void 0&&K(J,"options"),or(this,J)};function or(J,ue){typeof J.read!="function"&&(J=Ie.wrap(J,{objectMode:!0}));let qe=ln(J,ue);return qe.stream=J,qe}async function*ln(J,ue){let qe=$;function We(xr){this===J?(qe(),qe=$):qe=xr}J.on("readable",We);let Qe,Zt=I(J,{writable:!1},xr=>{Qe=xr?D(Qe,xr):null,qe(),qe=$});try{for(;;){let xr=J.destroyed?null:J.read();if(xr!==null)yield xr;else{if(Qe)throw Qe;if(Qe===null)return;await new h(We)}}}catch(xr){throw Qe=D(Qe,xr),Qe}finally{(Qe||ue?.destroyOnReturn!==!1)&&(Qe===void 0||J._readableState.autoDestroy)?_.destroyer(J,null):(J.off("readable",We),Zt())}}o(Ie.prototype,{readable:{__proto__:null,get(){let J=this._readableState;return!!J&&J.readable!==!1&&!J.destroyed&&!J.errorEmitted&&!J.endEmitted},set(J){this._readableState&&(this._readableState.readable=!!J)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(J){this._readableState&&(this._readableState.destroyed=J)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Ke.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Y]!==!1},set(J){this[Y]=!!J}}}),Ie._fromList=bn;function bn(J,ue){if(ue.length===0)return null;let qe;return ue.objectMode?qe=ue.buffer.shift():!J||J>=ue.length?(ue.decoder?qe=ue.buffer.join(""):ue.buffer.length===1?qe=ue.buffer.first():qe=ue.buffer.concat(ue.length),ue.buffer.clear()):qe=ue.buffer.consume(J,ue.decoder),qe}function un(J){let ue=J._readableState;w("endReadable",ue.endEmitted),ue.endEmitted||(ue.ended=!0,t.nextTick(br,ue,J))}function br(J,ue){if(w("endReadableNT",J.endEmitted,J.length),!J.errored&&!J.closeEmitted&&!J.endEmitted&&J.length===0){if(J.endEmitted=!0,ue.emit("end"),ue.writable&&ue.allowHalfOpen===!1)t.nextTick(al,ue);else if(J.autoDestroy){let qe=ue._writableState;(!qe||qe.autoDestroy&&(qe.finished||qe.writable===!1))&&ue.destroy()}}}function al(J){J.writable&&!J.writableEnded&&!J.destroyed&&J.end()}Ie.from=function(J,ue){return Q(Ie,J,ue)};var cs;function fs(){return cs===void 0&&(cs={}),cs}Ie.fromWeb=function(J,ue){return fs().newStreamReadableFromReadableStream(J,ue)},Ie.toWeb=function(J,ue){return fs().newReadableStreamFromStreamReadable(J,ue)},Ie.wrap=function(J,ue){var qe,We;return new Ie({objectMode:(qe=(We=J.readableObjectMode)!==null&&We!==void 0?We:J.objectMode)!==null&&qe!==void 0?qe:!0,...ue,destroy(Qe,Zt){_.destroyer(J,Qe),Zt(Qe)}}).wrap(J)}}),CT=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:o,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:h,SymbolHasInstance:d}=nr();e.exports=K,K.WritableState=V;var{EventEmitter:g}=(tl(),Nt(io)),m=LT().Stream,{Buffer:y}=(jr(),Nt(Ur)),x=Iu(),{addAbortSignal:b}=Mg(),{getHighWaterMark:E,getDefaultHighWaterMark:S}=Ng(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:_,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:U}=yn().codes,{errorOrDestroy:N}=x;u(K.prototype,m.prototype),u(K,m);function q(){}var X=h("kOnFinished");function V(ie,se,ye){typeof ye!="boolean"&&(ye=se instanceof Ys()),this.objectMode=!!(ie&&ie.objectMode),ye&&(this.objectMode=this.objectMode||!!(ie&&ie.writableObjectMode)),this.highWaterMark=ie?E(this,ie,"writableHighWaterMark",ye):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Re=!!(ie&&ie.decodeStrings===!1);this.decodeStrings=!Re,this.defaultEncoding=ie&&ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,se),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,H(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ie||ie.emitClose!==!1,this.autoDestroy=!ie||ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[X]=[]}function H(ie){ie.buffered=[],ie.bufferedIndex=0,ie.allBuffers=!0,ie.allNoop=!0}V.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},a(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K(ie){let se=this instanceof Ys();if(!se&&!s(K,this))return new K(ie);this._writableState=new V(ie,this,se),ie&&(typeof ie.write=="function"&&(this._write=ie.write),typeof ie.writev=="function"&&(this._writev=ie.writev),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.final=="function"&&(this._final=ie.final),typeof ie.construct=="function"&&(this._construct=ie.construct),ie.signal&&b(ie.signal,this)),m.call(this,ie),x.construct(this,()=>{let ye=this._writableState;ye.writing||Se(this,ye),le(this,ye)})}a(K,d,{__proto__:null,value:function(ie){return s(this,ie)?!0:this!==K?!1:ie&&ie._writableState instanceof V}}),K.prototype.pipe=function(){N(this,new R)};function Y(ie,se,ye,Re){let Ce=ie._writableState;if(typeof ye=="function")Re=ye,ye=Ce.defaultEncoding;else{if(!ye)ye=Ce.defaultEncoding;else if(ye!=="buffer"&&!y.isEncoding(ye))throw new U(ye);typeof Re!="function"&&(Re=q)}if(se===null)throw new k;if(!Ce.objectMode)if(typeof se=="string")Ce.decodeStrings!==!1&&(se=y.from(se,ye),ye="buffer");else if(se instanceof y)ye="buffer";else if(m._isUint8Array(se))se=m._uint8ArrayToBuffer(se),ye="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],se);let je;return Ce.ending?je=new D:Ce.destroyed&&(je=new _("write")),je?(t.nextTick(Re,je),N(ie,je,!0),je):(Ce.pendingcb++,ee(ie,Ce,se,ye,Re))}K.prototype.write=function(ie,se,ye){return Y(this,ie,se,ye)===!0},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){let ie=this._writableState;ie.corked&&(ie.corked--,ie.writing||Se(this,ie))},K.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=c(ie)),!y.isEncoding(ie))throw new U(ie);return this._writableState.defaultEncoding=ie,this};function ee(ie,se,ye,Re,Ce){let je=se.objectMode?1:ye.length;se.length+=je;let pe=se.length<se.highWaterMark;return pe||(se.needDrain=!0),se.writing||se.corked||se.errored||!se.constructed?(se.buffered.push({chunk:ye,encoding:Re,callback:Ce}),se.allBuffers&&Re!=="buffer"&&(se.allBuffers=!1),se.allNoop&&Ce!==q&&(se.allNoop=!1)):(se.writelen=je,se.writecb=Ce,se.writing=!0,se.sync=!0,ie._write(ye,Re,se.onwrite),se.sync=!1),pe&&!se.errored&&!se.destroyed}function Q(ie,se,ye,Re,Ce,je,pe){se.writelen=Re,se.writecb=pe,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new _("write")):ye?ie._writev(Ce,se.onwrite):ie._write(Ce,je,se.onwrite),se.sync=!1}function $(ie,se,ye,Re){--se.pendingcb,Re(ye),oe(se),N(ie,ye)}function F(ie,se){let ye=ie._writableState,Re=ye.sync,Ce=ye.writecb;if(typeof Ce!="function"){N(ie,new w);return}ye.writing=!1,ye.writecb=null,ye.length-=ye.writelen,ye.writelen=0,se?(se.stack,ye.errored||(ye.errored=se),ie._readableState&&!ie._readableState.errored&&(ie._readableState.errored=se),Re?t.nextTick($,ie,ye,se,Ce):$(ie,ye,se,Ce)):(ye.buffered.length>ye.bufferedIndex&&Se(ie,ye),Re?ye.afterWriteTickInfo!==null&&ye.afterWriteTickInfo.cb===Ce?ye.afterWriteTickInfo.count++:(ye.afterWriteTickInfo={count:1,cb:Ce,stream:ie,state:ye},t.nextTick(Z,ye.afterWriteTickInfo)):de(ie,ye,1,Ce))}function Z({stream:ie,state:se,count:ye,cb:Re}){return se.afterWriteTickInfo=null,de(ie,se,ye,Re)}function de(ie,se,ye,Re){for(!se.ending&&!ie.destroyed&&se.length===0&&se.needDrain&&(se.needDrain=!1,ie.emit("drain"));ye-- >0;)se.pendingcb--,Re();se.destroyed&&oe(se),le(ie,se)}function oe(ie){if(ie.writing)return;for(let Ce=ie.bufferedIndex;Ce<ie.buffered.length;++Ce){var se;let{chunk:je,callback:pe}=ie.buffered[Ce],Ue=ie.objectMode?1:je.length;ie.length-=Ue,pe((se=ie.errored)!==null&&se!==void 0?se:new _("write"))}let ye=ie[X].splice(0);for(let Ce=0;Ce<ye.length;Ce++){var Re;ye[Ce]((Re=ie.errored)!==null&&Re!==void 0?Re:new _("end"))}H(ie)}function Se(ie,se){if(se.corked||se.bufferProcessing||se.destroyed||!se.constructed)return;let{buffered:ye,bufferedIndex:Re,objectMode:Ce}=se,je=ye.length-Re;if(!je)return;let pe=Re;if(se.bufferProcessing=!0,je>1&&ie._writev){se.pendingcb-=je-1;let Ue=se.allNoop?q:Ie=>{for(let lt=pe;lt<ye.length;++lt)ye[lt].callback(Ie)},Ke=se.allNoop&&pe===0?ye:n(ye,pe);Ke.allBuffers=se.allBuffers,Q(ie,se,!0,se.length,Ke,"",Ue),H(se)}else{do{let{chunk:Ue,encoding:Ke,callback:Ie}=ye[pe];ye[pe++]=null;let lt=Ce?1:Ue.length;Q(ie,se,!1,lt,Ue,Ke,Ie)}while(pe<ye.length&&!se.writing);pe===ye.length?H(se):pe>256?(ye.splice(0,pe),se.bufferedIndex=0):se.bufferedIndex=pe}se.bufferProcessing=!1}K.prototype._write=function(ie,se,ye){if(this._writev)this._writev([{chunk:ie,encoding:se}],ye);else throw new I("_write()")},K.prototype._writev=null,K.prototype.end=function(ie,se,ye){let Re=this._writableState;typeof ie=="function"?(ye=ie,ie=null,se=null):typeof se=="function"&&(ye=se,se=null);let Ce;if(ie!=null){let je=Y(this,ie,se);je instanceof i&&(Ce=je)}return Re.corked&&(Re.corked=1,this.uncork()),Ce||(!Re.errored&&!Re.ending?(Re.ending=!0,le(this,Re,!0),Re.ended=!0):Re.finished?Ce=new C("end"):Re.destroyed&&(Ce=new _("end"))),typeof ye=="function"&&(Ce||Re.finished?t.nextTick(ye,Ce):Re[X].push(ye)),this};function ae(ie){return ie.ending&&!ie.destroyed&&ie.constructed&&ie.length===0&&!ie.errored&&ie.buffered.length===0&&!ie.finished&&!ie.writing&&!ie.errorEmitted&&!ie.closeEmitted}function re(ie,se){let ye=!1;function Re(Ce){if(ye){N(ie,Ce??w());return}if(ye=!0,se.pendingcb--,Ce){let je=se[X].splice(0);for(let pe=0;pe<je.length;pe++)je[pe](Ce);N(ie,Ce,se.sync)}else ae(se)&&(se.prefinished=!0,ie.emit("prefinish"),se.pendingcb++,t.nextTick(ce,ie,se))}se.sync=!0,se.pendingcb++;try{ie._final(Re)}catch(Ce){Re(Ce)}se.sync=!1}function te(ie,se){!se.prefinished&&!se.finalCalled&&(typeof ie._final=="function"&&!se.destroyed?(se.finalCalled=!0,re(ie,se)):(se.prefinished=!0,ie.emit("prefinish")))}function le(ie,se,ye){ae(se)&&(te(ie,se),se.pendingcb===0&&(ye?(se.pendingcb++,t.nextTick((Re,Ce)=>{ae(Ce)?ce(Re,Ce):Ce.pendingcb--},ie,se)):ae(se)&&(se.pendingcb++,ce(ie,se))))}function ce(ie,se){se.pendingcb--,se.finished=!0;let ye=se[X].splice(0);for(let Re=0;Re<ye.length;Re++)ye[Re]();if(ie.emit("finish"),se.autoDestroy){let Re=ie._readableState;(!Re||Re.autoDestroy&&(Re.endEmitted||Re.readable===!1))&&ie.destroy()}}o(K.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ie){this._writableState&&(this._writableState.destroyed=ie)}},writable:{__proto__:null,get(){let ie=this._writableState;return!!ie&&ie.writable!==!1&&!ie.destroyed&&!ie.errored&&!ie.ending&&!ie.ended},set(ie){this._writableState&&(this._writableState.writable=!!ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let ie=this._writableState;return ie?!ie.destroyed&&!ie.ending&&ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ne=x.destroy;K.prototype.destroy=function(ie,se){let ye=this._writableState;return!ye.destroyed&&(ye.bufferedIndex<ye.buffered.length||ye[X].length)&&t.nextTick(oe,ye),ne.call(this,ie,se),this},K.prototype._undestroy=x.undestroy,K.prototype._destroy=function(ie,se){se(ie)},K.prototype[g.captureRejectionSymbol]=function(ie){this.destroy(ie)};var Le;function xe(){return Le===void 0&&(Le={}),Le}K.fromWeb=function(ie,se){return xe().newStreamWritableFromWritableStream(ie,se)},K.toWeb=function(ie){return xe().newWritableStreamFromStreamWritable(ie)}}),uG=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),n=(jr(),Nt(Ur)),{isReadable:i,isWritable:s,isIterable:a,isNodeStream:o,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:g}=sa(),m=so(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:x,ERR_INVALID_RETURN_VALUE:b}}=yn(),{destroyer:E}=Iu(),S=Ys(),T=Bg(),I=CT(),{createDeferredPromise:w}=Mn(),R=EN(),_=globalThis.Blob||n.Blob,C=typeof _<"u"?function(X){return X instanceof _}:function(X){return!1},k=globalThis.AbortController||Qc().AbortController,{FunctionPrototypeCall:D}=nr(),U=class extends S{constructor(X){super(X),X?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),X?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function X(V,H){if(h(V))return V;if(u(V))return q({readable:V});if(c(V))return q({writable:V});if(o(V))return q({writable:!1,readable:!1});if(d(V))return q({readable:T.fromWeb(V)});if(g(V))return q({writable:I.fromWeb(V)});if(typeof V=="function"){let{value:Y,write:ee,final:Q,destroy:$}=N(V);if(a(Y))return R(U,Y,{objectMode:!0,write:ee,final:Q,destroy:$});let F=Y?.then;if(typeof F=="function"){let Z,de=D(F,Y,oe=>{if(oe!=null)throw new b("nully","body",oe)},oe=>{E(Z,oe)});return Z=new U({objectMode:!0,readable:!1,write:ee,final(oe){Q(async()=>{try{await de,t.nextTick(oe,null)}catch(Se){t.nextTick(oe,Se)}})},destroy:$})}throw new b("Iterable, AsyncIterable or AsyncFunction",H,Y)}if(C(V))return X(V.arrayBuffer());if(a(V))return R(U,V,{objectMode:!0,writable:!1});if(d(V?.readable)&&g(V?.writable))return U.fromWeb(V);if(typeof V?.writable=="object"||typeof V?.readable=="object"){let Y=V!=null&&V.readable?u(V?.readable)?V?.readable:X(V.readable):void 0,ee=V!=null&&V.writable?c(V?.writable)?V?.writable:X(V.writable):void 0;return q({readable:Y,writable:ee})}let K=V?.then;if(typeof K=="function"){let Y;return D(K,V,ee=>{ee!=null&&Y.push(ee),Y.push(null)},ee=>{E(Y,ee)}),Y=new U({objectMode:!0,writable:!1,read(){}})}throw new x(H,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function N(X){let{promise:V,resolve:H}=w(),K=new k,Y=K.signal;return{value:X((async function*(){for(;;){let ee=V;V=null;let{chunk:Q,done:$,cb:F}=await ee;if(t.nextTick(F),$)return;if(Y.aborted)throw new y(void 0,{cause:Y.reason});({promise:V,resolve:H}=w()),yield Q}})(),{signal:Y}),write(ee,Q,$){let F=H;H=null,F({chunk:ee,done:!1,cb:$})},final(ee){let Q=H;H=null,Q({done:!0,cb:ee})},destroy(ee,Q){K.abort(),Q(ee)}}}function q(X){let V=X.readable&&typeof X.readable.read!="function"?T.wrap(X.readable):X.readable,H=X.writable,K=!!i(V),Y=!!s(H),ee,Q,$,F,Z;function de(oe){let Se=F;F=null,Se?Se(oe):oe&&Z.destroy(oe)}return Z=new U({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(H!=null&&H.writableObjectMode),readable:K,writable:Y}),Y&&(m(H,oe=>{Y=!1,oe&&E(V,oe),de(oe)}),Z._write=function(oe,Se,ae){H.write(oe,Se)?ae():ee=ae},Z._final=function(oe){H.end(),Q=oe},H.on("drain",function(){if(ee){let oe=ee;ee=null,oe()}}),H.on("finish",function(){if(Q){let oe=Q;Q=null,oe()}})),K&&(m(V,oe=>{K=!1,oe&&E(V,oe),de(oe)}),V.on("readable",function(){if($){let oe=$;$=null,oe()}}),V.on("end",function(){Z.push(null)}),Z._read=function(){for(;;){let oe=V.read();if(oe===null){$=Z._read;return}if(!Z.push(oe))return}}),Z._destroy=function(oe,Se){!oe&&F!==null&&(oe=new y),$=null,ee=null,Q=null,F===null?Se(oe):(F=Se,E(H,oe),E(V,oe))},Z}}),Ys=$e((r,e)=>{Me(),Be(),Ne();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:s}=nr();e.exports=u;var a=Bg(),o=CT();s(u.prototype,a.prototype),s(u,a);{let g=i(o.prototype);for(let m=0;m<g.length;m++){let y=g[m];u.prototype[y]||(u.prototype[y]=o.prototype[y])}}function u(g){if(!(this instanceof u))return new u(g);a.call(this,g),o.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(u.prototype,{writable:{__proto__:null,...n(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(o.prototype,"writableLength")},writableFinished:{__proto__:null,...n(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var c;function h(){return c===void 0&&(c={}),c}u.fromWeb=function(g,m){return h().newStreamDuplexFromReadableWritablePair(g,m)},u.toWeb=function(g){return h().newReadableWritablePairFromDuplex(g)};var d;u.from=function(g){return d||(d=uG()),d(g,"body")}}),TN=$e((r,e)=>{Me(),Be(),Ne();var{ObjectSetPrototypeOf:t,Symbol:n}=nr();e.exports=u;var{ERR_METHOD_NOT_IMPLEMENTED:i}=yn().codes,s=Ys(),{getHighWaterMark:a}=Ng();t(u.prototype,s.prototype),t(u,s);var o=n("kCallback");function u(d){if(!(this instanceof u))return new u(d);let g=d?a(this,d,"readableHighWaterMark",!0):null;g===0&&(d={...d,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:d.writableHighWaterMark||0}),s.call(this,d),this._readableState.sync=!1,this[o]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",h)}function c(d){typeof this._flush=="function"&&!this.destroyed?this._flush((g,m)=>{if(g){d?d(g):this.destroy(g);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function h(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(d,g,m){throw new i("_transform()")},u.prototype._write=function(d,g,m){let y=this._readableState,x=this._writableState,b=y.length;this._transform(d,g,(E,S)=>{if(E){m(E);return}S!=null&&this.push(S),x.ended||b===y.length||y.length<y.highWaterMark?m():this[o]=m})},u.prototype._read=function(){if(this[o]){let d=this[o];this[o]=null,d()}}}),AN=$e((r,e)=>{Me(),Be(),Ne();var{ObjectSetPrototypeOf:t}=nr();e.exports=i;var n=TN();t(i.prototype,n.prototype),t(i,n);function i(s){if(!(this instanceof i))return new i(s);n.call(this,s)}i.prototype._transform=function(s,a,o){o(null,s)}}),PT=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayIsArray:n,Promise:i,SymbolAsyncIterator:s,SymbolDispose:a}=nr(),o=so(),{once:u}=Mn(),c=Iu(),h=Ys(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:x,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:E}=yn(),{validateFunction:S,validateAbortSignal:T}=_f(),{isIterable:I,isReadable:w,isReadableNodeStream:R,isNodeStream:_,isTransformStream:C,isWebStream:k,isReadableStream:D,isReadableFinished:U}=sa(),N=globalThis.AbortController||Qc().AbortController,q,X,V;function H(oe,Se,ae){let re=!1;oe.on("close",()=>{re=!0});let te=o(oe,{readable:Se,writable:ae},le=>{re=!le});return{destroy:le=>{re||(re=!0,c.destroyer(oe,le||new x("pipe")))},cleanup:te}}function K(oe){return S(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function Y(oe){if(I(oe))return oe;if(R(oe))return ee(oe);throw new g("val",["Readable","Iterable","AsyncIterable"],oe)}async function*ee(oe){X||(X=Bg()),yield*X.prototype[s].call(oe)}async function Q(oe,Se,ae,{end:re}){let te,le=null,ce=xe=>{if(xe&&(te=xe),le){let ie=le;le=null,ie()}},ne=()=>new i((xe,ie)=>{te?ie(te):le=()=>{te?ie(te):xe()}});Se.on("drain",ce);let Le=o(Se,{readable:!1},ce);try{Se.writableNeedDrain&&await ne();for await(let xe of oe)Se.write(xe)||await ne();re&&(Se.end(),await ne()),ae()}catch(xe){ae(te!==xe?d(te,xe):xe)}finally{Le(),Se.off("drain",ce)}}async function $(oe,Se,ae,{end:re}){C(Se)&&(Se=Se.writable);let te=Se.getWriter();try{for await(let le of oe)await te.ready,te.write(le).catch(()=>{});await te.ready,re&&await te.close(),ae()}catch(le){try{await te.abort(le),ae(le)}catch(ce){ae(ce)}}}function F(...oe){return Z(oe,u(K(oe)))}function Z(oe,Se,ae){if(oe.length===1&&n(oe[0])&&(oe=oe[0]),oe.length<2)throw new y("streams");let re=new N,te=re.signal,le=ae?.signal,ce=[];T(le,"options.signal");function ne(){Ce(new E)}V=V||Mn().addAbortListener;let Le;le&&(Le=V(le,ne));let xe,ie,se=[],ye=0;function Re(Ke){Ce(Ke,--ye===0)}function Ce(Ke,Ie){var lt;if(Ke&&(!xe||xe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(xe=Ke),!(!xe&&!Ie)){for(;se.length;)se.shift()(xe);(lt=Le)===null||lt===void 0||lt[a](),re.abort(),Ie&&(xe||ce.forEach(L=>L()),t.nextTick(Se,xe,ie))}}let je;for(let Ke=0;Ke<oe.length;Ke++){let Ie=oe[Ke],lt=Ke<oe.length-1,L=Ke>0,M=lt||ae?.end!==!1,z=Ke===oe.length-1;if(_(Ie)){let fe=function(ve){ve&&ve.name!=="AbortError"&&ve.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Re(ve)};if(M){let{destroy:ve,cleanup:Pe}=H(Ie,lt,L);se.push(ve),w(Ie)&&z&&ce.push(Pe)}Ie.on("error",fe),w(Ie)&&z&&ce.push(()=>{Ie.removeListener("error",fe)})}if(Ke===0)if(typeof Ie=="function"){if(je=Ie({signal:te}),!I(je))throw new m("Iterable, AsyncIterable or Stream","source",je)}else I(Ie)||R(Ie)||C(Ie)?je=Ie:je=h.from(Ie);else if(typeof Ie=="function"){if(C(je)){var pe;je=Y((pe=je)===null||pe===void 0?void 0:pe.readable)}else je=Y(je);if(je=Ie(je,{signal:te}),lt){if(!I(je,!0))throw new m("AsyncIterable",`transform[${Ke-1}]`,je)}else{var Ue;q||(q=AN());let fe=new q({objectMode:!0}),ve=(Ue=je)===null||Ue===void 0?void 0:Ue.then;if(typeof ve=="function")ye++,ve.call(je,me=>{ie=me,me!=null&&fe.write(me),M&&fe.end(),t.nextTick(Re)},me=>{fe.destroy(me),t.nextTick(Re,me)});else if(I(je,!0))ye++,Q(je,fe,Re,{end:M});else if(D(je)||C(je)){let me=je.readable||je;ye++,Q(me,fe,Re,{end:M})}else throw new m("AsyncIterable or Promise","destination",je);je=fe;let{destroy:Pe,cleanup:Ve}=H(je,!1,!0);se.push(Pe),z&&ce.push(Ve)}}else if(_(Ie)){if(R(je)){ye+=2;let fe=de(je,Ie,Re,{end:M});w(Ie)&&z&&ce.push(fe)}else if(C(je)||D(je)){let fe=je.readable||je;ye++,Q(fe,Ie,Re,{end:M})}else if(I(je))ye++,Q(je,Ie,Re,{end:M});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ie}else if(k(Ie)){if(R(je))ye++,$(Y(je),Ie,Re,{end:M});else if(D(je)||I(je))ye++,$(je,Ie,Re,{end:M});else if(C(je))ye++,$(je.readable,Ie,Re,{end:M});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ie}else je=h.from(Ie)}return(te!=null&&te.aborted||le!=null&&le.aborted)&&t.nextTick(ne),je}function de(oe,Se,ae,{end:re}){let te=!1;if(Se.on("close",()=>{te||ae(new b)}),oe.pipe(Se,{end:!1}),re){let le=function(){te=!0,Se.end()};U(oe)?t.nextTick(le):oe.once("end",le)}else ae();return o(oe,{readable:!0,writable:!1},le=>{let ce=oe._readableState;le&&le.code==="ERR_STREAM_PREMATURE_CLOSE"&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?oe.once("end",ae).once("error",ae):ae(le)}),o(Se,{readable:!1,writable:!0},ae)}e.exports={pipelineImpl:Z,pipeline:F}}),wN=$e((r,e)=>{Me(),Be(),Ne();var{pipeline:t}=PT(),n=Ys(),{destroyer:i}=Iu(),{isNodeStream:s,isReadable:a,isWritable:o,isWebStream:u,isTransformStream:c,isWritableStream:h,isReadableStream:d}=sa(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:y}}=yn(),x=so();e.exports=function(...b){if(b.length===0)throw new y("streams");if(b.length===1)return n.from(b[0]);let E=[...b];if(typeof b[0]=="function"&&(b[0]=n.from(b[0])),typeof b[b.length-1]=="function"){let N=b.length-1;b[N]=n.from(b[N])}for(let N=0;N<b.length;++N)if(!(!s(b[N])&&!u(b[N]))){if(N<b.length-1&&!(a(b[N])||d(b[N])||c(b[N])))throw new m(`streams[${N}]`,E[N],"must be readable");if(N>0&&!(o(b[N])||h(b[N])||c(b[N])))throw new m(`streams[${N}]`,E[N],"must be writable")}let S,T,I,w,R;function _(N){let q=w;w=null,q?q(N):N?R.destroy(N):!U&&!D&&R.destroy()}let C=b[0],k=t(b,_),D=!!(o(C)||h(C)||c(C)),U=!!(a(k)||d(k)||c(k));if(R=new n({writableObjectMode:!!(C!=null&&C.writableObjectMode),readableObjectMode:!!(k!=null&&k.readableObjectMode),writable:D,readable:U}),D){if(s(C))R._write=function(q,X,V){C.write(q,X)?V():S=V},R._final=function(q){C.end(),T=q},C.on("drain",function(){if(S){let q=S;S=null,q()}});else if(u(C)){let q=(c(C)?C.writable:C).getWriter();R._write=async function(X,V,H){try{await q.ready,q.write(X).catch(()=>{}),H()}catch(K){H(K)}},R._final=async function(X){try{await q.ready,q.close().catch(()=>{}),T=X}catch(V){X(V)}}}let N=c(k)?k.readable:k;x(N,()=>{if(T){let q=T;T=null,q()}})}if(U){if(s(k))k.on("readable",function(){if(I){let N=I;I=null,N()}}),k.on("end",function(){R.push(null)}),R._read=function(){for(;;){let N=k.read();if(N===null){I=R._read;return}if(!R.push(N))return}};else if(u(k)){let N=(c(k)?k.readable:k).getReader();R._read=async function(){for(;;)try{let{value:q,done:X}=await N.read();if(!R.push(q))return;if(X){R.push(null);return}}catch{return}}}}return R._destroy=function(N,q){!N&&w!==null&&(N=new g),I=null,S=null,T=null,w===null?q(N):(w=q,s(k)&&i(k,N))},R}}),cG=$e((r,e)=>{Me(),Be(),Ne();var t=globalThis.AbortController||Qc().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:o}=yn(),{validateAbortSignal:u,validateInteger:c,validateObject:h}=_f(),d=nr().Symbol("kWeak"),g=nr().Symbol("kResistStopPropagation"),{finished:m}=so(),y=wN(),{addAbortSignalNoValidate:x}=Mg(),{isWritable:b,isNodeStream:E}=sa(),{deprecate:S}=Mn(),{ArrayPrototypePush:T,Boolean:I,MathFloor:w,Number:R,NumberIsNaN:_,Promise:C,PromiseReject:k,PromiseResolve:D,PromisePrototypeThen:U,Symbol:N}=nr(),q=N("kEmpty"),X=N("kEof");function V(le,ce){if(ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),E(le)&&!b(le))throw new n("stream",le,"must be writable");let ne=y(this,le);return ce!=null&&ce.signal&&x(ce.signal,ne),ne}function H(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal");let ne=1;ce?.concurrency!=null&&(ne=w(ce.concurrency));let Le=ne-1;return ce?.highWaterMark!=null&&(Le=w(ce.highWaterMark)),c(ne,"options.concurrency",1),c(Le,"options.highWaterMark",0),Le+=ne,(async function*(){let xe=Mn().AbortSignalAny([ce?.signal].filter(I)),ie=this,se=[],ye={signal:xe},Re,Ce,je=!1,pe=0;function Ue(){je=!0,Ke()}function Ke(){pe-=1,Ie()}function Ie(){Ce&&!je&&pe<ne&&se.length<Le&&(Ce(),Ce=null)}async function lt(){try{for await(let L of ie){if(je)return;if(xe.aborted)throw new o;try{if(L=le(L,ye),L===q)continue;L=D(L)}catch(M){L=k(M)}pe+=1,U(L,Ke,Ue),se.push(L),Re&&(Re(),Re=null),!je&&(se.length>=Le||pe>=ne)&&await new C(M=>{Ce=M})}se.push(X)}catch(L){let M=k(L);U(M,Ke,Ue),se.push(M)}finally{je=!0,Re&&(Re(),Re=null)}}lt();try{for(;;){for(;se.length>0;){let L=await se[0];if(L===X)return;if(xe.aborted)throw new o;L!==q&&(yield L),se.shift(),Ie()}await new C(L=>{Re=L})}}finally{je=!0,Ce&&(Ce(),Ce=null)}}).call(this)}function K(le=void 0){return le!=null&&h(le,"options"),le?.signal!=null&&u(le.signal,"options.signal"),(async function*(){let ce=0;for await(let Le of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o({cause:le.signal.reason});yield[ce++,Le]}}).call(this)}async function Y(le,ce=void 0){for await(let ne of F.call(this,le,ce))return!0;return!1}async function ee(le,ce=void 0){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);return!await Y.call(this,async(...ne)=>!await le(...ne),ce)}async function Q(le,ce){for await(let ne of F.call(this,le,ce))return ne}async function $(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Le,xe){return await le(Le,xe),q}for await(let Le of H.call(this,ne,ce));}function F(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Le,xe){return await le(Le,xe)?Le:q}return H.call(this,ne,ce)}var Z=class extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function de(le,ce,ne){var Le;if(typeof le!="function")throw new i("reducer",["Function","AsyncFunction"],le);ne!=null&&h(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal");let xe=arguments.length>1;if(ne!=null&&(Le=ne.signal)!==null&&Le!==void 0&&Le.aborted){let Ce=new o(void 0,{cause:ne.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(Ce)),Ce}let ie=new t,se=ie.signal;if(ne!=null&&ne.signal){let Ce={once:!0,[d]:this,[g]:!0};ne.signal.addEventListener("abort",()=>ie.abort(),Ce)}let ye=!1;try{for await(let Ce of this){var Re;if(ye=!0,ne!=null&&(Re=ne.signal)!==null&&Re!==void 0&&Re.aborted)throw new o;xe?ce=await le(ce,Ce,{signal:se}):(ce=Ce,xe=!0)}if(!ye&&!xe)throw new Z}finally{ie.abort()}return ce}async function oe(le){le!=null&&h(le,"options"),le?.signal!=null&&u(le.signal,"options.signal");let ce=[];for await(let Le of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o(void 0,{cause:le.signal.reason});T(ce,Le)}return ce}function Se(le,ce){let ne=H.call(this,le,ce);return(async function*(){for await(let Le of ne)yield*Le}).call(this)}function ae(le){if(le=R(le),_(le))return 0;if(le<0)throw new a("number",">= 0",le);return le}function re(le,ce=void 0){return ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),le=ae(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let xe of this){var Le;if(ce!=null&&(Le=ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new o;le--<=0&&(yield xe)}}).call(this)}function te(le,ce=void 0){return ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),le=ae(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let xe of this){var Le;if(ce!=null&&(Le=ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new o;if(le-- >0&&(yield xe),le<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:S(K,"readable.asIndexedPairs will be removed in a future version."),drop:re,filter:F,flatMap:Se,map:H,take:te,compose:V},e.exports.promiseReturningOperators={every:ee,forEach:$,reduce:de,toArray:oe,some:Y,find:Q}}),_N=$e((r,e)=>{Me(),Be(),Ne();var{ArrayPrototypePop:t,Promise:n}=nr(),{isIterable:i,isNodeStream:s,isWebStream:a}=sa(),{pipelineImpl:o}=PT(),{finished:u}=so();IN();function c(...h){return new n((d,g)=>{let m,y,x=h[h.length-1];if(x&&typeof x=="object"&&!s(x)&&!i(x)&&!a(x)){let b=t(h);m=b.signal,y=b.end}o(h,(b,E)=>{b?g(b):d(E)},{signal:m,end:y})})}e.exports={finished:u,pipeline:c}}),IN=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:s}=nr(),{promisify:{custom:a}}=Mn(),{streamReturningOperators:o,promiseReturningOperators:u}=cG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=yn(),h=wN(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:g}=Ng(),{pipeline:m}=PT(),{destroyer:y}=Iu(),x=so(),b=_N(),E=sa(),S=e.exports=LT().Stream;S.isDestroyed=E.isDestroyed,S.isDisturbed=E.isDisturbed,S.isErrored=E.isErrored,S.isReadable=E.isReadable,S.isWritable=E.isWritable,S.Readable=Bg();for(let I of i(o)){let w=function(..._){if(new.target)throw c();return S.Readable.from(s(R,this,_))},R=o[I];n(w,"name",{__proto__:null,value:R.name}),n(w,"length",{__proto__:null,value:R.length}),n(S.Readable.prototype,I,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(let I of i(u)){let w=function(..._){if(new.target)throw c();return s(R,this,_)},R=u[I];n(w,"name",{__proto__:null,value:R.name}),n(w,"length",{__proto__:null,value:R.length}),n(S.Readable.prototype,I,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}S.Writable=CT(),S.Duplex=Ys(),S.Transform=TN(),S.PassThrough=AN(),S.pipeline=m;var{addAbortSignal:T}=Mg();S.addAbortSignal=T,S.finished=x,S.destroy=y,S.compose=h,S.setDefaultHighWaterMark=d,S.getDefaultHighWaterMark=g,n(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),n(m,a,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),n(x,a,{__proto__:null,enumerable:!0,get(){return b.finished}}),S.Stream=S,S._isUint8Array=function(I){return I instanceof Uint8Array},S._uint8ArrayToBuffer=function(I){return t.from(I.buffer,I.byteOffset,I.byteLength)}}),nl=$e((r,e)=>{Me(),Be(),Ne();var t=IN(),n=_N(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),fG=$e((r,e)=>{Me(),Be(),Ne(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),hG=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),n=Symbol.for("BufferList");function i(s){if(!(this instanceof i))return new i(s);i._init.call(this,s)}i._init=function(s){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},i.prototype._new=function(s){return new i(s)},i.prototype._offset=function(s){if(s===0)return[0,0];let a=0;for(let o=0;o<this._bufs.length;o++){let u=a+this._bufs[o].length;if(s<u||o===this._bufs.length-1)return[o,s-a];a=u}},i.prototype._reverseOffset=function(s){let a=s[0],o=s[1];for(let u=0;u<a;u++)o+=this._bufs[u].length;return o},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(s){if(s>this.length||s<0)return;let a=this._offset(s);return this._bufs[a[0]][a[1]]},i.prototype.slice=function(s,a){return typeof s=="number"&&s<0&&(s+=this.length),typeof a=="number"&&a<0&&(a+=this.length),this.copy(null,0,s,a)},i.prototype.copy=function(s,a,o,u){if((typeof o!="number"||o<0)&&(o=0),(typeof u!="number"||u>this.length)&&(u=this.length),o>=this.length||u<=0)return s||t.alloc(0);let c=!!s,h=this._offset(o),d=u-o,g=d,m=c&&a||0,y=h[1];if(o===0&&u===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let x=0;x<this._bufs.length;x++)this._bufs[x].copy(s,m),m+=this._bufs[x].length;return s}if(g<=this._bufs[h[0]].length-y)return c?this._bufs[h[0]].copy(s,a,y,y+g):this._bufs[h[0]].slice(y,y+g);c||(s=t.allocUnsafe(d));for(let x=h[0];x<this._bufs.length;x++){let b=this._bufs[x].length-y;if(g>b)this._bufs[x].copy(s,m,y),m+=b;else{this._bufs[x].copy(s,m,y,y+g),m+=b;break}g-=b,y&&(y=0)}return s.length>m?s.slice(0,m):s},i.prototype.shallowSlice=function(s,a){if(s=s||0,a=typeof a!="number"?this.length:a,s<0&&(s+=this.length),a<0&&(a+=this.length),s===a)return this._new();let o=this._offset(s),u=this._offset(a),c=this._bufs.slice(o[0],u[0]+1);return u[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,u[1]),o[1]!==0&&(c[0]=c[0].slice(o[1])),this._new(c)},i.prototype.toString=function(s,a,o){return this.slice(a,o).toString(s)},i.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},i.prototype.duplicate=function(){let s=this._new();for(let a=0;a<this._bufs.length;a++)s.append(this._bufs[a]);return s},i.prototype.append=function(s){return this._attach(s,i.prototype._appendBuffer)},i.prototype.prepend=function(s){return this._attach(s,i.prototype._prependBuffer,!0)},i.prototype._attach=function(s,a,o){if(s==null)return this;if(s.buffer)a.call(this,t.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s)){let[u,c]=o?[s.length-1,-1]:[0,1];for(let h=u;h>=0&&h<s.length;h+=c)this._attach(s[h],a,o)}else if(this._isBufferList(s)){let[u,c]=o?[s._bufs.length-1,-1]:[0,1];for(let h=u;h>=0&&h<s._bufs.length;h+=c)this._attach(s._bufs[h],a,o)}else typeof s=="number"&&(s=s.toString()),a.call(this,t.from(s));return this},i.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},i.prototype._prependBuffer=function(s){this._bufs.unshift(s),this.length+=s.length},i.prototype.indexOf=function(s,a,o){if(o===void 0&&typeof a=="string"&&(o=a,a=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=t.from([s]):typeof s=="string"?s=t.from(s,o):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=t.from(s.buffer,s.byteOffset,s.byteLength):t.isBuffer(s)||(s=t.from(s)),a=Number(a||0),isNaN(a)&&(a=0),a<0&&(a=this.length+a),a<0&&(a=0),s.length===0)return a>this.length?this.length:a;let u=this._offset(a),c=u[0],h=u[1];for(;c<this._bufs.length;c++){let d=this._bufs[c];for(;h<d.length;)if(d.length-h>=s.length){let g=d.indexOf(s,h);if(g!==-1)return this._reverseOffset([c,g]);h=d.length-s.length+1}else{let g=this._reverseOffset([c,h]);if(this._match(g,s))return g;h++}h=0}return-1},i.prototype._match=function(s,a){if(this.length-s<a.length)return!1;for(let o=0;o<a.length;o++)if(this.get(s+o)!==a[o])return!1;return!0},(function(){let s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let a in s)(function(o){s[o]===null?i.prototype[o]=function(u,c){return this.slice(u,u+c)[o](0,c)}:i.prototype[o]=function(u=0){return this.slice(u,u+s[o])[o](0)}})(a)})(),i.prototype._isBufferList=function(s){return s instanceof i||i.isBufferList(s)},i.isBufferList=function(s){return s!=null&&s[n]},e.exports=i}),dG=$e((r,e)=>{Me(),Be(),Ne();var t=nl().Duplex,n=fG(),i=hG();function s(a){if(!(this instanceof s))return new s(a);if(typeof a=="function"){this._callback=a;let o=(function(u){this._callback&&(this._callback(u),this._callback=null)}).bind(this);this.on("pipe",function(u){u.on("error",o)}),this.on("unpipe",function(u){u.removeListener("error",o)}),a=null}i._init.call(this,a),t.call(this)}n(s,t),Object.assign(s.prototype,i.prototype),s.prototype._new=function(a){return new s(a)},s.prototype._write=function(a,o,u){this._appendBuffer(a),typeof u=="function"&&u()},s.prototype._read=function(a){if(!this.length)return this.push(null);a=Math.min(a,this.length),this.push(this.slice(0,a)),this.consume(a)},s.prototype.end=function(a){t.prototype.end.call(this,a),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(a,o){this._bufs.length=0,this.length=0,o(a)},s.prototype._isBufferList=function(a){return a instanceof s||a instanceof i||s.isBufferList(a)},s.isBufferList=i.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=i}),pG=$e((r,e)=>{Me(),Be(),Ne();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),ON=$e((r,e)=>{Me(),Be(),Ne();var t=e.exports,{Buffer:n}=(jr(),Nt(Ur));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let s in t.requiredHeaderFlags){let a=t.requiredHeaderFlags[s];t.requiredHeaderFlagsErrors[s]="Invalid header flag bits, must be 0x"+a.toString(16)+" for "+t.types[s]+" packet"}t.codes={};for(let s in t.types){let a=t.types[s];t.codes[a]=s}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let s in t.properties){let a=t.properties[s];t.propertiesCodes[a]=s}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function i(s){return[0,1,2].map(a=>[0,1].map(o=>[0,1].map(u=>{let c=n.alloc(1);return c.writeUInt8(t.codes[s]<<t.CMD_SHIFT|(o?t.DUP_MASK:0)|a<<t.QOS_SHIFT|u,0,!0),c})))}t.PUBLISH_HEADER=i("publish"),t.SUBSCRIBE_HEADER=i("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=i("unsubscribe"),t.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(s=>n.from([s])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),gG=$e((r,e)=>{Me(),Be(),Ne();var t=1e3,n=t*60,i=n*60,s=i*24,a=s*7,o=s*365.25;e.exports=function(g,m){m=m||{};var y=typeof g;if(y==="string"&&g.length>0)return u(g);if(y==="number"&&isFinite(g))return m.long?h(g):c(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function u(g){if(g=String(g),!(g.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(m){var y=parseFloat(m[1]),x=(m[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"yrs":case"yr":case"y":return y*o;case"weeks":case"week":case"w":return y*a;case"days":case"day":case"d":return y*s;case"hours":case"hour":case"hrs":case"hr":case"h":return y*i;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(g){var m=Math.abs(g);return m>=s?Math.round(g/s)+"d":m>=i?Math.round(g/i)+"h":m>=n?Math.round(g/n)+"m":m>=t?Math.round(g/t)+"s":g+"ms"}function h(g){var m=Math.abs(g);return m>=s?d(g,m,s,"day"):m>=i?d(g,m,i,"hour"):m>=n?d(g,m,n,"minute"):m>=t?d(g,m,t,"second"):g+" ms"}function d(g,m,y,x){var b=m>=y*1.5;return Math.round(g/y)+" "+x+(b?"s":"")}}),mG=$e((r,e)=>{Me(),Be(),Ne();function t(n){s.debug=s,s.default=s,s.coerce=d,s.disable=c,s.enable=o,s.enabled=h,s.humanize=gG(),s.destroy=g,Object.keys(n).forEach(m=>{s[m]=n[m]}),s.names=[],s.skips=[],s.formatters={};function i(m){let y=0;for(let x=0;x<m.length;x++)y=(y<<5)-y+m.charCodeAt(x),y|=0;return s.colors[Math.abs(y)%s.colors.length]}s.selectColor=i;function s(m){let y,x=null,b,E;function S(...T){if(!S.enabled)return;let I=S,w=Number(new Date),R=w-(y||w);I.diff=R,I.prev=y,I.curr=w,y=w,T[0]=s.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let _=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(C,k)=>{if(C==="%%")return"%";_++;let D=s.formatters[k];if(typeof D=="function"){let U=T[_];C=D.call(I,U),T.splice(_,1),_--}return C}),s.formatArgs.call(I,T),(I.log||s.log).apply(I,T)}return S.namespace=m,S.useColors=s.useColors(),S.color=s.selectColor(m),S.extend=a,S.destroy=s.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(b!==s.namespaces&&(b=s.namespaces,E=s.enabled(m)),E),set:T=>{x=T}}),typeof s.init=="function"&&s.init(S),S}function a(m,y){let x=s(this.namespace+(typeof y>"u"?":":y)+m);return x.log=this.log,x}function o(m){s.save(m),s.namespaces=m,s.names=[],s.skips=[];let y=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let x of y)x[0]==="-"?s.skips.push(x.slice(1)):s.names.push(x)}function u(m,y){let x=0,b=0,E=-1,S=0;for(;x<m.length;)if(b<y.length&&(y[b]===m[x]||y[b]==="*"))y[b]==="*"?(E=b,S=x,b++):(x++,b++);else if(E!==-1)b=E+1,S++,x=S;else return!1;for(;b<y.length&&y[b]==="*";)b++;return b===y.length}function c(){let m=[...s.names,...s.skips.map(y=>"-"+y)].join(",");return s.enable(""),m}function h(m){for(let y of s.skips)if(u(m,y))return!1;for(let y of s.names)if(u(m,y))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}e.exports=t}),Xs=$e((r,e)=>{Me(),Be(),Ne(),r.formatArgs=n,r.save=i,r.load=s,r.useColors=t,r.storage=a(),r.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;u.splice(1,0,c,"color: inherit");let h=0,d=0;u[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(d=h))}),u.splice(d,0,c)}r.log=console.debug||console.log||(()=>{});function i(u){try{u?r.storage.setItem("debug",u):r.storage.removeItem("debug")}catch{}}function s(){let u;try{u=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!u&&typeof zt<"u"&&"env"in zt&&(u=zt.env.DEBUG),u}function a(){try{return localStorage}catch{}}e.exports=mG()(r);var{formatters:o}=e.exports;o.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),yG=$e((r,e)=>{Me(),Be(),Ne();var t=dG(),{EventEmitter:n}=(tl(),Nt(io)),i=pG(),s=ON(),a=Xs()("mqtt-packet:parser"),o=class fS extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof fS?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new fS().parser(c)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),a("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),h=c>>s.CMD_SHIFT;this.packet.cmd=s.types[h];let d=c&15,g=s.requiredHeaderFlags[h];return g!=null&&d!==g?this._emitError(new Error(s.requiredHeaderFlagsErrors[h])):(this.packet.retain=(c&s.RETAIN_MASK)!==0,this.packet.qos=c>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&s.DUP_MASK)!==0,a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),a("_parseLength %d",c.value),!!c}_parsePayload(){a("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return a("_parsePayload complete result: %s",c),c}_parseConnect(){a("_parseConnect");let c,h,d,g,m={},y=this.packet,x=this._parseString();if(x===null)return this._emitError(new Error("Cannot parse protocolId"));if(x!=="MQTT"&&x!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=x,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;let b=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(m.will)y.will={},y.will.retain=b,y.will.qos=E;else{if(b)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(y.properties=T)}let S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(y.clientId=S,a("_parseConnect: packet.clientId: %s",y.clientId),m.will){if(y.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(y.will.properties=T)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=c,a("_parseConnect: packet.will.topic: %s",y.will.topic),h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=h,a("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(m.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));y.username=g,a("_parseConnect: packet.username: %s",y.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));y.password=d}return this.settings=y,a("_parseConnect: complete"),y}_parseConnack(){a("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let h=this._list.readUInt8(this._pos++);if(h>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(h&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(c.properties=d)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}c.payload=this._list.slice(this._pos,c.length),a("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){a("_parseSubscribe");let c=this.packet,h,d,g,m,y,x,b;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(c.properties=E)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=d&s.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(x=(d>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(d>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));b={topic:h,qos:g},this.settings.protocolVersion===5?(b.nl=x,b.rap=y,b.rh=m):this.settings.bridgeMode&&(b.rh=0,b.rap=!0,b.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",b),c.subscriptions.push(b)}}}_parseSuback(){a("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!s.MQTT5_SUBACK_CODES[h])return this._emitError(new Error("Invalid suback code"))}else if(h>2&&h!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(h)}}}_parseUnsubscribe(){a("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let h=this._parseString();if(h===null)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",h),c.unsubscriptions.push(h)}}}_parseUnsuback(){a("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let h=this._parseProperties();for(Object.getOwnPropertyNames(h).length&&(c.properties=h),c.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}a("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}}return!0}_parseDisconnect(){let c=this.packet;if(a("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let h=this._parseProperties();return Object.getOwnPropertyNames(h).length&&(c.properties=h),a("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let h=this._parseNum(),d=h+this._pos;if(h===-1||d>this._list.length||d>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,d);return this._pos+=h,a("_parseString: result: %s",g),g}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),h=c+this._pos;if(c===-1||h>this._list.length||h>this.packet.length)return null;let d=this._list.slice(this._pos,h);return this._pos+=c,a("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){a("_parseVarByteNum");let h=4,d=0,g=1,m=0,y=!1,x,b=this._pos?this._pos:0;for(;d<h&&b+d<this._list.length;){if(x=this._list.readUInt8(b+d++),m+=g*(x&s.VARBYTEINT_MASK),g*=128,(x&s.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=d)break}return!y&&d===h&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=d),y?c?y={bytes:d,value:m}:y=m:y=!1,a("_parseVarByteNum: result: %o",y),y}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",c),c}_parseByType(c){switch(a("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");let c=this._parseVarByteNum(),h=this._pos+c,d={};for(;this._pos<h;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let m=s.propertiesCodes[g];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let y=this._parseByType(s.propertiesTypes[m]);if(d[m][y.name])if(Array.isArray(d[m][y.name]))d[m][y.name].push(y.value);else{let x=d[m][y.name];d[m][y.name]=[x],d[m][y.name].push(y.value)}else d[m][y.name]=y.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(s.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(s.propertiesTypes[m]))):d[m]=this._parseByType(s.propertiesTypes[m])}return d}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(c){a("_emitError",c),this.error=c,this.emit("error",c)}};e.exports=o}),vG=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),n=65536,i={},s=t.isBuffer(t.from([1,2]).subarray(0,1));function a(h){let d=t.allocUnsafe(2);return d.writeUInt8(h>>8,0),d.writeUInt8(h&255,1),d}function o(){for(let h=0;h<n;h++)i[h]=a(h)}function u(h){let d=0,g=0,m=t.allocUnsafe(4);do d=h%128|0,h=h/128|0,h>0&&(d=d|128),m.writeUInt8(d,g++);while(h>0&&g<4);return h>0&&(g=0),s?m.subarray(0,g):m.slice(0,g)}function c(h){let d=t.allocUnsafe(4);return d.writeUInt32BE(h,0),d}e.exports={cache:i,generateCache:o,generateNumber:a,genBufVariableByteInt:u,generate4ByteBuffer:c}}),bG=$e((r,e)=>{Me(),Be(),Ne(),typeof zt>"u"||!zt.version||zt.version.indexOf("v0.")===0||zt.version.indexOf("v1.")===0&&zt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=zt;function t(n,i,s,a){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,u,c;switch(o){case 0:case 1:return zt.nextTick(n);case 2:return zt.nextTick(function(){n.call(null,i)});case 3:return zt.nextTick(function(){n.call(null,i,s)});case 4:return zt.nextTick(function(){n.call(null,i,s,a)});default:for(u=new Array(o-1),c=0;c<u.length;)u[c++]=arguments[c];return zt.nextTick(function(){n.apply(null,u)})}}}),RN=$e((r,e)=>{Me(),Be(),Ne();var t=ON(),{Buffer:n}=(jr(),Nt(Ur)),i=n.allocUnsafe(0),s=n.from([0]),a=vG(),o=bG().nextTick,u=Xs()("mqtt-packet:writeToStream"),c=a.cache,h=a.generateNumber,d=a.generateCache,g=a.genBufVariableByteInt,m=a.generate4ByteBuffer,y=K,x=!0;function b(ae,re,te){switch(u("generate called"),re.cork&&(re.cork(),o(E,re)),x&&(x=!1,d()),u("generate: packet.cmd: %s",ae.cmd),ae.cmd){case"connect":return S(ae,re);case"connack":return T(ae,re,te);case"publish":return I(ae,re,te);case"puback":case"pubrec":case"pubrel":case"pubcomp":return w(ae,re,te);case"subscribe":return R(ae,re,te);case"suback":return _(ae,re,te);case"unsubscribe":return C(ae,re,te);case"unsuback":return k(ae,re,te);case"pingreq":case"pingresp":return D(ae,re);case"disconnect":return U(ae,re,te);case"auth":return N(ae,re,te);default:return re.destroy(new Error("Unknown command")),!1}}Object.defineProperty(b,"cacheNumbers",{get(){return y===K},set(ae){ae?((!c||Object.keys(c).length===0)&&(x=!0),y=K):(x=!1,y=Y)}});function E(ae){ae.uncork()}function S(ae,re,te){let le=ae||{},ce=le.protocolId||"MQTT",ne=le.protocolVersion||4,Le=le.will,xe=le.clean,ie=le.keepalive||0,se=le.clientId||"",ye=le.username,Re=le.password,Ce=le.properties;xe===void 0&&(xe=!0);let je=0;if(typeof ce!="string"&&!n.isBuffer(ce))return re.destroy(new Error("Invalid protocolId")),!1;if(je+=ce.length+2,ne!==3&&ne!==4&&ne!==5)return re.destroy(new Error("Invalid protocol version")),!1;if(je+=1,(typeof se=="string"||n.isBuffer(se))&&(se||ne>=4)&&(se||xe))je+=n.byteLength(se)+2;else{if(ne<4)return re.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(xe*1===0)return re.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof ie!="number"||ie<0||ie>65535||ie%1!==0)return re.destroy(new Error("Invalid keepalive")),!1;je+=2,je+=1;let pe,Ue;if(ne===5){if(pe=$(re,Ce),!pe)return!1;je+=pe.length}if(Le){if(typeof Le!="object")return re.destroy(new Error("Invalid will")),!1;if(!Le.topic||typeof Le.topic!="string")return re.destroy(new Error("Invalid will topic")),!1;if(je+=n.byteLength(Le.topic)+2,je+=2,Le.payload)if(Le.payload.length>=0)typeof Le.payload=="string"?je+=n.byteLength(Le.payload):je+=Le.payload.length;else return re.destroy(new Error("Invalid will payload")),!1;if(Ue={},ne===5){if(Ue=$(re,Le.properties),!Ue)return!1;je+=Ue.length}}let Ke=!1;if(ye!=null)if(Se(ye))Ke=!0,je+=n.byteLength(ye)+2;else return re.destroy(new Error("Invalid username")),!1;if(Re!=null){if(!Ke)return re.destroy(new Error("Username is required to use password")),!1;if(Se(Re))je+=oe(Re)+2;else return re.destroy(new Error("Invalid password")),!1}re.write(t.CONNECT_HEADER),X(re,je),Q(re,ce),le.bridgeMode&&(ne+=128),re.write(ne===131?t.VERSION131:ne===132?t.VERSION132:ne===4?t.VERSION4:ne===5?t.VERSION5:t.VERSION3);let Ie=0;return Ie|=ye!=null?t.USERNAME_MASK:0,Ie|=Re!=null?t.PASSWORD_MASK:0,Ie|=Le&&Le.retain?t.WILL_RETAIN_MASK:0,Ie|=Le&&Le.qos?Le.qos<<t.WILL_QOS_SHIFT:0,Ie|=Le?t.WILL_FLAG_MASK:0,Ie|=xe?t.CLEAN_SESSION_MASK:0,re.write(n.from([Ie])),y(re,ie),ne===5&&pe.write(),Q(re,se),Le&&(ne===5&&Ue.write(),V(re,Le.topic),Q(re,Le.payload)),ye!=null&&Q(re,ye),Re!=null&&Q(re,Re),!0}function T(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=le===5?ce.reasonCode:ce.returnCode,Le=ce.properties,xe=2;if(typeof ne!="number")return re.destroy(new Error("Invalid return code")),!1;let ie=null;if(le===5){if(ie=$(re,Le),!ie)return!1;xe+=ie.length}return re.write(t.CONNACK_HEADER),X(re,xe),re.write(ce.sessionPresent?t.SESSIONPRESENT_HEADER:s),re.write(n.from([ne])),ie?.write(),!0}function I(ae,re,te){u("publish: packet: %o",ae);let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.qos||0,Le=ce.retain?t.RETAIN_MASK:0,xe=ce.topic,ie=ce.payload||i,se=ce.messageId,ye=ce.properties,Re=0;if(typeof xe=="string")Re+=n.byteLength(xe)+2;else if(n.isBuffer(xe))Re+=xe.length+2;else return re.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(ie)?Re+=ie.length:Re+=n.byteLength(ie),ne&&typeof se!="number")return re.destroy(new Error("Invalid messageId")),!1;ne&&(Re+=2);let Ce=null;if(le===5){if(Ce=$(re,ye),!Ce)return!1;Re+=Ce.length}return re.write(t.PUBLISH_HEADER[ne][ce.dup?1:0][Le?1:0]),X(re,Re),y(re,oe(xe)),re.write(xe),ne>0&&y(re,se),Ce?.write(),u("publish: payload: %o",ie),re.write(ie)}function w(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.cmd||"puback",Le=ce.messageId,xe=ce.dup&&ne==="pubrel"?t.DUP_MASK:0,ie=0,se=ce.reasonCode,ye=ce.properties,Re=le===5?3:2;if(ne==="pubrel"&&(ie=1),typeof Le!="number")return re.destroy(new Error("Invalid messageId")),!1;let Ce=null;if(le===5&&typeof ye=="object"){if(Ce=F(re,ye,te,Re),!Ce)return!1;Re+=Ce.length}return re.write(t.ACKS[ne][ie][xe][0]),Re===3&&(Re+=se!==0?1:-1),X(re,Re),y(re,Le),le===5&&Re!==2&&re.write(n.from([se])),Ce!==null?Ce.write():Re===4&&re.write(n.from([0])),!0}function R(ae,re,te){u("subscribe: packet: ");let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.dup?t.DUP_MASK:0,Le=ce.messageId,xe=ce.subscriptions,ie=ce.properties,se=0;if(typeof Le!="number")return re.destroy(new Error("Invalid messageId")),!1;se+=2;let ye=null;if(le===5){if(ye=$(re,ie),!ye)return!1;se+=ye.length}if(typeof xe=="object"&&xe.length)for(let Ce=0;Ce<xe.length;Ce+=1){let je=xe[Ce].topic,pe=xe[Ce].qos;if(typeof je!="string")return re.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof pe!="number")return re.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(le===5){if(typeof(xe[Ce].nl||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(xe[Ce].rap||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Ue=xe[Ce].rh||0;if(typeof Ue!="number"||Ue>2)return re.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}se+=n.byteLength(je)+2+1}else return re.destroy(new Error("Invalid subscriptions")),!1;u("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),re.write(t.SUBSCRIBE_HEADER[1][ne?1:0][0]),X(re,se),y(re,Le),ye!==null&&ye.write();let Re=!0;for(let Ce of xe){let je=Ce.topic,pe=Ce.qos,Ue=+Ce.nl,Ke=+Ce.rap,Ie=Ce.rh,lt;V(re,je),lt=t.SUBSCRIBE_OPTIONS_QOS[pe],le===5&&(lt|=Ue?t.SUBSCRIBE_OPTIONS_NL:0,lt|=Ke?t.SUBSCRIBE_OPTIONS_RAP:0,lt|=Ie?t.SUBSCRIBE_OPTIONS_RH[Ie]:0),Re=re.write(n.from([lt]))}return Re}function _(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.granted,xe=ce.properties,ie=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(ie+=2,typeof Le=="object"&&Le.length)for(let ye=0;ye<Le.length;ye+=1){if(typeof Le[ye]!="number")return re.destroy(new Error("Invalid qos vector")),!1;ie+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let se=null;if(le===5){if(se=F(re,xe,te,ie),!se)return!1;ie+=se.length}return re.write(t.SUBACK_HEADER),X(re,ie),y(re,ne),se!==null&&se.write(),re.write(n.from(Le))}function C(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.dup?t.DUP_MASK:0,xe=ce.unsubscriptions,ie=ce.properties,se=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(se+=2,typeof xe=="object"&&xe.length)for(let Ce=0;Ce<xe.length;Ce+=1){if(typeof xe[Ce]!="string")return re.destroy(new Error("Invalid unsubscriptions")),!1;se+=n.byteLength(xe[Ce])+2}else return re.destroy(new Error("Invalid unsubscriptions")),!1;let ye=null;if(le===5){if(ye=$(re,ie),!ye)return!1;se+=ye.length}re.write(t.UNSUBSCRIBE_HEADER[1][Le?1:0][0]),X(re,se),y(re,ne),ye!==null&&ye.write();let Re=!0;for(let Ce=0;Ce<xe.length;Ce++)Re=V(re,xe[Ce]);return Re}function k(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.dup?t.DUP_MASK:0,xe=ce.granted,ie=ce.properties,se=ce.cmd,ye=0,Re=2;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(le===5)if(typeof xe=="object"&&xe.length)for(let je=0;je<xe.length;je+=1){if(typeof xe[je]!="number")return re.destroy(new Error("Invalid qos vector")),!1;Re+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let Ce=null;if(le===5){if(Ce=F(re,ie,te,Re),!Ce)return!1;Re+=Ce.length}return re.write(t.ACKS[se][ye][Le][0]),X(re,Re),y(re,ne),Ce!==null&&Ce.write(),le===5&&re.write(n.from(xe)),!0}function D(ae,re,te){return re.write(t.EMPTY[ae.cmd])}function U(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.reasonCode,Le=ce.properties,xe=le===5?1:0,ie=null;if(le===5){if(ie=F(re,Le,te,xe),!ie)return!1;xe+=ie.length}return re.write(n.from([t.codes.disconnect<<4])),X(re,xe),le===5&&re.write(n.from([ne])),ie!==null&&ie.write(),!0}function N(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.reasonCode,Le=ce.properties,xe=le===5?1:0;le!==5&&re.destroy(new Error("Invalid mqtt version for auth packet"));let ie=F(re,Le,te,xe);return ie?(xe+=ie.length,re.write(n.from([t.codes.auth<<4])),X(re,xe),re.write(n.from([ne])),ie!==null&&ie.write(),!0):!1}var q={};function X(ae,re){if(re>t.VARBYTEINT_MAX)return ae.destroy(new Error(`Invalid variable byte integer: ${re}`)),!1;let te=q[re];return te||(te=g(re),re<16384&&(q[re]=te)),u("writeVarByteInt: writing to stream: %o",te),ae.write(te)}function V(ae,re){let te=n.byteLength(re);return y(ae,te),u("writeString: %s",re),ae.write(re,"utf8")}function H(ae,re,te){V(ae,re),V(ae,te)}function K(ae,re){return u("writeNumberCached: number: %d",re),u("writeNumberCached: %o",c[re]),ae.write(c[re])}function Y(ae,re){let te=h(re);return u("writeNumberGenerated: %o",te),ae.write(te)}function ee(ae,re){let te=m(re);return u("write4ByteNumber: %o",te),ae.write(te)}function Q(ae,re){typeof re=="string"?V(ae,re):re?(y(ae,re.length),ae.write(re)):y(ae,0)}function $(ae,re){if(typeof re!="object"||re.length!=null)return{length:1,write(){de(ae,{},0)}};let te=0;function le(ce,ne){let Le=t.propertiesTypes[ce],xe=0;switch(Le){case"byte":{if(typeof ne!="boolean")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=2;break}case"int8":{if(typeof ne!="number"||ne<0||ne>255)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=2;break}case"binary":{if(ne&&ne===null)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=1+n.byteLength(ne)+2;break}case"int16":{if(typeof ne!="number"||ne<0||ne>65535)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=3;break}case"int32":{if(typeof ne!="number"||ne<0||ne>4294967295)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=5;break}case"var":{if(typeof ne!="number"||ne<0||ne>268435455)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=1+n.byteLength(g(ne));break}case"string":{if(typeof ne!="string")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=3+n.byteLength(ne.toString());break}case"pair":{if(typeof ne!="object")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;xe+=Object.getOwnPropertyNames(ne).reduce((ie,se)=>{let ye=ne[se];return Array.isArray(ye)?ie+=ye.reduce((Re,Ce)=>(Re+=3+n.byteLength(se.toString())+2+n.byteLength(Ce.toString()),Re),0):ie+=3+n.byteLength(se.toString())+2+n.byteLength(ne[se].toString()),ie},0);break}default:return ae.destroy(new Error(`Invalid property ${ce}: ${ne}`)),!1}return xe}if(re)for(let ce in re){let ne=0,Le=0,xe=re[ce];if(xe!==void 0){if(Array.isArray(xe))for(let ie=0;ie<xe.length;ie++){if(Le=le(ce,xe[ie]),!Le)return!1;ne+=Le}else{if(Le=le(ce,xe),!Le)return!1;ne=Le}if(!ne)return!1;te+=ne}}return{length:n.byteLength(g(te))+te,write(){de(ae,re,te)}}}function F(ae,re,te,le){let ce=["reasonString","userProperties"],ne=te&&te.properties&&te.properties.maximumPacketSize?te.properties.maximumPacketSize:0,Le=$(ae,re);if(ne)for(;le+Le.length>ne;){let xe=ce.shift();if(xe&&re[xe])delete re[xe],Le=$(ae,re);else return!1}return Le}function Z(ae,re,te){switch(t.propertiesTypes[re]){case"byte":{ae.write(n.from([t.properties[re]])),ae.write(n.from([+te]));break}case"int8":{ae.write(n.from([t.properties[re]])),ae.write(n.from([te]));break}case"binary":{ae.write(n.from([t.properties[re]])),Q(ae,te);break}case"int16":{ae.write(n.from([t.properties[re]])),y(ae,te);break}case"int32":{ae.write(n.from([t.properties[re]])),ee(ae,te);break}case"var":{ae.write(n.from([t.properties[re]])),X(ae,te);break}case"string":{ae.write(n.from([t.properties[re]])),V(ae,te);break}case"pair":{Object.getOwnPropertyNames(te).forEach(le=>{let ce=te[le];Array.isArray(ce)?ce.forEach(ne=>{ae.write(n.from([t.properties[re]])),H(ae,le.toString(),ne.toString())}):(ae.write(n.from([t.properties[re]])),H(ae,le.toString(),ce.toString()))});break}default:return ae.destroy(new Error(`Invalid property ${re} value: ${te}`)),!1}}function de(ae,re,te){X(ae,te);for(let le in re)if(Object.prototype.hasOwnProperty.call(re,le)&&re[le]!=null){let ce=re[le];if(Array.isArray(ce))for(let ne=0;ne<ce.length;ne++)Z(ae,le,ce[ne]);else Z(ae,le,ce)}}function oe(ae){return ae?ae instanceof n?ae.length:n.byteLength(ae):0}function Se(ae){return typeof ae=="string"||ae instanceof n}e.exports=b}),xG=$e((r,e)=>{Me(),Be(),Ne();var t=RN(),{EventEmitter:n}=(tl(),Nt(io)),{Buffer:i}=(jr(),Nt(Ur));function s(o,u){let c=new a;return t(o,c,u),c.concat()}var a=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0,u=new Array(this._array.length),c=this._array,h=0,d;for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?u[d]=c[d].length:u[d]=i.byteLength(c[d]),o+=u[d];let g=i.allocUnsafe(o);for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?(c[d].copy(g,h),h+=u[d]):(g.write(c[d],h),h+=u[d]);return g}destroy(o){o&&this.emit("error",o)}};e.exports=s}),SG=$e(r=>{Me(),Be(),Ne(),r.parser=yG().parser,r.generate=xG(),r.writeToStream=RN()}),EG=$e((r,e)=>{Me(),Be(),Ne(),e.exports=n;function t(s){return s instanceof Rp?Rp.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function n(s){if(s=s||{},s.circles)return i(s);let a=new Map;if(a.set(Date,d=>new Date(d)),a.set(Map,(d,g)=>new Map(u(Array.from(d),g))),a.set(Set,(d,g)=>new Set(u(Array.from(d),g))),s.constructorHandlers)for(let d of s.constructorHandlers)a.set(d[0],d[1]);let o=null;return s.proto?h:c;function u(d,g){let m=Object.keys(d),y=new Array(m.length);for(let x=0;x<m.length;x++){let b=m[x],E=d[b];typeof E!="object"||E===null?y[b]=E:E.constructor!==Object&&(o=a.get(E.constructor))?y[b]=o(E,g):ArrayBuffer.isView(E)?y[b]=t(E):y[b]=g(E)}return y}function c(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return u(d,c);if(d.constructor!==Object&&(o=a.get(d.constructor)))return o(d,c);let g={};for(let m in d){if(Object.hasOwnProperty.call(d,m)===!1)continue;let y=d[m];typeof y!="object"||y===null?g[m]=y:y.constructor!==Object&&(o=a.get(y.constructor))?g[m]=o(y,c):ArrayBuffer.isView(y)?g[m]=t(y):g[m]=c(y)}return g}function h(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return u(d,h);if(d.constructor!==Object&&(o=a.get(d.constructor)))return o(d,h);let g={};for(let m in d){let y=d[m];typeof y!="object"||y===null?g[m]=y:y.constructor!==Object&&(o=a.get(y.constructor))?g[m]=o(y,h):ArrayBuffer.isView(y)?g[m]=t(y):g[m]=h(y)}return g}}function i(s){let a=[],o=[],u=new Map;if(u.set(Date,m=>new Date(m)),u.set(Map,(m,y)=>new Map(h(Array.from(m),y))),u.set(Set,(m,y)=>new Set(h(Array.from(m),y))),s.constructorHandlers)for(let m of s.constructorHandlers)u.set(m[0],m[1]);let c=null;return s.proto?g:d;function h(m,y){let x=Object.keys(m),b=new Array(x.length);for(let E=0;E<x.length;E++){let S=x[E],T=m[S];if(typeof T!="object"||T===null)b[S]=T;else if(T.constructor!==Object&&(c=u.get(T.constructor)))b[S]=c(T,y);else if(ArrayBuffer.isView(T))b[S]=t(T);else{let I=a.indexOf(T);I!==-1?b[S]=o[I]:b[S]=y(T)}}return b}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return h(m,d);if(m.constructor!==Object&&(c=u.get(m.constructor)))return c(m,d);let y={};a.push(m),o.push(y);for(let x in m){if(Object.hasOwnProperty.call(m,x)===!1)continue;let b=m[x];if(typeof b!="object"||b===null)y[x]=b;else if(b.constructor!==Object&&(c=u.get(b.constructor)))y[x]=c(b,d);else if(ArrayBuffer.isView(b))y[x]=t(b);else{let E=a.indexOf(b);E!==-1?y[x]=o[E]:y[x]=d(b)}}return a.pop(),o.pop(),y}function g(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return h(m,g);if(m.constructor!==Object&&(c=u.get(m.constructor)))return c(m,g);let y={};a.push(m),o.push(y);for(let x in m){let b=m[x];if(typeof b!="object"||b===null)y[x]=b;else if(b.constructor!==Object&&(c=u.get(b.constructor)))y[x]=c(b,g);else if(ArrayBuffer.isView(b))y[x]=t(b);else{let E=a.indexOf(b);E!==-1?y[x]=o[E]:y[x]=g(b)}}return a.pop(),o.pop(),y}}}),TG=$e((r,e)=>{Me(),Be(),Ne(),e.exports=EG()()}),AG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let i=n.split("/");for(let s=0;s<i.length;s++)if(i[s]!=="+"){if(i[s]==="#")return s===i.length-1;if(i[s].indexOf("+")!==-1||i[s].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let i=0;i<n.length;i++)if(!e(n[i]))return n[i];return null}}),LN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=nl(),t={objectMode:!0},n={clean:!0},i=class{options;_inflights;constructor(s){this.options=s||{},this.options={...n,...s},this._inflights=new Map}put(s,a){return this._inflights.set(s.messageId,s),a&&a(),this}createStream(){let s=new e.Readable(t),a=[],o=!1,u=0;return this._inflights.forEach((c,h)=>{a.push(c)}),s._read=()=>{!o&&u<a.length?s.push(a[u++]):s.push(null)},s.destroy=c=>{if(!o)return o=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,a){let o=this._inflights.get(s.messageId);return o?(this._inflights.delete(s.messageId),a(null,o)):a&&a(new Error("missing packet")),this}get(s,a){let o=this._inflights.get(s.messageId);return o?a(null,o):a&&a(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}};r.default=i}),wG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,i,s)=>{n.log("handlePublish: packet %o",i),s=typeof s<"u"?s:n.noop;let a=i.topic.toString(),o=i.payload,{qos:u}=i,{messageId:c}=i,{options:h}=n;if(n.options.protocolVersion===5){let d;if(i.properties&&(d=i.properties.topicAlias),typeof d<"u")if(a.length===0)if(d>0&&d<=65535){let g=n.topicAliasRecv.getTopicByAlias(d);if(g)a=g,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",a,d);else{n.log("handlePublish :: unregistered topic alias. alias: %d",d),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(a,d))n.log("handlePublish :: registered topic: %s - alias: %d",a,d);else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",u),u){case 2:{h.customHandleAcks(a,o,i,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));g?n._sendPacket({cmd:"pubrec",messageId:c,reasonCode:g},s):n.incomingStore.put(i,()=>{n._sendPacket({cmd:"pubrec",messageId:c},s)})});break}case 1:{h.customHandleAcks(a,o,i,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for puback"));g||n.emit("message",a,o,i),n.handleMessage(i,m=>{if(m)return s&&s(m);n._sendPacket({cmd:"puback",messageId:c,reasonCode:g},s)})});break}case 0:n.emit("message",a,o,i),n.handleMessage(i,s);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),_G=$e((r,e)=>{e.exports={version:"5.14.1"}}),Ou=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithSubackPacket=r.ErrorWithReasonCode=void 0,r.applyMixin=n;var e=class CN extends Error{code;constructor(s,a){super(s),this.code=a,Object.setPrototypeOf(this,CN.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;var t=class PN extends Error{packet;constructor(s,a){super(s),this.packet=a,Object.setPrototypeOf(this,PN.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};r.ErrorWithSubackPacket=t;function n(i,s,a=!1){let o=[s];for(;;){let u=o[0],c=Object.getPrototypeOf(u);if(c?.prototype)o.unshift(c);else break}for(let u of o)for(let c of Object.getOwnPropertyNames(u.prototype))(a||c!=="constructor")&&Object.defineProperty(i.prototype,c,Object.getOwnPropertyDescriptor(u.prototype,c)??Object.create(null))}r.nextTick=typeof zt?.nextTick=="function"?zt.nextTick:i=>{setTimeout(i,0)},r.MQTTJS_VERSION=_G().version}),Ug=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=Ou();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,i)=>{let{messageId:s}=i,a=i.cmd,o=null,u=n.outgoing[s]?n.outgoing[s].cb:null,c=null;if(!u){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",a),a){case"pubcomp":case"puback":{let h=i.reasonCode;h&&h>0&&h!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[h]}`,h),n._removeOutgoingAndStoreMessage(s,()=>{u(c,i)})):n._removeOutgoingAndStoreMessage(s,u);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:s};let h=i.reasonCode;h&&h>0&&h!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[h]}`,h),n._removeOutgoingAndStoreMessage(s,()=>{u(c,i)})):n._sendPacket(o);break}case"suback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s);let h=i.granted;for(let d=0;d<h.length;d++){let g=h[d];if((g&128)!==0){c=new Error(`Subscribe error: ${r.ReasonCodes[g]}`),c.code=g;let m=n.messageIdToTopic[s];m&&m.forEach(y=>{delete n._resubscribeTopics[y]})}}delete n.messageIdToTopic[s],n._invokeStoreProcessingQueue(),u(c,i);break}case"unsuback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s),n._invokeStoreProcessingQueue(),u(null,i);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),IG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=Ou(),t=Ug(),n=(i,s)=>{let{options:a}=i,o=a.protocolVersion,u=o===5?s.reasonCode:s.returnCode;if(o!==5){let c=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,u);i.emit("error",c);return}i.handleAuth(s,(c,h)=>{if(c){i.emit("error",c);return}if(u===24)i.reconnecting=!1,i._sendPacket(h);else{let d=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[u]}`,u);i.emit("error",d)}})};r.default=n}),OG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof zt=="object"&&zt?zt:{},i=(m,y,x,b)=>{typeof n.emitWarning=="function"?n.emitWarning(m,y,x,b):console.error(`[${x}] ${y}: ${m}`)},s=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof s>"u"){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(x,b){this._onabort.push(b)}},s=class{constructor(){y()}signal=new a;abort(x){if(!this.signal.aborted){this.signal.reason=x,this.signal.aborted=!0;for(let b of this.signal._onabort)b(x);this.signal.onabort?.(x)}}};let m=n.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",y=()=>{m&&(m=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",y))}}var o=m=>!t.has(m),u=m=>m&&m===Math.floor(m)&&m>0&&isFinite(m),c=m=>u(m)?m<=Math.pow(2,8)?Uint8Array:m<=Math.pow(2,16)?Uint16Array:m<=Math.pow(2,32)?Uint32Array:m<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(m){super(m),this.fill(0)}},d=class Fc{heap;length;static#l=!1;static create(y){let x=c(y);if(!x)return[];Fc.#l=!0;let b=new Fc(y,x);return Fc.#l=!1,b}constructor(y,x){if(!Fc.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new x(y),this.length=0}push(y){this.heap[this.length++]=y}pop(){return this.heap[--this.length]}},g=class DN{#l;#f;#g;#m;#L;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#u;#h;#o;#s;#v;#a;#b;#x;#d;#S;#_;#c;static unsafeExposeInternals(y){return{starts:y.#x,ttls:y.#d,sizes:y.#b,keyMap:y.#n,keyList:y.#r,valList:y.#e,next:y.#u,prev:y.#h,get head(){return y.#o},get tail(){return y.#s},free:y.#v,isBackgroundFetch:x=>y.#t(x),backgroundFetch:(x,b,E,S)=>y.#k(x,b,E,S),moveToTail:x=>y.#R(x),indexes:x=>y.#E(x),rindexes:x=>y.#T(x),isStale:x=>y.#p(x)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#L}get memoMethod(){return this.#C}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(y){let{max:x=0,ttl:b,ttlResolution:E=1,ttlAutopurge:S,updateAgeOnGet:T,updateAgeOnHas:I,allowStale:w,dispose:R,disposeAfter:_,noDisposeOnSet:C,noUpdateTTL:k,maxSize:D=0,maxEntrySize:U=0,sizeCalculation:N,fetchMethod:q,memoMethod:X,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:H,allowStaleOnFetchRejection:K,allowStaleOnFetchAbort:Y,ignoreFetchAbort:ee}=y;if(x!==0&&!u(x))throw new TypeError("max option must be a nonnegative integer");let Q=x?c(x):Array;if(!Q)throw new Error("invalid max value: "+x);if(this.#l=x,this.#f=D,this.maxEntrySize=U||this.#f,this.sizeCalculation=N,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(X!==void 0&&typeof X!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#C=X,q!==void 0&&typeof q!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=q,this.#_=!!q,this.#n=new Map,this.#r=new Array(x).fill(void 0),this.#e=new Array(x).fill(void 0),this.#u=new Q(x),this.#h=new Q(x),this.#o=0,this.#s=0,this.#v=d.create(x),this.#i=0,this.#y=0,typeof R=="function"&&(this.#g=R),typeof _=="function"?(this.#m=_,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#S=!!this.#g,this.#c=!!this.#m,this.noDisposeOnSet=!!C,this.noUpdateTTL=!!k,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!K,this.allowStaleOnFetchAbort=!!Y,this.ignoreFetchAbort=!!ee,this.maxEntrySize!==0){if(this.#f!==0&&!u(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!w,this.noDeleteOnStaleGet=!!H,this.updateAgeOnGet=!!T,this.updateAgeOnHas=!!I,this.ttlResolution=u(E)||E===0?E:1,this.ttlAutopurge=!!S,this.ttl=b||0,this.ttl){if(!u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let $="LRU_CACHE_UNBOUNDED";o($)&&(t.add($),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",$,DN))}}getRemainingTTL(y){return this.#n.has(y)?1/0:0}#M(){let y=new h(this.#l),x=new h(this.#l);this.#d=y,this.#x=x,this.#N=(S,T,I=e.now())=>{if(x[S]=T!==0?I:0,y[S]=T,T!==0&&this.ttlAutopurge){let w=setTimeout(()=>{this.#p(S)&&this.#A(this.#r[S],"expire")},T+1);w.unref&&w.unref()}},this.#I=S=>{x[S]=y[S]!==0?e.now():0},this.#w=(S,T)=>{if(y[T]){let I=y[T],w=x[T];if(!I||!w)return;S.ttl=I,S.start=w,S.now=b||E();let R=S.now-w;S.remainingTTL=I-R}};let b=0,E=()=>{let S=e.now();if(this.ttlResolution>0){b=S;let T=setTimeout(()=>b=0,this.ttlResolution);T.unref&&T.unref()}return S};this.getRemainingTTL=S=>{let T=this.#n.get(S);if(T===void 0)return 0;let I=y[T],w=x[T];if(!I||!w)return 1/0;let R=(b||E())-w;return I-R},this.#p=S=>{let T=x[S],I=y[S];return!!I&&!!T&&(b||E())-T>I}}#I=()=>{};#w=()=>{};#N=()=>{};#p=()=>!1;#$(){let y=new h(this.#l);this.#y=0,this.#b=y,this.#O=x=>{this.#y-=y[x],y[x]=0},this.#B=(x,b,E,S)=>{if(this.#t(b))return 0;if(!u(E))if(S){if(typeof S!="function")throw new TypeError("sizeCalculation must be a function");if(E=S(b,x),!u(E))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return E},this.#P=(x,b,E)=>{if(y[x]=b,this.#f){let S=this.#f-y[x];for(;this.#y>S;)this.#D(!0)}this.#y+=y[x],E&&(E.entrySize=b,E.totalCalculatedSize=this.#y)}}#O=y=>{};#P=(y,x,b)=>{};#B=(y,x,b,E)=>{if(b||E)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:y=this.allowStale}={}){if(this.#i)for(let x=this.#s;!(!this.#U(x)||((y||!this.#p(x))&&(yield x),x===this.#o));)x=this.#h[x]}*#T({allowStale:y=this.allowStale}={}){if(this.#i)for(let x=this.#o;!(!this.#U(x)||((y||!this.#p(x))&&(yield x),x===this.#s));)x=this.#u[x]}#U(y){return y!==void 0&&this.#n.get(this.#r[y])===y}*entries(){for(let y of this.#E())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*rentries(){for(let y of this.#T())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*keys(){for(let y of this.#E()){let x=this.#r[y];x!==void 0&&!this.#t(this.#e[y])&&(yield x)}}*rkeys(){for(let y of this.#T()){let x=this.#r[y];x!==void 0&&!this.#t(this.#e[y])&&(yield x)}}*values(){for(let y of this.#E())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}*rvalues(){for(let y of this.#T())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(y,x={}){for(let b of this.#E()){let E=this.#e[b],S=this.#t(E)?E.__staleWhileFetching:E;if(S!==void 0&&y(S,this.#r[b],this))return this.get(this.#r[b],x)}}forEach(y,x=this){for(let b of this.#E()){let E=this.#e[b],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(x,S,this.#r[b],this)}}rforEach(y,x=this){for(let b of this.#T()){let E=this.#e[b],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(x,S,this.#r[b],this)}}purgeStale(){let y=!1;for(let x of this.#T({allowStale:!0}))this.#p(x)&&(this.#A(this.#r[x],"expire"),y=!0);return y}info(y){let x=this.#n.get(y);if(x===void 0)return;let b=this.#e[x],E=this.#t(b)?b.__staleWhileFetching:b;if(E===void 0)return;let S={value:E};if(this.#d&&this.#x){let T=this.#d[x],I=this.#x[x];if(T&&I){let w=T-(e.now()-I);S.ttl=w,S.start=Date.now()}}return this.#b&&(S.size=this.#b[x]),S}dump(){let y=[];for(let x of this.#E({allowStale:!0})){let b=this.#r[x],E=this.#e[x],S=this.#t(E)?E.__staleWhileFetching:E;if(S===void 0||b===void 0)continue;let T={value:S};if(this.#d&&this.#x){T.ttl=this.#d[x];let I=e.now()-this.#x[x];T.start=Math.floor(Date.now()-I)}this.#b&&(T.size=this.#b[x]),y.unshift([b,T])}return y}load(y){this.clear();for(let[x,b]of y){if(b.start){let E=Date.now()-b.start;b.start=e.now()-E}this.set(x,b.value,b)}}set(y,x,b={}){if(x===void 0)return this.delete(y),this;let{ttl:E=this.ttl,start:S,noDisposeOnSet:T=this.noDisposeOnSet,sizeCalculation:I=this.sizeCalculation,status:w}=b,{noUpdateTTL:R=this.noUpdateTTL}=b,_=this.#B(y,x,b.size||0,I);if(this.maxEntrySize&&_>this.maxEntrySize)return w&&(w.set="miss",w.maxEntrySizeExceeded=!0),this.#A(y,"set"),this;let C=this.#i===0?void 0:this.#n.get(y);if(C===void 0)C=this.#i===0?this.#s:this.#v.length!==0?this.#v.pop():this.#i===this.#l?this.#D(!1):this.#i,this.#r[C]=y,this.#e[C]=x,this.#n.set(y,C),this.#u[this.#s]=C,this.#h[C]=this.#s,this.#s=C,this.#i++,this.#P(C,_,w),w&&(w.set="add"),R=!1;else{this.#R(C);let k=this.#e[C];if(x!==k){if(this.#_&&this.#t(k)){k.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:D}=k;D!==void 0&&!T&&(this.#S&&this.#g?.(D,y,"set"),this.#c&&this.#a?.push([D,y,"set"]))}else T||(this.#S&&this.#g?.(k,y,"set"),this.#c&&this.#a?.push([k,y,"set"]));if(this.#O(C),this.#P(C,_,w),this.#e[C]=x,w){w.set="replace";let D=k&&this.#t(k)?k.__staleWhileFetching:k;D!==void 0&&(w.oldValue=D)}}else w&&(w.set="update")}if(E!==0&&!this.#d&&this.#M(),this.#d&&(R||this.#N(C,E,S),w&&this.#w(w,C)),!T&&this.#c&&this.#a){let k=this.#a,D;for(;D=k?.shift();)this.#m?.(...D)}return this}pop(){try{for(;this.#i;){let y=this.#e[this.#o];if(this.#D(!0),this.#t(y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(this.#c&&this.#a){let y=this.#a,x;for(;x=y?.shift();)this.#m?.(...x)}}}#D(y){let x=this.#o,b=this.#r[x],E=this.#e[x];return this.#_&&this.#t(E)?E.__abortController.abort(new Error("evicted")):(this.#S||this.#c)&&(this.#S&&this.#g?.(E,b,"evict"),this.#c&&this.#a?.push([E,b,"evict"])),this.#O(x),y&&(this.#r[x]=void 0,this.#e[x]=void 0,this.#v.push(x)),this.#i===1?(this.#o=this.#s=0,this.#v.length=0):this.#o=this.#u[x],this.#n.delete(b),this.#i--,x}has(y,x={}){let{updateAgeOnHas:b=this.updateAgeOnHas,status:E}=x,S=this.#n.get(y);if(S!==void 0){let T=this.#e[S];if(this.#t(T)&&T.__staleWhileFetching===void 0)return!1;if(this.#p(S))E&&(E.has="stale",this.#w(E,S));else return b&&this.#I(S),E&&(E.has="hit",this.#w(E,S)),!0}else E&&(E.has="miss");return!1}peek(y,x={}){let{allowStale:b=this.allowStale}=x,E=this.#n.get(y);if(E===void 0||!b&&this.#p(E))return;let S=this.#e[E];return this.#t(S)?S.__staleWhileFetching:S}#k(y,x,b,E){let S=x===void 0?void 0:this.#e[x];if(this.#t(S))return S;let T=new s,{signal:I}=b;I?.addEventListener("abort",()=>T.abort(I.reason),{signal:T.signal});let w={signal:T.signal,options:b,context:E},R=(N,q=!1)=>{let{aborted:X}=T.signal,V=b.ignoreFetchAbort&&N!==void 0;if(b.status&&(X&&!q?(b.status.fetchAborted=!0,b.status.fetchError=T.signal.reason,V&&(b.status.fetchAbortIgnored=!0)):b.status.fetchResolved=!0),X&&!V&&!q)return C(T.signal.reason);let H=D;return this.#e[x]===D&&(N===void 0?H.__staleWhileFetching?this.#e[x]=H.__staleWhileFetching:this.#A(y,"fetch"):(b.status&&(b.status.fetchUpdated=!0),this.set(y,N,w.options))),N},_=N=>(b.status&&(b.status.fetchRejected=!0,b.status.fetchError=N),C(N)),C=N=>{let{aborted:q}=T.signal,X=q&&b.allowStaleOnFetchAbort,V=X||b.allowStaleOnFetchRejection,H=V||b.noDeleteOnFetchRejection,K=D;if(this.#e[x]===D&&(!H||K.__staleWhileFetching===void 0?this.#A(y,"fetch"):X||(this.#e[x]=K.__staleWhileFetching)),V)return b.status&&K.__staleWhileFetching!==void 0&&(b.status.returnedStale=!0),K.__staleWhileFetching;if(K.__returned===K)throw N},k=(N,q)=>{let X=this.#L?.(y,S,w);X&&X instanceof Promise&&X.then(V=>N(V===void 0?void 0:V),q),T.signal.addEventListener("abort",()=>{(!b.ignoreFetchAbort||b.allowStaleOnFetchAbort)&&(N(void 0),b.allowStaleOnFetchAbort&&(N=V=>R(V,!0)))})};b.status&&(b.status.fetchDispatched=!0);let D=new Promise(k).then(R,_),U=Object.assign(D,{__abortController:T,__staleWhileFetching:S,__returned:void 0});return x===void 0?(this.set(y,U,{...w.options,status:void 0}),x=this.#n.get(y)):this.#e[x]=U,U}#t(y){if(!this.#_)return!1;let x=y;return!!x&&x instanceof Promise&&x.hasOwnProperty("__staleWhileFetching")&&x.__abortController instanceof s}async fetch(y,x={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,ttl:T=this.ttl,noDisposeOnSet:I=this.noDisposeOnSet,size:w=0,sizeCalculation:R=this.sizeCalculation,noUpdateTTL:_=this.noUpdateTTL,noDeleteOnFetchRejection:C=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:k=this.allowStaleOnFetchRejection,ignoreFetchAbort:D=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:N,forceRefresh:q=!1,status:X,signal:V}=x;if(!this.#_)return X&&(X.fetch="get"),this.get(y,{allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:S,status:X});let H={allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:S,ttl:T,noDisposeOnSet:I,size:w,sizeCalculation:R,noUpdateTTL:_,noDeleteOnFetchRejection:C,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:U,ignoreFetchAbort:D,status:X,signal:V},K=this.#n.get(y);if(K===void 0){X&&(X.fetch="miss");let Y=this.#k(y,K,H,N);return Y.__returned=Y}else{let Y=this.#e[K];if(this.#t(Y)){let F=b&&Y.__staleWhileFetching!==void 0;return X&&(X.fetch="inflight",F&&(X.returnedStale=!0)),F?Y.__staleWhileFetching:Y.__returned=Y}let ee=this.#p(K);if(!q&&!ee)return X&&(X.fetch="hit"),this.#R(K),E&&this.#I(K),X&&this.#w(X,K),Y;let Q=this.#k(y,K,H,N),$=Q.__staleWhileFetching!==void 0&&b;return X&&(X.fetch=ee?"stale":"refresh",$&&ee&&(X.returnedStale=!0)),$?Q.__staleWhileFetching:Q.__returned=Q}}async forceFetch(y,x={}){let b=await this.fetch(y,x);if(b===void 0)throw new Error("fetch() returned undefined");return b}memo(y,x={}){let b=this.#C;if(!b)throw new Error("no memoMethod provided to constructor");let{context:E,forceRefresh:S,...T}=x,I=this.get(y,T);if(!S&&I!==void 0)return I;let w=b(y,I,{options:T,context:E});return this.set(y,w,T),w}get(y,x={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,status:T}=x,I=this.#n.get(y);if(I!==void 0){let w=this.#e[I],R=this.#t(w);return T&&this.#w(T,I),this.#p(I)?(T&&(T.get="stale"),R?(T&&b&&w.__staleWhileFetching!==void 0&&(T.returnedStale=!0),b?w.__staleWhileFetching:void 0):(S||this.#A(y,"expire"),T&&b&&(T.returnedStale=!0),b?w:void 0)):(T&&(T.get="hit"),R?w.__staleWhileFetching:(this.#R(I),E&&this.#I(I),w))}else T&&(T.get="miss")}#j(y,x){this.#h[x]=y,this.#u[y]=x}#R(y){y!==this.#s&&(y===this.#o?this.#o=this.#u[y]:this.#j(this.#h[y],this.#u[y]),this.#j(this.#s,y),this.#s=y)}delete(y){return this.#A(y,"delete")}#A(y,x){let b=!1;if(this.#i!==0){let E=this.#n.get(y);if(E!==void 0)if(b=!0,this.#i===1)this.#F(x);else{this.#O(E);let S=this.#e[E];if(this.#t(S)?S.__abortController.abort(new Error("deleted")):(this.#S||this.#c)&&(this.#S&&this.#g?.(S,y,x),this.#c&&this.#a?.push([S,y,x])),this.#n.delete(y),this.#r[E]=void 0,this.#e[E]=void 0,E===this.#s)this.#s=this.#h[E];else if(E===this.#o)this.#o=this.#u[E];else{let T=this.#h[E];this.#u[T]=this.#u[E];let I=this.#u[E];this.#h[I]=this.#h[E]}this.#i--,this.#v.push(E)}}if(this.#c&&this.#a?.length){let E=this.#a,S;for(;S=E?.shift();)this.#m?.(...S)}return b}clear(){return this.#F("delete")}#F(y){for(let x of this.#T({allowStale:!0})){let b=this.#e[x];if(this.#t(b))b.__abortController.abort(new Error("deleted"));else{let E=this.#r[x];this.#S&&this.#g?.(b,E,y),this.#c&&this.#a?.push([b,E,y])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#x&&(this.#d.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#o=0,this.#s=0,this.#v.length=0,this.#y=0,this.#i=0,this.#c&&this.#a){let x=this.#a,b;for(;b=x?.shift();)this.#m?.(...b)}}};r.LRUCache=g}),aa=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(i=0){this.iteratorType=i}equals(i){return this.o===i.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),RG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[]){super(),this.S=[];let s=this;i.forEach(function(a){s.push(a)})}clear(){this.i=0,this.S=[]}push(i){return this.S.push(i),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),LG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[]){super(),this.j=0,this.q=[];let s=this;i.forEach(function(a){s.push(a)})}clear(){this.q=[],this.i=this.j=0}push(i){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let a=this.i;for(let o=0;o<a;++o)this.q[o]=this.q[this.j+o];this.j=0,this.q[this.i]=i}else this.q[this.j+this.i]=i;return++this.i}pop(){if(this.i===0)return;let i=this.q[this.j++];return this.i-=1,i}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),CG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[],s=function(o,u){return o>u?-1:o<u?1:0},a=!0){if(super(),this.v=s,Array.isArray(i))this.C=a?[...i]:i;else{this.C=[];let u=this;i.forEach(function(c){u.C.push(c)})}this.i=this.C.length;let o=this.i>>1;for(let u=this.i-1>>1;u>=0;--u)this.k(u,o)}m(i){let s=this.C[i];for(;i>0;){let a=i-1>>1,o=this.C[a];if(this.v(o,s)<=0)break;this.C[i]=o,i=a}this.C[i]=s}k(i,s){let a=this.C[i];for(;i<s;){let o=i<<1|1,u=o+1,c=this.C[o];if(u<this.i&&this.v(c,this.C[u])>0&&(o=u,c=this.C[u]),this.v(c,a)>=0)break;this.C[i]=c,i=o}this.C[i]=a}clear(){this.i=0,this.C.length=0}push(i){this.C.push(i),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let i=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),i}top(){return this.C[0]}find(i){return this.C.indexOf(i)>=0}remove(i){let s=this.C.indexOf(i);return s<0?!1:(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(i){let s=this.C.indexOf(i);return s<0?!1:(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),DT=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Container{},n=t;r.default=n}),oa=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),kN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=aa(),t=oa(),n=class extends e.ContainerIterator{constructor(i,s){super(s),this.o=i,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(i){this.container.setElementByPos(this.o,i)}};r.RandomIterator=n}),PG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(DT()),t=kN();function n(o){return o&&o.t?o:{default:o}}var i=class MN extends t.RandomIterator{constructor(u,c,h){super(u,h),this.container=c}copy(){return new MN(this.o,this.container,this.iteratorType)}},s=class extends e.default{constructor(o=[],u=!0){if(super(),Array.isArray(o))this.J=u?[...o]:o,this.i=o.length;else{this.J=[];let c=this;o.forEach(function(h){c.pushBack(h)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J[o]}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J.splice(o,1),this.i-=1,this.i}eraseElementByValue(o){let u=0;for(let c=0;c<this.i;++c)this.J[c]!==o&&(this.J[u++]=this.J[c]);return this.i=this.J.length=u,this.i}eraseElementByIterator(o){let u=o.o;return o=o.next(),this.eraseElementByPos(u),o}pushBack(o){return this.J.push(o),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(o,u){if(o<0||o>this.i-1)throw new RangeError;this.J[o]=u}insert(o,u,c=1){if(o<0||o>this.i)throw new RangeError;return this.J.splice(o,0,...new Array(c).fill(u)),this.i+=c,this.i}find(o){for(let u=0;u<this.i;++u)if(this.J[u]===o)return new i(u,this);return this.end()}reverse(){this.J.reverse()}unique(){let o=1;for(let u=1;u<this.i;++u)this.J[u]!==this.J[u-1]&&(this.J[o++]=this.J[u]);return this.i=this.J.length=o,this.i}sort(o){this.J.sort(o)}forEach(o){for(let u=0;u<this.i;++u)o(this.J[u],u,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},a=s;r.default=a}),DG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(DT()),t=aa(),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class NN extends t.ContainerIterator{constructor(c,h,d,g){super(g),this.o=c,this.h=h,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=c}copy(){return new NN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;u.forEach(function(h){c.pushBack(h)})}V(u){let{L:c,B:h}=u;c.B=h,h.L=c,u===this.p&&(this.p=h),u===this._&&(this._=c),this.i-=1}G(u,c){let h=c.B,d={l:u,L:c,B:h};c.B=d,h.L=d,c===this.h&&(this.p=d),h===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return c.l}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return this.V(c),this.i}eraseElementByValue(u){let c=this.p;for(;c!==this.h;)c.l===u&&this.V(c),c=c.B;return this.i}eraseElementByIterator(u){let c=u.o;return c===this.h&&(0,n.throwIteratorAccessError)(),u=u.next(),this.V(c),u}pushBack(u){return this.G(u,this._),this.i}popBack(){if(this.i===0)return;let u=this._.l;return this.V(this._),u}pushFront(u){return this.G(u,this.h),this.i}popFront(){if(this.i===0)return;let u=this.p.l;return this.V(this.p),u}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;let h=this.p;for(;u--;)h=h.B;h.l=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;if(h<=0)return this.i;if(u===0)for(;h--;)this.pushFront(c);else if(u===this.i)for(;h--;)this.pushBack(c);else{let d=this.p;for(let m=1;m<u;++m)d=d.B;let g=d.B;for(this.i+=h;h--;)d.B={l:c,L:d},d.B.L=d,d=d.B;d.B=g,g.L=d}return this.i}find(u){let c=this.p;for(;c!==this.h;){if(c.l===u)return new s(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let u=this.p,c=this._,h=0;for(;h<<1<this.i;){let d=u.l;u.l=c.l,c.l=d,u=u.B,c=c.L,h+=1}}unique(){if(this.i<=1)return this.i;let u=this.p;for(;u!==this.h;){let c=u;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;u.B=c.B,u.B.L=u,u=u.B}return this.i}sort(u){if(this.i<=1)return;let c=[];this.forEach(function(d){c.push(d)}),c.sort(u);let h=this.p;c.forEach(function(d){h.l=d,h=h.B})}merge(u){let c=this;if(this.i===0)u.forEach(function(h){c.pushBack(h)});else{let h=this.p;u.forEach(function(d){for(;h!==c.h&&h.l<=d;)h=h.B;c.G(d,h.L)})}return this.i}forEach(u){let c=this.p,h=0;for(;c!==this.h;)u(c.l,h++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let u=this.p;for(;u!==this.h;)yield u.l,u=u.B}).bind(this)()}},o=a;r.default=o}),kG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(DT()),t=kN();function n(o){return o&&o.t?o:{default:o}}var i=class BN extends t.RandomIterator{constructor(u,c,h){super(u,h),this.container=c}copy(){return new BN(this.o,this.container,this.iteratorType)}},s=class extends e.default{constructor(o=[],u=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size;if(typeof o.size=="function")return o.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=u,this.P=Math.max(Math.ceil(c/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let h=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(h>>1),this.D=this.N=this.F-c%this.F>>1;let d=this;o.forEach(function(g){d.pushBack(g)})}T(){let o=[],u=Math.max(this.P>>1,1);for(let c=0;c<u;++c)o[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)o[o.length]=this.A[c];for(let c=0;c<this.R;++c)o[o.length]=this.A[c];o[o.length]=[...this.A[this.R]],this.j=u,this.R=o.length-1;for(let c=0;c<u;++c)o[o.length]=new Array(this.F);this.A=o,this.P=o.length}O(o){let u=this.D+o+1,c=u%this.F,h=c-1,d=this.j+(u-c)/this.F;return c===0&&(d-=1),d%=this.P,h<0&&(h+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:h}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(o){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=o,this.i}popBack(){if(this.i===0)return;let o=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,o}pushFront(o){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=o,this.i}popFront(){if(this.i===0)return;let o=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,o}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:u,curNodePointerIndex:c}=this.O(o);return this.A[u][c]}setElementByPos(o,u){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(o);this.A[c][h]=u}insert(o,u,c=1){if(o<0||o>this.i)throw new RangeError;if(o===0)for(;c--;)this.pushFront(u);else if(o===this.i)for(;c--;)this.pushBack(u);else{let h=[];for(let d=o;d<this.i;++d)h.push(this.getElementByPos(d));this.cut(o-1);for(let d=0;d<c;++d)this.pushBack(u);for(let d=0;d<h.length;++d)this.pushBack(h[d])}return this.i}cut(o){if(o<0)return this.clear(),0;let{curNodeBucketIndex:u,curNodePointerIndex:c}=this.O(o);return this.R=u,this.N=c,this.i=o+1,this.i}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;if(o===0)this.popFront();else if(o===this.i-1)this.popBack();else{let u=[];for(let h=o+1;h<this.i;++h)u.push(this.getElementByPos(h));this.cut(o),this.popBack();let c=this;u.forEach(function(h){c.pushBack(h)})}return this.i}eraseElementByValue(o){if(this.i===0)return 0;let u=[];for(let h=0;h<this.i;++h){let d=this.getElementByPos(h);d!==o&&u.push(d)}let c=u.length;for(let h=0;h<c;++h)this.setElementByPos(h,u[h]);return this.cut(c-1)}eraseElementByIterator(o){let u=o.o;return this.eraseElementByPos(u),o=o.next(),o}find(o){for(let u=0;u<this.i;++u)if(this.getElementByPos(u)===o)return new i(u,this);return this.end()}reverse(){let o=0,u=this.i-1;for(;o<u;){let c=this.getElementByPos(o);this.setElementByPos(o,this.getElementByPos(u)),this.setElementByPos(u,c),o+=1,u-=1}}unique(){if(this.i<=1)return this.i;let o=1,u=this.getElementByPos(0);for(let c=1;c<this.i;++c){let h=this.getElementByPos(c);h!==u&&(u=h,this.setElementByPos(o++,h))}for(;this.i>o;)this.popBack();return this.i}sort(o){let u=[];for(let c=0;c<this.i;++c)u.push(this.getElementByPos(c));u.sort(o);for(let c=0;c<this.i;++c)this.setElementByPos(c,u[c])}shrinkToFit(){if(this.i===0)return;let o=[];this.forEach(function(u){o.push(u)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let u=0;u<this.P;++u)this.A.push(new Array(this.F));for(let u=0;u<o.length;++u)this.pushBack(o[u])}forEach(o){for(let u=0;u<this.i;++u)o(this.getElementByPos(u),u,this)}[Symbol.iterator](){return(function*(){for(let o=0;o<this.i;++o)yield this.getElementByPos(o)}).bind(this)()}},a=s;r.default=a}),MG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,i){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=i}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let i=n.tt;for(;i.U===n;)n=i,i=n.tt;n=i}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let i=n.tt;for(;i.W===n;)n=i,i=n.tt;return n.W!==i?i:n}}te(){let n=this.tt,i=this.W,s=i.U;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.U=this,this.tt=i,this.W=s,s&&(s.tt=this),i}se(){let n=this.tt,i=this.U,s=i.W;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.W=this,this.tt=i,this.U=s,s&&(s.tt=this),i}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),UN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=MG(),t=aa(),n=oa(),i=class extends t.Container{constructor(a=function(u,c){return u<c?-1:u>c?1:0},o=!1){super(),this.Y=void 0,this.v=a,o?(this.re=e.TreeNodeEnableIndex,this.M=function(u,c,h){let d=this.ne(u,c,h);if(d){let g=d.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let m=this.he(d);if(m){let{parentNode:y,grandParent:x,curNode:b}=m;y.ie(),x.ie(),b.ie()}}return this.i},this.V=function(u){let c=this.fe(u);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=e.TreeNode,this.M=function(u,c,h){let d=this.ne(u,c,h);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(a,o){let u=this.h;for(;a;){let c=this.v(a.u,o);if(c<0)a=a.W;else if(c>0)u=a,a=a.U;else return a}return u}Z(a,o){let u=this.h;for(;a;)this.v(a.u,o)<=0?a=a.W:(u=a,a=a.U);return u}$(a,o){let u=this.h;for(;a;){let c=this.v(a.u,o);if(c<0)u=a,a=a.W;else if(c>0)a=a.U;else return a}return u}rr(a,o){let u=this.h;for(;a;)this.v(a.u,o)<0?(u=a,a=a.W):a=a.U;return u}ue(a){for(;;){let o=a.tt;if(o===this.h)return;if(a.ee===1){a.ee=0;return}if(a===o.U){let u=o.W;if(u.ee===1)u.ee=0,o.ee=1,o===this.Y?this.Y=o.te():o.te();else if(u.W&&u.W.ee===1){u.ee=o.ee,o.ee=0,u.W.ee=0,o===this.Y?this.Y=o.te():o.te();return}else u.U&&u.U.ee===1?(u.ee=1,u.U.ee=0,u.se()):(u.ee=1,a=o)}else{let u=o.U;if(u.ee===1)u.ee=0,o.ee=1,o===this.Y?this.Y=o.se():o.se();else if(u.U&&u.U.ee===1){u.ee=o.ee,o.ee=0,u.U.ee=0,o===this.Y?this.Y=o.se():o.se();return}else u.W&&u.W.ee===1?(u.ee=1,u.W.ee=0,u.te()):(u.ee=1,a=o)}}}fe(a){if(this.i===1)return this.clear(),this.h;let o=a;for(;o.U||o.W;){if(o.W)for(o=o.W;o.U;)o=o.U;else o=o.U;[a.u,o.u]=[o.u,a.u],[a.l,o.l]=[o.l,a.l],a=o}this.h.U===o?this.h.U=o.tt:this.h.W===o&&(this.h.W=o.tt),this.ue(o);let u=o.tt;return o===u.U?u.U=void 0:u.W=void 0,this.i-=1,this.Y.ee=0,u}oe(a,o){return a===void 0?!1:this.oe(a.U,o)||o(a)?!0:this.oe(a.W,o)}he(a){for(;;){let o=a.tt;if(o.ee===0)return;let u=o.tt;if(o===u.U){let c=u.W;if(c&&c.ee===1){if(c.ee=o.ee=0,u===this.Y)return;u.ee=1,a=u;continue}else if(a===o.W){if(a.ee=0,a.U&&(a.U.tt=o),a.W&&(a.W.tt=u),o.W=a.U,u.U=a.W,a.U=o,a.W=u,u===this.Y)this.Y=a,this.h.tt=a;else{let h=u.tt;h.U===u?h.U=a:h.W=a}return a.tt=u.tt,o.tt=a,u.tt=a,u.ee=1,{parentNode:o,grandParent:u,curNode:a}}else o.ee=0,u===this.Y?this.Y=u.se():u.se(),u.ee=1}else{let c=u.U;if(c&&c.ee===1){if(c.ee=o.ee=0,u===this.Y)return;u.ee=1,a=u;continue}else if(a===o.U){if(a.ee=0,a.U&&(a.U.tt=u),a.W&&(a.W.tt=o),u.W=a.U,o.U=a.W,a.U=u,a.W=o,u===this.Y)this.Y=a,this.h.tt=a;else{let h=u.tt;h.U===u?h.U=a:h.W=a}return a.tt=u.tt,o.tt=a,u.tt=a,u.ee=1,{parentNode:o,grandParent:u,curNode:a}}else o.ee=0,u===this.Y?this.Y=u.te():u.te(),u.ee=1}return}}ne(a,o,u){if(this.Y===void 0){this.i+=1,this.Y=new this.re(a,o),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,h=this.h.U,d=this.v(h.u,a);if(d===0){h.l=o;return}else if(d>0)h.U=new this.re(a,o),h.U.tt=h,c=h.U,this.h.U=c;else{let g=this.h.W,m=this.v(g.u,a);if(m===0){g.l=o;return}else if(m<0)g.W=new this.re(a,o),g.W.tt=g,c=g.W,this.h.W=c;else{if(u!==void 0){let y=u.o;if(y!==this.h){let x=this.v(y.u,a);if(x===0){y.l=o;return}else if(x>0){let b=y.L(),E=this.v(b.u,a);if(E===0){b.l=o;return}else E<0&&(c=new this.re(a,o),b.W===void 0?(b.W=c,c.tt=b):(y.U=c,c.tt=y))}}}if(c===void 0)for(c=this.Y;;){let y=this.v(c.u,a);if(y>0){if(c.U===void 0){c.U=new this.re(a,o),c.U.tt=c,c=c.U;break}c=c.U}else if(y<0){if(c.W===void 0){c.W=new this.re(a,o),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=o;return}}}}return this.i+=1,c}I(a,o){for(;a;){let u=this.v(a.u,o);if(u<0)a=a.W;else if(u>0)a=a.U;else return a}return a||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(a,o){let u=a.o;if(u===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return u.u=o,!0;if(u===this.h.U)return this.v(u.B().u,o)>0?(u.u=o,!0):!1;if(u===this.h.W)return this.v(u.L().u,o)<0?(u.u=o,!0):!1;let c=u.L().u;if(this.v(c,o)>=0)return!1;let h=u.B().u;return this.v(h,o)<=0?!1:(u.u=o,!0)}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o=0,u=this;return this.oe(this.Y,function(c){return a===o?(u.V(c),!0):(o+=1,!1)}),this.i}eraseElementByKey(a){if(this.i===0)return!1;let o=this.I(this.Y,a);return o===this.h?!1:(this.V(o),!0)}eraseElementByIterator(a){let o=a.o;o===this.h&&(0,n.throwIteratorAccessError)();let u=o.W===void 0;return a.iteratorType===0?u&&a.next():(!u||o.U===void 0)&&a.next(),this.V(o),a}forEach(a){let o=0;for(let u of this)a(u,o++,this)}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o,u=0;for(let c of this){if(u===a){o=c;break}u+=1}return o}getHeight(){if(this.i===0)return 0;let a=function(o){return o?Math.max(a(o.U),a(o.W))+1:0};return a(this.Y)}},s=i;r.default=s}),jN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=oa(),n=class extends e.ContainerIterator{constructor(s,a,o){super(o),this.o=s,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,a=this.h.tt;if(s===this.h)return a?a.rt-1:0;let o=0;for(s.U&&(o+=s.U.rt);s!==a;){let u=s.tt;s===u.W&&(o+=1,u.U&&(o+=u.U.rt)),s=u}return o}},i=n;r.default=i}),NG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(UN()),t=i(jN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class FN extends t.default{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new FN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[],c,h){super(c,h);let d=this;u.forEach(function(g){d.insert(g)})}*K(u){u!==void 0&&(yield*this.K(u.U),yield u.u,yield*this.K(u.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(u,c){return this.M(u,void 0,c)}find(u){let c=this.I(this.Y,u);return new s(c,this.h,this)}lowerBound(u){let c=this.X(this.Y,u);return new s(c,this.h,this)}upperBound(u){let c=this.Z(this.Y,u);return new s(c,this.h,this)}reverseLowerBound(u){let c=this.$(this.Y,u);return new s(c,this.h,this)}reverseUpperBound(u){let c=this.rr(this.Y,u);return new s(c,this.h,this)}union(u){let c=this;return u.forEach(function(h){c.insert(h)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=a;r.default=o}),BG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(UN()),t=i(jN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class $N extends t.default{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(h,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new $N(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[],c,h){super(c,h);let d=this;u.forEach(function(g){d.setElement(g[0],g[1])})}*K(u){u!==void 0&&(yield*this.K(u.U),yield[u.u,u.l],yield*this.K(u.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;let u=this.h.U;return[u.u,u.l]}back(){if(this.i===0)return;let u=this.h.W;return[u.u,u.l]}lowerBound(u){let c=this.X(this.Y,u);return new s(c,this.h,this)}upperBound(u){let c=this.Z(this.Y,u);return new s(c,this.h,this)}reverseLowerBound(u){let c=this.$(this.Y,u);return new s(c,this.h,this)}reverseUpperBound(u){let c=this.rr(this.Y,u);return new s(c,this.h,this)}setElement(u,c,h){return this.M(u,c,h)}find(u){let c=this.I(this.Y,u);return new s(c,this.h,this)}getElementByKey(u){return this.I(this.Y,u).l}union(u){let c=this;return u.forEach(function(h){c.setElement(h[0],h[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=a;r.default=o}),GN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),zN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=aa(),t=i(GN()),n=oa();function i(o){return o&&o.t?o:{default:o}}var s=class extends e.ContainerIterator{constructor(o,u,c){super(c),this.o=o,this.h=u,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=s;var a=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(o){let{L:u,B:c}=o;u.B=c,c.L=u,o===this.p&&(this.p=c),o===this._&&(this._=u),this.i-=1}M(o,u,c){c===void 0&&(c=(0,t.default)(o));let h;if(c){let d=o[this.HASH_TAG];if(d!==void 0)return this.H[d].l=u,this.i;Object.defineProperty(o,this.HASH_TAG,{value:this.H.length,configurable:!0}),h={u:o,l:u,L:this._,B:this.h},this.H.push(h)}else{let d=this.g[o];if(d)return d.l=u,this.i;h={u:o,l:u,L:this._,B:this.h},this.g[o]=h}return this.i===0?(this.p=h,this.h.B=h):this._.B=h,this._=h,this.h.L=h,++this.i}I(o,u){if(u===void 0&&(u=(0,t.default)(o)),u){let c=o[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[o]||this.h}clear(){let o=this.HASH_TAG;this.H.forEach(function(u){delete u.u[o]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(o,u){let c;if(u===void 0&&(u=(0,t.default)(o)),u){let h=o[this.HASH_TAG];if(h===void 0)return!1;delete o[this.HASH_TAG],c=this.H[h],delete this.H[h]}else{if(c=this.g[o],c===void 0)return!1;delete this.g[o]}return this.V(c),!0}eraseElementByIterator(o){let u=o.o;return u===this.h&&(0,n.throwIteratorAccessError)(),this.V(u),o.next()}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let u=this.p;for(;o--;)u=u.B;return this.V(u),this.i}};r.HashContainer=a}),UG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=zN(),t=oa(),n=class HN extends e.HashContainerIterator{constructor(o,u,c,h){super(o,u,h),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new HN(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(a=[]){super();let o=this;a.forEach(function(u){o.insert(u)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(a,o){return this.M(a,void 0,o)}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o=this.p;for(;a--;)o=o.B;return o.u}find(a,o){let u=this.I(a,o);return new n(u,this.h,this)}forEach(a){let o=0,u=this.p;for(;u!==this.h;)a(u.u,o++,this),u=u.B}[Symbol.iterator](){return(function*(){let a=this.p;for(;a!==this.h;)yield a.u,a=a.B}).bind(this)()}},s=i;r.default=s}),jG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=zN(),t=i(GN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class KN extends e.HashContainerIterator{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(h,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new KN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.HashContainer{constructor(u=[]){super();let c=this;u.forEach(function(h){c.setElement(h[0],h[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(u,c,h){return this.M(u,c,h)}getElementByKey(u,c){if(c===void 0&&(c=(0,t.default)(u)),c){let d=u[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let h=this.g[u];return h?h.l:void 0}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return[c.u,c.l]}find(u,c){let h=this.I(u,c);return new s(h,this.h,this)}forEach(u){let c=0,h=this.p;for(;h!==this.h;)u([h.u,h.l],c++,this),h=h.B}[Symbol.iterator](){return(function*(){let u=this.p;for(;u!==this.h;)yield[u.u,u.l],u=u.B}).bind(this)()}},o=a;r.default=o}),FG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return i.default}});var e=d(RG()),t=d(LG()),n=d(CG()),i=d(PG()),s=d(DG()),a=d(kG()),o=d(NG()),u=d(BG()),c=d(UG()),h=d(jG());function d(g){return g&&g.t?g:{default:g}}}),$G=$e((r,e)=>{Me(),Be(),Ne();var t=FG().OrderedSet,n=Xs()("number-allocator:trace"),i=Xs()("number-allocator:error");function s(o,u){this.low=o,this.high=u}s.prototype.equals=function(o){return this.low===o.low&&this.high===o.high},s.prototype.compare=function(o){return this.low<o.low&&this.high<o.low?-1:o.low<this.low&&o.high<this.low?1:0};function a(o,u){if(!(this instanceof a))return new a(o,u);this.min=o,this.max=u,this.ss=new t([],(c,h)=>c.compare(h)),n("Create"),this.clear()}a.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},a.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let o=this.ss.begin(),u=o.pointer.low,c=o.pointer.high,h=u;return h+1<=c?this.ss.updateKeyByIterator(o,new s(u+1,c)):this.ss.eraseElementByPos(0),n("alloc():"+h),h},a.prototype.use=function(o){let u=new s(o,o),c=this.ss.lowerBound(u);if(!c.equals(this.ss.end())){let h=c.pointer.low,d=c.pointer.high;return c.pointer.equals(u)?(this.ss.eraseElementByIterator(c),n("use():"+o),!0):h>o?!1:h===o?(this.ss.updateKeyByIterator(c,new s(h+1,d)),n("use():"+o),!0):d===o?(this.ss.updateKeyByIterator(c,new s(h,d-1)),n("use():"+o),!0):(this.ss.updateKeyByIterator(c,new s(o+1,d)),this.ss.insert(new s(h,o-1)),n("use():"+o),!0)}return n("use():failed"),!1},a.prototype.free=function(o){if(o<this.min||o>this.max){i("free():"+o+" is out of range");return}let u=new s(o,o),c=this.ss.upperBound(u);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(u);return}c.pre();let h=c.pointer.high;c.pointer.high+1===o?this.ss.updateKeyByIterator(c,new s(h,o)):this.ss.insert(u)}else if(c.equals(this.ss.begin()))if(o+1===c.pointer.low){let h=c.pointer.high;this.ss.updateKeyByIterator(c,new s(o,h))}else this.ss.insert(u);else{let h=c.pointer.low,d=c.pointer.high;c.pre();let g=c.pointer.low;c.pointer.high+1===o?o+1===h?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new s(g,d))):this.ss.updateKeyByIterator(c,new s(g,o)):o+1===h?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new s(o,d))):this.ss.insert(u)}n("free():"+o)},a.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(let o of this.ss)console.log(o)},e.exports=a}),qN=$e((r,e)=>{Me(),Be(),Ne();var t=$G();e.exports.NumberAllocator=t}),GG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=OG(),t=qN(),n=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(i){i>0&&(this.aliasToTopic=new e.LRUCache({max:i}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,i),this.max=i,this.length=0)}put(i,s){if(s===0||s>this.max)return!1;let a=this.aliasToTopic.get(s);return a&&delete this.topicToAlias[a],this.aliasToTopic.set(s,i),this.topicToAlias[i]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(i){return this.aliasToTopic.get(i)}getAliasByTopic(i){let s=this.topicToAlias[i];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),zG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0});var t=Ug(),n=e(GG()),i=Ou(),s=(a,o)=>{a.log("_handleConnack");let{options:u}=a,c=u.protocolVersion===5?o.reasonCode:o.returnCode;if(clearTimeout(a.connackTimer),delete a.topicAliasSend,o.properties){if(o.properties.topicAliasMaximum){if(o.properties.topicAliasMaximum>65535){a.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}o.properties.topicAliasMaximum>0&&(a.topicAliasSend=new n.default(o.properties.topicAliasMaximum))}o.properties.serverKeepAlive&&u.keepalive&&(u.keepalive=o.properties.serverKeepAlive),o.properties.maximumPacketSize&&(u.properties||(u.properties={}),u.properties.maximumPacketSize=o.properties.maximumPacketSize)}if(c===0)a.reconnecting=!1,a._onConnect(o);else if(c>0){let h=new i.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);a.emit("error",h),a.options.reconnectOnConnackError&&a._cleanUp(!0)}};r.default=s}),HG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,i)=>{t.log("handling pubrel packet");let s=typeof i<"u"?i:t.noop,{messageId:a}=n,o={cmd:"pubcomp",messageId:a};t.incomingStore.get(n,(u,c)=>{u?t._sendPacket(o,s):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,h=>{if(h)return s(h);t.incomingStore.del(c,t.noop),t._sendPacket(o,s)}))})};r.default=e}),KG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(wG()),n=e(IG()),i=e(zG()),s=e(Ug()),a=e(HG()),o=(u,c,h)=>{let{options:d}=u;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<c.length)return u.emit("error",new Error(`exceeding packets size ${c.cmd}`)),u.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),u;switch(u.log("_handlePacket :: emitting packetreceive"),u.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(u,c,h);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":u.reschedulePing(),(0,s.default)(u,c),h();break;case"pubrel":u.reschedulePing(),(0,a.default)(u,c,h);break;case"connack":(0,i.default)(u,c),h();break;case"auth":u.reschedulePing(),(0,n.default)(u,c),h();break;case"pingresp":u.log("_handlePacket :: received pingresp"),u.reschedulePing(!0),h();break;case"disconnect":u.emit("disconnect",c),h();break;default:u.log("_handlePacket :: unknown command"),h();break}};r.default=o}),VN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),qG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),VG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((tl(),Nt(io))),n=Ou(),i=class{};r.TypedEventEmitter=i,(0,n.applyMixin)(i,t.default)}),jg=$e((r,e)=>{Me(),Be(),Ne();function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),WG=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default;function n(i,s){if(t(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var o=a.call(i,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),YG=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default,n=WG();function i(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),XG=$e((r,e)=>{Me(),Be(),Ne();var t=YG();function n(i,s,a){return(s=t(s))in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),QG=$e((r,e)=>{Me(),Be(),Ne();function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ZG=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,o,u,c,h=[],d=!0,g=!1;try{if(u=(s=s.call(n)).next,i===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=u.call(s)).done)&&(h.push(a.value),h.length!==i);d=!0);}catch(m){g=!0,o=m}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(g)throw o}}return h}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),JG=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){(i==null||i>n.length)&&(i=n.length);for(var s=0,a=Array(i);s<i;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ez=$e((r,e)=>{Me(),Be(),Ne();var t=JG();function n(i,s){if(i){if(typeof i=="string")return t(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(i,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),tz=$e((r,e)=>{Me(),Be(),Ne();function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),rz=$e((r,e)=>{Me(),Be(),Ne();var t=QG(),n=ZG(),i=ez(),s=tz();function a(o,u){return t(o)||n(o,u)||i(o,u)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}),WN=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))})(r,function(t){var n=function(m){return function(y){var x=m(y);return y.add(x),x}},i=function(m){return function(y,x){return m.set(y,x),x}},s=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,a=536870912,o=a*2,u=function(m,y){return function(x){var b=y.get(x),E=b===void 0?x.size:b<o?b+1:0;if(!x.has(E))return m(x,E);if(x.size<a){for(;x.has(E);)E=Math.floor(Math.random()*o);return m(x,E)}if(x.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;x.has(E);)E=Math.floor(Math.random()*s);return m(x,E)}},c=new WeakMap,h=i(c),d=u(h,c),g=n(d);t.addUniqueNumber=g,t.generateUniqueNumber=d})}),nz=$e((r,e)=>{Me(),Be(),Ne();function t(i,s,a,o,u,c,h){try{var d=i[c](h),g=d.value}catch(m){return void a(m)}d.done?s(g):Promise.resolve(g).then(o,u)}function n(i){return function(){var s=this,a=arguments;return new Promise(function(o,u){var c=i.apply(s,a);function h(g){t(c,o,u,h,d,"next",g)}function d(g){t(c,o,u,h,d,"throw",g)}h(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),YN=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){this.v=n,this.k=i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),XN=$e((r,e)=>{Me(),Be(),Ne();function t(n,i,s,a){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}e.exports=t=function(u,c,h,d){function g(m,y){t(u,m,function(x){return this._invoke(m,y,x)})}c?o?o(u,c,{value:h,enumerable:!d,configurable:!d,writable:!d}):u[c]=h:(g("next",0),g("throw",1),g("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,s,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),QN=$e((r,e)=>{Me(),Be(),Ne();var t=XN();function n(){var i,s,a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function c(E,S,T,I){var w=S&&S.prototype instanceof d?S:d,R=Object.create(w.prototype);return t(R,"_invoke",(function(_,C,k){var D,U,N,q=0,X=k||[],V=!1,H={p:0,n:0,v:i,a:K,f:K.bind(i,4),d:function(Y,ee){return D=Y,U=0,N=i,H.n=ee,h}};function K(Y,ee){for(U=Y,N=ee,s=0;!V&&q&&!Q&&s<X.length;s++){var Q,$=X[s],F=H.p,Z=$[2];Y>3?(Q=Z===ee)&&(N=$[(U=$[4])?5:(U=3,3)],$[4]=$[5]=i):$[0]<=F&&((Q=Y<2&&F<$[1])?(U=0,H.v=ee,H.n=$[1]):F<Z&&(Q=Y<3||$[0]>ee||ee>Z)&&($[4]=Y,$[5]=ee,H.n=Z,U=0))}if(Q||Y>1)return h;throw V=!0,ee}return function(Y,ee,Q){if(q>1)throw TypeError("Generator is already running");for(V&&ee===1&&K(ee,Q),U=ee,N=Q;(s=U<2?i:N)||!V;){D||(U?U<3?(U>1&&(H.n=-1),K(U,N)):H.n=N:H.v=N);try{if(q=2,D){if(U||(Y="next"),s=D[Y]){if(!(s=s.call(D,N)))throw TypeError("iterator result is not an object");if(!s.done)return s;N=s.value,U<2&&(U=0)}else U===1&&(s=D.return)&&s.call(D),U<2&&(N=TypeError("The iterator does not provide a '"+Y+"' method"),U=1);D=i}else if((s=(V=H.n<0)?N:_.call(C,H))!==h)break}catch($){D=i,U=1,N=$}finally{q=1}}return{value:s,done:V}}})(E,T,I),!0),R}var h={};function d(){}function g(){}function m(){}s=Object.getPrototypeOf;var y=[][o]?s(s([][o]())):(t(s={},o,function(){return this}),s),x=m.prototype=d.prototype=Object.create(y);function b(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,m):(E.__proto__=m,t(E,u,"GeneratorFunction")),E.prototype=Object.create(x),E}return g.prototype=m,t(x,"constructor",m),t(m,"constructor",g),g.displayName="GeneratorFunction",t(m,u,"GeneratorFunction"),t(x),t(x,u,"Generator"),t(x,o,function(){return this}),t(x,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:c,m:b}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),ZN=$e((r,e)=>{Me(),Be(),Ne();var t=YN(),n=XN();function i(s,a){function o(c,h,d,g){try{var m=s[c](h),y=m.value;return y instanceof t?a.resolve(y.v).then(function(x){o("next",x,d,g)},function(x){o("throw",x,d,g)}):a.resolve(y).then(function(x){m.value=x,d(m)},function(x){return o("throw",x,d,g)})}catch(x){g(x)}}var u;this.next||(n(i.prototype),n(i.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(c,h,d){function g(){return new a(function(m,y){o(c,d,m,y)})}return u=u?u.then(g,g):g()},!0)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),JN=$e((r,e)=>{Me(),Be(),Ne();var t=QN(),n=ZN();function i(s,a,o,u,c){return new n(t().w(s,a,o,u),c||Promise)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),iz=$e((r,e)=>{Me(),Be(),Ne();var t=JN();function n(i,s,a,o,u){var c=t(i,s,a,o,u);return c.next().then(function(h){return h.done?h.value:c.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),sz=$e((r,e)=>{Me(),Be(),Ne();function t(n){var i=Object(n),s=[];for(var a in i)s.unshift(a);return function o(){for(;s.length;)if((a=s.pop())in i)return o.value=a,o.done=!1,o;return o.done=!0,o}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),az=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default;function n(i){if(i!=null){var s=i[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],a=0;if(s)return s.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length))return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}}}throw new TypeError(t(i)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),oz=$e((r,e)=>{Me(),Be(),Ne();var t=YN(),n=QN(),i=iz(),s=JN(),a=ZN(),o=sz(),u=az();function c(){var h=n(),d=h.m(c),g=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function m(b){var E=typeof b=="function"&&b.constructor;return!!E&&(E===g||(E.displayName||E.name)==="GeneratorFunction")}var y={throw:1,return:2,break:3,continue:3};function x(b){var E,S;return function(T){E||(E={stop:function(){return S(T.a,2)},catch:function(){return T.v},abrupt:function(I,w){return S(T.a,y[I],w)},delegateYield:function(I,w,R){return E.resultName=w,S(T.d,u(I),R)},finish:function(I){return S(T.f,I)}},S=function(I,w,R){T.p=E.prev,T.n=E.next;try{return I(w,R)}finally{E.next=T.n}}),E.resultName&&(E[E.resultName]=T.v,E.resultName=void 0),E.sent=T.v,E.next=T.n;try{return b.call(this,E)}finally{T.p=E.prev,T.n=E.next}}}return(e.exports=c=function(){return{wrap:function(b,E,S,T){return h.w(x(b),E,S,T&&T.reverse())},isGeneratorFunction:m,mark:h.m,awrap:function(b,E){return new t(b,E)},AsyncIterator:a,async:function(b,E,S,T,I){return(m(E)?s:i)(x(b),E,S,T,I)},keys:o,values:u}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}),lz=$e((r,e)=>{Me(),Be(),Ne();var t=oz()();e.exports=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),uz=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,XG(),rz(),WN(),nz(),lz()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.brokerFactory={},t._defineProperty,t._slicedToArray,t.fastUniqueNumbers,t._asyncToGenerator,t._regeneratorRuntime))})(r,function(t,n,i,s,a,o){var u=function(S){return typeof S.start=="function"},c=new WeakMap;function h(S,T){var I=Object.keys(S);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(S);T&&(w=w.filter(function(R){return Object.getOwnPropertyDescriptor(S,R).enumerable})),I.push.apply(I,w)}return I}function d(S){for(var T=1;T<arguments.length;T++){var I=arguments[T]!=null?arguments[T]:{};T%2?h(Object(I),!0).forEach(function(w){n(S,w,I[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(I)):h(Object(I)).forEach(function(w){Object.defineProperty(S,w,Object.getOwnPropertyDescriptor(I,w))})}return S}var g=function(S){return d(d({},S),{},{connect:function(T){var I=T.call;return a(o.mark(function w(){var R,_,C,k;return o.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return R=new MessageChannel,_=R.port1,C=R.port2,D.next=1,I("connect",{port:_},[_]);case 1:return k=D.sent,c.set(C,k),D.abrupt("return",C);case 2:case"end":return D.stop()}},w)}))},disconnect:function(T){var I=T.call;return(function(){var w=a(o.mark(function R(_){var C;return o.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(C=c.get(_),C!==void 0){k.next=1;break}throw new Error("The given port is not connected.");case 1:return k.next=2,I("disconnect",{portId:C});case 2:case"end":return k.stop()}},R)}));return function(R){return w.apply(this,arguments)}})()},isSupported:function(T){var I=T.call;return function(){return I("isSupported")}}})};function m(S,T){var I=Object.keys(S);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(S);T&&(w=w.filter(function(R){return Object.getOwnPropertyDescriptor(S,R).enumerable})),I.push.apply(I,w)}return I}function y(S){for(var T=1;T<arguments.length;T++){var I=arguments[T]!=null?arguments[T]:{};T%2?m(Object(I),!0).forEach(function(w){n(S,w,I[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(I)):m(Object(I)).forEach(function(w){Object.defineProperty(S,w,Object.getOwnPropertyDescriptor(I,w))})}return S}var x=new WeakMap,b=function(S){if(x.has(S))return x.get(S);var T=new Map;return x.set(S,T),T},E=function(S){var T=g(S);return function(I){var w=b(I);I.addEventListener("message",function(X){var V=X.data,H=V.id;if(H!==null&&w.has(H)){var K=w.get(H),Y=K.reject,ee=K.resolve;w.delete(H),V.error===void 0?ee(V.result):Y(new Error(V.error.message))}}),u(I)&&I.start();for(var R=function(X){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(K,Y){var ee=s.generateUniqueNumber(w);w.set(ee,{reject:Y,resolve:K}),V===null?I.postMessage({id:ee,method:X},H):I.postMessage({id:ee,method:X,params:V},H)})},_=function(X,V){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];I.postMessage({id:null,method:X,params:V},H)},C={},k=0,D=Object.entries(T);k<D.length;k++){var U=i(D[k],2),N=U[0],q=U[1];C=y(y({},C),{},n({},N,q({call:R,notify:_})))}return y({},C)}};t.createBroker=E})}),cz=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,jg(),uz(),WN()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t._typeof,t.brokerFactory,t.fastUniqueNumbers))})(r,function(t,n,i,s){var a=new Map([[0,null]]),o=new Map([[0,null]]),u=i.createBroker({clearInterval:function(h){var d=h.call;return function(g){n(a.get(g))==="symbol"&&(a.set(g,null),d("clear",{timerId:g,timerType:"interval"}).then(function(){a.delete(g)}))}},clearTimeout:function(h){var d=h.call;return function(g){n(o.get(g))==="symbol"&&(o.set(g,null),d("clear",{timerId:g,timerType:"timeout"}).then(function(){o.delete(g)}))}},setInterval:function(h){var d=h.call;return function(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,x=new Array(y>2?y-2:0),b=2;b<y;b++)x[b-2]=arguments[b];var E=Symbol(),S=s.generateUniqueNumber(a);a.set(S,E);var T=function(){return d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"interval"}).then(function(){var I=a.get(S);if(I===void 0)throw new Error("The timer is in an undefined state.");I===E&&(g.apply(void 0,x),a.get(S)===E&&T())})};return T(),S}},setTimeout:function(h){var d=h.call;return function(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,x=new Array(y>2?y-2:0),b=2;b<y;b++)x[b-2]=arguments[b];var E=Symbol(),S=s.generateUniqueNumber(o);return o.set(S,E),d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"timeout"}).then(function(){var T=o.get(S);if(T===void 0)throw new Error("The timer is in an undefined state.");T===E&&(o.delete(S),g.apply(void 0,x))}),S}}}),c=function(h){var d=new Worker(h);return u(d)};t.load=c,t.wrap=u})}),fz=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,cz()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))})(r,function(t,n){var i=function(d,g){var m=null;return function(){if(m!==null)return m;var y=new Blob([g],{type:"application/javascript; charset=utf-8"}),x=URL.createObjectURL(y);return m=d(x),setTimeout(function(){return URL.revokeObjectURL(x)}),m}},s=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,a=i(n.load,s),o=function(d){return a().clearInterval(d)},u=function(d){return a().clearTimeout(d)},c=function(){var d;return(d=a()).setInterval.apply(d,arguments)},h=function(){var d;return(d=a()).setTimeout.apply(d,arguments)};t.clearInterval=o,t.clearTimeout=u,t.setInterval=c,t.setTimeout=h})}),Fg=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&zt?.versions?!Object.prototype.hasOwnProperty.call(zt.versions,"electron"):typeof window.document<"u":!1,t=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=i}),hz=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(c,h,d,g){g===void 0&&(g=d);var m=Object.getOwnPropertyDescriptor(h,d);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(c,g,m)}:function(c,h,d,g){g===void 0&&(g=d),c[g]=h[d]}),t=r&&r.__setModuleDefault||(Object.create?function(c,h){Object.defineProperty(c,"default",{enumerable:!0,value:h})}:function(c,h){c.default=h}),n=r&&r.__importStar||(function(){var c=function(h){return c=Object.getOwnPropertyNames||function(d){var g=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(g[g.length]=m);return g},c(h)};return function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var g=c(h),m=0;m<g.length;m++)g[m]!=="default"&&e(d,h,g[m]);return t(d,h),d}})();Object.defineProperty(r,"__esModule",{value:!0});var i=fz(),s=n(Fg()),a={set:i.setInterval,clear:i.clearInterval},o={set:(c,h)=>setInterval(c,h),clear:c=>clearInterval(c)},u=c=>{switch(c){case"native":return o;case"worker":return a;case"auto":default:return s.default&&!s.isWebWorker&&!s.isReactNativeBrowser?a:o}};r.default=u}),e2=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(hz()),n=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(i,s){this.client=i,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,t.default)(s),this.setKeepalive(i.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(i){if(i*=1e3,isNaN(i)||i<=0||i>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${i}`);this._keepalive=i,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${i}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let i=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+i,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),hS=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(w,R,_,C){C===void 0&&(C=_);var k=Object.getOwnPropertyDescriptor(R,_);(!k||("get"in k?!R.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return R[_]}}),Object.defineProperty(w,C,k)}:function(w,R,_,C){C===void 0&&(C=_),w[C]=R[_]}),t=r&&r.__setModuleDefault||(Object.create?function(w,R){Object.defineProperty(w,"default",{enumerable:!0,value:R})}:function(w,R){w.default=R}),n=r&&r.__importStar||(function(){var w=function(R){return w=Object.getOwnPropertyNames||function(_){var C=[];for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(C[C.length]=k);return C},w(R)};return function(R){if(R&&R.__esModule)return R;var _={};if(R!=null)for(var C=w(R),k=0;k<C.length;k++)C[k]!=="default"&&e(_,R,C[k]);return t(_,R),_}})(),i=r&&r.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(r,"__esModule",{value:!0});var s=i(SG()),a=nl(),o=i(TG()),u=i(Xs()),c=n(AG()),h=i(LN()),d=i(KG()),g=i(VN()),m=i(qG()),y=Ou(),x=VG(),b=i(e2()),E=n(Fg()),S=globalThis.setImmediate||((...w)=>{let R=w.shift();(0,y.nextTick)(()=>{R(...w)})}),T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},I=class dS extends x.TypedEventEmitter{static VERSION=y.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(R,_){super(),this.options=_||{};for(let C in T)typeof this.options[C]>"u"?this.options[C]=T[C]:this.options[C]=_[C];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",dS.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",_.protocol),this.log("MqttClient :: options.protocolVersion",_.protocolVersion),this.log("MqttClient :: options.username",_.username),this.log("MqttClient :: options.keepalive",_.keepalive),this.log("MqttClient :: options.reconnectPeriod",_.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",_.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",_.properties?_.properties.topicAliasMaximum:void 0),this.options.clientId=typeof _.clientId=="string"?_.clientId:dS.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=_.protocolVersion===5&&_.customHandleAcks?_.customHandleAcks:(...C)=>{C[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=R,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new g.default:this.options.messageIdProvider,this.outgoingStore=_.outgoingStore||new h.default,this.incomingStore=_.incomingStore||new h.default,this.queueQoSZero=_.queueQoSZero===void 0?!0:_.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,_.properties&&_.properties.topicAliasMaximum>0&&(_.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(_.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:C}=this,k=()=>{let D=C.shift();this.log("deliver :: entry %o",D);let U=null;if(!D){this._resubscribe();return}U=D.packet,this.log("deliver :: call _sendPacket for %o",U);let N=!0;U.messageId&&U.messageId!==0&&(this.messageIdProvider.register(U.messageId)||(N=!1)),N?this._sendPacket(U,q=>{D.cb&&D.cb(q),k()}):(this.log("messageId: %d has already used. The message is skipped and removed.",U.messageId),k())};this.log("connect :: sending queued packets"),k()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(R,_){_()}handleMessage(R,_){_()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let R=new a.Writable,_=s.default.parser(this.options),C=null,k=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),_.on("packet",X=>{this.log("parser :: on packet push to packets array."),k.push(X)});let D=()=>{this.log("work :: getting next packet in queue");let X=k.shift();if(X)this.log("work :: packet pulled from queue"),(0,d.default)(this,X,U);else{this.log("work :: no packets in queue");let V=C;C=null,this.log("work :: done flag is %s",!!V),V&&V()}},U=()=>{if(k.length)(0,y.nextTick)(D);else{let X=C;C=null,X()}};R._write=(X,V,H)=>{C=H,this.log("writable stream :: parsing buffer"),_.parse(X),D()};let N=X=>{this.log("streamErrorHandler :: error",X.message),X.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",X)):this.noop(X)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(R),this.stream.on("error",N),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let q={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(q.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(q.properties||(q.properties={}),this.topicAliasRecv&&(q.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(q),_.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let X={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(X)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(R,_,C,k){this.log("publish :: message `%s` to topic `%s`",_,R);let{options:D}=this;typeof C=="function"&&(k=C,C=null),C=C||{},C={qos:0,retain:!1,dup:!1,...C};let{qos:U,retain:N,dup:q,properties:X,cbStorePut:V}=C;if(this._checkDisconnecting(k))return this;let H=()=>{let K=0;if((U===1||U===2)&&(K=this._nextId(),K===null))return this.log("No messageId left"),!1;let Y={cmd:"publish",topic:R,payload:_,qos:U,retain:N,messageId:K,dup:q};switch(D.protocolVersion===5&&(Y.properties=X),this.log("publish :: qos",U),U){case 1:case 2:this.outgoing[Y.messageId]={volatile:!1,cb:k||this.noop},this.log("MqttClient:publish: packet cmd: %s",Y.cmd),this._sendPacket(Y,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",Y.cmd),this._sendPacket(Y,k,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,cbStorePut:C.cbStorePut,callback:k}),this}publishAsync(R,_,C){return new Promise((k,D)=>{this.publish(R,_,C,(U,N)=>{U?D(U):k(N)})})}subscribe(R,_,C){let k=this.options.protocolVersion;typeof _=="function"&&(C=_),C=C||this.noop;let D=!1,U=[];typeof R=="string"?(R=[R],U=R):Array.isArray(R)?U=R:typeof R=="object"&&(D=R.resubscribe,delete R.resubscribe,U=Object.keys(R));let N=c.validateTopics(U);if(N!==null)return S(C,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(C))return this.log("subscribe: discconecting true"),this;let q={qos:0};k===5&&(q.nl=!1,q.rap=!1,q.rh=0),_={...q,..._};let{properties:X}=_,V=[],H=(ee,Q)=>{if(Q=Q||_,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ee)||this._resubscribeTopics[ee].qos<Q.qos||D){let $={topic:ee,qos:Q.qos};k===5&&($.nl=Q.nl,$.rap=Q.rap,$.rh=Q.rh,$.properties=X),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",$.topic,$.qos),V.push($)}};if(Array.isArray(R)?R.forEach(ee=>{this.log("subscribe: array topic %s",ee),H(ee)}):Object.keys(R).forEach(ee=>{this.log("subscribe: object topic %s, %o",ee,R[ee]),H(ee,R[ee])}),!V.length)return C(null,[]),this;let K=(ee,Q)=>{let $={cmd:"subscribe",subscriptions:ee,messageId:Q};if(X&&($.properties=X),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Z=[];ee.forEach(de=>{if(this.options.reconnectPeriod>0){let oe={qos:de.qos};k===5&&(oe.nl=de.nl||!1,oe.rap=de.rap||!1,oe.rh=de.rh||0,oe.properties=de.properties),this._resubscribeTopics[de.topic]=oe,Z.push(de.topic)}}),this.messageIdToTopic[$.messageId]=Z}let F=new Promise((Z,de)=>{this.outgoing[$.messageId]={volatile:!0,cb(oe,Se){if(!oe){let{granted:ae}=Se;for(let re=0;re<ae.length;re+=1)ee[re].qos=ae[re]}oe?de(new y.ErrorWithSubackPacket(oe.message,Se)):Z(Se)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket($),F},Y=()=>{let ee=this.options.subscribeBatchSize??V.length,Q=[];for(let $=0;$<V.length;$+=ee){let F=V.slice($,$+ee),Z=this._nextId();if(Z===null)return this.log("No messageId left"),!1;Q.push(K(F,Z))}return Promise.all(Q).then($=>{C(null,V,$.at(-1))}).catch($=>{C($,V,$.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Y())&&this._storeProcessingQueue.push({invoke:Y,callback:C}),this}subscribeAsync(R,_){return new Promise((C,k)=>{this.subscribe(R,_,(D,U)=>{D?k(D):C(U)})})}unsubscribe(R,_,C){typeof R=="string"&&(R=[R]),typeof _=="function"&&(C=_),C=C||this.noop;let k=c.validateTopics(R);if(k!==null)return S(C,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(C))return this;let D=()=>{let U=this._nextId();if(U===null)return this.log("No messageId left"),!1;let N={cmd:"unsubscribe",messageId:U,unsubscriptions:[]};return typeof R=="string"?N.unsubscriptions=[R]:Array.isArray(R)&&(N.unsubscriptions=R),this.options.resubscribe&&N.unsubscriptions.forEach(q=>{delete this._resubscribeTopics[q]}),typeof _=="object"&&_.properties&&(N.properties=_.properties),this.outgoing[N.messageId]={volatile:!0,cb:C},this.log("unsubscribe: call _sendPacket"),this._sendPacket(N),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!D())&&this._storeProcessingQueue.push({invoke:D,callback:C}),this}unsubscribeAsync(R,_){return new Promise((C,k)=>{this.unsubscribe(R,_,(D,U)=>{D?k(D):C(U)})})}end(R,_,C){this.log("end :: (%s)",this.options.clientId),(R==null||typeof R!="boolean")&&(C=C||_,_=R,R=!1),typeof _!="object"&&(C=C||_,_=null),this.log("end :: cb? %s",!!C),(!C||typeof C!="function")&&(C=this.noop);let k=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(U=>{this.outgoingStore.close(N=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),C){let q=U||N;this.log("end :: closeStores: invoking callback with args"),C(q)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},D=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,R),this._cleanUp(R,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(k)},_)};return this.disconnecting?(C(),this):(this._clearReconnect(),this.disconnecting=!0,!R&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,D,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),D()),this)}endAsync(R,_){return new Promise((C,k)=>{this.end(R,_,D=>{D?k(D):C()})})}removeOutgoingMessage(R){if(this.outgoing[R]){let{cb:_}=this.outgoing[R];this._removeOutgoingAndStoreMessage(R,()=>{_(new Error("Message removed"))})}return this}reconnect(R){this.log("client reconnect");let _=()=>{R?(this.options.incomingStore=R.incomingStore,this.options.outgoingStore=R.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=_:_(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(R=>{this.outgoing[R].volatile&&typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(R=>{typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_removeTopicAliasAndRecoverTopicName(R){let _;R.properties&&(_=R.properties.topicAlias);let C=R.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",_,C),C.length===0){if(typeof _>"u")return new Error("Unregistered Topic Alias");if(C=this.topicAliasSend.getTopicByAlias(_),typeof C>"u")return new Error("Unregistered Topic Alias");R.topic=C}_&&delete R.properties.topicAlias}_checkDisconnecting(R){return this.disconnecting&&(R&&R!==this.noop?R(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(R,_,C={}){if(_&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",_)),this.log("_cleanUp :: forced? %s",R),R)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let k={cmd:"disconnect",...C};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(k,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),S(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),_&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",_),_())}_storeAndSend(R,_,C){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",R.cmd);let k=R,D;if(k.cmd==="publish"&&(k=(0,o.default)(R),D=this._removeTopicAliasAndRecoverTopicName(k),D))return _&&_(D);this.outgoingStore.put(k,U=>{if(U)return _&&_(U);C(),this._writePacket(R,_)})}_applyTopicAlias(R){if(this.options.protocolVersion===5&&R.cmd==="publish"){let _;R.properties&&(_=R.properties.topicAlias);let C=R.topic.toString();if(this.topicAliasSend)if(_){if(C.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",C,_),!this.topicAliasSend.put(C,_)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,_),new Error("Sending Topic Alias out of range")}else C.length!==0&&(this.options.autoAssignTopicAlias?(_=this.topicAliasSend.getAliasByTopic(C),_?(R.topic="",R.properties={...R.properties,topicAlias:_},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",C,_)):(_=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(C,_),R.properties={...R.properties,topicAlias:_},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",C,_))):this.options.autoUseTopicAlias&&(_=this.topicAliasSend.getAliasByTopic(C),_&&(R.topic="",R.properties={...R.properties,topicAlias:_},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",C,_))));else if(_)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,_),new Error("Sending Topic Alias out of range")}}_noop(R){this.log("noop ::",R)}_writePacket(R,_){this.log("_writePacket :: packet: %O",R),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",R),this.log("_writePacket :: writing to stream");let C=s.default.writeToStream(R,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",C),!C&&_&&_!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",_)):_&&(this.log("_writePacket :: invoking cb"),_())}_sendPacket(R,_,C,k){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),C=C||this.noop,_=_||this.noop;let D=this._applyTopicAlias(R);if(D){_(D);return}if(!this.connected){if(R.cmd==="auth"){this._writePacket(R,_);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(R,_,C);return}if(k){this._writePacket(R,_);return}switch(R.cmd){case"publish":break;case"pubrel":this._storeAndSend(R,_,C);return;default:this._writePacket(R,_);return}switch(R.qos){case 2:case 1:this._storeAndSend(R,_,C);break;case 0:default:this._writePacket(R,_);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(R,_,C){this.log("_storePacket :: packet: %o",R),this.log("_storePacket :: cb? %s",!!_),C=C||this.noop;let k=R;if(k.cmd==="publish"){k=(0,o.default)(R);let U=this._removeTopicAliasAndRecoverTopicName(k);if(U)return _&&_(U)}let D=k.qos||0;D===0&&this.queueQoSZero||k.cmd!=="publish"?this.queue.push({packet:k,cb:_}):D>0?(_=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoingStore.put(k,U=>{if(U)return _&&_(U);C()})):_&&_(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(R=!1){this.keepaliveManager&&this.options.keepalive&&(R||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let R=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&R.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let _=0;_<R.length;_++){let C={};C[R[_]]=this._resubscribeTopics[R[_]],C.resubscribe=!0,this.subscribe(C,{properties:C[R[_]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(R){if(this.disconnected){this.emit("connect",R);return}this.connackPacket=R,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let _=()=>{let C=this.outgoingStore.createStream(),k=()=>{C.destroy(),C=null,this._flushStoreProcessingQueue(),D()},D=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",k),C.on("error",N=>{D(),this._flushStoreProcessingQueue(),this.removeListener("close",k),this.emit("error",N)});let U=()=>{if(!C)return;let N=C.read(1),q;if(!N){C.once("readable",U);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[N.messageId]){U();return}!this.disconnecting&&!this.reconnectTimer?(q=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoing[N.messageId]={volatile:!1,cb(X,V){q&&q(X,V),U()}},this._packetIdsDuringStoreProcessing[N.messageId]=!0,this.messageIdProvider.register(N.messageId)?this._sendPacket(N,void 0,void 0,!0):this.log("messageId: %d has already used.",N.messageId)):C.destroy&&C.destroy()};C.on("end",()=>{let N=!0;for(let q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[q]){N=!1;break}this.removeListener("close",k),N?(D(),this._invokeAllStoreProcessingQueue(),this.emit("connect",R)):_()}),U()};_()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let R=this._storeProcessingQueue[0];if(R&&R.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let R of this._storeProcessingQueue)R.cbStorePut&&R.cbStorePut(new Error("Connection closed")),R.callback&&R.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(R,_){delete this.outgoing[R],this.outgoingStore.del({messageId:R},(C,k)=>{_(C,k),this.messageIdProvider.deallocate(R),this._invokeStoreProcessingQueue()})}};r.default=I}),dz=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=qN(),t=class{numberAllocator;lastId;constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function pz(){if(pS)return qd;pS=!0;let r=2147483647,e=36,t=1,n=26,i=38,s=700,a=72,o=128,u="-",c=/^xn--/,h=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=e-t,y=Math.floor,x=String.fromCharCode;function b(D){throw new RangeError(g[D])}function E(D,U){let N=[],q=D.length;for(;q--;)N[q]=U(D[q]);return N}function S(D,U){let N=D.split("@"),q="";N.length>1&&(q=N[0]+"@",D=N[1]),D=D.replace(d,".");let X=D.split("."),V=E(X,U).join(".");return q+V}function T(D){let U=[],N=0,q=D.length;for(;N<q;){let X=D.charCodeAt(N++);if(X>=55296&&X<=56319&&N<q){let V=D.charCodeAt(N++);(V&64512)==56320?U.push(((X&1023)<<10)+(V&1023)+65536):(U.push(X),N--)}else U.push(X)}return U}let I=D=>String.fromCodePoint(...D),w=function(D){return D>=48&&D<58?26+(D-48):D>=65&&D<91?D-65:D>=97&&D<123?D-97:e},R=function(D,U){return D+22+75*(D<26)-((U!=0)<<5)},_=function(D,U,N){let q=0;for(D=N?y(D/s):D>>1,D+=y(D/U);D>m*n>>1;q+=e)D=y(D/m);return y(q+(m+1)*D/(D+i))},C=function(D){let U=[],N=D.length,q=0,X=o,V=a,H=D.lastIndexOf(u);H<0&&(H=0);for(let K=0;K<H;++K)D.charCodeAt(K)>=128&&b("not-basic"),U.push(D.charCodeAt(K));for(let K=H>0?H+1:0;K<N;){let Y=q;for(let Q=1,$=e;;$+=e){K>=N&&b("invalid-input");let F=w(D.charCodeAt(K++));F>=e&&b("invalid-input"),F>y((r-q)/Q)&&b("overflow"),q+=F*Q;let Z=$<=V?t:$>=V+n?n:$-V;if(F<Z)break;let de=e-Z;Q>y(r/de)&&b("overflow"),Q*=de}let ee=U.length+1;V=_(q-Y,ee,Y==0),y(q/ee)>r-X&&b("overflow"),X+=y(q/ee),q%=ee,U.splice(q++,0,X)}return String.fromCodePoint(...U)},k=function(D){let U=[];D=T(D);let N=D.length,q=o,X=0,V=a;for(let Y of D)Y<128&&U.push(x(Y));let H=U.length,K=H;for(H&&U.push(u);K<N;){let Y=r;for(let Q of D)Q>=q&&Q<Y&&(Y=Q);let ee=K+1;Y-q>y((r-X)/ee)&&b("overflow"),X+=(Y-q)*ee,q=Y;for(let Q of D)if(Q<q&&++X>r&&b("overflow"),Q===q){let $=X;for(let F=e;;F+=e){let Z=F<=V?t:F>=V+n?n:F-V;if($<Z)break;let de=$-Z,oe=e-Z;U.push(x(R(Z+de%oe,0))),$=y(de/oe)}U.push(x(R($,0))),V=_(X,ee,K===H),X=0,++K}++X,++q}return U.join("")};return qd={version:"2.3.1",ucs2:{decode:T,encode:I},decode:C,encode:k,toASCII:function(D){return S(D,function(U){return h.test(U)?"xn--"+k(U):U})},toUnicode:function(D){return S(D,function(U){return c.test(U)?C(U.slice(4).toLowerCase()):U})}},qd}var qd,pS,za,gz=Nn(()=>{Me(),Be(),Ne(),qd={},pS=!1,za=pz(),za.decode,za.encode,za.toASCII,za.toUnicode,za.ucs2,za.version});function mz(){return mS||(mS=!0,gS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;var n=42;r[e]=n;for(e in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(r,e);if(s.value!==n||s.enumerable!==!0)return!1}return!0}),gS}function yz(){return vS||(vS=!0,yS=Error),yS}function vz(){return xS||(xS=!0,bS=EvalError),bS}function bz(){return ES||(ES=!0,SS=RangeError),SS}function xz(){return AS||(AS=!0,TS=ReferenceError),TS}function t2(){return _S||(_S=!0,wS=SyntaxError),wS}function If(){return OS||(OS=!0,IS=TypeError),IS}function Sz(){return LS||(LS=!0,RS=URIError),RS}function Ez(){if(CS)return Vd;CS=!0;var r=typeof Symbol<"u"&&Symbol,e=mz();return Vd=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Vd}function Tz(){if(PS)return Wd;PS=!0;var r={__proto__:null,foo:{}},e=Object;return Wd=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},Wd}function Az(){if(DS)return Yd;DS=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(o,u){for(var c=[],h=0;h<o.length;h+=1)c[h]=o[h];for(var d=0;d<u.length;d+=1)c[d+o.length]=u[d];return c},s=function(o,u){for(var c=[],h=u,d=0;h<o.length;h+=1,d+=1)c[d]=o[h];return c},a=function(o,u){for(var c="",h=0;h<o.length;h+=1)c+=o[h],h+1<o.length&&(c+=u);return c};return Yd=function(o){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(r+u);for(var c=s(arguments,1),h,d=function(){if(this instanceof h){var b=u.apply(this,i(c,arguments));return Object(b)===b?b:this}return u.apply(o,i(c,arguments))},g=t(0,u.length-c.length),m=[],y=0;y<g;y++)m[y]="$"+y;if(h=Function("binder","return function ("+a(m,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var x=function(){};x.prototype=u.prototype,h.prototype=new x,x.prototype=null}return h},Yd}function kT(){if(kS)return Xd;kS=!0;var r=Az();return Xd=Function.prototype.bind||r,Xd}function wz(){if(MS)return Qd;MS=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=kT();return Qd=t.call(r,e),Qd}function Ru(){if(NS)return Zd;NS=!0;var r,e=yz(),t=vz(),n=bz(),i=xz(),s=t2(),a=If(),o=Sz(),u=Function,c=function(K){try{return u('"use strict"; return ('+K+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var d=function(){throw new a},g=h?(function(){try{return arguments.callee,d}catch{try{return h(arguments,"callee").get}catch{return d}}})():d,m=Ez()(),y=Tz()(),x=Object.getPrototypeOf||(y?function(K){return K.__proto__}:null),b={},E=typeof Uint8Array>"u"||!x?r:x(Uint8Array),S={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&x?x([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&x?x(x([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!x?r:x(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!x?r:x(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&x?x(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":g,"%TypedArray%":E,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":o,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(x)try{null.error}catch(K){var T=x(x(K));S["%Error.prototype%"]=T}var I=function K(Y){var ee;if(Y==="%AsyncFunction%")ee=c("async function () {}");else if(Y==="%GeneratorFunction%")ee=c("function* () {}");else if(Y==="%AsyncGeneratorFunction%")ee=c("async function* () {}");else if(Y==="%AsyncGenerator%"){var Q=K("%AsyncGeneratorFunction%");Q&&(ee=Q.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var $=K("%AsyncGenerator%");$&&x&&(ee=x($.prototype))}return S[Y]=ee,ee},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=kT(),_=wz(),C=R.call(Function.call,Array.prototype.concat),k=R.call(Function.apply,Array.prototype.splice),D=R.call(Function.call,String.prototype.replace),U=R.call(Function.call,String.prototype.slice),N=R.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,X=/\\(\\)?/g,V=function(K){var Y=U(K,0,1),ee=U(K,-1);if(Y==="%"&&ee!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(ee==="%"&&Y!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Q=[];return D(K,q,function($,F,Z,de){Q[Q.length]=Z?D(de,X,"$1"):F||$}),Q},H=function(K,Y){var ee=K,Q;if(_(w,ee)&&(Q=w[ee],ee="%"+Q[0]+"%"),_(S,ee)){var $=S[ee];if($===b&&($=I(ee)),typeof $>"u"&&!Y)throw new a("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:Q,name:ee,value:$}}throw new s("intrinsic "+K+" does not exist!")};return Zd=function(K,Y){if(typeof K!="string"||K.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Y!="boolean")throw new a('"allowMissing" argument must be a boolean');if(N(/^%?[^%]*%?$/,K)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ee=V(K),Q=ee.length>0?ee[0]:"",$=H("%"+Q+"%",Y),F=$.name,Z=$.value,de=!1,oe=$.alias;oe&&(Q=oe[0],k(ee,C([0,1],oe)));for(var Se=1,ae=!0;Se<ee.length;Se+=1){var re=ee[Se],te=U(re,0,1),le=U(re,-1);if((te==='"'||te==="'"||te==="`"||le==='"'||le==="'"||le==="`")&&te!==le)throw new s("property names with quotes must have matching quotes");if((re==="constructor"||!ae)&&(de=!0),Q+="."+re,F="%"+Q+"%",_(S,F))Z=S[F];else if(Z!=null){if(!(re in Z)){if(!Y)throw new a("base intrinsic for "+K+" exists, but the property is not available.");return}if(h&&Se+1>=ee.length){var ce=h(Z,re);ae=!!ce,ae&&"get"in ce&&!("originalValue"in ce.get)?Z=ce.get:Z=Z[re]}else ae=_(Z,re),Z=Z[re];ae&&!de&&(S[F]=Z)}}return Z},Zd}function MT(){if(BS)return Jd;BS=!0;var r=Ru(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Jd=e,Jd}function r2(){if(US)return ep;US=!0;var r=Ru(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return ep=e,ep}function _z(){if(jS)return tp;jS=!0;var r=MT(),e=t2(),t=If(),n=r2();return tp=function(i,s,a){if(!i||typeof i!="object"&&typeof i!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,d=!!n&&n(i,s);if(r)r(i,s,{configurable:c===null&&d?d.configurable:!c,enumerable:o===null&&d?d.enumerable:!o,value:a,writable:u===null&&d?d.writable:!u});else if(h||!o&&!u&&!c)i[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},tp}function Iz(){if(FS)return rp;FS=!0;var r=MT(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},rp=e,rp}function Oz(){if($S)return np;$S=!0;var r=Ru(),e=_z(),t=Iz()(),n=r2(),i=If(),s=r("%Math.floor%");return np=function(a,o){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof o!="number"||o<0||o>4294967295||s(o)!==o)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],c=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(c=!1),d&&!d.writable&&(h=!1)}return(c||h||!u)&&(t?e(a,"length",o,!0,!0):e(a,"length",o)),a},np}function Rz(){if(GS)return eu;GS=!0;var r=kT(),e=Ru(),t=Oz(),n=If(),i=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||r.call(s,i),o=MT(),u=e("%Math.max%");eu=function(h){if(typeof h!="function")throw new n("a function is required");var d=a(r,s,arguments);return t(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return a(r,i,arguments)};return o?o(eu,"apply",{value:c}):eu.apply=c,eu}function Lz(){if(zS)return ip;zS=!0;var r=Ru(),e=Rz(),t=e(r("String.prototype.indexOf"));return ip=function(n,i){var s=r(n,!!i);return typeof s=="function"&&t(n,".prototype.")>-1?e(s):s},ip}var gS,mS,yS,vS,bS,xS,SS,ES,TS,AS,wS,_S,IS,OS,RS,LS,Vd,CS,Wd,PS,Yd,DS,Xd,kS,Qd,MS,Zd,NS,Jd,BS,ep,US,tp,jS,rp,FS,np,$S,eu,GS,ip,zS,Cz=Nn(()=>{Me(),Be(),Ne(),gS={},mS=!1,yS={},vS=!1,bS={},xS=!1,SS={},ES=!1,TS={},AS=!1,wS={},_S=!1,IS={},OS=!1,RS={},LS=!1,Vd={},CS=!1,Wd={},PS=!1,Yd={},DS=!1,Xd={},kS=!1,Qd={},MS=!1,Zd={},NS=!1,Jd={},BS=!1,ep={},US=!1,tp={},jS=!1,rp={},FS=!1,np={},$S=!1,eu={},GS=!1,ip={},zS=!1});function NT(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function Pz(){!Go||!Bo||(Go=!1,Bo.length?Qi=Bo.concat(Qi):Kc=-1,Qi.length&&n2())}function n2(){if(!Go){var r=setTimeout(Pz,0);Go=!0;for(var e=Qi.length;e;){for(Bo=Qi,Qi=[];++Kc<e;)Bo&&Bo[Kc].run();Kc=-1,e=Qi.length}Bo=null,Go=!1,clearTimeout(r)}}function Dz(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Qi.push(new i2(r,e)),Qi.length===1&&!Go&&setTimeout(n2,0)}function i2(r,e){this.fun=r,this.array=e}function Jr(){}function kz(r){NT("_linkedBinding")}function Mz(r){NT("dlopen")}function Nz(){return[]}function Bz(){return[]}function Uz(r,e){if(!r)throw new Error(e||"assertion error")}function jz(){return!1}function Fz(){return js.now()/1e3}function Wy(r){var e=Math.floor((Date.now()-js.now())*.001),t=js.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=sp)),[n,i]}function ja(){return BT}function $z(r){return[]}var Qi,Go,Bo,Kc,ZO,JO,eR,tR,rR,nR,iR,sR,aR,oR,lR,uR,cR,fR,hR,dR,pR,gR,mR,yR,vR,ld,bR,xR,SR,ER,TR,AR,wR,_R,IR,OR,RR,LR,CR,PR,DR,kR,MR,NR,BR,UR,jR,FR,$R,GR,zR,js,Yy,sp,HR,KR,qR,VR,WR,YR,XR,QR,ZR,JR,eL,BT,s2=Nn(()=>{Me(),Be(),Ne(),Qi=[],Go=!1,Kc=-1,i2.prototype.run=function(){this.fun.apply(null,this.array)},ZO="browser",JO="x64",eR="browser",tR={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},rR=["/usr/bin/node"],nR=[],iR="v16.8.0",sR={},aR=function(r,e){console.warn((e?e+": ":"")+r)},oR=function(r){NT("binding")},lR=function(r){return 0},uR=function(){return"/"},cR=function(r){},fR={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},hR=Jr,dR=[],pR={},gR=!1,mR={},yR=Jr,vR=Jr,ld=function(){return{}},bR=ld,xR=ld,SR=Jr,ER=Jr,TR=Jr,AR={},wR={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},_R=Jr,IR=Jr,OR=Jr,RR=Jr,LR=Jr,CR=Jr,PR=Jr,DR=void 0,kR=void 0,MR=void 0,NR=Jr,BR=2,UR=1,jR="/bin/usr/node",FR=9229,$R="node",GR=[],zR=Jr,js={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},js.now===void 0&&(Yy=Date.now(),js.timing&&js.timing.navigationStart&&(Yy=js.timing.navigationStart),js.now=()=>Date.now()-Yy),sp=1e9,Wy.bigint=function(r){var e=Wy(r);return typeof BigInt>"u"?e[0]*sp+e[1]:BigInt(e[0]*sp)+BigInt(e[1])},HR=10,KR={},qR=0,VR=ja,WR=ja,YR=ja,XR=ja,QR=ja,ZR=Jr,JR=ja,eL=ja,BT={version:iR,versions:sR,arch:JO,platform:eR,release:fR,_rawDebug:hR,moduleLoadList:dR,binding:oR,_linkedBinding:kz,_events:KR,_eventsCount:qR,_maxListeners:HR,on:ja,addListener:VR,once:WR,off:YR,removeListener:XR,removeAllListeners:QR,emit:ZR,prependListener:JR,prependOnceListener:eL,listeners:$z,domain:pR,_exiting:gR,config:mR,dlopen:Mz,uptime:Fz,_getActiveRequests:Nz,_getActiveHandles:Bz,reallyExit:yR,_kill:vR,cpuUsage:ld,resourceUsage:bR,memoryUsage:xR,kill:SR,exit:ER,openStdin:TR,allowedNodeEnvironmentFlags:AR,assert:Uz,features:wR,_fatalExceptions:_R,setUncaughtExceptionCaptureCallback:IR,hasUncaughtExceptionCaptureCallback:jz,emitWarning:aR,nextTick:Dz,_tickCallback:OR,_debugProcess:RR,_debugEnd:LR,_startProfilerIdleNotifier:CR,_stopProfilerIdleNotifier:PR,stdout:DR,stdin:MR,stderr:kR,abort:NR,umask:lR,chdir:cR,cwd:uR,env:tR,title:ZO,argv:rR,execArgv:nR,pid:BR,ppid:UR,execPath:jR,debugPort:FR,hrtime:Wy,argv0:$R,_preload_modules:GR,setSourceMapsEnabled:zR}});function Gz(){if(HS)return ap;HS=!0;var r=BT;function e(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function t(s,a){for(var o="",u=0,c=-1,h=0,d,g=0;g<=s.length;++g){if(g<s.length)d=s.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(c===g-1||h===1))if(c!==g-1&&h===2){if(o.length<2||u!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",u=0):(o=o.slice(0,m),u=o.length-1-o.lastIndexOf("/")),c=g,h=0;continue}}else if(o.length===2||o.length===1){o="",u=0,c=g,h=0;continue}}a&&(o.length>0?o+="/..":o="..",u=2)}else o.length>0?o+="/"+s.slice(c+1,g):o=s.slice(c+1,g),u=g-c-1;c=g,h=0}else d===46&&h!==-1?++h:h=-1}return o}function n(s,a){var o=a.dir||a.root,u=a.base||(a.name||"")+(a.ext||"");return o?o===a.root?o+u:o+s+u:u}var i={resolve:function(){for(var s="",a=!1,o,u=arguments.length-1;u>=-1&&!a;u--){var c;u>=0?c=arguments[u]:(o===void 0&&(o=r.cwd()),c=o),e(c),c.length!==0&&(s=c+"/"+s,a=c.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,o=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&o&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(s===void 0?s=o:s+="/"+o)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var o=1;o<s.length&&s.charCodeAt(o)===47;++o);for(var u=s.length,c=u-o,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,g=d-h,m=c<g?c:g,y=-1,x=0;x<=m;++x){if(x===m){if(g>m){if(a.charCodeAt(h+x)===47)return a.slice(h+x+1);if(x===0)return a.slice(h+x)}else c>m&&(s.charCodeAt(o+x)===47?y=x:x===0&&(y=0));break}var b=s.charCodeAt(o+x),E=a.charCodeAt(h+x);if(b!==E)break;b===47&&(y=x)}var S="";for(x=o+y+1;x<=u;++x)(x===u||s.charCodeAt(x)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+a.slice(h+y):(h+=y,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),o=a===47,u=-1,c=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!c){u=h;break}}else c=!1;return u===-1?o?"/":".":o&&u===1?"//":s.slice(0,u)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var o=0,u=-1,c=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,g=-1;for(h=s.length-1;h>=0;--h){var m=s.charCodeAt(h);if(m===47){if(!c){o=h+1;break}}else g===-1&&(c=!1,g=h+1),d>=0&&(m===a.charCodeAt(d)?--d===-1&&(u=h):(d=-1,u=g))}return o===u?u=g:u===-1&&(u=s.length),s.slice(o,u)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!c){o=h+1;break}}else u===-1&&(c=!1,u=h+1);return u===-1?"":s.slice(o,u)}},extname:function(s){e(s);for(var a=-1,o=0,u=-1,c=!0,h=0,d=s.length-1;d>=0;--d){var g=s.charCodeAt(d);if(g===47){if(!c){o=d+1;break}continue}u===-1&&(c=!1,u=d+1),g===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||u===-1||h===0||h===1&&a===u-1&&a===o+1?"":s.slice(a,u)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var o=s.charCodeAt(0),u=o===47,c;u?(a.root="/",c=1):c=0;for(var h=-1,d=0,g=-1,m=!0,y=s.length-1,x=0;y>=c;--y){if(o=s.charCodeAt(y),o===47){if(!m){d=y+1;break}continue}g===-1&&(m=!1,g=y+1),o===46?h===-1?h=y:x!==1&&(x=1):h!==-1&&(x=-1)}return h===-1||g===-1||x===0||x===1&&h===g-1&&h===d+1?g!==-1&&(d===0&&u?a.base=a.name=s.slice(1,g):a.base=a.name=s.slice(d,g)):(d===0&&u?(a.name=s.slice(1,h),a.base=s.slice(1,g)):(a.name=s.slice(d,h),a.base=s.slice(d,g)),a.ext=s.slice(h,g)),d>0?a.dir=s.slice(0,d-1):u&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,ap=i,ap}var ap,HS,KS,zz=Nn(()=>{Me(),Be(),Ne(),s2(),ap={},HS=!1,KS=Gz()}),a2={};_u(a2,{URL:()=>m2,Url:()=>f2,default:()=>en,fileURLToPath:()=>l2,format:()=>h2,parse:()=>g2,pathToFileURL:()=>u2,resolve:()=>d2,resolveObject:()=>p2});function Hz(){if(qS)return op;qS=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,h=typeof WeakSet=="function"&&WeakSet.prototype,d=h?WeakSet.prototype.has:null,g=typeof WeakRef=="function"&&WeakRef.prototype,m=g?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,x=Object.prototype.toString,b=Function.prototype.toString,E=String.prototype.match,S=String.prototype.slice,T=String.prototype.replace,I=String.prototype.toUpperCase,w=String.prototype.toLowerCase,R=RegExp.prototype.test,_=Array.prototype.concat,C=Array.prototype.join,k=Array.prototype.slice,D=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,X=typeof Symbol=="function"&&typeof Symbol.iterator=="object",V=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===X||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,K=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(me){return me.__proto__}:null);function Y(me,Ae){if(me===1/0||me===-1/0||me!==me||me&&me>-1e3&&me<1e3||R.call(/e/,Ae))return Ae;var Je=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof me=="number"){var Xe=me<0?-D(-me):D(me);if(Xe!==me){var ct=String(Xe),dt=S.call(Ae,ct.length+1);return T.call(ct,Je,"$&_")+"."+T.call(T.call(dt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return T.call(Ae,Je,"$&_")}var ee=c2,Q=ee.custom,$=ce(Q)?Q:null;op=function me(Ae,Je,Xe,ct){var dt=Je||{};if(xe(dt,"quoteStyle")&&dt.quoteStyle!=="single"&&dt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xe(dt,"maxStringLength")&&(typeof dt.maxStringLength=="number"?dt.maxStringLength<0&&dt.maxStringLength!==1/0:dt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ii=xe(dt,"customInspect")?dt.customInspect:!0;if(typeof ii!="boolean"&&ii!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xe(dt,"indent")&&dt.indent!==null&&dt.indent!=="	"&&!(parseInt(dt.indent,10)===dt.indent&&dt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xe(dt,"numericSeparator")&&typeof dt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var on=dt.numericSeparator;if(typeof Ae>"u")return"undefined";if(Ae===null)return"null";if(typeof Ae=="boolean")return Ae?"true":"false";if(typeof Ae=="string")return Ie(Ae,dt);if(typeof Ae=="number"){if(Ae===0)return 1/0/Ae>0?"0":"-0";var or=String(Ae);return on?Y(Ae,or):or}if(typeof Ae=="bigint"){var ln=String(Ae)+"n";return on?Y(Ae,ln):ln}var bn=typeof dt.depth>"u"?5:dt.depth;if(typeof Xe>"u"&&(Xe=0),Xe>=bn&&bn>0&&typeof Ae=="object")return de(Ae)?"[Array]":"[Object]";var un=ve(dt,Xe);if(typeof ct>"u")ct=[];else if(ye(ct,Ae)>=0)return"[Circular]";function br(Tn,Ui,hs){if(Ui&&(ct=k.call(ct),ct.push(Ui)),hs){var jn={depth:dt.depth};return xe(dt,"quoteStyle")&&(jn.quoteStyle=dt.quoteStyle),me(Tn,jn,Xe+1,ct)}return me(Tn,dt,Xe+1,ct)}if(typeof Ae=="function"&&!Se(Ae)){var al=se(Ae),cs=Ve(Ae,br);return"[Function"+(al?": "+al:" (anonymous)")+"]"+(cs.length>0?" { "+C.call(cs,", ")+" }":"")}if(ce(Ae)){var fs=X?T.call(String(Ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(Ae);return typeof Ae=="object"&&!X?L(fs):fs}if(Ke(Ae)){for(var J="<"+w.call(String(Ae.nodeName)),ue=Ae.attributes||[],qe=0;qe<ue.length;qe++)J+=" "+ue[qe].name+"="+F(Z(ue[qe].value),"double",dt);return J+=">",Ae.childNodes&&Ae.childNodes.length&&(J+="..."),J+="</"+w.call(String(Ae.nodeName))+">",J}if(de(Ae)){if(Ae.length===0)return"[]";var We=Ve(Ae,br);return un&&!fe(We)?"["+Pe(We,un)+"]":"[ "+C.call(We,", ")+" ]"}if(ae(Ae)){var Qe=Ve(Ae,br);return!("cause"in Error.prototype)&&"cause"in Ae&&!H.call(Ae,"cause")?"{ ["+String(Ae)+"] "+C.call(_.call("[cause]: "+br(Ae.cause),Qe),", ")+" }":Qe.length===0?"["+String(Ae)+"]":"{ ["+String(Ae)+"] "+C.call(Qe,", ")+" }"}if(typeof Ae=="object"&&ii){if($&&typeof Ae[$]=="function"&&ee)return ee(Ae,{depth:bn-Xe});if(ii!=="symbol"&&typeof Ae.inspect=="function")return Ae.inspect()}if(Re(Ae)){var Zt=[];return n&&n.call(Ae,function(Tn,Ui){Zt.push(br(Ui,Ae,!0)+" => "+br(Tn,Ae))}),z("Map",t.call(Ae),Zt,un)}if(pe(Ae)){var xr=[];return o&&o.call(Ae,function(Tn){xr.push(br(Tn,Ae))}),z("Set",a.call(Ae),xr,un)}if(Ce(Ae))return M("WeakMap");if(Ue(Ae))return M("WeakSet");if(je(Ae))return M("WeakRef");if(te(Ae))return L(br(Number(Ae)));if(ne(Ae))return L(br(U.call(Ae)));if(le(Ae))return L(y.call(Ae));if(re(Ae))return L(br(String(Ae)));if(typeof window<"u"&&Ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ae===globalThis||typeof lp<"u"&&Ae===lp)return"{ [object globalThis] }";if(!oe(Ae)&&!Se(Ae)){var xn=Ve(Ae,br),ga=K?K(Ae)===Object.prototype:Ae instanceof Object||Ae.constructor===Object,Sn=Ae instanceof Object?"":"null prototype",Jt=!ga&&V&&Object(Ae)===Ae&&V in Ae?S.call(ie(Ae),8,-1):Sn?"Object":"",Sr=ga||typeof Ae.constructor!="function"?"":Ae.constructor.name?Ae.constructor.name+" ":"",En=Sr+(Jt||Sn?"["+C.call(_.call([],Jt||[],Sn||[]),": ")+"] ":"");return xn.length===0?En+"{}":un?En+"{"+Pe(xn,un)+"}":En+"{ "+C.call(xn,", ")+" }"}return String(Ae)};function F(me,Ae,Je){var Xe=(Je.quoteStyle||Ae)==="double"?'"':"'";return Xe+me+Xe}function Z(me){return T.call(String(me),/"/g,"&quot;")}function de(me){return ie(me)==="[object Array]"&&(!V||!(typeof me=="object"&&V in me))}function oe(me){return ie(me)==="[object Date]"&&(!V||!(typeof me=="object"&&V in me))}function Se(me){return ie(me)==="[object RegExp]"&&(!V||!(typeof me=="object"&&V in me))}function ae(me){return ie(me)==="[object Error]"&&(!V||!(typeof me=="object"&&V in me))}function re(me){return ie(me)==="[object String]"&&(!V||!(typeof me=="object"&&V in me))}function te(me){return ie(me)==="[object Number]"&&(!V||!(typeof me=="object"&&V in me))}function le(me){return ie(me)==="[object Boolean]"&&(!V||!(typeof me=="object"&&V in me))}function ce(me){if(X)return me&&typeof me=="object"&&me instanceof Symbol;if(typeof me=="symbol")return!0;if(!me||typeof me!="object"||!q)return!1;try{return q.call(me),!0}catch{}return!1}function ne(me){if(!me||typeof me!="object"||!U)return!1;try{return U.call(me),!0}catch{}return!1}var Le=Object.prototype.hasOwnProperty||function(me){return me in(this||lp)};function xe(me,Ae){return Le.call(me,Ae)}function ie(me){return x.call(me)}function se(me){if(me.name)return me.name;var Ae=E.call(b.call(me),/^function\s*([\w$]+)/);return Ae?Ae[1]:null}function ye(me,Ae){if(me.indexOf)return me.indexOf(Ae);for(var Je=0,Xe=me.length;Je<Xe;Je++)if(me[Je]===Ae)return Je;return-1}function Re(me){if(!t||!me||typeof me!="object")return!1;try{t.call(me);try{a.call(me)}catch{return!0}return me instanceof Map}catch{}return!1}function Ce(me){if(!c||!me||typeof me!="object")return!1;try{c.call(me,c);try{d.call(me,d)}catch{return!0}return me instanceof WeakMap}catch{}return!1}function je(me){if(!m||!me||typeof me!="object")return!1;try{return m.call(me),!0}catch{}return!1}function pe(me){if(!a||!me||typeof me!="object")return!1;try{a.call(me);try{t.call(me)}catch{return!0}return me instanceof Set}catch{}return!1}function Ue(me){if(!d||!me||typeof me!="object")return!1;try{d.call(me,d);try{c.call(me,c)}catch{return!0}return me instanceof WeakSet}catch{}return!1}function Ke(me){return!me||typeof me!="object"?!1:typeof HTMLElement<"u"&&me instanceof HTMLElement?!0:typeof me.nodeName=="string"&&typeof me.getAttribute=="function"}function Ie(me,Ae){if(me.length>Ae.maxStringLength){var Je=me.length-Ae.maxStringLength,Xe="... "+Je+" more character"+(Je>1?"s":"");return Ie(S.call(me,0,Ae.maxStringLength),Ae)+Xe}var ct=T.call(T.call(me,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lt);return F(ct,"single",Ae)}function lt(me){var Ae=me.charCodeAt(0),Je={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ae];return Je?"\\"+Je:"\\x"+(Ae<16?"0":"")+I.call(Ae.toString(16))}function L(me){return"Object("+me+")"}function M(me){return me+" { ? }"}function z(me,Ae,Je,Xe){var ct=Xe?Pe(Je,Xe):C.call(Je,", ");return me+" ("+Ae+") {"+ct+"}"}function fe(me){for(var Ae=0;Ae<me.length;Ae++)if(ye(me[Ae],`
`)>=0)return!1;return!0}function ve(me,Ae){var Je;if(me.indent==="	")Je="	";else if(typeof me.indent=="number"&&me.indent>0)Je=C.call(Array(me.indent+1)," ");else return null;return{base:Je,prev:C.call(Array(Ae+1),Je)}}function Pe(me,Ae){if(me.length===0)return"";var Je=`
`+Ae.prev+Ae.base;return Je+C.call(me,","+Je)+`
`+Ae.prev}function Ve(me,Ae){var Je=de(me),Xe=[];if(Je){Xe.length=me.length;for(var ct=0;ct<me.length;ct++)Xe[ct]=xe(me,ct)?Ae(me[ct],me):""}var dt=typeof N=="function"?N(me):[],ii;if(X){ii={};for(var on=0;on<dt.length;on++)ii["$"+dt[on]]=dt[on]}for(var or in me)xe(me,or)&&(Je&&String(Number(or))===or&&or<me.length||X&&ii["$"+or]instanceof Symbol||(R.call(/[^\w$]/,or)?Xe.push(Ae(or,me)+": "+Ae(me[or],me)):Xe.push(or+": "+Ae(me[or],me))));if(typeof N=="function")for(var ln=0;ln<dt.length;ln++)H.call(me,dt[ln])&&Xe.push("["+Ae(dt[ln])+"]: "+Ae(me[dt[ln]],me));return Xe}return op}function Kz(){if(VS)return up;VS=!0;var r=Ru(),e=Lz(),t=Hz(),n=If(),i=r("%WeakMap%",!0),s=r("%Map%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),h=e("Map.prototype.set",!0),d=e("Map.prototype.has",!0),g=function(b,E){for(var S=b,T;(T=S.next)!==null;S=T)if(T.key===E)return S.next=T.next,T.next=b.next,b.next=T,T},m=function(b,E){var S=g(b,E);return S&&S.value},y=function(b,E,S){var T=g(b,E);T?T.value=S:b.next={key:E,next:b.next,value:S}},x=function(b,E){return!!g(b,E)};return up=function(){var b,E,S,T={assert:function(I){if(!T.has(I))throw new n("Side channel does not contain "+t(I))},get:function(I){if(i&&I&&(typeof I=="object"||typeof I=="function")){if(b)return a(b,I)}else if(s){if(E)return c(E,I)}else if(S)return m(S,I)},has:function(I){if(i&&I&&(typeof I=="object"||typeof I=="function")){if(b)return u(b,I)}else if(s){if(E)return d(E,I)}else if(S)return x(S,I);return!1},set:function(I,w){i&&I&&(typeof I=="object"||typeof I=="function")?(b||(b=new i),o(b,I,w)):s?(E||(E=new s),h(E,I,w)):(S||(S={key:{},next:null}),y(S,I,w))}};return T},up}function UT(){if(WS)return cp;WS=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return cp={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},cp}function o2(){if(YS)return fp;YS=!0;var r=UT(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var b=[],E=0;E<256;++E)b.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return b})(),i=function(b){for(;b.length>1;){var E=b.pop(),S=E.obj[E.prop];if(t(S)){for(var T=[],I=0;I<S.length;++I)typeof S[I]<"u"&&T.push(S[I]);E.obj[E.prop]=T}}},s=function(b,E){for(var S=E&&E.plainObjects?Object.create(null):{},T=0;T<b.length;++T)typeof b[T]<"u"&&(S[T]=b[T]);return S},a=function b(E,S,T){if(!S)return E;if(typeof S!="object"){if(t(E))E.push(S);else if(E&&typeof E=="object")(T&&(T.plainObjects||T.allowPrototypes)||!e.call(Object.prototype,S))&&(E[S]=!0);else return[E,S];return E}if(!E||typeof E!="object")return[E].concat(S);var I=E;return t(E)&&!t(S)&&(I=s(E,T)),t(E)&&t(S)?(S.forEach(function(w,R){if(e.call(E,R)){var _=E[R];_&&typeof _=="object"&&w&&typeof w=="object"?E[R]=b(_,w,T):E.push(w)}else E[R]=w}),E):Object.keys(S).reduce(function(w,R){var _=S[R];return e.call(w,R)?w[R]=b(w[R],_,T):w[R]=_,w},I)},o=function(b,E){return Object.keys(E).reduce(function(S,T){return S[T]=E[T],S},b)},u=function(b,E,S){var T=b.replace(/\+/g," ");if(S==="iso-8859-1")return T.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(T)}catch{return T}},c=1024,h=function(b,E,S,T,I){if(b.length===0)return b;var w=b;if(typeof b=="symbol"?w=Symbol.prototype.toString.call(b):typeof b!="string"&&(w=String(b)),S==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(N){return"%26%23"+parseInt(N.slice(2),16)+"%3B"});for(var R="",_=0;_<w.length;_+=c){for(var C=w.length>=c?w.slice(_,_+c):w,k=[],D=0;D<C.length;++D){var U=C.charCodeAt(D);if(U===45||U===46||U===95||U===126||U>=48&&U<=57||U>=65&&U<=90||U>=97&&U<=122||I===r.RFC1738&&(U===40||U===41)){k[k.length]=C.charAt(D);continue}if(U<128){k[k.length]=n[U];continue}if(U<2048){k[k.length]=n[192|U>>6]+n[128|U&63];continue}if(U<55296||U>=57344){k[k.length]=n[224|U>>12]+n[128|U>>6&63]+n[128|U&63];continue}D+=1,U=65536+((U&1023)<<10|C.charCodeAt(D)&1023),k[k.length]=n[240|U>>18]+n[128|U>>12&63]+n[128|U>>6&63]+n[128|U&63]}R+=k.join("")}return R},d=function(b){for(var E=[{obj:{o:b},prop:"o"}],S=[],T=0;T<E.length;++T)for(var I=E[T],w=I.obj[I.prop],R=Object.keys(w),_=0;_<R.length;++_){var C=R[_],k=w[C];typeof k=="object"&&k!==null&&S.indexOf(k)===-1&&(E.push({obj:w,prop:C}),S.push(k))}return i(E),b},g=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},m=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},y=function(b,E){return[].concat(b,E)},x=function(b,E){if(t(b)){for(var S=[],T=0;T<b.length;T+=1)S.push(E(b[T]));return S}return E(b)};return fp={arrayToObject:s,assign:o,combine:y,compact:d,decode:u,encode:h,isBuffer:m,isRegExp:g,maybeMap:x,merge:a},fp}function qz(){if(XS)return hp;XS=!0;var r=Kz(),e=o2(),t=UT(),n=Object.prototype.hasOwnProperty,i={brackets:function(x){return x+"[]"},comma:"comma",indices:function(x,b){return x+"["+b+"]"},repeat:function(x){return x}},s=Array.isArray,a=Array.prototype.push,o=function(x,b){a.apply(x,s(b)?b:[b])},u=Date.prototype.toISOString,c=t.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(x){return u.call(x)},skipNulls:!1,strictNullHandling:!1},d=function(x){return typeof x=="string"||typeof x=="number"||typeof x=="boolean"||typeof x=="symbol"||typeof x=="bigint"},g={},m=function x(b,E,S,T,I,w,R,_,C,k,D,U,N,q,X,V,H,K){for(var Y=b,ee=K,Q=0,$=!1;(ee=ee.get(g))!==void 0&&!$;){var F=ee.get(b);if(Q+=1,typeof F<"u"){if(F===Q)throw new RangeError("Cyclic object value");$=!0}typeof ee.get(g)>"u"&&(Q=0)}if(typeof k=="function"?Y=k(E,Y):Y instanceof Date?Y=N(Y):S==="comma"&&s(Y)&&(Y=e.maybeMap(Y,function(ie){return ie instanceof Date?N(ie):ie})),Y===null){if(w)return C&&!V?C(E,h.encoder,H,"key",q):E;Y=""}if(d(Y)||e.isBuffer(Y)){if(C){var Z=V?E:C(E,h.encoder,H,"key",q);return[X(Z)+"="+X(C(Y,h.encoder,H,"value",q))]}return[X(E)+"="+X(String(Y))]}var de=[];if(typeof Y>"u")return de;var oe;if(S==="comma"&&s(Y))V&&C&&(Y=e.maybeMap(Y,C)),oe=[{value:Y.length>0?Y.join(",")||null:void 0}];else if(s(k))oe=k;else{var Se=Object.keys(Y);oe=D?Se.sort(D):Se}var ae=_?E.replace(/\./g,"%2E"):E,re=T&&s(Y)&&Y.length===1?ae+"[]":ae;if(I&&s(Y)&&Y.length===0)return re+"[]";for(var te=0;te<oe.length;++te){var le=oe[te],ce=typeof le=="object"&&typeof le.value<"u"?le.value:Y[le];if(!(R&&ce===null)){var ne=U&&_?le.replace(/\./g,"%2E"):le,Le=s(Y)?typeof S=="function"?S(re,ne):re:re+(U?"."+ne:"["+ne+"]");K.set(b,Q);var xe=r();xe.set(g,K),o(de,x(ce,Le,S,T,I,w,R,_,S==="comma"&&V&&s(Y)?null:C,k,D,U,N,q,X,V,H,xe))}}return de},y=function(x){if(!x)return h;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.encodeDotInKeys<"u"&&typeof x.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(x.encoder!==null&&typeof x.encoder<"u"&&typeof x.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=x.charset||h.charset;if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof x.format<"u"){if(!n.call(t.formatters,x.format))throw new TypeError("Unknown format option provided.");E=x.format}var S=t.formatters[E],T=h.filter;(typeof x.filter=="function"||s(x.filter))&&(T=x.filter);var I;if(x.arrayFormat in i?I=x.arrayFormat:"indices"in x?I=x.indices?"indices":"repeat":I=h.arrayFormat,"commaRoundTrip"in x&&typeof x.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof x.allowDots>"u"?x.encodeDotInKeys===!0?!0:h.allowDots:!!x.allowDots;return{addQueryPrefix:typeof x.addQueryPrefix=="boolean"?x.addQueryPrefix:h.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:I,charset:b,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:h.charsetSentinel,commaRoundTrip:x.commaRoundTrip,delimiter:typeof x.delimiter>"u"?h.delimiter:x.delimiter,encode:typeof x.encode=="boolean"?x.encode:h.encode,encodeDotInKeys:typeof x.encodeDotInKeys=="boolean"?x.encodeDotInKeys:h.encodeDotInKeys,encoder:typeof x.encoder=="function"?x.encoder:h.encoder,encodeValuesOnly:typeof x.encodeValuesOnly=="boolean"?x.encodeValuesOnly:h.encodeValuesOnly,filter:T,format:E,formatter:S,serializeDate:typeof x.serializeDate=="function"?x.serializeDate:h.serializeDate,skipNulls:typeof x.skipNulls=="boolean"?x.skipNulls:h.skipNulls,sort:typeof x.sort=="function"?x.sort:null,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:h.strictNullHandling}};return hp=function(x,b){var E=x,S=y(b),T,I;typeof S.filter=="function"?(I=S.filter,E=I("",E)):s(S.filter)&&(I=S.filter,T=I);var w=[];if(typeof E!="object"||E===null)return"";var R=i[S.arrayFormat],_=R==="comma"&&S.commaRoundTrip;T||(T=Object.keys(E)),S.sort&&T.sort(S.sort);for(var C=r(),k=0;k<T.length;++k){var D=T[k];S.skipNulls&&E[D]===null||o(w,m(E[D],D,R,_,S.allowEmptyArrays,S.strictNullHandling,S.skipNulls,S.encodeDotInKeys,S.encode?S.encoder:null,S.filter,S.sort,S.allowDots,S.serializeDate,S.format,S.formatter,S.encodeValuesOnly,S.charset,C))}var U=w.join(S.delimiter),N=S.addQueryPrefix===!0?"?":"";return S.charsetSentinel&&(S.charset==="iso-8859-1"?N+="utf8=%26%2310003%3B&":N+="utf8=%E2%9C%93&"),U.length>0?N+U:""},hp}function Vz(){if(QS)return dp;QS=!0;var r=o2(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(g){return g.replace(/&#(\d+);/g,function(m,y){return String.fromCharCode(parseInt(y,10))})},s=function(g,m){return g&&typeof g=="string"&&m.comma&&g.indexOf(",")>-1?g.split(","):g},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",u=function(g,m){var y={__proto__:null},x=m.ignoreQueryPrefix?g.replace(/^\?/,""):g;x=x.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var b=m.parameterLimit===1/0?void 0:m.parameterLimit,E=x.split(m.delimiter,b),S=-1,T,I=m.charset;if(m.charsetSentinel)for(T=0;T<E.length;++T)E[T].indexOf("utf8=")===0&&(E[T]===o?I="utf-8":E[T]===a&&(I="iso-8859-1"),S=T,T=E.length);for(T=0;T<E.length;++T)if(T!==S){var w=E[T],R=w.indexOf("]="),_=R===-1?w.indexOf("="):R+1,C,k;_===-1?(C=m.decoder(w,n.decoder,I,"key"),k=m.strictNullHandling?null:""):(C=m.decoder(w.slice(0,_),n.decoder,I,"key"),k=r.maybeMap(s(w.slice(_+1),m),function(U){return m.decoder(U,n.decoder,I,"value")})),k&&m.interpretNumericEntities&&I==="iso-8859-1"&&(k=i(k)),w.indexOf("[]=")>-1&&(k=t(k)?[k]:k);var D=e.call(y,C);D&&m.duplicates==="combine"?y[C]=r.combine(y[C],k):(!D||m.duplicates==="last")&&(y[C]=k)}return y},c=function(g,m,y,x){for(var b=x?m:s(m,y),E=g.length-1;E>=0;--E){var S,T=g[E];if(T==="[]"&&y.parseArrays)S=y.allowEmptyArrays&&(b===""||y.strictNullHandling&&b===null)?[]:[].concat(b);else{S=y.plainObjects?Object.create(null):{};var I=T.charAt(0)==="["&&T.charAt(T.length-1)==="]"?T.slice(1,-1):T,w=y.decodeDotInKeys?I.replace(/%2E/g,"."):I,R=parseInt(w,10);!y.parseArrays&&w===""?S={0:b}:!isNaN(R)&&T!==w&&String(R)===w&&R>=0&&y.parseArrays&&R<=y.arrayLimit?(S=[],S[R]=b):w!=="__proto__"&&(S[w]=b)}b=S}return b},h=function(g,m,y,x){if(g){var b=y.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,E=/(\[[^[\]]*])/,S=/(\[[^[\]]*])/g,T=y.depth>0&&E.exec(b),I=T?b.slice(0,T.index):b,w=[];if(I){if(!y.plainObjects&&e.call(Object.prototype,I)&&!y.allowPrototypes)return;w.push(I)}for(var R=0;y.depth>0&&(T=S.exec(b))!==null&&R<y.depth;){if(R+=1,!y.plainObjects&&e.call(Object.prototype,T[1].slice(1,-1))&&!y.allowPrototypes)return;w.push(T[1])}if(T){if(y.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+y.depth+" and strictDepth is true");w.push("["+b.slice(T.index)+"]")}return c(w,m,y,x)}},d=function(g){if(!g)return n;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=typeof g.charset>"u"?n.charset:g.charset,y=typeof g.duplicates>"u"?n.duplicates:g.duplicates;if(y!=="combine"&&y!=="first"&&y!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var x=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:n.allowDots:!!g.allowDots;return{allowDots:x,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:n.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:n.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:n.arrayLimit,charset:m,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:n.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:n.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:n.decoder,delimiter:typeof g.delimiter=="string"||r.isRegExp(g.delimiter)?g.delimiter:n.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:n.depth,duplicates:y,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:n.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:n.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:n.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:n.strictNullHandling}};return dp=function(g,m){var y=d(m);if(g===""||g===null||typeof g>"u")return y.plainObjects?Object.create(null):{};for(var x=typeof g=="string"?u(g,y):g,b=y.plainObjects?Object.create(null):{},E=Object.keys(x),S=0;S<E.length;++S){var T=E[S],I=h(T,x[T],y,typeof g=="string");b=r.merge(b,I,y)}return y.allowSparse===!0?b:r.compact(b)},dp}function Wz(){if(ZS)return pp;ZS=!0;var r=qz(),e=Vz(),t=UT();return pp={formats:t,parse:e,stringify:r},pp}function Yz(){if(JS)return Ha;JS=!0;var r=za;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),u=["%","/","?",";","#"].concat(o),c=["/","?","#"],h=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=Wz();function E(w,R,_){if(w&&typeof w=="object"&&w instanceof e)return w;var C=new e;return C.parse(w,R,_),C}e.prototype.parse=function(w,R,_){if(typeof w!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof w);var C=w.indexOf("?"),k=C!==-1&&C<w.indexOf("#")?"?":"#",D=w.split(k),U=/\\/g;D[0]=D[0].replace(U,"/"),w=D.join(k);var N=w;if(N=N.trim(),!_&&w.split("#").length===1){var q=i.exec(N);if(q)return this.path=N,this.href=N,this.pathname=q[1],q[2]?(this.search=q[2],R?this.query=b.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var X=t.exec(N);if(X){X=X[0];var V=X.toLowerCase();this.protocol=V,N=N.substr(X.length)}if(_||X||N.match(/^\/\/[^@/]+@[^@/]+/)){var H=N.substr(0,2)==="//";H&&!(X&&y[X])&&(N=N.substr(2),this.slashes=!0)}if(!y[X]&&(H||X&&!x[X])){for(var K=-1,Y=0;Y<c.length;Y++){var ee=N.indexOf(c[Y]);ee!==-1&&(K===-1||ee<K)&&(K=ee)}var Q,$;K===-1?$=N.lastIndexOf("@"):$=N.lastIndexOf("@",K),$!==-1&&(Q=N.slice(0,$),N=N.slice($+1),this.auth=decodeURIComponent(Q)),K=-1;for(var Y=0;Y<u.length;Y++){var ee=N.indexOf(u[Y]);ee!==-1&&(K===-1||ee<K)&&(K=ee)}K===-1&&(K=N.length),this.host=N.slice(0,K),N=N.slice(K),this.parseHost(),this.hostname=this.hostname||"";var F=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!F)for(var Z=this.hostname.split(/\./),Y=0,de=Z.length;Y<de;Y++){var oe=Z[Y];if(oe&&!oe.match(d)){for(var Se="",ae=0,re=oe.length;ae<re;ae++)oe.charCodeAt(ae)>127?Se+="x":Se+=oe[ae];if(!Se.match(d)){var te=Z.slice(0,Y),le=Z.slice(Y+1),ce=oe.match(g);ce&&(te.push(ce[1]),le.unshift(ce[2])),le.length&&(N="/"+le.join(".")+N),this.hostname=te.join(".");break}}}this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=r.toASCII(this.hostname));var ne=this.port?":"+this.port:"",Le=this.hostname||"";this.host=Le+ne,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!m[V])for(var Y=0,de=o.length;Y<de;Y++){var xe=o[Y];if(N.indexOf(xe)!==-1){var ie=encodeURIComponent(xe);ie===xe&&(ie=escape(xe)),N=N.split(xe).join(ie)}}var se=N.indexOf("#");se!==-1&&(this.hash=N.substr(se),N=N.slice(0,se));var ye=N.indexOf("?");if(ye!==-1?(this.search=N.substr(ye),this.query=N.substr(ye+1),R&&(this.query=b.parse(this.query)),N=N.slice(0,ye)):R&&(this.search="",this.query={}),N&&(this.pathname=N),x[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ne=this.pathname||"",Re=this.search||"";this.path=ne+Re}return this.href=this.format(),this};function S(w){return typeof w=="string"&&(w=E(w)),w instanceof e?w.format():e.prototype.format.call(w)}e.prototype.format=function(){var w=this.auth||"";w&&(w=encodeURIComponent(w),w=w.replace(/%3A/i,":"),w+="@");var R=this.protocol||"",_=this.pathname||"",C=this.hash||"",k=!1,D="";this.host?k=w+this.host:this.hostname&&(k=w+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(D=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var U=this.search||D&&"?"+D||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||x[R])&&k!==!1?(k="//"+(k||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):k||(k=""),C&&C.charAt(0)!=="#"&&(C="#"+C),U&&U.charAt(0)!=="?"&&(U="?"+U),_=_.replace(/[?#]/g,function(N){return encodeURIComponent(N)}),U=U.replace("#","%23"),R+k+_+U+C};function T(w,R){return E(w,!1,!0).resolve(R)}e.prototype.resolve=function(w){return this.resolveObject(E(w,!1,!0)).format()};function I(w,R){return w?E(w,!1,!0).resolveObject(R):R}return e.prototype.resolveObject=function(w){if(typeof w=="string"){var R=new e;R.parse(w,!1,!0),w=R}for(var _=new e,C=Object.keys(this),k=0;k<C.length;k++){var D=C[k];_[D]=this[D]}if(_.hash=w.hash,w.href==="")return _.href=_.format(),_;if(w.slashes&&!w.protocol){for(var U=Object.keys(w),N=0;N<U.length;N++){var q=U[N];q!=="protocol"&&(_[q]=w[q])}return x[_.protocol]&&_.hostname&&!_.pathname&&(_.pathname="/",_.path=_.pathname),_.href=_.format(),_}if(w.protocol&&w.protocol!==_.protocol){if(!x[w.protocol]){for(var X=Object.keys(w),V=0;V<X.length;V++){var H=X[V];_[H]=w[H]}return _.href=_.format(),_}if(_.protocol=w.protocol,!w.host&&!y[w.protocol]){for(var de=(w.pathname||"").split("/");de.length&&!(w.host=de.shift()););w.host||(w.host=""),w.hostname||(w.hostname=""),de[0]!==""&&de.unshift(""),de.length<2&&de.unshift(""),_.pathname=de.join("/")}else _.pathname=w.pathname;if(_.search=w.search,_.query=w.query,_.host=w.host||"",_.auth=w.auth,_.hostname=w.hostname||w.host,_.port=w.port,_.pathname||_.search){var K=_.pathname||"",Y=_.search||"";_.path=K+Y}return _.slashes=_.slashes||w.slashes,_.href=_.format(),_}var ee=_.pathname&&_.pathname.charAt(0)==="/",Q=w.host||w.pathname&&w.pathname.charAt(0)==="/",$=Q||ee||_.host&&w.pathname,F=$,Z=_.pathname&&_.pathname.split("/")||[],de=w.pathname&&w.pathname.split("/")||[],oe=_.protocol&&!x[_.protocol];if(oe&&(_.hostname="",_.port=null,_.host&&(Z[0]===""?Z[0]=_.host:Z.unshift(_.host)),_.host="",w.protocol&&(w.hostname=null,w.port=null,w.host&&(de[0]===""?de[0]=w.host:de.unshift(w.host)),w.host=null),$=$&&(de[0]===""||Z[0]==="")),Q)_.host=w.host||w.host===""?w.host:_.host,_.hostname=w.hostname||w.hostname===""?w.hostname:_.hostname,_.search=w.search,_.query=w.query,Z=de;else if(de.length)Z||(Z=[]),Z.pop(),Z=Z.concat(de),_.search=w.search,_.query=w.query;else if(w.search!=null){if(oe){_.host=Z.shift(),_.hostname=_.host;var Se=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;Se&&(_.auth=Se.shift(),_.hostname=Se.shift(),_.host=_.hostname)}return _.search=w.search,_.query=w.query,(_.pathname!==null||_.search!==null)&&(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_}if(!Z.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var ae=Z.slice(-1)[0],re=(_.host||w.host||Z.length>1)&&(ae==="."||ae==="..")||ae==="",te=0,le=Z.length;le>=0;le--)ae=Z[le],ae==="."?Z.splice(le,1):ae===".."?(Z.splice(le,1),te++):te&&(Z.splice(le,1),te--);if(!$&&!F)for(;te--;te)Z.unshift("..");$&&Z[0]!==""&&(!Z[0]||Z[0].charAt(0)!=="/")&&Z.unshift(""),re&&Z.join("/").substr(-1)!=="/"&&Z.push("");var ce=Z[0]===""||Z[0]&&Z[0].charAt(0)==="/";if(oe){_.hostname=ce?"":Z.length?Z.shift():"",_.host=_.hostname;var Se=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;Se&&(_.auth=Se.shift(),_.hostname=Se.shift(),_.host=_.hostname)}return $=$||_.host&&Z.length,$&&!ce&&Z.unshift(""),Z.length>0?_.pathname=Z.join("/"):(_.pathname=null,_.path=null),(_.pathname!==null||_.search!==null)&&(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=w.auth||_.auth,_.slashes=_.slashes||w.slashes,_.href=_.format(),_},e.prototype.parseHost=function(){var w=this.host,R=n.exec(w);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),w=w.substr(0,w.length-R.length)),w&&(this.hostname=w)},Ha.parse=E,Ha.resolve=T,Ha.resolveObject=I,Ha.format=S,Ha.Url=e,Ha}function l2(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Lp?Xz(r):Qz(r)}function Xz(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(S2,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<b2||n>x2||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Qz(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function u2(r){let e=KS.resolve(r),t=r.charCodeAt(r.length-1);(t===v2||Lp&&t===y2)&&e[e.length-1]!==KS.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(E2,"%25")),!Lp&&e.includes("\\")&&(e=e.replace(T2,"%5C")),e.includes(`
`)&&(e=e.replace(A2,"%0A")),e.includes("\r")&&(e=e.replace(w2,"%0D")),e.includes("	")&&(e=e.replace(_2,"%09")),n.pathname=e,n}var c2,op,qS,lp,up,VS,cp,WS,fp,YS,hp,XS,dp,QS,pp,ZS,Ha,JS,en,tL,f2,h2,d2,p2,g2,m2,y2,v2,b2,x2,Lp,S2,E2,T2,A2,w2,_2,Zz=Nn(()=>{Me(),Be(),Ne(),gz(),Cz(),zz(),s2(),c2=Object.freeze(Object.create(null)),op={},qS=!1,lp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,up={},VS=!1,cp={},WS=!1,fp={},YS=!1,hp={},XS=!1,dp={},QS=!1,pp={},ZS=!1,Ha={},JS=!1,en=Yz(),en.parse,en.resolve,en.resolveObject,en.format,en.Url,tL=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,en.URL=typeof URL<"u"?URL:null,en.pathToFileURL=u2,en.fileURLToPath=l2,f2=en.Url,h2=en.format,d2=en.resolve,p2=en.resolveObject,g2=en.parse,m2=en.URL,y2=92,v2=47,b2=97,x2=122,Lp=tL==="win32",S2=/\//g,E2=/%/g,T2=/\\/g,A2=/\n/g,w2=/\r/g,_2=/\t/g}),Jz=$e((r,e)=>{Me(),Be(),Ne(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),jT=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=nl(),t=(jr(),Nt(Ur));function n(s,a){let o=new Array(s.length);for(let u=0;u<s.length;u++)typeof s[u].chunk=="string"?o[u]=t.Buffer.from(s[u].chunk,"utf8"):o[u]=s[u].chunk;this._write(t.Buffer.concat(o),"binary",a)}var i=class extends e.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(s,a,o){super({objectMode:!0}),this.proxy=a,this.socket=o,this.writeQueue=[],s.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",u=>{!this.destroyed&&this.readable&&this.push(u)})}_read(s){this.proxy.read(s)}_write(s,a,o){this.isSocketOpen?this.writeToProxy(s,a,o):this.writeQueue.push({chunk:s,encoding:a,cb:o})}_final(s){this.writeQueue=[],this.proxy.end(s)}_destroy(s,a){this.writeQueue=[],this.proxy.destroy(),a(s)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(s,a,o){this.proxy.write(s,a)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:s,encoding:a,cb:o}=this.writeQueue.shift();this.writeToProxy(s,a,o)}}};r.BufferedDuplex=i}),ud=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(jr(),Nt(Ur)),n=e(Jz()),i=e(Xs()),s=nl(),a=e(Fg()),o=jT(),u=(0,i.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function h(E,S){let T=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(T=E.transformWsUrl(T,E,S)),T}function d(E){let S=E;return E.port||(E.protocol==="wss"?S.port=443:S.port=80),E.path||(S.path="/"),E.wsOptions||(S.wsOptions={}),!a.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&c.forEach(T=>{Object.prototype.hasOwnProperty.call(E,T)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,T)&&(S.wsOptions[T]=E[T])}),S}function g(E){let S=d(E);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let T=new URL(document.URL);S.hostname=T.hostname,S.port||(S.port=Number(T.port))}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function m(E,S,T){u("createWebSocket"),u(`protocol: ${T.protocolId} ${T.protocolVersion}`);let I=T.protocolId==="MQIsdp"&&T.protocolVersion===3?"mqttv3.1":"mqtt";u(`creating new Websocket for url: ${S} and protocol: ${I}`);let w;return T.createWebsocket?w=T.createWebsocket(S,[I],T):w=new n.default(S,[I],T.wsOptions),w}function y(E,S){let T=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",I=h(S,E),w;return S.createWebsocket?w=S.createWebsocket(I,[T],S):w=new WebSocket(I,[T]),w.binaryType="arraybuffer",w}var x=(E,S)=>{u("streamBuilder");let T=d(S);T.hostname=T.hostname||T.host||"localhost";let I=h(T,E),w=m(E,I,T),R=n.default.createWebSocketStream(w,T.wsOptions);return R.url=I,w.on("close",()=>{R.destroy()}),R};r.streamBuilder=x;var b=(E,S)=>{u("browserStreamBuilder");let T,I=g(S).browserBufferSize||1024*512,w=S.browserBufferTimeout||1e3,R=!S.objectMode,_=y(E,S),C=D(S,V,H);S.objectMode||(C._writev=o.writev.bind(C)),C.on("close",()=>{_.close()});let k=typeof _.addEventListener<"u";_.readyState===_.OPEN?(T=C,T.socket=_):(T=new o.BufferedDuplex(S,C,_),k?_.addEventListener("open",U):_.onopen=U),k?(_.addEventListener("close",N),_.addEventListener("error",q),_.addEventListener("message",X)):(_.onclose=N,_.onerror=q,_.onmessage=X);function D(K,Y,ee){let Q=new s.Transform({objectMode:K.objectMode});return Q._write=Y,Q._flush=ee,Q}function U(){u("WebSocket onOpen"),T instanceof o.BufferedDuplex&&T.socketReady()}function N(K){u("WebSocket onClose",K),T.end(),T.destroy()}function q(K){u("WebSocket onError",K);let Y=new Error("WebSocket error");Y.event=K,T.destroy(Y)}async function X(K){if(!C||!C.readable||!C.writable)return;let{data:Y}=K;Y instanceof ArrayBuffer?Y=t.Buffer.from(Y):Y instanceof Blob?Y=t.Buffer.from(await new Response(Y).arrayBuffer()):Y=t.Buffer.from(Y,"utf8"),C.push(Y)}function V(K,Y,ee){if(_.bufferedAmount>I){setTimeout(V,w,K,Y,ee);return}R&&typeof K=="string"&&(K=t.Buffer.from(K,"utf8"));try{_.send(K)}catch(Q){return ee(Q)}ee()}function H(K){_.close(),K()}return T};r.browserStreamBuilder=b}),FT={};_u(FT,{Server:()=>Yt,Socket:()=>Yt,Stream:()=>Yt,_createServerHandle:()=>Yt,_normalizeArgs:()=>Yt,_setSimultaneousAccepts:()=>Yt,connect:()=>Yt,createConnection:()=>Yt,createServer:()=>Yt,default:()=>I2,isIP:()=>Yt,isIPv4:()=>Yt,isIPv6:()=>Yt});function Yt(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var I2,O2=Nn(()=>{Me(),Be(),Ne(),I2={_createServerHandle:Yt,_normalizeArgs:Yt,_setSimultaneousAccepts:Yt,connect:Yt,createConnection:Yt,createServer:Yt,isIP:Yt,isIPv4:Yt,isIPv6:Yt,Server:Yt,Socket:Yt,Stream:Yt}}),R2=$e((r,e)=>{Me(),Be(),Ne(),e.exports={}}),rL=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((O2(),Nt(FT))),n=e(Xs()),i=e(R2()),s=(0,n.default)("mqttjs:tcp"),a=(o,u)=>{if(u.port=u.port||1883,u.hostname=u.hostname||u.host||"localhost",u.socksProxy)return(0,i.default)(u.hostname,u.port,u.socksProxy,{timeout:u.socksTimeout});let{port:c,path:h}=u,d=u.hostname;return s("port %d and host %s",c,d),t.default.createConnection({port:c,host:d,path:h})};r.default=a}),L2={};_u(L2,{default:()=>C2});var C2,eH=Nn(()=>{Me(),Be(),Ne(),C2={}}),nL=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=(eH(),Nt(L2)),n=e((O2(),Nt(FT))),i=e(Xs()),s=e(R2()),a=(0,i.default)("mqttjs:tls");function o(c){let{host:h,port:d,socksProxy:g,...m}=c;if(g!==void 0){let y=(0,s.default)(h,d,g,{timeout:c.socksTimeout});return(0,t.connect)({...m,socket:y})}return(0,t.connect)(c)}var u=(c,h)=>{h.port=h.port||8883,h.host=h.hostname||h.host||"localhost",n.default.isIP(h.host)===0&&(h.servername=h.host),h.rejectUnauthorized=h.rejectUnauthorized!==!1,delete h.path,a("port %d host %s rejectUnauthorized %b",h.port,h.host,h.rejectUnauthorized);let d=o(h);d.on("secureConnect",()=>{h.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",g)});function g(m){h.rejectUnauthorized&&c.emit("error",m),d.end()}return d.on("error",g),d};r.default=u}),iL=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(jr(),Nt(Ur)),t=nl(),n=jT(),i,s,a;function o(){let g=new t.Transform;return g._write=(m,y,x)=>{i.send({data:m.buffer,success(){x()},fail(b){x(new Error(b))}})},g._flush=m=>{i.close({success(){m()}})},g}function u(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,m){let y=g.protocol==="wxs"?"wss":"ws",x=`${y}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(x=`${y}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(x=g.transformWsUrl(x,g,m)),x}function h(){i.onOpen(()=>{a.socketReady()}),i.onMessage(g=>{let{data:m}=g;m instanceof ArrayBuffer?m=e.Buffer.from(m):m=e.Buffer.from(m,"utf8"),s.push(m)}),i.onClose(()=>{a.emit("close"),a.end(),a.destroy()}),i.onError(g=>{let m=new Error(g.errMsg);a.destroy(m)})}var d=(g,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let y=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";u(m);let x=c(m,g);i=wx.connectSocket({url:x,protocols:[y]}),s=o(),a=new n.BufferedDuplex(m,s,i),a._destroy=(E,S)=>{i.close({success(){S&&S(E)}})};let b=a.destroy;return a.destroy=(E,S)=>(a.destroy=b,setTimeout(()=>{i.close({fail(){a._destroy(E,S)}})},0),a),h(),a};r.default=d}),sL=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(jr(),Nt(Ur)),t=nl(),n=jT(),i,s,a,o=!1;function u(){let m=new t.Transform;return m._write=(y,x,b)=>{i.sendSocketMessage({data:y.buffer,success(){b()},fail(){b(new Error)}})},m._flush=y=>{i.closeSocket({success(){y()}})},m}function c(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function h(m,y){let x=m.protocol==="alis"?"wss":"ws",b=`${x}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(b=`${x}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(b=m.transformWsUrl(b,m,y)),b}function d(){o||(o=!0,i.onSocketOpen(()=>{a.socketReady()}),i.onSocketMessage(m=>{if(typeof m.data=="string"){let y=e.Buffer.from(m.data,"base64");s.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{if(y.result instanceof ArrayBuffer){s.push(e.Buffer.from(y.result));return}s.push(e.Buffer.from(y.result,"utf-8"))}),y.readAsArrayBuffer(m.data)}}),i.onSocketClose(()=>{a.end(),a.destroy()}),i.onSocketError(m=>{a.destroy(m)}))}var g=(m,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let x=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";c(y);let b=h(y,m);return i=y.my,i.connectSocket({url:b,protocols:x}),s=u(),a=new n.BufferedDuplex(y,s,i),d(),a};r.default=g}),tH=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=h;var t=e(Xs()),n=e((Zz(),Nt(a2))),i=e(hS()),s=e(Fg());typeof zt?.nextTick!="function"&&(zt.nextTick=setImmediate);var a=(0,t.default)("mqttjs"),o=null;function u(d){let g;if(d.auth)if(g=d.auth.match(/^(.+):(.+)$/),g){let[,m,y]=g;d.username=m,d.password=y}else d.username=d.auth}function c(d,g){if(a("connecting to an MQTT broker..."),typeof d=="object"&&!g&&(g=d,d=""),g=g||{},d&&typeof d=="string"){let x=n.default.parse(d,!0),b={};if(x.port!=null&&(b.port=Number(x.port)),b.host=x.hostname,b.query=x.query,b.auth=x.auth,b.protocol=x.protocol,b.path=x.path,g={...b,...g},!g.protocol)throw new Error("Missing protocol");g.protocol=g.protocol.replace(/:$/,"")}if(g.unixSocket=g.unixSocket||g.protocol?.includes("+unix"),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!g.protocol?.startsWith("ws")&&!g.protocol?.startsWith("wx")&&delete g.path,u(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),s.default||g.unixSocket?g.socksProxy=void 0:g.socksProxy===void 0&&typeof zt<"u"&&(g.socksProxy=zt.env.MQTTJS_SOCKS_PROXY),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(o||(o={},!s.default&&!g.forceNativeWebSocket?(o.ws=ud().streamBuilder,o.wss=ud().streamBuilder,o.mqtt=rL().default,o.tcp=rL().default,o.ssl=nL().default,o.tls=o.ssl,o.mqtts=nL().default):(o.ws=ud().browserStreamBuilder,o.wss=ud().browserStreamBuilder,o.wx=iL().default,o.wxs=iL().default,o.ali=sL().default,o.alis=sL().default)),!o[g.protocol]){let x=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((b,E)=>x&&E%2===0?!1:typeof o[b]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function m(x){return g.servers&&((!x._reconnectCount||x._reconnectCount===g.servers.length)&&(x._reconnectCount=0),g.host=g.servers[x._reconnectCount].host,g.port=g.servers[x._reconnectCount].port,g.protocol=g.servers[x._reconnectCount].protocol?g.servers[x._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,x._reconnectCount++),a("calling streambuilder for",g.protocol),o[g.protocol](x,g)}let y=new i.default(m,g);return y.on("error",()=>{}),y}function h(d,g,m=!0){return new Promise((y,x)=>{let b=c(d,g),E={connect:T=>{S(),y(b)},end:()=>{S(),y(b)},error:T=>{S(),b.end(),x(T)}};m===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function S(){Object.keys(E).forEach(T=>{b.off(T,E[T])})}Object.keys(E).forEach(T=>{b.on(T,E[T])})})}r.default=c}),aL=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(m,y,x,b){b===void 0&&(b=x);var E=Object.getOwnPropertyDescriptor(y,x);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[x]}}),Object.defineProperty(m,b,E)}:function(m,y,x,b){b===void 0&&(b=x),m[b]=y[x]}),t=r&&r.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),n=r&&r.__importStar||(function(){var m=function(y){return m=Object.getOwnPropertyNames||function(x){var b=[];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(b[b.length]=E);return b},m(y)};return function(y){if(y&&y.__esModule)return y;var x={};if(y!=null)for(var b=m(y),E=0;E<b.length;E++)b[E]!=="default"&&e(x,y,b[E]);return t(x,y),x}})(),i=r&&r.__exportStar||function(m,y){for(var x in m)x!=="default"&&!Object.prototype.hasOwnProperty.call(y,x)&&e(y,m,x)},s=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var a=s(hS());r.MqttClient=a.default;var o=s(VN());r.DefaultMessageIdProvider=o.default;var u=s(dz());r.UniqueMessageIdProvider=u.default;var c=s(LN());r.Store=c.default;var h=n(tH());r.connect=h.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var d=s(e2());r.KeepaliveManager=d.default,r.Client=a.default,i(hS(),r),i(Ou(),r);var g=Ug();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),rH=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(a,o,u,c){c===void 0&&(c=u);var h=Object.getOwnPropertyDescriptor(o,u);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(a,c,h)}:function(a,o,u,c){c===void 0&&(c=u),a[c]=o[u]}),t=r&&r.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=r&&r.__importStar||(function(){var a=function(o){return a=Object.getOwnPropertyNames||function(u){var c=[];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[c.length]=h);return c},a(o)};return function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var c=a(o),h=0;h<c.length;h++)c[h]!=="default"&&e(u,o,c[h]);return t(u,o),u}})(),i=r&&r.__exportStar||function(a,o){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,a,u)};Object.defineProperty(r,"__esModule",{value:!0});var s=n(aL());r.default=s,i(aL(),r)});const nH=rH();const iH="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",sH="8884",aH="esp32-client-01",oH="Qjawns3445";let qi=null;const au=[];function Zc(){if(qi)return qi;const r=`wss://${iH}:${sH}/mqtt`;return console.log(` Connecting to HiveMQ Cloud: ${r}`),qi=nH.connect(r,{username:aH,password:oH,clean:!0,reconnectPeriod:3e3,clientId:`tansaeng-web-${Math.random().toString(16).slice(2,10)}`}),qi.on("connect",()=>{console.log(" MQTT Connected to HiveMQ Cloud"),au.forEach(e=>e(!0))}),qi.on("error",e=>{console.error(" MQTT Connection Error:",e),au.forEach(t=>t(!1))}),qi.on("reconnect",()=>{console.log(" MQTT Reconnecting...")}),qi.on("offline",()=>{console.log(" MQTT Offline"),au.forEach(e=>e(!1))}),qi}function P2(r){return au.push(r),qi&&r(qi.connected),()=>{const e=au.indexOf(r);e>-1&&au.splice(e,1)}}function tn(r,e){const t=Zc();let n;"power"in e?n=e.power.toUpperCase():n=JSON.stringify(e),t.publish(r,n,{qos:1},i=>{i?console.error(` Failed to publish to ${r}:`,i):console.log(` Published to ${r}:`,n)})}function lH({deviceState:r,setDeviceState:e}){const[t,n]=P.useState(!1),[i,s]=P.useState({}),a=P.useRef({}),o=P.useRef({}),[u,c]=P.useState("manual"),[h,d]=P.useState(Cs.reduce((_,C)=>(_[C.controllerId]={enabled:!1,tempMin:18,tempMax:28,humMin:40,humMax:70},_),{})),[g,m]=P.useState({enabled:!1,startTime:"09:00",endTime:"18:00",openSeconds:10,closeMinutes:5}),[y,x]=P.useState({front:{temperature:null,humidity:null},back:{temperature:null,humidity:null},top:{temperature:null,humidity:null}}),b=Ky("fan"),E=Ky("vent"),S=Ky("pump");P.useEffect(()=>P2(C=>{n(C),C||(s({}),a.current={},o.current={})}),[]),P.useEffect(()=>{const _=Zc(),C=(D,U)=>{const N=Date.now(),q=["ctlr-0001","ctlr-0002","ctlr-0003"];for(const V of q)if(D===`tansaeng/${V}/dht11/temperature`||D===`tansaeng/${V}/dht11/humidity`||D===`tansaeng/${V}/dht22/temperature`||D===`tansaeng/${V}/dht22/humidity`){const H=`${V}:${D}`;if(!o.current[H]){o.current[H]=!0,console.log(` Skipping initial retained message for ${V} on ${D}`);return}a.current[V]=N,s(K=>({...K,[V]:!0})),console.log(` Sensor data received from ${V}`);return}const X=Cs.find(V=>D===V.statusTopic);if(X){const V=U.toString().trim();V.toLowerCase()==="online"?(a.current[X.controllerId]=N,s(H=>({...H,[X.controllerId]:!0})),console.log(` ESP32 ${X.name} (${X.controllerId}) connected`)):V.toLowerCase()==="offline"&&(delete a.current[X.controllerId],s(H=>({...H,[X.controllerId]:!1})),console.log(` ESP32 ${X.name} (${X.controllerId}) disconnected`))}};_.on("message",C);const k=["tansaeng/ctlr-0001/dht11/temperature","tansaeng/ctlr-0001/dht11/humidity","tansaeng/ctlr-0002/dht22/temperature","tansaeng/ctlr-0002/dht22/humidity","tansaeng/ctlr-0003/dht22/temperature","tansaeng/ctlr-0003/dht22/humidity"];return k.forEach(D=>{_.subscribe(D,{qos:1})}),Cs.forEach(D=>{_.subscribe(D.statusTopic,{qos:1})}),()=>{_.off("message",C),k.forEach(D=>{_.unsubscribe(D)}),Cs.forEach(D=>{_.unsubscribe(D.statusTopic)})}},[]),P.useEffect(()=>{const C=setInterval(()=>{const k=Date.now(),D={};Cs.forEach(U=>{const N=a.current[U.controllerId];N&&k-N<3e4?D[U.controllerId]=!0:(D[U.controllerId]=!1,N&&i[U.controllerId]&&console.log(` ESP32 ${U.name} (${U.controllerId}) timeout`))}),s(D)},5e3);return()=>clearInterval(C)},[i]),P.useEffect(()=>{const _=Zc(),C=(D,U)=>{const N=parseFloat(U.toString());D==="tansaeng/ctlr-0001/dht11/temperature"?x(q=>({...q,front:{...q.front,temperature:N}})):D==="tansaeng/ctlr-0001/dht11/humidity"?x(q=>({...q,front:{...q.front,humidity:N}})):D==="tansaeng/ctlr-0002/dht22/temperature"?x(q=>({...q,back:{...q.back,temperature:N}})):D==="tansaeng/ctlr-0002/dht22/humidity"?x(q=>({...q,back:{...q.back,humidity:N}})):D==="tansaeng/ctlr-0003/dht22/temperature"?x(q=>({...q,top:{...q.top,temperature:N}})):D==="tansaeng/ctlr-0003/dht22/humidity"&&x(q=>({...q,top:{...q.top,humidity:N}}))};_.on("message",C);const k=["tansaeng/ctlr-0001/dht11/temperature","tansaeng/ctlr-0001/dht11/humidity","tansaeng/ctlr-0002/dht22/temperature","tansaeng/ctlr-0002/dht22/humidity","tansaeng/ctlr-0003/dht22/temperature","tansaeng/ctlr-0003/dht22/humidity"];return k.forEach(D=>_.subscribe(D,{qos:1})),()=>{_.off("message",C),k.forEach(D=>_.unsubscribe(D))}},[]),P.useEffect(()=>{if(u!=="auto")return;const _=[y.front.temperature,y.back.temperature,y.top.temperature].filter(U=>U!==null),C=[y.front.humidity,y.back.humidity,y.top.humidity].filter(U=>U!==null);if(_.length===0||C.length===0)return;const k=_.reduce((U,N)=>U+N,0)/_.length,D=C.reduce((U,N)=>U+N,0)/C.length;Cs.forEach(U=>{const N=h[U.controllerId];N?.enabled&&(k>N.tempMax?(tn(`tansaeng/${U.controllerId}/fan1/cmd`,{power:"on"}),tn(`tansaeng/${U.controllerId}/fan2/cmd`,{power:"on"}),tn(`tansaeng/${U.controllerId}/vent_side_left/cmd`,{target:80}),tn(`tansaeng/${U.controllerId}/vent_side_right/cmd`,{target:80})):k<N.tempMin&&(tn(`tansaeng/${U.controllerId}/fan1/cmd`,{power:"off"}),tn(`tansaeng/${U.controllerId}/fan2/cmd`,{power:"off"}),tn(`tansaeng/${U.controllerId}/vent_side_left/cmd`,{target:20}),tn(`tansaeng/${U.controllerId}/vent_side_right/cmd`,{target:20})),D>N.humMax?(tn(`tansaeng/${U.controllerId}/vent_top_left/cmd`,{target:80}),tn(`tansaeng/${U.controllerId}/vent_top_right/cmd`,{target:80})):D<N.humMin&&(tn(`tansaeng/${U.controllerId}/vent_top_left/cmd`,{target:20}),tn(`tansaeng/${U.controllerId}/vent_top_right/cmd`,{target:20})))})},[y,u,h]);const T=(_,C)=>{const k={...r,[_]:{...r[_],power:C?"on":"off",lastSavedAt:new Date().toISOString()}};e(k);const D=[...b,...E,...S].find(U=>U.id===_);D&&tn(D.commandTopic,{power:C?"on":"off"})},I=(_,C)=>{const k={...r,[_]:{...r[_],targetPercentage:C,lastSavedAt:new Date().toISOString()}};e(k);const D=E.find(U=>U.id===_);D&&tn(D.commandTopic,{target:C})},w=Object.values(i).filter(Boolean).length,R=Cs.length;return G.jsx("div",{className:"bg-gray-50",children:G.jsxs("div",{className:"max-w-screen-2xl mx-auto p-3",children:[G.jsx("header",{className:"bg-white border-2 border-farm-500 px-4 py-3 rounded-lg mb-3 shadow-md",children:G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{children:[G.jsx("h1",{className:"text-xl font-bold mb-1 text-gray-900",children:"  "}),G.jsx("p",{className:"text-xs text-gray-600",children:", ,     "})]}),G.jsxs("div",{className:"flex items-center gap-2 bg-farm-50 border border-farm-200 px-3 py-1.5 rounded-md",children:[G.jsx("div",{className:`
                w-2.5 h-2.5 rounded-full
                ${t&&w>0?"bg-farm-500 animate-pulse":"bg-red-500"}
              `}),G.jsxs("span",{className:"text-xs font-medium text-gray-900",children:["MQTT ",t?"":" "," (",w,"/",R," )"]})]})]})}),G.jsxs("section",{className:"mb-3",children:[G.jsx("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg",children:G.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:" ESP32   "})}),G.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:G.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-2",children:Cs.map(_=>{const C=i[_.controllerId]===!0,k=a.current[_.controllerId],D=k?Math.floor((Date.now()-k)/1e3):null;return G.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-md border transition-colors ${C?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"}`,children:[G.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${C?"bg-green-500 animate-pulse":"bg-gray-400"}`}),G.jsxs("div",{className:"flex-1 min-w-0",children:[G.jsx("span",{className:"text-xs font-medium text-gray-900 block truncate",children:_.name}),G.jsxs("span",{className:"text-xs text-gray-500",children:[_.controllerId,D!==null&&C&&G.jsxs("span",{className:"ml-1",children:["(",D," )"]})]})]}),G.jsx("span",{className:`text-xs font-medium flex-shrink-0 ${C?"text-green-600":"text-gray-500"}`,children:C?"ON":"OFF"})]},_.id)})})})]}),G.jsxs("section",{className:"mb-3",children:[G.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[G.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"   "}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("span",{className:"text-xs text-gray-800 font-medium",children:""}),G.jsx("button",{onClick:()=>c(u==="manual"?"auto":"manual"),className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${u==="auto"?"bg-green-500":"bg-gray-300"}`,children:G.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u==="auto"?"translate-x-7":"translate-x-1"}`})}),G.jsx("span",{className:"text-xs text-gray-800 font-medium",children:""})]})]}),G.jsxs("div",{className:"bg-white shadow-sm rounded-b-lg p-4",children:[G.jsx("div",{className:"mb-4 p-3 bg-farm-50 rounded-lg border border-farm-200",children:G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("span",{className:"text-xs text-gray-600",children:" :"}),G.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-900",children:(()=>{const _=[y.front.temperature,y.back.temperature,y.top.temperature].filter(k=>k!==null);return _.length===0?"N/A":`${(_.reduce((k,D)=>k+D,0)/_.length).toFixed(2)}C`})()})]}),G.jsxs("div",{children:[G.jsx("span",{className:"text-xs text-gray-600",children:" :"}),G.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-900",children:(()=>{const _=[y.front.humidity,y.back.humidity,y.top.humidity].filter(k=>k!==null);return _.length===0?"N/A":`${(_.reduce((k,D)=>k+D,0)/_.length).toFixed(2)}%`})()})]})]})}),G.jsxs("div",{className:"space-y-4",children:[G.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"ESP32   "}),Cs.map(_=>{const C=h[_.controllerId],k=i[_.controllerId]===!0,D=_.controllerId==="ctlr-0004";return G.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${k?"bg-green-500 animate-pulse":"bg-gray-400"}`}),G.jsx("span",{className:"text-sm font-semibold text-gray-900",children:_.name}),G.jsxs("span",{className:"text-xs text-gray-500",children:["(",_.controllerId,")"]})]}),G.jsx("button",{onClick:()=>d({...h,[_.controllerId]:{...C,enabled:!C.enabled}}),className:`px-4 py-1.5 rounded-md text-xs font-medium transition-colors ${C.enabled?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:C.enabled?" ON":" OFF"})]}),G.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:"  (C)"}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("input",{type:"number",value:C.tempMin,onChange:U=>d({...h,[_.controllerId]:{...C,tempMin:parseFloat(U.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"0.5",placeholder:""}),G.jsx("span",{className:"text-xs text-gray-500",children:"~"}),G.jsx("input",{type:"number",value:C.tempMax,onChange:U=>d({...h,[_.controllerId]:{...C,tempMax:parseFloat(U.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"0.5",placeholder:""})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:"  (%)"}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("input",{type:"number",value:C.humMin,onChange:U=>d({...h,[_.controllerId]:{...C,humMin:parseFloat(U.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"1",placeholder:""}),G.jsx("span",{className:"text-xs text-gray-500",children:"~"}),G.jsx("input",{type:"number",value:C.humMax,onChange:U=>d({...h,[_.controllerId]:{...C,humMax:parseFloat(U.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"1",placeholder:""})]})]})]}),D&&G.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[G.jsx("h4",{className:"text-xs font-semibold text-gray-900 mb-3",children:"  "}),G.jsx("div",{className:"mb-3",children:G.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[G.jsx("input",{type:"checkbox",checked:g.enabled,onChange:U=>m({...g,enabled:U.target.checked}),className:"w-4 h-4 text-farm-500 border-gray-300 rounded focus:ring-farm-500"}),G.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"24 "})]})}),G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:" "}),G.jsx("input",{type:"time",value:g.startTime,onChange:U=>m({...g,startTime:U.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:" "}),G.jsx("input",{type:"time",value:g.endTime,onChange:U=>m({...g,endTime:U.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:"   ()"}),G.jsx("input",{type:"number",value:g.openSeconds,onChange:U=>m({...g,openSeconds:parseInt(U.target.value)||0}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",min:"0",step:"1",placeholder:"10"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:"   ()"}),G.jsx("input",{type:"number",value:g.closeMinutes,onChange:U=>m({...g,closeMinutes:parseInt(U.target.value)||0}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",min:"0",step:"1",placeholder:"5"})]})]})]})]},_.id)})]})]})]}),G.jsxs("section",{className:"mb-3",children:[G.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[G.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),G.jsxs("span",{className:"text-xs text-gray-800",children:[" ",b.length,""]})]}),G.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:G.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:b.map(_=>G.jsx(qy,{device:_,power:r[_.id]?.power??"off",lastSavedAt:r[_.id]?.lastSavedAt,onToggle:C=>T(_.id,C)},_.id))})})]}),G.jsxs("section",{className:"mb-3",children:[G.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[G.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),G.jsxs("span",{className:"text-xs text-gray-800",children:[" ",E.length,""]})]}),G.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:G.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-3",children:E.map(_=>G.jsx(qy,{device:_,power:r[_.id]?.power??"off",percentage:r[_.id]?.targetPercentage??0,lastSavedAt:r[_.id]?.lastSavedAt,onPercentageChange:C=>I(_.id,C)},_.id))})})]}),G.jsxs("section",{className:"mb-3",children:[G.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[G.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),G.jsxs("span",{className:"text-xs text-gray-800",children:[" ",S.length,""]})]}),G.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:G.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:S.map(_=>G.jsx(qy,{device:_,power:r[_.id]?.power??"off",lastSavedAt:r[_.id]?.lastSavedAt,onToggle:C=>T(_.id,C)},_.id))})})]})]})})}function uH({zones:r,setZones:e}){const t=(a,o)=>{e(u=>u.map(c=>c.id===a?{...c,...o}:c))},n=a=>{if(a.mode==="AUTO"){if(!a.intervalMinutes||!a.spraySeconds){alert("AUTO       .");return}if(a.startTime&&a.endTime&&a.startTime>=a.endTime){alert("     .");return}}tn(`tansaeng/mist/${a.id}/config`,{mode:a.mode,intervalMinutes:a.intervalMinutes,spraySeconds:a.spraySeconds,startTime:a.startTime,endTime:a.endTime,allowNightOperation:a.allowNightOperation}),alert(`${a.name}  .`)},i=a=>{tn(`tansaeng/mist/${a.id}/manual`,{action:"spray"}),alert(`${a.name}    .`)},s=a=>a==="OFF"?{bg:"#f3f4f6",text:"#4b5563"}:a==="MANUAL"?{bg:"#dbeafe",text:"#1e40af"}:{bg:"#d1fae5",text:"#065f46"};return G.jsx("div",{className:"bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[G.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[G.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:"  "}),G.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:" Zone      "})]}),r.map(a=>{const o=s(a.mode);return G.jsxs("div",{className:"bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-200 p-6 mb-6",children:[G.jsxs("div",{className:"flex items-center justify-between mb-4",children:[G.jsx("h2",{className:"text-xl font-semibold text-gray-800 m-0",children:a.name}),G.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{background:o.bg,color:o.text},children:a.mode})]}),G.jsxs("div",{className:"mb-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),G.jsx("div",{className:"flex gap-4",children:["OFF","MANUAL","AUTO"].map(u=>G.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[G.jsx("input",{type:"radio",name:`mode-${a.id}`,checked:a.mode===u,onChange:()=>t(a.id,{mode:u}),className:"w-4 h-4 accent-farm-500"}),G.jsx("span",{className:"text-gray-700",children:u})]},u))})]}),a.mode==="MANUAL"&&G.jsx("div",{className:"mb-4",children:G.jsx("button",{onClick:()=>i(a),className:"w-full bg-blue-600 hover:bg-blue-700 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:"  "})}),a.mode==="AUTO"&&G.jsxs("div",{children:[G.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),G.jsx("input",{type:"number",min:"1",value:a.intervalMinutes??"",onChange:u=>t(a.id,{intervalMinutes:Number(u.target.value)||null}),placeholder:": 30",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),G.jsx("input",{type:"number",min:"1",value:a.spraySeconds??"",onChange:u=>t(a.id,{spraySeconds:Number(u.target.value)||null}),placeholder:": 10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),G.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),G.jsx("input",{type:"time",value:a.startTime,onChange:u=>t(a.id,{startTime:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),G.jsx("input",{type:"time",value:a.endTime,onChange:u=>t(a.id,{endTime:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),G.jsx("div",{className:"mb-4",children:G.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[G.jsx("input",{type:"checkbox",checked:a.allowNightOperation,onChange:u=>t(a.id,{allowNightOperation:u.target.checked}),className:"w-4 h-4 accent-farm-500"}),G.jsx("span",{className:"text-gray-700",children:"  "})]})}),G.jsx("button",{onClick:()=>n(a),className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:" "})]})]},a.id)})]})})}function zi({icon:r,title:e,value:t,unit:n,maxValue:i,color:s="green"}){const a=t!=null,o=a?Math.min(t/i*100,100):0,u={green:"#059669",blue:"#2563eb",orange:"#f97316"};return G.jsxs("div",{className:"bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all duration-200 p-6",children:[G.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[G.jsx("span",{className:"text-3xl",children:r}),G.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e})]}),G.jsxs("div",{className:"text-center mb-4",children:[G.jsxs("div",{className:`text-5xl font-bold ${a?"text-farm-600":"text-gray-300"}`,children:[a?t:"-",a&&G.jsx("span",{className:"text-2xl font-normal ml-2",children:n})]}),!a&&G.jsx("div",{className:"text-sm text-gray-500 mt-2",children:" "})]}),G.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:G.jsx("div",{className:"h-full transition-all duration-500",style:{background:u[s],width:`${o}%`}})})]})}function Oo({label:r,value:e,unit:t}){const n=e!=null;return G.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[G.jsx("dt",{className:"text-sm text-gray-600",children:r}),G.jsx("dd",{className:`text-base font-semibold ${n?"text-gray-800":"text-gray-400"}`,children:n?`${e}${t}`:" "})]})}function D2(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=D2(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Bt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=D2(r))&&(n&&(n+=" "),n+=e);return n}var cH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $T(r){if(typeof r!="string")return!1;var e=cH;return e.includes(r)}var fH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hH=new Set(fH);function k2(r){return typeof r!="string"?!1:hH.has(r)}function M2(r){return typeof r=="string"&&r.startsWith("data-")}function rs(r){if(typeof r!="object"||r===null)return{};var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(k2(t)||M2(t))&&(e[t]=r[t]);return e}function $g(r){if(r==null)return null;if(P.isValidElement(r)&&typeof r.props=="object"&&r.props!==null){var e=r.props;return rs(e)}return typeof r=="object"&&!Array.isArray(r)?rs(r):null}function gn(r){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(k2(t)||M2(t)||$T(t))&&(e[t]=r[t]);return e}function dH(r){return r==null?null:P.isValidElement(r)?gn(r.props):typeof r=="object"&&!Array.isArray(r)?gn(r):null}var pH=["children","width","height","viewBox","className","style","title","desc"];function eE(){return eE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eE.apply(null,arguments)}function gH(r,e){if(r==null)return{};var t,n,i=mH(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function mH(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var GT=P.forwardRef((r,e)=>{var{children:t,width:n,height:i,viewBox:s,className:a,style:o,title:u,desc:c}=r,h=gH(r,pH),d=s||{width:n,height:i,x:0,y:0},g=Bt("recharts-surface",a);return P.createElement("svg",eE({},gn(h),{className:g,width:n,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),P.createElement("title",null,u),P.createElement("desc",null,c),t)}),yH=["children","className"];function tE(){return tE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tE.apply(null,arguments)}function vH(r,e){if(r==null)return{};var t,n,i=bH(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function bH(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Ja=P.forwardRef((r,e)=>{var{children:t,className:n}=r,i=vH(r,yH),s=Bt("recharts-layer",n);return P.createElement("g",tE({className:s},gn(i),{ref:e}),t)}),N2=P.createContext(null),xH=()=>P.useContext(N2);function Gt(r){return function(){return r}}const B2=Math.cos,Cp=Math.sin,Bi=Math.sqrt,Pp=Math.PI,Gg=2*Pp,rE=Math.PI,nE=2*rE,Co=1e-6,SH=nE-Co;function U2(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function EH(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return U2;const t=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+n[i]}}class TH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?U2:EH(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,s,a){this._append`C${+e},${+t},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,n,i,s){if(e=+e,t=+t,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=n-e,c=i-t,h=a-e,d=o-t,g=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Co)if(!(Math.abs(d*u-c*h)>Co)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let m=n-a,y=i-o,x=u*u+c*c,b=m*m+y*y,E=Math.sqrt(x),S=Math.sqrt(g),T=s*Math.tan((rE-Math.acos((x+g-b)/(2*E*S)))/2),I=T/S,w=T/E;Math.abs(I-1)>Co&&this._append`L${e+I*h},${t+I*d}`,this._append`A${s},${s},0,0,${+(d*m>h*y)},${this._x1=e+w*u},${this._y1=t+w*c}`}}arc(e,t,n,i,s,a){if(e=+e,t=+t,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),u=n*Math.sin(i),c=e+o,h=t+u,d=1^a,g=a?i-s:s-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Co||Math.abs(this._y1-h)>Co)&&this._append`L${c},${h}`,n&&(g<0&&(g=g%nE+nE),g>SH?this._append`A${n},${n},0,1,${d},${e-o},${t-u}A${n},${n},0,1,${d},${this._x1=c},${this._y1=h}`:g>Co&&this._append`A${n},${n},0,${+(g>=rE)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=t+n*Math.sin(s)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function zT(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return r},()=>new TH(e)}function HT(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function j2(r){this._context=r}j2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function zg(r){return new j2(r)}function F2(r){return r[0]}function $2(r){return r[1]}function G2(r,e){var t=Gt(!0),n=null,i=zg,s=null,a=zT(o);r=typeof r=="function"?r:r===void 0?F2:Gt(r),e=typeof e=="function"?e:e===void 0?$2:Gt(e);function o(u){var c,h=(u=HT(u)).length,d,g=!1,m;for(n==null&&(s=i(m=a())),c=0;c<=h;++c)!(c<h&&t(d=u[c],c,u))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+r(d,c,u),+e(d,c,u));if(m)return s=null,m+""||null}return o.x=function(u){return arguments.length?(r=typeof u=="function"?u:Gt(+u),o):r},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Gt(+u),o):e},o.defined=function(u){return arguments.length?(t=typeof u=="function"?u:Gt(!!u),o):t},o.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),o):i},o.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),o):n},o}function cd(r,e,t){var n=null,i=Gt(!0),s=null,a=zg,o=null,u=zT(c);r=typeof r=="function"?r:r===void 0?F2:Gt(+r),e=typeof e=="function"?e:Gt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?$2:Gt(+t);function c(d){var g,m,y,x=(d=HT(d)).length,b,E=!1,S,T=new Array(x),I=new Array(x);for(s==null&&(o=a(S=u())),g=0;g<=x;++g){if(!(g<x&&i(b=d[g],g,d))===E)if(E=!E)m=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=g-1;y>=m;--y)o.point(T[y],I[y]);o.lineEnd(),o.areaEnd()}E&&(T[g]=+r(b,g,d),I[g]=+e(b,g,d),o.point(n?+n(b,g,d):T[g],t?+t(b,g,d):I[g]))}if(S)return o=null,S+""||null}function h(){return G2().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(r=typeof d=="function"?d:Gt(+d),n=null,c):r},c.x0=function(d){return arguments.length?(r=typeof d=="function"?d:Gt(+d),c):r},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Gt(+d),c):n},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Gt(+d),c):t},c.lineX0=c.lineY0=function(){return h().x(r).y(e)},c.lineY1=function(){return h().x(r).y(t)},c.lineX1=function(){return h().x(n).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Gt(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class z2{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function AH(r){return new z2(r,!0)}function wH(r){return new z2(r,!1)}const KT={draw(r,e){const t=Bi(e/Pp);r.moveTo(t,0),r.arc(0,0,t,0,Gg)}},_H={draw(r,e){const t=Bi(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},H2=Bi(1/3),IH=H2*2,OH={draw(r,e){const t=Bi(e/IH),n=t*H2;r.moveTo(0,-t),r.lineTo(n,0),r.lineTo(0,t),r.lineTo(-n,0),r.closePath()}},RH={draw(r,e){const t=Bi(e),n=-t/2;r.rect(n,n,t,t)}},LH=.8908130915292852,K2=Cp(Pp/10)/Cp(7*Pp/10),CH=Cp(Gg/10)*K2,PH=-B2(Gg/10)*K2,DH={draw(r,e){const t=Bi(e*LH),n=CH*t,i=PH*t;r.moveTo(0,-t),r.lineTo(n,i);for(let s=1;s<5;++s){const a=Gg*s/5,o=B2(a),u=Cp(a);r.lineTo(u*t,-o*t),r.lineTo(o*n-u*i,u*n+o*i)}r.closePath()}},Xy=Bi(3),kH={draw(r,e){const t=-Bi(e/(Xy*3));r.moveTo(0,t*2),r.lineTo(-Xy*t,-t),r.lineTo(Xy*t,-t),r.closePath()}},gi=-.5,mi=Bi(3)/2,iE=1/Bi(12),MH=(iE/2+1)*3,NH={draw(r,e){const t=Bi(e/MH),n=t/2,i=t*iE,s=n,a=t*iE+t,o=-s,u=a;r.moveTo(n,i),r.lineTo(s,a),r.lineTo(o,u),r.lineTo(gi*n-mi*i,mi*n+gi*i),r.lineTo(gi*s-mi*a,mi*s+gi*a),r.lineTo(gi*o-mi*u,mi*o+gi*u),r.lineTo(gi*n+mi*i,gi*i-mi*n),r.lineTo(gi*s+mi*a,gi*a-mi*s),r.lineTo(gi*o+mi*u,gi*u-mi*o),r.closePath()}};function BH(r,e){let t=null,n=zT(i);r=typeof r=="function"?r:Gt(r||KT),e=typeof e=="function"?e:Gt(e===void 0?64:+e);function i(){let s;if(t||(t=s=n()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(s),i):r},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Gt(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function Dp(){}function kp(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function q2(r){this._context=r}q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function UH(r){return new q2(r)}function V2(r){this._context=r}V2.prototype={areaStart:Dp,areaEnd:Dp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function jH(r){return new V2(r)}function W2(r){this._context=r}W2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 3:this._point=4;default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function FH(r){return new W2(r)}function Y2(r){this._context=r}Y2.prototype={areaStart:Dp,areaEnd:Dp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function $H(r){return new Y2(r)}function oL(r){return r<0?-1:1}function lL(r,e,t){var n=r._x1-r._x0,i=e-r._x1,s=(r._y1-r._y0)/(n||i<0&&-0),a=(t-r._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(oL(s)+oL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function uL(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function Qy(r,e,t){var n=r._x0,i=r._y0,s=r._x1,a=r._y1,o=(s-n)/3;r._context.bezierCurveTo(n+o,i+o*e,s-o,a-o*t,s,a)}function Mp(r){this._context=r}Mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qy(this,this._t0,uL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,Qy(this,uL(this,t=lL(this,r,e)),t);break;default:Qy(this,this._t0,t=lL(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function X2(r){this._context=new Q2(r)}(X2.prototype=Object.create(Mp.prototype)).point=function(r,e){Mp.prototype.point.call(this,e,r)};function Q2(r){this._context=r}Q2.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,n,i,s){this._context.bezierCurveTo(e,r,n,t,s,i)}};function GH(r){return new Mp(r)}function zH(r){return new X2(r)}function Z2(r){this._context=r}Z2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var n=cL(r),i=cL(e),s=0,a=1;a<t;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],r[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function cL(r){var e,t=r.length-1,n,i=new Array(t),s=new Array(t),a=new Array(t);for(i[0]=0,s[0]=2,a[0]=r[0]+2*r[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,a[e]=4*r[e]+2*r[e+1];for(i[t-1]=2,s[t-1]=7,a[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[t-1]=a[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[t-1]=(r[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*r[e+1]-i[e+1];return[i,s]}function HH(r){return new Z2(r)}function Hg(r,e){this._context=r,this._t=e}Hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function KH(r){return new Hg(r,.5)}function qH(r){return new Hg(r,0)}function VH(r){return new Hg(r,1)}function du(r,e){if((a=r.length)>1)for(var t=1,n,i,s=r[e[0]],a,o=s.length;t<a;++t)for(i=s,s=r[e[t]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function sE(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function WH(r,e){return r[e]}function YH(r){const e=[];return e.key=r,e}function XH(){var r=Gt([]),e=sE,t=du,n=WH;function i(s){var a=Array.from(r.apply(this,arguments),YH),o,u=a.length,c=-1,h;for(const d of s)for(o=0,++c;o<u;++o)(a[o][c]=[0,+n(d,a[o].key,c,s)]).data=d;for(o=0,h=HT(e(a));o<u;++o)a[h[o]].index=o;return t(a,h),a}return i.keys=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(Array.from(s)),i):r},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Gt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?sE:typeof s=="function"?s:Gt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(t=s??du,i):t},i}function QH(r,e){if((n=r.length)>0){for(var t,n,i=0,s=r[0].length,a;i<s;++i){for(a=t=0;t<n;++t)a+=r[t][i][1]||0;if(a)for(t=0;t<n;++t)r[t][i][1]/=a}du(r,e)}}function ZH(r,e){if((i=r.length)>0){for(var t=0,n=r[e[0]],i,s=n.length;t<s;++t){for(var a=0,o=0;a<i;++a)o+=r[a][t][1]||0;n[t][1]+=n[t][0]=-o/2}du(r,e)}}function JH(r,e){if(!(!((a=r.length)>0)||!((s=(i=r[e[0]]).length)>0))){for(var t=0,n=1,i,s,a;n<s;++n){for(var o=0,u=0,c=0;o<a;++o){for(var h=r[e[o]],d=h[n][1]||0,g=h[n-1][1]||0,m=(d-g)/2,y=0;y<o;++y){var x=r[e[y]],b=x[n][1]||0,E=x[n-1][1]||0;m+=b-E}u+=d,c+=m*d}i[n-1][1]+=i[n-1][0]=t,u&&(t-=c/u)}i[n-1][1]+=i[n-1][0]=t,du(r,e)}}var Zy={},Jy={},fL;function eK(){return fL||(fL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}r.isUnsafeProperty=e})(Jy)),Jy}var ev={},hL;function J2(){return hL||(hL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}r.isDeepKey=e})(ev)),ev}var tv={},dL;function qT(){return dL||(dL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}r.toKey=e})(tv)),tv}var rv={},nv={},pL;function tK(){return pL||(pL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return n==="0"&&Object.is(Number(t),-0)?"-0":n}r.toString=e})(nv)),nv}var gL;function VT(){return gL||(gL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=tK(),t=qT();function n(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let o=0,u="",c="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const d=i[o];c?d==="\\"&&o+1<a?(o++,u+=i[o]):d===c?c="":u+=d:h?d==='"'||d==="'"?c=d:d==="]"?(h=!1,s.push(u),u=""):u+=d:d==="["?(h=!0,u&&(s.push(u),u="")):d==="."?u&&(s.push(u),u=""):u+=d,o++}return u&&s.push(u),s}r.toPath=n})(rv)),rv}var mL;function WT(){return mL||(mL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=eK(),t=J2(),n=qT(),i=VT();function s(o,u,c){if(o==null)return c;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return c;const h=o[u];return h===void 0?t.isDeepKey(u)?s(o,i.toPath(u),c):c:h}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const h=o[u];return h===void 0?c:h}default:{if(Array.isArray(u))return a(o,u,c);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return c;const h=o[u];return h===void 0?c:h}}}function a(o,u,c){if(u.length===0)return c;let h=o;for(let d=0;d<u.length;d++){if(h==null||e.isUnsafeProperty(u[d]))return c;h=h[u[d]]}return h===void 0?c:h}r.get=s})(Zy)),Zy}var iv,yL;function rK(){return yL||(yL=1,iv=WT().get),iv}var nK=rK();const Kg=na(nK);var bi=r=>r===0?0:r>0?1:-1,ns=r=>typeof r=="number"&&r!=+r,Qs=r=>typeof r=="string"&&r.indexOf("%")===r.length-1,at=r=>(typeof r=="number"||r instanceof Number)&&!ns(r),is=r=>at(r)||typeof r=="string",iK=0,Jc=r=>{var e=++iK;return"".concat(r||"").concat(e)},eo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(e)&&typeof e!="string")return n;var s;if(Qs(e)){if(t==null)return n;var a=e.indexOf("%");s=t*parseFloat(e.slice(0,a))/100}else s=+e;return ns(s)&&(s=n),i&&t!=null&&s>t&&(s=t),s},eB=r=>{if(!Array.isArray(r))return!1;for(var e=r.length,t={},n=0;n<e;n++)if(!t[r[n]])t[r[n]]=!0;else return!0;return!1};function Pn(r,e,t){return at(r)&&at(e)?r+t*(e-r):e}function tB(r,e,t){if(!(!r||!r.length))return r.find(n=>n&&(typeof e=="function"?e(n):Kg(n,e))===t)}var Nr=r=>r===null||typeof r>"u",Of=r=>Nr(r)?r:"".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));function sK(r){return r!=null}function Rf(){}var aK=["type","size","sizeType"];function aE(){return aE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},aE.apply(null,arguments)}function vL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(t),!0).forEach(function(n){oK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oK(r,e,t){return(e=lK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lK(r){var e=uK(r,"string");return typeof e=="symbol"?e:e+""}function uK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cK(r,e){if(r==null)return{};var t,n,i=fK(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function fK(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var rB={symbolCircle:KT,symbolCross:_H,symbolDiamond:OH,symbolSquare:RH,symbolStar:DH,symbolTriangle:kH,symbolWye:NH},hK=Math.PI/180,dK=r=>{var e="symbol".concat(Of(r));return rB[e]||KT},pK=(r,e,t)=>{if(e==="area")return r;switch(t){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*hK;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},gK=(r,e)=>{rB["symbol".concat(Of(r))]=e},YT=r=>{var{type:e="circle",size:t=64,sizeType:n="area"}=r,i=cK(r,aK),s=bL(bL({},i),{},{type:e,size:t,sizeType:n}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var g=dK(a),m=BH().type(g).size(pK(t,n,a)),y=m();if(y!==null)return y},{className:u,cx:c,cy:h}=s,d=gn(s);return at(c)&&at(h)&&at(t)?P.createElement("path",aE({},d,{className:Bt("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(h,")"),d:o()})):null};YT.registerSymbol=gK;var nB=r=>"radius"in r&&"startAngle"in r&&"endAngle"in r,XT=(r,e)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var t=r;if(P.isValidElement(r)&&(t=r.props),typeof t!="object"&&typeof t!="function")return null;var n={};return Object.keys(t).forEach(i=>{$T(i)&&(n[i]=(s=>t[i](t,s)))}),n},mK=(r,e,t)=>n=>(r(e,t,n),null),iB=(r,e,t)=>{if(r===null||typeof r!="object"&&typeof r!="function")return null;var n=null;return Object.keys(r).forEach(i=>{var s=r[i];$T(i)&&typeof s=="function"&&(n||(n={}),n[i]=mK(s,e,t))}),n};function xL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(t),!0).forEach(function(n){vK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vK(r,e,t){return(e=bK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bK(r){var e=xK(r,"string");return typeof e=="symbol"?e:e+""}function xK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function an(r,e){var t=yK({},r),n=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&n[o]!==void 0&&(a[o]=n[o]),a),t);return s}function Np(){return Np=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Np.apply(null,arguments)}function SL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function SK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SL(Object(t),!0).forEach(function(n){EK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):SL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EK(r,e,t){return(e=TK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TK(r){var e=AK(r,"string");return typeof e=="symbol"?e:e+""}function AK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var vi=32,wK={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function _K(r){var{data:e,iconType:t,inactiveColor:n}=r,i=vi/2,s=vi/6,a=vi/3,o=e.inactive?n:e.color,u=t??e.type;if(u==="none")return null;if(u==="plainline"){var c;return P.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:vi,y2:i,className:"recharts-legend-icon"})}if(u==="line")return P.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(vi,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return P.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(vi/8,"h").concat(vi,"v").concat(vi*3/4,"h").concat(-vi,"z"),className:"recharts-legend-icon"});if(P.isValidElement(e.legendIcon)){var h=SK({},e);return delete h.legendIcon,P.cloneElement(e.legendIcon,h)}return P.createElement(YT,{fill:o,cx:i,cy:i,size:vi,sizeType:"diameter",type:u})}function IK(r){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:s,iconType:a}=r,o={x:0,y:0,width:vi,height:vi},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,d)=>{var g=h.formatter||i,m=Bt({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:h.inactive});if(h.type==="none")return null;var y=h.inactive?s:h.color,x=g?g(h.value,h,d):h.value;return P.createElement("li",Np({className:m,style:u,key:"legend-item-".concat(d)},iB(r,h,d)),P.createElement(GT,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(x," legend icon")},P.createElement(_K,{data:h,iconType:a,inactiveColor:s})),P.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x))})}var OK=r=>{var e=an(r,wK),{payload:t,layout:n,align:i}=e;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return P.createElement("ul",{className:"recharts-default-legend",style:s},P.createElement(IK,Np({},e,{payload:t})))},sv={},av={},EL;function RK(){return EL||(EL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){const i=new Map;for(let s=0;s<t.length;s++){const a=t[s],o=n(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}r.uniqBy=e})(av)),av}var ov={},TL;function sB(){return TL||(TL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t}r.identity=e})(ov)),ov}var lv={},uv={},cv={},AL;function LK(){return AL||(AL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}r.isLength=e})(cv)),cv}var wL;function QT(){return wL||(wL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=LK();function t(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}r.isArrayLike=t})(uv)),uv}var fv={},_L;function CK(){return _L||(_L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}r.isObjectLike=e})(fv)),fv}var IL;function PK(){return IL||(IL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=QT(),t=CK();function n(i){return t.isObjectLike(i)&&e.isArrayLike(i)}r.isArrayLikeObject=n})(lv)),lv}var hv={},dv={},OL;function DK(){return OL||(OL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=WT();function t(n){return function(i){return e.get(i,n)}}r.property=t})(dv)),dv}var pv={},gv={},mv={},yv={},RL;function aB(){return RL||(RL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}r.isObject=e})(yv)),yv}var vv={},LL;function oB(){return LL||(LL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}r.isPrimitive=e})(vv)),vv}var bv={},CL;function lB(){return CL||(CL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){return t===n||Number.isNaN(t)&&Number.isNaN(n)}r.eq=e})(bv)),bv}var PL;function kK(){return PL||(PL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=aB(),t=oB(),n=lB();function i(h,d,g){return typeof g!="function"?i(h,d,()=>{}):s(h,d,function m(y,x,b,E,S,T){const I=g(y,x,b,E,S,T);return I!==void 0?!!I:s(y,x,m,T)},new Map)}function s(h,d,g,m){if(d===h)return!0;switch(typeof d){case"object":return a(h,d,g,m);case"function":return Object.keys(d).length>0?s(h,{...d},g,m):n.eq(h,d);default:return e.isObject(h)?typeof d=="string"?d==="":!0:n.eq(h,d)}}function a(h,d,g,m){if(d==null)return!0;if(Array.isArray(d))return u(h,d,g,m);if(d instanceof Map)return o(h,d,g,m);if(d instanceof Set)return c(h,d,g,m);const y=Object.keys(d);if(h==null)return y.length===0;if(y.length===0)return!0;if(m?.has(d))return m.get(d)===h;m?.set(d,h);try{for(let x=0;x<y.length;x++){const b=y[x];if(!t.isPrimitive(h)&&!(b in h)||d[b]===void 0&&h[b]!==void 0||d[b]===null&&h[b]!==null||!g(h[b],d[b],b,h,d,m))return!1}return!0}finally{m?.delete(d)}}function o(h,d,g,m){if(d.size===0)return!0;if(!(h instanceof Map))return!1;for(const[y,x]of d.entries()){const b=h.get(y);if(g(b,x,y,h,d,m)===!1)return!1}return!0}function u(h,d,g,m){if(d.length===0)return!0;if(!Array.isArray(h))return!1;const y=new Set;for(let x=0;x<d.length;x++){const b=d[x];let E=!1;for(let S=0;S<h.length;S++){if(y.has(S))continue;const T=h[S];let I=!1;if(g(T,b,x,h,d,m)&&(I=!0),I){y.add(S),E=!0;break}}if(!E)return!1}return!0}function c(h,d,g,m){return d.size===0?!0:h instanceof Set?u([...h],[...d],g,m):!1}r.isMatchWith=i,r.isSetMatch=c})(mv)),mv}var DL;function uB(){return DL||(DL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=kK();function t(n,i){return e.isMatchWith(n,i,()=>{})}r.isMatch=t})(gv)),gv}var xv={},Sv={},Ev={},kL;function MK(){return kL||(kL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(n=>Object.prototype.propertyIsEnumerable.call(t,n))}r.getSymbols=e})(Ev)),Ev}var Tv={},ML;function cB(){return ML||(ML=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.getTag=e})(Tv)),Tv}var Av={},NL;function fB(){return NL||(NL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",u="[object Map]",c="[object Set]",h="[object Array]",d="[object Function]",g="[object ArrayBuffer]",m="[object Object]",y="[object Error]",x="[object DataView]",b="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]",I="[object BigUint64Array]",w="[object Int8Array]",R="[object Int16Array]",_="[object Int32Array]",C="[object BigInt64Array]",k="[object Float32Array]",D="[object Float64Array]";r.argumentsTag=s,r.arrayBufferTag=g,r.arrayTag=h,r.bigInt64ArrayTag=C,r.bigUint64ArrayTag=I,r.booleanTag=i,r.dataViewTag=x,r.dateTag=o,r.errorTag=y,r.float32ArrayTag=k,r.float64ArrayTag=D,r.functionTag=d,r.int16ArrayTag=R,r.int32ArrayTag=_,r.int8ArrayTag=w,r.mapTag=u,r.numberTag=n,r.objectTag=m,r.regexpTag=e,r.setTag=c,r.stringTag=t,r.symbolTag=a,r.uint16ArrayTag=S,r.uint32ArrayTag=T,r.uint8ArrayTag=b,r.uint8ClampedArrayTag=E})(Av)),Av}var wv={},BL;function NK(){return BL||(BL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}r.isTypedArray=e})(wv)),wv}var UL;function hB(){return UL||(UL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=MK(),t=cB(),n=fB(),i=oB(),s=NK();function a(h,d){return o(h,void 0,h,new Map,d)}function o(h,d,g,m=new Map,y=void 0){const x=y?.(h,d,g,m);if(x!==void 0)return x;if(i.isPrimitive(h))return h;if(m.has(h))return m.get(h);if(Array.isArray(h)){const b=new Array(h.length);m.set(h,b);for(let E=0;E<h.length;E++)b[E]=o(h[E],E,g,m,y);return Object.hasOwn(h,"index")&&(b.index=h.index),Object.hasOwn(h,"input")&&(b.input=h.input),b}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const b=new RegExp(h.source,h.flags);return b.lastIndex=h.lastIndex,b}if(h instanceof Map){const b=new Map;m.set(h,b);for(const[E,S]of h)b.set(E,o(S,E,g,m,y));return b}if(h instanceof Set){const b=new Set;m.set(h,b);for(const E of h)b.add(o(E,void 0,g,m,y));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const b=new(Object.getPrototypeOf(h)).constructor(h.length);m.set(h,b);for(let E=0;E<h.length;E++)b[E]=o(h[E],E,g,m,y);return b}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const b=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return m.set(h,b),u(b,h,g,m,y),b}if(typeof File<"u"&&h instanceof File){const b=new File([h],h.name,{type:h.type});return m.set(h,b),u(b,h,g,m,y),b}if(typeof Blob<"u"&&h instanceof Blob){const b=new Blob([h],{type:h.type});return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof Error){const b=new h.constructor;return m.set(h,b),b.message=h.message,b.name=h.name,b.stack=h.stack,b.cause=h.cause,u(b,h,g,m,y),b}if(h instanceof Boolean){const b=new Boolean(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof Number){const b=new Number(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof String){const b=new String(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(typeof h=="object"&&c(h)){const b=Object.create(Object.getPrototypeOf(h));return m.set(h,b),u(b,h,g,m,y),b}return h}function u(h,d,g=h,m,y){const x=[...Object.keys(d),...e.getSymbols(d)];for(let b=0;b<x.length;b++){const E=x[b],S=Object.getOwnPropertyDescriptor(h,E);(S==null||S.writable)&&(h[E]=o(d[E],E,g,m,y))}}function c(h){switch(t.getTag(h)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}r.cloneDeepWith=a,r.cloneDeepWithImpl=o,r.copyProperties=u})(Sv)),Sv}var jL;function BK(){return jL||(jL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=hB();function t(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}r.cloneDeep=t})(xv)),xv}var FL;function UK(){return FL||(FL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uB(),t=BK();function n(i){return i=t.cloneDeep(i),s=>e.isMatch(s,i)}r.matches=n})(pv)),pv}var _v={},Iv={},Ov={},$L;function jK(){return $L||($L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=hB(),t=fB();function n(i,s){return e.cloneDeepWith(i,(a,o,u,c)=>{const h=s?.(a,o,u,c);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const d=new i.constructor(i?.valueOf());return e.copyProperties(d,i),d}case t.argumentsTag:{const d={};return e.copyProperties(d,i),d.length=i.length,d[Symbol.iterator]=i[Symbol.iterator],d}default:return}})}r.cloneDeepWith=n})(Ov)),Ov}var GL;function FK(){return GL||(GL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=jK();function t(n){return e.cloneDeepWith(n)}r.cloneDeep=t})(Iv)),Iv}var Rv={},Lv={},zL;function dB(){return zL||(zL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}r.isIndex=t})(Lv)),Lv}var Cv={},HL;function $K(){return HL||(HL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=cB();function t(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}r.isArguments=t})(Cv)),Cv}var KL;function GK(){return KL||(KL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=J2(),t=dB(),n=$K(),i=VT();function s(a,o){let u;if(Array.isArray(o)?u=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?u=i.toPath(o):u=[o],u.length===0)return!1;let c=a;for(let h=0;h<u.length;h++){const d=u[h];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||n.isArguments(c))&&t.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}r.has=s})(Rv)),Rv}var qL;function zK(){return qL||(qL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uB(),t=qT(),n=FK(),i=WT(),s=GK();function a(o,u){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return u=n.cloneDeep(u),function(c){const h=i.get(c,o);return h===void 0?s.has(c,o):u===void 0?h===void 0:e.isMatch(h,u)}}r.matchesProperty=a})(_v)),_v}var VL;function HK(){return VL||(VL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=sB(),t=DK(),n=UK(),i=zK();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):n.matches(a);case"string":case"symbol":case"number":return t.property(a)}}r.iteratee=s})(hv)),hv}var WL;function KK(){return WL||(WL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=RK(),t=sB(),n=PK(),i=HK();function s(a,o=t.identity){return n.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}r.uniqBy=s})(sv)),sv}var Pv,YL;function qK(){return YL||(YL=1,Pv=KK().uniqBy),Pv}var VK=qK();const XL=na(VK);function pB(r,e,t){return e===!0?XL(r,t):typeof e=="function"?XL(r,e):r}var Dv={exports:{}},kv={},Mv={exports:{}},Nv={};var QL;function WK(){if(QL)return Nv;QL=1;var r=Tu();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,s=r.useLayoutEffect,a=r.useDebugValue;function o(d,g){var m=g(),y=n({inst:{value:m,getSnapshot:g}}),x=y[0].inst,b=y[1];return s(function(){x.value=m,x.getSnapshot=g,u(x)&&b({inst:x})},[d,m,g]),i(function(){return u(x)&&b({inst:x}),d(function(){u(x)&&b({inst:x})})},[d]),a(m),m}function u(d){var g=d.getSnapshot;d=d.value;try{var m=g();return!t(d,m)}catch{return!0}}function c(d,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return Nv.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:h,Nv}var ZL;function YK(){return ZL||(ZL=1,Mv.exports=WK()),Mv.exports}var JL;function XK(){if(JL)return kv;JL=1;var r=Tu(),e=YK();function t(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=r.useRef,a=r.useEffect,o=r.useMemo,u=r.useDebugValue;return kv.useSyncExternalStoreWithSelector=function(c,h,d,g,m){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=o(function(){function E(R){if(!S){if(S=!0,T=R,R=g(R),m!==void 0&&x.hasValue){var _=x.value;if(m(_,R))return I=_}return I=R}if(_=I,n(T,R))return _;var C=g(R);return m!==void 0&&m(_,C)?(T=R,_):(T=R,I=C)}var S=!1,T,I,w=d===void 0?null:d;return[function(){return E(h())},w===null?void 0:function(){return E(w())}]},[h,d,g,m]);var b=i(c,y[0],y[1]);return a(function(){x.hasValue=!0,x.value=b},[b]),u(b),b},kv}var eC;function QK(){return eC||(eC=1,Dv.exports=XK()),Dv.exports}var ZK=QK(),ZT=P.createContext(null),JK=r=>r,vr=()=>{var r=P.useContext(ZT);return r?r.store.dispatch:JK},gp=()=>{},eq=()=>gp,tq=(r,e)=>r===e;function it(r){var e=P.useContext(ZT);return ZK.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:eq,e?e.store.getState:gp,e?e.store.getState:gp,e?r:gp,tq)}function rq(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function nq(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function iq(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var tC=r=>Array.isArray(r)?r:[r];function sq(r){const e=Array.isArray(r[0])?r[0]:r;return iq(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function aq(r,e){const t=[],{length:n}=r;for(let i=0;i<n;i++)t.push(r[i].apply(null,e));return t}var oq=class{constructor(r){this.value=r}deref(){return this.value}},lq=typeof WeakRef<"u"?WeakRef:oq,uq=0,rC=1;function fd(){return{s:uq,v:void 0,o:null,p:null}}function gB(r,e={}){let t=fd();const{resultEqualityCheck:n}=e;let i,s=0;function a(){let o=t;const{length:u}=arguments;for(let d=0,g=u;d<g;d++){const m=arguments[d];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const x=y.get(m);x===void 0?(o=fd(),y.set(m,o)):o=x}else{let y=o.p;y===null&&(o.p=y=new Map);const x=y.get(m);x===void 0?(o=fd(),y.set(m,o)):o=x}}const c=o;let h;if(o.s===rC)h=o.v;else if(h=r.apply(null,arguments),s++,n){const d=i?.deref?.()??i;d!=null&&n(d,h)&&(h=d,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new lq(h):h}return c.s=rC,c.v=h,h}return a.clearCache=()=>{t=fd(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function cq(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,n=(...i)=>{let s=0,a=0,o,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),rq(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...t,...u},{memoize:d,memoizeOptions:g=[],argsMemoize:m=gB,argsMemoizeOptions:y=[]}=h,x=tC(g),b=tC(y),E=sq(i),S=d(function(){return s++,c.apply(null,arguments)},...x),T=m(function(){a++;const w=aq(E,arguments);return o=S.apply(null,w),o},...b);return Object.assign(T,{resultFunc:c,memoizedResultFunc:S,dependencies:E,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ke=cq(gB),fq=Object.assign((r,e=ke)=>{nq(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),n=t.map(s=>r[s]);return e(n,(...s)=>s.reduce((a,o,u)=>(a[t[u]]=o,a),{}))},{withTypes:()=>fq}),Bv={},Uv={},jv={},nC;function hq(){return nC||(nC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const t=(n,i,s)=>{if(n!==i){const a=e(n),o=e(i);if(a===o&&a===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};r.compareValues=t})(jv)),jv}var Fv={},$v={},iC;function mB(){return iC||(iC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}r.isSymbol=e})($v)),$v}var sC;function dq(){return sC||(sC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=mB(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!t.test(s))||a!=null&&Object.hasOwn(a,s)}r.isKey=i})(Fv)),Fv}var aC;function pq(){return aC||(aC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=hq(),t=dq(),n=VT();function i(s,a,o,u){if(s==null)return[];o=u?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,y)=>{let x=m;for(let b=0;b<y.length&&x!=null;++b)x=x[y[b]];return x},h=(m,y)=>y==null||m==null?y:typeof m=="object"&&"key"in m?Object.hasOwn(y,m.key)?y[m.key]:c(y,m.path):typeof m=="function"?m(y):Array.isArray(m)?c(y,m):typeof y=="object"?y[m]:y,d=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||t.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:d.map(y=>h(y,m))})).slice().sort((m,y)=>{for(let x=0;x<d.length;x++){const b=e.compareValues(m.criteria[x],y.criteria[x],o[x]);if(b!==0)return b}return 0}).map(m=>m.original)}r.orderBy=i})(Uv)),Uv}var Gv={},oC;function gq(){return oC||(oC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n=1){const i=[],s=Math.floor(n),a=(o,u)=>{for(let c=0;c<o.length;c++){const h=o[c];Array.isArray(h)&&u<s?a(h,u+1):i.push(h)}};return a(t,0),i}r.flatten=e})(Gv)),Gv}var zv={},lC;function yB(){return lC||(lC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=dB(),t=QT(),n=aB(),i=lB();function s(a,o,u){return n.isObject(u)&&(typeof o=="number"&&t.isArrayLike(u)&&e.isIndex(o)&&o<u.length||typeof o=="string"&&o in u)?i.eq(u[o],a):!1}r.isIterateeCall=s})(zv)),zv}var uC;function mq(){return uC||(uC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=pq(),t=gq(),n=yB();function i(s,...a){const o=a.length;return o>1&&n.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&n.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,t.flatten(a),["asc"])}r.sortBy=i})(Bv)),Bv}var Hv,cC;function yq(){return cC||(cC=1,Hv=mq().sortBy),Hv}var vq=yq();const qg=na(vq);var vB=r=>r.legend.settings,bq=r=>r.legend.size,xq=r=>r.legend.payload,Sq=ke([xq,vB],(r,e)=>{var{itemSorter:t}=e,n=r.flat(1);return t?qg(n,t):n});function Eq(){return it(Sq)}var hd=1;function bB(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=P.useState({height:0,left:0,top:0,width:0}),n=P.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>hd||Math.abs(a.left-e.left)>hd||Math.abs(a.top-e.top)>hd||Math.abs(a.width-e.width)>hd)&&t({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...r]);return[e,n]}function Kr(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var Tq=typeof Symbol=="function"&&Symbol.observable||"@@observable",fC=Tq,Kv=()=>Math.random().toString(36).substring(7).split("").join("."),Aq={INIT:`@@redux/INIT${Kv()}`,REPLACE:`@@redux/REPLACE${Kv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Kv()}`},Bp=Aq;function JT(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function xB(r,e,t){if(typeof r!="function")throw new Error(Kr(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Kr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Kr(1));return t(xB)(r,e)}let n=r,i=e,s=new Map,a=s,o=0,u=!1;function c(){a===s&&(a=new Map,s.forEach((b,E)=>{a.set(E,b)}))}function h(){if(u)throw new Error(Kr(3));return i}function d(b){if(typeof b!="function")throw new Error(Kr(4));if(u)throw new Error(Kr(5));let E=!0;c();const S=o++;return a.set(S,b),function(){if(E){if(u)throw new Error(Kr(6));E=!1,c(),a.delete(S),s=null}}}function g(b){if(!JT(b))throw new Error(Kr(7));if(typeof b.type>"u")throw new Error(Kr(8));if(typeof b.type!="string")throw new Error(Kr(17));if(u)throw new Error(Kr(9));try{u=!0,i=n(i,b)}finally{u=!1}return(s=a).forEach(S=>{S()}),b}function m(b){if(typeof b!="function")throw new Error(Kr(10));n=b,g({type:Bp.REPLACE})}function y(){const b=d;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Kr(11));function S(){const I=E;I.next&&I.next(h())}return S(),{unsubscribe:b(S)}},[fC](){return this}}}return g({type:Bp.INIT}),{dispatch:g,subscribe:d,getState:h,replaceReducer:m,[fC]:y}}function wq(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Bp.INIT})>"u")throw new Error(Kr(12));if(typeof t(void 0,{type:Bp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Kr(13))})}function SB(r){const e=Object.keys(r),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof r[a]=="function"&&(t[a]=r[a])}const n=Object.keys(t);let i;try{wq(t)}catch(s){i=s}return function(a={},o){if(i)throw i;let u=!1;const c={};for(let h=0;h<n.length;h++){const d=n[h],g=t[d],m=a[d],y=g(m,o);if(typeof y>"u")throw o&&o.type,new Error(Kr(14));c[d]=y,u=u||y!==m}return u=u||n.length!==Object.keys(a).length,u?c:a}}function Up(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function _q(...r){return e=>(t,n)=>{const i=e(t,n);let s=()=>{throw new Error(Kr(15))};const a={getState:i.getState,dispatch:(u,...c)=>s(u,...c)},o=r.map(u=>u(a));return s=Up(...o)(i.dispatch),{...i,dispatch:s}}}function EB(r){return JT(r)&&"type"in r&&typeof r.type=="string"}var TB=Symbol.for("immer-nothing"),hC=Symbol.for("immer-draftable"),mn=Symbol.for("immer-state");function Ci(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var ei=Object,pu=ei.getPrototypeOf,jp="constructor",Vg="prototype",oE="configurable",Fp="enumerable",mp="writable",ef="value",Zs=r=>!!r&&!!r[mn];function Ni(r){return r?AB(r)||Wg(r)||!!r[hC]||!!r[jp]?.[hC]||Yg(r)||Xg(r):!1}var Iq=ei[Vg][jp].toString(),dC=new WeakMap;function AB(r){if(!r||!eA(r))return!1;const e=pu(r);if(e===null||e===ei[Vg])return!0;const t=ei.hasOwnProperty.call(e,jp)&&e[jp];if(t===Object)return!0;if(!tu(t))return!1;let n=dC.get(t);return n===void 0&&(n=Function.toString.call(t),dC.set(t,n)),n===Iq}function Lf(r,e,t=!0){Cf(r)===0?(t?Reflect.ownKeys(r):ei.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function Cf(r){const e=r[mn];return e?e.type_:Wg(r)?1:Yg(r)?2:Xg(r)?3:0}var pC=(r,e,t=Cf(r))=>t===2?r.has(e):ei[Vg].hasOwnProperty.call(r,e),lE=(r,e,t=Cf(r))=>t===2?r.get(e):r[e],$p=(r,e,t,n=Cf(r))=>{n===2?r.set(e,t):n===3?r.add(t):r[e]=t};function Oq(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Wg=Array.isArray,Yg=r=>r instanceof Map,Xg=r=>r instanceof Set,eA=r=>typeof r=="object",tu=r=>typeof r=="function",qv=r=>typeof r=="boolean",Fs=r=>r.copy_||r.base_,tA=r=>r.modified_?r.copy_:r.base_;function uE(r,e){if(Yg(r))return new Map(r);if(Xg(r))return new Set(r);if(Wg(r))return Array[Vg].slice.call(r);const t=AB(r);if(e===!0||e==="class_only"&&!t){const n=ei.getOwnPropertyDescriptors(r);delete n[mn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],o=n[a];o[mp]===!1&&(o[mp]=!0,o[oE]=!0),(o.get||o.set)&&(n[a]={[oE]:!0,[mp]:!0,[Fp]:o[Fp],[ef]:r[a]})}return ei.create(pu(r),n)}else{const n=pu(r);if(n!==null&&t)return{...r};const i=ei.create(n);return ei.assign(i,r)}}function rA(r,e=!1){return Qg(r)||Zs(r)||!Ni(r)||(Cf(r)>1&&ei.defineProperties(r,{set:dd,add:dd,clear:dd,delete:dd}),ei.freeze(r),e&&Lf(r,(t,n)=>{rA(n,!0)},!1)),r}function Rq(){Ci(2)}var dd={[ef]:Rq};function Qg(r){return r===null||!eA(r)?!0:ei.isFrozen(r)}var Gp="MapSet",cE="Patches",wB={};function gu(r){const e=wB[r];return e||Ci(0,r),e}var Lq=r=>!!wB[r],tf,_B=()=>tf,Cq=(r,e)=>({drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Lq(Gp)?gu(Gp):void 0});function gC(r,e){e&&(r.patchPlugin_=gu(cE),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function fE(r){hE(r),r.drafts_.forEach(Pq),r.drafts_=null}function hE(r){r===tf&&(tf=r.parent_)}var mC=r=>tf=Cq(tf,r);function Pq(r){const e=r[mn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yC(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(r!==void 0&&r!==t){t[mn].modified_&&(fE(e),Ci(4)),Ni(r)&&(r=vC(e,r));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(t[mn].base_,r,e)}else r=vC(e,t);return Dq(e,r,!0),fE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==TB?r:void 0}function vC(r,e){if(Qg(e))return e;const t=e[mn];if(!t)return nA(e,r.handledSet_,r);if(!Zg(t,r))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:n}=t;if(n)for(;n.length>0;)n.pop()(r);RB(t,r)}return t.copy_}function Dq(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&rA(e,t)}function IB(r){r.finalized_=!0,r.scope_.unfinalizedDrafts_--}var Zg=(r,e)=>r.scope_===e,kq=[];function OB(r,e,t,n){const i=Fs(r),s=r.type_;if(n!==void 0&&lE(i,n,s)===e){$p(i,n,t,s);return}if(!r.draftLocations_){const o=r.draftLocations_=new Map;Lf(i,(u,c)=>{if(Zs(c)){const h=o.get(c)||[];h.push(u),o.set(c,h)}})}const a=r.draftLocations_.get(e)??kq;for(const o of a)$p(i,o,t,s)}function Mq(r,e,t){r.callbacks_.push(function(i){const s=e;if(!s||!Zg(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=tA(s);OB(r,s.draft_??s,a,t),RB(s,i)})}function RB(r,e){if(r.modified_&&!r.finalized_&&(r.type_===3||(r.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(r);i&&n.generatePatches_(r,i,e)}IB(r)}}function Nq(r,e,t){const{scope_:n}=r;if(Zs(t)){const i=t[mn];Zg(i,n)&&i.callbacks_.push(function(){yp(r);const a=tA(i);OB(r,t,a,e)})}else Ni(t)&&r.callbacks_.push(function(){const s=Fs(r);lE(s,e,r.type_)===t&&n.drafts_.length>1&&(r.assigned_.get(e)??!1)===!0&&r.copy_&&nA(lE(r.copy_,e,r.type_),n.handledSet_,n)})}function nA(r,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Zs(r)||e.has(r)||!Ni(r)||Qg(r)||(e.add(r),Lf(r,(n,i)=>{if(Zs(i)){const s=i[mn];if(Zg(s,t)){const a=tA(s);$p(r,n,a,r.type_),IB(s)}}else Ni(i)&&nA(i,e,t)})),r}function Bq(r,e){const t=Wg(r),n={type_:t?1:0,scope_:e?e.scope_:_B(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=iA;t&&(i=[n],s=rf);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,[o,n]}var iA={get(r,e){if(e===mn)return r;const t=Fs(r);if(!pC(t,e,r.type_))return Uq(r,t,e);const n=t[e];if(r.finalized_||!Ni(n))return n;if(n===Vv(r.base_,e)){yp(r);const i=r.type_===1?+e:e,s=pE(r.scope_,n,r,i);return r.copy_[i]=s}return n},has(r,e){return e in Fs(r)},ownKeys(r){return Reflect.ownKeys(Fs(r))},set(r,e,t){const n=LB(Fs(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Vv(Fs(r),e),s=i?.[mn];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_.set(e,!1),!0;if(Oq(t,i)&&(t!==void 0||pC(r.base_,e,r.type_)))return!0;yp(r),dE(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_.set(e,!0),Nq(r,e,t)),!0},deleteProperty(r,e){return yp(r),Vv(r.base_,e)!==void 0||e in r.base_?(r.assigned_.set(e,!1),dE(r)):r.assigned_.delete(e),r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Fs(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{[mp]:!0,[oE]:r.type_!==1||e!=="length",[Fp]:n[Fp],[ef]:t[e]}},defineProperty(){Ci(11)},getPrototypeOf(r){return pu(r.base_)},setPrototypeOf(){Ci(12)}},rf={};Lf(iA,(r,e)=>{rf[r]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}});rf.deleteProperty=function(r,e){return rf.set.call(this,r,e,void 0)};rf.set=function(r,e,t){return iA.set.call(this,r[0],e,t,r[0])};function Vv(r,e){const t=r[mn];return(t?Fs(t):r)[e]}function Uq(r,e,t){const n=LB(e,t);return n?ef in n?n[ef]:n.get?.call(r.draft_):void 0}function LB(r,e){if(!(e in r))return;let t=pu(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=pu(t)}}function dE(r){r.modified_||(r.modified_=!0,r.parent_&&dE(r.parent_))}function yp(r){r.copy_||(r.assigned_=new Map,r.copy_=uE(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var jq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,i)=>{if(tu(t)&&!tu(n)){const a=n;n=t;const o=this;return function(c=a,...h){return o.produce(c,d=>n.call(this,d,...h))}}tu(n)||Ci(6),i!==void 0&&!tu(i)&&Ci(7);let s;if(Ni(t)){const a=mC(this),o=pE(a,t,void 0);let u=!0;try{s=n(o),u=!1}finally{u?fE(a):hE(a)}return gC(a,i),yC(s,a)}else if(!t||!eA(t)){if(s=n(t),s===void 0&&(s=t),s===TB&&(s=void 0),this.autoFreeze_&&rA(s,!0),i){const a=[],o=[];gu(cE).generateReplacementPatches_(t,s,{patches_:a,inversePatches_:o}),i(a,o)}return s}else Ci(1,t)},this.produceWithPatches=(t,n)=>{if(tu(t))return(o,...u)=>this.produceWithPatches(o,c=>t(c,...u));let i,s;return[this.produce(t,n,(o,u)=>{i=o,s=u}),i,s]},qv(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),qv(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),qv(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ni(e)||Ci(8),Zs(e)&&(e=ki(e));const t=mC(this),n=pE(t,e,void 0);return n[mn].isManual_=!0,hE(t),n}finishDraft(e,t){const n=e&&e[mn];(!n||!n.isManual_)&&Ci(9);const{scope_:i}=n;return gC(i,t),yC(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const i=gu(cE).applyPatches_;return Zs(e)?i(e,t):this.produce(e,s=>i(s,t))}};function pE(r,e,t,n){const[i,s]=Yg(e)?gu(Gp).proxyMap_(e,t):Xg(e)?gu(Gp).proxySet_(e,t):Bq(e,t);return(t?.scope_??_B()).drafts_.push(i),s.callbacks_=t?.callbacks_??[],s.key_=n,t&&n!==void 0?Mq(t,s,n):s.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:c}=u;s.modified_&&c&&c.generatePatches_(s,[],u)}),i}function ki(r){return Zs(r)||Ci(10,r),CB(r)}function CB(r){if(!Ni(r)||Qg(r))return r;const e=r[mn];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=uE(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=uE(r,!0);return Lf(t,(i,s)=>{$p(t,i,CB(s))},n),e&&(e.finalized_=!1),t}var Fq=new jq,PB=Fq.produce;function DB(r){return({dispatch:t,getState:n})=>i=>s=>typeof s=="function"?s(t,n,r):i(s)}var $q=DB(),Gq=DB,zq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Up:Up.apply(null,arguments)};function Si(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(ti(0));return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>EB(n)&&n.type===r,t}var kB=class $c extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$c.prototype)}static get[Symbol.species](){return $c}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $c(...e[0].concat(this)):new $c(...e.concat(this))}};function bC(r){return Ni(r)?PB(r,()=>{}):r}function pd(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function Hq(r){return typeof r=="boolean"}var Kq=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new kB;return t&&(Hq(t)?a.push($q):a.push(Gq(t.extraArgument))),a},MB="RTK_autoBatch",Xt=()=>r=>({payload:r,meta:{[MB]:!0}}),xC=r=>e=>{setTimeout(e,r)},NB=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,s=!1,a=!1;const o=new Set,u=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xC(10):r.type==="callback"?r.queueNotification:xC(r.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const d=()=>i&&h(),g=n.subscribe(d);return o.add(h),()=>{g(),o.delete(h)}},dispatch(h){try{return i=!h?.meta?.[MB],s=!i,s&&(a||(a=!0,u(c))),n.dispatch(h)}finally{i=!0}}})},qq=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new kB(r);return n&&i.push(NB(typeof n=="object"?n:void 0)),i};function Vq(r){const e=Kq(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(JT(t))o=SB(t);else throw new Error(ti(1));let u;typeof n=="function"?u=n(e):u=e();let c=Up;i&&(c=zq({trace:!1,...typeof i=="object"&&i}));const h=_q(...u),d=qq(h);let g=typeof a=="function"?a(d):d();const m=c(...g);return xB(o,s,m)}function BB(r){const e={},t=[];let n;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(ti(28));if(o in e)throw new Error(ti(29));return e[o]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&t.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return t.push({matcher:s,reducer:a}),i},addDefaultCase(s){return n=s,i}};return r(i),[e,t,n]}function Wq(r){return typeof r=="function"}function Yq(r,e){let[t,n,i]=BB(e),s;if(Wq(r))s=()=>bC(r());else{const o=bC(r);s=()=>o}function a(o=s(),u){let c=[t[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,d)=>{if(d)if(Zs(h)){const m=d(h,u);return m===void 0?h:m}else{if(Ni(h))return PB(h,g=>d(g,u));{const g=d(h,u);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},o)}return a.getInitialState=s,a}var Xq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Qq=(r=21)=>{let e="",t=r;for(;t--;)e+=Xq[Math.random()*64|0];return e},Zq=Symbol.for("rtk-slice-createasyncthunk");function Jq(r,e){return`${r}/${e}`}function e9({creators:r}={}){const e=r?.asyncThunk?.[Zq];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(ti(11));const a=(typeof n.reducers=="function"?n.reducers(r9()):n.reducers)||{},o=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(T,I){const w=typeof T=="string"?T:T.type;if(!w)throw new Error(ti(12));if(w in u.sliceCaseReducersByType)throw new Error(ti(13));return u.sliceCaseReducersByType[w]=I,c},addMatcher(T,I){return u.sliceMatchers.push({matcher:T,reducer:I}),c},exposeAction(T,I){return u.actionCreators[T]=I,c},exposeCaseReducer(T,I){return u.sliceCaseReducersByName[T]=I,c}};o.forEach(T=>{const I=a[T],w={reducerName:T,type:Jq(i,T),createNotation:typeof n.reducers=="function"};i9(I)?a9(w,I,c,e):n9(w,I,c)});function h(){const[T={},I=[],w=void 0]=typeof n.extraReducers=="function"?BB(n.extraReducers):[n.extraReducers],R={...T,...u.sliceCaseReducersByType};return Yq(n.initialState,_=>{for(let C in R)_.addCase(C,R[C]);for(let C of u.sliceMatchers)_.addMatcher(C.matcher,C.reducer);for(let C of I)_.addMatcher(C.matcher,C.reducer);w&&_.addDefaultCase(w)})}const d=T=>T,g=new Map,m=new WeakMap;let y;function x(T,I){return y||(y=h()),y(T,I)}function b(){return y||(y=h()),y.getInitialState()}function E(T,I=!1){function w(_){let C=_[T];return typeof C>"u"&&I&&(C=pd(m,w,b)),C}function R(_=d){const C=pd(g,I,()=>new WeakMap);return pd(C,_,()=>{const k={};for(const[D,U]of Object.entries(n.selectors??{}))k[D]=t9(U,_,()=>pd(m,_,b),I);return k})}return{reducerPath:T,getSelectors:R,get selectors(){return R(w)},selectSlice:w}}const S={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...E(s),injectInto(T,{reducerPath:I,...w}={}){const R=I??s;return T.inject({reducerPath:R,reducer:x},w),{...S,...E(R,!0)}}};return S}}function t9(r,e,t,n){function i(s,...a){let o=e(s);return typeof o>"u"&&n&&(o=t()),r(o,...a)}return i.unwrapped=r,i}var Bn=e9();function r9(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function n9({type:r,reducerName:e,createNotation:t},n,i){let s,a;if("reducer"in n){if(t&&!s9(n))throw new Error(ti(17));s=n.reducer,a=n.prepare}else s=n;i.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,a?Si(r,a):Si(r))}function i9(r){return r._reducerDefinitionType==="asyncThunk"}function s9(r){return r._reducerDefinitionType==="reducerWithPrepare"}function a9({type:r,reducerName:e},t,n,i){if(!i)throw new Error(ti(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:u,settled:c,options:h}=t,d=i(r,s,h);n.exposeAction(e,d),a&&n.addCase(d.fulfilled,a),o&&n.addCase(d.pending,o),u&&n.addCase(d.rejected,u),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(e,{fulfilled:a||gd,pending:o||gd,rejected:u||gd,settled:c||gd})}function gd(){}var o9="task",UB="listener",jB="completed",sA="cancelled",l9=`task-${sA}`,u9=`task-${jB}`,gE=`${UB}-${sA}`,c9=`${UB}-${jB}`,Jg=class{constructor(r){this.code=r,this.message=`${o9} ${sA} (reason: ${r})`}name="TaskAbortError";message},aA=(r,e)=>{if(typeof r!="function")throw new TypeError(ti(32))},zp=()=>{},FB=(r,e=zp)=>(r.catch(e),r),$B=(r,e)=>(r.addEventListener("abort",e,{once:!0}),()=>r.removeEventListener("abort",e)),zo=(r,e)=>{const t=r.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),r.abort(e))},Ho=r=>{if(r.aborted){const{reason:e}=r;throw new Jg(e)}};function GB(r,e){let t=zp;return new Promise((n,i)=>{const s=()=>i(new Jg(r.reason));if(r.aborted){s();return}t=$B(r,s),e.finally(()=>t()).then(n,i)}).finally(()=>{t=zp})}var f9=async(r,e)=>{try{return await Promise.resolve(),{status:"ok",value:await r()}}catch(t){return{status:t instanceof Jg?"cancelled":"rejected",error:t}}finally{e?.()}},Hp=r=>e=>FB(GB(r,e).then(t=>(Ho(r),t))),zB=r=>{const e=Hp(r);return t=>e(new Promise(n=>setTimeout(n,t)))},{assign:ou}=Object,SC={},em="listenerMiddleware",h9=(r,e)=>{const t=n=>$B(r,()=>zo(n,r.reason));return(n,i)=>{aA(n);const s=new AbortController;t(s);const a=f9(async()=>{Ho(r),Ho(s.signal);const o=await n({pause:Hp(s.signal),delay:zB(s.signal),signal:s.signal});return Ho(s.signal),o},()=>zo(s,u9));return i?.autoJoin&&e.push(a.catch(zp)),{result:Hp(r)(a),cancel(){zo(s,l9)}}}},d9=(r,e)=>{const t=async(n,i)=>{Ho(e);let s=()=>{};const o=[new Promise((u,c)=>{let h=r({predicate:n,effect:(d,g)=>{g.unsubscribe(),u([d,g.getState(),g.getOriginalState()])}});s=()=>{h(),c()}})];i!=null&&o.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await GB(e,Promise.race(o));return Ho(e),u}finally{s()}};return(n,i)=>FB(t(n,i))},HB=r=>{let{type:e,actionCreator:t,matcher:n,predicate:i,effect:s}=r;if(e)i=Si(e).match;else if(t)e=t.type,i=t.match;else if(n)i=n;else if(!i)throw new Error(ti(21));return aA(s),{predicate:i,type:e,effect:s}},KB=ou(r=>{const{type:e,predicate:t,effect:n}=HB(r);return{id:Qq(),effect:n,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(ti(22))}}},{withTypes:()=>KB}),EC=(r,e)=>{const{type:t,effect:n,predicate:i}=HB(e);return Array.from(r.values()).find(s=>(typeof t=="string"?s.type===t:s.predicate===i)&&s.effect===n)},mE=r=>{r.pending.forEach(e=>{zo(e,gE)})},p9=(r,e)=>()=>{for(const t of e.keys())mE(t);r.clear()},TC=(r,e,t)=>{try{r(e,t)}catch(n){setTimeout(()=>{throw n},0)}},qB=ou(Si(`${em}/add`),{withTypes:()=>qB}),g9=Si(`${em}/removeAll`),VB=ou(Si(`${em}/remove`),{withTypes:()=>VB}),m9=(...r)=>{console.error(`${em}/error`,...r)},Pf=(r={})=>{const e=new Map,t=new Map,n=m=>{const y=t.get(m)??0;t.set(m,y+1)},i=m=>{const y=t.get(m)??1;y===1?t.delete(m):t.set(m,y-1)},{extra:s,onError:a=m9}=r;aA(a);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),y=>{m.unsubscribe(),y?.cancelActive&&mE(m)}),u=m=>{const y=EC(e,m)??KB(m);return o(y)};ou(u,{withTypes:()=>u});const c=m=>{const y=EC(e,m);return y&&(y.unsubscribe(),m.cancelActive&&mE(y)),!!y};ou(c,{withTypes:()=>c});const h=async(m,y,x,b)=>{const E=new AbortController,S=d9(u,E.signal),T=[];try{m.pending.add(E),n(m),await Promise.resolve(m.effect(y,ou({},x,{getOriginalState:b,condition:(I,w)=>S(I,w).then(Boolean),take:S,delay:zB(E.signal),pause:Hp(E.signal),extra:s,signal:E.signal,fork:h9(E.signal,T),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((I,w,R)=>{I!==E&&(zo(I,gE),R.delete(I))})},cancel:()=>{zo(E,gE),m.pending.delete(E)},throwIfCancelled:()=>{Ho(E.signal)}})))}catch(I){I instanceof Jg||TC(a,I,{raisedBy:"effect"})}finally{await Promise.all(T),zo(E,c9),i(m),m.pending.delete(E)}},d=p9(e,t);return{middleware:m=>y=>x=>{if(!EB(x))return y(x);if(qB.match(x))return u(x.payload);if(g9.match(x)){d();return}if(VB.match(x))return c(x.payload);let b=m.getState();const E=()=>{if(b===SC)throw new Error(ti(23));return b};let S;try{if(S=y(x),e.size>0){const T=m.getState(),I=Array.from(e.values());for(const w of I){let R=!1;try{R=w.predicate(x,T,b)}catch(_){R=!1,TC(a,_,{raisedBy:"predicate"})}R&&h(w,x,m,E)}}}finally{b=SC}return S},startListening:u,stopListening:c,clearListeners:d}};function ti(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var y9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},WB=Bn({name:"chartLayout",initialState:y9,reducers:{setLayout(r,e){r.layoutType=e.payload},setChartSize(r,e){r.width=e.payload.width,r.height=e.payload.height},setMargin(r,e){var t,n,i,s;r.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,r.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,r.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,r.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(r,e){r.scale=e.payload}}}),{setMargin:v9,setLayout:b9,setChartSize:x9,setScale:S9}=WB.actions,E9=WB.reducer;function YB(r,e,t){return Array.isArray(r)&&r&&e+t!==0?r.slice(e,t+1):r}function AC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AC(Object(t),!0).forEach(function(n){T9(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):AC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function T9(r,e,t){return(e=A9(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function A9(r){var e=w9(r,"string");return typeof e=="symbol"?e:e+""}function w9(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function sn(r,e,t){return Nr(r)||Nr(e)?t:is(e)?Kg(r,e,t):typeof e=="function"?e(r):t}var _9=(r,e,t)=>{if(e&&t){var{width:n,height:i}=t,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&at(r[s]))return nu(nu({},r),{},{[s]:r[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&at(r[a]))return nu(nu({},r),{},{[a]:r[a]+(i||0)})}return r},ao=(r,e)=>r==="horizontal"&&e==="xAxis"||r==="vertical"&&e==="yAxis"||r==="centric"&&e==="angleAxis"||r==="radial"&&e==="radiusAxis",XB=(r,e,t,n)=>{if(n)return r.map(o=>o.coordinate);var i,s,a=r.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(t),a},QB=(r,e,t)=>{if(!r)return null;var{duplicateDomain:n,type:i,range:s,scale:a,realScaleType:o,isCategorical:u,categoricalDomain:c,tickCount:h,ticks:d,niceTicks:g,axisType:m}=r;if(!a)return null;var y=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,x=i==="category"&&a.bandwidth?a.bandwidth()/y:0;if(x=m==="angleAxis"&&s&&s.length>=2?bi(s[0]-s[1])*2*x:x,d||g){var b=(d||g||[]).map((E,S)=>{var T=n?n.indexOf(E):E;return{coordinate:a(T)+x,value:E,offset:x,index:S}});return b.filter(E=>!ns(E.coordinate))}return u&&c?c.map((E,S)=>({coordinate:a(E)+x,value:E,index:S,offset:x})):a.ticks&&h!=null?a.ticks(h).map((E,S)=>({coordinate:a(E)+x,value:E,offset:x,index:S})):a.domain().map((E,S)=>({coordinate:a(E)+x,value:n?n[E]:E,index:S,offset:x}))},wC=1e-4,I9=r=>{var e=r.domain();if(!(!e||e.length<=2)){var t=e.length,n=r.range(),i=Math.min(n[0],n[1])-wC,s=Math.max(n[0],n[1])+wC,a=r(e[0]),o=r(e[t-1]);(a<i||a>s||o<i||o>s)&&r.domain([e[0],e[t-1]])}},O9=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,s=0,a=0;a<e;++a){var o=ns(r[a][t][1])?r[a][t][0]:r[a][t][1];o>=0?(r[a][t][0]=i,r[a][t][1]=i+o,i=r[a][t][1]):(r[a][t][0]=s,r[a][t][1]=s+o,s=r[a][t][1])}},R9=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,s=0;s<e;++s){var a=ns(r[s][t][1])?r[s][t][0]:r[s][t][1];a>=0?(r[s][t][0]=i,r[s][t][1]=i+a,i=r[s][t][1]):(r[s][t][0]=0,r[s][t][1]=0)}},L9={sign:O9,expand:QH,none:du,silhouette:ZH,wiggle:JH,positive:R9},C9=(r,e,t)=>{var n=L9[t],i=XH().keys(e).value((s,a)=>Number(sn(s,a,0))).order(sE).offset(n);return i(r)};function _C(r){var{axis:e,ticks:t,bandSize:n,entry:i,index:s,dataKey:a}=r;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Nr(i[e.dataKey])){var o=tB(t,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return t[s]?t[s].coordinate+n/2:null}var u=sn(i,Nr(a)?e.dataKey:a);return Nr(u)?null:e.scale(u)}var P9=r=>{var e=r.flat(2).filter(at);return[Math.min(...e),Math.max(...e)]},D9=r=>[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]],k9=(r,e,t)=>{if(r!=null)return D9(Object.keys(r).reduce((n,i)=>{var s=r[i],{stackedData:a}=s,o=a.reduce((u,c)=>{var h=YB(c,e,t),d=P9(h);return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},IC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kp=(r,e,t)=>{if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!t||n>0)return n}if(r&&e&&e.length>=2){for(var i=qg(e,h=>h.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var u=i[a],c=i[a-1];s=Math.min((u.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return t?void 0:0};function RC(r){var{tooltipEntrySettings:e,dataKey:t,payload:n,value:i,name:s}=r;return nu(nu({},e),{},{dataKey:t,payload:n,value:i,name:s})}function ZB(r,e){if(r)return String(r);if(typeof e=="string")return e}var M9=(r,e)=>{if(e==="horizontal")return r.chartX;if(e==="vertical")return r.chartY},N9=(r,e)=>e==="centric"?r.angle:r.radius,la=r=>r.layout.width,ua=r=>r.layout.height,B9=r=>r.layout.scale,JB=r=>r.layout.margin,tm=ke(r=>r.cartesianAxis.xAxis,r=>Object.values(r)),rm=ke(r=>r.cartesianAxis.yAxis,r=>Object.values(r)),U9="data-recharts-item-index",j9="data-recharts-item-data-key",Df=60;function LC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function md(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LC(Object(t),!0).forEach(function(n){F9(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function F9(r,e,t){return(e=$9(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $9(r){var e=G9(r,"string");return typeof e=="symbol"?e:e+""}function G9(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var z9=r=>r.brush.height;function H9(r){var e=rm(r);return e.reduce((t,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Df;return t+i}return t},0)}function K9(r){var e=rm(r);return e.reduce((t,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Df;return t+i}return t},0)}function q9(r){var e=tm(r);return e.reduce((t,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?t+n.height:t,0)}function V9(r){var e=tm(r);return e.reduce((t,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?t+n.height:t,0)}var Xr=ke([la,ua,JB,z9,H9,K9,q9,V9,vB,bq],(r,e,t,n,i,s,a,o,u,c)=>{var h={left:(t.left||0)+i,right:(t.right||0)+s},d={top:(t.top||0)+a,bottom:(t.bottom||0)+o},g=md(md({},d),h),m=g.bottom;g.bottom+=n,g=_9(g,u,c);var y=r-g.left-g.right,x=e-g.top-g.bottom;return md(md({brushBottom:m},g),{},{width:Math.max(y,0),height:Math.max(x,0)})}),W9=ke(Xr,r=>({x:r.left,y:r.top,width:r.width,height:r.height})),eU=ke(la,ua,(r,e)=>({x:0,y:0,width:r,height:e})),Y9=P.createContext(null),Un=()=>P.useContext(Y9)!=null,nm=r=>r.brush,im=ke([nm,Xr,JB],(r,e,t)=>({height:r.height,x:at(r.x)?r.x:e.left,y:at(r.y)?r.y:e.top+e.height+e.brushBottom-(t?.bottom||0),width:at(r.width)?r.width:e.width})),Wv={},Yv={},Xv={},CC;function X9(){return CC||(CC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n,{signal:i,edges:s}={}){let a,o=null;const u=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),h=()=>{o!==null&&(t.apply(a,o),a=void 0,o=null)},d=()=>{c&&h(),x()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,d()},n)},y=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{y(),a=void 0,o=null},b=()=>{h()},E=function(...S){if(i?.aborted)return;a=this,o=S;const T=g==null;m(),u&&T&&h()};return E.schedule=m,E.cancel=x,E.flush=b,i?.addEventListener("abort",x,{once:!0}),E}r.debounce=e})(Xv)),Xv}var PC;function Q9(){return PC||(PC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=X9();function t(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:u}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let h,d=null;const g=e.debounce(function(...x){h=n.apply(this,x),d=null},i,{edges:c}),m=function(...x){return u!=null&&(d===null&&(d=Date.now()),Date.now()-d>=u)?(h=n.apply(this,x),d=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,x),h)},y=()=>(g.flush(),h);return m.cancel=g.cancel,m.flush=y,m}r.debounce=t})(Yv)),Yv}var DC;function Z9(){return DC||(DC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Q9();function t(n,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(n,i,{leading:a,maxWait:i,trailing:o})}r.throttle=t})(Wv)),Wv}var Qv,kC;function J9(){return kC||(kC=1,Qv=Z9().throttle),Qv}var eV=J9();const tV=na(eV);var qp=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(t.replace(/%s/g,()=>i[a++]))}},tU=(r,e,t)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:a}=t,o=Qs(n)?r:Number(n),u=Qs(i)?e:Number(i);return s&&s>0&&(o?u=o/s:u&&(o=u*s),a&&u!=null&&u>a&&(u=a)),{calculatedWidth:o,calculatedHeight:u}},rV={width:0,height:0,overflow:"visible"},nV={width:0,overflowX:"visible"},iV={height:0,overflowY:"visible"},sV={},aV=r=>{var{width:e,height:t}=r,n=Qs(e),i=Qs(t);return n&&i?rV:n?nV:i?iV:sV};function oV(r){var{width:e,height:t,aspect:n}=r,i=e,s=t;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Br(r){return Number.isFinite(r)}function ss(r){return typeof r=="number"&&r>0&&Number.isFinite(r)}function yE(){return yE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yE.apply(null,arguments)}function MC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function NC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(t),!0).forEach(function(n){lV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):MC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function lV(r,e,t){return(e=uV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uV(r){var e=cV(r,"string");return typeof e=="symbol"?e:e+""}function cV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var rU=P.createContext({width:-1,height:-1});function fV(r){return ss(r.width)&&ss(r.height)}function nU(r){var{children:e,width:t,height:n}=r,i=P.useMemo(()=>({width:t,height:n}),[t,n]);return fV(i)?P.createElement(rU.Provider,{value:i},e):null}var oA=()=>P.useContext(rU),hV=P.forwardRef((r,e)=>{var{aspect:t,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:u,children:c,debounce:h=0,id:d,className:g,onResize:m,style:y={}}=r,x=P.useRef(null),b=P.useRef();b.current=m,P.useImperativeHandle(e,()=>x.current);var[E,S]=P.useState({containerWidth:n.width,containerHeight:n.height}),T=P.useCallback((C,k)=>{S(D=>{var U=Math.round(C),N=Math.round(k);return D.containerWidth===U&&D.containerHeight===N?D:{containerWidth:U,containerHeight:N}})},[]);P.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Rf;var C=N=>{var q,{width:X,height:V}=N[0].contentRect;T(X,V),(q=b.current)===null||q===void 0||q.call(b,X,V)};h>0&&(C=tV(C,h,{trailing:!0,leading:!1}));var k=new ResizeObserver(C),{width:D,height:U}=x.current.getBoundingClientRect();return T(D,U),k.observe(x.current),()=>{k.disconnect()}},[T,h]);var{containerWidth:I,containerHeight:w}=E;qp(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:R,calculatedHeight:_}=tU(I,w,{width:i,height:s,aspect:t,maxHeight:u});return qp(R!=null&&R>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,_,i,s,a,o,t),P.createElement("div",{id:d?"".concat(d):void 0,className:Bt("recharts-responsive-container",g),style:NC(NC({},y),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:u}),ref:x},P.createElement("div",{style:aV({width:i,height:s})},P.createElement(nU,{width:R,height:_},c)))}),BC=P.forwardRef((r,e)=>{var t=oA();if(ss(t.width)&&ss(t.height))return r.children;var{width:n,height:i}=oV({width:r.width,height:r.height,aspect:r.aspect}),{calculatedWidth:s,calculatedHeight:a}=tU(void 0,void 0,{width:n,height:i,aspect:r.aspect,maxHeight:r.maxHeight});return at(s)&&at(a)?P.createElement(nU,{width:s,height:a},r.children):P.createElement(hV,yE({},r,{width:n,height:i,ref:e}))});function iU(r){if(r)return{x:r.x,y:r.y,upperWidth:"upperWidth"in r?r.upperWidth:r.width,lowerWidth:"lowerWidth"in r?r.lowerWidth:r.width,width:r.width,height:r.height}}var sm=()=>{var r,e=Un(),t=it(W9),n=it(im),i=(r=it(nm))===null||r===void 0?void 0:r.padding;return!e||!n||!i?t:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},dV={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sU=()=>{var r;return(r=it(Xr))!==null&&r!==void 0?r:dV},lA=()=>it(la),uA=()=>it(ua),pV=()=>it(r=>r.layout.margin),Vt=r=>r.layout.layoutType,am=()=>it(Vt),gV=()=>{var r=am();return r!==void 0},om=r=>{var e=vr(),t=Un(),{width:n,height:i}=r,s=oA(),a=n,o=i;return s&&(a=s.width>0?s.width:n,o=s.height>0?s.height:i),P.useEffect(()=>{!t&&ss(a)&&ss(o)&&e(x9({width:a,height:o}))},[e,t,a,o]),null},aU=Symbol.for("immer-nothing"),UC=Symbol.for("immer-draftable"),ni=Symbol.for("immer-state");function Pi(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var nf=Object.getPrototypeOf;function mu(r){return!!r&&!!r[ni]}function Wo(r){return r?oU(r)||Array.isArray(r)||!!r[UC]||!!r.constructor?.[UC]||kf(r)||um(r):!1}var mV=Object.prototype.constructor.toString(),jC=new WeakMap;function oU(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let n=jC.get(t);return n===void 0&&(n=Function.toString.call(t),jC.set(t,n)),n===mV}function Vp(r,e,t=!0){lm(r)===0?(t?Reflect.ownKeys(r):Object.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function lm(r){const e=r[ni];return e?e.type_:Array.isArray(r)?1:kf(r)?2:um(r)?3:0}function vE(r,e){return lm(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function lU(r,e,t){const n=lm(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function yV(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function kf(r){return r instanceof Map}function um(r){return r instanceof Set}function Po(r){return r.copy_||r.base_}function bE(r,e){if(kf(r))return new Map(r);if(um(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=oU(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[ni];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],o=n[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[a]})}return Object.create(nf(r),n)}else{const n=nf(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function cA(r,e=!1){return cm(r)||mu(r)||!Wo(r)||(lm(r)>1&&Object.defineProperties(r,{set:yd,add:yd,clear:yd,delete:yd}),Object.freeze(r),e&&Object.values(r).forEach(t=>cA(t,!0))),r}function vV(){Pi(2)}var yd={value:vV};function cm(r){return r===null||typeof r!="object"?!0:Object.isFrozen(r)}var bV={};function Yo(r){const e=bV[r];return e||Pi(0,r),e}var sf;function uU(){return sf}function xV(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FC(r,e){e&&(Yo("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function xE(r){SE(r),r.drafts_.forEach(SV),r.drafts_=null}function SE(r){r===sf&&(sf=r.parent_)}function $C(r){return sf=xV(sf,r)}function SV(r){const e=r[ni];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function GC(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[ni].modified_&&(xE(e),Pi(4)),Wo(r)&&(r=Wp(e,r),e.parent_||Yp(e,r)),e.patches_&&Yo("Patches").generateReplacementPatches_(t[ni].base_,r,e.patches_,e.inversePatches_)):r=Wp(e,t,[]),xE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==aU?r:void 0}function Wp(r,e,t){if(cm(e))return e;const n=r.immer_.shouldUseStrictIteration(),i=e[ni];if(!i)return Vp(e,(s,a)=>zC(r,i,e,s,a,t),n),e;if(i.scope_!==r)return e;if(!i.modified_)return Yp(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),Vp(a,(u,c)=>zC(r,i,s,u,c,t,o),n),Yp(r,s,!1),t&&r.patches_&&Yo("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function zC(r,e,t,n,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=cm(i);if(!(o&&!a)){if(mu(i)){const u=s&&e&&e.type_!==3&&!vE(e.assigned_,n)?s.concat(n):void 0,c=Wp(r,i,u);if(lU(t,n,c),mu(c))r.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Wo(i)&&!o){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;Wp(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(kf(t)?t.has(n):Object.prototype.propertyIsEnumerable.call(t,n))&&Yp(r,i)}}}function Yp(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&cA(e,t)}function EV(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:uU(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=fA;t&&(i=[n],s=af);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,o}var fA={get(r,e){if(e===ni)return r;const t=Po(r);if(!vE(t,e))return TV(r,t,e);const n=t[e];return r.finalized_||!Wo(n)?n:n===Zv(r.base_,e)?(Jv(r),r.copy_[e]=TE(n,r)):n},has(r,e){return e in Po(r)},ownKeys(r){return Reflect.ownKeys(Po(r))},set(r,e,t){const n=cU(Po(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Zv(Po(r),e),s=i?.[ni];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(yV(t,i)&&(t!==void 0||vE(r.base_,e)))return!0;Jv(r),EE(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Zv(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Jv(r),EE(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Po(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Pi(11)},getPrototypeOf(r){return nf(r.base_)},setPrototypeOf(){Pi(12)}},af={};Vp(fA,(r,e)=>{af[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});af.deleteProperty=function(r,e){return af.set.call(this,r,e,void 0)};af.set=function(r,e,t){return fA.set.call(this,r[0],e,t,r[0])};function Zv(r,e){const t=r[ni];return(t?Po(t):r)[e]}function TV(r,e,t){const n=cU(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function cU(r,e){if(!(e in r))return;let t=nf(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=nf(t)}}function EE(r){r.modified_||(r.modified_=!0,r.parent_&&EE(r.parent_))}function Jv(r){r.copy_||(r.copy_=bE(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var AV=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(u=s,...c){return a.produce(u,h=>t.call(this,h,...c))}}typeof t!="function"&&Pi(6),n!==void 0&&typeof n!="function"&&Pi(7);let i;if(Wo(e)){const s=$C(this),a=TE(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?xE(s):SE(s)}return FC(s,n),GC(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===aU&&(i=void 0),this.autoFreeze_&&cA(i,!0),n){const s=[],a=[];Yo("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else Pi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,u=>e(u,...o));let n,i;return[this.produce(e,t,(a,o)=>{n=a,i=o}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),typeof r?.useStrictIteration=="boolean"&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Wo(r)||Pi(8),mu(r)&&(r=wV(r));const e=$C(this),t=TE(r,void 0);return t[ni].isManual_=!0,SE(e),t}finishDraft(r,e){const t=r&&r[ni];(!t||!t.isManual_)&&Pi(9);const{scope_:n}=t;return FC(n,e),GC(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=Yo("Patches").applyPatches_;return mu(r)?n(r,e):this.produce(r,i=>n(i,e))}};function TE(r,e){const t=kf(r)?Yo("MapSet").proxyMap_(r,e):um(r)?Yo("MapSet").proxySet_(r,e):EV(r,e);return(e?e.scope_:uU()).drafts_.push(t),t}function wV(r){return mu(r)||Pi(10,r),fU(r)}function fU(r){if(!Wo(r)||cm(r))return r;const e=r[ni];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=bE(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=bE(r,!0);return Vp(t,(i,s)=>{lU(t,i,fU(s))},n),e&&(e.finalized_=!1),t}var _V=new AV;_V.produce;var IV={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hU=Bn({name:"legend",initialState:IV,reducers:{setLegendSize(r,e){r.size.width=e.payload.width,r.size.height=e.payload.height},setLegendSettings(r,e){r.settings.align=e.payload.align,r.settings.layout=e.payload.layout,r.settings.verticalAlign=e.payload.verticalAlign,r.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(r,e){r.payload.push(e.payload)},prepare:Xt()},replaceLegendPayload:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).payload.indexOf(t);i>-1&&(r.payload[i]=n)},prepare:Xt()},removeLegendPayload:{reducer(r,e){var t=ki(r).payload.indexOf(e.payload);t>-1&&r.payload.splice(t,1)},prepare:Xt()}}}),{setLegendSize:HC,setLegendSettings:OV,addLegendPayload:RV,replaceLegendPayload:LV,removeLegendPayload:CV}=hU.actions,PV=hU.reducer,DV=["contextPayload"];function AE(){return AE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},AE.apply(null,arguments)}function KC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KC(Object(t),!0).forEach(function(n){kV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kV(r,e,t){return(e=MV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function MV(r){var e=NV(r,"string");return typeof e=="symbol"?e:e+""}function NV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function BV(r,e){if(r==null)return{};var t,n,i=UV(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function UV(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function jV(r){return r.value}function FV(r){var{contextPayload:e}=r,t=BV(r,DV),n=pB(e,r.payloadUniqBy,jV),i=yu(yu({},t),{},{payload:n});return P.isValidElement(r.content)?P.cloneElement(r.content,i):typeof r.content=="function"?P.createElement(r.content,i):P.createElement(OK,i)}function $V(r,e,t,n,i,s){var{layout:a,align:o,verticalAlign:u}=e,c,h;return(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))&&(o==="center"&&a==="vertical"?c={left:((n||0)-s.width)/2}:c=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))&&(u==="middle"?h={top:((i||0)-s.height)/2}:h=u==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),yu(yu({},c),h)}function GV(r){var e=vr();return P.useEffect(()=>{e(OV(r))},[e,r]),null}function zV(r){var e=vr();return P.useEffect(()=>(e(HC(r)),()=>{e(HC({width:0,height:0}))}),[e,r]),null}function HV(r,e,t,n){return r==="vertical"&&at(e)?{height:e}:r==="horizontal"?{width:t||n}:null}var KV={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function wE(r){var e=an(r,KV),t=Eq(),n=xH(),i=pV(),{width:s,height:a,wrapperStyle:o,portal:u}=e,[c,h]=bB([t]),d=lA(),g=uA();if(d==null||g==null)return null;var m=d-(i?.left||0)-(i?.right||0),y=HV(e.layout,a,s,m),x=u?o:yu(yu({position:"absolute",width:y?.width||s||"auto",height:y?.height||a||"auto"},$V(o,e,i,d,g,c)),o),b=u??n;if(b==null||t==null)return null;var E=P.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:h},P.createElement(GV,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&P.createElement(zV,{width:c.width,height:c.height}),P.createElement(FV,AE({},e,y,{margin:i,chartWidth:d,chartHeight:g,contextPayload:t})));return _T.createPortal(E,b)}wE.displayName="Legend";function _E(){return _E=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_E.apply(null,arguments)}function qC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qC(Object(t),!0).forEach(function(n){qV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qV(r,e,t){return(e=VV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VV(r){var e=WV(r,"string");return typeof e=="symbol"?e:e+""}function WV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function YV(r){return Array.isArray(r)&&is(r[0])&&is(r[1])?r.join(" ~ "):r}var XV=r=>{var{separator:e=" : ",contentStyle:t={},itemStyle:n={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:u,labelClassName:c,label:h,labelFormatter:d,accessibilityLayer:g=!1}=r,m=()=>{if(s&&s.length){var w={padding:0,margin:0},R=(o?qg(s,o):s).map((_,C)=>{if(_.type==="none")return null;var k=_.formatter||a||YV,{value:D,name:U}=_,N=D,q=U;if(k){var X=k(D,U,_,C,s);if(Array.isArray(X))[N,q]=X;else if(X!=null)N=X;else return null}var V=eb({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:V},is(q)?P.createElement("span",{className:"recharts-tooltip-item-name"},q):null,is(q)?P.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,P.createElement("span",{className:"recharts-tooltip-item-value"},N),P.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:w},R)}return null},y=eb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),x=eb({margin:0},i),b=!Nr(h),E=b?h:"",S=Bt("recharts-default-tooltip",u),T=Bt("recharts-tooltip-label",c);b&&d&&s!==void 0&&s!==null&&(E=d(h,s));var I=g?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",_E({className:S,style:y},I),P.createElement("p",{className:T,style:x},P.isValidElement(E)?E:"".concat(E)),m())},Rc="recharts-tooltip-wrapper",QV={visibility:"hidden"};function ZV(r){var{coordinate:e,translateX:t,translateY:n}=r;return Bt(Rc,{["".concat(Rc,"-right")]:at(t)&&e&&at(e.x)&&t>=e.x,["".concat(Rc,"-left")]:at(t)&&e&&at(e.x)&&t<e.x,["".concat(Rc,"-bottom")]:at(n)&&e&&at(e.y)&&n>=e.y,["".concat(Rc,"-top")]:at(n)&&e&&at(e.y)&&n<e.y})}function VC(r){var{allowEscapeViewBox:e,coordinate:t,key:n,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:u,viewBoxDimension:c}=r;if(s&&at(s[n]))return s[n];var h=t[n]-o-(i>0?i:0),d=t[n]+i;if(e[n])return a[n]?h:d;var g=u[n];if(g==null)return 0;if(a[n]){var m=h,y=g;return m<y?Math.max(d,g):Math.max(h,g)}if(c==null)return 0;var x=d+o,b=g+c;return x>b?Math.max(h,g):Math.max(d,g)}function JV(r){var{translateX:e,translateY:t,useTranslate3d:n}=r;return{transform:n?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function eW(r){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:u}=r,c,h,d;return a.height>0&&a.width>0&&t?(h=VC({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),d=VC({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),c=JV({translateX:h,translateY:d,useTranslate3d:o})):c=QV,{cssProperties:c,cssClasses:ZV({translateX:h,translateY:d,coordinate:t})}}function WC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vd(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WC(Object(t),!0).forEach(function(n){IE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function IE(r,e,t){return(e=tW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tW(r){var e=rW(r,"string");return typeof e=="symbol"?e:e+""}function rW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class nW extends P.PureComponent{constructor(){super(...arguments),IE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),IE(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&t!==void 0?t:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:u,offset:c,position:h,reverseDirection:d,useTranslate3d:g,viewBox:m,wrapperStyle:y,lastBoundingBox:x,innerRef:b,hasPortalFromProps:E}=this.props,{cssClasses:S,cssProperties:T}=eW({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:h,reverseDirection:d,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:m}),I=E?{}:vd(vd({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=vd(vd({},I),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:w,ref:b},s)}}var dU=()=>{var r;return(r=it(e=>e.rootProps.accessibilityLayer))!==null&&r!==void 0?r:!0};function OE(){return OE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},OE.apply(null,arguments)}function YC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function XC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YC(Object(t),!0).forEach(function(n){iW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iW(r,e,t){return(e=sW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sW(r){var e=aW(r,"string");return typeof e=="symbol"?e:e+""}function aW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var QC={curveBasisClosed:jH,curveBasisOpen:FH,curveBasis:UH,curveBumpX:AH,curveBumpY:wH,curveLinearClosed:$H,curveLinear:zg,curveMonotoneX:GH,curveMonotoneY:zH,curveNatural:HH,curveStep:KH,curveStepAfter:VH,curveStepBefore:qH},Xp=r=>Br(r.x)&&Br(r.y),ZC=r=>r.base!=null&&Xp(r.base)&&Xp(r),Lc=r=>r.x,Cc=r=>r.y,oW=(r,e)=>{if(typeof r=="function")return r;var t="curve".concat(Of(r));return(t==="curveMonotone"||t==="curveBump")&&e?QC["".concat(t).concat(e==="vertical"?"Y":"X")]:QC[t]||zg},lW=r=>{var{type:e="linear",points:t=[],baseLine:n,layout:i,connectNulls:s=!1}=r,a=oW(e,i),o=s?t.filter(Xp):t,u;if(Array.isArray(n)){var c=t.map((m,y)=>XC(XC({},m),{},{base:n[y]}));i==="vertical"?u=cd().y(Cc).x1(Lc).x0(m=>m.base.x):u=cd().x(Lc).y1(Cc).y0(m=>m.base.y);var h=u.defined(ZC).curve(a),d=s?c.filter(ZC):c;return h(d)}i==="vertical"&&at(n)?u=cd().y(Cc).x1(Lc).x0(n):at(n)?u=cd().x(Lc).y1(Cc).y0(n):u=G2().x(Lc).y(Cc);var g=u.defined(Xp).curve(a);return g(o)},pU=r=>{var{className:e,points:t,path:n,pathRef:i}=r;if((!t||!t.length)&&!n)return null;var s=t&&t.length?lW(r):n;return P.createElement("path",OE({},rs(r),XT(r),{className:Bt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},uW=["x","y","top","left","width","height","className"];function RE(){return RE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},RE.apply(null,arguments)}function JC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cW(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JC(Object(t),!0).forEach(function(n){fW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function fW(r,e,t){return(e=hW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hW(r){var e=dW(r,"string");return typeof e=="symbol"?e:e+""}function dW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function pW(r,e){if(r==null)return{};var t,n,i=gW(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function gW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var mW=(r,e,t,n,i,s)=>"M".concat(r,",").concat(i,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(t),yW=r=>{var{x:e=0,y:t=0,top:n=0,left:i=0,width:s=0,height:a=0,className:o}=r,u=pW(r,uW),c=cW({x:e,y:t,top:n,left:i,width:s,height:a},u);return!at(e)||!at(t)||!at(s)||!at(a)||!at(n)||!at(i)?null:P.createElement("path",RE({},gn(c),{className:Bt("recharts-cross",o),d:mW(e,t,s,a,n,i)}))};function vW(r,e,t,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-i:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-i,width:r==="horizontal"?n:t.width-1,height:r==="horizontal"?t.height-1:n}}function eP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eP(Object(t),!0).forEach(function(n){bW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):eP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bW(r,e,t){return(e=xW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xW(r){var e=SW(r,"string");return typeof e=="symbol"?e:e+""}function SW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var EW=r=>r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),gU=(r,e,t)=>r.map(n=>"".concat(EW(n)," ").concat(e,"ms ").concat(t)).join(","),TW=(r,e)=>[Object.keys(r),Object.keys(e)].reduce((t,n)=>t.filter(i=>n.includes(i))),of=(r,e)=>Object.keys(e).reduce((t,n)=>tP(tP({},t),{},{[n]:r(n,e[n])}),{});function rP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ar(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(t),!0).forEach(function(n){AW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function AW(r,e,t){return(e=wW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wW(r){var e=_W(r,"string");return typeof e=="symbol"?e:e+""}function _W(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Qp=(r,e,t)=>r+(e-r)*t,LE=r=>{var{from:e,to:t}=r;return e!==t},mU=(r,e,t)=>{var n=of((i,s)=>{if(LE(s)){var[a,o]=r(s.from,s.to,s.velocity);return Ar(Ar({},s),{},{from:a,velocity:o})}return s},e);return t<1?of((i,s)=>LE(s)?Ar(Ar({},s),{},{velocity:Qp(s.velocity,n[i].velocity,t),from:Qp(s.from,n[i].from,t)}):s,e):mU(r,n,t-1)};function IW(r,e,t,n,i,s){var a,o=n.reduce((g,m)=>Ar(Ar({},g),{},{[m]:{from:r[m],velocity:0,to:e[m]}}),{}),u=()=>of((g,m)=>m.from,o),c=()=>!Object.values(o).filter(LE).length,h=null,d=g=>{a||(a=g);var m=g-a,y=m/t.dt;o=mU(t,o,y),i(Ar(Ar(Ar({},r),e),u())),a=g,c()||(h=s.setTimeout(d))};return()=>(h=s.setTimeout(d),()=>{var g;(g=h)===null||g===void 0||g()})}function OW(r,e,t,n,i,s,a){var o=null,u=i.reduce((d,g)=>Ar(Ar({},d),{},{[g]:[r[g],e[g]]}),{}),c,h=d=>{c||(c=d);var g=(d-c)/n,m=of((x,b)=>Qp(...b,t(g)),u);if(s(Ar(Ar(Ar({},r),e),m)),g<1)o=a.setTimeout(h);else{var y=of((x,b)=>Qp(...b,t(1)),u);s(Ar(Ar(Ar({},r),e),y))}};return()=>(o=a.setTimeout(h),()=>{var d;(d=o)===null||d===void 0||d()})}const RW=(r,e,t,n,i,s)=>{var a=TW(r,e);return t==null?()=>(i(Ar(Ar({},r),e)),()=>{}):t.isStepper===!0?IW(r,e,t,a,i,s):OW(r,e,t,n,a,i,s)};var Zp=1e-4,yU=(r,e)=>[0,3*r,3*e-6*r,3*r-3*e+1],vU=(r,e)=>r.map((t,n)=>t*e**n).reduce((t,n)=>t+n),nP=(r,e)=>t=>{var n=yU(r,e);return vU(n,t)},LW=(r,e)=>t=>{var n=yU(r,e),i=[...n.map((s,a)=>s*a).slice(1),0];return vU(i,t)},CW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=t[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(o=>parseFloat(o));return[a[0],a[1],a[2],a[3]]}}}return t.length===4?t:[0,0,1,1]},PW=(r,e,t,n)=>{var i=nP(r,t),s=nP(e,n),a=LW(r,t),o=c=>c>1?1:c<0?0:c,u=c=>{for(var h=c>1?1:c,d=h,g=0;g<8;++g){var m=i(d)-h,y=a(d);if(Math.abs(m-h)<Zp||y<Zp)return s(d);d=o(d-m/y)}return s(d)};return u.isStepper=!1,u},iP=function(){return PW(...CW(...arguments))},DW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,s=(a,o,u)=>{var c=-(a-o)*t,h=u*n,d=u+(c-h)*i/1e3,g=u*i/1e3+a;return Math.abs(g-o)<Zp&&Math.abs(d)<Zp?[o,0]:[g,d]};return s.isStepper=!0,s.dt=i,s},kW=r=>{if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return iP(r);case"spring":return DW();default:if(r.split("(")[0]==="cubic-bezier")return iP(r)}return typeof r=="function"?r:null};function MW(r){var e,t=()=>null,n=!1,i=null,s=a=>{if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,[u,...c]=o;if(typeof u=="number"){i=r.setTimeout(s.bind(null,c),u);return}s(u),i=r.setTimeout(s.bind(null,c));return}typeof a=="string"&&(e=a,t(e)),typeof a=="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:()=>{n=!0},start:a=>{n=!1,i&&(i(),i=null),s(a)},subscribe:a=>(t=a,()=>{t=()=>null}),getTimeoutController:()=>r}}class NW{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=a=>{a-n>=t?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function BW(){return MW(new NW)}var UW=P.createContext(BW);function jW(r,e){var t=P.useContext(UW);return P.useMemo(()=>e??t(r),[r,e,t])}var FW=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Mf={devToolsEnabled:!1,isSsr:FW()},$W={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sP={t:0},tb={t:1};function hA(r){var e=an(r,$W),{isActive:t,canBegin:n,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:u,children:c}=e,h=t==="auto"?!Mf.isSsr:t,d=jW(e.animationId,e.animationManager),[g,m]=P.useState(h?sP:tb),y=P.useRef(null);return P.useEffect(()=>{h||m(tb)},[h]),P.useEffect(()=>{if(!h||!n)return Rf;var x=RW(sP,tb,kW(s),i,m,d.getTimeoutController()),b=()=>{y.current=x()};return d.start([u,a,b,i,o]),()=>{d.stop(),y.current&&y.current(),o()}},[h,n,i,s,a,u,o,d]),c(g.t)}function dA(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=P.useRef(Jc(e)),n=P.useRef(r);return n.current!==r&&(t.current=Jc(e),n.current=r),t.current}var GW=["radius"],zW=["radius"];function aP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function oP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(t),!0).forEach(function(n){HW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function HW(r,e,t){return(e=KW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KW(r){var e=qW(r,"string");return typeof e=="symbol"?e:e+""}function qW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jp.apply(null,arguments)}function lP(r,e){if(r==null)return{};var t,n,i=VW(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function VW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var uP=(r,e,t,n,i)=>{var s=Math.min(Math.abs(t)/2,Math.abs(n)/2),a=n>=0?1:-1,o=t>=0?1:-1,u=n>=0&&t>=0||n<0&&t<0?1:0,c;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],d=0,g=4;d<g;d++)h[d]=i[d]>s?s:i[d];c="M".concat(r,",").concat(e+a*h[0]),h[0]>0&&(c+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(r+o*h[0],",").concat(e)),c+="L ".concat(r+t-o*h[1],",").concat(e),h[1]>0&&(c+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(r+t,",").concat(e+a*h[1])),c+="L ".concat(r+t,",").concat(e+n-a*h[2]),h[2]>0&&(c+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(r+t-o*h[2],",").concat(e+n)),c+="L ".concat(r+o*h[3],",").concat(e+n),h[3]>0&&(c+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(r,",").concat(e+n-a*h[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var m=Math.min(s,i);c="M ".concat(r,",").concat(e+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+o*m,",").concat(e,`
            L `).concat(r+t-o*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+t,",").concat(e+a*m,`
            L `).concat(r+t,",").concat(e+n-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+t-o*m,",").concat(e+n,`
            L `).concat(r+o*m,",").concat(e+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r,",").concat(e+n-a*m," Z")}else c="M ".concat(r,",").concat(e," h ").concat(t," v ").concat(n," h ").concat(-t," Z");return c},cP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bU=r=>{var e=an(r,cP),t=P.useRef(null),[n,i]=P.useState(-1);P.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var K=t.current.getTotalLength();K&&i(K)}catch{}},[]);var{x:s,y:a,width:o,height:u,radius:c,className:h}=e,{animationEasing:d,animationDuration:g,animationBegin:m,isAnimationActive:y,isUpdateAnimationActive:x}=e,b=P.useRef(o),E=P.useRef(u),S=P.useRef(s),T=P.useRef(a),I=P.useMemo(()=>({x:s,y:a,width:o,height:u,radius:c}),[s,a,o,u,c]),w=dA(I,"rectangle-");if(s!==+s||a!==+a||o!==+o||u!==+u||o===0||u===0)return null;var R=Bt("recharts-rectangle",h);if(!x){var _=gn(e),{radius:C}=_,k=lP(_,GW);return P.createElement("path",Jp({},k,{radius:typeof c=="number"?c:void 0,className:R,d:uP(s,a,o,u,c)}))}var D=b.current,U=E.current,N=S.current,q=T.current,X="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),H=gU(["strokeDasharray"],g,typeof d=="string"?d:cP.animationEasing);return P.createElement(hA,{animationId:w,key:w,canBegin:n>0,duration:g,easing:d,isActive:x,begin:m},K=>{var Y=Pn(D,o,K),ee=Pn(U,u,K),Q=Pn(N,s,K),$=Pn(q,a,K);t.current&&(b.current=Y,E.current=ee,S.current=Q,T.current=$);var F;y?K>0?F={transition:H,strokeDasharray:V}:F={strokeDasharray:X}:F={strokeDasharray:V};var Z=gn(e),{radius:de}=Z,oe=lP(Z,zW);return P.createElement("path",Jp({},oe,{radius:typeof c=="number"?c:void 0,className:R,d:uP(Q,$,Y,ee,c),ref:t,style:oP(oP({},F),e.style)}))})};function fP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function hP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(t),!0).forEach(function(n){WW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function WW(r,e,t){return(e=YW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function YW(r){var e=XW(r,"string");return typeof e=="symbol"?e:e+""}function XW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var eg=Math.PI/180,QW=r=>r*180/Math.PI,Yr=(r,e,t,n)=>({x:r+Math.cos(-eg*n)*t,y:e+Math.sin(-eg*n)*t}),ZW=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},JW=(r,e)=>{var{x:t,y:n}=r,{x:i,y:s}=e;return Math.sqrt((t-i)**2+(n-s)**2)},e7=(r,e)=>{var{x:t,y:n}=r,{cx:i,cy:s}=e,a=JW({x:t,y:n},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(t-i)/a,u=Math.acos(o);return n>s&&(u=2*Math.PI-u),{radius:a,angle:QW(u),angleInRadian:u}},t7=r=>{var{startAngle:e,endAngle:t}=r,n=Math.floor(e/360),i=Math.floor(t/360),s=Math.min(n,i);return{startAngle:e-s*360,endAngle:t-s*360}},r7=(r,e)=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),s=Math.floor(n/360),a=Math.min(i,s);return r+a*360},n7=(r,e)=>{var{chartX:t,chartY:n}=r,{radius:i,angle:s}=e7({x:t,y:n},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:u,endAngle:c}=t7(e),h=s,d;if(u<=c){for(;h>c;)h-=360;for(;h<u;)h+=360;d=h>=u&&h<=c}else{for(;h>u;)h-=360;for(;h<c;)h+=360;d=h>=c&&h<=u}return d?hP(hP({},e),{},{radius:i,angle:r7(h,e)}):null};function xU(r){var{cx:e,cy:t,radius:n,startAngle:i,endAngle:s}=r,a=Yr(e,t,n,i),o=Yr(e,t,n,s);return{points:[a,o],cx:e,cy:t,radius:n,startAngle:i,endAngle:s}}function CE(){return CE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},CE.apply(null,arguments)}var i7=(r,e)=>{var t=bi(e-r),n=Math.min(Math.abs(e-r),359.999);return t*n},bd=r=>{var{cx:e,cy:t,radius:n,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:u}=r,c=o*(a?1:-1)+n,h=Math.asin(o/c)/eg,d=u?i:i+s*h,g=Yr(e,t,c,d),m=Yr(e,t,n,d),y=u?i-s*h:i,x=Yr(e,t,c*Math.cos(h*eg),y);return{center:g,circleTangency:m,lineTangency:x,theta:h}},SU=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:s,endAngle:a}=r,o=i7(s,a),u=s+o,c=Yr(e,t,i,s),h=Yr(e,t,i,u),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(n>0){var g=Yr(e,t,n,s),m=Yr(e,t,n,u);d+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else d+="L ".concat(e,",").concat(t," Z");return d},s7=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:u,endAngle:c}=r,h=bi(c-u),{circleTangency:d,lineTangency:g,theta:m}=bd({cx:e,cy:t,radius:i,angle:u,sign:h,cornerRadius:s,cornerIsExternal:o}),{circleTangency:y,lineTangency:x,theta:b}=bd({cx:e,cy:t,radius:i,angle:c,sign:-h,cornerRadius:s,cornerIsExternal:o}),E=o?Math.abs(u-c):Math.abs(u-c)-m-b;if(E<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):SU({cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:u,endAngle:c});var S="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:T,lineTangency:I,theta:w}=bd({cx:e,cy:t,radius:n,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:R,lineTangency:_,theta:C}=bd({cx:e,cy:t,radius:n,angle:c,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(u-c):Math.abs(u-c)-w-C;if(k<0&&s===0)return"".concat(S,"L").concat(e,",").concat(t,"Z");S+="L".concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(I.x,",").concat(I.y,"Z")}else S+="L".concat(e,",").concat(t,"Z");return S},a7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},EU=r=>{var e=an(r,a7),{cx:t,cy:n,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:u,startAngle:c,endAngle:h,className:d}=e;if(s<i||c===h)return null;var g=Bt("recharts-sector",d),m=s-i,y=eo(a,m,0,!0),x;return y>0&&Math.abs(c-h)<360?x=s7({cx:t,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:o,cornerIsExternal:u,startAngle:c,endAngle:h}):x=SU({cx:t,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:h}),P.createElement("path",CE({},gn(e),{className:g,d:x}))};function o7(r,e,t){if(r==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(r==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(nB(e)){if(r==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:a,angle:o}=e,u=Yr(n,i,s,o),c=Yr(n,i,a,o);return[{x:u.x,y:u.y},{x:c.x,y:c.y}]}return xU(e)}}var rb={},nb={},ib={},dP;function l7(){return dP||(dP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=mB();function t(n){return e.isSymbol(n)?NaN:Number(n)}r.toNumber=t})(ib)),ib}var pP;function u7(){return pP||(pP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=l7();function t(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}r.toFinite=t})(nb)),nb}var gP;function c7(){return gP||(gP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=yB(),t=u7();function n(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=t.toFinite(i),s===void 0?(s=i,i=0):s=t.toFinite(s),a=a===void 0?i<s?1:-1:t.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),u=new Array(o);for(let c=0;c<o;c++)u[c]=i,i+=a;return u}r.range=n})(rb)),rb}var sb,mP;function f7(){return mP||(mP=1,sb=c7().range),sb}var h7=f7();const TU=na(h7);function Qa(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function d7(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function pA(r){let e,t,n;r.length!==2?(e=Qa,t=(o,u)=>Qa(r(o),u),n=(o,u)=>r(o)-u):(e=r===Qa||r===d7?r:p7,t=r,n=r);function i(o,u,c=0,h=o.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;t(o[d],u)<0?c=d+1:h=d}while(c<h)}return c}function s(o,u,c=0,h=o.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;t(o[d],u)<=0?c=d+1:h=d}while(c<h)}return c}function a(o,u,c=0,h=o.length){const d=i(o,u,c,h-1);return d>c&&n(o[d-1],u)>-n(o[d],u)?d-1:d}return{left:i,center:a,right:s}}function p7(){return 0}function AU(r){return r===null?NaN:+r}function*g7(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const m7=pA(Qa),Nf=m7.right;pA(AU).center;class yP extends Map{constructor(e,t=b7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(vP(this,e))}has(e){return super.has(vP(this,e))}set(e,t){return super.set(y7(this,e),t)}delete(e){return super.delete(v7(this,e))}}function vP({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):t}function y7({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function v7({_intern:r,_key:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function b7(r){return r!==null&&typeof r=="object"?r.valueOf():r}function x7(r=Qa){if(r===Qa)return wU;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const n=r(e,t);return n||n===0?n:(r(t,t)===0)-(r(e,e)===0)}}function wU(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const S7=Math.sqrt(50),E7=Math.sqrt(10),T7=Math.sqrt(2);function tg(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=S7?10:s>=E7?5:s>=T7?2:1;let o,u,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(r*c),u=Math.round(e*c),o/c<r&&++o,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,o=Math.round(r/c),u=Math.round(e/c),o*c<r&&++o,u*c>e&&--u),u<o&&.5<=t&&t<2?tg(r,e,t*2):[o,u,c]}function PE(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,s,a]=n?tg(e,r,t):tg(r,e,t);if(!(s>=i))return[];const o=s-i+1,u=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)u[c]=(s-c)/-a;else for(let c=0;c<o;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)u[c]=(i+c)/-a;else for(let c=0;c<o;++c)u[c]=(i+c)*a;return u}function DE(r,e,t){return e=+e,r=+r,t=+t,tg(r,e,t)[2]}function kE(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?DE(e,r,t):DE(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function bP(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function xP(r,e){let t;for(const n of r)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);return t}function _U(r,e,t=0,n=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),n=Math.floor(Math.min(r.length-1,n)),!(t<=e&&e<=n))return r;for(i=i===void 0?wU:x7(i);n>t;){if(n-t>600){const u=n-t+1,c=e-t+1,h=Math.log(u),d=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*d*(u-d)/u)*(c-u/2<0?-1:1),m=Math.max(t,Math.floor(e-c*d/u+g)),y=Math.min(n,Math.floor(e+(u-c)*d/u+g));_U(r,e,m,y,i)}const s=r[e];let a=t,o=n;for(Pc(r,t,e),i(r[n],s)>0&&Pc(r,t,n);a<o;){for(Pc(r,a,o),++a,--o;i(r[a],s)<0;)++a;for(;i(r[o],s)>0;)--o}i(r[t],s)===0?Pc(r,t,o):(++o,Pc(r,o,n)),o<=e&&(t=o+1),e<=o&&(n=o-1)}return r}function Pc(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function A7(r,e,t){if(r=Float64Array.from(g7(r)),!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return xP(r);if(e>=1)return bP(r);var n,i=(n-1)*e,s=Math.floor(i),a=bP(_U(r,s).subarray(0,s+1)),o=xP(r.subarray(s+1));return a+(o-a)*(i-s)}}function w7(r,e,t=AU){if(!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(r[0],0,r);if(e>=1)return+t(r[n-1],n-1,r);var n,i=(n-1)*e,s=Math.floor(i),a=+t(r[s],s,r),o=+t(r[s+1],s+1,r);return a+(o-a)*(i-s)}}function _7(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,s=new Array(i);++n<i;)s[n]=r+n*t;return s}function Ai(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function ca(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ME=Symbol("implicit");function gA(){var r=new yP,e=[],t=[],n=ME;function i(s){let a=r.get(s);if(a===void 0){if(n!==ME)return n;r.set(s,a=e.push(s)-1)}return t[a%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],r=new yP;for(const a of s)r.has(a)||r.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return gA(e,t).unknown(n)},Ai.apply(i,arguments),i}function mA(){var r=gA().unknown(void 0),e=r.domain,t=r.range,n=0,i=1,s,a,o=!1,u=0,c=0,h=.5;delete r.unknown;function d(){var g=e().length,m=i<n,y=m?i:n,x=m?n:i;s=(x-y)/Math.max(1,g-u+c*2),o&&(s=Math.floor(s)),y+=(x-y-s*(g-u))*h,a=s*(1-u),o&&(y=Math.round(y),a=Math.round(a));var b=_7(g).map(function(E){return y+s*E});return t(m?b.reverse():b)}return r.domain=function(g){return arguments.length?(e(g),d()):e()},r.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,d()):[n,i]},r.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,o=!0,d()},r.bandwidth=function(){return a},r.step=function(){return s},r.round=function(g){return arguments.length?(o=!!g,d()):o},r.padding=function(g){return arguments.length?(u=Math.min(1,c=+g),d()):u},r.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),d()):u},r.paddingOuter=function(g){return arguments.length?(c=+g,d()):c},r.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),d()):h},r.copy=function(){return mA(e(),[n,i]).round(o).paddingInner(u).paddingOuter(c).align(h)},Ai.apply(d(),arguments)}function IU(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return IU(e())},r}function I7(){return IU(mA.apply(null,arguments).paddingInner(1))}function yA(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function OU(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Bf(){}var lf=.7,rg=1/lf,lu="\\s*([+-]?\\d+)\\s*",uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O7=/^#([0-9a-f]{3,8})$/,R7=new RegExp(`^rgb\\(${lu},${lu},${lu}\\)$`),L7=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),C7=new RegExp(`^rgba\\(${lu},${lu},${lu},${uf}\\)$`),P7=new RegExp(`^rgba\\(${ts},${ts},${ts},${uf}\\)$`),D7=new RegExp(`^hsl\\(${uf},${ts},${ts}\\)$`),k7=new RegExp(`^hsla\\(${uf},${ts},${ts},${uf}\\)$`),SP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yA(Bf,cf,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:EP,formatHex:EP,formatHex8:M7,formatHsl:N7,formatRgb:TP,toString:TP});function EP(){return this.rgb().formatHex()}function M7(){return this.rgb().formatHex8()}function N7(){return RU(this).formatHsl()}function TP(){return this.rgb().formatRgb()}function cf(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=O7.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?AP(e):t===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?xd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?xd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=R7.exec(r))?new Dn(e[1],e[2],e[3],1):(e=L7.exec(r))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=C7.exec(r))?xd(e[1],e[2],e[3],e[4]):(e=P7.exec(r))?xd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=D7.exec(r))?IP(e[1],e[2]/100,e[3]/100,1):(e=k7.exec(r))?IP(e[1],e[2]/100,e[3]/100,e[4]):SP.hasOwnProperty(r)?AP(SP[r]):r==="transparent"?new Dn(NaN,NaN,NaN,0):null}function AP(r){return new Dn(r>>16&255,r>>8&255,r&255,1)}function xd(r,e,t,n){return n<=0&&(r=e=t=NaN),new Dn(r,e,t,n)}function B7(r){return r instanceof Bf||(r=cf(r)),r?(r=r.rgb(),new Dn(r.r,r.g,r.b,r.opacity)):new Dn}function NE(r,e,t,n){return arguments.length===1?B7(r):new Dn(r,e,t,n??1)}function Dn(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}yA(Dn,NE,OU(Bf,{brighter(r){return r=r==null?rg:Math.pow(rg,r),new Dn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?lf:Math.pow(lf,r),new Dn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Dn(Ko(this.r),Ko(this.g),Ko(this.b),ng(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wP,formatHex:wP,formatHex8:U7,formatRgb:_P,toString:_P}));function wP(){return`#${Uo(this.r)}${Uo(this.g)}${Uo(this.b)}`}function U7(){return`#${Uo(this.r)}${Uo(this.g)}${Uo(this.b)}${Uo((isNaN(this.opacity)?1:this.opacity)*255)}`}function _P(){const r=ng(this.opacity);return`${r===1?"rgb(":"rgba("}${Ko(this.r)}, ${Ko(this.g)}, ${Ko(this.b)}${r===1?")":`, ${r})`}`}function ng(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Ko(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Uo(r){return r=Ko(r),(r<16?"0":"")+r.toString(16)}function IP(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Di(r,e,t,n)}function RU(r){if(r instanceof Di)return new Di(r.h,r.s,r.l,r.opacity);if(r instanceof Bf||(r=cf(r)),!r)return new Di;if(r instanceof Di)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),s=Math.max(e,t,n),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(t-n)/o+(t<n)*6:t===s?a=(n-e)/o+2:a=(e-t)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new Di(a,o,u,r.opacity)}function j7(r,e,t,n){return arguments.length===1?RU(r):new Di(r,e,t,n??1)}function Di(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}yA(Di,j7,OU(Bf,{brighter(r){return r=r==null?rg:Math.pow(rg,r),new Di(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?lf:Math.pow(lf,r),new Di(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Dn(ab(r>=240?r-240:r+120,i,n),ab(r,i,n),ab(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Di(OP(this.h),Sd(this.s),Sd(this.l),ng(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=ng(this.opacity);return`${r===1?"hsl(":"hsla("}${OP(this.h)}, ${Sd(this.s)*100}%, ${Sd(this.l)*100}%${r===1?")":`, ${r})`}`}}));function OP(r){return r=(r||0)%360,r<0?r+360:r}function Sd(r){return Math.max(0,Math.min(1,r||0))}function ab(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const vA=r=>()=>r;function F7(r,e){return function(t){return r+t*e}}function $7(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function G7(r){return(r=+r)==1?LU:function(e,t){return t-e?$7(e,t,r):vA(isNaN(e)?t:e)}}function LU(r,e){var t=e-r;return t?F7(r,t):vA(isNaN(r)?e:r)}const RP=(function r(e){var t=G7(e);function n(i,s){var a=t((i=NE(i)).r,(s=NE(s)).r),o=t(i.g,s.g),u=t(i.b,s.b),c=LU(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=o(h),i.b=u(h),i.opacity=c(h),i+""}}return n.gamma=r,n})(1);function z7(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(s){for(i=0;i<t;++i)n[i]=r[i]*(1-s)+e[i]*s;return n}}function H7(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function K7(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),s=new Array(t),a;for(a=0;a<n;++a)i[a]=Lu(r[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function q7(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function ig(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function V7(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=Lu(r[i],e[i]):n[i]=e[i];return function(s){for(i in t)n[i]=t[i](s);return n}}var BE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ob=new RegExp(BE.source,"g");function W7(r){return function(){return r}}function Y7(r){return function(e){return r(e)+""}}function X7(r,e){var t=BE.lastIndex=ob.lastIndex=0,n,i,s,a=-1,o=[],u=[];for(r=r+"",e=e+"";(n=BE.exec(r))&&(i=ob.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:ig(n,i)})),t=ob.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?Y7(u[0].x):W7(e):(e=u.length,function(c){for(var h=0,d;h<e;++h)o[(d=u[h]).i]=d.x(c);return o.join("")})}function Lu(r,e){var t=typeof e,n;return e==null||t==="boolean"?vA(e):(t==="number"?ig:t==="string"?(n=cf(e))?(e=n,RP):X7:e instanceof cf?RP:e instanceof Date?q7:H7(e)?z7:Array.isArray(e)?K7:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?V7:ig)(r,e)}function bA(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function Q7(r,e){e===void 0&&(e=r,r=Lu);for(var t=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);t<n;)s[t]=r(i,i=e[++t]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function Z7(r){return function(){return r}}function sg(r){return+r}var LP=[0,1];function hn(r){return r}function UE(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:Z7(isNaN(e)?NaN:.5)}function J7(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function eY(r,e,t){var n=r[0],i=r[1],s=e[0],a=e[1];return i<n?(n=UE(i,n),s=t(a,s)):(n=UE(n,i),s=t(s,a)),function(o){return s(n(o))}}function tY(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=UE(r[a],r[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var u=Nf(r,o,1,n)-1;return s[u](i[u](o))}}function Uf(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function fm(){var r=LP,e=LP,t=Lu,n,i,s,a=hn,o,u,c;function h(){var g=Math.min(r.length,e.length);return a!==hn&&(a=J7(r[0],r[g-1])),o=g>2?tY:eY,u=c=null,d}function d(g){return g==null||isNaN(g=+g)?s:(u||(u=o(r.map(n),e,t)))(n(a(g)))}return d.invert=function(g){return a(i((c||(c=o(e,r.map(n),ig)))(g)))},d.domain=function(g){return arguments.length?(r=Array.from(g,sg),h()):r.slice()},d.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},d.rangeRound=function(g){return e=Array.from(g),t=bA,h()},d.clamp=function(g){return arguments.length?(a=g?!0:hn,h()):a!==hn},d.interpolate=function(g){return arguments.length?(t=g,h()):t},d.unknown=function(g){return arguments.length?(s=g,d):s},function(g,m){return n=g,i=m,h()}}function xA(){return fm()(hn,hn)}function rY(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function ag(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function vu(r){return r=ag(Math.abs(r)),r?r[1]:NaN}function nY(r,e){return function(t,n){for(var i=t.length,s=[],a=0,o=r[0],u=0;i>0&&o>0&&(u+o+1>n&&(o=Math.max(1,n-u)),s.push(t.substring(i-=o,i+o)),!((u+=o+1)>n));)o=r[a=(a+1)%r.length];return s.reverse().join(e)}}function iY(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var sY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ff(r){if(!(e=sY.exec(r)))throw new Error("invalid format: "+r);var e;return new SA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ff.prototype=SA.prototype;function SA(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}SA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aY(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var CU;function oY(r,e){var t=ag(r,e);if(!t)return r+"";var n=t[0],i=t[1],s=i-(CU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+ag(r,Math.max(0,e+s-1))[0]}function CP(r,e){var t=ag(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const PP={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:rY,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>CP(r*100,e),r:CP,s:oY,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function DP(r){return r}var kP=Array.prototype.map,MP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lY(r){var e=r.grouping===void 0||r.thousands===void 0?DP:nY(kP.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",s=r.numerals===void 0?DP:iY(kP.call(r.numerals,String)),a=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"":r.minus+"",u=r.nan===void 0?"NaN":r.nan+"";function c(d){d=ff(d);var g=d.fill,m=d.align,y=d.sign,x=d.symbol,b=d.zero,E=d.width,S=d.comma,T=d.precision,I=d.trim,w=d.type;w==="n"?(S=!0,w="g"):PP[w]||(T===void 0&&(T=12),I=!0,w="g"),(b||g==="0"&&m==="=")&&(b=!0,g="0",m="=");var R=x==="$"?t:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=x==="$"?n:/[%p]/.test(w)?a:"",C=PP[w],k=/[defgprs%]/.test(w);T=T===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function D(U){var N=R,q=_,X,V,H;if(w==="c")q=C(U)+q,U="";else{U=+U;var K=U<0||1/U<0;if(U=isNaN(U)?u:C(Math.abs(U),T),I&&(U=aY(U)),K&&+U==0&&y!=="+"&&(K=!1),N=(K?y==="("?y:o:y==="-"||y==="("?"":y)+N,q=(w==="s"?MP[8+CU/3]:"")+q+(K&&y==="("?")":""),k){for(X=-1,V=U.length;++X<V;)if(H=U.charCodeAt(X),48>H||H>57){q=(H===46?i+U.slice(X+1):U.slice(X))+q,U=U.slice(0,X);break}}}S&&!b&&(U=e(U,1/0));var Y=N.length+U.length+q.length,ee=Y<E?new Array(E-Y+1).join(g):"";switch(S&&b&&(U=e(ee+U,ee.length?E-q.length:1/0),ee=""),m){case"<":U=N+U+q+ee;break;case"=":U=N+ee+U+q;break;case"^":U=ee.slice(0,Y=ee.length>>1)+N+U+q+ee.slice(Y);break;default:U=ee+N+U+q;break}return s(U)}return D.toString=function(){return d+""},D}function h(d,g){var m=c((d=ff(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(vu(g)/3)))*3,x=Math.pow(10,-y),b=MP[8+y/3];return function(E){return m(x*E)+b}}return{format:c,formatPrefix:h}}var Ed,EA,PU;uY({thousands:",",grouping:[3],currency:["$",""]});function uY(r){return Ed=lY(r),EA=Ed.format,PU=Ed.formatPrefix,Ed}function cY(r){return Math.max(0,-vu(Math.abs(r)))}function fY(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vu(e)/3)))*3-vu(Math.abs(r)))}function hY(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,vu(e)-vu(r))+1}function DU(r,e,t,n){var i=kE(r,e,t),s;switch(n=ff(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(s=fY(i,a))&&(n.precision=s),PU(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=hY(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=cY(i))&&(n.precision=s-(n.type==="%")*2);break}}return EA(n)}function oo(r){var e=r.domain;return r.ticks=function(t){var n=e();return PE(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return DU(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],u,c,h=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);h-- >0;){if(c=DE(a,o,t),c===u)return n[i]=a,n[s]=o,e(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;u=c}return r},r}function kU(){var r=xA();return r.copy=function(){return Uf(r,kU())},Ai.apply(r,arguments),oo(r)}function MU(r){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(r=Array.from(n,sg),t):r.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return MU(r).unknown(e)},r=arguments.length?Array.from(r,sg):[0,1],oo(t)}function NU(r,e){r=r.slice();var t=0,n=r.length-1,i=r[t],s=r[n],a;return s<i&&(a=t,t=n,n=a,a=i,i=s,s=a),r[t]=e.floor(i),r[n]=e.ceil(s),r}function NP(r){return Math.log(r)}function BP(r){return Math.exp(r)}function dY(r){return-Math.log(-r)}function pY(r){return-Math.exp(-r)}function gY(r){return isFinite(r)?+("1e"+r):r<0?0:r}function mY(r){return r===10?gY:r===Math.E?Math.exp:e=>Math.pow(r,e)}function yY(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function UP(r){return(e,t)=>-r(-e,t)}function TA(r){const e=r(NP,BP),t=e.domain;let n=10,i,s;function a(){return i=yY(n),s=mY(n),t()[0]<0?(i=UP(i),s=UP(s),r(dY,pY)):r(NP,BP),e}return e.base=function(o){return arguments.length?(n=+o,a()):n},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=o=>{const u=t();let c=u[0],h=u[u.length-1];const d=h<c;d&&([c,h]=[h,c]);let g=i(c),m=i(h),y,x;const b=o==null?10:+o;let E=[];if(!(n%1)&&m-g<b){if(g=Math.floor(g),m=Math.ceil(m),c>0){for(;g<=m;++g)for(y=1;y<n;++y)if(x=g<0?y/s(-g):y*s(g),!(x<c)){if(x>h)break;E.push(x)}}else for(;g<=m;++g)for(y=n-1;y>=1;--y)if(x=g>0?y/s(-g):y*s(g),!(x<c)){if(x>h)break;E.push(x)}E.length*2<b&&(E=PE(c,h,b))}else E=PE(g,m,Math.min(m-g,b)).map(s);return d?E.reverse():E},e.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=ff(u)).precision==null&&(u.trim=!0),u=EA(u)),o===1/0)return u;const c=Math.max(1,n*o/e.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*n<n-.5&&(d*=n),d<=c?u(h):""}},e.nice=()=>t(NU(t(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function BU(){const r=TA(fm()).domain([1,10]);return r.copy=()=>Uf(r,BU()).base(r.base()),Ai.apply(r,arguments),r}function jP(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function FP(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function AA(r){var e=1,t=r(jP(e),FP(e));return t.constant=function(n){return arguments.length?r(jP(e=+n),FP(e)):e},oo(t)}function UU(){var r=AA(fm());return r.copy=function(){return Uf(r,UU()).constant(r.constant())},Ai.apply(r,arguments)}function $P(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function vY(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function bY(r){return r<0?-r*r:r*r}function wA(r){var e=r(hn,hn),t=1;function n(){return t===1?r(hn,hn):t===.5?r(vY,bY):r($P(t),$P(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,n()):t},oo(e)}function _A(){var r=wA(fm());return r.copy=function(){return Uf(r,_A()).exponent(r.exponent())},Ai.apply(r,arguments),r}function xY(){return _A.apply(null,arguments).exponent(.5)}function GP(r){return Math.sign(r)*r*r}function SY(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function jU(){var r=xA(),e=[0,1],t=!1,n;function i(s){var a=SY(r(s));return isNaN(a)?n:t?Math.round(a):a}return i.invert=function(s){return r.invert(GP(s))},i.domain=function(s){return arguments.length?(r.domain(s),i):r.domain()},i.range=function(s){return arguments.length?(r.range((e=Array.from(s,sg)).map(GP)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(t=!!s,i):t},i.clamp=function(s){return arguments.length?(r.clamp(s),i):r.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return jU(r.domain(),e).round(t).clamp(r.clamp()).unknown(n)},Ai.apply(i,arguments),oo(i)}function FU(){var r=[],e=[],t=[],n;function i(){var a=0,o=Math.max(1,e.length);for(t=new Array(o-1);++a<o;)t[a-1]=w7(r,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:e[Nf(t,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?t[o-1]:r[0],o<t.length?t[o]:r[r.length-1]]},s.domain=function(a){if(!arguments.length)return r.slice();r=[];for(let o of a)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(Qa),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return t.slice()},s.copy=function(){return FU().domain(r).range(e).unknown(n)},Ai.apply(s,arguments)}function $U(){var r=0,e=1,t=1,n=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Nf(n,u,0,t)]:s}function o(){var u=-1;for(n=new Array(t);++u<t;)n[u]=((u+1)*e-(u-t)*r)/(t+1);return a}return a.domain=function(u){return arguments.length?([r,e]=u,r=+r,e=+e,o()):[r,e]},a.range=function(u){return arguments.length?(t=(i=Array.from(u)).length-1,o()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[r,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return $U().domain([r,e]).range(i).unknown(s)},Ai.apply(oo(a),arguments)}function GU(){var r=[.5],e=[0,1],t,n=1;function i(s){return s!=null&&s<=s?e[Nf(r,s,0,n)]:t}return i.domain=function(s){return arguments.length?(r=Array.from(s),n=Math.min(r.length,e.length-1),i):r.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(r.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[r[a-1],r[a]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return GU().domain(r).range(e).unknown(t)},Ai.apply(i,arguments)}const lb=new Date,ub=new Date;function _r(r,e,t,n){function i(s){return r(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(r(s=new Date(+s)),s),i.ceil=s=>(r(s=new Date(s-1)),e(s,1),r(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const u=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;let c;do u.push(c=new Date(+s)),e(s,o),r(s);while(c<s&&s<a);return u},i.filter=s=>_r(a=>{if(a>=a)for(;r(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),t&&(i.count=(s,a)=>(lb.setTime(+s),ub.setTime(+a),r(lb),r(ub),Math.floor(t(lb,ub))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const og=_r(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);og.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?_r(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):og);og.range;const zs=1e3,xi=zs*60,Hs=xi*60,Js=Hs*24,IA=Js*7,zP=Js*30,cb=Js*365,jo=_r(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*zs)},(r,e)=>(e-r)/zs,r=>r.getUTCSeconds());jo.range;const OA=_r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*zs)},(r,e)=>{r.setTime(+r+e*xi)},(r,e)=>(e-r)/xi,r=>r.getMinutes());OA.range;const RA=_r(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*xi)},(r,e)=>(e-r)/xi,r=>r.getUTCMinutes());RA.range;const LA=_r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*zs-r.getMinutes()*xi)},(r,e)=>{r.setTime(+r+e*Hs)},(r,e)=>(e-r)/Hs,r=>r.getHours());LA.range;const CA=_r(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*Hs)},(r,e)=>(e-r)/Hs,r=>r.getUTCHours());CA.range;const jf=_r(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*xi)/Js,r=>r.getDate()-1);jf.range;const hm=_r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Js,r=>r.getUTCDate()-1);hm.range;const zU=_r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Js,r=>Math.floor(r/Js));zU.range;function il(r){return _r(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xi)/IA)}const dm=il(0),lg=il(1),EY=il(2),TY=il(3),bu=il(4),AY=il(5),wY=il(6);dm.range;lg.range;EY.range;TY.range;bu.range;AY.range;wY.range;function sl(r){return _r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/IA)}const pm=sl(0),ug=sl(1),_Y=sl(2),IY=sl(3),xu=sl(4),OY=sl(5),RY=sl(6);pm.range;ug.range;_Y.range;IY.range;xu.range;OY.range;RY.range;const PA=_r(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());PA.range;const DA=_r(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());DA.range;const ea=_r(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());ea.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:_r(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});ea.range;const ta=_r(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());ta.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:_r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});ta.range;function HU(r,e,t,n,i,s){const a=[[jo,1,zs],[jo,5,5*zs],[jo,15,15*zs],[jo,30,30*zs],[s,1,xi],[s,5,5*xi],[s,15,15*xi],[s,30,30*xi],[i,1,Hs],[i,3,3*Hs],[i,6,6*Hs],[i,12,12*Hs],[n,1,Js],[n,2,2*Js],[t,1,IA],[e,1,zP],[e,3,3*zP],[r,1,cb]];function o(c,h,d){const g=h<c;g&&([c,h]=[h,c]);const m=d&&typeof d.range=="function"?d:u(c,h,d),y=m?m.range(c,+h+1):[];return g?y.reverse():y}function u(c,h,d){const g=Math.abs(h-c)/d,m=pA(([,,b])=>b).right(a,g);if(m===a.length)return r.every(kE(c/cb,h/cb,d));if(m===0)return og.every(Math.max(kE(c,h,d),1));const[y,x]=a[g/a[m-1][2]<a[m][2]/g?m-1:m];return y.every(x)}return[o,u]}const[LY,CY]=HU(ta,DA,pm,zU,CA,RA),[PY,DY]=HU(ea,PA,dm,jf,LA,OA);function fb(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function hb(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Dc(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function kY(r){var e=r.dateTime,t=r.date,n=r.time,i=r.periods,s=r.days,a=r.shortDays,o=r.months,u=r.shortMonths,c=kc(i),h=Mc(i),d=kc(s),g=Mc(s),m=kc(a),y=Mc(a),x=kc(o),b=Mc(o),E=kc(u),S=Mc(u),T={a:K,A:Y,b:ee,B:Q,c:null,d:YP,e:YP,f:nX,g:dX,G:gX,H:eX,I:tX,j:rX,L:KU,m:iX,M:sX,p:$,q:F,Q:ZP,s:JP,S:aX,u:oX,U:lX,V:uX,w:cX,W:fX,x:null,X:null,y:hX,Y:pX,Z:mX,"%":QP},I={a:Z,A:de,b:oe,B:Se,c:null,d:XP,e:XP,f:xX,g:LX,G:PX,H:yX,I:vX,j:bX,L:VU,m:SX,M:EX,p:ae,q:re,Q:ZP,s:JP,S:TX,u:AX,U:wX,V:_X,w:IX,W:OX,x:null,X:null,y:RX,Y:CX,Z:DX,"%":QP},w={a:D,A:U,b:N,B:q,c:X,d:VP,e:VP,f:XY,g:qP,G:KP,H:WP,I:WP,j:qY,L:YY,m:KY,M:VY,p:k,q:HY,Q:ZY,s:JY,S:WY,u:jY,U:FY,V:$Y,w:UY,W:GY,x:V,X:H,y:qP,Y:KP,Z:zY,"%":QY};T.x=R(t,T),T.X=R(n,T),T.c=R(e,T),I.x=R(t,I),I.X=R(n,I),I.c=R(e,I);function R(te,le){return function(ce){var ne=[],Le=-1,xe=0,ie=te.length,se,ye,Re;for(ce instanceof Date||(ce=new Date(+ce));++Le<ie;)te.charCodeAt(Le)===37&&(ne.push(te.slice(xe,Le)),(ye=HP[se=te.charAt(++Le)])!=null?se=te.charAt(++Le):ye=se==="e"?" ":"0",(Re=le[se])&&(se=Re(ce,ye)),ne.push(se),xe=Le+1);return ne.push(te.slice(xe,Le)),ne.join("")}}function _(te,le){return function(ce){var ne=Dc(1900,void 0,1),Le=C(ne,te,ce+="",0),xe,ie;if(Le!=ce.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(le&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(xe=hb(Dc(ne.y,0,1)),ie=xe.getUTCDay(),xe=ie>4||ie===0?ug.ceil(xe):ug(xe),xe=hm.offset(xe,(ne.V-1)*7),ne.y=xe.getUTCFullYear(),ne.m=xe.getUTCMonth(),ne.d=xe.getUTCDate()+(ne.w+6)%7):(xe=fb(Dc(ne.y,0,1)),ie=xe.getDay(),xe=ie>4||ie===0?lg.ceil(xe):lg(xe),xe=jf.offset(xe,(ne.V-1)*7),ne.y=xe.getFullYear(),ne.m=xe.getMonth(),ne.d=xe.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),ie="Z"in ne?hb(Dc(ne.y,0,1)).getUTCDay():fb(Dc(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(ie+5)%7:ne.w+ne.U*7-(ie+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,hb(ne)):fb(ne)}}function C(te,le,ce,ne){for(var Le=0,xe=le.length,ie=ce.length,se,ye;Le<xe;){if(ne>=ie)return-1;if(se=le.charCodeAt(Le++),se===37){if(se=le.charAt(Le++),ye=w[se in HP?le.charAt(Le++):se],!ye||(ne=ye(te,ce,ne))<0)return-1}else if(se!=ce.charCodeAt(ne++))return-1}return ne}function k(te,le,ce){var ne=c.exec(le.slice(ce));return ne?(te.p=h.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function D(te,le,ce){var ne=m.exec(le.slice(ce));return ne?(te.w=y.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function U(te,le,ce){var ne=d.exec(le.slice(ce));return ne?(te.w=g.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function N(te,le,ce){var ne=E.exec(le.slice(ce));return ne?(te.m=S.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function q(te,le,ce){var ne=x.exec(le.slice(ce));return ne?(te.m=b.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function X(te,le,ce){return C(te,e,le,ce)}function V(te,le,ce){return C(te,t,le,ce)}function H(te,le,ce){return C(te,n,le,ce)}function K(te){return a[te.getDay()]}function Y(te){return s[te.getDay()]}function ee(te){return u[te.getMonth()]}function Q(te){return o[te.getMonth()]}function $(te){return i[+(te.getHours()>=12)]}function F(te){return 1+~~(te.getMonth()/3)}function Z(te){return a[te.getUTCDay()]}function de(te){return s[te.getUTCDay()]}function oe(te){return u[te.getUTCMonth()]}function Se(te){return o[te.getUTCMonth()]}function ae(te){return i[+(te.getUTCHours()>=12)]}function re(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var le=R(te+="",T);return le.toString=function(){return te},le},parse:function(te){var le=_(te+="",!1);return le.toString=function(){return te},le},utcFormat:function(te){var le=R(te+="",I);return le.toString=function(){return te},le},utcParse:function(te){var le=_(te+="",!0);return le.toString=function(){return te},le}}}var HP={"-":"",_:" ",0:"0"},Fr=/^\s*\d+/,MY=/^%/,NY=/[\\^$*+?|[\]().{}]/g;function wt(r,e,t){var n=r<0?"-":"",i=(n?-r:r)+"",s=i.length;return n+(s<t?new Array(t-s+1).join(e)+i:i)}function BY(r){return r.replace(NY,"\\$&")}function kc(r){return new RegExp("^(?:"+r.map(BY).join("|")+")","i")}function Mc(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function UY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.w=+n[0],t+n[0].length):-1}function jY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.u=+n[0],t+n[0].length):-1}function FY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.U=+n[0],t+n[0].length):-1}function $Y(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.V=+n[0],t+n[0].length):-1}function GY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.W=+n[0],t+n[0].length):-1}function KP(r,e,t){var n=Fr.exec(e.slice(t,t+4));return n?(r.y=+n[0],t+n[0].length):-1}function qP(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function zY(r,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function HY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.q=n[0]*3-3,t+n[0].length):-1}function KY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.m=n[0]-1,t+n[0].length):-1}function VP(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.d=+n[0],t+n[0].length):-1}function qY(r,e,t){var n=Fr.exec(e.slice(t,t+3));return n?(r.m=0,r.d=+n[0],t+n[0].length):-1}function WP(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.H=+n[0],t+n[0].length):-1}function VY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.M=+n[0],t+n[0].length):-1}function WY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.S=+n[0],t+n[0].length):-1}function YY(r,e,t){var n=Fr.exec(e.slice(t,t+3));return n?(r.L=+n[0],t+n[0].length):-1}function XY(r,e,t){var n=Fr.exec(e.slice(t,t+6));return n?(r.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function QY(r,e,t){var n=MY.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function ZY(r,e,t){var n=Fr.exec(e.slice(t));return n?(r.Q=+n[0],t+n[0].length):-1}function JY(r,e,t){var n=Fr.exec(e.slice(t));return n?(r.s=+n[0],t+n[0].length):-1}function YP(r,e){return wt(r.getDate(),e,2)}function eX(r,e){return wt(r.getHours(),e,2)}function tX(r,e){return wt(r.getHours()%12||12,e,2)}function rX(r,e){return wt(1+jf.count(ea(r),r),e,3)}function KU(r,e){return wt(r.getMilliseconds(),e,3)}function nX(r,e){return KU(r,e)+"000"}function iX(r,e){return wt(r.getMonth()+1,e,2)}function sX(r,e){return wt(r.getMinutes(),e,2)}function aX(r,e){return wt(r.getSeconds(),e,2)}function oX(r){var e=r.getDay();return e===0?7:e}function lX(r,e){return wt(dm.count(ea(r)-1,r),e,2)}function qU(r){var e=r.getDay();return e>=4||e===0?bu(r):bu.ceil(r)}function uX(r,e){return r=qU(r),wt(bu.count(ea(r),r)+(ea(r).getDay()===4),e,2)}function cX(r){return r.getDay()}function fX(r,e){return wt(lg.count(ea(r)-1,r),e,2)}function hX(r,e){return wt(r.getFullYear()%100,e,2)}function dX(r,e){return r=qU(r),wt(r.getFullYear()%100,e,2)}function pX(r,e){return wt(r.getFullYear()%1e4,e,4)}function gX(r,e){var t=r.getDay();return r=t>=4||t===0?bu(r):bu.ceil(r),wt(r.getFullYear()%1e4,e,4)}function mX(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wt(e/60|0,"0",2)+wt(e%60,"0",2)}function XP(r,e){return wt(r.getUTCDate(),e,2)}function yX(r,e){return wt(r.getUTCHours(),e,2)}function vX(r,e){return wt(r.getUTCHours()%12||12,e,2)}function bX(r,e){return wt(1+hm.count(ta(r),r),e,3)}function VU(r,e){return wt(r.getUTCMilliseconds(),e,3)}function xX(r,e){return VU(r,e)+"000"}function SX(r,e){return wt(r.getUTCMonth()+1,e,2)}function EX(r,e){return wt(r.getUTCMinutes(),e,2)}function TX(r,e){return wt(r.getUTCSeconds(),e,2)}function AX(r){var e=r.getUTCDay();return e===0?7:e}function wX(r,e){return wt(pm.count(ta(r)-1,r),e,2)}function WU(r){var e=r.getUTCDay();return e>=4||e===0?xu(r):xu.ceil(r)}function _X(r,e){return r=WU(r),wt(xu.count(ta(r),r)+(ta(r).getUTCDay()===4),e,2)}function IX(r){return r.getUTCDay()}function OX(r,e){return wt(ug.count(ta(r)-1,r),e,2)}function RX(r,e){return wt(r.getUTCFullYear()%100,e,2)}function LX(r,e){return r=WU(r),wt(r.getUTCFullYear()%100,e,2)}function CX(r,e){return wt(r.getUTCFullYear()%1e4,e,4)}function PX(r,e){var t=r.getUTCDay();return r=t>=4||t===0?xu(r):xu.ceil(r),wt(r.getUTCFullYear()%1e4,e,4)}function DX(){return"+0000"}function QP(){return"%"}function ZP(r){return+r}function JP(r){return Math.floor(+r/1e3)}var Hl,YU,XU;kX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kX(r){return Hl=kY(r),YU=Hl.format,Hl.parse,XU=Hl.utcFormat,Hl.utcParse,Hl}function MX(r){return new Date(r)}function NX(r){return r instanceof Date?+r:+new Date(+r)}function kA(r,e,t,n,i,s,a,o,u,c){var h=xA(),d=h.invert,g=h.domain,m=c(".%L"),y=c(":%S"),x=c("%I:%M"),b=c("%I %p"),E=c("%a %d"),S=c("%b %d"),T=c("%B"),I=c("%Y");function w(R){return(u(R)<R?m:o(R)<R?y:a(R)<R?x:s(R)<R?b:n(R)<R?i(R)<R?E:S:t(R)<R?T:I)(R)}return h.invert=function(R){return new Date(d(R))},h.domain=function(R){return arguments.length?g(Array.from(R,NX)):g().map(MX)},h.ticks=function(R){var _=g();return r(_[0],_[_.length-1],R??10)},h.tickFormat=function(R,_){return _==null?w:c(_)},h.nice=function(R){var _=g();return(!R||typeof R.range!="function")&&(R=e(_[0],_[_.length-1],R??10)),R?g(NU(_,R)):h},h.copy=function(){return Uf(h,kA(r,e,t,n,i,s,a,o,u,c))},h}function BX(){return Ai.apply(kA(PY,DY,ea,PA,dm,jf,LA,OA,jo,YU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function UX(){return Ai.apply(kA(LY,CY,ta,DA,pm,hm,CA,RA,jo,XU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gm(){var r=0,e=1,t,n,i,s,a=hn,o=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-t)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([r,e]=d,t=s(r=+r),n=s(e=+e),i=t===n?0:1/(n-t),c):[r,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function h(d){return function(g){var m,y;return arguments.length?([m,y]=g,a=d(m,y),c):[a(0),a(1)]}}return c.range=h(Lu),c.rangeRound=h(bA),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,t=d(r),n=d(e),i=t===n?0:1/(n-t),c}}function lo(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function QU(){var r=oo(gm()(hn));return r.copy=function(){return lo(r,QU())},ca.apply(r,arguments)}function ZU(){var r=TA(gm()).domain([1,10]);return r.copy=function(){return lo(r,ZU()).base(r.base())},ca.apply(r,arguments)}function JU(){var r=AA(gm());return r.copy=function(){return lo(r,JU()).constant(r.constant())},ca.apply(r,arguments)}function MA(){var r=wA(gm());return r.copy=function(){return lo(r,MA()).exponent(r.exponent())},ca.apply(r,arguments)}function jX(){return MA.apply(null,arguments).exponent(.5)}function ej(){var r=[],e=hn;function t(n){if(n!=null&&!isNaN(n=+n))return e((Nf(r,n,1)-1)/(r.length-1))}return t.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let i of n)i!=null&&!isNaN(i=+i)&&r.push(i);return r.sort(Qa),t},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.range=function(){return r.map((n,i)=>e(i/(r.length-1)))},t.quantiles=function(n){return Array.from({length:n+1},(i,s)=>A7(r,s/n))},t.copy=function(){return ej(e).domain(r)},ca.apply(t,arguments)}function mm(){var r=0,e=.5,t=1,n=1,i,s,a,o,u,c=hn,h,d=!1,g;function m(x){return isNaN(x=+x)?g:(x=.5+((x=+h(x))-s)*(n*x<n*s?o:u),c(d?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([r,e,t]=x,i=h(r=+r),s=h(e=+e),a=h(t=+t),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,m):[r,e,t]},m.clamp=function(x){return arguments.length?(d=!!x,m):d},m.interpolator=function(x){return arguments.length?(c=x,m):c};function y(x){return function(b){var E,S,T;return arguments.length?([E,S,T]=b,c=Q7(x,[E,S,T]),m):[c(0),c(.5),c(1)]}}return m.range=y(Lu),m.rangeRound=y(bA),m.unknown=function(x){return arguments.length?(g=x,m):g},function(x){return h=x,i=x(r),s=x(e),a=x(t),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,m}}function tj(){var r=oo(mm()(hn));return r.copy=function(){return lo(r,tj())},ca.apply(r,arguments)}function rj(){var r=TA(mm()).domain([.1,1,10]);return r.copy=function(){return lo(r,rj()).base(r.base())},ca.apply(r,arguments)}function nj(){var r=AA(mm());return r.copy=function(){return lo(r,nj()).constant(r.constant())},ca.apply(r,arguments)}function NA(){var r=wA(mm());return r.copy=function(){return lo(r,NA()).exponent(r.exponent())},ca.apply(r,arguments)}function FX(){return NA.apply(null,arguments).exponent(.5)}const Gc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mA,scaleDiverging:tj,scaleDivergingLog:rj,scaleDivergingPow:NA,scaleDivergingSqrt:FX,scaleDivergingSymlog:nj,scaleIdentity:MU,scaleImplicit:ME,scaleLinear:kU,scaleLog:BU,scaleOrdinal:gA,scalePoint:I7,scalePow:_A,scaleQuantile:FU,scaleQuantize:$U,scaleRadial:jU,scaleSequential:QU,scaleSequentialLog:ZU,scaleSequentialPow:MA,scaleSequentialQuantile:ej,scaleSequentialSqrt:jX,scaleSequentialSymlog:JU,scaleSqrt:xY,scaleSymlog:UU,scaleThreshold:GU,scaleTime:BX,scaleUtc:UX,tickFormat:DU},Symbol.toStringTag,{value:"Module"}));var uo=r=>r.chartData,$X=ke([uo],r=>{var e=r.chartData!=null?r.chartData.length-1:0;return{chartData:r.chartData,computedData:r.computedData,dataEndIndex:e,dataStartIndex:0}}),BA=(r,e,t,n)=>n?$X(r):uo(r);function to(r){if(Array.isArray(r)&&r.length===2){var[e,t]=r;if(Br(e)&&Br(t))return!0}return!1}function eD(r,e,t){return t?r:[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}function ij(r,e){if(e&&typeof r!="function"&&Array.isArray(r)&&r.length===2){var[t,n]=r,i,s;if(Br(t))i=t;else if(typeof t=="function")return;if(Br(n))s=n;else if(typeof n=="function")return;var a=[i,s];if(to(a))return a}}function GX(r,e,t){if(!(!t&&e==null)){if(typeof r=="function"&&e!=null)try{var n=r(e,t);if(to(n))return eD(n,e,t)}catch{}if(Array.isArray(r)&&r.length===2){var[i,s]=r,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(at(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&IC.test(i)){var u=IC.exec(i);if(u==null||e==null)a=void 0;else{var c=+u[1];a=e[0]-c}}else a=e?.[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(at(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e?.[1]))}catch{}else if(typeof s=="string"&&OC.test(s)){var h=OC.exec(s);if(h==null||e==null)o=void 0;else{var d=+h[1];o=e[1]+d}}else o=e?.[1];var g=[a,o];if(to(g))return e==null?g:eD(g,e,t)}}}var Cu=1e9,zX={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jA,Qt=!0,Ei="[DecimalError] ",qo=Ei+"Invalid argument: ",UA=Ei+"Exponent out of range: ",Pu=Math.floor,Do=Math.pow,HX=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jn,Mr=1e7,qt=7,sj=9007199254740991,cg=Pu(sj/qt),et={};et.absoluteValue=et.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};et.comparedTo=et.cmp=function(r){var e,t,n,i,s=this;if(r=new s.constructor(r),s.s!==r.s)return s.s||-r.s;if(s.e!==r.e)return s.e>r.e^s.s<0?1:-1;for(n=s.d.length,i=r.d.length,e=0,t=n<i?n:i;e<t;++e)if(s.d[e]!==r.d[e])return s.d[e]>r.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};et.decimalPlaces=et.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*qt;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};et.dividedBy=et.div=function(r){return qs(this,new this.constructor(r))};et.dividedToIntegerBy=et.idiv=function(r){var e=this,t=e.constructor;return Ft(qs(e,new t(r),0,1),t.precision)};et.equals=et.eq=function(r){return!this.cmp(r)};et.exponent=function(){return yr(this)};et.greaterThan=et.gt=function(r){return this.cmp(r)>0};et.greaterThanOrEqualTo=et.gte=function(r){return this.cmp(r)>=0};et.isInteger=et.isint=function(){return this.e>this.d.length-2};et.isNegative=et.isneg=function(){return this.s<0};et.isPositive=et.ispos=function(){return this.s>0};et.isZero=function(){return this.s===0};et.lessThan=et.lt=function(r){return this.cmp(r)<0};et.lessThanOrEqualTo=et.lte=function(r){return this.cmp(r)<1};et.logarithm=et.log=function(r){var e,t=this,n=t.constructor,i=n.precision,s=i+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(Jn))throw Error(Ei+"NaN");if(t.s<1)throw Error(Ei+(t.s?"NaN":"-Infinity"));return t.eq(Jn)?new n(0):(Qt=!1,e=qs(hf(t,s),hf(r,s),s),Qt=!0,Ft(e,i))};et.minus=et.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?lj(e,r):aj(e,(r.s=-r.s,r))};et.modulo=et.mod=function(r){var e,t=this,n=t.constructor,i=n.precision;if(r=new n(r),!r.s)throw Error(Ei+"NaN");return t.s?(Qt=!1,e=qs(t,r,0,1).times(r),Qt=!0,t.minus(e)):Ft(new n(t),i)};et.naturalExponential=et.exp=function(){return oj(this)};et.naturalLogarithm=et.ln=function(){return hf(this)};et.negated=et.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};et.plus=et.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?aj(e,r):lj(e,(r.s=-r.s,r))};et.precision=et.sd=function(r){var e,t,n,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(qo+r);if(e=yr(i)+1,n=i.d.length-1,t=n*qt+1,n=i.d[n],n){for(;n%10==0;n/=10)t--;for(n=i.d[0];n>=10;n/=10)t++}return r&&e>t?e:t};et.squareRoot=et.sqrt=function(){var r,e,t,n,i,s,a,o=this,u=o.constructor;if(o.s<1){if(!o.s)return new u(0);throw Error(Ei+"NaN")}for(r=yr(o),Qt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Zi(o.d),(e.length+r)%2==0&&(e+="0"),i=Math.sqrt(e),r=Pu((r+1)/2)-(r<0||r%2),i==1/0?e="5e"+r:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new u(e)):n=new u(i.toString()),t=u.precision,i=a=t+3;;)if(s=n,n=s.plus(qs(o,s,a+2)).times(.5),Zi(s.d).slice(0,a)===(e=Zi(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ft(s,t+1,0),s.times(s).eq(o)){n=s;break}}else if(e!="9999")break;a+=4}return Qt=!0,Ft(n,t)};et.times=et.mul=function(r){var e,t,n,i,s,a,o,u,c,h=this,d=h.constructor,g=h.d,m=(r=new d(r)).d;if(!h.s||!r.s)return new d(0);for(r.s*=h.s,t=h.e+r.e,u=g.length,c=m.length,u<c&&(s=g,g=m,m=s,a=u,u=c,c=a),s=[],a=u+c,n=a;n--;)s.push(0);for(n=c;--n>=0;){for(e=0,i=u+n;i>n;)o=s[i]+m[n]*g[i-n-1]+e,s[i--]=o%Mr|0,e=o/Mr|0;s[i]=(s[i]+e)%Mr|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=t,Qt?Ft(r,d.precision):r};et.toDecimalPlaces=et.todp=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(as(r,0,Cu),e===void 0?e=n.rounding:as(e,0,8),Ft(t,r+yr(t)+1,e))};et.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Xo(n,!0):(as(r,0,Cu),e===void 0?e=i.rounding:as(e,0,8),n=Ft(new i(n),r+1,e),t=Xo(n,!0,r+1)),t};et.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?Xo(i):(as(r,0,Cu),e===void 0?e=s.rounding:as(e,0,8),n=Ft(new s(i),r+yr(i)+1,e),t=Xo(n.abs(),!1,r+yr(n)+1),i.isneg()&&!i.isZero()?"-"+t:t)};et.toInteger=et.toint=function(){var r=this,e=r.constructor;return Ft(new e(r),yr(r)+1,e.rounding)};et.toNumber=function(){return+this};et.toPower=et.pow=function(r){var e,t,n,i,s,a,o=this,u=o.constructor,c=12,h=+(r=new u(r));if(!r.s)return new u(Jn);if(o=new u(o),!o.s){if(r.s<1)throw Error(Ei+"Infinity");return o}if(o.eq(Jn))return o;if(n=u.precision,r.eq(Jn))return Ft(o,n);if(e=r.e,t=r.d.length-1,a=e>=t,s=o.s,a){if((t=h<0?-h:h)<=sj){for(i=new u(Jn),e=Math.ceil(n/qt+4),Qt=!1;t%2&&(i=i.times(o),rD(i.d,e)),t=Pu(t/2),t!==0;)o=o.times(o),rD(o.d,e);return Qt=!0,r.s<0?new u(Jn).div(i):Ft(i,n)}}else if(s<0)throw Error(Ei+"NaN");return s=s<0&&r.d[Math.max(e,t)]&1?-1:1,o.s=1,Qt=!1,i=r.times(hf(o,n+c)),Qt=!0,i=oj(i),i.s=s,i};et.toPrecision=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?(t=yr(i),n=Xo(i,t<=s.toExpNeg||t>=s.toExpPos)):(as(r,1,Cu),e===void 0?e=s.rounding:as(e,0,8),i=Ft(new s(i),r,e),t=yr(i),n=Xo(i,r<=t||t<=s.toExpNeg,r)),n};et.toSignificantDigits=et.tosd=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(as(r,1,Cu),e===void 0?e=n.rounding:as(e,0,8)),Ft(new n(t),r,e)};et.toString=et.valueOf=et.val=et.toJSON=et[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=yr(r),t=r.constructor;return Xo(r,e<=t.toExpNeg||e>=t.toExpPos)};function aj(r,e){var t,n,i,s,a,o,u,c,h=r.constructor,d=h.precision;if(!r.s||!e.s)return e.s||(e=new h(r)),Qt?Ft(e,d):e;if(u=r.d,c=e.d,a=r.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(n=u,s=-s,o=c.length):(n=c,i=a,o=u.length),a=Math.ceil(d/qt),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=u.length,s=c.length,o-s<0&&(s=o,n=c,c=u,u=n),t=0;s;)t=(u[--s]=u[s]+c[s]+t)/Mr|0,u[s]%=Mr;for(t&&(u.unshift(t),++i),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=i,Qt?Ft(e,d):e}function as(r,e,t){if(r!==~~r||r<e||r>t)throw Error(qo+r)}function Zi(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=qt-n.length,t&&(s+=Ka(t)),s+=n;a=r[e],n=a+"",t=qt-n.length,t&&(s+=Ka(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var qs=(function(){function r(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%Mr|0,a=s/Mr|0;return a&&n.unshift(a),n}function e(n,i,s,a){var o,u;if(s!=a)u=s>a?1:-1;else for(o=u=0;o<s;o++)if(n[o]!=i[o]){u=n[o]>i[o]?1:-1;break}return u}function t(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Mr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,u,c,h,d,g,m,y,x,b,E,S,T,I,w,R,_,C,k=n.constructor,D=n.s==i.s?1:-1,U=n.d,N=i.d;if(!n.s)return new k(n);if(!i.s)throw Error(Ei+"Division by zero");for(u=n.e-i.e,_=N.length,w=U.length,m=new k(D),y=m.d=[],c=0;N[c]==(U[c]||0);)++c;if(N[c]>(U[c]||0)&&--u,s==null?S=s=k.precision:a?S=s+(yr(n)-yr(i))+1:S=s,S<0)return new k(0);if(S=S/qt+2|0,c=0,_==1)for(h=0,N=N[0],S++;(c<w||h)&&S--;c++)T=h*Mr+(U[c]||0),y[c]=T/N|0,h=T%N|0;else{for(h=Mr/(N[0]+1)|0,h>1&&(N=r(N,h),U=r(U,h),_=N.length,w=U.length),I=_,x=U.slice(0,_),b=x.length;b<_;)x[b++]=0;C=N.slice(),C.unshift(0),R=N[0],N[1]>=Mr/2&&++R;do h=0,o=e(N,x,_,b),o<0?(E=x[0],_!=b&&(E=E*Mr+(x[1]||0)),h=E/R|0,h>1?(h>=Mr&&(h=Mr-1),d=r(N,h),g=d.length,b=x.length,o=e(d,x,g,b),o==1&&(h--,t(d,_<g?C:N,g))):(h==0&&(o=h=1),d=N.slice()),g=d.length,g<b&&d.unshift(0),t(x,d,b),o==-1&&(b=x.length,o=e(N,x,_,b),o<1&&(h++,t(x,_<b?C:N,b))),b=x.length):o===0&&(h++,x=[0]),y[c++]=h,o&&x[0]?x[b++]=U[I]||0:(x=[U[I]],b=1);while((I++<w||x[0]!==void 0)&&S--)}return y[0]||y.shift(),m.e=u,Ft(m,a?s+yr(m)+1:s)}})();function oj(r,e){var t,n,i,s,a,o,u=0,c=0,h=r.constructor,d=h.precision;if(yr(r)>16)throw Error(UA+yr(r));if(!r.s)return new h(Jn);for(Qt=!1,o=d,a=new h(.03125);r.abs().gte(.1);)r=r.times(a),c+=5;for(n=Math.log(Do(2,c))/Math.LN10*2+5|0,o+=n,t=i=s=new h(Jn),h.precision=o;;){if(i=Ft(i.times(r),o),t=t.times(++u),a=s.plus(qs(i,t,o)),Zi(a.d).slice(0,o)===Zi(s.d).slice(0,o)){for(;c--;)s=Ft(s.times(s),o);return h.precision=d,e==null?(Qt=!0,Ft(s,d)):s}s=a}}function yr(r){for(var e=r.e*qt,t=r.d[0];t>=10;t/=10)e++;return e}function db(r,e,t){if(e>r.LN10.sd())throw Qt=!0,t&&(r.precision=t),Error(Ei+"LN10 precision limit exceeded");return Ft(new r(r.LN10),e)}function Ka(r){for(var e="";r--;)e+="0";return e}function hf(r,e){var t,n,i,s,a,o,u,c,h,d=1,g=10,m=r,y=m.d,x=m.constructor,b=x.precision;if(m.s<1)throw Error(Ei+(m.s?"NaN":"-Infinity"));if(m.eq(Jn))return new x(0);if(e==null?(Qt=!1,c=b):c=e,m.eq(10))return e==null&&(Qt=!0),db(x,c);if(c+=g,x.precision=c,t=Zi(y),n=t.charAt(0),s=yr(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)m=m.times(r),t=Zi(m.d),n=t.charAt(0),d++;s=yr(m),n>1?(m=new x("0."+t),s++):m=new x(n+"."+t.slice(1))}else return u=db(x,c+2,b).times(s+""),m=hf(new x(n+"."+t.slice(1)),c-g).plus(u),x.precision=b,e==null?(Qt=!0,Ft(m,b)):m;for(o=a=m=qs(m.minus(Jn),m.plus(Jn),c),h=Ft(m.times(m),c),i=3;;){if(a=Ft(a.times(h),c),u=o.plus(qs(a,new x(i),c)),Zi(u.d).slice(0,c)===Zi(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(db(x,c+2,b).times(s+""))),o=qs(o,new x(d),c),x.precision=b,e==null?(Qt=!0,Ft(o,b)):o;o=u,i+=2}}function tD(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,t=t-n-1,r.e=Pu(t/qt),r.d=[],n=(t+1)%qt,t<0&&(n+=qt),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=qt;n<i;)r.d.push(+e.slice(n,n+=qt));e=e.slice(n),n=qt-e.length}else n-=i;for(;n--;)e+="0";if(r.d.push(+e),Qt&&(r.e>cg||r.e<-cg))throw Error(UA+t)}else r.s=0,r.e=0,r.d=[0];return r}function Ft(r,e,t){var n,i,s,a,o,u,c,h,d=r.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=qt,i=e,c=d[h=0];else{if(h=Math.ceil((n+1)/qt),s=d.length,h>=s)return r;for(c=s=d[h],a=1;s>=10;s/=10)a++;n%=qt,i=n-qt+a}if(t!==void 0&&(s=Do(10,a-i-1),o=c/s%10|0,u=e<0||d[h+1]!==void 0||c%s,u=t<4?(o||u)&&(t==0||t==(r.s<0?3:2)):o>5||o==5&&(t==4||u||t==6&&(n>0?i>0?c/Do(10,a-i):0:d[h-1])%10&1||t==(r.s<0?8:7))),e<1||!d[0])return u?(s=yr(r),d.length=1,e=e-s-1,d[0]=Do(10,(qt-e%qt)%qt),r.e=Pu(-e/qt)||0):(d.length=1,d[0]=r.e=r.s=0),r;if(n==0?(d.length=h,s=1,h--):(d.length=h+1,s=Do(10,qt-n),d[h]=i>0?(c/Do(10,a-i)%Do(10,i)|0)*s:0),u)for(;;)if(h==0){(d[0]+=s)==Mr&&(d[0]=1,++r.e);break}else{if(d[h]+=s,d[h]!=Mr)break;d[h--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(Qt&&(r.e>cg||r.e<-cg))throw Error(UA+yr(r));return r}function lj(r,e){var t,n,i,s,a,o,u,c,h,d,g=r.constructor,m=g.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new g(r),Qt?Ft(e,m):e;if(u=r.d,d=e.d,n=e.e,c=r.e,u=u.slice(),a=c-n,a){for(h=a<0,h?(t=u,a=-a,o=d.length):(t=d,n=c,o=u.length),i=Math.max(Math.ceil(m/qt),o)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=u.length,o=d.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(u[i]!=d[i]){h=u[i]<d[i];break}a=0}for(h&&(t=u,u=d,d=t,e.s=-e.s),o=u.length,i=d.length-o;i>0;--i)u[o++]=0;for(i=d.length;i>a;){if(u[--i]<d[i]){for(s=i;s&&u[--s]===0;)u[s]=Mr-1;--u[s],u[i]+=Mr}u[i]-=d[i]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,Qt?Ft(e,m):e):new g(0)}function Xo(r,e,t){var n,i=yr(r),s=Zi(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ka(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ka(-i-1)+s,t&&(n=t-a)>0&&(s+=Ka(n))):i>=a?(s+=Ka(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+Ka(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=Ka(n))),r.s<0?"-"+s:s}function rD(r,e){if(r.length>e)return r.length=e,!0}function uj(r){var e,t,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(qo+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return tD(a,s.toString())}else if(typeof s!="string")throw Error(qo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,HX.test(s))tD(a,s);else throw Error(qo+s)}if(i.prototype=et,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uj,i.config=i.set=KX,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function KX(r){if(!r||typeof r!="object")throw Error(Ei+"Object expected");var e,t,n,i=["precision",1,Cu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=r[t=i[e]])!==void 0)if(Pu(n)===n&&n>=i[e+1]&&n<=i[e+2])this[t]=n;else throw Error(qo+t+": "+n);if((n=r[t="LN10"])!==void 0)if(n==Math.LN10)this[t]=new this(n);else throw Error(qo+t+": "+n);return this}var jA=uj(zX);Jn=new jA(1);const Lt=jA;var qX=r=>r,cj={},fj=r=>r===cj,nD=r=>function e(){return arguments.length===0||arguments.length===1&&fj(arguments.length<=0?void 0:arguments[0])?e:r(...arguments)},hj=(r,e)=>r===1?e:nD(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=n.filter(a=>a!==cj).length;return s>=r?e(...n):hj(r-s,nD(function(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];var c=n.map(h=>fj(h)?o.shift():h);return e(...c,...o)}))}),VX=r=>hj(r.length,r),jE=(r,e)=>{for(var t=[],n=r;n<e;++n)t[n-r]=n;return t},WX=VX((r,e)=>Array.isArray(e)?e.map(r):Object.keys(e).map(t=>e[t]).map(r)),YX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return qX;var i=t.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,u)=>u(o),s(...arguments))}},FE=r=>Array.isArray(r)?r.reverse():r.split("").reverse().join("");function dj(r){var e;return r===0?e=1:e=Math.floor(new Lt(r).abs().log(10).toNumber())+1,e}function pj(r,e,t){for(var n=new Lt(r),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(t),i++;return s}var gj=r=>{var[e,t]=r,[n,i]=[e,t];return e>t&&([n,i]=[t,e]),[n,i]},mj=(r,e,t)=>{if(r.lte(0))return new Lt(0);var n=dj(r.toNumber()),i=new Lt(10).pow(n),s=r.div(i),a=n!==1?.05:.1,o=new Lt(Math.ceil(s.div(a).toNumber())).add(t).mul(a),u=o.mul(i);return e?new Lt(u.toNumber()):new Lt(Math.ceil(u.toNumber()))},XX=(r,e,t)=>{var n=new Lt(1),i=new Lt(r);if(!i.isint()&&t){var s=Math.abs(r);s<1?(n=new Lt(10).pow(dj(r)-1),i=new Lt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Lt(Math.floor(r)))}else r===0?i=new Lt(Math.floor((e-1)/2)):t||(i=new Lt(Math.floor(r)));var a=Math.floor((e-1)/2),o=YX(WX(u=>i.add(new Lt(u-a).mul(n)).toNumber()),jE);return o(0,e)},yj=function(e,t,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Lt(0),tickMin:new Lt(0),tickMax:new Lt(0)};var a=mj(new Lt(t).sub(e).div(n-1),i,s),o;e<=0&&t>=0?o=new Lt(0):(o=new Lt(e).add(t).div(2),o=o.sub(new Lt(o).mod(a)));var u=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new Lt(t).sub(o).div(a).toNumber()),h=u+c+1;return h>n?yj(e,t,n,i,s+1):(h<n&&(c=t>0?c+(n-h):c,u=t>0?u:u+(n-h)),{step:a,tickMin:o.sub(new Lt(u).mul(a)),tickMax:o.add(new Lt(c).mul(a))})},QX=function(e){var[t,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[o,u]=gj([t,n]);if(o===-1/0||u===1/0){var c=u===1/0?[o,...jE(0,i-1).map(()=>1/0)]:[...jE(0,i-1).map(()=>-1/0),u];return t>n?FE(c):c}if(o===u)return XX(o,i,s);var{step:h,tickMin:d,tickMax:g}=yj(o,u,a,s,0),m=pj(d,g.add(new Lt(.1).mul(h)),h);return t>n?FE(m):m},ZX=function(e,t){var[n,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=gj([n,i]);if(a===-1/0||o===1/0)return[n,i];if(a===o)return[a];var u=Math.max(t,2),c=mj(new Lt(o).sub(a).div(u-1),s,0),h=[...pj(new Lt(a),new Lt(o),c),o];return s===!1&&(h=h.map(d=>Math.round(d))),n>i?FE(h):h},JX=r=>r.rootProps.barCategoryGap,ym=r=>r.rootProps.stackOffset,vj=r=>r.rootProps.reverseStackOrder,FA=r=>r.options.chartName,$A=r=>r.rootProps.syncId,bj=r=>r.rootProps.syncMethod,GA=r=>r.options.eventEmitter,dn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},$s={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},vm=(r,e)=>{if(!(!r||!e))return r!=null&&r.reversed?[e[1],e[0]]:e},eQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$s.angleAxisId,includeHidden:!1,name:void 0,reversed:$s.reversed,scale:$s.scale,tick:$s.tick,tickCount:void 0,ticks:void 0,type:$s.type,unit:void 0},tQ={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:Xn.type,unit:void 0},rQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$s.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$s.scale,tick:$s.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nQ={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:"category",unit:void 0},zA=(r,e)=>r.polarAxis.angleAxis[e]!=null?r.polarAxis.angleAxis[e]:r.layout.layoutType==="radial"?rQ:eQ,HA=(r,e)=>r.polarAxis.radiusAxis[e]!=null?r.polarAxis.radiusAxis[e]:r.layout.layoutType==="radial"?nQ:tQ,bm=r=>r.polarOptions,KA=ke([la,ua,Xr],ZW),xj=ke([bm,KA],(r,e)=>{if(r!=null)return eo(r.innerRadius,e,0)}),Sj=ke([bm,KA],(r,e)=>{if(r!=null)return eo(r.outerRadius,e,e*.8)}),iQ=r=>{if(r==null)return[0,0];var{startAngle:e,endAngle:t}=r;return[e,t]},Ej=ke([bm],iQ);ke([zA,Ej],vm);var Tj=ke([KA,xj,Sj],(r,e,t)=>{if(!(r==null||e==null||t==null))return[e,t]});ke([HA,Tj],vm);var Aj=ke([Vt,bm,xj,Sj,la,ua],(r,e,t,n,i,s)=>{if(!(r!=="centric"&&r!=="radial"||e==null||t==null||n==null)){var{cx:a,cy:o,startAngle:u,endAngle:c}=e;return{cx:eo(a,i,i/2),cy:eo(o,s,s/2),innerRadius:t,outerRadius:n,startAngle:u,endAngle:c,clockWise:!1}}}),Ir=(r,e)=>e,xm=(r,e,t)=>t;function wj(r){return r?.id}function _j(r,e,t){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=t,a=new Map;return r.forEach(o=>{var u,c=(u=o.data)!==null&&u!==void 0?u:n;if(!(c==null||c.length===0)){var h=wj(o);c.forEach((d,g)=>{var m=s==null||i?g:String(sn(d,s,null)),y=sn(d,o.dataKey,0),x;a.has(m)?x=a.get(m):x={},Object.assign(x,{[h]:y}),a.set(m,x)})}}),Array.from(a.values())}function qA(r){return r.stackId!=null&&r.dataKey!=null}var Sm=(r,e)=>r===e?!0:r==null||e==null?!1:r[0]===e[0]&&r[1]===e[1];function Em(r,e){return Array.isArray(r)&&Array.isArray(e)&&r.length===0&&e.length===0?!0:r===e}function sQ(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return!1}var Or=r=>{var e=Vt(r);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Du=r=>r.tooltip.settings.axisId;function iD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function fg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(t),!0).forEach(function(n){aQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):iD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function aQ(r,e,t){return(e=oQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function oQ(r){var e=lQ(r,"string");return typeof e=="symbol"?e:e+""}function lQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var $E=[0,"auto"],Dr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ij=(r,e)=>r.cartesianAxis.xAxis[e],fa=(r,e)=>{var t=Ij(r,e);return t??Dr},kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:$E,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Df},Oj=(r,e)=>r.cartesianAxis.yAxis[e],ha=(r,e)=>{var t=Oj(r,e);return t??kr},uQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VA=(r,e)=>{var t=r.cartesianAxis.zAxis[e];return t??uQ},vn=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);case"zAxis":return VA(r,t);case"angleAxis":return zA(r,t);case"radiusAxis":return HA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},cQ=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Ff=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);case"angleAxis":return zA(r,t);case"radiusAxis":return HA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Rj=r=>r.graphicalItems.cartesianItems.some(e=>e.type==="bar")||r.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Lj(r,e){return t=>{switch(r){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var Cj=r=>r.graphicalItems.cartesianItems,fQ=ke([Ir,xm],Lj),Pj=(r,e,t)=>r.filter(t).filter(n=>e?.includeHidden===!0?!0:!n.hide),$f=ke([Cj,vn,fQ],Pj,{memoizeOptions:{resultEqualityCheck:Em}}),Dj=ke([$f],r=>r.filter(e=>e.type==="area"||e.type==="bar").filter(qA)),kj=r=>r.filter(e=>!("stackId"in e)||e.stackId===void 0),hQ=ke([$f],kj),Mj=r=>r.map(e=>e.data).filter(Boolean).flat(1),dQ=ke([$f],Mj,{memoizeOptions:{resultEqualityCheck:Em}}),Nj=(r,e)=>{var{chartData:t=[],dataStartIndex:n,dataEndIndex:i}=e;return r.length>0?r:t.slice(n,i+1)},WA=ke([dQ,BA],Nj),Bj=(r,e,t)=>e?.dataKey!=null?r.map(n=>({value:sn(n,e.dataKey)})):t.length>0?t.map(n=>n.dataKey).flatMap(n=>r.map(i=>({value:sn(i,n)}))):r.map(n=>({value:n})),Tm=ke([WA,vn,$f],Bj);function Uj(r,e){switch(r){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function vp(r){if(is(r)||r instanceof Date){var e=Number(r);if(Br(e))return e}}function sD(r){if(Array.isArray(r)){var e=[vp(r[0]),vp(r[1])];return to(e)?e:void 0}var t=vp(r);if(t!=null)return[t,t]}function ra(r){return r.map(vp).filter(sK)}function pQ(r,e,t){return!t||typeof e!="number"||ns(e)?[]:t.length?ra(t.flatMap(n=>{var i=sn(r,n.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!Br(s)||!Br(a)))return[e-s,e+a]})):[]}var Rr=r=>{var e=Or(r),t=Du(r);return Ff(r,e,t)},Gf=ke([Rr],r=>r?.dataKey),gQ=ke([Dj,BA,Rr],_j),jj=(r,e,t,n)=>{var i={},s=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[o,u]=a,c=n?[...u].reverse():u,h=c.map(wj);return[o,{stackedData:C9(r,h,t),graphicalItems:c}]}))},mQ=ke([gQ,Dj,ym,vj],jj),Fj=(r,e,t,n)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(n==null&&t!=="zAxis"){var a=k9(r,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},yQ=ke([vn],r=>r.allowDataOverflow),YA=r=>{var e;if(r==null||!("domain"in r))return $E;if(r.domain!=null)return r.domain;if(r.ticks!=null){if(r.type==="number"){var t=ra(r.ticks);return[Math.min(...t),Math.max(...t)]}if(r.type==="category")return r.ticks.map(String)}return(e=r?.domain)!==null&&e!==void 0?e:$E},$j=ke([vn],YA),Gj=ke([$j,yQ],ij),vQ=ke([mQ,uo,Ir,Gj],Fj,{memoizeOptions:{resultEqualityCheck:Sm}}),XA=r=>r.errorBars,bQ=(r,e,t)=>r.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Uj(t,n)),hg=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},zj=(r,e,t,n,i)=>{var s,a;if(t.length>0&&r.forEach(o=>{t.forEach(u=>{var c,h,d=(c=n[u.id])===null||c===void 0?void 0:c.filter(E=>Uj(i,E)),g=sn(o,(h=e.dataKey)!==null&&h!==void 0?h:u.dataKey),m=pQ(o,g,d);if(m.length>=2){var y=Math.min(...m),x=Math.max(...m);(s==null||y<s)&&(s=y),(a==null||x>a)&&(a=x)}var b=sD(g);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),a=a==null?b[1]:Math.max(a,b[1]))})}),e?.dataKey!=null&&r.forEach(o=>{var u=sD(sn(o,e.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),a=a==null?u[1]:Math.max(a,u[1]))}),Br(s)&&Br(a))return[s,a]},xQ=ke([WA,vn,hQ,XA,Ir],zj,{memoizeOptions:{resultEqualityCheck:Sm}});function SQ(r){var{value:e}=r;if(is(e)||e instanceof Date)return e}var EQ=(r,e,t)=>{var n=r.map(SQ).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&eB(n))?TU(0,r.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Hj=r=>r.referenceElements.dots,ku=(r,e,t)=>r.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===t:n.yAxisId===t),TQ=ke([Hj,Ir,xm],ku),Kj=r=>r.referenceElements.areas,AQ=ke([Kj,Ir,xm],ku),qj=r=>r.referenceElements.lines,wQ=ke([qj,Ir,xm],ku),Vj=(r,e)=>{var t=ra(r.map(n=>e==="xAxis"?n.x:n.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},_Q=ke(TQ,Ir,Vj),Wj=(r,e)=>{var t=ra(r.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},IQ=ke([AQ,Ir],Wj);function OQ(r){var e;if(r.x!=null)return ra([r.x]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.x);return t==null||t.length===0?[]:ra(t)}function RQ(r){var e;if(r.y!=null)return ra([r.y]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.y);return t==null||t.length===0?[]:ra(t)}var Yj=(r,e)=>{var t=r.flatMap(n=>e==="xAxis"?OQ(n):RQ(n));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},LQ=ke([wQ,Ir],Yj),CQ=ke(_Q,LQ,IQ,(r,e,t)=>hg(r,t,e)),Xj=(r,e,t,n,i,s,a,o)=>{if(t!=null)return t;var u=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=u?hg(n,s,i):hg(s,i);return GX(e,c,r.allowDataOverflow)},PQ=ke([vn,$j,Gj,vQ,xQ,CQ,Vt,Ir],Xj,{memoizeOptions:{resultEqualityCheck:Sm}}),DQ=[0,1],Qj=(r,e,t,n,i,s,a)=>{if(!((r==null||t==null||t.length===0)&&a===void 0)){var{dataKey:o,type:u}=r,c=ao(e,s);if(c&&o==null){var h;return TU(0,(h=t?.length)!==null&&h!==void 0?h:0)}return u==="category"?EQ(n,r,c):i==="expand"?DQ:a}},QA=ke([vn,Vt,WA,Tm,ym,Ir,PQ],Qj),Zj=(r,e,t,n,i)=>{if(r!=null){var{scale:s,type:a}=r;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Of(s));return o in Gc?o:"point"}}},zf=ke([vn,Vt,Rj,FA,Ir],Zj);function kQ(r){if(r!=null){if(r in Gc)return Gc[r]();var e="scale".concat(Of(r));if(e in Gc)return Gc[e]()}}function ZA(r,e,t,n){if(!(t==null||n==null)){if(typeof r.scale=="function")return r.scale.copy().domain(t).range(n);var i=kQ(e);if(i!=null){var s=i.domain(t).range(n);return I9(s),s}}}var Jj=(r,e,t)=>{var n=YA(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&to(r))return QX(r,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&to(r))return ZX(r,e.tickCount,e.allowDecimals)}},JA=ke([QA,Ff,zf],Jj),eF=(r,e,t,n)=>{if(n!=="angleAxis"&&r?.type==="number"&&to(e)&&Array.isArray(t)&&t.length>0){var i=e[0],s=t[0],a=e[1],o=t[t.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},MQ=ke([vn,QA,JA,Ir],eF),NQ=ke(Tm,vn,(r,e)=>{if(!(!e||e.type!=="number")){var t=1/0,n=Array.from(ra(r.map(o=>o.value))).sort((o,u)=>o-u);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var s=0;s<n.length-1;s++){var a=n[s+1]-n[s];t=Math.min(t,a)}return t/i}}),tF=ke(NQ,Vt,JX,Xr,(r,e,t,n)=>n,(r,e,t,n,i)=>{if(!Br(r))return 0;var s=e==="vertical"?n.height:n.width;if(i==="gap")return r*s/2;if(i==="no-gap"){var a=eo(t,r*s),o=r*s/2;return o-a-(o-a)/s*a}return 0}),BQ=(r,e)=>{var t=fa(r,e);return t==null||typeof t.padding!="string"?0:tF(r,"xAxis",e,t.padding)},UQ=(r,e)=>{var t=ha(r,e);return t==null||typeof t.padding!="string"?0:tF(r,"yAxis",e,t.padding)},jQ=ke(fa,BQ,(r,e)=>{var t,n;if(r==null)return{left:0,right:0};var{padding:i}=r;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),FQ=ke(ha,UQ,(r,e)=>{var t,n;if(r==null)return{top:0,bottom:0};var{padding:i}=r;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),$Q=ke([Xr,jQ,im,nm,(r,e,t)=>t],(r,e,t,n,i)=>{var{padding:s}=n;return i?[s.left,t.width-s.right]:[r.left+e.left,r.left+r.width-e.right]}),GQ=ke([Xr,Vt,FQ,im,nm,(r,e,t)=>t],(r,e,t,n,i,s)=>{var{padding:a}=i;return s?[n.height-a.bottom,a.top]:e==="horizontal"?[r.top+r.height-t.bottom,r.top+t.top]:[r.top+t.top,r.top+r.height-t.bottom]}),Hf=(r,e,t,n)=>{var i;switch(e){case"xAxis":return $Q(r,t,n);case"yAxis":return GQ(r,t,n);case"zAxis":return(i=VA(r,t))===null||i===void 0?void 0:i.range;case"angleAxis":return Ej(r);case"radiusAxis":return Tj(r,t);default:return}},rF=ke([vn,Hf],vm),Mu=ke([vn,zf,MQ,rF],ZA);ke([$f,XA,Ir],bQ);function nF(r,e){return r.id<e.id?-1:r.id>e.id?1:0}var Am=(r,e)=>e,wm=(r,e,t)=>t,zQ=ke(tm,Am,wm,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(nF)),HQ=ke(rm,Am,wm,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(nF)),iF=(r,e)=>({width:r.width,height:e.height}),KQ=(r,e)=>{var t=typeof e.width=="number"?e.width:Df;return{width:t,height:r.height}},qQ=ke(Xr,fa,iF),VQ=(r,e,t)=>{switch(e){case"top":return r.top;case"bottom":return t-r.bottom;default:return 0}},WQ=(r,e,t)=>{switch(e){case"left":return r.left;case"right":return t-r.right;default:return 0}},YQ=ke(ua,Xr,zQ,Am,wm,(r,e,t,n,i)=>{var s={},a;return t.forEach(o=>{var u=iF(e,o);a==null&&(a=VQ(e,n,r));var c=n==="top"&&!i||n==="bottom"&&i;s[o.id]=a-Number(c)*u.height,a+=(c?-1:1)*u.height}),s}),XQ=ke(la,Xr,HQ,Am,wm,(r,e,t,n,i)=>{var s={},a;return t.forEach(o=>{var u=KQ(e,o);a==null&&(a=WQ(e,n,r));var c=n==="left"&&!i||n==="right"&&i;s[o.id]=a-Number(c)*u.width,a+=(c?-1:1)*u.width}),s}),QQ=(r,e)=>{var t=fa(r,e);if(t!=null)return YQ(r,t.orientation,t.mirror)},ZQ=ke([Xr,fa,QQ,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}}),JQ=(r,e)=>{var t=ha(r,e);if(t!=null)return XQ(r,t.orientation,t.mirror)},eZ=ke([Xr,ha,JQ,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}}),tZ=ke(Xr,ha,(r,e)=>{var t=typeof e.width=="number"?e.width:Df;return{width:t,height:r.height}}),sF=(r,e,t,n)=>{if(t!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=t,o=ao(r,n),u=e.map(c=>c.value);if(a&&o&&s==="category"&&i&&eB(u))return u}},e1=ke([Vt,Tm,vn,Ir],sF),aF=(r,e,t,n)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:s}=t,a=ao(r,n);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},t1=ke([Vt,Tm,Ff,Ir],aF),aD=ke([Vt,cQ,zf,Mu,e1,t1,Hf,JA,Ir],(r,e,t,n,i,s,a,o,u)=>{if(e!=null){var c=ao(r,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:t,scale:n}}}),rZ=(r,e,t,n,i,s,a,o,u)=>{if(!(e==null||n==null)){var c=ao(r,u),{type:h,ticks:d,tickCount:g}=e,m=t==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=h==="category"&&n.bandwidth?n.bandwidth()/m:0;y=u==="angleAxis"&&s!=null&&s.length>=2?bi(s[0]-s[1])*2*y:y;var x=d||i;if(x){var b=x.map((E,S)=>{var T=a?a.indexOf(E):E;return{index:S,coordinate:n(T)+y,value:E,offset:y}});return b.filter(E=>Br(E.coordinate))}return c&&o?o.map((E,S)=>({coordinate:n(E)+y,value:E,index:S,offset:y})).filter(E=>Br(E.coordinate)):n.ticks?n.ticks(g).map(E=>({coordinate:n(E)+y,value:E,offset:y})):n.domain().map((E,S)=>({coordinate:n(E)+y,value:a?a[E]:E,index:S,offset:y}))}},oF=ke([Vt,Ff,zf,Mu,JA,Hf,e1,t1,Ir],rZ),nZ=(r,e,t,n,i,s,a)=>{if(!(e==null||t==null||n==null||n[0]===n[1])){var o=ao(r,a),{tickCount:u}=e,c=0;return c=a==="angleAxis"&&n?.length>=2?bi(n[0]-n[1])*2*c:c,o&&s?s.map((h,d)=>({coordinate:t(h)+c,value:h,index:d,offset:c})):t.ticks?t.ticks(u).map(h=>({coordinate:t(h)+c,value:h,offset:c})):t.domain().map((h,d)=>({coordinate:t(h)+c,value:i?i[h]:h,index:d,offset:c}))}},lF=ke([Vt,Ff,Mu,Hf,e1,t1,Ir],nZ),uF=ke(vn,Mu,(r,e)=>{if(!(r==null||e==null))return fg(fg({},r),{},{scale:e})}),iZ=ke([vn,zf,QA,rF],ZA);ke((r,e,t)=>VA(r,t),iZ,(r,e)=>{if(!(r==null||e==null))return fg(fg({},r),{},{scale:e})});var sZ=ke([Vt,tm,rm],(r,e,t)=>{switch(r){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),cF=r=>r.options.defaultTooltipEventType,fF=r=>r.options.validateTooltipEventTypes;function hF(r,e,t){if(r==null)return e;var n=r?"axis":"item";return t==null?e:t.includes(n)?n:e}function r1(r,e){var t=cF(r),n=fF(r);return hF(e,t,n)}function aZ(r){return it(e=>r1(e,r))}var dF=(r,e)=>{var t,n=Number(e);if(!(ns(n)||e==null))return n>=0?r==null||(t=r[n])===null||t===void 0?void 0:t.value:void 0},oZ=r=>r.tooltip.settings,Ya={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},lZ={itemInteraction:{click:Ya,hover:Ya},axisInteraction:{click:Ya,hover:Ya},keyboardInteraction:Ya,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},pF=Bn({name:"tooltip",initialState:lZ,reducers:{addTooltipEntrySettings:{reducer(r,e){r.tooltipItemPayloads.push(e.payload)},prepare:Xt()},replaceTooltipEntrySettings:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).tooltipItemPayloads.indexOf(t);i>-1&&(r.tooltipItemPayloads[i]=n)},prepare:Xt()},removeTooltipEntrySettings:{reducer(r,e){var t=ki(r).tooltipItemPayloads.indexOf(e.payload);t>-1&&r.tooltipItemPayloads.splice(t,1)},prepare:Xt()},setTooltipSettingsState(r,e){r.settings=e.payload},setActiveMouseOverItemIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.itemInteraction.hover.active=!0,r.itemInteraction.hover.index=e.payload.activeIndex,r.itemInteraction.hover.dataKey=e.payload.activeDataKey,r.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(r){r.itemInteraction.hover.active=!1,r.axisInteraction.hover.active=!1},mouseLeaveItem(r){r.itemInteraction.hover.active=!1},setActiveClickItemIndex(r,e){r.syncInteraction.active=!1,r.itemInteraction.click.active=!0,r.keyboardInteraction.active=!1,r.itemInteraction.click.index=e.payload.activeIndex,r.itemInteraction.click.dataKey=e.payload.activeDataKey,r.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(r,e){r.syncInteraction.active=!1,r.axisInteraction.hover.active=!0,r.keyboardInteraction.active=!1,r.axisInteraction.hover.index=e.payload.activeIndex,r.axisInteraction.hover.dataKey=e.payload.activeDataKey,r.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.axisInteraction.click.active=!0,r.axisInteraction.click.index=e.payload.activeIndex,r.axisInteraction.click.dataKey=e.payload.activeDataKey,r.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(r,e){r.syncInteraction=e.payload},setKeyboardInteraction(r,e){r.keyboardInteraction.active=e.payload.active,r.keyboardInteraction.index=e.payload.activeIndex,r.keyboardInteraction.coordinate=e.payload.activeCoordinate,r.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:uZ,replaceTooltipEntrySettings:cZ,removeTooltipEntrySettings:fZ,setTooltipSettingsState:hZ,setActiveMouseOverItemIndex:dZ,mouseLeaveItem:Kce,mouseLeaveChart:gF,setActiveClickItemIndex:qce,setMouseOverAxisIndex:mF,setMouseClickAxisIndex:pZ,setSyncInteraction:GE,setKeyboardInteraction:zE}=pF.actions,gZ=pF.reducer;function oD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Td(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(t),!0).forEach(function(n){mZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function mZ(r,e,t){return(e=yZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yZ(r){var e=vZ(r,"string");return typeof e=="symbol"?e:e+""}function vZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bZ(r,e,t){return e==="axis"?t==="click"?r.axisInteraction.click:r.axisInteraction.hover:t==="click"?r.itemInteraction.click:r.itemInteraction.hover}function xZ(r){return r.index!=null}var yF=(r,e,t,n)=>{if(e==null)return Ya;var i=bZ(r,e,t);if(i==null)return Ya;if(i.active)return i;if(r.keyboardInteraction.active)return r.keyboardInteraction;if(r.syncInteraction.active&&r.syncInteraction.index!=null)return r.syncInteraction;var s=r.settings.active===!0;if(xZ(i)){if(s)return Td(Td({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Td(Td({},Ya),{},{coordinate:i.coordinate})};function SZ(r){if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(r instanceof Date){var e=r.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(r);return Number.isFinite(t)?t:void 0}function EZ(r,e){var t=SZ(r),n=e[0],i=e[1];if(t===void 0)return!1;var s=Math.min(n,i),a=Math.max(n,i);return t>=s&&t<=a}function TZ(r,e,t){if(t==null||e==null)return!0;var n=sn(r,e);return n==null||!to(t)?!0:EZ(n,t)}var n1=(r,e,t,n)=>{var i=r?.index;if(i==null)return null;var s=Number(i);if(!Br(s))return i;var a=0,o=1/0;e.length>0&&(o=e.length-1);var u=Math.max(a,Math.min(s,o)),c=e[u];return c==null||TZ(c,t,n)?String(u):null},vF=(r,e,t,n,i,s,a,o)=>{if(!(s==null||o==null)){var u=a[0],c=u==null?void 0:o(u.positions,s);if(c!=null)return c;var h=i?.[Number(s)];if(h)switch(t){case"horizontal":return{x:h.coordinate,y:(n.top+e)/2};default:return{x:(n.left+r)/2,y:h.coordinate}}}},bF=(r,e,t,n)=>{if(e==="axis")return r.tooltipItemPayloads;if(r.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=r.itemInteraction.hover.dataKey:i=r.itemInteraction.click.dataKey,i==null&&n!=null?[r.tooltipItemPayloads[0]]:r.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Kf=r=>r.options.tooltipPayloadSearcher,Nu=r=>r.tooltip;function lD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function uD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(t),!0).forEach(function(n){AZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function AZ(r,e,t){return(e=wZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wZ(r){var e=_Z(r,"string");return typeof e=="symbol"?e:e+""}function _Z(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function IZ(r,e){return r??e}var xF=(r,e,t,n,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:u,dataStartIndex:c,dataEndIndex:h}=t,d=[];return r.reduce((g,m)=>{var y,{dataDefinedOnItem:x,settings:b}=m,E=IZ(x,o),S=Array.isArray(E)?YB(E,c,h):E,T=(y=b?.dataKey)!==null&&y!==void 0?y:n,I=b?.nameKey,w;if(n&&Array.isArray(S)&&!Array.isArray(S[0])&&a==="axis"?w=tB(S,n,i):w=s(S,e,u,I),Array.isArray(w))w.forEach(_=>{var C=uD(uD({},b),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});g.push(RC({tooltipEntrySettings:C,dataKey:_.dataKey,payload:_.payload,value:sn(_.payload,_.dataKey),name:_.name}))});else{var R;g.push(RC({tooltipEntrySettings:b,dataKey:T,payload:w,value:sn(w,T),name:(R=sn(w,I))!==null&&R!==void 0?R:b?.name}))}return g},d)}},i1=ke([Rr,Vt,Rj,FA,Or],Zj),OZ=ke([r=>r.graphicalItems.cartesianItems,r=>r.graphicalItems.polarItems],(r,e)=>[...r,...e]),RZ=ke([Or,Du],Lj),qf=ke([OZ,Rr,RZ],Pj,{memoizeOptions:{resultEqualityCheck:Em}}),LZ=ke([qf],r=>r.filter(qA)),CZ=ke([qf],Mj,{memoizeOptions:{resultEqualityCheck:Em}}),Bu=ke([CZ,uo],Nj),PZ=ke([LZ,uo,Rr],_j),s1=ke([Bu,Rr,qf],Bj),SF=ke([Rr],YA),DZ=ke([Rr],r=>r.allowDataOverflow),EF=ke([SF,DZ],ij),kZ=ke([qf],r=>r.filter(qA)),MZ=ke([PZ,kZ,ym,vj],jj),NZ=ke([MZ,uo,Or,EF],Fj),BZ=ke([qf],kj),UZ=ke([Bu,Rr,BZ,XA,Or],zj,{memoizeOptions:{resultEqualityCheck:Sm}}),jZ=ke([Hj,Or,Du],ku),FZ=ke([jZ,Or],Vj),$Z=ke([Kj,Or,Du],ku),GZ=ke([$Z,Or],Wj),zZ=ke([qj,Or,Du],ku),HZ=ke([zZ,Or],Yj),KZ=ke([FZ,HZ,GZ],hg),qZ=ke([Rr,SF,EF,NZ,UZ,KZ,Vt,Or],Xj),Vf=ke([Rr,Vt,Bu,s1,ym,Or,qZ],Qj),VZ=ke([Vf,Rr,i1],Jj),WZ=ke([Rr,Vf,VZ,Or],eF),TF=r=>{var e=Or(r),t=Du(r),n=!1;return Hf(r,e,t,n)},AF=ke([Rr,TF],vm),wF=ke([Rr,i1,WZ,AF],ZA),YZ=ke([Vt,s1,Rr,Or],sF),XZ=ke([Vt,s1,Rr,Or],aF),QZ=(r,e,t,n,i,s,a,o)=>{if(e){var{type:u}=e,c=ao(r,o);if(n){var h=t==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,d=u==="category"&&n.bandwidth?n.bandwidth()/h:0;return d=o==="angleAxis"&&i!=null&&i?.length>=2?bi(i[0]-i[1])*2*d:d,c&&a?a.map((g,m)=>({coordinate:n(g)+d,value:g,index:m,offset:d})):n.domain().map((g,m)=>({coordinate:n(g)+d,value:s?s[g]:g,index:m,offset:d}))}}},da=ke([Vt,Rr,i1,wF,TF,YZ,XZ,Or],QZ),a1=ke([cF,fF,oZ],(r,e,t)=>hF(t.shared,r,e)),_F=r=>r.tooltip.settings.trigger,o1=r=>r.tooltip.settings.defaultIndex,Wf=ke([Nu,a1,_F,o1],yF),df=ke([Wf,Bu,Gf,Vf],n1),IF=ke([da,df],dF),ZZ=ke([Wf],r=>{if(r)return r.dataKey});ke([Wf],r=>{if(r)return r.graphicalItemId});var OF=ke([Nu,a1,_F,o1],bF),JZ=ke([la,ua,Vt,Xr,da,o1,OF,Kf],vF),eJ=ke([Wf,JZ],(r,e)=>r!=null&&r.coordinate?r.coordinate:e),tJ=ke([Wf],r=>r.active),rJ=ke([OF,df,uo,Gf,IF,Kf,a1],xF),nJ=ke([rJ],r=>{if(r!=null){var e=r.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function cD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function fD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(t),!0).forEach(function(n){iJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iJ(r,e,t){return(e=sJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sJ(r){var e=aJ(r,"string");return typeof e=="symbol"?e:e+""}function aJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var oJ=()=>it(Rr),lJ=()=>{var r=oJ(),e=it(da),t=it(wF);return Kp(!r||!t?void 0:fD(fD({},r),{},{scale:t}),e)};function hD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Kl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(t),!0).forEach(function(n){uJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function uJ(r,e,t){return(e=cJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cJ(r){var e=fJ(r,"string");return typeof e=="symbol"?e:e+""}function fJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var hJ=(r,e,t,n)=>{var i=e.find(s=>s&&s.index===t);if(i){if(r==="horizontal")return{x:i.coordinate,y:n.chartY};if(r==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},dJ=(r,e,t,n)=>{var i=e.find(c=>c&&c.index===t);if(i){if(r==="centric"){var s=i.coordinate,{radius:a}=n;return Kl(Kl(Kl({},n),Yr(n.cx,n.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:u}=n;return Kl(Kl(Kl({},n),Yr(n.cx,n.cy,o,u)),{},{angle:u,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function pJ(r,e){var{chartX:t,chartY:n}=r;return t>=e.left&&t<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var RF=(r,e,t,n,i)=>{var s,a=-1,o=(s=e?.length)!==null&&s!==void 0?s:0;if(o<=1||r==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<o;u++){var c=u>0?t[u-1].coordinate:t[o-1].coordinate,h=t[u].coordinate,d=u>=o-1?t[0].coordinate:t[u+1].coordinate,g=void 0;if(bi(h-c)!==bi(d-h)){var m=[];if(bi(d-h)===bi(i[1]-i[0])){g=d;var y=h+i[1]-i[0];m[0]=Math.min(y,(y+c)/2),m[1]=Math.max(y,(y+c)/2)}else{g=c;var x=d+i[1]-i[0];m[0]=Math.min(h,(x+h)/2),m[1]=Math.max(h,(x+h)/2)}var b=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(r>b[0]&&r<=b[1]||r>=m[0]&&r<=m[1]){({index:a}=t[u]);break}}else{var E=Math.min(c,d),S=Math.max(c,d);if(r>(E+h)/2&&r<=(S+h)/2){({index:a}=t[u]);break}}}else if(e){for(var T=0;T<o;T++)if(T===0&&r<=(e[T].coordinate+e[T+1].coordinate)/2||T>0&&T<o-1&&r>(e[T].coordinate+e[T-1].coordinate)/2&&r<=(e[T].coordinate+e[T+1].coordinate)/2||T===o-1&&r>(e[T].coordinate+e[T-1].coordinate)/2){({index:a}=e[T]);break}}return a},gJ=()=>it(FA),l1=(r,e)=>e,LF=(r,e,t)=>t,u1=(r,e,t,n)=>n,mJ=ke(da,r=>qg(r,e=>e.coordinate)),c1=ke([Nu,l1,LF,u1],yF),f1=ke([c1,Bu,Gf,Vf],n1),yJ=(r,e,t)=>{if(e!=null){var n=Nu(r);return e==="axis"?t==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:t==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},CF=ke([Nu,l1,LF,u1],bF),dg=ke([la,ua,Vt,Xr,da,u1,CF,Kf],vF),vJ=ke([c1,dg],(r,e)=>{var t;return(t=r.coordinate)!==null&&t!==void 0?t:e}),PF=ke([da,f1],dF),bJ=ke([CF,f1,uo,Gf,PF,Kf,l1],xF),xJ=ke([c1,f1],(r,e)=>({isActive:r.active&&e!=null,activeIndex:e})),SJ=(r,e,t,n,i,s,a)=>{if(!(!r||!t||!n||!i)&&pJ(r,a)){var o=M9(r,e),u=RF(o,s,i,t,n),c=hJ(e,i,u,r);return{activeIndex:String(u),activeCoordinate:c}}},EJ=(r,e,t,n,i,s,a)=>{if(!(!r||!n||!i||!s||!t)){var o=n7(r,t);if(o){var u=N9(o,e),c=RF(u,a,s,n,i),h=dJ(e,s,c,o);return{activeIndex:String(c),activeCoordinate:h}}}},TJ=(r,e,t,n,i,s,a,o)=>{if(!(!r||!e||!n||!i||!s))return e==="horizontal"||e==="vertical"?SJ(r,e,n,i,s,a,o):EJ(r,e,t,n,i,s,a)},AJ=ke(r=>r.zIndex.zIndexMap,(r,e)=>e,(r,e,t)=>t,(r,e,t)=>{if(e!=null){var n=r[e];if(n!=null)return t?n.panoramaElementId:n.elementId}}),wJ=ke(r=>r.zIndex.zIndexMap,r=>{var e=Object.keys(r).map(n=>parseInt(n,10)).concat(Object.values(dn)),t=Array.from(new Set(e));return t.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:sQ}});function dD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(t),!0).forEach(function(n){_J(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _J(r,e,t){return(e=IJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function IJ(r){var e=OJ(r,"string");return typeof e=="symbol"?e:e+""}function OJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var RJ={},LJ={zIndexMap:Object.values(dn).reduce((r,e)=>pD(pD({},r),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),RJ)},CJ=new Set(Object.values(dn));function PJ(r){return CJ.has(r)}var DF=Bn({name:"zIndex",initialState:LJ,reducers:{registerZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]?r.zIndexMap[t].consumers+=1:r.zIndexMap[t]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Xt()},unregisterZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(r.zIndexMap[t].consumers-=1,r.zIndexMap[t].consumers<=0&&!PJ(t)&&delete r.zIndexMap[t])},prepare:Xt()},registerZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t,elementId:n,isPanorama:i}=e.payload;r.zIndexMap[t]?i?r.zIndexMap[t].panoramaElementId=n:r.zIndexMap[t].elementId=n:r.zIndexMap[t]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Xt()},unregisterZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(e.payload.isPanorama?r.zIndexMap[t].panoramaElementId=void 0:r.zIndexMap[t].elementId=void 0)},prepare:Xt()}}}),{registerZIndexPortal:DJ,unregisterZIndexPortal:kJ,registerZIndexPortalId:MJ,unregisterZIndexPortalId:NJ}=DF.actions,BJ=DF.reducer;function pa(r){var{zIndex:e,children:t}=r,n=gV(),i=n&&e!==void 0&&e!==0,s=Un(),a=vr();P.useLayoutEffect(()=>i?(a(DJ({zIndex:e})),()=>{a(kJ({zIndex:e}))}):Rf,[a,e,i]);var o=it(c=>AJ(c,e,s));if(!i)return t;if(!o)return null;var u=document.getElementById(o);return u?_T.createPortal(t,u):null}function HE(){return HE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},HE.apply(null,arguments)}function gD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ad(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(t),!0).forEach(function(n){UJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function UJ(r,e,t){return(e=jJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jJ(r){var e=FJ(r,"string");return typeof e=="symbol"?e:e+""}function FJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $J(r){var{cursor:e,cursorComp:t,cursorProps:n}=r;return P.isValidElement(e)?P.cloneElement(e,n):P.createElement(t,n)}function GJ(r){var e,{coordinate:t,payload:n,index:i,offset:s,tooltipAxisBandSize:a,layout:o,cursor:u,tooltipEventType:c,chartName:h}=r,d=t,g=n,m=i;if(!u||!d||h!=="ScatterChart"&&c!=="axis")return null;var y,x,b;if(h==="ScatterChart")y=d,x=yW,b=dn.cursorLine;else if(h==="BarChart")y=vW(o,d,s,a),x=bU,b=dn.cursorRectangle;else if(o==="radial"&&nB(d)){var{cx:E,cy:S,radius:T,startAngle:I,endAngle:w}=xU(d);y={cx:E,cy:S,startAngle:I,endAngle:w,innerRadius:T,outerRadius:T},x=EU,b=dn.cursorLine}else y={points:o7(o,d,s)},x=pU,b=dn.cursorLine;var R=typeof u=="object"&&"className"in u?u.className:void 0,_=Ad(Ad(Ad(Ad({stroke:"#ccc",pointerEvents:"none"},s),y),$g(u)),{},{payload:g,payloadIndex:m,className:Bt("recharts-tooltip-cursor",R)});return P.createElement(pa,{zIndex:(e=r.zIndex)!==null&&e!==void 0?e:b},P.createElement($J,{cursor:u,cursorComp:x,cursorProps:_}))}function zJ(r){var e=lJ(),t=sU(),n=am(),i=gJ();return e==null||t==null||n==null||i==null?null:P.createElement(GJ,HE({},r,{offset:t,layout:n,tooltipAxisBandSize:e,chartName:i}))}var kF=P.createContext(null),HJ=()=>P.useContext(kF),pb={exports:{}},mD;function KJ(){return mD||(mD=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function s(u,c,h,d,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,d||u,g),y=t?t+c:c;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],m]:u._events[y].push(m):(u._events[y]=m,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=t?t+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,m=d.length,y=new Array(m);g<m;g++)y[g]=d[g].fn;return y},o.prototype.listenerCount=function(c){var h=t?t+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,g,m,y){var x=t?t+c:c;if(!this._events[x])return!1;var b=this._events[x],E=arguments.length,S,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,g),!0;case 5:return b.fn.call(b.context,h,d,g,m),!0;case 6:return b.fn.call(b.context,h,d,g,m,y),!0}for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];b.fn.apply(b.context,S)}else{var I=b.length,w;for(T=0;T<I;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),E){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,h);break;case 3:b[T].fn.call(b[T].context,h,d);break;case 4:b[T].fn.call(b[T].context,h,d,g);break;default:if(!S)for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];b[T].fn.apply(b[T].context,S)}}return!0},o.prototype.on=function(c,h,d){return s(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return s(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,g){var m=t?t+c:c;if(!this._events[m])return this;if(!h)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===h&&(!g||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var x=0,b=[],E=y.length;x<E;x++)(y[x].fn!==h||g&&!y[x].once||d&&y[x].context!==d)&&b.push(y[x]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(pb)),pb.exports}var qJ=KJ();const VJ=na(qJ);var pf=new VJ,KE="recharts.syncEvent.tooltip",yD="recharts.syncEvent.brush";function WJ(r,e){if(e){var t=Number.parseInt(e,10);if(!ns(t))return r?.[t]}}var YJ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},MF=Bn({name:"options",initialState:YJ,reducers:{createEventEmitter:r=>{r.eventEmitter==null&&(r.eventEmitter=Symbol("rechartsEventEmitter"))}}}),XJ=MF.reducer,{createEventEmitter:QJ}=MF.actions;function ZJ(r){return r.tooltip.syncInteraction}var JJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},NF=Bn({name:"chartData",initialState:JJ,reducers:{setChartData(r,e){if(r.chartData=e.payload,e.payload==null){r.dataStartIndex=0,r.dataEndIndex=0;return}e.payload.length>0&&r.dataEndIndex!==e.payload.length-1&&(r.dataEndIndex=e.payload.length-1)},setComputedData(r,e){r.computedData=e.payload},setDataStartEndIndexes(r,e){var{startIndex:t,endIndex:n}=e.payload;t!=null&&(r.dataStartIndex=t),n!=null&&(r.dataEndIndex=n)}}}),{setChartData:vD,setDataStartEndIndexes:eee,setComputedData:Vce}=NF.actions,tee=NF.reducer,ree=["x","y"];function bD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ql(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(t),!0).forEach(function(n){nee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function nee(r,e,t){return(e=iee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function iee(r){var e=see(r,"string");return typeof e=="symbol"?e:e+""}function see(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function aee(r,e){if(r==null)return{};var t,n,i=oee(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function oee(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function lee(){var r=it($A),e=it(GA),t=vr(),n=it(bj),i=it(da),s=am(),a=sm(),o=it(u=>u.rootProps.className);P.useEffect(()=>{if(r==null)return Rf;var u=(c,h,d)=>{if(e!==d&&r===c){if(n==="index"){var g;if(a&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate&&h.payload.sourceViewBox){var m=h.payload.coordinate,{x:y,y:x}=m,b=aee(m,ree),{x:E,y:S,width:T,height:I}=h.payload.sourceViewBox,w=ql(ql({},b),{},{x:a.x+(T?(y-E)/T:0)*a.width,y:a.y+(I?(x-S)/I:0)*a.height});t(ql(ql({},h),{},{payload:ql(ql({},h.payload),{},{coordinate:w})}))}else t(h);return}if(i!=null){var R;if(typeof n=="function"){var _={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},C=n(i,_);R=i[C]}else n==="value"&&(R=i.find(H=>String(H.value)===h.payload.label));var{coordinate:k}=h.payload;if(R==null||h.payload.active===!1||k==null||a==null){t(GE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:U}=k,N=Math.min(D,a.x+a.width),q=Math.min(U,a.y+a.height),X={x:s==="horizontal"?R.coordinate:N,y:s==="horizontal"?q:R.coordinate},V=GE({active:h.payload.active,coordinate:X,dataKey:h.payload.dataKey,index:String(R.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});t(V)}}};return pf.on(KE,u),()=>{pf.off(KE,u)}},[o,t,e,r,n,i,s,a])}function uee(){var r=it($A),e=it(GA),t=vr();P.useEffect(()=>{if(r==null)return Rf;var n=(i,s,a)=>{e!==a&&r===i&&t(eee(s))};return pf.on(yD,n),()=>{pf.off(yD,n)}},[t,e,r])}function cee(){var r=vr();P.useEffect(()=>{r(QJ())},[r]),lee(),uee()}function fee(r,e,t,n,i,s){var a=it(m=>yJ(m,r,e)),o=it(GA),u=it($A),c=it(bj),h=it(ZJ),d=h?.active,g=sm();P.useEffect(()=>{if(!d&&u!=null&&o!=null){var m=GE({active:s,coordinate:t,dataKey:a,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:g,graphicalItemId:void 0});pf.emit(KE,u,m,o)}},[d,t,a,i,n,o,u,c,s,g])}function xD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function SD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(t),!0).forEach(function(n){hee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function hee(r,e,t){return(e=dee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dee(r){var e=pee(r,"string");return typeof e=="symbol"?e:e+""}function pee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gee(r){return r.dataKey}function mee(r,e){return P.isValidElement(r)?P.cloneElement(r,e):typeof r=="function"?P.createElement(r,e):P.createElement(XV,e)}var ED=[],yee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function TD(r){var e,t,n=an(r,yee),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:o,content:u,filterNull:c,isAnimationActive:h,offset:d,payloadUniqBy:g,position:m,reverseDirection:y,useTranslate3d:x,wrapperStyle:b,cursor:E,shared:S,trigger:T,defaultIndex:I,portal:w,axisId:R}=n,_=vr(),C=typeof I=="number"?String(I):I;P.useEffect(()=>{_(hZ({shared:S,trigger:T,axisId:R,active:i,defaultIndex:C}))},[_,S,T,R,i,C]);var k=sm(),D=dU(),U=aZ(S),{activeIndex:N,isActive:q}=(e=it(ae=>xJ(ae,U,T,C)))!==null&&e!==void 0?e:{},X=it(ae=>bJ(ae,U,T,C)),V=it(ae=>PF(ae,U,T,C)),H=it(ae=>vJ(ae,U,T,C)),K=X,Y=HJ(),ee=(t=i??q)!==null&&t!==void 0?t:!1,[Q,$]=bB([K,ee]),F=U==="axis"?V:void 0;fee(U,T,H,F,N,ee);var Z=w??Y;if(Z==null||k==null||U==null)return null;var de=K??ED;ee||(de=ED),c&&de.length&&(de=pB(de.filter(ae=>ae.value!=null&&(ae.hide!==!0||n.includeHidden)),g,gee));var oe=de.length>0,Se=P.createElement(nW,{allowEscapeViewBox:s,animationDuration:a,animationEasing:o,isAnimationActive:h,active:ee,coordinate:H,hasPayload:oe,offset:d,position:m,reverseDirection:y,useTranslate3d:x,viewBox:k,wrapperStyle:b,lastBoundingBox:Q,innerRef:$,hasPortalFromProps:!!w},mee(u,SD(SD({},n),{},{payload:de,label:F,active:ee,activeIndex:N,coordinate:H,accessibilityLayer:D})));return P.createElement(P.Fragment,null,_T.createPortal(Se,Z),ee&&P.createElement(zJ,{cursor:E,tooltipEventType:U,coordinate:H,payload:de,index:N}))}function vee(r,e,t){return(e=bee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bee(r){var e=xee(r,"string");return typeof e=="symbol"?e:e+""}function xee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class See{constructor(e){vee(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function AD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Eee(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(t),!0).forEach(function(n){Tee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):AD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tee(r,e,t){return(e=Aee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Aee(r){var e=wee(r,"string");return typeof e=="symbol"?e:e+""}function wee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var _ee={cacheSize:2e3,enableCache:!0},BF=Eee({},_ee),wD=new See(BF.cacheSize),Iee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_D="recharts_measurement_span";function Oee(r,e){var t=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(r,"|").concat(t,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var ID=(r,e)=>{try{var t=document.getElementById(_D);t||(t=document.createElement("span"),t.setAttribute("id",_D),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,Iee,e),t.textContent="".concat(r);var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},qc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Mf.isSsr)return{width:0,height:0};if(!BF.enableCache)return ID(e,t);var n=Oee(e,t),i=wD.get(n);if(i)return i;var s=ID(e,t);return wD.set(n,s),s},OD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ree=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Lee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,UF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Cee=Object.keys(UF),iu="NaN";function Pee(r,e){return r*UF[e]}class Cn{static parse(e){var t,[,n,i]=(t=Lee.exec(e))!==null&&t!==void 0?t:[];return new Cn(parseFloat(n),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,ns(e)&&(this.unit=""),t!==""&&!Ree.test(t)&&(this.num=NaN,this.unit=""),Cee.includes(t)&&(this.num=Pee(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Cn(NaN,""):new Cn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Cn(NaN,""):new Cn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Cn(NaN,""):new Cn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Cn(NaN,""):new Cn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ns(this.num)}}function jF(r){if(r.includes(iu))return iu;for(var e=r;e.includes("*")||e.includes("/");){var t,[,n,i,s]=(t=OD.exec(e))!==null&&t!==void 0?t:[],a=Cn.parse(n??""),o=Cn.parse(s??""),u=i==="*"?a.multiply(o):a.divide(o);if(u.isNaN())return iu;e=e.replace(OD,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,h,d,g]=(c=RD.exec(e))!==null&&c!==void 0?c:[],m=Cn.parse(h??""),y=Cn.parse(g??""),x=d==="+"?m.add(y):m.subtract(y);if(x.isNaN())return iu;e=e.replace(RD,x.toString())}return e}var LD=/\(([^()]*)\)/;function Dee(r){for(var e=r,t;(t=LD.exec(e))!=null;){var[,n]=t;e=e.replace(LD,jF(n))}return e}function kee(r){var e=r.replace(/\s+/g,"");return e=Dee(e),e=jF(e),e}function Mee(r){try{return kee(r)}catch{return iu}}function gb(r){var e=Mee(r.slice(5,-1));return e===iu?"":e}var Nee=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Bee=["dx","dy","angle","className","breakAll"];function qE(){return qE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qE.apply(null,arguments)}function CD(r,e){if(r==null)return{};var t,n,i=Uee(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Uee(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var FF=/[ \f\n\r\t\v\u2028\u2029]+/,$F=r=>{var{children:e,breakAll:t,style:n}=r;try{var i=[];Nr(e)||(t?i=e.toString().split(""):i=e.toString().split(FF));var s=i.map(o=>({word:o,width:qc(o,n).width})),a=t?0:qc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function jee(r){return r==="start"||r==="middle"||r==="end"||r==="inherit"}var GF=(r,e,t,n)=>r.reduce((i,s)=>{var{word:a,width:o}=s,u=i[i.length-1];if(u&&o!=null&&(e==null||n||u.width+o+t<Number(e)))u.words.push(a),u.width+=o+t;else{var c={words:[a],width:o};i.push(c)}return i},[]),zF=r=>r.reduce((e,t)=>e.width>t.width?e:t),Fee="",PD=(r,e,t,n,i,s,a,o)=>{var u=r.slice(0,e),c=$F({breakAll:t,style:n,children:u+Fee});if(!c)return[!1,[]];var h=GF(c.wordsWithComputedWidth,s,a,o),d=h.length>i||zF(h).width>Number(s);return[d,h]},$ee=(r,e,t,n,i)=>{var{maxLines:s,children:a,style:o,breakAll:u}=r,c=at(s),h=String(a),d=GF(e,n,t,i);if(!c||i)return d;var g=d.length>s||zF(d).width>Number(n);if(!g)return d;for(var m=0,y=h.length-1,x=0,b;m<=y&&x<=h.length-1;){var E=Math.floor((m+y)/2),S=E-1,[T,I]=PD(h,S,u,o,s,n,t,i),[w]=PD(h,E,u,o,s,n,t,i);if(!T&&!w&&(m=E+1),T&&w&&(y=E-1),!T&&w){b=I;break}x++}return b||d},DD=r=>{var e=Nr(r)?[]:r.toString().split(FF);return[{words:e,width:void 0}]},Gee=r=>{var{width:e,scaleToFit:t,children:n,style:i,breakAll:s,maxLines:a}=r;if((e||t)&&!Mf.isSsr){var o,u,c=$F({breakAll:s,children:n,style:i});if(c){var{wordsWithComputedWidth:h,spaceWidth:d}=c;o=h,u=d}else return DD(n);return $ee({breakAll:s,children:n,maxLines:a,style:i},o,u,e,!!t)}return DD(n)},HF="#808080",zee={angle:0,breakAll:!1,capHeight:"0.71em",fill:HF,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},h1=P.forwardRef((r,e)=>{var t=an(r,zee),{x:n,y:i,lineHeight:s,capHeight:a,fill:o,scaleToFit:u,textAnchor:c,verticalAnchor:h}=t,d=CD(t,Nee),g=P.useMemo(()=>Gee({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:u,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,u,d.style,d.width]),{dx:m,dy:y,angle:x,className:b,breakAll:E}=d,S=CD(d,Bee);if(!is(n)||!is(i)||g.length===0)return null;var T=Number(n)+(at(m)?m:0),I=Number(i)+(at(y)?y:0);if(!Br(T)||!Br(I))return null;var w;switch(h){case"start":w=gb("calc(".concat(a,")"));break;case"middle":w=gb("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:w=gb("calc(".concat(g.length-1," * -").concat(s,")"));break}var R=[];if(u){var _=g[0].width,{width:C}=d;R.push("scale(".concat(at(C)&&at(_)?C/_:1,")"))}return x&&R.push("rotate(".concat(x,", ").concat(T,", ").concat(I,")")),R.length&&(S.transform=R.join(" ")),P.createElement("text",qE({},gn(S),{ref:e,x:T,y:I,className:Bt("recharts-text",b),textAnchor:c,fill:o.includes("url")?HF:o}),g.map((k,D)=>{var U=k.words.join(E?"":" ");return P.createElement("tspan",{x:T,dy:D===0?w:s,key:"".concat(U,"-").concat(D)},U)}))});h1.displayName="Text";var Hee=["labelRef"];function Kee(r,e){if(r==null)return{};var t,n,i=qee(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function qee(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function kD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(t),!0).forEach(function(n){Vee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Vee(r,e,t){return(e=Wee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Wee(r){var e=Yee(r,"string");return typeof e=="symbol"?e:e+""}function Yee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Gs(){return Gs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gs.apply(null,arguments)}var KF=P.createContext(null),Xee=r=>{var{x:e,y:t,upperWidth:n,lowerWidth:i,width:s,height:a,children:o}=r,u=P.useMemo(()=>({x:e,y:t,upperWidth:n,lowerWidth:i,width:s,height:a}),[e,t,n,i,s,a]);return P.createElement(KF.Provider,{value:u},o)},qF=()=>{var r=P.useContext(KF),e=sm();return r||iU(e)},Qee=P.createContext(null),Zee=()=>{var r=P.useContext(Qee),e=it(Aj);return r||e},Jee=r=>{var{value:e,formatter:t}=r,n=Nr(r.children)?e:r.children;return typeof t=="function"?t(n):n},d1=r=>r!=null&&typeof r=="function",ete=(r,e)=>{var t=bi(e-r),n=Math.min(Math.abs(e-r),360);return t*n},tte=(r,e,t,n,i)=>{var{offset:s,className:a}=r,{cx:o,cy:u,innerRadius:c,outerRadius:h,startAngle:d,endAngle:g,clockWise:m}=i,y=(c+h)/2,x=ete(d,g),b=x>=0?1:-1,E,S;switch(e){case"insideStart":E=d+b*s,S=m;break;case"insideEnd":E=g-b*s,S=!m;break;case"end":E=g+b*s,S=m;break;default:throw new Error("Unsupported position ".concat(e))}S=x<=0?S:!S;var T=Yr(o,u,y,E),I=Yr(o,u,y,E+(S?1:-1)*359),w="M".concat(T.x,",").concat(T.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(I.x,",").concat(I.y),R=Nr(r.id)?Jc("recharts-radial-line-"):r.id;return P.createElement("text",Gs({},n,{dominantBaseline:"central",className:Bt("recharts-radial-bar-label",a)}),P.createElement("defs",null,P.createElement("path",{id:R,d:w})),P.createElement("textPath",{xlinkHref:"#".concat(R)},t))},rte=(r,e,t)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:u}=r,c=(o+u)/2;if(t==="outside"){var{x:h,y:d}=Yr(n,i,a+e,c);return{x:h,y:d,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+a)/2,{x:m,y}=Yr(n,i,g,c);return{x:m,y,textAnchor:"middle",verticalAnchor:"middle"}},VE=r=>"cx"in r&&at(r.cx),nte=(r,e)=>{var{parentViewBox:t,offset:n,position:i}=r,s;t!=null&&!VE(t)&&(s=t);var{x:a,y:o,upperWidth:u,lowerWidth:c,height:h}=e,d=a,g=a+(u-c)/2,m=(d+g)/2,y=(u+c)/2,x=d+u/2,b=h>=0?1:-1,E=b*n,S=b>0?"end":"start",T=b>0?"start":"end",I=u>=0?1:-1,w=I*n,R=I>0?"end":"start",_=I>0?"start":"end";if(i==="top"){var C={x:d+u/2,y:o-E,textAnchor:"middle",verticalAnchor:S};return cr(cr({},C),s?{height:Math.max(o-s.y,0),width:u}:{})}if(i==="bottom"){var k={x:g+c/2,y:o+h+E,textAnchor:"middle",verticalAnchor:T};return cr(cr({},k),s?{height:Math.max(s.y+s.height-(o+h),0),width:c}:{})}if(i==="left"){var D={x:m-w,y:o+h/2,textAnchor:R,verticalAnchor:"middle"};return cr(cr({},D),s?{width:Math.max(D.x-s.x,0),height:h}:{})}if(i==="right"){var U={x:m+y+w,y:o+h/2,textAnchor:_,verticalAnchor:"middle"};return cr(cr({},U),s?{width:Math.max(s.x+s.width-U.x,0),height:h}:{})}var N=s?{width:y,height:h}:{};return i==="insideLeft"?cr({x:m+w,y:o+h/2,textAnchor:_,verticalAnchor:"middle"},N):i==="insideRight"?cr({x:m+y-w,y:o+h/2,textAnchor:R,verticalAnchor:"middle"},N):i==="insideTop"?cr({x:d+u/2,y:o+E,textAnchor:"middle",verticalAnchor:T},N):i==="insideBottom"?cr({x:g+c/2,y:o+h-E,textAnchor:"middle",verticalAnchor:S},N):i==="insideTopLeft"?cr({x:d+w,y:o+E,textAnchor:_,verticalAnchor:T},N):i==="insideTopRight"?cr({x:d+u-w,y:o+E,textAnchor:R,verticalAnchor:T},N):i==="insideBottomLeft"?cr({x:g+w,y:o+h-E,textAnchor:_,verticalAnchor:S},N):i==="insideBottomRight"?cr({x:g+c-w,y:o+h-E,textAnchor:R,verticalAnchor:S},N):i&&typeof i=="object"&&(at(i.x)||Qs(i.x))&&(at(i.y)||Qs(i.y))?cr({x:a+eo(i.x,y),y:o+eo(i.y,h),textAnchor:"end",verticalAnchor:"end"},N):cr({x,y:o+h/2,textAnchor:"middle",verticalAnchor:"middle"},N)},ite={angle:0,offset:5,zIndex:dn.label,position:"middle",textBreakAll:!1};function qa(r){var e=an(r,ite),{viewBox:t,position:n,value:i,children:s,content:a,className:o="",textBreakAll:u,labelRef:c}=e,h=Zee(),d=qF(),g=n==="center"?d:h??d,m,y,x;if(t==null?m=g:VE(t)?m=t:m=iU(t),!m||Nr(i)&&Nr(s)&&!P.isValidElement(a)&&typeof a!="function")return null;var b=cr(cr({},e),{},{viewBox:m});if(P.isValidElement(a)){var{labelRef:E}=b,S=Kee(b,Hee);return P.cloneElement(a,S)}if(typeof a=="function"){if(y=P.createElement(a,b),P.isValidElement(y))return y}else y=Jee(e);var T=gn(e);if(VE(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return tte(e,n,y,T,m);x=rte(m,e.offset,e.position)}else x=nte(e,m);return P.createElement(pa,{zIndex:e.zIndex},P.createElement(h1,Gs({ref:c,className:Bt("recharts-label",o)},T,x,{textAnchor:jee(T.textAnchor)?T.textAnchor:x.textAnchor,breakAll:u}),y))}qa.displayName="Label";var ste=(r,e,t)=>{if(!r)return null;var n={viewBox:e,labelRef:t};return r===!0?P.createElement(qa,Gs({key:"label-implicit"},n)):is(r)?P.createElement(qa,Gs({key:"label-implicit",value:r},n)):P.isValidElement(r)?r.type===qa?P.cloneElement(r,cr({key:"label-implicit"},n)):P.createElement(qa,Gs({key:"label-implicit",content:r},n)):d1(r)?P.createElement(qa,Gs({key:"label-implicit",content:r},n)):r&&typeof r=="object"?P.createElement(qa,Gs({},r,{key:"label-implicit"},n)):null};function ate(r){var{label:e,labelRef:t}=r,n=qF();return ste(e,n,t)||null}var mb={},yb={},MD;function ote(){return MD||(MD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}r.last=e})(yb)),yb}var vb={},ND;function lte(){return ND||(ND=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}r.toArray=e})(vb)),vb}var BD;function ute(){return BD||(BD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=ote(),t=lte(),n=QT();function i(s){if(n.isArrayLike(s))return e.last(t.toArray(s))}r.last=i})(mb)),mb}var bb,UD;function cte(){return UD||(UD=1,bb=ute().last),bb}var fte=cte();const hte=na(fte);var dte=["valueAccessor"],pte=["dataKey","clockWise","id","textBreakAll","zIndex"];function pg(){return pg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},pg.apply(null,arguments)}function jD(r,e){if(r==null)return{};var t,n,i=gte(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function gte(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var mte=r=>Array.isArray(r.value)?hte(r.value):r.value,VF=P.createContext(void 0),yte=VF.Provider,WF=P.createContext(void 0);WF.Provider;function vte(){return P.useContext(VF)}function bte(){return P.useContext(WF)}function bp(r){var{valueAccessor:e=mte}=r,t=jD(r,dte),{dataKey:n,clockWise:i,id:s,textBreakAll:a,zIndex:o}=t,u=jD(t,pte),c=vte(),h=bte(),d=c||h;return!d||!d.length?null:P.createElement(pa,{zIndex:o??dn.label},P.createElement(Ja,{className:"recharts-label-list"},d.map((g,m)=>{var y,x=Nr(n)?e(g,m):sn(g&&g.payload,n),b=Nr(s)?{}:{id:"".concat(s,"-").concat(m)};return P.createElement(qa,pg({key:"label-".concat(m)},gn(g),u,b,{fill:(y=t.fill)!==null&&y!==void 0?y:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:a,viewBox:g.viewBox,index:m,zIndex:0}))})))}bp.displayName="LabelList";function xte(r){var{label:e}=r;return e?e===!0?P.createElement(bp,{key:"labelList-implicit"}):P.isValidElement(e)||d1(e)?P.createElement(bp,{key:"labelList-implicit",content:e}):typeof e=="object"?P.createElement(bp,pg({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function WE(){return WE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},WE.apply(null,arguments)}var YF=r=>{var{cx:e,cy:t,r:n,className:i}=r,s=Bt("recharts-dot",i);return at(e)&&at(t)&&at(n)?P.createElement("circle",WE({},rs(r),XT(r),{className:s,cx:e,cy:t,r:n})):null},Ste={radiusAxis:{},angleAxis:{}},XF=Bn({name:"polarAxis",initialState:Ste,reducers:{addRadiusAxis(r,e){r.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(r,e){delete r.radiusAxis[e.payload.id]},addAngleAxis(r,e){r.angleAxis[e.payload.id]=e.payload},removeAngleAxis(r,e){delete r.angleAxis[e.payload.id]}}}),{addRadiusAxis:Wce,removeRadiusAxis:Yce,addAngleAxis:Xce,removeAngleAxis:Qce}=XF.actions,Ete=XF.reducer,QF=r=>r&&typeof r=="object"&&"clipDot"in r?!!r.clipDot:!0,xb={},FD;function Tte(){return FD||(FD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}r.isPlainObject=e})(xb)),xb}var Sb,$D;function Ate(){return $D||($D=1,Sb=Tte().isPlainObject),Sb}var wte=Ate();const _te=na(wte);function GD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(t),!0).forEach(function(n){Ite(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):GD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ite(r,e,t){return(e=Ote(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ote(r){var e=Rte(r,"string");return typeof e=="symbol"?e:e+""}function Rte(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gg(){return gg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gg.apply(null,arguments)}var HD=(r,e,t,n,i)=>{var s=t-n,a;return a="M ".concat(r,",").concat(e),a+="L ".concat(r+t,",").concat(e),a+="L ".concat(r+t-s/2,",").concat(e+i),a+="L ".concat(r+t-s/2-n,",").concat(e+i),a+="L ".concat(r,",").concat(e," Z"),a},Lte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Cte=r=>{var e=an(r,Lte),{x:t,y:n,upperWidth:i,lowerWidth:s,height:a,className:o}=e,{animationEasing:u,animationDuration:c,animationBegin:h,isUpdateAnimationActive:d}=e,g=P.useRef(null),[m,y]=P.useState(-1),x=P.useRef(i),b=P.useRef(s),E=P.useRef(a),S=P.useRef(t),T=P.useRef(n),I=dA(r,"trapezoid-");if(P.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var X=g.current.getTotalLength();X&&y(X)}catch{}},[]),t!==+t||n!==+n||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var w=Bt("recharts-trapezoid",o);if(!d)return P.createElement("g",null,P.createElement("path",gg({},gn(e),{className:w,d:HD(t,n,i,s,a)})));var R=x.current,_=b.current,C=E.current,k=S.current,D=T.current,U="0px ".concat(m===-1?1:m,"px"),N="".concat(m,"px 0px"),q=gU(["strokeDasharray"],c,u);return P.createElement(hA,{animationId:I,key:I,canBegin:m>0,duration:c,easing:u,isActive:d,begin:h},X=>{var V=Pn(R,i,X),H=Pn(_,s,X),K=Pn(C,a,X),Y=Pn(k,t,X),ee=Pn(D,n,X);g.current&&(x.current=V,b.current=H,E.current=K,S.current=Y,T.current=ee);var Q=X>0?{transition:q,strokeDasharray:N}:{strokeDasharray:U};return P.createElement("path",gg({},gn(e),{className:w,d:HD(Y,ee,V,H,K),ref:g,style:zD(zD({},Q),e.style)}))})},Pte=["option","shapeType","propTransformer","activeClassName"];function Dte(r,e){if(r==null)return{};var t,n,i=kte(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function kte(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function KD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(t),!0).forEach(function(n){Mte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Mte(r,e,t){return(e=Nte(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Nte(r){var e=Bte(r,"string");return typeof e=="symbol"?e:e+""}function Bte(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ute(r,e){return mg(mg({},e),r)}function jte(r,e){return r==="symbols"}function qD(r){var{shapeType:e,elementProps:t}=r;switch(e){case"rectangle":return P.createElement(bU,t);case"trapezoid":return P.createElement(Cte,t);case"sector":return P.createElement(EU,t);case"symbols":if(jte(e))return P.createElement(YT,t);break;case"curve":return P.createElement(pU,t);default:return null}}function Fte(r){return P.isValidElement(r)?r.props:r}function $te(r){var{option:e,shapeType:t,propTransformer:n=Ute,activeClassName:i="recharts-active-shape"}=r,s=Dte(r,Pte),a;if(P.isValidElement(e))a=P.cloneElement(e,mg(mg({},s),Fte(e)));else if(typeof e=="function")a=e(s,s.index);else if(_te(e)&&typeof e!="boolean"){var o=n(e,s);a=P.createElement(qD,{shapeType:t,elementProps:o})}else{var u=s;a=P.createElement(qD,{shapeType:t,elementProps:u})}return s.isActive?P.createElement(Ja,{className:i},a):a}function Gte(r){var{tooltipEntrySettings:e}=r,t=vr(),n=Un(),i=P.useRef(null);return P.useLayoutEffect(()=>{n||(i.current===null?t(uZ(e)):i.current!==e&&t(cZ({prev:i.current,next:e})),i.current=e)},[e,t,n]),P.useLayoutEffect(()=>()=>{i.current&&(t(fZ(i.current)),i.current=null)},[t]),null}function zte(r){var{legendPayload:e}=r,t=vr(),n=Un(),i=P.useRef(null);return P.useLayoutEffect(()=>{n||(i.current===null?t(RV(e)):i.current!==e&&t(LV({prev:i.current,next:e})),i.current=e)},[t,n,e]),P.useLayoutEffect(()=>()=>{i.current&&(t(CV(i.current)),i.current=null)},[t]),null}var Eb,Hte=()=>{var[r]=P.useState(()=>Jc("uid-"));return r},Kte=(Eb=g6.useId)!==null&&Eb!==void 0?Eb:Hte;function ZF(r,e){var t=Kte();return e||(r?"".concat(r,"-").concat(t):t)}var qte=P.createContext(void 0),Vte=r=>{var{id:e,type:t,children:n}=r,i=ZF("recharts-".concat(t),e);return P.createElement(qte.Provider,{value:i},n(i))},Wte={cartesianItems:[],polarItems:[]},JF=Bn({name:"graphicalItems",initialState:Wte,reducers:{addCartesianGraphicalItem:{reducer(r,e){r.cartesianItems.push(e.payload)},prepare:Xt()},replaceCartesianGraphicalItem:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).cartesianItems.indexOf(t);i>-1&&(r.cartesianItems[i]=n)},prepare:Xt()},removeCartesianGraphicalItem:{reducer(r,e){var t=ki(r).cartesianItems.indexOf(e.payload);t>-1&&r.cartesianItems.splice(t,1)},prepare:Xt()},addPolarGraphicalItem:{reducer(r,e){r.polarItems.push(e.payload)},prepare:Xt()},removePolarGraphicalItem:{reducer(r,e){var t=ki(r).polarItems.indexOf(e.payload);t>-1&&r.polarItems.splice(t,1)},prepare:Xt()}}}),{addCartesianGraphicalItem:Yte,replaceCartesianGraphicalItem:Xte,removeCartesianGraphicalItem:Qte,addPolarGraphicalItem:Zce,removePolarGraphicalItem:Jce}=JF.actions,Zte=JF.reducer,Jte=r=>{var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(Yte(r)):t.current!==r&&e(Xte({prev:t.current,next:r})),t.current=r},[e,r]),P.useLayoutEffect(()=>()=>{t.current&&(e(Qte(t.current)),t.current=null)},[e]),null},ere=P.memo(Jte),tre=["points"];function VD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(t),!0).forEach(function(n){rre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):VD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function rre(r,e,t){return(e=nre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nre(r){var e=ire(r,"string");return typeof e=="symbol"?e:e+""}function ire(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function yg(){return yg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yg.apply(null,arguments)}function sre(r,e){if(r==null)return{};var t,n,i=are(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function are(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function ore(r){var{option:e,dotProps:t,className:n}=r;if(P.isValidElement(e))return P.cloneElement(e,t);if(typeof e=="function")return e(t);var i=Bt(n,typeof e!="boolean"?e.className:""),s=t??{},{points:a}=s,o=sre(s,tre);return P.createElement(YF,yg({},o,{className:i}))}function lre(r,e){return r==null?!1:e?!0:r.length===1}function ure(r){var{points:e,dot:t,className:n,dotClassName:i,dataKey:s,baseProps:a,needClip:o,clipPathId:u,zIndex:c=dn.scatter}=r;if(!lre(e,t))return null;var h=QF(t),d=dH(t),g=e.map((y,x)=>{var b,E,S=Tb(Tb(Tb({r:3},a),d),{},{index:x,cx:(b=y.x)!==null&&b!==void 0?b:void 0,cy:(E=y.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:y.value,payload:y.payload,points:e});return P.createElement(ore,{key:"dot-".concat(x),option:t,dotProps:S,className:i})}),m={};return o&&u!=null&&(m.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),P.createElement(pa,{zIndex:c},P.createElement(Ja,yg({className:n},m),g))}function WD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function YD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(t),!0).forEach(function(n){cre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cre(r,e,t){return(e=fre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fre(r){var e=hre(r,"string");return typeof e=="symbol"?e:e+""}function hre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var dre={xAxis:{},yAxis:{},zAxis:{}},e3=Bn({name:"cartesianAxis",initialState:dre,reducers:{addXAxis:{reducer(r,e){r.xAxis[e.payload.id]=e.payload},prepare:Xt()},replaceXAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.xAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.xAxis[t.id],r.xAxis[n.id]=n)},prepare:Xt()},removeXAxis:{reducer(r,e){delete r.xAxis[e.payload.id]},prepare:Xt()},addYAxis:{reducer(r,e){r.yAxis[e.payload.id]=e.payload},prepare:Xt()},replaceYAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.yAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.yAxis[t.id],r.yAxis[n.id]=n)},prepare:Xt()},removeYAxis:{reducer(r,e){delete r.yAxis[e.payload.id]},prepare:Xt()},addZAxis:{reducer(r,e){r.zAxis[e.payload.id]=e.payload},prepare:Xt()},replaceZAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.zAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.zAxis[t.id],r.zAxis[n.id]=n)},prepare:Xt()},removeZAxis:{reducer(r,e){delete r.zAxis[e.payload.id]},prepare:Xt()},updateYAxisWidth(r,e){var{id:t,width:n}=e.payload,i=r.yAxis[t];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var a=[...s,n].slice(-3);r.yAxis[t]=YD(YD({},r.yAxis[t]),{},{width:n,widthHistory:a})}}}}),{addXAxis:pre,replaceXAxis:gre,removeXAxis:mre,addYAxis:yre,replaceYAxis:vre,removeYAxis:bre,addZAxis:efe,replaceZAxis:tfe,removeZAxis:rfe,updateYAxisWidth:xre}=e3.actions,Sre=e3.reducer,Ere=ke([Xr],r=>({top:r.top,bottom:r.bottom,left:r.left,right:r.right})),Tre=ke([Ere,la,ua],(r,e,t)=>{if(!(!r||e==null||t==null))return{x:r.left,y:r.top,width:Math.max(0,e-r.left-r.right),height:Math.max(0,t-r.top-r.bottom)}}),p1=()=>it(Tre),Are=()=>it(nJ);function XD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ab(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(t),!0).forEach(function(n){wre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):XD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wre(r,e,t){return(e=_re(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _re(r){var e=Ire(r,"string");return typeof e=="symbol"?e:e+""}function Ire(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ore=r=>{var{point:e,childIndex:t,mainColor:n,activeDot:i,dataKey:s,clipPath:a}=r;if(i===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=Ab(Ab(Ab({},o),$g(i)),XT(i)),c;return P.isValidElement(i)?c=P.cloneElement(i,u):typeof i=="function"?c=i(u):c=P.createElement(YF,u),P.createElement(Ja,{className:"recharts-active-dot",clipPath:a},c)};function Rre(r){var{points:e,mainColor:t,activeDot:n,itemDataKey:i,clipPath:s,zIndex:a=dn.activeDot}=r,o=it(df),u=Are();if(e==null||u==null)return null;var c=e.find(h=>u.includes(h.payload));return Nr(c)?null:P.createElement(pa,{zIndex:a},P.createElement(Ore,{point:c,childIndex:Number(o),mainColor:t,dataKey:i,activeDot:n,clipPath:s}))}var Lre={},t3=Bn({name:"errorBars",initialState:Lre,reducers:{addErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]||(r[t]=[]),r[t].push(n)},replaceErrorBar:(r,e)=>{var{itemId:t,prev:n,next:i}=e.payload;r[t]&&(r[t]=r[t].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]&&(r[t]=r[t].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:nfe,replaceErrorBar:ife,removeErrorBar:sfe}=t3.actions,Cre=t3.reducer,Pre=["children"];function Dre(r,e){if(r==null)return{};var t,n,i=kre(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function kre(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Mre={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Nre=P.createContext(Mre);function Bre(r){var{children:e}=r,t=Dre(r,Pre);return P.createElement(Nre.Provider,{value:t},e)}function r3(r,e){var t,n,i=it(c=>fa(c,r)),s=it(c=>ha(c,e)),a=(t=i?.allowDataOverflow)!==null&&t!==void 0?t:Dr.allowDataOverflow,o=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:kr.allowDataOverflow,u=a||o;return{needClip:u,needClipX:a,needClipY:o}}function Ure(r){var{xAxisId:e,yAxisId:t,clipPathId:n}=r,i=p1(),{needClipX:s,needClipY:a,needClip:o}=r3(e,t);if(!o||!i)return null;var{x:u,y:c,width:h,height:d}=i;return P.createElement("clipPath",{id:"clipPath-".concat(n)},P.createElement("rect",{x:s?u:u-h/2,y:a?c:c-d/2,width:s?h:h*2,height:a?d:d*2}))}var wb={exports:{}},_b={};var QD;function jre(){if(QD)return _b;QD=1;var r=Tu();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,a=r.useMemo,o=r.useDebugValue;return _b.useSyncExternalStoreWithSelector=function(u,c,h,d,g){var m=i(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function b(w){if(!E){if(E=!0,S=w,w=d(w),g!==void 0&&y.hasValue){var R=y.value;if(g(R,w))return T=R}return T=w}if(R=T,t(S,w))return R;var _=d(w);return g!==void 0&&g(R,_)?(S=w,R):(S=w,T=_)}var E=!1,S,T,I=h===void 0?null:h;return[function(){return b(c())},I===null?void 0:function(){return b(I())}]},[c,h,d,g]);var x=n(u,m[0],m[1]);return s(function(){y.hasValue=!0,y.value=x},[x]),o(x),x},_b}var ZD;function Fre(){return ZD||(ZD=1,wb.exports=jre()),wb.exports}Fre();function $re(r){r()}function Gre(){let r=null,e=null;return{clear(){r=null,e=null},notify(){$re(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var JD={notify(){},get:()=>[]};function zre(r,e){let t,n=JD,i=0,s=!1;function a(x){h();const b=n.subscribe(x);let E=!1;return()=>{E||(E=!0,b(),d())}}function o(){n.notify()}function u(){y.onStateChange&&y.onStateChange()}function c(){return s}function h(){i++,t||(t=r.subscribe(u),n=Gre())}function d(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=JD)}function g(){s||(s=!0,h())}function m(){s&&(s=!1,d())}const y={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:u,isSubscribed:c,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>n};return y}var Hre=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kre=Hre(),qre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Vre=qre(),Wre=()=>Kre||Vre?P.useLayoutEffect:P.useEffect,Yre=Wre();function ek(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function Xre(r,e){if(ek(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!ek(r[t[i]],e[t[i]]))return!1;return!0}var Qre=Symbol.for("react-redux-context"),Zre=typeof globalThis<"u"?globalThis:{};function Jre(){if(!P.createContext)return{};const r=Zre[Qre]??=new Map;let e=r.get(P.createContext);return e||(e=P.createContext(null),r.set(P.createContext,e)),e}var ene=Jre();function tne(r){const{children:e,context:t,serverState:n,store:i}=r,s=P.useMemo(()=>{const u=zre(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),a=P.useMemo(()=>i.getState(),[i]);Yre(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const o=t||ene;return P.createElement(o.Provider,{value:s},e)}var rne=tne,nne=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ine(r,e){return r==null&&e==null?!0:typeof r=="number"&&typeof e=="number"?r===e||r!==r&&e!==e:r===e}function g1(r,e){var t=new Set([...Object.keys(r),...Object.keys(e)]);for(var n of t)if(nne.has(n)){if(r[n]==null&&e[n]==null)continue;if(!Xre(r[n],e[n]))return!1}else if(!ine(r[n],e[n]))return!1;return!0}var sne=r=>{var{chartData:e}=r,t=vr(),n=Un();return P.useEffect(()=>n?()=>{}:(t(vD(e)),()=>{t(vD(void 0))}),[e,t,n]),null},tk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},n3=Bn({name:"brush",initialState:tk,reducers:{setBrushSettings(r,e){return e.payload==null?tk:e.payload}}}),{setBrushSettings:afe}=n3.actions,ane=n3.reducer;function one(r,e,t){return(e=lne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lne(r){var e=une(r,"string");return typeof e=="symbol"?e:e+""}function une(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class m1{static create(e){return new m1(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}one(m1,"EPS",1e-4);function cne(r){return(r%180+180)%180}var fne=function(e){var{width:t,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cne(i),a=s*Math.PI/180,o=Math.atan(n/t),u=a>o&&a<Math.PI-o?n/Math.sin(a):t/Math.cos(a);return Math.abs(u)},hne={dots:[],areas:[],lines:[]},i3=Bn({name:"referenceElements",initialState:hne,reducers:{addDot:(r,e)=>{r.dots.push(e.payload)},removeDot:(r,e)=>{var t=ki(r).dots.findIndex(n=>n===e.payload);t!==-1&&r.dots.splice(t,1)},addArea:(r,e)=>{r.areas.push(e.payload)},removeArea:(r,e)=>{var t=ki(r).areas.findIndex(n=>n===e.payload);t!==-1&&r.areas.splice(t,1)},addLine:(r,e)=>{r.lines.push(e.payload)},removeLine:(r,e)=>{var t=ki(r).lines.findIndex(n=>n===e.payload);t!==-1&&r.lines.splice(t,1)}}}),{addDot:ofe,removeDot:lfe,addArea:ufe,removeArea:cfe,addLine:ffe,removeLine:hfe}=i3.actions,dne=i3.reducer,pne=P.createContext(void 0),gne=r=>{var{children:e}=r,[t]=P.useState("".concat(Jc("recharts"),"-clip")),n=p1();if(n==null)return null;var{x:i,y:s,width:a,height:o}=n;return P.createElement(pne.Provider,{value:t},P.createElement("defs",null,P.createElement("clipPath",{id:t},P.createElement("rect",{x:i,y:s,height:o,width:a}))),e)};function s3(r,e){if(e<1)return[];if(e===1)return r;for(var t=[],n=0;n<r.length;n+=e)t.push(r[n]);return t}function mne(r,e,t){var n={width:r.width+e.width,height:r.height+e.height};return fne(n,t)}function yne(r,e,t){var n=t==="width",{x:i,y:s,width:a,height:o}=r;return e===1?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function vg(r,e,t,n,i){if(r*e<r*n||r*e>r*i)return!1;var s=t();return r*(e-r*s/2-n)>=0&&r*(e+r*s/2-i)<=0}function vne(r,e){return s3(r,e+1)}function bne(r,e,t,n,i){for(var s=(n||[]).slice(),{start:a,end:o}=e,u=0,c=1,h=a,d=function(){var y=n?.[u];if(y===void 0)return{v:s3(n,c)};var x=u,b,E=()=>(b===void 0&&(b=t(y,x)),b),S=y.coordinate,T=u===0||vg(r,S,E,h,o);T||(u=0,h=a,c+=1),T&&(h=S+r*(E()/2+i),u+=c)},g;c<=s.length;)if(g=d(),g)return g.v;return[]}function rk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(t),!0).forEach(function(n){xne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function xne(r,e,t){return(e=Sne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Sne(r){var e=Ene(r,"string");return typeof e=="symbol"?e:e+""}function Ene(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Tne(r,e,t,n,i){for(var s=(n||[]).slice(),a=s.length,{start:o}=e,{end:u}=e,c=function(g){var m=s[g],y,x=()=>(y===void 0&&(y=t(m,g)),y);if(g===a-1){var b=r*(m.coordinate+r*x()/2-u);s[g]=m=rn(rn({},m),{},{tickCoord:b>0?m.coordinate-b*r:m.coordinate})}else s[g]=m=rn(rn({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var E=vg(r,m.tickCoord,x,o,u);E&&(u=m.tickCoord-r*(x()/2+i),s[g]=rn(rn({},m),{},{isShow:!0}))}},h=a-1;h>=0;h--)c(h);return s}function Ane(r,e,t,n,i,s){var a=(n||[]).slice(),o=a.length,{start:u,end:c}=e;if(s){var h=n[o-1],d=t(h,o-1),g=r*(h.coordinate+r*d/2-c);if(a[o-1]=h=rn(rn({},h),{},{tickCoord:g>0?h.coordinate-g*r:h.coordinate}),h.tickCoord!=null){var m=vg(r,h.tickCoord,()=>d,u,c);m&&(c=h.tickCoord-r*(d/2+i),a[o-1]=rn(rn({},h),{},{isShow:!0}))}}for(var y=s?o-1:o,x=function(S){var T=a[S],I,w=()=>(I===void 0&&(I=t(T,S)),I);if(S===0){var R=r*(T.coordinate-r*w()/2-u);a[S]=T=rn(rn({},T),{},{tickCoord:R<0?T.coordinate-R*r:T.coordinate})}else a[S]=T=rn(rn({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var _=vg(r,T.tickCoord,w,u,c);_&&(u=T.tickCoord+r*(w()/2+i),a[S]=rn(rn({},T),{},{isShow:!0}))}},b=0;b<y;b++)x(b);return a}function y1(r,e,t){var{tick:n,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:u,tickFormatter:c,unit:h,angle:d}=r;if(!i||!i.length||!n)return[];if(at(u)||Mf.isSsr){var g;return(g=vne(i,at(u)?u:0))!==null&&g!==void 0?g:[]}var m=[],y=o==="top"||o==="bottom"?"width":"height",x=h&&y==="width"?qc(h,{fontSize:e,letterSpacing:t}):{width:0,height:0},b=(T,I)=>{var w=typeof c=="function"?c(T.value,I):T.value;return y==="width"?mne(qc(w,{fontSize:e,letterSpacing:t}),x,d):qc(w,{fontSize:e,letterSpacing:t})[y]},E=i.length>=2?bi(i[1].coordinate-i[0].coordinate):1,S=yne(s,E,y);return u==="equidistantPreserveStart"?bne(E,S,b,i,a):(u==="preserveStart"||u==="preserveStartEnd"?m=Ane(E,S,b,i,a,u==="preserveStartEnd"):m=Tne(E,S,b,i,a),m.filter(T=>T.isShow))}var wne=r=>{var{ticks:e,label:t,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=r,a=0;if(e){Array.from(e).forEach(h=>{if(h){var d=h.getBoundingClientRect();d.width>a&&(a=d.width)}});var o=t?t.getBoundingClientRect().width:0,u=i+s,c=a+u+o+(t?n:0);return Math.round(c)}return 0},_ne=["axisLine","width","height","className","hide","ticks","axisType"];function Ine(r,e){if(r==null)return{};var t,n,i=One(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function One(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Qo(){return Qo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qo.apply(null,arguments)}function nk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(t),!0).forEach(function(n){Rne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):nk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Rne(r,e,t){return(e=Lne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lne(r){var e=Cne(r,"string");return typeof e=="symbol"?e:e+""}function Cne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Vs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:dn.axis};function Pne(r){var{x:e,y:t,width:n,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:u}=r;if(!o)return null;var c=mr(mr(mr({},u),rs(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!a||s==="bottom"&&a);c=mr(mr({},c),{},{x1:e,y1:t+h*i,x2:e+n,y2:t+h*i})}else{var d=+(s==="left"&&!a||s==="right"&&a);c=mr(mr({},c),{},{x1:e+d*n,y1:t,x2:e+d*n,y2:t+i})}return P.createElement("line",Qo({},c,{className:Bt("recharts-cartesian-axis-line",Kg(o,"className"))}))}function Dne(r,e,t,n,i,s,a,o,u){var c,h,d,g,m,y,x=o?-1:1,b=r.tickSize||a,E=at(r.tickCoord)?r.tickCoord:r.coordinate;switch(s){case"top":c=h=r.coordinate,g=t+ +!o*i,d=g-x*b,y=d-x*u,m=E;break;case"left":d=g=r.coordinate,h=e+ +!o*n,c=h-x*b,m=c-x*u,y=E;break;case"right":d=g=r.coordinate,h=e+ +o*n,c=h+x*b,m=c+x*u,y=E;break;default:c=h=r.coordinate,g=t+ +o*i,d=g+x*b,y=d+x*u,m=E;break}return{line:{x1:c,y1:d,x2:h,y2:g},tick:{x:m,y}}}function kne(r,e){switch(r){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Mne(r,e){switch(r){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Nne(r){var{option:e,tickProps:t,value:n}=r,i,s=Bt(t.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(e))i=P.cloneElement(e,mr(mr({},t),{},{className:s}));else if(typeof e=="function")i=e(mr(mr({},t),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Bt(a,e?.className)),i=P.createElement(h1,Qo({},t,{className:a}),n)}return i}var Bne=P.forwardRef((r,e)=>{var{ticks:t=[],tick:n,tickLine:i,stroke:s,tickFormatter:a,unit:o,padding:u,tickTextProps:c,orientation:h,mirror:d,x:g,y:m,width:y,height:x,tickSize:b,tickMargin:E,fontSize:S,letterSpacing:T,getTicksConfig:I,events:w,axisType:R}=r,_=y1(mr(mr({},I),{},{ticks:t}),S,T),C=kne(h,d),k=Mne(h,d),D=rs(I),U=$g(n),N={};typeof i=="object"&&(N=i);var q=mr(mr({},D),{},{fill:"none"},N),X=_.map(K=>mr({entry:K},Dne(K,g,m,y,x,h,b,d,E))),V=X.map(K=>{var{entry:Y,line:ee}=K;return P.createElement(Ja,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},i&&P.createElement("line",Qo({},q,ee,{className:Bt("recharts-cartesian-axis-tick-line",Kg(i,"className"))})))}),H=X.map((K,Y)=>{var{entry:ee,tick:Q}=K,$=mr(mr(mr(mr({textAnchor:C,verticalAnchor:k},D),{},{stroke:"none",fill:s},U),Q),{},{index:Y,payload:ee,visibleTicksCount:_.length,tickFormatter:a,padding:u},c);return P.createElement(Ja,Qo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},iB(w,ee,Y)),n&&P.createElement(Nne,{option:n,tickProps:$,value:"".concat(typeof a=="function"?a(ee.value,Y):ee.value).concat(o||"")}))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},H.length>0&&P.createElement(pa,{zIndex:dn.label},P.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:e},H)),V.length>0&&P.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},V))}),Une=P.forwardRef((r,e)=>{var{axisLine:t,width:n,height:i,className:s,hide:a,ticks:o,axisType:u}=r,c=Ine(r,_ne),[h,d]=P.useState(""),[g,m]=P.useState(""),y=P.useRef(null);P.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return wne({ticks:y.current,label:(b=r.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:r.tickSize,tickMargin:r.tickMargin})}}));var x=P.useCallback(b=>{if(b){var E=b.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=E;var S=E[0];if(S){var T=window.getComputedStyle(S),I=T.fontSize,w=T.letterSpacing;(I!==h||w!==g)&&(d(I),m(w))}}},[h,g]);return a||n!=null&&n<=0||i!=null&&i<=0?null:P.createElement(pa,{zIndex:r.zIndex},P.createElement(Ja,{className:Bt("recharts-cartesian-axis",s)},P.createElement(Pne,{x:r.x,y:r.y,width:n,height:i,orientation:r.orientation,mirror:r.mirror,axisLine:t,otherSvgProps:rs(r)}),P.createElement(Bne,{ref:x,axisType:u,events:c,fontSize:h,getTicksConfig:r,height:r.height,letterSpacing:g,mirror:r.mirror,orientation:r.orientation,padding:r.padding,stroke:r.stroke,tick:r.tick,tickFormatter:r.tickFormatter,tickLine:r.tickLine,tickMargin:r.tickMargin,tickSize:r.tickSize,tickTextProps:r.tickTextProps,ticks:o,unit:r.unit,width:r.width,x:r.x,y:r.y}),P.createElement(Xee,{x:r.x,y:r.y,width:r.width,height:r.height,lowerWidth:r.width,upperWidth:r.width},P.createElement(ate,{label:r.label,labelRef:r.labelRef}),r.children)))}),v1=P.forwardRef((r,e)=>{var t=an(r,Vs);return P.createElement(Une,Qo({},t,{ref:e}))});v1.displayName="CartesianAxis";var jne=["x1","y1","x2","y2","key"],Fne=["offset"],$ne=["xAxisId","yAxisId"],Gne=["xAxisId","yAxisId"];function ik(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(t),!0).forEach(function(n){zne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ik(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zne(r,e,t){return(e=Hne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Hne(r){var e=Kne(r,"string");return typeof e=="symbol"?e:e+""}function Kne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Fo(){return Fo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fo.apply(null,arguments)}function bg(r,e){if(r==null)return{};var t,n,i=qne(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function qne(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Vne=r=>{var{fill:e}=r;if(!e||e==="none")return null;var{fillOpacity:t,x:n,y:i,width:s,height:a,ry:o}=r;return P.createElement("rect",{x:n,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function a3(r){var{option:e,lineItemProps:t}=r,n;if(P.isValidElement(e))n=P.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var i,{x1:s,y1:a,x2:o,y2:u,key:c}=t,h=bg(t,jne),d=(i=rs(h))!==null&&i!==void 0?i:{},{offset:g}=d,m=bg(d,Fne);n=P.createElement("line",Fo({},m,{x1:s,y1:a,x2:o,y2:u,fill:"none",key:c}))}return n}function Wne(r){var{x:e,width:t,horizontal:n=!0,horizontalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=r,o=bg(r,$ne),u=i.map((c,h)=>{var d=nn(nn({},o),{},{x1:e,y1:c,x2:e+t,y2:c,key:"line-".concat(h),index:h});return P.createElement(a3,{key:"line-".concat(h),option:n,lineItemProps:d})});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Yne(r){var{y:e,height:t,vertical:n=!0,verticalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=r,o=bg(r,Gne),u=i.map((c,h)=>{var d=nn(nn({},o),{},{x1:c,y1:e,x2:c,y2:e+t,key:"line-".concat(h),index:h});return P.createElement(a3,{option:n,lineItemProps:d,key:"line-".concat(h)})});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Xne(r){var{horizontalFill:e,fillOpacity:t,x:n,y:i,width:s,height:a,horizontalPoints:o,horizontal:u=!0}=r;if(!u||!e||!e.length||o==null)return null;var c=o.map(d=>Math.round(d+i-i)).sort((d,g)=>d-g);i!==c[0]&&c.unshift(0);var h=c.map((d,g)=>{var m=!c[g+1],y=m?i+a-d:c[g+1]-d;if(y<=0)return null;var x=g%e.length;return P.createElement("rect",{key:"react-".concat(g),y:d,x:n,height:y,width:s,stroke:"none",fill:e[x],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Qne(r){var{vertical:e=!0,verticalFill:t,fillOpacity:n,x:i,y:s,width:a,height:o,verticalPoints:u}=r;if(!e||!t||!t.length)return null;var c=u.map(d=>Math.round(d+i-i)).sort((d,g)=>d-g);i!==c[0]&&c.unshift(0);var h=c.map((d,g)=>{var m=!c[g+1],y=m?i+a-d:c[g+1]-d;if(y<=0)return null;var x=g%t.length;return P.createElement("rect",{key:"react-".concat(g),x:d,y:s,width:y,height:o,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Zne=(r,e)=>{var{xAxis:t,width:n,height:i,offset:s}=r;return XB(y1(nn(nn(nn({},Vs),t),{},{ticks:QB(t),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,e)},Jne=(r,e)=>{var{yAxis:t,width:n,height:i,offset:s}=r;return XB(y1(nn(nn(nn({},Vs),t),{},{ticks:QB(t),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,e)},eie={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:dn.grid};function YE(r){var e=lA(),t=uA(),n=sU(),i=nn(nn({},an(r,eie)),{},{x:at(r.x)?r.x:n.left,y:at(r.y)?r.y:n.top,width:at(r.width)?r.width:n.width,height:at(r.height)?r.height:n.height}),{xAxisId:s,yAxisId:a,x:o,y:u,width:c,height:h,syncWithTicks:d,horizontalValues:g,verticalValues:m}=i,y=Un(),x=it(k=>aD(k,"xAxis",s,y)),b=it(k=>aD(k,"yAxis",a,y));if(!ss(c)||!ss(h)||!at(o)||!at(u))return null;var E=i.verticalCoordinatesGenerator||Zne,S=i.horizontalCoordinatesGenerator||Jne,{horizontalPoints:T,verticalPoints:I}=i;if((!T||!T.length)&&typeof S=="function"){var w=g&&g.length,R=S({yAxis:b?nn(nn({},b),{},{ticks:w?g:b.ticks}):void 0,width:e??c,height:t??h,offset:n},w?!0:d);qp(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(T=R)}if((!I||!I.length)&&typeof E=="function"){var _=m&&m.length,C=E({xAxis:x?nn(nn({},x),{},{ticks:_?m:x.ticks}):void 0,width:e??c,height:t??h,offset:n},_?!0:d);qp(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(I=C)}return P.createElement(pa,{zIndex:i.zIndex},P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(Vne,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),P.createElement(Xne,Fo({},i,{horizontalPoints:T})),P.createElement(Qne,Fo({},i,{verticalPoints:I})),P.createElement(Wne,Fo({},i,{offset:n,horizontalPoints:T,xAxis:x,yAxis:b})),P.createElement(Yne,Fo({},i,{offset:n,verticalPoints:I,xAxis:x,yAxis:b}))))}YE.displayName="CartesianGrid";var o3=(r,e,t,n)=>uF(r,"xAxis",e,n),l3=(r,e,t,n)=>lF(r,"xAxis",e,n),u3=(r,e,t,n)=>uF(r,"yAxis",t,n),c3=(r,e,t,n)=>lF(r,"yAxis",t,n),tie=ke([Vt,o3,u3,l3,c3],(r,e,t,n,i)=>ao(r,"xAxis")?Kp(e,n,!1):Kp(t,i,!1)),rie=(r,e,t,n,i)=>i;function nie(r){return r.type==="line"}var iie=ke([Cj,rie],(r,e)=>r.filter(nie).find(t=>t.id===e)),sie=ke([Vt,o3,u3,l3,c3,iie,tie,BA],(r,e,t,n,i,s,a,o)=>{var{chartData:u,dataStartIndex:c,dataEndIndex:h}=o;if(!(s==null||e==null||t==null||n==null||i==null||n.length===0||i.length===0||a==null||r!=="horizontal"&&r!=="vertical")){var{dataKey:d,data:g}=s,m;if(g!=null&&g.length>0?m=g:m=u?.slice(c,h+1),m!=null)return _ie({layout:r,xAxis:e,yAxis:t,xAxisTicks:n,yAxisTicks:i,dataKey:d,bandSize:a,displayedData:m})}});function aie(r){var e=$g(r),t=3,n=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),o=Number(s);return(Number.isNaN(a)||a<0)&&(a=t),(Number.isNaN(o)||o<0)&&(o=n),{r:a,strokeWidth:o}}return{r:t,strokeWidth:n}}var oie=["id"],lie=["type","layout","connectNulls","needClip","shape"],uie=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function gf(){return gf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gf.apply(null,arguments)}function sk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Wi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(t),!0).forEach(function(n){cie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cie(r,e,t){return(e=fie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fie(r){var e=hie(r,"string");return typeof e=="symbol"?e:e+""}function hie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function b1(r,e){if(r==null)return{};var t,n,i=die(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function die(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var pie=r=>{var{dataKey:e,name:t,stroke:n,legendType:i,hide:s}=r;return[{inactive:s,dataKey:e,type:i,color:n,value:ZB(t,e),payload:r}]},gie=P.memo(r=>{var{dataKey:e,data:t,stroke:n,strokeWidth:i,fill:s,name:a,hide:o,unit:u,tooltipType:c}=r,h={dataDefinedOnItem:t,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:ZB(a,e),hide:o,type:c,color:n,unit:u}};return P.createElement(Gte,{tooltipEntrySettings:h})}),f3=(r,e)=>"".concat(e,"px ").concat(r-e,"px");function mie(r,e){for(var t=r.length%2!==0?[...r,0]:r,n=[],i=0;i<e;++i)n=[...n,...t];return n}var yie=(r,e,t)=>{var n=t.reduce((d,g)=>d+g);if(!n)return f3(e,r);for(var i=Math.floor(r/n),s=r%n,a=e-r,o=[],u=0,c=0;u<t.length;c+=t[u],++u)if(c+t[u]>s){o=[...t.slice(0,u),s-c];break}var h=o.length%2===0?[0,a]:[a];return[...mie(t,i),...o,...h].map(d=>"".concat(d,"px")).join(", ")};function vie(r){var{clipPathId:e,points:t,props:n}=r,{dot:i,dataKey:s,needClip:a}=n,{id:o}=n,u=b1(n,oie),c=rs(u);return P.createElement(ure,{points:t,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:a,clipPathId:e})}function bie(r){var{showLabels:e,children:t,points:n}=r,i=P.useMemo(()=>n?.map(s=>{var a,o,u={x:(a=s.x)!==null&&a!==void 0?a:0,y:(o=s.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Wi(Wi({},u),{},{value:s.value,payload:s.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[n]);return P.createElement(yte,{value:e?i:void 0},t)}function ak(r){var{clipPathId:e,pathRef:t,points:n,strokeDasharray:i,props:s}=r,{type:a,layout:o,connectNulls:u,needClip:c,shape:h}=s,d=b1(s,lie),g=Wi(Wi({},gn(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:n,type:a,layout:o,connectNulls:u,strokeDasharray:i??s.strokeDasharray});return P.createElement(P.Fragment,null,n?.length>1&&P.createElement($te,gf({shapeType:"curve",option:h},g,{pathRef:t})),P.createElement(vie,{points:n,clipPathId:e,props:s}))}function xie(r){try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}function Sie(r){var{clipPathId:e,props:t,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=r,{points:a,strokeDasharray:o,isAnimationActive:u,animationBegin:c,animationDuration:h,animationEasing:d,animateNewValues:g,width:m,height:y,onAnimationEnd:x,onAnimationStart:b}=t,E=i.current,S=dA(a,"recharts-line-"),T=P.useRef(S),[I,w]=P.useState(!1),R=!I,_=P.useCallback(()=>{typeof x=="function"&&x(),w(!1)},[x]),C=P.useCallback(()=>{typeof b=="function"&&b(),w(!0)},[b]),k=xie(n.current),D=P.useRef(0);T.current!==S&&(D.current=s.current,T.current=S);var U=D.current;return P.createElement(bie,{points:a,showLabels:R},t.children,P.createElement(hA,{animationId:S,begin:c,duration:h,isActive:u,easing:d,onAnimationEnd:_,onAnimationStart:C,key:S},N=>{var q=Pn(U,k+U,N),X=Math.min(q,k),V;if(u)if(o){var H="".concat(o).split(/[,\s]+/gim).map(ee=>parseFloat(ee));V=yie(X,k,H)}else V=f3(k,X);else V=o==null?void 0:String(o);if(N>0&&k>0&&(i.current=a,s.current=Math.max(s.current,X)),E){var K=E.length/a.length,Y=N===1?a:a.map((ee,Q)=>{var $=Math.floor(Q*K);if(E[$]){var F=E[$];return Wi(Wi({},ee),{},{x:Pn(F.x,ee.x,N),y:Pn(F.y,ee.y,N)})}return g?Wi(Wi({},ee),{},{x:Pn(m*2,ee.x,N),y:Pn(y/2,ee.y,N)}):Wi(Wi({},ee),{},{x:ee.x,y:ee.y})});return i.current=Y,P.createElement(ak,{props:t,points:Y,clipPathId:e,pathRef:n,strokeDasharray:V})}return P.createElement(ak,{props:t,points:a,clipPathId:e,pathRef:n,strokeDasharray:V})}),P.createElement(xte,{label:t.label}))}function Eie(r){var{clipPathId:e,props:t}=r,n=P.useRef(null),i=P.useRef(0),s=P.useRef(null);return P.createElement(Sie,{props:t,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var Tie=(r,e)=>{var t,n;return{x:(t=r.x)!==null&&t!==void 0?t:void 0,y:(n=r.y)!==null&&n!==void 0?n:void 0,value:r.value,errorVal:sn(r.payload,e)}};class Aie extends P.Component{render(){var{hide:e,dot:t,points:n,className:i,xAxisId:s,yAxisId:a,top:o,left:u,width:c,height:h,id:d,needClip:g,zIndex:m}=this.props;if(e)return null;var y=Bt("recharts-line",i),x=d,{r:b,strokeWidth:E}=aie(t),S=QF(t),T=b*2+E,I=g?"url(#clipPath-".concat(S?"":"dots-").concat(x,")"):void 0;return P.createElement(pa,{zIndex:m},P.createElement(Ja,{className:y},g&&P.createElement("defs",null,P.createElement(Ure,{clipPathId:x,xAxisId:s,yAxisId:a}),!S&&P.createElement("clipPath",{id:"clipPath-dots-".concat(x)},P.createElement("rect",{x:u-T/2,y:o-T/2,width:c+T,height:h+T}))),P.createElement(Bre,{xAxisId:s,yAxisId:a,data:n,dataPointFormatter:Tie,errorBarOffset:0},P.createElement(Eie,{props:this.props,clipPathId:x}))),P.createElement(Rre,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:I}))}}var h3={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:dn.line,type:"linear"};function wie(r){var e=an(r,h3),{activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:u,hide:c,isAnimationActive:h,label:d,legendType:g,xAxisId:m,yAxisId:y,id:x}=e,b=b1(e,uie),{needClip:E}=r3(m,y),S=p1(),T=am(),I=Un(),w=it(D=>sie(D,m,y,I,x));if(T!=="horizontal"&&T!=="vertical"||w==null||S==null)return null;var{height:R,width:_,x:C,y:k}=S;return P.createElement(Aie,gf({},b,{id:x,connectNulls:o,dot:u,activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:h,hide:c,label:d,legendType:g,xAxisId:m,yAxisId:y,points:w,layout:T,height:R,width:_,left:C,top:k,needClip:E}))}function _ie(r){var{layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:u}=r;return u.map((c,h)=>{var d=sn(c,a);if(e==="horizontal"){var g=_C({axis:t,ticks:i,bandSize:o,entry:c,index:h}),m=Nr(d)?null:n.scale(d);return{x:g,y:m,value:d,payload:c}}var y=Nr(d)?null:t.scale(d),x=_C({axis:n,ticks:s,bandSize:o,entry:c,index:h});return y==null||x==null?null:{x:y,y:x,value:d,payload:c}}).filter(Boolean)}function Iie(r){var e=an(r,h3),t=Un();return P.createElement(Vte,{id:e.id,type:"line"},n=>P.createElement(P.Fragment,null,P.createElement(zte,{legendPayload:pie(e)}),P.createElement(gie,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),P.createElement(ere,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:t}),P.createElement(wie,gf({},e,{id:n}))))}var ko=P.memo(Iie,g1);ko.displayName="Line";var Oie=["domain","range"],Rie=["domain","range"];function ok(r,e){if(r==null)return{};var t,n,i=Lie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Lie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function lk(r,e){return r===e?!0:Array.isArray(r)&&r.length===2&&Array.isArray(e)&&e.length===2?r[0]===e[0]&&r[1]===e[1]:!1}function d3(r,e){if(r===e)return!0;var{domain:t,range:n}=r,i=ok(r,Oie),{domain:s,range:a}=e,o=ok(e,Rie);return!lk(t,s)||!lk(n,a)?!1:g1(i,o)}var Cie=["dangerouslySetInnerHTML","ticks"],Pie=["id"];function XE(){return XE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},XE.apply(null,arguments)}function uk(r,e){if(r==null)return{};var t,n,i=Die(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Die(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function kie(r){var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(pre(r)):t.current!==r&&e(gre({prev:t.current,next:r})),t.current=r},[r,e]),P.useLayoutEffect(()=>()=>{t.current&&(e(mre(t.current)),t.current=null)},[e]),null}var Mie=r=>{var{xAxisId:e,className:t}=r,n=it(eU),i=Un(),s="xAxis",a=it(b=>Mu(b,s,e,i)),o=it(b=>oF(b,s,e,i)),u=it(b=>qQ(b,e)),c=it(b=>ZQ(b,e)),h=it(b=>Ij(b,e));if(u==null||c==null||h==null)return null;var{dangerouslySetInnerHTML:d,ticks:g}=r,m=uk(r,Cie),{id:y}=h,x=uk(h,Pie);return P.createElement(v1,XE({},m,x,{scale:a,x:c.x,y:c.y,width:u.width,height:u.height,className:Bt("recharts-".concat(s," ").concat(s),t),viewBox:n,ticks:o,axisType:s}))},Nie={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:Dr.allowDecimals,allowDuplicatedCategory:Dr.allowDuplicatedCategory,angle:Dr.angle,axisLine:Vs.axisLine,height:Dr.height,hide:!1,includeHidden:Dr.includeHidden,interval:Dr.interval,minTickGap:Dr.minTickGap,mirror:Dr.mirror,orientation:Dr.orientation,padding:Dr.padding,reversed:Dr.reversed,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,tickLine:Vs.tickLine,tickSize:Vs.tickSize,type:Dr.type,xAxisId:0},Bie=r=>{var e=an(r,Nie);return P.createElement(P.Fragment,null,P.createElement(kie,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),P.createElement(Mie,e))},QE=P.memo(Bie,d3);QE.displayName="XAxis";var Uie=["dangerouslySetInnerHTML","ticks"],jie=["id"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ZE.apply(null,arguments)}function ck(r,e){if(r==null)return{};var t,n,i=Fie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Fie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function $ie(r){var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(yre(r)):t.current!==r&&e(vre({prev:t.current,next:r})),t.current=r},[r,e]),P.useLayoutEffect(()=>()=>{t.current&&(e(bre(t.current)),t.current=null)},[e]),null}var Gie=r=>{var{yAxisId:e,className:t,width:n,label:i}=r,s=P.useRef(null),a=P.useRef(null),o=it(eU),u=Un(),c=vr(),h="yAxis",d=it(w=>Mu(w,h,e,u)),g=it(w=>tZ(w,e)),m=it(w=>eZ(w,e)),y=it(w=>oF(w,h,e,u)),x=it(w=>Oj(w,e));if(P.useLayoutEffect(()=>{if(!(n!=="auto"||!g||d1(i)||P.isValidElement(i)||x==null)){var w=s.current;if(w){var R=w.getCalculatedWidth();Math.round(g.width)!==Math.round(R)&&c(xre({id:e,width:R}))}}},[y,g,c,i,e,n,x]),g==null||m==null||x==null)return null;var{dangerouslySetInnerHTML:b,ticks:E}=r,S=ck(r,Uie),{id:T}=x,I=ck(x,jie);return P.createElement(v1,ZE({},S,I,{ref:s,labelRef:a,scale:d,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:Bt("recharts-".concat(h," ").concat(h),t),viewBox:o,ticks:y,axisType:h}))},zie={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,angle:kr.angle,axisLine:Vs.axisLine,hide:!1,includeHidden:kr.includeHidden,interval:kr.interval,minTickGap:kr.minTickGap,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,tickLine:Vs.tickLine,tickSize:Vs.tickSize,type:kr.type,width:kr.width,yAxisId:0},Hie=r=>{var e=an(r,zie);return P.createElement(P.Fragment,null,P.createElement($ie,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),P.createElement(Gie,e))},JE=P.memo(Hie,d3);JE.displayName="YAxis";var Kie=(r,e)=>e,x1=ke([Kie,Vt,Aj,Or,AF,da,mJ,Xr],TJ),S1=r=>{var e=r.currentTarget.getBoundingClientRect(),t=e.width/r.currentTarget.offsetWidth,n=e.height/r.currentTarget.offsetHeight;return{chartX:Math.round((r.clientX-e.left)/t),chartY:Math.round((r.clientY-e.top)/n)}},p3=Si("mouseClick"),g3=Pf();g3.startListening({actionCreator:p3,effect:(r,e)=>{var t=r.payload,n=x1(e.getState(),S1(t));n?.activeIndex!=null&&e.dispatch(pZ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var eT=Si("mouseMove"),m3=Pf(),wd=null;m3.startListening({actionCreator:eT,effect:(r,e)=>{var t=r.payload;wd!==null&&cancelAnimationFrame(wd);var n=S1(t);wd=requestAnimationFrame(()=>{var i=e.getState(),s=r1(i,i.tooltip.settings.shared);if(s==="axis"){var a=x1(i,n);a?.activeIndex!=null?e.dispatch(mF({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(gF())}wd=null})}});var fk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},y3=Bn({name:"rootProps",initialState:fk,reducers:{updateOptions:(r,e)=>{var t;r.accessibilityLayer=e.payload.accessibilityLayer,r.barCategoryGap=e.payload.barCategoryGap,r.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:fk.barGap,r.barSize=e.payload.barSize,r.maxBarSize=e.payload.maxBarSize,r.stackOffset=e.payload.stackOffset,r.syncId=e.payload.syncId,r.syncMethod=e.payload.syncMethod,r.className=e.payload.className,r.baseValue=e.payload.baseValue,r.reverseStackOrder=e.payload.reverseStackOrder}}}),qie=y3.reducer,{updateOptions:Vie}=y3.actions,v3=Bn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(r,e)=>e.payload}}),{updatePolarOptions:dfe}=v3.actions,Wie=v3.reducer,b3=Si("keyDown"),x3=Si("focus"),E1=Pf();E1.startListening({actionCreator:b3,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip,s=r.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=n1(i,Bu(t),Gf(t),Vf(t)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var u=da(t);if(s==="Enter"){var c=dg(t,"axis","hover",String(i.index));e.dispatch(zE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var h=sZ(t),d=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,m=o+g*d;if(!(u==null||m>=u.length||m<0)){var y=dg(t,"axis","hover",String(m));e.dispatch(zE({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}}});E1.startListening({actionCreator:x3,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var s="0",a=dg(t,"axis","hover",String(s));e.dispatch(zE({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var yi=Si("externalEvent"),S3=Pf(),Ib=new Map;S3.startListening({actionCreator:yi,effect:(r,e)=>{var{handler:t,reactEvent:n}=r.payload;if(t!=null){n.persist();var i=n.type,s=Ib.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var o=e.getState(),u={activeCoordinate:eJ(o),activeDataKey:ZZ(o),activeIndex:df(o),activeLabel:IF(o),activeTooltipIndex:df(o),isTooltipActive:tJ(o)};t(u,n)}finally{Ib.delete(i)}});Ib.set(i,a)}}});var Yie=ke([Nu],r=>r.tooltipItemPayloads),Xie=ke([Yie,Kf,(r,e,t)=>e,(r,e,t)=>t],(r,e,t,n)=>{var i=r.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,t);return a}}}),E3=Si("touchMove"),T3=Pf();T3.startListening({actionCreator:E3,effect:(r,e)=>{var t=r.payload;if(!(t.touches==null||t.touches.length===0)){var n=e.getState(),i=r1(n,n.tooltip.settings.shared);if(i==="axis"){var s=x1(n,S1({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));s?.activeIndex!=null&&e.dispatch(mF({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=t.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(o.clientX,o.clientY);if(!u||!u.getAttribute)return;var c=u.getAttribute(U9),h=(a=u.getAttribute(j9))!==null&&a!==void 0?a:void 0,d=Xie(e.getState(),c,h);e.dispatch(dZ({activeDataKey:h,activeIndex:c,activeCoordinate:d}))}}}});var Qie=SB({brush:ane,cartesianAxis:Sre,chartData:tee,errorBars:Cre,graphicalItems:Zte,layout:E9,legend:PV,options:XJ,polarAxis:Ete,polarOptions:Wie,referenceElements:dne,rootProps:qie,tooltip:gZ,zIndex:BJ}),Zie=function(e){return Vq({reducer:Qie,preloadedState:e,middleware:t=>{var n;return t({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([g3.middleware,m3.middleware,E1.middleware,S3.middleware,T3.middleware])},enhancers:t=>{var n=t;return typeof t=="function"&&(n=t()),n.concat(NB({type:"raf"}))},devTools:Mf.devToolsEnabled})};function Jie(r){var{preloadedState:e,children:t,reduxStoreName:n}=r,i=Un(),s=P.useRef(null);if(i)return t;s.current==null&&(s.current=Zie(e));var a=ZT;return P.createElement(rne,{context:a,store:s.current},t)}function ese(r){var{layout:e,margin:t}=r,n=vr(),i=Un();return P.useEffect(()=>{i||(n(b9(e)),n(v9(t)))},[n,i,e,t]),null}var tse=P.memo(ese,g1);function rse(r){var e=vr();return P.useEffect(()=>{e(Vie(r))},[e,r]),null}function hk(r){var{zIndex:e,isPanorama:t}=r,n=t?"recharts-zindex-panorama-":"recharts-zindex-",i=ZF("".concat(n).concat(e)),s=vr();return P.useLayoutEffect(()=>(s(MJ({zIndex:e,elementId:i,isPanorama:t})),()=>{s(NJ({zIndex:e,isPanorama:t}))}),[s,e,i,t]),P.createElement("g",{tabIndex:-1,id:i})}function dk(r){var{children:e,isPanorama:t}=r,n=it(wJ);if(!n||n.length===0)return e;var i=n.filter(a=>a<0),s=n.filter(a=>a>0);return P.createElement(P.Fragment,null,i.map(a=>P.createElement(hk,{key:a,zIndex:a,isPanorama:t})),e,s.map(a=>P.createElement(hk,{key:a,zIndex:a,isPanorama:t})))}var nse=["children"];function ise(r,e){if(r==null)return{};var t,n,i=sse(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function sse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function xg(){return xg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},xg.apply(null,arguments)}var ase={width:"100%",height:"100%",display:"block"},ose=P.forwardRef((r,e)=>{var t=lA(),n=uA(),i=dU();if(!ss(t)||!ss(n))return null;var{children:s,otherAttributes:a,title:o,desc:u}=r,c,h;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=i?0:void 0,typeof a.role=="string"?h=a.role:h=i?"application":void 0),P.createElement(GT,xg({},a,{title:o,desc:u,role:h,tabIndex:c,width:t,height:n,style:ase,ref:e}),s)}),lse=r=>{var{children:e}=r,t=it(im);if(!t)return null;var{width:n,height:i,y:s,x:a}=t;return P.createElement(GT,{width:n,height:i,x:a,y:s},e)},pk=P.forwardRef((r,e)=>{var{children:t}=r,n=ise(r,nse),i=Un();return i?P.createElement(lse,null,P.createElement(dk,{isPanorama:!0},t)):P.createElement(ose,xg({ref:e},n),P.createElement(dk,{isPanorama:!1},t))});function use(){var r=vr(),[e,t]=P.useState(null),n=it(B9);return P.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Br(s)&&s!==n&&r(S9(s))}},[e,r,n]),t}function gk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cse(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(t),!0).forEach(function(n){fse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function fse(r,e,t){return(e=hse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hse(r){var e=dse(r,"string");return typeof e=="symbol"?e:e+""}function dse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Zo(){return Zo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zo.apply(null,arguments)}var pse=()=>(cee(),null);function Sg(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=parseFloat(r);if(!Number.isNaN(e))return e}return 0}var gse=P.forwardRef((r,e)=>{var t,n,i=P.useRef(null),[s,a]=P.useState({containerWidth:Sg((t=r.style)===null||t===void 0?void 0:t.width),containerHeight:Sg((n=r.style)===null||n===void 0?void 0:n.height)}),o=P.useCallback((c,h)=>{a(d=>{var g=Math.round(c),m=Math.round(h);return d.containerWidth===g&&d.containerHeight===m?d:{containerWidth:g,containerHeight:m}})},[]),u=P.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:h,height:d}=c.getBoundingClientRect();o(h,d);var g=y=>{var{width:x,height:b}=y[0].contentRect;o(x,b)},m=new ResizeObserver(g);m.observe(c),i.current=m}},[e,o]);return P.useEffect(()=>()=>{var c=i.current;c?.disconnect()},[o]),P.createElement(P.Fragment,null,P.createElement(om,{width:s.containerWidth,height:s.containerHeight}),P.createElement("div",Zo({ref:u},r)))}),mse=P.forwardRef((r,e)=>{var{width:t,height:n}=r,[i,s]=P.useState({containerWidth:Sg(t),containerHeight:Sg(n)}),a=P.useCallback((u,c)=>{s(h=>{var d=Math.round(u),g=Math.round(c);return h.containerWidth===d&&h.containerHeight===g?h:{containerWidth:d,containerHeight:g}})},[]),o=P.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:c,height:h}=u.getBoundingClientRect();a(c,h)}},[e,a]);return P.createElement(P.Fragment,null,P.createElement(om,{width:i.containerWidth,height:i.containerHeight}),P.createElement("div",Zo({ref:o},r)))}),yse=P.forwardRef((r,e)=>{var{width:t,height:n}=r;return P.createElement(P.Fragment,null,P.createElement(om,{width:t,height:n}),P.createElement("div",Zo({ref:e},r)))}),vse=P.forwardRef((r,e)=>{var{width:t,height:n}=r;return Qs(t)||Qs(n)?P.createElement(mse,Zo({},r,{ref:e})):P.createElement(yse,Zo({},r,{ref:e}))});function bse(r){return r===!0?gse:vse}var xse=P.forwardRef((r,e)=>{var{children:t,className:n,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:u,onMouseEnter:c,onMouseLeave:h,onMouseMove:d,onMouseUp:g,onTouchEnd:m,onTouchMove:y,onTouchStart:x,style:b,width:E,responsive:S,dispatchTouchEvents:T=!0}=r,I=P.useRef(null),w=vr(),[R,_]=P.useState(null),[C,k]=P.useState(null),D=use(),U=oA(),N=U?.width>0?U.width:E,q=U?.height>0?U.height:i,X=P.useCallback(te=>{D(te),typeof e=="function"&&e(te),_(te),k(te),te!=null&&(I.current=te)},[D,e,_,k]),V=P.useCallback(te=>{w(p3(te)),w(yi({handler:s,reactEvent:te}))},[w,s]),H=P.useCallback(te=>{w(eT(te)),w(yi({handler:c,reactEvent:te}))},[w,c]),K=P.useCallback(te=>{w(gF()),w(yi({handler:h,reactEvent:te}))},[w,h]),Y=P.useCallback(te=>{w(eT(te)),w(yi({handler:d,reactEvent:te}))},[w,d]),ee=P.useCallback(()=>{w(x3())},[w]),Q=P.useCallback(te=>{w(b3(te.key))},[w]),$=P.useCallback(te=>{w(yi({handler:a,reactEvent:te}))},[w,a]),F=P.useCallback(te=>{w(yi({handler:o,reactEvent:te}))},[w,o]),Z=P.useCallback(te=>{w(yi({handler:u,reactEvent:te}))},[w,u]),de=P.useCallback(te=>{w(yi({handler:g,reactEvent:te}))},[w,g]),oe=P.useCallback(te=>{w(yi({handler:x,reactEvent:te}))},[w,x]),Se=P.useCallback(te=>{T&&w(E3(te)),w(yi({handler:y,reactEvent:te}))},[w,T,y]),ae=P.useCallback(te=>{w(yi({handler:m,reactEvent:te}))},[w,m]),re=bse(S);return P.createElement(kF.Provider,{value:R},P.createElement(N2.Provider,{value:C},P.createElement(re,{width:N??b?.width,height:q??b?.height,className:Bt("recharts-wrapper",n),style:cse({position:"relative",cursor:"default",width:N,height:q},b),onClick:V,onContextMenu:$,onDoubleClick:F,onFocus:ee,onKeyDown:Q,onMouseDown:Z,onMouseEnter:H,onMouseLeave:K,onMouseMove:Y,onMouseUp:de,onTouchEnd:ae,onTouchMove:Se,onTouchStart:oe,ref:X},P.createElement(pse,null),t)))}),Sse=["width","height","responsive","children","className","style","compact","title","desc"];function Ese(r,e){if(r==null)return{};var t,n,i=Tse(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Tse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Ase=P.forwardRef((r,e)=>{var{width:t,height:n,responsive:i,children:s,className:a,style:o,compact:u,title:c,desc:h}=r,d=Ese(r,Sse),g=rs(d);return u?P.createElement(P.Fragment,null,P.createElement(om,{width:t,height:n}),P.createElement(pk,{otherAttributes:g,title:c,desc:h},s)):P.createElement(xse,{className:a,style:o,width:t,height:n,responsive:i??!1,onClick:r.onClick,onMouseLeave:r.onMouseLeave,onMouseEnter:r.onMouseEnter,onMouseMove:r.onMouseMove,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,onContextMenu:r.onContextMenu,onDoubleClick:r.onDoubleClick,onTouchStart:r.onTouchStart,onTouchMove:r.onTouchMove,onTouchEnd:r.onTouchEnd},P.createElement(pk,{otherAttributes:g,title:c,desc:h,ref:e},P.createElement(gne,null,s)))});function tT(){return tT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tT.apply(null,arguments)}var wse={top:5,right:5,bottom:5,left:5},_se={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:wse,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ise=P.forwardRef(function(e,t){var n,i=an(e.categoricalChartProps,_se),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:u,categoricalChartProps:c}=e,h={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:u,eventEmitter:void 0};return P.createElement(Jie,{preloadedState:{options:h},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:s},P.createElement(sne,{chartData:c.data}),P.createElement(tse,{layout:i.layout,margin:i.margin}),P.createElement(rse,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),P.createElement(Ase,tT({},i,{ref:t})))}),Ose=["axis"],mk=P.forwardRef((r,e)=>P.createElement(Ise,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ose,tooltipPayloadSearcher:WJ,categoricalChartProps:r,ref:e}));function Rse(){const[r,e]=P.useState("current"),[t,n]=P.useState("all"),[i,s]=P.useState(!1),[a,o]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[u,c]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[h,d]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[g,m]=P.useState([]),[y,x]=P.useState({temperature:null,humidity:null}),[b]=P.useState({rootTemp:null,rootHumidity:null,ec:null,ph:null,tankLevel:null,co2:null,ppfd:null});P.useEffect(()=>P2(I=>{s(I)}),[]),P.useEffect(()=>{const T=Zc(),I=[{name:"front",tempTopic:"tansaeng/ctlr-0001/dht11/temperature",humTopic:"tansaeng/ctlr-0001/dht11/humidity",setter:o},{name:"back",tempTopic:"tansaeng/ctlr-0002/dht22/temperature",humTopic:"tansaeng/ctlr-0002/dht22/humidity",setter:c},{name:"top",tempTopic:"tansaeng/ctlr-0003/dht22/temperature",humTopic:"tansaeng/ctlr-0003/dht22/humidity",setter:d}],w=(R,_)=>{const C=parseFloat(_.toString()),k=new Date().toISOString();I.forEach(D=>{R===D.tempTopic?D.setter(U=>({...U,temperature:C,lastUpdate:k})):R===D.humTopic&&D.setter(U=>({...U,humidity:C,lastUpdate:k}))})};return T.on("message",w),I.forEach(R=>{T.subscribe(R.tempTopic),T.subscribe(R.humTopic)}),()=>{T.off("message",w),I.forEach(R=>{T.unsubscribe(R.tempTopic),T.unsubscribe(R.humTopic)})}},[]),P.useEffect(()=>{if(a.temperature!==null||u.temperature!==null||h.temperature!==null){const T={timestamp:new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),frontTemp:a.temperature,backTemp:u.temperature,topTemp:h.temperature,frontHum:a.humidity,backHum:u.humidity,topHum:h.humidity};m(I=>{const w=[...I,T],R=r==="current"?20:r==="1h"?60:r==="1w"?168:720;return w.slice(-R)})}},[a,u,h,r]),P.useEffect(()=>{if(g.length>0){const T=g.slice(-10),I=T.reduce((R,_)=>{const C=[_.frontTemp,_.backTemp,_.topTemp].filter(k=>k!==null);return R+(C.length>0?C.reduce((k,D)=>k+D,0)/C.length:0)},0)/T.length,w=T.reduce((R,_)=>{const C=[_.frontHum,_.backHum,_.topHum].filter(k=>k!==null);return R+(C.length>0?C.reduce((k,D)=>k+D,0)/C.length:0)},0)/T.length;x({temperature:isNaN(I)?null:parseFloat(I.toFixed(1)),humidity:isNaN(w)?null:parseFloat(w.toFixed(1))})}},[g]);const E=[a.temperature,u.temperature,h.temperature].filter(T=>T!==null).reduce((T,I)=>T+I,0)/3||null,S=[a.humidity,u.humidity,h.humidity].filter(T=>T!==null).reduce((T,I)=>T+I,0)/3||null;return G.jsx("div",{className:"bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[G.jsx("header",{className:"bg-farm-500 p-4 sm:px-6 rounded-xl mb-6",children:G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{children:[G.jsx("h1",{className:"text-2xl font-bold m-0",children:"  "}),G.jsx("p",{className:"text-sm text-gray-800 mt-1 m-0",children:", , EC, pH     "})]}),G.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[G.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-green-300 animate-pulse":"bg-red-300"}`}),G.jsxs("span",{className:"text-sm font-medium",children:["MQTT ",i?"":" "]})]})]})}),G.jsxs("section",{className:"mb-6",children:[G.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:G.jsx("h2",{className:"text-xl font-semibold m-0",children:" 10  "})}),G.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:G.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-6",children:[G.jsx(zi,{icon:"",title:"10  ",value:y.temperature,unit:"C",maxValue:50,color:"green"}),G.jsx(zi,{icon:"",title:"10  ",value:y.humidity,unit:"%",maxValue:100,color:"blue"})]})})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[G.jsxs("section",{children:[G.jsx("header",{className:"bg-farm-500 px-4 py-3 rounded-t-xl",children:G.jsx("h3",{className:"text-lg font-semibold m-0",children:"  "})}),G.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-4 space-y-4",children:[G.jsx(zi,{icon:"",title:"",value:a.temperature,unit:"C",maxValue:50,color:"green"}),G.jsx(zi,{icon:"",title:"",value:a.humidity,unit:"%",maxValue:100,color:"blue"})]})]}),G.jsxs("section",{children:[G.jsx("header",{className:"bg-farm-500 px-4 py-3 rounded-t-xl",children:G.jsx("h3",{className:"text-lg font-semibold m-0",children:"  "})}),G.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-4 space-y-4",children:[G.jsx(zi,{icon:"",title:"",value:u.temperature,unit:"C",maxValue:50,color:"green"}),G.jsx(zi,{icon:"",title:"",value:u.humidity,unit:"%",maxValue:100,color:"blue"})]})]}),G.jsxs("section",{children:[G.jsx("header",{className:"bg-farm-500 px-4 py-3 rounded-t-xl",children:G.jsx("h3",{className:"text-lg font-semibold m-0",children:" "})}),G.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-4 space-y-4",children:[G.jsx(zi,{icon:"",title:"",value:h.temperature,unit:"C",maxValue:50,color:"green"}),G.jsx(zi,{icon:"",title:"",value:h.humidity,unit:"%",maxValue:100,color:"blue"})]})]})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[G.jsx(zi,{icon:"",title:" ",value:E!==null?parseFloat(E.toFixed(2)):null,unit:"C",maxValue:50,color:"blue"}),G.jsx(zi,{icon:"",title:" ",value:S!==null?parseFloat(S.toFixed(2)):null,unit:"%",maxValue:100,color:"green"})]}),G.jsxs("section",{className:"mb-6",children:[G.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:G.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),G.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:G.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),G.jsxs("select",{value:r,onChange:T=>e(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[G.jsx("option",{value:"current",children:""}),G.jsx("option",{value:"1h",children:" 1"}),G.jsx("option",{value:"1w",children:" 1"}),G.jsx("option",{value:"1m",children:" 1"})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zone"}),G.jsxs("select",{value:t,onChange:T=>n(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[G.jsx("option",{value:"all",children:""}),G.jsx("option",{value:"zone_a",children:"Zone A ()"}),G.jsx("option",{value:"zone_b",children:"Zone B ()"}),G.jsx("option",{value:"zone_c",children:"Zone C ()"})]})]})]})})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[G.jsxs("section",{children:[G.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:G.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),G.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:g.length===0?G.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):G.jsx(BC,{width:"100%",height:400,children:G.jsxs(mk,{data:g,children:[G.jsx(YE,{strokeDasharray:"3 3"}),G.jsx(QE,{dataKey:"timestamp"}),G.jsx(JE,{}),G.jsx(TD,{}),G.jsx(wE,{}),G.jsx(ko,{type:"monotone",dataKey:"frontTemp",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),G.jsx(ko,{type:"monotone",dataKey:"backTemp",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),G.jsx(ko,{type:"monotone",dataKey:"topTemp",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]}),G.jsxs("section",{children:[G.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:G.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),G.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:g.length===0?G.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):G.jsx(BC,{width:"100%",height:400,children:G.jsxs(mk,{data:g,children:[G.jsx(YE,{strokeDasharray:"3 3"}),G.jsx(QE,{dataKey:"timestamp"}),G.jsx(JE,{}),G.jsx(TD,{}),G.jsx(wE,{}),G.jsx(ko,{type:"monotone",dataKey:"frontHum",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),G.jsx(ko,{type:"monotone",dataKey:"backHum",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),G.jsx(ko,{type:"monotone",dataKey:"topHum",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]})]}),G.jsxs("section",{className:"mb-6",children:[G.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:G.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),G.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:G.jsxs("dl",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-3",children:[G.jsx(Oo,{label:" ",value:b.rootTemp,unit:"C"}),G.jsx(Oo,{label:" ",value:b.rootHumidity,unit:"%"}),G.jsx(Oo,{label:"EC",value:b.ec,unit:"mS/cm"}),G.jsx(Oo,{label:"pH",value:b.ph,unit:""}),G.jsx(Oo,{label:" ",value:b.tankLevel,unit:"%"}),G.jsx(Oo,{label:"CO",value:b.co2,unit:"ppm"}),G.jsx(Oo,{label:"PPFD",value:b.ppfd,unit:"mol/m/s"})]})})]})]})})}const Ye=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},Lse=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=Cse},Cse=Number.MAX_SAFE_INTEGER||9007199254740991;let nt=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),Te=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r})({}),j=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r})({});var yt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ze={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Vl{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Pse{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Vl(e),this.fast_=new Vl(t),this.defaultTTFB_=i,this.ttfb_=new Vl(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new Vl(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Vl(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Vl(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Dse(r,e,t){return(e=Mse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Mt(){return Mt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Mt.apply(null,arguments)}function yk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(t),!0).forEach(function(n){Dse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Mse(r){var e=kse(r,"string");return typeof e=="symbol"?e:e+""}class wi{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Va,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Va=function(){},Nse={trace:Va,debug:Va,log:Va,warn:Va,info:Va,error:Va};function rT(){return Mt({},Nse)}function Bse(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):Va}function vk(r,e,t){return e[r]?e[r].bind(e):Bse(r,t)}const nT=rT();function Use(r,e,t){const n=rT();if(typeof console=="object"&&r===!0||typeof r=="object"){const i=["debug","log","info","warn","error"];i.forEach(s=>{n[s]=vk(s,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return rT()}i.forEach(s=>{nT[s]=vk(s,r)})}else Mt(nT,n);return n}const Ct=nT;function ro(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function jse(r){return typeof self<"u"&&r===self.ManagedMediaSource}function A3(r,e){const t=Object.keys(r),n=Object.keys(e),i=t.length,s=n.length;return!i||!s||i===s&&!t.some(a=>n.indexOf(a)===-1)}function ri(r,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(r);if(e){const h=c.indexOf("\0");return h!==-1?c.substring(0,h):c}return c.replace(/\0/g,"")}const t=r.length;let n,i,s,a="",o=0;for(;o<t;){if(n=r[o++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=r[o++],a+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=r[o++],s=r[o++],a+=String.fromCharCode((n&15)<<12|(i&63)<<6|(s&63)<<0);break}}return a}function Vr(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function w3(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Fse(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ob={exports:{}},bk;function $se(){return bk||(bk=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,c,h){if(h=h||{},u=u.trim(),c=c.trim(),!c){if(!h.alwaysNormalize)return u;var d=o.parseURL(u);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var g=o.parseURL(c);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=o.normalizePath(g.path),o.buildURLFromParts(g)):c;var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var y=i.exec(m.path);m.netLoc=y[1],m.path=y[2]}m.netLoc&&!m.path&&(m.path="/");var x={scheme:m.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(x.netLoc=m.netLoc,g.path[0]!=="/"))if(!g.path)x.path=m.path,g.params||(x.params=m.params,g.query||(x.query=m.query));else{var b=m.path,E=b.substring(0,b.lastIndexOf("/")+1)+g.path;x.path=o.normalizePath(E)}return x.path===null&&(x.path=h.alwaysNormalize?o.normalizePath(g.path):g.path),o.buildURLFromParts(x)},parseURL:function(u){var c=n.exec(u);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};r.exports=o})()})(Ob)),Ob.exports}var T1=$se();class A1{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var jt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class _3{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,zse(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[jt.AUDIO]:null,[jt.VIDEO]:null,[jt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new A1),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=T1.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[jt.AUDIO]=null,e[jt.VIDEO]=null,e[jt.AUDIOVIDEO]=null}}function fr(r){return r.sn!=="initSegment"}class Rb extends _3{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Ye(e)&&Ye(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const i=this._decryptdata=t[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Ye(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Ye(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return fr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const i=t[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,s,a=!1){const{elementaryStreams:o}=this,u=o[e];if(!u){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:s,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,s)}}class Gse extends _3{constructor(e,t,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function I3(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||I3(t,e)}}function zse(r,e){const t=I3(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const xk=Math.pow(2,32)-1,Hse=[].push,O3={video:1,audio:2,id3:3,text:4};function Tr(r){return String.fromCharCode.apply(null,r)}function R3(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function ut(r,e){const t=L3(r,e);return t<0?4294967296+t:t}function Sk(r,e){let t=ut(r,e);return t*=Math.pow(2,32),t+=ut(r,e+4),t}function L3(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function Kse(r){const e=r.byteLength;for(let t=0;t<e;){const n=ut(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function mt(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const s=ut(r,i),a=Tr(r.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const u=mt(r.subarray(i+8,o),e.slice(1));u.length&&Hse.apply(t,u)}i=o}return t}function qse(r){const e=[],t=r[0];let n=8;const i=ut(r,n);n+=4;let s=0,a=0;t===0?(s=ut(r,n),a=ut(r,n+4),n+=8):(s=Sk(r,n),a=Sk(r,n+8),n+=16),n+=2;let o=r.length+a;const u=R3(r,n);n+=2;for(let c=0;c<u;c++){let h=n;const d=ut(r,h);h+=4;const g=d&2147483647;if((d&2147483648)>>>31===1)return Ct.warn("SIDX has hierarchical references (not supported)"),null;const y=ut(r,h);h+=4,e.push({referenceSize:g,subsegmentDuration:y,info:{duration:y/i,start:o,end:o+g-1}}),o+=g,h+=4,n=h}return{earliestPresentationTime:s,timescale:i,version:t,referencesCount:u,references:e}}function C3(r){const e=[],t=mt(r,["moov","trak"]);for(let i=0;i<t.length;i++){const s=t[i],a=mt(s,["tkhd"])[0];if(a){let o=a[0];const u=ut(a,o===0?12:20),c=mt(s,["mdia","mdhd"])[0];if(c){o=c[0];const h=ut(c,o===0?12:20),d=mt(s,["mdia","hdlr"])[0];if(d){const g=Tr(d.subarray(8,12)),m={soun:jt.AUDIO,vide:jt.VIDEO}[g],y=mt(s,["mdia","minf","stbl","stsd"])[0],x=Vse(y);m?(e[u]={timescale:h,type:m,stsd:x},e[m]=Rt({timescale:h,id:u},x)):e[u]={timescale:h,type:g,stsd:x}}}}}return mt(r,["moov","mvex","trex"]).forEach(i=>{const s=ut(i,4),a=e[s];a&&(a.default={duration:ut(i,12),flags:ut(i,20)})}),e}function Vse(r){const e=r.subarray(8),t=e.subarray(86),n=Tr(e.subarray(4,8));let i=n,s;const a=n==="enca"||n==="encv";if(a){const c=mt(e,[n])[0].subarray(n==="enca"?28:78);mt(c,["sinf"]).forEach(d=>{const g=mt(d,["schm"])[0];if(g){const m=Tr(g.subarray(4,8));if(m==="cbcs"||m==="cenc"){const y=mt(d,["frma"])[0];y&&(i=Tr(y))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=mt(t,["avcC"])[0];u&&u.length>3&&(i+="."+Id(u[1])+Id(u[2])+Id(u[3]),s=_d(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const u=mt(e,[n])[0],c=mt(u.subarray(28),["esds"])[0];if(c&&c.length>7){let h=4;if(c[h++]!==3)break;h=Lb(c,h),h+=2;const d=c[h++];if(d&128&&(h+=2),d&64&&(h+=c[h++]),c[h++]!==4)break;h=Lb(c,h);const g=c[h++];if(g===64)i+="."+Id(g);else break;if(h+=12,c[h++]!==5)break;h=Lb(c,h);const m=c[h++];let y=(m&248)>>3;y===31&&(y+=1+((m&7)<<3)+((c[h]&224)>>5)),i+="."+y}break}case"hvc1":case"hev1":{const u=mt(t,["hvcC"])[0];if(u&&u.length>12){const c=u[1],h=["","A","B","C"][c>>6],d=c&31,g=ut(u,2),m=(c&32)>>5?"H":"L",y=u[12],x=u.subarray(6,12);i+="."+h+d,i+="."+Wse(g).toString(16).toUpperCase(),i+="."+m+y;let b="";for(let E=x.length;E--;){const S=x[E];(S||b)&&(b="."+S.toString(16).toUpperCase()+b)}i+=b}s=_d(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=_d(i,t)||i;break}case"vp09":{const u=mt(t,["vpcC"])[0];if(u&&u.length>6){const c=u[4],h=u[5],d=u[6]>>4&15;i+="."+Vi(c)+"."+Vi(h)+"."+Vi(d)}break}case"av01":{const u=mt(t,["av1C"])[0];if(u&&u.length>2){const c=u[1]>>>5,h=u[1]&31,d=u[2]>>>7?"H":"M",g=(u[2]&64)>>6,m=(u[2]&32)>>5,y=c===2&&g?m?12:10:g?10:8,x=(u[2]&16)>>4,b=(u[2]&8)>>3,E=(u[2]&4)>>2,S=u[2]&3;i+="."+c+"."+Vi(h)+d+"."+Vi(y)+"."+x+"."+b+E+S+"."+Vi(1)+"."+Vi(1)+"."+Vi(1)+"."+0,s=_d("dav1",t)}break}}return{codec:i,encrypted:a,supplemental:s}}function _d(r,e){const t=mt(e,["dvvC"]),n=t.length?t[0]:mt(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return r+"."+Vi(i)+"."+Vi(s)}}function Wse(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function Lb(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Id(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function Vi(r){return(r<10?"0":"")+r}function Yse(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&P3(r,(n,i)=>{const s=n.subarray(8,24);s.some(a=>a!==0)||(Ct.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Vr(s)} -> ${Vr(t)}`),n.set(t,8))})}function Xse(r){const e=[];return P3(r,t=>e.push(t.subarray(8,24))),e}function P3(r,e){mt(r,["moov","trak"]).forEach(n=>{const i=mt(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const s=i.subarray(8);let a=mt(s,["enca"]);const o=a.length>0;o||(a=mt(s,["encv"])),a.forEach(u=>{const c=o?u.subarray(28):u.subarray(78);mt(c,["sinf"]).forEach(d=>{const g=D3(d);g&&e(g,o)})})})}function D3(r){const e=mt(r,["schm"])[0];if(e){const t=Tr(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=mt(r,["schi","tenc"])[0];if(n)return n}}}function Qse(r,e,t){const n={},i=mt(r,["moof","traf"]);for(let s=0;s<i.length;s++){const a=i[s],o=mt(a,["tfhd"])[0],u=ut(o,4),c=e[u];if(!c)continue;n[u]||(n[u]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const h=n[u],d=mt(a,["tfdt"])[0];if(d){const T=d[0];let I=ut(d,4);T===1&&(I===xk?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(I*=xk+1,I+=ut(d,8))),Ye(I)&&(!Ye(h.start)||I<h.start)&&(h.start=I)}const g=c.default,m=ut(o,0)|g?.flags;let y=g?.duration||0;m&8&&(m&2?y=ut(o,12):y=ut(o,8));const x=mt(a,["trun"]);let b=h.start||0,E=0,S=y;for(let T=0;T<x.length;T++){const I=x[T],w=ut(I,4),R=h.sampleCount;h.sampleCount+=w;const _=I[3]&1,C=I[3]&4,k=I[2]&1,D=I[2]&2,U=I[2]&4,N=I[2]&8;let q=8,X=w;for(_&&(q+=4),C&&w&&(!(I[q+1]&1)&&h.keyFrameIndex===void 0&&(h.keyFrameIndex=R),q+=4,k?(S=ut(I,q),q+=4):S=y,D&&(q+=4),N&&(q+=4),b+=S,E+=S,X--);X--;)k?(S=ut(I,q),q+=4):S=y,D&&(q+=4),U&&(I[q+1]&1||h.keyFrameIndex===void 0&&(h.keyFrameIndex=h.sampleCount-(X+1),h.keyFrameStart=b),q+=4),N&&(q+=4),b+=S,E+=S;!E&&y&&(E+=y*w)}h.duration+=E}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,a=0;const o=mt(r,["sidx"]);for(let u=0;u<o.length;u++){const c=qse(o[u]);if(c!=null&&c.references){s=Math.min(s,c.earliestPresentationTime/c.timescale);const h=c.references.reduce((d,g)=>d+g.info.duration||0,0);a=Math.max(a,h+c.earliestPresentationTime/c.timescale)}}a&&Ye(a)&&Object.keys(n).forEach(u=>{n[u].duration||(n[u].duration=a*n[u].timescale-n[u].start)})}return n}function Zse(r){const e={valid:null,remainder:null},t=mt(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function Ti(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Ek(r,e){const t=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return mt(n,["moof"]).map(u=>{const c=u.byteOffset-8;mt(u,["traf"]).map(d=>{const g=mt(d,["tfdt"]).map(m=>{const y=m[0];let x=ut(m,4);return y===1&&(x*=Math.pow(2,32),x+=ut(m,8)),x/i})[0];return g!==void 0&&(r=g),mt(d,["tfhd"]).map(m=>{const y=ut(m,4),x=ut(m,0)&16777215,b=(x&1)!==0,E=(x&2)!==0,S=(x&8)!==0;let T=0;const I=(x&16)!==0;let w=0;const R=(x&32)!==0;let _=8;y===s&&(b&&(_+=8),E&&(_+=4),S&&(T=ut(m,_),_+=4),I&&(w=ut(m,_),_+=4),R&&(_+=4),e.type==="video"&&(a=_m(e.codec)),mt(d,["trun"]).map(C=>{const k=C[0],D=ut(C,0)&16777215,U=(D&1)!==0;let N=0;const q=(D&4)!==0,X=(D&256)!==0;let V=0;const H=(D&512)!==0;let K=0;const Y=(D&1024)!==0,ee=(D&2048)!==0;let Q=0;const $=ut(C,4);let F=8;U&&(N=ut(C,F),F+=4),q&&(F+=4);let Z=N+c;for(let de=0;de<$;de++){if(X?(V=ut(C,F),F+=4):V=T,H?(K=ut(C,F),F+=4):K=w,Y&&(F+=4),ee&&(k===0?Q=ut(C,F):Q=L3(C,F),F+=4),e.type===jt.VIDEO){let oe=0;for(;oe<K;){const Se=ut(n,Z);if(Z+=4,Jse(a,n[Z])){const ae=n.subarray(Z,Z+Se);w1(ae,a?2:1,r+Q/i,t)}Z+=Se,oe+=Se+4}}r+=V/i}}))})})}),t}function _m(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Jse(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function w1(r,e,t,n){const i=k3(r);let s=0;s+=e;let a=0,o=0,u=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;u=i[s++],a+=u}while(u===255);o=0;do{if(s>=i.length)break;u=i[s++],o+=u}while(u===255);const c=i.length-s;let h=s;if(o<c)s+=o;else if(o>c){Ct.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(i[h++]===181){const g=R3(i,h);if(h+=2,g===49){const m=ut(i,h);if(h+=4,m===1195456820){const y=i[h++];if(y===3){const x=i[h++],b=31&x,E=64&x,S=E?2+b*3:0,T=new Uint8Array(S);if(E){T[0]=x;for(let I=1;I<S;I++)T[I]=i[h++]}n.push({type:y,payloadType:a,pts:t,bytes:T})}}}}}else if(a===5&&o>16){const d=[];for(let y=0;y<16;y++){const x=i[h++].toString(16);d.push(x.length==1?"0"+x:x),(y===3||y===5||y===7||y===9)&&d.push("-")}const g=o-16,m=new Uint8Array(g);for(let y=0;y<g;y++)m[y]=i[h++];n.push({payloadType:a,pts:t,uuid:d.join(""),userData:ri(m),userDataBytes:m})}}}function k3(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=r[a];return s}function eae(r){const e=r[0];let t="",n="",i=0,s=0,a=0,o=0,u=0,c=0;if(e===0){for(;Tr(r.subarray(c,c+1))!=="\0";)t+=Tr(r.subarray(c,c+1)),c+=1;for(t+=Tr(r.subarray(c,c+1)),c+=1;Tr(r.subarray(c,c+1))!=="\0";)n+=Tr(r.subarray(c,c+1)),c+=1;n+=Tr(r.subarray(c,c+1)),c+=1,i=ut(r,12),s=ut(r,16),o=ut(r,20),u=ut(r,24),c=28}else if(e===1){c+=4,i=ut(r,c),c+=4;const d=ut(r,c);c+=4;const g=ut(r,c);for(c+=4,a=2**32*d+g,Lse(a)||(a=Number.MAX_SAFE_INTEGER,Ct.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=ut(r,c),c+=4,u=ut(r,c),c+=4;Tr(r.subarray(c,c+1))!=="\0";)t+=Tr(r.subarray(c,c+1)),c+=1;for(t+=Tr(r.subarray(c,c+1)),c+=1;Tr(r.subarray(c,c+1))!=="\0";)n+=Tr(r.subarray(c,c+1)),c+=1;n+=Tr(r.subarray(c,c+1)),c+=1}const h=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:u,payload:h}}function tae(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(r,4),i=0,n=8;i<t;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function rae(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),tae([112,115,115,104],new Uint8Array([n,0,0,0]),r,s,i,a,t)}function nae(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),s=iae(i);e.push(s),n+=s.size}}return e}function iae(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const s=r.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=r.buffer,o=Vr(new Uint8Array(a,t+12,16));let u=null,c=null,h=0;if(s===0)h=28;else{const g=r.getUint32(28);if(!g||n<32+g*16)return{offset:t,size:e};u=[];for(let m=0;m<g;m++)u.push(new Uint8Array(a,t+32+m*16,16));h=32+g*16}if(!h)return{offset:t,size:e};const d=r.getUint32(h);return e-32<d?{offset:t,size:e}:(c=new Uint8Array(a,t+h+4,d),{version:s,systemId:o,kids:u,data:c,offset:t,size:e})}const M3=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Su={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function _1(r,e){const t=Su[e];return!!t&&!!t[r.slice(0,4)]}function mf(r,e,t=!0){return!r.split(",").some(n=>!I1(n,e,t))}function I1(r,e,t=!0){var n;const i=ro(t);return(n=i?.isTypeSupported(yf(r,e)))!=null?n:!1}function yf(r,e){return`${e}/mp4;codecs=${r}`}function Tk(r){if(r){const e=r.substring(0,4);return Su.video[e]}return 2}function Eg(r){const e=M3();return r.split(",").reduce((t,n)=>{const s=e&&_m(n)?9:Su.video[n];return s?(s*2+t)/(t?3:2):(Su.audio[n]+t)/(t?2:1)},0)}const Cb={};function sae(r,e=!0){if(Cb[r])return Cb[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let i=0;i<t.length;i++){var n;if(I1(t[i],"audio",e))return Cb[r]=t[i],t[i];if(t[i]==="mp3"&&(n=ro(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const aae=/flac|opus|mp4a\.40\.34/i;function Tg(r,e=!0){return r.replace(aae,t=>sae(t.toLowerCase(),e))}function oae(r,e){const t=[];if(r){const n=r.split(",");for(let i=0;i<n.length;i++)_1(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function xp(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(Ak(r,"audio")||Ak(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function Ak(r,e){return _1(r,e)&&I1(r,e)}function lae(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function uae(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function wk(r){const e=ro(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function iT(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const cae={supported:!0,powerEfficient:!0,smooth:!0},fae={supported:!1,smooth:!1,powerEfficient:!1},N3={supported:!0,configurations:[],decodingInfoResults:[cae]};function B3(r,e){return{supported:!1,configurations:e,decodingInfoResults:[fae],error:r}}function hae(r,e,t,n,i,s){const a=r.videoCodec,o=r.audioCodec?r.audioGroups:null,u=s?.audioCodec,c=s?.channels,h=c?parseInt(c):u?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((g,m)=>{if(m){const y=e.groups[m];if(!y)throw new Error(`Audio track group ${m} not found`);Object.keys(y.channels).forEach(x=>{g[x]=(g[x]||0)+y.channels[x]})}return g},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(g=>_m(g))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!d&&Ye(h)&&Object.keys(d).some(g=>parseInt(g)>h)}function U3(r,e,t,n={}){const i=r.videoCodec;if(!i&&!r.audioCodec||!t)return Promise.resolve(N3);const s=[],a=dae(r),o=a.length,u=pae(r,e,o>0),c=u.length;for(let h=o||1*c||1;h--;){const d={type:"media-source"};if(o&&(d.video=a[h%o]),c){d.audio=u[h%c];const g=d.audio.bitrate;d.video&&g&&(d.video.bitrate-=g)}s.push(d)}if(i){const h=navigator.userAgent;if(i.split(",").some(d=>_m(d))&&M3())return Promise.resolve(B3(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${h})`),s))}return Promise.all(s.map(h=>{const d=mae(h);return n[d]||(n[d]=t.decodingInfo(h))})).then(h=>({supported:!h.some(d=>!d.supported),configurations:s,decodingInfoResults:h})).catch(h=>({supported:!1,configurations:s,decodingInfoResults:[],error:h}))}function dae(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=j3(r),i=r.width||640,s=r.height||480,a=r.frameRate||30,o=r.videoRange.toLowerCase();return t?t.map(u=>{const c={contentType:yf(uae(u),"video"),width:i,height:s,bitrate:n,framerate:a};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function pae(r,e,t){var n;const i=(n=r.audioCodec)==null?void 0:n.split(","),s=j3(r);return i&&r.audioGroups?r.audioGroups.reduce((a,o)=>{var u;const c=o?(u=e.groups[o])==null?void 0:u.tracks:null;return c?c.reduce((h,d)=>{if(d.groupId===o){const g=parseFloat(d.channels||"");i.forEach(m=>{const y={contentType:yf(m,"audio"),bitrate:t?gae(m,s):s};g&&(y.channels=""+g),h.push(y)})}return h},a):a},[]):[]}function gae(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function j3(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function mae(r){let e="";const{audio:t,video:n}=r;if(n){const i=iT(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const i=iT(t.contentType);e+=`${n?"_":""}${i}_c${t.channels}`}return e}const sT=["NONE","TYPE-0","TYPE-1",null];function yae(r){return sT.indexOf(r)>-1}const Ag=["SDR","PQ","HLG"];function vae(r){return!!r&&Ag.indexOf(r)>-1}var Sp={No:"",Yes:"YES",v2:"v2"};function _k(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?Sp.v2:Sp.Yes:Sp.No}class Ik{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class vf{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Ok(this._audioGroups,e)}hasSubtitleGroup(e){return Ok(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function Ok(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function bae(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function xae(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||Ag.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&bae(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const Sae=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},$t=(r,e)=>JSON.stringify(r,Sae(e));function Eae(r,e,t,n,i){const s=Object.keys(r),a=n?.channels,o=n?.audioCodec,u=i?.videoCodec,c=a&&parseInt(a)===2;let h=!1,d=!1,g=1/0,m=1/0,y=1/0,x=1/0,b=0,E=[];const{preferHDR:S,allowedVideoRanges:T}=xae(e,i);for(let C=s.length;C--;){const k=r[s[C]];h||(h=k.channels[2]>0),g=Math.min(g,k.minHeight),m=Math.min(m,k.minFramerate),y=Math.min(y,k.minBitrate),T.filter(U=>k.videoRanges[U]>0).length>0&&(d=!0)}g=Ye(g)?g:0,m=Ye(m)?m:0;const I=Math.max(1080,g),w=Math.max(30,m);y=Ye(y)?y:t,t=Math.max(y,t),d||(e=void 0);const R=s.length>1;return{codecSet:s.reduce((C,k)=>{const D=r[k];if(k===C)return C;if(E=d?T.filter(U=>D.videoRanges[U]>0):[],R){if(D.minBitrate>t)return Hi(k,`min bitrate of ${D.minBitrate} > current estimate of ${t}`),C;if(!D.hasDefaultAudio)return Hi(k,"no renditions with default or auto-select sound found"),C;if(o&&k.indexOf(o.substring(0,4))%5!==0)return Hi(k,`audio codec preference "${o}" not found`),C;if(a&&!c){if(!D.channels[a])return Hi(k,`no renditions with ${a} channel sound found (channels options: ${Object.keys(D.channels)})`),C}else if((!o||c)&&h&&D.channels[2]===0)return Hi(k,"no renditions with stereo sound found"),C;if(D.minHeight>I)return Hi(k,`min resolution of ${D.minHeight} > maximum of ${I}`),C;if(D.minFramerate>w)return Hi(k,`min framerate of ${D.minFramerate} > maximum of ${w}`),C;if(!E.some(U=>D.videoRanges[U]>0))return Hi(k,`no variants with VIDEO-RANGE of ${$t(E)} found`),C;if(u&&k.indexOf(u.substring(0,4))%5!==0)return Hi(k,`video codec preference "${u}" not found`),C;if(D.maxScore<b)return Hi(k,`max score of ${D.maxScore} < selected max of ${b}`),C}return C&&(Eg(k)>=Eg(C)||D.fragmentError>r[C].fragmentError)?C:(x=D.minIndex,b=D.maxScore,k)},void 0),videoRanges:E,preferHDR:S,minFramerate:m,minBitrate:y,minIndex:x}}function Hi(r,e){Ct.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function F3(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Tae(r,e,t,n){return r.slice(t,n+1).reduce((i,s,a)=>{if(!s.codecSet)return i;const o=s.audioGroups;let u=i[s.codecSet];u||(i[s.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,s.bitrate);const c=Math.min(s.height,s.width);return u.minHeight=Math.min(u.minHeight,c),u.minFramerate=Math.min(u.minFramerate,s.frameRate),u.minIndex=Math.min(u.minIndex,a),u.maxScore=Math.max(u.maxScore,s.score),u.fragmentError+=s.fragmentError,u.videoRanges[s.videoRange]=(u.videoRanges[s.videoRange]||0)+1,o&&o.forEach(h=>{if(!h)return;const d=e.groups[h];d&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(g=>{u.channels[g]=(u.channels[g]||0)+d.channels[g]}))}),i},{})}function Rk(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:s}=r;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:s}}function Ji(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Vo(r,i,t))return n}return-1}function Vo(r,e,t){const{groupId:n,name:i,lang:s,assocLang:a,default:o}=r,u=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||Aae(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(u===void 0||e.forced===u)&&(!("characteristics"in r)||wae(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function Aae(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function wae(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Mo(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function _ae(r,e,t,n,i){const s=e[n],o=e.reduce((g,m,y)=>{const x=m.uri;return(g[x]||(g[x]=[])).push(y),g},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const u=s.videoRange,c=s.frameRate,h=s.codecSet.substring(0,4),d=Lk(e,n,g=>{if(g.videoRange!==u||g.frameRate!==c||g.codecSet.substring(0,4)!==h)return!1;const m=g.audioGroups,y=t.filter(x=>!m||m.indexOf(x.groupId)!==-1);return Ji(r,y,i)>-1});return d>-1?d:Lk(e,n,g=>{const m=g.audioGroups,y=t.filter(x=>!m||m.indexOf(x.groupId)!==-1);return Ji(r,y,i)>-1})}function Lk(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function wg(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class Iae extends wi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:u}=a;if(!i||!u)return;const c=performance.now(),h=s?s.stats:i.stats,d=s?s.duration:i.duration,g=c-h.loading.start,m=a.minAutoLevel,y=i.level,x=this._nextAutoLevel;if(h.aborted||h.loaded&&h.loaded===h.total||y<=m){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const b=x>-1&&x!==y,E=!!t||b;if(!E&&(u.paused||!u.playbackRate||!u.readyState))return;const S=a.mainForwardBufferInfo;if(!E&&S===null)return;const T=this.bwEstimator.getEstimateTTFB(),I=Math.abs(u.playbackRate);if(g<=Math.max(T,1e3*(d/(I*2))))return;const w=S?S.len/I:0,R=h.loading.first?h.loading.first-h.loading.start:-1,_=h.loaded&&R>-1,C=this.getBwEstimate(),k=a.levels,D=k[y],U=Math.max(h.loaded,Math.round(d*(i.bitrate||D.averageBitrate)/8));let N=_?g-R:g;N<1&&_&&(N=Math.min(g,h.loaded*8/C));const q=_?h.loaded*1e3/N:0,X=T/1e3,V=q?(U-h.loaded)/q:U*8/C+X;if(V<=w)return;const H=q?q*8:C,K=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,Y=this.hls.config.abrBandWidthUpFactor;let ee=Number.POSITIVE_INFINITY,Q;for(Q=y-1;Q>m;Q--){const de=k[Q].maxBitrate,oe=!k[Q].details||K;if(ee=this.getTimeToLoadFrag(X,H,d*de,oe),ee<Math.min(w,d+X))break}if(ee>=V||ee>d*10)return;_?this.bwEstimator.sample(g-Math.min(T,R),h.loaded):this.bwEstimator.sampleTTFB(g);const $=k[Q].maxBitrate;this.getBwEstimate()*Y>$&&this.resetEstimator($);const F=this.findBestLevel($,m,Q,0,w,1,1);F>-1&&(Q=F),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${w.toFixed(3)} s
      Estimated load time for current fragment: ${V.toFixed(3)} s
      Estimated load time for down switch fragment: ${ee.toFixed(3)} s
      TTFB estimate: ${R|0} ms
      Current BW estimate: ${Ye(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Q} @ ${$|0} bps`),a.nextLoadLevel=a.nextAutoLevel=Q,this.clearTimer();const Z=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Q&&Q>0){const de=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Q>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${de.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Q>m){let oe=this.findBestLevel(this.hls.levels[m].bitrate,m,Q,0,de,1,1);oe===-1&&(oe=m),this.hls.nextLoadLevel=this.hls.nextAutoLevel=oe,this.resetEstimator(this.hls.levels[oe].bitrate)}}};b||V>ee*2?Z():this.timer=self.setInterval(Z,ee*1e3),a.trigger(j.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:h})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Pse(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(j.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Te.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),o=s?s.stats:n.stats,u=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,n,i){const s=e+n/t,a=i?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,s=i.end-i.first;Ye(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Ze.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,u=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:u},a.realBitrate=Math.round(8*o/u)}if(t.bitrateTest){const s={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(j.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Ze.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,t,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:s,minAutoLevel:a}=n,o=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),c=this.getStarvationDelay();let h=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){const b=this.findBestLevel(u,a,i,c,0,h,d);if(b>=0)return this.rebufferNotice=-1,b}let g=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const b=this.bitrateTestDelay;b&&(g=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-b,this.info(`bitrate test took ${Math.round(1e3*b)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=d=1)}const m=this.findBestLevel(u,a,i,c,g,h,d);if(this.rebufferNotice!==m&&(this.rebufferNotice=m,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`)),m>-1)return m;const y=n.levels[a],x=n.loadLevelObj;return x&&y?.bitrate<x.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,s,a,o){var u;const c=i+s,h=this.lastLoadedFragLevel,d=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:m}=this,{levels:y,allAudioTracks:x,loadLevel:b,config:E}=this.hls;if(y.length===1)return 0;const S=y[d],T=!!((u=this.hls.latestLevelDetails)!=null&&u.live),I=b===-1||h===-1;let w,R="SDR",_=S?.frameRate||0;const{audioPreference:C,videoPreference:k}=E,D=this.audioTracksByGroup||(this.audioTracksByGroup=F3(x));let U=-1;if(I){if(this.firstSelection!==-1)return this.firstSelection;const H=this.codecTiers||(this.codecTiers=Tae(y,D,t,n)),K=Eae(H,R,e,C,k),{codecSet:Y,videoRanges:ee,minFramerate:Q,minBitrate:$,minIndex:F,preferHDR:Z}=K;U=F,w=Y,R=Z?ee[ee.length-1]:ee[0],_=Q,e=Math.max(e,$),this.log(`picked start tier ${$t(K)}`)}else w=S?.codecSet,R=S?.videoRange;const N=m?m.duration:g?g.duration:0,q=this.bwEstimator.getEstimateTTFB()/1e3,X=[];for(let H=n;H>=t;H--){var V;const K=y[H],Y=H>d;if(!K)continue;if(E.useMediaCapabilities&&!K.supportedResult&&!K.supportedPromise){const oe=navigator.mediaCapabilities;typeof oe?.decodingInfo=="function"&&hae(K,D,R,_,e,C)?(K.supportedPromise=U3(K,D,oe,this.supportedCache),K.supportedPromise.then(Se=>{if(!this.hls)return;K.supportedResult=Se;const ae=this.hls.levels,re=ae.indexOf(K);Se.error?this.warn(`MediaCapabilities decodingInfo error: "${Se.error}" for level ${re} ${$t(Se)}`):Se.supported?Se.decodingInfoResults.some(te=>te.smooth===!1||te.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${re} not smooth or powerEfficient: ${$t(Se)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${re} ${$t(Se)}`),re>-1&&ae.length>1&&(this.log(`Removing unsupported level ${re}`),this.hls.removeLevel(re),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Se=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Se}`)})):K.supportedResult=N3}if((w&&K.codecSet!==w||R&&K.videoRange!==R||Y&&_>K.frameRate||!Y&&_>0&&_<K.frameRate||(V=K.supportedResult)!=null&&(V=V.decodingInfoResults)!=null&&V.some(oe=>oe.smooth===!1))&&(!I||H!==U)){X.push(H);continue}const ee=K.details,Q=(m?ee?.partTarget:ee?.averagetargetduration)||N;let $;Y?$=o*e:$=a*e;const F=N&&i>=N*2&&s===0?K.averageBitrate:K.maxBitrate,Z=this.getTimeToLoadFrag(q,$,F*Q,ee===void 0);if($>=F&&(H===h||K.loadError===0&&K.fragmentError===0)&&(Z<=q||!Ye(Z)||T&&!this.bitrateTestDelay||Z<c)){const oe=this.forcedAutoLevel;return H!==b&&(oe===-1||oe!==b)&&(X.length&&this.trace(`Skipped level(s) ${X.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${y[X[0]].codecs}" ${y[X[0]].videoRange}; not compatible with "${w}" ${R}`),this.info(`switch candidate:${d}->${H} adjustedbw(${Math.round($)})-bitrate=${Math.round($-F)} ttfb:${q.toFixed(1)} avgDuration:${Q.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Z.toFixed(1)} firstSelection:${I} codecSet:${K.codecSet} videoRange:${K.videoRange} hls.loadLevel:${b}`)),I&&(this.firstSelection=H),H}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const $3={search:function(r,e){let t=0,n=r.length-1,i=null,s=null;for(;t<=n;){i=(t+n)/2|0,s=r[i];const a=e(s);if(a>0)t=i+1;else if(a<0)n=i-1;else return s}return null}};function Oae(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Ye(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let s=0;s<r.length;++s){const a=r[s];if(Lae(e,t,a))return a}return null}function Jo(r,e,t=0,n=0,i=.005){let s=null;if(r){s=e[1+r.sn-e[0].sn]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),s&&r.level!==s.level&&s.end<=r.end&&(s=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!r||r.level===s.level)&&Ck(t,n,s)===0||Rae(s,r,Math.min(i,n))))return s;const a=$3.search(e,Ck.bind(null,t,n));return a&&(a!==r||!s)?a:s}function Rae(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),t);return r.start<=n}return!1}function Ck(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function Lae(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function G3(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:i}=r;i&&(n=n.concat(i));let s;return $3.search(n,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=t?1:a.start>t?-1:0)),s||null}return null}function _g(r){switch(r.details){case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_TIMEOUT:case Te.LEVEL_LOAD_TIMEOUT:case Te.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function z3(r){return r.details.startsWith("key")}function H3(r){return z3(r)&&!!r.frag&&!r.frag.decryptdata}function Pk(r,e){const t=_g(e);return r.default[`${t?"timeout":"error"}Retry`]}function O1(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function Dk(r){return Rt(Rt({},r),{errorRetry:null,timeoutRetry:null})}function Ig(r,e,t,n){if(!r)return!1;const i=n?.code,s=e<r.maxNumRetry&&(Cae(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,s):s}function Cae(r){return aT(r)||!!r&&(r<400||r>499)}function aT(r){return r===0&&navigator.onLine===!1}var qr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Wn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class Pae extends wi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(j.ERROR,this.onError,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(j.ERROR,this.onError,this),e.off(j.ERROR,this.onErrorOut,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===Ze.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(a=>i.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,s=t.context;switch(t.details){case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Te.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=uu();return}case Te.FRAG_GAP:case Te.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=qr.SendAlternateToPenaltyBox;return}case Te.LEVEL_EMPTY_ERROR:case Te.LEVEL_PARSING_ERROR:{var a;const u=t.parent===Ze.MAIN?t.level:i.loadLevel;t.details===Te.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u))}return;case Te.LEVEL_LOAD_ERROR:case Te.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level));return;case Te.AUDIO_TRACK_LOAD_ERROR:case Te.AUDIO_TRACK_LOAD_TIMEOUT:case Te.SUBTITLE_LOAD_ERROR:case Te.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const u=i.loadLevelObj;if(u&&(s.type===yt.AUDIO_TRACK&&u.hasAudioGroup(s.groupId)||s.type===yt.SUBTITLE_TRACK&&u.hasSubtitleGroup(s.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=qr.SendAlternateToPenaltyBox,t.errorAction.flags=Wn.MoveAllAlternatesMatchingHost;return}}return;case Te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:qr.SendAlternateToPenaltyBox,flags:Wn.MoveAllAlternatesMatchingHDCP};return;case Te.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Te.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Te.KEY_SYSTEM_NO_SESSION:t.errorAction={action:qr.SendAlternateToPenaltyBox,flags:Wn.MoveAllAlternatesMatchingKey};return;case Te.BUFFER_ADD_CODEC_ERROR:case Te.REMUX_ALLOC_ERROR:case Te.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:i.loadLevel)}return;case Te.INTERNAL_EXCEPTION:case Te.BUFFER_APPENDING_ERROR:case Te.BUFFER_FULL_ERROR:case Te.LEVEL_SWITCH_ERROR:case Te.BUFFER_STALLED_ERROR:case Te.BUFFER_SEEK_OVER_HOLE:case Te.BUFFER_NUDGE_ON_STALL:t.errorAction=uu();return}t.type===nt.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=uu())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=Pk(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(Ig(i,s,_g(e),e.response))return{action:qr.RetryRequest,flags:Wn.None,retryConfig:i,retryCount:s};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=Pk(z3(e)?a:s,e),u=t.levels.reduce((h,d)=>h+d.fragmentError,0);if(i&&(e.details!==Te.FRAG_GAP&&i.fragmentError++,!H3(e)&&Ig(o,u,_g(e),e.response)))return{action:qr.RetryRequest,flags:Wn.None,retryConfig:o,retryCount:u};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=u),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var s,a;const c=e.details;i.loadError++,c===Te.BUFFER_APPEND_ERROR&&i.fragmentError++;let h=-1;const{levels:d,loadLevel:g,minAutoLevel:m,maxAutoLevel:y}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const x=(s=e.frag)==null?void 0:s.type,E=(x===Ze.AUDIO&&c===Te.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Te.BUFFER_ADD_CODEC_ERROR||c===Te.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:R})=>i.audioCodec!==R),T=e.sourceBufferName==="video"&&(c===Te.BUFFER_ADD_CODEC_ERROR||c===Te.BUFFER_APPEND_ERROR)&&d.some(({codecSet:R,audioCodec:_})=>i.codecSet!==R&&i.audioCodec===_),{type:I,groupId:w}=(a=e.context)!=null?a:{};for(let R=d.length;R--;){const _=(R+g)%d.length;if(_!==g&&_>=m&&_<=y&&d[_].loadError===0){var o,u;const C=d[_];if(c===Te.FRAG_GAP&&x===Ze.MAIN&&e.frag){const k=d[_].details;if(k){const D=Jo(e.frag,k.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else{if(I===yt.AUDIO_TRACK&&C.hasAudioGroup(w)||I===yt.SUBTITLE_TRACK&&C.hasSubtitleGroup(w))continue;if(x===Ze.AUDIO&&(o=i.audioGroups)!=null&&o.some(k=>C.hasAudioGroup(k))||x===Ze.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(k=>C.hasSubtitleGroup(k))||E&&i.audioCodec===C.audioCodec||T&&i.codecSet===C.codecSet||!E&&i.codecSet!==C.codecSet)continue}h=_;break}}if(h>-1&&n.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:qr.SendAlternateToPenaltyBox,flags:Wn.None,nextAutoLevel:h}}return{action:qr.SendAlternateToPenaltyBox,flags:Wn.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case qr.DoNothing:break;case qr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Te.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,s=n.nextAutoLevel;switch(i){case Wn.None:this.switchLevel(e,s);break;case Wn.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),c=t.levels[u],h=c?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=h,h==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(h){t.maxHdcpLevel=sT[sT.indexOf(h)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Wn.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const c=this.hls.levels,h=c.length;for(let g=h;g--;)if(this.variantHasKey(c[g],u)){var a,o;this.log(`Banned key found in level ${g} (${c[g].bitrate}bps) or audio group "${(a=c[g].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${Vr(u.keyId||[])}`),c[g].fragmentError++,c[g].loadError++,this.log(`Removing level ${g} with key error (${e.error})`),this.hls.removeLevel(g)}const d=e.frag;if(this.hls.levels.length<h)n.resolved=!0;else if(d&&d.type!==Ze.MAIN){const g=d.decryptdata;g&&!u.matches(g)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,s)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Te.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=iT(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}}function uu(r){const e={action:qr.DoNothing,flags:Wn.None};return r&&(e.resolved=!0),e}var wr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Dae{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,s=Object.keys(i);for(let a=s.length;a--;){const o=i[s[a]];if(o?.body.type===t&&(!n||o.buffered)){const u=o.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,n,i,s){this.timeRanges&&(this.timeRanges[e]=t);const a=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const u=this.fragments[o];if(!u||a>=u.body.sn)return;if(!u.buffered&&(!u.loaded||s)){u.body.type===n&&this.removeFragment(u.body);return}const c=u.range[e];if(c){if(c.time.length===0){this.removeFragment(u.body);return}c.time.some(h=>{const d=!this.isTimeBuffered(h.startPTS,h.endPTS,t);return d&&this.removeFragment(u.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=Wl(n),s=this.fragments[i];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(o=>{const u=n.elementaryStreams[o];if(!u)return;const c=t[o],h=a||u.partial===!0;s.range[o]=this.getBufferedTimes(n,e.part,h,c)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,n),Od(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=kk(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Wl(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,n,i){const s={time:[],partial:n},a=e.start,o=e.end,u=e.minEndPTS||o,c=e.maxStartPTS||a;for(let h=0;h<i.length;h++){const d=i.start(h)-this.bufferPadding,g=i.end(h)+this.bufferPadding;if(c>=d&&u<=g){s.time.push({startPTS:Math.max(a,i.start(h)),endPTS:Math.min(o,i.end(h))});break}else if(a<g&&o>d){const m=Math.max(a,i.start(h)),y=Math.min(o,i.end(h));y>m&&(s.partial=!0,s.time.push({startPTS:m,endPTS:y}))}else if(o<=d)break}return s}getPartialFragment(e){let t=null,n,i,s,a=0;const{bufferPadding:o,fragments:u}=this;return Object.keys(u).forEach(c=>{const h=u[c];h&&Od(h)&&(i=h.body.start-o,s=h.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(t=h.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Od(t))}getState(e){const t=Wl(e),n=this.fragments[t];return n?n.buffered?Od(n)?wr.PARTIAL:wr.OK:wr.APPENDING:wr.NOT_LOADED}isTimeBuffered(e,t,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&t<=s)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,s=Wl(n);this.fragments[s]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:s,type:a}=t;if(n.sn==="initSegment")return;const o=n.type;if(i){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(i)}this.timeRanges=s;const u=s[a];this.detectEvictedFragments(a,u,o,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Wl(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const s=t[n[i]];if(s?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const u=o.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(o.buffered||s)&&this.removeFragment(u)})}removeFragment(e){const t=Wl(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=kk(n,s=>s.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function Od(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function Wl(r){return`${r.type}_${r.level}_${r.sn}`}function kk(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var no={cbc:0,ctr:1};class kae{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case no.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case no.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Mae(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class Nae{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],u=this.invSubMix,c=u[0],h=u[1],d=u[2],g=u[3],m=new Uint32Array(256);let y=0,x=0,b=0;for(b=0;b<256;b++)b<128?m[b]=b<<1:m[b]=b<<1^283;for(b=0;b<256;b++){let E=x^x<<1^x<<2^x<<3^x<<4;E=E>>>8^E&255^99,e[y]=E,t[E]=y;const S=m[y],T=m[S],I=m[T];let w=m[E]*257^E*16843008;i[y]=w<<24|w>>>8,s[y]=w<<16|w>>>16,a[y]=w<<8|w>>>24,o[y]=w,w=I*16843009^T*65537^S*257^y*16843008,c[E]=w<<24|w>>>8,h[E]=w<<16|w>>>16,d[E]=w<<8|w>>>24,g[E]=w,y?(y=S^m[m[m[I^S]]],x^=m[m[x]]):y=x=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,u;const c=this.keySchedule=new Uint32Array(a),h=this.invKeySchedule=new Uint32Array(a),d=this.sBox,g=this.rcon,m=this.invSubMix,y=m[0],x=m[1],b=m[2],E=m[3];let S,T;for(o=0;o<a;o++){if(o<s){S=c[o]=t[o];continue}T=S,o%s===0?(T=T<<8|T>>>24,T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255],T^=g[o/s|0]<<24):s>6&&o%s===4&&(T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255]),c[o]=S=(c[o-s]^T)>>>0}for(u=0;u<a;u++)o=a-u,u&3?T=c[o]:T=c[o-4],u<4||o<=4?h[u]=T:h[u]=y[d[T>>>24]]^x[d[T>>>16&255]]^b[d[T>>>8&255]]^E[d[T&255]],h[u]=h[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,u=o[0],c=o[1],h=o[2],d=o[3],g=this.uint8ArrayToUint32Array_(n);let m=g[0],y=g[1],x=g[2],b=g[3];const E=new Int32Array(e),S=new Int32Array(E.length);let T,I,w,R,_,C,k,D,U,N,q,X,V,H;const K=this.networkToHostOrderSwap;for(;t<E.length;){for(U=K(E[t]),N=K(E[t+1]),q=K(E[t+2]),X=K(E[t+3]),_=U^s[0],C=X^s[1],k=q^s[2],D=N^s[3],V=4,H=1;H<i;H++)T=u[_>>>24]^c[C>>16&255]^h[k>>8&255]^d[D&255]^s[V],I=u[C>>>24]^c[k>>16&255]^h[D>>8&255]^d[_&255]^s[V+1],w=u[k>>>24]^c[D>>16&255]^h[_>>8&255]^d[C&255]^s[V+2],R=u[D>>>24]^c[_>>16&255]^h[C>>8&255]^d[k&255]^s[V+3],_=T,C=I,k=w,D=R,V=V+4;T=a[_>>>24]<<24^a[C>>16&255]<<16^a[k>>8&255]<<8^a[D&255]^s[V],I=a[C>>>24]<<24^a[k>>16&255]<<16^a[D>>8&255]<<8^a[_&255]^s[V+1],w=a[k>>>24]<<24^a[D>>16&255]<<16^a[_>>8&255]<<8^a[C&255]^s[V+2],R=a[D>>>24]<<24^a[_>>16&255]<<16^a[C>>8&255]<<8^a[k&255]^s[V+3],S[t]=K(T^m),S[t+1]=K(R^y),S[t+2]=K(w^x),S[t+3]=K(I^b),m=U,y=N,x=q,b=X,t=t+4}return S.buffer}}class Bae{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=Uae(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Uae(r){switch(r){case no.cbc:return"AES-CBC";case no.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const jae=16;class R1{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Mae(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,n,i);const u=this.flush();u?s(u.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:s,currentResult:a,remainderData:o}=this;if(i!==no.cbc||t.byteLength!==16)return Ct.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Ti(o,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;s&&(n=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Nae),c.expandKey(t);const h=a;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,h||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new Bae(this.subtle,t,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new kae(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Ct.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%jae;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Ct.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Mk=Math.pow(2,17);class Fae{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){u(Bk(e));return}else e.gap=!1;const c=this.loader=s?new s(i):new a(i),h=Nk(e);e.loader=c;const d=Dk(i.fragLoadPolicy.default),g={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Mk};e.stats=c.stats;const m={onSuccess:(y,x,b,E)=>{this.resetLoader(e,c);let S=y.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),o({frag:e,part:null,payload:S,networkDetails:E})},onError:(y,x,b,E)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Rt({url:n,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:b,stats:E}))},onAbort:(y,x,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:(y,x,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:b,stats:y}))}};t&&(m.onProgress=(y,x,b,E)=>t({frag:e,part:null,payload:b,networkDetails:E})),c.load(h,g,m)})}loadPart(e,t,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(Bk(e,t));return}const c=this.loader=s?new s(i):new a(i),h=Nk(e,t);e.loader=c;const d=Dk(i.fragLoadPolicy.default),g={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Mk};t.stats=c.stats,c.load(h,g,{onSuccess:(m,y,x,b)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const E={frag:e,part:t,payload:m.data,networkDetails:b};n(E),o(E)},onError:(m,y,x,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Rt({url:h.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:x,stats:b}))},onAbort:(m,y,x)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:x,stats:m}))},onTimeout:(m,y,x)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:x,stats:m}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,s=i.total;if(n.loaded+=i.loaded,s){const u=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/s),u),d=(u-c)*Math.round(n.loaded/c);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Nk(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(Ye(i)&&Ye(s)){var a;let o=i,u=s;if(r.sn==="initSegment"&&$ae((a=r.decryptdata)==null?void 0:a.method)){const c=s-i;c%16&&(u=s+(16-c%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=u}return n}function Bk(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:nt.MEDIA_ERROR,details:Te.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new Ns(n)}function $ae(r){return r==="AES-128"||r==="AES-256"}class Ns extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class K3 extends wi{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class L1{constructor(e,t,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Rd(),this.buffering={audio:Rd(),video:Rd(),audiovideo:Rd()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=s,this.partial=a}}function Rd(){return{start:0,executeStart:0,executeEnd:0,end:0}}const Uk={length:0,start:()=>0,end:()=>0};class ft{static isBuffered(e,t){if(e){const n=ft.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=ft.getBuffered(e);return ft.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=ft.bufferedRanges(e);if(i.length)return ft.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((h,d)=>h.start-d.start||d.end-h.end);let i=-1,s=[];if(n)for(let h=0;h<e.length;h++){t>=e[h].start&&t<=e[h].end&&(i=h);const d=s.length;if(d){const g=s[d-1].end;e[h].start-g<n?e[h].end>g&&(s[d-1].end=e[h].end):s.push(e[h])}else s.push(e[h])}else s=e;let a=0,o,u=t,c=t;for(let h=0;h<s.length;h++){const d=s[h].start,g=s[h].end;if(i===-1&&t>=d&&t<=g&&(i=h),t+n>=d&&t<g)u=d,c=g,a=c-t;else if(t+n<d){o=d;break}}return{len:a,start:u||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||Uk}catch(t){return Ct.log("failed to get media.buffered",t),Uk}}}const q3=/\{\$([a-zA-Z0-9-_]+)\}/g;function jk(r){return q3.test(r)}function oT(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(q3,n=>{const i=n.substring(2,n.length-1),s=t?.[i];return s===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function Fk(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function Gae(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const zae=/^(\d+)x(\d+)$/,$k=/(.+?)=(".*?"|.*?)(?:,|$)/g;class er{constructor(e,t){typeof e=="string"&&(e=er.parseAttrList(e,t)),Mt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=zae.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={};for($k.lastIndex=0;(n=$k.exec(e))!==null;){const a=n[1].trim();let o=n[2];const u=o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1;let c=!1;if(u)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(u||c))o=oT(t,o);else if(!c&&!u)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ct.warn(`${e}: attribute ${a} is missing quotes`)}i[a]=o}return i}}const Hae="com.apple.hls.interstitial";function Kae(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function qae(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class V3{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(i=t?.tagOrder)!=null?i:n,t){const s=t.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){Ct.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Mt(new er({}),s,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=t?.endDate||new Date(this.attr["END-DATE"]);Ye(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ct.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ye(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Hae}get isValid(){return!!this.id&&!this._badValueForSameId&&Ye(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Vae=10;class Wae{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Ye(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Vae}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Og(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function Gk(r,e){return!r&&!e?!0:!r||!e?!1:Og(r,e)}function cu(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function C1(r){switch(r){case"AES-128":case"AES-256":return no.cbc;case"AES-256-CTR":return no.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function P1(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function lT(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function Yae(r){const e=lT(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function W3(r){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function Y3(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),t=P1(a)):t=Yae(a)}}return t}const Rg=typeof self<"u"?self:void 0;var tr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Wr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ep(r){switch(r){case Wr.FAIRPLAY:return tr.FAIRPLAY;case Wr.PLAYREADY:return tr.PLAYREADY;case Wr.WIDEVINE:return tr.WIDEVINE;case Wr.CLEARKEY:return tr.CLEARKEY}}function Pb(r){switch(r){case tr.FAIRPLAY:return Wr.FAIRPLAY;case tr.PLAYREADY:return Wr.PLAYREADY;case tr.WIDEVINE:return Wr.WIDEVINE;case tr.CLEARKEY:return Wr.CLEARKEY}}function zc(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[tr.FAIRPLAY,tr.WIDEVINE,tr.PLAYREADY,tr.CLEARKEY].filter(i=>!!e[i]):[];return!n[tr.WIDEVINE]&&t&&n.push(tr.WIDEVINE),n}const X3=(function(r){return Rg!=null&&(r=Rg.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function Xae(r,e,t,n){let i;switch(r){case tr.FAIRPLAY:i=["cenc","sinf"];break;case tr.WIDEVINE:case tr.PLAYREADY:i=["cenc"];break;case tr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return Qae(i,e,t,n)}function Qae(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Zae(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function Q3(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const u=P1(o).subarray(0,16);return W3(u),u}}return null}let Yl={};class Za{static clearKeyUriToKeyIdMap(){Yl={}}static setKeyIdForUri(e,t){Yl[e]=t}static addKeyIdForUri(e){const t=Object.keys(Yl).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,t),Yl[e]=n,n}constructor(e,t,n,i=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!cu(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(w3(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Og(e.keyFormatVersions,this.keyFormatVersions)&&Gk(e.iv,this.iv)&&Gk(e.keyId,this.keyId)}isSupported(){if(this.method){if(cu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Wr.FAIRPLAY:case Wr.WIDEVINE:case Wr.PLAYREADY:case Wr.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(cu(this.method)){let s=this.iv;return s||(typeof e!="number"&&(Ct.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=eoe(e)),new Za(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=Yl[this.uri];if(s&&!Og(this.keyId,s)&&Za.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=Y3(this.uri);if(n)switch(this.keyFormat){case Wr.WIDEVINE:if(this.pssh=n,!this.keyId){const s=nae(n.buffer);if(s.length){var i;const a=s[0];this.keyId=(i=a.kids)!=null&&i.length?a.kids[0]:null}}this.keyId||(this.keyId=zk(t));break;case Wr.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=rae(s,null,n),this.keyId=Q3(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){const a=new Uint8Array(16);a.set(s,16-s.length),s=a}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=Jae(t),s||(s=zk(t),s||(s=Yl[this.uri])),s&&(this.keyId=s,Za.setKeyIdForUri(this.uri,s))}return this}}function Jae(r){const e=r?.[Wr.WIDEVINE];return e?e.keyId:null}function zk(r){const e=r?.[Wr.PLAYREADY];if(e){const t=Y3(e.uri);if(t)return Q3(t)}return null}function eoe(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const Hk=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Kk=/#EXT-X-MEDIA:(.*)/g,toe=/^#EXT(?:INF|-X-TARGETDURATION):/m,Db=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),roe=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class es{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return T1.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return toe.test(e)}static parseMasterPlaylist(e,t){const n=jk(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(Hk.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let a;for(;(a=Hk.exec(e))!=null;)if(a[1]){var o;const c=new er(a[1],i),h=oT(i,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:es.resolve(h,t)},g=c.decimalResolution("RESOLUTION");g&&(d.width=g.width,d.height=g.height),Wk(c.CODECS,d);const m=c["SUPPLEMENTAL-CODECS"];m&&(d.supplemental={},Wk(m,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||s.push(d),i.levels.push(d)}else if(a[3]){const c=a[3],h=a[4];switch(c){case"SESSION-DATA":{const d=new er(h,i),g=d["DATA-ID"];g&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[g]=d);break}case"SESSION-KEY":{const d=qk(h,t,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):Ct.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const d=new er(h,i);Fk(i,d,t)}break}case"CONTENT-STEERING":{const d=new er(h,i);i.contentSteering={uri:es.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=Vk(h);break}}}const u=s.length>0&&s.length<i.levels.length;return i.levels=u?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const s={},a=n.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(Kk.lastIndex=0;(i=Kk.exec(e))!==null;){const c=new er(i[1],n),h=c.TYPE;if(h){const d=o[h],g=s[h]||[];s[h]=g;const m=c.LANGUAGE,y=c["ASSOC-LANGUAGE"],x=c.CHANNELS,b=c.CHARACTERISTICS,E=c["INSTREAM-ID"],S={attrs:c,bitrate:0,id:u++,groupId:c["GROUP-ID"]||"",name:c.NAME||m||"",type:h,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:m,url:c.URI?es.resolve(c.URI,t):""};if(y&&(S.assocLang=y),x&&(S.channels=x),b&&(S.characteristics=b),E&&(S.instreamId=E),d!=null&&d.length){const T=es.findGroup(d,S.groupId)||d[0];Yk(S,T,"audioCodec"),Yk(S,T,"textCodec")}g.push(S)}}return s}static parseLevelPlaylist(e,t,n,i,s,a){var o;const u={url:t},c=new Wae(t),h=c.fragments,d=[];let g=null,m=0,y=0,x=0,b=0,E=0,S=null,T=new Rb(i,u),I,w,R,_=-1,C=!1,k=null,D;if(Db.lastIndex=0,c.m3u8=e,c.hasVariableRefs=jk(e),((o=Db.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(I=Db.exec(e))!==null;){C&&(C=!1,T=new Rb(i,u),T.playlistOffset=x,T.setStart(x),T.sn=m,T.cc=b,E&&(T.bitrate=E),T.level=n,g&&(T.initSegment=g,g.rawProgramDateTime&&(T.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),k&&(T.setByteRange(k),k=null)));const X=I[1];if(X){T.duration=parseFloat(X);const V=(" "+I[2]).slice(1);T.title=V||null,T.tagList.push(V?["INF",X,V]:["INF",X])}else if(I[3]){if(Ye(T.duration)){T.playlistOffset=x,T.setStart(x),R&&Qk(T,R,c),T.sn=m,T.level=n,T.cc=b,h.push(T);const V=(" "+I[3]).slice(1);T.relurl=oT(c,V),uT(T,S,d),S=T,x+=T.duration,m++,y=0,C=!0}}else{if(I=I[0].match(roe),!I){Ct.warn("No matches on slow regex match for level playlist!");continue}for(w=1;w<I.length&&I[w]===void 0;w++);const V=(" "+I[w]).slice(1),H=(" "+I[w+1]).slice(1),K=I[w+2]?(" "+I[w+2]).slice(1):null;switch(V){case"BYTERANGE":S?T.setByteRange(H,S):T.setByteRange(H);break;case"PROGRAM-DATE-TIME":T.rawProgramDateTime=H,T.tagList.push(["PROGRAM-DATE-TIME",H]),_===-1&&(_=h.length);break;case"PLAYLIST-TYPE":c.type&&Ps(c,V,I),c.type=H.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?Ps(c,V,I):h.length>0&&Zk(c,V,I),m=c.startSN=parseInt(H);break;case"SKIP":{c.skippedSegments&&Ps(c,V,I);const Y=new er(H,c),ee=Y.decimalInteger("SKIPPED-SEGMENTS");if(Ye(ee)){c.skippedSegments+=ee;for(let $=ee;$--;)h.push(null);m+=ee}const Q=Y.enumeratedString("RECENTLY-REMOVED-DATERANGES");Q&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(Q.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&Ps(c,V,I),c.targetduration=Math.max(parseInt(H),1);break;case"VERSION":c.version!==null&&Ps(c,V,I),c.version=parseInt(H);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||Ps(c,V,I),c.live=!1;break;case"#":(H||K)&&T.tagList.push(K?[H,K]:[H]);break;case"DISCONTINUITY":b++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([V]);break;case"BITRATE":T.tagList.push([V,H]),E=parseInt(H)*1e3,Ye(E)?T.bitrate=E:E=0;break;case"DATERANGE":{const Y=new er(H,c),ee=new V3(Y,c.dateRanges[Y.ID],c.dateRangeTagCount);c.dateRangeTagCount++,ee.isValid||c.skippedSegments?c.dateRanges[ee.id]=ee:Ct.warn(`Ignoring invalid DATERANGE tag: "${H}"`),T.tagList.push(["EXT-X-DATERANGE",H]);break}case"DEFINE":{{const Y=new er(H,c);"IMPORT"in Y?Gae(c,Y,a):Fk(c,Y,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?Ps(c,V,I):h.length>0&&Zk(c,V,I),c.startCC=b=parseInt(H);break;case"KEY":{const Y=qk(H,t,c);if(Y.isSupported()){if(Y.method==="NONE"){R=void 0;break}R||(R={});const ee=R[Y.keyFormat];ee!=null&&ee.matches(Y)||(ee&&(R=Mt({},R)),R[Y.keyFormat]=Y)}else Ct.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${H}"`);break}case"START":c.startTimeOffset=Vk(H);break;case"MAP":{const Y=new er(H,c);if(T.duration){const ee=new Rb(i,u);Xk(ee,Y,n,R),g=ee,T.initSegment=g,g.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=g.rawProgramDateTime)}else{const ee=T.byteRangeEndOffset;if(ee){const Q=T.byteRangeStartOffset;k=`${ee-Q}@${Q}`}else k=null;Xk(T,Y,n,R),g=T,C=!0}g.cc=b;break}case"SERVER-CONTROL":{D&&Ps(c,V,I),D=new er(H),c.canBlockReload=D.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=D.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&D.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=D.optionalFloat("PART-HOLD-BACK",0),c.holdBack=D.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&Ps(c,V,I);const Y=new er(H);c.partTarget=Y.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Y=c.partList;Y||(Y=c.partList=[]);const ee=y>0?Y[Y.length-1]:void 0,Q=y++,$=new er(H,c),F=new Gse($,T,u,Q,ee);Y.push(F),T.duration+=F.duration;break}case"PRELOAD-HINT":{const Y=new er(H,c);c.preloadHint=Y;break}case"RENDITION-REPORT":{const Y=new er(H,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(Y);break}default:Ct.warn(`line parsed but not handled: ${I}`);break}}}S&&!S.relurl?(h.pop(),x-=S.duration,c.partList&&(c.fragmentHint=S)):c.partList&&(uT(T,S,d),T.cc=b,c.fragmentHint=T,R&&Qk(T,R,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const U=h.length,N=h[0],q=h[U-1];if(x+=c.skippedSegments*c.targetduration,x>0&&U&&q){c.averagetargetduration=x/U;const X=q.sn;c.endSN=X!=="initSegment"?X:0,c.live||(q.endList=!0),_>0&&(ioe(h,_),N&&d.unshift(N))}return c.fragmentHint&&(x+=c.fragmentHint.duration),c.totalduration=x,d.length&&c.dateRangeTagCount&&N&&Z3(d,c),c.endCC=b,c}}function Z3(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];r.push(o),t++}else return;const n=r[t-1],i=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let o=s.length;o--;){const u=e.dateRanges[s[o]],c=u.startDate.getTime();u.tagAnchor=n.ref;for(let h=t;h--;){var a;if(((a=r[h])==null?void 0:a.sn)<e.startSN)break;const d=noe(e,c,r,h,i);if(d!==-1){u.tagAnchor=e.fragments[d].ref;break}}}}function noe(r,e,t,n,i){const s=t[n];if(s){const o=s.programDateTime;if(e>=o||n===0){var a;const u=(((a=t[n+1])==null?void 0:a.start)||i)-s.start;if(e<=o+u*1e3){const c=t[n].sn-r.startSN;if(c<0)return-1;const h=r.fragments;if(h.length>t.length){const g=(t[n+1]||h[h.length-1]).sn-r.startSN;for(let m=g;m>c;m--){const y=h[m].programDateTime;if(e>=y&&e<y+h[m].duration*1e3)return m}}return c}}}return-1}function qk(r,e,t){var n,i;const s=new er(r,t),a=(n=s.METHOD)!=null?n:"",o=s.URI,u=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,h=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!u&&Ct.error(`Invalid IV: ${s.IV}`);const d=o?es.resolve(o,e):"",g=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Za(a,d,h,g,u,s.KEYID)}function Vk(r){const t=new er(r).decimalFloatingPoint("TIME-OFFSET");return Ye(t)?t:null}function Wk(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(s=>_1(s,n));i.length&&(e[`${n}Codec`]=i.map(s=>s.split("/")[0]).join(","),t=t.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=t}function Yk(r,e,t){const n=e[t];n&&(r[t]=n)}function ioe(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function uT(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function Xk(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function Qk(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}function Ps(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function Zk(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function kb(r,e){const t=e.startPTS;if(Ye(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function J3(r,e,t,n,i,s,a){n-t<=0&&(a.warn("Fragment should have a positive duration",e),n=t+e.duration,s=i+e.duration);let u=t,c=n;const h=e.startPTS,d=e.endPTS;if(Ye(h)){const E=Math.abs(h-t);r&&E>r.totalduration?a.warn(`media timestamps and playlist times differ by ${E}s for level ${e.level} ${r.url}`):Ye(e.deltaPTS)?e.deltaPTS=Math.max(E,e.deltaPTS):e.deltaPTS=E,u=Math.max(t,h),t=Math.min(t,h),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,c=Math.min(n,d),n=Math.max(n,d),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const g=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=c,e.endDTS=s;const m=e.sn;if(!r||m<r.startSN||m>r.endSN)return 0;let y;const x=m-r.startSN,b=r.fragments;for(b[x]=e,y=x;y>0;y--)kb(b[y],b[y-1]);for(y=x;y<b.length-1;y++)kb(b[y],b[y+1]);return r.fragmentHint&&kb(b[b.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,g}function soe(r,e,t){if(r===e)return;let n=null;const i=r.fragments;for(let h=i.length-1;h>=0;h--){const d=i[h].initSegment;if(d){n=d;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let s;loe(r,e,(h,d,g,m)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==h.cc){const y=h.cc-d.cc;for(let x=g;x<m.length;x++)m[x].cc+=y;e.endCC=m[m.length-1].cc}Ye(h.startPTS)&&Ye(h.endPTS)&&(d.setStart(d.startPTS=h.startPTS),d.startDTS=h.startDTS,d.maxStartPTS=h.maxStartPTS,d.endPTS=h.endPTS,d.endDTS=h.endDTS,d.minEndPTS=h.minEndPTS,d.setDuration(h.endPTS-h.startPTS),d.duration&&(s=d),e.PTSKnown=e.alignedSliding=!0),h.hasStreams&&(d.elementaryStreams=h.elementaryStreams),d.loader=h.loader,h.hasStats&&(d.stats=h.stats),h.initSegment&&(d.initSegment=h.initSegment,n=h.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&o.forEach(h=>{var d;h&&(!h.initSegment||h.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(h.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(h=>!h),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let h=e.skippedSegments;h--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=aoe(r.dateRanges,e,t));const h=r.fragments.filter(d=>d.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<o.length;d++)o[d].programDateTime===null&&uT(o[d],o[d-1],h);Z3(h,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var u;const h=r$(r,e.startSN-1);e.startCC=(u=h?.cc)!=null?u:a[0].cc}ooe(r.partList,e.partList,(h,d)=>{d.elementaryStreams=h.elementaryStreams,d.stats=h.stats}),s?J3(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,t):e$(r,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const h=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=h),e.driftEndTime=c,e.driftEnd=h}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function aoe(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:i}=e,s=Mt({},r);i&&i.forEach(u=>{delete s[u]});const o=Object.keys(s).length;return o?(Object.keys(n).forEach(u=>{const c=s[u],h=new V3(n[u].attr,c);h.isValid?(s[u]=h,c||(h.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${$t(n[u].attr)}"`)}),s):n}function ooe(r,e,t){if(r&&e){let n=0;for(let i=0,s=r.length;i<=s;i++){const a=r[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):n--}}}function loe(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,s=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=i;c<=s;c++){const h=u[a+c];let d=o[c];if(n&&!d&&h&&(d=e.fragments[c]=h),h&&d){t(h,d,c,o);const g=h.relurl,m=d.relurl;if(g&&uoe(g,m)){e.playlistParsingError=Jk(`media sequence mismatch ${d.sn}:`,r,e,h,d);return}else if(h.cc!==d.cc){e.playlistParsingError=Jk(`discontinuity sequence mismatch (${h.cc}!=${d.cc})`,r,e,h,d);return}}}}function Jk(r,e,t,n,i){return new Error(`${r} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function e$(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,i=r.fragments,s=n>=0;let a=0;if(s&&n<i.length)a=i[n].start;else if(s&&e.startSN===r.endSN+1)a=r.fragmentEnd;else if(s&&t)a=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=r.fragmentStart;else return;cT(e,a)}function cT(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function t$(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const s=n[n.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function r$(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function eM(r,e,t){return r?n$(r.partList,e,t):null}function n$(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function i$(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function uoe(r,e){return r!==e&&e?tM(r)!==tM(e):!1}function tM(r){return r.replace(/\?[^?]*$/,"")}function Vc(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function coe(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function rM(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function s$(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)rM(t[n],r);e.fragmentHint&&rM(e.fragmentHint,r),e.alignedSliding=!0}function foe(r,e){r&&(a$(e,r),e.alignedSliding||Lg(e,r),!e.alignedSliding&&!e.skippedSegments&&e$(r,e,!1))}function a$(r,e){if(!coe(e,r))return;const t=Math.min(e.endCC,r.endCC),n=Vc(e.fragments,t),i=Vc(r.fragments,t);if(!n||!i)return;Ct.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const s=n.start-i.start;s$(s,r)}function Lg(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,s;const a=Math.min(e.endCC,r.endCC);e.startCC<a&&r.startCC<a&&(i=Vc(n,a),s=Vc(t,a)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=Vc(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,u=s.programDateTime;if(!o||!u)return;const c=(u-o)/1e3-(s.start-i.start);s$(c,r)}function pn(r,e,t){kn(r,e,t),r.addEventListener(e,t)}function kn(r,e,t){r.removeEventListener(e,t)}const hoe={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},Ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class D1 extends K3{constructor(e,t,n,i,s){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ge.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:u,mediaBuffer:c,state:h}=this,d=u?u.currentTime:0,g=ft.bufferInfo(c||u,d,a.maxBufferHole),m=!g.len;if(this.log(`Media seeking to ${Ye(d)?d.toFixed(3):d}, state: ${h}, ${m?"out of":"in"} buffer`),this.state===Ge.ENDED)this.resetLoadingState();else if(o){const y=a.maxFragLookUpTolerance,x=o.start-y,b=o.start+o.duration+y;if(m||b<g.start||x>g.end){const E=d>b;(d<x||E)&&(E&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(d>y&&(this.lastCurrentTime=d),!this.loadingParts){const x=Math.max(g.end,d),b=this.shouldLoadParts(this.getLevelDetails(),x);b&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${x.toFixed(2)}`),this.loadingParts=b)}}this.hls.hasEnoughToStart||(this.log(`Setting ${m?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,m&&(this.startPosition=d)),m&&this.state===Ge.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new Fae(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new R1(e.config)}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Ge.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ge.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=ft.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>i&&a<t.edge||this.media.currentTime<e.start)return!1;const u=t.partList;if(u!=null&&u.length){const h=u[u.length-1];return ft.isBuffered(this.media,h.start+h.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;pn(n,"seeking",this.onMediaSeeking),pn(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Ge.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),kn(i,"seeking",this.onMediaSeeking),kn(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Ge.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,n,i).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===Ge.FRAG_LOADING||!this.fragCurrent&&a===Ge.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=Ge.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(j.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===wr.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===wr.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(j.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:s,payload:a}=n,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&cu(o.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,C1(o.method)).catch(c=>{throw i.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{const h=self.performance.now();return i.trigger(j.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:u,tdecrypt:h}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Ge.STOPPED&&(this.state=Ge.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,i;const s=e.tracks;if(s&&!t.encrypted&&((n=s.audio)!=null&&n.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(j.ERROR,{type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?hoe.toString(ft.getBuffered(n)):"(detached)"})`),fr(e)){var i;if(e.type!==Ze.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=Ge.IDLE;return}}const s=(i=this.levels)==null?void 0:i[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=Ge.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(u=>!u),o=new L1(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var s;this.fragCurrent=e;const a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Ge.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(j.KEY_LOADED,g),this.state===Ge.KEY_LOADING&&(this.state=Ge.IDLE),g}),this.hls.trigger(j.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(fr(e)&&(!u||e.sn!==u.sn)){const g=this.shouldLoadParts(t.details,e.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=g)}if(n=Math.max(e.start,n||0),this.loadingParts&&fr(e)){const g=a.partList;if(g&&i){n>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const m=this.getNextPart(g,e,n);if(m>-1){const y=g[m];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${m}/${g.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=Ge.FRAG_LOADING;let x;return o?x=o.then(b=>!b||this.fragContextChanged(b.frag)?null:this.doFragPartsLoad(e,y,t,i)).catch(b=>this.handleFragLoadError(b)):x=this.doFragPartsLoad(e,y,t,i).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(j.FRAG_LOADING,{frag:e,part:y,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):x}else if(!e.url||this.loadedEndOfParts(g,n))return Promise.resolve(null)}}if(fr(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=a.partList)==null?void 0:c.filter(g=>g.loaded).map(g=>`[${g.start}-${g.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Ye(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ge.FRAG_LOADING;const h=this.config.progressive&&e.type!==Ze.SUBTITLE;let d;return h&&o?d=o.then(g=>!g||this.fragContextChanged(g.frag)?null:this.fragmentLoader.load(e,i)).catch(g=>this.handleFragLoadError(g)):d=Promise.all([this.fragmentLoader.load(e,h?i:void 0),o]).then(([g])=>(!h&&i&&i(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(j.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,n,i){return new Promise((s,a)=>{var o;const u=[],c=(o=n.details)==null?void 0:o.partList,h=d=>{this.fragmentLoader.loadPart(e,d,i).then(g=>{u[d.index]=g;const m=g.part;this.hls.trigger(j.FRAG_LOADED,g);const y=eM(n.details,e.sn,d.index+1)||n$(c,e.sn,d.index+1);if(y)h(y);else return s({frag:e,part:m,partsLoaded:u})}).catch(a)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===Te.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===nt.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(j.ERROR,t)}else this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Ge.PARSING){!this.fragCurrent&&this.state!==Ge.STOPPED&&this.state!==Ge.ERROR&&(this.state=Ge.IDLE);return}const{frag:n,part:i,level:s}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a);const o=this.getLevelDetails(),c=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(n,i,s,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const s=e.partList[0];if(s.fragment.type===Ze.SUBTITLE)return!1;const a=s.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=a){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=t[i],u=o.details,c=a>-1?eM(u,s,a):null,h=c?c.fragment:r$(u,s,n);return h?(n&&n!==h&&(h.stats=n.stats),{frag:h,part:c,level:o}):null}bufferFragmentData(e,t,n,i,s){if(this.state!==Ge.PARSING)return;const{data1:a,data2:o}=e;let u=a;if(o&&(u=Ti(a,o)),!u.length)return;const c=this.initPTS[t.cc],h=c?-c.baseTime/c.timescale:void 0,d={type:e.type,frag:t,part:n,chunkMeta:i,offset:h,parent:t.type,data:u};if(this.hls.trigger(j.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ft.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=ft.bufferInfo(t,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!Ye(i))return null;const a=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,a)}getFwdBufferInfoAtPos(e,t,n,i){const s=ft.bufferInfo(e,t,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-t,i);return ft.bufferInfo(e,t,o)}}return s}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),s=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=Ze.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start,o=s.lowLatencyMode&&!!t.partList;let u=null;if(t.live){const d=s.initialLiveManifestSize;if(i<d)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(t);const g=this.hls.startPosition,m=this.hls.liveSyncPosition,y=u?(g!==-1&&g>=a?g:m)||u.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${g} liveSyncPosition: ${m} frag.start: ${(c=u)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=a&&(u=n[0]);if(!u){const d=this.loadingParts?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,d,t)}let h=this.filterReplacedPrimary(u,t);if(!h&&u){const d=u.sn-t.startSN;h=this.filterReplacedPrimary(n[d+1]||null,t)}return this.mapToInitFragWhenRequired(h)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===wr.OK||n===wr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(o!==null&&n.len+o.len>=s){const u=a.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(nM(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(nM(this.config)&&e.type!==Ze.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const a=i.event;if(a){if(a.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&t?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const s=n?.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,s=!1,a=!0;for(let o=0,u=e.length;o<u;o++){const c=e[o];if(a=a&&!c.independent,i>-1&&n<c.start)break;const h=c.loaded;h?i=-1:(s||(c.independent||a)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),i=o),s=h}return i}loadedEndOfParts(e,t){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=Oae(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=G3(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:c}=i,h=n.partList,d=!!(this.loadingParts&&h!=null&&h.length&&u);d&&!this.bitrateTest&&h[h.length-1].fragment.sn===u.sn&&(a=a.concat(u),o=u.sn);let g;if(e<t){var m;const x=e<this.lastCurrentTime||e>t-c||(m=this.media)!=null&&m.paused||!this.startFragRequested?0:c;g=Jo(s,a,e,x)}else g=a[a.length-1];if(g){const y=g.sn-n.startSN,x=this.fragmentTracker.getState(g);if((x===wr.OK||x===wr.PARTIAL&&g.gap)&&(s=g),s&&g.sn===s.sn&&(!d||h[0].fragment.sn>g.sn||!n.live)&&g.level===s.level){const E=a[y+1];g.sn<o&&this.fragmentTracker.getState(E)!==wr.OK?g=E:g=null}}return g}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!t,o=e.alignedSliding&&Ye(s);if(a||!o&&!s){foe(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&Ye(a)?(n=t+a,a<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&fr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Ge.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ge.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const E=this.getCurrentContext(t.chunkMeta);E&&(t.frag=E.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=t.details===Te.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction;if(!o){this.state=Ge.ERROR;return}const{action:u,flags:c,retryCount:h=0,retryConfig:d}=o,g=!!d,m=g&&u===qr.RetryRequest,y=g&&!o.resolved&&c===Wn.MoveAllAlternatesMatchingHost,x=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!m&&y&&fr(i)&&!i.endList&&x&&!H3(t))this.resetFragmentErrors(e),this.treatAsGap(i),o.resolved=!0;else if((m||y)&&h<d.maxNumRetry){var b;const E=aT((b=t.response)==null?void 0:b.code),S=O1(d,h);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+S,this.state=Ge.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,E){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${h+1}/${d.maxNumRetry} in ${S}ms`)}else if(d)if(this.resetFragmentErrors(e),h<d.maxNumRetry)!a&&u!==qr.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${h})`);return}else u===qr.SendAlternateToPenaltyBox?this.state=Ge.WAITING_LEVEL:this.state=Ge.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!aT(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Ge.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Ge.PARSING||this.state===Ge.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,t?.duration||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Ze.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=ft.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ge.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,c)=>{const h=e.elementaryStreams[c];if(h){const d=h.endPTS-h.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),u||!1;const g=i?0:J3(s,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS,this);return this.hls.trigger(j.LEVEL_PTS_UPDATED,{details:s,level:n,drift:g,type:c,frag:e,start:h.startPTS,end:h.endPTS}),!0}return u},!1)){var o;const u=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||u&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),u){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Ge.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(j.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Ze.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,s;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((s=t&&!n?e.endPTS:(n||e).end)!=null?s:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function nM(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class o${constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=doe(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function doe(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const s=r[i];t.set(s,n),n+=s.length}return t}var Mb={exports:{}},iM;function poe(){return iM||(iM=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function s(u,c,h,d,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,d||u,g),y=t?t+c:c;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],m]:u._events[y].push(m):(u._events[y]=m,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=t?t+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,m=d.length,y=new Array(m);g<m;g++)y[g]=d[g].fn;return y},o.prototype.listenerCount=function(c){var h=t?t+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,g,m,y){var x=t?t+c:c;if(!this._events[x])return!1;var b=this._events[x],E=arguments.length,S,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,g),!0;case 5:return b.fn.call(b.context,h,d,g,m),!0;case 6:return b.fn.call(b.context,h,d,g,m,y),!0}for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];b.fn.apply(b.context,S)}else{var I=b.length,w;for(T=0;T<I;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),E){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,h);break;case 3:b[T].fn.call(b[T].context,h,d);break;case 4:b[T].fn.call(b[T].context,h,d,g);break;default:if(!S)for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];b[T].fn.apply(b[T].context,S)}}return!0},o.prototype.on=function(c,h,d){return s(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return s(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,g){var m=t?t+c:c;if(!this._events[m])return this;if(!h)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===h&&(!g||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var x=0,b=[],E=y.length;x<E;x++)(y[x].fn!==h||g&&!y[x].once||d&&y[x].context!==d)&&b.push(y[x]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Mb)),Mb.exports}var goe=poe(),k1=Fse(goe);const bf="1.6.15",Eu={};function moe(){return typeof __HLS_WORKER_BUNDLE__=="function"}function yoe(){const r=Eu[bf];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Eu[bf]=i,i}function voe(r){const e=Eu[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Eu[r]=i,i}function boe(r){const e=Eu[r||bf];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete Eu[r||bf],i&&self.URL.revokeObjectURL(i),n.terminate()}}function l$(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function M1(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function Im(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function xf(r,e){const t=e;let n=0;for(;M1(r,e);){n+=10;const i=Im(r,e+6);n+=i,l$(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function xoe(r,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[t+2],a=s>>2&15;if(a>12){const m=new Error(`invalid ADTS sampling index:${a}`);r.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!0,error:m,reason:m.message});return}const o=(s>>6&3)+1,u=e[t+3]>>6&3|(s&1)<<2,c="mp4a.40."+o,h=i[a];let d=a;(o===5||o===29)&&(d-=3);const g=[o<<3|(d&14)>>1,(d&1)<<7|u<<3];return Ct.log(`manifest codec:${n}, parsed codec:${c}, channels:${u}, rate:${h} (ADTS object type:${o} sampling index:${a})`),{config:g,samplerate:h,channelCount:u,codec:c,parsedCodec:c,manifestCodec:n}}function u$(r,e){return r[e]===255&&(r[e+1]&246)===240}function c$(r,e){return r[e+1]&1?7:9}function N1(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function Soe(r,e){return e+5<r.length}function Cg(r,e){return e+1<r.length&&u$(r,e)}function Eoe(r,e){return Soe(r,e)&&u$(r,e)&&N1(r,e)<=r.length-e}function Toe(r,e){if(Cg(r,e)){const t=c$(r,e);if(e+t>=r.length)return!1;const n=N1(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Cg(r,i)}return!1}function f$(r,e,t,n,i){if(!r.samplerate){const s=xoe(e,t,n,i);if(!s)return;Mt(r,s)}}function h$(r){return 1024*9e4/r}function Aoe(r,e){const t=c$(r,e);if(e+t<=r.length){const n=N1(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function d$(r,e,t,n,i){const s=h$(r.samplerate),a=n+i*s,o=Aoe(e,t);let u;if(o){const{frameLength:d,headerLength:g}=o,m=g+d,y=Math.max(0,t+m-e.length);y?(u=new Uint8Array(m-g),u.set(e.subarray(t+g,e.length),0)):u=e.subarray(t+g,t+m);const x={unit:u,pts:a};return y||r.samples.push(x),{sample:x,length:m,missing:y}}const c=e.length-t;return u=new Uint8Array(c),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:c,missing:-1}}function woe(r,e){return M1(r,e)&&Im(r,e+6)+10<=r.length-e}function _oe(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function Nb(r,e=0,t=1/0){return Ioe(r,e,t,Uint8Array)}function Ioe(r,e,t,n){const i=Ooe(r);let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const a=Roe(r)?r.byteOffset:0,o=(a+r.byteLength)/s,u=(a+e)/s,c=Math.floor(Math.max(0,Math.min(u,o))),h=Math.floor(Math.min(c+Math.max(t,0),o));return new n(i,c,h-c)}function Ooe(r){return r instanceof ArrayBuffer?r:r.buffer}function Roe(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function Loe(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const i=ri(Nb(r.data,1,n)),s=r.data[2+n],a=r.data.subarray(3+n).indexOf(0);if(a===-1)return;const o=ri(Nb(r.data,3+n,a));let u;return i==="-->"?u=ri(Nb(r.data,4+n+a)):u=_oe(r.data.subarray(4+n+a)),e.mimeType=i,e.pictureType=s,e.description=o,e.data=u,e}function Coe(r){if(r.size<2)return;const e=ri(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function Poe(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=ri(r.data.subarray(t),!0);t+=n.length+1;const i=ri(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=ri(r.data.subarray(1));return{key:r.type,info:"",data:e}}function Doe(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=ri(r.data.subarray(t),!0);t+=n.length+1;const i=ri(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=ri(r.data);return{key:r.type,info:"",data:e}}function koe(r){return r.type==="PRIV"?Coe(r):r.type[0]==="W"?Doe(r):r.type==="APIC"?Loe(r):Poe(r)}function Moe(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Im(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const Ld=10,Noe=10;function p$(r){let e=0;const t=[];for(;M1(r,e);){const n=Im(r,e+6);r[e+5]>>6&1&&(e+=Ld),e+=Ld;const i=e+n;for(;e+Noe<i;){const s=Moe(r.subarray(e)),a=koe(s);a&&t.push(a),e+=s.size+Ld}l$(r,e)&&(e+=Ld)}return t}function g$(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function Boe(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function B1(r){const e=p$(r);for(let t=0;t<e.length;t++){const n=e[t];if(g$(n))return Boe(n)}}let Qn=(function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r})({});function Yi(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class U1{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ti(this.cachedData,e),this.cachedData=null);let n=xf(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,u=n?B1(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Ye(u))&&(this.basePTS=Uoe(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Qn.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const h=this.appendFrame(a,e,i);h?(this.frameIndex++,this.lastPTS=h.sample.pts,i+=h.length,s=i):i=c}else woe(e,i)?(n=xf(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Qn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===c&&s!==c){const h=e.slice(s);this.cachedData?this.cachedData=Ti(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:Yi(),id3Track:o,textTrack:Yi()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Yi(),id3Track:this._id3Track,textTrack:Yi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Uoe=(r,e,t)=>{if(Ye(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let Cd=null;const joe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Foe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],$oe=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Goe=[0,1,1,4];function m$(r,e,t,n,i){if(t+24>e.length)return;const s=y$(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,u={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=s.channelCount,r.samplerate=s.sampleRate,r.samples.push(u),{sample:u,length:s.frameLength,missing:0}}}function y$(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,s=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&s!==3){const a=r[e+2]>>1&1,o=r[e+3]>>6,u=t===3?3-n:n===3?3:4,c=joe[u*14+i-1]*1e3,d=Foe[(t===3?0:t===2?1:2)*3+s],g=o===3?1:2,m=$oe[t][n],y=Goe[n],x=m*8*y,b=Math.floor(m*c/d+a)*y;if(Cd===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Cd=T?parseInt(T[1]):0}return!!Cd&&Cd<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:d,channelCount:g,frameLength:b,samplesPerFrame:x}}}function j1(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function v$(r,e){return e+1<r.length&&j1(r,e)}function zoe(r,e){return j1(r,e)&&4<=r.length-e}function b$(r,e){if(e+1<r.length&&j1(r,e)){const n=y$(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===r.length||v$(r,s)}return!1}class Hoe extends U1{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=xf(e,0);let i=n?.length||0;if(b$(e,i))return!1;for(let s=e.length;i<s;i++)if(Toe(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return Eoe(e,t)}appendFrame(e,t,n){f$(e,this.observer,t,n,e.manifestCodec);const i=d$(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const x$=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=r[e];const o=Math.min(n,8),u=8-o;s[0]=4278190080>>>24+u<<u,i[0]=(a[0]&s[0])>>u,t=t?t<<o|i[0]:i[0],e+=1,n-=o}return t};class Koe extends U1{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=S$(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=xf(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&B1(t)!==void 0&&x$(e,n)<16}}function S$(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],u=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+s]*2;if(t+h>e.length)return-1;const d=e[t+6]>>5;let g=0;d===2?g+=2:(d&1&&d!==1&&(g+=2),d&4&&(g+=2));const m=(e[t+6]<<8|e[t+7])>>12-g&1,x=[2,1,2,3,3,4,4,5][d]+m,b=e[t+5]>>3,E=e[t+5]&7,S=new Uint8Array([s<<6|b<<1|E>>2,(E&3)<<6|d<<3|m<<2|u>>4,u<<4&224]),T=1536/o*9e4,I=n+i*T,w=e.subarray(t,t+h);return r.config=S,r.channelCount=x,r.samplerate=o,r.samples.push({unit:w,pts:I}),h}class qoe extends U1{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=xf(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&B1(t)!==void 0&&x$(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(b$(e,n))return Ct.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return zoe(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return m$(e,t,n,this.basePTS,this.frameIndex)}}const Voe=/\/emsg[-/]ID3/i;class Woe{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const s=this.videoTrack=Yi("video",1),a=this.audioTrack=Yi("audio",1),o=this.txtTrack=Yi("text",1);if(this.id3Track=Yi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=C3(e);if(u.video){const{id:c,timescale:h,codec:d,supplemental:g}=u.video;s.id=c,s.timescale=o.timescale=h,s.codec=d,s.supplemental=g}if(u.audio){const{id:c,timescale:h,codec:d}=u.audio;a.id=c,a.timescale=h,a.codec=d}o.id=O3.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return Kse(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ti(this.remainderData,e));const o=Zse(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return s.samples=Ek(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=Ek(e,t),{videoTrack:t,audioTrack:Yi(),id3Track:i,textTrack:Yi()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=mt(e.samples,["emsg"]);i&&i.forEach(s=>{const a=eae(s);if(Voe.test(a.schemeIdUri)){const o=sM(a,t);let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const c=a.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Qn.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=sM(a,t);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Qn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function sM(r,e){return Ye(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class Yoe{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new R1(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,no.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const u=new Uint8Array(o);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,t,n,i,s){const a=k3(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(u=>{s.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}).catch(i)}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const s=e[t].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}class E${constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let s=e.naluState||0;const a=s,o=[];let u=0,c,h,d,g=-1,m=0;for(s===-1&&(g=0,m=this.getNALuType(t,0),s=0,u=1);u<i;){if(c=t[u++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(h=u-s-1,g>=0){const y={data:t.subarray(g,h),type:m};o.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(a&&u<=4-a&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-a)),h>0&&(y.data=Ti(y.data,t.subarray(0,h)),y.state=0))}u<i?(d=this.getNALuType(t,u),g=u,m=d,s=0):s=-1}else s=0}if(g>=0&&s>=0){const y={data:t.subarray(g,i),type:m,state:s};o.push(y)}if(o.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=Ti(y.data,t))}return e.naluState=s,o}}class Wc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Ct.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Xoe extends E${parsePES(e,t,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,u=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var h,d;switch(c.type){case 1:{let x=!1;o=!0;const b=c.data;if(u&&b.length>4){const E=this.readSliceType(b);(E===2||E===4||E===7||E===9)&&(x=!0)}if(x){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=x;break}case 5:o=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,w1(c.data,1,n.pts,t.samples);break}case 7:{var m,y;o=!0,u=!0;const x=c.data,b=this.readSPS(x);if(!e.sps||e.width!==b.width||e.height!==b.height||((m=e.pixelRatio)==null?void 0:m[0])!==b.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==b.pixelRatio[1]){e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.sps=[x];const E=x.subarray(1,4);let S="avc1.";for(let T=0;T<3;T++){let I=E[T].toString(16);I.length<2&&(I="0"+I),S+=I}e.codec=S}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Wc(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,s;for(let a=0;a<e;a++)i!==0&&(s=t.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(e){const t=new Wc(e);let n=0,i=0,s=0,a=0,o,u,c;const h=t.readUByte.bind(t),d=t.readBits.bind(t),g=t.readUEG.bind(t),m=t.readBoolean.bind(t),y=t.skipBits.bind(t),x=t.skipEG.bind(t),b=t.skipUEG.bind(t),E=this.skipScalingList.bind(this);h();const S=h();if(d(5),y(3),h(),b(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const C=g();if(C===3&&y(1),b(),b(),y(1),m())for(u=C!==3?8:12,c=0;c<u;c++)m()&&(c<6?E(16,t):E(64,t))}b();const T=g();if(T===0)g();else if(T===1)for(y(1),x(),x(),o=g(),c=0;c<o;c++)x();b(),y(1);const I=g(),w=g(),R=d(1);R===0&&y(1),y(1),m()&&(n=g(),i=g(),s=g(),a=g());let _=[1,1];if(m()&&m())switch(h()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[h()<<8|h(),h()<<8|h()];break}}return{width:Math.ceil((I+1)*16-n*2-i*2),height:(2-R)*(w+1)*16-(R?2:4)*(s+a),pixelRatio:_}}}class Qoe extends E${constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,u=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var h,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,u){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,w1(c.data,2,n.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Mt(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const m=this.readSPS(c.data);e.width=m.width,e.height=m.height,e.pixelRatio=m.pixelRatio,e.codec=m.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in m.params)e.params[y]=m.params[y]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const m=this.readPPS(c.data);for(const y in m)e.params[y]=m[y]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}a&&o&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Wc(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new Wc(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),s=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),u=t.readUByte(),c=t.readUByte(),h=t.readUByte(),d=t.readUByte(),g=t.readUByte(),m=t.readUByte(),y=t.readUByte(),x=t.readUByte(),b=t.readUByte(),E=t.readUByte(),S=[],T=[];for(let se=0;se<n;se++)S.push(t.readBoolean()),T.push(t.readBoolean());if(n>0)for(let se=n;se<8;se++)t.readBits(2);for(let se=0;se<n;se++)S[se]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),T[se]&&t.readUByte();t.readUEG();const I=t.readUEG();I==3&&t.skipBits(1);const w=t.readUEG(),R=t.readUEG(),_=t.readBoolean();let C=0,k=0,D=0,U=0;_&&(C+=t.readUEG(),k+=t.readUEG(),D+=t.readUEG(),U+=t.readUEG());const N=t.readUEG(),q=t.readUEG(),X=t.readUEG(),V=t.readBoolean();for(let se=V?0:n;se<=n;se++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ye=0;ye<4;ye++)for(let Re=0;Re<(ye===3?2:6);Re++)if(!t.readBoolean())t.readUEG();else{const je=Math.min(64,1<<4+(ye<<1));ye>1&&t.readEG();for(let pe=0;pe<je;pe++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const Y=t.readUEG();let ee=0;for(let se=0;se<Y;se++){let ye=!1;if(se!==0&&(ye=t.readBoolean()),ye){se===Y&&t.readUEG(),t.readBoolean(),t.readUEG();let Re=0;for(let Ce=0;Ce<=ee;Ce++){const je=t.readBoolean();let pe=!1;je||(pe=t.readBoolean()),(je||pe)&&Re++}ee=Re}else{const Re=t.readUEG(),Ce=t.readUEG();ee=Re+Ce;for(let je=0;je<Re;je++)t.readUEG(),t.readBoolean();for(let je=0;je<Ce;je++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const se=t.readUEG();for(let ye=0;ye<se;ye++){for(let Re=0;Re<X+4;Re++)t.readBits(1);t.readBits(1)}}let $=0,F=1,Z=1,de=!0,oe=1,Se=0;t.readBoolean(),t.readBoolean();let ae=!1;if(t.readBoolean()){if(t.readBoolean()){const Ue=t.readUByte(),Ke=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ie=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ue>0&&Ue<16?(F=Ke[Ue-1],Z=Ie[Ue-1]):Ue===255&&(F=t.readBits(16),Z=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ae=t.readBoolean(),ae&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(oe=t.readBits(32),Se=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Ie=t.readBoolean(),lt=t.readBoolean();let L=!1;(Ie||lt)&&(L=t.readBoolean(),L&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),L&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let M=0;M<=n;M++){de=t.readBoolean();const z=de||t.readBoolean();let fe=!1;z?t.readEG():fe=t.readBoolean();const ve=fe?1:t.readUEG()+1;if(Ie)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),L&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(lt)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),L&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),$=t.readUEG())}let te=w,le=R;if(_){let se=1,ye=1;I===1?se=ye=2:I==2&&(se=2),te=w-se*k-se*C,le=R-ye*U-ye*D}const ce=i?["A","B","C"][i]:"",ne=o<<24|u<<16|c<<8|h;let Le=0;for(let se=0;se<32;se++)Le=(Le|(ne>>se&1)<<31-se)>>>0;let xe=Le.toString(16);return a===1&&xe==="2"&&(xe="6"),{codecString:`hvc1.${ce}${a}.${xe}.${s?"H":"L"}${E}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:i,general_profile_compatibility_flags:[o,u,c,h],general_constraint_indicator_flags:[d,g,m,y,x,b],general_level_idc:E,bit_depth:N+8,bit_depth_luma_minus8:N,bit_depth_chroma_minus8:q,min_spatial_segmentation_idc:$,chroma_format_idc:I,frame_rate:{fixed:de,fps:Se/oe}},width:te,height:le,pixelRatio:[F,Z]}}readPPS(e){const t=new Wc(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),s=t.readBoolean();let a=1;return s&&i?a=0:s?a=3:i&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Pr=188;class Wa{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Wa.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(Pr*5,t-Pr)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let u=i;u<t;u+=Pr)if(e[u]===71&&(t-u===Pr||e[u+Pr]===71)){if(o++,a===-1&&(a=u,a!==0&&(n=Math.min(a+Pr*99,e.length-Pr)+1)),s||(s=fT(e,u)===0),s&&o>1&&(a===0&&o>2||u+Pr>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:O3[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Wa.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Wa.createTrack("audio",i),this._id3Track=Wa.createTrack("id3"),this._txtTrack=Wa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,u=this._id3Track,c=this._txtTrack;let h=a.pid,d=a.pesData,g=o.pid,m=u.pid,y=o.pesData,x=u.pesData,b=null,E=this.pmtParsed,S=this._pmtId,T=e.length;if(this.remainderData&&(e=Ti(this.remainderData,e),T=e.length,this.remainderData=null),T<Pr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:u,textTrack:c};const I=Math.max(0,Wa.syncOffset(e));T-=(T-I)%Pr,T<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let w=0;for(let _=I;_<T;_+=Pr)if(e[_]===71){const C=!!(e[_+1]&64),k=fT(e,_),D=(e[_+3]&48)>>4;let U;if(D>1){if(U=_+5+e[_+4],U===_+Pr)continue}else U=_+4;switch(k){case h:C&&(d&&(s=Xl(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,c,s,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(U,_+Pr)),d.size+=_+Pr-U);break;case g:if(C){if(y&&(s=Xl(y,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(U,_+Pr)),y.size+=_+Pr-U);break;case m:C&&(x&&(s=Xl(x,this.logger))&&this.parseID3PES(u,s),x={data:[],size:0}),x&&(x.data.push(e.subarray(U,_+Pr)),x.size+=_+Pr-U);break;case 0:C&&(U+=e[U]+1),S=this._pmtId=Zoe(e,U);break;case S:{C&&(U+=e[U]+1);const N=Joe(e,U,this.typeSupported,n,this.observer,this.logger);h=N.videoPid,h>0&&(a.pid=h,a.segmentCodec=N.segmentVideoCodec),g=N.audioPid,g>0&&(o.pid=g,o.segmentCodec=N.segmentAudioCodec),m=N.id3Pid,m>0&&(u.pid=m),b!==null&&!E&&(this.logger.warn(`MPEG-TS PMT found at ${_} after unknown PID '${b}'. Backtracking to sync byte @${I} to parse all TS packets.`),b=null,_=I-188),E=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=k;break}}else w++;w>0&&hT(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=y,u.pesData=x;const R={audioTrack:o,videoTrack:a,id3Track:u,textTrack:c};return i&&this.extractRemainingSamples(R),R}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=t.pesData,u=i.pesData;let c;if(a&&(c=Xl(a,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,c,!0),n.pesData=null)):n.pesData=a,o&&(c=Xl(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;u&&(c=Xl(u,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new Yoe(this.observer,this.config,t);return this.decrypt(i,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Xoe:e==="hevc"&&(this.videoParser=new Qoe))}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let s=t.data;if(i){this.aacOverFlow=null;const d=i.missing,g=i.sample.unit.byteLength;if(d===-1)s=Ti(i.sample.unit,s);else{const m=g-d;i.sample.unit.set(s.subarray(0,d),m),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!Cg(s,a);a++);if(a!==n){let d;const g=a<o-1;if(g?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",hT(this.observer,new Error(d),g,this.logger),!g)return}f$(e,this.observer,s,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const d=h$(e.samplerate);u=i.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,h;for(;a<o;)if(h=d$(e,s,a,u,c),a+=h.length,h.missing){this.aacOverFlow=h;break}else for(c++;a<o-1&&!Cg(s,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let s=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(v$(n,a)){const u=m$(e,n,a,o,s);if(u)a+=u.length,s++;else break}else a++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,u;for(;o<s&&(u=S$(e,n,o,i,a++))>0;)o+=u}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Mt({},t,{type:this._videoTrack?Qn.emsg:Qn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function fT(r,e){return((r[e+1]&31)<<8)+r[e+2]}function Zoe(r,e){return(r[e+10]&31)<<8|r[e+11]}function Joe(r,e,t,n,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(r[e+1]&15)<<8|r[e+2],u=e+3+o-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<u;){const h=fT(r,e),d=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){Bb("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=h);break;case 21:a.id3Pid===-1&&(a.id3Pid=h);break;case 219:if(!n){Bb("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=h);break;case 3:case 4:!t.mpeg&&!t.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="mp3");break;case 193:if(!n){Bb("AC-3",s);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let g=e+5,m=d;for(;m>2;){switch(r[g]){case 106:t.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=h,a.segmentAudioCodec="ac3");break}const x=r[g+1]+2;g+=x,m-=x}}break;case 194:case 135:return hT(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=h,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return a}function hT(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Bb(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function Xl(r,e){let t=0,n,i,s,a,o;const u=r.data;if(!r||r.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=Ti(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>r.size-6)return null;const h=n[7];h&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,h&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=n[8];let d=s+9;if(r.size<=d)return null;r.size-=d;const g=new Uint8Array(r.size);for(let m=0,y=u.length;m<y;m++){n=u[m];let x=n.byteLength;if(d)if(d>x){d-=x;continue}else n=n.subarray(d),x-=d,d=0;g.set(n,t),t+=x}return i&&(i-=s+3),{data:g,pts:a,dts:o,len:i}}return null}class ele{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Fa=Math.pow(2,32)-1;class Ee{static init(){Ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ee.types)Ee.types.hasOwnProperty(e)&&(Ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ee.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);Ee.STTS=Ee.STSC=Ee.STCO=s,Ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);Ee.FTYP=Ee.box(Ee.types.ftyp,a,u,a,o),Ee.DINF=Ee.box(Ee.types.dinf,Ee.box(Ee.types.dref,i))}static box(e,...t){let n=8,i=t.length;const s=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return Ee.box(Ee.types.hdlr,Ee.HDLR_TYPES[e])}static mdat(e){return Ee.box(Ee.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Fa+1)),i=Math.floor(t%(Fa+1));return Ee.box(Ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return Ee.box(Ee.types.mdia,Ee.mdhd(e.timescale||0,e.duration||0),Ee.hdlr(e.type),Ee.minf(e))}static mfhd(e){return Ee.box(Ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ee.box(Ee.types.minf,Ee.box(Ee.types.smhd,Ee.SMHD),Ee.DINF,Ee.stbl(e)):Ee.box(Ee.types.minf,Ee.box(Ee.types.vmhd,Ee.VMHD),Ee.DINF,Ee.stbl(e))}static moof(e,t,n){return Ee.box(Ee.types.moof,Ee.mfhd(e),Ee.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trak(e[t]);return Ee.box.apply(null,[Ee.types.moov,Ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Ee.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trex(e[t]);return Ee.box.apply(null,[Ee.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Fa+1)),i=Math.floor(t%(Fa+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ee.box(Ee.types.mvhd,s)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,s;for(i=0;i<t.length;i++)s=t[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return Ee.box(Ee.types.sdtp,n)}static stbl(e){return Ee.box(Ee.types.stbl,Ee.stsd(e),Ee.box(Ee.types.stts,Ee.STTS),Ee.box(Ee.types.stsc,Ee.STSC),Ee.box(Ee.types.stsz,Ee.STSZ),Ee.box(Ee.types.stco,Ee.STCO))}static avc1(e){let t=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=Ee.box(Ee.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,c=e.height,h=e.pixelRatio[0],d=e.pixelRatio[1];return Ee.box(Ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ee.box(Ee.types.mp4a,Ee.audioStsd(e),Ee.box(Ee.types.esds,Ee.esds(e)))}static mp3(e){return Ee.box(Ee.types[".mp3"],Ee.audioStsd(e))}static ac3(e){return Ee.box(Ee.types["ac-3"],Ee.audioStsd(e),Ee.box(Ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp4a(e));if(t==="ac3"&&e.config)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.avc1(e));if(t==="hevc"&&e.vps)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,s=e.height||0,a=Math.floor(n/(Fa+1)),o=Math.floor(n%(Fa+1));return Ee.box(Ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const n=Ee.sdtp(e),i=e.id,s=Math.floor(t/(Fa+1)),a=Math.floor(t%(Fa+1));return Ee.box(Ee.types.traf,Ee.box(Ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),Ee.box(Ee.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),Ee.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Ee.box(Ee.types.trak,Ee.tkhd(e),Ee.mdia(e))}static trex(e){const t=e.id;return Ee.box(Ee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,u,c,h,d,g;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)u=n[o],c=u.duration,h=u.size,d=u.flags,g=u.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*o);return Ee.box(Ee.types.trun,a)}static initSegment(e){Ee.types||Ee.init();const t=Ee.moov(e);return Ti(Ee.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,s=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let a=s.length;for(let y=0;y<n.length;y+=1){a+=3;for(let x=0;x<n[y].length;x+=1)a+=2+n[y][x].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const u=n.length-1;for(let y=0;y<n.length;y+=1){o.set(new Uint8Array([32+y|(y===u?128:0),0,n[y].length]),a),a+=3;for(let x=0;x<n[y].length;x+=1)o.set(new Uint8Array([n[y][x].length>>8,n[y][x].length&255]),a),a+=2,o.set(n[y][x],a),a+=n[y][x].length}const c=Ee.box(Ee.types.hvcC,o),h=e.width,d=e.height,g=e.pixelRatio[0],m=e.pixelRatio[1];return Ee.box(Ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,h&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,m>>24,m>>16&255,m>>8&255,m&255])))}}Ee.types=void 0;Ee.HDLR_TYPES=void 0;Ee.STTS=void 0;Ee.STSC=void 0;Ee.STCO=void 0;Ee.STSZ=void 0;Ee.VMHD=void 0;Ee.SMHD=void 0;Ee.STSD=void 0;Ee.FTYP=void 0;Ee.DINF=void 0;const T$=9e4;function F1(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function tle(r,e,t=1,n=!1){return F1(r,e,1/t,n)}function Nc(r,e=!1){return F1(r,1e3,1/T$,e)}function rle(r,e=1){return F1(r,T$,1/e)}function aM(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const nle=10*1e3,ile=1024,sle=1152,ale=1536;let Ql=null,Ub=null;function oM(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class Tp extends wi{constructor(e,t,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Ql===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ql=a?parseInt(a[1]):0}if(Ub===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Ub=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&aM(t)} > ${e&&aM(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((s,a)=>{let o=a.pts,u=o-s;return u<-4294967296&&(t=!0,o=Yn(o,n),u=o-s),u>0?s:o},n);return t&&this.debug("PTS rollover detected"),i}remux(e,t,n,i,s,a,o,u){let c,h,d,g,m,y,x=s,b=s;const E=e.pid>-1,S=t.pid>-1,T=t.samples.length,I=e.samples.length>0,w=o&&T>0||T>1;if((!E||I)&&(!S||w)||this.ISGenerated||o){if(this.ISGenerated){var _,C,k,D;const X=this.videoTrackConfig;(X&&(t.width!==X.width||t.height!==X.height||((_=t.pixelRatio)==null?void 0:_[0])!==((C=X.pixelRatio)==null?void 0:C[0])||((k=t.pixelRatio)==null?void 0:k[1])!==((D=X.pixelRatio)==null?void 0:D[1]))||!X&&w||this.nextAudioTs===null&&I)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,s,a));const U=this.isVideoContiguous;let N=-1,q;if(w&&(N=ole(t.samples),!U&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,N>0){this.warn(`Dropped ${N} out of ${T} video samples due to a missing keyframe`);const X=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(N),t.dropped+=N,b+=(t.samples[0].pts-X)/t.inputTimeScale,q=b}else N===-1&&(this.warn(`No keyframe found out of ${T} video samples`),y=!1);if(this.ISGenerated){if(I&&w){const X=this.getVideoStartPts(t.samples),H=(Yn(e.samples[0].pts,X)-X)/t.inputTimeScale;x+=Math.max(0,H),b+=Math.max(0,-H)}if(I){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,s,a)),h=this.remuxAudio(e,x,this.isAudioContiguous,a,S||w||u===Ze.AUDIO?b:void 0),w){const X=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,s,a)),c=this.remuxVideo(t,b,U,X)}}else w&&(c=this.remuxVideo(t,b,U,0));c&&(c.firstKeyFrame=N,c.independent=N!==-1,c.firstKeyFramePTS=q)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(m=A$(n,s,this._initPTS,this._initDTS)),i.samples.length&&(g=w$(i,s,this._initPTS))),{audio:h,video:c,initSegment:d,independent:y,text:g,id3:m}}computeInitPts(e,t,n,i){const s=Math.round(n*t);let a=Yn(e,s);if(a<s+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-a)/t} ${i}`);a<s+t;)a+=8589934592;return a-s}generateIS(e,t,n,i){const s=e.samples,a=t.samples,o=this.typeSupported,u={},c=this._initPTS;let h=!c||i,d="audio/mp4",g,m,y,x=-1;if(h&&(g=m=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ee.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(x=e.id,y=e.inputTimeScale,!c||y!==c.timescale?g=m=this.computeInitPts(s[0].pts,y,n,"audio"):h=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ee.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(x=t.id,y=t.inputTimeScale,!c||y!==c.timescale){const b=this.getVideoStartPts(a),E=Yn(a[0].dts,b),S=this.computeInitPts(E,y,n,"video"),T=this.computeInitPts(b,y,n,"video");m=Math.min(m,S),g=Math.min(g,T)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${g/y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${g/y} (${g}/${y}) trackId: ${x}`),this._initPTS={baseTime:g,timescale:y,trackId:x},this._initDTS={baseTime:m,timescale:y,trackId:x}):g=y=void 0,{tracks:u,initPTS:g,timescale:y,trackId:x}}remuxVideo(e,t,n,i){const s=e.inputTimeScale,a=e.samples,o=[],u=a.length,c=this._initPTS,h=c.baseTime*s/c.timescale;let d=this.nextVideoTs,g=8,m=this.videoSampleDuration,y,x,b=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=!1;if(!n||d===null){const $=h+t*s,F=a[0].pts-Yn(a[0].dts,a[0].pts);Ql&&d!==null&&Math.abs($-F-(d+h))<15e3?n=!0:d=$-F-h}const T=d+h;for(let $=0;$<u;$++){const F=a[$];F.pts=Yn(F.pts,T),F.dts=Yn(F.dts,T),F.dts<a[$>0?$-1:$].dts&&(S=!0)}S&&a.sort(function($,F){const Z=$.dts-F.dts,de=$.pts-F.pts;return Z||de}),y=a[0].dts,x=a[a.length-1].dts;const I=x-y,w=I?Math.round(I/(u-1)):m||e.inputTimeScale/30;if(n){const $=y-T,F=$>w,Z=$<-1;if((F||Z)&&(F?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Nc($,!0)} ms (${$}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Nc(-$,!0)} ms (${$}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!Z||T>=a[0].pts||Ql)){y=T;const de=a[0].pts-$;if(F)a[0].dts=y,a[0].pts=de;else{let oe=!0;for(let Se=0;Se<a.length&&!(a[Se].dts>de&&oe);Se++){const ae=a[Se].pts;if(a[Se].dts-=$,a[Se].pts-=$,Se<a.length-1){const re=a[Se+1].pts,te=a[Se].pts,le=re<=te,ce=re<=ae;oe=le==ce}}}this.log(`Video: Initial PTS/DTS adjusted: ${Nc(de,!0)}/${Nc(y,!0)}, delta: ${Nc($,!0)} ms`)}}y=Math.max(0,y);let R=0,_=0,C=y;for(let $=0;$<u;$++){const F=a[$],Z=F.units,de=Z.length;let oe=0;for(let Se=0;Se<de;Se++)oe+=Z[Se].data.length;_+=oe,R+=de,F.length=oe,F.dts<C?(F.dts=C,C+=w/4|0||1):C=F.dts,b=Math.min(F.pts,b),E=Math.max(F.pts,E)}x=a[u-1].dts;const k=_+4*R+8;let D;try{D=new Uint8Array(k)}catch($){this.observer.emit(j.ERROR,j.ERROR,{type:nt.MUX_ERROR,details:Te.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:k,reason:`fail allocating video mdat ${k}`});return}const U=new DataView(D.buffer);U.setUint32(0,k),D.set(Ee.types.mdat,4);let N=!1,q=Number.POSITIVE_INFINITY,X=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,H=Number.NEGATIVE_INFINITY;for(let $=0;$<u;$++){const F=a[$],Z=F.units;let de=0;for(let ae=0,re=Z.length;ae<re;ae++){const te=Z[ae],le=te.data,ce=te.data.byteLength;U.setUint32(g,ce),g+=4,D.set(le,g),g+=ce,de+=4+ce}let oe;if($<u-1)m=a[$+1].dts-F.dts,oe=a[$+1].pts-F.pts;else{const ae=this.config,re=$>0?F.dts-a[$-1].dts:w;if(oe=$>0?F.pts-a[$-1].pts:w,ae.stretchShortVideoTrack&&this.nextAudioTs!==null){const te=Math.floor(ae.maxBufferHole*s),le=(i?b+i*s:this.nextAudioTs+h)-F.pts;le>te?(m=le-re,m<0?m=re:N=!0,this.log(`It is approximately ${le/90} ms to the next segment; using duration ${m/90} ms for the last video frame.`)):m=re}else m=re}const Se=Math.round(F.pts-F.dts);q=Math.min(q,m),V=Math.max(V,m),X=Math.min(X,oe),H=Math.max(H,oe),o.push(oM(F.key,m,de,Se))}if(o.length){if(Ql){if(Ql<70){const $=o[0].flags;$.dependsOn=2,$.isNonSync=0}}else if(Ub&&H-X<V-q&&w/V<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let $=y;for(let F=0,Z=o.length;F<Z;F++){const de=$+o[F].duration,oe=$+o[F].cts;if(F<Z-1){const Se=de+o[F+1].cts;o[F].duration=Se-oe}else o[F].duration=F?o[F-1].duration:w;o[F].cts=0,$=de}}}m=N||!m?w:m;const K=x+m;this.nextVideoTs=d=K-h,this.videoSampleDuration=m,this.isVideoContiguous=!0;const Q={data1:Ee.moof(e.sequenceNumber++,y,Mt(e,{samples:o})),data2:D,startPTS:(b-h)/s,endPTS:(E+m-h)/s,startDTS:(y-h)/s,endDTS:d/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Q}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return sle;case"ac3":return ale;default:return ile}}remuxAudio(e,t,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,u=a/o,c=this.getSamplesPerFrame(e),h=c*u,d=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],y=s!==void 0;let x=e.samples,b=g?0:8,E=this.nextAudioTs||-1;const S=d.baseTime*a/d.timescale,T=S+t*a;if(this.isAudioContiguous=n=n||x.length&&E>0&&(i&&Math.abs(T-(E+S))<9e3||Math.abs(Yn(x[0].pts,T)-(E+S))<20*h),x.forEach(function(H){H.pts=Yn(H.pts,T)}),!n||E<0){const H=x.length;if(x=x.filter(K=>K.pts>=0),H!==x.length&&this.warn(`Removed ${x.length-H} of ${H} samples (initPTS ${S} / ${a})`),!x.length)return;s===0?E=0:i&&!y?E=Math.max(0,T-S):E=x[0].pts-S}if(e.segmentCodec==="aac"){const H=this.config.maxAudioFramesDrift;for(let K=0,Y=E+S;K<x.length;K++){const ee=x[K],Q=ee.pts,$=Q-Y,F=Math.abs(1e3*$/a);if($<=-H*h&&y)K===0&&(this.warn(`Audio frame @ ${(Q/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*$/a)} ms.`),this.nextAudioTs=E=Q-S,Y=Q);else if($>=H*h&&F<nle&&y){let Z=Math.round($/h);for(Y=Q-Z*h;Y<0&&Z&&h;)Z--,Y+=h;K===0&&(this.nextAudioTs=E=Y-S),this.warn(`Injecting ${Z} audio frames @ ${((Y-S)/a).toFixed(3)}s due to ${Math.round(1e3*$/a)} ms gap.`);for(let de=0;de<Z;de++){let oe=ele.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);oe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),oe=ee.unit.subarray()),x.splice(K,0,{unit:oe,pts:Y}),Y+=h,K++}}ee.pts=Y,Y+=h}}let I=null,w=null,R,_=0,C=x.length;for(;C--;)_+=x[C].unit.byteLength;for(let H=0,K=x.length;H<K;H++){const Y=x[H],ee=Y.unit;let Q=Y.pts;if(w!==null){const F=m[H-1];F.duration=Math.round((Q-w)/u)}else if(n&&e.segmentCodec==="aac"&&(Q=E+S),I=Q,_>0){_+=b;try{R=new Uint8Array(_)}catch(F){this.observer.emit(j.ERROR,j.ERROR,{type:nt.MUX_ERROR,details:Te.REMUX_ALLOC_ERROR,fatal:!1,error:F,bytes:_,reason:`fail allocating audio mdat ${_}`});return}g||(new DataView(R.buffer).setUint32(0,_),R.set(Ee.types.mdat,4))}else return;R.set(ee,b);const $=ee.byteLength;b+=$,m.push(oM(!0,c,$,0)),w=Q}const k=m.length;if(!k)return;const D=m[m.length-1];E=w-S,this.nextAudioTs=E+u*D.duration;const U=g?new Uint8Array(0):Ee.moof(e.sequenceNumber++,I/u,Mt({},e,{samples:m}));e.samples=[];const N=(I-S)/a,q=this.nextAudioTs/a,V={data1:U,data2:R,startPTS:N,endPTS:q,startDTS:N,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,V}}function Yn(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function ole(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function A$(r,e,t,n){const i=r.samples.length;if(!i)return;const s=r.inputTimeScale;for(let o=0;o<i;o++){const u=r.samples[o];u.pts=Yn(u.pts-t.baseTime*s/t.timescale,e*s)/s,u.dts=Yn(u.dts-n.baseTime*s/n.timescale,e*s)/s}const a=r.samples;return r.samples=[],{samples:a}}function w$(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let a=0;a<n;a++){const o=r.samples[a];o.pts=Yn(o.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((a,o)=>a.pts-o.pts);const s=r.samples;return r.samples=[],{samples:s}}class lle extends wi{constructor(e,t,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:a}=this.initData=C3(e);if(t)Yse(e,t);else{const u=s||a;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}s&&(n=lM(s,jt.AUDIO,this)),a&&(i=lM(a,jt.VIDEO,this));const o={};s&&a?o.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:s?o.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,s,a){var o,u;let{initPTS:c,lastEndTime:h}=this;const d={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Ye(h)||(h=this.lastEndTime=s||0);const g=t.samples;if(!g.length)return d;const m={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((o=y)!=null&&o.length||(this.generateInitSegment(g),y=this.initData),!((u=y)!=null&&u.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);const x=Qse(g,y,this),b=y.audio?x[y.audio.id]:null,E=y.video?x[y.video.id]:null,S=Pd(E,1/0),T=Pd(b,1/0),I=Pd(E,0,!0),w=Pd(b,0,!0);let R=s,_=0;const C=b&&(!E||!c&&T<S||c&&c.trackId===y.audio.id),k=C?b:E;if(k){const Y=k.timescale,ee=k.start-s*Y,Q=C?y.audio.id:y.video.id;R=k.start/Y,_=C?w-T:I-S,(a||!c)&&(ule(c,R,s,_)||Y!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${s} ${ee/Y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${R-s} (${ee}/${Y}) trackId: ${Q}`),c=null,m.initPTS=ee,m.timescale=Y,m.trackId=Q)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);c?(m.initPTS=c.baseTime,m.timescale=c.timescale,m.trackId=c.trackId):((!m.timescale||m.trackId===void 0||m.initPTS===void 0)&&(this.warn("Could not set initPTS"),m.initPTS=R,m.timescale=1,m.trackId=-1),this.initPTS=c={baseTime:m.initPTS,timescale:m.timescale,trackId:m.trackId});const D=R-c.baseTime/c.timescale,U=D+_;_>0?this.lastEndTime=U:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const N=!!y.audio,q=!!y.video;let X="";N&&(X+="audio"),q&&(X+="video");const V=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),H={data1:g,startPTS:D,startDTS:D,endPTS:U,endDTS:U,type:X,hasAudio:N,hasVideo:q,nb:1,dropped:0,encrypted:V};d.audio=N&&!q?H:void 0,d.video=q?H:void 0;const K=E?.sampleCount;if(K){const Y=E.keyFrameIndex,ee=Y!==-1;H.nb=K,H.dropped=Y===0||this.isVideoContiguous?0:ee?Y:K,H.independent=ee,H.firstKeyFrame=Y,ee&&E.keyFrameStart&&(H.firstKeyFramePTS=(E.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(d.independent=ee),this.isVideoContiguous||(this.isVideoContiguous=ee),H.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Y}/${K} dropped: ${H.dropped} start: ${H.firstKeyFramePTS||"NA"}`)}return d.initSegment=m,d.id3=A$(n,s,c,c),i.samples.length&&(d.text=w$(i,s,c)),d}}function Pd(r,e,t=!1){return r?.start!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function ule(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),s=e-r.baseTime/r.timescale;return Math.abs(s-t)>i}function lM(r,e,t){const n=r.codec;return n&&n.length>4?n:e===jt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?Tg(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let Bs;try{Bs=self.performance.now.bind(self.performance)}catch{Bs=Date.now}const Ap=[{demux:Woe,remux:lle},{demux:Wa,remux:Tp},{demux:Hoe,remux:Tp},{demux:qoe,remux:Tp}];Ap.splice(2,0,{demux:Koe,remux:Tp});class uM{constructor(e,t,n,i,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const s=n.transmuxing;s.executeStart=Bs();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:h,trackSwitch:d,accurateTimeOffset:g,timeOffset:m,initSegmentChange:y}=i||o,{audioCodec:x,videoCodec:b,defaultInitPts:E,duration:S,initSegmentData:T}=u,I=cle(a,t);if(I&&cu(I.method)){const C=this.getDecrypter(),k=C1(I.method);if(C.isSync()){let D=C.softwareDecrypt(a,I.key.buffer,I.iv.buffer,k);if(n.part>-1){const N=C.flush();D=N&&N.buffer}if(!D)return s.executeEnd=Bs(),jb(n);a=new Uint8Array(D)}else return this.asyncResult=!0,this.decryptionPromise=C.webCryptoDecrypt(a,I.key.buffer,I.iv.buffer,k).then(D=>{const U=this.push(D,null,n);return this.decryptionPromise=null,U}),this.decryptionPromise}const w=this.needsProbing(h,d);if(w){const C=this.configureTransmuxer(a);if(C)return this.logger.warn(`[transmuxer] ${C.message}`),this.observer.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),s.executeEnd=Bs(),jb(n)}(h||d||y||w)&&this.resetInitSegment(T,x,b,S,t),(h||y||w)&&this.resetInitialTimestamp(E),c||this.resetContiguity();const R=this.transmux(a,I,m,g,n);this.asyncResult=Sf(R);const _=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,s.executeEnd=Bs(),R}flush(e){const t=e.transmuxing;t.executeStart=Bs();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const d=n.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:u,remuxer:c}=this;if(!u||!c){t.executeEnd=Bs();const d=[jb(e)];return this.asyncResult?Promise.resolve(d):d}const h=u.flush(o);return Sf(h)?(this.asyncResult=!0,h.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,h,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:u,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Ze.MAIN?"level":"track"} ${n.level}`);const h=this.remuxer.remux(i,s,a,o,c,u,!0,this.id);e.push({remuxResult:h,chunkMeta:n}),n.transmuxing.executeEnd=Bs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,s){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let s;for(let d=0,g=Ap.length;d<g;d++){var a;if((a=Ap[d].demux)!=null&&a.probe(e,this.logger)){s=Ap[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,u=this.remuxer,c=s.remux,h=s.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(n,t,i,this.logger)),(!o||!(o instanceof h))&&(this.demuxer=new h(n,t,i,this.logger),this.probe=h.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new R1(this.config)),e}}function cle(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const jb=r=>({remuxResult:{},chunkMeta:r});function Sf(r){return"then"in r&&r.then instanceof Function}class fle{constructor(e,t,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class hle{constructor(e,t,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}let cM=0;class _${constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=cM++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const c=u.data,h=this.hls;if(!(!h||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const g=(d=this.workerContext)==null?void 0:d.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{h.logger[c.data.logType]&&h.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,h.trigger(c.event,c.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const c=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(u,c)=>{c=c||{},c.frag=this.frag||void 0,u===j.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(u,c)};this.observer=new k1,this.observer.on(j.FRAG_DECRYPTED,a),this.observer.on(j.ERROR,a);const o=wk(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(s.workerPath||moe()){try{s.workerPath?(u.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=voe(s.workerPath)):(u.log(`injecting Web Worker for "${t}"`),this.workerContext=yoe());const{worker:h}=this.workerContext;h.addEventListener("message",this.onWorkerMessage),h.addEventListener("error",this.onWorkerError),h.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:$t(s)})}catch(h){u.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.terminateWorker(),this.error=null,this.transmuxer=new uM(this.observer,o,s,"",t,e.logger)}return}}this.transmuxer=new uM(this.observer,o,s,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=cM++;const t=this.hls.config,n=wk(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:$t(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),boe(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,s,a,o,u,c,h){var d,g;c.transmuxing.start=self.performance.now();const{instanceNo:m,transmuxer:y}=this,x=a?a.start:s.start,b=s.decryptdata,E=this.frag,S=!(E&&s.cc===E.cc),T=!(E&&c.level===E.level),I=E?c.sn-E.sn:-1,w=this.part?c.part-this.part.index:-1,R=I===0&&c.id>1&&c.id===E?.stats.chunkCount,_=!T&&(I===1||I===0&&(w===1||R&&w<=0)),C=self.performance.now();(T||I||s.stats.parsing.start===0)&&(s.stats.parsing.start=C),a&&(w||!_)&&(a.stats.parsing.start=C);const k=!(E&&((d=s.initSegment)==null?void 0:d.url)===((g=E.initSegment)==null?void 0:g.url)),D=new hle(S,_,u,T,x,k);if(!_||S||k){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===Ze.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${S}
        trackSwitch: ${T}
        contiguous: ${_}
        accurateTimeOffset: ${u}
        timeOffset: ${x}
        initSegmentChange: ${k}`);const U=new fle(n,i,t,o,h);this.configureTransmuxer(U)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:m,cmd:"demux",data:e,decryptdata:b,chunkMeta:c,state:D},e instanceof ArrayBuffer?[e]:[]);else if(y){const U=y.push(e,b,c,D);Sf(U)?U.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(U)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);Sf(i)?i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const fM=100;class dle extends D1{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Ze.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(j.BUFFER_RESET,this.onBufferReset,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(j.BUFFER_RESET,this.onBufferReset,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s,trackId:a}){if(n===Ze.MAIN){const o=t.cc,u=this.fragCurrent;if(this.initPTS[o]={baseTime:i,timescale:s,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${i/s} (${i}/${s}) trackId: ${a}`),this.mainAnchor=t,this.state===Ge.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==o?(u.abortRequests(),this.syncWithAnchor(t,u)):this.state===Ge.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&i?.cc===t.cc)return;const s=(i||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),u=G3(a,s,o);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===Ge.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Ge.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(fM),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ge.IDLE):this.state=Ge.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Ge.IDLE:this.doTickIdle();break;case Ge.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e?.[t],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Ge.WAITING_INIT_PTS}break}case Ge.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Ge.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:s}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Ge.FRAG_LOADING;const o=i.flush().buffer,u={frag:t,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=Ge.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:s}=this,a=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],u=o.details;if(!u||this.waitForLive(o)||this.waitForCdnTuneIn(u)){this.state=Ge.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,jt.AUDIO,Ze.AUDIO));const h=this.getFwdBufferInfo(c,Ze.AUDIO);if(h===null)return;if(!this.switchingTrack&&this._streamEnded(h,u)){t.trigger(j.BUFFER_EOS,{type:"audio"}),this.state=Ge.ENDED;return}const d=h.len,g=t.maxBufferLength,m=u.fragments,y=m[0].start,x=this.getLoadPosition(),b=this.flushing?x:h.end;if(this.switchingTrack&&i){const T=x;u.PTSKnown&&T<y&&(h.end>y||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=y+.05)}if(d>=g&&!this.switchingTrack&&b<m[m.length-1].start)return;let E=this.getNextFragment(b,u);if(E&&this.isLoopLoading(E,b)&&(E=this.getNextFragmentLoopLoading(E,u,h,Ze.MAIN,g)),!E){this.bufferFlushed=!0;return}let S=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&S&&fr(E)&&!E.endList&&(!u.live||!this.loadingParts&&b<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(S)===wr.OK&&(this.mainFragLoading=S=null),S&&fr(S))){if(E.start>S.end){const I=this.fragmentTracker.getFragAtPos(b,Ze.MAIN);I&&I.end>S.end&&(S=I,this.mainFragLoading={frag:I,targetBufferTime:null})}if(E.start>S.end)return}this.loadFragment(E,o,b)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new vf(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ge.STOPPED&&(this.setInterval(fM),this.state=Ge.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(j.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:s,id:a,groupId:o,track:u}=t;if(!i){this.warn(`Audio tracks reset while loading track ${a} "${u.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${u.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const h=i[a];let d=0;if(s.live||(n=h.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(h.details){var g;d=this.alignPlaylists(s,h.details,(g=this.levelLastLoaded)==null?void 0:g.details)}s.alignedSliding||(a$(s,c),s.alignedSliding||Lg(s,c),d=s.fragmentStart)}h.details=s,this.levelLastLoaded=h,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(j.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.state===Ge.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Ge.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:s}=e,{config:a,trackId:o,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=u[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const h=c.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new _$(this.hls,Ze.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const m=this.initPTS[n.cc],y=(t=n.initSegment)==null?void 0:t.data;if(m!==void 0){const b=i?i.index:-1,E=b!==-1,S=new L1(n.level,n.sn,n.stats.chunkCount,s.byteLength,b,E);g.push(s,y,d,"",n,i,h.totalduration,!1,S,m)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${h.startSN} ,${h.endSN}],track ${o}`);const{cache:x}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new o$,complete:!1};x.push(new Uint8Array(s)),this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Ze.MAIN&&fr(t.frag)&&(this.mainFragLoading=t,this.state===Ge.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Ze.AUDIO){!this.audioOnly&&n.type===Ze.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(fr(n)){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(j.AUDIO_TRACK_SWITCHED,Rt({},s)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case Te.FRAG_GAP:case Te.FRAG_PARSING_ERROR:case Te.FRAG_DECRYPT_ERROR:case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ze.AUDIO,t);break;case Te.AUDIO_TRACK_LOAD_ERROR:case Te.AUDIO_TRACK_LOAD_TIMEOUT:case Te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===yt.AUDIO_TRACK&&(this.state=Ge.IDLE);break;case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case Te.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==jt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==jt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ge.ENDED&&(this.state=Ge.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Ze.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:u,part:c,level:h}=o,{details:d}=h,{audio:g,text:m,id3:y,initSegment:x}=s;if(this.fragContextChanged(u)||!d){this.fragmentTracker.removeFragment(u);return}if(this.state=Ge.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),x!=null&&x.tracks){const b=u.initSegment||u;if(this.unhandledEncryptionError(x,u))return;this._bufferInitSegment(h,x.tracks,b,a),i.trigger(j.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:n,tracks:x.tracks})}if(g){const{startPTS:b,endPTS:E,startDTS:S,endDTS:T}=g;c&&(c.elementaryStreams[jt.AUDIO]={startPTS:b,endPTS:E,startDTS:S,endDTS:T}),u.setElementaryStreamInfo(jt.AUDIO,b,E,S,T),this.bufferFragmentData(g,u,c,a)}if(y!=null&&(t=y.samples)!=null&&t.length){const b=Mt({id:n,frag:u,details:d},y);i.trigger(j.FRAG_PARSING_METADATA,b)}if(m){const b=Mt({id:n,frag:u,details:d},m);i.trigger(j.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const s=t.audio;s.id=Ze.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(j.BUFFER_CODECS,t);const o=s.initSegment;if(o!=null&&o.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(j.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===wr.NOT_LOADED||i===wr.PARTIAL){var s;if(!fr(e))this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ge.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&Lg(t.details,a)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;Vo({name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},e,Mo)||(wg(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(j.AUDIO_TRACK_SWITCHED,Rt({},e))}}class $1 extends wi{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const o=i[a];let u;try{u=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),u=o.URI||""}if(u===e){s=a;break}else u===e.substring(0,u.length)&&(s=a)}if(s!==-1){const a=i[s],o=parseInt(a["LAST-MSN"])||t.lastPartSn;let u=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&h>t.partTarget&&(u+=1)}const c=n&&_k(n);return new Ik(o,u>=0?u:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;i.advancedDateTime=Date.now()-o;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const h=Math.max(u||0,0);i.appliedTimelineOffset=h,i.fragments.forEach(d=>{d.setStart(d.playlistOffset+h)})}if(i.live||n!=null&&n.live){const h="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){soe(n,i,this);const S=i.playlistParsingError;if(S){this.warn(S);const T=this.hls;if(!T.config.ignorePlaylistParsingErrors){var c;const{networkDetails:I}=t;T.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:S,reason:S.message,level:t.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:I,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,g=d?d.end-d.len:0,m=(i.edge-g)*1e3,y=t$(i,m);if(i.requestScheduled+y<a?i.requestScheduled=a:i.requestScheduled+=y,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let x,b,E;if(i.canBlockReload&&i.endSN&&i.advanced){const S=this.hls.config.lowLatencyMode,T=i.lastPartSn,I=i.endSN,w=i.lastPartIndex,R=w!==-1,_=T===I;R?_?(b=I+1,E=S?0:w):(b=T,E=S?w+1:i.maxPartIndex):b=I+1;const C=i.age,k=C+i.ageHeader;let D=Math.min(k-i.partTarget,i.targetduration*1.5);if(D>0){if(k>i.targetduration*3)this.log(`Playlist last advanced ${C.toFixed(2)}s ago. Omitting segment and part directives.`),b=void 0,E=void 0;else if(n!=null&&n.tuneInGoal&&k-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${D} with playlist age: ${i.age}`),D=0;else{const U=Math.floor(D/i.targetduration);if(b+=U,E!==void 0){const N=Math.round(D%i.targetduration/i.partTarget);E+=N}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${C.toFixed(2)}s goal: ${D} skip sn ${U} to part ${E}`)}i.tuneInGoal=D}if(x=this.getDeliveryDirectives(i,t.deliveryDirectives,b,E),S||!_){i.requestScheduled=a,this.loadingPlaylist(h,x);return}}else(i.canBlockReload||i.canSkipUntil)&&(x=this.getDeliveryDirectives(i,t.deliveryDirectives,b,E));x&&b!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(y-o*2,y/2)),this.scheduleLoading(h,x,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const s=self.performance.now(),a=i.requestScheduled;if(s>=a){this.loadingPlaylist(e,t);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,n,i){let s=_k(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=Sp.No),new Ik(n,i,s)}checkRetry(e){const t=e.details,n=_g(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},u=!!i&&!!o&&(s===qr.RetryRequest||!i.resolved&&s===qr.SendAlternateToPenaltyBox);if(u){var c;if(a>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=O1(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function I$(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Ef(r[t].attrs,e[t].attrs))return!1;return!0}function Ef(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function dT(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class ple extends $1{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(j.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(g=>!n||n.indexOf(g.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(g=>g.default)&&(this.selectDefaultTrack=!1),o.forEach((g,m)=>{g.id=m});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const u=this.hls.config.audioPreference;if(!s&&u){const g=Ji(u,o,Mo);if(g>-1)s=o[g];else{const m=Ji(u,this.tracks);s=this.tracks[m]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const h={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(j.AUDIO_TRACKS_UPDATED,h);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(g.message),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}}onError(e,t){t.fatal||!t.context||t.context.type===yt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Vo(e,i,Mo))return i;const s=Ji(e,this.tracksInGroup,Mo);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=_ae(e,t.levels,n,a,Mo);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=Ji(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(j.AUDIO_TRACK_SWITCHING,Rt({},i)),s))return;const a=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Vo(e,i,Mo)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:u}=e;for(let c=0;c<t.length;c++){const h=t[c];if(Vo({name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:u},h,Mo))return c}for(let c=0;c<t.length;c++){const h=t[c];if(Ef(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const h=t[c];if(Ef(e.attrs,h.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&wg(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(j.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class gle{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(s){var n;if(i.onError(s),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const hM=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,O$="HlsJsTrackRemovedError";class mle extends Error{constructor(e){super(e),this.name=O$}}class yle extends wi{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:s}=this;n&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(j.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=jse(ro(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.BUFFER_RESET,this.onBufferReset,this),e.on(j.BUFFER_APPENDING,this.onBufferAppending,this),e.on(j.BUFFER_CODECS,this.onBufferCodecs,this),e.on(j.BUFFER_EOS,this.onBufferEos,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.FRAG_PARSED,this.onFragParsed,this),e.on(j.FRAG_CHANGED,this.onFragChanged,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.BUFFER_RESET,this.onBufferReset,this),e.off(j.BUFFER_APPENDING,this.onBufferAppending,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.BUFFER_EOS,this.onBufferEos,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.FRAG_PARSED,this.onFragParsed,this),e.off(j.FRAG_CHANGED,this.onFragChanged,this),e.off(j.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?Mt(n,i.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(n[a]=Mt({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const i=ro(this.appendSource);if(i){const s=!!t.mediaSource;(s||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(a),s)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&a instanceof u,dM(n),vle(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,s=i?Object.keys(i):null,a=s?s.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${$t(n,(u,c)=>u==="initSegment"?void 0:c)};
transfer tracks: ${$t(i,(u,c)=>u==="initSegment"?void 0:c)}}`),!A3(i,n)){t.mediaSource=null,t.tracks=void 0;const u=e.currentTime,c=this.details,h=Math.max(u,c?.fragments[0].start||0);if(h-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${h}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${h} currentTime: ${u}`),this.onMediaDetaching(j.MEDIA_DETACHING,{}),this.onMediaAttaching(j.MEDIA_ATTACHING,t),e.currentTime=h;return}this.transferData=void 0,s.forEach(u=>{const c=u,h=i[c];if(h){const d=h.buffer;if(d){const g=this.fragmentTracker,m=h.id;if(g.hasFragments(m)||g.hasParts(m)){const b=ft.getBuffered(d);g.detectEvictedFragments(c,b,m,null,!0)}const y=Fb(c),x=[c,d];this.sourceBuffers[y]=x,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,h)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const u=s.sourceBuffers;for(let c=u.length;c--;)o&&u[c].abort(),s.removeSourceBuffer(u[c]);o&&s.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(i.removeAttribute("src"),this.appendSource&&dM(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(j.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Fb(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new gle(this.tracks)}onBufferCodecs(e,t){var n;const i=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),o=!a&&this.sourceBufferCount&&this.media&&s.some(u=>!i[u]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(u=>{var c,h;const d=t[u],{id:g,codec:m,levelCodec:y,container:x,metadata:b,supplemental:E}=d;let S=i[u];const T=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[u],I=T!=null&&T.buffer?T:S,w=I?.pendingCodec||I?.codec,R=I?.levelCodec;S||(S=i[u]={buffer:void 0,listeners:[],codec:m,supplemental:E,container:x,levelCodec:y,metadata:b,id:g});const _=xp(w,R),C=_?.replace(hM,"$1");let k=xp(m,y);const D=(h=k)==null?void 0:h.replace(hM,"$1");k&&_&&C!==D&&(u.slice(0,5)==="audio"&&(k=Tg(k,this.appendSource)),this.log(`switching codec ${w} to ${k}`),k!==(S.pendingCodec||S.codec)&&(S.pendingCodec=k),S.container=x,this.appendChangeType(u,x,k))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,s={label:`change-type=${i}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),a.codec=n,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,Ze.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&ft.isBuffered(u.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Ze.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:s,parent:a,frag:o,part:u,chunkMeta:c,offset:h}=t,d=c.buffering[s],{sn:g,cc:m}=o,y=self.performance.now();d.start=y;const x=o.stats.buffering,b=u?u.stats.buffering:null;x.start===0&&(x.start=y),b&&b.start===0&&(b.start=y);const E=n.audio;let S=!1;s==="audio"&&E?.container==="audio/mpeg"&&(S=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const T=n.video,I=T?.buffer;if(I&&g!=="initSegment"){const _=u||o,C=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(T.ending||T.ended)){const D=_.start+_.duration*.05,U=I.buffered,N=this.currentOp("video");!U.length&&!N?this.blockAudio(_):!N&&!ft.isBuffered(I,D)&&this.lastVideoAppendEnd<D&&this.blockAudio(_)}else if(s==="video"){const k=_.end;if(C){const D=C.frag.start;(k>D||k<this.lastVideoAppendEnd||ft.isBuffered(I,D))&&this.unblockAudio()}this.lastVideoAppendEnd=k}}const w=(u||o).start,R={label:`append-${s}`,execute:()=>{var _;d.executeStart=self.performance.now();const C=(_=this.tracks[s])==null?void 0:_.buffer;C&&(S?this.updateTimestampOffset(C,w,.1,s,g,m):h!==void 0&&Ye(h)&&this.updateTimestampOffset(C,h,1e-6,s,g,m)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const _=self.performance.now();d.executeEnd=d.end=_,x.first===0&&(x.first=_),b&&b.first===0&&(b.first=_);const C={};this.sourceBuffers.forEach(([k,D])=>{k&&(C[k]=ft.getBuffered(D))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(j.BUFFER_APPENDED,{type:s,frag:o,part:u,chunkMeta:c,parent:o.type,timeRanges:C})},onError:_=>{var C;const k={type:nt.MEDIA_ERROR,parent:o.type,details:Te.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:u,chunkMeta:c,error:_,err:_,fatal:!1},D=(C=this.media)==null?void 0:C.error;if(_.code===DOMException.QUOTA_EXCEEDED_ERR||_.name=="QuotaExceededError"||"quota"in _)k.details=Te.BUFFER_FULL_ERROR;else if(_.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!D)k.errorAction=uu(!0);else if(_.name===O$&&this.sourceBufferCount===0)k.errorAction=uu(!0);else{const U=++this.appendErrors[s];this.warn(`Failed ${U}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${D||"no media error"})`),(U>=this.hls.config.appendErrorMaxRetry||D)&&(k.fatal=!0)}this.hls.trigger(j.ERROR,k)}};this.log(`queuing "${s}" append sn: ${g}${u?" p: "+u.index:""} of ${o.type===Ze.MAIN?"level":"track"} ${o.level} cc: ${m}`),this.append(R,s,this.isPending(this.tracks[s]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(j.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:s}=t;n?this.append(this.getFlushOp(n,i,s),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,i,s),a)})}onFragParsed(e,t){const{frag:n,part:i}=t,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[jt.AUDIOVIDEO]?s.push("audiovideo"):(a[jt.AUDIO]&&s.push("audio"),a[jt.VIDEO]&&s.push("video"));const o=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const c=i?i.stats:n.stats;this.hls.trigger(j.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(j.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(j.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===Te.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;Ye(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,s=n.currentTime,a=t.levelTargetDuration,o=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Ye(o)&&o>=0){const c=Math.max(o,a),h=Math.floor(s/a)*a-c;this.flushBackBuffer(s,a,h)}const u=i.frontBufferFlushThreshold;if(Ye(u)&&u>0){const c=Math.max(i.maxBufferLength,u),h=Math.max(c,a),d=Math.floor(s/a)*a+h;this.flushFrontBuffer(s,a,d)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const o=ft.getBuffered(s);if(o.length>0&&n>o.start(0)){var a;this.hls.trigger(j.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((a=this.details)!=null&&a.live)this.hls.trigger(j.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const a=ft.getBuffered(s),o=a.length;if(o<2)return;const u=a.start(o-1),c=a.end(o-1);if(n>u||e>=u&&e<=c)return;this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),h=Math.max(c,i);return{duration:1/0,start:c,end:h}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return Ye(s)?{duration:s}:null;const a=this.media.duration,o=Ye(n.duration)?n.duration:0;return i>o&&i>a||!Ye(a)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Ye(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${$t(n)}`),this.tracksReady){var i;const s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(j.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const u=this.getTrackCodec(o,a),c=`${o.container};codecs=${u}`;o.codec=u,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${$t(o)}`);try{const h=n.addSourceBuffer(c),d=Fb(a),g=[a,h];t[d]=g,o.buffer=h}catch(h){var i;this.error(`error while trying to add sourceBuffer: ${h.message}`),this.shiftAndExecuteNext(a),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[a],this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,sourceBufferName:a,mimeType:c,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&mf(n,"video")&&(i=oae(i,n));const s=xp(i,e.levelCodec);return s?t.slice(0,5)==="audio"?Tg(s,this.appendSource):s:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(j.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.currentOp(e);s&&s.onError(i)}updateTimestampOffset(e,t,n,i,s,a){const o=t-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${s} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:i,mediaSource:s}=this,a=this.tracks[e],o=a?.buffer;if(!i||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=Ye(i.duration)?i.duration:1/0,c=Ye(s.duration)?s.duration:1/0,h=Math.max(0,t),d=Math.min(n,u,c);d>h&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${h},${d}] from the ${e} SourceBuffer`),o.remove(h,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n?.buffer;if(!i)throw new mle(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const s=i.buffer;if(!s)return;const a=n.bind(this,e);i.listeners.push({event:t,listener:a}),s.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function dM(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function vle(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function Fb(r){return r==="audio"?1:0}class G1{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(j.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.BUFFER_CODECS,this.onBufferCodecs,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(j.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Ye(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,G1.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(o,u)=>u?o.width!==u.width||o.height!==u.height:!0;let s=e.length-1;const a=Math.max(t,n);for(let o=0;o<e.length;o+=1){const u=e[o];if((u.width>=a||u.height>=a)&&i(u,e[o+1])){s=o;break}}return s}}const ble={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ln=ble,xle={HLS:"h"},Sle=xle;class os{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof os?n:new os(n))),this.value=e,this.params=t}}const Ele="Dict";function Tle(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function Ale(r,e,t,n){return new Error(`failed to ${r} "${Tle(e)}" as ${t}`,{cause:n})}function ls(r,e,t){return Ale("serialize",r,e,t)}class R${constructor(e){this.description=e}}const pM="Bare Item",wle="Boolean";function _le(r){if(typeof r!="boolean")throw ls(r,wle);return r?"?1":"?0"}function Ile(r){return btoa(String.fromCharCode(...r))}const Ole="Byte Sequence";function Rle(r){if(ArrayBuffer.isView(r)===!1)throw ls(r,Ole);return`:${Ile(r)}:`}const Lle="Integer";function Cle(r){return r<-999999999999999||999999999999999<r}function L$(r){if(Cle(r))throw ls(r,Lle);return r.toString()}function Ple(r){return`@${L$(r.getTime()/1e3)}`}function C$(r,e){if(r<0)return-C$(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}const Dle="Decimal";function kle(r){const e=C$(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw ls(r,Dle);const t=e.toString();return t.includes(".")?t:`${t}.0`}const Mle="String",Nle=/[\x00-\x1f\x7f]+/;function Ble(r){if(Nle.test(r))throw ls(r,Mle);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Ule(r){return r.description||r.toString().slice(7,-1)}const jle="Token";function gM(r){const e=Ule(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw ls(e,jle);return e}function pT(r){switch(typeof r){case"number":if(!Ye(r))throw ls(r,pM);return Number.isInteger(r)?L$(r):kle(r);case"string":return Ble(r);case"symbol":return gM(r);case"boolean":return _le(r);case"object":if(r instanceof Date)return Ple(r);if(r instanceof Uint8Array)return Rle(r);if(r instanceof R$)return gM(r);default:throw ls(r,pM)}}const Fle="Key";function gT(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw ls(r,Fle);return r}function z1(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${gT(e)}`:`;${gT(e)}=${pT(t)}`).join("")}function P$(r){return r instanceof os?`${pT(r.value)}${z1(r.params)}`:pT(r)}function $le(r){return`(${r.value.map(P$).join(" ")})${z1(r.params)}`}function Gle(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw ls(r,Ele);const t=r instanceof Map?r.entries():Object.entries(r),n=e?.whitespace?" ":"";return Array.from(t).map(([i,s])=>{s instanceof os||(s=new os(s));let a=gT(i);return s.value===!0?a+=z1(s.params):(a+="=",Array.isArray(s.value)?a+=$le(s):a+=P$(s)),a}).join(`,${n}`)}function D$(r,e){return Gle(r,e)}const Ki="CMCD-Object",ar="CMCD-Request",Ro="CMCD-Session",$a="CMCD-Status",zle={br:Ki,ab:Ki,d:Ki,ot:Ki,tb:Ki,tpb:Ki,lb:Ki,tab:Ki,lab:Ki,url:Ki,pb:ar,bl:ar,tbl:ar,dl:ar,ltc:ar,mtp:ar,nor:ar,nrr:ar,rc:ar,sn:ar,sta:ar,su:ar,ttfb:ar,ttfbb:ar,ttlb:ar,cmsdd:ar,cmsds:ar,smrt:ar,df:ar,cs:ar,ts:ar,cid:Ro,pr:Ro,sf:Ro,sid:Ro,st:Ro,v:Ro,msd:Ro,bs:$a,bsd:$a,cdn:$a,rtp:$a,bg:$a,pt:$a,ec:$a,e:$a},Hle={REQUEST:ar};function Kle(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(i=>e[i]=t),e},{})}function qle(r,e){const t={};if(!r)return t;const n=Object.keys(r),i=e?Kle(e):{};return n.reduce((s,a)=>{var o;const u=zle[a]||i[a]||Hle.REQUEST,c=(o=s[u])!==null&&o!==void 0?o:s[u]={};return c[a]=r[a],s},t)}function Vle(r){return["ot","sf","st","e","sta"].includes(r)}function Wle(r){return typeof r=="number"?Ye(r):r!=null&&r!==""&&r!==!1}const k$="event";function Yle(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const wp=r=>Math.round(r),mT=(r,e)=>Array.isArray(r)?r.map(t=>mT(t,e)):r instanceof os&&typeof r.value=="string"?new os(mT(r.value,e),r.params):(e.baseUrl&&(r=Yle(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),Dd=r=>wp(r/100)*100,Xle=(r,e)=>{let t=r;return e.version>=2&&(r instanceof os&&typeof r.value=="string"?t=new os([r]):typeof r=="string"&&(t=[r])),mT(t,e)},Qle={br:wp,d:wp,bl:Dd,dl:Dd,mtp:Dd,nor:Xle,rtp:Dd,tb:wp},M$="request",N$="response",H1=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],Zle=["e"],Jle=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Om(r){return Jle.test(r)}function eue(r){return H1.includes(r)||Zle.includes(r)||Om(r)}const B$=["d","dl","nor","ot","rtp","su"];function tue(r){return H1.includes(r)||B$.includes(r)||Om(r)}const rue=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function nue(r){return H1.includes(r)||B$.includes(r)||rue.includes(r)||Om(r)}const iue=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function sue(r){return iue.includes(r)||Om(r)}const aue={[N$]:nue,[k$]:eue,[M$]:tue};function U$(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,i=e.reportingMode||M$,s=n===1?sue:aue[i];let a=Object.keys(r).filter(s);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const u=i===N$||i===k$;u&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const c=Mt({},Qle,e.formatters),h={version:n,reportingMode:i,baseUrl:e.baseUrl};return a.sort().forEach(d=>{let g=r[d];const m=c[d];if(typeof m=="function"&&(g=m(g,h)),d==="v"){if(n===1)return;g=n}d=="pr"&&g===1||(u&&d==="ts"&&!Ye(g)&&(g=Date.now()),Wle(g)&&(Vle(d)&&typeof g=="string"&&(g=new R$(g)),t[d]=g))}),t}function oue(r,e={}){const t={};if(!r)return t;const n=U$(r,e),i=qle(n,e?.customHeaderMap);return Object.entries(i).reduce((s,[a,o])=>{const u=D$(o,{whitespace:!1});return u&&(s[a]=u),s},t)}function lue(r,e,t){return Mt(r,oue(e,t))}const uue="CMCD";function cue(r,e={}){return r?D$(U$(r,e),{whitespace:!1}):""}function fue(r,e={}){if(!r)return"";const t=cue(r,e);return encodeURIComponent(t)}function hue(r,e={}){if(!r)return"";const t=fue(r,e);return`${uue}=${t}`}const mM=/CMCD=[^&#]+/;function due(r,e,t){const n=hue(e,t);if(!n)return r;if(mM.test(r))return r.replace(mM,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class pue{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Ln.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const{frag:s,part:a}=i,o=this.hls.levels[s.level],u=this.getObjectType(s),c={d:(a||s).duration*1e3,ot:u};(u===Ln.VIDEO||u===Ln.AUDIO||u==Ln.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(u)/1e3,c.bl=this.getBufferLength(u));const h=a?this.getNextPart(a):this.getNextFrag(s);h!=null&&h.url&&h.url!==s.url&&(c.nor=h.url),this.apply(i,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHED,this.onMediaDetached,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHED,this.onMediaDetached,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Sle.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Mt(t,this.createData());const n=t.ot===Ln.INIT||t.ot===Ln.VIDEO||t.ot===Ln.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((a,o)=>(i.includes(o)&&(a[o]=t[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),lue(e.headers,t,s)):e.url=due(e.url,t,s)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t;const{index:n,fragment:i}=e,s=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(s){const{sn:a}=i;for(let o=s.length-1;o>=0;o--){const u=s[o];if(u.index===n&&u.fragment.sn===a)return s[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ln.TIMED_TEXT;if(e.sn==="initSegment")return Ln.INIT;if(t==="audio")return Ln.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ln.VIDEO:Ln.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===Ln.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}return n.forEach(s=>{s.bitrate>t&&(t=s.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===Ln.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:ft.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}}const gue=3e5;class mue extends wi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===qr.SendAlternateToPenaltyBox&&n.flags===Wn.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:u,type:c}=t.context;o&&i?a=this.getPathwayForGroupId(o,c,a):u&&(a=u)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),t.details===Te.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${$t(s)} penalized: ${$t(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>gue&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,u=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,i$(t),this.hls.trigger(j.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];u&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(t===yt.AUDIO_TRACK&&i[s].hasAudioGroup(e)||t===yt.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":u}=s;if(t.some(h=>h.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(h=>{const d=new er(h.attrs);d["PATHWAY-ID"]=a;const g=d.AUDIO&&`${d.AUDIO}_clone_${a}`,m=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;g&&(n[d.AUDIO]=g,d.AUDIO=g),m&&(i[d.SUBTITLES]=m,d.SUBTITLES=m);const y=j$(h.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),x=new vf({attrs:d,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:y,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let b=1;b<h.audioGroups.length;b++)x.addGroupId("audio",`${h.audioGroups[b]}_clone_${a}`);if(h.subtitleGroups)for(let b=1;b<h.subtitleGroups.length;b++)x.addGroupId("text",`${h.subtitleGroups[b]}_clone_${a}`);return x});t.push(...c),yM(this.audioTracks,n,u,a),yM(this.subtitleTracks,i,u,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+h)}const s={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(h,d,g,m)=>{this.log(`Loaded steering manifest: "${i}"`);const y=h.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":x,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":E}=y;if(x)try{this.uri=new self.URL(x,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${x}`);return}this.scheduleRefresh(this.uri||g.url),b&&this.clonePathways(b);const S={steeringManifest:y,url:i.toString()};this.hls.trigger(j.STEERING_MANIFEST_LOADED,S),E&&this.updatePathwayPriority(E)},onError:(h,d,g,m)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${d.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let y=this.timeToLoad*1e3;if(h.code===429){const x=this.loader;if(typeof x?.getResponseHeader=="function"){const b=x.getResponseHeader("Retry-After");b&&(y=parseFloat(b)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,y)},onTimeout:(h,d,g)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,u,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function yM(r,e,t,n){r&&Object.keys(e).forEach(i=>{const s=r.filter(a=>a.groupId===i).map(a=>{const o=Mt({},a);return o.details=void 0,o.attrs=new er(o.attrs),o.url=o.attrs.URI=j$(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...s)})}function j$(r,e,t,n){const{HOST:i,PARAMS:s,[t]:a}=n;let o;e&&(o=a?.[e],o&&(r=o));const u=new self.URL(r);return i&&!o&&(u.host=i),s&&Object.keys(s).sort().forEach(c=>{c&&u.searchParams.set(c,s[c])}),u.href}class fu extends wi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=fu.CDMCleanupPromise?[fu.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,s=`"${t.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=zc(this.config));const o=a.map(Pb).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=Ep(a);if(n!=="sinf"||o!==tr.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let u;try{const m=Tr(new Uint8Array(i)),y=P1(JSON.parse(m).sinf),x=D3(y);if(!x)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(x.subarray(8,24))}catch(m){this.warn(`${s} Failed to parse sinf: ${m}`);return}const c=Vr(u),{keyIdToKeySessionPromise:h,mediaKeySessions:d}=this;let g=h[c];for(let m=0;m<d.length;m++){const y=d[m],x=y.decryptdata;if(!x.keyId)continue;const b=Vr(x.keyId);if(Og(u,x.keyId)||x.uri.replace(/-/g,"").indexOf(c)!==-1){if(g=h[b],!g)continue;if(x.pssh)break;delete h[b],x.pssh=new Uint8Array(i),x.keyId=u,g=h[c]=g.then(()=>this.generateRequestWithPreferredKeySession(y,n,i,"encrypted-event-key-match")),g.catch(E=>this.handleError(E));break}}g||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(j.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(j.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(j.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(j.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(j.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(j.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t?.[e];if(i)return i.licenseUrl;if(e===tr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,o,u)=>!!a&&u.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(n),s=t.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const u=c=>{const h=c.shift();this.getMediaKeysPromise(h,i,s).then(d=>a({keySystem:h,mediaKeys:d})).catch(d=>{c.length?u(c):d instanceof Vn?o(d):o(new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return X3===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){var i;const s=Xae(e,t,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(i=a)==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${$t(s)}`),o=this.requestMediaKeySystemAccess(e,s);const u=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const h=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=u.mediaKeys=c.createMediaKeys().then(g=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,h.then(m=>m?this.setMediaKeysServerCertificate(g,e,m):g)));return d.catch(g=>{this.error(`Failed to create media-keys for "${e}"}: ${g}`)}),d})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Vr(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=kd(t),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Vr(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Pb(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const s=Pb(i);s?t(s):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=zc(this.config),n=e.map(Ep).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const i=yue(e,t[n]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,n=kd(t),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(t)==="internal-error"){const o=vM(i||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const s=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:u,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(u,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:c,decryptdata:t}))))).then(u=>{const c="cenc",h=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,c,h,"playlist-key")});return o.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return a.catch(o=>{if(o instanceof Vn){const u=Rt({},o.data);this.getKeyStatus(t)==="internal-error"&&(u.decryptdata=t);const c=new Vn(u,o.message);this.handleError(c,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Vn){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Vr(n.keyId||[])})`:""}`),this.hls.trigger(j.ERROR,e.data)}else this.error(e.message),this.hls.trigger(j.ERROR,{type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=kd(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=Ep(e.keyFormat),s=i?[i]:zc(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=zc(this.config)),e.length===0)throw new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${$t({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((s,a)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return a(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(s).catch(a)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var s;const a=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(a)try{const y=a.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=y.initData?y.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const o=kd(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${o} URI: ${u} (init data type: ${t} length: ${n.byteLength})`);const c=new k1,h=e._onmessage=y=>{const x=e.mediaKeysSession;if(!x){c.emit("error",new Error("invalid state"));return}const{messageType:b,message:E}=y;this.log(`"${b}" message event for session "${x.sessionId}" message size: ${E.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,E).catch(S=>{c.eventNames().length?c.emit("error",S):this.handleError(S)}):b==="license-release"?e.keySystem===tr.FAIRPLAY&&this.updateKeySession(e,lT("acknowledged")).then(()=>this.removeSession(e)).catch(S=>this.handleError(S)):this.warn(`unhandled media key message type "${b}"`)},d=(y,x)=>{x.keyStatus=y;let b;y.startsWith("usable")?c.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?b=vM(y,x.decryptdata):y==="expired"?b=new Error(`key expired (keyId: ${o})`):y==="released"?b=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${o})`),b&&(c.eventNames().length?c.emit("error",b):this.handleError(b))},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const b=this.getKeyStatuses(e);if(!Object.keys(b).some(I=>b[I]!=="status-pending"))return;if(b[o]==="expired"){this.log(`Expired key ${$t(b)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let S=b[o];if(S)d(S,e);else{var T;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(T=e.keyStatusTimeouts)[o]||(T[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const w=this.getKeyStatus(e.decryptdata);if(w&&w!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${w} from other session.`),d(w,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),S="internal-error",d(S,e)},1e3)),this.log(`No status for keyId ${o} (${$t(b)}).`)}};pn(e.mediaKeysSession,"message",h),pn(e.mediaKeysSession,"keystatuseschange",g);const m=new Promise((y,x)=>{c.on("error",x),c.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${u}`)}).catch(y=>{throw new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>m).catch(y=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const o=i;i=n,n=o}const s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===tr.PLAYREADY&&s.length===16){const o=Vr(s);t[o]=n,W3(s)}const a=Vr(s);n==="internal-error"&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const u={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,x)=>{a(g.data)},onError:(g,m,y,x)=>{o(new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Rt({url:u.url,data:void 0},g)},`"${e}" certificate request failed (${s}). Status: ${g.code} (${g.text})`))},onTimeout:(g,m,y)=>{o(new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(g,m,y)=>{o(new Error("aborted"))}};i.load(u,h,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),i(e)}).catch(a=>{s(new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let h;for(let d=0,g=s.length;d<g;d++){var a,o;h=s[d];const m=(a=h.querySelector("name"))==null?void 0:a.textContent,y=(o=h.querySelector("value"))==null?void 0:o.textContent;m&&y&&e.setRequestHeader(m,y)}}const u=i.querySelector("Challenge"),c=u?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return lT(atob(c))}setupLicenseXHR(e,t,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let u=o.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const c=this.config.licenseResponseCallback;if(c)try{u=c.call(this.hls,o,a,e)}catch(h){this.error(h)}i(u)}else{const u=n.errorRetry,c=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)s(new Vn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const h=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:u,licenseChallenge:c})=>{e.keySystem==tr.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(u,c)),u.send(c)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,pn(n,"encrypted",this.onMediaEncrypted),pn(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(kn(e,"encrypted",this.onMediaEncrypted),kn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Za.clearKeyUriToKeyIdMap();const s=i.length;fu.CDMCleanupPromise=Promise.all(i.map(a=>this.removeSession(a)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{this.log(`Could not clear media keys: ${a}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))||Promise.resolve())).catch(a=>{this.log(`Could not close sessions and clear media keys: ${a}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Vr(i?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(c=>self.clearTimeout(a[c]));const{drmSystemOptions:o}=this.config;return(Zae(o)?new Promise((c,h)=>{self.setTimeout(()=>h(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(h)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}fu.CDMCleanupPromise=void 0;function kd(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return Vr(r.keyId)}function yue(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class Vn extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function vM(r,e){const t=r==="output-restricted",n=t?Te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Te.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Vn({type:nt.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class vue{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(j.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(j.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,u=1e3*a/s,c=this.hls;if(c.trigger(j.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let h=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=h)&&(h=h-1,c.trigger(j.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:c.currentLevel}),c.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function F$(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function $$(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Ct.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){Ct.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function su(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function yT(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const s=xue(r.cues,e,t);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&r.removeCue(s[a])}i==="disabled"&&(r.mode=i)}function bue(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t,s;for(;n<=i;)if(s=Math.floor((i+n)/2),e<r[s].startTime)i=s-1;else if(e>r[s].startTime&&n<t)n=s+1;else return s;return r[n].startTime-e<e-r[i].startTime?n:i}function xue(r,e,t){const n=[],i=bue(r,e);if(i>-1)for(let s=i,a=r.length;s<a;s++){const o=r[s];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function _p(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class Sue extends $1{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=_p(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")t=n[s];else if(n[s].mode==="showing"){t=n[s];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(j.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;_p(n.textTracks).forEach(a=>{su(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(a=>i?.indexOf(a)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,d)=>{h.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const h=Ji(o,a);if(h>-1)s=a[h];else{const d=Ji(o,this.tracks);s=this.tracks[d]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(j.SUBTITLE_TRACKS_UPDATED,c),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const s=t[i];if(!(n&&!s.default||!n&&!e)&&(!e||Vo(s,e)))return i}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(Ef(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(Ef(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(dT(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===yt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Vo(e,n))return n;const i=Ji(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=Ji(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(j.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=_p(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(s=>dT(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Ye(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(j.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:u,type:c,url:h}=i;this.hls.trigger(j.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:u,type:c,url:h});const d=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(d)}}function Eue(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?s:s&3|8).toString(16)})}}}function Yc(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const hu=.025;let Pg=(function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r})({});function Tue(r,e,t){return`${r.identifier}-${t+1}-${Yc(e)}`}class Aue{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return $b(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=$b(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Ye(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return $b(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<hu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Pg.Range:Pg.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return wue(this)}}function $b(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<hu)?e.start:e.start+e.duration}function G$(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function Gb(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function wue(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function ru(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class _ue{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(j.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(t);this.interstitial=n,this.assetItem=i;const a=()=>{this.hasDetails=!0};s.once(j.LEVEL_LOADED,a),s.once(j.AUDIO_TRACK_LOADED,a),s.once(j.SUBTITLE_TRACK_LOADED,a),s.on(j.MEDIA_ATTACHING,(o,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(j.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,s.trigger(j.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=G$(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=ft.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=ft.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,n){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,n){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${ru(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const bM=.033;class Iue extends wi{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(s=i[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(t&&t!=="primary"&&(s=s[t]),e===s.start||e>s.start&&e<s.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const s=n[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let s=0;s<i;s++){const a=n[s];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&(t<o+(a.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,s=this.events,a=this.parseDateRanges(i,{url:n.url},t),o=Object.keys(i),u=s?s.filter(c=>!o.includes(c.identifier)):[];a.length&&a.sort((c,h)=>{const d=c.cue.pre,g=c.cue.post,m=h.cue.pre,y=h.cue.post;if(d&&!m)return-1;if(m&&!d||g&&!y)return 1;if(y&&!g)return-1;if(!d&&!m&&!g&&!y){const x=c.startTime,b=h.startTime;if(x!==b)return x-b}return c.dateRange.tagOrder-h.dateRange.tagOrder}),this.events=a,u.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,u)}updateSchedule(e,t=[],n=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const s=this.items,a=this.parseSchedule(i,e);(n||t.length||s?.length!==a.length||a.some((u,c)=>Math.abs(u.playout.start-s[c].playout.start)>.005||Math.abs(u.playout.end-s[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,n){const i=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],u=e[o];if(u.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(u):(c=new Aue(u,t),this.eventMap[o]=c,n===!1&&(c.appendInPlace=n)),i.push(c)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,s=i.live?1/0:i.edge;let a=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,t);let u=0,c=0;if(e.forEach((h,d)=>{const g=h.cue.pre,m=h.cue.post,y=e[d-1]||null,x=h.appendInPlace,b=m?s:h.startOffset,E=h.duration,S=h.timelineOccupancy===Pg.Range?E:0,T=h.resumptionOffset,I=y?.startTime===b,w=b+h.cumulativeDuration;let R=x?w+E:b+T;if(g||!m&&b<=0){const C=c;c+=S,h.timelineStart=w;const k=a;a+=E,n.push({event:h,start:w,end:R,playout:{start:k,end:a},integrated:{start:C,end:c}})}else if(b<=s){if(!I){const D=b-u;if(D>bM){const U=u,N=c;c+=D;const q=a;a+=D;const X={previousEvent:e[d-1]||null,nextEvent:h,start:U,end:U+D,playout:{start:q,end:a},integrated:{start:N,end:c}};n.push(X)}else D>0&&y&&(y.cumulativeDuration+=D,n[n.length-1].end=b)}m&&(R=w),h.timelineStart=w;const C=c;c+=S;const k=a;a+=E,n.push({event:h,start:w,end:R,playout:{start:k,end:a},integrated:{start:C,end:c}})}else return;const _=h.resumeTime;m||_>s?u=s:u=_}),u<s){var o;const h=u,d=c,g=s-u;c+=g;const m=a;a+=g,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:u,end:h+g,playout:{start:m,end:a},integrated:{start:d,end:c}})}this.setDurations(s,a,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let s=0,a=-1;e.forEach((o,u)=>{const c=o.cue.pre,h=o.cue.post,d=c?0:h?i:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=s:(s=0,a=d),!h&&o.snapOptions.in&&(o.resumeAnchor=Jo(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<bM&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const m=Ye(o.resumeOffset)?o.resumeOffset:o.duration;s+=m})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>hu?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(a=>{const o=t[a].details,u=o.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${u}`),!1;const c=Jo(null,o.fragments,n);if(!c)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const h=a==="audio"?.175:0;return Math.abs(c.start-n)<hu+h||Math.abs(c.end-n)<hu+h?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,s=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],u=t+n;o.startOffset=n,o.timelineStart=u,i||(i=o.duration===null),s||(s=!!o.error);const c=o.error?0:o.duration||0;n+=c}i&&!s?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ri(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class Oue{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=G$(n,this.hls.sessionId,e.baseUrl)}catch(g){const m=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_ERROR,g,n);this.hls.trigger(j.ERROR,m);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const s=this.hls.config,a=s.loader,o=new a(s),u={responseType:"json",url:i.href},c=s.interstitialAssetListLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,x)=>{const b=g.data,E=b?.ASSETS;if(!Array.isArray(E)){const S=this.assignAssetListError(e,Te.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,m,x);this.hls.trigger(j.ERROR,S);return}e.assetListResponse=b,this.hls.trigger(j.ASSET_LIST_LOADED,{event:e,assetListResponse:b,networkDetails:x})},onError:(g,m,y,x)=>{const b=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${g.code} ${g.text} (${m.url})`),m.url,x,y);this.hls.trigger(j.ERROR,b)},onTimeout:(g,m,y)=>{const x=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${m.url})`),m.url,g,y);this.hls.trigger(j.ERROR,x)}};return o.load(u,h,d),this.hls.trigger(j.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,n,i,s,a){return e.error=n,{type:nt.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:a,stats:s}}}function xM(r){var e;r==null||(e=r.play())==null||e.catch(()=>{})}function Md(r,e){return`[${r}] Advancing timeline position to ${e}`}class Rue extends wi{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const a=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),a&&n<o.start||n>=o.end){var u;const m=this.findItemIndex(o);let y=this.schedule.findItemIndexAtTime(n);if(y===-1&&(y=m+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${n} (resolving from ${m} to ${y})`)),!this.isInterstitial(o)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!a&&y>m){const x=this.schedule.findJumpRestrictedIndex(m+1,y);if(x>m){this.setSchedulePosition(x);return}}this.setSchedulePosition(y);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const m=o.event.assetList[0];m&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,m))}return}const h=c.timelineStart,d=c.duration||0;if(a&&n<h||n>=h+d){var g;(g=o.event)!=null&&g.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,c)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,i)=>{const s=this.schedule;if(!s)return;const a=this.playingItem,o=s.events||[],u=s.items||[],c=s.durations,h=n.map(x=>x.identifier),d=!!(o.length||h.length);(d||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${u.map(x=>Ri(x))} pos: ${this.timelinePos}`),h.length&&this.log(`Removed events ${h}`);let g=null,m=null;a&&(g=this.updateItem(a,this.timelinePos),this.itemsMatch(a,g)?this.playingItem=g:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(m=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,m)?this.bufferingItem=m:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),n.forEach(x=>{x.assetList.forEach(b=>{this.clearAssetPlayer(b.identifier,null)})}),this.playerQueue.forEach(x=>{if(x.interstitial.appendInPlace){const b=x.assetItem.timelineStart,E=x.timelineOffset-b;if(E)try{x.timelineOffset=b}catch(S){Math.abs(E)>hu&&this.warn(`${S} ("${x.assetId}" ${x.timelineOffset}->${b})`)}}}),d||i){if(this.hls.trigger(j.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:u.slice(0),durations:c,removedIds:h}),this.isInterstitial(a)&&h.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(g,a),y&&m!==g&&this.trimInPlace(m,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Oue(e),this.schedule=new Iue(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(j.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(j.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(j.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(j.MEDIA_ENDED,this.onMediaEnded,this),e.on(j.ERROR,this.onError,this),e.on(j.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(j.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(j.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(j.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(j.MEDIA_ENDED,this.onMediaEnded,this),e.off(j.ERROR,this.onError,this),e.off(j.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){kn(e,"play",this.onPlay),kn(e,"pause",this.onPause),kn(e,"seeking",this.onSeeking),kn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;pn(n,"seeking",this.onSeeking),pn(n,"timeupdate",this.onTimeupdate),pn(n,"play",this.onPlay),pn(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=d=>d&&e.getAssetPlayer(d.identifier),i=(d,g,m,y,x)=>{if(d){let b=d[g].start;const E=d.event;if(E){if(g==="playout"||E.timelineOccupancy!==Pg.Point){const S=n(m);S?.interstitial===E&&(b+=S.assetItem.startOffset+S[x])}}else{const S=y==="bufferedPos"?a():e[y];b+=S-d.start}return b}return 0},s=(d,g)=>{var m;if(d!==0&&g!=="primary"&&(m=e.schedule)!=null&&m.length){var y;const x=e.schedule.findItemIndexAtTime(d),b=(y=e.schedule.items)==null?void 0:y[x];if(b){const E=b[g].start-b.start;return d+E}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var g,m;return(g=e.primaryDetails)!=null&&g.live?e.primaryDetails.edge:((m=e.schedule)==null?void 0:m.durations[d])||0},u=(d,g)=>{var m,y;const x=e.effectivePlayingItem;if(x!=null&&(m=x.event)!=null&&m.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${g}"`);const b=e.effectivePlayingItem,E=e.schedule.findItemIndexAtTime(d,g),S=(y=e.schedule.items)==null?void 0:y[E],T=e.getBufferingPlayer(),I=T?.interstitial,w=I?.appendInPlace,R=b&&e.itemsMatch(b,S);if(b&&(w||R)){const _=n(e.playingAsset),C=_?.media||e.primaryMedia;if(C){const k=g==="primary"?C.currentTime:i(b,g,e.playingAsset,"timelinePos","currentTime"),D=d-k,U=(w?k:C.currentTime)+D;if(U>=0&&(!_||w||U<=_.duration)){C.currentTime=U;return}}}if(S){let _=d;if(g!=="primary"){const k=S[g].start,D=d-k;_=S.start+D}const C=!e.isInterstitial(S);if((!e.isInterstitial(b)||b.event.appendInPlace)&&(C||S.event.appendInPlace)){const k=e.media||(w?T?.media:null);k&&(k.currentTime=_)}else if(b){const k=e.findItemIndex(b);if(E>k){const U=e.schedule.findJumpRestrictedIndex(k+1,E);if(U>k){e.setSchedulePosition(U);return}}let D=0;if(C)e.timelinePos=_,e.checkBuffer();else{const U=S.event.assetList,N=d-(S[g]||S).start;for(let q=U.length;q--;){const X=U[q];if(X.duration&&N>=X.startOffset&&N<X.startOffset+X.duration){D=q;break}}}e.setSchedulePosition(E,D)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const g=t();return e.isInterstitial(g)?g:null},h={get bufferedEnd(){const d=t(),g=e.bufferingItem;if(g&&g===d){var m;return i(g,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-g.playout.start||((m=e.bufferingAsset)==null?void 0:m.startOffset)||0}return 0},get currentTime(){const d=c(),g=e.effectivePlayingItem;return g&&g===d?i(g,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-g.playout.start:0},set currentTime(d){const g=c(),m=e.effectivePlayingItem;m&&m===g&&u(d+m.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const g=(d=c())==null?void 0:d.event.assetList;return g?g.map(m=>e.getAssetPlayer(m.identifier)):[]},get playingIndex(){var d;const g=(d=c())==null?void 0:d.event;return g&&e.effectivePlayingAsset?g.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return c()?h:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){u(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){u(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,g=d?.event;if(g&&!g.restrictions.skip){const m=e.findItemIndex(d);if(g.appendInPlace){const y=d.playout.start+d.event.duration;u(y+.001,"playout")}else e.advanceAfterAssetEnded(g,m,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const s=(t=i)==null?void 0:t.currentTime;if(!(s===void 0||!Ye(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${$t(s)}`),this.detachedData=s}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let s=null;const a=this.hls,o=e!==a,u=o&&e.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource;let h;if(a.media)u&&(s=a.transferMedia(),this.detachedData=s),h="Primary";else if(c){const y=this.getBufferingPlayer();y?(s=y.transferMedia(),h=`${y}`):h="detached MediaSource"}else h="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${$t(s)}`);else if(!this.detachedData||a.media===t){const y=this.playerQueue;y.length>1&&y.forEach(x=>{if(o&&x.interstitial.appendInPlace!==u){const b=x.interstitial;this.clearInterstitial(x.interstitial,null),b.appendInPlace=!1,b.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${b}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",g=d&&s?s:t;this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${h} (media.currentTime: ${t.currentTime})`);const m=this.schedule;if(g===s&&m){const y=o&&e.assetId===m.assetIdAtEnd;g.overrides={duration:m.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(g)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const s=this.hls.startPosition;if(this.log(Md("checkStart",s)),this.timelinePos=s,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const s=e.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(e,t){const n=e.event,i=n.findAssetIndex(t),s=Gb(n,i);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,n){const i=Gb(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const s=this.schedule.items;if(s){const a=t+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(Md("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const s=e.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const i=t.parentIdentifier,s=n.getEvent(i);if(s){const a=n.findEventIndex(i),o=n.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,o-1)}}setSchedulePosition(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const s=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${s&&Ri(s)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const h=a.event,d=this.playingAsset,g=d?.identifier,m=g?this.getAssetPlayer(g):null;if(m&&g&&(!this.eventItemsMatch(a,s)||t!==void 0&&g!==h.assetList[t].identifier)){var u;const y=h.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${h.assetList.length} ${ru(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(j.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:h,schedule:i.slice(0),scheduleIndex:e,player:m}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(h,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(g,s),m.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&m.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${h} ${Ri(a)}`),h.hasPlayed=!0,this.hls.trigger(j.INTERSTITIAL_ENDED,{event:h,schedule:i.slice(0),scheduleIndex:e}),h.cue.once)){var c;this.updateSchedule();const y=(c=this.schedule)==null?void 0:c.items;if(s&&y){const x=this.findItemIndex(s);this.advanceSchedule(x,y,t,a,o)}return}}this.advanceSchedule(e,i,t,a,o)}advanceSchedule(e,t,n,i,s){const a=this.schedule;if(!a)return;const o=t[e]||null,u=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(h=>{const d=h.interstitial,g=a.findEventIndex(d.identifier);(g<e||g>e+1)&&this.clearInterstitial(d,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const h=o.event;if(n===void 0){n=a.findAssetIndex(h,this.timelinePos);const y=Gb(h,n-1);if(h.isAssetPastPlayoutLimit(y)||h.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(h,e,n);return}n=y}const d=this.waitingItem;this.assetsBuffered(o,u)||this.setBufferingItem(o);let g=this.preloadAssets(h,n);if(this.eventItemsMatch(o,d||i)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${Ri(o)} ${h.appendInPlace?"append in place":""}`),this.hls.trigger(j.INTERSTITIAL_STARTED,{event:h,schedule:t.slice(0),scheduleIndex:e})),!h.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${h}`);return}if(h.assetListLoader&&(h.assetListLoader.destroy(),h.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${h}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const m=h.assetList[n];if(!m){this.advanceAfterAssetEnded(h,e,n||0);return}if(g||(g=this.getAssetPlayer(m.identifier)),g===null||g.destroyed){const y=h.assetList.length;this.warn(`asset ${n+1}/${y} player destroyed ${h}`),g=this.createAssetPlayer(h,m,n),g.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&h.appendInPlace&&this.isAssetBuffered(m))return;this.startAssetPlayer(g,n,t,e,u),this.shouldPlay&&xM(g.media)}else o?(this.resumePrimary(o,e,i),this.shouldPlay&&xM(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ri(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(Md("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const a=(s=this.schedule)==null?void 0:s.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ri(e)}`),this.hls.trigger(j.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:ft.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Md("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(j.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(j.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const i=Rt(Rt({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Rt(Rt({},this.altSelection),{},{audio:n});return}const s=Rt(Rt({},i),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Rt(Rt({},this.altSelection),{},{subtitles:n});return}const s=Rt(Rt({},i),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(e,t){const n=Rk(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=Rk(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const s=t[i];if(s.cue.post){var n;const a=this.schedule.findEventIndex(s.identifier),o=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const s=this.findItemIndex(e,t);return i[s]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const n=e.end+.25,i=ft.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${Ri(e)} (was ${Ri(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const i=ft.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,t,n){const i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const h=this.findItemIndex(s),d=Math.min(h+1,t.length-1),g=t[d];if((u===-1&&s&&e>=s.end||(c=g.event)!=null&&c.appendInPlace&&e+.01>=g.start)&&(u=d),this.isInterstitial(s)){const m=s.event;if(d-o>1&&m.appendInPlace===!1||m.assetList.length===0&&m.assetListLoader)return}if(this.bufferedPos=e,u>h&&u>o)this.bufferedToItem(g);else{const m=this.primaryDetails;this.primaryLive&&m&&e>m.edge-m.targetduration&&g.start<m.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(g)&&this.preloadAssets(g.event,0)}}else n&&a&&!this.itemsMatch(a,s)&&(u===o?this.bufferedToItem(a):u===o+1&&this.bufferedToItem(t[u]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const s=this.getAssetPlayer(i.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:i,events:s}=n;if(!i||!s)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ri(e)}`+(t?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const c=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((h,d)=>{const g=this.getAssetPlayer(h.identifier);g&&(d===c&&g.loadSource(),g.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(j.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(i||!s){const a=this.preloadAssets(n,t);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,s=i===0&&!e.assetListLoader,a=e.cue.once;if(s){const u=e.timelineStart;if(e.appendInPlace){var o;const g=this.playingItem;!this.isInterstitial(g)&&(g==null||(o=g.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let c,h=0;if(!this.playingItem&&this.primaryLive&&(h=this.hls.startPosition,h===-1&&(h=this.hls.liveSyncPosition||0)),h&&!(e.cue.pre||e.cue.post)){const g=h-u;g>0&&(c=Math.round(g*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${c?` live-start: ${h} start-offset: ${c}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!a&&i){for(let c=t;c<i;c++){const h=e.assetList[c],d=this.getAssetPlayerQueueIndex(h.identifier);(d===-1||this.playerQueue[d].destroyed)&&!h.error&&this.createAssetPlayer(e,h,c)}const u=e.assetList[t];if(u){const c=this.getAssetPlayer(u.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,s,a){const o={parentIdentifier:e.identifier,identifier:Tue(e,a,t),duration:s,startOffset:n,timelineStart:i,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,n){const i=this.hls,s=i.userConfig;let a=s.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(a||o)&&(a=Mt({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const u=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const I=this.timelinePos-t.timelineStart;if(I>1){const w=t.duration;w&&I<w&&(h=I)}}const d=t.identifier,g=Rt(Rt({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:u||s.audioPreference,subtitlePreference:c||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));const m=g.cmcd;m!=null&&m.sessionId&&m.contentId&&(g.cmcd=Mt({},m,{contentId:Yc(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const y=new _ue(this.HlsPlayerClass,g,e,t);this.playerQueue.push(y),e.assetList[n]=t;let x=!0;const b=I=>{if(I.live){var w;const C=new Error(`Interstitials MUST be VOD assets ${e}`),k={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:C},D=((w=this.schedule)==null?void 0:w.findEventIndex(e.identifier))||-1;this.handleAssetItemError(k,e,D,n,C.message);return}const R=I.edge-I.fragmentStart,_=t.duration;(x||_===null||R>_)&&(x=!1,this.log(`Interstitial asset "${d}" duration change ${_} > ${R}`),t.duration=R,this.updateSchedule())};y.on(j.LEVEL_UPDATED,(I,{details:w})=>b(w)),y.on(j.LEVEL_PTS_UPDATED,(I,{details:w})=>b(w)),y.on(j.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const E=(I,w)=>{const R=this.getAssetPlayer(d);if(R&&w.tracks){R.off(j.BUFFER_CODECS,E),R.tracks=w.tracks;const _=this.primaryMedia;this.bufferingAsset===R.assetItem&&_&&!R.media&&this.bufferAssetPlayer(R,_)}};y.on(j.BUFFER_CODECS,E);const S=()=>{var I;const w=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${w}`),!w||!this.schedule)return;const R=this.schedule.findEventIndex(e.identifier),_=(I=this.schedule.items)==null?void 0:I[R];this.isInterstitial(_)&&this.advanceAssetBuffering(_,t)};y.on(j.BUFFERED_TO_END,S);const T=I=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const R=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,R,I)};return y.once(j.MEDIA_ENDED,T(n)),y.once(j.PLAYOUT_LIMIT_REACHED,T(1/0)),y.on(j.ERROR,(I,w)=>{if(!this.schedule)return;const R=this.getAssetPlayer(d);if(w.details===Te.BUFFER_STALLED_ERROR){if(R!=null&&R.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(w,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${w.error} ${e}`)}),y.on(j.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const w=new Error(`Asset player destroyed unexpectedly ${d}`),R={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:w};this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),n,w.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${ru(t)}`),this.hls.trigger(j.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${t&&Ri(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,s){const{interstitial:a,assetItem:o,assetId:u}=e,c=a.assetList.length,h=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!h||h.identifier!==u)&&(h&&(this.clearAssetPlayer(h.identifier,n[i]),delete h.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${ru(o)}`),this.hls.trigger(j.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,t){var n,i;if(!this.schedule)return;const{interstitial:s,assetItem:a}=e,o=this.schedule.findEventIndex(s.identifier),u=(n=this.schedule.items)==null?void 0:n[o];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const h=s.appendInPlace;if(h&&c?.interstitial.appendInPlace===!1)return;const d=c?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(h&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!A3(d,e.tracks)){const g=new Error(`Asset ${ru(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),m={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:g},y=s.findAssetIndex(a);this.handleAssetItemError(m,s,o,y,g.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const i=n.currentTime,s=t.findAssetIndex(e,i),a=e.assetList[s];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const u=o.currentTime||i-a.timelineStart,c=o.duration-u;if(this.warn(`Stalled at ${u} of ${u+c} in ${o} ${e} (media.currentTime: ${i})`),u&&(c/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const h=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,h,s)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,i,s){if(e.details===Te.BUFFER_STALLED_ERROR)return;const a=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&ru(a)} ${e.error}`),!this.schedule)return;const o=a?.identifier||"",u=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[u]||null,h=this.schedule.items,d=Mt({},e,{fatal:!1,errorAction:uu(!0),asset:a,assetListIndex:i,event:t,schedule:h,scheduleIndex:n,player:c});if(this.hls.trigger(j.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const g=this.playingAsset,m=this.bufferingAsset,y=new Error(s);if(a&&(this.clearAssetPlayer(o,null),a.error=y),!t.assetList.some(x=>!x.error))t.error=y;else for(let x=i;x<t.assetList.length;x++)this.resetAssetPlayer(t.assetList[x].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):g&&g.identifier===o?this.advanceAfterAssetEnded(t,n,i):m&&m.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,m)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${Ri(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const a=this.updateItem(n,i);this.itemsMatch(n,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}onAssetListLoaded(e,t){var n,i;const s=t.event,a=s.identifier,o=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(a)))return;const u=s.timelineStart,c=s.duration;let h=0;o.forEach((x,b)=>{const E=parseFloat(x.DURATION);this.createAsset(s,b,h,u+h,E,x.URI),h+=E}),s.duration=h,this.log(`Loaded asset-list with duration: ${h} (was: ${c}) ${s}`);const d=this.waitingItem,g=d?.event.identifier===a;this.updateSchedule();const m=(i=this.bufferingItem)==null?void 0:i.event;if(g){var y;const x=this.schedule.findEventIndex(a),b=(y=this.schedule.items)==null?void 0:y[x];if(b){if(!this.playingItem&&this.timelinePos>b.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==x){s.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(b)}this.setSchedulePosition(x)}else if(m?.identifier===a){const x=s.assetList[0];if(x){const b=this.getAssetPlayer(x.identifier);if(m.appendInPlace){const E=this.primaryMedia;b&&E&&this.bufferAssetPlayer(b,E)}else b&&b.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case Te.ASSET_LIST_PARSING_ERROR:case Te.ASSET_LIST_LOAD_ERROR:case Te.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case Te.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const SM=500;class Lue extends D1{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Ze.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(j.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(j.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Ge.IDLE,this.setInterval(SM),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragContextChanged(n)||(fr(n)&&(this.fragPrevious=n),this.state=Ge.IDLE),!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let c=0;c<s.length;c++)if(o>=s[c].start&&o<=s[c].end){a=s[c];break}const u=n.start+n.duration;a?a.end=u:(a={start:o,end:u},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,Ze.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===Ze.SUBTITLE&&(t.details===Te.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&I$(this.levels,t)){this.levels=t.map(n=>new vf(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new vf(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ze.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Ge.STOPPED&&this.setInterval(SM)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:s}=this,{details:a,id:o}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const u=s[o];if(o>=s.length||!u)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(n=u.details)!=null&&n.live){if(a.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const g=d.fragments[0];if(!u.details)a.hasProgramDateTime&&d.hasProgramDateTime?(Lg(a,d),c=a.fragmentStart):g&&(c=g.start,cT(a,c));else{var h;c=this.alignPlaylists(a,u.details,(h=this.levelLastLoaded)==null?void 0:h.details),c===0&&g&&(c=g.start,cT(a,c))}d&&!this.startFragRequested&&this.setStartPosition(d,c)}u.details=a,this.levelLastLoaded=u,o===i&&(this.hls.trigger(j.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Ge.IDLE&&(Jo(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&cu(i.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,C1(i.method)).catch(o=>{throw s.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const u=performance.now();s.trigger(j.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:u}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=Ge.IDLE})}}doTick(){if(!this.media){this.state=Ge.IDLE;return}if(this.state===Ge.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,s=this.getLoadPosition(),a=ft.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:o,len:u}=a,c=n.details,h=this.hls.maxBufferLength+c.levelTargetDuration;if(u>h)return;const d=c.fragments,g=d.length,m=c.edge;let y=null;const x=this.fragPrevious;if(o<m){const S=i.maxFragLookUpTolerance,T=o>m-S?0:S;y=Jo(x,d,Math.max(d[0].start,o),T),!y&&x&&x.start<d[0].start&&(y=d[0])}else y=d[g-1];if(y=this.filterReplacedPrimary(y,n.details),!y)return;const b=y.sn-c.startSN,E=d[b-1];if(E&&E.cc===y.cc&&this.fragmentTracker.getState(E)===wr.NOT_LOADED&&(y=E),this.fragmentTracker.getState(y)===wr.NOT_LOADED){const S=this.mapToInitFragWhenRequired(y);S&&this.loadFragment(S,n,o)}}}loadFragment(e,t,n){fr(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Cue(this.tracksBuffered[this.currentTrackId]||[])}}class Cue{constructor(e){this.buffered=void 0;const t=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const Pue={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},z$=r=>String.fromCharCode(Pue[r]||r),Li=15,Ds=100,Due={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kue={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Mue={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Nue={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Bue=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Uue{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;Ct.log(`${this.time} [${e}] ${n}`)}}}const Lo=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class H${constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class jue{constructor(){this.uchar=" ",this.penState=new H$}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Fue{constructor(e){this.chars=[],this.pos=0,this.currPenState=new H$,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Ds;t++)this.chars.push(new jue);this.logger=e}equals(e){for(let t=0;t<Ds;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Ds;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Ds;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ds&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ds)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=z$(e);if(this.pos>=Ds){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Ds;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Ds;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class zb{constructor(e){this.rows=[],this.currRow=Li-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Li;t++)this.rows.push(new Fue(e));this.logger=e}reset(){for(let e=0;e<Li;e++)this.rows[e].clear();this.currRow=Li-1}equals(e){let t=!0;for(let n=0;n<Li;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Li;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Li;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+$t(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<Li;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,u=this.logger.time;if(o!==null&&u!==null&&o<u)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[s+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+$t(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let s=0;s<Li;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class EM{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new zb(n),this.nonDisplayedMemory=new zb(n),this.lastOutputScreen=new zb(n),this.currRollUpRow=this.displayedMemory.rows[Li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+$t(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class TM{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Gue(),this.logger=void 0;const i=this.logger=new Uue;this.channels=[null,new EM(e,t,i),new EM(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,s=t[n+1]&127;let a=!1,o=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+Lo([t[n],t[n+1]])+"] -> ("+Lo([i,s])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if($ue(i,s,u)){Nd(null,null,u),this.logger.log(3,()=>"Repeated command ("+Lo([i,s])+") is dropped");continue}Nd(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else Nd(null,null,u);if(!a&&(o=this.parseChars(i,s),o)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Lo([i,s])+" orig: "+Lo([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Lo([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(i||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?Due[e]:Mue[e]:n=a===1?kue[e]:Nue[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+z$(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Lo(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=Bue[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Nd(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Nd(r,e,t){t.a=r,t.b=e}function $ue(r,e,t){return t.a===r&&t.b===e}function Gue(){return{a:null,b:null}}var K1=(function(){if(Rg!=null&&Rg.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,u){if(typeof u!="string"||!Array.isArray(o))return!1;const c=u.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function s(o,...u){let c=1;for(;c<arguments.length;c++){const h=arguments[c];for(const d in h)o[d]=h[d]}return o}function a(o,u,c){const h=this,d={enumerable:!0};h.hasBeenReset=!1;let g="",m=!1,y=o,x=u,b=c,E=null,S="",T=!0,I="auto",w="start",R=50,_="middle",C=50,k="middle";Object.defineProperty(h,"id",s({},d,{get:function(){return g},set:function(D){g=""+D}})),Object.defineProperty(h,"pauseOnExit",s({},d,{get:function(){return m},set:function(D){m=!!D}})),Object.defineProperty(h,"startTime",s({},d,{get:function(){return y},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");y=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",s({},d,{get:function(){return x},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");x=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",s({},d,{get:function(){return b},set:function(D){b=""+D,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",s({},d,{get:function(){return E},set:function(D){E=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",s({},d,{get:function(){return S},set:function(D){const U=n(D);if(U===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",s({},d,{get:function(){return T},set:function(D){T=!!D,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",s({},d,{get:function(){return I},set:function(D){if(typeof D!="number"&&D!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");I=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",s({},d,{get:function(){return w},set:function(D){const U=i(D);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");w=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",s({},d,{get:function(){return R},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");R=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",s({},d,{get:function(){return _},set:function(D){const U=i(D);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");_=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",s({},d,{get:function(){return C},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");C=D,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",s({},d,{get:function(){return k},set:function(D){const U=i(D);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");k=U,this.hasBeenReset=!0}})),h.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a})();class zue{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function K$(r){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}let Hue=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}};function q$(r,e,t,n){const i=n?r.split(n):[r];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(t);if(a.length!==2)continue;const o=a[0],u=a[1];e(o,u)}}const vT=new K1(0,0,""),Bd=vT.align==="middle"?"middle":"center";function Kue(r,e,t){const n=r;function i(){const o=K$(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,u){const c=new Hue;q$(o,function(g,m){let y;switch(g){case"region":for(let x=t.length-1;x>=0;x--)if(t[x].id===m){c.set(g,t[x].region);break}break;case"vertical":c.alt(g,m,["rl","lr"]);break;case"line":y=m.split(","),c.integer(g,y[0]),c.percent(g,y[0])&&c.set("snapToLines",!1),c.alt(g,y[0],["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start",Bd,"end"]);break;case"position":y=m.split(","),c.percent(g,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start",Bd,"end","line-left","line-right","auto"]);break;case"size":c.percent(g,m);break;case"align":c.alt(g,m,["start",Bd,"end","left","right"]);break}},/:/,/\s/),u.region=c.get("region",null),u.vertical=c.get("vertical","");let h=c.get("line","auto");h==="auto"&&vT.line===-1&&(h=-1),u.line=h,u.lineAlign=c.get("lineAlign","start"),u.snapToLines=c.get("snapToLines",!0),u.size=c.get("size",100),u.align=c.get("align",Bd);let d=c.get("position","auto");d==="auto"&&vT.position===50&&(d=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=d}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=i(),a(),s(r,e)}function V$(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class que{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new zue,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let s=t.buffer,a=0;for(s=V$(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function i(s){q$(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=n();const o=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=n(),t.state){case"HEADER":/:/.test(s)?i(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new K1(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Kue(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Vue=/\r\n|\n\r|\n|\r/g,Hb=function(e,t,n=0){return e.slice(n,n+t.length)===t},Wue=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ye(t)||!Ye(n)||!Ye(i)||!Ye(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*s,t};function q1(r,e,t){return Yc(r.toString())+Yc(e.toString())+Yc(t)}const Yue=function(e,t,n){let i=e[t],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function Xue(r,e,t,n,i,s,a){const o=new que,u=ri(new Uint8Array(r)).trim().replace(Vue,`
`).split(`
`),c=[],h=e?rle(e.baseTime,e.timescale):0;let d="00:00.000",g=0,m=0,y,x=!0;o.oncue=function(b){const E=t[n];let S=t.ccOffset;const T=(g-h)/9e4;if(E!=null&&E.new&&(m!==void 0?S=t.ccOffset=E.start:Yue(t,n,T)),T){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}S=T-t.presentationOffset}const I=b.endTime-b.startTime,w=Yn((b.startTime+S-m)*9e4,i*9e4)/9e4;b.startTime=Math.max(w,0),b.endTime=Math.max(w+I,0);const R=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(R)),b.id||(b.id=q1(b.startTime,b.endTime,R)),b.endTime>0&&c.push(b)},o.onparsingerror=function(b){y=b},o.onflush=function(){if(y){a(y);return}s(c)},u.forEach(b=>{if(x)if(Hb(b,"X-TIMESTAMP-MAP=")){x=!1,b.slice(16).split(",").forEach(E=>{Hb(E,"LOCAL:")?d=E.slice(6):Hb(E,"MPEGTS:")&&(g=parseInt(E.slice(7)))});try{m=Wue(d)/1e3}catch(E){y=E}return}else b===""&&(x=!1);o.parse(b+`
`)}),o.flush()}const Kb="stpp.ttml.im1t",W$=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Y$=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Que={left:"start",center:"center",right:"end",start:"start",end:"end"};function AM(r,e,t,n){const i=mt(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>ri(o)),a=tle(e.baseTime,1,e.timescale);try{s.forEach(o=>t(Zue(o,a)))}catch(o){n(o)}}function Zue(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,g)=>(d[g]=i.getAttribute(`ttp:${g}`)||s[g],d),{}),o=i.getAttribute("xml:space")!=="preserve",u=wM(qb(i,"styling","style")),c=wM(qb(i,"layout","region")),h=qb(i,"body","[begin]");return[].map.call(h,d=>{const g=X$(d,o);if(!g||!d.hasAttribute("begin"))return null;const m=Wb(d.getAttribute("begin"),a),y=Wb(d.getAttribute("dur"),a);let x=Wb(d.getAttribute("end"),a);if(m===null)throw _M(d);if(x===null){if(y===null)throw _M(d);x=m+y}const b=new K1(m-e,x-e,g);b.id=q1(b.startTime,b.endTime,b.text);const E=c[d.getAttribute("region")],S=u[d.getAttribute("style")],T=Jue(E,S,u),{textAlign:I}=T;if(I){const w=Que[I];w&&(b.lineAlign=w),b.align=I}return Mt(b,T),b}).filter(d=>d!==null)}function qb(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function wM(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function X$(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var s;return n.nodeName==="br"&&i?t+`
`:(s=n.childNodes)!=null&&s.length?X$(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Jue(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),s.reduce((o,u)=>{const c=Vb(e,n,u)||Vb(r,n,u)||Vb(i,n,u);return c&&(o[u]=c),o},{})}function Vb(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function _M(r){return new Error(`Could not parse ttml timestamp ${r}`)}function Wb(r,e){if(!r)return null;let t=K$(r);return t===null&&(W$.test(r)?t=ece(r,e):Y$.test(r)&&(t=tce(r,e))),t}function ece(r,e){const t=W$.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function tce(r,e){const t=Y$.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Ud{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class rce{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=OM(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this),e.on(j.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(j.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(j.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this),e.off(j.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(j.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(j.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ud(this,"textTrack1"),t=new Ud(this,"textTrack2"),n=new Ud(this,"textTrack3"),i=new Ud(this,"textTrack4");this.cea608Parser1=new TM(1,e,t),this.cea608Parser2=new TM(3,n,i)}addCues(e,t,n,i,s){let a=!1;for(let o=s.length;o--;){const u=s[o],c=nce(u[0],u[1],t,n);if(c>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),a=!0,c/(n-t)>.5))return}if(a||s.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger(j.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s,trackId:a}){const{unparsedVttFrags:o}=this;n===Ze.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(j.FRAG_LOADED,u):this.hls.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(IM(s,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,su(n[e]),F$(n[e],i);else{const u=this.createTextTrack("captions",s,a);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(j.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(s=>{su(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=OM(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)su(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(s=>s.textCodec===Kb);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(I$(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?_p(a.textTracks):null;if(this.tracks.forEach((u,c)=>{let h;if(o){let d=null;for(let g=0;g<o.length;g++)if(o[g]&&IM(o[g],u)){d=o[g],o[g]=null;break}d&&(h=d)}if(h)su(h);else{const d=Q$(u);h=this.createTextTrack(d,u.name,u.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),o!=null&&o.length){const u=o.filter(c=>c!==null).map(c=>c.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(j.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Ze.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:u,sn:c}=t.frag,h=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;s&&a&&(c!==o+1||c===o&&h!==this.lastPartIndex+1||u!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=u,this.lastSn=c,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===Ze.SUBTITLE)if(i.byteLength){const s=n.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===Kb?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;AM(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const u=this.hls,c=(t=n.initSegment)!=null&&t.data?Ti(n.initSegment.data,new Uint8Array(i)).buffer:i;Xue(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,h=>{this._appendCues(h,n.level),u.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},h=>{const d=h.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${h}`),!(d&&o>n.cc)&&u.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:h})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||AM(t,this.initPTS[e.cc],()=>{n.textCodec=Kb,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(s=>$$(i,s))}else{const i=this.tracks[t];if(!i)return;const s=i.default?"default":"subtitles"+t;n.trigger(j.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Ze.SUBTITLE&&this.onFragLoaded(j.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===Ze.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<i.length;s++){const a=i[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(i[s].pts,o[0]),this.cea608Parser2.addData(i[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(u=>yT(o[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(u=>yT(o[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],u=127&e[i++];if(o===0&&u===0)continue;if((4&a)!==0){const h=3&a;(h===0||h===1)&&(t[h].push(o),t[h].push(u))}}return t}}function Q$(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function IM(r,e){return!!r&&r.kind===Q$(e)&&dT(e,r)}function nce(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function OM(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const ice=/\s/,sce={newCue(r,e,t,n){const i=[];let s,a,o,u,c;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<n.rows.length;g++)if(s=n.rows[g],o=!0,u=0,c="",!s.isEmpty()){var d;for(let x=0;x<s.chars.length;x++)ice.test(s.chars[x].uchar)&&o?u++:(c+=s.chars[x].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const m=V$(c.trim()),y=q1(e,t,m);r!=null&&(d=r.cues)!=null&&d.getCueById(y)||(a=new h(e,t,m),a.id=y,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(a))}return r&&i.length&&(i.sort((g,m)=>g.line==="auto"||m.line==="auto"?0:g.line>8&&m.line>8?m.line-g.line:g.line-m.line),i.forEach(g=>$$(r,g))),i}};function ace(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const oce=/(\d+)-(\d+)\/(\d+)/;class RM{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||fce,this.controller=new self.AbortController,this.stats=new A1}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=lce(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=u&&Ye(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(Sf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var g;this.response=this.loader=d;const m=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},c-(m-i.loading.start)),!d.ok){const{status:x,statusText:b}=d;throw new hce(b||"fetch, bad network response",x,d)}i.loading.first=m,i.total=cce(d.headers)||i.total;const y=(g=this.callbacks)==null?void 0:g.onProgress;return y&&Ye(t.highWaterMark)?this.loadProgressively(d,i,e,t.highWaterMark,y):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var g,m;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const x=d[o];x&&(i.loaded=i.total=x);const b={url:y.url,data:d,code:y.status},E=(g=this.callbacks)==null?void 0:g.onProgress;E&&!Ye(t.highWaterMark)&&E(i,e,d,y),(m=this.callbacks)==null||m.onSuccess(b,i,e,y)}).catch(d=>{var g;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const m=d&&d.code||0,y=d?d.message:null;(g=this.callbacks)==null||g.onError({code:m,text:y},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,s){const a=new o$,o=e.body.getReader(),u=()=>o.read().then(c=>{if(c.done)return a.dataLength&&s(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const h=c.value,d=h.length;return t.loaded+=d,d<i||a.dataLength?(a.push(h),a.dataLength>=i&&s(t,n,a.flush().buffer,e)):s(t,n,h.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function lce(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Mt({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function uce(r){const e=oce.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function cce(r){const e=r.get("Content-Range");if(e){const n=uce(e);if(Ye(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function fce(r,e){return new self.Request(r.url,e)}class hce extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const dce=/^age:\s*[\d.]+\s*$/im;class Z${constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new A1,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),s(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&Ye(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,h=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const y=h??t.response;if(y!=null){var a,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const x=t.responseType==="arraybuffer"?y.byteLength:y.length;n.loaded=n.total=x,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const b=(a=this.callbacks)==null?void 0:a.onProgress;b&&b(n,e,y,t);const E={url:t.responseURL,data:y,code:c};(o=this.callbacks)==null||o.onSuccess(E,n,e,t);return}}const d=s.loadPolicy.errorRetry,g=n.retry,m={url:e.url,data:void 0,code:c};if(Ig(d,g,!1,m))this.retry(d);else{var u;Ct.error(`${c} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:c,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Ig(e,t,!0))this.retry(e);else{var n;Ct.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=O1(e,n.retry),n.retry++,Ct.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&dce.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const pce={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},gce=Rt(Rt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Z$,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Iae,bufferController:yle,capLevelController:G1,errorController:Pae,fpsController:vue,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:X3,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:pce},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},mce()),{},{subtitleStreamController:Lue,subtitleTrackController:Sue,timelineController:rce,audioStreamController:dle,audioTrackController:ple,emeController:fu,cmcdController:pue,contentSteeringController:mue,interstitialsController:Rue});function mce(){return{cueHandler:sce,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function yce(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=bT(r),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,u=e[o]===void 0,c=[];s.forEach(h=>{const d=`${a}Loading${h}`,g=e[d];if(g!==void 0&&u){c.push(d);const m=n[o].default;switch(e[o]={default:m},h){case"TimeOut":m.maxLoadTimeMs=g,m.maxTimeToFirstByteMs=g;break;case"MaxRetry":m.errorRetry.maxNumRetry=g,m.timeoutRetry.maxNumRetry=g;break;case"RetryDelay":m.errorRetry.retryDelayMs=g,m.timeoutRetry.retryDelayMs=g;break;case"MaxRetryTimeout":m.errorRetry.maxRetryDelayMs=g,m.timeoutRetry.maxRetryDelayMs=g;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${$t(e[o])}`)}),Rt(Rt({},n),e)}function bT(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(bT):Object.keys(r).reduce((e,t)=>(e[t]=bT(r[t]),e),{}):r}function vce(r,e){const t=r.loader;t!==RM&&t!==Z$?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):ace()&&(r.loader=RM,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Ip=2,bce=.1,xce=.05,Sce=100;class Ece extends K3{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(Sce),this.mediaSource=t.mediaSource;const n=this.media=t.media;pn(n,"playing",this.onMediaPlaying),pn(n,"waiting",this.onMediaWaiting),pn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(kn(n,"playing",this.onMediaPlaying),kn(n,"waiting",this.onMediaWaiting),kn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const s=(n=this.hls)==null?void 0:n.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:o}=a,u=this.seeking&&!o,c=!this.seeking&&o,h=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!h&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||u){u&&this.stallResolved(e);return}if(h){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!1}));return}if(!ft.getBuffered(a).length){this.nudgeRetry=0;return}const d=ft.bufferInfo(a,e,0),g=d.nextStart||0,m=this.fragmentTracker;if(o&&m&&this.hls){const R=LM(this.hls.inFlightFragments,e),_=d.len>Ip,C=!g||R||g-e>Ip&&!m.getPartialFragment(e);if(_||C)return;this.moved=!1}const y=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&m){if(!(d.len>0)&&!g)return;const _=Math.max(g,d.start||0)-e,k=!!(y!=null&&y.live)?y.targetduration*2:Ip,D=jd(e,m);if(_>0&&(_<=k||D)){a.paused||this._trySkipBufferHole(D);return}}const x=s.detectStallWithCurrentTimeMs,b=self.performance.now(),E=this.waiting;let S=this.stalled;if(S===null)if(E>0&&b-E<x)S=this.stalled=E;else{this.stalled=b;return}const T=b-S;if(!o&&(T>=x||E)&&this.hls){var I;if(((I=this.mediaSource)==null?void 0:I.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const w=ft.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(w,T,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(j.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const s=ft.bufferedInfo(ft.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&t>=s.start){const a=ft.timeRangesToArray(i),o=ft.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const u=ft.bufferedInfo(a,e,0).bufferedIndex,c=a[o].end,h=a[o+1].start;if((u===-1||u>o)&&h-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${h} buffered index: ${u}`);this.warn(d.message),this.media.currentTime+=1e-6;let g=jd(e,this.fragmentTracker);g&&"fragment"in g?g=g.fragment:g||(g=void 0);const m=ft.bufferInfo(this.media,e,0);this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:g,buffer:m.len,bufferInfo:m})}}}}}_tryFixBufferStall(e,t,n){var i,s;const{fragmentTracker:a,media:o}=this,u=(i=this.hls)==null?void 0:i.config;if(!o||!a||!u)return;const c=(s=this.hls)==null?void 0:s.latestLevelDetails,h=jd(n,a);if((h||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(h)||!this.media))return;const d=e.buffered,g=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-n<u.maxBufferHole||g))&&(t>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const s=n.getFragAtPos(t,Ze.MAIN),a=n.getFragAtPos(i,Ze.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:s}=this;if(!i&&s!==null&&n&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${$t(e)})`);this.warn(a.message),t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,s=(t=this.hls)==null?void 0:t.config;if(!i||!n||!s)return 0;const a=i.currentTime,o=ft.bufferInfo(i,a,0),u=a<o.start?o.start:o.nextStart;if(u&&this.hls){const h=o.len<=s.maxBufferHole,d=o.len>0&&o.len<1&&i.readyState<3,g=u-a;if(g>0&&(h||d)){if(g>s.maxBufferHole){let y=!1;if(a===0){const x=n.getAppendedFrag(0,Ze.MAIN);x&&u<x.end&&(y=!0)}if(!y&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||LM(this.hls.inFlightFragments,u))return 0;let b=!1,E=e.end;for(;E<u;){const S=jd(E,n);if(S)E+=S.duration;else{b=!0;break}}if(b)return 0}}const m=Math.max(u+xce,a+bce);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${m}`),this.moved=!0,i.currentTime=m,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${m}`),x={type:nt.MEDIA_ERROR,details:Te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?x.part=e:x.frag=e),this.hls.trigger(j.ERROR,x)}return m}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,s=t?.config;if(!n||!s)return 0;const a=n.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){const o=a+(i+1)*s.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(u.message),n.currentTime=o,t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function LM(r,e){const t=CM(r.main);if(t&&t.start<=e)return t;const n=CM(r.audio);return n&&n.start<=e?n:null}function CM(r){if(!r)return null;switch(r.state){case Ge.IDLE:case Ge.STOPPED:case Ge.ENDED:case Ge.ERROR:return null}return r.frag}function jd(r,e){return e.getAppendedFrag(r,Ze.MAIN)||e.getPartialFragment(r)}const Tce=.25;function xT(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Yb(r,e,t,n,i){let s=new r(e,t,"");try{s.value=n,i&&(s.type=i)}catch{s=new r(e,t,$t(i?Rt({type:i},n):n))}return s}const Fd=(()=>{const r=xT();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Ace{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(j.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&su(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return F$(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=xT();if(a)for(let o=0;o<s.length;o++){const u=s[o].type;if(u===Qn.emsg&&!n||!i)continue;const c=p$(s[o].data),h=s[o].pts;let d=h+s[o].duration;d>Fd&&(d=Fd),d-h<=0&&(d=h+Tce);for(let m=0;m<c.length;m++){const y=c[m];if(!g$(y)){this.updateId3CueEnds(h,u);const x=Yb(a,h,d,y,u);x&&this.id3Track.addCue(x)}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===t&&a.startTime<e&&a.endTime===Fd&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:u}}=a;if(s&&(o||u)){let c;i==="audio"?c=h=>h.type===Qn.audioId3&&u:i==="video"?c=h=>h.type===Qn.emsg&&o:c=h=>h.type===Qn.audioId3&&u||h.type===Qn.emsg&&o,yT(s,t,n,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:a}=this.hls.config;if(!s)return;const o=xT();if(n&&i&&!a){const{fragmentStart:x,fragmentEnd:b}=e;let E=this.assetCue;E?(E.startTime=x,E.endTime=b):o&&(E=this.assetCue=Yb(o,x,b,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),E&&(E.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(E),E.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:c}=e,h=Object.keys(c);let d=this.dateRangeCuesAppended;if(u&&t){var g;if((g=u.cues)!=null&&g.length){const x=Object.keys(d).filter(b=>!h.includes(b));for(let b=x.length;b--;){var m;const E=x[b],S=(m=d[E])==null?void 0:m.cues;delete d[E],S&&Object.keys(S).forEach(T=>{const I=S[T];if(I){I.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(I)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(h.length===0||!Ye(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let x=0;x<h.length;x++){const b=h[x],E=c[b],S=E.startTime,T=d[b],I=T?.cues||{};let w=T?.durationKnown||!1,R=Fd;const{duration:_,endDate:C}=E;if(C&&_!==null)R=S+_,w=!0;else if(E.endOnNext&&!w){const D=h.reduce((U,N)=>{if(N!==E.id){const q=c[N];if(q.class===E.class&&q.startDate>E.startDate&&(!U||E.startDate<U.startDate))return q}return U},null);D&&(R=D.startTime,w=!0)}const k=Object.keys(E.attr);for(let D=0;D<k.length;D++){const U=k[D];if(!Kae(U))continue;const N=I[U];if(N)w&&!(T!=null&&T.durationKnown)?N.endTime=R:Math.abs(N.startTime-S)>.01&&(N.startTime=S,N.endTime=R);else if(o){let q=E.attr[U];qae(U)&&(q=w3(q));const V=Yb(o,S,R,{key:U,data:q},Qn.dateRange);V&&(V.id=b,this.id3Track.addCue(V),I[U]=V,a&&(U==="X-ASSET-LIST"||U==="X-ASSET-URL")&&V.addEventListener("enter",this.onEventCueEnter))}}d[b]={cues:I,dateRange:E,durationKnown:w}}}}}class wce{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const u=i-o,c=Math.min(this.maxLatency,o+n.targetduration);if(u<c&&u>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),g=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,m=Math.min(d,Math.max(1,g));this.changeMediaPlaybackRate(t,m)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,u=this.hls.userConfig;let c=o&&n||t;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:a*i);const h=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,h)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,s=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===Te.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class _ce extends $1{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let o=!1,u=!1,c=!1;t.levels.forEach(h=>{const d=h.attrs;let{audioCodec:g,videoCodec:m}=h;g&&(h.audioCodec=g=Tg(g,n)||void 0),m&&(m=h.videoCodec=lae(m));const{width:y,height:x,unknownCodecs:b}=h,E=b?.length||0;if(o||(o=!!(y&&x)),u||(u=!!m),c||(c=!!g),E||g&&!this.isAudioSupported(g)||m&&!this.isVideoSupported(m)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:S,"FRAME-RATE":T,"HDCP-LEVEL":I,"PATHWAY-ID":w,RESOLUTION:R,"VIDEO-RANGE":_}=d,k=`${`${w||"."}-`}${h.bitrate}-${R}-${T}-${S}-${_}-${I}`;if(s[k])if(s[k].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const D=a[k]+=1;h.attrs["PATHWAY-ID"]=new Array(D+1).join(".");const U=this.createLevel(h);s[k]=U,i.push(U)}else s[k].addGroupId("audio",d.AUDIO),s[k].addGroupId("text",d.SUBTITLES);else{const D=this.createLevel(h);s[k]=D,a[k]=1,i.push(D)}}),this.filterAndSortMediaOptions(i,t,o,u,c)}createLevel(e){const t=new vf(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=B3(i,[])}return t}isAudioSupported(e){return mf(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return mf(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,s){var a;let o=[],u=[],c=e;const h=((a=t.stats)==null?void 0:a.parsing)||{};if((n||i)&&s&&(c=c.filter(({videoCodec:S,videoRange:T,width:I,height:w})=>(!!S||!!(I&&w))&&vae(T))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let S="no level with compatible codecs found in manifest",T=S;t.levels.length&&(T=`one or more CODECS in variant not supported: ${$t(t.levels.map(w=>w.attrs.CODECS).filter((w,R,_)=>_.indexOf(w)===R))}`,this.warn(T),S+=` (${T})`);const I=new Error(S);this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:I,reason:T})}}),h.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(S=>!S.audioCodec||this.isAudioSupported(S.audioCodec)),PM(o)),t.subtitles&&(u=t.subtitles,PM(u));const d=c.slice(0);c.sort((S,T)=>{if(S.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(S.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&S.height!==T.height)return S.height-T.height;if(S.frameRate!==T.frameRate)return S.frameRate-T.frameRate;if(S.videoRange!==T.videoRange)return Ag.indexOf(S.videoRange)-Ag.indexOf(T.videoRange);if(S.videoCodec!==T.videoCodec){const I=Tk(S.videoCodec),w=Tk(T.videoCodec);if(I!==w)return w-I}if(S.uri===T.uri&&S.codecSet!==T.codecSet){const I=Eg(S.codecSet),w=Eg(T.codecSet);if(I!==w)return w-I}return S.averageBitrate!==T.averageBitrate?S.averageBitrate-T.averageBitrate:0});let g=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length)){for(let S=0;S<d.length;S++)if(d[S].pathwayId===c[0].pathwayId){g=d[S];break}}this._levels=c;for(let S=0;S<c.length;S++)if(c[S]===g){var m;this._firstLevel=S;const T=g.bitrate,I=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${T}`),((m=this.hls.userConfig)==null?void 0:m.abrEwmaDefaultEstimate)===void 0){const w=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);w>I&&I===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=w)}break}const y=s&&!i,x=this.hls.config,b=!!(x.audioStreamController&&x.audioTrackController),E={levels:c,audioTracks:o,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:i,altAudio:b&&!y&&o.some(S=>!!S.url)};h.end=performance.now(),this.hls.trigger(j.MANIFEST_PARSED,E)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:h,reason:h.message}),d)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&i&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const u={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(j.LEVEL_SWITCHING,u);const c=a.details;if(!c||c.live){const h=this.switchParams(a.uri,i?.details,c);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===yt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Ze.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:s}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let u=a.details;u===t.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,t,u)}else(n=t.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a?.age;this.log(`Loading level index ${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(j.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));i$(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(j.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(j.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function PM(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function J$(){return self.SourceBuffer||self.WebKitSourceBuffer}function e4(){if(!ro())return!1;const e=J$();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Ice(){if(!e4())return!1;const r=ro();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(yf(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(yf(e,"audio"))))}function Oce(){var r;const e=J$();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const Rce=100;class Lce extends D1{constructor(e,t,n){super(e,t,n,"stream-controller",Ze.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,s=i?i.currentTime:null;if(s===null||!Ye(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(i,s,Ze.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Rce),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ge.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Ge.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ge.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e?.[t],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Ge.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Ge.IDLE;break}break}case Ge.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Ge.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(o,u)){const x={};this.altAudio===2&&(x.type="video"),this.hls.trigger(j.BUFFER_EOS,x),this.state=Ge.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===Ge.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=Ge.WAITING_LEVEL,this.startFragRequested=!1;return}const h=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(h>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:o.end;let m=this.getNextFragment(g,c);if(this.couldBacktrack&&!this.fragPrevious&&m&&fr(m)&&this.fragmentTracker.getState(m)!==wr.OK){var y;const b=((y=this.backtrackFragment)!=null?y:m).sn-c.startSN,E=c.fragments[b-1];E&&m.cc===E.cc&&(m=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,g)){if(!m.gap){const b=this.audioOnly&&!this.altAudio?jt.AUDIO:jt.VIDEO,E=(b===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,b,Ze.MAIN)}m=this.getNextFragmentLoopLoading(m,c,o,Ze.MAIN,d)}m&&(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,a,g))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===wr.NOT_LOADED||i===wr.PARTIAL?fr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Ze.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,u=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*c)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const u=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,h=Math.max(a.end,u+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ge.KEY_LOADING:case Ge.FRAG_LOADING:case Ge.FRAG_LOADING_WAITING_RETRY:case Ge.PARSING:case Ge.PARSED:this.state=Ge.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;pn(n,"playing",this.onMediaPlaying),pn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(kn(n,"playing",this.onMediaPlaying),kn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(j.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;for(let s=0;s<t.levels.length;s++){const a=t.levels[s].audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!Oce(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Ge.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Ge.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:s}=this,a=t.level,o=t.details,u=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${u}`);const c=t.levelInfo,h=this.fragCurrent;h&&(this.state===Ge.FRAG_LOADING||this.state===Ge.FRAG_LOADING_WAITING_RETRY)&&h.level!==t.level&&h.loader&&this.abortCurrentFrag();let d=0;if(o.live||(n=c.details)!=null&&n.live){var g;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details,(g=this.levelLastLoaded)==null?void 0:g.details)}if(c.details=o,this.levelLastLoaded=c,s||this.setStartPosition(o,d),this.hls.trigger(j.LEVEL_UPDATED,{details:o,level:a}),this.state===Ge.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Ge.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,u=s>=a-t.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!u)){const h=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!u&&n.readyState<4||s<o-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const d=ft.bufferInfo(n,i,0);if(!((c=d.buffered)!=null&&c.length)){n.currentTime=i;return}if(d.start<=s){n.currentTime=i;return}const{nextStart:m}=ft.bufferedInfo(d.buffered,s,0);m&&(n.currentTime=m)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const u=o.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,h=u.PTSKnown||!u.live,d=(t=n.initSegment)==null?void 0:t.data,g=this._getAudioCodec(o),m=this.transmuxer=this.transmuxer||new _$(this.hls,Ze.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=i?i.index:-1,x=y!==-1,b=new L1(n.level,n.sn,n.stats.chunkCount,s.byteLength,y,x),E=this.initPTS[n.cc];m.push(s,d,g,c,n,i,u.totalduration,h,b,E)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio!==0;if(wg(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(j.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(j.AUDIO_TRACK_SWITCHED,t)}),n.trigger(j.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(j.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=wg(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,s,a=!1;for(const o in n){const u=n[o];if(u.id==="main"){if(s=o,i=u,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,s=n.type===Ze.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Ge.PARSED&&(this.state=Ge.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),fr(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const a=this.media;a&&(!this._hasEnoughToStart&&ft.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case Te.FRAG_GAP:case Te.FRAG_PARSING_ERROR:case Te.FRAG_DECRYPT_ERROR:case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ze.MAIN,t);break;case Te.LEVEL_LOAD_ERROR:case Te.LEVEL_LOAD_TIMEOUT:case Te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===yt.LEVEL&&(this.state=Ge.IDLE);break;case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case Te.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Ge.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==jt.AUDIO||!this.altAudio){const n=(t===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,Ze.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const s=this.getLevelDetails(),a=ft.getBuffered(e),o=a.length?a.start(0):0,u=o-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<c||this.loadingParts&&u<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,s=n?.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=Ge.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(j.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:o,part:u,level:c}=a,{video:h,text:d,id3:g,initSegment:m}=i,{details:y}=c,x=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=Ge.PARSING,m){const b=m.tracks;if(b){const I=o.initSegment||o;if(this.unhandledEncryptionError(m,o))return;this._bufferInitSegment(c,b,I,s),n.trigger(j.FRAG_PARSING_INIT_SEGMENT,{frag:I,id:t,tracks:b})}const E=m.initPTS,S=m.timescale,T=this.initPTS[o.cc];if(Ye(E)&&(!T||T.baseTime!==E||T.timescale!==S)){const I=m.trackId;this.initPTS[o.cc]={baseTime:E,timescale:S,trackId:I},n.trigger(j.INIT_PTS_FOUND,{frag:o,id:t,initPTS:E,timescale:S,trackId:I})}}if(h&&y){x&&h.type==="audiovideo"&&this.logMuxedErr(o);const b=y.fragments[o.sn-1-y.startSN],E=o.sn===y.startSN,S=!b||o.cc>b.cc;if(i.independent!==!1){const{startPTS:T,endPTS:I,startDTS:w,endDTS:R}=h;if(u)u.elementaryStreams[h.type]={startPTS:T,endPTS:I,startDTS:w,endDTS:R};else if(h.firstKeyFrame&&h.independent&&s.id===1&&!S&&(this.couldBacktrack=!0),h.dropped&&h.independent){const _=this.getMainFwdBufferInfo(),C=(_?_.end:this.getLoadPosition())+this.config.maxBufferHole,k=h.firstKeyFramePTS?h.firstKeyFramePTS:T;if(!E&&C<k-this.config.maxBufferHole&&!S){this.backtrack(o);return}else S&&(o.gap=!0);o.setElementaryStreamInfo(h.type,o.start,I,o.start,R,!0)}else E&&T-(y.appliedTimelineOffset||0)>Ip&&(o.gap=!0);o.setElementaryStreamInfo(h.type,T,I,w,R),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(h,o,u,s,E||S)}else if(E||S)o.gap=!0;else{this.backtrack(o);return}}if(x){const{startPTS:b,endPTS:E,startDTS:S,endDTS:T}=x;u&&(u.elementaryStreams[jt.AUDIO]={startPTS:b,endPTS:E,startDTS:S,endDTS:T}),o.setElementaryStreamInfo(jt.AUDIO,b,E,S,T),this.bufferFragmentData(x,o,u,s)}if(y&&g!=null&&g.samples.length){const b={id:t,frag:o,details:y,samples:g.samples};n.trigger(j.FRAG_PARSING_METADATA,b)}if(y&&d){const b={id:t,frag:o,details:y,samples:d.samples};n.trigger(j.FRAG_PARSING_USERDATA,b)}}logMuxedErr(e){this.warn(`${fr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:s,video:a,audiovideo:o}=t;if(s){const c=e.audioCodec;let h=xp(s.codec,c);h==="mp4a"&&(h="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5");const g=s.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(h="mp4a.40.5")}h&&h.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),c&&c!==h&&this.log(`Swapping manifest audio codec "${c}" for "${h}"`),s.levelCodec=h,s.id=Ze.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${h||""}/${c||""}/${s.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=Ze.MAIN;const c=a.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const u=Object.keys(t);if(u.length){if(this.hls.trigger(j.BUFFER_CODECS,t),!this.hls)return;u.forEach(c=>{const d=t[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(j.BUFFER_APPENDING,{type:c,data:d,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Ze.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ge.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(ft.isBuffered(e,n)?t=this.getAppendedFrag(n):ft.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,s=t.level;(!i||t.sn!==i.sn||i.level!==s)&&(this.fragPlaying=t,this.hls.trigger(j.FRAG_CHANGED,{frag:t}),(!i||i.level!==s)&&this.hls.trigger(j.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Ye(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Ye(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?Jo(null,n.fragments,t):null);if(i){const s=i.programDateTime;if(s!==null){const a=s+(t-i.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Cce extends wi{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=Te.KEY_LOAD_ERROR,n,i,s){return new Ns({type:nt.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,s=t.length;i<s;i++){const a=t[i];if(e.cc<=a.cc&&(!fr(e)||!fr(a)||e.sn<a.sn)||!n&&i==s-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const u=Ep(o);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const i=zc(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,c))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=Xb(s);let u=this.keyIdToKeyInfo[o];if((n=u)!=null&&n.decryptdata.key)return s.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(this.emeController&&(i=u)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(u.decryptdata)){case"usable":case"usable-in-future":return u.keyLoadPromise.then(h=>{const{keyInfo:d}=h;return s.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${s.keyId?" keyId: "+Vr(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const a=Xse(t.initSegment.data);if(a.length){let o=a[0];o.some(u=>u!==0)?(this.log(`Using keyId found in init segment ${Vr(o)}`),Za.setKeyIdForUri(e.decryptdata.uri,o)):(o=Za.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${Vr(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!fr(t))return Promise.resolve(n);const s=this.emeController.loadKey(n);return(e.keyLoadPromise=s.then(a=>(e.mediaKeySessionContext=a,n))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=t),a})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,s=new i(n);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,x)=>{const{frag:b,keyInfo:E}=y,S=Xb(E.decryptdata);if(!b.decryptdata||E!==this.keyIdToKeyInfo[S])return o(this.createKeyLoadError(b,Te.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),x));E.decryptdata.key=b.decryptdata.key=new Uint8Array(g.data),b.keyLoader=null,E.loader=null,a({frag:b,keyInfo:E})},onError:(g,m,y,x)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),y,Rt({url:u.url,data:void 0},g)))},onTimeout:(g,m,y)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(g,m,y)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};s.load(u,h,d)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,s=n.loader;t.keyLoader===s&&(t.keyLoader=null,n.loader=null);const a=Xb(n.decryptdata)||i;delete this.keyIdToKeyInfo[a],s&&s.destroy()}}function Xb(r){if(r.keyFormat!==Wr.FAIRPLAY){const e=r.keyId;if(e)return Vr(e)}return r.uri}function DM(r){const{type:e}=r;switch(e){case yt.AUDIO_TRACK:return Ze.AUDIO;case yt.SUBTITLE_TRACK:return Ze.SUBTITLE;default:return Ze.MAIN}}function Qb(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Pce{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(j.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(j.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,s=n||i,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:yt.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:u}=t;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:yt.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:u})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:yt.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:yt.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const n=this.loaders[yt.LEVEL];if(n){const i=n.context;i&&!t.levels.some(s=>s===i.levelOrTrack)&&(n.abort(),delete this.loaders[yt.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=this.hls.logger,h=i.context;if(h&&h.levelOrTrack===e.levelOrTrack&&(h.url===e.url||h.deliveryDirectives&&!e.deliveryDirectives)){h.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${h.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===yt.MANIFEST?s=n.manifestLoadPolicy.default:s=Mt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Ye((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===yt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===yt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===yt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const h=c.partTarget,d=c.targetduration;if(h&&d){const g=Math.max(h*3,d*.8)*1e3;s=Mt({},s,{maxTimeToFirstByteMs:Math.min(g,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,h,d,g)=>{const m=this.getInternalLoader(d);this.resetInternalLoader(d.type);const y=c.data;h.parsing.start=performance.now(),es.isMediaPlaylist(y)||d.type!==yt.MANIFEST?this.handleTrackOrLevelPlaylist(c,h,d,g||null,m):this.handleMasterPlaylist(c,h,d,g)},onError:(c,h,d,g)=>{this.handleNetworkError(h,d,!1,c,g)},onTimeout:(c,h,d)=>{this.handleNetworkError(h,d,!0,void 0,c)}};i.load(e,o,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const s=this.hls,a=e.data,o=Qb(e,n),u=es.parseMasterPlaylist(a,o);if(u.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:c,levels:h,sessionData:d,sessionKeys:g,startTimeOffset:m,variableList:y}=u;this.variableList=y,h.forEach(S=>{const{unknownCodecs:T}=S;if(T){const{preferManagedMediaSource:I}=this.hls.config;let{audioCodec:w,videoCodec:R}=S;for(let _=T.length;_--;){const C=T[_];mf(C,"audio",I)?(S.audioCodec=w=w?`${w},${C}`:C,Su.audio[w.substring(0,4)]=2,T.splice(_,1)):mf(C,"video",I)&&(S.videoCodec=R=R?`${R},${C}`:C,Su.video[R.substring(0,4)]=2,T.splice(_,1))}}});const{AUDIO:x=[],SUBTITLES:b,"CLOSED-CAPTIONS":E}=es.parseMasterPlaylistMedia(a,o,u);x.length&&!x.some(T=>!T.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),x.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new er({}),bitrate:0,url:""})),s.trigger(j.MANIFEST_LOADED,{levels:h,audioTracks:x,subtitles:b,captions:E,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:d,sessionKeys:g,startTimeOffset:m,variableList:y})}handleTrackOrLevelPlaylist(e,t,n,i,s){const a=this.hls,{id:o,level:u,type:c}=n,h=Qb(e,n),d=Ye(u)?u:Ye(o)?o:0,g=DM(n),m=es.parseLevelPlaylist(e.data,h,d,g,0,this.variableList);if(c===yt.MANIFEST){const y={attrs:new er({}),bitrate:0,details:m,name:"",url:h};m.requestScheduled=t.loading.start+t$(m,0),a.trigger(j.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=m,this.handlePlaylistLoaded(m,e,t,n,i,s)}handleManifestParsingError(e,t,n,i,s){this.hls.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.MANIFEST_PARSING_ERROR,fatal:t.type===yt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:s})}handleNetworkError(e,t,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===yt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===yt.AUDIO_TRACK||e.type===yt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let u=Te.UNKNOWN,c=!1;const h=this.getInternalLoader(e);switch(e.type){case yt.MANIFEST:u=n?Te.MANIFEST_LOAD_TIMEOUT:Te.MANIFEST_LOAD_ERROR,c=!0;break;case yt.LEVEL:u=n?Te.LEVEL_LOAD_TIMEOUT:Te.LEVEL_LOAD_ERROR,c=!1;break;case yt.AUDIO_TRACK:u=n?Te.AUDIO_TRACK_LOAD_TIMEOUT:Te.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case yt.SUBTITLE_TRACK:u=n?Te.SUBTITLE_TRACK_LOAD_TIMEOUT:Te.SUBTITLE_LOAD_ERROR,c=!1;break}h&&this.resetInternalLoader(e.type);const d={type:nt.NETWORK_ERROR,details:u,fatal:c,url:e.url,loader:h,context:e,error:o,networkDetails:t,stats:s};if(i){const g=t?.url||e.url;d.response=Rt({url:g,data:void 0},i)}this.hls.trigger(j.ERROR,d)}handlePlaylistLoaded(e,t,n,i,s,a){const o=this.hls,{type:u,level:c,levelOrTrack:h,id:d,groupId:g,deliveryDirectives:m}=i,y=Qb(t,i),x=DM(i);let b=typeof i.level=="number"&&x===Ze.MAIN?c:void 0;const E=e.playlistParsingError;if(E){if(this.hls.logger.warn(`${E} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:E,reason:E.message,response:t,context:i,level:b,parent:x,networkDetails:s,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const S=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:S,reason:S.message,response:t,context:i,level:b,parent:x,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case yt.MANIFEST:case yt.LEVEL:if(b){if(!h)b=0;else if(h!==o.levels[b]){const S=o.levels.indexOf(h);S>-1&&(b=S)}}o.trigger(j.LEVEL_LOADED,{details:e,levelInfo:h||o.levels[0],level:b||0,id:d||0,stats:n,networkDetails:s,deliveryDirectives:m,withoutMultiVariant:u===yt.MANIFEST});break;case yt.AUDIO_TRACK:o.trigger(j.AUDIO_TRACK_LOADED,{details:e,track:h,id:d||0,groupId:g||"",stats:n,networkDetails:s,deliveryDirectives:m});break;case yt.SUBTITLE_TRACK:o.trigger(j.SUBTITLE_TRACK_LOADED,{details:e,track:h,id:d||0,groupId:g||"",stats:n,networkDetails:s,deliveryDirectives:m});break}}}class Zn{static get version(){return bf}static isMSESupported(){return e4()}static isSupported(){return Ice()}static getMediaSource(){return ro()}static get Events(){return j}static get MetadataSchema(){return Qn}static get ErrorTypes(){return nt}static get ErrorDetails(){return Te}static get DefaultConfig(){return Zn.defaultConfig?Zn.defaultConfig:gce}static set DefaultConfig(e){Zn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new k1,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Use(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=yce(Zn.DefaultConfig,e,t);this.userConfig=e,n.progressive&&vce(n,t);const{abrController:i,bufferController:s,capLevelController:a,errorController:o,fpsController:u}=n,c=new o(this),h=this.abrController=new i(this),d=new Dae(this),g=n.interstitialsController,m=g?this.interstitialsController=new g(this,Zn):null,y=this.bufferController=new s(this,d),x=this.capLevelController=new a(this),b=new u(this),E=new Pce(this),S=n.contentSteeringController,T=S?new S(this):null,I=this.levelController=new _ce(this,T),w=new Ace(this),R=new Cce(this.config,this.logger),_=this.streamController=new Lce(this,d,R),C=this.gapController=new Ece(this,d);x.setStreamController(_),b.setStreamController(_);const k=[E,I,_];m&&k.splice(1,0,m),T&&k.splice(1,0,T),this.networkControllers=k;const D=[h,y,C,x,b,w,d];this.audioTrackController=this.createController(n.audioTrackController,k);const U=n.audioStreamController;U&&k.push(this.audioStreamController=new U(this,d,R)),this.subtitleTrackController=this.createController(n.subtitleTrackController,k);const N=n.subtitleStreamController;N&&k.push(this.subtititleStreamController=new N(this,d,R)),this.createController(n.timelineController,D),R.emeController=this.emeController=this.createController(n.emeController,D),this.cmcdController=this.createController(n.cmcdController,D),this.latencyController=this.createController(wce,D),this.coreComponents=D,k.push(c);const q=c.onErrorOut;typeof q=="function"&&this.on(j.ERROR,q,c),this.on(j.MANIFEST_LOADED,E.onManifestLoaded,E)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===j.ERROR;this.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(j.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger(j.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(j.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(j.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=T1.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(j.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Ze.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Ze.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Ze.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Eue()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){yae(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=F3(t);return U3(e,n,navigator.mediaCapabilities)}}Zn.defaultConfig=void 0;function Xa({cameraId:r,title:e}){const t=P.useRef(null),n=P.useRef(null),[i,s]=P.useState(null),[a,o]=P.useState(!0),c={1:"https://www.tansaeng.com/live/tapo1.m3u8",2:"https://www.tansaeng.com/live/tapo2.m3u8",3:"https://www.tansaeng.com/live/tapo3.m3u8",4:"https://www.tansaeng.com/live/tapo4.m3u8"}[r];return P.useEffect(()=>{const h=t.current;if(!h||!c){s(" URL  ."),o(!1);return}if(s(null),o(!0),Zn.isSupported()){const d=new Zn({liveBackBufferLength:0,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,enableWorker:!0,lowLatencyMode:!0});return n.current=d,d.loadSource(c),d.attachMedia(h),d.on(Zn.Events.MANIFEST_PARSED,()=>{o(!1),h.play().catch(g=>{console.warn("Auto-play failed:",g),s("  ")})}),d.on(Zn.Events.ERROR,(g,m)=>{if(console.error("HLS error:",m),m.fatal)switch(m.type){case Zn.ErrorTypes.NETWORK_ERROR:s(" :    "),setTimeout(()=>{d.startLoad()},3e3);break;case Zn.ErrorTypes.MEDIA_ERROR:s(" :     "),d.recoverMediaError();break;default:s(" :    "),d.destroy();break}}),()=>{d.destroy(),n.current=null}}else{if(h.canPlayType("application/vnd.apple.mpegurl"))return h.src=c,h.addEventListener("loadedmetadata",()=>{o(!1),h.play().catch(d=>{console.warn("Auto-play failed:",d),s("  ")})}),h.addEventListener("error",()=>{s("  ")}),()=>{h.src=""};s("  HLS   "),o(!1)}},[c]),G.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden",children:[e&&G.jsx("div",{className:"bg-farm-500 px-4 py-2",children:G.jsx("h3",{className:"text-base font-semibold text-gray-900 m-0",children:e})}),G.jsxs("div",{className:"relative bg-black aspect-video",children:[G.jsx("video",{ref:t,className:"w-full h-full",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),a&&G.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:G.jsxs("div",{className:"text-white text-center",children:[G.jsx("div",{className:"text-2xl mb-2",children:""}),G.jsx("div",{className:"text-sm",children:"  ..."})]})}),i&&G.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70",children:G.jsxs("div",{className:"text-white text-center p-4",children:[G.jsx("div",{className:"text-3xl mb-2",children:""}),G.jsx("div",{className:"text-sm",children:i})]})})]}),G.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:G.jsxs("div",{className:"text-xs text-gray-500 truncate",title:c,children:[" ",c]})})]})}const $d="tansaeng_rpi_ip";function Dce(){const[r,e]=P.useState(""),[t,n]=P.useState(null),[i,s]=P.useState("");P.useEffect(()=>{const h=localStorage.getItem($d);h&&n(h)},[]);const a=h=>/^(\d{1,3}\.){3}\d{1,3}$/.test(h)?h.split(".").every(m=>{const y=parseInt(m,10);return y>=0&&y<=255}):!1,o=()=>{const h=r.trim();if(console.log("[RpiIpSettings]   , :",h),!h){console.log("[RpiIpSettings]  "),s(" IP  ");return}if(!a(h)){console.log("[RpiIpSettings] IP  :",h),s("  IP    (: 192.168.1.100)");return}localStorage.setItem($d,h),console.log("[RpiIpSettings] localStorage  :",h),console.log("[RpiIpSettings]  :",localStorage.getItem($d)),n(h),e(""),s("  IP "),setTimeout(()=>s(""),3e3)},u=()=>{t&&window.confirm("  IP ?")&&(localStorage.removeItem($d),n(null),s("  IP "),setTimeout(()=>s(""),3e3))},c=h=>{h.key==="Enter"&&o()};return G.jsxs("div",{className:"mb-6 rounded-lg border border-slate-600 bg-slate-800 p-4",children:[G.jsx("h2",{className:"mb-3 text-lg font-semibold text-slate-100",children:"  IP "}),G.jsxs("div",{className:"mb-3 flex gap-2",children:[G.jsx("input",{type:"text",value:r,onChange:h=>e(h.target.value),onKeyPress:c,placeholder:": 192.168.219.170",className:"flex-1 rounded border border-slate-600 bg-slate-700 px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-blue-500 focus:outline-none"}),G.jsx("button",{onClick:o,className:"rounded bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:""})]}),i&&G.jsx("div",{className:`mb-3 rounded p-2 text-sm ${i.includes("")?"bg-red-900/30 text-red-300":i.includes("")?"bg-yellow-900/30 text-yellow-300":"bg-green-900/30 text-green-300"}`,children:i}),t&&G.jsxs("div",{className:"rounded border border-slate-600 bg-slate-700 p-3",children:[G.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[G.jsx("span",{className:"text-sm text-slate-400",children:"  IP:"}),G.jsx("button",{onClick:u,className:"rounded bg-red-600 px-3 py-1 text-sm font-medium text-white transition hover:bg-red-700",children:""})]}),G.jsx("div",{className:"rounded bg-slate-800 p-2 font-mono text-green-400",children:t}),G.jsx("div",{className:"mt-2 text-xs text-slate-400",children:"  IP HLS   "})]}),!t&&G.jsx("div",{className:"rounded border border-yellow-600/30 bg-yellow-900/20 p-3 text-sm text-yellow-300",children:"  IP  .    IP ."})]})}function kce(r){return G.jsxs("div",{className:"p-4",children:[G.jsx("h1",{className:"mb-4 text-2xl font-bold text-slate-100",children:"   "}),G.jsx(Dce,{}),G.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[G.jsx(Xa,{cameraId:1,title:"  1"}),G.jsx(Xa,{cameraId:2,title:"  2"}),G.jsx(Xa,{cameraId:3,title:"  3"}),G.jsx(Xa,{cameraId:4,title:" "})]})]})}function Mce({farmSettings:r,setFarmSettings:e}){const t="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",n="8884",i="esp32-client-01",s=a=>a==="fan"?{bg:"#dbeafe",text:"#1e40af"}:a==="vent"?{bg:"#d1fae5",text:"#065f46"}:a==="pump"?{bg:"#f3e8ff",text:"#6b21a8"}:a==="camera"?{bg:"#fed7aa",text:"#c2410c"}:{bg:"#f3f4f6",text:"#4b5563"};return G.jsx("div",{className:"bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[G.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[G.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" "}),G.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:"MQTT ,  ,    "})]}),G.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[G.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"MQTT   ( )"}),G.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"HiveMQ Cloud Host"}),G.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:t})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"WebSocket Port"}),G.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:n})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Username"}),G.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:i})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Password"}),G.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:""})]})]}),G.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:"MQTT   .env  ."})]}),G.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[G.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),G.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[" ",tx.length,"   ."]}),G.jsx("div",{className:"overflow-x-auto",children:G.jsxs("table",{className:"w-full text-sm border-collapse",children:[G.jsx("thead",{className:"bg-gray-50",children:G.jsxs("tr",{children:[G.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ID"}),G.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),G.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),G.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ESP32 "}),G.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"Command Topic"})]})}),G.jsx("tbody",{children:tx.map((a,o)=>{const u=s(a.type);return G.jsxs("tr",{className:o%2===0?"bg-white":"bg-gray-50",children:[G.jsx("td",{className:"px-4 py-2 text-gray-700",children:a.id}),G.jsx("td",{className:"px-4 py-2 text-gray-700",children:a.name}),G.jsx("td",{className:"px-4 py-2",children:G.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{background:u.bg,color:u.text},children:a.type})}),G.jsx("td",{className:"px-4 py-2 text-gray-600 text-xs",children:a.esp32Id}),G.jsx("td",{className:"px-4 py-2 text-gray-500 text-xs font-mono",children:a.commandTopic})]},a.id)})})]})}),G.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:" / src/config/devices.ts  ."})]}),G.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[G.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),G.jsxs("div",{children:[G.jsxs("div",{className:"mb-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),G.jsx("input",{type:"text",value:r.farmName,onChange:a=>e({...r,farmName:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),G.jsxs("div",{className:"mb-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),G.jsx("input",{type:"text",value:r.adminName,onChange:a=>e({...r,adminName:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),G.jsxs("div",{className:"mb-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),G.jsx("textarea",{value:r.notes,onChange:a=>e({...r,notes:a.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base resize-vertical"})]}),G.jsx("button",{className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-2 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:""})]})]})]})})}const kM="tansaeng-smartfarm-device-state-v1",MM="tansaeng-smartfarm-mist-zones-v1",NM="tansaeng-smartfarm-cameras-v1",BM="tansaeng-smartfarm-farm-settings-v1";function Nce(){const[r,e]=P.useState({});return P.useEffect(()=>{const t=localStorage.getItem(kM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse device state from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(kM,JSON.stringify(r))},[r]),[r,e]}const Bce=[{id:"zone_a",name:"Zone A ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_b",name:"Zone B ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_c",name:"Zone C ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1}];function Uce(){const[r,e]=P.useState(Bce);return P.useEffect(()=>{const t=localStorage.getItem(MM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse mist zones from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(MM,JSON.stringify(r))},[r]),[r,e]}function jce(){const[r,e]=P.useState([]);return P.useEffect(()=>{const t=localStorage.getItem(NM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse cameras from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(NM,JSON.stringify(r))},[r]),[r,e]}const Fce={farmName:"",adminName:"",notes:""};function $ce(){const[r,e]=P.useState(Fce);return P.useEffect(()=>{const t=localStorage.getItem(BM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse farm settings from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(BM,JSON.stringify(r))},[r]),[r,e]}function Gce(){const[r,e]=P.useState("devices"),[t,n]=P.useState("connecting"),[i,s]=Nce(),[a,o]=Uce(),[u,c]=jce(),[h,d]=$ce();return P.useEffect(()=>{const g=Zc();return g.on("connect",()=>{n("connected")}),g.on("error",()=>{n("error")}),g.on("reconnect",()=>{n("connecting")}),g.on("offline",()=>{n("disconnected")}),()=>{}},[]),G.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[G.jsx(q5,{connectionState:t}),G.jsx(W5,{activeTab:r,onTabChange:e}),G.jsxs("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pb-5 min-h-0",children:[r==="devices"&&G.jsx(lH,{deviceState:i,setDeviceState:s}),r==="mist"&&G.jsx(uH,{zones:a,setZones:o}),r==="environment"&&G.jsx(Rse,{}),r==="cameras"&&G.jsx(kce,{cameras:u,setCameras:c}),r==="settings"&&G.jsx(Mce,{farmSettings:h,setFarmSettings:d})]}),G.jsx("footer",{className:"bg-white border-t border-gray-200 px-4 py-3 flex-shrink-0",children:G.jsxs("div",{className:"max-w-screen-2xl mx-auto text-center text-xs text-gray-500",children:[G.jsx("p",{className:"mb-1",children:"    v2.5"}),G.jsx("p",{className:"text-2xs text-gray-400",children:"Powered by React + TypeScript + HiveMQ Cloud"})]})})]})}const zce=()=>G.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:G.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4",children:[G.jsxs("header",{className:"bg-farm-500 rounded-lg px-6 py-4 mb-6 shadow-md",children:[G.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" Tapo  "}),G.jsx("p",{className:"text-gray-800 text-sm mt-1 m-0",children:"TP-Link Tapo  4  HLS "})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G.jsx(Xa,{cameraId:1,title:"  1"}),G.jsx(Xa,{cameraId:2,title:"  2"}),G.jsx(Xa,{cameraId:3,title:"  3"}),G.jsx(Xa,{cameraId:4,title:" "})]}),G.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4",children:[G.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),G.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[G.jsx("li",{children:"    HLS  "}),G.jsx("li",{children:"       "}),G.jsx("li",{children:"      "}),G.jsx("li",{children:"  URL .env  VITE_TAPO_CAM*_HLS_URL  "})]})]})]})});S6.createRoot(document.getElementById("root")).render(G.jsx(P.StrictMode,{children:G.jsx(N5,{basename:"/smartfarm-ui",children:G.jsxs(d5,{children:[G.jsx(Jb,{path:"/",element:G.jsx(Gce,{})}),G.jsx(Jb,{path:"/camera",element:G.jsx(zce,{})})]})})}));
