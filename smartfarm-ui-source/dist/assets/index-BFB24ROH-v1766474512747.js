function vK(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function za(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qb={exports:{}},Gf={};var xR;function bK(){if(xR)return Gf;xR=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return Gf.Fragment=e,Gf.jsx=t,Gf.jsxs=t,Gf}var SR;function xK(){return SR||(SR=1,Qb.exports=bK()),Qb.exports}var L=xK(),Xb={exports:{}},gt={};var ER;function SK(){if(ER)return gt;ER=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=p&&j[p]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function E(j,F,Z){this.props=j,this.context=F,this.refs=v,this.updater=Z||y}E.prototype.isReactComponent={},E.prototype.setState=function(j,F){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,F,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function S(){}S.prototype=E.prototype;function w(j,F,Z){this.props=j,this.context=F,this.refs=v,this.updater=Z||y}var A=w.prototype=new S;A.constructor=w,b(A,E.prototype),A.isPureReactComponent=!0;var _=Array.isArray;function I(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function k(j,F,Z){var ae=Z.ref;return{$$typeof:r,type:j,key:F,ref:ae!==void 0?ae:null,props:Z}}function M(j,F){return k(j.type,F,j.props)}function H(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function N(j){var F={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return F[Z]})}var Q=/\/+/g;function z(j,F){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):F.toString(36)}function V(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(I,I):(j.status="pending",j.then(function(F){j.status==="pending"&&(j.status="fulfilled",j.value=F)},function(F){j.status==="pending"&&(j.status="rejected",j.reason=F)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function K(j,F,Z,ae,ee){var ve=typeof j;(ve==="undefined"||ve==="boolean")&&(j=null);var le=!1;if(j===null)le=!0;else switch(ve){case"bigint":case"string":case"number":le=!0;break;case"object":switch(j.$$typeof){case r:case e:le=!0;break;case f:return le=j._init,K(le(j._payload),F,Z,ae,ee)}}if(le)return ee=ee(j),le=ae===""?"."+z(j,0):ae,_(ee)?(Z="",le!=null&&(Z=le.replace(Q,"$&/")+"/"),K(ee,F,Z,"",function(ue){return ue})):ee!=null&&(H(ee)&&(ee=M(ee,Z+(ee.key==null||j&&j.key===ee.key?"":(""+ee.key).replace(Q,"$&/")+"/")+le)),F.push(ee)),1;le=0;var ne=ae===""?".":ae+":";if(_(j))for(var re=0;re<j.length;re++)ae=j[re],ve=ne+z(ae,re),le+=K(ae,F,Z,ve,ee);else if(re=g(j),typeof re=="function")for(j=re.call(j),re=0;!(ae=j.next()).done;)ae=ae.value,ve=ne+z(ae,re++),le+=K(ae,F,Z,ve,ee);else if(ve==="object"){if(typeof j.then=="function")return K(V(j),F,Z,ae,ee);throw F=String(j),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return le}function Y(j,F,Z){if(j==null)return j;var ae=[],ee=0;return K(j,ae,"","",function(ve){return F.call(Z,ve,ee++)}),ae}function W(j){if(j._status===-1){var F=j._result;F=F(),F.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=F)}if(j._status===1)return j._result.default;throw j._result}var J=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},G={map:Y,forEach:function(j,F,Z){Y(j,function(){F.apply(this,arguments)},Z)},count:function(j){var F=0;return Y(j,function(){F++}),F},toArray:function(j){return Y(j,function(F){return F})||[]},only:function(j){if(!H(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return gt.Activity=h,gt.Children=G,gt.Component=E,gt.Fragment=t,gt.Profiler=i,gt.PureComponent=w,gt.StrictMode=n,gt.Suspense=l,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,gt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},gt.cache=function(j){return function(){return j.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(j,F,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ae=b({},j.props),ee=j.key;if(F!=null)for(ve in F.key!==void 0&&(ee=""+F.key),F)!P.call(F,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&F.ref===void 0||(ae[ve]=F[ve]);var ve=arguments.length-2;if(ve===1)ae.children=Z;else if(1<ve){for(var le=Array(ve),ne=0;ne<ve;ne++)le[ne]=arguments[ne+2];ae.children=le}return k(j.type,ee,ae)},gt.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},gt.createElement=function(j,F,Z){var ae,ee={},ve=null;if(F!=null)for(ae in F.key!==void 0&&(ve=""+F.key),F)P.call(F,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ee[ae]=F[ae]);var le=arguments.length-2;if(le===1)ee.children=Z;else if(1<le){for(var ne=Array(le),re=0;re<le;re++)ne[re]=arguments[re+2];ee.children=ne}if(j&&j.defaultProps)for(ae in le=j.defaultProps,le)ee[ae]===void 0&&(ee[ae]=le[ae]);return k(j,ve,ee)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(j){return{$$typeof:o,render:j}},gt.isValidElement=H,gt.lazy=function(j){return{$$typeof:f,_payload:{_status:-1,_result:j},_init:W}},gt.memo=function(j,F){return{$$typeof:c,type:j,compare:F===void 0?null:F}},gt.startTransition=function(j){var F=D.T,Z={};D.T=Z;try{var ae=j(),ee=D.S;ee!==null&&ee(Z,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(I,J)}catch(ve){J(ve)}finally{F!==null&&Z.types!==null&&(F.types=Z.types),D.T=F}},gt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},gt.use=function(j){return D.H.use(j)},gt.useActionState=function(j,F,Z){return D.H.useActionState(j,F,Z)},gt.useCallback=function(j,F){return D.H.useCallback(j,F)},gt.useContext=function(j){return D.H.useContext(j)},gt.useDebugValue=function(){},gt.useDeferredValue=function(j,F){return D.H.useDeferredValue(j,F)},gt.useEffect=function(j,F){return D.H.useEffect(j,F)},gt.useEffectEvent=function(j){return D.H.useEffectEvent(j)},gt.useId=function(){return D.H.useId()},gt.useImperativeHandle=function(j,F,Z){return D.H.useImperativeHandle(j,F,Z)},gt.useInsertionEffect=function(j,F){return D.H.useInsertionEffect(j,F)},gt.useLayoutEffect=function(j,F){return D.H.useLayoutEffect(j,F)},gt.useMemo=function(j,F){return D.H.useMemo(j,F)},gt.useOptimistic=function(j,F){return D.H.useOptimistic(j,F)},gt.useReducer=function(j,F,Z){return D.H.useReducer(j,F,Z)},gt.useRef=function(j){return D.H.useRef(j)},gt.useState=function(j){return D.H.useState(j)},gt.useSyncExternalStore=function(j,F,Z){return D.H.useSyncExternalStore(j,F,Z)},gt.useTransition=function(){return D.H.useTransition()},gt.version="19.2.0",gt}var wR;function Fc(){return wR||(wR=1,Xb.exports=SK()),Xb.exports}var R=Fc();const Ue=za(R),YT=vK({__proto__:null,default:Ue},[R]);var Zb={exports:{}},Kf={},Jb={exports:{}},ex={};var _R;function EK(){return _R||(_R=1,(function(r){function e(K,Y){var W=K.length;K.push(Y);e:for(;0<W;){var J=W-1>>>1,G=K[J];if(0<i(G,Y))K[J]=Y,K[W]=G,W=J;else break e}}function t(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Y=K[0],W=K.pop();if(W!==Y){K[0]=W;e:for(var J=0,G=K.length,j=G>>>1;J<j;){var F=2*(J+1)-1,Z=K[F],ae=F+1,ee=K[ae];if(0>i(Z,W))ae<G&&0>i(ee,Z)?(K[J]=ee,K[ae]=W,J=ae):(K[J]=Z,K[F]=W,J=F);else if(ae<G&&0>i(ee,W))K[J]=ee,K[ae]=W,J=ae;else break e}}return Y}function i(K,Y){var W=K.sortIndex-Y.sortIndex;return W!==0?W:K.id-Y.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var l=[],c=[],f=1,h=null,p=3,g=!1,y=!1,b=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A(K){for(var Y=t(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=K)n(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function _(K){if(b=!1,A(K),!y)if(t(l)!==null)y=!0,I||(I=!0,N());else{var Y=t(c);Y!==null&&V(_,Y.startTime-K)}}var I=!1,D=-1,P=5,k=-1;function M(){return v?!0:!(r.unstable_now()-k<P)}function H(){if(v=!1,I){var K=r.unstable_now();k=K;var Y=!0;try{e:{y=!1,b&&(b=!1,S(D),D=-1),g=!0;var W=p;try{t:{for(A(K),h=t(l);h!==null&&!(h.expirationTime>K&&M());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var G=J(h.expirationTime<=K);if(K=r.unstable_now(),typeof G=="function"){h.callback=G,A(K),Y=!0;break t}h===t(l)&&n(l),A(K)}else n(l);h=t(l)}if(h!==null)Y=!0;else{var j=t(c);j!==null&&V(_,j.startTime-K),Y=!1}}break e}finally{h=null,p=W,g=!1}Y=void 0}}finally{Y?N():I=!1}}}var N;if(typeof w=="function")N=function(){w(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,z=Q.port2;Q.port1.onmessage=H,N=function(){z.postMessage(null)}}else N=function(){E(H,0)};function V(K,Y){D=E(function(){K(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_next=function(K){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var W=p;p=Y;try{return K()}finally{p=W}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var W=p;p=K;try{return Y()}finally{p=W}},r.unstable_scheduleCallback=function(K,Y,W){var J=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=W+G,K={id:f++,callback:Y,priorityLevel:K,startTime:W,expirationTime:G,sortIndex:-1},W>J?(K.sortIndex=W,e(c,K),t(l)===null&&K===t(c)&&(b?(S(D),D=-1):b=!0,V(_,W-J))):(K.sortIndex=G,e(l,K),y||g||(y=!0,I||(I=!0,N()))),K},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(K){var Y=p;return function(){var W=p;p=Y;try{return K.apply(this,arguments)}finally{p=W}}}})(ex)),ex}var TR;function wK(){return TR||(TR=1,Jb.exports=EK()),Jb.exports}var tx={exports:{}},pn={};var AR;function _K(){if(AR)return pn;AR=1;var r=Fc();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:f}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,pn.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,f)},pn.flushSync=function(l){var c=s.T,f=n.p;try{if(s.T=null,n.p=2,l)return l()}finally{s.T=c,n.p=f,n.d.f()}},pn.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},pn.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},pn.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&n.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},pn.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},pn.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin);n.d.L(l,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},pn.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},pn.requestFormReset=function(l){n.d.r(l)},pn.unstable_batchedUpdates=function(l,c){return l(c)},pn.useFormState=function(l,c,f){return s.H.useFormState(l,c,f)},pn.useFormStatus=function(){return s.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var DR;function uF(){if(DR)return tx.exports;DR=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tx.exports=_K(),tx.exports}var OR;function TK(){if(OR)return Kf;OR=1;var r=wK(),e=Fc(),t=uF();function n(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function s(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function o(u){if(u.tag===31){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function l(u){if(a(u)!==u)throw Error(n(188))}function c(u){var d=u.alternate;if(!d){if(d=a(u),d===null)throw Error(n(188));return d!==u?null:u}for(var m=u,x=d;;){var T=m.return;if(T===null)break;var O=T.alternate;if(O===null){if(x=T.return,x!==null){m=x;continue}break}if(T.child===O.child){for(O=T.child;O;){if(O===m)return l(T),u;if(O===x)return l(T),d;O=O.sibling}throw Error(n(188))}if(m.return!==x.return)m=T,x=O;else{for(var U=!1,X=T.child;X;){if(X===m){U=!0,m=T,x=O;break}if(X===x){U=!0,x=T,m=O;break}X=X.sibling}if(!U){for(X=O.child;X;){if(X===m){U=!0,m=O,x=T;break}if(X===x){U=!0,x=O,m=T;break}X=X.sibling}if(!U)throw Error(n(189))}}if(m.alternate!==x)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?u:d}function f(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u;for(u=u.child;u!==null;){if(d=f(u),d!==null)return d;u=u.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function N(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Symbol.for("react.client.reference");function z(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case E:return"Profiler";case v:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList";case k:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case w:return u.displayName||"Context";case S:return(u._context.displayName||"Context")+".Consumer";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case D:return d=u.displayName||null,d!==null?d:z(u.type)||"Memo";case P:d=u._payload,u=u._init;try{return z(u(d))}catch{}}return null}var V=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],G=-1;function j(u){return{current:u}}function F(u){0>G||(u.current=J[G],J[G]=null,G--)}function Z(u,d){G++,J[G]=u.current,u.current=d}var ae=j(null),ee=j(null),ve=j(null),le=j(null);function ne(u,d){switch(Z(ve,d),Z(ee,u),Z(ae,null),d.nodeType){case 9:case 11:u=(u=d.documentElement)&&(u=u.namespaceURI)?GC(u):0;break;default:if(u=d.tagName,d=d.namespaceURI)d=GC(d),u=KC(d,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}F(ae),Z(ae,u)}function re(){F(ae),F(ee),F(ve)}function ue(u){u.memoizedState!==null&&Z(le,u);var d=ae.current,m=KC(d,u.type);d!==m&&(Z(ee,u),Z(ae,m))}function fe(u){ee.current===u&&(F(ae),F(ee)),le.current===u&&(F(le),Bf._currentValue=W)}var ie,Ce;function Se(u){if(ie===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ie=d&&d[1]||"",Ce=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+u+Ce}var se=!1;function oe(u,d){if(!u||se)return"";se=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Le){var Oe=Le}Reflect.construct(u,[],ze)}else{try{ze.call()}catch(Le){Oe=Le}u.call(ze.prototype)}}else{try{throw Error()}catch(Le){Oe=Le}(ze=u())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Le){if(Le&&Oe&&typeof Le.stack=="string")return[Le.stack,Oe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),U=O[0],X=O[1];if(U&&X){var he=U.split(`
`),Ae=X.split(`
`);for(T=x=0;x<he.length&&!he[x].includes("DetermineComponentFrameRoot");)x++;for(;T<Ae.length&&!Ae[T].includes("DetermineComponentFrameRoot");)T++;if(x===he.length||T===Ae.length)for(x=he.length-1,T=Ae.length-1;1<=x&&0<=T&&he[x]!==Ae[T];)T--;for(;1<=x&&0<=T;x--,T--)if(he[x]!==Ae[T]){if(x!==1||T!==1)do if(x--,T--,0>T||he[x]!==Ae[T]){var $e=`
`+he[x].replace(" at new "," at ");return u.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",u.displayName)),$e}while(1<=x&&0<=T);break}}}finally{se=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Se(m):""}function ye(u,d){switch(u.tag){case 26:case 27:case 5:return Se(u.type);case 16:return Se("Lazy");case 13:return u.child!==d&&d!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return oe(u.type,!1);case 11:return oe(u.type.render,!1);case 1:return oe(u.type,!0);case 31:return Se("Activity");default:return""}}function Ie(u){try{var d="",m=null;do d+=ye(u,m),m=u,u=u.return;while(u);return d}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var Re=Object.prototype.hasOwnProperty,Be=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,Fe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,De=r.unstable_now,ft=r.unstable_getCurrentPriorityLevel,C=r.unstable_ImmediatePriority,B=r.unstable_UserBlockingPriority,q=r.unstable_NormalPriority,de=r.unstable_LowPriority,be=r.unstable_IdlePriority,Pe=r.log,We=r.unstable_setDisableYieldValue,ge=null,_e=null;function tt(u){if(typeof Pe=="function"&&We(u),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(ge,u)}catch{}}var Ze=Math.clz32?Math.clz32:Di,ht=Math.log,yt=Math.LN2;function Di(u){return u>>>=0,u===0?32:31-(ht(u)/yt|0)|0}var En=256,xr=262144,wn=4194304;function jn(u){var d=u&42;if(d!==0)return d;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function _n(u,d,m){var x=u.pendingLanes;if(x===0)return 0;var T=0,O=u.suspendedLanes,U=u.pingedLanes;u=u.warmLanes;var X=x&134217727;return X!==0?(x=X&~O,x!==0?T=jn(x):(U&=X,U!==0?T=jn(U):m||(m=X&~u,m!==0&&(T=jn(m))))):(X=x&~O,X!==0?T=jn(X):U!==0?T=jn(U):m||(m=x&~u,m!==0&&(T=jn(m)))),T===0?0:d!==0&&d!==T&&(d&O)===0&&(O=T&-T,m=d&-d,O>=m||O===32&&(m&4194048)!==0)?d:T}function kr(u,d){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&d)===0}function uu(u,d){switch(u){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wa(){var u=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),u}function Va(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function te(u,d){u.pendingLanes|=d,d!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ce(u,d,m,x,T,O){var U=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var X=u.entanglements,he=u.expirationTimes,Ae=u.hiddenUpdates;for(m=U&~m;0<m;){var $e=31-Ze(m),ze=1<<$e;X[$e]=0,he[$e]=-1;var Oe=Ae[$e];if(Oe!==null)for(Ae[$e]=null,$e=0;$e<Oe.length;$e++){var Le=Oe[$e];Le!==null&&(Le.lane&=-536870913)}m&=~ze}x!==0&&qe(u,x,0),O!==0&&T===0&&u.tag!==0&&(u.suspendedLanes|=O&~(U&~d))}function qe(u,d,m){u.pendingLanes|=d,u.suspendedLanes&=~d;var x=31-Ze(d);u.entangledLanes|=d,u.entanglements[x]=u.entanglements[x]|1073741824|m&261930}function Ve(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var x=31-Ze(m),T=1<<x;T&d|u[x]&d&&(u[x]|=d),m&=~T}}function Je(u,d){var m=d&-d;return m=(m&42)!==0?1:ur(m),(m&(u.suspendedLanes|d))!==0?0:m}function ur(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Mr(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Fn(){var u=Y.p;return u!==0?u:(u=window.event,u===void 0?32:hR(u.type))}function no(u,d){var m=Y.p;try{return Y.p=u,d()}finally{Y.p=m}}var Bn=Math.random().toString(36).slice(2),cr="__reactFiber$"+Bn,Nr="__reactProps$"+Bn,Un="__reactContainer$"+Bn,$n="__reactEvents$"+Bn,pa="__reactListeners$"+Bn,Qa="__reactHandles$"+Bn,ii="__reactResources$"+Bn,Tn="__reactMarker$"+Bn;function Hy(u){delete u[cr],delete u[Nr],delete u[$n],delete u[pa],delete u[Qa]}function cu(u){var d=u[cr];if(d)return d;for(var m=u.parentNode;m;){if(d=m[Un]||m[cr]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(u=XC(u);u!==null;){if(m=u[cr])return m;u=XC(u)}return d}u=m,m=u.parentNode}return null}function fu(u){if(u=u[cr]||u[Un]){var d=u.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return u}return null}function ef(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u.stateNode;throw Error(n(33))}function du(u){var d=u[ii];return d||(d=u[ii]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function zr(u){u[Tn]=!0}var RD=new Set,PD={};function al(u,d){hu(u,d),hu(u+"Capture",d)}function hu(u,d){for(PD[u]=d,u=0;u<d.length;u++)RD.add(d[u])}var uH=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),LD={},kD={};function cH(u){return Re.call(kD,u)?!0:Re.call(LD,u)?!1:uH.test(u)?kD[u]=!0:(LD[u]=!0,!1)}function Ah(u,d,m){if(cH(d))if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){u.removeAttribute(d);return}}u.setAttribute(d,""+m)}}function Dh(u,d,m){if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(d);return}u.setAttribute(d,""+m)}}function Xa(u,d,m,x){if(x===null)u.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(d,m,""+x)}}function Oi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function MD(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function fH(u,d,m){var x=Object.getOwnPropertyDescriptor(u.constructor.prototype,d);if(!u.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,O=x.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return T.call(this)},set:function(U){m=""+U,O.call(this,U)}}),Object.defineProperty(u,d,{enumerable:x.enumerable}),{getValue:function(){return m},setValue:function(U){m=""+U},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Gy(u){if(!u._valueTracker){var d=MD(u)?"checked":"value";u._valueTracker=fH(u,d,""+u[d])}}function ND(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var m=d.getValue(),x="";return u&&(x=MD(u)?u.checked?"true":"false":u.value),u=x,u!==m?(d.setValue(u),!0):!1}function Oh(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var dH=/[\n"\\]/g;function Ii(u){return u.replace(dH,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Ky(u,d,m,x,T,O,U,X){u.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?u.type=U:u.removeAttribute("type"),d!=null?U==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+Oi(d)):u.value!==""+Oi(d)&&(u.value=""+Oi(d)):U!=="submit"&&U!=="reset"||u.removeAttribute("value"),d!=null?zy(u,U,Oi(d)):m!=null?zy(u,U,Oi(m)):x!=null&&u.removeAttribute("value"),T==null&&O!=null&&(u.defaultChecked=!!O),T!=null&&(u.checked=T&&typeof T!="function"&&typeof T!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?u.name=""+Oi(X):u.removeAttribute("name")}function jD(u,d,m,x,T,O,U,X){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(u.type=O),d!=null||m!=null){if(!(O!=="submit"&&O!=="reset"||d!=null)){Gy(u);return}m=m!=null?""+Oi(m):"",d=d!=null?""+Oi(d):m,X||d===u.value||(u.value=d),u.defaultValue=d}x=x??T,x=typeof x!="function"&&typeof x!="symbol"&&!!x,u.checked=X?u.checked:!!x,u.defaultChecked=!!x,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(u.name=U),Gy(u)}function zy(u,d,m){d==="number"&&Oh(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function pu(u,d,m,x){if(u=u.options,d){d={};for(var T=0;T<m.length;T++)d["$"+m[T]]=!0;for(m=0;m<u.length;m++)T=d.hasOwnProperty("$"+u[m].value),u[m].selected!==T&&(u[m].selected=T),T&&x&&(u[m].defaultSelected=!0)}else{for(m=""+Oi(m),d=null,T=0;T<u.length;T++){if(u[T].value===m){u[T].selected=!0,x&&(u[T].defaultSelected=!0);return}d!==null||u[T].disabled||(d=u[T])}d!==null&&(d.selected=!0)}}function FD(u,d,m){if(d!=null&&(d=""+Oi(d),d!==u.value&&(u.value=d),m==null)){u.defaultValue!==d&&(u.defaultValue=d);return}u.defaultValue=m!=null?""+Oi(m):""}function BD(u,d,m,x){if(d==null){if(x!=null){if(m!=null)throw Error(n(92));if(V(x)){if(1<x.length)throw Error(n(93));x=x[0]}m=x}m==null&&(m=""),d=m}m=Oi(d),u.defaultValue=m,x=u.textContent,x===m&&x!==""&&x!==null&&(u.value=x),Gy(u)}function mu(u,d){if(d){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=d;return}}u.textContent=d}var hH=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function UD(u,d,m){var x=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="":x?u.setProperty(d,m):typeof m!="number"||m===0||hH.has(d)?d==="float"?u.cssFloat=m:u[d]=(""+m).trim():u[d]=m+"px"}function $D(u,d,m){if(d!=null&&typeof d!="object")throw Error(n(62));if(u=u.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?u.setProperty(x,""):x==="float"?u.cssFloat="":u[x]="");for(var T in d)x=d[T],d.hasOwnProperty(T)&&m[T]!==x&&UD(u,T,x)}else for(var O in d)d.hasOwnProperty(O)&&UD(u,O,d[O])}function Yy(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pH=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mH=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ih(u){return mH.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Za(){}var qy=null;function Wy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var gu=null,yu=null;function HD(u){var d=fu(u);if(d&&(u=d.stateNode)){var m=u[Nr]||null;e:switch(u=d.stateNode,d.type){case"input":if(Ky(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ii(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var x=m[d];if(x!==u&&x.form===u.form){var T=x[Nr]||null;if(!T)throw Error(n(90));Ky(x,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<m.length;d++)x=m[d],x.form===u.form&&ND(x)}break e;case"textarea":FD(u,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&pu(u,!!m.multiple,d,!1)}}}var Vy=!1;function GD(u,d,m){if(Vy)return u(d,m);Vy=!0;try{var x=u(d);return x}finally{if(Vy=!1,(gu!==null||yu!==null)&&(gp(),gu&&(d=gu,u=yu,yu=gu=null,HD(d),u)))for(d=0;d<u.length;d++)HD(u[d])}}function tf(u,d){var m=u.stateNode;if(m===null)return null;var x=m[Nr]||null;if(x===null)return null;m=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(u=u.type,x=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!x;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qy=!1;if(Ja)try{var rf={};Object.defineProperty(rf,"passive",{get:function(){Qy=!0}}),window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{Qy=!1}var io=null,Xy=null,Ch=null;function KD(){if(Ch)return Ch;var u,d=Xy,m=d.length,x,T="value"in io?io.value:io.textContent,O=T.length;for(u=0;u<m&&d[u]===T[u];u++);var U=m-u;for(x=1;x<=U&&d[m-x]===T[O-x];x++);return Ch=T.slice(u,1<x?1-x:void 0)}function Rh(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Ph(){return!0}function zD(){return!1}function Hn(u){function d(m,x,T,O,U){this._reactName=m,this._targetInst=T,this.type=x,this.nativeEvent=O,this.target=U,this.currentTarget=null;for(var X in u)u.hasOwnProperty(X)&&(m=u[X],this[X]=m?m(O):O[X]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ph:zD,this.isPropagationStopped=zD,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ph)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ph)},persist:function(){},isPersistent:Ph}),d}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=Hn(sl),nf=h({},sl,{view:0,detail:0}),gH=Hn(nf),Zy,Jy,af,kh=h({},nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tv,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==af&&(af&&u.type==="mousemove"?(Zy=u.screenX-af.screenX,Jy=u.screenY-af.screenY):Jy=Zy=0,af=u),Zy)},movementY:function(u){return"movementY"in u?u.movementY:Jy}}),YD=Hn(kh),yH=h({},kh,{dataTransfer:0}),vH=Hn(yH),bH=h({},nf,{relatedTarget:0}),ev=Hn(bH),xH=h({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),SH=Hn(xH),EH=h({},sl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),wH=Hn(EH),_H=h({},sl,{data:0}),qD=Hn(_H),TH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OH(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=DH[u])?!!d[u]:!1}function tv(){return OH}var IH=h({},nf,{key:function(u){if(u.key){var d=TH[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=Rh(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?AH[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tv,charCode:function(u){return u.type==="keypress"?Rh(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Rh(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),CH=Hn(IH),RH=h({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WD=Hn(RH),PH=h({},nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tv}),LH=Hn(PH),kH=h({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),MH=Hn(kH),NH=h({},kh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),jH=Hn(NH),FH=h({},sl,{newState:0,oldState:0}),BH=Hn(FH),UH=[9,13,27,32],rv=Ja&&"CompositionEvent"in window,sf=null;Ja&&"documentMode"in document&&(sf=document.documentMode);var $H=Ja&&"TextEvent"in window&&!sf,VD=Ja&&(!rv||sf&&8<sf&&11>=sf),QD=" ",XD=!1;function ZD(u,d){switch(u){case"keyup":return UH.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JD(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var vu=!1;function HH(u,d){switch(u){case"compositionend":return JD(d);case"keypress":return d.which!==32?null:(XD=!0,QD);case"textInput":return u=d.data,u===QD&&XD?null:u;default:return null}}function GH(u,d){if(vu)return u==="compositionend"||!rv&&ZD(u,d)?(u=KD(),Ch=Xy=io=null,vu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return VD&&d.locale!=="ko"?null:d.data;default:return null}}var KH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eO(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!KH[u.type]:d==="textarea"}function tO(u,d,m,x){gu?yu?yu.push(x):yu=[x]:gu=x,d=wp(d,"onChange"),0<d.length&&(m=new Lh("onChange","change",null,m,x),u.push({event:m,listeners:d}))}var of=null,lf=null;function zH(u){jC(u,0)}function Mh(u){var d=ef(u);if(ND(d))return u}function rO(u,d){if(u==="change")return d}var nO=!1;if(Ja){var nv;if(Ja){var iv="oninput"in document;if(!iv){var iO=document.createElement("div");iO.setAttribute("oninput","return;"),iv=typeof iO.oninput=="function"}nv=iv}else nv=!1;nO=nv&&(!document.documentMode||9<document.documentMode)}function aO(){of&&(of.detachEvent("onpropertychange",sO),lf=of=null)}function sO(u){if(u.propertyName==="value"&&Mh(lf)){var d=[];tO(d,lf,u,Wy(u)),GD(zH,d)}}function YH(u,d,m){u==="focusin"?(aO(),of=d,lf=m,of.attachEvent("onpropertychange",sO)):u==="focusout"&&aO()}function qH(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Mh(lf)}function WH(u,d){if(u==="click")return Mh(d)}function VH(u,d){if(u==="input"||u==="change")return Mh(d)}function QH(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var ai=typeof Object.is=="function"?Object.is:QH;function uf(u,d){if(ai(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),x=Object.keys(d);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var T=m[x];if(!Re.call(d,T)||!ai(u[T],d[T]))return!1}return!0}function oO(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function lO(u,d){var m=oO(u);u=0;for(var x;m;){if(m.nodeType===3){if(x=u+m.textContent.length,u<=d&&x>=d)return{node:m,offset:d-u};u=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=oO(m)}}function uO(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?uO(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function cO(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var d=Oh(u.document);d instanceof u.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)u=d.contentWindow;else break;d=Oh(u.document)}return d}function av(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}var XH=Ja&&"documentMode"in document&&11>=document.documentMode,bu=null,sv=null,cf=null,ov=!1;function fO(u,d,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ov||bu==null||bu!==Oh(x)||(x=bu,"selectionStart"in x&&av(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),cf&&uf(cf,x)||(cf=x,x=wp(sv,"onSelect"),0<x.length&&(d=new Lh("onSelect","select",null,d,m),u.push({event:d,listeners:x}),d.target=bu)))}function ol(u,d){var m={};return m[u.toLowerCase()]=d.toLowerCase(),m["Webkit"+u]="webkit"+d,m["Moz"+u]="moz"+d,m}var xu={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionrun:ol("Transition","TransitionRun"),transitionstart:ol("Transition","TransitionStart"),transitioncancel:ol("Transition","TransitionCancel"),transitionend:ol("Transition","TransitionEnd")},lv={},dO={};Ja&&(dO=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function ll(u){if(lv[u])return lv[u];if(!xu[u])return u;var d=xu[u],m;for(m in d)if(d.hasOwnProperty(m)&&m in dO)return lv[u]=d[m];return u}var hO=ll("animationend"),pO=ll("animationiteration"),mO=ll("animationstart"),ZH=ll("transitionrun"),JH=ll("transitionstart"),eG=ll("transitioncancel"),gO=ll("transitionend"),yO=new Map,uv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uv.push("scrollEnd");function Zi(u,d){yO.set(u,d),al(d,[u])}var Nh=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ci=[],Su=0,cv=0;function jh(){for(var u=Su,d=cv=Su=0;d<u;){var m=Ci[d];Ci[d++]=null;var x=Ci[d];Ci[d++]=null;var T=Ci[d];Ci[d++]=null;var O=Ci[d];if(Ci[d++]=null,x!==null&&T!==null){var U=x.pending;U===null?T.next=T:(T.next=U.next,U.next=T),x.pending=T}O!==0&&vO(m,T,O)}}function Fh(u,d,m,x){Ci[Su++]=u,Ci[Su++]=d,Ci[Su++]=m,Ci[Su++]=x,cv|=x,u.lanes|=x,u=u.alternate,u!==null&&(u.lanes|=x)}function fv(u,d,m,x){return Fh(u,d,m,x),Bh(u)}function ul(u,d){return Fh(u,null,null,d),Bh(u)}function vO(u,d,m){u.lanes|=m;var x=u.alternate;x!==null&&(x.lanes|=m);for(var T=!1,O=u.return;O!==null;)O.childLanes|=m,x=O.alternate,x!==null&&(x.childLanes|=m),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(T=!0)),u=O,O=O.return;return u.tag===3?(O=u.stateNode,T&&d!==null&&(T=31-Ze(m),u=O.hiddenUpdates,x=u[T],x===null?u[T]=[d]:x.push(d),d.lane=m|536870912),O):null}function Bh(u){if(50<Pf)throw Pf=0,xb=null,Error(n(185));for(var d=u.return;d!==null;)u=d,d=u.return;return u.tag===3?u.stateNode:null}var Eu={};function tG(u,d,m,x){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(u,d,m,x){return new tG(u,d,m,x)}function dv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function es(u,d){var m=u.alternate;return m===null?(m=si(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function bO(u,d){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,d=m.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u}function Uh(u,d,m,x,T,O){var U=0;if(x=u,typeof u=="function")dv(u)&&(U=1);else if(typeof u=="string")U=sK(u,m,ae.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case k:return u=si(31,m,d,T),u.elementType=k,u.lanes=O,u;case b:return cl(m.children,T,O,d);case v:U=8,T|=24;break;case E:return u=si(12,m,d,T|2),u.elementType=E,u.lanes=O,u;case _:return u=si(13,m,d,T),u.elementType=_,u.lanes=O,u;case I:return u=si(19,m,d,T),u.elementType=I,u.lanes=O,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:U=10;break e;case S:U=9;break e;case A:U=11;break e;case D:U=14;break e;case P:U=16,x=null;break e}U=29,m=Error(n(130,u===null?"null":typeof u,"")),x=null}return d=si(U,m,d,T),d.elementType=u,d.type=x,d.lanes=O,d}function cl(u,d,m,x){return u=si(7,u,x,d),u.lanes=m,u}function hv(u,d,m){return u=si(6,u,null,d),u.lanes=m,u}function xO(u){var d=si(18,null,null,0);return d.stateNode=u,d}function pv(u,d,m){return d=si(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}var SO=new WeakMap;function Ri(u,d){if(typeof u=="object"&&u!==null){var m=SO.get(u);return m!==void 0?m:(d={value:u,source:d,stack:Ie(d)},SO.set(u,d),d)}return{value:u,source:d,stack:Ie(d)}}var wu=[],_u=0,$h=null,ff=0,Pi=[],Li=0,ao=null,ma=1,ga="";function ts(u,d){wu[_u++]=ff,wu[_u++]=$h,$h=u,ff=d}function EO(u,d,m){Pi[Li++]=ma,Pi[Li++]=ga,Pi[Li++]=ao,ao=u;var x=ma;u=ga;var T=32-Ze(x)-1;x&=~(1<<T),m+=1;var O=32-Ze(d)+T;if(30<O){var U=T-T%5;O=(x&(1<<U)-1).toString(32),x>>=U,T-=U,ma=1<<32-Ze(d)+T|m<<T|x,ga=O+u}else ma=1<<O|m<<T|x,ga=u}function mv(u){u.return!==null&&(ts(u,1),EO(u,1,0))}function gv(u){for(;u===$h;)$h=wu[--_u],wu[_u]=null,ff=wu[--_u],wu[_u]=null;for(;u===ao;)ao=Pi[--Li],Pi[Li]=null,ga=Pi[--Li],Pi[Li]=null,ma=Pi[--Li],Pi[Li]=null}function wO(u,d){Pi[Li++]=ma,Pi[Li++]=ga,Pi[Li++]=ao,ma=d.id,ga=d.overflow,ao=u}var rn=null,er=null,It=!1,so=null,ki=!1,yv=Error(n(519));function oo(u){var d=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw df(Ri(d,u)),yv}function _O(u){var d=u.stateNode,m=u.type,x=u.memoizedProps;switch(d[cr]=u,d[Nr]=x,m){case"dialog":wt("cancel",d),wt("close",d);break;case"iframe":case"object":case"embed":wt("load",d);break;case"video":case"audio":for(m=0;m<kf.length;m++)wt(kf[m],d);break;case"source":wt("error",d);break;case"img":case"image":case"link":wt("error",d),wt("load",d);break;case"details":wt("toggle",d);break;case"input":wt("invalid",d),jD(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":wt("invalid",d);break;case"textarea":wt("invalid",d),BD(d,x.value,x.defaultValue,x.children)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||x.suppressHydrationWarning===!0||$C(d.textContent,m)?(x.popover!=null&&(wt("beforetoggle",d),wt("toggle",d)),x.onScroll!=null&&wt("scroll",d),x.onScrollEnd!=null&&wt("scrollend",d),x.onClick!=null&&(d.onclick=Za),d=!0):d=!1,d||oo(u,!0)}function TO(u){for(rn=u.return;rn;)switch(rn.tag){case 5:case 31:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:rn=rn.return}}function Tu(u){if(u!==rn)return!1;if(!It)return TO(u),It=!0,!1;var d=u.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||Mb(u.type,u.memoizedProps)),m=!m),m&&er&&oo(u),TO(u),d===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));er=QC(u)}else if(d===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));er=QC(u)}else d===27?(d=er,Eo(u.type)?(u=Ub,Ub=null,er=u):er=d):er=rn?Ni(u.stateNode.nextSibling):null;return!0}function fl(){er=rn=null,It=!1}function vv(){var u=so;return u!==null&&(Yn===null?Yn=u:Yn.push.apply(Yn,u),so=null),u}function df(u){so===null?so=[u]:so.push(u)}var bv=j(null),dl=null,rs=null;function lo(u,d,m){Z(bv,d._currentValue),d._currentValue=m}function ns(u){u._currentValue=bv.current,F(bv)}function xv(u,d,m){for(;u!==null;){var x=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),u===m)break;u=u.return}}function Sv(u,d,m,x){var T=u.child;for(T!==null&&(T.return=u);T!==null;){var O=T.dependencies;if(O!==null){var U=T.child;O=O.firstContext;e:for(;O!==null;){var X=O;O=T;for(var he=0;he<d.length;he++)if(X.context===d[he]){O.lanes|=m,X=O.alternate,X!==null&&(X.lanes|=m),xv(O.return,m,u),x||(U=null);break e}O=X.next}}else if(T.tag===18){if(U=T.return,U===null)throw Error(n(341));U.lanes|=m,O=U.alternate,O!==null&&(O.lanes|=m),xv(U,m,u),U=null}else U=T.child;if(U!==null)U.return=T;else for(U=T;U!==null;){if(U===u){U=null;break}if(T=U.sibling,T!==null){T.return=U.return,U=T;break}U=U.return}T=U}}function Au(u,d,m,x){u=null;for(var T=d,O=!1;T!==null;){if(!O){if((T.flags&524288)!==0)O=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var U=T.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var X=T.type;ai(T.pendingProps.value,U.value)||(u!==null?u.push(X):u=[X])}}else if(T===le.current){if(U=T.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(u!==null?u.push(Bf):u=[Bf])}T=T.return}u!==null&&Sv(d,u,m,x),d.flags|=262144}function Hh(u){for(u=u.firstContext;u!==null;){if(!ai(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function hl(u){dl=u,rs=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function nn(u){return AO(dl,u)}function Gh(u,d){return dl===null&&hl(u),AO(u,d)}function AO(u,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},rs===null){if(u===null)throw Error(n(308));rs=d,u.dependencies={lanes:0,firstContext:d},u.flags|=524288}else rs=rs.next=d;return m}var rG=typeof AbortController<"u"?AbortController:function(){var u=[],d=this.signal={aborted:!1,addEventListener:function(m,x){u.push(x)}};this.abort=function(){d.aborted=!0,u.forEach(function(m){return m()})}},nG=r.unstable_scheduleCallback,iG=r.unstable_NormalPriority,Dr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ev(){return{controller:new rG,data:new Map,refCount:0}}function hf(u){u.refCount--,u.refCount===0&&nG(iG,function(){u.controller.abort()})}var pf=null,wv=0,Du=0,Ou=null;function aG(u,d){if(pf===null){var m=pf=[];wv=0,Du=Ab(),Ou={status:"pending",value:void 0,then:function(x){m.push(x)}}}return wv++,d.then(DO,DO),d}function DO(){if(--wv===0&&pf!==null){Ou!==null&&(Ou.status="fulfilled");var u=pf;pf=null,Du=0,Ou=null;for(var d=0;d<u.length;d++)(0,u[d])()}}function sG(u,d){var m=[],x={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return u.then(function(){x.status="fulfilled",x.value=d;for(var T=0;T<m.length;T++)(0,m[T])(d)},function(T){for(x.status="rejected",x.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),x}var OO=K.S;K.S=function(u,d){fC=De(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&aG(u,d),OO!==null&&OO(u,d)};var pl=j(null);function _v(){var u=pl.current;return u!==null?u:Wt.pooledCache}function Kh(u,d){d===null?Z(pl,pl.current):Z(pl,d.pool)}function IO(){var u=_v();return u===null?null:{parent:Dr._currentValue,pool:u}}var Iu=Error(n(460)),Tv=Error(n(474)),zh=Error(n(542)),Yh={then:function(){}};function CO(u){return u=u.status,u==="fulfilled"||u==="rejected"}function RO(u,d,m){switch(m=u[m],m===void 0?u.push(d):m!==d&&(d.then(Za,Za),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,LO(u),u;default:if(typeof d.status=="string")d.then(Za,Za);else{if(u=Wt,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=d,u.status="pending",u.then(function(x){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=x}},function(x){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,LO(u),u}throw gl=d,Iu}}function ml(u){try{var d=u._init;return d(u._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(gl=m,Iu):m}}var gl=null;function PO(){if(gl===null)throw Error(n(459));var u=gl;return gl=null,u}function LO(u){if(u===Iu||u===zh)throw Error(n(483))}var Cu=null,mf=0;function qh(u){var d=mf;return mf+=1,Cu===null&&(Cu=[]),RO(Cu,u,d)}function gf(u,d){d=d.props.ref,u.ref=d!==void 0?d:null}function Wh(u,d){throw d.$$typeof===p?Error(n(525)):(u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u)))}function kO(u){function d(xe,me){if(u){var Te=xe.deletions;Te===null?(xe.deletions=[me],xe.flags|=16):Te.push(me)}}function m(xe,me){if(!u)return null;for(;me!==null;)d(xe,me),me=me.sibling;return null}function x(xe){for(var me=new Map;xe!==null;)xe.key!==null?me.set(xe.key,xe):me.set(xe.index,xe),xe=xe.sibling;return me}function T(xe,me){return xe=es(xe,me),xe.index=0,xe.sibling=null,xe}function O(xe,me,Te){return xe.index=Te,u?(Te=xe.alternate,Te!==null?(Te=Te.index,Te<me?(xe.flags|=67108866,me):Te):(xe.flags|=67108866,me)):(xe.flags|=1048576,me)}function U(xe){return u&&xe.alternate===null&&(xe.flags|=67108866),xe}function X(xe,me,Te,Ke){return me===null||me.tag!==6?(me=hv(Te,xe.mode,Ke),me.return=xe,me):(me=T(me,Te),me.return=xe,me)}function he(xe,me,Te,Ke){var lt=Te.type;return lt===b?$e(xe,me,Te.props.children,Ke,Te.key):me!==null&&(me.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===P&&ml(lt)===me.type)?(me=T(me,Te.props),gf(me,Te),me.return=xe,me):(me=Uh(Te.type,Te.key,Te.props,null,xe.mode,Ke),gf(me,Te),me.return=xe,me)}function Ae(xe,me,Te,Ke){return me===null||me.tag!==4||me.stateNode.containerInfo!==Te.containerInfo||me.stateNode.implementation!==Te.implementation?(me=pv(Te,xe.mode,Ke),me.return=xe,me):(me=T(me,Te.children||[]),me.return=xe,me)}function $e(xe,me,Te,Ke,lt){return me===null||me.tag!==7?(me=cl(Te,xe.mode,Ke,lt),me.return=xe,me):(me=T(me,Te),me.return=xe,me)}function ze(xe,me,Te){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=hv(""+me,xe.mode,Te),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case g:return Te=Uh(me.type,me.key,me.props,null,xe.mode,Te),gf(Te,me),Te.return=xe,Te;case y:return me=pv(me,xe.mode,Te),me.return=xe,me;case P:return me=ml(me),ze(xe,me,Te)}if(V(me)||N(me))return me=cl(me,xe.mode,Te,null),me.return=xe,me;if(typeof me.then=="function")return ze(xe,qh(me),Te);if(me.$$typeof===w)return ze(xe,Gh(xe,me),Te);Wh(xe,me)}return null}function Oe(xe,me,Te,Ke){var lt=me!==null?me.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return lt!==null?null:X(xe,me,""+Te,Ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return Te.key===lt?he(xe,me,Te,Ke):null;case y:return Te.key===lt?Ae(xe,me,Te,Ke):null;case P:return Te=ml(Te),Oe(xe,me,Te,Ke)}if(V(Te)||N(Te))return lt!==null?null:$e(xe,me,Te,Ke,null);if(typeof Te.then=="function")return Oe(xe,me,qh(Te),Ke);if(Te.$$typeof===w)return Oe(xe,me,Gh(xe,Te),Ke);Wh(xe,Te)}return null}function Le(xe,me,Te,Ke,lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return xe=xe.get(Te)||null,X(me,xe,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case g:return xe=xe.get(Ke.key===null?Te:Ke.key)||null,he(me,xe,Ke,lt);case y:return xe=xe.get(Ke.key===null?Te:Ke.key)||null,Ae(me,xe,Ke,lt);case P:return Ke=ml(Ke),Le(xe,me,Te,Ke,lt)}if(V(Ke)||N(Ke))return xe=xe.get(Te)||null,$e(me,xe,Ke,lt,null);if(typeof Ke.then=="function")return Le(xe,me,Te,qh(Ke),lt);if(Ke.$$typeof===w)return Le(xe,me,Te,Gh(me,Ke),lt);Wh(me,Ke)}return null}function nt(xe,me,Te,Ke){for(var lt=null,Ct=null,it=me,bt=me=0,Dt=null;it!==null&&bt<Te.length;bt++){it.index>bt?(Dt=it,it=null):Dt=it.sibling;var Rt=Oe(xe,it,Te[bt],Ke);if(Rt===null){it===null&&(it=Dt);break}u&&it&&Rt.alternate===null&&d(xe,it),me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt,it=Dt}if(bt===Te.length)return m(xe,it),It&&ts(xe,bt),lt;if(it===null){for(;bt<Te.length;bt++)it=ze(xe,Te[bt],Ke),it!==null&&(me=O(it,me,bt),Ct===null?lt=it:Ct.sibling=it,Ct=it);return It&&ts(xe,bt),lt}for(it=x(it);bt<Te.length;bt++)Dt=Le(it,xe,bt,Te[bt],Ke),Dt!==null&&(u&&Dt.alternate!==null&&it.delete(Dt.key===null?bt:Dt.key),me=O(Dt,me,bt),Ct===null?lt=Dt:Ct.sibling=Dt,Ct=Dt);return u&&it.forEach(function(Do){return d(xe,Do)}),It&&ts(xe,bt),lt}function ct(xe,me,Te,Ke){if(Te==null)throw Error(n(151));for(var lt=null,Ct=null,it=me,bt=me=0,Dt=null,Rt=Te.next();it!==null&&!Rt.done;bt++,Rt=Te.next()){it.index>bt?(Dt=it,it=null):Dt=it.sibling;var Do=Oe(xe,it,Rt.value,Ke);if(Do===null){it===null&&(it=Dt);break}u&&it&&Do.alternate===null&&d(xe,it),me=O(Do,me,bt),Ct===null?lt=Do:Ct.sibling=Do,Ct=Do,it=Dt}if(Rt.done)return m(xe,it),It&&ts(xe,bt),lt;if(it===null){for(;!Rt.done;bt++,Rt=Te.next())Rt=ze(xe,Rt.value,Ke),Rt!==null&&(me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt);return It&&ts(xe,bt),lt}for(it=x(it);!Rt.done;bt++,Rt=Te.next())Rt=Le(it,xe,bt,Rt.value,Ke),Rt!==null&&(u&&Rt.alternate!==null&&it.delete(Rt.key===null?bt:Rt.key),me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt);return u&&it.forEach(function(yK){return d(xe,yK)}),It&&ts(xe,bt),lt}function zt(xe,me,Te,Ke){if(typeof Te=="object"&&Te!==null&&Te.type===b&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:e:{for(var lt=Te.key;me!==null;){if(me.key===lt){if(lt=Te.type,lt===b){if(me.tag===7){m(xe,me.sibling),Ke=T(me,Te.props.children),Ke.return=xe,xe=Ke;break e}}else if(me.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===P&&ml(lt)===me.type){m(xe,me.sibling),Ke=T(me,Te.props),gf(Ke,Te),Ke.return=xe,xe=Ke;break e}m(xe,me);break}else d(xe,me);me=me.sibling}Te.type===b?(Ke=cl(Te.props.children,xe.mode,Ke,Te.key),Ke.return=xe,xe=Ke):(Ke=Uh(Te.type,Te.key,Te.props,null,xe.mode,Ke),gf(Ke,Te),Ke.return=xe,xe=Ke)}return U(xe);case y:e:{for(lt=Te.key;me!==null;){if(me.key===lt)if(me.tag===4&&me.stateNode.containerInfo===Te.containerInfo&&me.stateNode.implementation===Te.implementation){m(xe,me.sibling),Ke=T(me,Te.children||[]),Ke.return=xe,xe=Ke;break e}else{m(xe,me);break}else d(xe,me);me=me.sibling}Ke=pv(Te,xe.mode,Ke),Ke.return=xe,xe=Ke}return U(xe);case P:return Te=ml(Te),zt(xe,me,Te,Ke)}if(V(Te))return nt(xe,me,Te,Ke);if(N(Te)){if(lt=N(Te),typeof lt!="function")throw Error(n(150));return Te=lt.call(Te),ct(xe,me,Te,Ke)}if(typeof Te.then=="function")return zt(xe,me,qh(Te),Ke);if(Te.$$typeof===w)return zt(xe,me,Gh(xe,Te),Ke);Wh(xe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,me!==null&&me.tag===6?(m(xe,me.sibling),Ke=T(me,Te),Ke.return=xe,xe=Ke):(m(xe,me),Ke=hv(Te,xe.mode,Ke),Ke.return=xe,xe=Ke),U(xe)):m(xe,me)}return function(xe,me,Te,Ke){try{mf=0;var lt=zt(xe,me,Te,Ke);return Cu=null,lt}catch(it){if(it===Iu||it===zh)throw it;var Ct=si(29,it,null,xe.mode);return Ct.lanes=Ke,Ct.return=xe,Ct}finally{}}}var yl=kO(!0),MO=kO(!1),uo=!1;function Av(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dv(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function co(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function fo(u,d,m){var x=u.updateQueue;if(x===null)return null;if(x=x.shared,(kt&2)!==0){var T=x.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),x.pending=d,d=Bh(u),vO(u,null,m),d}return Fh(u,x,d,m),Bh(u)}function yf(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,Ve(u,m)}}function Ov(u,d){var m=u.updateQueue,x=u.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var T=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var U={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?T=O=U:O=O.next=U,m=m.next}while(m!==null);O===null?T=O=d:O=O.next=d}else T=O=d;m={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}var Iv=!1;function vf(){if(Iv){var u=Ou;if(u!==null)throw u}}function bf(u,d,m,x){Iv=!1;var T=u.updateQueue;uo=!1;var O=T.firstBaseUpdate,U=T.lastBaseUpdate,X=T.shared.pending;if(X!==null){T.shared.pending=null;var he=X,Ae=he.next;he.next=null,U===null?O=Ae:U.next=Ae,U=he;var $e=u.alternate;$e!==null&&($e=$e.updateQueue,X=$e.lastBaseUpdate,X!==U&&(X===null?$e.firstBaseUpdate=Ae:X.next=Ae,$e.lastBaseUpdate=he))}if(O!==null){var ze=T.baseState;U=0,$e=Ae=he=null,X=O;do{var Oe=X.lane&-536870913,Le=Oe!==X.lane;if(Le?(At&Oe)===Oe:(x&Oe)===Oe){Oe!==0&&Oe===Du&&(Iv=!0),$e!==null&&($e=$e.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var nt=u,ct=X;Oe=d;var zt=m;switch(ct.tag){case 1:if(nt=ct.payload,typeof nt=="function"){ze=nt.call(zt,ze,Oe);break e}ze=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ct.payload,Oe=typeof nt=="function"?nt.call(zt,ze,Oe):nt,Oe==null)break e;ze=h({},ze,Oe);break e;case 2:uo=!0}}Oe=X.callback,Oe!==null&&(u.flags|=64,Le&&(u.flags|=8192),Le=T.callbacks,Le===null?T.callbacks=[Oe]:Le.push(Oe))}else Le={lane:Oe,tag:X.tag,payload:X.payload,callback:X.callback,next:null},$e===null?(Ae=$e=Le,he=ze):$e=$e.next=Le,U|=Oe;if(X=X.next,X===null){if(X=T.shared.pending,X===null)break;Le=X,X=Le.next,Le.next=null,T.lastBaseUpdate=Le,T.shared.pending=null}}while(!0);$e===null&&(he=ze),T.baseState=he,T.firstBaseUpdate=Ae,T.lastBaseUpdate=$e,O===null&&(T.shared.lanes=0),yo|=U,u.lanes=U,u.memoizedState=ze}}function NO(u,d){if(typeof u!="function")throw Error(n(191,u));u.call(d)}function jO(u,d){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)NO(m[u],d)}var Ru=j(null),Vh=j(0);function FO(u,d){u=ds,Z(Vh,u),Z(Ru,d),ds=u|d.baseLanes}function Cv(){Z(Vh,ds),Z(Ru,Ru.current)}function Rv(){ds=Vh.current,F(Ru),F(Vh)}var oi=j(null),Mi=null;function ho(u){var d=u.alternate;Z(Sr,Sr.current&1),Z(oi,u),Mi===null&&(d===null||Ru.current!==null||d.memoizedState!==null)&&(Mi=u)}function Pv(u){Z(Sr,Sr.current),Z(oi,u),Mi===null&&(Mi=u)}function BO(u){u.tag===22?(Z(Sr,Sr.current),Z(oi,u),Mi===null&&(Mi=u)):po()}function po(){Z(Sr,Sr.current),Z(oi,oi.current)}function li(u){F(oi),Mi===u&&(Mi=null),F(Sr)}var Sr=j(0);function Qh(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Fb(m)||Bb(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var is=0,vt=null,Gt=null,Or=null,Xh=!1,Pu=!1,vl=!1,Zh=0,xf=0,Lu=null,oG=0;function gr(){throw Error(n(321))}function Lv(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!ai(u[m],d[m]))return!1;return!0}function kv(u,d,m,x,T,O){return is=O,vt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,K.H=u===null||u.memoizedState===null?EI:Vv,vl=!1,O=m(x,T),vl=!1,Pu&&(O=$O(d,m,x,T)),UO(u),O}function UO(u){K.H=wf;var d=Gt!==null&&Gt.next!==null;if(is=0,Or=Gt=vt=null,Xh=!1,xf=0,Lu=null,d)throw Error(n(300));u===null||Ir||(u=u.dependencies,u!==null&&Hh(u)&&(Ir=!0))}function $O(u,d,m,x){vt=u;var T=0;do{if(Pu&&(Lu=null),xf=0,Pu=!1,25<=T)throw Error(n(301));if(T+=1,Or=Gt=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}K.H=wI,O=d(m,x)}while(Pu);return O}function lG(){var u=K.H,d=u.useState()[0];return d=typeof d.then=="function"?Sf(d):d,u=u.useState()[0],(Gt!==null?Gt.memoizedState:null)!==u&&(vt.flags|=1024),d}function Mv(){var u=Zh!==0;return Zh=0,u}function Nv(u,d,m){d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~m}function jv(u){if(Xh){for(u=u.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Xh=!1}is=0,Or=Gt=vt=null,Pu=!1,xf=Zh=0,Lu=null}function An(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?vt.memoizedState=Or=u:Or=Or.next=u,Or}function Er(){if(Gt===null){var u=vt.alternate;u=u!==null?u.memoizedState:null}else u=Gt.next;var d=Or===null?vt.memoizedState:Or.next;if(d!==null)Or=d,Gt=u;else{if(u===null)throw vt.alternate===null?Error(n(467)):Error(n(310));Gt=u,u={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Or===null?vt.memoizedState=Or=u:Or=Or.next=u}return Or}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sf(u){var d=xf;return xf+=1,Lu===null&&(Lu=[]),u=RO(Lu,u,d),d=vt,(Or===null?d.memoizedState:Or.next)===null&&(d=d.alternate,K.H=d===null||d.memoizedState===null?EI:Vv),u}function ep(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Sf(u);if(u.$$typeof===w)return nn(u)}throw Error(n(438,String(u)))}function Fv(u){var d=null,m=vt.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var x=vt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=Jh(),vt.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(u),x=0;x<u;x++)m[x]=M;return d.index++,m}function as(u,d){return typeof d=="function"?d(u):d}function tp(u){var d=Er();return Bv(d,Gt,u)}function Bv(u,d,m){var x=u.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=m;var T=u.baseQueue,O=x.pending;if(O!==null){if(T!==null){var U=T.next;T.next=O.next,O.next=U}d.baseQueue=T=O,x.pending=null}if(O=u.baseState,T===null)u.memoizedState=O;else{d=T.next;var X=U=null,he=null,Ae=d,$e=!1;do{var ze=Ae.lane&-536870913;if(ze!==Ae.lane?(At&ze)===ze:(is&ze)===ze){var Oe=Ae.revertLane;if(Oe===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),ze===Du&&($e=!0);else if((is&Oe)===Oe){Ae=Ae.next,Oe===Du&&($e=!0);continue}else ze={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},he===null?(X=he=ze,U=O):he=he.next=ze,vt.lanes|=Oe,yo|=Oe;ze=Ae.action,vl&&m(O,ze),O=Ae.hasEagerState?Ae.eagerState:m(O,ze)}else Oe={lane:ze,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},he===null?(X=he=Oe,U=O):he=he.next=Oe,vt.lanes|=ze,yo|=ze;Ae=Ae.next}while(Ae!==null&&Ae!==d);if(he===null?U=O:he.next=X,!ai(O,u.memoizedState)&&(Ir=!0,$e&&(m=Ou,m!==null)))throw m;u.memoizedState=O,u.baseState=U,u.baseQueue=he,x.lastRenderedState=O}return T===null&&(x.lanes=0),[u.memoizedState,x.dispatch]}function Uv(u){var d=Er(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var x=m.dispatch,T=m.pending,O=d.memoizedState;if(T!==null){m.pending=null;var U=T=T.next;do O=u(O,U.action),U=U.next;while(U!==T);ai(O,d.memoizedState)||(Ir=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),m.lastRenderedState=O}return[O,x]}function HO(u,d,m){var x=vt,T=Er(),O=It;if(O){if(m===void 0)throw Error(n(407));m=m()}else m=d();var U=!ai((Gt||T).memoizedState,m);if(U&&(T.memoizedState=m,Ir=!0),T=T.queue,Gv(zO.bind(null,x,T,u),[u]),T.getSnapshot!==d||U||Or!==null&&Or.memoizedState.tag&1){if(x.flags|=2048,ku(9,{destroy:void 0},KO.bind(null,x,T,m,d),null),Wt===null)throw Error(n(349));O||(is&127)!==0||GO(x,d,m)}return m}function GO(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=vt.updateQueue,d===null?(d=Jh(),vt.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function KO(u,d,m,x){d.value=m,d.getSnapshot=x,YO(d)&&qO(u)}function zO(u,d,m){return m(function(){YO(d)&&qO(u)})}function YO(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!ai(u,m)}catch{return!0}}function qO(u){var d=ul(u,2);d!==null&&qn(d,u,2)}function $v(u){var d=An();if(typeof u=="function"){var m=u;if(u=m(),vl){tt(!0);try{m()}finally{tt(!1)}}}return d.memoizedState=d.baseState=u,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:u},d}function WO(u,d,m,x){return u.baseState=m,Bv(u,Gt,typeof x=="function"?x:as)}function uG(u,d,m,x,T){if(ip(u))throw Error(n(485));if(u=d.action,u!==null){var O={payload:T,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){O.listeners.push(U)}};K.T!==null?m(!0):O.isTransition=!1,x(O),m=d.pending,m===null?(O.next=d.pending=O,VO(d,O)):(O.next=m.next,d.pending=m.next=O)}}function VO(u,d){var m=d.action,x=d.payload,T=u.state;if(d.isTransition){var O=K.T,U={};K.T=U;try{var X=m(T,x),he=K.S;he!==null&&he(U,X),QO(u,d,X)}catch(Ae){Hv(u,d,Ae)}finally{O!==null&&U.types!==null&&(O.types=U.types),K.T=O}}else try{O=m(T,x),QO(u,d,O)}catch(Ae){Hv(u,d,Ae)}}function QO(u,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){XO(u,d,x)},function(x){return Hv(u,d,x)}):XO(u,d,m)}function XO(u,d,m){d.status="fulfilled",d.value=m,ZO(d),u.state=m,d=u.pending,d!==null&&(m=d.next,m===d?u.pending=null:(m=m.next,d.next=m,VO(u,m)))}function Hv(u,d,m){var x=u.pending;if(u.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=m,ZO(d),d=d.next;while(d!==x)}u.action=null}function ZO(u){u=u.listeners;for(var d=0;d<u.length;d++)(0,u[d])()}function JO(u,d){return d}function eI(u,d){if(It){var m=Wt.formState;if(m!==null){e:{var x=vt;if(It){if(er){t:{for(var T=er,O=ki;T.nodeType!==8;){if(!O){T=null;break t}if(T=Ni(T.nextSibling),T===null){T=null;break t}}O=T.data,T=O==="F!"||O==="F"?T:null}if(T){er=Ni(T.nextSibling),x=T.data==="F!";break e}}oo(x)}x=!1}x&&(d=m[0])}}return m=An(),m.memoizedState=m.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JO,lastRenderedState:d},m.queue=x,m=bI.bind(null,vt,x),x.dispatch=m,x=$v(!1),O=Wv.bind(null,vt,!1,x.queue),x=An(),T={state:d,dispatch:null,action:u,pending:null},x.queue=T,m=uG.bind(null,vt,T,O,m),T.dispatch=m,x.memoizedState=u,[d,m,!1]}function tI(u){var d=Er();return rI(d,Gt,u)}function rI(u,d,m){if(d=Bv(u,d,JO)[0],u=tp(as)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=Sf(d)}catch(U){throw U===Iu?zh:U}else x=d;d=Er();var T=d.queue,O=T.dispatch;return m!==d.memoizedState&&(vt.flags|=2048,ku(9,{destroy:void 0},cG.bind(null,T,m),null)),[x,O,u]}function cG(u,d){u.action=d}function nI(u){var d=Er(),m=Gt;if(m!==null)return rI(d,m,u);Er(),d=d.memoizedState,m=Er();var x=m.queue.dispatch;return m.memoizedState=u,[d,x,!1]}function ku(u,d,m,x){return u={tag:u,create:m,deps:x,inst:d,next:null},d=vt.updateQueue,d===null&&(d=Jh(),vt.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=u.next=u:(x=m.next,m.next=u,u.next=x,d.lastEffect=u),u}function iI(){return Er().memoizedState}function rp(u,d,m,x){var T=An();vt.flags|=u,T.memoizedState=ku(1|d,{destroy:void 0},m,x===void 0?null:x)}function np(u,d,m,x){var T=Er();x=x===void 0?null:x;var O=T.memoizedState.inst;Gt!==null&&x!==null&&Lv(x,Gt.memoizedState.deps)?T.memoizedState=ku(d,O,m,x):(vt.flags|=u,T.memoizedState=ku(1|d,O,m,x))}function aI(u,d){rp(8390656,8,u,d)}function Gv(u,d){np(2048,8,u,d)}function fG(u){vt.flags|=4;var d=vt.updateQueue;if(d===null)d=Jh(),vt.updateQueue=d,d.events=[u];else{var m=d.events;m===null?d.events=[u]:m.push(u)}}function sI(u){var d=Er().memoizedState;return fG({ref:d,nextImpl:u}),function(){if((kt&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}function oI(u,d){return np(4,2,u,d)}function lI(u,d){return np(4,4,u,d)}function uI(u,d){if(typeof d=="function"){u=u();var m=d(u);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function cI(u,d,m){m=m!=null?m.concat([u]):null,np(4,4,uI.bind(null,d,u),m)}function Kv(){}function fI(u,d){var m=Er();d=d===void 0?null:d;var x=m.memoizedState;return d!==null&&Lv(d,x[1])?x[0]:(m.memoizedState=[u,d],u)}function dI(u,d){var m=Er();d=d===void 0?null:d;var x=m.memoizedState;if(d!==null&&Lv(d,x[1]))return x[0];if(x=u(),vl){tt(!0);try{u()}finally{tt(!1)}}return m.memoizedState=[x,d],x}function zv(u,d,m){return m===void 0||(is&1073741824)!==0&&(At&261930)===0?u.memoizedState=d:(u.memoizedState=m,u=hC(),vt.lanes|=u,yo|=u,m)}function hI(u,d,m,x){return ai(m,d)?m:Ru.current!==null?(u=zv(u,m,x),ai(u,d)||(Ir=!0),u):(is&42)===0||(is&1073741824)!==0&&(At&261930)===0?(Ir=!0,u.memoizedState=m):(u=hC(),vt.lanes|=u,yo|=u,d)}function pI(u,d,m,x,T){var O=Y.p;Y.p=O!==0&&8>O?O:8;var U=K.T,X={};K.T=X,Wv(u,!1,d,m);try{var he=T(),Ae=K.S;if(Ae!==null&&Ae(X,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var $e=sG(he,x);Ef(u,d,$e,fi(u))}else Ef(u,d,x,fi(u))}catch(ze){Ef(u,d,{then:function(){},status:"rejected",reason:ze},fi())}finally{Y.p=O,U!==null&&X.types!==null&&(U.types=X.types),K.T=U}}function dG(){}function Yv(u,d,m,x){if(u.tag!==5)throw Error(n(476));var T=mI(u).queue;pI(u,T,d,W,m===null?dG:function(){return gI(u),m(x)})}function mI(u){var d=u.memoizedState;if(d!==null)return d;d={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:W},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:m},next:null},u.memoizedState=d,u=u.alternate,u!==null&&(u.memoizedState=d),d}function gI(u){var d=mI(u);d.next===null&&(d=u.alternate.memoizedState),Ef(u,d.next.queue,{},fi())}function qv(){return nn(Bf)}function yI(){return Er().memoizedState}function vI(){return Er().memoizedState}function hG(u){for(var d=u.return;d!==null;){switch(d.tag){case 24:case 3:var m=fi();u=co(m);var x=fo(d,u,m);x!==null&&(qn(x,d,m),yf(x,d,m)),d={cache:Ev()},u.payload=d;return}d=d.return}}function pG(u,d,m){var x=fi();m={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ip(u)?xI(d,m):(m=fv(u,d,m,x),m!==null&&(qn(m,u,x),SI(m,d,x)))}function bI(u,d,m){var x=fi();Ef(u,d,m,x)}function Ef(u,d,m,x){var T={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(ip(u))xI(d,T);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var U=d.lastRenderedState,X=O(U,m);if(T.hasEagerState=!0,T.eagerState=X,ai(X,U))return Fh(u,d,T,0),Wt===null&&jh(),!1}catch{}finally{}if(m=fv(u,d,T,x),m!==null)return qn(m,u,x),SI(m,d,x),!0}return!1}function Wv(u,d,m,x){if(x={lane:2,revertLane:Ab(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},ip(u)){if(d)throw Error(n(479))}else d=fv(u,m,x,2),d!==null&&qn(d,u,2)}function ip(u){var d=u.alternate;return u===vt||d!==null&&d===vt}function xI(u,d){Pu=Xh=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function SI(u,d,m){if((m&4194048)!==0){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,Ve(u,m)}}var wf={readContext:nn,use:ep,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useLayoutEffect:gr,useInsertionEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useSyncExternalStore:gr,useId:gr,useHostTransitionStatus:gr,useFormState:gr,useActionState:gr,useOptimistic:gr,useMemoCache:gr,useCacheRefresh:gr};wf.useEffectEvent=gr;var EI={readContext:nn,use:ep,useCallback:function(u,d){return An().memoizedState=[u,d===void 0?null:d],u},useContext:nn,useEffect:aI,useImperativeHandle:function(u,d,m){m=m!=null?m.concat([u]):null,rp(4194308,4,uI.bind(null,d,u),m)},useLayoutEffect:function(u,d){return rp(4194308,4,u,d)},useInsertionEffect:function(u,d){rp(4,2,u,d)},useMemo:function(u,d){var m=An();d=d===void 0?null:d;var x=u();if(vl){tt(!0);try{u()}finally{tt(!1)}}return m.memoizedState=[x,d],x},useReducer:function(u,d,m){var x=An();if(m!==void 0){var T=m(d);if(vl){tt(!0);try{m(d)}finally{tt(!1)}}}else T=d;return x.memoizedState=x.baseState=T,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:T},x.queue=u,u=u.dispatch=pG.bind(null,vt,u),[x.memoizedState,u]},useRef:function(u){var d=An();return u={current:u},d.memoizedState=u},useState:function(u){u=$v(u);var d=u.queue,m=bI.bind(null,vt,d);return d.dispatch=m,[u.memoizedState,m]},useDebugValue:Kv,useDeferredValue:function(u,d){var m=An();return zv(m,u,d)},useTransition:function(){var u=$v(!1);return u=pI.bind(null,vt,u.queue,!0,!1),An().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,d,m){var x=vt,T=An();if(It){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),Wt===null)throw Error(n(349));(At&127)!==0||GO(x,d,m)}T.memoizedState=m;var O={value:m,getSnapshot:d};return T.queue=O,aI(zO.bind(null,x,O,u),[u]),x.flags|=2048,ku(9,{destroy:void 0},KO.bind(null,x,O,m,d),null),m},useId:function(){var u=An(),d=Wt.identifierPrefix;if(It){var m=ga,x=ma;m=(x&~(1<<32-Ze(x)-1)).toString(32)+m,d="_"+d+"R_"+m,m=Zh++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=oG++,d="_"+d+"r_"+m.toString(32)+"_";return u.memoizedState=d},useHostTransitionStatus:qv,useFormState:eI,useActionState:eI,useOptimistic:function(u){var d=An();d.memoizedState=d.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=Wv.bind(null,vt,!0,m),m.dispatch=d,[u,d]},useMemoCache:Fv,useCacheRefresh:function(){return An().memoizedState=hG.bind(null,vt)},useEffectEvent:function(u){var d=An(),m={impl:u};return d.memoizedState=m,function(){if((kt&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}},Vv={readContext:nn,use:ep,useCallback:fI,useContext:nn,useEffect:Gv,useImperativeHandle:cI,useInsertionEffect:oI,useLayoutEffect:lI,useMemo:dI,useReducer:tp,useRef:iI,useState:function(){return tp(as)},useDebugValue:Kv,useDeferredValue:function(u,d){var m=Er();return hI(m,Gt.memoizedState,u,d)},useTransition:function(){var u=tp(as)[0],d=Er().memoizedState;return[typeof u=="boolean"?u:Sf(u),d]},useSyncExternalStore:HO,useId:yI,useHostTransitionStatus:qv,useFormState:tI,useActionState:tI,useOptimistic:function(u,d){var m=Er();return WO(m,Gt,u,d)},useMemoCache:Fv,useCacheRefresh:vI};Vv.useEffectEvent=sI;var wI={readContext:nn,use:ep,useCallback:fI,useContext:nn,useEffect:Gv,useImperativeHandle:cI,useInsertionEffect:oI,useLayoutEffect:lI,useMemo:dI,useReducer:Uv,useRef:iI,useState:function(){return Uv(as)},useDebugValue:Kv,useDeferredValue:function(u,d){var m=Er();return Gt===null?zv(m,u,d):hI(m,Gt.memoizedState,u,d)},useTransition:function(){var u=Uv(as)[0],d=Er().memoizedState;return[typeof u=="boolean"?u:Sf(u),d]},useSyncExternalStore:HO,useId:yI,useHostTransitionStatus:qv,useFormState:nI,useActionState:nI,useOptimistic:function(u,d){var m=Er();return Gt!==null?WO(m,Gt,u,d):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Fv,useCacheRefresh:vI};wI.useEffectEvent=sI;function Qv(u,d,m,x){d=u.memoizedState,m=m(x,d),m=m==null?d:h({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var Xv={enqueueSetState:function(u,d,m){u=u._reactInternals;var x=fi(),T=co(x);T.payload=d,m!=null&&(T.callback=m),d=fo(u,T,x),d!==null&&(qn(d,u,x),yf(d,u,x))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var x=fi(),T=co(x);T.tag=1,T.payload=d,m!=null&&(T.callback=m),d=fo(u,T,x),d!==null&&(qn(d,u,x),yf(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=fi(),x=co(m);x.tag=2,d!=null&&(x.callback=d),d=fo(u,x,m),d!==null&&(qn(d,u,m),yf(d,u,m))}};function _I(u,d,m,x,T,O,U){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(x,O,U):d.prototype&&d.prototype.isPureReactComponent?!uf(m,x)||!uf(T,O):!0}function TI(u,d,m,x){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,x),d.state!==u&&Xv.enqueueReplaceState(d,d.state,null)}function bl(u,d){var m=d;if("ref"in d){m={};for(var x in d)x!=="ref"&&(m[x]=d[x])}if(u=u.defaultProps){m===d&&(m=h({},m));for(var T in u)m[T]===void 0&&(m[T]=u[T])}return m}function AI(u){Nh(u)}function DI(u){console.error(u)}function OI(u){Nh(u)}function ap(u,d){try{var m=u.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function II(u,d,m){try{var x=u.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Zv(u,d,m){return m=co(m),m.tag=3,m.payload={element:null},m.callback=function(){ap(u,d)},m}function CI(u){return u=co(u),u.tag=3,u}function RI(u,d,m,x){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var O=x.value;u.payload=function(){return T(O)},u.callback=function(){II(d,m,x)}}var U=m.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(u.callback=function(){II(d,m,x),typeof T!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var X=x.stack;this.componentDidCatch(x.value,{componentStack:X!==null?X:""})})}function mG(u,d,m,x,T){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=m.alternate,d!==null&&Au(d,m,T,!0),m=oi.current,m!==null){switch(m.tag){case 31:case 13:return Mi===null?yp():m.alternate===null&&yr===0&&(yr=3),m.flags&=-257,m.flags|=65536,m.lanes=T,x===Yh?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([x]):d.add(x),wb(u,x,T)),!1;case 22:return m.flags|=65536,x===Yh?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([x]):m.add(x)),wb(u,x,T)),!1}throw Error(n(435,m.tag))}return wb(u,x,T),yp(),!1}if(It)return d=oi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,x!==yv&&(u=Error(n(422),{cause:x}),df(Ri(u,m)))):(x!==yv&&(d=Error(n(423),{cause:x}),df(Ri(d,m))),u=u.current.alternate,u.flags|=65536,T&=-T,u.lanes|=T,x=Ri(x,m),T=Zv(u.stateNode,x,T),Ov(u,T),yr!==4&&(yr=2)),!1;var O=Error(n(520),{cause:x});if(O=Ri(O,m),Rf===null?Rf=[O]:Rf.push(O),yr!==4&&(yr=2),d===null)return!0;x=Ri(x,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,u=T&-T,m.lanes|=u,u=Zv(m.stateNode,x,u),Ov(m,u),!1;case 1:if(d=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(vo===null||!vo.has(O))))return m.flags|=65536,T&=-T,m.lanes|=T,T=CI(T),RI(T,u,m,x),Ov(m,T),!1}m=m.return}while(m!==null);return!1}var Jv=Error(n(461)),Ir=!1;function an(u,d,m,x){d.child=u===null?MO(d,null,m,x):yl(d,u.child,m,x)}function PI(u,d,m,x,T){m=m.render;var O=d.ref;if("ref"in x){var U={};for(var X in x)X!=="ref"&&(U[X]=x[X])}else U=x;return hl(d),x=kv(u,d,m,U,O,T),X=Mv(),u!==null&&!Ir?(Nv(u,d,T),ss(u,d,T)):(It&&X&&mv(d),d.flags|=1,an(u,d,x,T),d.child)}function LI(u,d,m,x,T){if(u===null){var O=m.type;return typeof O=="function"&&!dv(O)&&O.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=O,kI(u,d,O,x,T)):(u=Uh(m.type,null,x,d,d.mode,T),u.ref=d.ref,u.return=d,d.child=u)}if(O=u.child,!ob(u,T)){var U=O.memoizedProps;if(m=m.compare,m=m!==null?m:uf,m(U,x)&&u.ref===d.ref)return ss(u,d,T)}return d.flags|=1,u=es(O,x),u.ref=d.ref,u.return=d,d.child=u}function kI(u,d,m,x,T){if(u!==null){var O=u.memoizedProps;if(uf(O,x)&&u.ref===d.ref)if(Ir=!1,d.pendingProps=x=O,ob(u,T))(u.flags&131072)!==0&&(Ir=!0);else return d.lanes=u.lanes,ss(u,d,T)}return eb(u,d,m,x,T)}function MI(u,d,m,x){var T=x.children,O=u!==null?u.memoizedState:null;if(u===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((d.flags&128)!==0){if(O=O!==null?O.baseLanes|m:m,u!==null){for(x=d.child=u.child,T=0;x!==null;)T=T|x.lanes|x.childLanes,x=x.sibling;x=T&~O}else x=0,d.child=null;return NI(u,d,O,m,x)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},u!==null&&Kh(d,O!==null?O.cachePool:null),O!==null?FO(d,O):Cv(),BO(d);else return x=d.lanes=536870912,NI(u,d,O!==null?O.baseLanes|m:m,m,x)}else O!==null?(Kh(d,O.cachePool),FO(d,O),po(),d.memoizedState=null):(u!==null&&Kh(d,null),Cv(),po());return an(u,d,T,m),d.child}function _f(u,d){return u!==null&&u.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function NI(u,d,m,x,T){var O=_v();return O=O===null?null:{parent:Dr._currentValue,pool:O},d.memoizedState={baseLanes:m,cachePool:O},u!==null&&Kh(d,null),Cv(),BO(d),u!==null&&Au(u,d,x,!0),d.childLanes=T,null}function sp(u,d){return d=lp({mode:d.mode,children:d.children},u.mode),d.ref=u.ref,u.child=d,d.return=u,d}function jI(u,d,m){return yl(d,u.child,null,m),u=sp(d,d.pendingProps),u.flags|=2,li(d),d.memoizedState=null,u}function gG(u,d,m){var x=d.pendingProps,T=(d.flags&128)!==0;if(d.flags&=-129,u===null){if(It){if(x.mode==="hidden")return u=sp(d,x),d.lanes=536870912,_f(null,u);if(Pv(d),(u=er)?(u=VC(u,ki),u=u!==null&&u.data==="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:ao!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},m=xO(u),m.return=d,d.child=m,rn=d,er=null)):u=null,u===null)throw oo(d);return d.lanes=536870912,null}return sp(d,x)}var O=u.memoizedState;if(O!==null){var U=O.dehydrated;if(Pv(d),T)if(d.flags&256)d.flags&=-257,d=jI(u,d,m);else if(d.memoizedState!==null)d.child=u.child,d.flags|=128,d=null;else throw Error(n(558));else if(Ir||Au(u,d,m,!1),T=(m&u.childLanes)!==0,Ir||T){if(x=Wt,x!==null&&(U=Je(x,m),U!==0&&U!==O.retryLane))throw O.retryLane=U,ul(u,U),qn(x,u,U),Jv;yp(),d=jI(u,d,m)}else u=O.treeContext,er=Ni(U.nextSibling),rn=d,It=!0,so=null,ki=!1,u!==null&&wO(d,u),d=sp(d,x),d.flags|=4096;return d}return u=es(u.child,{mode:x.mode,children:x.children}),u.ref=d.ref,d.child=u,u.return=d,u}function op(u,d){var m=d.ref;if(m===null)u!==null&&u.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(u===null||u.ref!==m)&&(d.flags|=4194816)}}function eb(u,d,m,x,T){return hl(d),m=kv(u,d,m,x,void 0,T),x=Mv(),u!==null&&!Ir?(Nv(u,d,T),ss(u,d,T)):(It&&x&&mv(d),d.flags|=1,an(u,d,m,T),d.child)}function FI(u,d,m,x,T,O){return hl(d),d.updateQueue=null,m=$O(d,x,m,T),UO(u),x=Mv(),u!==null&&!Ir?(Nv(u,d,O),ss(u,d,O)):(It&&x&&mv(d),d.flags|=1,an(u,d,m,O),d.child)}function BI(u,d,m,x,T){if(hl(d),d.stateNode===null){var O=Eu,U=m.contextType;typeof U=="object"&&U!==null&&(O=nn(U)),O=new m(x,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Xv,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=x,O.state=d.memoizedState,O.refs={},Av(d),U=m.contextType,O.context=typeof U=="object"&&U!==null?nn(U):Eu,O.state=d.memoizedState,U=m.getDerivedStateFromProps,typeof U=="function"&&(Qv(d,m,U,x),O.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(U=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),U!==O.state&&Xv.enqueueReplaceState(O,O.state,null),bf(d,x,O,T),vf(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(u===null){O=d.stateNode;var X=d.memoizedProps,he=bl(m,X);O.props=he;var Ae=O.context,$e=m.contextType;U=Eu,typeof $e=="object"&&$e!==null&&(U=nn($e));var ze=m.getDerivedStateFromProps;$e=typeof ze=="function"||typeof O.getSnapshotBeforeUpdate=="function",X=d.pendingProps!==X,$e||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X||Ae!==U)&&TI(d,O,x,U),uo=!1;var Oe=d.memoizedState;O.state=Oe,bf(d,x,O,T),vf(),Ae=d.memoizedState,X||Oe!==Ae||uo?(typeof ze=="function"&&(Qv(d,m,ze,x),Ae=d.memoizedState),(he=uo||_I(d,m,he,x,Oe,Ae,U))?($e||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=Ae),O.props=x,O.state=Ae,O.context=U,x=he):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{O=d.stateNode,Dv(u,d),U=d.memoizedProps,$e=bl(m,U),O.props=$e,ze=d.pendingProps,Oe=O.context,Ae=m.contextType,he=Eu,typeof Ae=="object"&&Ae!==null&&(he=nn(Ae)),X=m.getDerivedStateFromProps,(Ae=typeof X=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(U!==ze||Oe!==he)&&TI(d,O,x,he),uo=!1,Oe=d.memoizedState,O.state=Oe,bf(d,x,O,T),vf();var Le=d.memoizedState;U!==ze||Oe!==Le||uo||u!==null&&u.dependencies!==null&&Hh(u.dependencies)?(typeof X=="function"&&(Qv(d,m,X,x),Le=d.memoizedState),($e=uo||_I(d,m,$e,x,Oe,Le,he)||u!==null&&u.dependencies!==null&&Hh(u.dependencies))?(Ae||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,Le,he),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,Le,he)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||U===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=Le),O.props=x,O.state=Le,O.context=he,x=$e):(typeof O.componentDidUpdate!="function"||U===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=1024),x=!1)}return O=x,op(u,d),x=(d.flags&128)!==0,O||x?(O=d.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,u!==null&&x?(d.child=yl(d,u.child,null,T),d.child=yl(d,null,m,T)):an(u,d,m,T),d.memoizedState=O.state,u=d.child):u=ss(u,d,T),u}function UI(u,d,m,x){return fl(),d.flags|=256,an(u,d,m,x),d.child}var tb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rb(u){return{baseLanes:u,cachePool:IO()}}function nb(u,d,m){return u=u!==null?u.childLanes&~m:0,d&&(u|=ci),u}function $I(u,d,m){var x=d.pendingProps,T=!1,O=(d.flags&128)!==0,U;if((U=O)||(U=u!==null&&u.memoizedState===null?!1:(Sr.current&2)!==0),U&&(T=!0,d.flags&=-129),U=(d.flags&32)!==0,d.flags&=-33,u===null){if(It){if(T?ho(d):po(),(u=er)?(u=VC(u,ki),u=u!==null&&u.data!=="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:ao!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},m=xO(u),m.return=d,d.child=m,rn=d,er=null)):u=null,u===null)throw oo(d);return Bb(u)?d.lanes=32:d.lanes=536870912,null}var X=x.children;return x=x.fallback,T?(po(),T=d.mode,X=lp({mode:"hidden",children:X},T),x=cl(x,T,m,null),X.return=d,x.return=d,X.sibling=x,d.child=X,x=d.child,x.memoizedState=rb(m),x.childLanes=nb(u,U,m),d.memoizedState=tb,_f(null,x)):(ho(d),ib(d,X))}var he=u.memoizedState;if(he!==null&&(X=he.dehydrated,X!==null)){if(O)d.flags&256?(ho(d),d.flags&=-257,d=ab(u,d,m)):d.memoizedState!==null?(po(),d.child=u.child,d.flags|=128,d=null):(po(),X=x.fallback,T=d.mode,x=lp({mode:"visible",children:x.children},T),X=cl(X,T,m,null),X.flags|=2,x.return=d,X.return=d,x.sibling=X,d.child=x,yl(d,u.child,null,m),x=d.child,x.memoizedState=rb(m),x.childLanes=nb(u,U,m),d.memoizedState=tb,d=_f(null,x));else if(ho(d),Bb(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var Ae=U.dgst;U=Ae,x=Error(n(419)),x.stack="",x.digest=U,df({value:x,source:null,stack:null}),d=ab(u,d,m)}else if(Ir||Au(u,d,m,!1),U=(m&u.childLanes)!==0,Ir||U){if(U=Wt,U!==null&&(x=Je(U,m),x!==0&&x!==he.retryLane))throw he.retryLane=x,ul(u,x),qn(U,u,x),Jv;Fb(X)||yp(),d=ab(u,d,m)}else Fb(X)?(d.flags|=192,d.child=u.child,d=null):(u=he.treeContext,er=Ni(X.nextSibling),rn=d,It=!0,so=null,ki=!1,u!==null&&wO(d,u),d=ib(d,x.children),d.flags|=4096);return d}return T?(po(),X=x.fallback,T=d.mode,he=u.child,Ae=he.sibling,x=es(he,{mode:"hidden",children:x.children}),x.subtreeFlags=he.subtreeFlags&65011712,Ae!==null?X=es(Ae,X):(X=cl(X,T,m,null),X.flags|=2),X.return=d,x.return=d,x.sibling=X,d.child=x,_f(null,x),x=d.child,X=u.child.memoizedState,X===null?X=rb(m):(T=X.cachePool,T!==null?(he=Dr._currentValue,T=T.parent!==he?{parent:he,pool:he}:T):T=IO(),X={baseLanes:X.baseLanes|m,cachePool:T}),x.memoizedState=X,x.childLanes=nb(u,U,m),d.memoizedState=tb,_f(u.child,x)):(ho(d),m=u.child,u=m.sibling,m=es(m,{mode:"visible",children:x.children}),m.return=d,m.sibling=null,u!==null&&(U=d.deletions,U===null?(d.deletions=[u],d.flags|=16):U.push(u)),d.child=m,d.memoizedState=null,m)}function ib(u,d){return d=lp({mode:"visible",children:d},u.mode),d.return=u,u.child=d}function lp(u,d){return u=si(22,u,null,d),u.lanes=0,u}function ab(u,d,m){return yl(d,u.child,null,m),u=ib(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function HI(u,d,m){u.lanes|=d;var x=u.alternate;x!==null&&(x.lanes|=d),xv(u.return,d,m)}function sb(u,d,m,x,T,O){var U=u.memoizedState;U===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:T,treeForkCount:O}:(U.isBackwards=d,U.rendering=null,U.renderingStartTime=0,U.last=x,U.tail=m,U.tailMode=T,U.treeForkCount=O)}function GI(u,d,m){var x=d.pendingProps,T=x.revealOrder,O=x.tail;x=x.children;var U=Sr.current,X=(U&2)!==0;if(X?(U=U&1|2,d.flags|=128):U&=1,Z(Sr,U),an(u,d,x,m),x=It?ff:0,!X&&u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&HI(u,m,d);else if(u.tag===19)HI(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(T){case"forwards":for(m=d.child,T=null;m!==null;)u=m.alternate,u!==null&&Qh(u)===null&&(T=m),m=m.sibling;m=T,m===null?(T=d.child,d.child=null):(T=m.sibling,m.sibling=null),sb(d,!1,T,m,O,x);break;case"backwards":case"unstable_legacy-backwards":for(m=null,T=d.child,d.child=null;T!==null;){if(u=T.alternate,u!==null&&Qh(u)===null){d.child=T;break}u=T.sibling,T.sibling=m,m=T,T=u}sb(d,!0,m,null,O,x);break;case"together":sb(d,!1,null,null,void 0,x);break;default:d.memoizedState=null}return d.child}function ss(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),yo|=d.lanes,(m&d.childLanes)===0)if(u!==null){if(Au(u,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,m=es(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=es(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function ob(u,d){return(u.lanes&d)!==0?!0:(u=u.dependencies,!!(u!==null&&Hh(u)))}function yG(u,d,m){switch(d.tag){case 3:ne(d,d.stateNode.containerInfo),lo(d,Dr,u.memoizedState.cache),fl();break;case 27:case 5:ue(d);break;case 4:ne(d,d.stateNode.containerInfo);break;case 10:lo(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Pv(d),null;break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?(ho(d),d.flags|=128,null):(m&d.child.childLanes)!==0?$I(u,d,m):(ho(d),u=ss(u,d,m),u!==null?u.sibling:null);ho(d);break;case 19:var T=(u.flags&128)!==0;if(x=(m&d.childLanes)!==0,x||(Au(u,d,m,!1),x=(m&d.childLanes)!==0),T){if(x)return GI(u,d,m);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Z(Sr,Sr.current),x)break;return null;case 22:return d.lanes=0,MI(u,d,m,d.pendingProps);case 24:lo(d,Dr,u.memoizedState.cache)}return ss(u,d,m)}function KI(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps)Ir=!0;else{if(!ob(u,m)&&(d.flags&128)===0)return Ir=!1,yG(u,d,m);Ir=(u.flags&131072)!==0}else Ir=!1,It&&(d.flags&1048576)!==0&&EO(d,ff,d.index);switch(d.lanes=0,d.tag){case 16:e:{var x=d.pendingProps;if(u=ml(d.elementType),d.type=u,typeof u=="function")dv(u)?(x=bl(u,x),d.tag=1,d=BI(null,d,u,x,m)):(d.tag=0,d=eb(null,d,u,x,m));else{if(u!=null){var T=u.$$typeof;if(T===A){d.tag=11,d=PI(null,d,u,x,m);break e}else if(T===D){d.tag=14,d=LI(null,d,u,x,m);break e}}throw d=z(u)||u,Error(n(306,d,""))}}return d;case 0:return eb(u,d,d.type,d.pendingProps,m);case 1:return x=d.type,T=bl(x,d.pendingProps),BI(u,d,x,T,m);case 3:e:{if(ne(d,d.stateNode.containerInfo),u===null)throw Error(n(387));x=d.pendingProps;var O=d.memoizedState;T=O.element,Dv(u,d),bf(d,x,null,m);var U=d.memoizedState;if(x=U.cache,lo(d,Dr,x),x!==O.cache&&Sv(d,[Dr],m,!0),vf(),x=U.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:U.cache},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){d=UI(u,d,x,m);break e}else if(x!==T){T=Ri(Error(n(424)),d),df(T),d=UI(u,d,x,m);break e}else{switch(u=d.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(er=Ni(u.firstChild),rn=d,It=!0,so=null,ki=!0,m=MO(d,null,x,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(fl(),x===T){d=ss(u,d,m);break e}an(u,d,x,m)}d=d.child}return d;case 26:return op(u,d),u===null?(m=tR(d.type,null,d.pendingProps,null))?d.memoizedState=m:It||(m=d.type,u=d.pendingProps,x=_p(ve.current).createElement(m),x[cr]=d,x[Nr]=u,sn(x,m,u),zr(x),d.stateNode=x):d.memoizedState=tR(d.type,u.memoizedProps,d.pendingProps,u.memoizedState),null;case 27:return ue(d),u===null&&It&&(x=d.stateNode=ZC(d.type,d.pendingProps,ve.current),rn=d,ki=!0,T=er,Eo(d.type)?(Ub=T,er=Ni(x.firstChild)):er=T),an(u,d,d.pendingProps.children,m),op(u,d),u===null&&(d.flags|=4194304),d.child;case 5:return u===null&&It&&((T=x=er)&&(x=qG(x,d.type,d.pendingProps,ki),x!==null?(d.stateNode=x,rn=d,er=Ni(x.firstChild),ki=!1,T=!0):T=!1),T||oo(d)),ue(d),T=d.type,O=d.pendingProps,U=u!==null?u.memoizedProps:null,x=O.children,Mb(T,O)?x=null:U!==null&&Mb(T,U)&&(d.flags|=32),d.memoizedState!==null&&(T=kv(u,d,lG,null,null,m),Bf._currentValue=T),op(u,d),an(u,d,x,m),d.child;case 6:return u===null&&It&&((u=m=er)&&(m=WG(m,d.pendingProps,ki),m!==null?(d.stateNode=m,rn=d,er=null,u=!0):u=!1),u||oo(d)),null;case 13:return $I(u,d,m);case 4:return ne(d,d.stateNode.containerInfo),x=d.pendingProps,u===null?d.child=yl(d,null,x,m):an(u,d,x,m),d.child;case 11:return PI(u,d,d.type,d.pendingProps,m);case 7:return an(u,d,d.pendingProps,m),d.child;case 8:return an(u,d,d.pendingProps.children,m),d.child;case 12:return an(u,d,d.pendingProps.children,m),d.child;case 10:return x=d.pendingProps,lo(d,d.type,x.value),an(u,d,x.children,m),d.child;case 9:return T=d.type._context,x=d.pendingProps.children,hl(d),T=nn(T),x=x(T),d.flags|=1,an(u,d,x,m),d.child;case 14:return LI(u,d,d.type,d.pendingProps,m);case 15:return kI(u,d,d.type,d.pendingProps,m);case 19:return GI(u,d,m);case 31:return gG(u,d,m);case 22:return MI(u,d,m,d.pendingProps);case 24:return hl(d),x=nn(Dr),u===null?(T=_v(),T===null&&(T=Wt,O=Ev(),T.pooledCache=O,O.refCount++,O!==null&&(T.pooledCacheLanes|=m),T=O),d.memoizedState={parent:x,cache:T},Av(d),lo(d,Dr,T)):((u.lanes&m)!==0&&(Dv(u,d),bf(d,null,null,m),vf()),T=u.memoizedState,O=d.memoizedState,T.parent!==x?(T={parent:x,cache:x},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),lo(d,Dr,x)):(x=O.cache,lo(d,Dr,x),x!==T.cache&&Sv(d,[Dr],m,!0))),an(u,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function os(u){u.flags|=4}function lb(u,d,m,x,T){if((d=(u.mode&32)!==0)&&(d=!1),d){if(u.flags|=16777216,(T&335544128)===T)if(u.stateNode.complete)u.flags|=8192;else if(yC())u.flags|=8192;else throw gl=Yh,Tv}else u.flags&=-16777217}function zI(u,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!sR(d))if(yC())u.flags|=8192;else throw gl=Yh,Tv}function up(u,d){d!==null&&(u.flags|=4),u.flags&16384&&(d=u.tag!==22?Wa():536870912,u.lanes|=d,Fu|=d)}function Tf(u,d){if(!It)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:x.sibling=null}}function tr(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,x=0;if(d)for(var T=u.child;T!==null;)m|=T.lanes|T.childLanes,x|=T.subtreeFlags&65011712,x|=T.flags&65011712,T.return=u,T=T.sibling;else for(T=u.child;T!==null;)m|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=u,T=T.sibling;return u.subtreeFlags|=x,u.childLanes=m,d}function vG(u,d,m){var x=d.pendingProps;switch(gv(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(d),null;case 1:return tr(d),null;case 3:return m=d.stateNode,x=null,u!==null&&(x=u.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),ns(Dr),re(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Tu(d)?os(d):u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,vv())),tr(d),null;case 26:var T=d.type,O=d.memoizedState;return u===null?(os(d),O!==null?(tr(d),zI(d,O)):(tr(d),lb(d,T,null,x,m))):O?O!==u.memoizedState?(os(d),tr(d),zI(d,O)):(tr(d),d.flags&=-16777217):(u=u.memoizedProps,u!==x&&os(d),tr(d),lb(d,T,u,x,m)),null;case 27:if(fe(d),m=ve.current,T=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return tr(d),null}u=ae.current,Tu(d)?_O(d):(u=ZC(T,x,m),d.stateNode=u,os(d))}return tr(d),null;case 5:if(fe(d),T=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return tr(d),null}if(O=ae.current,Tu(d))_O(d);else{var U=_p(ve.current);switch(O){case 1:O=U.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:O=U.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":O=U.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":O=U.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":O=U.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?U.createElement("select",{is:x.is}):U.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?U.createElement(T,{is:x.is}):U.createElement(T)}}O[cr]=d,O[Nr]=x;e:for(U=d.child;U!==null;){if(U.tag===5||U.tag===6)O.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===d)break e;for(;U.sibling===null;){if(U.return===null||U.return===d)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}d.stateNode=O;e:switch(sn(O,T,x),T){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&os(d)}}return tr(d),lb(d,d.type,u===null?null:u.memoizedProps,d.pendingProps,m),null;case 6:if(u&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(u=ve.current,Tu(d)){if(u=d.stateNode,m=d.memoizedProps,x=null,T=rn,T!==null)switch(T.tag){case 27:case 5:x=T.memoizedProps}u[cr]=d,u=!!(u.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||$C(u.nodeValue,m)),u||oo(d,!0)}else u=_p(u).createTextNode(x),u[cr]=d,d.stateNode=u}return tr(d),null;case 31:if(m=d.memoizedState,u===null||u.memoizedState!==null){if(x=Tu(d),m!==null){if(u===null){if(!x)throw Error(n(318));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[cr]=d}else fl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;tr(d),u=!1}else m=vv(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=m),u=!0;if(!u)return d.flags&256?(li(d),d):(li(d),null);if((d.flags&128)!==0)throw Error(n(558))}return tr(d),null;case 13:if(x=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(T=Tu(d),x!==null&&x.dehydrated!==null){if(u===null){if(!T)throw Error(n(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[cr]=d}else fl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;tr(d),T=!1}else T=vv(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(li(d),d):(li(d),null)}return li(d),(d.flags&128)!==0?(d.lanes=m,d):(m=x!==null,u=u!==null&&u.memoizedState!==null,m&&(x=d.child,T=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(T=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==T&&(x.flags|=2048)),m!==u&&m&&(d.child.flags|=8192),up(d,d.updateQueue),tr(d),null);case 4:return re(),u===null&&Cb(d.stateNode.containerInfo),tr(d),null;case 10:return ns(d.type),tr(d),null;case 19:if(F(Sr),x=d.memoizedState,x===null)return tr(d),null;if(T=(d.flags&128)!==0,O=x.rendering,O===null)if(T)Tf(x,!1);else{if(yr!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(O=Qh(u),O!==null){for(d.flags|=128,Tf(x,!1),u=O.updateQueue,d.updateQueue=u,up(d,u),d.subtreeFlags=0,u=m,m=d.child;m!==null;)bO(m,u),m=m.sibling;return Z(Sr,Sr.current&1|2),It&&ts(d,x.treeForkCount),d.child}u=u.sibling}x.tail!==null&&De()>pp&&(d.flags|=128,T=!0,Tf(x,!1),d.lanes=4194304)}else{if(!T)if(u=Qh(O),u!==null){if(d.flags|=128,T=!0,u=u.updateQueue,d.updateQueue=u,up(d,u),Tf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!It)return tr(d),null}else 2*De()-x.renderingStartTime>pp&&m!==536870912&&(d.flags|=128,T=!0,Tf(x,!1),d.lanes=4194304);x.isBackwards?(O.sibling=d.child,d.child=O):(u=x.last,u!==null?u.sibling=O:d.child=O,x.last=O)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=De(),u.sibling=null,m=Sr.current,Z(Sr,T?m&1|2:m&1),It&&ts(d,x.treeForkCount),u):(tr(d),null);case 22:case 23:return li(d),Rv(),x=d.memoizedState!==null,u!==null?u.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(m&536870912)!==0&&(d.flags&128)===0&&(tr(d),d.subtreeFlags&6&&(d.flags|=8192)):tr(d),m=d.updateQueue,m!==null&&up(d,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048),u!==null&&F(pl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),ns(Dr),tr(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function bG(u,d){switch(gv(d),d.tag){case 1:return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return ns(Dr),re(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 26:case 27:case 5:return fe(d),null;case 31:if(d.memoizedState!==null){if(li(d),d.alternate===null)throw Error(n(340));fl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 13:if(li(d),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));fl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return F(Sr),null;case 4:return re(),null;case 10:return ns(d.type),null;case 22:case 23:return li(d),Rv(),u!==null&&F(pl),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 24:return ns(Dr),null;case 25:return null;default:return null}}function YI(u,d){switch(gv(d),d.tag){case 3:ns(Dr),re();break;case 26:case 27:case 5:fe(d);break;case 4:re();break;case 31:d.memoizedState!==null&&li(d);break;case 13:li(d);break;case 19:F(Sr);break;case 10:ns(d.type);break;case 22:case 23:li(d),Rv(),u!==null&&F(pl);break;case 24:ns(Dr)}}function Af(u,d){try{var m=d.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var T=x.next;m=T;do{if((m.tag&u)===u){x=void 0;var O=m.create,U=m.inst;x=O(),U.destroy=x}m=m.next}while(m!==T)}}catch(X){jt(d,d.return,X)}}function mo(u,d,m){try{var x=d.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var O=T.next;x=O;do{if((x.tag&u)===u){var U=x.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,T=d;var he=m,Ae=X;try{Ae()}catch($e){jt(T,he,$e)}}}x=x.next}while(x!==O)}}catch($e){jt(d,d.return,$e)}}function qI(u){var d=u.updateQueue;if(d!==null){var m=u.stateNode;try{jO(d,m)}catch(x){jt(u,u.return,x)}}}function WI(u,d,m){m.props=bl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(x){jt(u,d,x)}}function Df(u,d){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var x=u.stateNode;break;case 30:x=u.stateNode;break;default:x=u.stateNode}typeof m=="function"?u.refCleanup=m(x):m.current=x}}catch(T){jt(u,d,T)}}function ya(u,d){var m=u.ref,x=u.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(T){jt(u,d,T)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){jt(u,d,T)}else m.current=null}function VI(u){var d=u.type,m=u.memoizedProps,x=u.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(T){jt(u,u.return,T)}}function ub(u,d,m){try{var x=u.stateNode;$G(x,u.type,m,d),x[Nr]=d}catch(T){jt(u,u.return,T)}}function QI(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Eo(u.type)||u.tag===4}function cb(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||QI(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Eo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function fb(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(u),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Za));else if(x!==4&&(x===27&&Eo(u.type)&&(m=u.stateNode,d=null),u=u.child,u!==null))for(fb(u,d,m),u=u.sibling;u!==null;)fb(u,d,m),u=u.sibling}function cp(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?m.insertBefore(u,d):m.appendChild(u);else if(x!==4&&(x===27&&Eo(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(cp(u,d,m),u=u.sibling;u!==null;)cp(u,d,m),u=u.sibling}function XI(u){var d=u.stateNode,m=u.memoizedProps;try{for(var x=u.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);sn(d,x,m),d[cr]=u,d[Nr]=m}catch(O){jt(u,u.return,O)}}var ls=!1,Cr=!1,db=!1,ZI=typeof WeakSet=="function"?WeakSet:Set,Yr=null;function xG(u,d){if(u=u.containerInfo,Lb=Rp,u=cO(u),av(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var T=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{m.nodeType,O.nodeType}catch{m=null;break e}var U=0,X=-1,he=-1,Ae=0,$e=0,ze=u,Oe=null;t:for(;;){for(var Le;ze!==m||T!==0&&ze.nodeType!==3||(X=U+T),ze!==O||x!==0&&ze.nodeType!==3||(he=U+x),ze.nodeType===3&&(U+=ze.nodeValue.length),(Le=ze.firstChild)!==null;)Oe=ze,ze=Le;for(;;){if(ze===u)break t;if(Oe===m&&++Ae===T&&(X=U),Oe===O&&++$e===x&&(he=U),(Le=ze.nextSibling)!==null)break;ze=Oe,Oe=ze.parentNode}ze=Le}m=X===-1||he===-1?null:{start:X,end:he}}else m=null}m=m||{start:0,end:0}}else m=null;for(kb={focusedElem:u,selectionRange:m},Rp=!1,Yr=d;Yr!==null;)if(d=Yr,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Yr=u;else for(;Yr!==null;){switch(d=Yr,O=d.alternate,u=d.flags,d.tag){case 0:if((u&4)!==0&&(u=d.updateQueue,u=u!==null?u.events:null,u!==null))for(m=0;m<u.length;m++)T=u[m],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&O!==null){u=void 0,m=d,T=O.memoizedProps,O=O.memoizedState,x=m.stateNode;try{var nt=bl(m.type,T);u=x.getSnapshotBeforeUpdate(nt,O),x.__reactInternalSnapshotBeforeUpdate=u}catch(ct){jt(m,m.return,ct)}}break;case 3:if((u&1024)!==0){if(u=d.stateNode.containerInfo,m=u.nodeType,m===9)jb(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":jb(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=d.sibling,u!==null){u.return=d.return,Yr=u;break}Yr=d.return}}function JI(u,d,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:cs(u,m),x&4&&Af(5,m);break;case 1:if(cs(u,m),x&4)if(u=m.stateNode,d===null)try{u.componentDidMount()}catch(U){jt(m,m.return,U)}else{var T=bl(m.type,d.memoizedProps);d=d.memoizedState;try{u.componentDidUpdate(T,d,u.__reactInternalSnapshotBeforeUpdate)}catch(U){jt(m,m.return,U)}}x&64&&qI(m),x&512&&Df(m,m.return);break;case 3:if(cs(u,m),x&64&&(u=m.updateQueue,u!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{jO(u,d)}catch(U){jt(m,m.return,U)}}break;case 27:d===null&&x&4&&XI(m);case 26:case 5:cs(u,m),d===null&&x&4&&VI(m),x&512&&Df(m,m.return);break;case 12:cs(u,m);break;case 31:cs(u,m),x&4&&rC(u,m);break;case 13:cs(u,m),x&4&&nC(u,m),x&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=IG.bind(null,m),VG(u,m))));break;case 22:if(x=m.memoizedState!==null||ls,!x){d=d!==null&&d.memoizedState!==null||Cr,T=ls;var O=Cr;ls=x,(Cr=d)&&!O?fs(u,m,(m.subtreeFlags&8772)!==0):cs(u,m),ls=T,Cr=O}break;case 30:break;default:cs(u,m)}}function eC(u){var d=u.alternate;d!==null&&(u.alternate=null,eC(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Hy(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var ar=null,Gn=!1;function us(u,d,m){for(m=m.child;m!==null;)tC(u,d,m),m=m.sibling}function tC(u,d,m){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(ge,m)}catch{}switch(m.tag){case 26:Cr||ya(m,d),us(u,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Cr||ya(m,d);var x=ar,T=Gn;Eo(m.type)&&(ar=m.stateNode,Gn=!1),us(u,d,m),Nf(m.stateNode),ar=x,Gn=T;break;case 5:Cr||ya(m,d);case 6:if(x=ar,T=Gn,ar=null,us(u,d,m),ar=x,Gn=T,ar!==null)if(Gn)try{(ar.nodeType===9?ar.body:ar.nodeName==="HTML"?ar.ownerDocument.body:ar).removeChild(m.stateNode)}catch(O){jt(m,d,O)}else try{ar.removeChild(m.stateNode)}catch(O){jt(m,d,O)}break;case 18:ar!==null&&(Gn?(u=ar,qC(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Yu(u)):qC(ar,m.stateNode));break;case 4:x=ar,T=Gn,ar=m.stateNode.containerInfo,Gn=!0,us(u,d,m),ar=x,Gn=T;break;case 0:case 11:case 14:case 15:mo(2,m,d),Cr||mo(4,m,d),us(u,d,m);break;case 1:Cr||(ya(m,d),x=m.stateNode,typeof x.componentWillUnmount=="function"&&WI(m,d,x)),us(u,d,m);break;case 21:us(u,d,m);break;case 22:Cr=(x=Cr)||m.memoizedState!==null,us(u,d,m),Cr=x;break;default:us(u,d,m)}}function rC(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Yu(u)}catch(m){jt(d,d.return,m)}}}function nC(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Yu(u)}catch(m){jt(d,d.return,m)}}function SG(u){switch(u.tag){case 31:case 13:case 19:var d=u.stateNode;return d===null&&(d=u.stateNode=new ZI),d;case 22:return u=u.stateNode,d=u._retryCache,d===null&&(d=u._retryCache=new ZI),d;default:throw Error(n(435,u.tag))}}function fp(u,d){var m=SG(u);d.forEach(function(x){if(!m.has(x)){m.add(x);var T=CG.bind(null,u,x);x.then(T,T)}})}function Kn(u,d){var m=d.deletions;if(m!==null)for(var x=0;x<m.length;x++){var T=m[x],O=u,U=d,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(Eo(X.type)){ar=X.stateNode,Gn=!1;break e}break;case 5:ar=X.stateNode,Gn=!1;break e;case 3:case 4:ar=X.stateNode.containerInfo,Gn=!0;break e}X=X.return}if(ar===null)throw Error(n(160));tC(O,U,T),ar=null,Gn=!1,O=T.alternate,O!==null&&(O.return=null),T.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)iC(d,u),d=d.sibling}var Ji=null;function iC(u,d){var m=u.alternate,x=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Kn(d,u),zn(u),x&4&&(mo(3,u,u.return),Af(3,u),mo(5,u,u.return));break;case 1:Kn(d,u),zn(u),x&512&&(Cr||m===null||ya(m,m.return)),x&64&&ls&&(u=u.updateQueue,u!==null&&(x=u.callbacks,x!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var T=Ji;if(Kn(d,u),zn(u),x&512&&(Cr||m===null||ya(m,m.return)),x&4){var O=m!==null?m.memoizedState:null;if(x=u.memoizedState,m===null)if(x===null)if(u.stateNode===null){e:{x=u.type,m=u.memoizedProps,T=T.ownerDocument||T;t:switch(x){case"title":O=T.getElementsByTagName("title")[0],(!O||O[Tn]||O[cr]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=T.createElement(x),T.head.insertBefore(O,T.querySelector("head > title"))),sn(O,x,m),O[cr]=u,zr(O),x=O;break e;case"link":var U=iR("link","href",T).get(x+(m.href||""));if(U){for(var X=0;X<U.length;X++)if(O=U[X],O.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&O.getAttribute("rel")===(m.rel==null?null:m.rel)&&O.getAttribute("title")===(m.title==null?null:m.title)&&O.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){U.splice(X,1);break t}}O=T.createElement(x),sn(O,x,m),T.head.appendChild(O);break;case"meta":if(U=iR("meta","content",T).get(x+(m.content||""))){for(X=0;X<U.length;X++)if(O=U[X],O.getAttribute("content")===(m.content==null?null:""+m.content)&&O.getAttribute("name")===(m.name==null?null:m.name)&&O.getAttribute("property")===(m.property==null?null:m.property)&&O.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&O.getAttribute("charset")===(m.charSet==null?null:m.charSet)){U.splice(X,1);break t}}O=T.createElement(x),sn(O,x,m),T.head.appendChild(O);break;default:throw Error(n(468,x))}O[cr]=u,zr(O),x=O}u.stateNode=x}else aR(T,u.type,u.stateNode);else u.stateNode=nR(T,x,u.memoizedProps);else O!==x?(O===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):O.count--,x===null?aR(T,u.type,u.stateNode):nR(T,x,u.memoizedProps)):x===null&&u.stateNode!==null&&ub(u,u.memoizedProps,m.memoizedProps)}break;case 27:Kn(d,u),zn(u),x&512&&(Cr||m===null||ya(m,m.return)),m!==null&&x&4&&ub(u,u.memoizedProps,m.memoizedProps);break;case 5:if(Kn(d,u),zn(u),x&512&&(Cr||m===null||ya(m,m.return)),u.flags&32){T=u.stateNode;try{mu(T,"")}catch(nt){jt(u,u.return,nt)}}x&4&&u.stateNode!=null&&(T=u.memoizedProps,ub(u,T,m!==null?m.memoizedProps:T)),x&1024&&(db=!0);break;case 6:if(Kn(d,u),zn(u),x&4){if(u.stateNode===null)throw Error(n(162));x=u.memoizedProps,m=u.stateNode;try{m.nodeValue=x}catch(nt){jt(u,u.return,nt)}}break;case 3:if(Dp=null,T=Ji,Ji=Tp(d.containerInfo),Kn(d,u),Ji=T,zn(u),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Yu(d.containerInfo)}catch(nt){jt(u,u.return,nt)}db&&(db=!1,aC(u));break;case 4:x=Ji,Ji=Tp(u.stateNode.containerInfo),Kn(d,u),zn(u),Ji=x;break;case 12:Kn(d,u),zn(u);break;case 31:Kn(d,u),zn(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,fp(u,x)));break;case 13:Kn(d,u),zn(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(hp=De()),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,fp(u,x)));break;case 22:T=u.memoizedState!==null;var he=m!==null&&m.memoizedState!==null,Ae=ls,$e=Cr;if(ls=Ae||T,Cr=$e||he,Kn(d,u),Cr=$e,ls=Ae,zn(u),x&8192)e:for(d=u.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(m===null||he||ls||Cr||xl(u)),m=null,d=u;;){if(d.tag===5||d.tag===26){if(m===null){he=m=d;try{if(O=he.stateNode,T)U=O.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=he.stateNode;var ze=he.memoizedProps.style,Oe=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;X.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(nt){jt(he,he.return,nt)}}}else if(d.tag===6){if(m===null){he=d;try{he.stateNode.nodeValue=T?"":he.memoizedProps}catch(nt){jt(he,he.return,nt)}}}else if(d.tag===18){if(m===null){he=d;try{var Le=he.stateNode;T?WC(Le,!0):WC(he.stateNode,!1)}catch(nt){jt(he,he.return,nt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=u.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,fp(u,m))));break;case 19:Kn(d,u),zn(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,fp(u,x)));break;case 30:break;case 21:break;default:Kn(d,u),zn(u)}}function zn(u){var d=u.flags;if(d&2){try{for(var m,x=u.return;x!==null;){if(QI(x)){m=x;break}x=x.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var T=m.stateNode,O=cb(u);cp(u,O,T);break;case 5:var U=m.stateNode;m.flags&32&&(mu(U,""),m.flags&=-33);var X=cb(u);cp(u,X,U);break;case 3:case 4:var he=m.stateNode.containerInfo,Ae=cb(u);fb(u,Ae,he);break;default:throw Error(n(161))}}catch($e){jt(u,u.return,$e)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function aC(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var d=u;aC(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),u=u.sibling}}function cs(u,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)JI(u,d.alternate,d),d=d.sibling}function xl(u){for(u=u.child;u!==null;){var d=u;switch(d.tag){case 0:case 11:case 14:case 15:mo(4,d,d.return),xl(d);break;case 1:ya(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&WI(d,d.return,m),xl(d);break;case 27:Nf(d.stateNode);case 26:case 5:ya(d,d.return),xl(d);break;case 22:d.memoizedState===null&&xl(d);break;case 30:xl(d);break;default:xl(d)}u=u.sibling}}function fs(u,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,T=u,O=d,U=O.flags;switch(O.tag){case 0:case 11:case 15:fs(T,O,m),Af(4,O);break;case 1:if(fs(T,O,m),x=O,T=x.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ae){jt(x,x.return,Ae)}if(x=O,T=x.updateQueue,T!==null){var X=x.stateNode;try{var he=T.shared.hiddenCallbacks;if(he!==null)for(T.shared.hiddenCallbacks=null,T=0;T<he.length;T++)NO(he[T],X)}catch(Ae){jt(x,x.return,Ae)}}m&&U&64&&qI(O),Df(O,O.return);break;case 27:XI(O);case 26:case 5:fs(T,O,m),m&&x===null&&U&4&&VI(O),Df(O,O.return);break;case 12:fs(T,O,m);break;case 31:fs(T,O,m),m&&U&4&&rC(T,O);break;case 13:fs(T,O,m),m&&U&4&&nC(T,O);break;case 22:O.memoizedState===null&&fs(T,O,m),Df(O,O.return);break;case 30:break;default:fs(T,O,m)}d=d.sibling}}function hb(u,d){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(u=d.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&hf(m))}function pb(u,d){u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&hf(u))}function ea(u,d,m,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)sC(u,d,m,x),d=d.sibling}function sC(u,d,m,x){var T=d.flags;switch(d.tag){case 0:case 11:case 15:ea(u,d,m,x),T&2048&&Af(9,d);break;case 1:ea(u,d,m,x);break;case 3:ea(u,d,m,x),T&2048&&(u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&hf(u)));break;case 12:if(T&2048){ea(u,d,m,x),u=d.stateNode;try{var O=d.memoizedProps,U=O.id,X=O.onPostCommit;typeof X=="function"&&X(U,d.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(he){jt(d,d.return,he)}}else ea(u,d,m,x);break;case 31:ea(u,d,m,x);break;case 13:ea(u,d,m,x);break;case 23:break;case 22:O=d.stateNode,U=d.alternate,d.memoizedState!==null?O._visibility&2?ea(u,d,m,x):Of(u,d):O._visibility&2?ea(u,d,m,x):(O._visibility|=2,Mu(u,d,m,x,(d.subtreeFlags&10256)!==0||!1)),T&2048&&hb(U,d);break;case 24:ea(u,d,m,x),T&2048&&pb(d.alternate,d);break;default:ea(u,d,m,x)}}function Mu(u,d,m,x,T){for(T=T&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var O=u,U=d,X=m,he=x,Ae=U.flags;switch(U.tag){case 0:case 11:case 15:Mu(O,U,X,he,T),Af(8,U);break;case 23:break;case 22:var $e=U.stateNode;U.memoizedState!==null?$e._visibility&2?Mu(O,U,X,he,T):Of(O,U):($e._visibility|=2,Mu(O,U,X,he,T)),T&&Ae&2048&&hb(U.alternate,U);break;case 24:Mu(O,U,X,he,T),T&&Ae&2048&&pb(U.alternate,U);break;default:Mu(O,U,X,he,T)}d=d.sibling}}function Of(u,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=u,x=d,T=x.flags;switch(x.tag){case 22:Of(m,x),T&2048&&hb(x.alternate,x);break;case 24:Of(m,x),T&2048&&pb(x.alternate,x);break;default:Of(m,x)}d=d.sibling}}var If=8192;function Nu(u,d,m){if(u.subtreeFlags&If)for(u=u.child;u!==null;)oC(u,d,m),u=u.sibling}function oC(u,d,m){switch(u.tag){case 26:Nu(u,d,m),u.flags&If&&u.memoizedState!==null&&oK(m,Ji,u.memoizedState,u.memoizedProps);break;case 5:Nu(u,d,m);break;case 3:case 4:var x=Ji;Ji=Tp(u.stateNode.containerInfo),Nu(u,d,m),Ji=x;break;case 22:u.memoizedState===null&&(x=u.alternate,x!==null&&x.memoizedState!==null?(x=If,If=16777216,Nu(u,d,m),If=x):Nu(u,d,m));break;default:Nu(u,d,m)}}function lC(u){var d=u.alternate;if(d!==null&&(u=d.child,u!==null)){d.child=null;do d=u.sibling,u.sibling=null,u=d;while(u!==null)}}function Cf(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];Yr=x,cC(x,u)}lC(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)uC(u),u=u.sibling}function uC(u){switch(u.tag){case 0:case 11:case 15:Cf(u),u.flags&2048&&mo(9,u,u.return);break;case 3:Cf(u);break;case 12:Cf(u);break;case 22:var d=u.stateNode;u.memoizedState!==null&&d._visibility&2&&(u.return===null||u.return.tag!==13)?(d._visibility&=-3,dp(u)):Cf(u);break;default:Cf(u)}}function dp(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];Yr=x,cC(x,u)}lC(u)}for(u=u.child;u!==null;){switch(d=u,d.tag){case 0:case 11:case 15:mo(8,d,d.return),dp(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,dp(d));break;default:dp(d)}u=u.sibling}}function cC(u,d){for(;Yr!==null;){var m=Yr;switch(m.tag){case 0:case 11:case 15:mo(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:hf(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,Yr=x;else e:for(m=u;Yr!==null;){x=Yr;var T=x.sibling,O=x.return;if(eC(x),x===m){Yr=null;break e}if(T!==null){T.return=O,Yr=T;break e}Yr=O}}}var EG={getCacheForType:function(u){var d=nn(Dr),m=d.data.get(u);return m===void 0&&(m=u(),d.data.set(u,m)),m},cacheSignal:function(){return nn(Dr).controller.signal}},wG=typeof WeakMap=="function"?WeakMap:Map,kt=0,Wt=null,Et=null,At=0,Nt=0,ui=null,go=!1,ju=!1,mb=!1,ds=0,yr=0,yo=0,Sl=0,gb=0,ci=0,Fu=0,Rf=null,Yn=null,yb=!1,hp=0,fC=0,pp=1/0,mp=null,vo=null,jr=0,bo=null,Bu=null,hs=0,vb=0,bb=null,dC=null,Pf=0,xb=null;function fi(){return(kt&2)!==0&&At!==0?At&-At:K.T!==null?Ab():Fn()}function hC(){if(ci===0)if((At&536870912)===0||It){var u=xr;xr<<=1,(xr&3932160)===0&&(xr=262144),ci=u}else ci=536870912;return u=oi.current,u!==null&&(u.flags|=32),ci}function qn(u,d,m){(u===Wt&&(Nt===2||Nt===9)||u.cancelPendingCommit!==null)&&(Uu(u,0),xo(u,At,ci,!1)),te(u,m),((kt&2)===0||u!==Wt)&&(u===Wt&&((kt&2)===0&&(Sl|=m),yr===4&&xo(u,At,ci,!1)),va(u))}function pC(u,d,m){if((kt&6)!==0)throw Error(n(327));var x=!m&&(d&127)===0&&(d&u.expiredLanes)===0||kr(u,d),T=x?AG(u,d):Eb(u,d,!0),O=x;do{if(T===0){ju&&!x&&xo(u,d,0,!1);break}else{if(m=u.current.alternate,O&&!_G(m)){T=Eb(u,d,!1),O=!1;continue}if(T===2){if(O=d,u.errorRecoveryDisabledLanes&O)var U=0;else U=u.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){d=U;e:{var X=u;T=Rf;var he=X.current.memoizedState.isDehydrated;if(he&&(Uu(X,U).flags|=256),U=Eb(X,U,!1),U!==2){if(mb&&!he){X.errorRecoveryDisabledLanes|=O,Sl|=O,T=4;break e}O=Yn,Yn=T,O!==null&&(Yn===null?Yn=O:Yn.push.apply(Yn,O))}T=U}if(O=!1,T!==2)continue}}if(T===1){Uu(u,0),xo(u,d,0,!0);break}e:{switch(x=u,O=T,O){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:xo(x,d,ci,!go);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(T=hp+300-De(),10<T)){if(xo(x,d,ci,!go),_n(x,0,!0)!==0)break e;hs=d,x.timeoutHandle=zC(mC.bind(null,x,m,Yn,mp,yb,d,ci,Sl,Fu,go,O,"Throttled",-0,0),T);break e}mC(x,m,Yn,mp,yb,d,ci,Sl,Fu,go,O,null,-0,0)}}break}while(!0);va(u)}function mC(u,d,m,x,T,O,U,X,he,Ae,$e,ze,Oe,Le){if(u.timeoutHandle=-1,ze=d.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},oC(d,O,ze);var nt=(O&62914560)===O?hp-De():(O&4194048)===O?fC-De():0;if(nt=lK(ze,nt),nt!==null){hs=O,u.cancelPendingCommit=nt(wC.bind(null,u,d,O,m,x,T,U,X,he,$e,ze,null,Oe,Le)),xo(u,O,U,!Ae);return}}wC(u,d,O,m,x,T,U,X,he)}function _G(u){for(var d=u;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var T=m[x],O=T.getSnapshot;T=T.value;try{if(!ai(O(),T))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function xo(u,d,m,x){d&=~gb,d&=~Sl,u.suspendedLanes|=d,u.pingedLanes&=~d,x&&(u.warmLanes|=d),x=u.expirationTimes;for(var T=d;0<T;){var O=31-Ze(T),U=1<<O;x[O]=-1,T&=~U}m!==0&&qe(u,m,d)}function gp(){return(kt&6)===0?(Lf(0),!1):!0}function Sb(){if(Et!==null){if(Nt===0)var u=Et.return;else u=Et,rs=dl=null,jv(u),Cu=null,mf=0,u=Et;for(;u!==null;)YI(u.alternate,u),u=u.return;Et=null}}function Uu(u,d){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,KG(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),hs=0,Sb(),Wt=u,Et=m=es(u.current,null),At=d,Nt=0,ui=null,go=!1,ju=kr(u,d),mb=!1,Fu=ci=gb=Sl=yo=yr=0,Yn=Rf=null,yb=!1,(d&8)!==0&&(d|=d&32);var x=u.entangledLanes;if(x!==0)for(u=u.entanglements,x&=d;0<x;){var T=31-Ze(x),O=1<<T;d|=u[T],x&=~O}return ds=d,jh(),m}function gC(u,d){vt=null,K.H=wf,d===Iu||d===zh?(d=PO(),Nt=3):d===Tv?(d=PO(),Nt=4):Nt=d===Jv?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ui=d,Et===null&&(yr=1,ap(u,Ri(d,u.current)))}function yC(){var u=oi.current;return u===null?!0:(At&4194048)===At?Mi===null:(At&62914560)===At||(At&536870912)!==0?u===Mi:!1}function vC(){var u=K.H;return K.H=wf,u===null?wf:u}function bC(){var u=K.A;return K.A=EG,u}function yp(){yr=4,go||(At&4194048)!==At&&oi.current!==null||(ju=!0),(yo&134217727)===0&&(Sl&134217727)===0||Wt===null||xo(Wt,At,ci,!1)}function Eb(u,d,m){var x=kt;kt|=2;var T=vC(),O=bC();(Wt!==u||At!==d)&&(mp=null,Uu(u,d)),d=!1;var U=yr;e:do try{if(Nt!==0&&Et!==null){var X=Et,he=ui;switch(Nt){case 8:Sb(),U=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(d=!0);var Ae=Nt;if(Nt=0,ui=null,$u(u,X,he,Ae),m&&ju){U=0;break e}break;default:Ae=Nt,Nt=0,ui=null,$u(u,X,he,Ae)}}TG(),U=yr;break}catch($e){gC(u,$e)}while(!0);return d&&u.shellSuspendCounter++,rs=dl=null,kt=x,K.H=T,K.A=O,Et===null&&(Wt=null,At=0,jh()),U}function TG(){for(;Et!==null;)xC(Et)}function AG(u,d){var m=kt;kt|=2;var x=vC(),T=bC();Wt!==u||At!==d?(mp=null,pp=De()+500,Uu(u,d)):ju=kr(u,d);e:do try{if(Nt!==0&&Et!==null){d=Et;var O=ui;t:switch(Nt){case 1:Nt=0,ui=null,$u(u,d,O,1);break;case 2:case 9:if(CO(O)){Nt=0,ui=null,SC(d);break}d=function(){Nt!==2&&Nt!==9||Wt!==u||(Nt=7),va(u)},O.then(d,d);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:CO(O)?(Nt=0,ui=null,SC(d)):(Nt=0,ui=null,$u(u,d,O,7));break;case 5:var U=null;switch(Et.tag){case 26:U=Et.memoizedState;case 5:case 27:var X=Et;if(U?sR(U):X.stateNode.complete){Nt=0,ui=null;var he=X.sibling;if(he!==null)Et=he;else{var Ae=X.return;Ae!==null?(Et=Ae,vp(Ae)):Et=null}break t}}Nt=0,ui=null,$u(u,d,O,5);break;case 6:Nt=0,ui=null,$u(u,d,O,6);break;case 8:Sb(),yr=6;break e;default:throw Error(n(462))}}DG();break}catch($e){gC(u,$e)}while(!0);return rs=dl=null,K.H=x,K.A=T,kt=m,Et!==null?0:(Wt=null,At=0,jh(),yr)}function DG(){for(;Et!==null&&!Fe();)xC(Et)}function xC(u){var d=KI(u.alternate,u,ds);u.memoizedProps=u.pendingProps,d===null?vp(u):Et=d}function SC(u){var d=u,m=d.alternate;switch(d.tag){case 15:case 0:d=FI(m,d,d.pendingProps,d.type,void 0,At);break;case 11:d=FI(m,d,d.pendingProps,d.type.render,d.ref,At);break;case 5:jv(d);default:YI(m,d),d=Et=bO(d,ds),d=KI(m,d,ds)}u.memoizedProps=u.pendingProps,d===null?vp(u):Et=d}function $u(u,d,m,x){rs=dl=null,jv(d),Cu=null,mf=0;var T=d.return;try{if(mG(u,T,d,m,At)){yr=1,ap(u,Ri(m,u.current)),Et=null;return}}catch(O){if(T!==null)throw Et=T,O;yr=1,ap(u,Ri(m,u.current)),Et=null;return}d.flags&32768?(It||x===1?u=!0:ju||(At&536870912)!==0?u=!1:(go=u=!0,(x===2||x===9||x===3||x===6)&&(x=oi.current,x!==null&&x.tag===13&&(x.flags|=16384))),EC(d,u)):vp(d)}function vp(u){var d=u;do{if((d.flags&32768)!==0){EC(d,go);return}u=d.return;var m=vG(d.alternate,d,ds);if(m!==null){Et=m;return}if(d=d.sibling,d!==null){Et=d;return}Et=d=u}while(d!==null);yr===0&&(yr=5)}function EC(u,d){do{var m=bG(u.alternate,u);if(m!==null){m.flags&=32767,Et=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(u=u.sibling,u!==null)){Et=u;return}Et=u=m}while(u!==null);yr=6,Et=null}function wC(u,d,m,x,T,O,U,X,he){u.cancelPendingCommit=null;do bp();while(jr!==0);if((kt&6)!==0)throw Error(n(327));if(d!==null){if(d===u.current)throw Error(n(177));if(O=d.lanes|d.childLanes,O|=cv,ce(u,m,O,U,X,he),u===Wt&&(Et=Wt=null,At=0),Bu=d,bo=u,hs=m,vb=O,bb=T,dC=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,RG(q,function(){return OC(),null})):(u.callbackNode=null,u.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=K.T,K.T=null,T=Y.p,Y.p=2,U=kt,kt|=4;try{xG(u,d,m)}finally{kt=U,Y.p=T,K.T=x}}jr=1,_C(),TC(),AC()}}function _C(){if(jr===1){jr=0;var u=bo,d=Bu,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=K.T,K.T=null;var x=Y.p;Y.p=2;var T=kt;kt|=4;try{iC(d,u);var O=kb,U=cO(u.containerInfo),X=O.focusedElem,he=O.selectionRange;if(U!==X&&X&&X.ownerDocument&&uO(X.ownerDocument.documentElement,X)){if(he!==null&&av(X)){var Ae=he.start,$e=he.end;if($e===void 0&&($e=Ae),"selectionStart"in X)X.selectionStart=Ae,X.selectionEnd=Math.min($e,X.value.length);else{var ze=X.ownerDocument||document,Oe=ze&&ze.defaultView||window;if(Oe.getSelection){var Le=Oe.getSelection(),nt=X.textContent.length,ct=Math.min(he.start,nt),zt=he.end===void 0?ct:Math.min(he.end,nt);!Le.extend&&ct>zt&&(U=zt,zt=ct,ct=U);var xe=lO(X,ct),me=lO(X,zt);if(xe&&me&&(Le.rangeCount!==1||Le.anchorNode!==xe.node||Le.anchorOffset!==xe.offset||Le.focusNode!==me.node||Le.focusOffset!==me.offset)){var Te=ze.createRange();Te.setStart(xe.node,xe.offset),Le.removeAllRanges(),ct>zt?(Le.addRange(Te),Le.extend(me.node,me.offset)):(Te.setEnd(me.node,me.offset),Le.addRange(Te))}}}}for(ze=[],Le=X;Le=Le.parentNode;)Le.nodeType===1&&ze.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<ze.length;X++){var Ke=ze[X];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}Rp=!!Lb,kb=Lb=null}finally{kt=T,Y.p=x,K.T=m}}u.current=d,jr=2}}function TC(){if(jr===2){jr=0;var u=bo,d=Bu,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=K.T,K.T=null;var x=Y.p;Y.p=2;var T=kt;kt|=4;try{JI(u,d.alternate,d)}finally{kt=T,Y.p=x,K.T=m}}jr=3}}function AC(){if(jr===4||jr===3){jr=0,Ye();var u=bo,d=Bu,m=hs,x=dC;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?jr=5:(jr=0,Bu=bo=null,DC(u,u.pendingLanes));var T=u.pendingLanes;if(T===0&&(vo=null),Mr(m),d=d.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(ge,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=K.T,T=Y.p,Y.p=2,K.T=null;try{for(var O=u.onRecoverableError,U=0;U<x.length;U++){var X=x[U];O(X.value,{componentStack:X.stack})}}finally{K.T=d,Y.p=T}}(hs&3)!==0&&bp(),va(u),T=u.pendingLanes,(m&261930)!==0&&(T&42)!==0?u===xb?Pf++:(Pf=0,xb=u):Pf=0,Lf(0)}}function DC(u,d){(u.pooledCacheLanes&=d)===0&&(d=u.pooledCache,d!=null&&(u.pooledCache=null,hf(d)))}function bp(){return _C(),TC(),AC(),OC()}function OC(){if(jr!==5)return!1;var u=bo,d=vb;vb=0;var m=Mr(hs),x=K.T,T=Y.p;try{Y.p=32>m?32:m,K.T=null,m=bb,bb=null;var O=bo,U=hs;if(jr=0,Bu=bo=null,hs=0,(kt&6)!==0)throw Error(n(331));var X=kt;if(kt|=4,uC(O.current),sC(O,O.current,U,m),kt=X,Lf(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(ge,O)}catch{}return!0}finally{Y.p=T,K.T=x,DC(u,d)}}function IC(u,d,m){d=Ri(m,d),d=Zv(u.stateNode,d,2),u=fo(u,d,2),u!==null&&(te(u,2),va(u))}function jt(u,d,m){if(u.tag===3)IC(u,u,m);else for(;d!==null;){if(d.tag===3){IC(d,u,m);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(vo===null||!vo.has(x))){u=Ri(m,u),m=CI(2),x=fo(d,m,2),x!==null&&(RI(m,x,d,u),te(x,2),va(x));break}}d=d.return}}function wb(u,d,m){var x=u.pingCache;if(x===null){x=u.pingCache=new wG;var T=new Set;x.set(d,T)}else T=x.get(d),T===void 0&&(T=new Set,x.set(d,T));T.has(m)||(mb=!0,T.add(m),u=OG.bind(null,u,d,m),d.then(u,u))}function OG(u,d,m){var x=u.pingCache;x!==null&&x.delete(d),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Wt===u&&(At&m)===m&&(yr===4||yr===3&&(At&62914560)===At&&300>De()-hp?(kt&2)===0&&Uu(u,0):gb|=m,Fu===At&&(Fu=0)),va(u)}function CC(u,d){d===0&&(d=Wa()),u=ul(u,d),u!==null&&(te(u,d),va(u))}function IG(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),CC(u,m)}function CG(u,d){var m=0;switch(u.tag){case 31:case 13:var x=u.stateNode,T=u.memoizedState;T!==null&&(m=T.retryLane);break;case 19:x=u.stateNode;break;case 22:x=u.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(d),CC(u,m)}function RG(u,d){return Be(u,d)}var xp=null,Hu=null,_b=!1,Sp=!1,Tb=!1,So=0;function va(u){u!==Hu&&u.next===null&&(Hu===null?xp=Hu=u:Hu=Hu.next=u),Sp=!0,_b||(_b=!0,LG())}function Lf(u,d){if(!Tb&&Sp){Tb=!0;do for(var m=!1,x=xp;x!==null;){if(u!==0){var T=x.pendingLanes;if(T===0)var O=0;else{var U=x.suspendedLanes,X=x.pingedLanes;O=(1<<31-Ze(42|u)+1)-1,O&=T&~(U&~X),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,kC(x,O))}else O=At,O=_n(x,x===Wt?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||kr(x,O)||(m=!0,kC(x,O));x=x.next}while(m);Tb=!1}}function PG(){RC()}function RC(){Sp=_b=!1;var u=0;So!==0&&GG()&&(u=So);for(var d=De(),m=null,x=xp;x!==null;){var T=x.next,O=PC(x,d);O===0?(x.next=null,m===null?xp=T:m.next=T,T===null&&(Hu=m)):(m=x,(u!==0||(O&3)!==0)&&(Sp=!0)),x=T}jr!==0&&jr!==5||Lf(u),So!==0&&(So=0)}function PC(u,d){for(var m=u.suspendedLanes,x=u.pingedLanes,T=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var U=31-Ze(O),X=1<<U,he=T[U];he===-1?((X&m)===0||(X&x)!==0)&&(T[U]=uu(X,d)):he<=d&&(u.expiredLanes|=X),O&=~X}if(d=Wt,m=At,m=_n(u,u===d?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x=u.callbackNode,m===0||u===d&&(Nt===2||Nt===9)||u.cancelPendingCommit!==null)return x!==null&&x!==null&&pe(x),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||kr(u,m)){if(d=m&-m,d===u.callbackPriority)return d;switch(x!==null&&pe(x),Mr(m)){case 2:case 8:m=B;break;case 32:m=q;break;case 268435456:m=be;break;default:m=q}return x=LC.bind(null,u),m=Be(m,x),u.callbackPriority=d,u.callbackNode=m,d}return x!==null&&x!==null&&pe(x),u.callbackPriority=2,u.callbackNode=null,2}function LC(u,d){if(jr!==0&&jr!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(bp()&&u.callbackNode!==m)return null;var x=At;return x=_n(u,u===Wt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x===0?null:(pC(u,x,d),PC(u,De()),u.callbackNode!=null&&u.callbackNode===m?LC.bind(null,u):null)}function kC(u,d){if(bp())return null;pC(u,d,!0)}function LG(){zG(function(){(kt&6)!==0?Be(C,PG):RC()})}function Ab(){if(So===0){var u=Du;u===0&&(u=En,En<<=1,(En&261888)===0&&(En=256)),So=u}return So}function MC(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ih(""+u)}function NC(u,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,u.id&&m.setAttribute("form",u.id),d.parentNode.insertBefore(m,d),u=new FormData(u),m.parentNode.removeChild(m),u}function kG(u,d,m,x,T){if(d==="submit"&&m&&m.stateNode===T){var O=MC((T[Nr]||null).action),U=x.submitter;U&&(d=(d=U[Nr]||null)?MC(d.formAction):U.getAttribute("formAction"),d!==null&&(O=d,U=null));var X=new Lh("action","action",null,x,T);u.push({event:X,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(So!==0){var he=U?NC(T,U):new FormData(T);Yv(m,{pending:!0,data:he,method:T.method,action:O},null,he)}}else typeof O=="function"&&(X.preventDefault(),he=U?NC(T,U):new FormData(T),Yv(m,{pending:!0,data:he,method:T.method,action:O},O,he))},currentTarget:T}]})}}for(var Db=0;Db<uv.length;Db++){var Ob=uv[Db],MG=Ob.toLowerCase(),NG=Ob[0].toUpperCase()+Ob.slice(1);Zi(MG,"on"+NG)}Zi(hO,"onAnimationEnd"),Zi(pO,"onAnimationIteration"),Zi(mO,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(ZH,"onTransitionRun"),Zi(JH,"onTransitionStart"),Zi(eG,"onTransitionCancel"),Zi(gO,"onTransitionEnd"),hu("onMouseEnter",["mouseout","mouseover"]),hu("onMouseLeave",["mouseout","mouseover"]),hu("onPointerEnter",["pointerout","pointerover"]),hu("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kf));function jC(u,d){d=(d&4)!==0;for(var m=0;m<u.length;m++){var x=u[m],T=x.event;x=x.listeners;e:{var O=void 0;if(d)for(var U=x.length-1;0<=U;U--){var X=x[U],he=X.instance,Ae=X.currentTarget;if(X=X.listener,he!==O&&T.isPropagationStopped())break e;O=X,T.currentTarget=Ae;try{O(T)}catch($e){Nh($e)}T.currentTarget=null,O=he}else for(U=0;U<x.length;U++){if(X=x[U],he=X.instance,Ae=X.currentTarget,X=X.listener,he!==O&&T.isPropagationStopped())break e;O=X,T.currentTarget=Ae;try{O(T)}catch($e){Nh($e)}T.currentTarget=null,O=he}}}}function wt(u,d){var m=d[$n];m===void 0&&(m=d[$n]=new Set);var x=u+"__bubble";m.has(x)||(FC(d,u,2,!1),m.add(x))}function Ib(u,d,m){var x=0;d&&(x|=4),FC(m,u,x,d)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function Cb(u){if(!u[Ep]){u[Ep]=!0,RD.forEach(function(m){m!=="selectionchange"&&(jG.has(m)||Ib(m,!1,u),Ib(m,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[Ep]||(d[Ep]=!0,Ib("selectionchange",!1,d))}}function FC(u,d,m,x){switch(hR(d)){case 2:var T=fK;break;case 8:T=dK;break;default:T=zb}m=T.bind(null,d,m,u),T=void 0,!Qy||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),x?T!==void 0?u.addEventListener(d,m,{capture:!0,passive:T}):u.addEventListener(d,m,!0):T!==void 0?u.addEventListener(d,m,{passive:T}):u.addEventListener(d,m,!1)}function Rb(u,d,m,x,T){var O=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var U=x.tag;if(U===3||U===4){var X=x.stateNode.containerInfo;if(X===T)break;if(U===4)for(U=x.return;U!==null;){var he=U.tag;if((he===3||he===4)&&U.stateNode.containerInfo===T)return;U=U.return}for(;X!==null;){if(U=cu(X),U===null)return;if(he=U.tag,he===5||he===6||he===26||he===27){x=O=U;continue e}X=X.parentNode}}x=x.return}GD(function(){var Ae=O,$e=Wy(m),ze=[];e:{var Oe=yO.get(u);if(Oe!==void 0){var Le=Lh,nt=u;switch(u){case"keypress":if(Rh(m)===0)break e;case"keydown":case"keyup":Le=CH;break;case"focusin":nt="focus",Le=ev;break;case"focusout":nt="blur",Le=ev;break;case"beforeblur":case"afterblur":Le=ev;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=YD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=vH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=LH;break;case hO:case pO:case mO:Le=SH;break;case gO:Le=MH;break;case"scroll":case"scrollend":Le=gH;break;case"wheel":Le=jH;break;case"copy":case"cut":case"paste":Le=wH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=WD;break;case"toggle":case"beforetoggle":Le=BH}var ct=(d&4)!==0,zt=!ct&&(u==="scroll"||u==="scrollend"),xe=ct?Oe!==null?Oe+"Capture":null:Oe;ct=[];for(var me=Ae,Te;me!==null;){var Ke=me;if(Te=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Te===null||xe===null||(Ke=tf(me,xe),Ke!=null&&ct.push(Mf(me,Ke,Te))),zt)break;me=me.return}0<ct.length&&(Oe=new Le(Oe,nt,null,m,$e),ze.push({event:Oe,listeners:ct}))}}if((d&7)===0){e:{if(Oe=u==="mouseover"||u==="pointerover",Le=u==="mouseout"||u==="pointerout",Oe&&m!==qy&&(nt=m.relatedTarget||m.fromElement)&&(cu(nt)||nt[Un]))break e;if((Le||Oe)&&(Oe=$e.window===$e?$e:(Oe=$e.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Le?(nt=m.relatedTarget||m.toElement,Le=Ae,nt=nt?cu(nt):null,nt!==null&&(zt=a(nt),ct=nt.tag,nt!==zt||ct!==5&&ct!==27&&ct!==6)&&(nt=null)):(Le=null,nt=Ae),Le!==nt)){if(ct=YD,Ke="onMouseLeave",xe="onMouseEnter",me="mouse",(u==="pointerout"||u==="pointerover")&&(ct=WD,Ke="onPointerLeave",xe="onPointerEnter",me="pointer"),zt=Le==null?Oe:ef(Le),Te=nt==null?Oe:ef(nt),Oe=new ct(Ke,me+"leave",Le,m,$e),Oe.target=zt,Oe.relatedTarget=Te,Ke=null,cu($e)===Ae&&(ct=new ct(xe,me+"enter",nt,m,$e),ct.target=Te,ct.relatedTarget=zt,Ke=ct),zt=Ke,Le&&nt)t:{for(ct=FG,xe=Le,me=nt,Te=0,Ke=xe;Ke;Ke=ct(Ke))Te++;Ke=0;for(var lt=me;lt;lt=ct(lt))Ke++;for(;0<Te-Ke;)xe=ct(xe),Te--;for(;0<Ke-Te;)me=ct(me),Ke--;for(;Te--;){if(xe===me||me!==null&&xe===me.alternate){ct=xe;break t}xe=ct(xe),me=ct(me)}ct=null}else ct=null;Le!==null&&BC(ze,Oe,Le,ct,!1),nt!==null&&zt!==null&&BC(ze,zt,nt,ct,!0)}}e:{if(Oe=Ae?ef(Ae):window,Le=Oe.nodeName&&Oe.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Oe.type==="file")var Ct=rO;else if(eO(Oe))if(nO)Ct=VH;else{Ct=qH;var it=YH}else Le=Oe.nodeName,!Le||Le.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Ae&&Yy(Ae.elementType)&&(Ct=rO):Ct=WH;if(Ct&&(Ct=Ct(u,Ae))){tO(ze,Ct,m,$e);break e}it&&it(u,Oe,Ae),u==="focusout"&&Ae&&Oe.type==="number"&&Ae.memoizedProps.value!=null&&zy(Oe,"number",Oe.value)}switch(it=Ae?ef(Ae):window,u){case"focusin":(eO(it)||it.contentEditable==="true")&&(bu=it,sv=Ae,cf=null);break;case"focusout":cf=sv=bu=null;break;case"mousedown":ov=!0;break;case"contextmenu":case"mouseup":case"dragend":ov=!1,fO(ze,m,$e);break;case"selectionchange":if(XH)break;case"keydown":case"keyup":fO(ze,m,$e)}var bt;if(rv)e:{switch(u){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else vu?ZD(u,m)&&(Dt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(VD&&m.locale!=="ko"&&(vu||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&vu&&(bt=KD()):(io=$e,Xy="value"in io?io.value:io.textContent,vu=!0)),it=wp(Ae,Dt),0<it.length&&(Dt=new qD(Dt,u,null,m,$e),ze.push({event:Dt,listeners:it}),bt?Dt.data=bt:(bt=JD(m),bt!==null&&(Dt.data=bt)))),(bt=$H?HH(u,m):GH(u,m))&&(Dt=wp(Ae,"onBeforeInput"),0<Dt.length&&(it=new qD("onBeforeInput","beforeinput",null,m,$e),ze.push({event:it,listeners:Dt}),it.data=bt)),kG(ze,u,Ae,m,$e)}jC(ze,d)})}function Mf(u,d,m){return{instance:u,listener:d,currentTarget:m}}function wp(u,d){for(var m=d+"Capture",x=[];u!==null;){var T=u,O=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||O===null||(T=tf(u,m),T!=null&&x.unshift(Mf(u,T,O)),T=tf(u,d),T!=null&&x.push(Mf(u,T,O))),u.tag===3)return x;u=u.return}return[]}function FG(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function BC(u,d,m,x,T){for(var O=d._reactName,U=[];m!==null&&m!==x;){var X=m,he=X.alternate,Ae=X.stateNode;if(X=X.tag,he!==null&&he===x)break;X!==5&&X!==26&&X!==27||Ae===null||(he=Ae,T?(Ae=tf(m,O),Ae!=null&&U.unshift(Mf(m,Ae,he))):T||(Ae=tf(m,O),Ae!=null&&U.push(Mf(m,Ae,he)))),m=m.return}U.length!==0&&u.push({event:d,listeners:U})}var BG=/\r\n?/g,UG=/\u0000|\uFFFD/g;function UC(u){return(typeof u=="string"?u:""+u).replace(BG,`
`).replace(UG,"")}function $C(u,d){return d=UC(d),UC(u)===d}function Kt(u,d,m,x,T,O){switch(m){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||mu(u,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&mu(u,""+x);break;case"className":Dh(u,"class",x);break;case"tabIndex":Dh(u,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Dh(u,m,x);break;case"style":$D(u,x,O);break;case"data":if(d!=="object"){Dh(u,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||m!=="href")){u.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=Ih(""+x),u.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(m==="formAction"?(d!=="input"&&Kt(u,d,"name",T.name,T,null),Kt(u,d,"formEncType",T.formEncType,T,null),Kt(u,d,"formMethod",T.formMethod,T,null),Kt(u,d,"formTarget",T.formTarget,T,null)):(Kt(u,d,"encType",T.encType,T,null),Kt(u,d,"method",T.method,T,null),Kt(u,d,"target",T.target,T,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=Ih(""+x),u.setAttribute(m,x);break;case"onClick":x!=null&&(u.onclick=Za);break;case"onScroll":x!=null&&wt("scroll",u);break;case"onScrollEnd":x!=null&&wt("scrollend",u);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(m=x.__html,m!=null){if(T.children!=null)throw Error(n(60));u.innerHTML=m}}break;case"multiple":u.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":u.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){u.removeAttribute("xlink:href");break}m=Ih(""+x),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""+x):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":x===!0?u.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,x):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?u.setAttribute(m,x):u.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?u.removeAttribute(m):u.setAttribute(m,x);break;case"popover":wt("beforetoggle",u),wt("toggle",u),Ah(u,"popover",x);break;case"xlinkActuate":Xa(u,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Xa(u,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Xa(u,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Xa(u,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Xa(u,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Xa(u,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Ah(u,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=pH.get(m)||m,Ah(u,m,x))}}function Pb(u,d,m,x,T,O){switch(m){case"style":$D(u,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(m=x.__html,m!=null){if(T.children!=null)throw Error(n(60));u.innerHTML=m}}break;case"children":typeof x=="string"?mu(u,x):(typeof x=="number"||typeof x=="bigint")&&mu(u,""+x);break;case"onScroll":x!=null&&wt("scroll",u);break;case"onScrollEnd":x!=null&&wt("scrollend",u);break;case"onClick":x!=null&&(u.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PD.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),d=m.slice(2,T?m.length-7:void 0),O=u[Nr]||null,O=O!=null?O[m]:null,typeof O=="function"&&u.removeEventListener(d,O,T),typeof x=="function")){typeof O!="function"&&O!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(d,x,T);break e}m in u?u[m]=x:x===!0?u.setAttribute(m,""):Ah(u,m,x)}}}function sn(u,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",u),wt("load",u);var x=!1,T=!1,O;for(O in m)if(m.hasOwnProperty(O)){var U=m[O];if(U!=null)switch(O){case"src":x=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Kt(u,d,O,U,m,null)}}T&&Kt(u,d,"srcSet",m.srcSet,m,null),x&&Kt(u,d,"src",m.src,m,null);return;case"input":wt("invalid",u);var X=O=U=T=null,he=null,Ae=null;for(x in m)if(m.hasOwnProperty(x)){var $e=m[x];if($e!=null)switch(x){case"name":T=$e;break;case"type":U=$e;break;case"checked":he=$e;break;case"defaultChecked":Ae=$e;break;case"value":O=$e;break;case"defaultValue":X=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(n(137,d));break;default:Kt(u,d,x,$e,m,null)}}jD(u,O,X,he,Ae,U,T,!1);return;case"select":wt("invalid",u),x=U=O=null;for(T in m)if(m.hasOwnProperty(T)&&(X=m[T],X!=null))switch(T){case"value":O=X;break;case"defaultValue":U=X;break;case"multiple":x=X;default:Kt(u,d,T,X,m,null)}d=O,m=U,u.multiple=!!x,d!=null?pu(u,!!x,d,!1):m!=null&&pu(u,!!x,m,!0);return;case"textarea":wt("invalid",u),O=T=x=null;for(U in m)if(m.hasOwnProperty(U)&&(X=m[U],X!=null))switch(U){case"value":x=X;break;case"defaultValue":T=X;break;case"children":O=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:Kt(u,d,U,X,m,null)}BD(u,x,T,O);return;case"option":for(he in m)if(m.hasOwnProperty(he)&&(x=m[he],x!=null))switch(he){case"selected":u.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Kt(u,d,he,x,m,null)}return;case"dialog":wt("beforetoggle",u),wt("toggle",u),wt("cancel",u),wt("close",u);break;case"iframe":case"object":wt("load",u);break;case"video":case"audio":for(x=0;x<kf.length;x++)wt(kf[x],u);break;case"image":wt("error",u),wt("load",u);break;case"details":wt("toggle",u);break;case"embed":case"source":case"link":wt("error",u),wt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in m)if(m.hasOwnProperty(Ae)&&(x=m[Ae],x!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Kt(u,d,Ae,x,m,null)}return;default:if(Yy(d)){for($e in m)m.hasOwnProperty($e)&&(x=m[$e],x!==void 0&&Pb(u,d,$e,x,m,void 0));return}}for(X in m)m.hasOwnProperty(X)&&(x=m[X],x!=null&&Kt(u,d,X,x,m,null))}function $G(u,d,m,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,O=null,U=null,X=null,he=null,Ae=null,$e=null;for(Le in m){var ze=m[Le];if(m.hasOwnProperty(Le)&&ze!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":he=ze;default:x.hasOwnProperty(Le)||Kt(u,d,Le,null,x,ze)}}for(var Oe in x){var Le=x[Oe];if(ze=m[Oe],x.hasOwnProperty(Oe)&&(Le!=null||ze!=null))switch(Oe){case"type":O=Le;break;case"name":T=Le;break;case"checked":Ae=Le;break;case"defaultChecked":$e=Le;break;case"value":U=Le;break;case"defaultValue":X=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,d));break;default:Le!==ze&&Kt(u,d,Oe,Le,x,ze)}}Ky(u,U,X,he,Ae,$e,O,T);return;case"select":Le=U=X=Oe=null;for(O in m)if(he=m[O],m.hasOwnProperty(O)&&he!=null)switch(O){case"value":break;case"multiple":Le=he;default:x.hasOwnProperty(O)||Kt(u,d,O,null,x,he)}for(T in x)if(O=x[T],he=m[T],x.hasOwnProperty(T)&&(O!=null||he!=null))switch(T){case"value":Oe=O;break;case"defaultValue":X=O;break;case"multiple":U=O;default:O!==he&&Kt(u,d,T,O,x,he)}d=X,m=U,x=Le,Oe!=null?pu(u,!!m,Oe,!1):!!x!=!!m&&(d!=null?pu(u,!!m,d,!0):pu(u,!!m,m?[]:"",!1));return;case"textarea":Le=Oe=null;for(X in m)if(T=m[X],m.hasOwnProperty(X)&&T!=null&&!x.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Kt(u,d,X,null,x,T)}for(U in x)if(T=x[U],O=m[U],x.hasOwnProperty(U)&&(T!=null||O!=null))switch(U){case"value":Oe=T;break;case"defaultValue":Le=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==O&&Kt(u,d,U,T,x,O)}FD(u,Oe,Le);return;case"option":for(var nt in m)if(Oe=m[nt],m.hasOwnProperty(nt)&&Oe!=null&&!x.hasOwnProperty(nt))switch(nt){case"selected":u.selected=!1;break;default:Kt(u,d,nt,null,x,Oe)}for(he in x)if(Oe=x[he],Le=m[he],x.hasOwnProperty(he)&&Oe!==Le&&(Oe!=null||Le!=null))switch(he){case"selected":u.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:Kt(u,d,he,Oe,x,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in m)Oe=m[ct],m.hasOwnProperty(ct)&&Oe!=null&&!x.hasOwnProperty(ct)&&Kt(u,d,ct,null,x,Oe);for(Ae in x)if(Oe=x[Ae],Le=m[Ae],x.hasOwnProperty(Ae)&&Oe!==Le&&(Oe!=null||Le!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,d));break;default:Kt(u,d,Ae,Oe,x,Le)}return;default:if(Yy(d)){for(var zt in m)Oe=m[zt],m.hasOwnProperty(zt)&&Oe!==void 0&&!x.hasOwnProperty(zt)&&Pb(u,d,zt,void 0,x,Oe);for($e in x)Oe=x[$e],Le=m[$e],!x.hasOwnProperty($e)||Oe===Le||Oe===void 0&&Le===void 0||Pb(u,d,$e,Oe,x,Le);return}}for(var xe in m)Oe=m[xe],m.hasOwnProperty(xe)&&Oe!=null&&!x.hasOwnProperty(xe)&&Kt(u,d,xe,null,x,Oe);for(ze in x)Oe=x[ze],Le=m[ze],!x.hasOwnProperty(ze)||Oe===Le||Oe==null&&Le==null||Kt(u,d,ze,Oe,x,Le)}function HC(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HG(){if(typeof performance.getEntriesByType=="function"){for(var u=0,d=0,m=performance.getEntriesByType("resource"),x=0;x<m.length;x++){var T=m[x],O=T.transferSize,U=T.initiatorType,X=T.duration;if(O&&X&&HC(U)){for(U=0,X=T.responseEnd,x+=1;x<m.length;x++){var he=m[x],Ae=he.startTime;if(Ae>X)break;var $e=he.transferSize,ze=he.initiatorType;$e&&HC(ze)&&(he=he.responseEnd,U+=$e*(he<X?1:(X-Ae)/(he-Ae)))}if(--x,d+=8*(O+U)/(T.duration/1e3),u++,10<u)break}}if(0<u)return d/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var Lb=null,kb=null;function _p(u){return u.nodeType===9?u:u.ownerDocument}function GC(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KC(u,d){if(u===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&d==="foreignObject"?0:u}function Mb(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Nb=null;function GG(){var u=window.event;return u&&u.type==="popstate"?u===Nb?!1:(Nb=u,!0):(Nb=null,!1)}var zC=typeof setTimeout=="function"?setTimeout:void 0,KG=typeof clearTimeout=="function"?clearTimeout:void 0,YC=typeof Promise=="function"?Promise:void 0,zG=typeof queueMicrotask=="function"?queueMicrotask:typeof YC<"u"?function(u){return YC.resolve(null).then(u).catch(YG)}:zC;function YG(u){setTimeout(function(){throw u})}function Eo(u){return u==="head"}function qC(u,d){var m=d,x=0;do{var T=m.nextSibling;if(u.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"||m==="/&"){if(x===0){u.removeChild(T),Yu(d);return}x--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")x++;else if(m==="html")Nf(u.ownerDocument.documentElement);else if(m==="head"){m=u.ownerDocument.head,Nf(m);for(var O=m.firstChild;O;){var U=O.nextSibling,X=O.nodeName;O[Tn]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&O.rel.toLowerCase()==="stylesheet"||m.removeChild(O),O=U}}else m==="body"&&Nf(u.ownerDocument.body);m=T}while(m);Yu(d)}function WC(u,d){var m=u;u=0;do{var x=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),x&&x.nodeType===8)if(m=x.data,m==="/$"){if(u===0)break;u--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||u++;m=x}while(m)}function jb(u){var d=u.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":jb(m),Hy(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function qG(u,d,m,x){for(;u.nodeType===1;){var T=m;if(u.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(x){if(!u[Tn])switch(d){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(O=u.getAttribute("rel"),O==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(O!==T.rel||u.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||u.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||u.getAttribute("title")!==(T.title==null?null:T.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(O=u.getAttribute("src"),(O!==(T.src==null?null:T.src)||u.getAttribute("type")!==(T.type==null?null:T.type)||u.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&O&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(d==="input"&&u.type==="hidden"){var O=T.name==null?null:""+T.name;if(T.type==="hidden"&&u.getAttribute("name")===O)return u}else return u;if(u=Ni(u.nextSibling),u===null)break}return null}function WG(u,d,m){if(d==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Ni(u.nextSibling),u===null))return null;return u}function VC(u,d){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!d||(u=Ni(u.nextSibling),u===null))return null;return u}function Fb(u){return u.data==="$?"||u.data==="$~"}function Bb(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function VG(u,d){var m=u.ownerDocument;if(u.data==="$~")u._reactRetry=d;else if(u.data!=="$?"||m.readyState!=="loading")d();else{var x=function(){d(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),u._reactRetry=x}}function Ni(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return u}var Ub=null;function QC(u){u=u.nextSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"||m==="/&"){if(d===0)return Ni(u.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}u=u.nextSibling}return null}function XC(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return u;d--}else m!=="/$"&&m!=="/&"||d++}u=u.previousSibling}return null}function ZC(u,d,m){switch(d=_p(m),u){case"html":if(u=d.documentElement,!u)throw Error(n(452));return u;case"head":if(u=d.head,!u)throw Error(n(453));return u;case"body":if(u=d.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Nf(u){for(var d=u.attributes;d.length;)u.removeAttributeNode(d[0]);Hy(u)}var ji=new Map,JC=new Set;function Tp(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var ps=Y.d;Y.d={f:QG,r:XG,D:ZG,C:JG,L:eK,m:tK,X:nK,S:rK,M:iK};function QG(){var u=ps.f(),d=gp();return u||d}function XG(u){var d=fu(u);d!==null&&d.tag===5&&d.type==="form"?gI(d):ps.r(u)}var Gu=typeof document>"u"?null:document;function eR(u,d,m){var x=Gu;if(x&&typeof d=="string"&&d){var T=Ii(d);T='link[rel="'+u+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),JC.has(T)||(JC.add(T),u={rel:u,crossOrigin:m,href:d},x.querySelector(T)===null&&(d=x.createElement("link"),sn(d,"link",u),zr(d),x.head.appendChild(d)))}}function ZG(u){ps.D(u),eR("dns-prefetch",u,null)}function JG(u,d){ps.C(u,d),eR("preconnect",u,d)}function eK(u,d,m){ps.L(u,d,m);var x=Gu;if(x&&u&&d){var T='link[rel="preload"][as="'+Ii(d)+'"]';d==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+Ii(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+Ii(m.imageSizes)+'"]')):T+='[href="'+Ii(u)+'"]';var O=T;switch(d){case"style":O=Ku(u);break;case"script":O=zu(u)}ji.has(O)||(u=h({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:u,as:d},m),ji.set(O,u),x.querySelector(T)!==null||d==="style"&&x.querySelector(jf(O))||d==="script"&&x.querySelector(Ff(O))||(d=x.createElement("link"),sn(d,"link",u),zr(d),x.head.appendChild(d)))}}function tK(u,d){ps.m(u,d);var m=Gu;if(m&&u){var x=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+Ii(x)+'"][href="'+Ii(u)+'"]',O=T;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=zu(u)}if(!ji.has(O)&&(u=h({rel:"modulepreload",href:u},d),ji.set(O,u),m.querySelector(T)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ff(O)))return}x=m.createElement("link"),sn(x,"link",u),zr(x),m.head.appendChild(x)}}}function rK(u,d,m){ps.S(u,d,m);var x=Gu;if(x&&u){var T=du(x).hoistableStyles,O=Ku(u);d=d||"default";var U=T.get(O);if(!U){var X={loading:0,preload:null};if(U=x.querySelector(jf(O)))X.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":d},m),(m=ji.get(O))&&$b(u,m);var he=U=x.createElement("link");zr(he),sn(he,"link",u),he._p=new Promise(function(Ae,$e){he.onload=Ae,he.onerror=$e}),he.addEventListener("load",function(){X.loading|=1}),he.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Ap(U,d,x)}U={type:"stylesheet",instance:U,count:1,state:X},T.set(O,U)}}}function nK(u,d){ps.X(u,d);var m=Gu;if(m&&u){var x=du(m).hoistableScripts,T=zu(u),O=x.get(T);O||(O=m.querySelector(Ff(T)),O||(u=h({src:u,async:!0},d),(d=ji.get(T))&&Hb(u,d),O=m.createElement("script"),zr(O),sn(O,"link",u),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(T,O))}}function iK(u,d){ps.M(u,d);var m=Gu;if(m&&u){var x=du(m).hoistableScripts,T=zu(u),O=x.get(T);O||(O=m.querySelector(Ff(T)),O||(u=h({src:u,async:!0,type:"module"},d),(d=ji.get(T))&&Hb(u,d),O=m.createElement("script"),zr(O),sn(O,"link",u),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(T,O))}}function tR(u,d,m,x){var T=(T=ve.current)?Tp(T):null;if(!T)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Ku(m.href),m=du(T).hoistableStyles,x=m.get(d),x||(x={type:"style",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Ku(m.href);var O=du(T).hoistableStyles,U=O.get(u);if(U||(T=T.ownerDocument||T,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(u,U),(O=T.querySelector(jf(u)))&&!O._p&&(U.instance=O,U.state.loading=5),ji.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ji.set(u,m),O||aK(T,u,m,U.state))),d&&x===null)throw Error(n(528,""));return U}if(d&&x!==null)throw Error(n(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=zu(m),m=du(T).hoistableScripts,x=m.get(d),x||(x={type:"script",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Ku(u){return'href="'+Ii(u)+'"'}function jf(u){return'link[rel="stylesheet"]['+u+"]"}function rR(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function aK(u,d,m,x){u.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=u.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),sn(d,"link",m),zr(d),u.head.appendChild(d))}function zu(u){return'[src="'+Ii(u)+'"]'}function Ff(u){return"script[async]"+u}function nR(u,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var x=u.querySelector('style[data-href~="'+Ii(m.href)+'"]');if(x)return d.instance=x,zr(x),x;var T=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(u.ownerDocument||u).createElement("style"),zr(x),sn(x,"style",T),Ap(x,m.precedence,u),d.instance=x;case"stylesheet":T=Ku(m.href);var O=u.querySelector(jf(T));if(O)return d.state.loading|=4,d.instance=O,zr(O),O;x=rR(m),(T=ji.get(T))&&$b(x,T),O=(u.ownerDocument||u).createElement("link"),zr(O);var U=O;return U._p=new Promise(function(X,he){U.onload=X,U.onerror=he}),sn(O,"link",x),d.state.loading|=4,Ap(O,m.precedence,u),d.instance=O;case"script":return O=zu(m.src),(T=u.querySelector(Ff(O)))?(d.instance=T,zr(T),T):(x=m,(T=ji.get(O))&&(x=h({},m),Hb(x,T)),u=u.ownerDocument||u,T=u.createElement("script"),zr(T),sn(T,"link",x),u.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,Ap(x,m.precedence,u));return d.instance}function Ap(u,d,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=x.length?x[x.length-1]:null,O=T,U=0;U<x.length;U++){var X=x[U];if(X.dataset.precedence===d)O=X;else if(O!==T)break}O?O.parentNode.insertBefore(u,O.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(u,d.firstChild))}function $b(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.title==null&&(u.title=d.title)}function Hb(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.integrity==null&&(u.integrity=d.integrity)}var Dp=null;function iR(u,d,m){if(Dp===null){var x=new Map,T=Dp=new Map;T.set(m,x)}else T=Dp,x=T.get(m),x||(x=new Map,T.set(m,x));if(x.has(u))return x;for(x.set(u,null),m=m.getElementsByTagName(u),T=0;T<m.length;T++){var O=m[T];if(!(O[Tn]||O[cr]||u==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var U=O.getAttribute(d)||"";U=u+U;var X=x.get(U);X?X.push(O):x.set(U,[O])}}return x}function aR(u,d,m){u=u.ownerDocument||u,u.head.insertBefore(m,d==="title"?u.querySelector("head > title"):null)}function sK(u,d,m){if(m===1||d.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return u=d.disabled,typeof d.precedence=="string"&&u==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function sR(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function oK(u,d,m,x){if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var T=Ku(x.href),O=d.querySelector(jf(T));if(O){d=O._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(u.count++,u=Op.bind(u),d.then(u,u)),m.state.loading|=4,m.instance=O,zr(O);return}O=d.ownerDocument||d,x=rR(x),(T=ji.get(T))&&$b(x,T),O=O.createElement("link"),zr(O);var U=O;U._p=new Promise(function(X,he){U.onload=X,U.onerror=he}),sn(O,"link",x),m.instance=O}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(u.count++,m=Op.bind(u),d.addEventListener("load",m),d.addEventListener("error",m))}}var Gb=0;function lK(u,d){return u.stylesheets&&u.count===0&&Cp(u,u.stylesheets),0<u.count||0<u.imgCount?function(m){var x=setTimeout(function(){if(u.stylesheets&&Cp(u,u.stylesheets),u.unsuspend){var O=u.unsuspend;u.unsuspend=null,O()}},6e4+d);0<u.imgBytes&&Gb===0&&(Gb=62500*HG());var T=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Cp(u,u.stylesheets),u.unsuspend)){var O=u.unsuspend;u.unsuspend=null,O()}},(u.imgBytes>Gb?50:800)+d);return u.unsuspend=m,function(){u.unsuspend=null,clearTimeout(x),clearTimeout(T)}}:null}function Op(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cp(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Ip=null;function Cp(u,d){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Ip=new Map,d.forEach(uK,u),Ip=null,Op.call(u))}function uK(u,d){if(!(d.state.loading&4)){var m=Ip.get(u);if(m)var x=m.get(null);else{m=new Map,Ip.set(u,m);for(var T=u.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<T.length;O++){var U=T[O];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(m.set(U.dataset.precedence,U),x=U)}x&&m.set(null,x)}T=d.instance,U=T.getAttribute("data-precedence"),O=m.get(U)||x,O===x&&m.set(null,T),m.set(U,T),this.count++,x=Op.bind(this),T.addEventListener("load",x),T.addEventListener("error",x),O?O.parentNode.insertBefore(T,O.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(T,u.firstChild)),d.state.loading|=4}}var Bf={$$typeof:w,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function cK(u,d,m,x,T,O,U,X,he){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.hiddenUpdates=Va(null),this.identifierPrefix=x,this.onUncaughtError=T,this.onCaughtError=O,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function oR(u,d,m,x,T,O,U,X,he,Ae,$e,ze){return u=new cK(u,d,m,U,he,Ae,$e,ze,X),d=1,O===!0&&(d|=24),O=si(3,null,null,d),u.current=O,O.stateNode=u,d=Ev(),d.refCount++,u.pooledCache=d,d.refCount++,O.memoizedState={element:x,isDehydrated:m,cache:d},Av(O),u}function lR(u){return u?(u=Eu,u):Eu}function uR(u,d,m,x,T,O){T=lR(T),x.context===null?x.context=T:x.pendingContext=T,x=co(d),x.payload={element:m},O=O===void 0?null:O,O!==null&&(x.callback=O),m=fo(u,x,d),m!==null&&(qn(m,u,d),yf(m,u,d))}function cR(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function Kb(u,d){cR(u,d),(u=u.alternate)&&cR(u,d)}function fR(u){if(u.tag===13||u.tag===31){var d=ul(u,67108864);d!==null&&qn(d,u,67108864),Kb(u,67108864)}}function dR(u){if(u.tag===13||u.tag===31){var d=fi();d=ur(d);var m=ul(u,d);m!==null&&qn(m,u,d),Kb(u,d)}}var Rp=!0;function fK(u,d,m,x){var T=K.T;K.T=null;var O=Y.p;try{Y.p=2,zb(u,d,m,x)}finally{Y.p=O,K.T=T}}function dK(u,d,m,x){var T=K.T;K.T=null;var O=Y.p;try{Y.p=8,zb(u,d,m,x)}finally{Y.p=O,K.T=T}}function zb(u,d,m,x){if(Rp){var T=Yb(x);if(T===null)Rb(u,d,x,Pp,m),pR(u,x);else if(pK(T,u,d,m,x))x.stopPropagation();else if(pR(u,x),d&4&&-1<hK.indexOf(u)){for(;T!==null;){var O=fu(T);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var U=jn(O.pendingLanes);if(U!==0){var X=O;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var he=1<<31-Ze(U);X.entanglements[1]|=he,U&=~he}va(O),(kt&6)===0&&(pp=De()+500,Lf(0))}}break;case 31:case 13:X=ul(O,2),X!==null&&qn(X,O,2),gp(),Kb(O,2)}if(O=Yb(x),O===null&&Rb(u,d,x,Pp,m),O===T)break;T=O}T!==null&&x.stopPropagation()}else Rb(u,d,x,null,m)}}function Yb(u){return u=Wy(u),qb(u)}var Pp=null;function qb(u){if(Pp=null,u=cu(u),u!==null){var d=a(u);if(d===null)u=null;else{var m=d.tag;if(m===13){if(u=s(d),u!==null)return u;u=null}else if(m===31){if(u=o(d),u!==null)return u;u=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null)}}return Pp=u,null}function hR(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ft()){case C:return 2;case B:return 8;case q:case de:return 32;case be:return 268435456;default:return 32}default:return 32}}var Wb=!1,wo=null,_o=null,To=null,Uf=new Map,$f=new Map,Ao=[],hK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pR(u,d){switch(u){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Uf.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(d.pointerId)}}function Hf(u,d,m,x,T,O){return u===null||u.nativeEvent!==O?(u={blockedOn:d,domEventName:m,eventSystemFlags:x,nativeEvent:O,targetContainers:[T]},d!==null&&(d=fu(d),d!==null&&fR(d)),u):(u.eventSystemFlags|=x,d=u.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),u)}function pK(u,d,m,x,T){switch(d){case"focusin":return wo=Hf(wo,u,d,m,x,T),!0;case"dragenter":return _o=Hf(_o,u,d,m,x,T),!0;case"mouseover":return To=Hf(To,u,d,m,x,T),!0;case"pointerover":var O=T.pointerId;return Uf.set(O,Hf(Uf.get(O)||null,u,d,m,x,T)),!0;case"gotpointercapture":return O=T.pointerId,$f.set(O,Hf($f.get(O)||null,u,d,m,x,T)),!0}return!1}function mR(u){var d=cu(u.target);if(d!==null){var m=a(d);if(m!==null){if(d=m.tag,d===13){if(d=s(m),d!==null){u.blockedOn=d,no(u.priority,function(){dR(m)});return}}else if(d===31){if(d=o(m),d!==null){u.blockedOn=d,no(u.priority,function(){dR(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Lp(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var m=Yb(u.nativeEvent);if(m===null){m=u.nativeEvent;var x=new m.constructor(m.type,m);qy=x,m.target.dispatchEvent(x),qy=null}else return d=fu(m),d!==null&&fR(d),u.blockedOn=m,!1;d.shift()}return!0}function gR(u,d,m){Lp(u)&&m.delete(d)}function mK(){Wb=!1,wo!==null&&Lp(wo)&&(wo=null),_o!==null&&Lp(_o)&&(_o=null),To!==null&&Lp(To)&&(To=null),Uf.forEach(gR),$f.forEach(gR)}function kp(u,d){u.blockedOn===d&&(u.blockedOn=null,Wb||(Wb=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mK)))}var Mp=null;function yR(u){Mp!==u&&(Mp=u,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Mp===u&&(Mp=null);for(var d=0;d<u.length;d+=3){var m=u[d],x=u[d+1],T=u[d+2];if(typeof x!="function"){if(qb(x||m)===null)continue;break}var O=fu(m);O!==null&&(u.splice(d,3),d-=3,Yv(O,{pending:!0,data:T,method:m.method,action:x},x,T))}}))}function Yu(u){function d(he){return kp(he,u)}wo!==null&&kp(wo,u),_o!==null&&kp(_o,u),To!==null&&kp(To,u),Uf.forEach(d),$f.forEach(d);for(var m=0;m<Ao.length;m++){var x=Ao[m];x.blockedOn===u&&(x.blockedOn=null)}for(;0<Ao.length&&(m=Ao[0],m.blockedOn===null);)mR(m),m.blockedOn===null&&Ao.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var T=m[x],O=m[x+1],U=T[Nr]||null;if(typeof O=="function")U||yR(m);else if(U){var X=null;if(O&&O.hasAttribute("formAction")){if(T=O,U=O[Nr]||null)X=U.formAction;else if(qb(T)!==null)continue}else X=U.action;typeof X=="function"?m[x+1]=X:(m.splice(x,3),x-=3),yR(m)}}}function vR(){function u(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(U){return T=U})},focusReset:"manual",scroll:"manual"})}function d(){T!==null&&(T(),T=null),x||setTimeout(m,20)}function m(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,T=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){x=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),T!==null&&(T(),T=null)}}}function Vb(u){this._internalRoot=u}Np.prototype.render=Vb.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));var m=d.current,x=fi();uR(m,x,u,d,null,null)},Np.prototype.unmount=Vb.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;uR(u.current,2,null,u,null,null),gp(),d[Un]=null}};function Np(u){this._internalRoot=u}Np.prototype.unstable_scheduleHydration=function(u){if(u){var d=Fn();u={blockedOn:null,target:u,priority:d};for(var m=0;m<Ao.length&&d!==0&&d<Ao[m].priority;m++);Ao.splice(m,0,u),m===0&&mR(u)}};var bR=e.version;if(bR!=="19.2.0")throw Error(n(527,bR,"19.2.0"));Y.findDOMNode=function(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=c(d),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var gK={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jp.isDisabled&&jp.supportsFiber)try{ge=jp.inject(gK),_e=jp}catch{}}return Kf.createRoot=function(u,d){if(!i(u))throw Error(n(299));var m=!1,x="",T=AI,O=DI,U=OI;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError)),d=oR(u,1,!1,null,null,m,x,null,T,O,U,vR),u[Un]=d.current,Cb(u),new Vb(d)},Kf.hydrateRoot=function(u,d,m){if(!i(u))throw Error(n(299));var x=!1,T="",O=AI,U=DI,X=OI,he=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(X=m.onRecoverableError),m.formState!==void 0&&(he=m.formState)),d=oR(u,1,!0,d,m??null,x,T,he,O,U,X,vR),d.context=lR(null),m=d.current,x=fi(),x=ur(x),T=co(x),T.callback=null,fo(m,T,x),m=x,d.current.lanes=m,te(d,m),va(d),u[Un]=d.current,Cb(u),new Np(d)},Kf.version="19.2.0",Kf}var IR;function AK(){if(IR)return Zb.exports;IR=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zb.exports=TK(),Zb.exports}var DK=AK();var CR="popstate";function OK(r={}){function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return vE("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Sd(i)}return CK(e,t,null,r)}function pr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ca(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IK(){return Math.random().toString(36).substring(2,10)}function RR(r,e){return{usr:r.state,key:r.key,idx:e}}function vE(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Bc(e):e,state:t,key:e&&e.key||n||IK()}}function Sd({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Bc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function CK(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,c=f();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let v=f(),E=v==null?null:v-c;c=v,l&&l({action:o,location:b.location,delta:E})}function p(v,E){o="PUSH";let S=vE(b.location,v,E);c=f()+1;let w=RR(S,c),A=b.createHref(S);try{s.pushState(w,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(A)}a&&l&&l({action:o,location:b.location,delta:1})}function g(v,E){o="REPLACE";let S=vE(b.location,v,E);c=f();let w=RR(S,c),A=b.createHref(S);s.replaceState(w,"",A),a&&l&&l({action:o,location:b.location,delta:0})}function y(v){return RK(v)}let b={get action(){return o},get location(){return r(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(CR,h),l=v,()=>{i.removeEventListener(CR,h),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let E=y(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:g,go(v){return s.go(v)}};return b}function RK(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Sd(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function cF(r,e,t="/"){return PK(r,e,t,!1)}function PK(r,e,t,n){let i=typeof e=="string"?Bc(e):e,a=Ms(i.pathname||"/",t);if(a==null)return null;let s=fF(r);LK(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=KK(a);o=HK(s[l],c,n)}return o}function fF(r,e=[],t=[],n="",i=!1){let a=(s,o,l=i,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&l)return;pr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let h=Is([n,f.relativePath]),p=t.concat(f);s.children&&s.children.length>0&&(pr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),fF(s.children,e,p,h,l)),!(s.path==null&&!s.index)&&e.push({path:h,score:UK(h,s.index),routesMeta:p})};return r.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let l of dF(s.path))a(s,o,!0,l)}),e}function dF(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=dF(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function LK(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:$K(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var kK=/^:[\w-]+$/,MK=3,NK=2,jK=1,FK=10,BK=-2,PR=r=>r==="*";function UK(r,e){let t=r.split("/"),n=t.length;return t.some(PR)&&(n+=BK),e&&(n+=NK),t.filter(i=>!PR(i)).reduce((i,a)=>i+(kK.test(a)?MK:a===""?jK:FK),n)}function $K(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function HK(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=vg({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),p=l.route;if(!h&&c&&t&&!n[n.length-1].route.index&&(h=vg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Is([a,h.pathname]),pathnameBase:VK(Is([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Is([a,h.pathnameBase]))}return s}function vg(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=GK(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:f,isOptional:h},p)=>{if(f==="*"){let y=o[p]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[p];return h&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:r}}function GK(r,e=!1,t=!0){ca(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function KK(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ca(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ms(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var zK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YK=r=>zK.test(r);function qK(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Bc(r):r,a;if(t)if(YK(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),ca(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${t}`)}t.startsWith("/")?a=LR(t.substring(1),"/"):a=LR(t,e)}else a=e;return{pathname:a,search:QK(n),hash:XK(i)}}function LR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function rx(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WK(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hF(r){let e=WK(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function pF(r,e,t,n=!1){let i;typeof r=="string"?i=Bc(r):(i={...r},pr(!i.pathname||!i.pathname.includes("?"),rx("?","pathname","search",i)),pr(!i.pathname||!i.pathname.includes("#"),rx("#","pathname","hash",i)),pr(!i.search||!i.search.includes("#"),rx("#","search","hash",i)));let a=r===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let h=e.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=qK(i,o),c=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var Is=r=>r.join("/").replace(/\/\/+/g,"/"),VK=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),QK=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,XK=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ZK(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mF=["POST","PUT","PATCH","DELETE"];new Set(mF);var JK=["GET",...mF];new Set(JK);var Uc=R.createContext(null);Uc.displayName="DataRouter";var j0=R.createContext(null);j0.displayName="DataRouterState";R.createContext(!1);var gF=R.createContext({isTransitioning:!1});gF.displayName="ViewTransition";var ez=R.createContext(new Map);ez.displayName="Fetchers";var tz=R.createContext(null);tz.displayName="Await";var Ya=R.createContext(null);Ya.displayName="Navigation";var Vd=R.createContext(null);Vd.displayName="Location";var zs=R.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var qT=R.createContext(null);qT.displayName="RouteError";function rz(r,{relative:e}={}){pr(Qd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=R.useContext(Ya),{hash:i,pathname:a,search:s}=Xd(r,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:Is([t,a])),n.createHref({pathname:o,search:s,hash:i})}function Qd(){return R.useContext(Vd)!=null}function ru(){return pr(Qd(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Vd).location}var yF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vF(r){R.useContext(Ya).static||R.useLayoutEffect(r)}function nz(){let{isDataRoute:r}=R.useContext(zs);return r?gz():iz()}function iz(){pr(Qd(),"useNavigate() may be used only in the context of a <Router> component.");let r=R.useContext(Uc),{basename:e,navigator:t}=R.useContext(Ya),{matches:n}=R.useContext(zs),{pathname:i}=ru(),a=JSON.stringify(hF(n)),s=R.useRef(!1);return vF(()=>{s.current=!0}),R.useCallback((l,c={})=>{if(ca(s.current,yF),!s.current)return;if(typeof l=="number"){t.go(l);return}let f=pF(l,JSON.parse(a),i,c.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Is([e,f.pathname])),(c.replace?t.replace:t.push)(f,c.state,c)},[e,t,a,i,r])}R.createContext(null);function Xd(r,{relative:e}={}){let{matches:t}=R.useContext(zs),{pathname:n}=ru(),i=JSON.stringify(hF(t));return R.useMemo(()=>pF(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function az(r,e){return bF(r,e)}function bF(r,e,t,n,i){pr(Qd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(Ya),{matches:s}=R.useContext(zs),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let S=h&&h.path||"";xF(c,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=ru(),g;if(e){let S=typeof e=="string"?Bc(e):e;pr(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let y=g.pathname||"/",b=y;if(f!=="/"){let S=f.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=cF(r,{pathname:b});ca(h||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ca(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=cz(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Is([f,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:Is([f,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),s,t,n,i);return e&&E?R.createElement(Vd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function sz(){let r=mz(),e=ZK(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",r),s=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,s)}var oz=R.createElement(sz,null),lz=class extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?R.createElement(zs.Provider,{value:this.props.routeContext},R.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uz({routeContext:r,match:e,children:t}){let n=R.useContext(Uc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(zs.Provider,{value:r},t)}function cz(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,s=t?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);pr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,l=-1;if(t)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=f),h.route.id){let{loaderData:p,errors:g}=t,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=t&&n?(f,h)=>{n(f,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:h})}:void 0;return a.reduceRight((f,h,p)=>{let g,y=!1,b=null,v=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||oz,o&&(l<0&&p===0?(xF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):l===p&&(y=!0,v=h.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,p+1)),S=()=>{let w;return g?w=b:y?w=v:h.route.Component?w=R.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=f,R.createElement(uz,{match:h,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?R.createElement(lz,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:c}):S()},null)}function WT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fz(r){let e=R.useContext(Uc);return pr(e,WT(r)),e}function dz(r){let e=R.useContext(j0);return pr(e,WT(r)),e}function hz(r){let e=R.useContext(zs);return pr(e,WT(r)),e}function VT(r){let e=hz(r),t=e.matches[e.matches.length-1];return pr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function pz(){return VT("useRouteId")}function mz(){let r=R.useContext(qT),e=dz("useRouteError"),t=VT("useRouteError");return r!==void 0?r:e.errors?.[t]}function gz(){let{router:r}=fz("useNavigate"),e=VT("useNavigate"),t=R.useRef(!1);return vF(()=>{t.current=!0}),R.useCallback(async(i,a={})=>{ca(t.current,yF),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var kR={};function xF(r,e,t){!e&&!kR[r]&&(kR[r]=!0,ca(!1,t))}R.memo(yz);function yz({routes:r,future:e,state:t,unstable_onError:n}){return bF(r,void 0,t,n,e)}function bE(r){pr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vz({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){pr(!Qd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=r.replace(/^\/*/,"/"),o=R.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=Bc(t));let{pathname:l="/",search:c="",hash:f="",state:h=null,key:p="default"}=t,g=R.useMemo(()=>{let y=Ms(l,s);return y==null?null:{location:{pathname:y,search:c,hash:f,state:h,key:p},navigationType:n}},[s,l,c,f,h,p,n]);return ca(g!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:R.createElement(Ya.Provider,{value:o},R.createElement(Vd.Provider,{children:e,value:g}))}function bz({children:r,location:e}){return az(xE(r),e)}function xE(r,e=[]){let t=[];return R.Children.forEach(r,(n,i)=>{if(!R.isValidElement(n))return;let a=[...e,i];if(n.type===R.Fragment){t.push.apply(t,xE(n.props.children,a));return}pr(n.type===bE,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=xE(n.props.children,a)),t.push(s)}),t}var Dm="get",Om="application/x-www-form-urlencoded";function F0(r){return r!=null&&typeof r.tagName=="string"}function xz(r){return F0(r)&&r.tagName.toLowerCase()==="button"}function Sz(r){return F0(r)&&r.tagName.toLowerCase()==="form"}function Ez(r){return F0(r)&&r.tagName.toLowerCase()==="input"}function wz(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function _z(r,e){return r.button===0&&(!e||e==="_self")&&!wz(r)}var Fp=null;function Tz(){if(Fp===null)try{new FormData(document.createElement("form"),0),Fp=!1}catch{Fp=!0}return Fp}var Az=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nx(r){return r!=null&&!Az.has(r)?(ca(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Om}"`),null):r}function Dz(r,e){let t,n,i,a,s;if(Sz(r)){let o=r.getAttribute("action");n=o?Ms(o,e):null,t=r.getAttribute("method")||Dm,i=nx(r.getAttribute("enctype"))||Om,a=new FormData(r)}else if(xz(r)||Ez(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ms(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Dm,i=nx(r.getAttribute("formenctype"))||nx(o.getAttribute("enctype"))||Om,a=new FormData(o,r),!Tz()){let{name:c,type:f,value:h}=r;if(f==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,h)}}else{if(F0(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dm,n=null,i=Om,s=r}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function QT(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Oz(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ms(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function Iz(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cz(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Rz(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Iz(a,t);return s.links?s.links():[]}return[]}));return Mz(n.flat(1).filter(Cz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function MR(r,e,t,n,i,a){let s=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>t[c].pathname!==l.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==l.params["*"];return a==="assets"?e.filter((l,c)=>s(l,c)||o(l,c)):a==="data"?e.filter((l,c)=>{let f=n.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Pz(r,e,{includeHydrateFallback:t}={}){return Lz(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Lz(r){return[...new Set(r)]}function kz(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Mz(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(kz(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function SF(){let r=R.useContext(Uc);return QT(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Nz(){let r=R.useContext(j0);return QT(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var XT=R.createContext(void 0);XT.displayName="FrameworkContext";function EF(){let r=R.useContext(XT);return QT(r,"You must render this element inside a <HydratedRouter> element"),r}function jz(r,e){let t=R.useContext(XT),[n,i]=R.useState(!1),[a,s]=R.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:h}=e,p=R.useRef(null);R.useEffect(()=>{if(r==="render"&&s(!0),r==="viewport"){let b=E=>{E.forEach(S=>{s(S.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[r]),R.useEffect(()=>{if(n){let b=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(b)}}},[n]);let g=()=>{i(!0)},y=()=>{i(!1),s(!1)};return t?r!=="intent"?[a,p,{}]:[a,p,{onFocus:zf(o,g),onBlur:zf(l,y),onMouseEnter:zf(c,g),onMouseLeave:zf(f,y),onTouchStart:zf(h,g)}]:[!1,p,{}]}function zf(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Fz({page:r,...e}){let{router:t}=SF(),n=R.useMemo(()=>cF(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?R.createElement(Uz,{page:r,matches:n,...e}):null}function Bz(r){let{manifest:e,routeModules:t}=EF(),[n,i]=R.useState([]);return R.useEffect(()=>{let a=!1;return Rz(r,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[r,e,t]),n}function Uz({page:r,matches:e,...t}){let n=ru(),{manifest:i,routeModules:a}=EF(),{basename:s}=SF(),{loaderData:o,matches:l}=Nz(),c=R.useMemo(()=>MR(r,e,l,i,n,"data"),[r,e,l,i,n]),f=R.useMemo(()=>MR(r,e,l,i,n,"assets"),[r,e,l,i,n]),h=R.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,b=!1;if(e.forEach(E=>{let S=i.routes[E.route.id];!S||!S.hasLoader||(!c.some(w=>w.route.id===E.route.id)&&E.route.id in o&&a[E.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:y.add(E.route.id))}),y.size===0)return[];let v=Oz(r,s,"data");return b&&y.size>0&&v.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[v.pathname+v.search]},[s,o,n,i,c,e,r,a]),p=R.useMemo(()=>Pz(f,i),[f,i]),g=Bz(f);return R.createElement(R.Fragment,null,h.map(y=>R.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),p.map(y=>R.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:b})=>R.createElement("link",{key:y,nonce:t.nonce,...b})))}function $z(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wF&&(window.__reactRouterVersion="7.9.6")}catch{}function Hz({basename:r,children:e,window:t}){let n=R.useRef();n.current==null&&(n.current=OK({window:t,v5Compat:!0}));let i=n.current,[a,s]=R.useState({action:i.action,location:i.location}),o=R.useCallback(l=>{R.startTransition(()=>s(l))},[s]);return R.useLayoutEffect(()=>i.listen(o),[i,o]),R.createElement(vz,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var _F=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TF=R.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:f,viewTransition:h,...p},g){let{basename:y}=R.useContext(Ya),b=typeof c=="string"&&_F.test(c),v,E=!1;if(typeof c=="string"&&b&&(v=c,wF))try{let k=new URL(window.location.href),M=c.startsWith("//")?new URL(k.protocol+c):new URL(c),H=Ms(M.pathname,y);M.origin===k.origin&&H!=null?c=H+M.search+M.hash:E=!0}catch{ca(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=rz(c,{relative:i}),[w,A,_]=jz(n,p),I=Yz(c,{replace:s,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:h});function D(k){e&&e(k),k.defaultPrevented||I(k)}let P=R.createElement("a",{...p,..._,href:v||S,onClick:E||a?e:D,ref:$z(g,A),target:l,"data-discover":!b&&t==="render"?"true":void 0});return w&&!b?R.createElement(R.Fragment,null,P,R.createElement(Fz,{page:S})):P});TF.displayName="Link";var Gz=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...c},f){let h=Xd(s,{relative:c.relative}),p=ru(),g=R.useContext(j0),{navigator:y,basename:b}=R.useContext(Ya),v=g!=null&&Xz(h)&&o===!0,E=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,S=p.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),w=w?w.toLowerCase():null,E=E.toLowerCase()),w&&b&&(w=Ms(w,b)||w);const A=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let _=S===E||!i&&S.startsWith(E)&&S.charAt(A)==="/",I=w!=null&&(w===E||!i&&w.startsWith(E)&&w.charAt(E.length)==="/"),D={isActive:_,isPending:I,isTransitioning:v},P=_?e:void 0,k;typeof n=="function"?k=n(D):k=[n,_?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(D):a;return R.createElement(TF,{...c,"aria-current":P,className:k,ref:f,style:M,to:s,viewTransition:o},typeof l=="function"?l(D):l)});Gz.displayName="NavLink";var Kz=R.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:s=Dm,action:o,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:h,...p},g)=>{let y=Vz(),b=Qz(o,{relative:c}),v=s.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&_F.test(o),S=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let A=w.nativeEvent.submitter,_=A?.getAttribute("formmethod")||s;y(A||w.currentTarget,{fetcherKey:e,method:_,navigate:t,replace:i,state:a,relative:c,preventScrollReset:f,viewTransition:h})};return R.createElement("form",{ref:g,method:v,action:b,onSubmit:n?l:S,...p,"data-discover":!E&&r==="render"?"true":void 0})});Kz.displayName="Form";function zz(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AF(r){let e=R.useContext(Uc);return pr(e,zz(r)),e}function Yz(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=nz(),l=ru(),c=Xd(r,{relative:a});return R.useCallback(f=>{if(_z(f,e)){f.preventDefault();let h=t!==void 0?t:Sd(l)===Sd(c);o(r,{replace:h,state:n,preventScrollReset:i,relative:a,viewTransition:s})}},[l,o,c,t,n,e,r,i,a,s])}var qz=0,Wz=()=>`__${String(++qz)}__`;function Vz(){let{router:r}=AF("useSubmit"),{basename:e}=R.useContext(Ya),t=pz();return R.useCallback(async(n,i={})=>{let{action:a,method:s,encType:o,formData:l,body:c}=Dz(n,e);if(i.navigate===!1){let f=i.fetcherKey||Wz();await r.fetch(f,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function Qz(r,{relative:e}={}){let{basename:t}=R.useContext(Ya),n=R.useContext(zs);pr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Xd(r||".",{relative:e})},s=ru();if(r==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(f=>f==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Is([t,a.pathname])),Sd(a)}function Xz(r,{relative:e}={}){let t=R.useContext(gF);pr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=AF("useViewTransitionState"),i=Xd(r,{relative:e});if(!t.isTransitioning)return!1;let a=Ms(t.currentLocation.pathname,n)||t.currentLocation.pathname,s=Ms(t.nextLocation.pathname,n)||t.nextLocation.pathname;return vg(i.pathname,s)!=null||vg(i.pathname,a)!=null}var Zd=uF();const Zz=za(Zd);function Jz({connectionState:r}){const[e,t]=R.useState(new Date);R.useEffect(()=>{const i=setInterval(()=>{t(new Date)},5e3);return()=>clearInterval(i)},[]);const n=()=>{switch(r){case"connected":return L.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-farm-100 text-farm-700 text-xs font-medium",children:[L.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-farm-500"}),"Connected"]});case"connecting":return L.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-medium",children:[L.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Connecting"]});case"disconnected":return L.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[L.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Disconnected"]});case"error":return L.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[L.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Error"]})}};return L.jsx("header",{className:"bg-farm-500 shadow-lg flex-shrink-0",children:L.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 py-3",children:L.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("div",{className:"text-lg font-bold text-gray-900",children:" | Tansaeng SmartFarm"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("a",{href:"/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""}),L.jsx("a",{href:"/admin/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""})]})]}),L.jsx("div",{className:"text-sm font-medium text-gray-800",children:e.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),L.jsx("div",{className:"flex items-center gap-2",children:n()})]})})})}const eY=[{id:"devices",label:" ",icon:""},{id:"mist",label:"",icon:""},{id:"environment",label:" ",icon:""},{id:"cameras",label:"",icon:""},{id:"settings",label:"",icon:""}];function tY({activeTab:r,onTabChange:e}){return L.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:L.jsx("div",{className:"max-w-screen-2xl mx-auto px-2 sm:px-4",children:L.jsx("div",{className:"flex justify-start sm:justify-center gap-1 overflow-x-auto scrollbar-hide",children:eY.map(t=>L.jsxs("button",{onClick:()=>e(t.id),className:`
                flex items-center gap-1.5 px-3 sm:px-4 py-3 text-xs sm:text-sm font-medium
                transition-all duration-200 whitespace-nowrap border-b-2 flex-shrink-0
                ${r===t.id?"border-farm-500 bg-farm-50 text-farm-700":"border-transparent text-gray-500 hover:bg-gray-50 hover:text-farm-700"}
              `,children:[L.jsx("span",{className:"text-base sm:text-lg",children:t.icon}),L.jsx("span",{className:"hidden xs:inline sm:inline",children:t.label})]},t.id))})})})}const SE=[{id:"fan_front",name:" ",type:"fan",esp32Id:"ctlr-0001",commandTopic:"tansaeng/ctlr-0001/fan1/cmd",stateTopic:"tansaeng/ctlr-0001/fan1/state"},{id:"fan_back",name:" ",type:"fan",esp32Id:"ctlr-0002",commandTopic:"tansaeng/ctlr-0002/fan2/cmd",stateTopic:"tansaeng/ctlr-0002/fan2/state"},{id:"fan_top",name:"",type:"fan",esp32Id:"esp32-node-1",commandTopic:"tansaeng/esp32-node-1/fan_top/cmd",stateTopic:"tansaeng/esp32-node-1/fan_top/state"},{id:"skylight_left",name:" ",type:"skylight",esp32Id:"ctlr-0012",commandTopic:"tansaeng/ctlr-0012/windowL/cmd",stateTopic:"tansaeng/ctlr-0012/windowL/state",extra:{supportsWindowControl:!0}},{id:"skylight_right",name:" ",type:"skylight",esp32Id:"ctlr-0012",commandTopic:"tansaeng/ctlr-0012/windowR/cmd",stateTopic:"tansaeng/ctlr-0012/windowR/state",extra:{supportsWindowControl:!0}},{id:"sidescreen_left",name:" ",type:"sidescreen",esp32Id:"ctlr-0021",commandTopic:"tansaeng/ctlr-0021/sideL/cmd",stateTopic:"tansaeng/ctlr-0021/sideL/state",extra:{supportsWindowControl:!0}},{id:"sidescreen_right",name:" ",type:"sidescreen",esp32Id:"ctlr-0021",commandTopic:"tansaeng/ctlr-0021/sideR/cmd",stateTopic:"tansaeng/ctlr-0021/sideR/state",extra:{supportsWindowControl:!0}},{id:"pump_nutrient_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/state"},{id:"pump_water_curtain",name:"",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_water_curtain/cmd",stateTopic:"tansaeng/esp32-node-3/pump_water_curtain/state"},{id:"pump_heating_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_heating_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_heating_fill/state"}];function Yf(r){return SE.filter(e=>e.type===r)}const qf=[{id:"esp32-in-fan-front",name:" ",controllerId:"ctlr-0001",statusTopic:"tansaeng/ctlr-0001/status"},{id:"esp32-in-fan-back",name:" ",controllerId:"ctlr-0002",statusTopic:"tansaeng/ctlr-0002/status"},{id:"esp32-in-top",name:" ",controllerId:"ctlr-0003",statusTopic:"tansaeng/ctlr-0003/status"},{id:"esp32-in-main-val",name:" ",controllerId:"ctlr-0004",statusTopic:"tansaeng/ctlr-0004/status"},{id:"esp32-in-line-val",name:" ",controllerId:"ctlr-0005",statusTopic:"tansaeng/ctlr-0005/status"},{id:"esp32-out-pressur-pump",name:" ",controllerId:"ctlr-0006",statusTopic:"tansaeng/ctlr-0006/status"},{id:"esp32-out-insert-pump",name:" ",controllerId:"ctlr-0007",statusTopic:"tansaeng/ctlr-0007/status"},{id:"esp32-out-hit-pump-val",name:" ",controllerId:"ctlr-0008",statusTopic:"tansaeng/ctlr-0008/status"},{id:"esp32-out-chiller-pump",name:" ",controllerId:"ctlr-0009",statusTopic:"tansaeng/ctlr-0009/status"},{id:"esp32-in-chil-hit-pump",name:"/  ",controllerId:"ctlr-0010",statusTopic:"tansaeng/ctlr-0010/status"},{id:"esp32-out-skylight-screen",name:" ",controllerId:"ctlr-0012",statusTopic:"tansaeng/ctlr-0012/status"},{id:"esp32-out-side-screen",name:" ",controllerId:"ctlr-0021",statusTopic:"tansaeng/ctlr-0021/status"},{id:"esp32-out-top-chillerline-pump-valve",name:"   ",controllerId:"ctlr-0013",statusTopic:"tansaeng/ctlr-0013/status"}];function NR({device:r,power:e,percentage:t,lastSavedAt:n,onToggle:i,onPercentageChange:a}){const s=e==="on",o=()=>r.type==="fan"?"":r.type==="vent"?"":r.type==="pump"?"":"";return L.jsxs("div",{className:"bg-white rounded-lg shadow-card hover:shadow-card-hover transition-all duration-200 p-3 border border-gray-200",children:[L.jsxs("div",{className:"flex items-center justify-between mb-2",children:[L.jsxs("div",{className:"flex items-center gap-1.5",children:[L.jsx("div",{className:"text-2xl",children:o()}),L.jsxs("div",{children:[L.jsx("h3",{className:"text-sm font-bold text-gray-800 m-0",children:r.name}),L.jsx("p",{className:"text-2xs text-gray-500 m-0",children:r.type==="fan"?"":r.type==="vent"?"":""})]})]}),!r.extra?.supportsPercentage&&L.jsxs("div",{className:"flex flex-col items-end gap-1",children:[L.jsx("button",{onClick:()=>i?.(!s),className:`
                relative inline-flex h-9 w-18 cursor-pointer rounded-full
                border-2 border-transparent transition-all duration-300
                ${s?"bg-farm-500":"bg-gray-300"}
              `,role:"switch","aria-checked":s,children:L.jsx("span",{className:`
                flex items-center justify-center h-8 w-8 rounded-full
                bg-white shadow-md transition-transform duration-300
                ${s?"translate-x-9":"translate-x-0"}
              `,children:s?L.jsx("svg",{className:"w-4 h-4 text-farm-500",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):L.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),L.jsx("span",{className:`text-xs font-semibold ${s?"text-farm-500":"text-gray-500"}`,children:s?"ON":"OFF"})]})]}),r.extra?.supportsPercentage&&L.jsxs("div",{className:"mb-3",children:[L.jsxs("div",{className:"flex items-center justify-between mb-2",children:[L.jsx("span",{className:"text-xs font-medium text-gray-600",children:" "}),L.jsxs("span",{className:"text-2xl font-bold text-farm-500",children:[t??0,"%"]})]}),L.jsx("input",{type:"range",min:"0",max:"100",value:t??0,onChange:l=>a?.(Number(l.target.value)),className:"slider-thumb w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${t??0}%, #e5e7eb ${t??0}%, #e5e7eb 100%)`}}),L.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[L.jsx("span",{children:""}),L.jsx("span",{children:""})]})]}),L.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[L.jsxs("div",{className:"flex items-center gap-1.5",children:[L.jsx("div",{className:`
            w-1.5 h-1.5 rounded-full
            ${s?"bg-farm-500 animate-pulse":"bg-gray-400"}
          `}),L.jsx("span",{className:`
            text-2xs font-semibold
            ${s?"text-farm-700":"text-gray-600"}
          `,children:s?" ":""})]}),L.jsx("div",{className:"text-2xs text-gray-400",children:n?new Date(n).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]})]})}var ZT=Object.defineProperty,rY=Object.getOwnPropertyDescriptor,nY=Object.getOwnPropertyNames,iY=Object.prototype.hasOwnProperty,ti=(r,e)=>()=>(r&&(e=r(r=0)),e),He=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),$c=(r,e)=>{for(var t in e)ZT(r,t,{get:e[t],enumerable:!0})},aY=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nY(e))!iY.call(r,i)&&i!==t&&ZT(r,i,{get:()=>e[i],enumerable:!(n=rY(e,i))||n.enumerable});return r},qt=r=>aY(ZT({},"__esModule",{value:!0}),r),Me=ti(()=>{}),Jt={};$c(Jt,{_debugEnd:()=>tw,_debugProcess:()=>ew,_events:()=>gw,_eventsCount:()=>yw,_exiting:()=>UE,_fatalExceptions:()=>XE,_getActiveHandles:()=>LF,_getActiveRequests:()=>PF,_kill:()=>GE,_linkedBinding:()=>CF,_maxListeners:()=>mw,_preload_modules:()=>hw,_rawDebug:()=>jE,_startProfilerIdleNotifier:()=>rw,_stopProfilerIdleNotifier:()=>nw,_tickCallback:()=>JE,abort:()=>ow,addListener:()=>vw,allowedNodeEnvironmentFlags:()=>VE,arch:()=>wE,argv:()=>AE,argv0:()=>dw,assert:()=>kF,binding:()=>RE,browser:()=>NE,chdir:()=>kE,config:()=>$E,cpuUsage:()=>sd,cwd:()=>LE,debugPort:()=>fw,default:()=>e1,dlopen:()=>RF,domain:()=>BE,emit:()=>ww,emitWarning:()=>CE,env:()=>TE,execArgv:()=>DE,execPath:()=>cw,exit:()=>qE,features:()=>QE,hasUncaughtExceptionCaptureCallback:()=>MF,hrtime:()=>Im,kill:()=>YE,listeners:()=>jF,memoryUsage:()=>zE,moduleLoadList:()=>FE,nextTick:()=>OF,off:()=>xw,on:()=>ys,once:()=>bw,openStdin:()=>WE,pid:()=>lw,platform:()=>_E,ppid:()=>uw,prependListener:()=>_w,prependOnceListener:()=>Tw,reallyExit:()=>HE,release:()=>ME,removeAllListeners:()=>Ew,removeListener:()=>Sw,resourceUsage:()=>KE,setSourceMapsEnabled:()=>pw,setUncaughtExceptionCaptureCallback:()=>ZE,stderr:()=>aw,stdin:()=>sw,stdout:()=>iw,title:()=>EE,umask:()=>PE,uptime:()=>NF,version:()=>OE,versions:()=>IE});function JT(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function sY(){!Bl||!Pl||(Bl=!1,Pl.length?Oa=Pl.concat(Oa):md=-1,Oa.length&&DF())}function DF(){if(!Bl){var r=setTimeout(sY,0);Bl=!0;for(var e=Oa.length;e;){for(Pl=Oa,Oa=[];++md<e;)Pl&&Pl[md].run();md=-1,e=Oa.length}Pl=null,Bl=!1,clearTimeout(r)}}function OF(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Oa.push(new IF(r,e)),Oa.length===1&&!Bl&&setTimeout(DF,0)}function IF(r,e){this.fun=r,this.array=e}function mn(){}function CF(r){JT("_linkedBinding")}function RF(r){JT("dlopen")}function PF(){return[]}function LF(){return[]}function kF(r,e){if(!r)throw new Error(e||"assertion error")}function MF(){return!1}function NF(){return Ss.now()/1e3}function Im(r){var e=Math.floor((Date.now()-Ss.now())*.001),t=Ss.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=Cm)),[n,i]}function ys(){return e1}function jF(r){return[]}var Oa,Bl,Pl,md,EE,wE,_E,TE,AE,DE,OE,IE,CE,RE,PE,LE,kE,ME,NE,jE,FE,BE,UE,$E,HE,GE,sd,KE,zE,YE,qE,WE,VE,QE,XE,ZE,JE,ew,tw,rw,nw,iw,aw,sw,ow,lw,uw,cw,fw,dw,hw,pw,Ss,ix,Cm,mw,gw,yw,vw,bw,xw,Sw,Ew,ww,_w,Tw,e1,oY=ti(()=>{Me(),je(),Ne(),Oa=[],Bl=!1,md=-1,IF.prototype.run=function(){this.fun.apply(null,this.array)},EE="browser",wE="x64",_E="browser",TE={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},AE=["/usr/bin/node"],DE=[],OE="v16.8.0",IE={},CE=function(r,e){console.warn((e?e+": ":"")+r)},RE=function(r){JT("binding")},PE=function(r){return 0},LE=function(){return"/"},kE=function(r){},ME={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},NE=!0,jE=mn,FE=[],BE={},UE=!1,$E={},HE=mn,GE=mn,sd=function(){return{}},KE=sd,zE=sd,YE=mn,qE=mn,WE=mn,VE={},QE={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},XE=mn,ZE=mn,JE=mn,ew=mn,tw=mn,rw=mn,nw=mn,iw=void 0,aw=void 0,sw=void 0,ow=mn,lw=2,uw=1,cw="/bin/usr/node",fw=9229,dw="node",hw=[],pw=mn,Ss={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Ss.now===void 0&&(ix=Date.now(),Ss.timing&&Ss.timing.navigationStart&&(ix=Ss.timing.navigationStart),Ss.now=()=>Date.now()-ix),Cm=1e9,Im.bigint=function(r){var e=Im(r);return typeof BigInt>"u"?e[0]*Cm+e[1]:BigInt(e[0]*Cm)+BigInt(e[1])},mw=10,gw={},yw=0,vw=ys,bw=ys,xw=ys,Sw=ys,Ew=ys,ww=mn,_w=ys,Tw=ys,e1={version:OE,versions:IE,arch:wE,platform:_E,browser:NE,release:ME,_rawDebug:jE,moduleLoadList:FE,binding:RE,_linkedBinding:CF,_events:gw,_eventsCount:yw,_maxListeners:mw,on:ys,addListener:vw,once:bw,off:xw,removeListener:Sw,removeAllListeners:Ew,emit:ww,prependListener:_w,prependOnceListener:Tw,listeners:jF,domain:BE,_exiting:UE,config:$E,dlopen:RF,uptime:NF,_getActiveRequests:PF,_getActiveHandles:LF,reallyExit:HE,_kill:GE,cpuUsage:sd,resourceUsage:KE,memoryUsage:zE,kill:YE,exit:qE,openStdin:WE,allowedNodeEnvironmentFlags:VE,assert:kF,features:QE,_fatalExceptions:XE,setUncaughtExceptionCaptureCallback:ZE,hasUncaughtExceptionCaptureCallback:MF,emitWarning:CE,nextTick:OF,_tickCallback:JE,_debugProcess:ew,_debugEnd:tw,_startProfilerIdleNotifier:rw,_stopProfilerIdleNotifier:nw,stdout:iw,stdin:sw,stderr:aw,abort:ow,umask:PE,chdir:kE,cwd:LE,env:TE,title:EE,argv:AE,execArgv:DE,pid:lw,ppid:uw,execPath:cw,debugPort:fw,hrtime:Im,argv0:dw,_preload_modules:hw,setSourceMapsEnabled:pw}}),Ne=ti(()=>{oY()});function lY(){if(Aw)return nc;Aw=!0,nc.byteLength=o,nc.toByteArray=c,nc.fromByteArray=p;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");b===-1&&(b=y);var v=b===y?0:4-b%4;return[b,v]}function o(g){var y=s(g),b=y[0],v=y[1];return(b+v)*3/4-v}function l(g,y,b){return(y+b)*3/4-b}function c(g){var y,b=s(g),v=b[0],E=b[1],S=new t(l(g,v,E)),w=0,A=E>0?v-4:v,_;for(_=0;_<A;_+=4)y=e[g.charCodeAt(_)]<<18|e[g.charCodeAt(_+1)]<<12|e[g.charCodeAt(_+2)]<<6|e[g.charCodeAt(_+3)],S[w++]=y>>16&255,S[w++]=y>>8&255,S[w++]=y&255;return E===2&&(y=e[g.charCodeAt(_)]<<2|e[g.charCodeAt(_+1)]>>4,S[w++]=y&255),E===1&&(y=e[g.charCodeAt(_)]<<10|e[g.charCodeAt(_+1)]<<4|e[g.charCodeAt(_+2)]>>2,S[w++]=y>>8&255,S[w++]=y&255),S}function f(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,y,b){for(var v,E=[],S=y;S<b;S+=3)v=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(g[S+2]&255),E.push(f(v));return E.join("")}function p(g){for(var y,b=g.length,v=b%3,E=[],S=16383,w=0,A=b-v;w<A;w+=S)E.push(h(g,w,w+S>A?A:w+S));return v===1?(y=g[b-1],E.push(r[y>>2]+r[y<<4&63]+"==")):v===2&&(y=(g[b-2]<<8)+g[b-1],E.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),E.join("")}return nc}function uY(){return Dw?od:(Dw=!0,od.read=function(r,e,t,n,i){var a,s,o=i*8-n-1,l=(1<<o)-1,c=l>>1,f=-7,h=t?i-1:0,p=t?-1:1,g=r[e+h];for(h+=p,a=g&(1<<-f)-1,g>>=-f,f+=o;f>0;a=a*256+r[e+h],h+=p,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=p,f-=8);if(a===0)a=1-c;else{if(a===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(g?-1:1)*s*Math.pow(2,a-n)},od.write=function(r,e,t,n,i,a){var s,o,l,c=a*8-i-1,f=(1<<c)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,y=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?e+=p/l:e+=p*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=f?(o=0,s=f):s+h>=1?(o=(e*l-1)*Math.pow(2,i),s=s+h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=o&255,g+=y,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;r[t+g]=s&255,g+=y,s/=256,c-=8);r[t+g-y]|=b*128},od)}function cY(){if(Ow)return Po;Ow=!0;let r=lY(),e=uY(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Po.Buffer=s,Po.SlowBuffer=E,Po.INSPECT_MAX_BYTES=50;let n=2147483647;Po.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let C=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(C,B),C.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(C){if(C>n)throw new RangeError('The value "'+C+'" is invalid for option "size"');let B=new Uint8Array(C);return Object.setPrototypeOf(B,s.prototype),B}function s(C,B,q){if(typeof C=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(C)}return o(C,B,q)}s.poolSize=8192;function o(C,B,q){if(typeof C=="string")return h(C,B);if(ArrayBuffer.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(pe(C,ArrayBuffer)||C&&pe(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(C,SharedArrayBuffer)||C&&pe(C.buffer,SharedArrayBuffer)))return y(C,B,q);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let de=C.valueOf&&C.valueOf();if(de!=null&&de!==C)return s.from(de,B,q);let be=b(C);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return s.from(C[Symbol.toPrimitive]("string"),B,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}s.from=function(C,B,q){return o(C,B,q)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function c(C,B,q){return l(C),C<=0?a(C):B!==void 0?typeof q=="string"?a(C).fill(B,q):a(C).fill(B):a(C)}s.alloc=function(C,B,q){return c(C,B,q)};function f(C){return l(C),a(C<0?0:v(C)|0)}s.allocUnsafe=function(C){return f(C)},s.allocUnsafeSlow=function(C){return f(C)};function h(C,B){if((typeof B!="string"||B==="")&&(B="utf8"),!s.isEncoding(B))throw new TypeError("Unknown encoding: "+B);let q=S(C,B)|0,de=a(q),be=de.write(C,B);return be!==q&&(de=de.slice(0,be)),de}function p(C){let B=C.length<0?0:v(C.length)|0,q=a(B);for(let de=0;de<B;de+=1)q[de]=C[de]&255;return q}function g(C){if(pe(C,Uint8Array)){let B=new Uint8Array(C);return y(B.buffer,B.byteOffset,B.byteLength)}return p(C)}function y(C,B,q){if(B<0||C.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<B+(q||0))throw new RangeError('"length" is outside of buffer bounds');let de;return B===void 0&&q===void 0?de=new Uint8Array(C):q===void 0?de=new Uint8Array(C,B):de=new Uint8Array(C,B,q),Object.setPrototypeOf(de,s.prototype),de}function b(C){if(s.isBuffer(C)){let B=v(C.length)|0,q=a(B);return q.length===0||C.copy(q,0,0,B),q}if(C.length!==void 0)return typeof C.length!="number"||Fe(C.length)?a(0):p(C);if(C.type==="Buffer"&&Array.isArray(C.data))return p(C.data)}function v(C){if(C>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return C|0}function E(C){return+C!=C&&(C=0),s.alloc(+C)}s.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==s.prototype},s.compare=function(C,B){if(pe(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),pe(B,Uint8Array)&&(B=s.from(B,B.offset,B.byteLength)),!s.isBuffer(C)||!s.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===B)return 0;let q=C.length,de=B.length;for(let be=0,Pe=Math.min(q,de);be<Pe;++be)if(C[be]!==B[be]){q=C[be],de=B[be];break}return q<de?-1:de<q?1:0},s.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(C,B){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return s.alloc(0);let q;if(B===void 0)for(B=0,q=0;q<C.length;++q)B+=C[q].length;let de=s.allocUnsafe(B),be=0;for(q=0;q<C.length;++q){let Pe=C[q];if(pe(Pe,Uint8Array))be+Pe.length>de.length?(s.isBuffer(Pe)||(Pe=s.from(Pe)),Pe.copy(de,be)):Uint8Array.prototype.set.call(de,Pe,be);else if(s.isBuffer(Pe))Pe.copy(de,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Pe.length}return de};function S(C,B){if(s.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||pe(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);let q=C.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&q===0)return 0;let be=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return oe(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Re(C).length;default:if(be)return de?-1:oe(C).length;B=(""+B).toLowerCase(),be=!0}}s.byteLength=S;function w(C,B,q){let de=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,B>>>=0,q<=B))return"";for(C||(C="utf8");;)switch(C){case"hex":return W(this,B,q);case"utf8":case"utf-8":return Q(this,B,q);case"ascii":return K(this,B,q);case"latin1":case"binary":return Y(this,B,q);case"base64":return N(this,B,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,B,q);default:if(de)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),de=!0}}s.prototype._isBuffer=!0;function A(C,B,q){let de=C[B];C[B]=C[q],C[q]=de}s.prototype.swap16=function(){let C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<C;B+=2)A(this,B,B+1);return this},s.prototype.swap32=function(){let C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<C;B+=4)A(this,B,B+3),A(this,B+1,B+2);return this},s.prototype.swap64=function(){let C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<C;B+=8)A(this,B,B+7),A(this,B+1,B+6),A(this,B+2,B+5),A(this,B+3,B+4);return this},s.prototype.toString=function(){let C=this.length;return C===0?"":arguments.length===0?Q(this,0,C):w.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(C){if(!s.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:s.compare(this,C)===0},s.prototype.inspect=function(){let C="",B=Po.INSPECT_MAX_BYTES;return C=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(C+=" ... "),"<Buffer "+C+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(C,B,q,de,be){if(pe(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),!s.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(B===void 0&&(B=0),q===void 0&&(q=C?C.length:0),de===void 0&&(de=0),be===void 0&&(be=this.length),B<0||q>C.length||de<0||be>this.length)throw new RangeError("out of range index");if(de>=be&&B>=q)return 0;if(de>=be)return-1;if(B>=q)return 1;if(B>>>=0,q>>>=0,de>>>=0,be>>>=0,this===C)return 0;let Pe=be-de,We=q-B,ge=Math.min(Pe,We),_e=this.slice(de,be),tt=C.slice(B,q);for(let Ze=0;Ze<ge;++Ze)if(_e[Ze]!==tt[Ze]){Pe=_e[Ze],We=tt[Ze];break}return Pe<We?-1:We<Pe?1:0};function _(C,B,q,de,be){if(C.length===0)return-1;if(typeof q=="string"?(de=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,Fe(q)&&(q=be?0:C.length-1),q<0&&(q=C.length+q),q>=C.length){if(be)return-1;q=C.length-1}else if(q<0)if(be)q=0;else return-1;if(typeof B=="string"&&(B=s.from(B,de)),s.isBuffer(B))return B.length===0?-1:I(C,B,q,de,be);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(C,B,q):Uint8Array.prototype.lastIndexOf.call(C,B,q):I(C,[B],q,de,be);throw new TypeError("val must be string, number or Buffer")}function I(C,B,q,de,be){let Pe=1,We=C.length,ge=B.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(C.length<2||B.length<2)return-1;Pe=2,We/=2,ge/=2,q/=2}function _e(Ze,ht){return Pe===1?Ze[ht]:Ze.readUInt16BE(ht*Pe)}let tt;if(be){let Ze=-1;for(tt=q;tt<We;tt++)if(_e(C,tt)===_e(B,Ze===-1?0:tt-Ze)){if(Ze===-1&&(Ze=tt),tt-Ze+1===ge)return Ze*Pe}else Ze!==-1&&(tt-=tt-Ze),Ze=-1}else for(q+ge>We&&(q=We-ge),tt=q;tt>=0;tt--){let Ze=!0;for(let ht=0;ht<ge;ht++)if(_e(C,tt+ht)!==_e(B,ht)){Ze=!1;break}if(Ze)return tt}return-1}s.prototype.includes=function(C,B,q){return this.indexOf(C,B,q)!==-1},s.prototype.indexOf=function(C,B,q){return _(this,C,B,q,!0)},s.prototype.lastIndexOf=function(C,B,q){return _(this,C,B,q,!1)};function D(C,B,q,de){q=Number(q)||0;let be=C.length-q;de?(de=Number(de),de>be&&(de=be)):de=be;let Pe=B.length;de>Pe/2&&(de=Pe/2);let We;for(We=0;We<de;++We){let ge=parseInt(B.substr(We*2,2),16);if(Fe(ge))return We;C[q+We]=ge}return We}function P(C,B,q,de){return Be(oe(B,C.length-q),C,q,de)}function k(C,B,q,de){return Be(ye(B),C,q,de)}function M(C,B,q,de){return Be(Re(B),C,q,de)}function H(C,B,q,de){return Be(Ie(B,C.length-q),C,q,de)}s.prototype.write=function(C,B,q,de){if(B===void 0)de="utf8",q=this.length,B=0;else if(q===void 0&&typeof B=="string")de=B,q=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(q)?(q=q>>>0,de===void 0&&(de="utf8")):(de=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let be=this.length-B;if((q===void 0||q>be)&&(q=be),C.length>0&&(q<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Pe=!1;for(;;)switch(de){case"hex":return D(this,C,B,q);case"utf8":case"utf-8":return P(this,C,B,q);case"ascii":case"latin1":case"binary":return k(this,C,B,q);case"base64":return M(this,C,B,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,C,B,q);default:if(Pe)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Pe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(C,B,q){return B===0&&q===C.length?r.fromByteArray(C):r.fromByteArray(C.slice(B,q))}function Q(C,B,q){q=Math.min(C.length,q);let de=[],be=B;for(;be<q;){let Pe=C[be],We=null,ge=Pe>239?4:Pe>223?3:Pe>191?2:1;if(be+ge<=q){let _e,tt,Ze,ht;switch(ge){case 1:Pe<128&&(We=Pe);break;case 2:_e=C[be+1],(_e&192)===128&&(ht=(Pe&31)<<6|_e&63,ht>127&&(We=ht));break;case 3:_e=C[be+1],tt=C[be+2],(_e&192)===128&&(tt&192)===128&&(ht=(Pe&15)<<12|(_e&63)<<6|tt&63,ht>2047&&(ht<55296||ht>57343)&&(We=ht));break;case 4:_e=C[be+1],tt=C[be+2],Ze=C[be+3],(_e&192)===128&&(tt&192)===128&&(Ze&192)===128&&(ht=(Pe&15)<<18|(_e&63)<<12|(tt&63)<<6|Ze&63,ht>65535&&ht<1114112&&(We=ht))}}We===null?(We=65533,ge=1):We>65535&&(We-=65536,de.push(We>>>10&1023|55296),We=56320|We&1023),de.push(We),be+=ge}return V(de)}let z=4096;function V(C){let B=C.length;if(B<=z)return String.fromCharCode.apply(String,C);let q="",de=0;for(;de<B;)q+=String.fromCharCode.apply(String,C.slice(de,de+=z));return q}function K(C,B,q){let de="";q=Math.min(C.length,q);for(let be=B;be<q;++be)de+=String.fromCharCode(C[be]&127);return de}function Y(C,B,q){let de="";q=Math.min(C.length,q);for(let be=B;be<q;++be)de+=String.fromCharCode(C[be]);return de}function W(C,B,q){let de=C.length;(!B||B<0)&&(B=0),(!q||q<0||q>de)&&(q=de);let be="";for(let Pe=B;Pe<q;++Pe)be+=Ye[C[Pe]];return be}function J(C,B,q){let de=C.slice(B,q),be="";for(let Pe=0;Pe<de.length-1;Pe+=2)be+=String.fromCharCode(de[Pe]+de[Pe+1]*256);return be}s.prototype.slice=function(C,B){let q=this.length;C=~~C,B=B===void 0?q:~~B,C<0?(C+=q,C<0&&(C=0)):C>q&&(C=q),B<0?(B+=q,B<0&&(B=0)):B>q&&(B=q),B<C&&(B=C);let de=this.subarray(C,B);return Object.setPrototypeOf(de,s.prototype),de};function G(C,B,q){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+B>q)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(C,B,q){C=C>>>0,B=B>>>0,q||G(C,B,this.length);let de=this[C],be=1,Pe=0;for(;++Pe<B&&(be*=256);)de+=this[C+Pe]*be;return de},s.prototype.readUintBE=s.prototype.readUIntBE=function(C,B,q){C=C>>>0,B=B>>>0,q||G(C,B,this.length);let de=this[C+--B],be=1;for(;B>0&&(be*=256);)de+=this[C+--B]*be;return de},s.prototype.readUint8=s.prototype.readUInt8=function(C,B){return C=C>>>0,B||G(C,1,this.length),this[C]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(C,B){return C=C>>>0,B||G(C,2,this.length),this[C]|this[C+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(C,B){return C=C>>>0,B||G(C,2,this.length),this[C]<<8|this[C+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(C,B){return C=C>>>0,B||G(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(C,B){return C=C>>>0,B||G(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},s.prototype.readBigUInt64LE=De(function(C){C=C>>>0,ie(C,"offset");let B=this[C],q=this[C+7];(B===void 0||q===void 0)&&Ce(C,this.length-8);let de=B+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,be=this[++C]+this[++C]*2**8+this[++C]*2**16+q*2**24;return BigInt(de)+(BigInt(be)<<BigInt(32))}),s.prototype.readBigUInt64BE=De(function(C){C=C>>>0,ie(C,"offset");let B=this[C],q=this[C+7];(B===void 0||q===void 0)&&Ce(C,this.length-8);let de=B*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],be=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q;return(BigInt(de)<<BigInt(32))+BigInt(be)}),s.prototype.readIntLE=function(C,B,q){C=C>>>0,B=B>>>0,q||G(C,B,this.length);let de=this[C],be=1,Pe=0;for(;++Pe<B&&(be*=256);)de+=this[C+Pe]*be;return be*=128,de>=be&&(de-=Math.pow(2,8*B)),de},s.prototype.readIntBE=function(C,B,q){C=C>>>0,B=B>>>0,q||G(C,B,this.length);let de=B,be=1,Pe=this[C+--de];for(;de>0&&(be*=256);)Pe+=this[C+--de]*be;return be*=128,Pe>=be&&(Pe-=Math.pow(2,8*B)),Pe},s.prototype.readInt8=function(C,B){return C=C>>>0,B||G(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},s.prototype.readInt16LE=function(C,B){C=C>>>0,B||G(C,2,this.length);let q=this[C]|this[C+1]<<8;return q&32768?q|4294901760:q},s.prototype.readInt16BE=function(C,B){C=C>>>0,B||G(C,2,this.length);let q=this[C+1]|this[C]<<8;return q&32768?q|4294901760:q},s.prototype.readInt32LE=function(C,B){return C=C>>>0,B||G(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},s.prototype.readInt32BE=function(C,B){return C=C>>>0,B||G(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},s.prototype.readBigInt64LE=De(function(C){C=C>>>0,ie(C,"offset");let B=this[C],q=this[C+7];(B===void 0||q===void 0)&&Ce(C,this.length-8);let de=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(q<<24);return(BigInt(de)<<BigInt(32))+BigInt(B+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),s.prototype.readBigInt64BE=De(function(C){C=C>>>0,ie(C,"offset");let B=this[C],q=this[C+7];(B===void 0||q===void 0)&&Ce(C,this.length-8);let de=(B<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(de)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q)}),s.prototype.readFloatLE=function(C,B){return C=C>>>0,B||G(C,4,this.length),e.read(this,C,!0,23,4)},s.prototype.readFloatBE=function(C,B){return C=C>>>0,B||G(C,4,this.length),e.read(this,C,!1,23,4)},s.prototype.readDoubleLE=function(C,B){return C=C>>>0,B||G(C,8,this.length),e.read(this,C,!0,52,8)},s.prototype.readDoubleBE=function(C,B){return C=C>>>0,B||G(C,8,this.length),e.read(this,C,!1,52,8)};function j(C,B,q,de,be,Pe){if(!s.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>be||B<Pe)throw new RangeError('"value" argument is out of bounds');if(q+de>C.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(C,B,q,de){if(C=+C,B=B>>>0,q=q>>>0,!de){let We=Math.pow(2,8*q)-1;j(this,C,B,q,We,0)}let be=1,Pe=0;for(this[B]=C&255;++Pe<q&&(be*=256);)this[B+Pe]=C/be&255;return B+q},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(C,B,q,de){if(C=+C,B=B>>>0,q=q>>>0,!de){let We=Math.pow(2,8*q)-1;j(this,C,B,q,We,0)}let be=q-1,Pe=1;for(this[B+be]=C&255;--be>=0&&(Pe*=256);)this[B+be]=C/Pe&255;return B+q},s.prototype.writeUint8=s.prototype.writeUInt8=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,1,255,0),this[B]=C&255,B+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,2,65535,0),this[B]=C&255,this[B+1]=C>>>8,B+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,2,65535,0),this[B]=C>>>8,this[B+1]=C&255,B+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,4,4294967295,0),this[B+3]=C>>>24,this[B+2]=C>>>16,this[B+1]=C>>>8,this[B]=C&255,B+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,4,4294967295,0),this[B]=C>>>24,this[B+1]=C>>>16,this[B+2]=C>>>8,this[B+3]=C&255,B+4};function F(C,B,q,de,be){fe(B,de,be,C,q,7);let Pe=Number(B&BigInt(4294967295));C[q++]=Pe,Pe=Pe>>8,C[q++]=Pe,Pe=Pe>>8,C[q++]=Pe,Pe=Pe>>8,C[q++]=Pe;let We=Number(B>>BigInt(32)&BigInt(4294967295));return C[q++]=We,We=We>>8,C[q++]=We,We=We>>8,C[q++]=We,We=We>>8,C[q++]=We,q}function Z(C,B,q,de,be){fe(B,de,be,C,q,7);let Pe=Number(B&BigInt(4294967295));C[q+7]=Pe,Pe=Pe>>8,C[q+6]=Pe,Pe=Pe>>8,C[q+5]=Pe,Pe=Pe>>8,C[q+4]=Pe;let We=Number(B>>BigInt(32)&BigInt(4294967295));return C[q+3]=We,We=We>>8,C[q+2]=We,We=We>>8,C[q+1]=We,We=We>>8,C[q]=We,q+8}s.prototype.writeBigUInt64LE=De(function(C,B=0){return F(this,C,B,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=De(function(C,B=0){return Z(this,C,B,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(C,B,q,de){if(C=+C,B=B>>>0,!de){let ge=Math.pow(2,8*q-1);j(this,C,B,q,ge-1,-ge)}let be=0,Pe=1,We=0;for(this[B]=C&255;++be<q&&(Pe*=256);)C<0&&We===0&&this[B+be-1]!==0&&(We=1),this[B+be]=(C/Pe>>0)-We&255;return B+q},s.prototype.writeIntBE=function(C,B,q,de){if(C=+C,B=B>>>0,!de){let ge=Math.pow(2,8*q-1);j(this,C,B,q,ge-1,-ge)}let be=q-1,Pe=1,We=0;for(this[B+be]=C&255;--be>=0&&(Pe*=256);)C<0&&We===0&&this[B+be+1]!==0&&(We=1),this[B+be]=(C/Pe>>0)-We&255;return B+q},s.prototype.writeInt8=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,1,127,-128),C<0&&(C=255+C+1),this[B]=C&255,B+1},s.prototype.writeInt16LE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,2,32767,-32768),this[B]=C&255,this[B+1]=C>>>8,B+2},s.prototype.writeInt16BE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,2,32767,-32768),this[B]=C>>>8,this[B+1]=C&255,B+2},s.prototype.writeInt32LE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,4,2147483647,-2147483648),this[B]=C&255,this[B+1]=C>>>8,this[B+2]=C>>>16,this[B+3]=C>>>24,B+4},s.prototype.writeInt32BE=function(C,B,q){return C=+C,B=B>>>0,q||j(this,C,B,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[B]=C>>>24,this[B+1]=C>>>16,this[B+2]=C>>>8,this[B+3]=C&255,B+4},s.prototype.writeBigInt64LE=De(function(C,B=0){return F(this,C,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=De(function(C,B=0){return Z(this,C,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(C,B,q,de,be,Pe){if(q+de>C.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function ee(C,B,q,de,be){return B=+B,q=q>>>0,be||ae(C,B,q,4),e.write(C,B,q,de,23,4),q+4}s.prototype.writeFloatLE=function(C,B,q){return ee(this,C,B,!0,q)},s.prototype.writeFloatBE=function(C,B,q){return ee(this,C,B,!1,q)};function ve(C,B,q,de,be){return B=+B,q=q>>>0,be||ae(C,B,q,8),e.write(C,B,q,de,52,8),q+8}s.prototype.writeDoubleLE=function(C,B,q){return ve(this,C,B,!0,q)},s.prototype.writeDoubleBE=function(C,B,q){return ve(this,C,B,!1,q)},s.prototype.copy=function(C,B,q,de){if(!s.isBuffer(C))throw new TypeError("argument should be a Buffer");if(q||(q=0),!de&&de!==0&&(de=this.length),B>=C.length&&(B=C.length),B||(B=0),de>0&&de<q&&(de=q),de===q||C.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),C.length-B<de-q&&(de=C.length-B+q);let be=de-q;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,q,de):Uint8Array.prototype.set.call(C,this.subarray(q,de),B),be},s.prototype.fill=function(C,B,q,de){if(typeof C=="string"){if(typeof B=="string"?(de=B,B=0,q=this.length):typeof q=="string"&&(de=q,q=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!s.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(C.length===1){let Pe=C.charCodeAt(0);(de==="utf8"&&Pe<128||de==="latin1")&&(C=Pe)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(B<0||this.length<B||this.length<q)throw new RangeError("Out of range index");if(q<=B)return this;B=B>>>0,q=q===void 0?this.length:q>>>0,C||(C=0);let be;if(typeof C=="number")for(be=B;be<q;++be)this[be]=C;else{let Pe=s.isBuffer(C)?C:s.from(C,de),We=Pe.length;if(We===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(be=0;be<q-B;++be)this[be+B]=Pe[be%We]}return this};let le={};function ne(C,B,q){le[C]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(C,B){return`The "${C}" argument must be of type number. Received type ${typeof B}`},TypeError),ne("ERR_OUT_OF_RANGE",function(C,B,q){let de=`The value of "${C}" is out of range.`,be=q;return Number.isInteger(q)&&Math.abs(q)>2**32?be=re(String(q)):typeof q=="bigint"&&(be=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(be=re(be)),be+="n"),de+=` It must be ${B}. Received ${be}`,de},RangeError);function re(C){let B="",q=C.length,de=C[0]==="-"?1:0;for(;q>=de+4;q-=3)B=`_${C.slice(q-3,q)}${B}`;return`${C.slice(0,q)}${B}`}function ue(C,B,q){ie(B,"offset"),(C[B]===void 0||C[B+q]===void 0)&&Ce(B,C.length-(q+1))}function fe(C,B,q,de,be,Pe){if(C>q||C<B){let We=typeof B=="bigint"?"n":"",ge;throw B===0||B===BigInt(0)?ge=`>= 0${We} and < 2${We} ** ${(Pe+1)*8}${We}`:ge=`>= -(2${We} ** ${(Pe+1)*8-1}${We}) and < 2 ** ${(Pe+1)*8-1}${We}`,new le.ERR_OUT_OF_RANGE("value",ge,C)}ue(de,be,Pe)}function ie(C,B){if(typeof C!="number")throw new le.ERR_INVALID_ARG_TYPE(B,"number",C)}function Ce(C,B,q){throw Math.floor(C)!==C?(ie(C,q),new le.ERR_OUT_OF_RANGE("offset","an integer",C)):B<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,C)}let Se=/[^+/0-9A-Za-z-_]/g;function se(C){if(C=C.split("=")[0],C=C.trim().replace(Se,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function oe(C,B){B=B||1/0;let q,de=C.length,be=null,Pe=[];for(let We=0;We<de;++We){if(q=C.charCodeAt(We),q>55295&&q<57344){if(!be){if(q>56319){(B-=3)>-1&&Pe.push(239,191,189);continue}else if(We+1===de){(B-=3)>-1&&Pe.push(239,191,189);continue}be=q;continue}if(q<56320){(B-=3)>-1&&Pe.push(239,191,189),be=q;continue}q=(be-55296<<10|q-56320)+65536}else be&&(B-=3)>-1&&Pe.push(239,191,189);if(be=null,q<128){if((B-=1)<0)break;Pe.push(q)}else if(q<2048){if((B-=2)<0)break;Pe.push(q>>6|192,q&63|128)}else if(q<65536){if((B-=3)<0)break;Pe.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((B-=4)<0)break;Pe.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return Pe}function ye(C){let B=[];for(let q=0;q<C.length;++q)B.push(C.charCodeAt(q)&255);return B}function Ie(C,B){let q,de,be,Pe=[];for(let We=0;We<C.length&&!((B-=2)<0);++We)q=C.charCodeAt(We),de=q>>8,be=q%256,Pe.push(be),Pe.push(de);return Pe}function Re(C){return r.toByteArray(se(C))}function Be(C,B,q,de){let be;for(be=0;be<de&&!(be+q>=B.length||be>=C.length);++be)B[be+q]=C[be];return be}function pe(C,B){return C instanceof B||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===B.name}function Fe(C){return C!==C}let Ye=(function(){let C="0123456789abcdef",B=new Array(256);for(let q=0;q<16;++q){let de=q*16;for(let be=0;be<16;++be)B[de+be]=C[q]+C[be]}return B})();function De(C){return typeof BigInt>"u"?ft:C}function ft(){throw new Error("BigInt not supported")}return Po}var nc,Aw,od,Dw,Po,Ow,fY=ti(()=>{Me(),je(),Ne(),nc={},Aw=!1,od={},Dw=!1,Po={},Ow=!1}),Jr={};$c(Jr,{Buffer:()=>bg,INSPECT_MAX_BYTES:()=>FF,default:()=>vs,kMaxLength:()=>BF});var vs,bg,FF,BF,en=ti(()=>{Me(),je(),Ne(),fY(),vs=cY(),vs.Buffer,vs.SlowBuffer,vs.INSPECT_MAX_BYTES,vs.kMaxLength,bg=vs.Buffer,FF=vs.INSPECT_MAX_BYTES,BF=vs.kMaxLength}),je=ti(()=>{en()}),mr=He((r,e)=>{Me(),je(),Ne();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let i="";for(let a=0;a<n.length;a++)i+=`    ${n[a].stack}
`;super(i),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,i){return n.includes(i)},ArrayPrototypeIndexOf(n,i){return n.indexOf(i)},ArrayPrototypeJoin(n,i){return n.join(i)},ArrayPrototypeMap(n,i){return n.map(i)},ArrayPrototypePop(n,i){return n.pop(i)},ArrayPrototypePush(n,i){return n.push(i)},ArrayPrototypeSlice(n,i,a){return n.slice(i,a)},Error,FunctionPrototypeCall(n,i,...a){return n.call(i,...a)},FunctionPrototypeSymbolHasInstance(n,i){return Function.prototype[Symbol.hasInstance].call(n,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,i){return Object.defineProperties(n,i)},ObjectDefineProperty(n,i,a){return Object.defineProperty(n,i,a)},ObjectGetOwnPropertyDescriptor(n,i){return Object.getOwnPropertyDescriptor(n,i)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,i){return Object.setPrototypeOf(n,i)},Promise,PromisePrototypeCatch(n,i){return n.catch(i)},PromisePrototypeThen(n,i,a){return n.then(i,a)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,i){return n.test(i)},SafeSet:Set,String,StringPrototypeSlice(n,i,a){return n.slice(i,a)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,i,a){return n.set(i,a)},Boolean,Uint8Array}}),UF=He((r,e)=>{Me(),je(),Ne(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[i,a]){let s=n.shift();return a==="f"?s.toFixed(6):a==="j"?JSON.stringify(s):a==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),Mn=He((r,e)=>{Me(),je(),Ne();var{format:t,inspect:n}=UF(),{AggregateError:i}=mr(),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",f={};function h(S,w){if(!S)throw new f.ERR_INTERNAL_ASSERTION(w)}function p(S){let w="",A=S.length,_=S[0]==="-"?1:0;for(;A>=_+4;A-=3)w=`_${S.slice(A-3,A)}${w}`;return`${S.slice(0,A)}${w}`}function g(S,w,A){if(typeof w=="function")return h(w.length<=A.length,`Code: ${S}; The provided arguments length (${A.length}) does not match the required ones (${w.length}).`),w(...A);let _=(w.match(/%[dfijoOs]/g)||[]).length;return h(_===A.length,`Code: ${S}; The provided arguments length (${A.length}) does not match the required ones (${_}).`),A.length===0?w:t(w,...A)}function y(S,w,A){A||(A=Error);class _ extends A{constructor(...D){super(g(S,w,D))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=S,_.prototype[s]=!0,f[S]=_}function b(S){let w=c+S.name;return Object.defineProperty(S,"name",{value:w}),S}function v(S,w){if(S&&w&&S!==w){if(Array.isArray(w.errors))return w.errors.push(S),w;let A=new a([w,S],w.message);return A.code=w.code,A}return S||w}var E=class extends Error{constructor(S="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new f.ERR_INVALID_ARG_TYPE("options","Object",w);super(S,w),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(S,w,A)=>{h(typeof S=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let _="The ";S.endsWith(" argument")?_+=`${S} `:_+=`"${S}" ${S.includes(".")?"property":"argument"} `,_+="must be ";let I=[],D=[],P=[];for(let M of w)h(typeof M=="string","All expected entries have to be of type string"),o.includes(M)?I.push(M.toLowerCase()):l.test(M)?D.push(M):(h(M!=="object",'The value "object" should be written as "Object"'),P.push(M));if(D.length>0){let M=I.indexOf("object");M!==-1&&(I.splice(I,M,1),D.push("Object"))}if(I.length>0){switch(I.length){case 1:_+=`of type ${I[0]}`;break;case 2:_+=`one of type ${I[0]} or ${I[1]}`;break;default:{let M=I.pop();_+=`one of type ${I.join(", ")}, or ${M}`}}(D.length>0||P.length>0)&&(_+=" or ")}if(D.length>0){switch(D.length){case 1:_+=`an instance of ${D[0]}`;break;case 2:_+=`an instance of ${D[0]} or ${D[1]}`;break;default:{let M=D.pop();_+=`an instance of ${D.join(", ")}, or ${M}`}}P.length>0&&(_+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(_+="an "),_+=`${P[0]}`;break;case 2:_+=`one of ${P[0]} or ${P[1]}`;break;default:{let M=P.pop();_+=`one of ${P.join(", ")}, or ${M}`}}if(A==null)_+=`. Received ${A}`;else if(typeof A=="function"&&A.name)_+=`. Received function ${A.name}`;else if(typeof A=="object"){var k;if((k=A.constructor)!==null&&k!==void 0&&k.name)_+=`. Received an instance of ${A.constructor.name}`;else{let M=n(A,{depth:-1});_+=`. Received ${M}`}}else{let M=n(A,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),_+=`. Received type ${typeof A} (${M})`}return _},TypeError),y("ERR_INVALID_ARG_VALUE",(S,w,A="is invalid")=>{let _=n(w);return _.length>128&&(_=_.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${A}. Received ${_}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(S,w,A)=>{var _;let I=A!=null&&(_=A.constructor)!==null&&_!==void 0&&_.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${S} to be returned from the "${w}" function but got ${I}.`},TypeError),y("ERR_MISSING_ARGS",(...S)=>{h(S.length>0,"At least one arg needs to be specified");let w,A=S.length;switch(S=(Array.isArray(S)?S:[S]).map(_=>`"${_}"`).join(" or "),A){case 1:w+=`The ${S[0]} argument`;break;case 2:w+=`The ${S[0]} and ${S[1]} arguments`;break;default:{let _=S.pop();w+=`The ${S.join(", ")}, and ${_} arguments`}break}return`${w} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(S,w,A)=>{h(w,'Missing "range" argument');let _;if(Number.isInteger(A)&&Math.abs(A)>2**32)_=p(String(A));else if(typeof A=="bigint"){_=String(A);let I=BigInt(2)**BigInt(32);(A>I||A<-I)&&(_=p(_)),_+="n"}else _=n(A);return`The value of "${S}" is out of range. It must be ${w}. Received ${_}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:E,aggregateTwoErrors:b(v),hideStackFrames:b,codes:f}}),Ed=He((r,e)=>{Me(),je(),Ne();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t}),Jo={};$c(Jo,{EventEmitter:()=>$F,default:()=>ic,defaultMaxListeners:()=>HF,init:()=>GF,listenerCount:()=>KF,on:()=>zF,once:()=>YF});function dY(){if(Iw)return ld;Iw=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,_,I){return Function.prototype.apply.call(A,_,I)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:t=function(A){return Object.getOwnPropertyNames(A)};function n(A){console&&console.warn&&console.warn(A)}var i=Number.isNaN||function(A){return A!==A};function a(){a.init.call(this)}ld=a,ld.once=E,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");s=A}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function l(A){return A._maxListeners===void 0?a.defaultMaxListeners:A._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(A){for(var _=[],I=1;I<arguments.length;I++)_.push(arguments[I]);var D=A==="error",P=this._events;if(P!==void 0)D=D&&P.error===void 0;else if(!D)return!1;if(D){var k;if(_.length>0&&(k=_[0]),k instanceof Error)throw k;var M=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw M.context=k,M}var H=P[A];if(H===void 0)return!1;if(typeof H=="function")e(H,this,_);else for(var N=H.length,Q=y(H,N),I=0;I<N;++I)e(Q[I],this,_);return!0};function c(A,_,I,D){var P,k,M;if(o(I),k=A._events,k===void 0?(k=A._events=Object.create(null),A._eventsCount=0):(k.newListener!==void 0&&(A.emit("newListener",_,I.listener?I.listener:I),k=A._events),M=k[_]),M===void 0)M=k[_]=I,++A._eventsCount;else if(typeof M=="function"?M=k[_]=D?[I,M]:[M,I]:D?M.unshift(I):M.push(I),P=l(A),P>0&&M.length>P&&!M.warned){M.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=A,H.type=_,H.count=M.length,n(H)}return A}a.prototype.addListener=function(A,_){return c(this,A,_,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(A,_){return c(this,A,_,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,_,I){var D={fired:!1,wrapFn:void 0,target:A,type:_,listener:I},P=f.bind(D);return P.listener=I,D.wrapFn=P,P}a.prototype.once=function(A,_){return o(_),this.on(A,h(this,A,_)),this},a.prototype.prependOnceListener=function(A,_){return o(_),this.prependListener(A,h(this,A,_)),this},a.prototype.removeListener=function(A,_){var I,D,P,k,M;if(o(_),D=this._events,D===void 0)return this;if(I=D[A],I===void 0)return this;if(I===_||I.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete D[A],D.removeListener&&this.emit("removeListener",A,I.listener||_));else if(typeof I!="function"){for(P=-1,k=I.length-1;k>=0;k--)if(I[k]===_||I[k].listener===_){M=I[k].listener,P=k;break}if(P<0)return this;P===0?I.shift():b(I,P),I.length===1&&(D[A]=I[0]),D.removeListener!==void 0&&this.emit("removeListener",A,M||_)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(A){var _,I,D;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var P=Object.keys(I),k;for(D=0;D<P.length;++D)k=P[D],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=I[A],typeof _=="function")this.removeListener(A,_);else if(_!==void 0)for(D=_.length-1;D>=0;D--)this.removeListener(A,_[D]);return this};function p(A,_,I){var D=A._events;if(D===void 0)return[];var P=D[_];return P===void 0?[]:typeof P=="function"?I?[P.listener||P]:[P]:I?v(P):y(P,P.length)}a.prototype.listeners=function(A){return p(this,A,!0)},a.prototype.rawListeners=function(A){return p(this,A,!1)},a.listenerCount=function(A,_){return typeof A.listenerCount=="function"?A.listenerCount(_):g.call(A,_)},a.prototype.listenerCount=g;function g(A){var _=this._events;if(_!==void 0){var I=_[A];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(A,_){for(var I=new Array(_),D=0;D<_;++D)I[D]=A[D];return I}function b(A,_){for(;_+1<A.length;_++)A[_]=A[_+1];A.pop()}function v(A){for(var _=new Array(A.length),I=0;I<_.length;++I)_[I]=A[I].listener||A[I];return _}function E(A,_){return new Promise(function(I,D){function P(M){A.removeListener(_,k),D(M)}function k(){typeof A.removeListener=="function"&&A.removeListener("error",P),I([].slice.call(arguments))}w(A,_,k,{once:!0}),_!=="error"&&S(A,P,{once:!0})})}function S(A,_,I){typeof A.on=="function"&&w(A,"error",_,I)}function w(A,_,I,D){if(typeof A.on=="function")D.once?A.once(_,I):A.on(_,I);else if(typeof A.addEventListener=="function")A.addEventListener(_,function P(k){D.once&&A.removeEventListener(_,P),I(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return ld}var ld,Iw,ic,$F,HF,GF,KF,zF,YF,nu=ti(()=>{Me(),je(),Ne(),ld={},Iw=!1,ic=dY(),ic.once,ic.once=function(r,e){return new Promise((t,n)=>{function i(...s){a!==void 0&&r.removeListener("error",a),t(s)}let a;e!=="error"&&(a=s=>{r.removeListener(name,i),n(s)},r.once("error",a)),r.once(e,i)})},ic.on=function(r,e){let t=[],n=[],i=null,a=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return a?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,o),r.removeListener("error",l),a=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,o),r.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return r.on(e,o),r.on("error",l),s;function o(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function l(c){a=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}},{EventEmitter:$F,defaultMaxListeners:HF,init:GF,listenerCount:KF,on:zF,once:YF}=ic}),ei=He((r,e)=>{Me(),je(),Ne();var t=(en(),qt(Jr)),{format:n,inspect:i}=UF(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Mn(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:l}=mr(),c=globalThis.AbortSignal||Ed().AbortSignal,f=globalThis.AbortController||Ed().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||t.Blob,g=typeof p<"u"?function(v){return v instanceof p}:function(v){return!1},y=(v,E)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(E,"AbortSignal",v)},b=(v,E)=>{if(typeof v!="function")throw new a(E,"Function",v)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(v){let E=!1;return function(...S){E||(E=!0,v.apply(this,S))}},createDeferredPromise:function(){let v,E;return{promise:new Promise((S,w)=>{v=S,E=w}),resolve:v,reject:E}},promisify(v){return new Promise((E,S)=>{v((w,...A)=>w?S(w):E(...A))})},debuglog(){return function(){}},format:n,inspect:i,types:{isAsyncFunction(v){return v instanceof h},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:g,deprecate(v,E){return v},addAbortListener:(nu(),qt(Jo)).addAbortListener||function(v,E){if(v===void 0)throw new a("signal","AbortSignal",v);y(v,"signal"),b(E,"listener");let S;return v.aborted?queueMicrotask(()=>E()):(v.addEventListener("abort",E,{__proto__:null,once:!0,[s]:!0}),S=()=>{v.removeEventListener("abort",E)}),{__proto__:null,[l](){var w;(w=S)===null||w===void 0||w()}}},AbortSignalAny:c.any||function(v){if(v.length===1)return v[0];let E=new f,S=()=>E.abort();return v.forEach(w=>{y(w,"signals"),w.addEventListener("abort",S,{once:!0})}),E.signal.addEventListener("abort",()=>{v.forEach(w=>w.removeEventListener("abort",S))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Jd=He((r,e)=>{Me(),je(),Ne();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:f,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:p,String:g,StringPrototypeToUpperCase:y,StringPrototypeTrim:b}=mr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:_}}=Mn(),{normalizeEncoding:I}=ei(),{isAsyncFunction:D,isArrayBufferView:P}=ei().types,k={};function M(pe){return pe===(pe|0)}function H(pe){return pe===pe>>>0}var N=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function z(pe,Fe,Ye){if(typeof pe>"u"&&(pe=Ye),typeof pe=="string"){if(p(N,pe)===null)throw new w(Fe,pe,Q);pe=f(pe,8)}return Y(pe,Fe),pe}var V=v((pe,Fe,Ye=c,De=l)=>{if(typeof pe!="number")throw new S(Fe,"number",pe);if(!s(pe))throw new A(Fe,"an integer",pe);if(pe<Ye||pe>De)throw new A(Fe,`>= ${Ye} && <= ${De}`,pe)}),K=v((pe,Fe,Ye=-2147483648,De=2147483647)=>{if(typeof pe!="number")throw new S(Fe,"number",pe);if(!s(pe))throw new A(Fe,"an integer",pe);if(pe<Ye||pe>De)throw new A(Fe,`>= ${Ye} && <= ${De}`,pe)}),Y=v((pe,Fe,Ye=!1)=>{if(typeof pe!="number")throw new S(Fe,"number",pe);if(!s(pe))throw new A(Fe,"an integer",pe);let De=Ye?1:0,ft=4294967295;if(pe<De||pe>ft)throw new A(Fe,`>= ${De} && <= ${ft}`,pe)});function W(pe,Fe){if(typeof pe!="string")throw new S(Fe,"string",pe)}function J(pe,Fe,Ye=void 0,De){if(typeof pe!="number")throw new S(Fe,"number",pe);if(Ye!=null&&pe<Ye||De!=null&&pe>De||(Ye!=null||De!=null)&&o(pe))throw new A(Fe,`${Ye!=null?`>= ${Ye}`:""}${Ye!=null&&De!=null?" && ":""}${De!=null?`<= ${De}`:""}`,pe)}var G=v((pe,Fe,Ye)=>{if(!n(Ye,pe)){let De="must be one of: "+i(a(Ye,ft=>typeof ft=="string"?`'${ft}'`:g(ft)),", ");throw new w(Fe,pe,De)}});function j(pe,Fe){if(typeof pe!="boolean")throw new S(Fe,"boolean",pe)}function F(pe,Fe,Ye){return pe==null||!h(pe,Fe)?Ye:pe[Fe]}var Z=v((pe,Fe,Ye=null)=>{let De=F(Ye,"allowArray",!1),ft=F(Ye,"allowFunction",!1);if(!F(Ye,"nullable",!1)&&pe===null||!De&&t(pe)||typeof pe!="object"&&(!ft||typeof pe!="function"))throw new S(Fe,"Object",pe)}),ae=v((pe,Fe)=>{if(pe!=null&&typeof pe!="object"&&typeof pe!="function")throw new S(Fe,"a dictionary",pe)}),ee=v((pe,Fe,Ye=0)=>{if(!t(pe))throw new S(Fe,"Array",pe);if(pe.length<Ye){let De=`must be longer than ${Ye}`;throw new w(Fe,pe,De)}});function ve(pe,Fe){ee(pe,Fe);for(let Ye=0;Ye<pe.length;Ye++)W(pe[Ye],`${Fe}[${Ye}]`)}function le(pe,Fe){ee(pe,Fe);for(let Ye=0;Ye<pe.length;Ye++)j(pe[Ye],`${Fe}[${Ye}]`)}function ne(pe,Fe){ee(pe,Fe);for(let Ye=0;Ye<pe.length;Ye++){let De=pe[Ye],ft=`${Fe}[${Ye}]`;if(De==null)throw new S(ft,"AbortSignal",De);Ce(De,ft)}}function re(pe,Fe="signal"){if(W(pe,Fe),k[pe]===void 0)throw k[y(pe)]!==void 0?new _(pe+" (signals must use all capital letters)"):new _(pe)}var ue=v((pe,Fe="buffer")=>{if(!P(pe))throw new S(Fe,["Buffer","TypedArray","DataView"],pe)});function fe(pe,Fe){let Ye=I(Fe),De=pe.length;if(Ye==="hex"&&De%2!==0)throw new w("encoding",Fe,`is invalid for data of length ${De}`)}function ie(pe,Fe="Port",Ye=!0){if(typeof pe!="number"&&typeof pe!="string"||typeof pe=="string"&&b(pe).length===0||+pe!==+pe>>>0||pe>65535||pe===0&&!Ye)throw new E(Fe,pe,Ye);return pe|0}var Ce=v((pe,Fe)=>{if(pe!==void 0&&(pe===null||typeof pe!="object"||!("aborted"in pe)))throw new S(Fe,"AbortSignal",pe)}),Se=v((pe,Fe)=>{if(typeof pe!="function")throw new S(Fe,"Function",pe)}),se=v((pe,Fe)=>{if(typeof pe!="function"||D(pe))throw new S(Fe,"Function",pe)}),oe=v((pe,Fe)=>{if(pe!==void 0)throw new S(Fe,"undefined",pe)});function ye(pe,Fe,Ye){if(!n(Ye,pe))throw new S(Fe,`('${i(Ye,"|")}')`,pe)}var Ie=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Re(pe,Fe){if(typeof pe>"u"||!p(Ie,pe))throw new w(Fe,pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Be(pe){if(typeof pe=="string")return Re(pe,"hints"),pe;if(t(pe)){let Fe=pe.length,Ye="";if(Fe===0)return Ye;for(let De=0;De<Fe;De++){let ft=pe[De];Re(ft,"hints"),Ye+=ft,De!==Fe-1&&(Ye+=", ")}return Ye}throw new w("hints",pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:M,isUint32:H,parseFileMode:z,validateArray:ee,validateStringArray:ve,validateBooleanArray:le,validateAbortSignalArray:ne,validateBoolean:j,validateBuffer:ue,validateDictionary:ae,validateEncoding:fe,validateFunction:Se,validateInt32:K,validateInteger:V,validateNumber:J,validateObject:Z,validateOneOf:G,validatePlainFunction:se,validatePort:ie,validateSignalName:re,validateString:W,validateUint32:Y,validateUndefined:oe,validateUnion:ye,validateAbortSignal:Ce,validateLinkHeaderValue:Be}}),iu=He((r,e)=>{Me(),je(),Ne();var t=e.exports={},n,i;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=a}catch{n=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function o(E){if(n===setTimeout)return setTimeout(E,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(E,0);try{return n(E,0)}catch{try{return n.call(null,E,0)}catch{return n.call(this,E,0)}}}function l(E){if(i===clearTimeout)return clearTimeout(E);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{return i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}var c=[],f=!1,h,p=-1;function g(){!f||!h||(f=!1,h.length?c=h.concat(c):p=-1,c.length&&y())}function y(){if(!f){var E=o(g);f=!0;for(var S=c.length;S;){for(h=c,c=[];++p<S;)h&&h[p].run();p=-1,S=c.length}h=null,f=!1,l(E)}}t.nextTick=function(E){var S=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)S[w-1]=arguments[w];c.push(new b(E,S)),c.length===1&&!f&&o(y)};function b(E,S){this.fun=E,this.array=S}b.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function v(){}t.on=v,t.addListener=v,t.once=v,t.off=v,t.removeListener=v,t.removeAllListeners=v,t.emit=v,t.prependListener=v,t.prependOnceListener=v,t.listeners=function(E){return[]},t.binding=function(E){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(E){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Ys=He((r,e)=>{Me(),je(),Ne();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:i}=mr(),a=i("nodejs.stream.destroyed"),s=i("nodejs.stream.errored"),o=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),c=i("nodejs.stream.disturbed"),f=i("nodejs.webstream.isClosedPromise"),h=i("nodejs.webstream.controllerErrorFunction");function p(F,Z=!1){var ae;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!Z||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((ae=F._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!F._writableState||F._readableState))}function g(F){var Z;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((Z=F._writableState)===null||Z===void 0?void 0:Z.writable)!==!1))}function y(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function b(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function v(F){return!!(F&&!b(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function E(F){return!!(F&&!b(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function S(F){return!!(F&&!b(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function w(F){return v(F)||E(F)||S(F)}function A(F,Z){return F==null?!1:Z===!0?typeof F[t]=="function":Z===!1?typeof F[n]=="function":typeof F[t]=="function"||typeof F[n]=="function"}function _(F){if(!b(F))return null;let Z=F._writableState,ae=F._readableState,ee=Z||ae;return!!(F.destroyed||F[a]||ee!=null&&ee.destroyed)}function I(F){if(!g(F))return null;if(F.writableEnded===!0)return!0;let Z=F._writableState;return Z!=null&&Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function D(F,Z){if(!g(F))return null;if(F.writableFinished===!0)return!0;let ae=F._writableState;return ae!=null&&ae.errored?!1:typeof ae?.finished!="boolean"?null:!!(ae.finished||Z===!1&&ae.ended===!0&&ae.length===0)}function P(F){if(!p(F))return null;if(F.readableEnded===!0)return!0;let Z=F._readableState;return!Z||Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function k(F,Z){if(!p(F))return null;let ae=F._readableState;return ae!=null&&ae.errored?!1:typeof ae?.endEmitted!="boolean"?null:!!(ae.endEmitted||Z===!1&&ae.ended===!0&&ae.length===0)}function M(F){return F&&F[o]!=null?F[o]:typeof F?.readable!="boolean"?null:_(F)?!1:p(F)&&F.readable&&!k(F)}function H(F){return F&&F[l]!=null?F[l]:typeof F?.writable!="boolean"?null:_(F)?!1:g(F)&&F.writable&&!I(F)}function N(F,Z){return b(F)?_(F)?!0:!(Z?.readable!==!1&&M(F)||Z?.writable!==!1&&H(F)):null}function Q(F){var Z,ae;return b(F)?F.writableErrored?F.writableErrored:(Z=(ae=F._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&Z!==void 0?Z:null:null}function z(F){var Z,ae;return b(F)?F.readableErrored?F.readableErrored:(Z=(ae=F._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&Z!==void 0?Z:null:null}function V(F){if(!b(F))return null;if(typeof F.closed=="boolean")return F.closed;let Z=F._writableState,ae=F._readableState;return typeof Z?.closed=="boolean"||typeof ae?.closed=="boolean"?Z?.closed||ae?.closed:typeof F._closed=="boolean"&&K(F)?F._closed:null}function K(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function Y(F){return typeof F._sent100=="boolean"&&K(F)}function W(F){var Z;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((Z=F.req)===null||Z===void 0?void 0:Z.upgradeOrConnect)===void 0}function J(F){if(!b(F))return null;let Z=F._writableState,ae=F._readableState,ee=Z||ae;return!ee&&Y(F)||!!(ee&&ee.autoDestroy&&ee.emitClose&&ee.closed===!1)}function G(F){var Z;return!!(F&&((Z=F[c])!==null&&Z!==void 0?Z:F.readableDidRead||F.readableAborted))}function j(F){var Z,ae,ee,ve,le,ne,re,ue,fe,ie;return!!(F&&((Z=(ae=(ee=(ve=(le=(ne=F[s])!==null&&ne!==void 0?ne:F.readableErrored)!==null&&le!==void 0?le:F.writableErrored)!==null&&ve!==void 0?ve:(re=F._readableState)===null||re===void 0?void 0:re.errorEmitted)!==null&&ee!==void 0?ee:(ue=F._writableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&ae!==void 0?ae:(fe=F._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&Z!==void 0?Z:!((ie=F._writableState)===null||ie===void 0)&&ie.errored))}e.exports={isDestroyed:_,kIsDestroyed:a,isDisturbed:G,kIsDisturbed:c,isErrored:j,kIsErrored:s,isReadable:M,kIsReadable:o,kIsClosedPromise:f,kControllerErrorFunction:h,kIsWritable:l,isClosed:V,isDuplexNodeStream:y,isFinished:N,isIterable:A,isReadableNodeStream:p,isReadableStream:v,isReadableEnded:P,isReadableFinished:k,isReadableErrored:z,isNodeStream:b,isWebStream:w,isWritable:H,isWritableNodeStream:g,isWritableStream:E,isWritableEnded:I,isWritableFinished:D,isWritableErrored:Q,isServerRequest:W,isServerResponse:Y,willEmitClose:J,isTransformStream:S}}),el=He((r,e)=>{Me(),je(),Ne();var t=iu(),{AbortError:n,codes:i}=Mn(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:o,once:l}=ei(),{validateAbortSignal:c,validateFunction:f,validateObject:h,validateBoolean:p}=Jd(),{Promise:g,PromisePrototypeThen:y,SymbolDispose:b}=mr(),{isClosed:v,isReadable:E,isReadableNodeStream:S,isReadableStream:w,isReadableFinished:A,isReadableErrored:_,isWritable:I,isWritableNodeStream:D,isWritableStream:P,isWritableFinished:k,isWritableErrored:M,isNodeStream:H,willEmitClose:N,kIsClosedPromise:Q}=Ys(),z;function V(G){return G.setHeader&&typeof G.abort=="function"}var K=()=>{};function Y(G,j,F){var Z,ae;if(arguments.length===2?(F=j,j=o):j==null?j=o:h(j,"options"),f(F,"callback"),c(j.signal,"options.signal"),F=l(F),w(G)||P(G))return W(G,j,F);if(!H(G))throw new a("stream",["ReadableStream","WritableStream","Stream"],G);let ee=(Z=j.readable)!==null&&Z!==void 0?Z:S(G),ve=(ae=j.writable)!==null&&ae!==void 0?ae:D(G),le=G._writableState,ne=G._readableState,re=()=>{G.writable||ie()},ue=N(G)&&S(G)===ee&&D(G)===ve,fe=k(G,!1),ie=()=>{fe=!0,G.destroyed&&(ue=!1),!(ue&&(!G.readable||ee))&&(!ee||Ce)&&F.call(G)},Ce=A(G,!1),Se=()=>{Ce=!0,G.destroyed&&(ue=!1),!(ue&&(!G.writable||ve))&&(!ve||fe)&&F.call(G)},se=pe=>{F.call(G,pe)},oe=v(G),ye=()=>{oe=!0;let pe=M(G)||_(G);if(pe&&typeof pe!="boolean")return F.call(G,pe);if(ee&&!Ce&&S(G,!0)&&!A(G,!1))return F.call(G,new s);if(ve&&!fe&&!k(G,!1))return F.call(G,new s);F.call(G)},Ie=()=>{oe=!0;let pe=M(G)||_(G);if(pe&&typeof pe!="boolean")return F.call(G,pe);F.call(G)},Re=()=>{G.req.on("finish",ie)};V(G)?(G.on("complete",ie),ue||G.on("abort",ye),G.req?Re():G.on("request",Re)):ve&&!le&&(G.on("end",re),G.on("close",re)),!ue&&typeof G.aborted=="boolean"&&G.on("aborted",ye),G.on("end",Se),G.on("finish",ie),j.error!==!1&&G.on("error",se),G.on("close",ye),oe?t.nextTick(ye):le!=null&&le.errorEmitted||ne!=null&&ne.errorEmitted?ue||t.nextTick(Ie):(!ee&&(!ue||E(G))&&(fe||I(G)===!1)||!ve&&(!ue||I(G))&&(Ce||E(G)===!1)||ne&&G.req&&G.aborted)&&t.nextTick(Ie);let Be=()=>{F=K,G.removeListener("aborted",ye),G.removeListener("complete",ie),G.removeListener("abort",ye),G.removeListener("request",Re),G.req&&G.req.removeListener("finish",ie),G.removeListener("end",re),G.removeListener("close",re),G.removeListener("finish",ie),G.removeListener("end",Se),G.removeListener("error",se),G.removeListener("close",ye)};if(j.signal&&!oe){let pe=()=>{let Fe=F;Be(),Fe.call(G,new n(void 0,{cause:j.signal.reason}))};if(j.signal.aborted)t.nextTick(pe);else{z=z||ei().addAbortListener;let Fe=z(j.signal,pe),Ye=F;F=l((...De)=>{Fe[b](),Ye.apply(G,De)})}}return Be}function W(G,j,F){let Z=!1,ae=K;if(j.signal)if(ae=()=>{Z=!0,F.call(G,new n(void 0,{cause:j.signal.reason}))},j.signal.aborted)t.nextTick(ae);else{z=z||ei().addAbortListener;let ve=z(j.signal,ae),le=F;F=l((...ne)=>{ve[b](),le.apply(G,ne)})}let ee=(...ve)=>{Z||t.nextTick(()=>F.apply(G,ve))};return y(G[Q].promise,ee,ee),K}function J(G,j){var F;let Z=!1;return j===null&&(j=o),(F=j)!==null&&F!==void 0&&F.cleanup&&(p(j.cleanup,"cleanup"),Z=j.cleanup),new g((ae,ee)=>{let ve=Y(G,j,le=>{Z&&ve(),le?ee(le):ae()})})}e.exports=Y,e.exports.finished=J}),Hc=He((r,e)=>{Me(),je(),Ne();var t=iu(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=Mn(),{Symbol:s}=mr(),{kIsDestroyed:o,isDestroyed:l,isFinished:c,isServerRequest:f}=Ys(),h=s("kDestroy"),p=s("kConstruct");function g(N,Q,z){N&&(N.stack,Q&&!Q.errored&&(Q.errored=N),z&&!z.errored&&(z.errored=N))}function y(N,Q){let z=this._readableState,V=this._writableState,K=V||z;return V!=null&&V.destroyed||z!=null&&z.destroyed?(typeof Q=="function"&&Q(),this):(g(N,V,z),V&&(V.destroyed=!0),z&&(z.destroyed=!0),K.constructed?b(this,N,Q):this.once(h,function(Y){b(this,n(Y,N),Q)}),this)}function b(N,Q,z){let V=!1;function K(Y){if(V)return;V=!0;let W=N._readableState,J=N._writableState;g(Y,J,W),J&&(J.closed=!0),W&&(W.closed=!0),typeof z=="function"&&z(Y),Y?t.nextTick(v,N,Y):t.nextTick(E,N)}try{N._destroy(Q||null,K)}catch(Y){K(Y)}}function v(N,Q){S(N,Q),E(N)}function E(N){let Q=N._readableState,z=N._writableState;z&&(z.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(z!=null&&z.emitClose||Q!=null&&Q.emitClose)&&N.emit("close")}function S(N,Q){let z=N._readableState,V=N._writableState;V!=null&&V.errorEmitted||z!=null&&z.errorEmitted||(V&&(V.errorEmitted=!0),z&&(z.errorEmitted=!0),N.emit("error",Q))}function w(){let N=this._readableState,Q=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function A(N,Q,z){let V=N._readableState,K=N._writableState;if(K!=null&&K.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||K!=null&&K.autoDestroy?N.destroy(Q):Q&&(Q.stack,K&&!K.errored&&(K.errored=Q),V&&!V.errored&&(V.errored=Q),z?t.nextTick(S,N,Q):S(N,Q))}function _(N,Q){if(typeof N._construct!="function")return;let z=N._readableState,V=N._writableState;z&&(z.constructed=!1),V&&(V.constructed=!1),N.once(p,Q),!(N.listenerCount(p)>1)&&t.nextTick(I,N)}function I(N){let Q=!1;function z(V){if(Q){A(N,V??new i);return}Q=!0;let K=N._readableState,Y=N._writableState,W=Y||K;K&&(K.constructed=!0),Y&&(Y.constructed=!0),W.destroyed?N.emit(h,V):V?A(N,V,!0):t.nextTick(D,N)}try{N._construct(V=>{t.nextTick(z,V)})}catch(V){t.nextTick(z,V)}}function D(N){N.emit(p)}function P(N){return N?.setHeader&&typeof N.abort=="function"}function k(N){N.emit("close")}function M(N,Q){N.emit("error",Q),t.nextTick(k,N)}function H(N,Q){!N||l(N)||(!Q&&!c(N)&&(Q=new a),f(N)?(N.socket=null,N.destroy(Q)):P(N)?N.abort():P(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(Q):typeof N.close=="function"?N.close():Q?t.nextTick(M,N,Q):t.nextTick(k,N),N.destroyed||(N[o]=!0))}e.exports={construct:_,destroyer:H,destroy:y,undestroy:w,errorOrDestroy:A}}),t1=He((r,e)=>{Me(),je(),Ne();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=mr(),{EventEmitter:i}=(nu(),qt(Jo));function a(o){i.call(this,o)}n(a.prototype,i.prototype),n(a,i),a.prototype.pipe=function(o,l){let c=this;function f(E){o.writable&&o.write(E)===!1&&c.pause&&c.pause()}c.on("data",f);function h(){c.readable&&c.resume&&c.resume()}o.on("drain",h),!o._isStdio&&(!l||l.end!==!1)&&(c.on("end",g),c.on("close",y));let p=!1;function g(){p||(p=!0,o.end())}function y(){p||(p=!0,typeof o.destroy=="function"&&o.destroy())}function b(E){v(),i.listenerCount(this,"error")===0&&this.emit("error",E)}s(c,"error",b),s(o,"error",b);function v(){c.removeListener("data",f),o.removeListener("drain",h),c.removeListener("end",g),c.removeListener("close",y),c.removeListener("error",b),o.removeListener("error",b),c.removeListener("end",v),c.removeListener("close",v),o.removeListener("close",v)}return c.on("end",v),c.on("close",v),o.on("close",v),o.emit("pipe",c),o};function s(o,l,c){if(typeof o.prependListener=="function")return o.prependListener(l,c);!o._events||!o._events[l]?o.on(l,c):t(o._events[l])?o._events[l].unshift(c):o._events[l]=[c,o._events[l]]}e.exports={Stream:a,prependListener:s}}),B0=He((r,e)=>{Me(),je(),Ne();var{SymbolDispose:t}=mr(),{AbortError:n,codes:i}=Mn(),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:o}=Ys(),l=el(),{ERR_INVALID_ARG_TYPE:c}=i,f,h=(p,g)=>{if(typeof p!="object"||!("aborted"in p))throw new c(g,"AbortSignal",p)};e.exports.addAbortSignal=function(p,g){if(h(p,"signal"),!a(g)&&!s(g))throw new c("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(p,g){if(typeof p!="object"||!("aborted"in p))return g;let y=a(g)?()=>{g.destroy(new n(void 0,{cause:p.reason}))}:()=>{g[o](new n(void 0,{cause:p.reason}))};if(p.aborted)y();else{f=f||ei().addAbortListener;let b=f(p,y);l(g,b[t])}return g}}),hY=He((r,e)=>{Me(),je(),Ne();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:a}=mr(),{Buffer:s}=(en(),qt(Jr)),{inspect:o}=ei();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(l){let c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let c=this.head,f=""+c.data;for(;(c=c.next)!==null;)f+=l+c.data;return f}concat(l){if(this.length===0)return s.alloc(0);let c=s.allocUnsafe(l>>>0),f=this.head,h=0;for(;f;)i(c,f.data,h),h+=f.data.length,f=f.next;return c}consume(l,c){let f=this.head.data;if(l<f.length){let h=f.slice(0,l);return this.head.data=f.slice(l),h}return l===f.length?this.shift():c?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[n](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let c="",f=this.head,h=0;do{let p=f.data;if(l>p.length)c+=p,l-=p.length;else{l===p.length?(c+=p,++h,f.next?this.head=f.next:this.head=this.tail=null):(c+=t(p,0,l),this.head=f,f.data=t(p,l));break}++h}while((f=f.next)!==null);return this.length-=h,c}_getBuffer(l){let c=s.allocUnsafe(l),f=l,h=this.head,p=0;do{let g=h.data;if(l>g.length)i(c,g,f-l),l-=g.length;else{l===g.length?(i(c,g,f-l),++p,h.next?this.head=h.next:this.head=this.tail=null):(i(c,new a(g.buffer,g.byteOffset,l),f-l),this.head=h,h.data=g.slice(l));break}++p}while((h=h.next)!==null);return this.length-=p,c}[Symbol.for("nodejs.util.inspect.custom")](l,c){return o(this,{...c,depth:0,customInspect:!1})}}}),U0=He((r,e)=>{Me(),je(),Ne();var{MathFloor:t,NumberIsInteger:n}=mr(),{validateInteger:i}=Jd(),{ERR_INVALID_ARG_VALUE:a}=Mn().codes,s=16*1024,o=16;function l(p,g,y){return p.highWaterMark!=null?p.highWaterMark:g?p[y]:null}function c(p){return p?o:s}function f(p,g){i(g,"value",0),p?o=g:s=g}function h(p,g,y,b){let v=l(g,b,y);if(v!=null){if(!n(v)||v<0){let E=b?`options.${y}`:"options.highWaterMark";throw new a(E,v)}return t(v)}return c(p.objectMode)}e.exports={getHighWaterMark:h,getDefaultHighWaterMark:c,setDefaultHighWaterMark:f}}),pY=He((r,e)=>{Me(),je(),Ne();var t=(en(),qt(Jr)),n=t.Buffer;function i(s,o){for(var l in s)o[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=a);function a(s,o,l){return n(s,o,l)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,o,l)},a.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=n(s);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}}),mY=He(r=>{Me(),je(),Ne();var e=pY().Buffer,t=e.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(S){if(!S)return"utf8";for(var w;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(w)return;S=(""+S).toLowerCase(),w=!0}}function i(S){var w=n(S);if(typeof w!="string"&&(e.isEncoding===t||!t(S)))throw new Error("Unknown encoding: "+S);return w||S}r.StringDecoder=a;function a(S){this.encoding=i(S);var w;switch(this.encoding){case"utf16le":this.text=p,this.end=g,w=4;break;case"utf8":this.fillLast=c,w=4;break;case"base64":this.text=y,this.end=b,w=3;break;default:this.write=v,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}a.prototype.write=function(S){if(S.length===0)return"";var w,A;if(this.lastNeed){if(w=this.fillLast(S),w===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<S.length?w?w+this.text(S,A):this.text(S,A):w||""},a.prototype.end=h,a.prototype.text=f,a.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function s(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function o(S,w,A){var _=w.length-1;if(_<A)return 0;var I=s(w[_]);return I>=0?(I>0&&(S.lastNeed=I-1),I):--_<A||I===-2?0:(I=s(w[_]),I>=0?(I>0&&(S.lastNeed=I-2),I):--_<A||I===-2?0:(I=s(w[_]),I>=0?(I>0&&(I===2?I=0:S.lastNeed=I-3),I):0))}function l(S,w,A){if((w[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return S.lastNeed=2,""}}function c(S){var w=this.lastTotal-this.lastNeed,A=l(this,S);if(A!==void 0)return A;if(this.lastNeed<=S.length)return S.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,w,0,S.length),this.lastNeed-=S.length}function f(S,w){var A=o(this,S,w);if(!this.lastNeed)return S.toString("utf8",w);this.lastTotal=A;var _=S.length-(A-this.lastNeed);return S.copy(this.lastChar,0,_),S.toString("utf8",w,_)}function h(S){var w=S&&S.length?this.write(S):"";return this.lastNeed?w+"":w}function p(S,w){if((S.length-w)%2===0){var A=S.toString("utf16le",w);if(A){var _=A.charCodeAt(A.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",w,S.length-1)}function g(S){var w=S&&S.length?this.write(S):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,A)}return w}function y(S,w){var A=(S.length-w)%3;return A===0?S.toString("base64",w):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",w,S.length-A))}function b(S){var w=S&&S.length?this.write(S):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function v(S){return S.toString(this.encoding)}function E(S){return S&&S.length?this.write(S):""}}),qF=He((r,e)=>{Me(),je(),Ne();var t=iu(),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:a}=mr(),{Buffer:s}=(en(),qt(Jr)),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:l}=Mn().codes;function c(f,h,p){let g;if(typeof h=="string"||h instanceof s)return new f({objectMode:!0,...p,read(){this.push(h),this.push(null)}});let y;if(h&&h[i])y=!0,g=h[i]();else if(h&&h[a])y=!1,g=h[a]();else throw new o("iterable",["Iterable"],h);let b=new f({objectMode:!0,highWaterMark:1,...p}),v=!1;b._read=function(){v||(v=!0,S())},b._destroy=function(w,A){n(E(w),()=>t.nextTick(A,w),_=>t.nextTick(A,_||w))};async function E(w){let A=w!=null,_=typeof g.throw=="function";if(A&&_){let{value:I,done:D}=await g.throw(w);if(await I,D)return}if(typeof g.return=="function"){let{value:I}=await g.return();await I}}async function S(){for(;;){try{let{value:w,done:A}=y?await g.next():g.next();if(A)b.push(null);else{let _=w&&typeof w.then=="function"?await w:w;if(_===null)throw v=!1,new l;if(b.push(_))continue;v=!1}}catch(w){b.destroy(w)}break}}return b}e.exports=c}),$0=He((r,e)=>{Me(),je(),Ne();var t=iu(),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:o,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:f,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:y}=mr();e.exports=De,De.ReadableState=Ye;var{EventEmitter:b}=(nu(),qt(Jo)),{Stream:v,prependListener:E}=t1(),{Buffer:S}=(en(),qt(Jr)),{addAbortSignal:w}=B0(),A=el(),_=ei().debuglog("stream",te=>{_=te}),I=hY(),D=Hc(),{getHighWaterMark:P,getDefaultHighWaterMark:k}=U0(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:z,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:K}=Mn(),{validateObject:Y}=Jd(),W=y("kPaused"),{StringDecoder:J}=mY(),G=qF();c(De.prototype,v.prototype),c(De,v);var j=()=>{},{errorOrDestroy:F}=D,Z=1,ae=2,ee=4,ve=8,le=16,ne=32,re=64,ue=128,fe=256,ie=512,Ce=1024,Se=2048,se=4096,oe=8192,ye=16384,Ie=32768,Re=65536,Be=1<<17,pe=1<<18;function Fe(te){return{enumerable:!1,get(){return(this.state&te)!==0},set(ce){ce?this.state|=te:this.state&=~te}}}o(Ye.prototype,{objectMode:Fe(Z),ended:Fe(ae),endEmitted:Fe(ee),reading:Fe(ve),constructed:Fe(le),sync:Fe(ne),needReadable:Fe(re),emittedReadable:Fe(ue),readableListening:Fe(fe),resumeScheduled:Fe(ie),errorEmitted:Fe(Ce),emitClose:Fe(Se),autoDestroy:Fe(se),destroyed:Fe(oe),closed:Fe(ye),closeEmitted:Fe(Ie),multiAwaitDrain:Fe(Re),readingMore:Fe(Be),dataEmitted:Fe(pe)});function Ye(te,ce,qe){typeof qe!="boolean"&&(qe=ce instanceof Ns()),this.state=Se|se|le|ne,te&&te.objectMode&&(this.state|=Z),qe&&te&&te.readableObjectMode&&(this.state|=Z),this.highWaterMark=te?P(this,te,"readableHighWaterMark",qe):k(!1),this.buffer=new I,this.length=0,this.pipes=[],this.flowing=null,this[W]=null,te&&te.emitClose===!1&&(this.state&=~Se),te&&te.autoDestroy===!1&&(this.state&=~se),this.errored=null,this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,te&&te.encoding&&(this.decoder=new J(te.encoding),this.encoding=te.encoding)}function De(te){if(!(this instanceof De))return new De(te);let ce=this instanceof Ns();this._readableState=new Ye(te,this,ce),te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.construct=="function"&&(this._construct=te.construct),te.signal&&!ce&&w(te.signal,this)),v.call(this,te),D.construct(this,()=>{this._readableState.needReadable&&ge(this,this._readableState)})}De.prototype.destroy=D.destroy,De.prototype._undestroy=D.undestroy,De.prototype._destroy=function(te,ce){ce(te)},De.prototype[b.captureRejectionSymbol]=function(te){this.destroy(te)},De.prototype[p]=function(){let te;return this.destroyed||(te=this.readableEnded?null:new K,this.destroy(te)),new f((ce,qe)=>A(this,Ve=>Ve&&Ve!==te?qe(Ve):ce(null)))},De.prototype.push=function(te,ce){return ft(this,te,ce,!1)},De.prototype.unshift=function(te,ce){return ft(this,te,ce,!0)};function ft(te,ce,qe,Ve){_("readableAddChunk",ce);let Je=te._readableState,ur;if((Je.state&Z)===0&&(typeof ce=="string"?(qe=qe||Je.defaultEncoding,Je.encoding!==qe&&(Ve&&Je.encoding?ce=S.from(ce,qe).toString(Je.encoding):(ce=S.from(ce,qe),qe=""))):ce instanceof S?qe="":v._isUint8Array(ce)?(ce=v._uint8ArrayToBuffer(ce),qe=""):ce!=null&&(ur=new H("chunk",["string","Buffer","Uint8Array"],ce))),ur)F(te,ur);else if(ce===null)Je.state&=~ve,be(te,Je);else if((Je.state&Z)!==0||ce&&ce.length>0)if(Ve)if((Je.state&ee)!==0)F(te,new V);else{if(Je.destroyed||Je.errored)return!1;C(te,Je,ce,!0)}else if(Je.ended)F(te,new z);else{if(Je.destroyed||Je.errored)return!1;Je.state&=~ve,Je.decoder&&!qe?(ce=Je.decoder.write(ce),Je.objectMode||ce.length!==0?C(te,Je,ce,!1):ge(te,Je)):C(te,Je,ce,!1)}else Ve||(Je.state&=~ve,ge(te,Je));return!Je.ended&&(Je.length<Je.highWaterMark||Je.length===0)}function C(te,ce,qe,Ve){ce.flowing&&ce.length===0&&!ce.sync&&te.listenerCount("data")>0?((ce.state&Re)!==0?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null,ce.dataEmitted=!0,te.emit("data",qe)):(ce.length+=ce.objectMode?1:qe.length,Ve?ce.buffer.unshift(qe):ce.buffer.push(qe),(ce.state&re)!==0&&Pe(te)),ge(te,ce)}De.prototype.isPaused=function(){let te=this._readableState;return te[W]===!0||te.flowing===!1},De.prototype.setEncoding=function(te){let ce=new J(te);this._readableState.decoder=ce,this._readableState.encoding=this._readableState.decoder.encoding;let qe=this._readableState.buffer,Ve="";for(let Je of qe)Ve+=ce.write(Je);return qe.clear(),Ve!==""&&qe.push(Ve),this._readableState.length=Ve.length,this};var B=1073741824;function q(te){if(te>B)throw new Q("size","<= 1GiB",te);return te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++,te}function de(te,ce){return te<=0||ce.length===0&&ce.ended?0:(ce.state&Z)!==0?1:a(te)?ce.flowing&&ce.length?ce.buffer.first().length:ce.length:te<=ce.length?te:ce.ended?ce.length:0}De.prototype.read=function(te){_("read",te),te===void 0?te=NaN:i(te)||(te=s(te,10));let ce=this._readableState,qe=te;if(te>ce.highWaterMark&&(ce.highWaterMark=q(te)),te!==0&&(ce.state&=~ue),te===0&&ce.needReadable&&((ce.highWaterMark!==0?ce.length>=ce.highWaterMark:ce.length>0)||ce.ended))return _("read: emitReadable",ce.length,ce.ended),ce.length===0&&ce.ended?_n(this):Pe(this),null;if(te=de(te,ce),te===0&&ce.ended)return ce.length===0&&_n(this),null;let Ve=(ce.state&re)!==0;if(_("need readable",Ve),(ce.length===0||ce.length-te<ce.highWaterMark)&&(Ve=!0,_("length less than watermark",Ve)),ce.ended||ce.reading||ce.destroyed||ce.errored||!ce.constructed)Ve=!1,_("reading, ended or constructing",Ve);else if(Ve){_("do read"),ce.state|=ve|ne,ce.length===0&&(ce.state|=re);try{this._read(ce.highWaterMark)}catch(ur){F(this,ur)}ce.state&=~ne,ce.reading||(te=de(qe,ce))}let Je;return te>0?Je=jn(te,ce):Je=null,Je===null?(ce.needReadable=ce.length<=ce.highWaterMark,te=0):(ce.length-=te,ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null),ce.length===0&&(ce.ended||(ce.needReadable=!0),qe!==te&&ce.ended&&_n(this)),Je!==null&&!ce.errorEmitted&&!ce.closeEmitted&&(ce.dataEmitted=!0,this.emit("data",Je)),Je};function be(te,ce){if(_("onEofChunk"),!ce.ended){if(ce.decoder){let qe=ce.decoder.end();qe&&qe.length&&(ce.buffer.push(qe),ce.length+=ce.objectMode?1:qe.length)}ce.ended=!0,ce.sync?Pe(te):(ce.needReadable=!1,ce.emittedReadable=!0,We(te))}}function Pe(te){let ce=te._readableState;_("emitReadable",ce.needReadable,ce.emittedReadable),ce.needReadable=!1,ce.emittedReadable||(_("emitReadable",ce.flowing),ce.emittedReadable=!0,t.nextTick(We,te))}function We(te){let ce=te._readableState;_("emitReadable_",ce.destroyed,ce.length,ce.ended),!ce.destroyed&&!ce.errored&&(ce.length||ce.ended)&&(te.emit("readable"),ce.emittedReadable=!1),ce.needReadable=!ce.flowing&&!ce.ended&&ce.length<=ce.highWaterMark,En(te)}function ge(te,ce){!ce.readingMore&&ce.constructed&&(ce.readingMore=!0,t.nextTick(_e,te,ce))}function _e(te,ce){for(;!ce.reading&&!ce.ended&&(ce.length<ce.highWaterMark||ce.flowing&&ce.length===0);){let qe=ce.length;if(_("maybeReadMore read 0"),te.read(0),qe===ce.length)break}ce.readingMore=!1}De.prototype._read=function(te){throw new N("_read()")},De.prototype.pipe=function(te,ce){let qe=this,Ve=this._readableState;Ve.pipes.length===1&&(Ve.multiAwaitDrain||(Ve.multiAwaitDrain=!0,Ve.awaitDrainWriters=new h(Ve.awaitDrainWriters?[Ve.awaitDrainWriters]:[]))),Ve.pipes.push(te),_("pipe count=%d opts=%j",Ve.pipes.length,ce);let Je=(!ce||ce.end!==!1)&&te!==t.stdout&&te!==t.stderr?Mr:Qa;Ve.endEmitted?t.nextTick(Je):qe.once("end",Je),te.on("unpipe",ur);function ur(ii,Tn){_("onunpipe"),ii===qe&&Tn&&Tn.hasUnpiped===!1&&(Tn.hasUnpiped=!0,Bn())}function Mr(){_("onend"),te.end()}let Fn,no=!1;function Bn(){_("cleanup"),te.removeListener("close",$n),te.removeListener("finish",pa),Fn&&te.removeListener("drain",Fn),te.removeListener("error",Un),te.removeListener("unpipe",ur),qe.removeListener("end",Mr),qe.removeListener("end",Qa),qe.removeListener("data",Nr),no=!0,Fn&&Ve.awaitDrainWriters&&(!te._writableState||te._writableState.needDrain)&&Fn()}function cr(){no||(Ve.pipes.length===1&&Ve.pipes[0]===te?(_("false write response, pause",0),Ve.awaitDrainWriters=te,Ve.multiAwaitDrain=!1):Ve.pipes.length>1&&Ve.pipes.includes(te)&&(_("false write response, pause",Ve.awaitDrainWriters.size),Ve.awaitDrainWriters.add(te)),qe.pause()),Fn||(Fn=tt(qe,te),te.on("drain",Fn))}qe.on("data",Nr);function Nr(ii){_("ondata");let Tn=te.write(ii);_("dest.write",Tn),Tn===!1&&cr()}function Un(ii){if(_("onerror",ii),Qa(),te.removeListener("error",Un),te.listenerCount("error")===0){let Tn=te._writableState||te._readableState;Tn&&!Tn.errorEmitted?F(te,ii):te.emit("error",ii)}}E(te,"error",Un);function $n(){te.removeListener("finish",pa),Qa()}te.once("close",$n);function pa(){_("onfinish"),te.removeListener("close",$n),Qa()}te.once("finish",pa);function Qa(){_("unpipe"),qe.unpipe(te)}return te.emit("pipe",qe),te.writableNeedDrain===!0?cr():Ve.flowing||(_("pipe resume"),qe.resume()),te};function tt(te,ce){return function(){let qe=te._readableState;qe.awaitDrainWriters===ce?(_("pipeOnDrain",1),qe.awaitDrainWriters=null):qe.multiAwaitDrain&&(_("pipeOnDrain",qe.awaitDrainWriters.size),qe.awaitDrainWriters.delete(ce)),(!qe.awaitDrainWriters||qe.awaitDrainWriters.size===0)&&te.listenerCount("data")&&te.resume()}}De.prototype.unpipe=function(te){let ce=this._readableState,qe={hasUnpiped:!1};if(ce.pipes.length===0)return this;if(!te){let Je=ce.pipes;ce.pipes=[],this.pause();for(let ur=0;ur<Je.length;ur++)Je[ur].emit("unpipe",this,{hasUnpiped:!1});return this}let Ve=n(ce.pipes,te);return Ve===-1?this:(ce.pipes.splice(Ve,1),ce.pipes.length===0&&this.pause(),te.emit("unpipe",this,qe),this)},De.prototype.on=function(te,ce){let qe=v.prototype.on.call(this,te,ce),Ve=this._readableState;return te==="data"?(Ve.readableListening=this.listenerCount("readable")>0,Ve.flowing!==!1&&this.resume()):te==="readable"&&!Ve.endEmitted&&!Ve.readableListening&&(Ve.readableListening=Ve.needReadable=!0,Ve.flowing=!1,Ve.emittedReadable=!1,_("on readable",Ve.length,Ve.reading),Ve.length?Pe(this):Ve.reading||t.nextTick(ht,this)),qe},De.prototype.addListener=De.prototype.on,De.prototype.removeListener=function(te,ce){let qe=v.prototype.removeListener.call(this,te,ce);return te==="readable"&&t.nextTick(Ze,this),qe},De.prototype.off=De.prototype.removeListener,De.prototype.removeAllListeners=function(te){let ce=v.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&t.nextTick(Ze,this),ce};function Ze(te){let ce=te._readableState;ce.readableListening=te.listenerCount("readable")>0,ce.resumeScheduled&&ce[W]===!1?ce.flowing=!0:te.listenerCount("data")>0?te.resume():ce.readableListening||(ce.flowing=null)}function ht(te){_("readable nexttick read 0"),te.read(0)}De.prototype.resume=function(){let te=this._readableState;return te.flowing||(_("resume"),te.flowing=!te.readableListening,yt(this,te)),te[W]=!1,this};function yt(te,ce){ce.resumeScheduled||(ce.resumeScheduled=!0,t.nextTick(Di,te,ce))}function Di(te,ce){_("resume",ce.reading),ce.reading||te.read(0),ce.resumeScheduled=!1,te.emit("resume"),En(te),ce.flowing&&!ce.reading&&te.read(0)}De.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[W]=!0,this};function En(te){let ce=te._readableState;for(_("flow",ce.flowing);ce.flowing&&te.read()!==null;);}De.prototype.wrap=function(te){let ce=!1;te.on("data",Ve=>{!this.push(Ve)&&te.pause&&(ce=!0,te.pause())}),te.on("end",()=>{this.push(null)}),te.on("error",Ve=>{F(this,Ve)}),te.on("close",()=>{this.destroy()}),te.on("destroy",()=>{this.destroy()}),this._read=()=>{ce&&te.resume&&(ce=!1,te.resume())};let qe=l(te);for(let Ve=1;Ve<qe.length;Ve++){let Je=qe[Ve];this[Je]===void 0&&typeof te[Je]=="function"&&(this[Je]=te[Je].bind(te))}return this},De.prototype[g]=function(){return xr(this)},De.prototype.iterator=function(te){return te!==void 0&&Y(te,"options"),xr(this,te)};function xr(te,ce){typeof te.read!="function"&&(te=De.wrap(te,{objectMode:!0}));let qe=wn(te,ce);return qe.stream=te,qe}async function*wn(te,ce){let qe=j;function Ve(Mr){this===te?(qe(),qe=j):qe=Mr}te.on("readable",Ve);let Je,ur=A(te,{writable:!1},Mr=>{Je=Mr?M(Je,Mr):null,qe(),qe=j});try{for(;;){let Mr=te.destroyed?null:te.read();if(Mr!==null)yield Mr;else{if(Je)throw Je;if(Je===null)return;await new f(Ve)}}}catch(Mr){throw Je=M(Je,Mr),Je}finally{(Je||ce?.destroyOnReturn!==!1)&&(Je===void 0||te._readableState.autoDestroy)?D.destroyer(te,null):(te.off("readable",Ve),ur())}}o(De.prototype,{readable:{__proto__:null,get(){let te=this._readableState;return!!te&&te.readable!==!1&&!te.destroyed&&!te.errorEmitted&&!te.endEmitted},set(te){this._readableState&&(this._readableState.readable=!!te)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(te){this._readableState&&(this._readableState.destroyed=te)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Ye.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[W]!==!1},set(te){this[W]=!!te}}}),De._fromList=jn;function jn(te,ce){if(ce.length===0)return null;let qe;return ce.objectMode?qe=ce.buffer.shift():!te||te>=ce.length?(ce.decoder?qe=ce.buffer.join(""):ce.buffer.length===1?qe=ce.buffer.first():qe=ce.buffer.concat(ce.length),ce.buffer.clear()):qe=ce.buffer.consume(te,ce.decoder),qe}function _n(te){let ce=te._readableState;_("endReadable",ce.endEmitted),ce.endEmitted||(ce.ended=!0,t.nextTick(kr,ce,te))}function kr(te,ce){if(_("endReadableNT",te.endEmitted,te.length),!te.errored&&!te.closeEmitted&&!te.endEmitted&&te.length===0){if(te.endEmitted=!0,ce.emit("end"),ce.writable&&ce.allowHalfOpen===!1)t.nextTick(uu,ce);else if(te.autoDestroy){let qe=ce._writableState;(!qe||qe.autoDestroy&&(qe.finished||qe.writable===!1))&&ce.destroy()}}}function uu(te){te.writable&&!te.writableEnded&&!te.destroyed&&te.end()}De.from=function(te,ce){return G(De,te,ce)};var Wa;function Va(){return Wa===void 0&&(Wa={}),Wa}De.fromWeb=function(te,ce){return Va().newStreamReadableFromReadableStream(te,ce)},De.toWeb=function(te,ce){return Va().newReadableStreamFromStreamReadable(te,ce)},De.wrap=function(te,ce){var qe,Ve;return new De({objectMode:(qe=(Ve=te.readableObjectMode)!==null&&Ve!==void 0?Ve:te.objectMode)!==null&&qe!==void 0?qe:!0,...ce,destroy(Je,ur){D.destroyer(te,Je),ur(Je)}}).wrap(te)}}),r1=He((r,e)=>{Me(),je(),Ne();var t=iu(),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:o,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:f,SymbolHasInstance:h}=mr();e.exports=Y,Y.WritableState=V;var{EventEmitter:p}=(nu(),qt(Jo)),g=t1().Stream,{Buffer:y}=(en(),qt(Jr)),b=Hc(),{addAbortSignal:v}=B0(),{getHighWaterMark:E,getDefaultHighWaterMark:S}=U0(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:I,ERR_STREAM_DESTROYED:D,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:H}=Mn().codes,{errorOrDestroy:N}=b;l(Y.prototype,g.prototype),l(Y,g);function Q(){}var z=f("kOnFinished");function V(se,oe,ye){typeof ye!="boolean"&&(ye=oe instanceof Ns()),this.objectMode=!!(se&&se.objectMode),ye&&(this.objectMode=this.objectMode||!!(se&&se.writableObjectMode)),this.highWaterMark=se?E(this,se,"writableHighWaterMark",ye):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Ie=!!(se&&se.decodeStrings===!1);this.decodeStrings=!Ie,this.defaultEncoding=se&&se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,oe),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,K(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!se||se.emitClose!==!1,this.autoDestroy=!se||se.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[z]=[]}function K(se){se.buffered=[],se.bufferedIndex=0,se.allBuffers=!0,se.allNoop=!0}V.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},s(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Y(se){let oe=this instanceof Ns();if(!oe&&!a(Y,this))return new Y(se);this._writableState=new V(se,this,oe),se&&(typeof se.write=="function"&&(this._write=se.write),typeof se.writev=="function"&&(this._writev=se.writev),typeof se.destroy=="function"&&(this._destroy=se.destroy),typeof se.final=="function"&&(this._final=se.final),typeof se.construct=="function"&&(this._construct=se.construct),se.signal&&v(se.signal,this)),g.call(this,se),b.construct(this,()=>{let ye=this._writableState;ye.writing||ve(this,ye),ue(this,ye)})}s(Y,h,{__proto__:null,value:function(se){return a(this,se)?!0:this!==Y?!1:se&&se._writableState instanceof V}}),Y.prototype.pipe=function(){N(this,new I)};function W(se,oe,ye,Ie){let Re=se._writableState;if(typeof ye=="function")Ie=ye,ye=Re.defaultEncoding;else{if(!ye)ye=Re.defaultEncoding;else if(ye!=="buffer"&&!y.isEncoding(ye))throw new H(ye);typeof Ie!="function"&&(Ie=Q)}if(oe===null)throw new k;if(!Re.objectMode)if(typeof oe=="string")Re.decodeStrings!==!1&&(oe=y.from(oe,ye),ye="buffer");else if(oe instanceof y)ye="buffer";else if(g._isUint8Array(oe))oe=g._uint8ArrayToBuffer(oe),ye="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],oe);let Be;return Re.ending?Be=new M:Re.destroyed&&(Be=new D("write")),Be?(t.nextTick(Ie,Be),N(se,Be,!0),Be):(Re.pendingcb++,J(se,Re,oe,ye,Ie))}Y.prototype.write=function(se,oe,ye){return W(this,se,oe,ye)===!0},Y.prototype.cork=function(){this._writableState.corked++},Y.prototype.uncork=function(){let se=this._writableState;se.corked&&(se.corked--,se.writing||ve(this,se))},Y.prototype.setDefaultEncoding=function(se){if(typeof se=="string"&&(se=c(se)),!y.isEncoding(se))throw new H(se);return this._writableState.defaultEncoding=se,this};function J(se,oe,ye,Ie,Re){let Be=oe.objectMode?1:ye.length;oe.length+=Be;let pe=oe.length<oe.highWaterMark;return pe||(oe.needDrain=!0),oe.writing||oe.corked||oe.errored||!oe.constructed?(oe.buffered.push({chunk:ye,encoding:Ie,callback:Re}),oe.allBuffers&&Ie!=="buffer"&&(oe.allBuffers=!1),oe.allNoop&&Re!==Q&&(oe.allNoop=!1)):(oe.writelen=Be,oe.writecb=Re,oe.writing=!0,oe.sync=!0,se._write(ye,Ie,oe.onwrite),oe.sync=!1),pe&&!oe.errored&&!oe.destroyed}function G(se,oe,ye,Ie,Re,Be,pe){oe.writelen=Ie,oe.writecb=pe,oe.writing=!0,oe.sync=!0,oe.destroyed?oe.onwrite(new D("write")):ye?se._writev(Re,oe.onwrite):se._write(Re,Be,oe.onwrite),oe.sync=!1}function j(se,oe,ye,Ie){--oe.pendingcb,Ie(ye),ee(oe),N(se,ye)}function F(se,oe){let ye=se._writableState,Ie=ye.sync,Re=ye.writecb;if(typeof Re!="function"){N(se,new _);return}ye.writing=!1,ye.writecb=null,ye.length-=ye.writelen,ye.writelen=0,oe?(oe.stack,ye.errored||(ye.errored=oe),se._readableState&&!se._readableState.errored&&(se._readableState.errored=oe),Ie?t.nextTick(j,se,ye,oe,Re):j(se,ye,oe,Re)):(ye.buffered.length>ye.bufferedIndex&&ve(se,ye),Ie?ye.afterWriteTickInfo!==null&&ye.afterWriteTickInfo.cb===Re?ye.afterWriteTickInfo.count++:(ye.afterWriteTickInfo={count:1,cb:Re,stream:se,state:ye},t.nextTick(Z,ye.afterWriteTickInfo)):ae(se,ye,1,Re))}function Z({stream:se,state:oe,count:ye,cb:Ie}){return oe.afterWriteTickInfo=null,ae(se,oe,ye,Ie)}function ae(se,oe,ye,Ie){for(!oe.ending&&!se.destroyed&&oe.length===0&&oe.needDrain&&(oe.needDrain=!1,se.emit("drain"));ye-- >0;)oe.pendingcb--,Ie();oe.destroyed&&ee(oe),ue(se,oe)}function ee(se){if(se.writing)return;for(let Re=se.bufferedIndex;Re<se.buffered.length;++Re){var oe;let{chunk:Be,callback:pe}=se.buffered[Re],Fe=se.objectMode?1:Be.length;se.length-=Fe,pe((oe=se.errored)!==null&&oe!==void 0?oe:new D("write"))}let ye=se[z].splice(0);for(let Re=0;Re<ye.length;Re++){var Ie;ye[Re]((Ie=se.errored)!==null&&Ie!==void 0?Ie:new D("end"))}K(se)}function ve(se,oe){if(oe.corked||oe.bufferProcessing||oe.destroyed||!oe.constructed)return;let{buffered:ye,bufferedIndex:Ie,objectMode:Re}=oe,Be=ye.length-Ie;if(!Be)return;let pe=Ie;if(oe.bufferProcessing=!0,Be>1&&se._writev){oe.pendingcb-=Be-1;let Fe=oe.allNoop?Q:De=>{for(let ft=pe;ft<ye.length;++ft)ye[ft].callback(De)},Ye=oe.allNoop&&pe===0?ye:n(ye,pe);Ye.allBuffers=oe.allBuffers,G(se,oe,!0,oe.length,Ye,"",Fe),K(oe)}else{do{let{chunk:Fe,encoding:Ye,callback:De}=ye[pe];ye[pe++]=null;let ft=Re?1:Fe.length;G(se,oe,!1,ft,Fe,Ye,De)}while(pe<ye.length&&!oe.writing);pe===ye.length?K(oe):pe>256?(ye.splice(0,pe),oe.bufferedIndex=0):oe.bufferedIndex=pe}oe.bufferProcessing=!1}Y.prototype._write=function(se,oe,ye){if(this._writev)this._writev([{chunk:se,encoding:oe}],ye);else throw new A("_write()")},Y.prototype._writev=null,Y.prototype.end=function(se,oe,ye){let Ie=this._writableState;typeof se=="function"?(ye=se,se=null,oe=null):typeof oe=="function"&&(ye=oe,oe=null);let Re;if(se!=null){let Be=W(this,se,oe);Be instanceof i&&(Re=Be)}return Ie.corked&&(Ie.corked=1,this.uncork()),Re||(!Ie.errored&&!Ie.ending?(Ie.ending=!0,ue(this,Ie,!0),Ie.ended=!0):Ie.finished?Re=new P("end"):Ie.destroyed&&(Re=new D("end"))),typeof ye=="function"&&(Re||Ie.finished?t.nextTick(ye,Re):Ie[z].push(ye)),this};function le(se){return se.ending&&!se.destroyed&&se.constructed&&se.length===0&&!se.errored&&se.buffered.length===0&&!se.finished&&!se.writing&&!se.errorEmitted&&!se.closeEmitted}function ne(se,oe){let ye=!1;function Ie(Re){if(ye){N(se,Re??_());return}if(ye=!0,oe.pendingcb--,Re){let Be=oe[z].splice(0);for(let pe=0;pe<Be.length;pe++)Be[pe](Re);N(se,Re,oe.sync)}else le(oe)&&(oe.prefinished=!0,se.emit("prefinish"),oe.pendingcb++,t.nextTick(fe,se,oe))}oe.sync=!0,oe.pendingcb++;try{se._final(Ie)}catch(Re){Ie(Re)}oe.sync=!1}function re(se,oe){!oe.prefinished&&!oe.finalCalled&&(typeof se._final=="function"&&!oe.destroyed?(oe.finalCalled=!0,ne(se,oe)):(oe.prefinished=!0,se.emit("prefinish")))}function ue(se,oe,ye){le(oe)&&(re(se,oe),oe.pendingcb===0&&(ye?(oe.pendingcb++,t.nextTick((Ie,Re)=>{le(Re)?fe(Ie,Re):Re.pendingcb--},se,oe)):le(oe)&&(oe.pendingcb++,fe(se,oe))))}function fe(se,oe){oe.pendingcb--,oe.finished=!0;let ye=oe[z].splice(0);for(let Ie=0;Ie<ye.length;Ie++)ye[Ie]();if(se.emit("finish"),oe.autoDestroy){let Ie=se._readableState;(!Ie||Ie.autoDestroy&&(Ie.endEmitted||Ie.readable===!1))&&se.destroy()}}o(Y.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(se){this._writableState&&(this._writableState.destroyed=se)}},writable:{__proto__:null,get(){let se=this._writableState;return!!se&&se.writable!==!1&&!se.destroyed&&!se.errored&&!se.ending&&!se.ended},set(se){this._writableState&&(this._writableState.writable=!!se)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let se=this._writableState;return se?!se.destroyed&&!se.ending&&se.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ie=b.destroy;Y.prototype.destroy=function(se,oe){let ye=this._writableState;return!ye.destroyed&&(ye.bufferedIndex<ye.buffered.length||ye[z].length)&&t.nextTick(ee,ye),ie.call(this,se,oe),this},Y.prototype._undestroy=b.undestroy,Y.prototype._destroy=function(se,oe){oe(se)},Y.prototype[p.captureRejectionSymbol]=function(se){this.destroy(se)};var Ce;function Se(){return Ce===void 0&&(Ce={}),Ce}Y.fromWeb=function(se,oe){return Se().newStreamWritableFromWritableStream(se,oe)},Y.toWeb=function(se){return Se().newWritableStreamFromStreamWritable(se)}}),gY=He((r,e)=>{Me(),je(),Ne();var t=iu(),n=(en(),qt(Jr)),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:o,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:f,isReadableStream:h,isWritableStream:p}=Ys(),g=el(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:v}}=Mn(),{destroyer:E}=Hc(),S=Ns(),w=$0(),A=r1(),{createDeferredPromise:_}=ei(),I=qF(),D=globalThis.Blob||n.Blob,P=typeof D<"u"?function(z){return z instanceof D}:function(z){return!1},k=globalThis.AbortController||Ed().AbortController,{FunctionPrototypeCall:M}=mr(),H=class extends S{constructor(z){super(z),z?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),z?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function z(V,K){if(f(V))return V;if(l(V))return Q({readable:V});if(c(V))return Q({writable:V});if(o(V))return Q({writable:!1,readable:!1});if(h(V))return Q({readable:w.fromWeb(V)});if(p(V))return Q({writable:A.fromWeb(V)});if(typeof V=="function"){let{value:W,write:J,final:G,destroy:j}=N(V);if(s(W))return I(H,W,{objectMode:!0,write:J,final:G,destroy:j});let F=W?.then;if(typeof F=="function"){let Z,ae=M(F,W,ee=>{if(ee!=null)throw new v("nully","body",ee)},ee=>{E(Z,ee)});return Z=new H({objectMode:!0,readable:!1,write:J,final(ee){G(async()=>{try{await ae,t.nextTick(ee,null)}catch(ve){t.nextTick(ee,ve)}})},destroy:j})}throw new v("Iterable, AsyncIterable or AsyncFunction",K,W)}if(P(V))return z(V.arrayBuffer());if(s(V))return I(H,V,{objectMode:!0,writable:!1});if(h(V?.readable)&&p(V?.writable))return H.fromWeb(V);if(typeof V?.writable=="object"||typeof V?.readable=="object"){let W=V!=null&&V.readable?l(V?.readable)?V?.readable:z(V.readable):void 0,J=V!=null&&V.writable?c(V?.writable)?V?.writable:z(V.writable):void 0;return Q({readable:W,writable:J})}let Y=V?.then;if(typeof Y=="function"){let W;return M(Y,V,J=>{J!=null&&W.push(J),W.push(null)},J=>{E(W,J)}),W=new H({objectMode:!0,writable:!1,read(){}})}throw new b(K,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function N(z){let{promise:V,resolve:K}=_(),Y=new k,W=Y.signal;return{value:z((async function*(){for(;;){let J=V;V=null;let{chunk:G,done:j,cb:F}=await J;if(t.nextTick(F),j)return;if(W.aborted)throw new y(void 0,{cause:W.reason});({promise:V,resolve:K}=_()),yield G}})(),{signal:W}),write(J,G,j){let F=K;K=null,F({chunk:J,done:!1,cb:j})},final(J){let G=K;K=null,G({done:!0,cb:J})},destroy(J,G){Y.abort(),G(J)}}}function Q(z){let V=z.readable&&typeof z.readable.read!="function"?w.wrap(z.readable):z.readable,K=z.writable,Y=!!i(V),W=!!a(K),J,G,j,F,Z;function ae(ee){let ve=F;F=null,ve?ve(ee):ee&&Z.destroy(ee)}return Z=new H({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(K!=null&&K.writableObjectMode),readable:Y,writable:W}),W&&(g(K,ee=>{W=!1,ee&&E(V,ee),ae(ee)}),Z._write=function(ee,ve,le){K.write(ee,ve)?le():J=le},Z._final=function(ee){K.end(),G=ee},K.on("drain",function(){if(J){let ee=J;J=null,ee()}}),K.on("finish",function(){if(G){let ee=G;G=null,ee()}})),Y&&(g(V,ee=>{Y=!1,ee&&E(V,ee),ae(ee)}),V.on("readable",function(){if(j){let ee=j;j=null,ee()}}),V.on("end",function(){Z.push(null)}),Z._read=function(){for(;;){let ee=V.read();if(ee===null){j=Z._read;return}if(!Z.push(ee))return}}),Z._destroy=function(ee,ve){!ee&&F!==null&&(ee=new y),j=null,J=null,G=null,F===null?ve(ee):(F=ve,E(K,ee),E(V,ee))},Z}}),Ns=He((r,e)=>{Me(),je(),Ne();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:a}=mr();e.exports=l;var s=$0(),o=r1();a(l.prototype,s.prototype),a(l,s);{let p=i(o.prototype);for(let g=0;g<p.length;g++){let y=p[g];l.prototype[y]||(l.prototype[y]=o.prototype[y])}}function l(p){if(!(this instanceof l))return new l(p);s.call(this,p),o.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(l.prototype,{writable:{__proto__:null,...n(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(o.prototype,"writableLength")},writableFinished:{__proto__:null,...n(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var c;function f(){return c===void 0&&(c={}),c}l.fromWeb=function(p,g){return f().newStreamDuplexFromReadableWritablePair(p,g)},l.toWeb=function(p){return f().newReadableWritablePairFromDuplex(p)};var h;l.from=function(p){return h||(h=gY()),h(p,"body")}}),WF=He((r,e)=>{Me(),je(),Ne();var{ObjectSetPrototypeOf:t,Symbol:n}=mr();e.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:i}=Mn().codes,a=Ns(),{getHighWaterMark:s}=U0();t(l.prototype,a.prototype),t(l,a);var o=n("kCallback");function l(h){if(!(this instanceof l))return new l(h);let p=h?s(this,h,"readableHighWaterMark",!0):null;p===0&&(h={...h,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:h.writableHighWaterMark||0}),a.call(this,h),this._readableState.sync=!1,this[o]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",f)}function c(h){typeof this._flush=="function"&&!this.destroyed?this._flush((p,g)=>{if(p){h?h(p):this.destroy(p);return}g!=null&&this.push(g),this.push(null),h&&h()}):(this.push(null),h&&h())}function f(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(h,p,g){throw new i("_transform()")},l.prototype._write=function(h,p,g){let y=this._readableState,b=this._writableState,v=y.length;this._transform(h,p,(E,S)=>{if(E){g(E);return}S!=null&&this.push(S),b.ended||v===y.length||y.length<y.highWaterMark?g():this[o]=g})},l.prototype._read=function(){if(this[o]){let h=this[o];this[o]=null,h()}}}),VF=He((r,e)=>{Me(),je(),Ne();var{ObjectSetPrototypeOf:t}=mr();e.exports=i;var n=WF();t(i.prototype,n.prototype),t(i,n);function i(a){if(!(this instanceof i))return new i(a);n.call(this,a)}i.prototype._transform=function(a,s,o){o(null,a)}}),n1=He((r,e)=>{Me(),je(),Ne();var t=iu(),{ArrayIsArray:n,Promise:i,SymbolAsyncIterator:a,SymbolDispose:s}=mr(),o=el(),{once:l}=ei(),c=Hc(),f=Ns(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:E}=Mn(),{validateFunction:S,validateAbortSignal:w}=Jd(),{isIterable:A,isReadable:_,isReadableNodeStream:I,isNodeStream:D,isTransformStream:P,isWebStream:k,isReadableStream:M,isReadableFinished:H}=Ys(),N=globalThis.AbortController||Ed().AbortController,Q,z,V;function K(ee,ve,le){let ne=!1;ee.on("close",()=>{ne=!0});let re=o(ee,{readable:ve,writable:le},ue=>{ne=!ue});return{destroy:ue=>{ne||(ne=!0,c.destroyer(ee,ue||new b("pipe")))},cleanup:re}}function Y(ee){return S(ee[ee.length-1],"streams[stream.length - 1]"),ee.pop()}function W(ee){if(A(ee))return ee;if(I(ee))return J(ee);throw new p("val",["Readable","Iterable","AsyncIterable"],ee)}async function*J(ee){z||(z=$0()),yield*z.prototype[a].call(ee)}async function G(ee,ve,le,{end:ne}){let re,ue=null,fe=Se=>{if(Se&&(re=Se),ue){let se=ue;ue=null,se()}},ie=()=>new i((Se,se)=>{re?se(re):ue=()=>{re?se(re):Se()}});ve.on("drain",fe);let Ce=o(ve,{readable:!1},fe);try{ve.writableNeedDrain&&await ie();for await(let Se of ee)ve.write(Se)||await ie();ne&&(ve.end(),await ie()),le()}catch(Se){le(re!==Se?h(re,Se):Se)}finally{Ce(),ve.off("drain",fe)}}async function j(ee,ve,le,{end:ne}){P(ve)&&(ve=ve.writable);let re=ve.getWriter();try{for await(let ue of ee)await re.ready,re.write(ue).catch(()=>{});await re.ready,ne&&await re.close(),le()}catch(ue){try{await re.abort(ue),le(ue)}catch(fe){le(fe)}}}function F(...ee){return Z(ee,l(Y(ee)))}function Z(ee,ve,le){if(ee.length===1&&n(ee[0])&&(ee=ee[0]),ee.length<2)throw new y("streams");let ne=new N,re=ne.signal,ue=le?.signal,fe=[];w(ue,"options.signal");function ie(){Re(new E)}V=V||ei().addAbortListener;let Ce;ue&&(Ce=V(ue,ie));let Se,se,oe=[],ye=0;function Ie(Ye){Re(Ye,--ye===0)}function Re(Ye,De){var ft;if(Ye&&(!Se||Se.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Se=Ye),!(!Se&&!De)){for(;oe.length;)oe.shift()(Se);(ft=Ce)===null||ft===void 0||ft[s](),ne.abort(),De&&(Se||fe.forEach(C=>C()),t.nextTick(ve,Se,se))}}let Be;for(let Ye=0;Ye<ee.length;Ye++){let De=ee[Ye],ft=Ye<ee.length-1,C=Ye>0,B=ft||le?.end!==!1,q=Ye===ee.length-1;if(D(De)){let de=function(be){be&&be.name!=="AbortError"&&be.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ie(be)};if(B){let{destroy:be,cleanup:Pe}=K(De,ft,C);oe.push(be),_(De)&&q&&fe.push(Pe)}De.on("error",de),_(De)&&q&&fe.push(()=>{De.removeListener("error",de)})}if(Ye===0)if(typeof De=="function"){if(Be=De({signal:re}),!A(Be))throw new g("Iterable, AsyncIterable or Stream","source",Be)}else A(De)||I(De)||P(De)?Be=De:Be=f.from(De);else if(typeof De=="function"){if(P(Be)){var pe;Be=W((pe=Be)===null||pe===void 0?void 0:pe.readable)}else Be=W(Be);if(Be=De(Be,{signal:re}),ft){if(!A(Be,!0))throw new g("AsyncIterable",`transform[${Ye-1}]`,Be)}else{var Fe;Q||(Q=VF());let de=new Q({objectMode:!0}),be=(Fe=Be)===null||Fe===void 0?void 0:Fe.then;if(typeof be=="function")ye++,be.call(Be,ge=>{se=ge,ge!=null&&de.write(ge),B&&de.end(),t.nextTick(Ie)},ge=>{de.destroy(ge),t.nextTick(Ie,ge)});else if(A(Be,!0))ye++,G(Be,de,Ie,{end:B});else if(M(Be)||P(Be)){let ge=Be.readable||Be;ye++,G(ge,de,Ie,{end:B})}else throw new g("AsyncIterable or Promise","destination",Be);Be=de;let{destroy:Pe,cleanup:We}=K(Be,!1,!0);oe.push(Pe),q&&fe.push(We)}}else if(D(De)){if(I(Be)){ye+=2;let de=ae(Be,De,Ie,{end:B});_(De)&&q&&fe.push(de)}else if(P(Be)||M(Be)){let de=Be.readable||Be;ye++,G(de,De,Ie,{end:B})}else if(A(Be))ye++,G(Be,De,Ie,{end:B});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Be);Be=De}else if(k(De)){if(I(Be))ye++,j(W(Be),De,Ie,{end:B});else if(M(Be)||A(Be))ye++,j(Be,De,Ie,{end:B});else if(P(Be))ye++,j(Be.readable,De,Ie,{end:B});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Be);Be=De}else Be=f.from(De)}return(re!=null&&re.aborted||ue!=null&&ue.aborted)&&t.nextTick(ie),Be}function ae(ee,ve,le,{end:ne}){let re=!1;if(ve.on("close",()=>{re||le(new v)}),ee.pipe(ve,{end:!1}),ne){let ue=function(){re=!0,ve.end()};H(ee)?t.nextTick(ue):ee.once("end",ue)}else le();return o(ee,{readable:!0,writable:!1},ue=>{let fe=ee._readableState;ue&&ue.code==="ERR_STREAM_PREMATURE_CLOSE"&&fe&&fe.ended&&!fe.errored&&!fe.errorEmitted?ee.once("end",le).once("error",le):le(ue)}),o(ve,{readable:!1,writable:!0},le)}e.exports={pipelineImpl:Z,pipeline:F}}),QF=He((r,e)=>{Me(),je(),Ne();var{pipeline:t}=n1(),n=Ns(),{destroyer:i}=Hc(),{isNodeStream:a,isReadable:s,isWritable:o,isWebStream:l,isTransformStream:c,isWritableStream:f,isReadableStream:h}=Ys(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:y}}=Mn(),b=el();e.exports=function(...v){if(v.length===0)throw new y("streams");if(v.length===1)return n.from(v[0]);let E=[...v];if(typeof v[0]=="function"&&(v[0]=n.from(v[0])),typeof v[v.length-1]=="function"){let N=v.length-1;v[N]=n.from(v[N])}for(let N=0;N<v.length;++N)if(!(!a(v[N])&&!l(v[N]))){if(N<v.length-1&&!(s(v[N])||h(v[N])||c(v[N])))throw new g(`streams[${N}]`,E[N],"must be readable");if(N>0&&!(o(v[N])||f(v[N])||c(v[N])))throw new g(`streams[${N}]`,E[N],"must be writable")}let S,w,A,_,I;function D(N){let Q=_;_=null,Q?Q(N):N?I.destroy(N):!H&&!M&&I.destroy()}let P=v[0],k=t(v,D),M=!!(o(P)||f(P)||c(P)),H=!!(s(k)||h(k)||c(k));if(I=new n({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(k!=null&&k.readableObjectMode),writable:M,readable:H}),M){if(a(P))I._write=function(Q,z,V){P.write(Q,z)?V():S=V},I._final=function(Q){P.end(),w=Q},P.on("drain",function(){if(S){let Q=S;S=null,Q()}});else if(l(P)){let Q=(c(P)?P.writable:P).getWriter();I._write=async function(z,V,K){try{await Q.ready,Q.write(z).catch(()=>{}),K()}catch(Y){K(Y)}},I._final=async function(z){try{await Q.ready,Q.close().catch(()=>{}),w=z}catch(V){z(V)}}}let N=c(k)?k.readable:k;b(N,()=>{if(w){let Q=w;w=null,Q()}})}if(H){if(a(k))k.on("readable",function(){if(A){let N=A;A=null,N()}}),k.on("end",function(){I.push(null)}),I._read=function(){for(;;){let N=k.read();if(N===null){A=I._read;return}if(!I.push(N))return}};else if(l(k)){let N=(c(k)?k.readable:k).getReader();I._read=async function(){for(;;)try{let{value:Q,done:z}=await N.read();if(!I.push(Q))return;if(z){I.push(null);return}}catch{return}}}}return I._destroy=function(N,Q){!N&&_!==null&&(N=new p),A=null,S=null,w=null,_===null?Q(N):(_=Q,a(k)&&i(k,N))},I}}),yY=He((r,e)=>{Me(),je(),Ne();var t=globalThis.AbortController||Ed().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:o}=Mn(),{validateAbortSignal:l,validateInteger:c,validateObject:f}=Jd(),h=mr().Symbol("kWeak"),p=mr().Symbol("kResistStopPropagation"),{finished:g}=el(),y=QF(),{addAbortSignalNoValidate:b}=B0(),{isWritable:v,isNodeStream:E}=Ys(),{deprecate:S}=ei(),{ArrayPrototypePush:w,Boolean:A,MathFloor:_,Number:I,NumberIsNaN:D,Promise:P,PromiseReject:k,PromiseResolve:M,PromisePrototypeThen:H,Symbol:N}=mr(),Q=N("kEmpty"),z=N("kEof");function V(ue,fe){if(fe!=null&&f(fe,"options"),fe?.signal!=null&&l(fe.signal,"options.signal"),E(ue)&&!v(ue))throw new n("stream",ue,"must be writable");let ie=y(this,ue);return fe!=null&&fe.signal&&b(fe.signal,ie),ie}function K(ue,fe){if(typeof ue!="function")throw new i("fn",["Function","AsyncFunction"],ue);fe!=null&&f(fe,"options"),fe?.signal!=null&&l(fe.signal,"options.signal");let ie=1;fe?.concurrency!=null&&(ie=_(fe.concurrency));let Ce=ie-1;return fe?.highWaterMark!=null&&(Ce=_(fe.highWaterMark)),c(ie,"options.concurrency",1),c(Ce,"options.highWaterMark",0),Ce+=ie,(async function*(){let Se=ei().AbortSignalAny([fe?.signal].filter(A)),se=this,oe=[],ye={signal:Se},Ie,Re,Be=!1,pe=0;function Fe(){Be=!0,Ye()}function Ye(){pe-=1,De()}function De(){Re&&!Be&&pe<ie&&oe.length<Ce&&(Re(),Re=null)}async function ft(){try{for await(let C of se){if(Be)return;if(Se.aborted)throw new o;try{if(C=ue(C,ye),C===Q)continue;C=M(C)}catch(B){C=k(B)}pe+=1,H(C,Ye,Fe),oe.push(C),Ie&&(Ie(),Ie=null),!Be&&(oe.length>=Ce||pe>=ie)&&await new P(B=>{Re=B})}oe.push(z)}catch(C){let B=k(C);H(B,Ye,Fe),oe.push(B)}finally{Be=!0,Ie&&(Ie(),Ie=null)}}ft();try{for(;;){for(;oe.length>0;){let C=await oe[0];if(C===z)return;if(Se.aborted)throw new o;C!==Q&&(yield C),oe.shift(),De()}await new P(C=>{Ie=C})}}finally{Be=!0,Re&&(Re(),Re=null)}}).call(this)}function Y(ue=void 0){return ue!=null&&f(ue,"options"),ue?.signal!=null&&l(ue.signal,"options.signal"),(async function*(){let fe=0;for await(let Ce of this){var ie;if(ue!=null&&(ie=ue.signal)!==null&&ie!==void 0&&ie.aborted)throw new o({cause:ue.signal.reason});yield[fe++,Ce]}}).call(this)}async function W(ue,fe=void 0){for await(let ie of F.call(this,ue,fe))return!0;return!1}async function J(ue,fe=void 0){if(typeof ue!="function")throw new i("fn",["Function","AsyncFunction"],ue);return!await W.call(this,async(...ie)=>!await ue(...ie),fe)}async function G(ue,fe){for await(let ie of F.call(this,ue,fe))return ie}async function j(ue,fe){if(typeof ue!="function")throw new i("fn",["Function","AsyncFunction"],ue);async function ie(Ce,Se){return await ue(Ce,Se),Q}for await(let Ce of K.call(this,ie,fe));}function F(ue,fe){if(typeof ue!="function")throw new i("fn",["Function","AsyncFunction"],ue);async function ie(Ce,Se){return await ue(Ce,Se)?Ce:Q}return K.call(this,ie,fe)}var Z=class extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ae(ue,fe,ie){var Ce;if(typeof ue!="function")throw new i("reducer",["Function","AsyncFunction"],ue);ie!=null&&f(ie,"options"),ie?.signal!=null&&l(ie.signal,"options.signal");let Se=arguments.length>1;if(ie!=null&&(Ce=ie.signal)!==null&&Ce!==void 0&&Ce.aborted){let Re=new o(void 0,{cause:ie.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(Re)),Re}let se=new t,oe=se.signal;if(ie!=null&&ie.signal){let Re={once:!0,[h]:this,[p]:!0};ie.signal.addEventListener("abort",()=>se.abort(),Re)}let ye=!1;try{for await(let Re of this){var Ie;if(ye=!0,ie!=null&&(Ie=ie.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new o;Se?fe=await ue(fe,Re,{signal:oe}):(fe=Re,Se=!0)}if(!ye&&!Se)throw new Z}finally{se.abort()}return fe}async function ee(ue){ue!=null&&f(ue,"options"),ue?.signal!=null&&l(ue.signal,"options.signal");let fe=[];for await(let Ce of this){var ie;if(ue!=null&&(ie=ue.signal)!==null&&ie!==void 0&&ie.aborted)throw new o(void 0,{cause:ue.signal.reason});w(fe,Ce)}return fe}function ve(ue,fe){let ie=K.call(this,ue,fe);return(async function*(){for await(let Ce of ie)yield*Ce}).call(this)}function le(ue){if(ue=I(ue),D(ue))return 0;if(ue<0)throw new s("number",">= 0",ue);return ue}function ne(ue,fe=void 0){return fe!=null&&f(fe,"options"),fe?.signal!=null&&l(fe.signal,"options.signal"),ue=le(ue),(async function*(){var ie;if(fe!=null&&(ie=fe.signal)!==null&&ie!==void 0&&ie.aborted)throw new o;for await(let Se of this){var Ce;if(fe!=null&&(Ce=fe.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new o;ue--<=0&&(yield Se)}}).call(this)}function re(ue,fe=void 0){return fe!=null&&f(fe,"options"),fe?.signal!=null&&l(fe.signal,"options.signal"),ue=le(ue),(async function*(){var ie;if(fe!=null&&(ie=fe.signal)!==null&&ie!==void 0&&ie.aborted)throw new o;for await(let Se of this){var Ce;if(fe!=null&&(Ce=fe.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new o;if(ue-- >0&&(yield Se),ue<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:S(Y,"readable.asIndexedPairs will be removed in a future version."),drop:ne,filter:F,flatMap:ve,map:K,take:re,compose:V},e.exports.promiseReturningOperators={every:J,forEach:j,reduce:ae,toArray:ee,some:W,find:G}}),XF=He((r,e)=>{Me(),je(),Ne();var{ArrayPrototypePop:t,Promise:n}=mr(),{isIterable:i,isNodeStream:a,isWebStream:s}=Ys(),{pipelineImpl:o}=n1(),{finished:l}=el();ZF();function c(...f){return new n((h,p)=>{let g,y,b=f[f.length-1];if(b&&typeof b=="object"&&!a(b)&&!i(b)&&!s(b)){let v=t(f);g=v.signal,y=v.end}o(f,(v,E)=>{v?p(v):h(E)},{signal:g,end:y})})}e.exports={finished:l,pipeline:c}}),ZF=He((r,e)=>{Me(),je(),Ne();var{Buffer:t}=(en(),qt(Jr)),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:a}=mr(),{promisify:{custom:s}}=ei(),{streamReturningOperators:o,promiseReturningOperators:l}=yY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=Mn(),f=QF(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:p}=U0(),{pipeline:g}=n1(),{destroyer:y}=Hc(),b=el(),v=XF(),E=Ys(),S=e.exports=t1().Stream;S.isDestroyed=E.isDestroyed,S.isDisturbed=E.isDisturbed,S.isErrored=E.isErrored,S.isReadable=E.isReadable,S.isWritable=E.isWritable,S.Readable=$0();for(let A of i(o)){let _=function(...D){if(new.target)throw c();return S.Readable.from(a(I,this,D))},I=o[A];n(_,"name",{__proto__:null,value:I.name}),n(_,"length",{__proto__:null,value:I.length}),n(S.Readable.prototype,A,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let A of i(l)){let _=function(...D){if(new.target)throw c();return a(I,this,D)},I=l[A];n(_,"name",{__proto__:null,value:I.name}),n(_,"length",{__proto__:null,value:I.length}),n(S.Readable.prototype,A,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}S.Writable=r1(),S.Duplex=Ns(),S.Transform=WF(),S.PassThrough=VF(),S.pipeline=g;var{addAbortSignal:w}=B0();S.addAbortSignal=w,S.finished=b,S.destroy=y,S.compose=f,S.setDefaultHighWaterMark=h,S.getDefaultHighWaterMark=p,n(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),n(g,s,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),n(b,s,{__proto__:null,enumerable:!0,get(){return v.finished}}),S.Stream=S,S._isUint8Array=function(A){return A instanceof Uint8Array},S._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)}}),au=He((r,e)=>{Me(),je(),Ne();var t=ZF(),n=XF(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),vY=He((r,e)=>{Me(),je(),Ne(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),bY=He((r,e)=>{Me(),je(),Ne();var{Buffer:t}=(en(),qt(Jr)),n=Symbol.for("BufferList");function i(a){if(!(this instanceof i))return new i(a);i._init.call(this,a)}i._init=function(a){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},i.prototype._new=function(a){return new i(a)},i.prototype._offset=function(a){if(a===0)return[0,0];let s=0;for(let o=0;o<this._bufs.length;o++){let l=s+this._bufs[o].length;if(a<l||o===this._bufs.length-1)return[o,a-s];s=l}},i.prototype._reverseOffset=function(a){let s=a[0],o=a[1];for(let l=0;l<s;l++)o+=this._bufs[l].length;return o},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(a){if(a>this.length||a<0)return;let s=this._offset(a);return this._bufs[s[0]][s[1]]},i.prototype.slice=function(a,s){return typeof a=="number"&&a<0&&(a+=this.length),typeof s=="number"&&s<0&&(s+=this.length),this.copy(null,0,a,s)},i.prototype.copy=function(a,s,o,l){if((typeof o!="number"||o<0)&&(o=0),(typeof l!="number"||l>this.length)&&(l=this.length),o>=this.length||l<=0)return a||t.alloc(0);let c=!!a,f=this._offset(o),h=l-o,p=h,g=c&&s||0,y=f[1];if(o===0&&l===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let b=0;b<this._bufs.length;b++)this._bufs[b].copy(a,g),g+=this._bufs[b].length;return a}if(p<=this._bufs[f[0]].length-y)return c?this._bufs[f[0]].copy(a,s,y,y+p):this._bufs[f[0]].slice(y,y+p);c||(a=t.allocUnsafe(h));for(let b=f[0];b<this._bufs.length;b++){let v=this._bufs[b].length-y;if(p>v)this._bufs[b].copy(a,g,y),g+=v;else{this._bufs[b].copy(a,g,y,y+p),g+=v;break}p-=v,y&&(y=0)}return a.length>g?a.slice(0,g):a},i.prototype.shallowSlice=function(a,s){if(a=a||0,s=typeof s!="number"?this.length:s,a<0&&(a+=this.length),s<0&&(s+=this.length),a===s)return this._new();let o=this._offset(a),l=this._offset(s),c=this._bufs.slice(o[0],l[0]+1);return l[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,l[1]),o[1]!==0&&(c[0]=c[0].slice(o[1])),this._new(c)},i.prototype.toString=function(a,s,o){return this.slice(s,o).toString(a)},i.prototype.consume=function(a){if(a=Math.trunc(a),Number.isNaN(a)||a<=0)return this;for(;this._bufs.length;)if(a>=this._bufs[0].length)a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}return this},i.prototype.duplicate=function(){let a=this._new();for(let s=0;s<this._bufs.length;s++)a.append(this._bufs[s]);return a},i.prototype.append=function(a){return this._attach(a,i.prototype._appendBuffer)},i.prototype.prepend=function(a){return this._attach(a,i.prototype._prependBuffer,!0)},i.prototype._attach=function(a,s,o){if(a==null)return this;if(a.buffer)s.call(this,t.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a)){let[l,c]=o?[a.length-1,-1]:[0,1];for(let f=l;f>=0&&f<a.length;f+=c)this._attach(a[f],s,o)}else if(this._isBufferList(a)){let[l,c]=o?[a._bufs.length-1,-1]:[0,1];for(let f=l;f>=0&&f<a._bufs.length;f+=c)this._attach(a._bufs[f],s,o)}else typeof a=="number"&&(a=a.toString()),s.call(this,t.from(a));return this},i.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},i.prototype._prependBuffer=function(a){this._bufs.unshift(a),this.length+=a.length},i.prototype.indexOf=function(a,s,o){if(o===void 0&&typeof s=="string"&&(o=s,s=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=t.from([a]):typeof a=="string"?a=t.from(a,o):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=t.from(a.buffer,a.byteOffset,a.byteLength):t.isBuffer(a)||(a=t.from(a)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),a.length===0)return s>this.length?this.length:s;let l=this._offset(s),c=l[0],f=l[1];for(;c<this._bufs.length;c++){let h=this._bufs[c];for(;f<h.length;)if(h.length-f>=a.length){let p=h.indexOf(a,f);if(p!==-1)return this._reverseOffset([c,p]);f=h.length-a.length+1}else{let p=this._reverseOffset([c,f]);if(this._match(p,a))return p;f++}f=0}return-1},i.prototype._match=function(a,s){if(this.length-a<s.length)return!1;for(let o=0;o<s.length;o++)if(this.get(a+o)!==s[o])return!1;return!0},(function(){let a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let s in a)(function(o){a[o]===null?i.prototype[o]=function(l,c){return this.slice(l,l+c)[o](0,c)}:i.prototype[o]=function(l=0){return this.slice(l,l+a[o])[o](0)}})(s)})(),i.prototype._isBufferList=function(a){return a instanceof i||i.isBufferList(a)},i.isBufferList=function(a){return a!=null&&a[n]},e.exports=i}),xY=He((r,e)=>{Me(),je(),Ne();var t=au().Duplex,n=vY(),i=bY();function a(s){if(!(this instanceof a))return new a(s);if(typeof s=="function"){this._callback=s;let o=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",o)}),this.on("unpipe",function(l){l.removeListener("error",o)}),s=null}i._init.call(this,s),t.call(this)}n(a,t),Object.assign(a.prototype,i.prototype),a.prototype._new=function(s){return new a(s)},a.prototype._write=function(s,o,l){this._appendBuffer(s),typeof l=="function"&&l()},a.prototype._read=function(s){if(!this.length)return this.push(null);s=Math.min(s,this.length),this.push(this.slice(0,s)),this.consume(s)},a.prototype.end=function(s){t.prototype.end.call(this,s),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(s,o){this._bufs.length=0,this.length=0,o(s)},a.prototype._isBufferList=function(s){return s instanceof a||s instanceof i||a.isBufferList(s)},a.isBufferList=i.isBufferList,e.exports=a,e.exports.BufferListStream=a,e.exports.BufferList=i}),SY=He((r,e)=>{Me(),je(),Ne();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),JF=He((r,e)=>{Me(),je(),Ne();var t=e.exports,{Buffer:n}=(en(),qt(Jr));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let a in t.requiredHeaderFlags){let s=t.requiredHeaderFlags[a];t.requiredHeaderFlagsErrors[a]="Invalid header flag bits, must be 0x"+s.toString(16)+" for "+t.types[a]+" packet"}t.codes={};for(let a in t.types){let s=t.types[a];t.codes[s]=a}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let a in t.properties){let s=t.properties[a];t.propertiesCodes[s]=a}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function i(a){return[0,1,2].map(s=>[0,1].map(o=>[0,1].map(l=>{let c=n.alloc(1);return c.writeUInt8(t.codes[a]<<t.CMD_SHIFT|(o?t.DUP_MASK:0)|s<<t.QOS_SHIFT|l,0,!0),c})))}t.PUBLISH_HEADER=i("publish"),t.SUBSCRIBE_HEADER=i("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=i("unsubscribe"),t.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(a=>n.from([a])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),EY=He((r,e)=>{Me(),je(),Ne();var t=1e3,n=t*60,i=n*60,a=i*24,s=a*7,o=a*365.25;e.exports=function(p,g){g=g||{};var y=typeof p;if(y==="string"&&p.length>0)return l(p);if(y==="number"&&isFinite(p))return g.long?f(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function l(p){if(p=String(p),!(p.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var y=parseFloat(g[1]),b=(g[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return y*o;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*a;case"hours":case"hour":case"hrs":case"hr":case"h":return y*i;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(p){var g=Math.abs(p);return g>=a?Math.round(p/a)+"d":g>=i?Math.round(p/i)+"h":g>=n?Math.round(p/n)+"m":g>=t?Math.round(p/t)+"s":p+"ms"}function f(p){var g=Math.abs(p);return g>=a?h(p,g,a,"day"):g>=i?h(p,g,i,"hour"):g>=n?h(p,g,n,"minute"):g>=t?h(p,g,t,"second"):p+" ms"}function h(p,g,y,b){var v=g>=y*1.5;return Math.round(p/y)+" "+b+(v?"s":"")}}),wY=He((r,e)=>{Me(),je(),Ne();function t(n){a.debug=a,a.default=a,a.coerce=h,a.disable=c,a.enable=o,a.enabled=f,a.humanize=EY(),a.destroy=p,Object.keys(n).forEach(g=>{a[g]=n[g]}),a.names=[],a.skips=[],a.formatters={};function i(g){let y=0;for(let b=0;b<g.length;b++)y=(y<<5)-y+g.charCodeAt(b),y|=0;return a.colors[Math.abs(y)%a.colors.length]}a.selectColor=i;function a(g){let y,b=null,v,E;function S(...w){if(!S.enabled)return;let A=S,_=Number(new Date),I=_-(y||_);A.diff=I,A.prev=y,A.curr=_,y=_,w[0]=a.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let D=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(P,k)=>{if(P==="%%")return"%";D++;let M=a.formatters[k];if(typeof M=="function"){let H=w[D];P=M.call(A,H),w.splice(D,1),D--}return P}),a.formatArgs.call(A,w),(A.log||a.log).apply(A,w)}return S.namespace=g,S.useColors=a.useColors(),S.color=a.selectColor(g),S.extend=s,S.destroy=a.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(v!==a.namespaces&&(v=a.namespaces,E=a.enabled(g)),E),set:w=>{b=w}}),typeof a.init=="function"&&a.init(S),S}function s(g,y){let b=a(this.namespace+(typeof y>"u"?":":y)+g);return b.log=this.log,b}function o(g){a.save(g),a.namespaces=g,a.names=[],a.skips=[];let y=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let b of y)b[0]==="-"?a.skips.push(b.slice(1)):a.names.push(b)}function l(g,y){let b=0,v=0,E=-1,S=0;for(;b<g.length;)if(v<y.length&&(y[v]===g[b]||y[v]==="*"))y[v]==="*"?(E=v,S=b,v++):(b++,v++);else if(E!==-1)v=E+1,S++,b=S;else return!1;for(;v<y.length&&y[v]==="*";)v++;return v===y.length}function c(){let g=[...a.names,...a.skips.map(y=>"-"+y)].join(",");return a.enable(""),g}function f(g){for(let y of a.skips)if(l(g,y))return!1;for(let y of a.names)if(l(g,y))return!0;return!1}function h(g){return g instanceof Error?g.stack||g.message:g}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}e.exports=t}),js=He((r,e)=>{Me(),je(),Ne(),r.formatArgs=n,r.save=i,r.load=a,r.useColors=t,r.storage=s(),r.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;l.splice(1,0,c,"color: inherit");let f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(h=f))}),l.splice(h,0,c)}r.log=console.debug||console.log||(()=>{});function i(l){try{l?r.storage.setItem("debug",l):r.storage.removeItem("debug")}catch{}}function a(){let l;try{l=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!l&&typeof Jt<"u"&&"env"in Jt&&(l=Jt.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=wY()(r);var{formatters:o}=e.exports;o.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),_Y=He((r,e)=>{Me(),je(),Ne();var t=xY(),{EventEmitter:n}=(nu(),qt(Jo)),i=SY(),a=JF(),s=js()("mqtt-packet:parser"),o=class Cw extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof Cw?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Cw().parser(c)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),f=c>>a.CMD_SHIFT;this.packet.cmd=a.types[f];let h=c&15,p=a.requiredHeaderFlags[f];return p!=null&&h!==p?this._emitError(new Error(a.requiredHeaderFlagsErrors[f])):(this.packet.retain=(c&a.RETAIN_MASK)!==0,this.packet.qos=c>>a.QOS_SHIFT&a.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&a.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),s("_parseLength %d",c.value),!!c}_parsePayload(){s("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return s("_parsePayload complete result: %s",c),c}_parseConnect(){s("_parseConnect");let c,f,h,p,g={},y=this.packet,b=this._parseString();if(b===null)return this._emitError(new Error("Cannot parse protocolId"));if(b!=="MQTT"&&b!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=b,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK;let v=!!(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT;if(g.will)y.will={},y.will.retain=v,y.will.qos=E;else{if(v)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.properties=w)}let S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(y.clientId=S,s("_parseConnect: packet.clientId: %s",y.clientId),g.will){if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.will.properties=w)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=c,s("_parseConnect: packet.will.topic: %s",y.will.topic),f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=f,s("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(g.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));y.username=p,s("_parseConnect: packet.username: %s",y.username)}if(g.password){if(h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse password"));y.password=h}return this.settings=y,s("_parseConnect: complete"),y}_parseConnack(){s("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let f=this._list.readUInt8(this._pos++);if(f>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(f&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}c.payload=this._list.slice(this._pos,c.length),s("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){s("_parseSubscribe");let c=this.packet,f,h,p,g,y,b,v;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(c.properties=E)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(f=this._parseString(),f===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(h=this._parseByte(),this.settings.protocolVersion===5){if(h&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(h&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=h&a.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(b=(h>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(h>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=h>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));v={topic:f,qos:p},this.settings.protocolVersion===5?(v.nl=b,v.rap=y,v.rh=g):this.settings.bridgeMode&&(v.rh=0,v.rap=!0,v.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",v),c.subscriptions.push(v)}}}_parseSuback(){s("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!a.MQTT5_SUBACK_CODES[f])return this._emitError(new Error("Invalid suback code"))}else if(f>2&&f!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(f)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",f),c.unsubscriptions.push(f)}}}_parseUnsuback(){s("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let f=this._parseProperties();for(Object.getOwnPropertyNames(f).length&&(c.properties=f),c.granted=[];this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(!a.MQTT5_UNSUBACK_CODES[h])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(h)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!a.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!a.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}s("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}}return!0}_parseDisconnect(){let c=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),a.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!a.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let f=this._parseProperties();return Object.getOwnPropertyNames(f).length&&(c.properties=f),s("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let f=this._parseNum(),h=f+this._pos;if(f===-1||h>this._list.length||h>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,h);return this._pos+=f,s("_parseString: result: %s",p),p}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),f=c+this._pos;if(c===-1||f>this._list.length||f>this.packet.length)return null;let h=this._list.slice(this._pos,f);return this._pos+=c,s("_parseBuffer: result: %o",h),h}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){s("_parseVarByteNum");let f=4,h=0,p=1,g=0,y=!1,b,v=this._pos?this._pos:0;for(;h<f&&v+h<this._list.length;){if(b=this._list.readUInt8(v+h++),g+=p*(b&a.VARBYTEINT_MASK),p*=128,(b&a.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=h)break}return!y&&h===f&&this._list.length>=h&&this._emitError(new Error("Invalid variable byte integer")),v&&(this._pos+=h),y?c?y={bytes:h,value:g}:y=g:y=!1,s("_parseVarByteNum: result: %o",y),y}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",c),c}_parseByType(c){switch(s("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let c=this._parseVarByteNum(),f=this._pos+c,h={};for(;this._pos<f;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let g=a.propertiesCodes[p];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){h[g]||(h[g]=Object.create(null));let y=this._parseByType(a.propertiesTypes[g]);if(h[g][y.name])if(Array.isArray(h[g][y.name]))h[g][y.name].push(y.value);else{let b=h[g][y.name];h[g][y.name]=[b],h[g][y.name].push(y.value)}else h[g][y.name]=y.value;continue}h[g]?Array.isArray(h[g])?h[g].push(this._parseByType(a.propertiesTypes[g])):(h[g]=[h[g]],h[g].push(this._parseByType(a.propertiesTypes[g]))):h[g]=this._parseByType(a.propertiesTypes[g])}return h}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(c){s("_emitError",c),this.error=c,this.emit("error",c)}};e.exports=o}),TY=He((r,e)=>{Me(),je(),Ne();var{Buffer:t}=(en(),qt(Jr)),n=65536,i={},a=t.isBuffer(t.from([1,2]).subarray(0,1));function s(f){let h=t.allocUnsafe(2);return h.writeUInt8(f>>8,0),h.writeUInt8(f&255,1),h}function o(){for(let f=0;f<n;f++)i[f]=s(f)}function l(f){let h=0,p=0,g=t.allocUnsafe(4);do h=f%128|0,f=f/128|0,f>0&&(h=h|128),g.writeUInt8(h,p++);while(f>0&&p<4);return f>0&&(p=0),a?g.subarray(0,p):g.slice(0,p)}function c(f){let h=t.allocUnsafe(4);return h.writeUInt32BE(f,0),h}e.exports={cache:i,generateCache:o,generateNumber:s,genBufVariableByteInt:l,generate4ByteBuffer:c}}),AY=He((r,e)=>{Me(),je(),Ne(),typeof Jt>"u"||!Jt.version||Jt.version.indexOf("v0.")===0||Jt.version.indexOf("v1.")===0&&Jt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=Jt;function t(n,i,a,s){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,l,c;switch(o){case 0:case 1:return Jt.nextTick(n);case 2:return Jt.nextTick(function(){n.call(null,i)});case 3:return Jt.nextTick(function(){n.call(null,i,a)});case 4:return Jt.nextTick(function(){n.call(null,i,a,s)});default:for(l=new Array(o-1),c=0;c<l.length;)l[c++]=arguments[c];return Jt.nextTick(function(){n.apply(null,l)})}}}),eB=He((r,e)=>{Me(),je(),Ne();var t=JF(),{Buffer:n}=(en(),qt(Jr)),i=n.allocUnsafe(0),a=n.from([0]),s=TY(),o=AY().nextTick,l=js()("mqtt-packet:writeToStream"),c=s.cache,f=s.generateNumber,h=s.generateCache,p=s.genBufVariableByteInt,g=s.generate4ByteBuffer,y=Y,b=!0;function v(le,ne,re){switch(l("generate called"),ne.cork&&(ne.cork(),o(E,ne)),b&&(b=!1,h()),l("generate: packet.cmd: %s",le.cmd),le.cmd){case"connect":return S(le,ne);case"connack":return w(le,ne,re);case"publish":return A(le,ne,re);case"puback":case"pubrec":case"pubrel":case"pubcomp":return _(le,ne,re);case"subscribe":return I(le,ne,re);case"suback":return D(le,ne,re);case"unsubscribe":return P(le,ne,re);case"unsuback":return k(le,ne,re);case"pingreq":case"pingresp":return M(le,ne);case"disconnect":return H(le,ne,re);case"auth":return N(le,ne,re);default:return ne.destroy(new Error("Unknown command")),!1}}Object.defineProperty(v,"cacheNumbers",{get(){return y===Y},set(le){le?((!c||Object.keys(c).length===0)&&(b=!0),y=Y):(b=!1,y=W)}});function E(le){le.uncork()}function S(le,ne,re){let ue=le||{},fe=ue.protocolId||"MQTT",ie=ue.protocolVersion||4,Ce=ue.will,Se=ue.clean,se=ue.keepalive||0,oe=ue.clientId||"",ye=ue.username,Ie=ue.password,Re=ue.properties;Se===void 0&&(Se=!0);let Be=0;if(typeof fe!="string"&&!n.isBuffer(fe))return ne.destroy(new Error("Invalid protocolId")),!1;if(Be+=fe.length+2,ie!==3&&ie!==4&&ie!==5)return ne.destroy(new Error("Invalid protocol version")),!1;if(Be+=1,(typeof oe=="string"||n.isBuffer(oe))&&(oe||ie>=4)&&(oe||Se))Be+=n.byteLength(oe)+2;else{if(ie<4)return ne.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Se*1===0)return ne.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof se!="number"||se<0||se>65535||se%1!==0)return ne.destroy(new Error("Invalid keepalive")),!1;Be+=2,Be+=1;let pe,Fe;if(ie===5){if(pe=j(ne,Re),!pe)return!1;Be+=pe.length}if(Ce){if(typeof Ce!="object")return ne.destroy(new Error("Invalid will")),!1;if(!Ce.topic||typeof Ce.topic!="string")return ne.destroy(new Error("Invalid will topic")),!1;if(Be+=n.byteLength(Ce.topic)+2,Be+=2,Ce.payload)if(Ce.payload.length>=0)typeof Ce.payload=="string"?Be+=n.byteLength(Ce.payload):Be+=Ce.payload.length;else return ne.destroy(new Error("Invalid will payload")),!1;if(Fe={},ie===5){if(Fe=j(ne,Ce.properties),!Fe)return!1;Be+=Fe.length}}let Ye=!1;if(ye!=null)if(ve(ye))Ye=!0,Be+=n.byteLength(ye)+2;else return ne.destroy(new Error("Invalid username")),!1;if(Ie!=null){if(!Ye)return ne.destroy(new Error("Username is required to use password")),!1;if(ve(Ie))Be+=ee(Ie)+2;else return ne.destroy(new Error("Invalid password")),!1}ne.write(t.CONNECT_HEADER),z(ne,Be),G(ne,fe),ue.bridgeMode&&(ie+=128),ne.write(ie===131?t.VERSION131:ie===132?t.VERSION132:ie===4?t.VERSION4:ie===5?t.VERSION5:t.VERSION3);let De=0;return De|=ye!=null?t.USERNAME_MASK:0,De|=Ie!=null?t.PASSWORD_MASK:0,De|=Ce&&Ce.retain?t.WILL_RETAIN_MASK:0,De|=Ce&&Ce.qos?Ce.qos<<t.WILL_QOS_SHIFT:0,De|=Ce?t.WILL_FLAG_MASK:0,De|=Se?t.CLEAN_SESSION_MASK:0,ne.write(n.from([De])),y(ne,se),ie===5&&pe.write(),G(ne,oe),Ce&&(ie===5&&Fe.write(),V(ne,Ce.topic),G(ne,Ce.payload)),ye!=null&&G(ne,ye),Ie!=null&&G(ne,Ie),!0}function w(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=ue===5?fe.reasonCode:fe.returnCode,Ce=fe.properties,Se=2;if(typeof ie!="number")return ne.destroy(new Error("Invalid return code")),!1;let se=null;if(ue===5){if(se=j(ne,Ce),!se)return!1;Se+=se.length}return ne.write(t.CONNACK_HEADER),z(ne,Se),ne.write(fe.sessionPresent?t.SESSIONPRESENT_HEADER:a),ne.write(n.from([ie])),se?.write(),!0}function A(le,ne,re){l("publish: packet: %o",le);let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.qos||0,Ce=fe.retain?t.RETAIN_MASK:0,Se=fe.topic,se=fe.payload||i,oe=fe.messageId,ye=fe.properties,Ie=0;if(typeof Se=="string")Ie+=n.byteLength(Se)+2;else if(n.isBuffer(Se))Ie+=Se.length+2;else return ne.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(se)?Ie+=se.length:Ie+=n.byteLength(se),ie&&typeof oe!="number")return ne.destroy(new Error("Invalid messageId")),!1;ie&&(Ie+=2);let Re=null;if(ue===5){if(Re=j(ne,ye),!Re)return!1;Ie+=Re.length}return ne.write(t.PUBLISH_HEADER[ie][fe.dup?1:0][Ce?1:0]),z(ne,Ie),y(ne,ee(Se)),ne.write(Se),ie>0&&y(ne,oe),Re?.write(),l("publish: payload: %o",se),ne.write(se)}function _(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.cmd||"puback",Ce=fe.messageId,Se=fe.dup&&ie==="pubrel"?t.DUP_MASK:0,se=0,oe=fe.reasonCode,ye=fe.properties,Ie=ue===5?3:2;if(ie==="pubrel"&&(se=1),typeof Ce!="number")return ne.destroy(new Error("Invalid messageId")),!1;let Re=null;if(ue===5&&typeof ye=="object"){if(Re=F(ne,ye,re,Ie),!Re)return!1;Ie+=Re.length}return ne.write(t.ACKS[ie][se][Se][0]),Ie===3&&(Ie+=oe!==0?1:-1),z(ne,Ie),y(ne,Ce),ue===5&&Ie!==2&&ne.write(n.from([oe])),Re!==null?Re.write():Ie===4&&ne.write(n.from([0])),!0}function I(le,ne,re){l("subscribe: packet: ");let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.dup?t.DUP_MASK:0,Ce=fe.messageId,Se=fe.subscriptions,se=fe.properties,oe=0;if(typeof Ce!="number")return ne.destroy(new Error("Invalid messageId")),!1;oe+=2;let ye=null;if(ue===5){if(ye=j(ne,se),!ye)return!1;oe+=ye.length}if(typeof Se=="object"&&Se.length)for(let Re=0;Re<Se.length;Re+=1){let Be=Se[Re].topic,pe=Se[Re].qos;if(typeof Be!="string")return ne.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof pe!="number")return ne.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ue===5){if(typeof(Se[Re].nl||!1)!="boolean")return ne.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Se[Re].rap||!1)!="boolean")return ne.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Fe=Se[Re].rh||0;if(typeof Fe!="number"||Fe>2)return ne.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}oe+=n.byteLength(Be)+2+1}else return ne.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),ne.write(t.SUBSCRIBE_HEADER[1][ie?1:0][0]),z(ne,oe),y(ne,Ce),ye!==null&&ye.write();let Ie=!0;for(let Re of Se){let Be=Re.topic,pe=Re.qos,Fe=+Re.nl,Ye=+Re.rap,De=Re.rh,ft;V(ne,Be),ft=t.SUBSCRIBE_OPTIONS_QOS[pe],ue===5&&(ft|=Fe?t.SUBSCRIBE_OPTIONS_NL:0,ft|=Ye?t.SUBSCRIBE_OPTIONS_RAP:0,ft|=De?t.SUBSCRIBE_OPTIONS_RH[De]:0),Ie=ne.write(n.from([ft]))}return Ie}function D(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.messageId,Ce=fe.granted,Se=fe.properties,se=0;if(typeof ie!="number")return ne.destroy(new Error("Invalid messageId")),!1;if(se+=2,typeof Ce=="object"&&Ce.length)for(let ye=0;ye<Ce.length;ye+=1){if(typeof Ce[ye]!="number")return ne.destroy(new Error("Invalid qos vector")),!1;se+=1}else return ne.destroy(new Error("Invalid qos vector")),!1;let oe=null;if(ue===5){if(oe=F(ne,Se,re,se),!oe)return!1;se+=oe.length}return ne.write(t.SUBACK_HEADER),z(ne,se),y(ne,ie),oe!==null&&oe.write(),ne.write(n.from(Ce))}function P(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.messageId,Ce=fe.dup?t.DUP_MASK:0,Se=fe.unsubscriptions,se=fe.properties,oe=0;if(typeof ie!="number")return ne.destroy(new Error("Invalid messageId")),!1;if(oe+=2,typeof Se=="object"&&Se.length)for(let Re=0;Re<Se.length;Re+=1){if(typeof Se[Re]!="string")return ne.destroy(new Error("Invalid unsubscriptions")),!1;oe+=n.byteLength(Se[Re])+2}else return ne.destroy(new Error("Invalid unsubscriptions")),!1;let ye=null;if(ue===5){if(ye=j(ne,se),!ye)return!1;oe+=ye.length}ne.write(t.UNSUBSCRIBE_HEADER[1][Ce?1:0][0]),z(ne,oe),y(ne,ie),ye!==null&&ye.write();let Ie=!0;for(let Re=0;Re<Se.length;Re++)Ie=V(ne,Se[Re]);return Ie}function k(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.messageId,Ce=fe.dup?t.DUP_MASK:0,Se=fe.granted,se=fe.properties,oe=fe.cmd,ye=0,Ie=2;if(typeof ie!="number")return ne.destroy(new Error("Invalid messageId")),!1;if(ue===5)if(typeof Se=="object"&&Se.length)for(let Be=0;Be<Se.length;Be+=1){if(typeof Se[Be]!="number")return ne.destroy(new Error("Invalid qos vector")),!1;Ie+=1}else return ne.destroy(new Error("Invalid qos vector")),!1;let Re=null;if(ue===5){if(Re=F(ne,se,re,Ie),!Re)return!1;Ie+=Re.length}return ne.write(t.ACKS[oe][ye][Ce][0]),z(ne,Ie),y(ne,ie),Re!==null&&Re.write(),ue===5&&ne.write(n.from(Se)),!0}function M(le,ne,re){return ne.write(t.EMPTY[le.cmd])}function H(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.reasonCode,Ce=fe.properties,Se=ue===5?1:0,se=null;if(ue===5){if(se=F(ne,Ce,re,Se),!se)return!1;Se+=se.length}return ne.write(n.from([t.codes.disconnect<<4])),z(ne,Se),ue===5&&ne.write(n.from([ie])),se!==null&&se.write(),!0}function N(le,ne,re){let ue=re?re.protocolVersion:4,fe=le||{},ie=fe.reasonCode,Ce=fe.properties,Se=ue===5?1:0;ue!==5&&ne.destroy(new Error("Invalid mqtt version for auth packet"));let se=F(ne,Ce,re,Se);return se?(Se+=se.length,ne.write(n.from([t.codes.auth<<4])),z(ne,Se),ne.write(n.from([ie])),se!==null&&se.write(),!0):!1}var Q={};function z(le,ne){if(ne>t.VARBYTEINT_MAX)return le.destroy(new Error(`Invalid variable byte integer: ${ne}`)),!1;let re=Q[ne];return re||(re=p(ne),ne<16384&&(Q[ne]=re)),l("writeVarByteInt: writing to stream: %o",re),le.write(re)}function V(le,ne){let re=n.byteLength(ne);return y(le,re),l("writeString: %s",ne),le.write(ne,"utf8")}function K(le,ne,re){V(le,ne),V(le,re)}function Y(le,ne){return l("writeNumberCached: number: %d",ne),l("writeNumberCached: %o",c[ne]),le.write(c[ne])}function W(le,ne){let re=f(ne);return l("writeNumberGenerated: %o",re),le.write(re)}function J(le,ne){let re=g(ne);return l("write4ByteNumber: %o",re),le.write(re)}function G(le,ne){typeof ne=="string"?V(le,ne):ne?(y(le,ne.length),le.write(ne)):y(le,0)}function j(le,ne){if(typeof ne!="object"||ne.length!=null)return{length:1,write(){ae(le,{},0)}};let re=0;function ue(fe,ie){let Ce=t.propertiesTypes[fe],Se=0;switch(Ce){case"byte":{if(typeof ie!="boolean")return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=2;break}case"int8":{if(typeof ie!="number"||ie<0||ie>255)return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=2;break}case"binary":{if(ie&&ie===null)return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=1+n.byteLength(ie)+2;break}case"int16":{if(typeof ie!="number"||ie<0||ie>65535)return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=3;break}case"int32":{if(typeof ie!="number"||ie<0||ie>4294967295)return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=5;break}case"var":{if(typeof ie!="number"||ie<0||ie>268435455)return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=1+n.byteLength(p(ie));break}case"string":{if(typeof ie!="string")return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=3+n.byteLength(ie.toString());break}case"pair":{if(typeof ie!="object")return le.destroy(new Error(`Invalid ${fe}: ${ie}`)),!1;Se+=Object.getOwnPropertyNames(ie).reduce((se,oe)=>{let ye=ie[oe];return Array.isArray(ye)?se+=ye.reduce((Ie,Re)=>(Ie+=3+n.byteLength(oe.toString())+2+n.byteLength(Re.toString()),Ie),0):se+=3+n.byteLength(oe.toString())+2+n.byteLength(ie[oe].toString()),se},0);break}default:return le.destroy(new Error(`Invalid property ${fe}: ${ie}`)),!1}return Se}if(ne)for(let fe in ne){let ie=0,Ce=0,Se=ne[fe];if(Se!==void 0){if(Array.isArray(Se))for(let se=0;se<Se.length;se++){if(Ce=ue(fe,Se[se]),!Ce)return!1;ie+=Ce}else{if(Ce=ue(fe,Se),!Ce)return!1;ie=Ce}if(!ie)return!1;re+=ie}}return{length:n.byteLength(p(re))+re,write(){ae(le,ne,re)}}}function F(le,ne,re,ue){let fe=["reasonString","userProperties"],ie=re&&re.properties&&re.properties.maximumPacketSize?re.properties.maximumPacketSize:0,Ce=j(le,ne);if(ie)for(;ue+Ce.length>ie;){let Se=fe.shift();if(Se&&ne[Se])delete ne[Se],Ce=j(le,ne);else return!1}return Ce}function Z(le,ne,re){switch(t.propertiesTypes[ne]){case"byte":{le.write(n.from([t.properties[ne]])),le.write(n.from([+re]));break}case"int8":{le.write(n.from([t.properties[ne]])),le.write(n.from([re]));break}case"binary":{le.write(n.from([t.properties[ne]])),G(le,re);break}case"int16":{le.write(n.from([t.properties[ne]])),y(le,re);break}case"int32":{le.write(n.from([t.properties[ne]])),J(le,re);break}case"var":{le.write(n.from([t.properties[ne]])),z(le,re);break}case"string":{le.write(n.from([t.properties[ne]])),V(le,re);break}case"pair":{Object.getOwnPropertyNames(re).forEach(ue=>{let fe=re[ue];Array.isArray(fe)?fe.forEach(ie=>{le.write(n.from([t.properties[ne]])),K(le,ue.toString(),ie.toString())}):(le.write(n.from([t.properties[ne]])),K(le,ue.toString(),fe.toString()))});break}default:return le.destroy(new Error(`Invalid property ${ne} value: ${re}`)),!1}}function ae(le,ne,re){z(le,re);for(let ue in ne)if(Object.prototype.hasOwnProperty.call(ne,ue)&&ne[ue]!=null){let fe=ne[ue];if(Array.isArray(fe))for(let ie=0;ie<fe.length;ie++)Z(le,ue,fe[ie]);else Z(le,ue,fe)}}function ee(le){return le?le instanceof n?le.length:n.byteLength(le):0}function ve(le){return typeof le=="string"||le instanceof n}e.exports=v}),DY=He((r,e)=>{Me(),je(),Ne();var t=eB(),{EventEmitter:n}=(nu(),qt(Jo)),{Buffer:i}=(en(),qt(Jr));function a(o,l){let c=new s;return t(o,c,l),c.concat()}var s=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0,l=new Array(this._array.length),c=this._array,f=0,h;for(h=0;h<c.length&&c[h]!==void 0;h++)typeof c[h]!="string"?l[h]=c[h].length:l[h]=i.byteLength(c[h]),o+=l[h];let p=i.allocUnsafe(o);for(h=0;h<c.length&&c[h]!==void 0;h++)typeof c[h]!="string"?(c[h].copy(p,f),f+=l[h]):(p.write(c[h],f),f+=l[h]);return p}destroy(o){o&&this.emit("error",o)}};e.exports=a}),OY=He(r=>{Me(),je(),Ne(),r.parser=_Y().parser,r.generate=DY(),r.writeToStream=eB()}),IY=He((r,e)=>{Me(),je(),Ne(),e.exports=n;function t(a){return a instanceof bg?bg.from(a):new a.constructor(a.buffer.slice(),a.byteOffset,a.length)}function n(a){if(a=a||{},a.circles)return i(a);let s=new Map;if(s.set(Date,h=>new Date(h)),s.set(Map,(h,p)=>new Map(l(Array.from(h),p))),s.set(Set,(h,p)=>new Set(l(Array.from(h),p))),a.constructorHandlers)for(let h of a.constructorHandlers)s.set(h[0],h[1]);let o=null;return a.proto?f:c;function l(h,p){let g=Object.keys(h),y=new Array(g.length);for(let b=0;b<g.length;b++){let v=g[b],E=h[v];typeof E!="object"||E===null?y[v]=E:E.constructor!==Object&&(o=s.get(E.constructor))?y[v]=o(E,p):ArrayBuffer.isView(E)?y[v]=t(E):y[v]=p(E)}return y}function c(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return l(h,c);if(h.constructor!==Object&&(o=s.get(h.constructor)))return o(h,c);let p={};for(let g in h){if(Object.hasOwnProperty.call(h,g)===!1)continue;let y=h[g];typeof y!="object"||y===null?p[g]=y:y.constructor!==Object&&(o=s.get(y.constructor))?p[g]=o(y,c):ArrayBuffer.isView(y)?p[g]=t(y):p[g]=c(y)}return p}function f(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return l(h,f);if(h.constructor!==Object&&(o=s.get(h.constructor)))return o(h,f);let p={};for(let g in h){let y=h[g];typeof y!="object"||y===null?p[g]=y:y.constructor!==Object&&(o=s.get(y.constructor))?p[g]=o(y,f):ArrayBuffer.isView(y)?p[g]=t(y):p[g]=f(y)}return p}}function i(a){let s=[],o=[],l=new Map;if(l.set(Date,g=>new Date(g)),l.set(Map,(g,y)=>new Map(f(Array.from(g),y))),l.set(Set,(g,y)=>new Set(f(Array.from(g),y))),a.constructorHandlers)for(let g of a.constructorHandlers)l.set(g[0],g[1]);let c=null;return a.proto?p:h;function f(g,y){let b=Object.keys(g),v=new Array(b.length);for(let E=0;E<b.length;E++){let S=b[E],w=g[S];if(typeof w!="object"||w===null)v[S]=w;else if(w.constructor!==Object&&(c=l.get(w.constructor)))v[S]=c(w,y);else if(ArrayBuffer.isView(w))v[S]=t(w);else{let A=s.indexOf(w);A!==-1?v[S]=o[A]:v[S]=y(w)}}return v}function h(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return f(g,h);if(g.constructor!==Object&&(c=l.get(g.constructor)))return c(g,h);let y={};s.push(g),o.push(y);for(let b in g){if(Object.hasOwnProperty.call(g,b)===!1)continue;let v=g[b];if(typeof v!="object"||v===null)y[b]=v;else if(v.constructor!==Object&&(c=l.get(v.constructor)))y[b]=c(v,h);else if(ArrayBuffer.isView(v))y[b]=t(v);else{let E=s.indexOf(v);E!==-1?y[b]=o[E]:y[b]=h(v)}}return s.pop(),o.pop(),y}function p(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return f(g,p);if(g.constructor!==Object&&(c=l.get(g.constructor)))return c(g,p);let y={};s.push(g),o.push(y);for(let b in g){let v=g[b];if(typeof v!="object"||v===null)y[b]=v;else if(v.constructor!==Object&&(c=l.get(v.constructor)))y[b]=c(v,p);else if(ArrayBuffer.isView(v))y[b]=t(v);else{let E=s.indexOf(v);E!==-1?y[b]=o[E]:y[b]=p(v)}}return s.pop(),o.pop(),y}}}),CY=He((r,e)=>{Me(),je(),Ne(),e.exports=IY()()}),RY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let i=n.split("/");for(let a=0;a<i.length;a++)if(i[a]!=="+"){if(i[a]==="#")return a===i.length-1;if(i[a].indexOf("+")!==-1||i[a].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let i=0;i<n.length;i++)if(!e(n[i]))return n[i];return null}}),tB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=au(),t={objectMode:!0},n={clean:!0},i=class{options;_inflights;constructor(a){this.options=a||{},this.options={...n,...a},this._inflights=new Map}put(a,s){return this._inflights.set(a.messageId,a),s&&s(),this}createStream(){let a=new e.Readable(t),s=[],o=!1,l=0;return this._inflights.forEach((c,f)=>{s.push(c)}),a._read=()=>{!o&&l<s.length?a.push(s[l++]):a.push(null)},a.destroy=c=>{if(!o)return o=!0,setTimeout(()=>{a.emit("close")},0),a},a}del(a,s){let o=this._inflights.get(a.messageId);return o?(this._inflights.delete(a.messageId),s(null,o)):s&&s(new Error("missing packet")),this}get(a,s){let o=this._inflights.get(a.messageId);return o?s(null,o):s&&s(new Error("missing packet")),this}close(a){this.options.clean&&(this._inflights=null),a&&a()}};r.default=i}),PY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,i,a)=>{n.log("handlePublish: packet %o",i),a=typeof a<"u"?a:n.noop;let s=i.topic.toString(),o=i.payload,{qos:l}=i,{messageId:c}=i,{options:f}=n;if(n.options.protocolVersion===5){let h;if(i.properties&&(h=i.properties.topicAlias),typeof h<"u")if(s.length===0)if(h>0&&h<=65535){let p=n.topicAliasRecv.getTopicByAlias(h);if(p)s=p,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,h);else{n.log("handlePublish :: unregistered topic alias. alias: %d",h),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",h),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(s,h))n.log("handlePublish :: registered topic: %s - alias: %d",s,h);else{n.log("handlePublish :: topic alias out of range. alias: %d",h),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",l),l){case 2:{f.customHandleAcks(s,o,i,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return n.emit("error",h);if(e.indexOf(p)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));p?n._sendPacket({cmd:"pubrec",messageId:c,reasonCode:p},a):n.incomingStore.put(i,()=>{n._sendPacket({cmd:"pubrec",messageId:c},a)})});break}case 1:{f.customHandleAcks(s,o,i,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return n.emit("error",h);if(e.indexOf(p)===-1)return n.emit("error",new Error("Wrong reason code for puback"));p||n.emit("message",s,o,i),n.handleMessage(i,g=>{if(g)return a&&a(g);n._sendPacket({cmd:"puback",messageId:c,reasonCode:p},a)})});break}case 0:n.emit("message",s,o,i),n.handleMessage(i,a);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),LY=He((r,e)=>{e.exports={version:"5.14.1"}}),Gc=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithSubackPacket=r.ErrorWithReasonCode=void 0,r.applyMixin=n;var e=class rB extends Error{code;constructor(a,s){super(a),this.code=s,Object.setPrototypeOf(this,rB.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;var t=class nB extends Error{packet;constructor(a,s){super(a),this.packet=s,Object.setPrototypeOf(this,nB.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};r.ErrorWithSubackPacket=t;function n(i,a,s=!1){let o=[a];for(;;){let l=o[0],c=Object.getPrototypeOf(l);if(c?.prototype)o.unshift(c);else break}for(let l of o)for(let c of Object.getOwnPropertyNames(l.prototype))(s||c!=="constructor")&&Object.defineProperty(i.prototype,c,Object.getOwnPropertyDescriptor(l.prototype,c)??Object.create(null))}r.nextTick=typeof Jt?.nextTick=="function"?Jt.nextTick:i=>{setTimeout(i,0)},r.MQTTJS_VERSION=LY().version}),H0=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=Gc();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,i)=>{let{messageId:a}=i,s=i.cmd,o=null,l=n.outgoing[a]?n.outgoing[a].cb:null,c=null;if(!l){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",s),s){case"pubcomp":case"puback":{let f=i.reasonCode;f&&f>0&&f!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[f]}`,f),n._removeOutgoingAndStoreMessage(a,()=>{l(c,i)})):n._removeOutgoingAndStoreMessage(a,l);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:a};let f=i.reasonCode;f&&f>0&&f!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[f]}`,f),n._removeOutgoingAndStoreMessage(a,()=>{l(c,i)})):n._sendPacket(o);break}case"suback":{delete n.outgoing[a],n.messageIdProvider.deallocate(a);let f=i.granted;for(let h=0;h<f.length;h++){let p=f[h];if((p&128)!==0){c=new Error(`Subscribe error: ${r.ReasonCodes[p]}`),c.code=p;let g=n.messageIdToTopic[a];g&&g.forEach(y=>{delete n._resubscribeTopics[y]})}}delete n.messageIdToTopic[a],n._invokeStoreProcessingQueue(),l(c,i);break}case"unsuback":{delete n.outgoing[a],n.messageIdProvider.deallocate(a),n._invokeStoreProcessingQueue(),l(null,i);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),kY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=Gc(),t=H0(),n=(i,a)=>{let{options:s}=i,o=s.protocolVersion,l=o===5?a.reasonCode:a.returnCode;if(o!==5){let c=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,l);i.emit("error",c);return}i.handleAuth(a,(c,f)=>{if(c){i.emit("error",c);return}if(l===24)i.reconnecting=!1,i._sendPacket(f);else{let h=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);i.emit("error",h)}})};r.default=n}),MY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof Jt=="object"&&Jt?Jt:{},i=(g,y,b,v)=>{typeof n.emitWarning=="function"?n.emitWarning(g,y,b,v):console.error(`[${b}] ${y}: ${g}`)},a=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof a>"u"){s=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(b,v){this._onabort.push(v)}},a=class{constructor(){y()}signal=new s;abort(b){if(!this.signal.aborted){this.signal.reason=b,this.signal.aborted=!0;for(let v of this.signal._onabort)v(b);this.signal.onabort?.(b)}}};let g=n.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",y=()=>{g&&(g=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",y))}}var o=g=>!t.has(g),l=g=>g&&g===Math.floor(g)&&g>0&&isFinite(g),c=g=>l(g)?g<=Math.pow(2,8)?Uint8Array:g<=Math.pow(2,16)?Uint16Array:g<=Math.pow(2,32)?Uint32Array:g<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(g){super(g),this.fill(0)}},h=class ud{heap;length;static#l=!1;static create(y){let b=c(y);if(!b)return[];ud.#l=!0;let v=new ud(y,b);return ud.#l=!1,v}constructor(y,b){if(!ud.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new b(y),this.length=0}push(y){this.heap[this.length++]=y}pop(){return this.heap[--this.length]}},p=class iB{#l;#f;#m;#g;#C;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#u;#d;#o;#a;#v;#s;#b;#x;#h;#S;#A;#c;static unsafeExposeInternals(y){return{starts:y.#x,ttls:y.#h,sizes:y.#b,keyMap:y.#n,keyList:y.#r,valList:y.#e,next:y.#u,prev:y.#d,get head(){return y.#o},get tail(){return y.#a},free:y.#v,isBackgroundFetch:b=>y.#t(b),backgroundFetch:(b,v,E,S)=>y.#k(b,v,E,S),moveToTail:b=>y.#I(b),indexes:b=>y.#E(b),rindexes:b=>y.#w(b),isStale:b=>y.#p(b)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#C}get memoMethod(){return this.#R}get dispose(){return this.#m}get disposeAfter(){return this.#g}constructor(y){let{max:b=0,ttl:v,ttlResolution:E=1,ttlAutopurge:S,updateAgeOnGet:w,updateAgeOnHas:A,allowStale:_,dispose:I,disposeAfter:D,noDisposeOnSet:P,noUpdateTTL:k,maxSize:M=0,maxEntrySize:H=0,sizeCalculation:N,fetchMethod:Q,memoMethod:z,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:Y,allowStaleOnFetchAbort:W,ignoreFetchAbort:J}=y;if(b!==0&&!l(b))throw new TypeError("max option must be a nonnegative integer");let G=b?c(b):Array;if(!G)throw new Error("invalid max value: "+b);if(this.#l=b,this.#f=M,this.maxEntrySize=H||this.#f,this.sizeCalculation=N,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(z!==void 0&&typeof z!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=z,Q!==void 0&&typeof Q!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=Q,this.#A=!!Q,this.#n=new Map,this.#r=new Array(b).fill(void 0),this.#e=new Array(b).fill(void 0),this.#u=new G(b),this.#d=new G(b),this.#o=0,this.#a=0,this.#v=h.create(b),this.#i=0,this.#y=0,typeof I=="function"&&(this.#m=I),typeof D=="function"?(this.#g=D,this.#s=[]):(this.#g=void 0,this.#s=void 0),this.#S=!!this.#m,this.#c=!!this.#g,this.noDisposeOnSet=!!P,this.noUpdateTTL=!!k,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!Y,this.allowStaleOnFetchAbort=!!W,this.ignoreFetchAbort=!!J,this.maxEntrySize!==0){if(this.#f!==0&&!l(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!_,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!w,this.updateAgeOnHas=!!A,this.ttlResolution=l(E)||E===0?E:1,this.ttlAutopurge=!!S,this.ttl=v||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let j="LRU_CACHE_UNBOUNDED";o(j)&&(t.add(j),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",j,iB))}}getRemainingTTL(y){return this.#n.has(y)?1/0:0}#M(){let y=new f(this.#l),b=new f(this.#l);this.#h=y,this.#x=b,this.#N=(S,w,A=e.now())=>{if(b[S]=w!==0?A:0,y[S]=w,w!==0&&this.ttlAutopurge){let _=setTimeout(()=>{this.#p(S)&&this.#_(this.#r[S],"expire")},w+1);_.unref&&_.unref()}},this.#D=S=>{b[S]=y[S]!==0?e.now():0},this.#T=(S,w)=>{if(y[w]){let A=y[w],_=b[w];if(!A||!_)return;S.ttl=A,S.start=_,S.now=v||E();let I=S.now-_;S.remainingTTL=A-I}};let v=0,E=()=>{let S=e.now();if(this.ttlResolution>0){v=S;let w=setTimeout(()=>v=0,this.ttlResolution);w.unref&&w.unref()}return S};this.getRemainingTTL=S=>{let w=this.#n.get(S);if(w===void 0)return 0;let A=y[w],_=b[w];if(!A||!_)return 1/0;let I=(v||E())-_;return A-I},this.#p=S=>{let w=b[S],A=y[S];return!!A&&!!w&&(v||E())-w>A}}#D=()=>{};#T=()=>{};#N=()=>{};#p=()=>!1;#$(){let y=new f(this.#l);this.#y=0,this.#b=y,this.#O=b=>{this.#y-=y[b],y[b]=0},this.#j=(b,v,E,S)=>{if(this.#t(v))return 0;if(!l(E))if(S){if(typeof S!="function")throw new TypeError("sizeCalculation must be a function");if(E=S(v,b),!l(E))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return E},this.#P=(b,v,E)=>{if(y[b]=v,this.#f){let S=this.#f-y[b];for(;this.#y>S;)this.#L(!0)}this.#y+=y[b],E&&(E.entrySize=v,E.totalCalculatedSize=this.#y)}}#O=y=>{};#P=(y,b,v)=>{};#j=(y,b,v,E)=>{if(v||E)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:y=this.allowStale}={}){if(this.#i)for(let b=this.#a;!(!this.#F(b)||((y||!this.#p(b))&&(yield b),b===this.#o));)b=this.#d[b]}*#w({allowStale:y=this.allowStale}={}){if(this.#i)for(let b=this.#o;!(!this.#F(b)||((y||!this.#p(b))&&(yield b),b===this.#a));)b=this.#u[b]}#F(y){return y!==void 0&&this.#n.get(this.#r[y])===y}*entries(){for(let y of this.#E())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*rentries(){for(let y of this.#w())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*keys(){for(let y of this.#E()){let b=this.#r[y];b!==void 0&&!this.#t(this.#e[y])&&(yield b)}}*rkeys(){for(let y of this.#w()){let b=this.#r[y];b!==void 0&&!this.#t(this.#e[y])&&(yield b)}}*values(){for(let y of this.#E())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}*rvalues(){for(let y of this.#w())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(y,b={}){for(let v of this.#E()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;if(S!==void 0&&y(S,this.#r[v],this))return this.get(this.#r[v],b)}}forEach(y,b=this){for(let v of this.#E()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(b,S,this.#r[v],this)}}rforEach(y,b=this){for(let v of this.#w()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(b,S,this.#r[v],this)}}purgeStale(){let y=!1;for(let b of this.#w({allowStale:!0}))this.#p(b)&&(this.#_(this.#r[b],"expire"),y=!0);return y}info(y){let b=this.#n.get(y);if(b===void 0)return;let v=this.#e[b],E=this.#t(v)?v.__staleWhileFetching:v;if(E===void 0)return;let S={value:E};if(this.#h&&this.#x){let w=this.#h[b],A=this.#x[b];if(w&&A){let _=w-(e.now()-A);S.ttl=_,S.start=Date.now()}}return this.#b&&(S.size=this.#b[b]),S}dump(){let y=[];for(let b of this.#E({allowStale:!0})){let v=this.#r[b],E=this.#e[b],S=this.#t(E)?E.__staleWhileFetching:E;if(S===void 0||v===void 0)continue;let w={value:S};if(this.#h&&this.#x){w.ttl=this.#h[b];let A=e.now()-this.#x[b];w.start=Math.floor(Date.now()-A)}this.#b&&(w.size=this.#b[b]),y.unshift([v,w])}return y}load(y){this.clear();for(let[b,v]of y){if(v.start){let E=Date.now()-v.start;v.start=e.now()-E}this.set(b,v.value,v)}}set(y,b,v={}){if(b===void 0)return this.delete(y),this;let{ttl:E=this.ttl,start:S,noDisposeOnSet:w=this.noDisposeOnSet,sizeCalculation:A=this.sizeCalculation,status:_}=v,{noUpdateTTL:I=this.noUpdateTTL}=v,D=this.#j(y,b,v.size||0,A);if(this.maxEntrySize&&D>this.maxEntrySize)return _&&(_.set="miss",_.maxEntrySizeExceeded=!0),this.#_(y,"set"),this;let P=this.#i===0?void 0:this.#n.get(y);if(P===void 0)P=this.#i===0?this.#a:this.#v.length!==0?this.#v.pop():this.#i===this.#l?this.#L(!1):this.#i,this.#r[P]=y,this.#e[P]=b,this.#n.set(y,P),this.#u[this.#a]=P,this.#d[P]=this.#a,this.#a=P,this.#i++,this.#P(P,D,_),_&&(_.set="add"),I=!1;else{this.#I(P);let k=this.#e[P];if(b!==k){if(this.#A&&this.#t(k)){k.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:M}=k;M!==void 0&&!w&&(this.#S&&this.#m?.(M,y,"set"),this.#c&&this.#s?.push([M,y,"set"]))}else w||(this.#S&&this.#m?.(k,y,"set"),this.#c&&this.#s?.push([k,y,"set"]));if(this.#O(P),this.#P(P,D,_),this.#e[P]=b,_){_.set="replace";let M=k&&this.#t(k)?k.__staleWhileFetching:k;M!==void 0&&(_.oldValue=M)}}else _&&(_.set="update")}if(E!==0&&!this.#h&&this.#M(),this.#h&&(I||this.#N(P,E,S),_&&this.#T(_,P)),!w&&this.#c&&this.#s){let k=this.#s,M;for(;M=k?.shift();)this.#g?.(...M)}return this}pop(){try{for(;this.#i;){let y=this.#e[this.#o];if(this.#L(!0),this.#t(y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(this.#c&&this.#s){let y=this.#s,b;for(;b=y?.shift();)this.#g?.(...b)}}}#L(y){let b=this.#o,v=this.#r[b],E=this.#e[b];return this.#A&&this.#t(E)?E.__abortController.abort(new Error("evicted")):(this.#S||this.#c)&&(this.#S&&this.#m?.(E,v,"evict"),this.#c&&this.#s?.push([E,v,"evict"])),this.#O(b),y&&(this.#r[b]=void 0,this.#e[b]=void 0,this.#v.push(b)),this.#i===1?(this.#o=this.#a=0,this.#v.length=0):this.#o=this.#u[b],this.#n.delete(v),this.#i--,b}has(y,b={}){let{updateAgeOnHas:v=this.updateAgeOnHas,status:E}=b,S=this.#n.get(y);if(S!==void 0){let w=this.#e[S];if(this.#t(w)&&w.__staleWhileFetching===void 0)return!1;if(this.#p(S))E&&(E.has="stale",this.#T(E,S));else return v&&this.#D(S),E&&(E.has="hit",this.#T(E,S)),!0}else E&&(E.has="miss");return!1}peek(y,b={}){let{allowStale:v=this.allowStale}=b,E=this.#n.get(y);if(E===void 0||!v&&this.#p(E))return;let S=this.#e[E];return this.#t(S)?S.__staleWhileFetching:S}#k(y,b,v,E){let S=b===void 0?void 0:this.#e[b];if(this.#t(S))return S;let w=new a,{signal:A}=v;A?.addEventListener("abort",()=>w.abort(A.reason),{signal:w.signal});let _={signal:w.signal,options:v,context:E},I=(N,Q=!1)=>{let{aborted:z}=w.signal,V=v.ignoreFetchAbort&&N!==void 0;if(v.status&&(z&&!Q?(v.status.fetchAborted=!0,v.status.fetchError=w.signal.reason,V&&(v.status.fetchAbortIgnored=!0)):v.status.fetchResolved=!0),z&&!V&&!Q)return P(w.signal.reason);let K=M;return this.#e[b]===M&&(N===void 0?K.__staleWhileFetching?this.#e[b]=K.__staleWhileFetching:this.#_(y,"fetch"):(v.status&&(v.status.fetchUpdated=!0),this.set(y,N,_.options))),N},D=N=>(v.status&&(v.status.fetchRejected=!0,v.status.fetchError=N),P(N)),P=N=>{let{aborted:Q}=w.signal,z=Q&&v.allowStaleOnFetchAbort,V=z||v.allowStaleOnFetchRejection,K=V||v.noDeleteOnFetchRejection,Y=M;if(this.#e[b]===M&&(!K||Y.__staleWhileFetching===void 0?this.#_(y,"fetch"):z||(this.#e[b]=Y.__staleWhileFetching)),V)return v.status&&Y.__staleWhileFetching!==void 0&&(v.status.returnedStale=!0),Y.__staleWhileFetching;if(Y.__returned===Y)throw N},k=(N,Q)=>{let z=this.#C?.(y,S,_);z&&z instanceof Promise&&z.then(V=>N(V===void 0?void 0:V),Q),w.signal.addEventListener("abort",()=>{(!v.ignoreFetchAbort||v.allowStaleOnFetchAbort)&&(N(void 0),v.allowStaleOnFetchAbort&&(N=V=>I(V,!0)))})};v.status&&(v.status.fetchDispatched=!0);let M=new Promise(k).then(I,D),H=Object.assign(M,{__abortController:w,__staleWhileFetching:S,__returned:void 0});return b===void 0?(this.set(y,H,{..._.options,status:void 0}),b=this.#n.get(y)):this.#e[b]=H,H}#t(y){if(!this.#A)return!1;let b=y;return!!b&&b instanceof Promise&&b.hasOwnProperty("__staleWhileFetching")&&b.__abortController instanceof a}async fetch(y,b={}){let{allowStale:v=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,ttl:w=this.ttl,noDisposeOnSet:A=this.noDisposeOnSet,size:_=0,sizeCalculation:I=this.sizeCalculation,noUpdateTTL:D=this.noUpdateTTL,noDeleteOnFetchRejection:P=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:k=this.allowStaleOnFetchRejection,ignoreFetchAbort:M=this.ignoreFetchAbort,allowStaleOnFetchAbort:H=this.allowStaleOnFetchAbort,context:N,forceRefresh:Q=!1,status:z,signal:V}=b;if(!this.#A)return z&&(z.fetch="get"),this.get(y,{allowStale:v,updateAgeOnGet:E,noDeleteOnStaleGet:S,status:z});let K={allowStale:v,updateAgeOnGet:E,noDeleteOnStaleGet:S,ttl:w,noDisposeOnSet:A,size:_,sizeCalculation:I,noUpdateTTL:D,noDeleteOnFetchRejection:P,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:H,ignoreFetchAbort:M,status:z,signal:V},Y=this.#n.get(y);if(Y===void 0){z&&(z.fetch="miss");let W=this.#k(y,Y,K,N);return W.__returned=W}else{let W=this.#e[Y];if(this.#t(W)){let F=v&&W.__staleWhileFetching!==void 0;return z&&(z.fetch="inflight",F&&(z.returnedStale=!0)),F?W.__staleWhileFetching:W.__returned=W}let J=this.#p(Y);if(!Q&&!J)return z&&(z.fetch="hit"),this.#I(Y),E&&this.#D(Y),z&&this.#T(z,Y),W;let G=this.#k(y,Y,K,N),j=G.__staleWhileFetching!==void 0&&v;return z&&(z.fetch=J?"stale":"refresh",j&&J&&(z.returnedStale=!0)),j?G.__staleWhileFetching:G.__returned=G}}async forceFetch(y,b={}){let v=await this.fetch(y,b);if(v===void 0)throw new Error("fetch() returned undefined");return v}memo(y,b={}){let v=this.#R;if(!v)throw new Error("no memoMethod provided to constructor");let{context:E,forceRefresh:S,...w}=b,A=this.get(y,w);if(!S&&A!==void 0)return A;let _=v(y,A,{options:w,context:E});return this.set(y,_,w),_}get(y,b={}){let{allowStale:v=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,status:w}=b,A=this.#n.get(y);if(A!==void 0){let _=this.#e[A],I=this.#t(_);return w&&this.#T(w,A),this.#p(A)?(w&&(w.get="stale"),I?(w&&v&&_.__staleWhileFetching!==void 0&&(w.returnedStale=!0),v?_.__staleWhileFetching:void 0):(S||this.#_(y,"expire"),w&&v&&(w.returnedStale=!0),v?_:void 0)):(w&&(w.get="hit"),I?_.__staleWhileFetching:(this.#I(A),E&&this.#D(A),_))}else w&&(w.get="miss")}#B(y,b){this.#d[b]=y,this.#u[y]=b}#I(y){y!==this.#a&&(y===this.#o?this.#o=this.#u[y]:this.#B(this.#d[y],this.#u[y]),this.#B(this.#a,y),this.#a=y)}delete(y){return this.#_(y,"delete")}#_(y,b){let v=!1;if(this.#i!==0){let E=this.#n.get(y);if(E!==void 0)if(v=!0,this.#i===1)this.#U(b);else{this.#O(E);let S=this.#e[E];if(this.#t(S)?S.__abortController.abort(new Error("deleted")):(this.#S||this.#c)&&(this.#S&&this.#m?.(S,y,b),this.#c&&this.#s?.push([S,y,b])),this.#n.delete(y),this.#r[E]=void 0,this.#e[E]=void 0,E===this.#a)this.#a=this.#d[E];else if(E===this.#o)this.#o=this.#u[E];else{let w=this.#d[E];this.#u[w]=this.#u[E];let A=this.#u[E];this.#d[A]=this.#d[E]}this.#i--,this.#v.push(E)}}if(this.#c&&this.#s?.length){let E=this.#s,S;for(;S=E?.shift();)this.#g?.(...S)}return v}clear(){return this.#U("delete")}#U(y){for(let b of this.#w({allowStale:!0})){let v=this.#e[b];if(this.#t(v))v.__abortController.abort(new Error("deleted"));else{let E=this.#r[b];this.#S&&this.#m?.(v,E,y),this.#c&&this.#s?.push([v,E,y])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#h&&this.#x&&(this.#h.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#o=0,this.#a=0,this.#v.length=0,this.#y=0,this.#i=0,this.#c&&this.#s){let b=this.#s,v;for(;v=b?.shift();)this.#g?.(...v)}}};r.LRUCache=p}),qs=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(i=0){this.iteratorType=i}equals(i){return this.o===i.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),NY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[]){super(),this.S=[];let a=this;i.forEach(function(s){a.push(s)})}clear(){this.i=0,this.S=[]}push(i){return this.S.push(i),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),jY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[]){super(),this.j=0,this.q=[];let a=this;i.forEach(function(s){a.push(s)})}clear(){this.q=[],this.i=this.j=0}push(i){let a=this.q.length;if(this.j/a>.5&&this.j+this.i>=a&&a>4096){let s=this.i;for(let o=0;o<s;++o)this.q[o]=this.q[this.j+o];this.j=0,this.q[this.i]=i}else this.q[this.j+this.i]=i;return++this.i}pop(){if(this.i===0)return;let i=this.q[this.j++];return this.i-=1,i}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),FY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[],a=function(o,l){return o>l?-1:o<l?1:0},s=!0){if(super(),this.v=a,Array.isArray(i))this.C=s?[...i]:i;else{this.C=[];let l=this;i.forEach(function(c){l.C.push(c)})}this.i=this.C.length;let o=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,o)}m(i){let a=this.C[i];for(;i>0;){let s=i-1>>1,o=this.C[s];if(this.v(o,a)<=0)break;this.C[i]=o,i=s}this.C[i]=a}k(i,a){let s=this.C[i];for(;i<a;){let o=i<<1|1,l=o+1,c=this.C[o];if(l<this.i&&this.v(c,this.C[l])>0&&(o=l,c=this.C[l]),this.v(c,s)>=0)break;this.C[i]=c,i=o}this.C[i]=s}clear(){this.i=0,this.C.length=0}push(i){this.C.push(i),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let i=this.C[0],a=this.C.pop();return this.i-=1,this.i&&(this.C[0]=a,this.k(0,this.i>>1)),i}top(){return this.C[0]}find(i){return this.C.indexOf(i)>=0}remove(i){let a=this.C.indexOf(i);return a<0?!1:(a===0?this.pop():a===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(a,1,this.C.pop()),this.i-=1,this.m(a),this.k(a,this.i>>1)),!0)}updateItem(i){let a=this.C.indexOf(i);return a<0?!1:(this.m(a),this.k(a,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),i1=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Container{},n=t;r.default=n}),Ws=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),aB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=qs(),t=Ws(),n=class extends e.ContainerIterator{constructor(i,a){super(a),this.o=i,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(i){this.container.setElementByPos(this.o,i)}};r.RandomIterator=n}),BY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(i1()),t=aB();function n(o){return o&&o.t?o:{default:o}}var i=class sB extends t.RandomIterator{constructor(l,c,f){super(l,f),this.container=c}copy(){return new sB(this.o,this.container,this.iteratorType)}},a=class extends e.default{constructor(o=[],l=!0){if(super(),Array.isArray(o))this.J=l?[...o]:o,this.i=o.length;else{this.J=[];let c=this;o.forEach(function(f){c.pushBack(f)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J[o]}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J.splice(o,1),this.i-=1,this.i}eraseElementByValue(o){let l=0;for(let c=0;c<this.i;++c)this.J[c]!==o&&(this.J[l++]=this.J[c]);return this.i=this.J.length=l,this.i}eraseElementByIterator(o){let l=o.o;return o=o.next(),this.eraseElementByPos(l),o}pushBack(o){return this.J.push(o),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;this.J[o]=l}insert(o,l,c=1){if(o<0||o>this.i)throw new RangeError;return this.J.splice(o,0,...new Array(c).fill(l)),this.i+=c,this.i}find(o){for(let l=0;l<this.i;++l)if(this.J[l]===o)return new i(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let o=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[o++]=this.J[l]);return this.i=this.J.length=o,this.i}sort(o){this.J.sort(o)}forEach(o){for(let l=0;l<this.i;++l)o(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},s=a;r.default=s}),UY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(i1()),t=qs(),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class oB extends t.ContainerIterator{constructor(c,f,h,p){super(p),this.o=c,this.h=f,this.container=h,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=c}copy(){return new oB(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;l.forEach(function(f){c.pushBack(f)})}V(l){let{L:c,B:f}=l;c.B=f,f.L=c,l===this.p&&(this.p=f),l===this._&&(this._=c),this.i-=1}G(l,c){let f=c.B,h={l,L:c,B:f};c.B=h,f.L=h,c===this.h&&(this.p=h),f===this.h&&(this._=h),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return c.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}eraseElementByValue(l){let c=this.p;for(;c!==this.h;)c.l===l&&this.V(c),c=c.B;return this.i}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,n.throwIteratorAccessError)(),l=l.next(),this.V(c),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,c){if(l<0||l>this.i-1)throw new RangeError;let f=this.p;for(;l--;)f=f.B;f.l=c}insert(l,c,f=1){if(l<0||l>this.i)throw new RangeError;if(f<=0)return this.i;if(l===0)for(;f--;)this.pushFront(c);else if(l===this.i)for(;f--;)this.pushBack(c);else{let h=this.p;for(let g=1;g<l;++g)h=h.B;let p=h.B;for(this.i+=f;f--;)h.B={l:c,L:h},h.B.L=h,h=h.B;h.B=p,p.L=h}return this.i}find(l){let c=this.p;for(;c!==this.h;){if(c.l===l)return new a(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,c=this._,f=0;for(;f<<1<this.i;){let h=l.l;l.l=c.l,c.l=h,l=l.B,c=c.L,f+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let c=l;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;l.B=c.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let c=[];this.forEach(function(h){c.push(h)}),c.sort(l);let f=this.p;c.forEach(function(h){f.l=h,f=f.B})}merge(l){let c=this;if(this.i===0)l.forEach(function(f){c.pushBack(f)});else{let f=this.p;l.forEach(function(h){for(;f!==c.h&&f.l<=h;)f=f.B;c.G(h,f.L)})}return this.i}forEach(l){let c=this.p,f=0;for(;c!==this.h;)l(c.l,f++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},o=s;r.default=o}),$Y=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(i1()),t=aB();function n(o){return o&&o.t?o:{default:o}}var i=class lB extends t.RandomIterator{constructor(l,c,f){super(l,f),this.container=c}copy(){return new lB(this.o,this.container,this.iteratorType)}},a=class extends e.default{constructor(o=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size;if(typeof o.size=="function")return o.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(c/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let f=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(f>>1),this.D=this.N=this.F-c%this.F>>1;let h=this;o.forEach(function(p){h.pushBack(p)})}T(){let o=[],l=Math.max(this.P>>1,1);for(let c=0;c<l;++c)o[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)o[o.length]=this.A[c];for(let c=0;c<this.R;++c)o[o.length]=this.A[c];o[o.length]=[...this.A[this.R]],this.j=l,this.R=o.length-1;for(let c=0;c<l;++c)o[o.length]=new Array(this.F);this.A=o,this.P=o.length}O(o){let l=this.D+o+1,c=l%this.F,f=c-1,h=this.j+(l-c)/this.F;return c===0&&(h-=1),h%=this.P,f<0&&(f+=this.F),{curNodeBucketIndex:h,curNodePointerIndex:f}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(o){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=o,this.i}popBack(){if(this.i===0)return;let o=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,o}pushFront(o){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=o,this.i}popFront(){if(this.i===0)return;let o=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,o}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(o);return this.A[l][c]}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:f}=this.O(o);this.A[c][f]=l}insert(o,l,c=1){if(o<0||o>this.i)throw new RangeError;if(o===0)for(;c--;)this.pushFront(l);else if(o===this.i)for(;c--;)this.pushBack(l);else{let f=[];for(let h=o;h<this.i;++h)f.push(this.getElementByPos(h));this.cut(o-1);for(let h=0;h<c;++h)this.pushBack(l);for(let h=0;h<f.length;++h)this.pushBack(f[h])}return this.i}cut(o){if(o<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(o);return this.R=l,this.N=c,this.i=o+1,this.i}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;if(o===0)this.popFront();else if(o===this.i-1)this.popBack();else{let l=[];for(let f=o+1;f<this.i;++f)l.push(this.getElementByPos(f));this.cut(o),this.popBack();let c=this;l.forEach(function(f){c.pushBack(f)})}return this.i}eraseElementByValue(o){if(this.i===0)return 0;let l=[];for(let f=0;f<this.i;++f){let h=this.getElementByPos(f);h!==o&&l.push(h)}let c=l.length;for(let f=0;f<c;++f)this.setElementByPos(f,l[f]);return this.cut(c-1)}eraseElementByIterator(o){let l=o.o;return this.eraseElementByPos(l),o=o.next(),o}find(o){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===o)return new i(l,this);return this.end()}reverse(){let o=0,l=this.i-1;for(;o<l;){let c=this.getElementByPos(o);this.setElementByPos(o,this.getElementByPos(l)),this.setElementByPos(l,c),o+=1,l-=1}}unique(){if(this.i<=1)return this.i;let o=1,l=this.getElementByPos(0);for(let c=1;c<this.i;++c){let f=this.getElementByPos(c);f!==l&&(l=f,this.setElementByPos(o++,f))}for(;this.i>o;)this.popBack();return this.i}sort(o){let l=[];for(let c=0;c<this.i;++c)l.push(this.getElementByPos(c));l.sort(o);for(let c=0;c<this.i;++c)this.setElementByPos(c,l[c])}shrinkToFit(){if(this.i===0)return;let o=[];this.forEach(function(l){o.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<o.length;++l)this.pushBack(o[l])}forEach(o){for(let l=0;l<this.i;++l)o(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let o=0;o<this.i;++o)yield this.getElementByPos(o)}).bind(this)()}},s=a;r.default=s}),HY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,i){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=i}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let i=n.tt;for(;i.U===n;)n=i,i=n.tt;n=i}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let i=n.tt;for(;i.W===n;)n=i,i=n.tt;return n.W!==i?i:n}}te(){let n=this.tt,i=this.W,a=i.U;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.U=this,this.tt=i,this.W=a,a&&(a.tt=this),i}se(){let n=this.tt,i=this.U,a=i.W;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.W=this,this.tt=i,this.U=a,a&&(a.tt=this),i}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),uB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=HY(),t=qs(),n=Ws(),i=class extends t.Container{constructor(s=function(l,c){return l<c?-1:l>c?1:0},o=!1){super(),this.Y=void 0,this.v=s,o?(this.re=e.TreeNodeEnableIndex,this.M=function(l,c,f){let h=this.ne(l,c,f);if(h){let p=h.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let g=this.he(h);if(g){let{parentNode:y,grandParent:b,curNode:v}=g;y.ie(),b.ie(),v.ie()}}return this.i},this.V=function(l){let c=this.fe(l);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=e.TreeNode,this.M=function(l,c,f){let h=this.ne(l,c,f);return h&&this.he(h),this.i},this.V=this.fe),this.h=new this.re}X(s,o){let l=this.h;for(;s;){let c=this.v(s.u,o);if(c<0)s=s.W;else if(c>0)l=s,s=s.U;else return s}return l}Z(s,o){let l=this.h;for(;s;)this.v(s.u,o)<=0?s=s.W:(l=s,s=s.U);return l}$(s,o){let l=this.h;for(;s;){let c=this.v(s.u,o);if(c<0)l=s,s=s.W;else if(c>0)s=s.U;else return s}return l}rr(s,o){let l=this.h;for(;s;)this.v(s.u,o)<0?(l=s,s=s.W):s=s.U;return l}ue(s){for(;;){let o=s.tt;if(o===this.h)return;if(s.ee===1){s.ee=0;return}if(s===o.U){let l=o.W;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.te():o.te();else if(l.W&&l.W.ee===1){l.ee=o.ee,o.ee=0,l.W.ee=0,o===this.Y?this.Y=o.te():o.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,s=o)}else{let l=o.U;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.se():o.se();else if(l.U&&l.U.ee===1){l.ee=o.ee,o.ee=0,l.U.ee=0,o===this.Y?this.Y=o.se():o.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,s=o)}}}fe(s){if(this.i===1)return this.clear(),this.h;let o=s;for(;o.U||o.W;){if(o.W)for(o=o.W;o.U;)o=o.U;else o=o.U;[s.u,o.u]=[o.u,s.u],[s.l,o.l]=[o.l,s.l],s=o}this.h.U===o?this.h.U=o.tt:this.h.W===o&&(this.h.W=o.tt),this.ue(o);let l=o.tt;return o===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(s,o){return s===void 0?!1:this.oe(s.U,o)||o(s)?!0:this.oe(s.W,o)}he(s){for(;;){let o=s.tt;if(o.ee===0)return;let l=o.tt;if(o===l.U){let c=l.W;if(c&&c.ee===1){if(c.ee=o.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===o.W){if(s.ee=0,s.U&&(s.U.tt=o),s.W&&(s.W.tt=l),o.W=s.U,l.U=s.W,s.U=o,s.W=l,l===this.Y)this.Y=s,this.h.tt=s;else{let f=l.tt;f.U===l?f.U=s:f.W=s}return s.tt=l.tt,o.tt=s,l.tt=s,l.ee=1,{parentNode:o,grandParent:l,curNode:s}}else o.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let c=l.U;if(c&&c.ee===1){if(c.ee=o.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===o.U){if(s.ee=0,s.U&&(s.U.tt=l),s.W&&(s.W.tt=o),l.W=s.U,o.U=s.W,s.U=l,s.W=o,l===this.Y)this.Y=s,this.h.tt=s;else{let f=l.tt;f.U===l?f.U=s:f.W=s}return s.tt=l.tt,o.tt=s,l.tt=s,l.ee=1,{parentNode:o,grandParent:l,curNode:s}}else o.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(s,o,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(s,o),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,f=this.h.U,h=this.v(f.u,s);if(h===0){f.l=o;return}else if(h>0)f.U=new this.re(s,o),f.U.tt=f,c=f.U,this.h.U=c;else{let p=this.h.W,g=this.v(p.u,s);if(g===0){p.l=o;return}else if(g<0)p.W=new this.re(s,o),p.W.tt=p,c=p.W,this.h.W=c;else{if(l!==void 0){let y=l.o;if(y!==this.h){let b=this.v(y.u,s);if(b===0){y.l=o;return}else if(b>0){let v=y.L(),E=this.v(v.u,s);if(E===0){v.l=o;return}else E<0&&(c=new this.re(s,o),v.W===void 0?(v.W=c,c.tt=v):(y.U=c,c.tt=y))}}}if(c===void 0)for(c=this.Y;;){let y=this.v(c.u,s);if(y>0){if(c.U===void 0){c.U=new this.re(s,o),c.U.tt=c,c=c.U;break}c=c.U}else if(y<0){if(c.W===void 0){c.W=new this.re(s,o),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=o;return}}}}return this.i+=1,c}I(s,o){for(;s;){let l=this.v(s.u,o);if(l<0)s=s.W;else if(l>0)s=s.U;else return s}return s||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(s,o){let l=s.o;if(l===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return l.u=o,!0;if(l===this.h.U)return this.v(l.B().u,o)>0?(l.u=o,!0):!1;if(l===this.h.W)return this.v(l.L().u,o)<0?(l.u=o,!0):!1;let c=l.L().u;if(this.v(c,o)>=0)return!1;let f=l.B().u;return this.v(f,o)<=0?!1:(l.u=o,!0)}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=0,l=this;return this.oe(this.Y,function(c){return s===o?(l.V(c),!0):(o+=1,!1)}),this.i}eraseElementByKey(s){if(this.i===0)return!1;let o=this.I(this.Y,s);return o===this.h?!1:(this.V(o),!0)}eraseElementByIterator(s){let o=s.o;o===this.h&&(0,n.throwIteratorAccessError)();let l=o.W===void 0;return s.iteratorType===0?l&&s.next():(!l||o.U===void 0)&&s.next(),this.V(o),s}forEach(s){let o=0;for(let l of this)s(l,o++,this)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o,l=0;for(let c of this){if(l===s){o=c;break}l+=1}return o}getHeight(){if(this.i===0)return 0;let s=function(o){return o?Math.max(s(o.U),s(o.W))+1:0};return s(this.Y)}},a=i;r.default=a}),cB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=Ws(),n=class extends e.ContainerIterator{constructor(a,s,o){super(o),this.o=a,this.h=s,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let a=this.o,s=this.h.tt;if(a===this.h)return s?s.rt-1:0;let o=0;for(a.U&&(o+=a.U.rt);a!==s;){let l=a.tt;a===l.W&&(o+=1,l.U&&(o+=l.U.rt)),a=l}return o}},i=n;r.default=i}),GY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(uB()),t=i(cB()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class fB extends t.default{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new fB(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[],c,f){super(c,f);let h=this;l.forEach(function(p){h.insert(p)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,c){return this.M(l,void 0,c)}find(l){let c=this.I(this.Y,l);return new a(c,this.h,this)}lowerBound(l){let c=this.X(this.Y,l);return new a(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new a(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new a(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new a(c,this.h,this)}union(l){let c=this;return l.forEach(function(f){c.insert(f)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=s;r.default=o}),KY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(uB()),t=i(cB()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class dB extends t.default{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(f,h){if(h==="0")return c.o.u;if(h==="1")return c.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return c.o.l=p,!0}})}copy(){return new dB(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[],c,f){super(c,f);let h=this;l.forEach(function(p){h.setElement(p[0],p[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let c=this.X(this.Y,l);return new a(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new a(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new a(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new a(c,this.h,this)}setElement(l,c,f){return this.M(l,c,f)}find(l){let c=this.I(this.Y,l);return new a(c,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let c=this;return l.forEach(function(f){c.setElement(f[0],f[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=s;r.default=o}),hB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),pB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=qs(),t=i(hB()),n=Ws();function i(o){return o&&o.t?o:{default:o}}var a=class extends e.ContainerIterator{constructor(o,l,c){super(c),this.o=o,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=a;var s=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(o){let{L:l,B:c}=o;l.B=c,c.L=l,o===this.p&&(this.p=c),o===this._&&(this._=l),this.i-=1}M(o,l,c){c===void 0&&(c=(0,t.default)(o));let f;if(c){let h=o[this.HASH_TAG];if(h!==void 0)return this.H[h].l=l,this.i;Object.defineProperty(o,this.HASH_TAG,{value:this.H.length,configurable:!0}),f={u:o,l,L:this._,B:this.h},this.H.push(f)}else{let h=this.g[o];if(h)return h.l=l,this.i;f={u:o,l,L:this._,B:this.h},this.g[o]=f}return this.i===0?(this.p=f,this.h.B=f):this._.B=f,this._=f,this.h.L=f,++this.i}I(o,l){if(l===void 0&&(l=(0,t.default)(o)),l){let c=o[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[o]||this.h}clear(){let o=this.HASH_TAG;this.H.forEach(function(l){delete l.u[o]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(o,l){let c;if(l===void 0&&(l=(0,t.default)(o)),l){let f=o[this.HASH_TAG];if(f===void 0)return!1;delete o[this.HASH_TAG],c=this.H[f],delete this.H[f]}else{if(c=this.g[o],c===void 0)return!1;delete this.g[o]}return this.V(c),!0}eraseElementByIterator(o){let l=o.o;return l===this.h&&(0,n.throwIteratorAccessError)(),this.V(l),o.next()}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return this.V(l),this.i}};r.HashContainer=s}),zY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=pB(),t=Ws(),n=class mB extends e.HashContainerIterator{constructor(o,l,c,f){super(o,l,f),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new mB(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(s=[]){super();let o=this;s.forEach(function(l){o.insert(l)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(s,o){return this.M(s,void 0,o)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=this.p;for(;s--;)o=o.B;return o.u}find(s,o){let l=this.I(s,o);return new n(l,this.h,this)}forEach(s){let o=0,l=this.p;for(;l!==this.h;)s(l.u,o++,this),l=l.B}[Symbol.iterator](){return(function*(){let s=this.p;for(;s!==this.h;)yield s.u,s=s.B}).bind(this)()}},a=i;r.default=a}),YY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=pB(),t=i(hB()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class gB extends e.HashContainerIterator{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(f,h){if(h==="0")return c.o.u;if(h==="1")return c.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return c.o.l=p,!0}})}copy(){return new gB(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(f){c.setElement(f[0],f[1])})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,c,f){return this.M(l,c,f)}getElementByKey(l,c){if(c===void 0&&(c=(0,t.default)(l)),c){let h=l[this.HASH_TAG];return h!==void 0?this.H[h].l:void 0}let f=this.g[l];return f?f.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return[c.u,c.l]}find(l,c){let f=this.I(l,c);return new a(f,this.h,this)}forEach(l){let c=0,f=this.p;for(;f!==this.h;)l([f.u,f.l],c++,this),f=f.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},o=s;r.default=o}),qY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return i.default}});var e=h(NY()),t=h(jY()),n=h(FY()),i=h(BY()),a=h(UY()),s=h($Y()),o=h(GY()),l=h(KY()),c=h(zY()),f=h(YY());function h(p){return p&&p.t?p:{default:p}}}),WY=He((r,e)=>{Me(),je(),Ne();var t=qY().OrderedSet,n=js()("number-allocator:trace"),i=js()("number-allocator:error");function a(o,l){this.low=o,this.high=l}a.prototype.equals=function(o){return this.low===o.low&&this.high===o.high},a.prototype.compare=function(o){return this.low<o.low&&this.high<o.low?-1:o.low<this.low&&o.high<this.low?1:0};function s(o,l){if(!(this instanceof s))return new s(o,l);this.min=o,this.max=l,this.ss=new t([],(c,f)=>c.compare(f)),n("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let o=this.ss.begin(),l=o.pointer.low,c=o.pointer.high,f=l;return f+1<=c?this.ss.updateKeyByIterator(o,new a(l+1,c)):this.ss.eraseElementByPos(0),n("alloc():"+f),f},s.prototype.use=function(o){let l=new a(o,o),c=this.ss.lowerBound(l);if(!c.equals(this.ss.end())){let f=c.pointer.low,h=c.pointer.high;return c.pointer.equals(l)?(this.ss.eraseElementByIterator(c),n("use():"+o),!0):f>o?!1:f===o?(this.ss.updateKeyByIterator(c,new a(f+1,h)),n("use():"+o),!0):h===o?(this.ss.updateKeyByIterator(c,new a(f,h-1)),n("use():"+o),!0):(this.ss.updateKeyByIterator(c,new a(o+1,h)),this.ss.insert(new a(f,o-1)),n("use():"+o),!0)}return n("use():failed"),!1},s.prototype.free=function(o){if(o<this.min||o>this.max){i("free():"+o+" is out of range");return}let l=new a(o,o),c=this.ss.upperBound(l);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(l);return}c.pre();let f=c.pointer.high;c.pointer.high+1===o?this.ss.updateKeyByIterator(c,new a(f,o)):this.ss.insert(l)}else if(c.equals(this.ss.begin()))if(o+1===c.pointer.low){let f=c.pointer.high;this.ss.updateKeyByIterator(c,new a(o,f))}else this.ss.insert(l);else{let f=c.pointer.low,h=c.pointer.high;c.pre();let p=c.pointer.low;c.pointer.high+1===o?o+1===f?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new a(p,h))):this.ss.updateKeyByIterator(c,new a(p,o)):o+1===f?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new a(o,h))):this.ss.insert(l)}n("free():"+o)},s.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let o of this.ss)console.log(o)},e.exports=s}),yB=He((r,e)=>{Me(),je(),Ne();var t=WY();e.exports.NumberAllocator=t}),VY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=MY(),t=yB(),n=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(i){i>0&&(this.aliasToTopic=new e.LRUCache({max:i}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,i),this.max=i,this.length=0)}put(i,a){if(a===0||a>this.max)return!1;let s=this.aliasToTopic.get(a);return s&&delete this.topicToAlias[s],this.aliasToTopic.set(a,i),this.topicToAlias[i]=a,this.numberAllocator.use(a),this.length=this.aliasToTopic.size,!0}getTopicByAlias(i){return this.aliasToTopic.get(i)}getAliasByTopic(i){let a=this.topicToAlias[i];return typeof a<"u"&&this.aliasToTopic.get(a),a}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),QY=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0});var t=H0(),n=e(VY()),i=Gc(),a=(s,o)=>{s.log("_handleConnack");let{options:l}=s,c=l.protocolVersion===5?o.reasonCode:o.returnCode;if(clearTimeout(s.connackTimer),delete s.topicAliasSend,o.properties){if(o.properties.topicAliasMaximum){if(o.properties.topicAliasMaximum>65535){s.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}o.properties.topicAliasMaximum>0&&(s.topicAliasSend=new n.default(o.properties.topicAliasMaximum))}o.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=o.properties.serverKeepAlive),o.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=o.properties.maximumPacketSize)}if(c===0)s.reconnecting=!1,s._onConnect(o);else if(c>0){let f=new i.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);s.emit("error",f),s.options.reconnectOnConnackError&&s._cleanUp(!0)}};r.default=a}),XY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,i)=>{t.log("handling pubrel packet");let a=typeof i<"u"?i:t.noop,{messageId:s}=n,o={cmd:"pubcomp",messageId:s};t.incomingStore.get(n,(l,c)=>{l?t._sendPacket(o,a):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,f=>{if(f)return a(f);t.incomingStore.del(c,t.noop),t._sendPacket(o,a)}))})};r.default=e}),ZY=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(PY()),n=e(kY()),i=e(QY()),a=e(H0()),s=e(XY()),o=(l,c,f)=>{let{options:h}=l;if(h.protocolVersion===5&&h.properties&&h.properties.maximumPacketSize&&h.properties.maximumPacketSize<c.length)return l.emit("error",new Error(`exceeding packets size ${c.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(l,c,f);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,a.default)(l,c),f();break;case"pubrel":l.reschedulePing(),(0,s.default)(l,c,f);break;case"connack":(0,i.default)(l,c),f();break;case"auth":l.reschedulePing(),(0,n.default)(l,c),f();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),f();break;case"disconnect":l.emit("disconnect",c),f();break;default:l.log("_handlePacket :: unknown command"),f();break}};r.default=o}),vB=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),JY=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),eq=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((nu(),qt(Jo))),n=Gc(),i=class{};r.TypedEventEmitter=i,(0,n.applyMixin)(i,t.default)}),G0=He((r,e)=>{Me(),je(),Ne();function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),tq=He((r,e)=>{Me(),je(),Ne();var t=G0().default;function n(i,a){if(t(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var o=s.call(i,a||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),rq=He((r,e)=>{Me(),je(),Ne();var t=G0().default,n=tq();function i(a){var s=n(a,"string");return t(s)=="symbol"?s:s+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),nq=He((r,e)=>{Me(),je(),Ne();var t=rq();function n(i,a,s){return(a=t(a))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),iq=He((r,e)=>{Me(),je(),Ne();function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),aq=He((r,e)=>{Me(),je(),Ne();function t(n,i){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var s,o,l,c,f=[],h=!0,p=!1;try{if(l=(a=a.call(n)).next,i===0){if(Object(a)!==a)return;h=!1}else for(;!(h=(s=l.call(a)).done)&&(f.push(s.value),f.length!==i);h=!0);}catch(g){p=!0,o=g}finally{try{if(!h&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(p)throw o}}return f}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),sq=He((r,e)=>{Me(),je(),Ne();function t(n,i){(i==null||i>n.length)&&(i=n.length);for(var a=0,s=Array(i);a<i;a++)s[a]=n[a];return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),oq=He((r,e)=>{Me(),je(),Ne();var t=sq();function n(i,a){if(i){if(typeof i=="string")return t(i,a);var s={}.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(i,a):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),lq=He((r,e)=>{Me(),je(),Ne();function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),uq=He((r,e)=>{Me(),je(),Ne();var t=iq(),n=aq(),i=oq(),a=lq();function s(o,l){return t(o)||n(o,l)||i(o,l)||a()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),bB=He((r,e)=>{Me(),je(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))})(r,function(t){var n=function(g){return function(y){var b=g(y);return y.add(b),b}},i=function(g){return function(y,b){return g.set(y,b),b}},a=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,o=s*2,l=function(g,y){return function(b){var v=y.get(b),E=v===void 0?b.size:v<o?v+1:0;if(!b.has(E))return g(b,E);if(b.size<s){for(;b.has(E);)E=Math.floor(Math.random()*o);return g(b,E)}if(b.size>a)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;b.has(E);)E=Math.floor(Math.random()*a);return g(b,E)}},c=new WeakMap,f=i(c),h=l(f,c),p=n(h);t.addUniqueNumber=p,t.generateUniqueNumber=h})}),cq=He((r,e)=>{Me(),je(),Ne();function t(i,a,s,o,l,c,f){try{var h=i[c](f),p=h.value}catch(g){return void s(g)}h.done?a(p):Promise.resolve(p).then(o,l)}function n(i){return function(){var a=this,s=arguments;return new Promise(function(o,l){var c=i.apply(a,s);function f(p){t(c,o,l,f,h,"next",p)}function h(p){t(c,o,l,f,h,"throw",p)}f(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),xB=He((r,e)=>{Me(),je(),Ne();function t(n,i){this.v=n,this.k=i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),SB=He((r,e)=>{Me(),je(),Ne();function t(n,i,a,s){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}e.exports=t=function(l,c,f,h){function p(g,y){t(l,g,function(b){return this._invoke(g,y,b)})}c?o?o(l,c,{value:f,enumerable:!h,configurable:!h,writable:!h}):l[c]=f:(p("next",0),p("throw",1),p("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,a,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),EB=He((r,e)=>{Me(),je(),Ne();var t=SB();function n(){var i,a,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",l=s.toStringTag||"@@toStringTag";function c(E,S,w,A){var _=S&&S.prototype instanceof h?S:h,I=Object.create(_.prototype);return t(I,"_invoke",(function(D,P,k){var M,H,N,Q=0,z=k||[],V=!1,K={p:0,n:0,v:i,a:Y,f:Y.bind(i,4),d:function(W,J){return M=W,H=0,N=i,K.n=J,f}};function Y(W,J){for(H=W,N=J,a=0;!V&&Q&&!G&&a<z.length;a++){var G,j=z[a],F=K.p,Z=j[2];W>3?(G=Z===J)&&(N=j[(H=j[4])?5:(H=3,3)],j[4]=j[5]=i):j[0]<=F&&((G=W<2&&F<j[1])?(H=0,K.v=J,K.n=j[1]):F<Z&&(G=W<3||j[0]>J||J>Z)&&(j[4]=W,j[5]=J,K.n=Z,H=0))}if(G||W>1)return f;throw V=!0,J}return function(W,J,G){if(Q>1)throw TypeError("Generator is already running");for(V&&J===1&&Y(J,G),H=J,N=G;(a=H<2?i:N)||!V;){M||(H?H<3?(H>1&&(K.n=-1),Y(H,N)):K.n=N:K.v=N);try{if(Q=2,M){if(H||(W="next"),a=M[W]){if(!(a=a.call(M,N)))throw TypeError("iterator result is not an object");if(!a.done)return a;N=a.value,H<2&&(H=0)}else H===1&&(a=M.return)&&a.call(M),H<2&&(N=TypeError("The iterator does not provide a '"+W+"' method"),H=1);M=i}else if((a=(V=K.n<0)?N:D.call(P,K))!==f)break}catch(j){M=i,H=1,N=j}finally{Q=1}}return{value:a,done:V}}})(E,w,A),!0),I}var f={};function h(){}function p(){}function g(){}a=Object.getPrototypeOf;var y=[][o]?a(a([][o]())):(t(a={},o,function(){return this}),a),b=g.prototype=h.prototype=Object.create(y);function v(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,g):(E.__proto__=g,t(E,l,"GeneratorFunction")),E.prototype=Object.create(b),E}return p.prototype=g,t(b,"constructor",g),t(g,"constructor",p),p.displayName="GeneratorFunction",t(g,l,"GeneratorFunction"),t(b),t(b,l,"Generator"),t(b,o,function(){return this}),t(b,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:c,m:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),wB=He((r,e)=>{Me(),je(),Ne();var t=xB(),n=SB();function i(a,s){function o(c,f,h,p){try{var g=a[c](f),y=g.value;return y instanceof t?s.resolve(y.v).then(function(b){o("next",b,h,p)},function(b){o("throw",b,h,p)}):s.resolve(y).then(function(b){g.value=b,h(g)},function(b){return o("throw",b,h,p)})}catch(b){p(b)}}var l;this.next||(n(i.prototype),n(i.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(c,f,h){function p(){return new s(function(g,y){o(c,h,g,y)})}return l=l?l.then(p,p):p()},!0)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),_B=He((r,e)=>{Me(),je(),Ne();var t=EB(),n=wB();function i(a,s,o,l,c){return new n(t().w(a,s,o,l),c||Promise)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),fq=He((r,e)=>{Me(),je(),Ne();var t=_B();function n(i,a,s,o,l){var c=t(i,a,s,o,l);return c.next().then(function(f){return f.done?f.value:c.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),dq=He((r,e)=>{Me(),je(),Ne();function t(n){var i=Object(n),a=[];for(var s in i)a.unshift(s);return function o(){for(;a.length;)if((s=a.pop())in i)return o.value=s,o.done=!1,o;return o.done=!0,o}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),hq=He((r,e)=>{Me(),je(),Ne();var t=G0().default;function n(i){if(i!=null){var a=i[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(a)return a.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length))return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}}}throw new TypeError(t(i)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),pq=He((r,e)=>{Me(),je(),Ne();var t=xB(),n=EB(),i=fq(),a=_B(),s=wB(),o=dq(),l=hq();function c(){var f=n(),h=f.m(c),p=(Object.getPrototypeOf?Object.getPrototypeOf(h):h.__proto__).constructor;function g(v){var E=typeof v=="function"&&v.constructor;return!!E&&(E===p||(E.displayName||E.name)==="GeneratorFunction")}var y={throw:1,return:2,break:3,continue:3};function b(v){var E,S;return function(w){E||(E={stop:function(){return S(w.a,2)},catch:function(){return w.v},abrupt:function(A,_){return S(w.a,y[A],_)},delegateYield:function(A,_,I){return E.resultName=_,S(w.d,l(A),I)},finish:function(A){return S(w.f,A)}},S=function(A,_,I){w.p=E.prev,w.n=E.next;try{return A(_,I)}finally{E.next=w.n}}),E.resultName&&(E[E.resultName]=w.v,E.resultName=void 0),E.sent=w.v,E.next=w.n;try{return v.call(this,E)}finally{w.p=E.prev,w.n=E.next}}}return(e.exports=c=function(){return{wrap:function(v,E,S,w){return f.w(b(v),E,S,w&&w.reverse())},isGeneratorFunction:g,mark:f.m,awrap:function(v,E){return new t(v,E)},AsyncIterator:s,async:function(v,E,S,w,A){return(g(E)?a:i)(b(v),E,S,w,A)},keys:o,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}),mq=He((r,e)=>{Me(),je(),Ne();var t=pq()();e.exports=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),gq=He((r,e)=>{Me(),je(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,nq(),uq(),bB(),cq(),mq()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.brokerFactory={},t._defineProperty,t._slicedToArray,t.fastUniqueNumbers,t._asyncToGenerator,t._regeneratorRuntime))})(r,function(t,n,i,a,s,o){var l=function(S){return typeof S.start=="function"},c=new WeakMap;function f(S,w){var A=Object.keys(S);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(S);w&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(S,I).enumerable})),A.push.apply(A,_)}return A}function h(S){for(var w=1;w<arguments.length;w++){var A=arguments[w]!=null?arguments[w]:{};w%2?f(Object(A),!0).forEach(function(_){n(S,_,A[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(_){Object.defineProperty(S,_,Object.getOwnPropertyDescriptor(A,_))})}return S}var p=function(S){return h(h({},S),{},{connect:function(w){var A=w.call;return s(o.mark(function _(){var I,D,P,k;return o.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return I=new MessageChannel,D=I.port1,P=I.port2,M.next=1,A("connect",{port:D},[D]);case 1:return k=M.sent,c.set(P,k),M.abrupt("return",P);case 2:case"end":return M.stop()}},_)}))},disconnect:function(w){var A=w.call;return(function(){var _=s(o.mark(function I(D){var P;return o.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(P=c.get(D),P!==void 0){k.next=1;break}throw new Error("The given port is not connected.");case 1:return k.next=2,A("disconnect",{portId:P});case 2:case"end":return k.stop()}},I)}));return function(I){return _.apply(this,arguments)}})()},isSupported:function(w){var A=w.call;return function(){return A("isSupported")}}})};function g(S,w){var A=Object.keys(S);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(S);w&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(S,I).enumerable})),A.push.apply(A,_)}return A}function y(S){for(var w=1;w<arguments.length;w++){var A=arguments[w]!=null?arguments[w]:{};w%2?g(Object(A),!0).forEach(function(_){n(S,_,A[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function(_){Object.defineProperty(S,_,Object.getOwnPropertyDescriptor(A,_))})}return S}var b=new WeakMap,v=function(S){if(b.has(S))return b.get(S);var w=new Map;return b.set(S,w),w},E=function(S){var w=p(S);return function(A){var _=v(A);A.addEventListener("message",function(z){var V=z.data,K=V.id;if(K!==null&&_.has(K)){var Y=_.get(K),W=Y.reject,J=Y.resolve;_.delete(K),V.error===void 0?J(V.result):W(new Error(V.error.message))}}),l(A)&&A.start();for(var I=function(z){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(Y,W){var J=a.generateUniqueNumber(_);_.set(J,{reject:W,resolve:Y}),V===null?A.postMessage({id:J,method:z},K):A.postMessage({id:J,method:z,params:V},K)})},D=function(z,V){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];A.postMessage({id:null,method:z,params:V},K)},P={},k=0,M=Object.entries(w);k<M.length;k++){var H=i(M[k],2),N=H[0],Q=H[1];P=y(y({},P),{},n({},N,Q({call:I,notify:D})))}return y({},P)}};t.createBroker=E})}),yq=He((r,e)=>{Me(),je(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,G0(),gq(),bB()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t._typeof,t.brokerFactory,t.fastUniqueNumbers))})(r,function(t,n,i,a){var s=new Map([[0,null]]),o=new Map([[0,null]]),l=i.createBroker({clearInterval:function(f){var h=f.call;return function(p){n(s.get(p))==="symbol"&&(s.set(p,null),h("clear",{timerId:p,timerType:"interval"}).then(function(){s.delete(p)}))}},clearTimeout:function(f){var h=f.call;return function(p){n(o.get(p))==="symbol"&&(o.set(p,null),h("clear",{timerId:p,timerType:"timeout"}).then(function(){o.delete(p)}))}},setInterval:function(f){var h=f.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,b=new Array(y>2?y-2:0),v=2;v<y;v++)b[v-2]=arguments[v];var E=Symbol(),S=a.generateUniqueNumber(s);s.set(S,E);var w=function(){return h("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"interval"}).then(function(){var A=s.get(S);if(A===void 0)throw new Error("The timer is in an undefined state.");A===E&&(p.apply(void 0,b),s.get(S)===E&&w())})};return w(),S}},setTimeout:function(f){var h=f.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,b=new Array(y>2?y-2:0),v=2;v<y;v++)b[v-2]=arguments[v];var E=Symbol(),S=a.generateUniqueNumber(o);return o.set(S,E),h("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"timeout"}).then(function(){var w=o.get(S);if(w===void 0)throw new Error("The timer is in an undefined state.");w===E&&(o.delete(S),p.apply(void 0,b))}),S}}}),c=function(f){var h=new Worker(f);return l(h)};t.load=c,t.wrap=l})}),vq=He((r,e)=>{Me(),je(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,yq()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))})(r,function(t,n){var i=function(h,p){var g=null;return function(){if(g!==null)return g;var y=new Blob([p],{type:"application/javascript; charset=utf-8"}),b=URL.createObjectURL(y);return g=h(b),setTimeout(function(){return URL.revokeObjectURL(b)}),g}},a=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,s=i(n.load,a),o=function(h){return s().clearInterval(h)},l=function(h){return s().clearTimeout(h)},c=function(){var h;return(h=s()).setInterval.apply(h,arguments)},f=function(){var h;return(h=s()).setTimeout.apply(h,arguments)};t.clearInterval=o,t.clearTimeout=l,t.setInterval=c,t.setTimeout=f})}),K0=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&Jt?.versions?!Object.prototype.hasOwnProperty.call(Jt.versions,"electron"):typeof window.document<"u":!1,t=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=i}),bq=He(r=>{Me(),je(),Ne();var e=r&&r.__createBinding||(Object.create?function(c,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,p,g)}:function(c,f,h,p){p===void 0&&(p=h),c[p]=f[h]}),t=r&&r.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),n=r&&r.__importStar||(function(){var c=function(f){return c=Object.getOwnPropertyNames||function(h){var p=[];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[p.length]=g);return p},c(f)};return function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p=c(f),g=0;g<p.length;g++)p[g]!=="default"&&e(h,f,p[g]);return t(h,f),h}})();Object.defineProperty(r,"__esModule",{value:!0});var i=vq(),a=n(K0()),s={set:i.setInterval,clear:i.clearInterval},o={set:(c,f)=>setInterval(c,f),clear:c=>clearInterval(c)},l=c=>{switch(c){case"native":return o;case"worker":return s;case"auto":default:return a.default&&!a.isWebWorker&&!a.isReactNativeBrowser?s:o}};r.default=l}),TB=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(bq()),n=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(i,a){this.client=i,this.timer=typeof a=="object"&&"set"in a&&"clear"in a?a:(0,t.default)(a),this.setKeepalive(i.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(i){if(i*=1e3,isNaN(i)||i<=0||i>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${i}`);this._keepalive=i,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${i}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let i=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+i,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),Rw=He(r=>{Me(),je(),Ne();var e=r&&r.__createBinding||(Object.create?function(_,I,D,P){P===void 0&&(P=D);var k=Object.getOwnPropertyDescriptor(I,D);(!k||("get"in k?!I.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return I[D]}}),Object.defineProperty(_,P,k)}:function(_,I,D,P){P===void 0&&(P=D),_[P]=I[D]}),t=r&&r.__setModuleDefault||(Object.create?function(_,I){Object.defineProperty(_,"default",{enumerable:!0,value:I})}:function(_,I){_.default=I}),n=r&&r.__importStar||(function(){var _=function(I){return _=Object.getOwnPropertyNames||function(D){var P=[];for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&(P[P.length]=k);return P},_(I)};return function(I){if(I&&I.__esModule)return I;var D={};if(I!=null)for(var P=_(I),k=0;k<P.length;k++)P[k]!=="default"&&e(D,I,P[k]);return t(D,I),D}})(),i=r&&r.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(r,"__esModule",{value:!0});var a=i(OY()),s=au(),o=i(CY()),l=i(js()),c=n(RY()),f=i(tB()),h=i(ZY()),p=i(vB()),g=i(JY()),y=Gc(),b=eq(),v=i(TB()),E=n(K0()),S=globalThis.setImmediate||((..._)=>{let I=_.shift();(0,y.nextTick)(()=>{I(..._)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},A=class Pw extends b.TypedEventEmitter{static VERSION=y.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(I,D){super(),this.options=D||{};for(let P in w)typeof this.options[P]>"u"?this.options[P]=w[P]:this.options[P]=D[P];this.log=this.options.log||(0,l.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Pw.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",D.protocol),this.log("MqttClient :: options.protocolVersion",D.protocolVersion),this.log("MqttClient :: options.username",D.username),this.log("MqttClient :: options.keepalive",D.keepalive),this.log("MqttClient :: options.reconnectPeriod",D.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",D.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",D.properties?D.properties.topicAliasMaximum:void 0),this.options.clientId=typeof D.clientId=="string"?D.clientId:Pw.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=D.protocolVersion===5&&D.customHandleAcks?D.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(a.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=D.outgoingStore||new f.default,this.incomingStore=D.incomingStore||new f.default,this.queueQoSZero=D.queueQoSZero===void 0?!0:D.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,D.properties&&D.properties.topicAliasMaximum>0&&(D.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new g.default(D.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,k=()=>{let M=P.shift();this.log("deliver :: entry %o",M);let H=null;if(!M){this._resubscribe();return}H=M.packet,this.log("deliver :: call _sendPacket for %o",H);let N=!0;H.messageId&&H.messageId!==0&&(this.messageIdProvider.register(H.messageId)||(N=!1)),N?this._sendPacket(H,Q=>{M.cb&&M.cb(Q),k()}):(this.log("messageId: %d has already used. The message is skipped and removed.",H.messageId),k())};this.log("connect :: sending queued packets"),k()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(I,D){D()}handleMessage(I,D){D()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let I=new s.Writable,D=a.default.parser(this.options),P=null,k=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),D.on("packet",z=>{this.log("parser :: on packet push to packets array."),k.push(z)});let M=()=>{this.log("work :: getting next packet in queue");let z=k.shift();if(z)this.log("work :: packet pulled from queue"),(0,h.default)(this,z,H);else{this.log("work :: no packets in queue");let V=P;P=null,this.log("work :: done flag is %s",!!V),V&&V()}},H=()=>{if(k.length)(0,y.nextTick)(M);else{let z=P;P=null,z()}};I._write=(z,V,K)=>{P=K,this.log("writable stream :: parsing buffer"),D.parse(z),M()};let N=z=>{this.log("streamErrorHandler :: error",z.message),z.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",z)):this.noop(z)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",N),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Q={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Q.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(Q.properties||(Q.properties={}),this.topicAliasRecv&&(Q.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Q),D.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let z={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(z)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,D,P,k){this.log("publish :: message `%s` to topic `%s`",D,I);let{options:M}=this;typeof P=="function"&&(k=P,P=null),P=P||{},P={qos:0,retain:!1,dup:!1,...P};let{qos:H,retain:N,dup:Q,properties:z,cbStorePut:V}=P;if(this._checkDisconnecting(k))return this;let K=()=>{let Y=0;if((H===1||H===2)&&(Y=this._nextId(),Y===null))return this.log("No messageId left"),!1;let W={cmd:"publish",topic:I,payload:D,qos:H,retain:N,messageId:Y,dup:Q};switch(M.protocolVersion===5&&(W.properties=z),this.log("publish :: qos",H),H){case 1:case 2:this.outgoing[W.messageId]={volatile:!1,cb:k||this.noop},this.log("MqttClient:publish: packet cmd: %s",W.cmd),this._sendPacket(W,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",W.cmd),this._sendPacket(W,k,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,cbStorePut:P.cbStorePut,callback:k}),this}publishAsync(I,D,P){return new Promise((k,M)=>{this.publish(I,D,P,(H,N)=>{H?M(H):k(N)})})}subscribe(I,D,P){let k=this.options.protocolVersion;typeof D=="function"&&(P=D),P=P||this.noop;let M=!1,H=[];typeof I=="string"?(I=[I],H=I):Array.isArray(I)?H=I:typeof I=="object"&&(M=I.resubscribe,delete I.resubscribe,H=Object.keys(I));let N=c.validateTopics(H);if(N!==null)return S(P,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let Q={qos:0};k===5&&(Q.nl=!1,Q.rap=!1,Q.rh=0),D={...Q,...D};let{properties:z}=D,V=[],K=(J,G)=>{if(G=G||D,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,J)||this._resubscribeTopics[J].qos<G.qos||M){let j={topic:J,qos:G.qos};k===5&&(j.nl=G.nl,j.rap=G.rap,j.rh=G.rh,j.properties=z),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",j.topic,j.qos),V.push(j)}};if(Array.isArray(I)?I.forEach(J=>{this.log("subscribe: array topic %s",J),K(J)}):Object.keys(I).forEach(J=>{this.log("subscribe: object topic %s, %o",J,I[J]),K(J,I[J])}),!V.length)return P(null,[]),this;let Y=(J,G)=>{let j={cmd:"subscribe",subscriptions:J,messageId:G};if(z&&(j.properties=z),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Z=[];J.forEach(ae=>{if(this.options.reconnectPeriod>0){let ee={qos:ae.qos};k===5&&(ee.nl=ae.nl||!1,ee.rap=ae.rap||!1,ee.rh=ae.rh||0,ee.properties=ae.properties),this._resubscribeTopics[ae.topic]=ee,Z.push(ae.topic)}}),this.messageIdToTopic[j.messageId]=Z}let F=new Promise((Z,ae)=>{this.outgoing[j.messageId]={volatile:!0,cb(ee,ve){if(!ee){let{granted:le}=ve;for(let ne=0;ne<le.length;ne+=1)J[ne].qos=le[ne]}ee?ae(new y.ErrorWithSubackPacket(ee.message,ve)):Z(ve)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(j),F},W=()=>{let J=this.options.subscribeBatchSize??V.length,G=[];for(let j=0;j<V.length;j+=J){let F=V.slice(j,j+J),Z=this._nextId();if(Z===null)return this.log("No messageId left"),!1;G.push(Y(F,Z))}return Promise.all(G).then(j=>{P(null,V,j.at(-1))}).catch(j=>{P(j,V,j.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!W())&&this._storeProcessingQueue.push({invoke:W,callback:P}),this}subscribeAsync(I,D){return new Promise((P,k)=>{this.subscribe(I,D,(M,H)=>{M?k(M):P(H)})})}unsubscribe(I,D,P){typeof I=="string"&&(I=[I]),typeof D=="function"&&(P=D),P=P||this.noop;let k=c.validateTopics(I);if(k!==null)return S(P,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(P))return this;let M=()=>{let H=this._nextId();if(H===null)return this.log("No messageId left"),!1;let N={cmd:"unsubscribe",messageId:H,unsubscriptions:[]};return typeof I=="string"?N.unsubscriptions=[I]:Array.isArray(I)&&(N.unsubscriptions=I),this.options.resubscribe&&N.unsubscriptions.forEach(Q=>{delete this._resubscribeTopics[Q]}),typeof D=="object"&&D.properties&&(N.properties=D.properties),this.outgoing[N.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(N),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!M())&&this._storeProcessingQueue.push({invoke:M,callback:P}),this}unsubscribeAsync(I,D){return new Promise((P,k)=>{this.unsubscribe(I,D,(M,H)=>{M?k(M):P(H)})})}end(I,D,P){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(P=P||D,D=I,I=!1),typeof D!="object"&&(P=P||D,D=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let k=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(H=>{this.outgoingStore.close(N=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let Q=H||N;this.log("end :: closeStores: invoking callback with args"),P(Q)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},M=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(k)},D)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,M,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),M()),this)}endAsync(I,D){return new Promise((P,k)=>{this.end(I,D,M=>{M?k(M):P()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:D}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{D(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let D=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let D;I.properties&&(D=I.properties.topicAlias);let P=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",D,P),P.length===0){if(typeof D>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(D),typeof P>"u")return new Error("Unregistered Topic Alias");I.topic=P}D&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,D,P={}){if(D&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",D)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let k={cmd:"disconnect",...P};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(k,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),S(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),D&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",D),D())}_storeAndSend(I,D,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let k=I,M;if(k.cmd==="publish"&&(k=(0,o.default)(I),M=this._removeTopicAliasAndRecoverTopicName(k),M))return D&&D(M);this.outgoingStore.put(k,H=>{if(H)return D&&D(H);P(),this._writePacket(I,D)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let D;I.properties&&(D=I.properties.topicAlias);let P=I.topic.toString();if(this.topicAliasSend)if(D){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,D),!this.topicAliasSend.put(P,D)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,D),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(D=this.topicAliasSend.getAliasByTopic(P),D?(I.topic="",I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,D)):(D=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,D),I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,D))):this.options.autoUseTopicAlias&&(D=this.topicAliasSend.getAliasByTopic(P),D&&(I.topic="",I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,D))));else if(D)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,D),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,D){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let P=a.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&D&&D!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",D)):D&&(this.log("_writePacket :: invoking cb"),D())}_sendPacket(I,D,P,k){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,D=D||this.noop;let M=this._applyTopicAlias(I);if(M){D(M);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,D);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,D,P);return}if(k){this._writePacket(I,D);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,D,P);return;default:this._writePacket(I,D);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,D,P);break;case 0:default:this._writePacket(I,D);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,D,P){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!D),P=P||this.noop;let k=I;if(k.cmd==="publish"){k=(0,o.default)(I);let H=this._removeTopicAliasAndRecoverTopicName(k);if(H)return D&&D(H)}let M=k.qos||0;M===0&&this.queueQoSZero||k.cmd!=="publish"?this.queue.push({packet:k,cb:D}):M>0?(D=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoingStore.put(k,H=>{if(H)return D&&D(H);P()})):D&&D(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new v.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let D=0;D<I.length;D++){let P={};P[I[D]]=this._resubscribeTopics[I[D]],P.resubscribe=!0,this.subscribe(P,{properties:P[I[D]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let D=()=>{let P=this.outgoingStore.createStream(),k=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),M()},M=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",k),P.on("error",N=>{M(),this._flushStoreProcessingQueue(),this.removeListener("close",k),this.emit("error",N)});let H=()=>{if(!P)return;let N=P.read(1),Q;if(!N){P.once("readable",H);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[N.messageId]){H();return}!this.disconnecting&&!this.reconnectTimer?(Q=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoing[N.messageId]={volatile:!1,cb(z,V){Q&&Q(z,V),H()}},this._packetIdsDuringStoreProcessing[N.messageId]=!0,this.messageIdProvider.register(N.messageId)?this._sendPacket(N,void 0,void 0,!0):this.log("messageId: %d has already used.",N.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let N=!0;for(let Q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[Q]){N=!1;break}this.removeListener("close",k),N?(M(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):D()}),H()};D()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,D){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(P,k)=>{D(P,k),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}};r.default=A}),xq=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=yB(),t=class{numberAllocator;lastId;constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function Sq(){if(Lw)return Rm;Lw=!0;let r=2147483647,e=36,t=1,n=26,i=38,a=700,s=72,o=128,l="-",c=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=e-t,y=Math.floor,b=String.fromCharCode;function v(M){throw new RangeError(p[M])}function E(M,H){let N=[],Q=M.length;for(;Q--;)N[Q]=H(M[Q]);return N}function S(M,H){let N=M.split("@"),Q="";N.length>1&&(Q=N[0]+"@",M=N[1]),M=M.replace(h,".");let z=M.split("."),V=E(z,H).join(".");return Q+V}function w(M){let H=[],N=0,Q=M.length;for(;N<Q;){let z=M.charCodeAt(N++);if(z>=55296&&z<=56319&&N<Q){let V=M.charCodeAt(N++);(V&64512)==56320?H.push(((z&1023)<<10)+(V&1023)+65536):(H.push(z),N--)}else H.push(z)}return H}let A=M=>String.fromCodePoint(...M),_=function(M){return M>=48&&M<58?26+(M-48):M>=65&&M<91?M-65:M>=97&&M<123?M-97:e},I=function(M,H){return M+22+75*(M<26)-((H!=0)<<5)},D=function(M,H,N){let Q=0;for(M=N?y(M/a):M>>1,M+=y(M/H);M>g*n>>1;Q+=e)M=y(M/g);return y(Q+(g+1)*M/(M+i))},P=function(M){let H=[],N=M.length,Q=0,z=o,V=s,K=M.lastIndexOf(l);K<0&&(K=0);for(let Y=0;Y<K;++Y)M.charCodeAt(Y)>=128&&v("not-basic"),H.push(M.charCodeAt(Y));for(let Y=K>0?K+1:0;Y<N;){let W=Q;for(let G=1,j=e;;j+=e){Y>=N&&v("invalid-input");let F=_(M.charCodeAt(Y++));F>=e&&v("invalid-input"),F>y((r-Q)/G)&&v("overflow"),Q+=F*G;let Z=j<=V?t:j>=V+n?n:j-V;if(F<Z)break;let ae=e-Z;G>y(r/ae)&&v("overflow"),G*=ae}let J=H.length+1;V=D(Q-W,J,W==0),y(Q/J)>r-z&&v("overflow"),z+=y(Q/J),Q%=J,H.splice(Q++,0,z)}return String.fromCodePoint(...H)},k=function(M){let H=[];M=w(M);let N=M.length,Q=o,z=0,V=s;for(let W of M)W<128&&H.push(b(W));let K=H.length,Y=K;for(K&&H.push(l);Y<N;){let W=r;for(let G of M)G>=Q&&G<W&&(W=G);let J=Y+1;W-Q>y((r-z)/J)&&v("overflow"),z+=(W-Q)*J,Q=W;for(let G of M)if(G<Q&&++z>r&&v("overflow"),G===Q){let j=z;for(let F=e;;F+=e){let Z=F<=V?t:F>=V+n?n:F-V;if(j<Z)break;let ae=j-Z,ee=e-Z;H.push(b(I(Z+ae%ee,0))),j=y(ae/ee)}H.push(b(I(j,0))),V=D(z,J,Y===K),z=0,++Y}++z,++Q}return H.join("")};return Rm={version:"2.3.1",ucs2:{decode:w,encode:A},decode:P,encode:k,toASCII:function(M){return S(M,function(H){return f.test(H)?"xn--"+k(H):H})},toUnicode:function(M){return S(M,function(H){return c.test(H)?P(H.slice(4).toLowerCase()):H})}},Rm}var Rm,Lw,Lo,Eq=ti(()=>{Me(),je(),Ne(),Rm={},Lw=!1,Lo=Sq(),Lo.decode,Lo.encode,Lo.toASCII,Lo.toUnicode,Lo.ucs2,Lo.version});function wq(){return Mw||(Mw=!0,kw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;var n=42;r[e]=n;for(e in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(r,e);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),kw}function _q(){return jw||(jw=!0,Nw=Error),Nw}function Tq(){return Bw||(Bw=!0,Fw=EvalError),Fw}function Aq(){return $w||($w=!0,Uw=RangeError),Uw}function Dq(){return Gw||(Gw=!0,Hw=ReferenceError),Hw}function AB(){return zw||(zw=!0,Kw=SyntaxError),Kw}function eh(){return qw||(qw=!0,Yw=TypeError),Yw}function Oq(){return Vw||(Vw=!0,Ww=URIError),Ww}function Iq(){if(Qw)return Pm;Qw=!0;var r=typeof Symbol<"u"&&Symbol,e=wq();return Pm=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Pm}function Cq(){if(Xw)return Lm;Xw=!0;var r={__proto__:null,foo:{}},e=Object;return Lm=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},Lm}function Rq(){if(Zw)return km;Zw=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(o,l){for(var c=[],f=0;f<o.length;f+=1)c[f]=o[f];for(var h=0;h<l.length;h+=1)c[h+o.length]=l[h];return c},a=function(o,l){for(var c=[],f=l,h=0;f<o.length;f+=1,h+=1)c[h]=o[f];return c},s=function(o,l){for(var c="",f=0;f<o.length;f+=1)c+=o[f],f+1<o.length&&(c+=l);return c};return km=function(o){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var c=a(arguments,1),f,h=function(){if(this instanceof f){var v=l.apply(this,i(c,arguments));return Object(v)===v?v:this}return l.apply(o,i(c,arguments))},p=t(0,l.length-c.length),g=[],y=0;y<p;y++)g[y]="$"+y;if(f=Function("binder","return function ("+s(g,",")+"){ return binder.apply(this,arguments); }")(h),l.prototype){var b=function(){};b.prototype=l.prototype,f.prototype=new b,b.prototype=null}return f},km}function a1(){if(Jw)return Mm;Jw=!0;var r=Rq();return Mm=Function.prototype.bind||r,Mm}function Pq(){if(e_)return Nm;e_=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=a1();return Nm=t.call(r,e),Nm}function Kc(){if(t_)return jm;t_=!0;var r,e=_q(),t=Tq(),n=Aq(),i=Dq(),a=AB(),s=eh(),o=Oq(),l=Function,c=function(Y){try{return l('"use strict"; return ('+Y+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new s},p=f?(function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}})():h,g=Iq()(),y=Cq()(),b=Object.getPrototypeOf||(y?function(Y){return Y.__proto__}:null),v={},E=typeof Uint8Array>"u"||!b?r:b(Uint8Array),S={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!b?r:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!b?r:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":p,"%TypedArray%":E,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":o,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(b)try{null.error}catch(Y){var w=b(b(Y));S["%Error.prototype%"]=w}var A=function Y(W){var J;if(W==="%AsyncFunction%")J=c("async function () {}");else if(W==="%GeneratorFunction%")J=c("function* () {}");else if(W==="%AsyncGeneratorFunction%")J=c("async function* () {}");else if(W==="%AsyncGenerator%"){var G=Y("%AsyncGeneratorFunction%");G&&(J=G.prototype)}else if(W==="%AsyncIteratorPrototype%"){var j=Y("%AsyncGenerator%");j&&b&&(J=b(j.prototype))}return S[W]=J,J},_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=a1(),D=Pq(),P=I.call(Function.call,Array.prototype.concat),k=I.call(Function.apply,Array.prototype.splice),M=I.call(Function.call,String.prototype.replace),H=I.call(Function.call,String.prototype.slice),N=I.call(Function.call,RegExp.prototype.exec),Q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z=/\\(\\)?/g,V=function(Y){var W=H(Y,0,1),J=H(Y,-1);if(W==="%"&&J!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&W!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var G=[];return M(Y,Q,function(j,F,Z,ae){G[G.length]=Z?M(ae,z,"$1"):F||j}),G},K=function(Y,W){var J=Y,G;if(D(_,J)&&(G=_[J],J="%"+G[0]+"%"),D(S,J)){var j=S[J];if(j===v&&(j=A(J)),typeof j>"u"&&!W)throw new s("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:G,name:J,value:j}}throw new a("intrinsic "+Y+" does not exist!")};return jm=function(Y,W){if(typeof Y!="string"||Y.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof W!="boolean")throw new s('"allowMissing" argument must be a boolean');if(N(/^%?[^%]*%?$/,Y)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var J=V(Y),G=J.length>0?J[0]:"",j=K("%"+G+"%",W),F=j.name,Z=j.value,ae=!1,ee=j.alias;ee&&(G=ee[0],k(J,P([0,1],ee)));for(var ve=1,le=!0;ve<J.length;ve+=1){var ne=J[ve],re=H(ne,0,1),ue=H(ne,-1);if((re==='"'||re==="'"||re==="`"||ue==='"'||ue==="'"||ue==="`")&&re!==ue)throw new a("property names with quotes must have matching quotes");if((ne==="constructor"||!le)&&(ae=!0),G+="."+ne,F="%"+G+"%",D(S,F))Z=S[F];else if(Z!=null){if(!(ne in Z)){if(!W)throw new s("base intrinsic for "+Y+" exists, but the property is not available.");return}if(f&&ve+1>=J.length){var fe=f(Z,ne);le=!!fe,le&&"get"in fe&&!("originalValue"in fe.get)?Z=fe.get:Z=Z[ne]}else le=D(Z,ne),Z=Z[ne];le&&!ae&&(S[F]=Z)}}return Z},jm}function s1(){if(r_)return Fm;r_=!0;var r=Kc(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Fm=e,Fm}function DB(){if(n_)return Bm;n_=!0;var r=Kc(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return Bm=e,Bm}function Lq(){if(i_)return Um;i_=!0;var r=s1(),e=AB(),t=eh(),n=DB();return Um=function(i,a,s){if(!i||typeof i!="object"&&typeof i!="function")throw new t("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,h=!!n&&n(i,a);if(r)r(i,a,{configurable:c===null&&h?h.configurable:!c,enumerable:o===null&&h?h.enumerable:!o,value:s,writable:l===null&&h?h.writable:!l});else if(f||!o&&!l&&!c)i[a]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Um}function kq(){if(a_)return $m;a_=!0;var r=s1(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},$m=e,$m}function Mq(){if(s_)return Hm;s_=!0;var r=Kc(),e=Lq(),t=kq()(),n=DB(),i=eh(),a=r("%Math.floor%");return Hm=function(s,o){if(typeof s!="function")throw new i("`fn` is not a function");if(typeof o!="number"||o<0||o>4294967295||a(o)!==o)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],c=!0,f=!0;if("length"in s&&n){var h=n(s,"length");h&&!h.configurable&&(c=!1),h&&!h.writable&&(f=!1)}return(c||f||!l)&&(t?e(s,"length",o,!0,!0):e(s,"length",o)),s},Hm}function Nq(){if(o_)return ac;o_=!0;var r=a1(),e=Kc(),t=Mq(),n=eh(),i=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||r.call(a,i),o=s1(),l=e("%Math.max%");ac=function(f){if(typeof f!="function")throw new n("a function is required");var h=s(r,a,arguments);return t(h,1+l(0,f.length-(arguments.length-1)),!0)};var c=function(){return s(r,i,arguments)};return o?o(ac,"apply",{value:c}):ac.apply=c,ac}function jq(){if(l_)return Gm;l_=!0;var r=Kc(),e=Nq(),t=e(r("String.prototype.indexOf"));return Gm=function(n,i){var a=r(n,!!i);return typeof a=="function"&&t(n,".prototype.")>-1?e(a):a},Gm}var kw,Mw,Nw,jw,Fw,Bw,Uw,$w,Hw,Gw,Kw,zw,Yw,qw,Ww,Vw,Pm,Qw,Lm,Xw,km,Zw,Mm,Jw,Nm,e_,jm,t_,Fm,r_,Bm,n_,Um,i_,$m,a_,Hm,s_,ac,o_,Gm,l_,Fq=ti(()=>{Me(),je(),Ne(),kw={},Mw=!1,Nw={},jw=!1,Fw={},Bw=!1,Uw={},$w=!1,Hw={},Gw=!1,Kw={},zw=!1,Yw={},qw=!1,Ww={},Vw=!1,Pm={},Qw=!1,Lm={},Xw=!1,km={},Zw=!1,Mm={},Jw=!1,Nm={},e_=!1,jm={},t_=!1,Fm={},r_=!1,Bm={},n_=!1,Um={},i_=!1,$m={},a_=!1,Hm={},s_=!1,ac={},o_=!1,Gm={},l_=!1});function o1(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function Bq(){!Ul||!Ll||(Ul=!1,Ll.length?Ia=Ll.concat(Ia):gd=-1,Ia.length&&OB())}function OB(){if(!Ul){var r=setTimeout(Bq,0);Ul=!0;for(var e=Ia.length;e;){for(Ll=Ia,Ia=[];++gd<e;)Ll&&Ll[gd].run();gd=-1,e=Ia.length}Ll=null,Ul=!1,clearTimeout(r)}}function Uq(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ia.push(new IB(r,e)),Ia.length===1&&!Ul&&setTimeout(OB,0)}function IB(r,e){this.fun=r,this.array=e}function gn(){}function $q(r){o1("_linkedBinding")}function Hq(r){o1("dlopen")}function Gq(){return[]}function Kq(){return[]}function zq(r,e){if(!r)throw new Error(e||"assertion error")}function Yq(){return!1}function qq(){return Es.now()/1e3}function ax(r){var e=Math.floor((Date.now()-Es.now())*.001),t=Es.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=Km)),[n,i]}function Oo(){return l1}function Wq(r){return[]}var Ia,Ul,Ll,gd,jR,FR,BR,UR,$R,HR,GR,KR,zR,YR,qR,WR,VR,QR,XR,ZR,JR,eP,tP,rP,nP,Bp,iP,aP,sP,oP,lP,uP,cP,fP,dP,hP,pP,mP,gP,yP,vP,bP,xP,SP,EP,wP,_P,TP,AP,DP,OP,Es,sx,Km,IP,CP,RP,PP,LP,kP,MP,NP,jP,FP,BP,l1,CB=ti(()=>{Me(),je(),Ne(),Ia=[],Ul=!1,gd=-1,IB.prototype.run=function(){this.fun.apply(null,this.array)},jR="browser",FR="x64",BR="browser",UR={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},$R=["/usr/bin/node"],HR=[],GR="v16.8.0",KR={},zR=function(r,e){console.warn((e?e+": ":"")+r)},YR=function(r){o1("binding")},qR=function(r){return 0},WR=function(){return"/"},VR=function(r){},QR={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},XR=gn,ZR=[],JR={},eP=!1,tP={},rP=gn,nP=gn,Bp=function(){return{}},iP=Bp,aP=Bp,sP=gn,oP=gn,lP=gn,uP={},cP={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},fP=gn,dP=gn,hP=gn,pP=gn,mP=gn,gP=gn,yP=gn,vP=void 0,bP=void 0,xP=void 0,SP=gn,EP=2,wP=1,_P="/bin/usr/node",TP=9229,AP="node",DP=[],OP=gn,Es={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Es.now===void 0&&(sx=Date.now(),Es.timing&&Es.timing.navigationStart&&(sx=Es.timing.navigationStart),Es.now=()=>Date.now()-sx),Km=1e9,ax.bigint=function(r){var e=ax(r);return typeof BigInt>"u"?e[0]*Km+e[1]:BigInt(e[0]*Km)+BigInt(e[1])},IP=10,CP={},RP=0,PP=Oo,LP=Oo,kP=Oo,MP=Oo,NP=Oo,jP=gn,FP=Oo,BP=Oo,l1={version:GR,versions:KR,arch:FR,platform:BR,release:QR,_rawDebug:XR,moduleLoadList:ZR,binding:YR,_linkedBinding:$q,_events:CP,_eventsCount:RP,_maxListeners:IP,on:Oo,addListener:PP,once:LP,off:kP,removeListener:MP,removeAllListeners:NP,emit:jP,prependListener:FP,prependOnceListener:BP,listeners:Wq,domain:JR,_exiting:eP,config:tP,dlopen:Hq,uptime:qq,_getActiveRequests:Gq,_getActiveHandles:Kq,reallyExit:rP,_kill:nP,cpuUsage:Bp,resourceUsage:iP,memoryUsage:aP,kill:sP,exit:oP,openStdin:lP,allowedNodeEnvironmentFlags:uP,assert:zq,features:cP,_fatalExceptions:fP,setUncaughtExceptionCaptureCallback:dP,hasUncaughtExceptionCaptureCallback:Yq,emitWarning:zR,nextTick:Uq,_tickCallback:hP,_debugProcess:pP,_debugEnd:mP,_startProfilerIdleNotifier:gP,_stopProfilerIdleNotifier:yP,stdout:vP,stdin:xP,stderr:bP,abort:SP,umask:qR,chdir:VR,cwd:WR,env:UR,title:jR,argv:$R,execArgv:HR,pid:EP,ppid:wP,execPath:_P,debugPort:TP,hrtime:ax,argv0:AP,_preload_modules:DP,setSourceMapsEnabled:OP}});function Vq(){if(u_)return zm;u_=!0;var r=l1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,s){for(var o="",l=0,c=-1,f=0,h,p=0;p<=a.length;++p){if(p<a.length)h=a.charCodeAt(p);else{if(h===47)break;h=47}if(h===47){if(!(c===p-1||f===1))if(c!==p-1&&f===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var g=o.lastIndexOf("/");if(g!==o.length-1){g===-1?(o="",l=0):(o=o.slice(0,g),l=o.length-1-o.lastIndexOf("/")),c=p,f=0;continue}}else if(o.length===2||o.length===1){o="",l=0,c=p,f=0;continue}}s&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+a.slice(c+1,p):o=a.slice(c+1,p),l=p-c-1;c=p,f=0}else h===46&&f!==-1?++f:f=-1}return o}function n(a,s){var o=s.dir||s.root,l=s.base||(s.name||"")+(s.ext||"");return o?o===s.root?o+l:o+a+l:l}var i={resolve:function(){for(var a="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=r.cwd()),c=o),e(c),c.length!==0&&(a=c+"/"+a,s=c.charCodeAt(0)===47)}return a=t(a,!s),s?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(e(a),a.length===0)return".";var s=a.charCodeAt(0)===47,o=a.charCodeAt(a.length-1)===47;return a=t(a,!s),a.length===0&&!s&&(a="."),a.length>0&&o&&(a+="/"),s?"/"+a:a},isAbsolute:function(a){return e(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(a===void 0?a=o:a+="/"+o)}return a===void 0?".":i.normalize(a)},relative:function(a,s){if(e(a),e(s),a===s||(a=i.resolve(a),s=i.resolve(s),a===s))return"";for(var o=1;o<a.length&&a.charCodeAt(o)===47;++o);for(var l=a.length,c=l-o,f=1;f<s.length&&s.charCodeAt(f)===47;++f);for(var h=s.length,p=h-f,g=c<p?c:p,y=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(s.charCodeAt(f+b)===47)return s.slice(f+b+1);if(b===0)return s.slice(f+b)}else c>g&&(a.charCodeAt(o+b)===47?y=b:b===0&&(y=0));break}var v=a.charCodeAt(o+b),E=s.charCodeAt(f+b);if(v!==E)break;v===47&&(y=b)}var S="";for(b=o+y+1;b<=l;++b)(b===l||a.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(f+y):(f+=y,s.charCodeAt(f)===47&&++f,s.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(e(a),a.length===0)return".";for(var s=a.charCodeAt(0),o=s===47,l=-1,c=!0,f=a.length-1;f>=1;--f)if(s=a.charCodeAt(f),s===47){if(!c){l=f;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":a.slice(0,l)},basename:function(a,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(a);var o=0,l=-1,c=!0,f;if(s!==void 0&&s.length>0&&s.length<=a.length){if(s.length===a.length&&s===a)return"";var h=s.length-1,p=-1;for(f=a.length-1;f>=0;--f){var g=a.charCodeAt(f);if(g===47){if(!c){o=f+1;break}}else p===-1&&(c=!1,p=f+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=f):(h=-1,l=p))}return o===l?l=p:l===-1&&(l=a.length),a.slice(o,l)}else{for(f=a.length-1;f>=0;--f)if(a.charCodeAt(f)===47){if(!c){o=f+1;break}}else l===-1&&(c=!1,l=f+1);return l===-1?"":a.slice(o,l)}},extname:function(a){e(a);for(var s=-1,o=0,l=-1,c=!0,f=0,h=a.length-1;h>=0;--h){var p=a.charCodeAt(h);if(p===47){if(!c){o=h+1;break}continue}l===-1&&(c=!1,l=h+1),p===46?s===-1?s=h:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?"":a.slice(s,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return n("/",a)},parse:function(a){e(a);var s={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return s;var o=a.charCodeAt(0),l=o===47,c;l?(s.root="/",c=1):c=0;for(var f=-1,h=0,p=-1,g=!0,y=a.length-1,b=0;y>=c;--y){if(o=a.charCodeAt(y),o===47){if(!g){h=y+1;break}continue}p===-1&&(g=!1,p=y+1),o===46?f===-1?f=y:b!==1&&(b=1):f!==-1&&(b=-1)}return f===-1||p===-1||b===0||b===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&l?s.base=s.name=a.slice(1,p):s.base=s.name=a.slice(h,p)):(h===0&&l?(s.name=a.slice(1,f),s.base=a.slice(1,p)):(s.name=a.slice(h,f),s.base=a.slice(h,p)),s.ext=a.slice(f,p)),h>0?s.dir=a.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,zm=i,zm}var zm,u_,c_,Qq=ti(()=>{Me(),je(),Ne(),CB(),zm={},u_=!1,c_=Vq()}),RB={};$c(RB,{URL:()=>$B,Url:()=>NB,default:()=>yn,fileURLToPath:()=>LB,format:()=>jB,parse:()=>UB,pathToFileURL:()=>kB,resolve:()=>FB,resolveObject:()=>BB});function Xq(){if(f_)return Ym;f_=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&a&&typeof a.get=="function"?a.get:null,o=i&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,c=l?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,g=p?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,b=Object.prototype.toString,v=Function.prototype.toString,E=String.prototype.match,S=String.prototype.slice,w=String.prototype.replace,A=String.prototype.toUpperCase,_=String.prototype.toLowerCase,I=RegExp.prototype.test,D=Array.prototype.concat,P=Array.prototype.join,k=Array.prototype.slice,M=Math.floor,H=typeof BigInt=="function"?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,z=typeof Symbol=="function"&&typeof Symbol.iterator=="object",V=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===z||!0)?Symbol.toStringTag:null,K=Object.prototype.propertyIsEnumerable,Y=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ge){return ge.__proto__}:null);function W(ge,_e){if(ge===1/0||ge===-1/0||ge!==ge||ge&&ge>-1e3&&ge<1e3||I.call(/e/,_e))return _e;var tt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ge=="number"){var Ze=ge<0?-M(-ge):M(ge);if(Ze!==ge){var ht=String(Ze),yt=S.call(_e,ht.length+1);return w.call(ht,tt,"$&_")+"."+w.call(w.call(yt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(_e,tt,"$&_")}var J=MB,G=J.custom,j=fe(G)?G:null;Ym=function ge(_e,tt,Ze,ht){var yt=tt||{};if(Se(yt,"quoteStyle")&&yt.quoteStyle!=="single"&&yt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Se(yt,"maxStringLength")&&(typeof yt.maxStringLength=="number"?yt.maxStringLength<0&&yt.maxStringLength!==1/0:yt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Di=Se(yt,"customInspect")?yt.customInspect:!0;if(typeof Di!="boolean"&&Di!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Se(yt,"indent")&&yt.indent!==null&&yt.indent!=="	"&&!(parseInt(yt.indent,10)===yt.indent&&yt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Se(yt,"numericSeparator")&&typeof yt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var En=yt.numericSeparator;if(typeof _e>"u")return"undefined";if(_e===null)return"null";if(typeof _e=="boolean")return _e?"true":"false";if(typeof _e=="string")return De(_e,yt);if(typeof _e=="number"){if(_e===0)return 1/0/_e>0?"0":"-0";var xr=String(_e);return En?W(_e,xr):xr}if(typeof _e=="bigint"){var wn=String(_e)+"n";return En?W(_e,wn):wn}var jn=typeof yt.depth>"u"?5:yt.depth;if(typeof Ze>"u"&&(Ze=0),Ze>=jn&&jn>0&&typeof _e=="object")return ae(_e)?"[Array]":"[Object]";var _n=be(yt,Ze);if(typeof ht>"u")ht=[];else if(ye(ht,_e)>=0)return"[Circular]";function kr($n,pa,Qa){if(pa&&(ht=k.call(ht),ht.push(pa)),Qa){var ii={depth:yt.depth};return Se(yt,"quoteStyle")&&(ii.quoteStyle=yt.quoteStyle),ge($n,ii,Ze+1,ht)}return ge($n,yt,Ze+1,ht)}if(typeof _e=="function"&&!ve(_e)){var uu=oe(_e),Wa=We(_e,kr);return"[Function"+(uu?": "+uu:" (anonymous)")+"]"+(Wa.length>0?" { "+P.call(Wa,", ")+" }":"")}if(fe(_e)){var Va=z?w.call(String(_e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Q.call(_e);return typeof _e=="object"&&!z?C(Va):Va}if(Ye(_e)){for(var te="<"+_.call(String(_e.nodeName)),ce=_e.attributes||[],qe=0;qe<ce.length;qe++)te+=" "+ce[qe].name+"="+F(Z(ce[qe].value),"double",yt);return te+=">",_e.childNodes&&_e.childNodes.length&&(te+="..."),te+="</"+_.call(String(_e.nodeName))+">",te}if(ae(_e)){if(_e.length===0)return"[]";var Ve=We(_e,kr);return _n&&!de(Ve)?"["+Pe(Ve,_n)+"]":"[ "+P.call(Ve,", ")+" ]"}if(le(_e)){var Je=We(_e,kr);return!("cause"in Error.prototype)&&"cause"in _e&&!K.call(_e,"cause")?"{ ["+String(_e)+"] "+P.call(D.call("[cause]: "+kr(_e.cause),Je),", ")+" }":Je.length===0?"["+String(_e)+"]":"{ ["+String(_e)+"] "+P.call(Je,", ")+" }"}if(typeof _e=="object"&&Di){if(j&&typeof _e[j]=="function"&&J)return J(_e,{depth:jn-Ze});if(Di!=="symbol"&&typeof _e.inspect=="function")return _e.inspect()}if(Ie(_e)){var ur=[];return n&&n.call(_e,function($n,pa){ur.push(kr(pa,_e,!0)+" => "+kr($n,_e))}),q("Map",t.call(_e),ur,_n)}if(pe(_e)){var Mr=[];return o&&o.call(_e,function($n){Mr.push(kr($n,_e))}),q("Set",s.call(_e),Mr,_n)}if(Re(_e))return B("WeakMap");if(Fe(_e))return B("WeakSet");if(Be(_e))return B("WeakRef");if(re(_e))return C(kr(Number(_e)));if(ie(_e))return C(kr(H.call(_e)));if(ue(_e))return C(y.call(_e));if(ne(_e))return C(kr(String(_e)));if(typeof window<"u"&&_e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_e===globalThis||typeof qm<"u"&&_e===qm)return"{ [object globalThis] }";if(!ee(_e)&&!ve(_e)){var Fn=We(_e,kr),no=Y?Y(_e)===Object.prototype:_e instanceof Object||_e.constructor===Object,Bn=_e instanceof Object?"":"null prototype",cr=!no&&V&&Object(_e)===_e&&V in _e?S.call(se(_e),8,-1):Bn?"Object":"",Nr=no||typeof _e.constructor!="function"?"":_e.constructor.name?_e.constructor.name+" ":"",Un=Nr+(cr||Bn?"["+P.call(D.call([],cr||[],Bn||[]),": ")+"] ":"");return Fn.length===0?Un+"{}":_n?Un+"{"+Pe(Fn,_n)+"}":Un+"{ "+P.call(Fn,", ")+" }"}return String(_e)};function F(ge,_e,tt){var Ze=(tt.quoteStyle||_e)==="double"?'"':"'";return Ze+ge+Ze}function Z(ge){return w.call(String(ge),/"/g,"&quot;")}function ae(ge){return se(ge)==="[object Array]"&&(!V||!(typeof ge=="object"&&V in ge))}function ee(ge){return se(ge)==="[object Date]"&&(!V||!(typeof ge=="object"&&V in ge))}function ve(ge){return se(ge)==="[object RegExp]"&&(!V||!(typeof ge=="object"&&V in ge))}function le(ge){return se(ge)==="[object Error]"&&(!V||!(typeof ge=="object"&&V in ge))}function ne(ge){return se(ge)==="[object String]"&&(!V||!(typeof ge=="object"&&V in ge))}function re(ge){return se(ge)==="[object Number]"&&(!V||!(typeof ge=="object"&&V in ge))}function ue(ge){return se(ge)==="[object Boolean]"&&(!V||!(typeof ge=="object"&&V in ge))}function fe(ge){if(z)return ge&&typeof ge=="object"&&ge instanceof Symbol;if(typeof ge=="symbol")return!0;if(!ge||typeof ge!="object"||!Q)return!1;try{return Q.call(ge),!0}catch{}return!1}function ie(ge){if(!ge||typeof ge!="object"||!H)return!1;try{return H.call(ge),!0}catch{}return!1}var Ce=Object.prototype.hasOwnProperty||function(ge){return ge in(this||qm)};function Se(ge,_e){return Ce.call(ge,_e)}function se(ge){return b.call(ge)}function oe(ge){if(ge.name)return ge.name;var _e=E.call(v.call(ge),/^function\s*([\w$]+)/);return _e?_e[1]:null}function ye(ge,_e){if(ge.indexOf)return ge.indexOf(_e);for(var tt=0,Ze=ge.length;tt<Ze;tt++)if(ge[tt]===_e)return tt;return-1}function Ie(ge){if(!t||!ge||typeof ge!="object")return!1;try{t.call(ge);try{s.call(ge)}catch{return!0}return ge instanceof Map}catch{}return!1}function Re(ge){if(!c||!ge||typeof ge!="object")return!1;try{c.call(ge,c);try{h.call(ge,h)}catch{return!0}return ge instanceof WeakMap}catch{}return!1}function Be(ge){if(!g||!ge||typeof ge!="object")return!1;try{return g.call(ge),!0}catch{}return!1}function pe(ge){if(!s||!ge||typeof ge!="object")return!1;try{s.call(ge);try{t.call(ge)}catch{return!0}return ge instanceof Set}catch{}return!1}function Fe(ge){if(!h||!ge||typeof ge!="object")return!1;try{h.call(ge,h);try{c.call(ge,c)}catch{return!0}return ge instanceof WeakSet}catch{}return!1}function Ye(ge){return!ge||typeof ge!="object"?!1:typeof HTMLElement<"u"&&ge instanceof HTMLElement?!0:typeof ge.nodeName=="string"&&typeof ge.getAttribute=="function"}function De(ge,_e){if(ge.length>_e.maxStringLength){var tt=ge.length-_e.maxStringLength,Ze="... "+tt+" more character"+(tt>1?"s":"");return De(S.call(ge,0,_e.maxStringLength),_e)+Ze}var ht=w.call(w.call(ge,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ft);return F(ht,"single",_e)}function ft(ge){var _e=ge.charCodeAt(0),tt={8:"b",9:"t",10:"n",12:"f",13:"r"}[_e];return tt?"\\"+tt:"\\x"+(_e<16?"0":"")+A.call(_e.toString(16))}function C(ge){return"Object("+ge+")"}function B(ge){return ge+" { ? }"}function q(ge,_e,tt,Ze){var ht=Ze?Pe(tt,Ze):P.call(tt,", ");return ge+" ("+_e+") {"+ht+"}"}function de(ge){for(var _e=0;_e<ge.length;_e++)if(ye(ge[_e],`
`)>=0)return!1;return!0}function be(ge,_e){var tt;if(ge.indent==="	")tt="	";else if(typeof ge.indent=="number"&&ge.indent>0)tt=P.call(Array(ge.indent+1)," ");else return null;return{base:tt,prev:P.call(Array(_e+1),tt)}}function Pe(ge,_e){if(ge.length===0)return"";var tt=`
`+_e.prev+_e.base;return tt+P.call(ge,","+tt)+`
`+_e.prev}function We(ge,_e){var tt=ae(ge),Ze=[];if(tt){Ze.length=ge.length;for(var ht=0;ht<ge.length;ht++)Ze[ht]=Se(ge,ht)?_e(ge[ht],ge):""}var yt=typeof N=="function"?N(ge):[],Di;if(z){Di={};for(var En=0;En<yt.length;En++)Di["$"+yt[En]]=yt[En]}for(var xr in ge)Se(ge,xr)&&(tt&&String(Number(xr))===xr&&xr<ge.length||z&&Di["$"+xr]instanceof Symbol||(I.call(/[^\w$]/,xr)?Ze.push(_e(xr,ge)+": "+_e(ge[xr],ge)):Ze.push(xr+": "+_e(ge[xr],ge))));if(typeof N=="function")for(var wn=0;wn<yt.length;wn++)K.call(ge,yt[wn])&&Ze.push("["+_e(yt[wn])+"]: "+_e(ge[yt[wn]],ge));return Ze}return Ym}function Zq(){if(d_)return Wm;d_=!0;var r=Kc(),e=jq(),t=Xq(),n=eh(),i=r("%WeakMap%",!0),a=r("%Map%",!0),s=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),f=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),p=function(v,E){for(var S=v,w;(w=S.next)!==null;S=w)if(w.key===E)return S.next=w.next,w.next=v.next,v.next=w,w},g=function(v,E){var S=p(v,E);return S&&S.value},y=function(v,E,S){var w=p(v,E);w?w.value=S:v.next={key:E,next:v.next,value:S}},b=function(v,E){return!!p(v,E)};return Wm=function(){var v,E,S,w={assert:function(A){if(!w.has(A))throw new n("Side channel does not contain "+t(A))},get:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(v)return s(v,A)}else if(a){if(E)return c(E,A)}else if(S)return g(S,A)},has:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(v)return l(v,A)}else if(a){if(E)return h(E,A)}else if(S)return b(S,A);return!1},set:function(A,_){i&&A&&(typeof A=="object"||typeof A=="function")?(v||(v=new i),o(v,A,_)):a?(E||(E=new a),f(E,A,_)):(S||(S={key:{},next:null}),y(S,A,_))}};return w},Wm}function u1(){if(h_)return Vm;h_=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Vm={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Vm}function PB(){if(p_)return Qm;p_=!0;var r=u1(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var v=[],E=0;E<256;++E)v.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return v})(),i=function(v){for(;v.length>1;){var E=v.pop(),S=E.obj[E.prop];if(t(S)){for(var w=[],A=0;A<S.length;++A)typeof S[A]<"u"&&w.push(S[A]);E.obj[E.prop]=w}}},a=function(v,E){for(var S=E&&E.plainObjects?Object.create(null):{},w=0;w<v.length;++w)typeof v[w]<"u"&&(S[w]=v[w]);return S},s=function v(E,S,w){if(!S)return E;if(typeof S!="object"){if(t(E))E.push(S);else if(E&&typeof E=="object")(w&&(w.plainObjects||w.allowPrototypes)||!e.call(Object.prototype,S))&&(E[S]=!0);else return[E,S];return E}if(!E||typeof E!="object")return[E].concat(S);var A=E;return t(E)&&!t(S)&&(A=a(E,w)),t(E)&&t(S)?(S.forEach(function(_,I){if(e.call(E,I)){var D=E[I];D&&typeof D=="object"&&_&&typeof _=="object"?E[I]=v(D,_,w):E.push(_)}else E[I]=_}),E):Object.keys(S).reduce(function(_,I){var D=S[I];return e.call(_,I)?_[I]=v(_[I],D,w):_[I]=D,_},A)},o=function(v,E){return Object.keys(E).reduce(function(S,w){return S[w]=E[w],S},v)},l=function(v,E,S){var w=v.replace(/\+/g," ");if(S==="iso-8859-1")return w.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(w)}catch{return w}},c=1024,f=function(v,E,S,w,A){if(v.length===0)return v;var _=v;if(typeof v=="symbol"?_=Symbol.prototype.toString.call(v):typeof v!="string"&&(_=String(v)),S==="iso-8859-1")return escape(_).replace(/%u[0-9a-f]{4}/gi,function(N){return"%26%23"+parseInt(N.slice(2),16)+"%3B"});for(var I="",D=0;D<_.length;D+=c){for(var P=_.length>=c?_.slice(D,D+c):_,k=[],M=0;M<P.length;++M){var H=P.charCodeAt(M);if(H===45||H===46||H===95||H===126||H>=48&&H<=57||H>=65&&H<=90||H>=97&&H<=122||A===r.RFC1738&&(H===40||H===41)){k[k.length]=P.charAt(M);continue}if(H<128){k[k.length]=n[H];continue}if(H<2048){k[k.length]=n[192|H>>6]+n[128|H&63];continue}if(H<55296||H>=57344){k[k.length]=n[224|H>>12]+n[128|H>>6&63]+n[128|H&63];continue}M+=1,H=65536+((H&1023)<<10|P.charCodeAt(M)&1023),k[k.length]=n[240|H>>18]+n[128|H>>12&63]+n[128|H>>6&63]+n[128|H&63]}I+=k.join("")}return I},h=function(v){for(var E=[{obj:{o:v},prop:"o"}],S=[],w=0;w<E.length;++w)for(var A=E[w],_=A.obj[A.prop],I=Object.keys(_),D=0;D<I.length;++D){var P=I[D],k=_[P];typeof k=="object"&&k!==null&&S.indexOf(k)===-1&&(E.push({obj:_,prop:P}),S.push(k))}return i(E),v},p=function(v){return Object.prototype.toString.call(v)==="[object RegExp]"},g=function(v){return!v||typeof v!="object"?!1:!!(v.constructor&&v.constructor.isBuffer&&v.constructor.isBuffer(v))},y=function(v,E){return[].concat(v,E)},b=function(v,E){if(t(v)){for(var S=[],w=0;w<v.length;w+=1)S.push(E(v[w]));return S}return E(v)};return Qm={arrayToObject:a,assign:o,combine:y,compact:h,decode:l,encode:f,isBuffer:g,isRegExp:p,maybeMap:b,merge:s},Qm}function Jq(){if(m_)return Xm;m_=!0;var r=Zq(),e=PB(),t=u1(),n=Object.prototype.hasOwnProperty,i={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,v){return b+"["+v+"]"},repeat:function(b){return b}},a=Array.isArray,s=Array.prototype.push,o=function(b,v){s.apply(b,a(v)?v:[v])},l=Date.prototype.toISOString,c=t.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(b){return l.call(b)},skipNulls:!1,strictNullHandling:!1},h=function(b){return typeof b=="string"||typeof b=="number"||typeof b=="boolean"||typeof b=="symbol"||typeof b=="bigint"},p={},g=function b(v,E,S,w,A,_,I,D,P,k,M,H,N,Q,z,V,K,Y){for(var W=v,J=Y,G=0,j=!1;(J=J.get(p))!==void 0&&!j;){var F=J.get(v);if(G+=1,typeof F<"u"){if(F===G)throw new RangeError("Cyclic object value");j=!0}typeof J.get(p)>"u"&&(G=0)}if(typeof k=="function"?W=k(E,W):W instanceof Date?W=N(W):S==="comma"&&a(W)&&(W=e.maybeMap(W,function(se){return se instanceof Date?N(se):se})),W===null){if(_)return P&&!V?P(E,f.encoder,K,"key",Q):E;W=""}if(h(W)||e.isBuffer(W)){if(P){var Z=V?E:P(E,f.encoder,K,"key",Q);return[z(Z)+"="+z(P(W,f.encoder,K,"value",Q))]}return[z(E)+"="+z(String(W))]}var ae=[];if(typeof W>"u")return ae;var ee;if(S==="comma"&&a(W))V&&P&&(W=e.maybeMap(W,P)),ee=[{value:W.length>0?W.join(",")||null:void 0}];else if(a(k))ee=k;else{var ve=Object.keys(W);ee=M?ve.sort(M):ve}var le=D?E.replace(/\./g,"%2E"):E,ne=w&&a(W)&&W.length===1?le+"[]":le;if(A&&a(W)&&W.length===0)return ne+"[]";for(var re=0;re<ee.length;++re){var ue=ee[re],fe=typeof ue=="object"&&typeof ue.value<"u"?ue.value:W[ue];if(!(I&&fe===null)){var ie=H&&D?ue.replace(/\./g,"%2E"):ue,Ce=a(W)?typeof S=="function"?S(ne,ie):ne:ne+(H?"."+ie:"["+ie+"]");Y.set(v,G);var Se=r();Se.set(p,Y),o(ae,b(fe,Ce,S,w,A,_,I,D,S==="comma"&&V&&a(W)?null:P,k,M,H,N,Q,z,V,K,Se))}}return ae},y=function(b){if(!b)return f;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!="function")throw new TypeError("Encoder has to be a function.");var v=b.charset||f.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof b.format<"u"){if(!n.call(t.formatters,b.format))throw new TypeError("Unknown format option provided.");E=b.format}var S=t.formatters[E],w=f.filter;(typeof b.filter=="function"||a(b.filter))&&(w=b.filter);var A;if(b.arrayFormat in i?A=b.arrayFormat:"indices"in b?A=b.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in b&&typeof b.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var _=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:f.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix=="boolean"?b.addQueryPrefix:f.addQueryPrefix,allowDots:_,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:v,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:f.charsetSentinel,commaRoundTrip:b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?f.delimiter:b.delimiter,encode:typeof b.encode=="boolean"?b.encode:f.encode,encodeDotInKeys:typeof b.encodeDotInKeys=="boolean"?b.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof b.encoder=="function"?b.encoder:f.encoder,encodeValuesOnly:typeof b.encodeValuesOnly=="boolean"?b.encodeValuesOnly:f.encodeValuesOnly,filter:w,format:E,formatter:S,serializeDate:typeof b.serializeDate=="function"?b.serializeDate:f.serializeDate,skipNulls:typeof b.skipNulls=="boolean"?b.skipNulls:f.skipNulls,sort:typeof b.sort=="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:f.strictNullHandling}};return Xm=function(b,v){var E=b,S=y(v),w,A;typeof S.filter=="function"?(A=S.filter,E=A("",E)):a(S.filter)&&(A=S.filter,w=A);var _=[];if(typeof E!="object"||E===null)return"";var I=i[S.arrayFormat],D=I==="comma"&&S.commaRoundTrip;w||(w=Object.keys(E)),S.sort&&w.sort(S.sort);for(var P=r(),k=0;k<w.length;++k){var M=w[k];S.skipNulls&&E[M]===null||o(_,g(E[M],M,I,D,S.allowEmptyArrays,S.strictNullHandling,S.skipNulls,S.encodeDotInKeys,S.encode?S.encoder:null,S.filter,S.sort,S.allowDots,S.serializeDate,S.format,S.formatter,S.encodeValuesOnly,S.charset,P))}var H=_.join(S.delimiter),N=S.addQueryPrefix===!0?"?":"";return S.charsetSentinel&&(S.charset==="iso-8859-1"?N+="utf8=%26%2310003%3B&":N+="utf8=%E2%9C%93&"),H.length>0?N+H:""},Xm}function eW(){if(g_)return Zm;g_=!0;var r=PB(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(p){return p.replace(/&#(\d+);/g,function(g,y){return String.fromCharCode(parseInt(y,10))})},a=function(p,g){return p&&typeof p=="string"&&g.comma&&p.indexOf(",")>-1?p.split(","):p},s="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",l=function(p,g){var y={__proto__:null},b=g.ignoreQueryPrefix?p.replace(/^\?/,""):p;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var v=g.parameterLimit===1/0?void 0:g.parameterLimit,E=b.split(g.delimiter,v),S=-1,w,A=g.charset;if(g.charsetSentinel)for(w=0;w<E.length;++w)E[w].indexOf("utf8=")===0&&(E[w]===o?A="utf-8":E[w]===s&&(A="iso-8859-1"),S=w,w=E.length);for(w=0;w<E.length;++w)if(w!==S){var _=E[w],I=_.indexOf("]="),D=I===-1?_.indexOf("="):I+1,P,k;D===-1?(P=g.decoder(_,n.decoder,A,"key"),k=g.strictNullHandling?null:""):(P=g.decoder(_.slice(0,D),n.decoder,A,"key"),k=r.maybeMap(a(_.slice(D+1),g),function(H){return g.decoder(H,n.decoder,A,"value")})),k&&g.interpretNumericEntities&&A==="iso-8859-1"&&(k=i(k)),_.indexOf("[]=")>-1&&(k=t(k)?[k]:k);var M=e.call(y,P);M&&g.duplicates==="combine"?y[P]=r.combine(y[P],k):(!M||g.duplicates==="last")&&(y[P]=k)}return y},c=function(p,g,y,b){for(var v=b?g:a(g,y),E=p.length-1;E>=0;--E){var S,w=p[E];if(w==="[]"&&y.parseArrays)S=y.allowEmptyArrays&&(v===""||y.strictNullHandling&&v===null)?[]:[].concat(v);else{S=y.plainObjects?Object.create(null):{};var A=w.charAt(0)==="["&&w.charAt(w.length-1)==="]"?w.slice(1,-1):w,_=y.decodeDotInKeys?A.replace(/%2E/g,"."):A,I=parseInt(_,10);!y.parseArrays&&_===""?S={0:v}:!isNaN(I)&&w!==_&&String(I)===_&&I>=0&&y.parseArrays&&I<=y.arrayLimit?(S=[],S[I]=v):_!=="__proto__"&&(S[_]=v)}v=S}return v},f=function(p,g,y,b){if(p){var v=y.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,E=/(\[[^[\]]*])/,S=/(\[[^[\]]*])/g,w=y.depth>0&&E.exec(v),A=w?v.slice(0,w.index):v,_=[];if(A){if(!y.plainObjects&&e.call(Object.prototype,A)&&!y.allowPrototypes)return;_.push(A)}for(var I=0;y.depth>0&&(w=S.exec(v))!==null&&I<y.depth;){if(I+=1,!y.plainObjects&&e.call(Object.prototype,w[1].slice(1,-1))&&!y.allowPrototypes)return;_.push(w[1])}if(w){if(y.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+y.depth+" and strictDepth is true");_.push("["+v.slice(w.index)+"]")}return c(_,g,y,b)}},h=function(p){if(!p)return n;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof p.charset>"u"?n.charset:p.charset,y=typeof p.duplicates>"u"?n.duplicates:p.duplicates;if(y!=="combine"&&y!=="first"&&y!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var b=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:n.allowDots:!!p.allowDots;return{allowDots:b,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:n.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:n.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:n.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:n.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:n.decoder,delimiter:typeof p.delimiter=="string"||r.isRegExp(p.delimiter)?p.delimiter:n.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:n.depth,duplicates:y,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:n.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:n.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:n.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:n.strictNullHandling}};return Zm=function(p,g){var y=h(g);if(p===""||p===null||typeof p>"u")return y.plainObjects?Object.create(null):{};for(var b=typeof p=="string"?l(p,y):p,v=y.plainObjects?Object.create(null):{},E=Object.keys(b),S=0;S<E.length;++S){var w=E[S],A=f(w,b[w],y,typeof p=="string");v=r.merge(v,A,y)}return y.allowSparse===!0?v:r.compact(v)},Zm}function tW(){if(y_)return Jm;y_=!0;var r=Jq(),e=eW(),t=u1();return Jm={formats:t,parse:e,stringify:r},Jm}function rW(){if(v_)return ko;v_=!0;var r=Lo;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(a),o=["'"].concat(s),l=["%","/","?",";","#"].concat(o),c=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=tW();function E(_,I,D){if(_&&typeof _=="object"&&_ instanceof e)return _;var P=new e;return P.parse(_,I,D),P}e.prototype.parse=function(_,I,D){if(typeof _!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _);var P=_.indexOf("?"),k=P!==-1&&P<_.indexOf("#")?"?":"#",M=_.split(k),H=/\\/g;M[0]=M[0].replace(H,"/"),_=M.join(k);var N=_;if(N=N.trim(),!D&&_.split("#").length===1){var Q=i.exec(N);if(Q)return this.path=N,this.href=N,this.pathname=Q[1],Q[2]?(this.search=Q[2],I?this.query=v.parse(this.search.substr(1)):this.query=this.search.substr(1)):I&&(this.search="",this.query={}),this}var z=t.exec(N);if(z){z=z[0];var V=z.toLowerCase();this.protocol=V,N=N.substr(z.length)}if(D||z||N.match(/^\/\/[^@/]+@[^@/]+/)){var K=N.substr(0,2)==="//";K&&!(z&&y[z])&&(N=N.substr(2),this.slashes=!0)}if(!y[z]&&(K||z&&!b[z])){for(var Y=-1,W=0;W<c.length;W++){var J=N.indexOf(c[W]);J!==-1&&(Y===-1||J<Y)&&(Y=J)}var G,j;Y===-1?j=N.lastIndexOf("@"):j=N.lastIndexOf("@",Y),j!==-1&&(G=N.slice(0,j),N=N.slice(j+1),this.auth=decodeURIComponent(G)),Y=-1;for(var W=0;W<l.length;W++){var J=N.indexOf(l[W]);J!==-1&&(Y===-1||J<Y)&&(Y=J)}Y===-1&&(Y=N.length),this.host=N.slice(0,Y),N=N.slice(Y),this.parseHost(),this.hostname=this.hostname||"";var F=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!F)for(var Z=this.hostname.split(/\./),W=0,ae=Z.length;W<ae;W++){var ee=Z[W];if(ee&&!ee.match(h)){for(var ve="",le=0,ne=ee.length;le<ne;le++)ee.charCodeAt(le)>127?ve+="x":ve+=ee[le];if(!ve.match(h)){var re=Z.slice(0,W),ue=Z.slice(W+1),fe=ee.match(p);fe&&(re.push(fe[1]),ue.unshift(fe[2])),ue.length&&(N="/"+ue.join(".")+N),this.hostname=re.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=r.toASCII(this.hostname));var ie=this.port?":"+this.port:"",Ce=this.hostname||"";this.host=Ce+ie,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!g[V])for(var W=0,ae=o.length;W<ae;W++){var Se=o[W];if(N.indexOf(Se)!==-1){var se=encodeURIComponent(Se);se===Se&&(se=escape(Se)),N=N.split(Se).join(se)}}var oe=N.indexOf("#");oe!==-1&&(this.hash=N.substr(oe),N=N.slice(0,oe));var ye=N.indexOf("?");if(ye!==-1?(this.search=N.substr(ye),this.query=N.substr(ye+1),I&&(this.query=v.parse(this.query)),N=N.slice(0,ye)):I&&(this.search="",this.query={}),N&&(this.pathname=N),b[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ie=this.pathname||"",Ie=this.search||"";this.path=ie+Ie}return this.href=this.format(),this};function S(_){return typeof _=="string"&&(_=E(_)),_ instanceof e?_.format():e.prototype.format.call(_)}e.prototype.format=function(){var _=this.auth||"";_&&(_=encodeURIComponent(_),_=_.replace(/%3A/i,":"),_+="@");var I=this.protocol||"",D=this.pathname||"",P=this.hash||"",k=!1,M="";this.host?k=_+this.host:this.hostname&&(k=_+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(M=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var H=this.search||M&&"?"+M||"";return I&&I.substr(-1)!==":"&&(I+=":"),this.slashes||(!I||b[I])&&k!==!1?(k="//"+(k||""),D&&D.charAt(0)!=="/"&&(D="/"+D)):k||(k=""),P&&P.charAt(0)!=="#"&&(P="#"+P),H&&H.charAt(0)!=="?"&&(H="?"+H),D=D.replace(/[?#]/g,function(N){return encodeURIComponent(N)}),H=H.replace("#","%23"),I+k+D+H+P};function w(_,I){return E(_,!1,!0).resolve(I)}e.prototype.resolve=function(_){return this.resolveObject(E(_,!1,!0)).format()};function A(_,I){return _?E(_,!1,!0).resolveObject(I):I}return e.prototype.resolveObject=function(_){if(typeof _=="string"){var I=new e;I.parse(_,!1,!0),_=I}for(var D=new e,P=Object.keys(this),k=0;k<P.length;k++){var M=P[k];D[M]=this[M]}if(D.hash=_.hash,_.href==="")return D.href=D.format(),D;if(_.slashes&&!_.protocol){for(var H=Object.keys(_),N=0;N<H.length;N++){var Q=H[N];Q!=="protocol"&&(D[Q]=_[Q])}return b[D.protocol]&&D.hostname&&!D.pathname&&(D.pathname="/",D.path=D.pathname),D.href=D.format(),D}if(_.protocol&&_.protocol!==D.protocol){if(!b[_.protocol]){for(var z=Object.keys(_),V=0;V<z.length;V++){var K=z[V];D[K]=_[K]}return D.href=D.format(),D}if(D.protocol=_.protocol,!_.host&&!y[_.protocol]){for(var ae=(_.pathname||"").split("/");ae.length&&!(_.host=ae.shift()););_.host||(_.host=""),_.hostname||(_.hostname=""),ae[0]!==""&&ae.unshift(""),ae.length<2&&ae.unshift(""),D.pathname=ae.join("/")}else D.pathname=_.pathname;if(D.search=_.search,D.query=_.query,D.host=_.host||"",D.auth=_.auth,D.hostname=_.hostname||_.host,D.port=_.port,D.pathname||D.search){var Y=D.pathname||"",W=D.search||"";D.path=Y+W}return D.slashes=D.slashes||_.slashes,D.href=D.format(),D}var J=D.pathname&&D.pathname.charAt(0)==="/",G=_.host||_.pathname&&_.pathname.charAt(0)==="/",j=G||J||D.host&&_.pathname,F=j,Z=D.pathname&&D.pathname.split("/")||[],ae=_.pathname&&_.pathname.split("/")||[],ee=D.protocol&&!b[D.protocol];if(ee&&(D.hostname="",D.port=null,D.host&&(Z[0]===""?Z[0]=D.host:Z.unshift(D.host)),D.host="",_.protocol&&(_.hostname=null,_.port=null,_.host&&(ae[0]===""?ae[0]=_.host:ae.unshift(_.host)),_.host=null),j=j&&(ae[0]===""||Z[0]==="")),G)D.host=_.host||_.host===""?_.host:D.host,D.hostname=_.hostname||_.hostname===""?_.hostname:D.hostname,D.search=_.search,D.query=_.query,Z=ae;else if(ae.length)Z||(Z=[]),Z.pop(),Z=Z.concat(ae),D.search=_.search,D.query=_.query;else if(_.search!=null){if(ee){D.host=Z.shift(),D.hostname=D.host;var ve=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;ve&&(D.auth=ve.shift(),D.hostname=ve.shift(),D.host=D.hostname)}return D.search=_.search,D.query=_.query,(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.href=D.format(),D}if(!Z.length)return D.pathname=null,D.search?D.path="/"+D.search:D.path=null,D.href=D.format(),D;for(var le=Z.slice(-1)[0],ne=(D.host||_.host||Z.length>1)&&(le==="."||le==="..")||le==="",re=0,ue=Z.length;ue>=0;ue--)le=Z[ue],le==="."?Z.splice(ue,1):le===".."?(Z.splice(ue,1),re++):re&&(Z.splice(ue,1),re--);if(!j&&!F)for(;re--;re)Z.unshift("..");j&&Z[0]!==""&&(!Z[0]||Z[0].charAt(0)!=="/")&&Z.unshift(""),ne&&Z.join("/").substr(-1)!=="/"&&Z.push("");var fe=Z[0]===""||Z[0]&&Z[0].charAt(0)==="/";if(ee){D.hostname=fe?"":Z.length?Z.shift():"",D.host=D.hostname;var ve=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;ve&&(D.auth=ve.shift(),D.hostname=ve.shift(),D.host=D.hostname)}return j=j||D.host&&Z.length,j&&!fe&&Z.unshift(""),Z.length>0?D.pathname=Z.join("/"):(D.pathname=null,D.path=null),(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.auth=_.auth||D.auth,D.slashes=D.slashes||_.slashes,D.href=D.format(),D},e.prototype.parseHost=function(){var _=this.host,I=n.exec(_);I&&(I=I[0],I!==":"&&(this.port=I.substr(1)),_=_.substr(0,_.length-I.length)),_&&(this.hostname=_)},ko.parse=E,ko.resolve=w,ko.resolveObject=A,ko.format=S,ko.Url=e,ko}function LB(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return xg?nW(r):iW(r)}function nW(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(YB,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<KB||n>zB||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function iW(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function kB(r){let e=c_.resolve(r),t=r.charCodeAt(r.length-1);(t===GB||xg&&t===HB)&&e[e.length-1]!==c_.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(qB,"%25")),!xg&&e.includes("\\")&&(e=e.replace(WB,"%5C")),e.includes(`
`)&&(e=e.replace(VB,"%0A")),e.includes("\r")&&(e=e.replace(QB,"%0D")),e.includes("	")&&(e=e.replace(XB,"%09")),n.pathname=e,n}var MB,Ym,f_,qm,Wm,d_,Vm,h_,Qm,p_,Xm,m_,Zm,g_,Jm,y_,ko,v_,yn,UP,NB,jB,FB,BB,UB,$B,HB,GB,KB,zB,xg,YB,qB,WB,VB,QB,XB,aW=ti(()=>{Me(),je(),Ne(),Eq(),Fq(),Qq(),CB(),MB=Object.freeze(Object.create(null)),Ym={},f_=!1,qm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Wm={},d_=!1,Vm={},h_=!1,Qm={},p_=!1,Xm={},m_=!1,Zm={},g_=!1,Jm={},y_=!1,ko={},v_=!1,yn=rW(),yn.parse,yn.resolve,yn.resolveObject,yn.format,yn.Url,UP=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,yn.URL=typeof URL<"u"?URL:null,yn.pathToFileURL=kB,yn.fileURLToPath=LB,NB=yn.Url,jB=yn.format,FB=yn.resolve,BB=yn.resolveObject,UB=yn.parse,$B=yn.URL,HB=92,GB=47,KB=97,zB=122,xg=UP==="win32",YB=/\//g,qB=/%/g,WB=/\\/g,VB=/\n/g,QB=/\r/g,XB=/\t/g}),sW=He((r,e)=>{Me(),je(),Ne(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),c1=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=au(),t=(en(),qt(Jr));function n(a,s){let o=new Array(a.length);for(let l=0;l<a.length;l++)typeof a[l].chunk=="string"?o[l]=t.Buffer.from(a[l].chunk,"utf8"):o[l]=a[l].chunk;this._write(t.Buffer.concat(o),"binary",s)}var i=class extends e.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(a,s,o){super({objectMode:!0}),this.proxy=s,this.socket=o,this.writeQueue=[],a.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{!this.destroyed&&this.readable&&this.push(l)})}_read(a){this.proxy.read(a)}_write(a,s,o){this.isSocketOpen?this.writeToProxy(a,s,o):this.writeQueue.push({chunk:a,encoding:s,cb:o})}_final(a){this.writeQueue=[],this.proxy.end(a)}_destroy(a,s){this.writeQueue=[],this.proxy.destroy(),s(a)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(a,s,o){this.proxy.write(a,s)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:a,encoding:s,cb:o}=this.writeQueue.shift();this.writeToProxy(a,s,o)}}};r.BufferedDuplex=i}),Up=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(en(),qt(Jr)),n=e(sW()),i=e(js()),a=au(),s=e(K0()),o=c1(),l=(0,i.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function f(E,S){let w=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(w=E.transformWsUrl(w,E,S)),w}function h(E){let S=E;return E.port||(E.protocol==="wss"?S.port=443:S.port=80),E.path||(S.path="/"),E.wsOptions||(S.wsOptions={}),!s.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&c.forEach(w=>{Object.prototype.hasOwnProperty.call(E,w)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,w)&&(S.wsOptions[w]=E[w])}),S}function p(E){let S=h(E);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);S.hostname=w.hostname,S.port||(S.port=Number(w.port))}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function g(E,S,w){l("createWebSocket"),l(`protocol: ${w.protocolId} ${w.protocolVersion}`);let A=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${S} and protocol: ${A}`);let _;return w.createWebsocket?_=w.createWebsocket(S,[A],w):_=new n.default(S,[A],w.wsOptions),_}function y(E,S){let w=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",A=f(S,E),_;return S.createWebsocket?_=S.createWebsocket(A,[w],S):_=new WebSocket(A,[w]),_.binaryType="arraybuffer",_}var b=(E,S)=>{l("streamBuilder");let w=h(S);w.hostname=w.hostname||w.host||"localhost";let A=f(w,E),_=g(E,A,w),I=n.default.createWebSocketStream(_,w.wsOptions);return I.url=A,_.on("close",()=>{I.destroy()}),I};r.streamBuilder=b;var v=(E,S)=>{l("browserStreamBuilder");let w,A=p(S).browserBufferSize||1024*512,_=S.browserBufferTimeout||1e3,I=!S.objectMode,D=y(E,S),P=M(S,V,K);S.objectMode||(P._writev=o.writev.bind(P)),P.on("close",()=>{D.close()});let k=typeof D.addEventListener<"u";D.readyState===D.OPEN?(w=P,w.socket=D):(w=new o.BufferedDuplex(S,P,D),k?D.addEventListener("open",H):D.onopen=H),k?(D.addEventListener("close",N),D.addEventListener("error",Q),D.addEventListener("message",z)):(D.onclose=N,D.onerror=Q,D.onmessage=z);function M(Y,W,J){let G=new a.Transform({objectMode:Y.objectMode});return G._write=W,G._flush=J,G}function H(){l("WebSocket onOpen"),w instanceof o.BufferedDuplex&&w.socketReady()}function N(Y){l("WebSocket onClose",Y),w.end(),w.destroy()}function Q(Y){l("WebSocket onError",Y);let W=new Error("WebSocket error");W.event=Y,w.destroy(W)}async function z(Y){if(!P||!P.readable||!P.writable)return;let{data:W}=Y;W instanceof ArrayBuffer?W=t.Buffer.from(W):W instanceof Blob?W=t.Buffer.from(await new Response(W).arrayBuffer()):W=t.Buffer.from(W,"utf8"),P.push(W)}function V(Y,W,J){if(D.bufferedAmount>A){setTimeout(V,_,Y,W,J);return}I&&typeof Y=="string"&&(Y=t.Buffer.from(Y,"utf8"));try{D.send(Y)}catch(G){return J(G)}J()}function K(Y){D.close(),Y()}return w};r.browserStreamBuilder=v}),f1={};$c(f1,{Server:()=>sr,Socket:()=>sr,Stream:()=>sr,_createServerHandle:()=>sr,_normalizeArgs:()=>sr,_setSimultaneousAccepts:()=>sr,connect:()=>sr,createConnection:()=>sr,createServer:()=>sr,default:()=>ZB,isIP:()=>sr,isIPv4:()=>sr,isIPv6:()=>sr});function sr(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var ZB,JB=ti(()=>{Me(),je(),Ne(),ZB={_createServerHandle:sr,_normalizeArgs:sr,_setSimultaneousAccepts:sr,connect:sr,createConnection:sr,createServer:sr,isIP:sr,isIPv4:sr,isIPv6:sr,Server:sr,Socket:sr,Stream:sr}}),eU=He((r,e)=>{Me(),je(),Ne(),e.exports={}}),$P=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((JB(),qt(f1))),n=e(js()),i=e(eU()),a=(0,n.default)("mqttjs:tcp"),s=(o,l)=>{if(l.port=l.port||1883,l.hostname=l.hostname||l.host||"localhost",l.socksProxy)return(0,i.default)(l.hostname,l.port,l.socksProxy,{timeout:l.socksTimeout});let{port:c,path:f}=l,h=l.hostname;return a("port %d and host %s",c,h),t.default.createConnection({port:c,host:h,path:f})};r.default=s}),tU={};$c(tU,{default:()=>rU});var rU,oW=ti(()=>{Me(),je(),Ne(),rU={}}),HP=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=(oW(),qt(tU)),n=e((JB(),qt(f1))),i=e(js()),a=e(eU()),s=(0,i.default)("mqttjs:tls");function o(c){let{host:f,port:h,socksProxy:p,...g}=c;if(p!==void 0){let y=(0,a.default)(f,h,p,{timeout:c.socksTimeout});return(0,t.connect)({...g,socket:y})}return(0,t.connect)(c)}var l=(c,f)=>{f.port=f.port||8883,f.host=f.hostname||f.host||"localhost",n.default.isIP(f.host)===0&&(f.servername=f.host),f.rejectUnauthorized=f.rejectUnauthorized!==!1,delete f.path,s("port %d host %s rejectUnauthorized %b",f.port,f.host,f.rejectUnauthorized);let h=o(f);h.on("secureConnect",()=>{f.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",p)});function p(g){f.rejectUnauthorized&&c.emit("error",g),h.end()}return h.on("error",p),h};r.default=l}),GP=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(en(),qt(Jr)),t=au(),n=c1(),i,a,s;function o(){let p=new t.Transform;return p._write=(g,y,b)=>{i.send({data:g.buffer,success(){b()},fail(v){b(new Error(v))}})},p._flush=g=>{i.close({success(){g()}})},p}function l(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function c(p,g){let y=p.protocol==="wxs"?"wss":"ws",b=`${y}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(b=`${y}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(b=p.transformWsUrl(b,p,g)),b}function f(){i.onOpen(()=>{s.socketReady()}),i.onMessage(p=>{let{data:g}=p;g instanceof ArrayBuffer?g=e.Buffer.from(g):g=e.Buffer.from(g,"utf8"),a.push(g)}),i.onClose(()=>{s.emit("close"),s.end(),s.destroy()}),i.onError(p=>{let g=new Error(p.errMsg);s.destroy(g)})}var h=(p,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let y=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";l(g);let b=c(g,p);i=wx.connectSocket({url:b,protocols:[y]}),a=o(),s=new n.BufferedDuplex(g,a,i),s._destroy=(E,S)=>{i.close({success(){S&&S(E)}})};let v=s.destroy;return s.destroy=(E,S)=>(s.destroy=v,setTimeout(()=>{i.close({fail(){s._destroy(E,S)}})},0),s),f(),s};r.default=h}),KP=He(r=>{Me(),je(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(en(),qt(Jr)),t=au(),n=c1(),i,a,s,o=!1;function l(){let g=new t.Transform;return g._write=(y,b,v)=>{i.sendSocketMessage({data:y.buffer,success(){v()},fail(){v(new Error)}})},g._flush=y=>{i.closeSocket({success(){y()}})},g}function c(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function f(g,y){let b=g.protocol==="alis"?"wss":"ws",v=`${b}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(v=`${b}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(v=g.transformWsUrl(v,g,y)),v}function h(){o||(o=!0,i.onSocketOpen(()=>{s.socketReady()}),i.onSocketMessage(g=>{if(typeof g.data=="string"){let y=e.Buffer.from(g.data,"base64");a.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{if(y.result instanceof ArrayBuffer){a.push(e.Buffer.from(y.result));return}a.push(e.Buffer.from(y.result,"utf-8"))}),y.readAsArrayBuffer(g.data)}}),i.onSocketClose(()=>{s.end(),s.destroy()}),i.onSocketError(g=>{s.destroy(g)}))}var p=(g,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let b=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";c(y);let v=f(y,g);return i=y.my,i.connectSocket({url:v,protocols:b}),a=l(),s=new n.BufferedDuplex(y,a,i),h(),s};r.default=p}),lW=He(r=>{Me(),je(),Ne();var e=r&&r.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=f;var t=e(js()),n=e((aW(),qt(RB))),i=e(Rw()),a=e(K0());typeof Jt?.nextTick!="function"&&(Jt.nextTick=setImmediate);var s=(0,t.default)("mqttjs"),o=null;function l(h){let p;if(h.auth)if(p=h.auth.match(/^(.+):(.+)$/),p){let[,g,y]=p;h.username=g,h.password=y}else h.username=h.auth}function c(h,p){if(s("connecting to an MQTT broker..."),typeof h=="object"&&!p&&(p=h,h=""),p=p||{},h&&typeof h=="string"){let b=n.default.parse(h,!0),v={};if(b.port!=null&&(v.port=Number(b.port)),v.host=b.hostname,v.query=b.query,v.auth=b.auth,v.protocol=b.protocol,v.path=b.path,p={...v,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||p.protocol?.includes("+unix"),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!p.protocol?.startsWith("ws")&&!p.protocol?.startsWith("wx")&&delete p.path,l(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),a.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Jt<"u"&&(p.socksProxy=Jt.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(o||(o={},!a.default&&!p.forceNativeWebSocket?(o.ws=Up().streamBuilder,o.wss=Up().streamBuilder,o.mqtt=$P().default,o.tcp=$P().default,o.ssl=HP().default,o.tls=o.ssl,o.mqtts=HP().default):(o.ws=Up().browserStreamBuilder,o.wss=Up().browserStreamBuilder,o.wx=GP().default,o.wxs=GP().default,o.ali=KP().default,o.alis=KP().default)),!o[p.protocol]){let b=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,E)=>b&&E%2===0?!1:typeof o[v]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function g(b){return p.servers&&((!b._reconnectCount||b._reconnectCount===p.servers.length)&&(b._reconnectCount=0),p.host=p.servers[b._reconnectCount].host,p.port=p.servers[b._reconnectCount].port,p.protocol=p.servers[b._reconnectCount].protocol?p.servers[b._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,b._reconnectCount++),s("calling streambuilder for",p.protocol),o[p.protocol](b,p)}let y=new i.default(g,p);return y.on("error",()=>{}),y}function f(h,p,g=!0){return new Promise((y,b)=>{let v=c(h,p),E={connect:w=>{S(),y(v)},end:()=>{S(),y(v)},error:w=>{S(),v.end(),b(w)}};g===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function S(){Object.keys(E).forEach(w=>{v.off(w,E[w])})}Object.keys(E).forEach(w=>{v.on(w,E[w])})})}r.default=c}),zP=He(r=>{Me(),je(),Ne();var e=r&&r.__createBinding||(Object.create?function(g,y,b,v){v===void 0&&(v=b);var E=Object.getOwnPropertyDescriptor(y,b);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,v,E)}:function(g,y,b,v){v===void 0&&(v=b),g[v]=y[b]}),t=r&&r.__setModuleDefault||(Object.create?function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}:function(g,y){g.default=y}),n=r&&r.__importStar||(function(){var g=function(y){return g=Object.getOwnPropertyNames||function(b){var v=[];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(v[v.length]=E);return v},g(y)};return function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var v=g(y),E=0;E<v.length;E++)v[E]!=="default"&&e(b,y,v[E]);return t(b,y),b}})(),i=r&&r.__exportStar||function(g,y){for(var b in g)b!=="default"&&!Object.prototype.hasOwnProperty.call(y,b)&&e(y,g,b)},a=r&&r.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var s=a(Rw());r.MqttClient=s.default;var o=a(vB());r.DefaultMessageIdProvider=o.default;var l=a(xq());r.UniqueMessageIdProvider=l.default;var c=a(tB());r.Store=c.default;var f=n(lW());r.connect=f.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});var h=a(TB());r.KeepaliveManager=h.default,r.Client=s.default,i(Rw(),r),i(Gc(),r);var p=H0();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),uW=He(r=>{Me(),je(),Ne();var e=r&&r.__createBinding||(Object.create?function(s,o,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(o,l);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(s,c,f)}:function(s,o,l,c){c===void 0&&(c=l),s[c]=o[l]}),t=r&&r.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=r&&r.__importStar||(function(){var s=function(o){return s=Object.getOwnPropertyNames||function(l){var c=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[c.length]=f);return c},s(o)};return function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var c=s(o),f=0;f<c.length;f++)c[f]!=="default"&&e(l,o,c[f]);return t(l,o),l}})(),i=r&&r.__exportStar||function(s,o){for(var l in s)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,s,l)};Object.defineProperty(r,"__esModule",{value:!0});var a=n(zP());r.default=a,i(zP(),r)});const cW=uW();const fW="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",dW="8884",hW="esp32-client-01",pW="Qjawns3445";let $i=null;const dc=[],mW=new Map;function Sg(){if($i)return $i;const r=`wss://${fW}:${dW}/mqtt`;return console.log(` Connecting to HiveMQ Cloud: ${r}`),$i=cW.connect(r,{username:hW,password:pW,clean:!0,reconnectPeriod:3e3,clientId:`tansaeng-web-${Math.random().toString(16).slice(2,10)}`}),$i.setMaxListeners(20),$i.on("connect",()=>{console.log(" MQTT Connected to HiveMQ Cloud"),dc.forEach(e=>e(!0))}),$i.on("error",e=>{console.error(" MQTT Connection Error:",e),dc.forEach(t=>t(!1))}),$i.on("reconnect",()=>{console.log(" MQTT Reconnecting...")}),$i.on("offline",()=>{console.log(" MQTT Offline"),dc.forEach(e=>e(!1))}),$i.on("message",(e,t)=>{const n=mW.get(e);if(n){const i=t.toString();n.forEach(a=>a(i))}}),$i}function gW(r){return dc.push(r),$i&&r($i.connected),()=>{const e=dc.indexOf(r);e>-1&&dc.splice(e,1)}}function YP(r,e){const t=Sg();let n;"power"in e?n=e.power.toUpperCase():n=JSON.stringify(e),t.publish(r,n,{qos:1},i=>{i?console.error(` Failed to publish to ${r}:`,i):console.log(` Published to ${r}:`,n)})}async function Dn(r,e,t){try{return await(await fetch("https://www.tansaeng.com/api/smartfarm/device_control.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({controllerId:r,deviceId:e,command:t})})).json()}catch(n){return console.error("[API Error]",n),{success:!1,message:n instanceof Error?n.message:"Unknown error"}}}function yW({deviceState:r,setDeviceState:e}){const[t,n]=R.useState({}),[i,a]=R.useState(!1),[s,o]=R.useState("manual"),[l,c]=R.useState(qf.reduce((G,j)=>(G[j.controllerId]={enabled:!1,tempMin:18,tempMax:28},G),{})),[f,h]=R.useState({enabled:!1,mode:"manual",timeSlots:[{startTime:"06:00",endTime:"18:00",openMinutes:0,openSeconds:10,closeMinutes:5,closeSeconds:0},{startTime:"18:00",endTime:"06:00",openMinutes:0,openSeconds:10,closeMinutes:10,closeSeconds:0}],useEnvironmentConditions:!1,maxTemperature:30}),[p,g]=R.useState("CLOSE"),[y,b]=R.useState(!1),[v,E]=R.useState(!1),[S,w]=R.useState({}),A=R.useRef({}),[_,I]=R.useState({});R.useEffect(()=>{(async()=>{try{const F=await(await fetch("/api/smartfarm/get_valve_schedule.php")).json();F.success&&F.data&&(h(F.data),console.log("[VALVE] Schedule loaded from server:",F.data))}catch(j){console.error("[VALVE] Failed to load schedule:",j)}finally{E(!0)}})()},[]),R.useEffect(()=>{const j=setTimeout(async()=>{try{await fetch("/api/smartfarm/save_auto_control.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:s==="auto",devices:l})}),console.log("[AUTO] Settings saved to server")}catch(F){console.error("[AUTO] Failed to save settings:",F)}},1e3);return()=>clearTimeout(j)},[s,l]),R.useEffect(()=>{if(!v)return;const j=setTimeout(async()=>{try{await fetch("/api/smartfarm/save_valve_schedule.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),console.log("[VALVE] Schedule saved to server")}catch(F){console.error("[VALVE] Failed to save schedule:",F)}},1e3);return()=>clearTimeout(j)},[f,v]);const[D,P]=R.useState({avgTemperature:null,avgHumidity:null}),k=Yf("fan"),M=Yf("vent"),H=Yf("pump"),N=Yf("skylight"),Q=Yf("sidescreen");R.useEffect(()=>{Sg();const G=gW(j=>{a(j),console.log(`[MQTT] Connection status: ${j?"Connected":"Disconnected"}`)});return()=>{G()}},[]),R.useEffect(()=>{const G=async()=>{try{const Z=await(await fetch("/api/device_status.php")).json();if(Z.success){const ae={};Object.entries(Z.devices).forEach(([ee,ve])=>{ae[ee]=ve.is_online}),n(ae),console.log("[API] ESP32  :",ae)}}catch(F){console.error("[API] Failed to fetch ESP32 status:",F)}};G();const j=setInterval(G,5e3);return()=>clearInterval(j)},[]),R.useEffect(()=>{const G=async()=>{try{const Z=await(await fetch("/api/smartfarm/get_average_values.php")).json();Z.success&&P({avgTemperature:Z.data.avgTemperature,avgHumidity:Z.data.avgHumidity})}catch(F){console.error("Failed to fetch average values:",F)}};G();const j=setInterval(G,3e3);return()=>clearInterval(j)},[]),R.useEffect(()=>{if(s!=="auto")return;const G=D.avgTemperature;G!==null&&qf.forEach(async j=>{const F=l[j.controllerId];F?.enabled&&(G>F.tempMax?((j.controllerId==="ctlr-0001"||j.controllerId==="ctlr-0002")&&(await Dn(j.controllerId,"fan1","ON"),console.log(`[AUTO] ${j.name}  ON (: ${G}C > ${F.tempMax}C)`)),j.controllerId==="ctlr-0012"&&(await Dn("ctlr-0012","windowL","OPEN"),await Dn("ctlr-0012","windowR","OPEN"),console.log(`[AUTO]    (: ${G}C > ${F.tempMax}C)`)),j.controllerId==="ctlr-0021"&&(await Dn("ctlr-0021","sideL","OPEN"),await Dn("ctlr-0021","sideR","OPEN"),console.log(`[AUTO]    (: ${G}C > ${F.tempMax}C)`))):G<F.tempMin&&((j.controllerId==="ctlr-0001"||j.controllerId==="ctlr-0002")&&(await Dn(j.controllerId,"fan1","OFF"),console.log(`[AUTO] ${j.name}  OFF (: ${G}C < ${F.tempMin}C)`)),j.controllerId==="ctlr-0012"&&(await Dn("ctlr-0012","windowL","CLOSE"),await Dn("ctlr-0012","windowR","CLOSE"),console.log(`[AUTO]    (: ${G}C < ${F.tempMin}C)`)),j.controllerId==="ctlr-0021"&&(await Dn("ctlr-0021","sideL","CLOSE"),await Dn("ctlr-0021","sideR","CLOSE"),console.log(`[AUTO]    (: ${G}C < ${F.tempMin}C)`))))})},[D,s,l]),R.useEffect(()=>{if(f.mode==="manual"){const G=Sg(),j="tansaeng/ctlr-0004/valve1/cmd",F=y?"OPEN":"CLOSE";G.publish(j,F,{qos:1}),g(F),console.log(`[VALVE MANUAL] ${F}`)}},[y,f.mode]);const z=async(G,j)=>{const F={...r,[G]:{...r[G],power:j?"on":"off",lastSavedAt:new Date().toISOString()}};e(F);const Z=[...k,...M,...H].find(ae=>ae.id===G);if(Z){const ee=Z.commandTopic.split("/")[2],ve=j?"ON":"OFF",le=await Dn(Z.esp32Id,ee,ve);le.success?console.log(`[API SUCCESS] ${Z.name} - ${ve}`):console.error(`[API ERROR] ${le.message}`)}},V=async(G,j)=>{const F=N.find(Z=>Z.id===G);if(F){console.log(`[SKYLIGHT] ${F.name} - ${j}`);const ae=F.commandTopic.split("/")[2],ee=await Dn(F.esp32Id,ae,j);ee.success?console.log(`[API SUCCESS] ${ee.message}`):console.error(`[API ERROR] ${ee.message}`)}},K=G=>{const j=S[G];if(!j)return;const F=parseInt(j);if(isNaN(F)||F<0||F>100){alert("0~100   .");return}const Z={...r,[G]:{...r[G],targetPercentage:F,lastSavedAt:new Date().toISOString()}};e(Z),console.log(`[SAVE] ${G} - ${F}% `)},Y=async G=>{const j=r[G]?.targetPercentage??0,F=[...N,...Q].find(le=>le.id===G);if(!F)return;A.current[G]&&(clearTimeout(A.current[G]),delete A.current[G]),I({..._,[G]:"running"});const Z=F.esp32Id==="ctlr-0012"?300:120,ae=j/100*Z;console.log(`[EXECUTE] ${F.name} - ${j}% (${ae.toFixed(1)}  )`);const ve=F.commandTopic.split("/")[2];try{j===0?(await Dn(F.esp32Id,ve,"CLOSE"),console.log(`[EXECUTE] ${F.name} -  `),I({..._,[G]:"completed"})):(console.log(`[EXECUTE] ${F.name} - ${ae.toFixed(1)}   `),await Dn(F.esp32Id,ve,"OPEN"),A.current[G]=setTimeout(async()=>{await Dn(F.esp32Id,ve,"STOP"),console.log(`[EXECUTE] ${F.name} - ${j}%  `),delete A.current[G],I(le=>({...le,[G]:"completed"}))},ae*1e3))}catch(le){console.error(`[EXECUTE ERROR] ${F.name}:`,le),I({..._,[G]:"idle"})}},W=Object.values(t).filter(Boolean).length,J=qf.length;return L.jsx("div",{className:"bg-gray-50",children:L.jsxs("div",{className:"max-w-screen-2xl mx-auto p-3",children:[L.jsx("header",{className:"bg-white border-2 border-farm-500 px-4 py-3 rounded-lg mb-3 shadow-md",children:L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"text-xl font-bold mb-1 text-gray-900",children:"  "}),L.jsx("p",{className:"text-xs text-gray-600",children:", ,     "})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 border border-purple-200 px-3 py-1.5 rounded-md",children:[L.jsx("div",{className:`
                  w-2.5 h-2.5 rounded-full
                  ${i?"bg-green-500 animate-pulse":"bg-red-500"}
                `}),L.jsxs("span",{className:"text-xs font-medium text-gray-900",children:["HiveMQ ",i?"":" "]})]}),L.jsxs("div",{className:"flex items-center gap-2 bg-farm-50 border border-farm-200 px-3 py-1.5 rounded-md",children:[L.jsx("div",{className:`
                  w-2.5 h-2.5 rounded-full
                  ${W>0?"bg-farm-500 animate-pulse":"bg-gray-400"}
                `}),L.jsxs("span",{className:"text-xs font-medium text-gray-900",children:["  (",W,"/",J,")"]})]})]})]})}),L.jsxs("section",{className:"mb-3",children:[L.jsx("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg",children:L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:" ESP32   "})}),L.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:L.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-2",children:qf.map(G=>{const j=t[G.controllerId]===!0;return L.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-md border transition-colors ${j?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"}`,children:[L.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${j?"bg-green-500 animate-pulse":"bg-gray-400"}`}),L.jsxs("div",{className:"flex-1 min-w-0",children:[L.jsx("span",{className:"text-xs font-medium text-gray-900 block truncate",children:G.name}),L.jsx("span",{className:"text-xs text-gray-500",children:G.controllerId})]}),L.jsx("span",{className:`text-xs font-medium flex-shrink-0 ${j?"text-green-600":"text-gray-500"}`,children:j?"ON":"OFF"})]},G.id)})})})]}),L.jsxs("section",{className:"mb-3",children:[L.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"   "}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("span",{className:"text-xs text-gray-800 font-medium",children:""}),L.jsx("button",{onClick:()=>o(s==="manual"?"auto":"manual"),className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${s==="auto"?"bg-green-500":"bg-gray-300"}`,children:L.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s==="auto"?"translate-x-7":"translate-x-1"}`})}),L.jsx("span",{className:"text-xs text-gray-800 font-medium",children:""})]})]}),L.jsxs("div",{className:"bg-white shadow-sm rounded-b-lg p-4",children:[L.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3",children:[L.jsxs("div",{className:"p-3 bg-farm-50 rounded-lg border border-farm-200",children:[L.jsx("span",{className:"text-xs text-gray-600",children:" :"}),L.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-900",children:D.avgTemperature!==null?`${D.avgTemperature.toFixed(1)}C`:"N/A"})]}),L.jsxs("div",{className:"p-3 bg-farm-50 rounded-lg border border-farm-200",children:[L.jsx("span",{className:"text-xs text-gray-600",children:" :"}),L.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-900",children:D.avgHumidity!==null?`${D.avgHumidity.toFixed(1)}%`:"N/A"})]})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"ESP32   "}),qf.map(G=>{const j=l[G.controllerId],F=t[G.controllerId]===!0,Z=G.controllerId==="ctlr-0004";return L.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${F?"bg-green-500 animate-pulse":"bg-gray-400"}`}),L.jsx("span",{className:"text-sm font-semibold text-gray-900",children:G.name}),L.jsxs("span",{className:"text-xs text-gray-500",children:["(",G.controllerId,")"]})]}),L.jsx("button",{onClick:()=>c({...l,[G.controllerId]:{...j,enabled:!j.enabled}}),className:`px-4 py-1.5 rounded-md text-xs font-medium transition-colors ${j.enabled?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:j.enabled?" ON":" OFF"})]}),L.jsxs("div",{className:"mb-3",children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1.5 block",children:"  (C)"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",value:j.tempMin,onChange:ae=>c({...l,[G.controllerId]:{...j,tempMin:parseFloat(ae.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"0.5",placeholder:""}),L.jsx("span",{className:"text-xs text-gray-500",children:"~"}),L.jsx("input",{type:"number",value:j.tempMax,onChange:ae=>c({...l,[G.controllerId]:{...j,tempMax:parseFloat(ae.target.value)}}),className:"flex-1 px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-farm-500",step:"0.5",placeholder:""})]})]}),Z&&L.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[L.jsxs("div",{className:"mb-3",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsx("h4",{className:"text-xs font-semibold text-gray-900",children:"  "}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"relative flex items-center",children:L.jsx("div",{className:`w-3 h-3 rounded-full ${p==="OPEN"?"bg-green-500":"bg-red-500"}`,children:L.jsx("div",{className:`absolute inset-0 rounded-full ${p==="OPEN"?"bg-green-500":"bg-red-500"} ${p==="OPEN"?"animate-ping":""} opacity-75`})})}),L.jsx("span",{className:`text-xs font-bold ${p==="OPEN"?"text-green-600":"text-red-600"}`,children:p==="OPEN"?"":""})]})]}),L.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[L.jsx("span",{className:"text-xs font-medium text-gray-900",children:" "}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("span",{className:`text-xs font-medium ${f.mode==="manual"?"text-blue-600":"text-gray-500"}`,children:""}),L.jsx("button",{onClick:()=>{const ae=f.mode==="manual"?"auto":"manual";h({...f,mode:ae}),ae==="auto"&&b(!1)},className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${f.mode==="auto"?"bg-green-500":"bg-gray-400"}`,children:L.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.mode==="auto"?"translate-x-7":"translate-x-1"}`})}),L.jsx("span",{className:`text-xs font-medium ${f.mode==="auto"?"text-green-600":"text-gray-500"}`,children:""})]})]}),f.mode==="manual"&&L.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[L.jsx("span",{className:"text-xs font-medium text-gray-900",children:"  "}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("span",{className:`text-xs font-medium ${y?"text-gray-500":"text-red-600"}`,children:"OFF"}),L.jsx("button",{onClick:()=>b(!y),className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${y?"bg-green-500":"bg-red-400"}`,children:L.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y?"translate-x-7":"translate-x-1"}`})}),L.jsx("span",{className:`text-xs font-medium ${y?"text-green-600":"text-gray-500"}`,children:"ON"})]})]}),f.mode==="auto"&&L.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-green-50 border border-green-200 rounded",children:[L.jsx("span",{className:"text-xs font-medium text-gray-900",children:" "}),L.jsx("button",{onClick:()=>h({...f,enabled:!f.enabled}),className:`relative inline-flex h-6 w-12 items-center rounded-full transition-colors ${f.enabled?"bg-green-500":"bg-gray-400"}`,children:L.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.enabled?"translate-x-7":"translate-x-1"}`})})]})]}),f.mode==="auto"&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[L.jsx("h5",{className:"text-xs font-semibold text-yellow-800 mb-2",children:"  ( 1)"}),L.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:""}),L.jsx("input",{type:"time",value:f.timeSlots[0].startTime,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],startTime:ae.target.value},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:""}),L.jsx("input",{type:"time",value:f.timeSlots[0].endTime,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],endTime:ae.target.value},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[0].openMinutes,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],openMinutes:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[0].openSeconds,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],openSeconds:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0",max:"59"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[0].closeMinutes,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],closeMinutes:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[0].closeSeconds,onChange:ae=>{const ee=[...f.timeSlots];ee[0]={...ee[0],closeSeconds:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0",max:"59"})]})]})]}),L.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[L.jsx("h5",{className:"text-xs font-semibold text-blue-800 mb-2",children:"  ( 2)"}),L.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:""}),L.jsx("input",{type:"time",value:f.timeSlots[1].startTime,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],startTime:ae.target.value},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:""}),L.jsx("input",{type:"time",value:f.timeSlots[1].endTime,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],endTime:ae.target.value},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[1].openMinutes,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],openMinutes:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[1].openSeconds,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],openSeconds:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0",max:"59"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[1].closeMinutes,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],closeMinutes:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:" ()"}),L.jsx("input",{type:"number",value:f.timeSlots[1].closeSeconds,onChange:ae=>{const ee=[...f.timeSlots];ee[1]={...ee[1],closeSeconds:parseInt(ae.target.value)||0},h({...f,timeSlots:ee})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0",max:"59"})]})]})]}),L.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-300 rounded mt-3",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsx("h5",{className:"text-xs font-semibold text-gray-900",children:"   ()"}),L.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[L.jsx("input",{type:"checkbox",checked:f.useEnvironmentConditions,onChange:ae=>h({...f,useEnvironmentConditions:ae.target.checked}),className:"w-3 h-3 accent-farm-500"}),L.jsx("span",{className:"text-xs text-gray-700",children:" "})]})]}),f.useEnvironmentConditions&&L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-gray-700 font-medium mb-1 block",children:"  (C)"}),L.jsx("input",{type:"number",value:f.maxTemperature,onChange:ae=>h({...f,maxTemperature:parseFloat(ae.target.value)||0}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:"0",max:"50",step:"0.5"}),L.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"     "})]}),!f.useEnvironmentConditions&&L.jsx("p",{className:"text-xs text-gray-500 italic",children:"         ."})]}),L.jsxs("div",{className:"mt-4 flex gap-2",children:[L.jsx("button",{onClick:async()=>{try{await fetch("/api/smartfarm/save_valve_schedule.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),alert(" .")}catch{alert(" ")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded hover:bg-blue-600",children:""}),L.jsx("button",{onClick:()=>{h({enabled:!1,mode:"manual",timeSlots:[{startTime:"06:00",endTime:"18:00",openMinutes:0,openSeconds:10,closeMinutes:5,closeSeconds:0},{startTime:"18:00",endTime:"06:00",openMinutes:0,openSeconds:10,closeMinutes:10,closeSeconds:0}],useEnvironmentConditions:!1,maxTemperature:30})},className:"flex-1 px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded hover:bg-gray-600",children:""})]})]})]})]},G.id)})]})]})]}),L.jsxs("section",{className:"mb-3",children:[L.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),L.jsxs("span",{className:"text-xs text-gray-800",children:[" ",k.length,""]})]}),L.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:L.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:k.map(G=>L.jsx(NR,{device:G,power:r[G.id]?.power??"off",lastSavedAt:r[G.id]?.lastSavedAt,onToggle:j=>z(G.id,j)},G.id))})})]}),L.jsxs("section",{className:"mb-3",children:[L.jsxs("header",{className:"bg-amber-400 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"   "}),L.jsxs("span",{className:"text-xs text-gray-800",children:[" ",N.length,""]})]}),L.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:L.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-3",children:N.map(G=>L.jsxs("div",{className:"bg-white border-2 border-amber-200 rounded-lg p-4 shadow-sm",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:G.name}),L.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:G.esp32Id})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:" "}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>V(G.id,"OPEN"),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "}),L.jsx("button",{onClick:()=>V(G.id,"STOP"),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "}),L.jsx("button",{onClick:()=>V(G.id,"CLOSE"),className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "})]})]}),L.jsxs("div",{children:[L.jsxs("div",{className:"flex items-center justify-between mb-2",children:[L.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"  "}),_[G.id]==="running"&&L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full",children:[L.jsx("span",{className:"animate-pulse",children:""})," "]}),_[G.id]==="completed"&&L.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:" "})]}),L.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[L.jsx("input",{type:"number",min:"0",max:"100",value:S[G.id]??r[G.id]?.targetPercentage??0,onChange:j=>w({...S,[G.id]:j.target.value}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"0-100"}),L.jsx("span",{className:"text-sm font-semibold text-gray-900 min-w-[2rem]",children:"%"}),L.jsx("button",{onClick:()=>K(G.id),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded-md transition-colors",children:""})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsxs("div",{className:"flex-1 text-xs text-gray-600",children:[" : ",L.jsxs("span",{className:"font-semibold text-amber-600",children:[r[G.id]?.targetPercentage??0,"%"]})]}),L.jsx("button",{onClick:()=>Y(G.id),className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-semibold rounded-md transition-colors",disabled:_[G.id]==="running",children:""})]})]})]},G.id))})})]}),L.jsxs("section",{className:"mb-3",children:[L.jsxs("header",{className:"bg-blue-400 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"   "}),L.jsxs("span",{className:"text-xs text-gray-800",children:[" ",Q.length,""]})]}),L.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:L.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-3",children:Q.map(G=>L.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 shadow-sm",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:G.name}),L.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:G.esp32Id})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:" "}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>V(G.id,"OPEN"),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "}),L.jsx("button",{onClick:()=>V(G.id,"STOP"),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "}),L.jsx("button",{onClick:()=>V(G.id,"CLOSE"),className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-4 rounded-md transition-colors",children:" "})]})]}),L.jsxs("div",{children:[L.jsxs("div",{className:"flex items-center justify-between mb-2",children:[L.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"  "}),_[G.id]==="running"&&L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full",children:[L.jsx("span",{className:"animate-pulse",children:""})," "]}),_[G.id]==="completed"&&L.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:" "})]}),L.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[L.jsx("input",{type:"number",min:"0",max:"100",value:S[G.id]??r[G.id]?.targetPercentage??0,onChange:j=>w({...S,[G.id]:j.target.value}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0-100"}),L.jsx("span",{className:"text-sm font-semibold text-gray-900 min-w-[2rem]",children:"%"}),L.jsx("button",{onClick:()=>K(G.id),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded-md transition-colors",children:""})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsxs("div",{className:"flex-1 text-xs text-gray-600",children:[" : ",L.jsxs("span",{className:"font-semibold text-blue-600",children:[r[G.id]?.targetPercentage??0,"%"]})]}),L.jsx("button",{onClick:()=>Y(G.id),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold rounded-md transition-colors",disabled:_[G.id]==="running",children:""})]})]})]},G.id))})})]}),L.jsxs("section",{className:"mb-3",children:[L.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[L.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),L.jsxs("span",{className:"text-xs text-gray-800",children:[" ",H.length,""]})]}),L.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:L.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:H.map(G=>L.jsx(NR,{device:G,power:r[G.id]?.power??"off",lastSavedAt:r[G.id]?.lastSavedAt,onToggle:j=>z(G.id,j)},G.id))})})]})]})})}function vW({zones:r,setZones:e}){const t=(s,o)=>{e(l=>l.map(c=>c.id===s?{...c,...o}:c))},n=s=>{if(s.mode==="AUTO"){if(!s.intervalMinutes||!s.spraySeconds){alert("AUTO       .");return}if(s.startTime&&s.endTime&&s.startTime>=s.endTime){alert("     .");return}}YP(`tansaeng/mist/${s.id}/config`,{mode:s.mode,intervalMinutes:s.intervalMinutes,spraySeconds:s.spraySeconds,startTime:s.startTime,endTime:s.endTime,allowNightOperation:s.allowNightOperation}),alert(`${s.name}  .`)},i=s=>{YP(`tansaeng/mist/${s.id}/manual`,{action:"spray"}),alert(`${s.name}    .`)},a=s=>s==="OFF"?{bg:"#f3f4f6",text:"#4b5563"}:s==="MANUAL"?{bg:"#dbeafe",text:"#1e40af"}:{bg:"#d1fae5",text:"#065f46"};return L.jsx("div",{className:"bg-gray-50",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[L.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:"  "}),L.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:" Zone      "})]}),r.map(s=>{const o=a(s.mode);return L.jsxs("div",{className:"bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-200 p-6 mb-6",children:[L.jsxs("div",{className:"flex items-center justify-between mb-4",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-800 m-0",children:s.name}),L.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{background:o.bg,color:o.text},children:s.mode})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),L.jsx("div",{className:"flex gap-4",children:["OFF","MANUAL","AUTO"].map(l=>L.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[L.jsx("input",{type:"radio",name:`mode-${s.id}`,checked:s.mode===l,onChange:()=>t(s.id,{mode:l}),className:"w-4 h-4 accent-farm-500"}),L.jsx("span",{className:"text-gray-700",children:l})]},l))})]}),s.mode==="MANUAL"&&L.jsx("div",{className:"mb-4",children:L.jsx("button",{onClick:()=>i(s),className:"w-full bg-blue-600 hover:bg-blue-700 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:"  "})}),s.mode==="AUTO"&&L.jsxs("div",{children:[L.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),L.jsx("input",{type:"number",min:"1",value:s.intervalMinutes??"",onChange:l=>t(s.id,{intervalMinutes:Number(l.target.value)||null}),placeholder:": 30",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),L.jsx("input",{type:"number",min:"1",value:s.spraySeconds??"",onChange:l=>t(s.id,{spraySeconds:Number(l.target.value)||null}),placeholder:": 10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),L.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),L.jsx("input",{type:"time",value:s.startTime,onChange:l=>t(s.id,{startTime:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),L.jsx("input",{type:"time",value:s.endTime,onChange:l=>t(s.id,{endTime:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[L.jsx("input",{type:"checkbox",checked:s.allowNightOperation,onChange:l=>t(s.id,{allowNightOperation:l.target.checked}),className:"w-4 h-4 accent-farm-500"}),L.jsx("span",{className:"text-gray-700",children:"  "})]})}),L.jsx("button",{onClick:()=>n(s),className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:" "})]})]},s.id)})]})})}function El({label:r,value:e,unit:t}){const n=e!=null;return L.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[L.jsx("dt",{className:"text-sm text-gray-600",children:r}),L.jsx("dd",{className:`text-base font-semibold ${n?"text-gray-800":"text-gray-400"}`,children:n?`${e}${t}`:" "})]})}function nU(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=nU(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function mt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=nU(r))&&(n&&(n+=" "),n+=e);return n}var bW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function d1(r){if(typeof r!="string")return!1;var e=bW;return e.includes(r)}var xW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SW=new Set(xW);function iU(r){return typeof r!="string"?!1:SW.has(r)}function aU(r){return typeof r=="string"&&r.startsWith("data-")}function ja(r){if(typeof r!="object"||r===null)return{};var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(iU(t)||aU(t))&&(e[t]=r[t]);return e}function z0(r){if(r==null)return null;if(R.isValidElement(r)&&typeof r.props=="object"&&r.props!==null){var e=r.props;return ja(e)}return typeof r=="object"&&!Array.isArray(r)?ja(r):null}function Ln(r){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(iU(t)||aU(t)||d1(t))&&(e[t]=r[t]);return e}function EW(r){return r==null?null:R.isValidElement(r)?Ln(r.props):typeof r=="object"&&!Array.isArray(r)?Ln(r):null}var wW=["children","width","height","viewBox","className","style","title","desc"];function b_(){return b_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},b_.apply(null,arguments)}function _W(r,e){if(r==null)return{};var t,n,i=TW(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function TW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var h1=R.forwardRef((r,e)=>{var{children:t,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:c}=r,f=_W(r,wW),h=a||{width:n,height:i,x:0,y:0},p=mt("recharts-surface",s);return R.createElement("svg",b_({},Ln(f),{className:p,width:n,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),R.createElement("title",null,l),R.createElement("desc",null,c),t)}),AW=["children","className"];function x_(){return x_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},x_.apply(null,arguments)}function DW(r,e){if(r==null)return{};var t,n,i=OW(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function OW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Yo=R.forwardRef((r,e)=>{var{children:t,className:n}=r,i=DW(r,AW),a=mt("recharts-layer",n);return R.createElement("g",x_({className:a},Ln(i),{ref:e}),t)}),sU=R.createContext(null),IW=()=>R.useContext(sU);function Zt(r){return function(){return r}}const oU=Math.cos,Eg=Math.sin,ha=Math.sqrt,wg=Math.PI,Y0=2*wg,S_=Math.PI,E_=2*S_,Tl=1e-6,CW=E_-Tl;function lU(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function RW(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return lU;const t=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+n[i]}}class PW{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lU:RW(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,a,s){this._append`C${+e},${+t},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,n,i,a){if(e=+e,t=+t,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-e,c=i-t,f=s-e,h=o-t,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(p>Tl)if(!(Math.abs(h*l-c*f)>Tl)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let g=n-s,y=i-o,b=l*l+c*c,v=g*g+y*y,E=Math.sqrt(b),S=Math.sqrt(p),w=a*Math.tan((S_-Math.acos((b+p-v)/(2*E*S)))/2),A=w/S,_=w/E;Math.abs(A-1)>Tl&&this._append`L${e+A*f},${t+A*h}`,this._append`A${a},${a},0,0,${+(h*g>f*y)},${this._x1=e+_*l},${this._y1=t+_*c}`}}arc(e,t,n,i,a,s){if(e=+e,t=+t,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=e+o,f=t+l,h=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Tl||Math.abs(this._y1-f)>Tl)&&this._append`L${c},${f}`,n&&(p<0&&(p=p%E_+E_),p>CW?this._append`A${n},${n},0,1,${h},${e-o},${t-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=f}`:p>Tl&&this._append`A${n},${n},0,${+(p>=S_)},${h},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function p1(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return r},()=>new PW(e)}function m1(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function uU(r){this._context=r}uU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function q0(r){return new uU(r)}function cU(r){return r[0]}function fU(r){return r[1]}function dU(r,e){var t=Zt(!0),n=null,i=q0,a=null,s=p1(o);r=typeof r=="function"?r:r===void 0?cU:Zt(r),e=typeof e=="function"?e:e===void 0?fU:Zt(e);function o(l){var c,f=(l=m1(l)).length,h,p=!1,g;for(n==null&&(a=i(g=s())),c=0;c<=f;++c)!(c<f&&t(h=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+r(h,c,l),+e(h,c,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(r=typeof l=="function"?l:Zt(+l),o):r},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zt(+l),o):e},o.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Zt(!!l),o):t},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function $p(r,e,t){var n=null,i=Zt(!0),a=null,s=q0,o=null,l=p1(c);r=typeof r=="function"?r:r===void 0?cU:Zt(+r),e=typeof e=="function"?e:Zt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?fU:Zt(+t);function c(h){var p,g,y,b=(h=m1(h)).length,v,E=!1,S,w=new Array(b),A=new Array(b);for(a==null&&(o=s(S=l())),p=0;p<=b;++p){if(!(p<b&&i(v=h[p],p,h))===E)if(E=!E)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=g;--y)o.point(w[y],A[y]);o.lineEnd(),o.areaEnd()}E&&(w[p]=+r(v,p,h),A[p]=+e(v,p,h),o.point(n?+n(v,p,h):w[p],t?+t(v,p,h):A[p]))}if(S)return o=null,S+""||null}function f(){return dU().defined(i).curve(s).context(a)}return c.x=function(h){return arguments.length?(r=typeof h=="function"?h:Zt(+h),n=null,c):r},c.x0=function(h){return arguments.length?(r=typeof h=="function"?h:Zt(+h),c):r},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Zt(+h),c):n},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),t=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),c):e},c.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:Zt(+h),c):t},c.lineX0=c.lineY0=function(){return f().x(r).y(e)},c.lineY1=function(){return f().x(r).y(t)},c.lineX1=function(){return f().x(n).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Zt(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),c):s},c.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),c):a},c}class hU{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function LW(r){return new hU(r,!0)}function kW(r){return new hU(r,!1)}const g1={draw(r,e){const t=ha(e/wg);r.moveTo(t,0),r.arc(0,0,t,0,Y0)}},MW={draw(r,e){const t=ha(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},pU=ha(1/3),NW=pU*2,jW={draw(r,e){const t=ha(e/NW),n=t*pU;r.moveTo(0,-t),r.lineTo(n,0),r.lineTo(0,t),r.lineTo(-n,0),r.closePath()}},FW={draw(r,e){const t=ha(e),n=-t/2;r.rect(n,n,t,t)}},BW=.8908130915292852,mU=Eg(wg/10)/Eg(7*wg/10),UW=Eg(Y0/10)*mU,$W=-oU(Y0/10)*mU,HW={draw(r,e){const t=ha(e*BW),n=UW*t,i=$W*t;r.moveTo(0,-t),r.lineTo(n,i);for(let a=1;a<5;++a){const s=Y0*a/5,o=oU(s),l=Eg(s);r.lineTo(l*t,-o*t),r.lineTo(o*n-l*i,l*n+o*i)}r.closePath()}},ox=ha(3),GW={draw(r,e){const t=-ha(e/(ox*3));r.moveTo(0,t*2),r.lineTo(-ox*t,-t),r.lineTo(ox*t,-t),r.closePath()}},Fi=-.5,Bi=ha(3)/2,w_=1/ha(12),KW=(w_/2+1)*3,zW={draw(r,e){const t=ha(e/KW),n=t/2,i=t*w_,a=n,s=t*w_+t,o=-a,l=s;r.moveTo(n,i),r.lineTo(a,s),r.lineTo(o,l),r.lineTo(Fi*n-Bi*i,Bi*n+Fi*i),r.lineTo(Fi*a-Bi*s,Bi*a+Fi*s),r.lineTo(Fi*o-Bi*l,Bi*o+Fi*l),r.lineTo(Fi*n+Bi*i,Fi*i-Bi*n),r.lineTo(Fi*a+Bi*s,Fi*s-Bi*a),r.lineTo(Fi*o+Bi*l,Fi*l-Bi*o),r.closePath()}};function YW(r,e){let t=null,n=p1(i);r=typeof r=="function"?r:Zt(r||g1),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function i(){let a;if(t||(t=a=n()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(r=typeof a=="function"?a:Zt(a),i):r},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Zt(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function _g(){}function Tg(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function gU(r){this._context=r}gU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function qW(r){return new gU(r)}function yU(r){this._context=r}yU.prototype={areaStart:_g,areaEnd:_g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:Tg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function WW(r){return new yU(r)}function vU(r){this._context=r}vU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 3:this._point=4;default:Tg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function VW(r){return new vU(r)}function bU(r){this._context=r}bU.prototype={areaStart:_g,areaEnd:_g,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function QW(r){return new bU(r)}function qP(r){return r<0?-1:1}function WP(r,e,t){var n=r._x1-r._x0,i=e-r._x1,a=(r._y1-r._y0)/(n||i<0&&-0),s=(t-r._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(qP(a)+qP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function VP(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function lx(r,e,t){var n=r._x0,i=r._y0,a=r._x1,s=r._y1,o=(a-n)/3;r._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*t,a,s)}function Ag(r){this._context=r}Ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lx(this,this._t0,VP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,lx(this,VP(this,t=WP(this,r,e)),t);break;default:lx(this,this._t0,t=WP(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function xU(r){this._context=new SU(r)}(xU.prototype=Object.create(Ag.prototype)).point=function(r,e){Ag.prototype.point.call(this,e,r)};function SU(r){this._context=r}SU.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,n,i,a){this._context.bezierCurveTo(e,r,n,t,a,i)}};function XW(r){return new Ag(r)}function ZW(r){return new xU(r)}function EU(r){this._context=r}EU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var n=QP(r),i=QP(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],r[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function QP(r){var e,t=r.length-1,n,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=r[0]+2*r[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*r[e]+2*r[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(r[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*r[e+1]-i[e+1];return[i,a]}function JW(r){return new EU(r)}function W0(r,e){this._context=r,this._t=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function eV(r){return new W0(r,.5)}function tV(r){return new W0(r,0)}function rV(r){return new W0(r,1)}function Sc(r,e){if((s=r.length)>1)for(var t=1,n,i,a=r[e[0]],s,o=a.length;t<s;++t)for(i=a,a=r[e[t]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function __(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function nV(r,e){return r[e]}function iV(r){const e=[];return e.key=r,e}function aV(){var r=Zt([]),e=__,t=Sc,n=nV;function i(a){var s=Array.from(r.apply(this,arguments),iV),o,l=s.length,c=-1,f;for(const h of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(h,s[o].key,c,a)]).data=h;for(o=0,f=m1(e(s));o<l;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(r=typeof a=="function"?a:Zt(Array.from(a)),i):r},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Zt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?__:typeof a=="function"?a:Zt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Sc,i):t},i}function sV(r,e){if((n=r.length)>0){for(var t,n,i=0,a=r[0].length,s;i<a;++i){for(s=t=0;t<n;++t)s+=r[t][i][1]||0;if(s)for(t=0;t<n;++t)r[t][i][1]/=s}Sc(r,e)}}function oV(r,e){if((i=r.length)>0){for(var t=0,n=r[e[0]],i,a=n.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=r[s][t][1]||0;n[t][1]+=n[t][0]=-o/2}Sc(r,e)}}function lV(r,e){if(!(!((s=r.length)>0)||!((a=(i=r[e[0]]).length)>0))){for(var t=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var f=r[e[o]],h=f[n][1]||0,p=f[n-1][1]||0,g=(h-p)/2,y=0;y<o;++y){var b=r[e[y]],v=b[n][1]||0,E=b[n-1][1]||0;g+=v-E}l+=h,c+=g*h}i[n-1][1]+=i[n-1][0]=t,l&&(t-=c/l)}i[n-1][1]+=i[n-1][0]=t,Sc(r,e)}}var ux={},cx={},XP;function uV(){return XP||(XP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}r.isUnsafeProperty=e})(cx)),cx}var fx={},ZP;function wU(){return ZP||(ZP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}r.isDeepKey=e})(fx)),fx}var dx={},JP;function y1(){return JP||(JP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}r.toKey=e})(dx)),dx}var hx={},px={},eL;function cV(){return eL||(eL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return n==="0"&&Object.is(Number(t),-0)?"-0":n}r.toString=e})(px)),px}var tL;function v1(){return tL||(tL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=cV(),t=y1();function n(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",c="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];c?h==="\\"&&o+1<s?(o++,l+=i[o]):h===c?c="":l+=h:f?h==='"'||h==="'"?c=h:h==="]"?(f=!1,a.push(l),l=""):l+=h:h==="["?(f=!0,l&&(a.push(l),l="")):h==="."?l&&(a.push(l),l=""):l+=h,o++}return l&&a.push(l),a}r.toPath=n})(hx)),hx}var rL;function b1(){return rL||(rL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uV(),t=wU(),n=y1(),i=v1();function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?t.isDeepKey(l)?a(o,i.toPath(l),c):c:f}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const f=o[l];return f===void 0?c:f}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?c:f}}}function s(o,l,c){if(l.length===0)return c;let f=o;for(let h=0;h<l.length;h++){if(f==null||e.isUnsafeProperty(l[h]))return c;f=f[l[h]]}return f===void 0?c:f}r.get=a})(ux)),ux}var mx,nL;function fV(){return nL||(nL=1,mx=b1().get),mx}var dV=fV();const V0=za(dV);var Ki=r=>r===0?0:r>0?1:-1,Fa=r=>typeof r=="number"&&r!=+r,Fs=r=>typeof r=="string"&&r.indexOf("%")===r.length-1,ut=r=>(typeof r=="number"||r instanceof Number)&&!Fa(r),Ba=r=>ut(r)||typeof r=="string",hV=0,wd=r=>{var e=++hV;return"".concat(r||"").concat(e)},qo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(e)&&typeof e!="string")return n;var a;if(Fs(e)){if(t==null)return n;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Fa(a)&&(a=n),i&&t!=null&&a>t&&(a=t),a},_U=r=>{if(!Array.isArray(r))return!1;for(var e=r.length,t={},n=0;n<e;n++)if(!t[r[n]])t[r[n]]=!0;else return!0;return!1};function Qn(r,e,t){return ut(r)&&ut(e)?r+t*(e-r):e}function TU(r,e,t){if(!(!r||!r.length))return r.find(n=>n&&(typeof e=="function"?e(n):V0(n,e))===t)}var Xr=r=>r===null||typeof r>"u",th=r=>Xr(r)?r:"".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));function pV(r){return r!=null}function rh(){}var mV=["type","size","sizeType"];function T_(){return T_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},T_.apply(null,arguments)}function iL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function aL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(t),!0).forEach(function(n){gV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):iL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gV(r,e,t){return(e=yV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yV(r){var e=vV(r,"string");return typeof e=="symbol"?e:e+""}function vV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bV(r,e){if(r==null)return{};var t,n,i=xV(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function xV(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var AU={symbolCircle:g1,symbolCross:MW,symbolDiamond:jW,symbolSquare:FW,symbolStar:HW,symbolTriangle:GW,symbolWye:zW},SV=Math.PI/180,EV=r=>{var e="symbol".concat(th(r));return AU[e]||g1},wV=(r,e,t)=>{if(e==="area")return r;switch(t){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*SV;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},_V=(r,e)=>{AU["symbol".concat(th(r))]=e},x1=r=>{var{type:e="circle",size:t=64,sizeType:n="area"}=r,i=bV(r,mV),a=aL(aL({},i),{},{type:e,size:t,sizeType:n}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var p=EV(s),g=YW().type(p).size(wV(t,n,s)),y=g();if(y!==null)return y},{className:l,cx:c,cy:f}=a,h=Ln(a);return ut(c)&&ut(f)&&ut(t)?R.createElement("path",T_({},h,{className:mt("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(f,")"),d:o()})):null};x1.registerSymbol=_V;var DU=r=>"radius"in r&&"startAngle"in r&&"endAngle"in r,S1=(r,e)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var t=r;if(R.isValidElement(r)&&(t=r.props),typeof t!="object"&&typeof t!="function")return null;var n={};return Object.keys(t).forEach(i=>{d1(i)&&(n[i]=(a=>t[i](t,a)))}),n},TV=(r,e,t)=>n=>(r(e,t,n),null),OU=(r,e,t)=>{if(r===null||typeof r!="object"&&typeof r!="function")return null;var n=null;return Object.keys(r).forEach(i=>{var a=r[i];d1(i)&&typeof a=="function"&&(n||(n={}),n[i]=TV(a,e,t))}),n};function sL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function AV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sL(Object(t),!0).forEach(function(n){DV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function DV(r,e,t){return(e=OV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function OV(r){var e=IV(r,"string");return typeof e=="symbol"?e:e+""}function IV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Sn(r,e){var t=AV({},r),n=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),t);return a}function Dg(){return Dg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Dg.apply(null,arguments)}function oL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function CV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(t),!0).forEach(function(n){RV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function RV(r,e,t){return(e=PV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function PV(r){var e=LV(r,"string");return typeof e=="symbol"?e:e+""}function LV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Hi=32,kV={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function MV(r){var{data:e,iconType:t,inactiveColor:n}=r,i=Hi/2,a=Hi/6,s=Hi/3,o=e.inactive?n:e.color,l=t??e.type;if(l==="none")return null;if(l==="plainline"){var c;return R.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:Hi,y2:i,className:"recharts-legend-icon"})}if(l==="line")return R.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Hi,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return R.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Hi/8,"h").concat(Hi,"v").concat(Hi*3/4,"h").concat(-Hi,"z"),className:"recharts-legend-icon"});if(R.isValidElement(e.legendIcon)){var f=CV({},e);return delete f.legendIcon,R.cloneElement(e.legendIcon,f)}return R.createElement(x1,{fill:o,cx:i,cy:i,size:Hi,sizeType:"diameter",type:l})}function NV(r){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:a,iconType:s}=r,o={x:0,y:0,width:Hi,height:Hi},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,h)=>{var p=f.formatter||i,g=mt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:f.inactive});if(f.type==="none")return null;var y=f.inactive?a:f.color,b=p?p(f.value,f,h):f.value;return R.createElement("li",Dg({className:g,style:l,key:"legend-item-".concat(h)},OU(r,f,h)),R.createElement(h1,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(b," legend icon")},R.createElement(MV,{data:f,iconType:s,inactiveColor:a})),R.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},b))})}var jV=r=>{var e=Sn(r,kV),{payload:t,layout:n,align:i}=e;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return R.createElement("ul",{className:"recharts-default-legend",style:a},R.createElement(NV,Dg({},e,{payload:t})))},gx={},yx={},lL;function FV(){return lL||(lL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){const i=new Map;for(let a=0;a<t.length;a++){const s=t[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}r.uniqBy=e})(yx)),yx}var vx={},uL;function IU(){return uL||(uL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t}r.identity=e})(vx)),vx}var bx={},xx={},Sx={},cL;function BV(){return cL||(cL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}r.isLength=e})(Sx)),Sx}var fL;function E1(){return fL||(fL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=BV();function t(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}r.isArrayLike=t})(xx)),xx}var Ex={},dL;function UV(){return dL||(dL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}r.isObjectLike=e})(Ex)),Ex}var hL;function $V(){return hL||(hL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=E1(),t=UV();function n(i){return t.isObjectLike(i)&&e.isArrayLike(i)}r.isArrayLikeObject=n})(bx)),bx}var _x={},Tx={},pL;function HV(){return pL||(pL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=b1();function t(n){return function(i){return e.get(i,n)}}r.property=t})(Tx)),Tx}var Ax={},Dx={},Ox={},Ix={},mL;function CU(){return mL||(mL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}r.isObject=e})(Ix)),Ix}var Cx={},gL;function RU(){return gL||(gL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}r.isPrimitive=e})(Cx)),Cx}var Rx={},yL;function PU(){return yL||(yL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){return t===n||Number.isNaN(t)&&Number.isNaN(n)}r.eq=e})(Rx)),Rx}var vL;function GV(){return vL||(vL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=CU(),t=RU(),n=PU();function i(f,h,p){return typeof p!="function"?i(f,h,()=>{}):a(f,h,function g(y,b,v,E,S,w){const A=p(y,b,v,E,S,w);return A!==void 0?!!A:a(y,b,g,w)},new Map)}function a(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,p,g);case"function":return Object.keys(h).length>0?a(f,{...h},p,g):n.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:n.eq(f,h)}}function s(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return l(f,h,p,g);if(h instanceof Map)return o(f,h,p,g);if(h instanceof Set)return c(f,h,p,g);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(g?.has(h))return g.get(h)===f;g?.set(h,f);try{for(let b=0;b<y.length;b++){const v=y[b];if(!t.isPrimitive(f)&&!(v in f)||h[v]===void 0&&f[v]!==void 0||h[v]===null&&f[v]!==null||!p(f[v],h[v],v,f,h,g))return!1}return!0}finally{g?.delete(h)}}function o(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,b]of h.entries()){const v=f.get(y);if(p(v,b,y,f,h,g)===!1)return!1}return!0}function l(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let b=0;b<h.length;b++){const v=h[b];let E=!1;for(let S=0;S<f.length;S++){if(y.has(S))continue;const w=f[S];let A=!1;if(p(w,v,b,f,h,g)&&(A=!0),A){y.add(S),E=!0;break}}if(!E)return!1}return!0}function c(f,h,p,g){return h.size===0?!0:f instanceof Set?l([...f],[...h],p,g):!1}r.isMatchWith=i,r.isSetMatch=c})(Ox)),Ox}var bL;function LU(){return bL||(bL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=GV();function t(n,i){return e.isMatchWith(n,i,()=>{})}r.isMatch=t})(Dx)),Dx}var Px={},Lx={},kx={},xL;function KV(){return xL||(xL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(n=>Object.prototype.propertyIsEnumerable.call(t,n))}r.getSymbols=e})(kx)),kx}var Mx={},SL;function kU(){return SL||(SL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.getTag=e})(Mx)),Mx}var Nx={},EL;function MU(){return EL||(EL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",f="[object Array]",h="[object Function]",p="[object ArrayBuffer]",g="[object Object]",y="[object Error]",b="[object DataView]",v="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]",A="[object BigUint64Array]",_="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",P="[object BigInt64Array]",k="[object Float32Array]",M="[object Float64Array]";r.argumentsTag=a,r.arrayBufferTag=p,r.arrayTag=f,r.bigInt64ArrayTag=P,r.bigUint64ArrayTag=A,r.booleanTag=i,r.dataViewTag=b,r.dateTag=o,r.errorTag=y,r.float32ArrayTag=k,r.float64ArrayTag=M,r.functionTag=h,r.int16ArrayTag=I,r.int32ArrayTag=D,r.int8ArrayTag=_,r.mapTag=l,r.numberTag=n,r.objectTag=g,r.regexpTag=e,r.setTag=c,r.stringTag=t,r.symbolTag=s,r.uint16ArrayTag=S,r.uint32ArrayTag=w,r.uint8ArrayTag=v,r.uint8ClampedArrayTag=E})(Nx)),Nx}var jx={},wL;function zV(){return wL||(wL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}r.isTypedArray=e})(jx)),jx}var _L;function NU(){return _L||(_L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=KV(),t=kU(),n=MU(),i=RU(),a=zV();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,p,g=new Map,y=void 0){const b=y?.(f,h,p,g);if(b!==void 0)return b;if(i.isPrimitive(f))return f;if(g.has(f))return g.get(f);if(Array.isArray(f)){const v=new Array(f.length);g.set(f,v);for(let E=0;E<f.length;E++)v[E]=o(f[E],E,p,g,y);return Object.hasOwn(f,"index")&&(v.index=f.index),Object.hasOwn(f,"input")&&(v.input=f.input),v}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const v=new RegExp(f.source,f.flags);return v.lastIndex=f.lastIndex,v}if(f instanceof Map){const v=new Map;g.set(f,v);for(const[E,S]of f)v.set(E,o(S,E,p,g,y));return v}if(f instanceof Set){const v=new Set;g.set(f,v);for(const E of f)v.add(o(E,void 0,p,g,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const v=new(Object.getPrototypeOf(f)).constructor(f.length);g.set(f,v);for(let E=0;E<f.length;E++)v[E]=o(f[E],E,p,g,y);return v}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const v=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return g.set(f,v),l(v,f,p,g,y),v}if(typeof File<"u"&&f instanceof File){const v=new File([f],f.name,{type:f.type});return g.set(f,v),l(v,f,p,g,y),v}if(typeof Blob<"u"&&f instanceof Blob){const v=new Blob([f],{type:f.type});return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof Error){const v=new f.constructor;return g.set(f,v),v.message=f.message,v.name=f.name,v.stack=f.stack,v.cause=f.cause,l(v,f,p,g,y),v}if(f instanceof Boolean){const v=new Boolean(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof Number){const v=new Number(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof String){const v=new String(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(typeof f=="object"&&c(f)){const v=Object.create(Object.getPrototypeOf(f));return g.set(f,v),l(v,f,p,g,y),v}return f}function l(f,h,p=f,g,y){const b=[...Object.keys(h),...e.getSymbols(h)];for(let v=0;v<b.length;v++){const E=b[v],S=Object.getOwnPropertyDescriptor(f,E);(S==null||S.writable)&&(f[E]=o(h[E],E,p,g,y))}}function c(f){switch(t.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}r.cloneDeepWith=s,r.cloneDeepWithImpl=o,r.copyProperties=l})(Lx)),Lx}var TL;function YV(){return TL||(TL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=NU();function t(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}r.cloneDeep=t})(Px)),Px}var AL;function qV(){return AL||(AL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=LU(),t=YV();function n(i){return i=t.cloneDeep(i),a=>e.isMatch(a,i)}r.matches=n})(Ax)),Ax}var Fx={},Bx={},Ux={},DL;function WV(){return DL||(DL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=NU(),t=MU();function n(i,a){return e.cloneDeepWith(i,(s,o,l,c)=>{const f=a?.(s,o,l,c);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case t.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}r.cloneDeepWith=n})(Ux)),Ux}var OL;function VV(){return OL||(OL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=WV();function t(n){return e.cloneDeepWith(n)}r.cloneDeep=t})(Bx)),Bx}var $x={},Hx={},IL;function jU(){return IL||(IL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}r.isIndex=t})(Hx)),Hx}var Gx={},CL;function QV(){return CL||(CL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=kU();function t(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}r.isArguments=t})(Gx)),Gx}var RL;function XV(){return RL||(RL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=wU(),t=jU(),n=QV(),i=v1();function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let f=0;f<l.length;f++){const h=l[f];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&t.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}r.has=a})($x)),$x}var PL;function ZV(){return PL||(PL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=LU(),t=y1(),n=VV(),i=b1(),a=XV();function s(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return l=n.cloneDeep(l),function(c){const f=i.get(c,o);return f===void 0?a.has(c,o):l===void 0?f===void 0:e.isMatch(f,l)}}r.matchesProperty=s})(Fx)),Fx}var LL;function JV(){return LL||(LL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=IU(),t=HV(),n=qV(),i=ZV();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return t.property(s)}}r.iteratee=a})(_x)),_x}var kL;function e9(){return kL||(kL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=FV(),t=IU(),n=$V(),i=JV();function a(s,o=t.identity){return n.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}r.uniqBy=a})(gx)),gx}var Kx,ML;function t9(){return ML||(ML=1,Kx=e9().uniqBy),Kx}var r9=t9();const NL=za(r9);function FU(r,e,t){return e===!0?NL(r,t):typeof e=="function"?NL(r,e):r}var zx={exports:{}},Yx={},qx={exports:{}},Wx={};var jL;function n9(){if(jL)return Wx;jL=1;var r=Fc();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,a=r.useLayoutEffect,s=r.useDebugValue;function o(h,p){var g=p(),y=n({inst:{value:g,getSnapshot:p}}),b=y[0].inst,v=y[1];return a(function(){b.value=g,b.getSnapshot=p,l(b)&&v({inst:b})},[h,g,p]),i(function(){return l(b)&&v({inst:b}),h(function(){l(b)&&v({inst:b})})},[h]),s(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!t(h,g)}catch{return!0}}function c(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return Wx.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:f,Wx}var FL;function i9(){return FL||(FL=1,qx.exports=n9()),qx.exports}var BL;function a9(){if(BL)return Yx;BL=1;var r=Fc(),e=i9();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=r.useRef,s=r.useEffect,o=r.useMemo,l=r.useDebugValue;return Yx.useSyncExternalStoreWithSelector=function(c,f,h,p,g){var y=a(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function E(I){if(!S){if(S=!0,w=I,I=p(I),g!==void 0&&b.hasValue){var D=b.value;if(g(D,I))return A=D}return A=I}if(D=A,n(w,I))return D;var P=p(I);return g!==void 0&&g(D,P)?(w=I,D):(w=I,A=P)}var S=!1,w,A,_=h===void 0?null:h;return[function(){return E(f())},_===null?void 0:function(){return E(_())}]},[f,h,p,g]);var v=i(c,y[0],y[1]);return s(function(){b.hasValue=!0,b.value=v},[v]),l(v),v},Yx}var UL;function s9(){return UL||(UL=1,zx.exports=a9()),zx.exports}var o9=s9(),w1=R.createContext(null),l9=r=>r,Lr=()=>{var r=R.useContext(w1);return r?r.store.dispatch:l9},eg=()=>{},u9=()=>eg,c9=(r,e)=>r===e;function ot(r){var e=R.useContext(w1);return o9.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:u9,e?e.store.getState:eg,e?e.store.getState:eg,e?r:eg,c9)}function f9(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function d9(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function h9(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var $L=r=>Array.isArray(r)?r:[r];function p9(r){const e=Array.isArray(r[0])?r[0]:r;return h9(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function m9(r,e){const t=[],{length:n}=r;for(let i=0;i<n;i++)t.push(r[i].apply(null,e));return t}var g9=class{constructor(r){this.value=r}deref(){return this.value}},y9=typeof WeakRef<"u"?WeakRef:g9,v9=0,HL=1;function Hp(){return{s:v9,v:void 0,o:null,p:null}}function BU(r,e={}){let t=Hp();const{resultEqualityCheck:n}=e;let i,a=0;function s(){let o=t;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const b=y.get(g);b===void 0?(o=Hp(),y.set(g,o)):o=b}else{let y=o.p;y===null&&(o.p=y=new Map);const b=y.get(g);b===void 0?(o=Hp(),y.set(g,o)):o=b}}const c=o;let f;if(o.s===HL)f=o.v;else if(f=r.apply(null,arguments),a++,n){const h=i?.deref?.()??i;h!=null&&n(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new y9(f):f}return c.s=HL,c.v=f,f}return s.clearCache=()=>{t=Hp(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function b9(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,n=(...i)=>{let a=0,s=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),f9(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const f={...t,...l},{memoize:h,memoizeOptions:p=[],argsMemoize:g=BU,argsMemoizeOptions:y=[]}=f,b=$L(p),v=$L(y),E=p9(i),S=h(function(){return a++,c.apply(null,arguments)},...b),w=g(function(){s++;const _=m9(E,arguments);return o=S.apply(null,_),o},...v);return Object.assign(w,{resultFunc:c,memoizedResultFunc:S,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var ke=b9(BU),x9=Object.assign((r,e=ke)=>{d9(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),n=t.map(a=>r[a]);return e(n,(...a)=>a.reduce((s,o,l)=>(s[t[l]]=o,s),{}))},{withTypes:()=>x9}),Vx={},Qx={},Xx={},GL;function S9(){return GL||(GL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const t=(n,i,a)=>{if(n!==i){const s=e(n),o=e(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};r.compareValues=t})(Xx)),Xx}var Zx={},Jx={},KL;function UU(){return KL||(KL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}r.isSymbol=e})(Jx)),Jx}var zL;function E9(){return zL||(zL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=UU(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}r.isKey=i})(Zx)),Zx}var YL;function w9(){return YL||(YL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=S9(),t=E9(),n=v1();function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const c=(g,y)=>{let b=g;for(let v=0;v<y.length&&b!=null;++v)b=b[y[v]];return b},f=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:c(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?c(y,g):typeof y=="object"?y[g]:y,h=s.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||t.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:h.map(y=>f(y,g))})).slice().sort((g,y)=>{for(let b=0;b<h.length;b++){const v=e.compareValues(g.criteria[b],y.criteria[b],o[b]);if(v!==0)return v}return 0}).map(g=>g.original)}r.orderBy=i})(Qx)),Qx}var eS={},qL;function _9(){return qL||(qL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const f=o[c];Array.isArray(f)&&l<a?s(f,l+1):i.push(f)}};return s(t,0),i}r.flatten=e})(eS)),eS}var tS={},WL;function $U(){return WL||(WL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=jU(),t=E1(),n=CU(),i=PU();function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&t.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}r.isIterateeCall=a})(tS)),tS}var VL;function T9(){return VL||(VL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=w9(),t=_9(),n=$U();function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}r.sortBy=i})(Vx)),Vx}var rS,QL;function A9(){return QL||(QL=1,rS=T9().sortBy),rS}var D9=A9();const Q0=za(D9);var HU=r=>r.legend.settings,O9=r=>r.legend.size,I9=r=>r.legend.payload,C9=ke([I9,HU],(r,e)=>{var{itemSorter:t}=e,n=r.flat(1);return t?Q0(n,t):n});function R9(){return ot(C9)}var Gp=1;function GU(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=R.useState({height:0,left:0,top:0,width:0}),n=R.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Gp||Math.abs(s.left-e.left)>Gp||Math.abs(s.top-e.top)>Gp||Math.abs(s.width-e.width)>Gp)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...r]);return[e,n]}function on(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var P9=typeof Symbol=="function"&&Symbol.observable||"@@observable",XL=P9,nS=()=>Math.random().toString(36).substring(7).split("").join("."),L9={INIT:`@@redux/INIT${nS()}`,REPLACE:`@@redux/REPLACE${nS()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nS()}`},Og=L9;function _1(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function KU(r,e,t){if(typeof r!="function")throw new Error(on(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(on(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(on(1));return t(KU)(r,e)}let n=r,i=e,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((v,E)=>{s.set(E,v)}))}function f(){if(l)throw new Error(on(3));return i}function h(v){if(typeof v!="function")throw new Error(on(4));if(l)throw new Error(on(5));let E=!0;c();const S=o++;return s.set(S,v),function(){if(E){if(l)throw new Error(on(6));E=!1,c(),s.delete(S),a=null}}}function p(v){if(!_1(v))throw new Error(on(7));if(typeof v.type>"u")throw new Error(on(8));if(typeof v.type!="string")throw new Error(on(17));if(l)throw new Error(on(9));try{l=!0,i=n(i,v)}finally{l=!1}return(a=s).forEach(S=>{S()}),v}function g(v){if(typeof v!="function")throw new Error(on(10));n=v,p({type:Og.REPLACE})}function y(){const v=h;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(on(11));function S(){const A=E;A.next&&A.next(f())}return S(),{unsubscribe:v(S)}},[XL](){return this}}}return p({type:Og.INIT}),{dispatch:p,subscribe:h,getState:f,replaceReducer:g,[XL]:y}}function k9(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Og.INIT})>"u")throw new Error(on(12));if(typeof t(void 0,{type:Og.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(on(13))})}function zU(r){const e=Object.keys(r),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof r[s]=="function"&&(t[s]=r[s])}const n=Object.keys(t);let i;try{k9(t)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const c={};for(let f=0;f<n.length;f++){const h=n[f],p=t[h],g=s[h],y=p(g,o);if(typeof y>"u")throw o&&o.type,new Error(on(14));c[h]=y,l=l||y!==g}return l=l||n.length!==Object.keys(s).length,l?c:s}}function Ig(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function M9(...r){return e=>(t,n)=>{const i=e(t,n);let a=()=>{throw new Error(on(15))};const s={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},o=r.map(l=>l(s));return a=Ig(...o)(i.dispatch),{...i,dispatch:a}}}function YU(r){return _1(r)&&"type"in r&&typeof r.type=="string"}var qU=Symbol.for("immer-nothing"),ZL=Symbol.for("immer-draftable"),kn=Symbol.for("immer-state");function na(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Ei=Object,Ec=Ei.getPrototypeOf,Cg="constructor",X0="prototype",A_="configurable",Rg="enumerable",tg="writable",_d="value",Bs=r=>!!r&&!!r[kn];function fa(r){return r?WU(r)||Z0(r)||!!r[ZL]||!!r[Cg]?.[ZL]||J0(r)||ey(r):!1}var N9=Ei[X0][Cg].toString(),JL=new WeakMap;function WU(r){if(!r||!T1(r))return!1;const e=Ec(r);if(e===null||e===Ei[X0])return!0;const t=Ei.hasOwnProperty.call(e,Cg)&&e[Cg];if(t===Object)return!0;if(!sc(t))return!1;let n=JL.get(t);return n===void 0&&(n=Function.toString.call(t),JL.set(t,n)),n===N9}function nh(r,e,t=!0){ih(r)===0?(t?Reflect.ownKeys(r):Ei.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function ih(r){const e=r[kn];return e?e.type_:Z0(r)?1:J0(r)?2:ey(r)?3:0}var ek=(r,e,t=ih(r))=>t===2?r.has(e):Ei[X0].hasOwnProperty.call(r,e),D_=(r,e,t=ih(r))=>t===2?r.get(e):r[e],Pg=(r,e,t,n=ih(r))=>{n===2?r.set(e,t):n===3?r.add(t):r[e]=t};function j9(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Z0=Array.isArray,J0=r=>r instanceof Map,ey=r=>r instanceof Set,T1=r=>typeof r=="object",sc=r=>typeof r=="function",iS=r=>typeof r=="boolean",ws=r=>r.copy_||r.base_,A1=r=>r.modified_?r.copy_:r.base_;function O_(r,e){if(J0(r))return new Map(r);if(ey(r))return new Set(r);if(Z0(r))return Array[X0].slice.call(r);const t=WU(r);if(e===!0||e==="class_only"&&!t){const n=Ei.getOwnPropertyDescriptors(r);delete n[kn];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[tg]===!1&&(o[tg]=!0,o[A_]=!0),(o.get||o.set)&&(n[s]={[A_]:!0,[tg]:!0,[Rg]:o[Rg],[_d]:r[s]})}return Ei.create(Ec(r),n)}else{const n=Ec(r);if(n!==null&&t)return{...r};const i=Ei.create(n);return Ei.assign(i,r)}}function D1(r,e=!1){return ty(r)||Bs(r)||!fa(r)||(ih(r)>1&&Ei.defineProperties(r,{set:Kp,add:Kp,clear:Kp,delete:Kp}),Ei.freeze(r),e&&nh(r,(t,n)=>{D1(n,!0)},!1)),r}function F9(){na(2)}var Kp={[_d]:F9};function ty(r){return r===null||!T1(r)?!0:Ei.isFrozen(r)}var Lg="MapSet",I_="Patches",VU={};function wc(r){const e=VU[r];return e||na(0,r),e}var B9=r=>!!VU[r],Td,QU=()=>Td,U9=(r,e)=>({drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:B9(Lg)?wc(Lg):void 0});function tk(r,e){e&&(r.patchPlugin_=wc(I_),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function C_(r){R_(r),r.drafts_.forEach($9),r.drafts_=null}function R_(r){r===Td&&(Td=r.parent_)}var rk=r=>Td=U9(Td,r);function $9(r){const e=r[kn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function nk(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(r!==void 0&&r!==t){t[kn].modified_&&(C_(e),na(4)),fa(r)&&(r=ik(e,r));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(t[kn].base_,r,e)}else r=ik(e,t);return H9(e,r,!0),C_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==qU?r:void 0}function ik(r,e){if(ty(e))return e;const t=e[kn];if(!t)return O1(e,r.handledSet_,r);if(!ry(t,r))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:n}=t;if(n)for(;n.length>0;)n.pop()(r);JU(t,r)}return t.copy_}function H9(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&D1(e,t)}function XU(r){r.finalized_=!0,r.scope_.unfinalizedDrafts_--}var ry=(r,e)=>r.scope_===e,G9=[];function ZU(r,e,t,n){const i=ws(r),a=r.type_;if(n!==void 0&&D_(i,n,a)===e){Pg(i,n,t,a);return}if(!r.draftLocations_){const o=r.draftLocations_=new Map;nh(i,(l,c)=>{if(Bs(c)){const f=o.get(c)||[];f.push(l),o.set(c,f)}})}const s=r.draftLocations_.get(e)??G9;for(const o of s)Pg(i,o,t,a)}function K9(r,e,t){r.callbacks_.push(function(i){const a=e;if(!a||!ry(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=A1(a);ZU(r,a.draft_??a,s,t),JU(a,i)})}function JU(r,e){if(r.modified_&&!r.finalized_&&(r.type_===3||(r.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(r);i&&n.generatePatches_(r,i,e)}XU(r)}}function z9(r,e,t){const{scope_:n}=r;if(Bs(t)){const i=t[kn];ry(i,n)&&i.callbacks_.push(function(){rg(r);const s=A1(i);ZU(r,t,s,e)})}else fa(t)&&r.callbacks_.push(function(){const a=ws(r);D_(a,e,r.type_)===t&&n.drafts_.length>1&&(r.assigned_.get(e)??!1)===!0&&r.copy_&&O1(D_(r.copy_,e,r.type_),n.handledSet_,n)})}function O1(r,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Bs(r)||e.has(r)||!fa(r)||ty(r)||(e.add(r),nh(r,(n,i)=>{if(Bs(i)){const a=i[kn];if(ry(a,t)){const s=A1(a);Pg(r,n,s,r.type_),XU(a)}}else fa(i)&&O1(i,e,t)})),r}function Y9(r,e){const t=Z0(r),n={type_:t?1:0,scope_:e?e.scope_:QU(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=I1;t&&(i=[n],a=Ad);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var I1={get(r,e){if(e===kn)return r;const t=ws(r);if(!ek(t,e,r.type_))return q9(r,t,e);const n=t[e];if(r.finalized_||!fa(n))return n;if(n===aS(r.base_,e)){rg(r);const i=r.type_===1?+e:e,a=L_(r.scope_,n,r,i);return r.copy_[i]=a}return n},has(r,e){return e in ws(r)},ownKeys(r){return Reflect.ownKeys(ws(r))},set(r,e,t){const n=e3(ws(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=aS(ws(r),e),a=i?.[kn];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_.set(e,!1),!0;if(j9(t,i)&&(t!==void 0||ek(r.base_,e,r.type_)))return!0;rg(r),P_(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_.set(e,!0),z9(r,e,t)),!0},deleteProperty(r,e){return rg(r),aS(r.base_,e)!==void 0||e in r.base_?(r.assigned_.set(e,!1),P_(r)):r.assigned_.delete(e),r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=ws(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{[tg]:!0,[A_]:r.type_!==1||e!=="length",[Rg]:n[Rg],[_d]:t[e]}},defineProperty(){na(11)},getPrototypeOf(r){return Ec(r.base_)},setPrototypeOf(){na(12)}},Ad={};nh(I1,(r,e)=>{Ad[r]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}});Ad.deleteProperty=function(r,e){return Ad.set.call(this,r,e,void 0)};Ad.set=function(r,e,t){return I1.set.call(this,r[0],e,t,r[0])};function aS(r,e){const t=r[kn];return(t?ws(t):r)[e]}function q9(r,e,t){const n=e3(e,t);return n?_d in n?n[_d]:n.get?.call(r.draft_):void 0}function e3(r,e){if(!(e in r))return;let t=Ec(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Ec(t)}}function P_(r){r.modified_||(r.modified_=!0,r.parent_&&P_(r.parent_))}function rg(r){r.copy_||(r.assigned_=new Map,r.copy_=O_(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var W9=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,i)=>{if(sc(t)&&!sc(n)){const s=n;n=t;const o=this;return function(c=s,...f){return o.produce(c,h=>n.call(this,h,...f))}}sc(n)||na(6),i!==void 0&&!sc(i)&&na(7);let a;if(fa(t)){const s=rk(this),o=L_(s,t,void 0);let l=!0;try{a=n(o),l=!1}finally{l?C_(s):R_(s)}return tk(s,i),nk(a,s)}else if(!t||!T1(t)){if(a=n(t),a===void 0&&(a=t),a===qU&&(a=void 0),this.autoFreeze_&&D1(a,!0),i){const s=[],o=[];wc(I_).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else na(1,t)},this.produceWithPatches=(t,n)=>{if(sc(t))return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let i,a;return[this.produce(t,n,(o,l)=>{i=o,a=l}),i,a]},iS(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),iS(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),iS(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){fa(e)||na(8),Bs(e)&&(e=la(e));const t=rk(this),n=L_(t,e,void 0);return n[kn].isManual_=!0,R_(t),n}finishDraft(e,t){const n=e&&e[kn];(!n||!n.isManual_)&&na(9);const{scope_:i}=n;return tk(i,t),nk(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=wc(I_).applyPatches_;return Bs(e)?i(e,t):this.produce(e,a=>i(a,t))}};function L_(r,e,t,n){const[i,a]=J0(e)?wc(Lg).proxyMap_(e,t):ey(e)?wc(Lg).proxySet_(e,t):Y9(e,t);return(t?.scope_??QU()).drafts_.push(i),a.callbacks_=t?.callbacks_??[],a.key_=n,t&&n!==void 0?K9(t,a,n):a.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),i}function la(r){return Bs(r)||na(10,r),t3(r)}function t3(r){if(!fa(r)||ty(r))return r;const e=r[kn];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=O_(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=O_(r,!0);return nh(t,(i,a)=>{Pg(t,i,t3(a))},n),e&&(e.finalized_=!1),t}var V9=new W9,r3=V9.produce;function n3(r){return({dispatch:t,getState:n})=>i=>a=>typeof a=="function"?a(t,n,r):i(a)}var Q9=n3(),X9=n3,Z9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ig:Ig.apply(null,arguments)};function Yi(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(wi(0));return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>YU(n)&&n.type===r,t}var i3=class cd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cd.prototype)}static get[Symbol.species](){return cd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cd(...e[0].concat(this)):new cd(...e.concat(this))}};function ak(r){return fa(r)?r3(r,()=>{}):r}function zp(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function J9(r){return typeof r=="boolean"}var e7=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new i3;return t&&(J9(t)?s.push(Q9):s.push(X9(t.extraArgument))),s},a3="RTK_autoBatch",or=()=>r=>({payload:r,meta:{[a3]:!0}}),sk=r=>e=>{setTimeout(e,r)},s3=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,a=!1,s=!1;const o=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:sk(10):r.type==="callback"?r.queueNotification:sk(r.timeout),c=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const h=()=>i&&f(),p=n.subscribe(h);return o.add(f),()=>{p(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[a3],a=!i,a&&(s||(s=!0,l(c))),n.dispatch(f)}finally{i=!0}}})},t7=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new i3(r);return n&&i.push(s3(typeof n=="object"?n:void 0)),i};function r7(r){const e=e7(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(_1(t))o=zU(t);else throw new Error(wi(1));let l;typeof n=="function"?l=n(e):l=e();let c=Ig;i&&(c=Z9({trace:!1,...typeof i=="object"&&i}));const f=M9(...l),h=t7(f);let p=typeof s=="function"?s(h):h();const g=c(...p);return KU(o,a,g)}function o3(r){const e={},t=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(wi(28));if(o in e)throw new Error(wi(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return t.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return r(i),[e,t,n]}function n7(r){return typeof r=="function"}function i7(r,e){let[t,n,i]=o3(e),a;if(n7(r))a=()=>ak(r());else{const o=ak(r);a=()=>o}function s(o=a(),l){let c=[t[l.type],...n.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return c.filter(f=>!!f).length===0&&(c=[i]),c.reduce((f,h)=>{if(h)if(Bs(f)){const g=h(f,l);return g===void 0?f:g}else{if(fa(f))return r3(f,p=>h(p,l));{const p=h(f,l);if(p===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return f},o)}return s.getInitialState=a,s}var a7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",s7=(r=21)=>{let e="",t=r;for(;t--;)e+=a7[Math.random()*64|0];return e},o7=Symbol.for("rtk-slice-createasyncthunk");function l7(r,e){return`${r}/${e}`}function u7({creators:r}={}){const e=r?.asyncThunk?.[o7];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(wi(11));const s=(typeof n.reducers=="function"?n.reducers(f7()):n.reducers)||{},o=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,A){const _=typeof w=="string"?w:w.type;if(!_)throw new Error(wi(12));if(_ in l.sliceCaseReducersByType)throw new Error(wi(13));return l.sliceCaseReducersByType[_]=A,c},addMatcher(w,A){return l.sliceMatchers.push({matcher:w,reducer:A}),c},exposeAction(w,A){return l.actionCreators[w]=A,c},exposeCaseReducer(w,A){return l.sliceCaseReducersByName[w]=A,c}};o.forEach(w=>{const A=s[w],_={reducerName:w,type:l7(i,w),createNotation:typeof n.reducers=="function"};h7(A)?m7(_,A,c,e):d7(_,A,c)});function f(){const[w={},A=[],_=void 0]=typeof n.extraReducers=="function"?o3(n.extraReducers):[n.extraReducers],I={...w,...l.sliceCaseReducersByType};return i7(n.initialState,D=>{for(let P in I)D.addCase(P,I[P]);for(let P of l.sliceMatchers)D.addMatcher(P.matcher,P.reducer);for(let P of A)D.addMatcher(P.matcher,P.reducer);_&&D.addDefaultCase(_)})}const h=w=>w,p=new Map,g=new WeakMap;let y;function b(w,A){return y||(y=f()),y(w,A)}function v(){return y||(y=f()),y.getInitialState()}function E(w,A=!1){function _(D){let P=D[w];return typeof P>"u"&&A&&(P=zp(g,_,v)),P}function I(D=h){const P=zp(p,A,()=>new WeakMap);return zp(P,D,()=>{const k={};for(const[M,H]of Object.entries(n.selectors??{}))k[M]=c7(H,D,()=>zp(g,D,v),A);return k})}return{reducerPath:w,getSelectors:I,get selectors(){return I(_)},selectSlice:_}}const S={name:i,reducer:b,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...E(a),injectInto(w,{reducerPath:A,..._}={}){const I=A??a;return w.inject({reducerPath:I,reducer:b},_),{...S,...E(I,!0)}}};return S}}function c7(r,e,t,n){function i(a,...s){let o=e(a);return typeof o>"u"&&n&&(o=t()),r(o,...s)}return i.unwrapped=r,i}var ri=u7();function f7(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function d7({type:r,reducerName:e,createNotation:t},n,i){let a,s;if("reducer"in n){if(t&&!p7(n))throw new Error(wi(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(r,a).exposeCaseReducer(e,a).exposeAction(e,s?Yi(r,s):Yi(r))}function h7(r){return r._reducerDefinitionType==="asyncThunk"}function p7(r){return r._reducerDefinitionType==="reducerWithPrepare"}function m7({type:r,reducerName:e},t,n,i){if(!i)throw new Error(wi(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:c,options:f}=t,h=i(r,a,f);n.exposeAction(e,h),s&&n.addCase(h.fulfilled,s),o&&n.addCase(h.pending,o),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:s||Yp,pending:o||Yp,rejected:l||Yp,settled:c||Yp})}function Yp(){}var g7="task",l3="listener",u3="completed",C1="cancelled",y7=`task-${C1}`,v7=`task-${u3}`,k_=`${l3}-${C1}`,b7=`${l3}-${u3}`,ny=class{constructor(r){this.code=r,this.message=`${g7} ${C1} (reason: ${r})`}name="TaskAbortError";message},R1=(r,e)=>{if(typeof r!="function")throw new TypeError(wi(32))},kg=()=>{},c3=(r,e=kg)=>(r.catch(e),r),f3=(r,e)=>(r.addEventListener("abort",e,{once:!0}),()=>r.removeEventListener("abort",e)),$l=(r,e)=>{const t=r.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),r.abort(e))},Hl=r=>{if(r.aborted){const{reason:e}=r;throw new ny(e)}};function d3(r,e){let t=kg;return new Promise((n,i)=>{const a=()=>i(new ny(r.reason));if(r.aborted){a();return}t=f3(r,a),e.finally(()=>t()).then(n,i)}).finally(()=>{t=kg})}var x7=async(r,e)=>{try{return await Promise.resolve(),{status:"ok",value:await r()}}catch(t){return{status:t instanceof ny?"cancelled":"rejected",error:t}}finally{e?.()}},Mg=r=>e=>c3(d3(r,e).then(t=>(Hl(r),t))),h3=r=>{const e=Mg(r);return t=>e(new Promise(n=>setTimeout(n,t)))},{assign:hc}=Object,ok={},iy="listenerMiddleware",S7=(r,e)=>{const t=n=>f3(r,()=>$l(n,r.reason));return(n,i)=>{R1(n);const a=new AbortController;t(a);const s=x7(async()=>{Hl(r),Hl(a.signal);const o=await n({pause:Mg(a.signal),delay:h3(a.signal),signal:a.signal});return Hl(a.signal),o},()=>$l(a,v7));return i?.autoJoin&&e.push(s.catch(kg)),{result:Mg(r)(s),cancel(){$l(a,y7)}}}},E7=(r,e)=>{const t=async(n,i)=>{Hl(e);let a=()=>{};const o=[new Promise((l,c)=>{let f=r({predicate:n,effect:(h,p)=>{p.unsubscribe(),l([h,p.getState(),p.getOriginalState()])}});a=()=>{f(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await d3(e,Promise.race(o));return Hl(e),l}finally{a()}};return(n,i)=>c3(t(n,i))},p3=r=>{let{type:e,actionCreator:t,matcher:n,predicate:i,effect:a}=r;if(e)i=Yi(e).match;else if(t)e=t.type,i=t.match;else if(n)i=n;else if(!i)throw new Error(wi(21));return R1(a),{predicate:i,type:e,effect:a}},m3=hc(r=>{const{type:e,predicate:t,effect:n}=p3(r);return{id:s7(),effect:n,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(wi(22))}}},{withTypes:()=>m3}),lk=(r,e)=>{const{type:t,effect:n,predicate:i}=p3(e);return Array.from(r.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===i)&&a.effect===n)},M_=r=>{r.pending.forEach(e=>{$l(e,k_)})},w7=(r,e)=>()=>{for(const t of e.keys())M_(t);r.clear()},uk=(r,e,t)=>{try{r(e,t)}catch(n){setTimeout(()=>{throw n},0)}},g3=hc(Yi(`${iy}/add`),{withTypes:()=>g3}),_7=Yi(`${iy}/removeAll`),y3=hc(Yi(`${iy}/remove`),{withTypes:()=>y3}),T7=(...r)=>{console.error(`${iy}/error`,...r)},ah=(r={})=>{const e=new Map,t=new Map,n=g=>{const y=t.get(g)??0;t.set(g,y+1)},i=g=>{const y=t.get(g)??1;y===1?t.delete(g):t.set(g,y-1)},{extra:a,onError:s=T7}=r;R1(s);const o=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),y=>{g.unsubscribe(),y?.cancelActive&&M_(g)}),l=g=>{const y=lk(e,g)??m3(g);return o(y)};hc(l,{withTypes:()=>l});const c=g=>{const y=lk(e,g);return y&&(y.unsubscribe(),g.cancelActive&&M_(y)),!!y};hc(c,{withTypes:()=>c});const f=async(g,y,b,v)=>{const E=new AbortController,S=E7(l,E.signal),w=[];try{g.pending.add(E),n(g),await Promise.resolve(g.effect(y,hc({},b,{getOriginalState:v,condition:(A,_)=>S(A,_).then(Boolean),take:S,delay:h3(E.signal),pause:Mg(E.signal),extra:a,signal:E.signal,fork:S7(E.signal,w),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((A,_,I)=>{A!==E&&($l(A,k_),I.delete(A))})},cancel:()=>{$l(E,k_),g.pending.delete(E)},throwIfCancelled:()=>{Hl(E.signal)}})))}catch(A){A instanceof ny||uk(s,A,{raisedBy:"effect"})}finally{await Promise.all(w),$l(E,b7),i(g),g.pending.delete(E)}},h=w7(e,t);return{middleware:g=>y=>b=>{if(!YU(b))return y(b);if(g3.match(b))return l(b.payload);if(_7.match(b)){h();return}if(y3.match(b))return c(b.payload);let v=g.getState();const E=()=>{if(v===ok)throw new Error(wi(23));return v};let S;try{if(S=y(b),e.size>0){const w=g.getState(),A=Array.from(e.values());for(const _ of A){let I=!1;try{I=_.predicate(b,w,v)}catch(D){I=!1,uk(s,D,{raisedBy:"predicate"})}I&&f(_,b,g,E)}}}finally{v=ok}return S},startListening:l,stopListening:c,clearListeners:h}};function wi(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var A7={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},v3=ri({name:"chartLayout",initialState:A7,reducers:{setLayout(r,e){r.layoutType=e.payload},setChartSize(r,e){r.width=e.payload.width,r.height=e.payload.height},setMargin(r,e){var t,n,i,a;r.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,r.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,r.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,r.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(r,e){r.scale=e.payload}}}),{setMargin:D7,setLayout:O7,setChartSize:I7,setScale:C7}=v3.actions,R7=v3.reducer;function b3(r,e,t){return Array.isArray(r)&&r&&e+t!==0?r.slice(e,t+1):r}function ck(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function uc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(t),!0).forEach(function(n){P7(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ck(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function P7(r,e,t){return(e=L7(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function L7(r){var e=k7(r,"string");return typeof e=="symbol"?e:e+""}function k7(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function xn(r,e,t){return Xr(r)||Xr(e)?t:Ba(e)?V0(r,e,t):typeof e=="function"?e(r):t}var M7=(r,e,t)=>{if(e&&t){var{width:n,height:i}=t,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ut(r[a]))return uc(uc({},r),{},{[a]:r[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ut(r[s]))return uc(uc({},r),{},{[s]:r[s]+(i||0)})}return r},tl=(r,e)=>r==="horizontal"&&e==="xAxis"||r==="vertical"&&e==="yAxis"||r==="centric"&&e==="angleAxis"||r==="radial"&&e==="radiusAxis",x3=(r,e,t,n)=>{if(n)return r.map(o=>o.coordinate);var i,a,s=r.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(t),s},S3=(r,e,t)=>{if(!r)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:f,ticks:h,niceTicks:p,axisType:g}=r;if(!s)return null;var y=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,b=i==="category"&&s.bandwidth?s.bandwidth()/y:0;if(b=g==="angleAxis"&&a&&a.length>=2?Ki(a[0]-a[1])*2*b:b,h||p){var v=(h||p||[]).map((E,S)=>{var w=n?n.indexOf(E):E;return{coordinate:s(w)+b,value:E,offset:b,index:S}});return v.filter(E=>!Fa(E.coordinate))}return l&&c?c.map((E,S)=>({coordinate:s(E)+b,value:E,index:S,offset:b})):s.ticks&&f!=null?s.ticks(f).map((E,S)=>({coordinate:s(E)+b,value:E,offset:b,index:S})):s.domain().map((E,S)=>({coordinate:s(E)+b,value:n?n[E]:E,index:S,offset:b}))},fk=1e-4,N7=r=>{var e=r.domain();if(!(!e||e.length<=2)){var t=e.length,n=r.range(),i=Math.min(n[0],n[1])-fk,a=Math.max(n[0],n[1])+fk,s=r(e[0]),o=r(e[t-1]);(s<i||s>a||o<i||o>a)&&r.domain([e[0],e[t-1]])}},j7=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,a=0,s=0;s<e;++s){var o=Fa(r[s][t][1])?r[s][t][0]:r[s][t][1];o>=0?(r[s][t][0]=i,r[s][t][1]=i+o,i=r[s][t][1]):(r[s][t][0]=a,r[s][t][1]=a+o,a=r[s][t][1])}},F7=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,a=0;a<e;++a){var s=Fa(r[a][t][1])?r[a][t][0]:r[a][t][1];s>=0?(r[a][t][0]=i,r[a][t][1]=i+s,i=r[a][t][1]):(r[a][t][0]=0,r[a][t][1]=0)}},B7={sign:j7,expand:sV,none:Sc,silhouette:oV,wiggle:lV,positive:F7},U7=(r,e,t)=>{var n=B7[t],i=aV().keys(e).value((a,s)=>Number(xn(a,s,0))).order(__).offset(n);return i(r)};function dk(r){var{axis:e,ticks:t,bandSize:n,entry:i,index:a,dataKey:s}=r;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Xr(i[e.dataKey])){var o=TU(t,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return t[a]?t[a].coordinate+n/2:null}var l=xn(i,Xr(s)?e.dataKey:s);return Xr(l)?null:e.scale(l)}var $7=r=>{var e=r.flat(2).filter(ut);return[Math.min(...e),Math.max(...e)]},H7=r=>[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]],G7=(r,e,t)=>{if(r!=null)return H7(Object.keys(r).reduce((n,i)=>{var a=r[i],{stackedData:s}=a,o=s.reduce((l,c)=>{var f=b3(c,e,t),h=$7(f);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},hk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ng=(r,e,t)=>{if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!t||n>0)return n}if(r&&e&&e.length>=2){for(var i=Q0(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return t?void 0:0};function mk(r){var{tooltipEntrySettings:e,dataKey:t,payload:n,value:i,name:a}=r;return uc(uc({},e),{},{dataKey:t,payload:n,value:i,name:a})}function E3(r,e){if(r)return String(r);if(typeof e=="string")return e}var K7=(r,e)=>{if(e==="horizontal")return r.chartX;if(e==="vertical")return r.chartY},z7=(r,e)=>e==="centric"?r.angle:r.radius,Vs=r=>r.layout.width,Qs=r=>r.layout.height,Y7=r=>r.layout.scale,w3=r=>r.layout.margin,ay=ke(r=>r.cartesianAxis.xAxis,r=>Object.values(r)),sy=ke(r=>r.cartesianAxis.yAxis,r=>Object.values(r)),q7="data-recharts-item-index",W7="data-recharts-item-data-key",sh=60;function gk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(t),!0).forEach(function(n){V7(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function V7(r,e,t){return(e=Q7(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Q7(r){var e=X7(r,"string");return typeof e=="symbol"?e:e+""}function X7(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Z7=r=>r.brush.height;function J7(r){var e=sy(r);return e.reduce((t,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:sh;return t+i}return t},0)}function eQ(r){var e=sy(r);return e.reduce((t,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:sh;return t+i}return t},0)}function tQ(r){var e=ay(r);return e.reduce((t,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?t+n.height:t,0)}function rQ(r){var e=ay(r);return e.reduce((t,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?t+n.height:t,0)}var dn=ke([Vs,Qs,w3,Z7,J7,eQ,tQ,rQ,HU,O9],(r,e,t,n,i,a,s,o,l,c)=>{var f={left:(t.left||0)+i,right:(t.right||0)+a},h={top:(t.top||0)+s,bottom:(t.bottom||0)+o},p=qp(qp({},h),f),g=p.bottom;p.bottom+=n,p=M7(p,l,c);var y=r-p.left-p.right,b=e-p.top-p.bottom;return qp(qp({brushBottom:g},p),{},{width:Math.max(y,0),height:Math.max(b,0)})}),nQ=ke(dn,r=>({x:r.left,y:r.top,width:r.width,height:r.height})),_3=ke(Vs,Qs,(r,e)=>({x:0,y:0,width:r,height:e})),iQ=R.createContext(null),ni=()=>R.useContext(iQ)!=null,oy=r=>r.brush,ly=ke([oy,dn,w3],(r,e,t)=>({height:r.height,x:ut(r.x)?r.x:e.left,y:ut(r.y)?r.y:e.top+e.height+e.brushBottom-(t?.bottom||0),width:ut(r.width)?r.width:e.width})),sS={},oS={},lS={},yk;function aQ(){return yk||(yk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),f=()=>{o!==null&&(t.apply(s,o),s=void 0,o=null)},h=()=>{c&&f(),b()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},n)},y=()=>{p!==null&&(clearTimeout(p),p=null)},b=()=>{y(),s=void 0,o=null},v=()=>{f()},E=function(...S){if(i?.aborted)return;s=this,o=S;const w=p==null;g(),l&&w&&f()};return E.schedule=g,E.cancel=b,E.flush=v,i?.addEventListener("abort",b,{once:!0}),E}r.debounce=e})(lS)),lS}var vk;function sQ(){return vk||(vk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=aQ();function t(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let f,h=null;const p=e.debounce(function(...b){f=n.apply(this,b),h=null},i,{edges:c}),g=function(...b){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(f=n.apply(this,b),h=Date.now(),p.cancel(),p.schedule(),f):(p.apply(this,b),f)},y=()=>(p.flush(),f);return g.cancel=p.cancel,g.flush=y,g}r.debounce=t})(oS)),oS}var bk;function oQ(){return bk||(bk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=sQ();function t(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(n,i,{leading:s,maxWait:i,trailing:o})}r.throttle=t})(sS)),sS}var uS,xk;function lQ(){return xk||(xk=1,uS=oQ().throttle),uS}var uQ=lQ();const cQ=za(uQ);var jg=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>i[s++]))}},T3=(r,e,t)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=t,o=Fs(n)?r:Number(n),l=Fs(i)?e:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},fQ={width:0,height:0,overflow:"visible"},dQ={width:0,overflowX:"visible"},hQ={height:0,overflowY:"visible"},pQ={},mQ=r=>{var{width:e,height:t}=r,n=Fs(e),i=Fs(t);return n&&i?fQ:n?dQ:i?hQ:pQ};function gQ(r){var{width:e,height:t,aspect:n}=r,i=e,a=t;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function Zr(r){return Number.isFinite(r)}function Ua(r){return typeof r=="number"&&r>0&&Number.isFinite(r)}function N_(){return N_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},N_.apply(null,arguments)}function Sk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ek(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(t),!0).forEach(function(n){yQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Sk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yQ(r,e,t){return(e=vQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vQ(r){var e=bQ(r,"string");return typeof e=="symbol"?e:e+""}function bQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var A3=R.createContext({width:-1,height:-1});function xQ(r){return Ua(r.width)&&Ua(r.height)}function D3(r){var{children:e,width:t,height:n}=r,i=R.useMemo(()=>({width:t,height:n}),[t,n]);return xQ(i)?R.createElement(A3.Provider,{value:i},e):null}var P1=()=>R.useContext(A3),SQ=R.forwardRef((r,e)=>{var{aspect:t,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:f=0,id:h,className:p,onResize:g,style:y={}}=r,b=R.useRef(null),v=R.useRef();v.current=g,R.useImperativeHandle(e,()=>b.current);var[E,S]=R.useState({containerWidth:n.width,containerHeight:n.height}),w=R.useCallback((P,k)=>{S(M=>{var H=Math.round(P),N=Math.round(k);return M.containerWidth===H&&M.containerHeight===N?M:{containerWidth:H,containerHeight:N}})},[]);R.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return rh;var P=N=>{var Q,{width:z,height:V}=N[0].contentRect;w(z,V),(Q=v.current)===null||Q===void 0||Q.call(v,z,V)};f>0&&(P=cQ(P,f,{trailing:!0,leading:!1}));var k=new ResizeObserver(P),{width:M,height:H}=b.current.getBoundingClientRect();return w(M,H),k.observe(b.current),()=>{k.disconnect()}},[w,f]);var{containerWidth:A,containerHeight:_}=E;jg(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:I,calculatedHeight:D}=T3(A,_,{width:i,height:a,aspect:t,maxHeight:l});return jg(I!=null&&I>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,D,i,a,s,o,t),R.createElement("div",{id:h?"".concat(h):void 0,className:mt("recharts-responsive-container",p),style:Ek(Ek({},y),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:b},R.createElement("div",{style:mQ({width:i,height:a})},R.createElement(D3,{width:I,height:D},c)))}),wk=R.forwardRef((r,e)=>{var t=P1();if(Ua(t.width)&&Ua(t.height))return r.children;var{width:n,height:i}=gQ({width:r.width,height:r.height,aspect:r.aspect}),{calculatedWidth:a,calculatedHeight:s}=T3(void 0,void 0,{width:n,height:i,aspect:r.aspect,maxHeight:r.maxHeight});return ut(a)&&ut(s)?R.createElement(D3,{width:a,height:s},r.children):R.createElement(SQ,N_({},r,{width:n,height:i,ref:e}))});function O3(r){if(r)return{x:r.x,y:r.y,upperWidth:"upperWidth"in r?r.upperWidth:r.width,lowerWidth:"lowerWidth"in r?r.lowerWidth:r.width,width:r.width,height:r.height}}var uy=()=>{var r,e=ni(),t=ot(nQ),n=ot(ly),i=(r=ot(oy))===null||r===void 0?void 0:r.padding;return!e||!n||!i?t:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},EQ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},I3=()=>{var r;return(r=ot(dn))!==null&&r!==void 0?r:EQ},L1=()=>ot(Vs),k1=()=>ot(Qs),wQ=()=>ot(r=>r.layout.margin),ir=r=>r.layout.layoutType,cy=()=>ot(ir),_Q=()=>{var r=cy();return r!==void 0},fy=r=>{var e=Lr(),t=ni(),{width:n,height:i}=r,a=P1(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),R.useEffect(()=>{!t&&Ua(s)&&Ua(o)&&e(I7({width:s,height:o}))},[e,t,s,o]),null},C3=Symbol.for("immer-nothing"),_k=Symbol.for("immer-draftable"),Ai=Symbol.for("immer-state");function ia(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Dd=Object.getPrototypeOf;function _c(r){return!!r&&!!r[Ai]}function Wl(r){return r?R3(r)||Array.isArray(r)||!!r[_k]||!!r.constructor?.[_k]||oh(r)||hy(r):!1}var TQ=Object.prototype.constructor.toString(),Tk=new WeakMap;function R3(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let n=Tk.get(t);return n===void 0&&(n=Function.toString.call(t),Tk.set(t,n)),n===TQ}function Fg(r,e,t=!0){dy(r)===0?(t?Reflect.ownKeys(r):Object.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function dy(r){const e=r[Ai];return e?e.type_:Array.isArray(r)?1:oh(r)?2:hy(r)?3:0}function j_(r,e){return dy(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function P3(r,e,t){const n=dy(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function AQ(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function oh(r){return r instanceof Map}function hy(r){return r instanceof Set}function Al(r){return r.copy_||r.base_}function F_(r,e){if(oh(r))return new Map(r);if(hy(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=R3(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[Ai];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[s]})}return Object.create(Dd(r),n)}else{const n=Dd(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function M1(r,e=!1){return py(r)||_c(r)||!Wl(r)||(dy(r)>1&&Object.defineProperties(r,{set:Wp,add:Wp,clear:Wp,delete:Wp}),Object.freeze(r),e&&Object.values(r).forEach(t=>M1(t,!0))),r}function DQ(){ia(2)}var Wp={value:DQ};function py(r){return r===null||typeof r!="object"?!0:Object.isFrozen(r)}var OQ={};function Vl(r){const e=OQ[r];return e||ia(0,r),e}var Od;function L3(){return Od}function IQ(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ak(r,e){e&&(Vl("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function B_(r){U_(r),r.drafts_.forEach(CQ),r.drafts_=null}function U_(r){r===Od&&(Od=r.parent_)}function Dk(r){return Od=IQ(Od,r)}function CQ(r){const e=r[Ai];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Ok(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Ai].modified_&&(B_(e),ia(4)),Wl(r)&&(r=Bg(e,r),e.parent_||Ug(e,r)),e.patches_&&Vl("Patches").generateReplacementPatches_(t[Ai].base_,r,e.patches_,e.inversePatches_)):r=Bg(e,t,[]),B_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==C3?r:void 0}function Bg(r,e,t){if(py(e))return e;const n=r.immer_.shouldUseStrictIteration(),i=e[Ai];if(!i)return Fg(e,(a,s)=>Ik(r,i,e,a,s,t),n),e;if(i.scope_!==r)return e;if(!i.modified_)return Ug(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),Fg(s,(l,c)=>Ik(r,i,a,l,c,t,o),n),Ug(r,a,!1),t&&r.patches_&&Vl("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function Ik(r,e,t,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=py(i);if(!(o&&!s)){if(_c(i)){const l=a&&e&&e.type_!==3&&!j_(e.assigned_,n)?a.concat(n):void 0,c=Bg(r,i,l);if(P3(t,n,c),_c(c))r.canAutoFreeze_=!1;else return}else s&&t.add(i);if(Wl(i)&&!o){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;Bg(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(oh(t)?t.has(n):Object.prototype.propertyIsEnumerable.call(t,n))&&Ug(r,i)}}}function Ug(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&M1(e,t)}function RQ(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:L3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=N1;t&&(i=[n],a=Id);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var N1={get(r,e){if(e===Ai)return r;const t=Al(r);if(!j_(t,e))return PQ(r,t,e);const n=t[e];return r.finalized_||!Wl(n)?n:n===cS(r.base_,e)?(fS(r),r.copy_[e]=H_(n,r)):n},has(r,e){return e in Al(r)},ownKeys(r){return Reflect.ownKeys(Al(r))},set(r,e,t){const n=k3(Al(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=cS(Al(r),e),a=i?.[Ai];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(AQ(t,i)&&(t!==void 0||j_(r.base_,e)))return!0;fS(r),$_(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return cS(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,fS(r),$_(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Al(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){ia(11)},getPrototypeOf(r){return Dd(r.base_)},setPrototypeOf(){ia(12)}},Id={};Fg(N1,(r,e)=>{Id[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Id.deleteProperty=function(r,e){return Id.set.call(this,r,e,void 0)};Id.set=function(r,e,t){return N1.set.call(this,r[0],e,t,r[0])};function cS(r,e){const t=r[Ai];return(t?Al(t):r)[e]}function PQ(r,e,t){const n=k3(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function k3(r,e){if(!(e in r))return;let t=Dd(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Dd(t)}}function $_(r){r.modified_||(r.modified_=!0,r.parent_&&$_(r.parent_))}function fS(r){r.copy_||(r.copy_=F_(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var LQ=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(l=a,...c){return s.produce(l,f=>t.call(this,f,...c))}}typeof t!="function"&&ia(6),n!==void 0&&typeof n!="function"&&ia(7);let i;if(Wl(e)){const a=Dk(this),s=H_(e,void 0);let o=!0;try{i=t(s),o=!1}finally{o?B_(a):U_(a)}return Ak(a,n),Ok(i,a)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===C3&&(i=void 0),this.autoFreeze_&&M1(i,!0),n){const a=[],s=[];Vl("Patches").generateReplacementPatches_(e,i,a,s),n(a,s)}return i}else ia(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let n,i;return[this.produce(e,t,(s,o)=>{n=s,i=o}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),typeof r?.useStrictIteration=="boolean"&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Wl(r)||ia(8),_c(r)&&(r=kQ(r));const e=Dk(this),t=H_(r,void 0);return t[Ai].isManual_=!0,U_(e),t}finishDraft(r,e){const t=r&&r[Ai];(!t||!t.isManual_)&&ia(9);const{scope_:n}=t;return Ak(n,e),Ok(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=Vl("Patches").applyPatches_;return _c(r)?n(r,e):this.produce(r,i=>n(i,e))}};function H_(r,e){const t=oh(r)?Vl("MapSet").proxyMap_(r,e):hy(r)?Vl("MapSet").proxySet_(r,e):RQ(r,e);return(e?e.scope_:L3()).drafts_.push(t),t}function kQ(r){return _c(r)||ia(10,r),M3(r)}function M3(r){if(!Wl(r)||py(r))return r;const e=r[Ai];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=F_(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=F_(r,!0);return Fg(t,(i,a)=>{P3(t,i,M3(a))},n),e&&(e.finalized_=!1),t}var MQ=new LQ;MQ.produce;var NQ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},N3=ri({name:"legend",initialState:NQ,reducers:{setLegendSize(r,e){r.size.width=e.payload.width,r.size.height=e.payload.height},setLegendSettings(r,e){r.settings.align=e.payload.align,r.settings.layout=e.payload.layout,r.settings.verticalAlign=e.payload.verticalAlign,r.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(r,e){r.payload.push(e.payload)},prepare:or()},replaceLegendPayload:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).payload.indexOf(t);i>-1&&(r.payload[i]=n)},prepare:or()},removeLegendPayload:{reducer(r,e){var t=la(r).payload.indexOf(e.payload);t>-1&&r.payload.splice(t,1)},prepare:or()}}}),{setLegendSize:Ck,setLegendSettings:jQ,addLegendPayload:FQ,replaceLegendPayload:BQ,removeLegendPayload:UQ}=N3.actions,$Q=N3.reducer,HQ=["contextPayload"];function G_(){return G_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},G_.apply(null,arguments)}function Rk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(t),!0).forEach(function(n){GQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Rk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function GQ(r,e,t){return(e=KQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KQ(r){var e=zQ(r,"string");return typeof e=="symbol"?e:e+""}function zQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function YQ(r,e){if(r==null)return{};var t,n,i=qQ(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function qQ(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function WQ(r){return r.value}function VQ(r){var{contextPayload:e}=r,t=YQ(r,HQ),n=FU(e,r.payloadUniqBy,WQ),i=Tc(Tc({},t),{},{payload:n});return R.isValidElement(r.content)?R.cloneElement(r.content,i):typeof r.content=="function"?R.createElement(r.content,i):R.createElement(jV,i)}function QQ(r,e,t,n,i,a){var{layout:s,align:o,verticalAlign:l}=e,c,f;return(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))&&(o==="center"&&s==="vertical"?c={left:((n||0)-a.width)/2}:c=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))&&(l==="middle"?f={top:((i||0)-a.height)/2}:f=l==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),Tc(Tc({},c),f)}function XQ(r){var e=Lr();return R.useEffect(()=>{e(jQ(r))},[e,r]),null}function ZQ(r){var e=Lr();return R.useEffect(()=>(e(Ck(r)),()=>{e(Ck({width:0,height:0}))}),[e,r]),null}function JQ(r,e,t,n){return r==="vertical"&&ut(e)?{height:e}:r==="horizontal"?{width:t||n}:null}var eX={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function K_(r){var e=Sn(r,eX),t=R9(),n=IW(),i=wQ(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,f]=GU([t]),h=L1(),p=k1();if(h==null||p==null)return null;var g=h-(i?.left||0)-(i?.right||0),y=JQ(e.layout,s,a,g),b=l?o:Tc(Tc({position:"absolute",width:y?.width||a||"auto",height:y?.height||s||"auto"},QQ(o,e,i,h,p,c)),o),v=l??n;if(v==null||t==null)return null;var E=R.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:f},R.createElement(XQ,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&R.createElement(ZQ,{width:c.width,height:c.height}),R.createElement(VQ,G_({},e,y,{margin:i,chartWidth:h,chartHeight:p,contextPayload:t})));return Zd.createPortal(E,v)}K_.displayName="Legend";function z_(){return z_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},z_.apply(null,arguments)}function Pk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(t),!0).forEach(function(n){tX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tX(r,e,t){return(e=rX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rX(r){var e=nX(r,"string");return typeof e=="symbol"?e:e+""}function nX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iX(r){return Array.isArray(r)&&Ba(r[0])&&Ba(r[1])?r.join(" ~ "):r}var aX=r=>{var{separator:e=" : ",contentStyle:t={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:f,labelFormatter:h,accessibilityLayer:p=!1}=r,g=()=>{if(a&&a.length){var _={padding:0,margin:0},I=(o?Q0(a,o):a).map((D,P)=>{if(D.type==="none")return null;var k=D.formatter||s||iX,{value:M,name:H}=D,N=M,Q=H;if(k){var z=k(M,H,D,P,a);if(Array.isArray(z))[N,Q]=z;else if(z!=null)N=z;else return null}var V=dS({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},n);return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:V},Ba(Q)?R.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Ba(Q)?R.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,R.createElement("span",{className:"recharts-tooltip-item-value"},N),R.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:_},I)}return null},y=dS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),b=dS({margin:0},i),v=!Xr(f),E=v?f:"",S=mt("recharts-default-tooltip",l),w=mt("recharts-tooltip-label",c);v&&h&&a!==void 0&&a!==null&&(E=h(f,a));var A=p?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",z_({className:S,style:y},A),R.createElement("p",{className:w,style:b},R.isValidElement(E)?E:"".concat(E)),g())},Wf="recharts-tooltip-wrapper",sX={visibility:"hidden"};function oX(r){var{coordinate:e,translateX:t,translateY:n}=r;return mt(Wf,{["".concat(Wf,"-right")]:ut(t)&&e&&ut(e.x)&&t>=e.x,["".concat(Wf,"-left")]:ut(t)&&e&&ut(e.x)&&t<e.x,["".concat(Wf,"-bottom")]:ut(n)&&e&&ut(e.y)&&n>=e.y,["".concat(Wf,"-top")]:ut(n)&&e&&ut(e.y)&&n<e.y})}function Lk(r){var{allowEscapeViewBox:e,coordinate:t,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=r;if(a&&ut(a[n]))return a[n];var f=t[n]-o-(i>0?i:0),h=t[n]+i;if(e[n])return s[n]?f:h;var p=l[n];if(p==null)return 0;if(s[n]){var g=f,y=p;return g<y?Math.max(h,p):Math.max(f,p)}if(c==null)return 0;var b=h+o,v=p+c;return b>v?Math.max(f,p):Math.max(h,p)}function lX(r){var{translateX:e,translateY:t,useTranslate3d:n}=r;return{transform:n?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function uX(r){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=r,c,f,h;return s.height>0&&s.width>0&&t?(f=Lk({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=Lk({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=lX({translateX:f,translateY:h,useTranslate3d:o})):c=sX,{cssProperties:c,cssClasses:oX({translateX:f,translateY:h,coordinate:t})}}function kk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(t),!0).forEach(function(n){Y_(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Y_(r,e,t){return(e=cX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cX(r){var e=fX(r,"string");return typeof e=="symbol"?e:e+""}function fX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class dX extends R.PureComponent{constructor(){super(...arguments),Y_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Y_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&t!==void 0?t:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:f,reverseDirection:h,useTranslate3d:p,viewBox:g,wrapperStyle:y,lastBoundingBox:b,innerRef:v,hasPortalFromProps:E}=this.props,{cssClasses:S,cssProperties:w}=uX({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:c,position:f,reverseDirection:h,tooltipBox:{height:b.height,width:b.width},useTranslate3d:p,viewBox:g}),A=E?{}:Vp(Vp({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),_=Vp(Vp({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return R.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:_,ref:v},a)}}var j3=()=>{var r;return(r=ot(e=>e.rootProps.accessibilityLayer))!==null&&r!==void 0?r:!0};function q_(){return q_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},q_.apply(null,arguments)}function Mk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Nk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(t),!0).forEach(function(n){hX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function hX(r,e,t){return(e=pX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pX(r){var e=mX(r,"string");return typeof e=="symbol"?e:e+""}function mX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var jk={curveBasisClosed:WW,curveBasisOpen:VW,curveBasis:qW,curveBumpX:LW,curveBumpY:kW,curveLinearClosed:QW,curveLinear:q0,curveMonotoneX:XW,curveMonotoneY:ZW,curveNatural:JW,curveStep:eV,curveStepAfter:rV,curveStepBefore:tV},$g=r=>Zr(r.x)&&Zr(r.y),Fk=r=>r.base!=null&&$g(r.base)&&$g(r),Vf=r=>r.x,Qf=r=>r.y,gX=(r,e)=>{if(typeof r=="function")return r;var t="curve".concat(th(r));return(t==="curveMonotone"||t==="curveBump")&&e?jk["".concat(t).concat(e==="vertical"?"Y":"X")]:jk[t]||q0},yX=r=>{var{type:e="linear",points:t=[],baseLine:n,layout:i,connectNulls:a=!1}=r,s=gX(e,i),o=a?t.filter($g):t,l;if(Array.isArray(n)){var c=t.map((g,y)=>Nk(Nk({},g),{},{base:n[y]}));i==="vertical"?l=$p().y(Qf).x1(Vf).x0(g=>g.base.x):l=$p().x(Vf).y1(Qf).y0(g=>g.base.y);var f=l.defined(Fk).curve(s),h=a?c.filter(Fk):c;return f(h)}i==="vertical"&&ut(n)?l=$p().y(Qf).x1(Vf).x0(n):ut(n)?l=$p().x(Vf).y1(Qf).y0(n):l=dU().x(Vf).y(Qf);var p=l.defined($g).curve(s);return p(o)},F3=r=>{var{className:e,points:t,path:n,pathRef:i}=r;if((!t||!t.length)&&!n)return null;var a=t&&t.length?yX(r):n;return R.createElement("path",q_({},ja(r),S1(r),{className:mt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},vX=["x","y","top","left","width","height","className"];function W_(){return W_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},W_.apply(null,arguments)}function Bk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bX(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(t),!0).forEach(function(n){xX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function xX(r,e,t){return(e=SX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SX(r){var e=EX(r,"string");return typeof e=="symbol"?e:e+""}function EX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function wX(r,e){if(r==null)return{};var t,n,i=_X(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function _X(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var TX=(r,e,t,n,i,a)=>"M".concat(r,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(t),AX=r=>{var{x:e=0,y:t=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=r,l=wX(r,vX),c=bX({x:e,y:t,top:n,left:i,width:a,height:s},l);return!ut(e)||!ut(t)||!ut(a)||!ut(s)||!ut(n)||!ut(i)?null:R.createElement("path",W_({},Ln(c),{className:mt("recharts-cross",o),d:TX(e,t,a,s,n,i)}))};function DX(r,e,t,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-i:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-i,width:r==="horizontal"?n:t.width-1,height:r==="horizontal"?t.height-1:n}}function Uk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function $k(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Uk(Object(t),!0).forEach(function(n){OX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Uk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function OX(r,e,t){return(e=IX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function IX(r){var e=CX(r,"string");return typeof e=="symbol"?e:e+""}function CX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var RX=r=>r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),B3=(r,e,t)=>r.map(n=>"".concat(RX(n)," ").concat(e,"ms ").concat(t)).join(","),PX=(r,e)=>[Object.keys(r),Object.keys(e)].reduce((t,n)=>t.filter(i=>n.includes(i))),Cd=(r,e)=>Object.keys(e).reduce((t,n)=>$k($k({},t),{},{[n]:r(n,e[n])}),{});function Hk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Br(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(t),!0).forEach(function(n){LX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Hk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function LX(r,e,t){return(e=kX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kX(r){var e=MX(r,"string");return typeof e=="symbol"?e:e+""}function MX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Hg=(r,e,t)=>r+(e-r)*t,V_=r=>{var{from:e,to:t}=r;return e!==t},U3=(r,e,t)=>{var n=Cd((i,a)=>{if(V_(a)){var[s,o]=r(a.from,a.to,a.velocity);return Br(Br({},a),{},{from:s,velocity:o})}return a},e);return t<1?Cd((i,a)=>V_(a)?Br(Br({},a),{},{velocity:Hg(a.velocity,n[i].velocity,t),from:Hg(a.from,n[i].from,t)}):a,e):U3(r,n,t-1)};function NX(r,e,t,n,i,a){var s,o=n.reduce((p,g)=>Br(Br({},p),{},{[g]:{from:r[g],velocity:0,to:e[g]}}),{}),l=()=>Cd((p,g)=>g.from,o),c=()=>!Object.values(o).filter(V_).length,f=null,h=p=>{s||(s=p);var g=p-s,y=g/t.dt;o=U3(t,o,y),i(Br(Br(Br({},r),e),l())),s=p,c()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var p;(p=f)===null||p===void 0||p()})}function jX(r,e,t,n,i,a,s){var o=null,l=i.reduce((h,p)=>Br(Br({},h),{},{[p]:[r[p],e[p]]}),{}),c,f=h=>{c||(c=h);var p=(h-c)/n,g=Cd((b,v)=>Hg(...v,t(p)),l);if(a(Br(Br(Br({},r),e),g)),p<1)o=s.setTimeout(f);else{var y=Cd((b,v)=>Hg(...v,t(1)),l);a(Br(Br(Br({},r),e),y))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const FX=(r,e,t,n,i,a)=>{var s=PX(r,e);return t==null?()=>(i(Br(Br({},r),e)),()=>{}):t.isStepper===!0?NX(r,e,t,s,i,a):jX(r,e,t,n,s,i,a)};var Gg=1e-4,$3=(r,e)=>[0,3*r,3*e-6*r,3*r-3*e+1],H3=(r,e)=>r.map((t,n)=>t*e**n).reduce((t,n)=>t+n),Gk=(r,e)=>t=>{var n=$3(r,e);return H3(n,t)},BX=(r,e)=>t=>{var n=$3(r,e),i=[...n.map((a,s)=>a*s).slice(1),0];return H3(i,t)},UX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=t[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return t.length===4?t:[0,0,1,1]},$X=(r,e,t,n)=>{var i=Gk(r,t),a=Gk(e,n),s=BX(r,t),o=c=>c>1?1:c<0?0:c,l=c=>{for(var f=c>1?1:c,h=f,p=0;p<8;++p){var g=i(h)-f,y=s(h);if(Math.abs(g-f)<Gg||y<Gg)return a(h);h=o(h-g/y)}return a(h)};return l.isStepper=!1,l},Kk=function(){return $X(...UX(...arguments))},HX=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,a=(s,o,l)=>{var c=-(s-o)*t,f=l*n,h=l+(c-f)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<Gg&&Math.abs(h)<Gg?[o,0]:[p,h]};return a.isStepper=!0,a.dt=i,a},GX=r=>{if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Kk(r);case"spring":return HX();default:if(r.split("(")[0]==="cubic-bezier")return Kk(r)}return typeof r=="function"?r:null};function KX(r){var e,t=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){i=r.setTimeout(a.bind(null,c),l);return}a(l),i=r.setTimeout(a.bind(null,c));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>r}}class zX{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=t?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function YX(){return KX(new zX)}var qX=R.createContext(YX);function WX(r,e){var t=R.useContext(qX);return R.useMemo(()=>e??t(r),[r,e,t])}var VX=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),lh={devToolsEnabled:!1,isSsr:VX()},QX={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},zk={t:0},hS={t:1};function j1(r){var e=Sn(r,QX),{isActive:t,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=e,f=t==="auto"?!lh.isSsr:t,h=WX(e.animationId,e.animationManager),[p,g]=R.useState(f?zk:hS),y=R.useRef(null);return R.useEffect(()=>{f||g(hS)},[f]),R.useEffect(()=>{if(!f||!n)return rh;var b=FX(zk,hS,GX(a),i,g,h.getTimeoutController()),v=()=>{y.current=b()};return h.start([l,s,v,i,o]),()=>{h.stop(),y.current&&y.current(),o()}},[f,n,i,a,s,l,o,h]),c(p.t)}function F1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=R.useRef(wd(e)),n=R.useRef(r);return n.current!==r&&(t.current=wd(e),n.current=r),t.current}var XX=["radius"],ZX=["radius"];function Yk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(t),!0).forEach(function(n){JX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Yk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function JX(r,e,t){return(e=eZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function eZ(r){var e=tZ(r,"string");return typeof e=="symbol"?e:e+""}function tZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Kg(){return Kg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Kg.apply(null,arguments)}function Wk(r,e){if(r==null)return{};var t,n,i=rZ(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function rZ(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Vk=(r,e,t,n,i)=>{var a=Math.min(Math.abs(t)/2,Math.abs(n)/2),s=n>=0?1:-1,o=t>=0?1:-1,l=n>=0&&t>=0||n<0&&t<0?1:0,c;if(a>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>a?a:i[h];c="M".concat(r,",").concat(e+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(r+o*f[0],",").concat(e)),c+="L ".concat(r+t-o*f[1],",").concat(e),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(r+t,",").concat(e+s*f[1])),c+="L ".concat(r+t,",").concat(e+n-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(r+t-o*f[2],",").concat(e+n)),c+="L ".concat(r+o*f[3],",").concat(e+n),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(r,",").concat(e+n-s*f[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var g=Math.min(a,i);c="M ".concat(r,",").concat(e+s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+o*g,",").concat(e,`
            L `).concat(r+t-o*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+t,",").concat(e+s*g,`
            L `).concat(r+t,",").concat(e+n-s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+t-o*g,",").concat(e+n,`
            L `).concat(r+o*g,",").concat(e+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r,",").concat(e+n-s*g," Z")}else c="M ".concat(r,",").concat(e," h ").concat(t," v ").concat(n," h ").concat(-t," Z");return c},Qk={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},G3=r=>{var e=Sn(r,Qk),t=R.useRef(null),[n,i]=R.useState(-1);R.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var Y=t.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:c,className:f}=e,{animationEasing:h,animationDuration:p,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:b}=e,v=R.useRef(o),E=R.useRef(l),S=R.useRef(a),w=R.useRef(s),A=R.useMemo(()=>({x:a,y:s,width:o,height:l,radius:c}),[a,s,o,l,c]),_=F1(A,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var I=mt("recharts-rectangle",f);if(!b){var D=Ln(e),{radius:P}=D,k=Wk(D,XX);return R.createElement("path",Kg({},k,{radius:typeof c=="number"?c:void 0,className:I,d:Vk(a,s,o,l,c)}))}var M=v.current,H=E.current,N=S.current,Q=w.current,z="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),K=B3(["strokeDasharray"],p,typeof h=="string"?h:Qk.animationEasing);return R.createElement(j1,{animationId:_,key:_,canBegin:n>0,duration:p,easing:h,isActive:b,begin:g},Y=>{var W=Qn(M,o,Y),J=Qn(H,l,Y),G=Qn(N,a,Y),j=Qn(Q,s,Y);t.current&&(v.current=W,E.current=J,S.current=G,w.current=j);var F;y?Y>0?F={transition:K,strokeDasharray:V}:F={strokeDasharray:z}:F={strokeDasharray:V};var Z=Ln(e),{radius:ae}=Z,ee=Wk(Z,ZX);return R.createElement("path",Kg({},ee,{radius:typeof c=="number"?c:void 0,className:I,d:Vk(G,j,W,J,c),ref:t,style:qk(qk({},F),e.style)}))})};function Xk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Zk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xk(Object(t),!0).forEach(function(n){nZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function nZ(r,e,t){return(e=iZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function iZ(r){var e=aZ(r,"string");return typeof e=="symbol"?e:e+""}function aZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var zg=Math.PI/180,sZ=r=>r*180/Math.PI,fn=(r,e,t,n)=>({x:r+Math.cos(-zg*n)*t,y:e+Math.sin(-zg*n)*t}),oZ=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},lZ=(r,e)=>{var{x:t,y:n}=r,{x:i,y:a}=e;return Math.sqrt((t-i)**2+(n-a)**2)},uZ=(r,e)=>{var{x:t,y:n}=r,{cx:i,cy:a}=e,s=lZ({x:t,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(t-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:sZ(l),angleInRadian:l}},cZ=r=>{var{startAngle:e,endAngle:t}=r,n=Math.floor(e/360),i=Math.floor(t/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:t-a*360}},fZ=(r,e)=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),a=Math.floor(n/360),s=Math.min(i,a);return r+s*360},dZ=(r,e)=>{var{chartX:t,chartY:n}=r,{radius:i,angle:a}=uZ({x:t,y:n},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:c}=cZ(e),f=a,h;if(l<=c){for(;f>c;)f-=360;for(;f<l;)f+=360;h=f>=l&&f<=c}else{for(;f>l;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=l}return h?Zk(Zk({},e),{},{radius:i,angle:fZ(f,e)}):null};function K3(r){var{cx:e,cy:t,radius:n,startAngle:i,endAngle:a}=r,s=fn(e,t,n,i),o=fn(e,t,n,a);return{points:[s,o],cx:e,cy:t,radius:n,startAngle:i,endAngle:a}}function Q_(){return Q_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Q_.apply(null,arguments)}var hZ=(r,e)=>{var t=Ki(e-r),n=Math.min(Math.abs(e-r),359.999);return t*n},Qp=r=>{var{cx:e,cy:t,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=r,c=o*(s?1:-1)+n,f=Math.asin(o/c)/zg,h=l?i:i+a*f,p=fn(e,t,c,h),g=fn(e,t,n,h),y=l?i-a*f:i,b=fn(e,t,c*Math.cos(f*zg),y);return{center:p,circleTangency:g,lineTangency:b,theta:f}},z3=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=r,o=hZ(a,s),l=a+o,c=fn(e,t,i,a),f=fn(e,t,i,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var p=fn(e,t,n,a),g=fn(e,t,n,l);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(e,",").concat(t," Z");return h},pZ=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=r,f=Ki(c-l),{circleTangency:h,lineTangency:p,theta:g}=Qp({cx:e,cy:t,radius:i,angle:l,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:y,lineTangency:b,theta:v}=Qp({cx:e,cy:t,radius:i,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:o}),E=o?Math.abs(l-c):Math.abs(l-c)-g-v;if(E<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):z3({cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var S="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:A,theta:_}=Qp({cx:e,cy:t,radius:n,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:I,lineTangency:D,theta:P}=Qp({cx:e,cy:t,radius:n,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-_-P;if(k<0&&a===0)return"".concat(S,"L").concat(e,",").concat(t,"Z");S+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(f>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(e,",").concat(t,"Z");return S},mZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Y3=r=>{var e=Sn(r,mZ),{cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f,className:h}=e;if(a<i||c===f)return null;var p=mt("recharts-sector",h),g=a-i,y=qo(s,g,0,!0),b;return y>0&&Math.abs(c-f)<360?b=pZ({cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(y,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f}):b=z3({cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:f}),R.createElement("path",Q_({},Ln(e),{className:p,d:b}))};function gZ(r,e,t){if(r==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(r==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(DU(e)){if(r==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,l=fn(n,i,a,o),c=fn(n,i,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return K3(e)}}var pS={},mS={},gS={},Jk;function yZ(){return Jk||(Jk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=UU();function t(n){return e.isSymbol(n)?NaN:Number(n)}r.toNumber=t})(gS)),gS}var eM;function vZ(){return eM||(eM=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=yZ();function t(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}r.toFinite=t})(mS)),mS}var tM;function bZ(){return tM||(tM=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=$U(),t=vZ();function n(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=t.toFinite(i),a===void 0?(a=i,i=0):a=t.toFinite(a),s=s===void 0?i<a?1:-1:t.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=s;return l}r.range=n})(pS)),pS}var yS,rM;function xZ(){return rM||(rM=1,yS=bZ().range),yS}var SZ=xZ();const q3=za(SZ);function Ho(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function EZ(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function B1(r){let e,t,n;r.length!==2?(e=Ho,t=(o,l)=>Ho(r(o),l),n=(o,l)=>r(o)-l):(e=r===Ho||r===EZ?r:wZ,t=r,n=r);function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;t(o[h],l)<0?c=h+1:f=h}while(c<f)}return c}function a(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;t(o[h],l)<=0?c=h+1:f=h}while(c<f)}return c}function s(o,l,c=0,f=o.length){const h=i(o,l,c,f-1);return h>c&&n(o[h-1],l)>-n(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function wZ(){return 0}function W3(r){return r===null?NaN:+r}function*_Z(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const TZ=B1(Ho),uh=TZ.right;B1(W3).center;class nM extends Map{constructor(e,t=OZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(iM(this,e))}has(e){return super.has(iM(this,e))}set(e,t){return super.set(AZ(this,e),t)}delete(e){return super.delete(DZ(this,e))}}function iM({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):t}function AZ({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function DZ({_intern:r,_key:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function OZ(r){return r!==null&&typeof r=="object"?r.valueOf():r}function IZ(r=Ho){if(r===Ho)return V3;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const n=r(e,t);return n||n===0?n:(r(t,t)===0)-(r(e,e)===0)}}function V3(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const CZ=Math.sqrt(50),RZ=Math.sqrt(10),PZ=Math.sqrt(2);function Yg(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=CZ?10:a>=RZ?5:a>=PZ?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(r*c),l=Math.round(e*c),o/c<r&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(r/c),l=Math.round(e/c),o*c<r&&++o,l*c>e&&--l),l<o&&.5<=t&&t<2?Yg(r,e,t*2):[o,l,c]}function X_(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,a,s]=n?Yg(e,r,t):Yg(r,e,t);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function Z_(r,e,t){return e=+e,r=+r,t=+t,Yg(r,e,t)[2]}function J_(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?Z_(e,r,t):Z_(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function aM(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function sM(r,e){let t;for(const n of r)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);return t}function Q3(r,e,t=0,n=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),n=Math.floor(Math.min(r.length-1,n)),!(t<=e&&e<=n))return r;for(i=i===void 0?V3:IZ(i);n>t;){if(n-t>600){const l=n-t+1,c=e-t+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(t,Math.floor(e-c*h/l+p)),y=Math.min(n,Math.floor(e+(l-c)*h/l+p));Q3(r,e,g,y,i)}const a=r[e];let s=t,o=n;for(Xf(r,t,e),i(r[n],a)>0&&Xf(r,t,n);s<o;){for(Xf(r,s,o),++s,--o;i(r[s],a)<0;)++s;for(;i(r[o],a)>0;)--o}i(r[t],a)===0?Xf(r,t,o):(++o,Xf(r,o,n)),o<=e&&(t=o+1),e<=o&&(n=o-1)}return r}function Xf(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function LZ(r,e,t){if(r=Float64Array.from(_Z(r)),!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return sM(r);if(e>=1)return aM(r);var n,i=(n-1)*e,a=Math.floor(i),s=aM(Q3(r,a).subarray(0,a+1)),o=sM(r.subarray(a+1));return s+(o-s)*(i-a)}}function kZ(r,e,t=W3){if(!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(r[0],0,r);if(e>=1)return+t(r[n-1],n-1,r);var n,i=(n-1)*e,a=Math.floor(i),s=+t(r[a],a,r),o=+t(r[a+1],a+1,r);return s+(o-s)*(i-a)}}function MZ(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,a=new Array(i);++n<i;)a[n]=r+n*t;return a}function Qi(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Xs(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eT=Symbol("implicit");function U1(){var r=new nM,e=[],t=[],n=eT;function i(a){let s=r.get(a);if(s===void 0){if(n!==eT)return n;r.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],r=new nM;for(const s of a)r.has(s)||r.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return U1(e,t).unknown(n)},Qi.apply(i,arguments),i}function $1(){var r=U1().unknown(void 0),e=r.domain,t=r.range,n=0,i=1,a,s,o=!1,l=0,c=0,f=.5;delete r.unknown;function h(){var p=e().length,g=i<n,y=g?i:n,b=g?n:i;a=(b-y)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),y+=(b-y-a*(p-l))*f,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var v=MZ(p).map(function(E){return y+a*E});return t(g?v.reverse():v)}return r.domain=function(p){return arguments.length?(e(p),h()):e()},r.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,h()):[n,i]},r.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,h()},r.bandwidth=function(){return s},r.step=function(){return a},r.round=function(p){return arguments.length?(o=!!p,h()):o},r.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),h()):l},r.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),h()):l},r.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},r.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),h()):f},r.copy=function(){return $1(e(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},Qi.apply(h(),arguments)}function X3(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return X3(e())},r}function NZ(){return X3($1.apply(null,arguments).paddingInner(1))}function H1(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Z3(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function ch(){}var Rd=.7,qg=1/Rd,pc="\\s*([+-]?\\d+)\\s*",Pd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jZ=/^#([0-9a-f]{3,8})$/,FZ=new RegExp(`^rgb\\(${pc},${pc},${pc}\\)$`),BZ=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),UZ=new RegExp(`^rgba\\(${pc},${pc},${pc},${Pd}\\)$`),$Z=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${Pd}\\)$`),HZ=new RegExp(`^hsl\\(${Pd},${Ma},${Ma}\\)$`),GZ=new RegExp(`^hsla\\(${Pd},${Ma},${Ma},${Pd}\\)$`),oM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H1(ch,Ld,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:lM,formatHex:lM,formatHex8:KZ,formatHsl:zZ,formatRgb:uM,toString:uM});function lM(){return this.rgb().formatHex()}function KZ(){return this.rgb().formatHex8()}function zZ(){return J3(this).formatHsl()}function uM(){return this.rgb().formatRgb()}function Ld(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=jZ.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?cM(e):t===3?new Zn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Xp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Xp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=FZ.exec(r))?new Zn(e[1],e[2],e[3],1):(e=BZ.exec(r))?new Zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=UZ.exec(r))?Xp(e[1],e[2],e[3],e[4]):(e=$Z.exec(r))?Xp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=HZ.exec(r))?hM(e[1],e[2]/100,e[3]/100,1):(e=GZ.exec(r))?hM(e[1],e[2]/100,e[3]/100,e[4]):oM.hasOwnProperty(r)?cM(oM[r]):r==="transparent"?new Zn(NaN,NaN,NaN,0):null}function cM(r){return new Zn(r>>16&255,r>>8&255,r&255,1)}function Xp(r,e,t,n){return n<=0&&(r=e=t=NaN),new Zn(r,e,t,n)}function YZ(r){return r instanceof ch||(r=Ld(r)),r?(r=r.rgb(),new Zn(r.r,r.g,r.b,r.opacity)):new Zn}function tT(r,e,t,n){return arguments.length===1?YZ(r):new Zn(r,e,t,n??1)}function Zn(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}H1(Zn,tT,Z3(ch,{brighter(r){return r=r==null?qg:Math.pow(qg,r),new Zn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Rd:Math.pow(Rd,r),new Zn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Zn(Gl(this.r),Gl(this.g),Gl(this.b),Wg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fM,formatHex:fM,formatHex8:qZ,formatRgb:dM,toString:dM}));function fM(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}`}function qZ(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}${kl((isNaN(this.opacity)?1:this.opacity)*255)}`}function dM(){const r=Wg(this.opacity);return`${r===1?"rgb(":"rgba("}${Gl(this.r)}, ${Gl(this.g)}, ${Gl(this.b)}${r===1?")":`, ${r})`}`}function Wg(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Gl(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function kl(r){return r=Gl(r),(r<16?"0":"")+r.toString(16)}function hM(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new aa(r,e,t,n)}function J3(r){if(r instanceof aa)return new aa(r.h,r.s,r.l,r.opacity);if(r instanceof ch||(r=Ld(r)),!r)return new aa;if(r instanceof aa)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(t-n)/o+(t<n)*6:t===a?s=(n-e)/o+2:s=(e-t)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new aa(s,o,l,r.opacity)}function WZ(r,e,t,n){return arguments.length===1?J3(r):new aa(r,e,t,n??1)}function aa(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}H1(aa,WZ,Z3(ch,{brighter(r){return r=r==null?qg:Math.pow(qg,r),new aa(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Rd:Math.pow(Rd,r),new aa(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Zn(vS(r>=240?r-240:r+120,i,n),vS(r,i,n),vS(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new aa(pM(this.h),Zp(this.s),Zp(this.l),Wg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Wg(this.opacity);return`${r===1?"hsl(":"hsla("}${pM(this.h)}, ${Zp(this.s)*100}%, ${Zp(this.l)*100}%${r===1?")":`, ${r})`}`}}));function pM(r){return r=(r||0)%360,r<0?r+360:r}function Zp(r){return Math.max(0,Math.min(1,r||0))}function vS(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const G1=r=>()=>r;function VZ(r,e){return function(t){return r+t*e}}function QZ(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function XZ(r){return(r=+r)==1?e$:function(e,t){return t-e?QZ(e,t,r):G1(isNaN(e)?t:e)}}function e$(r,e){var t=e-r;return t?VZ(r,t):G1(isNaN(r)?e:r)}const mM=(function r(e){var t=XZ(e);function n(i,a){var s=t((i=tT(i)).r,(a=tT(a)).r),o=t(i.g,a.g),l=t(i.b,a.b),c=e$(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return n.gamma=r,n})(1);function ZZ(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function JZ(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function eJ(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),s;for(s=0;s<n;++s)i[s]=zc(r[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function tJ(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function Vg(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function rJ(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=zc(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var rT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bS=new RegExp(rT.source,"g");function nJ(r){return function(){return r}}function iJ(r){return function(e){return r(e)+""}}function aJ(r,e){var t=rT.lastIndex=bS.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(r=r+"",e=e+"";(n=rT.exec(r))&&(i=bS.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Vg(n,i)})),t=bS.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?iJ(l[0].x):nJ(e):(e=l.length,function(c){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(c);return o.join("")})}function zc(r,e){var t=typeof e,n;return e==null||t==="boolean"?G1(e):(t==="number"?Vg:t==="string"?(n=Ld(e))?(e=n,mM):aJ:e instanceof Ld?mM:e instanceof Date?tJ:JZ(e)?ZZ:Array.isArray(e)?eJ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?rJ:Vg)(r,e)}function K1(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function sJ(r,e){e===void 0&&(e=r,r=zc);for(var t=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);t<n;)a[t]=r(i,i=e[++t]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function oJ(r){return function(){return r}}function Qg(r){return+r}var gM=[0,1];function In(r){return r}function nT(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:oJ(isNaN(e)?NaN:.5)}function lJ(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function uJ(r,e,t){var n=r[0],i=r[1],a=e[0],s=e[1];return i<n?(n=nT(i,n),a=t(s,a)):(n=nT(n,i),a=t(a,s)),function(o){return a(n(o))}}function cJ(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=nT(r[s],r[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var l=uh(r,o,1,n)-1;return a[l](i[l](o))}}function fh(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function my(){var r=gM,e=gM,t=zc,n,i,a,s=In,o,l,c;function f(){var p=Math.min(r.length,e.length);return s!==In&&(s=lJ(r[0],r[p-1])),o=p>2?cJ:uJ,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(r.map(n),e,t)))(n(s(p)))}return h.invert=function(p){return s(i((c||(c=o(e,r.map(n),Vg)))(p)))},h.domain=function(p){return arguments.length?(r=Array.from(p,Qg),f()):r.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),t=K1,f()},h.clamp=function(p){return arguments.length?(s=p?!0:In,f()):s!==In},h.interpolate=function(p){return arguments.length?(t=p,f()):t},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,g){return n=p,i=g,f()}}function z1(){return my()(In,In)}function fJ(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Xg(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function Ac(r){return r=Xg(Math.abs(r)),r?r[1]:NaN}function dJ(r,e){return function(t,n){for(var i=t.length,a=[],s=0,o=r[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(t.substring(i-=o,i+o)),!((l+=o+1)>n));)o=r[s=(s+1)%r.length];return a.reverse().join(e)}}function hJ(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var pJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kd(r){if(!(e=pJ.exec(r)))throw new Error("invalid format: "+r);var e;return new Y1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kd.prototype=Y1.prototype;function Y1(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Y1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mJ(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var t$;function gJ(r,e){var t=Xg(r,e);if(!t)return r+"";var n=t[0],i=t[1],a=i-(t$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Xg(r,Math.max(0,e+a-1))[0]}function yM(r,e){var t=Xg(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const vM={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:fJ,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>yM(r*100,e),r:yM,s:gJ,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function bM(r){return r}var xM=Array.prototype.map,SM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yJ(r){var e=r.grouping===void 0||r.thousands===void 0?bM:dJ(xM.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?bM:hJ(xM.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"":r.minus+"",l=r.nan===void 0?"NaN":r.nan+"";function c(h){h=kd(h);var p=h.fill,g=h.align,y=h.sign,b=h.symbol,v=h.zero,E=h.width,S=h.comma,w=h.precision,A=h.trim,_=h.type;_==="n"?(S=!0,_="g"):vM[_]||(w===void 0&&(w=12),A=!0,_="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var I=b==="$"?t:b==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",D=b==="$"?n:/[%p]/.test(_)?s:"",P=vM[_],k=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(H){var N=I,Q=D,z,V,K;if(_==="c")Q=P(H)+Q,H="";else{H=+H;var Y=H<0||1/H<0;if(H=isNaN(H)?l:P(Math.abs(H),w),A&&(H=mJ(H)),Y&&+H==0&&y!=="+"&&(Y=!1),N=(Y?y==="("?y:o:y==="-"||y==="("?"":y)+N,Q=(_==="s"?SM[8+t$/3]:"")+Q+(Y&&y==="("?")":""),k){for(z=-1,V=H.length;++z<V;)if(K=H.charCodeAt(z),48>K||K>57){Q=(K===46?i+H.slice(z+1):H.slice(z))+Q,H=H.slice(0,z);break}}}S&&!v&&(H=e(H,1/0));var W=N.length+H.length+Q.length,J=W<E?new Array(E-W+1).join(p):"";switch(S&&v&&(H=e(J+H,J.length?E-Q.length:1/0),J=""),g){case"<":H=N+H+Q+J;break;case"=":H=N+J+H+Q;break;case"^":H=J.slice(0,W=J.length>>1)+N+H+Q+J.slice(W);break;default:H=J+N+H+Q;break}return a(H)}return M.toString=function(){return h+""},M}function f(h,p){var g=c((h=kd(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Ac(p)/3)))*3,b=Math.pow(10,-y),v=SM[8+y/3];return function(E){return g(b*E)+v}}return{format:c,formatPrefix:f}}var Jp,q1,r$;vJ({thousands:",",grouping:[3],currency:["$",""]});function vJ(r){return Jp=yJ(r),q1=Jp.format,r$=Jp.formatPrefix,Jp}function bJ(r){return Math.max(0,-Ac(Math.abs(r)))}function xJ(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ac(e)/3)))*3-Ac(Math.abs(r)))}function SJ(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,Ac(e)-Ac(r))+1}function n$(r,e,t,n){var i=J_(r,e,t),a;switch(n=kd(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(a=xJ(i,s))&&(n.precision=a),r$(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=SJ(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=bJ(i))&&(n.precision=a-(n.type==="%")*2);break}}return q1(n)}function rl(r){var e=r.domain;return r.ticks=function(t){var n=e();return X_(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return n$(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,f=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);f-- >0;){if(c=Z_(s,o,t),c===l)return n[i]=s,n[a]=o,e(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return r},r}function i$(){var r=z1();return r.copy=function(){return fh(r,i$())},Qi.apply(r,arguments),rl(r)}function a$(r){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(r=Array.from(n,Qg),t):r.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return a$(r).unknown(e)},r=arguments.length?Array.from(r,Qg):[0,1],rl(t)}function s$(r,e){r=r.slice();var t=0,n=r.length-1,i=r[t],a=r[n],s;return a<i&&(s=t,t=n,n=s,s=i,i=a,a=s),r[t]=e.floor(i),r[n]=e.ceil(a),r}function EM(r){return Math.log(r)}function wM(r){return Math.exp(r)}function EJ(r){return-Math.log(-r)}function wJ(r){return-Math.exp(-r)}function _J(r){return isFinite(r)?+("1e"+r):r<0?0:r}function TJ(r){return r===10?_J:r===Math.E?Math.exp:e=>Math.pow(r,e)}function AJ(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function _M(r){return(e,t)=>-r(-e,t)}function W1(r){const e=r(EM,wM),t=e.domain;let n=10,i,a;function s(){return i=AJ(n),a=TJ(n),t()[0]<0?(i=_M(i),a=_M(a),r(EJ,wJ)):r(EM,wM),e}return e.base=function(o){return arguments.length?(n=+o,s()):n},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const l=t();let c=l[0],f=l[l.length-1];const h=f<c;h&&([c,f]=[f,c]);let p=i(c),g=i(f),y,b;const v=o==null?10:+o;let E=[];if(!(n%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<n;++y)if(b=p<0?y/a(-p):y*a(p),!(b<c)){if(b>f)break;E.push(b)}}else for(;p<=g;++p)for(y=n-1;y>=1;--y)if(b=p>0?y/a(-p):y*a(p),!(b<c)){if(b>f)break;E.push(b)}E.length*2<v&&(E=X_(c,f,v))}else E=X_(p,g,Math.min(g-p,v)).map(a);return h?E.reverse():E},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=kd(l)).precision==null&&(l.trim=!0),l=q1(l)),o===1/0)return l;const c=Math.max(1,n*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*n<n-.5&&(h*=n),h<=c?l(f):""}},e.nice=()=>t(s$(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function o$(){const r=W1(my()).domain([1,10]);return r.copy=()=>fh(r,o$()).base(r.base()),Qi.apply(r,arguments),r}function TM(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function AM(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function V1(r){var e=1,t=r(TM(e),AM(e));return t.constant=function(n){return arguments.length?r(TM(e=+n),AM(e)):e},rl(t)}function l$(){var r=V1(my());return r.copy=function(){return fh(r,l$()).constant(r.constant())},Qi.apply(r,arguments)}function DM(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function DJ(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function OJ(r){return r<0?-r*r:r*r}function Q1(r){var e=r(In,In),t=1;function n(){return t===1?r(In,In):t===.5?r(DJ,OJ):r(DM(t),DM(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,n()):t},rl(e)}function X1(){var r=Q1(my());return r.copy=function(){return fh(r,X1()).exponent(r.exponent())},Qi.apply(r,arguments),r}function IJ(){return X1.apply(null,arguments).exponent(.5)}function OM(r){return Math.sign(r)*r*r}function CJ(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function u$(){var r=z1(),e=[0,1],t=!1,n;function i(a){var s=CJ(r(a));return isNaN(s)?n:t?Math.round(s):s}return i.invert=function(a){return r.invert(OM(a))},i.domain=function(a){return arguments.length?(r.domain(a),i):r.domain()},i.range=function(a){return arguments.length?(r.range((e=Array.from(a,Qg)).map(OM)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(r.clamp(a),i):r.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return u$(r.domain(),e).round(t).clamp(r.clamp()).unknown(n)},Qi.apply(i,arguments),rl(i)}function c$(){var r=[],e=[],t=[],n;function i(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=kZ(r,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:e[uh(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:r[0],o<t.length?t[o]:r[r.length-1]]},a.domain=function(s){if(!arguments.length)return r.slice();r=[];for(let o of s)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(Ho),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return t.slice()},a.copy=function(){return c$().domain(r).range(e).unknown(n)},Qi.apply(a,arguments)}function f$(){var r=0,e=1,t=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[uh(n,l,0,t)]:a}function o(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*r)/(t+1);return s}return s.domain=function(l){return arguments.length?([r,e]=l,r=+r,e=+e,o()):[r,e]},s.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[r,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return f$().domain([r,e]).range(i).unknown(a)},Qi.apply(rl(s),arguments)}function d$(){var r=[.5],e=[0,1],t,n=1;function i(a){return a!=null&&a<=a?e[uh(r,a,0,n)]:t}return i.domain=function(a){return arguments.length?(r=Array.from(a),n=Math.min(r.length,e.length-1),i):r.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(r.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[r[s-1],r[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return d$().domain(r).range(e).unknown(t)},Qi.apply(i,arguments)}const xS=new Date,SS=new Date;function $r(r,e,t,n){function i(a){return r(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(r(a=new Date(+a)),a),i.ceil=a=>(r(a=new Date(a-1)),e(a,1),r(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),e(a,o),r(a);while(c<a&&a<s);return l},i.filter=a=>$r(s=>{if(s>=s)for(;r(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(xS.setTime(+a),SS.setTime(+s),r(xS),r(SS),Math.floor(t(xS,SS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Zg=$r(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);Zg.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?$r(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):Zg);Zg.range;const As=1e3,zi=As*60,Ds=zi*60,Us=Ds*24,Z1=Us*7,IM=Us*30,ES=Us*365,Ml=$r(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*As)},(r,e)=>(e-r)/As,r=>r.getUTCSeconds());Ml.range;const J1=$r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*As)},(r,e)=>{r.setTime(+r+e*zi)},(r,e)=>(e-r)/zi,r=>r.getMinutes());J1.range;const eA=$r(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*zi)},(r,e)=>(e-r)/zi,r=>r.getUTCMinutes());eA.range;const tA=$r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*As-r.getMinutes()*zi)},(r,e)=>{r.setTime(+r+e*Ds)},(r,e)=>(e-r)/Ds,r=>r.getHours());tA.range;const rA=$r(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*Ds)},(r,e)=>(e-r)/Ds,r=>r.getUTCHours());rA.range;const dh=$r(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*zi)/Us,r=>r.getDate()-1);dh.range;const gy=$r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Us,r=>r.getUTCDate()-1);gy.range;const h$=$r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Us,r=>Math.floor(r/Us));h$.range;function su(r){return $r(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zi)/Z1)}const yy=su(0),Jg=su(1),RJ=su(2),PJ=su(3),Dc=su(4),LJ=su(5),kJ=su(6);yy.range;Jg.range;RJ.range;PJ.range;Dc.range;LJ.range;kJ.range;function ou(r){return $r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/Z1)}const vy=ou(0),e0=ou(1),MJ=ou(2),NJ=ou(3),Oc=ou(4),jJ=ou(5),FJ=ou(6);vy.range;e0.range;MJ.range;NJ.range;Oc.range;jJ.range;FJ.range;const nA=$r(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());nA.range;const iA=$r(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());iA.range;const $s=$r(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());$s.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:$r(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});$s.range;const Hs=$r(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());Hs.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:$r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});Hs.range;function p$(r,e,t,n,i,a){const s=[[Ml,1,As],[Ml,5,5*As],[Ml,15,15*As],[Ml,30,30*As],[a,1,zi],[a,5,5*zi],[a,15,15*zi],[a,30,30*zi],[i,1,Ds],[i,3,3*Ds],[i,6,6*Ds],[i,12,12*Ds],[n,1,Us],[n,2,2*Us],[t,1,Z1],[e,1,IM],[e,3,3*IM],[r,1,ES]];function o(c,f,h){const p=f<c;p&&([c,f]=[f,c]);const g=h&&typeof h.range=="function"?h:l(c,f,h),y=g?g.range(c,+f+1):[];return p?y.reverse():y}function l(c,f,h){const p=Math.abs(f-c)/h,g=B1(([,,v])=>v).right(s,p);if(g===s.length)return r.every(J_(c/ES,f/ES,h));if(g===0)return Zg.every(Math.max(J_(c,f,h),1));const[y,b]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return y.every(b)}return[o,l]}const[BJ,UJ]=p$(Hs,iA,vy,h$,rA,eA),[$J,HJ]=p$($s,nA,yy,dh,tA,J1);function wS(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function _S(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Zf(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function GJ(r){var e=r.dateTime,t=r.date,n=r.time,i=r.periods,a=r.days,s=r.shortDays,o=r.months,l=r.shortMonths,c=Jf(i),f=ed(i),h=Jf(a),p=ed(a),g=Jf(s),y=ed(s),b=Jf(o),v=ed(o),E=Jf(l),S=ed(l),w={a:Y,A:W,b:J,B:G,c:null,d:MM,e:MM,f:dee,g:Eee,G:_ee,H:uee,I:cee,j:fee,L:m$,m:hee,M:pee,p:j,q:F,Q:FM,s:BM,S:mee,u:gee,U:yee,V:vee,w:bee,W:xee,x:null,X:null,y:See,Y:wee,Z:Tee,"%":jM},A={a:Z,A:ae,b:ee,B:ve,c:null,d:NM,e:NM,f:Iee,g:Bee,G:$ee,H:Aee,I:Dee,j:Oee,L:y$,m:Cee,M:Ree,p:le,q:ne,Q:FM,s:BM,S:Pee,u:Lee,U:kee,V:Mee,w:Nee,W:jee,x:null,X:null,y:Fee,Y:Uee,Z:Hee,"%":jM},_={a:M,A:H,b:N,B:Q,c:z,d:LM,e:LM,f:aee,g:PM,G:RM,H:kM,I:kM,j:tee,L:iee,m:eee,M:ree,p:k,q:JJ,Q:oee,s:lee,S:nee,u:WJ,U:VJ,V:QJ,w:qJ,W:XJ,x:V,X:K,y:PM,Y:RM,Z:ZJ,"%":see};w.x=I(t,w),w.X=I(n,w),w.c=I(e,w),A.x=I(t,A),A.X=I(n,A),A.c=I(e,A);function I(re,ue){return function(fe){var ie=[],Ce=-1,Se=0,se=re.length,oe,ye,Ie;for(fe instanceof Date||(fe=new Date(+fe));++Ce<se;)re.charCodeAt(Ce)===37&&(ie.push(re.slice(Se,Ce)),(ye=CM[oe=re.charAt(++Ce)])!=null?oe=re.charAt(++Ce):ye=oe==="e"?" ":"0",(Ie=ue[oe])&&(oe=Ie(fe,ye)),ie.push(oe),Se=Ce+1);return ie.push(re.slice(Se,Ce)),ie.join("")}}function D(re,ue){return function(fe){var ie=Zf(1900,void 0,1),Ce=P(ie,re,fe+="",0),Se,se;if(Ce!=fe.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ue&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Se=_S(Zf(ie.y,0,1)),se=Se.getUTCDay(),Se=se>4||se===0?e0.ceil(Se):e0(Se),Se=gy.offset(Se,(ie.V-1)*7),ie.y=Se.getUTCFullYear(),ie.m=Se.getUTCMonth(),ie.d=Se.getUTCDate()+(ie.w+6)%7):(Se=wS(Zf(ie.y,0,1)),se=Se.getDay(),Se=se>4||se===0?Jg.ceil(Se):Jg(Se),Se=dh.offset(Se,(ie.V-1)*7),ie.y=Se.getFullYear(),ie.m=Se.getMonth(),ie.d=Se.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),se="Z"in ie?_S(Zf(ie.y,0,1)).getUTCDay():wS(Zf(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(se+5)%7:ie.w+ie.U*7-(se+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,_S(ie)):wS(ie)}}function P(re,ue,fe,ie){for(var Ce=0,Se=ue.length,se=fe.length,oe,ye;Ce<Se;){if(ie>=se)return-1;if(oe=ue.charCodeAt(Ce++),oe===37){if(oe=ue.charAt(Ce++),ye=_[oe in CM?ue.charAt(Ce++):oe],!ye||(ie=ye(re,fe,ie))<0)return-1}else if(oe!=fe.charCodeAt(ie++))return-1}return ie}function k(re,ue,fe){var ie=c.exec(ue.slice(fe));return ie?(re.p=f.get(ie[0].toLowerCase()),fe+ie[0].length):-1}function M(re,ue,fe){var ie=g.exec(ue.slice(fe));return ie?(re.w=y.get(ie[0].toLowerCase()),fe+ie[0].length):-1}function H(re,ue,fe){var ie=h.exec(ue.slice(fe));return ie?(re.w=p.get(ie[0].toLowerCase()),fe+ie[0].length):-1}function N(re,ue,fe){var ie=E.exec(ue.slice(fe));return ie?(re.m=S.get(ie[0].toLowerCase()),fe+ie[0].length):-1}function Q(re,ue,fe){var ie=b.exec(ue.slice(fe));return ie?(re.m=v.get(ie[0].toLowerCase()),fe+ie[0].length):-1}function z(re,ue,fe){return P(re,e,ue,fe)}function V(re,ue,fe){return P(re,t,ue,fe)}function K(re,ue,fe){return P(re,n,ue,fe)}function Y(re){return s[re.getDay()]}function W(re){return a[re.getDay()]}function J(re){return l[re.getMonth()]}function G(re){return o[re.getMonth()]}function j(re){return i[+(re.getHours()>=12)]}function F(re){return 1+~~(re.getMonth()/3)}function Z(re){return s[re.getUTCDay()]}function ae(re){return a[re.getUTCDay()]}function ee(re){return l[re.getUTCMonth()]}function ve(re){return o[re.getUTCMonth()]}function le(re){return i[+(re.getUTCHours()>=12)]}function ne(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var ue=I(re+="",w);return ue.toString=function(){return re},ue},parse:function(re){var ue=D(re+="",!1);return ue.toString=function(){return re},ue},utcFormat:function(re){var ue=I(re+="",A);return ue.toString=function(){return re},ue},utcParse:function(re){var ue=D(re+="",!0);return ue.toString=function(){return re},ue}}}var CM={"-":"",_:" ",0:"0"},tn=/^\s*\d+/,KJ=/^%/,zJ=/[\\^$*+?|[\]().{}]/g;function Lt(r,e,t){var n=r<0?"-":"",i=(n?-r:r)+"",a=i.length;return n+(a<t?new Array(t-a+1).join(e)+i:i)}function YJ(r){return r.replace(zJ,"\\$&")}function Jf(r){return new RegExp("^(?:"+r.map(YJ).join("|")+")","i")}function ed(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function qJ(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.w=+n[0],t+n[0].length):-1}function WJ(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.u=+n[0],t+n[0].length):-1}function VJ(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.U=+n[0],t+n[0].length):-1}function QJ(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.V=+n[0],t+n[0].length):-1}function XJ(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.W=+n[0],t+n[0].length):-1}function RM(r,e,t){var n=tn.exec(e.slice(t,t+4));return n?(r.y=+n[0],t+n[0].length):-1}function PM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function ZJ(r,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function JJ(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.q=n[0]*3-3,t+n[0].length):-1}function eee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.m=n[0]-1,t+n[0].length):-1}function LM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.d=+n[0],t+n[0].length):-1}function tee(r,e,t){var n=tn.exec(e.slice(t,t+3));return n?(r.m=0,r.d=+n[0],t+n[0].length):-1}function kM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.H=+n[0],t+n[0].length):-1}function ree(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.M=+n[0],t+n[0].length):-1}function nee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.S=+n[0],t+n[0].length):-1}function iee(r,e,t){var n=tn.exec(e.slice(t,t+3));return n?(r.L=+n[0],t+n[0].length):-1}function aee(r,e,t){var n=tn.exec(e.slice(t,t+6));return n?(r.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function see(r,e,t){var n=KJ.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function oee(r,e,t){var n=tn.exec(e.slice(t));return n?(r.Q=+n[0],t+n[0].length):-1}function lee(r,e,t){var n=tn.exec(e.slice(t));return n?(r.s=+n[0],t+n[0].length):-1}function MM(r,e){return Lt(r.getDate(),e,2)}function uee(r,e){return Lt(r.getHours(),e,2)}function cee(r,e){return Lt(r.getHours()%12||12,e,2)}function fee(r,e){return Lt(1+dh.count($s(r),r),e,3)}function m$(r,e){return Lt(r.getMilliseconds(),e,3)}function dee(r,e){return m$(r,e)+"000"}function hee(r,e){return Lt(r.getMonth()+1,e,2)}function pee(r,e){return Lt(r.getMinutes(),e,2)}function mee(r,e){return Lt(r.getSeconds(),e,2)}function gee(r){var e=r.getDay();return e===0?7:e}function yee(r,e){return Lt(yy.count($s(r)-1,r),e,2)}function g$(r){var e=r.getDay();return e>=4||e===0?Dc(r):Dc.ceil(r)}function vee(r,e){return r=g$(r),Lt(Dc.count($s(r),r)+($s(r).getDay()===4),e,2)}function bee(r){return r.getDay()}function xee(r,e){return Lt(Jg.count($s(r)-1,r),e,2)}function See(r,e){return Lt(r.getFullYear()%100,e,2)}function Eee(r,e){return r=g$(r),Lt(r.getFullYear()%100,e,2)}function wee(r,e){return Lt(r.getFullYear()%1e4,e,4)}function _ee(r,e){var t=r.getDay();return r=t>=4||t===0?Dc(r):Dc.ceil(r),Lt(r.getFullYear()%1e4,e,4)}function Tee(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function NM(r,e){return Lt(r.getUTCDate(),e,2)}function Aee(r,e){return Lt(r.getUTCHours(),e,2)}function Dee(r,e){return Lt(r.getUTCHours()%12||12,e,2)}function Oee(r,e){return Lt(1+gy.count(Hs(r),r),e,3)}function y$(r,e){return Lt(r.getUTCMilliseconds(),e,3)}function Iee(r,e){return y$(r,e)+"000"}function Cee(r,e){return Lt(r.getUTCMonth()+1,e,2)}function Ree(r,e){return Lt(r.getUTCMinutes(),e,2)}function Pee(r,e){return Lt(r.getUTCSeconds(),e,2)}function Lee(r){var e=r.getUTCDay();return e===0?7:e}function kee(r,e){return Lt(vy.count(Hs(r)-1,r),e,2)}function v$(r){var e=r.getUTCDay();return e>=4||e===0?Oc(r):Oc.ceil(r)}function Mee(r,e){return r=v$(r),Lt(Oc.count(Hs(r),r)+(Hs(r).getUTCDay()===4),e,2)}function Nee(r){return r.getUTCDay()}function jee(r,e){return Lt(e0.count(Hs(r)-1,r),e,2)}function Fee(r,e){return Lt(r.getUTCFullYear()%100,e,2)}function Bee(r,e){return r=v$(r),Lt(r.getUTCFullYear()%100,e,2)}function Uee(r,e){return Lt(r.getUTCFullYear()%1e4,e,4)}function $ee(r,e){var t=r.getUTCDay();return r=t>=4||t===0?Oc(r):Oc.ceil(r),Lt(r.getUTCFullYear()%1e4,e,4)}function Hee(){return"+0000"}function jM(){return"%"}function FM(r){return+r}function BM(r){return Math.floor(+r/1e3)}var qu,b$,x$;Gee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gee(r){return qu=GJ(r),b$=qu.format,qu.parse,x$=qu.utcFormat,qu.utcParse,qu}function Kee(r){return new Date(r)}function zee(r){return r instanceof Date?+r:+new Date(+r)}function aA(r,e,t,n,i,a,s,o,l,c){var f=z1(),h=f.invert,p=f.domain,g=c(".%L"),y=c(":%S"),b=c("%I:%M"),v=c("%I %p"),E=c("%a %d"),S=c("%b %d"),w=c("%B"),A=c("%Y");function _(I){return(l(I)<I?g:o(I)<I?y:s(I)<I?b:a(I)<I?v:n(I)<I?i(I)<I?E:S:t(I)<I?w:A)(I)}return f.invert=function(I){return new Date(h(I))},f.domain=function(I){return arguments.length?p(Array.from(I,zee)):p().map(Kee)},f.ticks=function(I){var D=p();return r(D[0],D[D.length-1],I??10)},f.tickFormat=function(I,D){return D==null?_:c(D)},f.nice=function(I){var D=p();return(!I||typeof I.range!="function")&&(I=e(D[0],D[D.length-1],I??10)),I?p(s$(D,I)):f},f.copy=function(){return fh(f,aA(r,e,t,n,i,a,s,o,l,c))},f}function Yee(){return Qi.apply(aA($J,HJ,$s,nA,yy,dh,tA,J1,Ml,b$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qee(){return Qi.apply(aA(BJ,UJ,Hs,iA,vy,gy,rA,eA,Ml,x$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function by(){var r=0,e=1,t,n,i,a,s=In,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-t)*i,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([r,e]=h,t=a(r=+r),n=a(e=+e),i=t===n?0:1/(n-t),c):[r,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s};function f(h){return function(p){var g,y;return arguments.length?([g,y]=p,s=h(g,y),c):[s(0),s(1)]}}return c.range=f(zc),c.rangeRound=f(K1),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return a=h,t=h(r),n=h(e),i=t===n?0:1/(n-t),c}}function nl(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function S$(){var r=rl(by()(In));return r.copy=function(){return nl(r,S$())},Xs.apply(r,arguments)}function E$(){var r=W1(by()).domain([1,10]);return r.copy=function(){return nl(r,E$()).base(r.base())},Xs.apply(r,arguments)}function w$(){var r=V1(by());return r.copy=function(){return nl(r,w$()).constant(r.constant())},Xs.apply(r,arguments)}function sA(){var r=Q1(by());return r.copy=function(){return nl(r,sA()).exponent(r.exponent())},Xs.apply(r,arguments)}function Wee(){return sA.apply(null,arguments).exponent(.5)}function _$(){var r=[],e=In;function t(n){if(n!=null&&!isNaN(n=+n))return e((uh(r,n,1)-1)/(r.length-1))}return t.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let i of n)i!=null&&!isNaN(i=+i)&&r.push(i);return r.sort(Ho),t},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.range=function(){return r.map((n,i)=>e(i/(r.length-1)))},t.quantiles=function(n){return Array.from({length:n+1},(i,a)=>LZ(r,a/n))},t.copy=function(){return _$(e).domain(r)},Xs.apply(t,arguments)}function xy(){var r=0,e=.5,t=1,n=1,i,a,s,o,l,c=In,f,h=!1,p;function g(b){return isNaN(b=+b)?p:(b=.5+((b=+f(b))-a)*(n*b<n*a?o:l),c(h?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([r,e,t]=b,i=f(r=+r),a=f(e=+e),s=f(t=+t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g):[r,e,t]},g.clamp=function(b){return arguments.length?(h=!!b,g):h},g.interpolator=function(b){return arguments.length?(c=b,g):c};function y(b){return function(v){var E,S,w;return arguments.length?([E,S,w]=v,c=sJ(b,[E,S,w]),g):[c(0),c(.5),c(1)]}}return g.range=y(zc),g.rangeRound=y(K1),g.unknown=function(b){return arguments.length?(p=b,g):p},function(b){return f=b,i=b(r),a=b(e),s=b(t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g}}function T$(){var r=rl(xy()(In));return r.copy=function(){return nl(r,T$())},Xs.apply(r,arguments)}function A$(){var r=W1(xy()).domain([.1,1,10]);return r.copy=function(){return nl(r,A$()).base(r.base())},Xs.apply(r,arguments)}function D$(){var r=V1(xy());return r.copy=function(){return nl(r,D$()).constant(r.constant())},Xs.apply(r,arguments)}function oA(){var r=Q1(xy());return r.copy=function(){return nl(r,oA()).exponent(r.exponent())},Xs.apply(r,arguments)}function Vee(){return oA.apply(null,arguments).exponent(.5)}const fd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$1,scaleDiverging:T$,scaleDivergingLog:A$,scaleDivergingPow:oA,scaleDivergingSqrt:Vee,scaleDivergingSymlog:D$,scaleIdentity:a$,scaleImplicit:eT,scaleLinear:i$,scaleLog:o$,scaleOrdinal:U1,scalePoint:NZ,scalePow:X1,scaleQuantile:c$,scaleQuantize:f$,scaleRadial:u$,scaleSequential:S$,scaleSequentialLog:E$,scaleSequentialPow:sA,scaleSequentialQuantile:_$,scaleSequentialSqrt:Wee,scaleSequentialSymlog:w$,scaleSqrt:IJ,scaleSymlog:l$,scaleThreshold:d$,scaleTime:Yee,scaleUtc:qee,tickFormat:n$},Symbol.toStringTag,{value:"Module"}));var il=r=>r.chartData,Qee=ke([il],r=>{var e=r.chartData!=null?r.chartData.length-1:0;return{chartData:r.chartData,computedData:r.computedData,dataEndIndex:e,dataStartIndex:0}}),lA=(r,e,t,n)=>n?Qee(r):il(r);function Wo(r){if(Array.isArray(r)&&r.length===2){var[e,t]=r;if(Zr(e)&&Zr(t))return!0}return!1}function UM(r,e,t){return t?r:[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}function O$(r,e){if(e&&typeof r!="function"&&Array.isArray(r)&&r.length===2){var[t,n]=r,i,a;if(Zr(t))i=t;else if(typeof t=="function")return;if(Zr(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(Wo(s))return s}}function Xee(r,e,t){if(!(!t&&e==null)){if(typeof r=="function"&&e!=null)try{var n=r(e,t);if(Wo(n))return UM(n,e,t)}catch{}if(Array.isArray(r)&&r.length===2){var[i,a]=r,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(ut(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&hk.test(i)){var l=hk.exec(i);if(l==null||e==null)s=void 0;else{var c=+l[1];s=e[0]-c}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(ut(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&pk.test(a)){var f=pk.exec(a);if(f==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var p=[s,o];if(Wo(p))return e==null?p:UM(p,e,t)}}}var Yc=1e9,Zee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cA,lr=!0,qi="[DecimalError] ",Kl=qi+"Invalid argument: ",uA=qi+"Exponent out of range: ",qc=Math.floor,Dl=Math.pow,Jee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xi,Qr=1e7,rr=7,I$=9007199254740991,t0=qc(I$/rr),rt={};rt.absoluteValue=rt.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};rt.comparedTo=rt.cmp=function(r){var e,t,n,i,a=this;if(r=new a.constructor(r),a.s!==r.s)return a.s||-r.s;if(a.e!==r.e)return a.e>r.e^a.s<0?1:-1;for(n=a.d.length,i=r.d.length,e=0,t=n<i?n:i;e<t;++e)if(a.d[e]!==r.d[e])return a.d[e]>r.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};rt.decimalPlaces=rt.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*rr;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};rt.dividedBy=rt.div=function(r){return Cs(this,new this.constructor(r))};rt.dividedToIntegerBy=rt.idiv=function(r){var e=this,t=e.constructor;return Qt(Cs(e,new t(r),0,1),t.precision)};rt.equals=rt.eq=function(r){return!this.cmp(r)};rt.exponent=function(){return Pr(this)};rt.greaterThan=rt.gt=function(r){return this.cmp(r)>0};rt.greaterThanOrEqualTo=rt.gte=function(r){return this.cmp(r)>=0};rt.isInteger=rt.isint=function(){return this.e>this.d.length-2};rt.isNegative=rt.isneg=function(){return this.s<0};rt.isPositive=rt.ispos=function(){return this.s>0};rt.isZero=function(){return this.s===0};rt.lessThan=rt.lt=function(r){return this.cmp(r)<0};rt.lessThanOrEqualTo=rt.lte=function(r){return this.cmp(r)<1};rt.logarithm=rt.log=function(r){var e,t=this,n=t.constructor,i=n.precision,a=i+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(xi))throw Error(qi+"NaN");if(t.s<1)throw Error(qi+(t.s?"NaN":"-Infinity"));return t.eq(xi)?new n(0):(lr=!1,e=Cs(Md(t,a),Md(r,a),a),lr=!0,Qt(e,i))};rt.minus=rt.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?P$(e,r):C$(e,(r.s=-r.s,r))};rt.modulo=rt.mod=function(r){var e,t=this,n=t.constructor,i=n.precision;if(r=new n(r),!r.s)throw Error(qi+"NaN");return t.s?(lr=!1,e=Cs(t,r,0,1).times(r),lr=!0,t.minus(e)):Qt(new n(t),i)};rt.naturalExponential=rt.exp=function(){return R$(this)};rt.naturalLogarithm=rt.ln=function(){return Md(this)};rt.negated=rt.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};rt.plus=rt.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?C$(e,r):P$(e,(r.s=-r.s,r))};rt.precision=rt.sd=function(r){var e,t,n,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Kl+r);if(e=Pr(i)+1,n=i.d.length-1,t=n*rr+1,n=i.d[n],n){for(;n%10==0;n/=10)t--;for(n=i.d[0];n>=10;n/=10)t++}return r&&e>t?e:t};rt.squareRoot=rt.sqrt=function(){var r,e,t,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(qi+"NaN")}for(r=Pr(o),lr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ca(o.d),(e.length+r)%2==0&&(e+="0"),i=Math.sqrt(e),r=qc((r+1)/2)-(r<0||r%2),i==1/0?e="5e"+r:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new l(e)):n=new l(i.toString()),t=l.precision,i=s=t+3;;)if(a=n,n=a.plus(Cs(o,a,s+2)).times(.5),Ca(a.d).slice(0,s)===(e=Ca(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Qt(a,t+1,0),a.times(a).eq(o)){n=a;break}}else if(e!="9999")break;s+=4}return lr=!0,Qt(n,t)};rt.times=rt.mul=function(r){var e,t,n,i,a,s,o,l,c,f=this,h=f.constructor,p=f.d,g=(r=new h(r)).d;if(!f.s||!r.s)return new h(0);for(r.s*=f.s,t=f.e+r.e,l=p.length,c=g.length,l<c&&(a=p,p=g,g=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+g[n]*p[i-n-1]+e,a[i--]=o%Qr|0,e=o/Qr|0;a[i]=(a[i]+e)%Qr|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=t,lr?Qt(r,h.precision):r};rt.toDecimalPlaces=rt.todp=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:($a(r,0,Yc),e===void 0?e=n.rounding:$a(e,0,8),Qt(t,r+Pr(t)+1,e))};rt.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Ql(n,!0):($a(r,0,Yc),e===void 0?e=i.rounding:$a(e,0,8),n=Qt(new i(n),r+1,e),t=Ql(n,!0,r+1)),t};rt.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?Ql(i):($a(r,0,Yc),e===void 0?e=a.rounding:$a(e,0,8),n=Qt(new a(i),r+Pr(i)+1,e),t=Ql(n.abs(),!1,r+Pr(n)+1),i.isneg()&&!i.isZero()?"-"+t:t)};rt.toInteger=rt.toint=function(){var r=this,e=r.constructor;return Qt(new e(r),Pr(r)+1,e.rounding)};rt.toNumber=function(){return+this};rt.toPower=rt.pow=function(r){var e,t,n,i,a,s,o=this,l=o.constructor,c=12,f=+(r=new l(r));if(!r.s)return new l(xi);if(o=new l(o),!o.s){if(r.s<1)throw Error(qi+"Infinity");return o}if(o.eq(xi))return o;if(n=l.precision,r.eq(xi))return Qt(o,n);if(e=r.e,t=r.d.length-1,s=e>=t,a=o.s,s){if((t=f<0?-f:f)<=I$){for(i=new l(xi),e=Math.ceil(n/rr+4),lr=!1;t%2&&(i=i.times(o),HM(i.d,e)),t=qc(t/2),t!==0;)o=o.times(o),HM(o.d,e);return lr=!0,r.s<0?new l(xi).div(i):Qt(i,n)}}else if(a<0)throw Error(qi+"NaN");return a=a<0&&r.d[Math.max(e,t)]&1?-1:1,o.s=1,lr=!1,i=r.times(Md(o,n+c)),lr=!0,i=R$(i),i.s=a,i};rt.toPrecision=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?(t=Pr(i),n=Ql(i,t<=a.toExpNeg||t>=a.toExpPos)):($a(r,1,Yc),e===void 0?e=a.rounding:$a(e,0,8),i=Qt(new a(i),r,e),t=Pr(i),n=Ql(i,r<=t||t<=a.toExpNeg,r)),n};rt.toSignificantDigits=rt.tosd=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):($a(r,1,Yc),e===void 0?e=n.rounding:$a(e,0,8)),Qt(new n(t),r,e)};rt.toString=rt.valueOf=rt.val=rt.toJSON=rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=Pr(r),t=r.constructor;return Ql(r,e<=t.toExpNeg||e>=t.toExpPos)};function C$(r,e){var t,n,i,a,s,o,l,c,f=r.constructor,h=f.precision;if(!r.s||!e.s)return e.s||(e=new f(r)),lr?Qt(e,h):e;if(l=r.d,c=e.d,s=r.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(h/rr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),t=0;a;)t=(l[--a]=l[a]+c[a]+t)/Qr|0,l[a]%=Qr;for(t&&(l.unshift(t),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,lr?Qt(e,h):e}function $a(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Kl+r)}function Ca(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=rr-n.length,t&&(a+=Mo(t)),a+=n;s=r[e],n=s+"",t=rr-n.length,t&&(a+=Mo(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Cs=(function(){function r(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%Qr|0,s=a/Qr|0;return s&&n.unshift(s),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*Qr+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,f,h,p,g,y,b,v,E,S,w,A,_,I,D,P,k=n.constructor,M=n.s==i.s?1:-1,H=n.d,N=i.d;if(!n.s)return new k(n);if(!i.s)throw Error(qi+"Division by zero");for(l=n.e-i.e,D=N.length,_=H.length,g=new k(M),y=g.d=[],c=0;N[c]==(H[c]||0);)++c;if(N[c]>(H[c]||0)&&--l,a==null?S=a=k.precision:s?S=a+(Pr(n)-Pr(i))+1:S=a,S<0)return new k(0);if(S=S/rr+2|0,c=0,D==1)for(f=0,N=N[0],S++;(c<_||f)&&S--;c++)w=f*Qr+(H[c]||0),y[c]=w/N|0,f=w%N|0;else{for(f=Qr/(N[0]+1)|0,f>1&&(N=r(N,f),H=r(H,f),D=N.length,_=H.length),A=D,b=H.slice(0,D),v=b.length;v<D;)b[v++]=0;P=N.slice(),P.unshift(0),I=N[0],N[1]>=Qr/2&&++I;do f=0,o=e(N,b,D,v),o<0?(E=b[0],D!=v&&(E=E*Qr+(b[1]||0)),f=E/I|0,f>1?(f>=Qr&&(f=Qr-1),h=r(N,f),p=h.length,v=b.length,o=e(h,b,p,v),o==1&&(f--,t(h,D<p?P:N,p))):(f==0&&(o=f=1),h=N.slice()),p=h.length,p<v&&h.unshift(0),t(b,h,v),o==-1&&(v=b.length,o=e(N,b,D,v),o<1&&(f++,t(b,D<v?P:N,v))),v=b.length):o===0&&(f++,b=[0]),y[c++]=f,o&&b[0]?b[v++]=H[A]||0:(b=[H[A]],v=1);while((A++<_||b[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=l,Qt(g,s?a+Pr(g)+1:a)}})();function R$(r,e){var t,n,i,a,s,o,l=0,c=0,f=r.constructor,h=f.precision;if(Pr(r)>16)throw Error(uA+Pr(r));if(!r.s)return new f(xi);for(lr=!1,o=h,s=new f(.03125);r.abs().gte(.1);)r=r.times(s),c+=5;for(n=Math.log(Dl(2,c))/Math.LN10*2+5|0,o+=n,t=i=a=new f(xi),f.precision=o;;){if(i=Qt(i.times(r),o),t=t.times(++l),s=a.plus(Cs(i,t,o)),Ca(s.d).slice(0,o)===Ca(a.d).slice(0,o)){for(;c--;)a=Qt(a.times(a),o);return f.precision=h,e==null?(lr=!0,Qt(a,h)):a}a=s}}function Pr(r){for(var e=r.e*rr,t=r.d[0];t>=10;t/=10)e++;return e}function TS(r,e,t){if(e>r.LN10.sd())throw lr=!0,t&&(r.precision=t),Error(qi+"LN10 precision limit exceeded");return Qt(new r(r.LN10),e)}function Mo(r){for(var e="";r--;)e+="0";return e}function Md(r,e){var t,n,i,a,s,o,l,c,f,h=1,p=10,g=r,y=g.d,b=g.constructor,v=b.precision;if(g.s<1)throw Error(qi+(g.s?"NaN":"-Infinity"));if(g.eq(xi))return new b(0);if(e==null?(lr=!1,c=v):c=e,g.eq(10))return e==null&&(lr=!0),TS(b,c);if(c+=p,b.precision=c,t=Ca(y),n=t.charAt(0),a=Pr(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)g=g.times(r),t=Ca(g.d),n=t.charAt(0),h++;a=Pr(g),n>1?(g=new b("0."+t),a++):g=new b(n+"."+t.slice(1))}else return l=TS(b,c+2,v).times(a+""),g=Md(new b(n+"."+t.slice(1)),c-p).plus(l),b.precision=v,e==null?(lr=!0,Qt(g,v)):g;for(o=s=g=Cs(g.minus(xi),g.plus(xi),c),f=Qt(g.times(g),c),i=3;;){if(s=Qt(s.times(f),c),l=o.plus(Cs(s,new b(i),c)),Ca(l.d).slice(0,c)===Ca(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(TS(b,c+2,v).times(a+""))),o=Cs(o,new b(h),c),b.precision=v,e==null?(lr=!0,Qt(o,v)):o;o=l,i+=2}}function $M(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,t=t-n-1,r.e=qc(t/rr),r.d=[],n=(t+1)%rr,t<0&&(n+=rr),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=rr;n<i;)r.d.push(+e.slice(n,n+=rr));e=e.slice(n),n=rr-e.length}else n-=i;for(;n--;)e+="0";if(r.d.push(+e),lr&&(r.e>t0||r.e<-t0))throw Error(uA+t)}else r.s=0,r.e=0,r.d=[0];return r}function Qt(r,e,t){var n,i,a,s,o,l,c,f,h=r.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=rr,i=e,c=h[f=0];else{if(f=Math.ceil((n+1)/rr),a=h.length,f>=a)return r;for(c=a=h[f],s=1;a>=10;a/=10)s++;n%=rr,i=n-rr+s}if(t!==void 0&&(a=Dl(10,s-i-1),o=c/a%10|0,l=e<0||h[f+1]!==void 0||c%a,l=t<4?(o||l)&&(t==0||t==(r.s<0?3:2)):o>5||o==5&&(t==4||l||t==6&&(n>0?i>0?c/Dl(10,s-i):0:h[f-1])%10&1||t==(r.s<0?8:7))),e<1||!h[0])return l?(a=Pr(r),h.length=1,e=e-a-1,h[0]=Dl(10,(rr-e%rr)%rr),r.e=qc(-e/rr)||0):(h.length=1,h[0]=r.e=r.s=0),r;if(n==0?(h.length=f,a=1,f--):(h.length=f+1,a=Dl(10,rr-n),h[f]=i>0?(c/Dl(10,s-i)%Dl(10,i)|0)*a:0),l)for(;;)if(f==0){(h[0]+=a)==Qr&&(h[0]=1,++r.e);break}else{if(h[f]+=a,h[f]!=Qr)break;h[f--]=0,a=1}for(n=h.length;h[--n]===0;)h.pop();if(lr&&(r.e>t0||r.e<-t0))throw Error(uA+Pr(r));return r}function P$(r,e){var t,n,i,a,s,o,l,c,f,h,p=r.constructor,g=p.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new p(r),lr?Qt(e,g):e;if(l=r.d,h=e.d,n=e.e,c=r.e,l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=h.length):(t=h,n=c,o=l.length),i=Math.max(Math.ceil(g/rr),o)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=l.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){f=l[i]<h[i];break}s=0}for(f&&(t=l,l=h,h=t,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=Qr-1;--l[a],l[i]+=Qr}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,lr?Qt(e,g):e):new p(0)}function Ql(r,e,t){var n,i=Pr(r),a=Ca(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+Mo(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Mo(-i-1)+a,t&&(n=t-s)>0&&(a+=Mo(n))):i>=s?(a+=Mo(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+Mo(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=Mo(n))),r.s<0?"-"+a:a}function HM(r,e){if(r.length>e)return r.length=e,!0}function L$(r){var e,t,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Kl+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return $M(s,a.toString())}else if(typeof a!="string")throw Error(Kl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Jee.test(a))$M(s,a);else throw Error(Kl+a)}if(i.prototype=rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=L$,i.config=i.set=ete,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function ete(r){if(!r||typeof r!="object")throw Error(qi+"Object expected");var e,t,n,i=["precision",1,Yc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=r[t=i[e]])!==void 0)if(qc(n)===n&&n>=i[e+1]&&n<=i[e+2])this[t]=n;else throw Error(Kl+t+": "+n);if((n=r[t="LN10"])!==void 0)if(n==Math.LN10)this[t]=new this(n);else throw Error(Kl+t+": "+n);return this}var cA=L$(Zee);xi=new cA(1);const Ut=cA;var tte=r=>r,k$={},M$=r=>r===k$,GM=r=>function e(){return arguments.length===0||arguments.length===1&&M$(arguments.length<=0?void 0:arguments[0])?e:r(...arguments)},N$=(r,e)=>r===1?e:GM(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n.filter(s=>s!==k$).length;return a>=r?e(...n):N$(r-a,GM(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(f=>M$(f)?o.shift():f);return e(...c,...o)}))}),rte=r=>N$(r.length,r),iT=(r,e)=>{for(var t=[],n=r;n<e;++n)t[n-r]=n;return t},nte=rte((r,e)=>Array.isArray(e)?e.map(r):Object.keys(e).map(t=>e[t]).map(r)),ite=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return tte;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},aT=r=>Array.isArray(r)?r.reverse():r.split("").reverse().join("");function j$(r){var e;return r===0?e=1:e=Math.floor(new Ut(r).abs().log(10).toNumber())+1,e}function F$(r,e,t){for(var n=new Ut(r),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(t),i++;return a}var B$=r=>{var[e,t]=r,[n,i]=[e,t];return e>t&&([n,i]=[t,e]),[n,i]},U$=(r,e,t)=>{if(r.lte(0))return new Ut(0);var n=j$(r.toNumber()),i=new Ut(10).pow(n),a=r.div(i),s=n!==1?.05:.1,o=new Ut(Math.ceil(a.div(s).toNumber())).add(t).mul(s),l=o.mul(i);return e?new Ut(l.toNumber()):new Ut(Math.ceil(l.toNumber()))},ate=(r,e,t)=>{var n=new Ut(1),i=new Ut(r);if(!i.isint()&&t){var a=Math.abs(r);a<1?(n=new Ut(10).pow(j$(r)-1),i=new Ut(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Ut(Math.floor(r)))}else r===0?i=new Ut(Math.floor((e-1)/2)):t||(i=new Ut(Math.floor(r)));var s=Math.floor((e-1)/2),o=ite(nte(l=>i.add(new Ut(l-s).mul(n)).toNumber()),iT);return o(0,e)},$$=function(e,t,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ut(0),tickMin:new Ut(0),tickMax:new Ut(0)};var s=U$(new Ut(t).sub(e).div(n-1),i,a),o;e<=0&&t>=0?o=new Ut(0):(o=new Ut(e).add(t).div(2),o=o.sub(new Ut(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new Ut(t).sub(o).div(s).toNumber()),f=l+c+1;return f>n?$$(e,t,n,i,a+1):(f<n&&(c=t>0?c+(n-f):c,l=t>0?l:l+(n-f)),{step:s,tickMin:o.sub(new Ut(l).mul(s)),tickMax:o.add(new Ut(c).mul(s))})},ste=function(e){var[t,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=B$([t,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...iT(0,i-1).map(()=>1/0)]:[...iT(0,i-1).map(()=>-1/0),l];return t>n?aT(c):c}if(o===l)return ate(o,i,a);var{step:f,tickMin:h,tickMax:p}=$$(o,l,s,a,0),g=F$(h,p.add(new Ut(.1).mul(f)),f);return t>n?aT(g):g},ote=function(e,t){var[n,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=B$([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(t,2),c=U$(new Ut(o).sub(s).div(l-1),a,0),f=[...F$(new Ut(s),new Ut(o),c),o];return a===!1&&(f=f.map(h=>Math.round(h))),n>i?aT(f):f},lte=r=>r.rootProps.barCategoryGap,Sy=r=>r.rootProps.stackOffset,H$=r=>r.rootProps.reverseStackOrder,fA=r=>r.options.chartName,dA=r=>r.rootProps.syncId,G$=r=>r.rootProps.syncMethod,hA=r=>r.options.eventEmitter,Cn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},_s={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},yi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Ey=(r,e)=>{if(!(!r||!e))return r!=null&&r.reversed?[e[1],e[0]]:e},ute={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:_s.reversed,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:_s.type,unit:void 0},cte={allowDataOverflow:yi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yi.scale,tick:yi.tick,tickCount:yi.tickCount,ticks:void 0,type:yi.type,unit:void 0},fte={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},dte={allowDataOverflow:yi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yi.scale,tick:yi.tick,tickCount:yi.tickCount,ticks:void 0,type:"category",unit:void 0},pA=(r,e)=>r.polarAxis.angleAxis[e]!=null?r.polarAxis.angleAxis[e]:r.layout.layoutType==="radial"?fte:ute,mA=(r,e)=>r.polarAxis.radiusAxis[e]!=null?r.polarAxis.radiusAxis[e]:r.layout.layoutType==="radial"?dte:cte,wy=r=>r.polarOptions,gA=ke([Vs,Qs,dn],oZ),K$=ke([wy,gA],(r,e)=>{if(r!=null)return qo(r.innerRadius,e,0)}),z$=ke([wy,gA],(r,e)=>{if(r!=null)return qo(r.outerRadius,e,e*.8)}),hte=r=>{if(r==null)return[0,0];var{startAngle:e,endAngle:t}=r;return[e,t]},Y$=ke([wy],hte);ke([pA,Y$],Ey);var q$=ke([gA,K$,z$],(r,e,t)=>{if(!(r==null||e==null||t==null))return[e,t]});ke([mA,q$],Ey);var W$=ke([ir,wy,K$,z$,Vs,Qs],(r,e,t,n,i,a)=>{if(!(r!=="centric"&&r!=="radial"||e==null||t==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=e;return{cx:qo(s,i,i/2),cy:qo(o,a,a/2),innerRadius:t,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Hr=(r,e)=>e,_y=(r,e,t)=>t;function V$(r){return r?.id}function Q$(r,e,t){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=t,s=new Map;return r.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var f=V$(o);c.forEach((h,p)=>{var g=a==null||i?p:String(xn(h,a,null)),y=xn(h,o.dataKey,0),b;s.has(g)?b=s.get(g):b={},Object.assign(b,{[f]:y}),s.set(g,b)})}}),Array.from(s.values())}function yA(r){return r.stackId!=null&&r.dataKey!=null}var Ty=(r,e)=>r===e?!0:r==null||e==null?!1:r[0]===e[0]&&r[1]===e[1];function Ay(r,e){return Array.isArray(r)&&Array.isArray(e)&&r.length===0&&e.length===0?!0:r===e}function pte(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return!1}var Gr=r=>{var e=ir(r);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Wc=r=>r.tooltip.settings.axisId;function KM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function r0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(t),!0).forEach(function(n){mte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function mte(r,e,t){return(e=gte(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gte(r){var e=yte(r,"string");return typeof e=="symbol"?e:e+""}function yte(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var sT=[0,"auto"],Wr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},X$=(r,e)=>r.cartesianAxis.xAxis[e],Zs=(r,e)=>{var t=X$(r,e);return t??Wr},Vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:sh},Z$=(r,e)=>r.cartesianAxis.yAxis[e],Js=(r,e)=>{var t=Z$(r,e);return t??Vr},vte={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},vA=(r,e)=>{var t=r.cartesianAxis.zAxis[e];return t??vte},Nn=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);case"zAxis":return vA(r,t);case"angleAxis":return pA(r,t);case"radiusAxis":return mA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},bte=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},hh=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);case"angleAxis":return pA(r,t);case"radiusAxis":return mA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},J$=r=>r.graphicalItems.cartesianItems.some(e=>e.type==="bar")||r.graphicalItems.polarItems.some(e=>e.type==="radialBar");function e4(r,e){return t=>{switch(r){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var t4=r=>r.graphicalItems.cartesianItems,xte=ke([Hr,_y],e4),r4=(r,e,t)=>r.filter(t).filter(n=>e?.includeHidden===!0?!0:!n.hide),ph=ke([t4,Nn,xte],r4,{memoizeOptions:{resultEqualityCheck:Ay}}),n4=ke([ph],r=>r.filter(e=>e.type==="area"||e.type==="bar").filter(yA)),i4=r=>r.filter(e=>!("stackId"in e)||e.stackId===void 0),Ste=ke([ph],i4),a4=r=>r.map(e=>e.data).filter(Boolean).flat(1),Ete=ke([ph],a4,{memoizeOptions:{resultEqualityCheck:Ay}}),s4=(r,e)=>{var{chartData:t=[],dataStartIndex:n,dataEndIndex:i}=e;return r.length>0?r:t.slice(n,i+1)},bA=ke([Ete,lA],s4),o4=(r,e,t)=>e?.dataKey!=null?r.map(n=>({value:xn(n,e.dataKey)})):t.length>0?t.map(n=>n.dataKey).flatMap(n=>r.map(i=>({value:xn(i,n)}))):r.map(n=>({value:n})),Dy=ke([bA,Nn,ph],o4);function l4(r,e){switch(r){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ng(r){if(Ba(r)||r instanceof Date){var e=Number(r);if(Zr(e))return e}}function zM(r){if(Array.isArray(r)){var e=[ng(r[0]),ng(r[1])];return Wo(e)?e:void 0}var t=ng(r);if(t!=null)return[t,t]}function Gs(r){return r.map(ng).filter(pV)}function wte(r,e,t){return!t||typeof e!="number"||Fa(e)?[]:t.length?Gs(t.flatMap(n=>{var i=xn(r,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Zr(a)||!Zr(s)))return[e-a,e+s]})):[]}var Kr=r=>{var e=Gr(r),t=Wc(r);return hh(r,e,t)},mh=ke([Kr],r=>r?.dataKey),_te=ke([n4,lA,Kr],Q$),u4=(r,e,t,n)=>{var i={},a=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=n?[...l].reverse():l,f=c.map(V$);return[o,{stackedData:U7(r,f,t),graphicalItems:c}]}))},Tte=ke([_te,n4,Sy,H$],u4),c4=(r,e,t,n)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(n==null&&t!=="zAxis"){var s=G7(r,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Ate=ke([Nn],r=>r.allowDataOverflow),xA=r=>{var e;if(r==null||!("domain"in r))return sT;if(r.domain!=null)return r.domain;if(r.ticks!=null){if(r.type==="number"){var t=Gs(r.ticks);return[Math.min(...t),Math.max(...t)]}if(r.type==="category")return r.ticks.map(String)}return(e=r?.domain)!==null&&e!==void 0?e:sT},f4=ke([Nn],xA),d4=ke([f4,Ate],O$),Dte=ke([Tte,il,Hr,d4],c4,{memoizeOptions:{resultEqualityCheck:Ty}}),SA=r=>r.errorBars,Ote=(r,e,t)=>r.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>l4(t,n)),n0=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},h4=(r,e,t,n,i)=>{var a,s;if(t.length>0&&r.forEach(o=>{t.forEach(l=>{var c,f,h=(c=n[l.id])===null||c===void 0?void 0:c.filter(E=>l4(i,E)),p=xn(o,(f=e.dataKey)!==null&&f!==void 0?f:l.dataKey),g=wte(o,p,h);if(g.length>=2){var y=Math.min(...g),b=Math.max(...g);(a==null||y<a)&&(a=y),(s==null||b>s)&&(s=b)}var v=zM(p);v!=null&&(a=a==null?v[0]:Math.min(a,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),e?.dataKey!=null&&r.forEach(o=>{var l=zM(xn(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),Zr(a)&&Zr(s))return[a,s]},Ite=ke([bA,Nn,Ste,SA,Hr],h4,{memoizeOptions:{resultEqualityCheck:Ty}});function Cte(r){var{value:e}=r;if(Ba(e)||e instanceof Date)return e}var Rte=(r,e,t)=>{var n=r.map(Cte).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&_U(n))?q3(0,r.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},p4=r=>r.referenceElements.dots,Vc=(r,e,t)=>r.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===t:n.yAxisId===t),Pte=ke([p4,Hr,_y],Vc),m4=r=>r.referenceElements.areas,Lte=ke([m4,Hr,_y],Vc),g4=r=>r.referenceElements.lines,kte=ke([g4,Hr,_y],Vc),y4=(r,e)=>{var t=Gs(r.map(n=>e==="xAxis"?n.x:n.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},Mte=ke(Pte,Hr,y4),v4=(r,e)=>{var t=Gs(r.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},Nte=ke([Lte,Hr],v4);function jte(r){var e;if(r.x!=null)return Gs([r.x]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.x);return t==null||t.length===0?[]:Gs(t)}function Fte(r){var e;if(r.y!=null)return Gs([r.y]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.y);return t==null||t.length===0?[]:Gs(t)}var b4=(r,e)=>{var t=r.flatMap(n=>e==="xAxis"?jte(n):Fte(n));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},Bte=ke([kte,Hr],b4),Ute=ke(Mte,Bte,Nte,(r,e,t)=>n0(r,t,e)),x4=(r,e,t,n,i,a,s,o)=>{if(t!=null)return t;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?n0(n,a,i):n0(a,i);return Xee(e,c,r.allowDataOverflow)},$te=ke([Nn,f4,d4,Dte,Ite,Ute,ir,Hr],x4,{memoizeOptions:{resultEqualityCheck:Ty}}),Hte=[0,1],S4=(r,e,t,n,i,a,s)=>{if(!((r==null||t==null||t.length===0)&&s===void 0)){var{dataKey:o,type:l}=r,c=tl(e,a);if(c&&o==null){var f;return q3(0,(f=t?.length)!==null&&f!==void 0?f:0)}return l==="category"?Rte(n,r,c):i==="expand"?Hte:s}},EA=ke([Nn,ir,bA,Dy,Sy,Hr,$te],S4),E4=(r,e,t,n,i)=>{if(r!=null){var{scale:a,type:s}=r;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(th(a));return o in fd?o:"point"}}},gh=ke([Nn,ir,J$,fA,Hr],E4);function Gte(r){if(r!=null){if(r in fd)return fd[r]();var e="scale".concat(th(r));if(e in fd)return fd[e]()}}function wA(r,e,t,n){if(!(t==null||n==null)){if(typeof r.scale=="function")return r.scale.copy().domain(t).range(n);var i=Gte(e);if(i!=null){var a=i.domain(t).range(n);return N7(a),a}}}var w4=(r,e,t)=>{var n=xA(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wo(r))return ste(r,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Wo(r))return ote(r,e.tickCount,e.allowDecimals)}},_A=ke([EA,hh,gh],w4),_4=(r,e,t,n)=>{if(n!=="angleAxis"&&r?.type==="number"&&Wo(e)&&Array.isArray(t)&&t.length>0){var i=e[0],a=t[0],s=e[1],o=t[t.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},Kte=ke([Nn,EA,_A,Hr],_4),zte=ke(Dy,Nn,(r,e)=>{if(!(!e||e.type!=="number")){var t=1/0,n=Array.from(Gs(r.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];t=Math.min(t,s)}return t/i}}),T4=ke(zte,ir,lte,dn,(r,e,t,n)=>n,(r,e,t,n,i)=>{if(!Zr(r))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return r*a/2;if(i==="no-gap"){var s=qo(t,r*a),o=r*a/2;return o-s-(o-s)/a*s}return 0}),Yte=(r,e)=>{var t=Zs(r,e);return t==null||typeof t.padding!="string"?0:T4(r,"xAxis",e,t.padding)},qte=(r,e)=>{var t=Js(r,e);return t==null||typeof t.padding!="string"?0:T4(r,"yAxis",e,t.padding)},Wte=ke(Zs,Yte,(r,e)=>{var t,n;if(r==null)return{left:0,right:0};var{padding:i}=r;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),Vte=ke(Js,qte,(r,e)=>{var t,n;if(r==null)return{top:0,bottom:0};var{padding:i}=r;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),Qte=ke([dn,Wte,ly,oy,(r,e,t)=>t],(r,e,t,n,i)=>{var{padding:a}=n;return i?[a.left,t.width-a.right]:[r.left+e.left,r.left+r.width-e.right]}),Xte=ke([dn,ir,Vte,ly,oy,(r,e,t)=>t],(r,e,t,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:e==="horizontal"?[r.top+r.height-t.bottom,r.top+t.top]:[r.top+t.top,r.top+r.height-t.bottom]}),yh=(r,e,t,n)=>{var i;switch(e){case"xAxis":return Qte(r,t,n);case"yAxis":return Xte(r,t,n);case"zAxis":return(i=vA(r,t))===null||i===void 0?void 0:i.range;case"angleAxis":return Y$(r);case"radiusAxis":return q$(r,t);default:return}},A4=ke([Nn,yh],Ey),Qc=ke([Nn,gh,Kte,A4],wA);ke([ph,SA,Hr],Ote);function D4(r,e){return r.id<e.id?-1:r.id>e.id?1:0}var Oy=(r,e)=>e,Iy=(r,e,t)=>t,Zte=ke(ay,Oy,Iy,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(D4)),Jte=ke(sy,Oy,Iy,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(D4)),O4=(r,e)=>({width:r.width,height:e.height}),ere=(r,e)=>{var t=typeof e.width=="number"?e.width:sh;return{width:t,height:r.height}},tre=ke(dn,Zs,O4),rre=(r,e,t)=>{switch(e){case"top":return r.top;case"bottom":return t-r.bottom;default:return 0}},nre=(r,e,t)=>{switch(e){case"left":return r.left;case"right":return t-r.right;default:return 0}},ire=ke(Qs,dn,Zte,Oy,Iy,(r,e,t,n,i)=>{var a={},s;return t.forEach(o=>{var l=O4(e,o);s==null&&(s=rre(e,n,r));var c=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),a}),are=ke(Vs,dn,Jte,Oy,Iy,(r,e,t,n,i)=>{var a={},s;return t.forEach(o=>{var l=ere(e,o);s==null&&(s=nre(e,n,r));var c=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),a}),sre=(r,e)=>{var t=Zs(r,e);if(t!=null)return ire(r,t.orientation,t.mirror)},ore=ke([dn,Zs,sre,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}}),lre=(r,e)=>{var t=Js(r,e);if(t!=null)return are(r,t.orientation,t.mirror)},ure=ke([dn,Js,lre,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}}),cre=ke(dn,Js,(r,e)=>{var t=typeof e.width=="number"?e.width:sh;return{width:t,height:r.height}}),I4=(r,e,t,n)=>{if(t!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=t,o=tl(r,n),l=e.map(c=>c.value);if(s&&o&&a==="category"&&i&&_U(l))return l}},TA=ke([ir,Dy,Nn,Hr],I4),C4=(r,e,t,n)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:a}=t,s=tl(r,n);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},AA=ke([ir,Dy,hh,Hr],C4),YM=ke([ir,bte,gh,Qc,TA,AA,yh,_A,Hr],(r,e,t,n,i,a,s,o,l)=>{if(e!=null){var c=tl(r,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:t,scale:n}}}),fre=(r,e,t,n,i,a,s,o,l)=>{if(!(e==null||n==null)){var c=tl(r,l),{type:f,ticks:h,tickCount:p}=e,g=t==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=f==="category"&&n.bandwidth?n.bandwidth()/g:0;y=l==="angleAxis"&&a!=null&&a.length>=2?Ki(a[0]-a[1])*2*y:y;var b=h||i;if(b){var v=b.map((E,S)=>{var w=s?s.indexOf(E):E;return{index:S,coordinate:n(w)+y,value:E,offset:y}});return v.filter(E=>Zr(E.coordinate))}return c&&o?o.map((E,S)=>({coordinate:n(E)+y,value:E,index:S,offset:y})).filter(E=>Zr(E.coordinate)):n.ticks?n.ticks(p).map(E=>({coordinate:n(E)+y,value:E,offset:y})):n.domain().map((E,S)=>({coordinate:n(E)+y,value:s?s[E]:E,index:S,offset:y}))}},R4=ke([ir,hh,gh,Qc,_A,yh,TA,AA,Hr],fre),dre=(r,e,t,n,i,a,s)=>{if(!(e==null||t==null||n==null||n[0]===n[1])){var o=tl(r,s),{tickCount:l}=e,c=0;return c=s==="angleAxis"&&n?.length>=2?Ki(n[0]-n[1])*2*c:c,o&&a?a.map((f,h)=>({coordinate:t(f)+c,value:f,index:h,offset:c})):t.ticks?t.ticks(l).map(f=>({coordinate:t(f)+c,value:f,offset:c})):t.domain().map((f,h)=>({coordinate:t(f)+c,value:i?i[f]:f,index:h,offset:c}))}},P4=ke([ir,hh,Qc,yh,TA,AA,Hr],dre),L4=ke(Nn,Qc,(r,e)=>{if(!(r==null||e==null))return r0(r0({},r),{},{scale:e})}),hre=ke([Nn,gh,EA,A4],wA);ke((r,e,t)=>vA(r,t),hre,(r,e)=>{if(!(r==null||e==null))return r0(r0({},r),{},{scale:e})});var pre=ke([ir,ay,sy],(r,e,t)=>{switch(r){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),k4=r=>r.options.defaultTooltipEventType,M4=r=>r.options.validateTooltipEventTypes;function N4(r,e,t){if(r==null)return e;var n=r?"axis":"item";return t==null?e:t.includes(n)?n:e}function DA(r,e){var t=k4(r),n=M4(r);return N4(e,t,n)}function mre(r){return ot(e=>DA(e,r))}var j4=(r,e)=>{var t,n=Number(e);if(!(Fa(n)||e==null))return n>=0?r==null||(t=r[n])===null||t===void 0?void 0:t.value:void 0},gre=r=>r.tooltip.settings,Bo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},yre={itemInteraction:{click:Bo,hover:Bo},axisInteraction:{click:Bo,hover:Bo},keyboardInteraction:Bo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},F4=ri({name:"tooltip",initialState:yre,reducers:{addTooltipEntrySettings:{reducer(r,e){r.tooltipItemPayloads.push(e.payload)},prepare:or()},replaceTooltipEntrySettings:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).tooltipItemPayloads.indexOf(t);i>-1&&(r.tooltipItemPayloads[i]=n)},prepare:or()},removeTooltipEntrySettings:{reducer(r,e){var t=la(r).tooltipItemPayloads.indexOf(e.payload);t>-1&&r.tooltipItemPayloads.splice(t,1)},prepare:or()},setTooltipSettingsState(r,e){r.settings=e.payload},setActiveMouseOverItemIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.itemInteraction.hover.active=!0,r.itemInteraction.hover.index=e.payload.activeIndex,r.itemInteraction.hover.dataKey=e.payload.activeDataKey,r.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(r){r.itemInteraction.hover.active=!1,r.axisInteraction.hover.active=!1},mouseLeaveItem(r){r.itemInteraction.hover.active=!1},setActiveClickItemIndex(r,e){r.syncInteraction.active=!1,r.itemInteraction.click.active=!0,r.keyboardInteraction.active=!1,r.itemInteraction.click.index=e.payload.activeIndex,r.itemInteraction.click.dataKey=e.payload.activeDataKey,r.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(r,e){r.syncInteraction.active=!1,r.axisInteraction.hover.active=!0,r.keyboardInteraction.active=!1,r.axisInteraction.hover.index=e.payload.activeIndex,r.axisInteraction.hover.dataKey=e.payload.activeDataKey,r.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.axisInteraction.click.active=!0,r.axisInteraction.click.index=e.payload.activeIndex,r.axisInteraction.click.dataKey=e.payload.activeDataKey,r.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(r,e){r.syncInteraction=e.payload},setKeyboardInteraction(r,e){r.keyboardInteraction.active=e.payload.active,r.keyboardInteraction.index=e.payload.activeIndex,r.keyboardInteraction.coordinate=e.payload.activeCoordinate,r.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:vre,replaceTooltipEntrySettings:bre,removeTooltipEntrySettings:xre,setTooltipSettingsState:Sre,setActiveMouseOverItemIndex:Ere,mouseLeaveItem:jve,mouseLeaveChart:B4,setActiveClickItemIndex:Fve,setMouseOverAxisIndex:U4,setMouseClickAxisIndex:wre,setSyncInteraction:oT,setKeyboardInteraction:lT}=F4.actions,_re=F4.reducer;function qM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function em(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(t),!0).forEach(function(n){Tre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tre(r,e,t){return(e=Are(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Are(r){var e=Dre(r,"string");return typeof e=="symbol"?e:e+""}function Dre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ore(r,e,t){return e==="axis"?t==="click"?r.axisInteraction.click:r.axisInteraction.hover:t==="click"?r.itemInteraction.click:r.itemInteraction.hover}function Ire(r){return r.index!=null}var $4=(r,e,t,n)=>{if(e==null)return Bo;var i=Ore(r,e,t);if(i==null)return Bo;if(i.active)return i;if(r.keyboardInteraction.active)return r.keyboardInteraction;if(r.syncInteraction.active&&r.syncInteraction.index!=null)return r.syncInteraction;var a=r.settings.active===!0;if(Ire(i)){if(a)return em(em({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return em(em({},Bo),{},{coordinate:i.coordinate})};function Cre(r){if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(r instanceof Date){var e=r.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(r);return Number.isFinite(t)?t:void 0}function Rre(r,e){var t=Cre(r),n=e[0],i=e[1];if(t===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return t>=a&&t<=s}function Pre(r,e,t){if(t==null||e==null)return!0;var n=xn(r,e);return n==null||!Wo(t)?!0:Rre(n,t)}var OA=(r,e,t,n)=>{var i=r?.index;if(i==null)return null;var a=Number(i);if(!Zr(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(a,o)),c=e[l];return c==null||Pre(c,t,n)?String(l):null},H4=(r,e,t,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,a);if(c!=null)return c;var f=i?.[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(n.top+e)/2};default:return{x:(n.left+r)/2,y:f.coordinate}}}},G4=(r,e,t,n)=>{if(e==="axis")return r.tooltipItemPayloads;if(r.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=r.itemInteraction.hover.dataKey:i=r.itemInteraction.click.dataKey,i==null&&n!=null?[r.tooltipItemPayloads[0]]:r.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},vh=r=>r.options.tooltipPayloadSearcher,Xc=r=>r.tooltip;function WM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function VM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WM(Object(t),!0).forEach(function(n){Lre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Lre(r,e,t){return(e=kre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kre(r){var e=Mre(r,"string");return typeof e=="symbol"?e:e+""}function Mre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Nre(r,e){return r??e}var K4=(r,e,t,n,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:f}=t,h=[];return r.reduce((p,g)=>{var y,{dataDefinedOnItem:b,settings:v}=g,E=Nre(b,o),S=Array.isArray(E)?b3(E,c,f):E,w=(y=v?.dataKey)!==null&&y!==void 0?y:n,A=v?.nameKey,_;if(n&&Array.isArray(S)&&!Array.isArray(S[0])&&s==="axis"?_=TU(S,n,i):_=a(S,e,l,A),Array.isArray(_))_.forEach(D=>{var P=VM(VM({},v),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});p.push(mk({tooltipEntrySettings:P,dataKey:D.dataKey,payload:D.payload,value:xn(D.payload,D.dataKey),name:D.name}))});else{var I;p.push(mk({tooltipEntrySettings:v,dataKey:w,payload:_,value:xn(_,w),name:(I=xn(_,A))!==null&&I!==void 0?I:v?.name}))}return p},h)}},IA=ke([Kr,ir,J$,fA,Gr],E4),jre=ke([r=>r.graphicalItems.cartesianItems,r=>r.graphicalItems.polarItems],(r,e)=>[...r,...e]),Fre=ke([Gr,Wc],e4),bh=ke([jre,Kr,Fre],r4,{memoizeOptions:{resultEqualityCheck:Ay}}),Bre=ke([bh],r=>r.filter(yA)),Ure=ke([bh],a4,{memoizeOptions:{resultEqualityCheck:Ay}}),Zc=ke([Ure,il],s4),$re=ke([Bre,il,Kr],Q$),CA=ke([Zc,Kr,bh],o4),z4=ke([Kr],xA),Hre=ke([Kr],r=>r.allowDataOverflow),Y4=ke([z4,Hre],O$),Gre=ke([bh],r=>r.filter(yA)),Kre=ke([$re,Gre,Sy,H$],u4),zre=ke([Kre,il,Gr,Y4],c4),Yre=ke([bh],i4),qre=ke([Zc,Kr,Yre,SA,Gr],h4,{memoizeOptions:{resultEqualityCheck:Ty}}),Wre=ke([p4,Gr,Wc],Vc),Vre=ke([Wre,Gr],y4),Qre=ke([m4,Gr,Wc],Vc),Xre=ke([Qre,Gr],v4),Zre=ke([g4,Gr,Wc],Vc),Jre=ke([Zre,Gr],b4),ene=ke([Vre,Jre,Xre],n0),tne=ke([Kr,z4,Y4,zre,qre,ene,ir,Gr],x4),xh=ke([Kr,ir,Zc,CA,Sy,Gr,tne],S4),rne=ke([xh,Kr,IA],w4),nne=ke([Kr,xh,rne,Gr],_4),q4=r=>{var e=Gr(r),t=Wc(r),n=!1;return yh(r,e,t,n)},W4=ke([Kr,q4],Ey),V4=ke([Kr,IA,nne,W4],wA),ine=ke([ir,CA,Kr,Gr],I4),ane=ke([ir,CA,Kr,Gr],C4),sne=(r,e,t,n,i,a,s,o)=>{if(e){var{type:l}=e,c=tl(r,o);if(n){var f=t==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Ki(i[0]-i[1])*2*h:h,c&&s?s.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:a?a[p]:p,index:g,offset:h}))}}},eo=ke([ir,Kr,IA,V4,q4,ine,ane,Gr],sne),RA=ke([k4,M4,gre],(r,e,t)=>N4(t.shared,r,e)),Q4=r=>r.tooltip.settings.trigger,PA=r=>r.tooltip.settings.defaultIndex,Sh=ke([Xc,RA,Q4,PA],$4),Nd=ke([Sh,Zc,mh,xh],OA),X4=ke([eo,Nd],j4),one=ke([Sh],r=>{if(r)return r.dataKey});ke([Sh],r=>{if(r)return r.graphicalItemId});var Z4=ke([Xc,RA,Q4,PA],G4),lne=ke([Vs,Qs,ir,dn,eo,PA,Z4,vh],H4),une=ke([Sh,lne],(r,e)=>r!=null&&r.coordinate?r.coordinate:e),cne=ke([Sh],r=>r.active),fne=ke([Z4,Nd,il,mh,X4,vh,RA],K4),dne=ke([fne],r=>{if(r!=null){var e=r.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function QM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function XM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(t),!0).forEach(function(n){hne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function hne(r,e,t){return(e=pne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pne(r){var e=mne(r,"string");return typeof e=="symbol"?e:e+""}function mne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var gne=()=>ot(Kr),yne=()=>{var r=gne(),e=ot(eo),t=ot(V4);return Ng(!r||!t?void 0:XM(XM({},r),{},{scale:t}),e)};function ZM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Wu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(t),!0).forEach(function(n){vne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ZM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vne(r,e,t){return(e=bne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bne(r){var e=xne(r,"string");return typeof e=="symbol"?e:e+""}function xne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Sne=(r,e,t,n)=>{var i=e.find(a=>a&&a.index===t);if(i){if(r==="horizontal")return{x:i.coordinate,y:n.chartY};if(r==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Ene=(r,e,t,n)=>{var i=e.find(c=>c&&c.index===t);if(i){if(r==="centric"){var a=i.coordinate,{radius:s}=n;return Wu(Wu(Wu({},n),fn(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return Wu(Wu(Wu({},n),fn(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function wne(r,e){var{chartX:t,chartY:n}=r;return t>=e.left&&t<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var J4=(r,e,t,n,i)=>{var a,s=-1,o=(a=e?.length)!==null&&a!==void 0?a:0;if(o<=1||r==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?t[l-1].coordinate:t[o-1].coordinate,f=t[l].coordinate,h=l>=o-1?t[0].coordinate:t[l+1].coordinate,p=void 0;if(Ki(f-c)!==Ki(h-f)){var g=[];if(Ki(h-f)===Ki(i[1]-i[0])){p=h;var y=f+i[1]-i[0];g[0]=Math.min(y,(y+c)/2),g[1]=Math.max(y,(y+c)/2)}else{p=c;var b=h+i[1]-i[0];g[0]=Math.min(f,(b+f)/2),g[1]=Math.max(f,(b+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(r>v[0]&&r<=v[1]||r>=g[0]&&r<=g[1]){({index:s}=t[l]);break}}else{var E=Math.min(c,h),S=Math.max(c,h);if(r>(E+f)/2&&r<=(S+f)/2){({index:s}=t[l]);break}}}else if(e){for(var w=0;w<o;w++)if(w===0&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w>0&&w<o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w===o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2){({index:s}=e[w]);break}}return s},_ne=()=>ot(fA),LA=(r,e)=>e,e6=(r,e,t)=>t,kA=(r,e,t,n)=>n,Tne=ke(eo,r=>Q0(r,e=>e.coordinate)),MA=ke([Xc,LA,e6,kA],$4),NA=ke([MA,Zc,mh,xh],OA),Ane=(r,e,t)=>{if(e!=null){var n=Xc(r);return e==="axis"?t==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:t==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},t6=ke([Xc,LA,e6,kA],G4),i0=ke([Vs,Qs,ir,dn,eo,kA,t6,vh],H4),Dne=ke([MA,i0],(r,e)=>{var t;return(t=r.coordinate)!==null&&t!==void 0?t:e}),r6=ke([eo,NA],j4),One=ke([t6,NA,il,mh,r6,vh,LA],K4),Ine=ke([MA,NA],(r,e)=>({isActive:r.active&&e!=null,activeIndex:e})),Cne=(r,e,t,n,i,a,s)=>{if(!(!r||!t||!n||!i)&&wne(r,s)){var o=K7(r,e),l=J4(o,a,i,t,n),c=Sne(e,i,l,r);return{activeIndex:String(l),activeCoordinate:c}}},Rne=(r,e,t,n,i,a,s)=>{if(!(!r||!n||!i||!a||!t)){var o=dZ(r,t);if(o){var l=z7(o,e),c=J4(l,s,a,n,i),f=Ene(e,a,c,o);return{activeIndex:String(c),activeCoordinate:f}}}},Pne=(r,e,t,n,i,a,s,o)=>{if(!(!r||!e||!n||!i||!a))return e==="horizontal"||e==="vertical"?Cne(r,e,n,i,a,s,o):Rne(r,e,t,n,i,a,s)},Lne=ke(r=>r.zIndex.zIndexMap,(r,e)=>e,(r,e,t)=>t,(r,e,t)=>{if(e!=null){var n=r[e];if(n!=null)return t?n.panoramaElementId:n.elementId}}),kne=ke(r=>r.zIndex.zIndexMap,r=>{var e=Object.keys(r).map(n=>parseInt(n,10)).concat(Object.values(Cn)),t=Array.from(new Set(e));return t.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:pte}});function JM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(t),!0).forEach(function(n){Mne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Mne(r,e,t){return(e=Nne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Nne(r){var e=jne(r,"string");return typeof e=="symbol"?e:e+""}function jne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Fne={},Bne={zIndexMap:Object.values(Cn).reduce((r,e)=>eN(eN({},r),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Fne)},Une=new Set(Object.values(Cn));function $ne(r){return Une.has(r)}var n6=ri({name:"zIndex",initialState:Bne,reducers:{registerZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]?r.zIndexMap[t].consumers+=1:r.zIndexMap[t]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:or()},unregisterZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(r.zIndexMap[t].consumers-=1,r.zIndexMap[t].consumers<=0&&!$ne(t)&&delete r.zIndexMap[t])},prepare:or()},registerZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t,elementId:n,isPanorama:i}=e.payload;r.zIndexMap[t]?i?r.zIndexMap[t].panoramaElementId=n:r.zIndexMap[t].elementId=n:r.zIndexMap[t]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:or()},unregisterZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(e.payload.isPanorama?r.zIndexMap[t].panoramaElementId=void 0:r.zIndexMap[t].elementId=void 0)},prepare:or()}}}),{registerZIndexPortal:Hne,unregisterZIndexPortal:Gne,registerZIndexPortalId:Kne,unregisterZIndexPortalId:zne}=n6.actions,Yne=n6.reducer;function to(r){var{zIndex:e,children:t}=r,n=_Q(),i=n&&e!==void 0&&e!==0,a=ni(),s=Lr();R.useLayoutEffect(()=>i?(s(Hne({zIndex:e})),()=>{s(Gne({zIndex:e}))}):rh,[s,e,i]);var o=ot(c=>Lne(c,e,a));if(!i)return t;if(!o)return null;var l=document.getElementById(o);return l?Zd.createPortal(t,l):null}function uT(){return uT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},uT.apply(null,arguments)}function tN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tN(Object(t),!0).forEach(function(n){qne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qne(r,e,t){return(e=Wne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Wne(r){var e=Vne(r,"string");return typeof e=="symbol"?e:e+""}function Vne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Qne(r){var{cursor:e,cursorComp:t,cursorProps:n}=r;return R.isValidElement(e)?R.cloneElement(e,n):R.createElement(t,n)}function Xne(r){var e,{coordinate:t,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:f}=r,h=t,p=n,g=i;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var y,b,v;if(f==="ScatterChart")y=h,b=AX,v=Cn.cursorLine;else if(f==="BarChart")y=DX(o,h,a,s),b=G3,v=Cn.cursorRectangle;else if(o==="radial"&&DU(h)){var{cx:E,cy:S,radius:w,startAngle:A,endAngle:_}=K3(h);y={cx:E,cy:S,startAngle:A,endAngle:_,innerRadius:w,outerRadius:w},b=Y3,v=Cn.cursorLine}else y={points:gZ(o,h,a)},b=F3,v=Cn.cursorLine;var I=typeof l=="object"&&"className"in l?l.className:void 0,D=tm(tm(tm(tm({stroke:"#ccc",pointerEvents:"none"},a),y),z0(l)),{},{payload:p,payloadIndex:g,className:mt("recharts-tooltip-cursor",I)});return R.createElement(to,{zIndex:(e=r.zIndex)!==null&&e!==void 0?e:v},R.createElement(Qne,{cursor:l,cursorComp:b,cursorProps:D}))}function Zne(r){var e=yne(),t=I3(),n=cy(),i=_ne();return e==null||t==null||n==null||i==null?null:R.createElement(Xne,uT({},r,{offset:t,layout:n,tooltipAxisBandSize:e,chartName:i}))}var i6=R.createContext(null),Jne=()=>R.useContext(i6),AS={exports:{}},rN;function eie(){return rN||(rN=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,h||l,p),y=t?t+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=t?t+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,y=new Array(g);p<g;p++)y[p]=h[p].fn;return y},o.prototype.listenerCount=function(c){var f=t?t+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,y){var b=t?t+c:c;if(!this._events[b])return!1;var v=this._events[b],E=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,y),!0}for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var A=v.length,_;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),E){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,h);break;case 4:v[w].fn.call(v[w].context,f,h,p);break;default:if(!S)for(_=1,S=new Array(E-1);_<E;_++)S[_-1]=arguments[_];v[w].fn.apply(v[w].context,S)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=t?t+c:c;if(!this._events[g])return this;if(!f)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!h||y.context===h)&&s(this,g);else{for(var b=0,v=[],E=y.length;b<E;b++)(y[b].fn!==f||p&&!y[b].once||h&&y[b].context!==h)&&v.push(y[b]);v.length?this._events[g]=v.length===1?v[0]:v:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=t?t+c:c,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(AS)),AS.exports}var tie=eie();const rie=za(tie);var jd=new rie,cT="recharts.syncEvent.tooltip",nN="recharts.syncEvent.brush";function nie(r,e){if(e){var t=Number.parseInt(e,10);if(!Fa(t))return r?.[t]}}var iie={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},a6=ri({name:"options",initialState:iie,reducers:{createEventEmitter:r=>{r.eventEmitter==null&&(r.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aie=a6.reducer,{createEventEmitter:sie}=a6.actions;function oie(r){return r.tooltip.syncInteraction}var lie={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},s6=ri({name:"chartData",initialState:lie,reducers:{setChartData(r,e){if(r.chartData=e.payload,e.payload==null){r.dataStartIndex=0,r.dataEndIndex=0;return}e.payload.length>0&&r.dataEndIndex!==e.payload.length-1&&(r.dataEndIndex=e.payload.length-1)},setComputedData(r,e){r.computedData=e.payload},setDataStartEndIndexes(r,e){var{startIndex:t,endIndex:n}=e.payload;t!=null&&(r.dataStartIndex=t),n!=null&&(r.dataEndIndex=n)}}}),{setChartData:iN,setDataStartEndIndexes:uie,setComputedData:Bve}=s6.actions,cie=s6.reducer,fie=["x","y"];function aN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(t),!0).forEach(function(n){die(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function die(r,e,t){return(e=hie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hie(r){var e=pie(r,"string");return typeof e=="symbol"?e:e+""}function pie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function mie(r,e){if(r==null)return{};var t,n,i=gie(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function gie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function yie(){var r=ot(dA),e=ot(hA),t=Lr(),n=ot(G$),i=ot(eo),a=cy(),s=uy(),o=ot(l=>l.rootProps.className);R.useEffect(()=>{if(r==null)return rh;var l=(c,f,h)=>{if(e!==h&&r===c){if(n==="index"){var p;if(s&&f!==null&&f!==void 0&&(p=f.payload)!==null&&p!==void 0&&p.coordinate&&f.payload.sourceViewBox){var g=f.payload.coordinate,{x:y,y:b}=g,v=mie(g,fie),{x:E,y:S,width:w,height:A}=f.payload.sourceViewBox,_=Vu(Vu({},v),{},{x:s.x+(w?(y-E)/w:0)*s.width,y:s.y+(A?(b-S)/A:0)*s.height});t(Vu(Vu({},f),{},{payload:Vu(Vu({},f.payload),{},{coordinate:_})}))}else t(f);return}if(i!=null){var I;if(typeof n=="function"){var D={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=n(i,D);I=i[P]}else n==="value"&&(I=i.find(K=>String(K.value)===f.payload.label));var{coordinate:k}=f.payload;if(I==null||f.payload.active===!1||k==null||s==null){t(oT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:H}=k,N=Math.min(M,s.x+s.width),Q=Math.min(H,s.y+s.height),z={x:a==="horizontal"?I.coordinate:N,y:a==="horizontal"?Q:I.coordinate},V=oT({active:f.payload.active,coordinate:z,dataKey:f.payload.dataKey,index:String(I.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});t(V)}}};return jd.on(cT,l),()=>{jd.off(cT,l)}},[o,t,e,r,n,i,a,s])}function vie(){var r=ot(dA),e=ot(hA),t=Lr();R.useEffect(()=>{if(r==null)return rh;var n=(i,a,s)=>{e!==s&&r===i&&t(uie(a))};return jd.on(nN,n),()=>{jd.off(nN,n)}},[t,e,r])}function bie(){var r=Lr();R.useEffect(()=>{r(sie())},[r]),yie(),vie()}function xie(r,e,t,n,i,a){var s=ot(g=>Ane(g,r,e)),o=ot(hA),l=ot(dA),c=ot(G$),f=ot(oie),h=f?.active,p=uy();R.useEffect(()=>{if(!h&&l!=null&&o!=null){var g=oT({active:a,coordinate:t,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});jd.emit(cT,l,g,o)}},[h,t,s,i,n,o,l,c,a,p])}function sN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function oN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(t),!0).forEach(function(n){Sie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Sie(r,e,t){return(e=Eie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Eie(r){var e=wie(r,"string");return typeof e=="symbol"?e:e+""}function wie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _ie(r){return r.dataKey}function Tie(r,e){return R.isValidElement(r)?R.cloneElement(r,e):typeof r=="function"?R.createElement(r,e):R.createElement(aX,e)}var lN=[],Aie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function uN(r){var e,t,n=Sn(r,Aie),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:f,offset:h,payloadUniqBy:p,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:v,cursor:E,shared:S,trigger:w,defaultIndex:A,portal:_,axisId:I}=n,D=Lr(),P=typeof A=="number"?String(A):A;R.useEffect(()=>{D(Sre({shared:S,trigger:w,axisId:I,active:i,defaultIndex:P}))},[D,S,w,I,i,P]);var k=uy(),M=j3(),H=mre(S),{activeIndex:N,isActive:Q}=(e=ot(le=>Ine(le,H,w,P)))!==null&&e!==void 0?e:{},z=ot(le=>One(le,H,w,P)),V=ot(le=>r6(le,H,w,P)),K=ot(le=>Dne(le,H,w,P)),Y=z,W=Jne(),J=(t=i??Q)!==null&&t!==void 0?t:!1,[G,j]=GU([Y,J]),F=H==="axis"?V:void 0;xie(H,w,K,F,N,J);var Z=_??W;if(Z==null||k==null||H==null)return null;var ae=Y??lN;J||(ae=lN),c&&ae.length&&(ae=FU(ae.filter(le=>le.value!=null&&(le.hide!==!0||n.includeHidden)),p,_ie));var ee=ae.length>0,ve=R.createElement(dX,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:J,coordinate:K,hasPayload:ee,offset:h,position:g,reverseDirection:y,useTranslate3d:b,viewBox:k,wrapperStyle:v,lastBoundingBox:G,innerRef:j,hasPortalFromProps:!!_},Tie(l,oN(oN({},n),{},{payload:ae,label:F,active:J,activeIndex:N,coordinate:K,accessibilityLayer:M})));return R.createElement(R.Fragment,null,Zd.createPortal(ve,Z),J&&R.createElement(Zne,{cursor:E,tooltipEventType:H,coordinate:K,payload:ae,index:N}))}function Die(r,e,t){return(e=Oie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Oie(r){var e=Iie(r,"string");return typeof e=="symbol"?e:e+""}function Iie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class Cie{constructor(e){Die(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function cN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rie(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cN(Object(t),!0).forEach(function(n){Pie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Pie(r,e,t){return(e=Lie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lie(r){var e=kie(r,"string");return typeof e=="symbol"?e:e+""}function kie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Mie={cacheSize:2e3,enableCache:!0},o6=Rie({},Mie),fN=new Cie(o6.cacheSize),Nie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dN="recharts_measurement_span";function jie(r,e){var t=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(r,"|").concat(t,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var hN=(r,e)=>{try{var t=document.getElementById(dN);t||(t=document.createElement("span"),t.setAttribute("id",dN),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,Nie,e),t.textContent="".concat(r);var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},yd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||lh.isSsr)return{width:0,height:0};if(!o6.enableCache)return hN(e,t);var n=jie(e,t),i=fN.get(n);if(i)return i;var a=hN(e,t);return fN.set(n,a),a},pN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Bie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,l6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uie=Object.keys(l6),cc="NaN";function $ie(r,e){return r*l6[e]}class Vn{static parse(e){var t,[,n,i]=(t=Bie.exec(e))!==null&&t!==void 0?t:[];return new Vn(parseFloat(n),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Fa(e)&&(this.unit=""),t!==""&&!Fie.test(t)&&(this.num=NaN,this.unit=""),Uie.includes(t)&&(this.num=$ie(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fa(this.num)}}function u6(r){if(r.includes(cc))return cc;for(var e=r;e.includes("*")||e.includes("/");){var t,[,n,i,a]=(t=pN.exec(e))!==null&&t!==void 0?t:[],s=Vn.parse(n??""),o=Vn.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return cc;e=e.replace(pN,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,f,h,p]=(c=mN.exec(e))!==null&&c!==void 0?c:[],g=Vn.parse(f??""),y=Vn.parse(p??""),b=h==="+"?g.add(y):g.subtract(y);if(b.isNaN())return cc;e=e.replace(mN,b.toString())}return e}var gN=/\(([^()]*)\)/;function Hie(r){for(var e=r,t;(t=gN.exec(e))!=null;){var[,n]=t;e=e.replace(gN,u6(n))}return e}function Gie(r){var e=r.replace(/\s+/g,"");return e=Hie(e),e=u6(e),e}function Kie(r){try{return Gie(r)}catch{return cc}}function DS(r){var e=Kie(r.slice(5,-1));return e===cc?"":e}var zie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Yie=["dx","dy","angle","className","breakAll"];function fT(){return fT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},fT.apply(null,arguments)}function yN(r,e){if(r==null)return{};var t,n,i=qie(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function qie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var c6=/[ \f\n\r\t\v\u2028\u2029]+/,f6=r=>{var{children:e,breakAll:t,style:n}=r;try{var i=[];Xr(e)||(t?i=e.toString().split(""):i=e.toString().split(c6));var a=i.map(o=>({word:o,width:yd(o,n).width})),s=t?0:yd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function Wie(r){return r==="start"||r==="middle"||r==="end"||r==="inherit"}var d6=(r,e,t,n)=>r.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(e==null||n||l.width+o+t<Number(e)))l.words.push(s),l.width+=o+t;else{var c={words:[s],width:o};i.push(c)}return i},[]),h6=r=>r.reduce((e,t)=>e.width>t.width?e:t),Vie="",vN=(r,e,t,n,i,a,s,o)=>{var l=r.slice(0,e),c=f6({breakAll:t,style:n,children:l+Vie});if(!c)return[!1,[]];var f=d6(c.wordsWithComputedWidth,a,s,o),h=f.length>i||h6(f).width>Number(a);return[h,f]},Qie=(r,e,t,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=r,c=ut(a),f=String(s),h=d6(e,n,t,i);if(!c||i)return h;var p=h.length>a||h6(h).width>Number(n);if(!p)return h;for(var g=0,y=f.length-1,b=0,v;g<=y&&b<=f.length-1;){var E=Math.floor((g+y)/2),S=E-1,[w,A]=vN(f,S,l,o,a,n,t,i),[_]=vN(f,E,l,o,a,n,t,i);if(!w&&!_&&(g=E+1),w&&_&&(y=E-1),!w&&_){v=A;break}b++}return v||h},bN=r=>{var e=Xr(r)?[]:r.toString().split(c6);return[{words:e,width:void 0}]},Xie=r=>{var{width:e,scaleToFit:t,children:n,style:i,breakAll:a,maxLines:s}=r;if((e||t)&&!lh.isSsr){var o,l,c=f6({breakAll:a,children:n,style:i});if(c){var{wordsWithComputedWidth:f,spaceWidth:h}=c;o=f,l=h}else return bN(n);return Qie({breakAll:a,children:n,maxLines:s,style:i},o,l,e,!!t)}return bN(n)},p6="#808080",Zie={angle:0,breakAll:!1,capHeight:"0.71em",fill:p6,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},jA=R.forwardRef((r,e)=>{var t=Sn(r,Zie),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:f}=t,h=yN(t,zie),p=R.useMemo(()=>Xie({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:y,angle:b,className:v,breakAll:E}=h,S=yN(h,Yie);if(!Ba(n)||!Ba(i)||p.length===0)return null;var w=Number(n)+(ut(g)?g:0),A=Number(i)+(ut(y)?y:0);if(!Zr(w)||!Zr(A))return null;var _;switch(f){case"start":_=DS("calc(".concat(s,")"));break;case"middle":_=DS("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:_=DS("calc(".concat(p.length-1," * -").concat(a,")"));break}var I=[];if(l){var D=p[0].width,{width:P}=h;I.push("scale(".concat(ut(P)&&ut(D)?P/D:1,")"))}return b&&I.push("rotate(".concat(b,", ").concat(w,", ").concat(A,")")),I.length&&(S.transform=I.join(" ")),R.createElement("text",fT({},Ln(S),{ref:e,x:w,y:A,className:mt("recharts-text",v),textAnchor:c,fill:o.includes("url")?p6:o}),p.map((k,M)=>{var H=k.words.join(E?"":" ");return R.createElement("tspan",{x:w,dy:M===0?_:a,key:"".concat(H,"-").concat(M)},H)}))});jA.displayName="Text";var Jie=["labelRef"];function eae(r,e){if(r==null)return{};var t,n,i=tae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function tae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function xN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function wr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xN(Object(t),!0).forEach(function(n){rae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function rae(r,e,t){return(e=nae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nae(r){var e=iae(r,"string");return typeof e=="symbol"?e:e+""}function iae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ts(){return Ts=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ts.apply(null,arguments)}var m6=R.createContext(null),aae=r=>{var{x:e,y:t,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=r,l=R.useMemo(()=>({x:e,y:t,upperWidth:n,lowerWidth:i,width:a,height:s}),[e,t,n,i,a,s]);return R.createElement(m6.Provider,{value:l},o)},g6=()=>{var r=R.useContext(m6),e=uy();return r||O3(e)},sae=R.createContext(null),oae=()=>{var r=R.useContext(sae),e=ot(W$);return r||e},lae=r=>{var{value:e,formatter:t}=r,n=Xr(r.children)?e:r.children;return typeof t=="function"?t(n):n},FA=r=>r!=null&&typeof r=="function",uae=(r,e)=>{var t=Ki(e-r),n=Math.min(Math.abs(e-r),360);return t*n},cae=(r,e,t,n,i)=>{var{offset:a,className:s}=r,{cx:o,cy:l,innerRadius:c,outerRadius:f,startAngle:h,endAngle:p,clockWise:g}=i,y=(c+f)/2,b=uae(h,p),v=b>=0?1:-1,E,S;switch(e){case"insideStart":E=h+v*a,S=g;break;case"insideEnd":E=p-v*a,S=!g;break;case"end":E=p+v*a,S=g;break;default:throw new Error("Unsupported position ".concat(e))}S=b<=0?S:!S;var w=fn(o,l,y,E),A=fn(o,l,y,E+(S?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(A.x,",").concat(A.y),I=Xr(r.id)?wd("recharts-radial-line-"):r.id;return R.createElement("text",Ts({},n,{dominantBaseline:"central",className:mt("recharts-radial-bar-label",s)}),R.createElement("defs",null,R.createElement("path",{id:I,d:_})),R.createElement("textPath",{xlinkHref:"#".concat(I)},t))},fae=(r,e,t)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=r,c=(o+l)/2;if(t==="outside"){var{x:f,y:h}=fn(n,i,s+e,c);return{x:f,y:h,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:g,y}=fn(n,i,p,c);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},dT=r=>"cx"in r&&ut(r.cx),dae=(r,e)=>{var{parentViewBox:t,offset:n,position:i}=r,a;t!=null&&!dT(t)&&(a=t);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:f}=e,h=s,p=s+(l-c)/2,g=(h+p)/2,y=(l+c)/2,b=h+l/2,v=f>=0?1:-1,E=v*n,S=v>0?"end":"start",w=v>0?"start":"end",A=l>=0?1:-1,_=A*n,I=A>0?"end":"start",D=A>0?"start":"end";if(i==="top"){var P={x:h+l/2,y:o-E,textAnchor:"middle",verticalAnchor:S};return wr(wr({},P),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var k={x:p+c/2,y:o+f+E,textAnchor:"middle",verticalAnchor:w};return wr(wr({},k),a?{height:Math.max(a.y+a.height-(o+f),0),width:c}:{})}if(i==="left"){var M={x:g-_,y:o+f/2,textAnchor:I,verticalAnchor:"middle"};return wr(wr({},M),a?{width:Math.max(M.x-a.x,0),height:f}:{})}if(i==="right"){var H={x:g+y+_,y:o+f/2,textAnchor:D,verticalAnchor:"middle"};return wr(wr({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:f}:{})}var N=a?{width:y,height:f}:{};return i==="insideLeft"?wr({x:g+_,y:o+f/2,textAnchor:D,verticalAnchor:"middle"},N):i==="insideRight"?wr({x:g+y-_,y:o+f/2,textAnchor:I,verticalAnchor:"middle"},N):i==="insideTop"?wr({x:h+l/2,y:o+E,textAnchor:"middle",verticalAnchor:w},N):i==="insideBottom"?wr({x:p+c/2,y:o+f-E,textAnchor:"middle",verticalAnchor:S},N):i==="insideTopLeft"?wr({x:h+_,y:o+E,textAnchor:D,verticalAnchor:w},N):i==="insideTopRight"?wr({x:h+l-_,y:o+E,textAnchor:I,verticalAnchor:w},N):i==="insideBottomLeft"?wr({x:p+_,y:o+f-E,textAnchor:D,verticalAnchor:S},N):i==="insideBottomRight"?wr({x:p+c-_,y:o+f-E,textAnchor:I,verticalAnchor:S},N):i&&typeof i=="object"&&(ut(i.x)||Fs(i.x))&&(ut(i.y)||Fs(i.y))?wr({x:s+qo(i.x,y),y:o+qo(i.y,f),textAnchor:"end",verticalAnchor:"end"},N):wr({x:b,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},N)},hae={angle:0,offset:5,zIndex:Cn.label,position:"middle",textBreakAll:!1};function No(r){var e=Sn(r,hae),{viewBox:t,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:c}=e,f=oae(),h=g6(),p=n==="center"?h:f??h,g,y,b;if(t==null?g=p:dT(t)?g=t:g=O3(t),!g||Xr(i)&&Xr(a)&&!R.isValidElement(s)&&typeof s!="function")return null;var v=wr(wr({},e),{},{viewBox:g});if(R.isValidElement(s)){var{labelRef:E}=v,S=eae(v,Jie);return R.cloneElement(s,S)}if(typeof s=="function"){if(y=R.createElement(s,v),R.isValidElement(y))return y}else y=lae(e);var w=Ln(e);if(dT(g)){if(n==="insideStart"||n==="insideEnd"||n==="end")return cae(e,n,y,w,g);b=fae(g,e.offset,e.position)}else b=dae(e,g);return R.createElement(to,{zIndex:e.zIndex},R.createElement(jA,Ts({ref:c,className:mt("recharts-label",o)},w,b,{textAnchor:Wie(w.textAnchor)?w.textAnchor:b.textAnchor,breakAll:l}),y))}No.displayName="Label";var pae=(r,e,t)=>{if(!r)return null;var n={viewBox:e,labelRef:t};return r===!0?R.createElement(No,Ts({key:"label-implicit"},n)):Ba(r)?R.createElement(No,Ts({key:"label-implicit",value:r},n)):R.isValidElement(r)?r.type===No?R.cloneElement(r,wr({key:"label-implicit"},n)):R.createElement(No,Ts({key:"label-implicit",content:r},n)):FA(r)?R.createElement(No,Ts({key:"label-implicit",content:r},n)):r&&typeof r=="object"?R.createElement(No,Ts({},r,{key:"label-implicit"},n)):null};function mae(r){var{label:e,labelRef:t}=r,n=g6();return pae(e,n,t)||null}var OS={},IS={},SN;function gae(){return SN||(SN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}r.last=e})(IS)),IS}var CS={},EN;function yae(){return EN||(EN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}r.toArray=e})(CS)),CS}var wN;function vae(){return wN||(wN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=gae(),t=yae(),n=E1();function i(a){if(n.isArrayLike(a))return e.last(t.toArray(a))}r.last=i})(OS)),OS}var RS,_N;function bae(){return _N||(_N=1,RS=vae().last),RS}var xae=bae();const Sae=za(xae);var Eae=["valueAccessor"],wae=["dataKey","clockWise","id","textBreakAll","zIndex"];function a0(){return a0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},a0.apply(null,arguments)}function TN(r,e){if(r==null)return{};var t,n,i=_ae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function _ae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Tae=r=>Array.isArray(r.value)?Sae(r.value):r.value,y6=R.createContext(void 0),Aae=y6.Provider,v6=R.createContext(void 0);v6.Provider;function Dae(){return R.useContext(y6)}function Oae(){return R.useContext(v6)}function ig(r){var{valueAccessor:e=Tae}=r,t=TN(r,Eae),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=t,l=TN(t,wae),c=Dae(),f=Oae(),h=c||f;return!h||!h.length?null:R.createElement(to,{zIndex:o??Cn.label},R.createElement(Yo,{className:"recharts-label-list"},h.map((p,g)=>{var y,b=Xr(n)?e(p,g):xn(p&&p.payload,n),v=Xr(a)?{}:{id:"".concat(a,"-").concat(g)};return R.createElement(No,a0({key:"label-".concat(g)},Ln(p),l,v,{fill:(y=t.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:b,textBreakAll:s,viewBox:p.viewBox,index:g,zIndex:0}))})))}ig.displayName="LabelList";function Iae(r){var{label:e}=r;return e?e===!0?R.createElement(ig,{key:"labelList-implicit"}):R.isValidElement(e)||FA(e)?R.createElement(ig,{key:"labelList-implicit",content:e}):typeof e=="object"?R.createElement(ig,a0({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function hT(){return hT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hT.apply(null,arguments)}var b6=r=>{var{cx:e,cy:t,r:n,className:i}=r,a=mt("recharts-dot",i);return ut(e)&&ut(t)&&ut(n)?R.createElement("circle",hT({},ja(r),S1(r),{className:a,cx:e,cy:t,r:n})):null},Cae={radiusAxis:{},angleAxis:{}},x6=ri({name:"polarAxis",initialState:Cae,reducers:{addRadiusAxis(r,e){r.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(r,e){delete r.radiusAxis[e.payload.id]},addAngleAxis(r,e){r.angleAxis[e.payload.id]=e.payload},removeAngleAxis(r,e){delete r.angleAxis[e.payload.id]}}}),{addRadiusAxis:Uve,removeRadiusAxis:$ve,addAngleAxis:Hve,removeAngleAxis:Gve}=x6.actions,Rae=x6.reducer,S6=r=>r&&typeof r=="object"&&"clipDot"in r?!!r.clipDot:!0,PS={},AN;function Pae(){return AN||(AN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}r.isPlainObject=e})(PS)),PS}var LS,DN;function Lae(){return DN||(DN=1,LS=Pae().isPlainObject),LS}var kae=Lae();const Mae=za(kae);function ON(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function IN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(t),!0).forEach(function(n){Nae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ON(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Nae(r,e,t){return(e=jae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jae(r){var e=Fae(r,"string");return typeof e=="symbol"?e:e+""}function Fae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function s0(){return s0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},s0.apply(null,arguments)}var CN=(r,e,t,n,i)=>{var a=t-n,s;return s="M ".concat(r,",").concat(e),s+="L ".concat(r+t,",").concat(e),s+="L ".concat(r+t-a/2,",").concat(e+i),s+="L ".concat(r+t-a/2-n,",").concat(e+i),s+="L ".concat(r,",").concat(e," Z"),s},Bae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uae=r=>{var e=Sn(r,Bae),{x:t,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:f,isUpdateAnimationActive:h}=e,p=R.useRef(null),[g,y]=R.useState(-1),b=R.useRef(i),v=R.useRef(a),E=R.useRef(s),S=R.useRef(t),w=R.useRef(n),A=F1(r,"trapezoid-");if(R.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var z=p.current.getTotalLength();z&&y(z)}catch{}},[]),t!==+t||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var _=mt("recharts-trapezoid",o);if(!h)return R.createElement("g",null,R.createElement("path",s0({},Ln(e),{className:_,d:CN(t,n,i,a,s)})));var I=b.current,D=v.current,P=E.current,k=S.current,M=w.current,H="0px ".concat(g===-1?1:g,"px"),N="".concat(g,"px 0px"),Q=B3(["strokeDasharray"],c,l);return R.createElement(j1,{animationId:A,key:A,canBegin:g>0,duration:c,easing:l,isActive:h,begin:f},z=>{var V=Qn(I,i,z),K=Qn(D,a,z),Y=Qn(P,s,z),W=Qn(k,t,z),J=Qn(M,n,z);p.current&&(b.current=V,v.current=K,E.current=Y,S.current=W,w.current=J);var G=z>0?{transition:Q,strokeDasharray:N}:{strokeDasharray:H};return R.createElement("path",s0({},Ln(e),{className:_,d:CN(W,J,V,K,Y),ref:p,style:IN(IN({},G),e.style)}))})},$ae=["option","shapeType","propTransformer","activeClassName"];function Hae(r,e){if(r==null)return{};var t,n,i=Gae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Gae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function RN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function o0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(t),!0).forEach(function(n){Kae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):RN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Kae(r,e,t){return(e=zae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zae(r){var e=Yae(r,"string");return typeof e=="symbol"?e:e+""}function Yae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function qae(r,e){return o0(o0({},e),r)}function Wae(r,e){return r==="symbols"}function PN(r){var{shapeType:e,elementProps:t}=r;switch(e){case"rectangle":return R.createElement(G3,t);case"trapezoid":return R.createElement(Uae,t);case"sector":return R.createElement(Y3,t);case"symbols":if(Wae(e))return R.createElement(x1,t);break;case"curve":return R.createElement(F3,t);default:return null}}function Vae(r){return R.isValidElement(r)?r.props:r}function Qae(r){var{option:e,shapeType:t,propTransformer:n=qae,activeClassName:i="recharts-active-shape"}=r,a=Hae(r,$ae),s;if(R.isValidElement(e))s=R.cloneElement(e,o0(o0({},a),Vae(e)));else if(typeof e=="function")s=e(a,a.index);else if(Mae(e)&&typeof e!="boolean"){var o=n(e,a);s=R.createElement(PN,{shapeType:t,elementProps:o})}else{var l=a;s=R.createElement(PN,{shapeType:t,elementProps:l})}return a.isActive?R.createElement(Yo,{className:i},s):s}function Xae(r){var{tooltipEntrySettings:e}=r,t=Lr(),n=ni(),i=R.useRef(null);return R.useLayoutEffect(()=>{n||(i.current===null?t(vre(e)):i.current!==e&&t(bre({prev:i.current,next:e})),i.current=e)},[e,t,n]),R.useLayoutEffect(()=>()=>{i.current&&(t(xre(i.current)),i.current=null)},[t]),null}function Zae(r){var{legendPayload:e}=r,t=Lr(),n=ni(),i=R.useRef(null);return R.useLayoutEffect(()=>{n||(i.current===null?t(FQ(e)):i.current!==e&&t(BQ({prev:i.current,next:e})),i.current=e)},[t,n,e]),R.useLayoutEffect(()=>()=>{i.current&&(t(UQ(i.current)),i.current=null)},[t]),null}var kS,Jae=()=>{var[r]=R.useState(()=>wd("uid-"));return r},ese=(kS=YT.useId)!==null&&kS!==void 0?kS:Jae;function E6(r,e){var t=ese();return e||(r?"".concat(r,"-").concat(t):t)}var tse=R.createContext(void 0),rse=r=>{var{id:e,type:t,children:n}=r,i=E6("recharts-".concat(t),e);return R.createElement(tse.Provider,{value:i},n(i))},nse={cartesianItems:[],polarItems:[]},w6=ri({name:"graphicalItems",initialState:nse,reducers:{addCartesianGraphicalItem:{reducer(r,e){r.cartesianItems.push(e.payload)},prepare:or()},replaceCartesianGraphicalItem:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).cartesianItems.indexOf(t);i>-1&&(r.cartesianItems[i]=n)},prepare:or()},removeCartesianGraphicalItem:{reducer(r,e){var t=la(r).cartesianItems.indexOf(e.payload);t>-1&&r.cartesianItems.splice(t,1)},prepare:or()},addPolarGraphicalItem:{reducer(r,e){r.polarItems.push(e.payload)},prepare:or()},removePolarGraphicalItem:{reducer(r,e){var t=la(r).polarItems.indexOf(e.payload);t>-1&&r.polarItems.splice(t,1)},prepare:or()}}}),{addCartesianGraphicalItem:ise,replaceCartesianGraphicalItem:ase,removeCartesianGraphicalItem:sse,addPolarGraphicalItem:Kve,removePolarGraphicalItem:zve}=w6.actions,ose=w6.reducer,lse=r=>{var e=Lr(),t=R.useRef(null);return R.useLayoutEffect(()=>{t.current===null?e(ise(r)):t.current!==r&&e(ase({prev:t.current,next:r})),t.current=r},[e,r]),R.useLayoutEffect(()=>()=>{t.current&&(e(sse(t.current)),t.current=null)},[e]),null},use=R.memo(lse),cse=["points"];function LN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function MS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(t),!0).forEach(function(n){fse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function fse(r,e,t){return(e=dse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dse(r){var e=hse(r,"string");return typeof e=="symbol"?e:e+""}function hse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function l0(){return l0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},l0.apply(null,arguments)}function pse(r,e){if(r==null)return{};var t,n,i=mse(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function mse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function gse(r){var{option:e,dotProps:t,className:n}=r;if(R.isValidElement(e))return R.cloneElement(e,t);if(typeof e=="function")return e(t);var i=mt(n,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,o=pse(a,cse);return R.createElement(b6,l0({},o,{className:i}))}function yse(r,e){return r==null?!1:e?!0:r.length===1}function vse(r){var{points:e,dot:t,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:c=Cn.scatter}=r;if(!yse(e,t))return null;var f=S6(t),h=EW(t),p=e.map((y,b)=>{var v,E,S=MS(MS(MS({r:3},s),h),{},{index:b,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(E=y.y)!==null&&E!==void 0?E:void 0,dataKey:a,value:y.value,payload:y.payload,points:e});return R.createElement(gse,{key:"dot-".concat(b),option:t,dotProps:S,className:i})}),g={};return o&&l!=null&&(g.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(l,")")),R.createElement(to,{zIndex:c},R.createElement(Yo,l0({className:n},g),p))}function kN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function MN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(t),!0).forEach(function(n){bse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bse(r,e,t){return(e=xse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xse(r){var e=Sse(r,"string");return typeof e=="symbol"?e:e+""}function Sse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ese={xAxis:{},yAxis:{},zAxis:{}},_6=ri({name:"cartesianAxis",initialState:Ese,reducers:{addXAxis:{reducer(r,e){r.xAxis[e.payload.id]=e.payload},prepare:or()},replaceXAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.xAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.xAxis[t.id],r.xAxis[n.id]=n)},prepare:or()},removeXAxis:{reducer(r,e){delete r.xAxis[e.payload.id]},prepare:or()},addYAxis:{reducer(r,e){r.yAxis[e.payload.id]=e.payload},prepare:or()},replaceYAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.yAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.yAxis[t.id],r.yAxis[n.id]=n)},prepare:or()},removeYAxis:{reducer(r,e){delete r.yAxis[e.payload.id]},prepare:or()},addZAxis:{reducer(r,e){r.zAxis[e.payload.id]=e.payload},prepare:or()},replaceZAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.zAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.zAxis[t.id],r.zAxis[n.id]=n)},prepare:or()},removeZAxis:{reducer(r,e){delete r.zAxis[e.payload.id]},prepare:or()},updateYAxisWidth(r,e){var{id:t,width:n}=e.payload,i=r.yAxis[t];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);r.yAxis[t]=MN(MN({},r.yAxis[t]),{},{width:n,widthHistory:s})}}}}),{addXAxis:wse,replaceXAxis:_se,removeXAxis:Tse,addYAxis:Ase,replaceYAxis:Dse,removeYAxis:Ose,addZAxis:Yve,replaceZAxis:qve,removeZAxis:Wve,updateYAxisWidth:Ise}=_6.actions,Cse=_6.reducer,Rse=ke([dn],r=>({top:r.top,bottom:r.bottom,left:r.left,right:r.right})),Pse=ke([Rse,Vs,Qs],(r,e,t)=>{if(!(!r||e==null||t==null))return{x:r.left,y:r.top,width:Math.max(0,e-r.left-r.right),height:Math.max(0,t-r.top-r.bottom)}}),BA=()=>ot(Pse),Lse=()=>ot(dne);function NN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function NS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(t),!0).forEach(function(n){kse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):NN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kse(r,e,t){return(e=Mse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Mse(r){var e=Nse(r,"string");return typeof e=="symbol"?e:e+""}function Nse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var jse=r=>{var{point:e,childIndex:t,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=r;if(i===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=NS(NS(NS({},o),z0(i)),S1(i)),c;return R.isValidElement(i)?c=R.cloneElement(i,l):typeof i=="function"?c=i(l):c=R.createElement(b6,l),R.createElement(Yo,{className:"recharts-active-dot",clipPath:s},c)};function Fse(r){var{points:e,mainColor:t,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=Cn.activeDot}=r,o=ot(Nd),l=Lse();if(e==null||l==null)return null;var c=e.find(f=>l.includes(f.payload));return Xr(c)?null:R.createElement(to,{zIndex:s},R.createElement(jse,{point:c,childIndex:Number(o),mainColor:t,dataKey:i,activeDot:n,clipPath:a}))}var Bse={},T6=ri({name:"errorBars",initialState:Bse,reducers:{addErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]||(r[t]=[]),r[t].push(n)},replaceErrorBar:(r,e)=>{var{itemId:t,prev:n,next:i}=e.payload;r[t]&&(r[t]=r[t].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]&&(r[t]=r[t].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:Vve,replaceErrorBar:Qve,removeErrorBar:Xve}=T6.actions,Use=T6.reducer,$se=["children"];function Hse(r,e){if(r==null)return{};var t,n,i=Gse(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Gse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Kse={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},zse=R.createContext(Kse);function Yse(r){var{children:e}=r,t=Hse(r,$se);return R.createElement(zse.Provider,{value:t},e)}function A6(r,e){var t,n,i=ot(c=>Zs(c,r)),a=ot(c=>Js(c,e)),s=(t=i?.allowDataOverflow)!==null&&t!==void 0?t:Wr.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Vr.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function qse(r){var{xAxisId:e,yAxisId:t,clipPathId:n}=r,i=BA(),{needClipX:a,needClipY:s,needClip:o}=A6(e,t);if(!o||!i)return null;var{x:l,y:c,width:f,height:h}=i;return R.createElement("clipPath",{id:"clipPath-".concat(n)},R.createElement("rect",{x:a?l:l-f/2,y:s?c:c-h/2,width:a?f:f*2,height:s?h:h*2}))}var jS={exports:{}},FS={};var jN;function Wse(){if(jN)return FS;jN=1;var r=Fc();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,a=r.useEffect,s=r.useMemo,o=r.useDebugValue;return FS.useSyncExternalStoreWithSelector=function(l,c,f,h,p){var g=i(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=s(function(){function v(_){if(!E){if(E=!0,S=_,_=h(_),p!==void 0&&y.hasValue){var I=y.value;if(p(I,_))return w=I}return w=_}if(I=w,t(S,_))return I;var D=h(_);return p!==void 0&&p(I,D)?(S=_,I):(S=_,w=D)}var E=!1,S,w,A=f===void 0?null:f;return[function(){return v(c())},A===null?void 0:function(){return v(A())}]},[c,f,h,p]);var b=n(l,g[0],g[1]);return a(function(){y.hasValue=!0,y.value=b},[b]),o(b),b},FS}var FN;function Vse(){return FN||(FN=1,jS.exports=Wse()),jS.exports}Vse();function Qse(r){r()}function Xse(){let r=null,e=null;return{clear(){r=null,e=null},notify(){Qse(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var BN={notify(){},get:()=>[]};function Zse(r,e){let t,n=BN,i=0,a=!1;function s(b){f();const v=n.subscribe(b);let E=!1;return()=>{E||(E=!0,v(),h())}}function o(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return a}function f(){i++,t||(t=r.subscribe(l),n=Xse())}function h(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=BN)}function p(){a||(a=!0,f())}function g(){a&&(a=!1,h())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>n};return y}var Jse=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eoe=Jse(),toe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",roe=toe(),noe=()=>eoe||roe?R.useLayoutEffect:R.useEffect,ioe=noe();function UN(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function aoe(r,e){if(UN(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!UN(r[t[i]],e[t[i]]))return!1;return!0}var soe=Symbol.for("react-redux-context"),ooe=typeof globalThis<"u"?globalThis:{};function loe(){if(!R.createContext)return{};const r=ooe[soe]??=new Map;let e=r.get(R.createContext);return e||(e=R.createContext(null),r.set(R.createContext,e)),e}var uoe=loe();function coe(r){const{children:e,context:t,serverState:n,store:i}=r,a=R.useMemo(()=>{const l=Zse(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=R.useMemo(()=>i.getState(),[i]);ioe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=t||uoe;return R.createElement(o.Provider,{value:a},e)}var foe=coe,doe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function hoe(r,e){return r==null&&e==null?!0:typeof r=="number"&&typeof e=="number"?r===e||r!==r&&e!==e:r===e}function UA(r,e){var t=new Set([...Object.keys(r),...Object.keys(e)]);for(var n of t)if(doe.has(n)){if(r[n]==null&&e[n]==null)continue;if(!aoe(r[n],e[n]))return!1}else if(!hoe(r[n],e[n]))return!1;return!0}var poe=r=>{var{chartData:e}=r,t=Lr(),n=ni();return R.useEffect(()=>n?()=>{}:(t(iN(e)),()=>{t(iN(void 0))}),[e,t,n]),null},$N={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},D6=ri({name:"brush",initialState:$N,reducers:{setBrushSettings(r,e){return e.payload==null?$N:e.payload}}}),{setBrushSettings:Zve}=D6.actions,moe=D6.reducer;function goe(r,e,t){return(e=yoe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yoe(r){var e=voe(r,"string");return typeof e=="symbol"?e:e+""}function voe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class $A{static create(e){return new $A(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}goe($A,"EPS",1e-4);function boe(r){return(r%180+180)%180}var xoe=function(e){var{width:t,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=boe(i),s=a*Math.PI/180,o=Math.atan(n/t),l=s>o&&s<Math.PI-o?n/Math.sin(s):t/Math.cos(s);return Math.abs(l)},Soe={dots:[],areas:[],lines:[]},O6=ri({name:"referenceElements",initialState:Soe,reducers:{addDot:(r,e)=>{r.dots.push(e.payload)},removeDot:(r,e)=>{var t=la(r).dots.findIndex(n=>n===e.payload);t!==-1&&r.dots.splice(t,1)},addArea:(r,e)=>{r.areas.push(e.payload)},removeArea:(r,e)=>{var t=la(r).areas.findIndex(n=>n===e.payload);t!==-1&&r.areas.splice(t,1)},addLine:(r,e)=>{r.lines.push(e.payload)},removeLine:(r,e)=>{var t=la(r).lines.findIndex(n=>n===e.payload);t!==-1&&r.lines.splice(t,1)}}}),{addDot:Jve,removeDot:ebe,addArea:tbe,removeArea:rbe,addLine:nbe,removeLine:ibe}=O6.actions,Eoe=O6.reducer,woe=R.createContext(void 0),_oe=r=>{var{children:e}=r,[t]=R.useState("".concat(wd("recharts"),"-clip")),n=BA();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return R.createElement(woe.Provider,{value:t},R.createElement("defs",null,R.createElement("clipPath",{id:t},R.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function I6(r,e){if(e<1)return[];if(e===1)return r;for(var t=[],n=0;n<r.length;n+=e)t.push(r[n]);return t}function Toe(r,e,t){var n={width:r.width+e.width,height:r.height+e.height};return xoe(n,t)}function Aoe(r,e,t){var n=t==="width",{x:i,y:a,width:s,height:o}=r;return e===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function u0(r,e,t,n,i){if(r*e<r*n||r*e>r*i)return!1;var a=t();return r*(e-r*a/2-n)>=0&&r*(e+r*a/2-i)<=0}function Doe(r,e){return I6(r,e+1)}function Ooe(r,e,t,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=e,l=0,c=1,f=s,h=function(){var y=n?.[l];if(y===void 0)return{v:I6(n,c)};var b=l,v,E=()=>(v===void 0&&(v=t(y,b)),v),S=y.coordinate,w=l===0||u0(r,S,E,f,o);w||(l=0,f=s,c+=1),w&&(f=S+r*(E()/2+i),l+=c)},p;c<=a.length;)if(p=h(),p)return p.v;return[]}function HN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(t),!0).forEach(function(n){Ioe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):HN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ioe(r,e,t){return(e=Coe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Coe(r){var e=Roe(r,"string");return typeof e=="symbol"?e:e+""}function Roe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Poe(r,e,t,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=e,{end:l}=e,c=function(p){var g=a[p],y,b=()=>(y===void 0&&(y=t(g,p)),y);if(p===s-1){var v=r*(g.coordinate+r*b()/2-l);a[p]=g=vn(vn({},g),{},{tickCoord:v>0?g.coordinate-v*r:g.coordinate})}else a[p]=g=vn(vn({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var E=u0(r,g.tickCoord,b,o,l);E&&(l=g.tickCoord-r*(b()/2+i),a[p]=vn(vn({},g),{},{isShow:!0}))}},f=s-1;f>=0;f--)c(f);return a}function Loe(r,e,t,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=e;if(a){var f=n[o-1],h=t(f,o-1),p=r*(f.coordinate+r*h/2-c);if(s[o-1]=f=vn(vn({},f),{},{tickCoord:p>0?f.coordinate-p*r:f.coordinate}),f.tickCoord!=null){var g=u0(r,f.tickCoord,()=>h,l,c);g&&(c=f.tickCoord-r*(h/2+i),s[o-1]=vn(vn({},f),{},{isShow:!0}))}}for(var y=a?o-1:o,b=function(S){var w=s[S],A,_=()=>(A===void 0&&(A=t(w,S)),A);if(S===0){var I=r*(w.coordinate-r*_()/2-l);s[S]=w=vn(vn({},w),{},{tickCoord:I<0?w.coordinate-I*r:w.coordinate})}else s[S]=w=vn(vn({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var D=u0(r,w.tickCoord,_,l,c);D&&(l=w.tickCoord+r*(_()/2+i),s[S]=vn(vn({},w),{},{isShow:!0}))}},v=0;v<y;v++)b(v);return s}function HA(r,e,t){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:f,angle:h}=r;if(!i||!i.length||!n)return[];if(ut(l)||lh.isSsr){var p;return(p=Doe(i,ut(l)?l:0))!==null&&p!==void 0?p:[]}var g=[],y=o==="top"||o==="bottom"?"width":"height",b=f&&y==="width"?yd(f,{fontSize:e,letterSpacing:t}):{width:0,height:0},v=(w,A)=>{var _=typeof c=="function"?c(w.value,A):w.value;return y==="width"?Toe(yd(_,{fontSize:e,letterSpacing:t}),b,h):yd(_,{fontSize:e,letterSpacing:t})[y]},E=i.length>=2?Ki(i[1].coordinate-i[0].coordinate):1,S=Aoe(a,E,y);return l==="equidistantPreserveStart"?Ooe(E,S,v,i,s):(l==="preserveStart"||l==="preserveStartEnd"?g=Loe(E,S,v,i,s,l==="preserveStartEnd"):g=Poe(E,S,v,i,s),g.filter(w=>w.isShow))}var koe=r=>{var{ticks:e,label:t,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=r,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=t?t.getBoundingClientRect().width:0,l=i+a,c=s+l+o+(t?n:0);return Math.round(c)}return 0},Moe=["axisLine","width","height","className","hide","ticks","axisType"];function Noe(r,e){if(r==null)return{};var t,n,i=joe(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function joe(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Xl(){return Xl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Xl.apply(null,arguments)}function GN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GN(Object(t),!0).forEach(function(n){Foe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):GN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Foe(r,e,t){return(e=Boe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Boe(r){var e=Uoe(r,"string");return typeof e=="symbol"?e:e+""}function Uoe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Rs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Cn.axis};function $oe(r){var{x:e,y:t,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=r;if(!o)return null;var c=Rr(Rr(Rr({},l),ja(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);c=Rr(Rr({},c),{},{x1:e,y1:t+f*i,x2:e+n,y2:t+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);c=Rr(Rr({},c),{},{x1:e+h*n,y1:t,x2:e+h*n,y2:t+i})}return R.createElement("line",Xl({},c,{className:mt("recharts-cartesian-axis-line",V0(o,"className"))}))}function Hoe(r,e,t,n,i,a,s,o,l){var c,f,h,p,g,y,b=o?-1:1,v=r.tickSize||s,E=ut(r.tickCoord)?r.tickCoord:r.coordinate;switch(a){case"top":c=f=r.coordinate,p=t+ +!o*i,h=p-b*v,y=h-b*l,g=E;break;case"left":h=p=r.coordinate,f=e+ +!o*n,c=f-b*v,g=c-b*l,y=E;break;case"right":h=p=r.coordinate,f=e+ +o*n,c=f+b*v,g=c+b*l,y=E;break;default:c=f=r.coordinate,p=t+ +o*i,h=p+b*v,y=h+b*l,g=E;break}return{line:{x1:c,y1:h,x2:f,y2:p},tick:{x:g,y}}}function Goe(r,e){switch(r){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Koe(r,e){switch(r){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function zoe(r){var{option:e,tickProps:t,value:n}=r,i,a=mt(t.className,"recharts-cartesian-axis-tick-value");if(R.isValidElement(e))i=R.cloneElement(e,Rr(Rr({},t),{},{className:a}));else if(typeof e=="function")i=e(Rr(Rr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=mt(s,e?.className)),i=R.createElement(jA,Xl({},t,{className:s}),n)}return i}var Yoe=R.forwardRef((r,e)=>{var{ticks:t=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:f,mirror:h,x:p,y:g,width:y,height:b,tickSize:v,tickMargin:E,fontSize:S,letterSpacing:w,getTicksConfig:A,events:_,axisType:I}=r,D=HA(Rr(Rr({},A),{},{ticks:t}),S,w),P=Goe(f,h),k=Koe(f,h),M=ja(A),H=z0(n),N={};typeof i=="object"&&(N=i);var Q=Rr(Rr({},M),{},{fill:"none"},N),z=D.map(Y=>Rr({entry:Y},Hoe(Y,p,g,y,b,f,v,h,E))),V=z.map(Y=>{var{entry:W,line:J}=Y;return R.createElement(Yo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},i&&R.createElement("line",Xl({},Q,J,{className:mt("recharts-cartesian-axis-tick-line",V0(i,"className"))})))}),K=z.map((Y,W)=>{var{entry:J,tick:G}=Y,j=Rr(Rr(Rr(Rr({textAnchor:P,verticalAnchor:k},M),{},{stroke:"none",fill:a},H),G),{},{index:W,payload:J,visibleTicksCount:D.length,tickFormatter:s,padding:l},c);return R.createElement(Yo,Xl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},OU(_,J,W)),n&&R.createElement(zoe,{option:n,tickProps:j,value:"".concat(typeof s=="function"?s(J.value,W):J.value).concat(o||"")}))});return R.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},K.length>0&&R.createElement(to,{zIndex:Cn.label},R.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},K)),V.length>0&&R.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},V))}),qoe=R.forwardRef((r,e)=>{var{axisLine:t,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=r,c=Noe(r,Moe),[f,h]=R.useState(""),[p,g]=R.useState(""),y=R.useRef(null);R.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return koe({ticks:y.current,label:(v=r.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:r.tickSize,tickMargin:r.tickMargin})}}));var b=R.useCallback(v=>{if(v){var E=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=E;var S=E[0];if(S){var w=window.getComputedStyle(S),A=w.fontSize,_=w.letterSpacing;(A!==f||_!==p)&&(h(A),g(_))}}},[f,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:R.createElement(to,{zIndex:r.zIndex},R.createElement(Yo,{className:mt("recharts-cartesian-axis",a)},R.createElement($oe,{x:r.x,y:r.y,width:n,height:i,orientation:r.orientation,mirror:r.mirror,axisLine:t,otherSvgProps:ja(r)}),R.createElement(Yoe,{ref:b,axisType:l,events:c,fontSize:f,getTicksConfig:r,height:r.height,letterSpacing:p,mirror:r.mirror,orientation:r.orientation,padding:r.padding,stroke:r.stroke,tick:r.tick,tickFormatter:r.tickFormatter,tickLine:r.tickLine,tickMargin:r.tickMargin,tickSize:r.tickSize,tickTextProps:r.tickTextProps,ticks:o,unit:r.unit,width:r.width,x:r.x,y:r.y}),R.createElement(aae,{x:r.x,y:r.y,width:r.width,height:r.height,lowerWidth:r.width,upperWidth:r.width},R.createElement(mae,{label:r.label,labelRef:r.labelRef}),r.children)))}),GA=R.forwardRef((r,e)=>{var t=Sn(r,Rs);return R.createElement(qoe,Xl({},t,{ref:e}))});GA.displayName="CartesianAxis";var Woe=["x1","y1","x2","y2","key"],Voe=["offset"],Qoe=["xAxisId","yAxisId"],Xoe=["xAxisId","yAxisId"];function KN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KN(Object(t),!0).forEach(function(n){Zoe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Zoe(r,e,t){return(e=Joe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Joe(r){var e=ele(r,"string");return typeof e=="symbol"?e:e+""}function ele(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Nl.apply(null,arguments)}function c0(r,e){if(r==null)return{};var t,n,i=tle(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function tle(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var rle=r=>{var{fill:e}=r;if(!e||e==="none")return null;var{fillOpacity:t,x:n,y:i,width:a,height:s,ry:o}=r;return R.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function C6(r){var{option:e,lineItemProps:t}=r,n;if(R.isValidElement(e))n=R.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var i,{x1:a,y1:s,x2:o,y2:l,key:c}=t,f=c0(t,Woe),h=(i=ja(f))!==null&&i!==void 0?i:{},{offset:p}=h,g=c0(h,Voe);n=R.createElement("line",Nl({},g,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return n}function nle(r){var{x:e,width:t,horizontal:n=!0,horizontalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=r,o=c0(r,Qoe),l=i.map((c,f)=>{var h=bn(bn({},o),{},{x1:e,y1:c,x2:e+t,y2:c,key:"line-".concat(f),index:f});return R.createElement(C6,{key:"line-".concat(f),option:n,lineItemProps:h})});return R.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function ile(r){var{y:e,height:t,vertical:n=!0,verticalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=r,o=c0(r,Xoe),l=i.map((c,f)=>{var h=bn(bn({},o),{},{x1:c,y1:e,x2:c,y2:e+t,key:"line-".concat(f),index:f});return R.createElement(C6,{option:n,lineItemProps:h,key:"line-".concat(f)})});return R.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ale(r){var{horizontalFill:e,fillOpacity:t,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=r;if(!l||!e||!e.length||o==null)return null;var c=o.map(h=>Math.round(h+i-i)).sort((h,p)=>h-p);i!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],y=g?i+s-h:c[p+1]-h;if(y<=0)return null;var b=p%e.length;return R.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:y,width:a,stroke:"none",fill:e[b],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function sle(r){var{vertical:e=!0,verticalFill:t,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=r;if(!e||!t||!t.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,p)=>h-p);i!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],y=g?i+s-h:c[p+1]-h;if(y<=0)return null;var b=p%t.length;return R.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:y,height:o,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var ole=(r,e)=>{var{xAxis:t,width:n,height:i,offset:a}=r;return x3(HA(bn(bn(bn({},Rs),t),{},{ticks:S3(t),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},lle=(r,e)=>{var{yAxis:t,width:n,height:i,offset:a}=r;return x3(HA(bn(bn(bn({},Rs),t),{},{ticks:S3(t),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},ule={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Cn.grid};function pT(r){var e=L1(),t=k1(),n=I3(),i=bn(bn({},Sn(r,ule)),{},{x:ut(r.x)?r.x:n.left,y:ut(r.y)?r.y:n.top,width:ut(r.width)?r.width:n.width,height:ut(r.height)?r.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:c,height:f,syncWithTicks:h,horizontalValues:p,verticalValues:g}=i,y=ni(),b=ot(k=>YM(k,"xAxis",a,y)),v=ot(k=>YM(k,"yAxis",s,y));if(!Ua(c)||!Ua(f)||!ut(o)||!ut(l))return null;var E=i.verticalCoordinatesGenerator||ole,S=i.horizontalCoordinatesGenerator||lle,{horizontalPoints:w,verticalPoints:A}=i;if((!w||!w.length)&&typeof S=="function"){var _=p&&p.length,I=S({yAxis:v?bn(bn({},v),{},{ticks:_?p:v.ticks}):void 0,width:e??c,height:t??f,offset:n},_?!0:h);jg(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(w=I)}if((!A||!A.length)&&typeof E=="function"){var D=g&&g.length,P=E({xAxis:b?bn(bn({},b),{},{ticks:D?g:b.ticks}):void 0,width:e??c,height:t??f,offset:n},D?!0:h);jg(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(A=P)}return R.createElement(to,{zIndex:i.zIndex},R.createElement("g",{className:"recharts-cartesian-grid"},R.createElement(rle,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),R.createElement(ale,Nl({},i,{horizontalPoints:w})),R.createElement(sle,Nl({},i,{verticalPoints:A})),R.createElement(nle,Nl({},i,{offset:n,horizontalPoints:w,xAxis:b,yAxis:v})),R.createElement(ile,Nl({},i,{offset:n,verticalPoints:A,xAxis:b,yAxis:v}))))}pT.displayName="CartesianGrid";var R6=(r,e,t,n)=>L4(r,"xAxis",e,n),P6=(r,e,t,n)=>P4(r,"xAxis",e,n),L6=(r,e,t,n)=>L4(r,"yAxis",t,n),k6=(r,e,t,n)=>P4(r,"yAxis",t,n),cle=ke([ir,R6,L6,P6,k6],(r,e,t,n,i)=>tl(r,"xAxis")?Ng(e,n,!1):Ng(t,i,!1)),fle=(r,e,t,n,i)=>i;function dle(r){return r.type==="line"}var hle=ke([t4,fle],(r,e)=>r.filter(dle).find(t=>t.id===e)),ple=ke([ir,R6,L6,P6,k6,hle,cle,lA],(r,e,t,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:f}=o;if(!(a==null||e==null||t==null||n==null||i==null||n.length===0||i.length===0||s==null||r!=="horizontal"&&r!=="vertical")){var{dataKey:h,data:p}=a,g;if(p!=null&&p.length>0?g=p:g=l?.slice(c,f+1),g!=null)return Mle({layout:r,xAxis:e,yAxis:t,xAxisTicks:n,yAxisTicks:i,dataKey:h,bandSize:s,displayedData:g})}});function mle(r){var e=z0(r),t=3,n=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r:t,strokeWidth:n}}var gle=["id"],yle=["type","layout","connectNulls","needClip","shape"],vle=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Fd(){return Fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fd.apply(null,arguments)}function zN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function wa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(t),!0).forEach(function(n){ble(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ble(r,e,t){return(e=xle(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xle(r){var e=Sle(r,"string");return typeof e=="symbol"?e:e+""}function Sle(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function KA(r,e){if(r==null)return{};var t,n,i=Ele(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Ele(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var wle=r=>{var{dataKey:e,name:t,stroke:n,legendType:i,hide:a}=r;return[{inactive:a,dataKey:e,type:i,color:n,value:E3(t,e),payload:r}]},_le=R.memo(r=>{var{dataKey:e,data:t,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:c}=r,f={dataDefinedOnItem:t,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:E3(s,e),hide:o,type:c,color:n,unit:l}};return R.createElement(Xae,{tooltipEntrySettings:f})}),M6=(r,e)=>"".concat(e,"px ").concat(r-e,"px");function Tle(r,e){for(var t=r.length%2!==0?[...r,0]:r,n=[],i=0;i<e;++i)n=[...n,...t];return n}var Ale=(r,e,t)=>{var n=t.reduce((h,p)=>h+p);if(!n)return M6(e,r);for(var i=Math.floor(r/n),a=r%n,s=e-r,o=[],l=0,c=0;l<t.length;c+=t[l],++l)if(c+t[l]>a){o=[...t.slice(0,l),a-c];break}var f=o.length%2===0?[0,s]:[s];return[...Tle(t,i),...o,...f].map(h=>"".concat(h,"px")).join(", ")};function Dle(r){var{clipPathId:e,points:t,props:n}=r,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,l=KA(n,gle),c=ja(l);return R.createElement(vse,{points:t,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:c,needClip:s,clipPathId:e})}function Ole(r){var{showLabels:e,children:t,points:n}=r,i=R.useMemo(()=>n?.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wa(wa({},l),{},{value:a.value,payload:a.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return R.createElement(Aae,{value:e?i:void 0},t)}function YN(r){var{clipPathId:e,pathRef:t,points:n,strokeDasharray:i,props:a}=r,{type:s,layout:o,connectNulls:l,needClip:c,shape:f}=a,h=KA(a,yle),p=wa(wa({},Ln(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:n,type:s,layout:o,connectNulls:l,strokeDasharray:i??a.strokeDasharray});return R.createElement(R.Fragment,null,n?.length>1&&R.createElement(Qae,Fd({shapeType:"curve",option:f},p,{pathRef:t})),R.createElement(Dle,{points:n,clipPathId:e,props:a}))}function Ile(r){try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}function Cle(r){var{clipPathId:e,props:t,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=r,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:f,animationEasing:h,animateNewValues:p,width:g,height:y,onAnimationEnd:b,onAnimationStart:v}=t,E=i.current,S=F1(s,"recharts-line-"),w=R.useRef(S),[A,_]=R.useState(!1),I=!A,D=R.useCallback(()=>{typeof b=="function"&&b(),_(!1)},[b]),P=R.useCallback(()=>{typeof v=="function"&&v(),_(!0)},[v]),k=Ile(n.current),M=R.useRef(0);w.current!==S&&(M.current=a.current,w.current=S);var H=M.current;return R.createElement(Ole,{points:s,showLabels:I},t.children,R.createElement(j1,{animationId:S,begin:c,duration:f,isActive:l,easing:h,onAnimationEnd:D,onAnimationStart:P,key:S},N=>{var Q=Qn(H,k+H,N),z=Math.min(Q,k),V;if(l)if(o){var K="".concat(o).split(/[,\s]+/gim).map(J=>parseFloat(J));V=Ale(z,k,K)}else V=M6(k,z);else V=o==null?void 0:String(o);if(N>0&&k>0&&(i.current=s,a.current=Math.max(a.current,z)),E){var Y=E.length/s.length,W=N===1?s:s.map((J,G)=>{var j=Math.floor(G*Y);if(E[j]){var F=E[j];return wa(wa({},J),{},{x:Qn(F.x,J.x,N),y:Qn(F.y,J.y,N)})}return p?wa(wa({},J),{},{x:Qn(g*2,J.x,N),y:Qn(y/2,J.y,N)}):wa(wa({},J),{},{x:J.x,y:J.y})});return i.current=W,R.createElement(YN,{props:t,points:W,clipPathId:e,pathRef:n,strokeDasharray:V})}return R.createElement(YN,{props:t,points:s,clipPathId:e,pathRef:n,strokeDasharray:V})}),R.createElement(Iae,{label:t.label}))}function Rle(r){var{clipPathId:e,props:t}=r,n=R.useRef(null),i=R.useRef(0),a=R.useRef(null);return R.createElement(Cle,{props:t,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var Ple=(r,e)=>{var t,n;return{x:(t=r.x)!==null&&t!==void 0?t:void 0,y:(n=r.y)!==null&&n!==void 0?n:void 0,value:r.value,errorVal:xn(r.payload,e)}};class Lle extends R.Component{render(){var{hide:e,dot:t,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:l,width:c,height:f,id:h,needClip:p,zIndex:g}=this.props;if(e)return null;var y=mt("recharts-line",i),b=h,{r:v,strokeWidth:E}=mle(t),S=S6(t),w=v*2+E,A=p?"url(#clipPath-".concat(S?"":"dots-").concat(b,")"):void 0;return R.createElement(to,{zIndex:g},R.createElement(Yo,{className:y},p&&R.createElement("defs",null,R.createElement(qse,{clipPathId:b,xAxisId:a,yAxisId:s}),!S&&R.createElement("clipPath",{id:"clipPath-dots-".concat(b)},R.createElement("rect",{x:l-w/2,y:o-w/2,width:c+w,height:f+w}))),R.createElement(Yse,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:Ple,errorBarOffset:0},R.createElement(Rle,{props:this.props,clipPathId:b}))),R.createElement(Fse,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var N6={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Cn.line,type:"linear"};function kle(r){var e=Sn(r,N6),{activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,hide:c,isAnimationActive:f,label:h,legendType:p,xAxisId:g,yAxisId:y,id:b}=e,v=KA(e,vle),{needClip:E}=A6(g,y),S=BA(),w=cy(),A=ni(),_=ot(M=>ple(M,g,y,A,b));if(w!=="horizontal"&&w!=="vertical"||_==null||S==null)return null;var{height:I,width:D,x:P,y:k}=S;return R.createElement(Lle,Fd({},v,{id:b,connectNulls:o,dot:l,activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:f,hide:c,label:h,legendType:p,xAxisId:g,yAxisId:y,points:_,layout:w,height:I,width:D,left:P,top:k,needClip:E}))}function Mle(r){var{layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=r;return l.map((c,f)=>{var h=xn(c,s);if(e==="horizontal"){var p=dk({axis:t,ticks:i,bandSize:o,entry:c,index:f}),g=Xr(h)?null:n.scale(h);return{x:p,y:g,value:h,payload:c}}var y=Xr(h)?null:t.scale(h),b=dk({axis:n,ticks:a,bandSize:o,entry:c,index:f});return y==null||b==null?null:{x:y,y:b,value:h,payload:c}}).filter(Boolean)}function Nle(r){var e=Sn(r,N6),t=ni();return R.createElement(rse,{id:e.id,type:"line"},n=>R.createElement(R.Fragment,null,R.createElement(Zae,{legendPayload:wle(e)}),R.createElement(_le,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),R.createElement(use,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:t}),R.createElement(kle,Fd({},e,{id:n}))))}var Ol=R.memo(Nle,UA);Ol.displayName="Line";var jle=["domain","range"],Fle=["domain","range"];function qN(r,e){if(r==null)return{};var t,n,i=Ble(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Ble(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function WN(r,e){return r===e?!0:Array.isArray(r)&&r.length===2&&Array.isArray(e)&&e.length===2?r[0]===e[0]&&r[1]===e[1]:!1}function j6(r,e){if(r===e)return!0;var{domain:t,range:n}=r,i=qN(r,jle),{domain:a,range:s}=e,o=qN(e,Fle);return!WN(t,a)||!WN(n,s)?!1:UA(i,o)}var Ule=["dangerouslySetInnerHTML","ticks"],$le=["id"];function mT(){return mT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},mT.apply(null,arguments)}function VN(r,e){if(r==null)return{};var t,n,i=Hle(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Hle(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Gle(r){var e=Lr(),t=R.useRef(null);return R.useLayoutEffect(()=>{t.current===null?e(wse(r)):t.current!==r&&e(_se({prev:t.current,next:r})),t.current=r},[r,e]),R.useLayoutEffect(()=>()=>{t.current&&(e(Tse(t.current)),t.current=null)},[e]),null}var Kle=r=>{var{xAxisId:e,className:t}=r,n=ot(_3),i=ni(),a="xAxis",s=ot(v=>Qc(v,a,e,i)),o=ot(v=>R4(v,a,e,i)),l=ot(v=>tre(v,e)),c=ot(v=>ore(v,e)),f=ot(v=>X$(v,e));if(l==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:h,ticks:p}=r,g=VN(r,Ule),{id:y}=f,b=VN(f,$le);return R.createElement(GA,mT({},g,b,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:mt("recharts-".concat(a," ").concat(a),t),viewBox:n,ticks:o,axisType:a}))},zle={allowDataOverflow:Wr.allowDataOverflow,allowDecimals:Wr.allowDecimals,allowDuplicatedCategory:Wr.allowDuplicatedCategory,angle:Wr.angle,axisLine:Rs.axisLine,height:Wr.height,hide:!1,includeHidden:Wr.includeHidden,interval:Wr.interval,minTickGap:Wr.minTickGap,mirror:Wr.mirror,orientation:Wr.orientation,padding:Wr.padding,reversed:Wr.reversed,scale:Wr.scale,tick:Wr.tick,tickCount:Wr.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:Wr.type,xAxisId:0},Yle=r=>{var e=Sn(r,zle);return R.createElement(R.Fragment,null,R.createElement(Gle,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),R.createElement(Kle,e))},gT=R.memo(Yle,j6);gT.displayName="XAxis";var qle=["dangerouslySetInnerHTML","ticks"],Wle=["id"];function yT(){return yT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yT.apply(null,arguments)}function QN(r,e){if(r==null)return{};var t,n,i=Vle(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Vle(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Qle(r){var e=Lr(),t=R.useRef(null);return R.useLayoutEffect(()=>{t.current===null?e(Ase(r)):t.current!==r&&e(Dse({prev:t.current,next:r})),t.current=r},[r,e]),R.useLayoutEffect(()=>()=>{t.current&&(e(Ose(t.current)),t.current=null)},[e]),null}var Xle=r=>{var{yAxisId:e,className:t,width:n,label:i}=r,a=R.useRef(null),s=R.useRef(null),o=ot(_3),l=ni(),c=Lr(),f="yAxis",h=ot(_=>Qc(_,f,e,l)),p=ot(_=>cre(_,e)),g=ot(_=>ure(_,e)),y=ot(_=>R4(_,f,e,l)),b=ot(_=>Z$(_,e));if(R.useLayoutEffect(()=>{if(!(n!=="auto"||!p||FA(i)||R.isValidElement(i)||b==null)){var _=a.current;if(_){var I=_.getCalculatedWidth();Math.round(p.width)!==Math.round(I)&&c(Ise({id:e,width:I}))}}},[y,p,c,i,e,n,b]),p==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:v,ticks:E}=r,S=QN(r,qle),{id:w}=b,A=QN(b,Wle);return R.createElement(GA,yT({},S,A,{ref:a,labelRef:s,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:mt("recharts-".concat(f," ").concat(f),t),viewBox:o,ticks:y,axisType:f}))},Zle={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:Vr.allowDecimals,allowDuplicatedCategory:Vr.allowDuplicatedCategory,angle:Vr.angle,axisLine:Rs.axisLine,hide:!1,includeHidden:Vr.includeHidden,interval:Vr.interval,minTickGap:Vr.minTickGap,mirror:Vr.mirror,orientation:Vr.orientation,padding:Vr.padding,reversed:Vr.reversed,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:Vr.type,width:Vr.width,yAxisId:0},Jle=r=>{var e=Sn(r,Zle);return R.createElement(R.Fragment,null,R.createElement(Qle,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),R.createElement(Xle,e))},vT=R.memo(Jle,j6);vT.displayName="YAxis";var eue=(r,e)=>e,zA=ke([eue,ir,W$,Gr,W4,eo,Tne,dn],Pne),YA=r=>{var e=r.currentTarget.getBoundingClientRect(),t=e.width/r.currentTarget.offsetWidth,n=e.height/r.currentTarget.offsetHeight;return{chartX:Math.round((r.clientX-e.left)/t),chartY:Math.round((r.clientY-e.top)/n)}},F6=Yi("mouseClick"),B6=ah();B6.startListening({actionCreator:F6,effect:(r,e)=>{var t=r.payload,n=zA(e.getState(),YA(t));n?.activeIndex!=null&&e.dispatch(wre({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bT=Yi("mouseMove"),U6=ah(),rm=null;U6.startListening({actionCreator:bT,effect:(r,e)=>{var t=r.payload;rm!==null&&cancelAnimationFrame(rm);var n=YA(t);rm=requestAnimationFrame(()=>{var i=e.getState(),a=DA(i,i.tooltip.settings.shared);if(a==="axis"){var s=zA(i,n);s?.activeIndex!=null?e.dispatch(U4({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(B4())}rm=null})}});var XN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},$6=ri({name:"rootProps",initialState:XN,reducers:{updateOptions:(r,e)=>{var t;r.accessibilityLayer=e.payload.accessibilityLayer,r.barCategoryGap=e.payload.barCategoryGap,r.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:XN.barGap,r.barSize=e.payload.barSize,r.maxBarSize=e.payload.maxBarSize,r.stackOffset=e.payload.stackOffset,r.syncId=e.payload.syncId,r.syncMethod=e.payload.syncMethod,r.className=e.payload.className,r.baseValue=e.payload.baseValue,r.reverseStackOrder=e.payload.reverseStackOrder}}}),tue=$6.reducer,{updateOptions:rue}=$6.actions,H6=ri({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(r,e)=>e.payload}}),{updatePolarOptions:abe}=H6.actions,nue=H6.reducer,G6=Yi("keyDown"),K6=Yi("focus"),qA=ah();qA.startListening({actionCreator:G6,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip,a=r.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=OA(i,Zc(t),mh(t),xh(t)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=eo(t);if(a==="Enter"){var c=i0(t,"axis","hover",String(i.index));e.dispatch(lT({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=pre(t),h=f==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,g=o+p*h;if(!(l==null||g>=l.length||g<0)){var y=i0(t,"axis","hover",String(g));e.dispatch(lT({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}}});qA.startListening({actionCreator:K6,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var a="0",s=i0(t,"axis","hover",String(a));e.dispatch(lT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Ui=Yi("externalEvent"),z6=ah(),BS=new Map;z6.startListening({actionCreator:Ui,effect:(r,e)=>{var{handler:t,reactEvent:n}=r.payload;if(t!=null){n.persist();var i=n.type,a=BS.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:une(o),activeDataKey:one(o),activeIndex:Nd(o),activeLabel:X4(o),activeTooltipIndex:Nd(o),isTooltipActive:cne(o)};t(l,n)}finally{BS.delete(i)}});BS.set(i,s)}}});var iue=ke([Xc],r=>r.tooltipItemPayloads),aue=ke([iue,vh,(r,e,t)=>e,(r,e,t)=>t],(r,e,t,n)=>{var i=r.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,t);return s}}}),Y6=Yi("touchMove"),q6=ah();q6.startListening({actionCreator:Y6,effect:(r,e)=>{var t=r.payload;if(!(t.touches==null||t.touches.length===0)){var n=e.getState(),i=DA(n,n.tooltip.settings.shared);if(i==="axis"){var a=zA(n,YA({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));a?.activeIndex!=null&&e.dispatch(U4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=t.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(q7),f=(s=l.getAttribute(W7))!==null&&s!==void 0?s:void 0,h=aue(e.getState(),c,f);e.dispatch(Ere({activeDataKey:f,activeIndex:c,activeCoordinate:h}))}}}});var sue=zU({brush:moe,cartesianAxis:Cse,chartData:cie,errorBars:Use,graphicalItems:ose,layout:R7,legend:$Q,options:aie,polarAxis:Rae,polarOptions:nue,referenceElements:Eoe,rootProps:tue,tooltip:_re,zIndex:Yne}),oue=function(e){return r7({reducer:sue,preloadedState:e,middleware:t=>{var n;return t({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([B6.middleware,U6.middleware,qA.middleware,z6.middleware,q6.middleware])},enhancers:t=>{var n=t;return typeof t=="function"&&(n=t()),n.concat(s3({type:"raf"}))},devTools:lh.devToolsEnabled})};function lue(r){var{preloadedState:e,children:t,reduxStoreName:n}=r,i=ni(),a=R.useRef(null);if(i)return t;a.current==null&&(a.current=oue(e));var s=w1;return R.createElement(foe,{context:s,store:a.current},t)}function uue(r){var{layout:e,margin:t}=r,n=Lr(),i=ni();return R.useEffect(()=>{i||(n(O7(e)),n(D7(t)))},[n,i,e,t]),null}var cue=R.memo(uue,UA);function fue(r){var e=Lr();return R.useEffect(()=>{e(rue(r))},[e,r]),null}function ZN(r){var{zIndex:e,isPanorama:t}=r,n=t?"recharts-zindex-panorama-":"recharts-zindex-",i=E6("".concat(n).concat(e)),a=Lr();return R.useLayoutEffect(()=>(a(Kne({zIndex:e,elementId:i,isPanorama:t})),()=>{a(zne({zIndex:e,isPanorama:t}))}),[a,e,i,t]),R.createElement("g",{tabIndex:-1,id:i})}function JN(r){var{children:e,isPanorama:t}=r,n=ot(kne);if(!n||n.length===0)return e;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return R.createElement(R.Fragment,null,i.map(s=>R.createElement(ZN,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>R.createElement(ZN,{key:s,zIndex:s,isPanorama:t})))}var due=["children"];function hue(r,e){if(r==null)return{};var t,n,i=pue(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function pue(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function f0(){return f0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},f0.apply(null,arguments)}var mue={width:"100%",height:"100%",display:"block"},gue=R.forwardRef((r,e)=>{var t=L1(),n=k1(),i=j3();if(!Ua(t)||!Ua(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=r,c,f;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),R.createElement(h1,f0({},s,{title:o,desc:l,role:f,tabIndex:c,width:t,height:n,style:mue,ref:e}),a)}),yue=r=>{var{children:e}=r,t=ot(ly);if(!t)return null;var{width:n,height:i,y:a,x:s}=t;return R.createElement(h1,{width:n,height:i,x:s,y:a},e)},e2=R.forwardRef((r,e)=>{var{children:t}=r,n=hue(r,due),i=ni();return i?R.createElement(yue,null,R.createElement(JN,{isPanorama:!0},t)):R.createElement(gue,f0({ref:e},n),R.createElement(JN,{isPanorama:!1},t))});function vue(){var r=Lr(),[e,t]=R.useState(null),n=ot(Y7);return R.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Zr(a)&&a!==n&&r(C7(a))}},[e,r,n]),t}function t2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(t),!0).forEach(function(n){xue(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):t2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function xue(r,e,t){return(e=Sue(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Sue(r){var e=Eue(r,"string");return typeof e=="symbol"?e:e+""}function Eue(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zl.apply(null,arguments)}var wue=()=>(bie(),null);function d0(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=parseFloat(r);if(!Number.isNaN(e))return e}return 0}var _ue=R.forwardRef((r,e)=>{var t,n,i=R.useRef(null),[a,s]=R.useState({containerWidth:d0((t=r.style)===null||t===void 0?void 0:t.width),containerHeight:d0((n=r.style)===null||n===void 0?void 0:n.height)}),o=R.useCallback((c,f)=>{s(h=>{var p=Math.round(c),g=Math.round(f);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),l=R.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=c.getBoundingClientRect();o(f,h);var p=y=>{var{width:b,height:v}=y[0].contentRect;o(b,v)},g=new ResizeObserver(p);g.observe(c),i.current=g}},[e,o]);return R.useEffect(()=>()=>{var c=i.current;c?.disconnect()},[o]),R.createElement(R.Fragment,null,R.createElement(fy,{width:a.containerWidth,height:a.containerHeight}),R.createElement("div",Zl({ref:l},r)))}),Tue=R.forwardRef((r,e)=>{var{width:t,height:n}=r,[i,a]=R.useState({containerWidth:d0(t),containerHeight:d0(n)}),s=R.useCallback((l,c)=>{a(f=>{var h=Math.round(l),p=Math.round(c);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),o=R.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:f}=l.getBoundingClientRect();s(c,f)}},[e,s]);return R.createElement(R.Fragment,null,R.createElement(fy,{width:i.containerWidth,height:i.containerHeight}),R.createElement("div",Zl({ref:o},r)))}),Aue=R.forwardRef((r,e)=>{var{width:t,height:n}=r;return R.createElement(R.Fragment,null,R.createElement(fy,{width:t,height:n}),R.createElement("div",Zl({ref:e},r)))}),Due=R.forwardRef((r,e)=>{var{width:t,height:n}=r;return Fs(t)||Fs(n)?R.createElement(Tue,Zl({},r,{ref:e})):R.createElement(Aue,Zl({},r,{ref:e}))});function Oue(r){return r===!0?_ue:Due}var Iue=R.forwardRef((r,e)=>{var{children:t,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:f,onMouseMove:h,onMouseUp:p,onTouchEnd:g,onTouchMove:y,onTouchStart:b,style:v,width:E,responsive:S,dispatchTouchEvents:w=!0}=r,A=R.useRef(null),_=Lr(),[I,D]=R.useState(null),[P,k]=R.useState(null),M=vue(),H=P1(),N=H?.width>0?H.width:E,Q=H?.height>0?H.height:i,z=R.useCallback(re=>{M(re),typeof e=="function"&&e(re),D(re),k(re),re!=null&&(A.current=re)},[M,e,D,k]),V=R.useCallback(re=>{_(F6(re)),_(Ui({handler:a,reactEvent:re}))},[_,a]),K=R.useCallback(re=>{_(bT(re)),_(Ui({handler:c,reactEvent:re}))},[_,c]),Y=R.useCallback(re=>{_(B4()),_(Ui({handler:f,reactEvent:re}))},[_,f]),W=R.useCallback(re=>{_(bT(re)),_(Ui({handler:h,reactEvent:re}))},[_,h]),J=R.useCallback(()=>{_(K6())},[_]),G=R.useCallback(re=>{_(G6(re.key))},[_]),j=R.useCallback(re=>{_(Ui({handler:s,reactEvent:re}))},[_,s]),F=R.useCallback(re=>{_(Ui({handler:o,reactEvent:re}))},[_,o]),Z=R.useCallback(re=>{_(Ui({handler:l,reactEvent:re}))},[_,l]),ae=R.useCallback(re=>{_(Ui({handler:p,reactEvent:re}))},[_,p]),ee=R.useCallback(re=>{_(Ui({handler:b,reactEvent:re}))},[_,b]),ve=R.useCallback(re=>{w&&_(Y6(re)),_(Ui({handler:y,reactEvent:re}))},[_,w,y]),le=R.useCallback(re=>{_(Ui({handler:g,reactEvent:re}))},[_,g]),ne=Oue(S);return R.createElement(i6.Provider,{value:I},R.createElement(sU.Provider,{value:P},R.createElement(ne,{width:N??v?.width,height:Q??v?.height,className:mt("recharts-wrapper",n),style:bue({position:"relative",cursor:"default",width:N,height:Q},v),onClick:V,onContextMenu:j,onDoubleClick:F,onFocus:J,onKeyDown:G,onMouseDown:Z,onMouseEnter:K,onMouseLeave:Y,onMouseMove:W,onMouseUp:ae,onTouchEnd:le,onTouchMove:ve,onTouchStart:ee,ref:z},R.createElement(wue,null),t)))}),Cue=["width","height","responsive","children","className","style","compact","title","desc"];function Rue(r,e){if(r==null)return{};var t,n,i=Pue(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Pue(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Lue=R.forwardRef((r,e)=>{var{width:t,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:c,desc:f}=r,h=Rue(r,Cue),p=ja(h);return l?R.createElement(R.Fragment,null,R.createElement(fy,{width:t,height:n}),R.createElement(e2,{otherAttributes:p,title:c,desc:f},a)):R.createElement(Iue,{className:s,style:o,width:t,height:n,responsive:i??!1,onClick:r.onClick,onMouseLeave:r.onMouseLeave,onMouseEnter:r.onMouseEnter,onMouseMove:r.onMouseMove,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,onContextMenu:r.onContextMenu,onDoubleClick:r.onDoubleClick,onTouchStart:r.onTouchStart,onTouchMove:r.onTouchMove,onTouchEnd:r.onTouchEnd},R.createElement(e2,{otherAttributes:p,title:c,desc:f,ref:e},R.createElement(_oe,null,a)))});function xT(){return xT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},xT.apply(null,arguments)}var kue={top:5,right:5,bottom:5,left:5},Mue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:kue,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Nue=R.forwardRef(function(e,t){var n,i=Sn(e.categoricalChartProps,Mue),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return R.createElement(lue,{preloadedState:{options:f},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:a},R.createElement(poe,{chartData:c.data}),R.createElement(cue,{layout:i.layout,margin:i.margin}),R.createElement(fue,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),R.createElement(Lue,xT({},i,{ref:t})))}),jue=["axis"],r2=R.forwardRef((r,e)=>R.createElement(Nue,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jue,tooltipPayloadSearcher:nie,categoricalChartProps:r,ref:e}));const W6=6048e5,Fue=864e5,Cy=6e4,Ry=36e5,Bue=1e3,n2=Symbol.for("constructDateFrom");function Ht(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&n2 in r?r[n2](e):r instanceof Date?new r.constructor(e):new Date(e)}function st(r,e){return Ht(e||r,r)}function ua(r,e,t){const n=st(r,t?.in);return isNaN(e)?Ht(t?.in||r,NaN):(e&&n.setDate(n.getDate()+e),n)}function da(r,e,t){const n=st(r,t?.in);if(isNaN(e))return Ht(r,NaN);if(!e)return n;const i=n.getDate(),a=Ht(r,n.getTime());a.setMonth(n.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function V6(r,e,t){return Ht(r,+st(r)+e)}function Uue(r,e,t){return V6(r,e*Ry)}let $ue={};function lu(){return $ue}function Ks(r,e){const t=lu(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=st(r,e?.in),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Ic(r,e){return Ks(r,{...e,weekStartsOn:1})}function Q6(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=Ht(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=Ic(i),s=Ht(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Ic(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function h0(r){const e=st(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function ro(r,...e){const t=Ht.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Jl(r,e){const t=st(r,e?.in);return t.setHours(0,0,0,0),t}function Cc(r,e,t){const[n,i]=ro(t?.in,r,e),a=Jl(n),s=Jl(i),o=+a-h0(a),l=+s-h0(s);return Math.round((o-l)/Fue)}function Hue(r,e){const t=Q6(r,e),n=Ht(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ic(n)}function Bd(r,e,t){const n=st(r,t?.in);return n.setTime(n.getTime()+e*Cy),n}function WA(r,e,t){return da(r,e*3,t)}function Gue(r,e,t){return V6(r,e*1e3)}function p0(r,e,t){return ua(r,e*7,t)}function Ps(r,e,t){return da(r,e*12,t)}function i2(r,e){let t,n=e?.in;return r.forEach(i=>{!n&&typeof i=="object"&&(n=Ht.bind(null,i));const a=st(i,n);(!t||t<a||isNaN(+a))&&(t=a)}),Ht(n,t||NaN)}function a2(r,e){let t,n=e?.in;return r.forEach(i=>{!n&&typeof i=="object"&&(n=Ht.bind(null,i));const a=st(i,n);(!t||t>a||isNaN(+a))&&(t=a)}),Ht(n,t||NaN)}function Kue(r,e,t){const[n,i]=ro(t?.in,r,e);return+Jl(n)==+Jl(i)}function Ls(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function m0(r){return!(!Ls(r)&&typeof r!="number"||isNaN(+st(r)))}function g0(r,e,t){const[n,i]=ro(t?.in,r,e),a=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return a*12+s}function Uo(r,e){const t=st(r,e?.in);return Math.trunc(t.getMonth()/3)+1}function y0(r,e,t){const[n,i]=ro(t?.in,r,e),a=n.getFullYear()-i.getFullYear(),s=Uo(n)-Uo(i);return a*4+s}function v0(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()-i.getFullYear()}function zue(r,e,t){const[n,i]=ro(t?.in,r,e),a=s2(n,i),s=Math.abs(Cc(n,i));n.setDate(n.getDate()-a*s);const o=+(s2(n,i)===-a),l=a*(s-o);return l===0?0:l}function s2(r,e){const t=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function X6(r,e){const t=st(r,e?.in);return t.setHours(23,59,59,999),t}function Z6(r,e){const t=st(r,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function ST(r,e){const t=st(r,e?.in),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function J6(r,e){const t=st(r,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function e5(r,e){const t=st(r,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Py(r,e){const t=st(r,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Yue(r,e){const t=lu(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=st(r,e?.in),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const que={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wue=(r,e,t)=>{let n;const i=que[r];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function US(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Vue={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Que={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xue={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zue={date:US({formats:Vue,defaultWidth:"full"}),time:US({formats:Que,defaultWidth:"full"}),dateTime:US({formats:Xue,defaultWidth:"full"})},Jue={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ece=(r,e,t,n)=>Jue[r];function td(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=t?.width?String(t.width):s;i=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=t?.width?String(t.width):r.defaultWidth;i=r.values[o]||r.values[s]}const a=r.argumentCallback?r.argumentCallback(e):e;return i[a]}}const tce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ice={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ace={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oce=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},lce={ordinalNumber:oce,era:td({values:tce,defaultWidth:"wide"}),quarter:td({values:rce,defaultWidth:"wide",argumentCallback:r=>r-1}),month:td({values:nce,defaultWidth:"wide"}),day:td({values:ice,defaultWidth:"wide"}),dayPeriod:td({values:ace,defaultWidth:"wide",formattingValues:sce,defaultFormattingWidth:"wide"})};function rd(r){return(e,t={})=>{const n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?cce(o,h=>h.test(s)):uce(o,h=>h.test(s));let c;c=r.valueCallback?r.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(s.length);return{value:c,rest:f}}}function uce(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function cce(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function fce(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const i=n[0],a=e.match(r.parsePattern);if(!a)return null;let s=r.valueCallback?r.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const dce=/^(\d+)(th|st|nd|rd)?/i,hce=/\d+/i,pce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mce={any:[/^b/i,/^(a|c)/i]},gce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yce={any:[/1/i,/2/i,/3/i,/4/i]},vce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ece={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_ce={ordinalNumber:fce({matchPattern:dce,parsePattern:hce,valueCallback:r=>parseInt(r,10)}),era:rd({matchPatterns:pce,defaultMatchWidth:"wide",parsePatterns:mce,defaultParseWidth:"any"}),quarter:rd({matchPatterns:gce,defaultMatchWidth:"wide",parsePatterns:yce,defaultParseWidth:"any",valueCallback:r=>r+1}),month:rd({matchPatterns:vce,defaultMatchWidth:"wide",parsePatterns:bce,defaultParseWidth:"any"}),day:rd({matchPatterns:xce,defaultMatchWidth:"wide",parsePatterns:Sce,defaultParseWidth:"any"}),dayPeriod:rd({matchPatterns:Ece,defaultMatchWidth:"any",parsePatterns:wce,defaultParseWidth:"any"})},t5={code:"en-US",formatDistance:Wue,formatLong:Zue,formatRelative:ece,localize:lce,match:_ce,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Tce(r,e){const t=st(r,e?.in);return Cc(t,Py(t))+1}function VA(r,e){const t=st(r,e?.in),n=+Ic(t)-+Hue(t);return Math.round(n/W6)+1}function QA(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=lu(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Ht(e?.in||r,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);const o=Ks(s,e),l=Ht(e?.in||r,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=Ks(l,e);return+t>=+o?n+1:+t>=+c?n:n-1}function Ace(r,e){const t=lu(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=QA(r,e),a=Ht(e?.in||r,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ks(a,e)}function r5(r,e){const t=st(r,e?.in),n=+Ks(t,e)-+Ace(t,e);return Math.round(n/W6)+1}function Ft(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Io={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Ft(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Ft(t+1,2)},d(r,e){return Ft(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Ft(r.getHours()%12||12,e.length)},H(r,e){return Ft(r.getHours(),e.length)},m(r,e){return Ft(r.getMinutes(),e.length)},s(r,e){return Ft(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return Ft(i,e.length)}},Qu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},o2={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Io.y(r,e)},Y:function(r,e,t,n){const i=QA(r,n),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Ft(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Ft(a,e.length)},R:function(r,e){const t=Q6(r);return Ft(t,e.length)},u:function(r,e){const t=r.getFullYear();return Ft(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ft(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ft(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Io.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ft(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const i=r5(r,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Ft(i,e.length)},I:function(r,e,t){const n=VA(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Ft(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Io.d(r,e)},D:function(r,e,t){const n=Tce(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Ft(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ft(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ft(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Ft(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let i;switch(n===12?i=Qu.noon:n===0?i=Qu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let i;switch(n>=17?i=Qu.evening:n>=12?i=Qu.afternoon:n>=4?i=Qu.morning:i=Qu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Io.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Io.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Ft(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Ft(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Io.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Io.s(r,e)},S:function(r,e){return Io.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return u2(n);case"XXXX":case"XX":return Il(n);case"XXXXX":case"XXX":default:return Il(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return u2(n);case"xxxx":case"xx":return Il(n);case"xxxxx":case"xxx":default:return Il(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l2(n,":");case"OOOO":default:return"GMT"+Il(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l2(n,":");case"zzzz":default:return"GMT"+Il(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return Ft(n,e.length)},T:function(r,e,t){return Ft(+r,e.length)}};function l2(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),a=n%60;return a===0?t+String(i):t+String(i)+e+Ft(a,2)}function u2(r,e){return r%60===0?(r>0?"-":"+")+Ft(Math.abs(r)/60,2):Il(r,e)}function Il(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Ft(Math.trunc(n/60),2),a=Ft(n%60,2);return t+i+e+a}const c2=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},n5=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Dce=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return c2(r,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",c2(n,e)).replace("{{time}}",n5(i,e))},ET={p:n5,P:Dce},Oce=/^D+$/,Ice=/^Y+$/,Cce=["D","DD","YY","YYYY"];function Rce(r){return Oce.test(r)}function Pce(r){return Ice.test(r)}function Lce(r,e,t){const n=kce(r,e,t);if(console.warn(n),Cce.includes(r))throw new RangeError(n)}function kce(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jce=/^'([^]*?)'?$/,Fce=/''/g,Bce=/[a-zA-Z]/;function f2(r,e,t){const n=lu(),i=t?.locale??n.locale??t5,a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=st(r,t?.in);if(!m0(o))throw new RangeError("Invalid time value");let l=e.match(Nce).map(f=>{const h=f[0];if(h==="p"||h==="P"){const p=ET[h];return p(f,i.formatLong)}return f}).join("").match(Mce).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const h=f[0];if(h==="'")return{isToken:!1,value:Uce(f)};if(o2[h])return{isToken:!0,value:f};if(h.match(Bce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(f=>{if(!f.isToken)return f.value;const h=f.value;(!t?.useAdditionalWeekYearTokens&&Pce(h)||!t?.useAdditionalDayOfYearTokens&&Rce(h))&&Lce(h,e,String(r));const p=o2[h[0]];return p(o,h,i.localize,c)}).join("")}function Uce(r){const e=r.match(jce);return e?e[1].replace(Fce,"'"):r}function d2(r,e){return st(r,e?.in).getDate()}function $ce(r,e){return st(r,e?.in).getDay()}function Hce(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=t.getMonth(),a=Ht(t,0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}function Gce(){return Object.assign({},lu())}function sa(r,e){return st(r,e?.in).getHours()}function Kce(r,e){const t=st(r,e?.in).getDay();return t===0?7:t}function oa(r,e){return st(r,e?.in).getMinutes()}function Xn(r,e){return st(r,e?.in).getMonth()}function Go(r){return st(r).getSeconds()}function wT(r){return+st(r)}function Tt(r,e){return st(r,e?.in).getFullYear()}function Vo(r,e){return+st(r)>+st(e)}function Ra(r,e){return+st(r)<+st(e)}function zce(r,e){return+st(r)==+st(e)}function Yce(r,e){const t=qce(e)?new e(0):Ht(e,0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}function qce(r){return typeof r=="function"&&r.prototype?.constructor===r}const Wce=10;class i5{subPriority=0;validate(e,t){return!0}}class Vce extends i5{constructor(e,t,n,i,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Qce extends i5{priority=Wce;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>Ht(t,n))}set(e,t){return t.timestampIsSet?e:Ht(e,Yce(e,this.context))}}class Mt{run(e,t,n,i){const a=this.parse(e,t,n,i);return a?{setter:new Vce(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}class Xce extends Mt{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Tr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Aa={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ar(r,e){return r&&{value:e(r.value),rest:r.rest}}function hr(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Da(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:n*(i*Ry+a*Cy+s*Bue),rest:e.slice(t[0].length)}}function a5(r){return hr(Tr.anyDigitsSigned,r)}function br(r,e){switch(r){case 1:return hr(Tr.singleDigit,e);case 2:return hr(Tr.twoDigits,e);case 3:return hr(Tr.threeDigits,e);case 4:return hr(Tr.fourDigits,e);default:return hr(new RegExp("^\\d{1,"+r+"}"),e)}}function b0(r,e){switch(r){case 1:return hr(Tr.singleDigitSigned,e);case 2:return hr(Tr.twoDigitsSigned,e);case 3:return hr(Tr.threeDigitsSigned,e);case 4:return hr(Tr.fourDigitsSigned,e);default:return hr(new RegExp("^-?\\d{1,"+r+"}"),e)}}function XA(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function s5(r,e){const t=e>0,n=t?e:1-e;let i;if(n<=50)i=r||100;else{const a=n+50,s=Math.trunc(a/100)*100,o=r>=a%100;i=r+s-(o?100:0)}return t?i:1-i}function o5(r){return r%400===0||r%4===0&&r%100!==0}class Zce extends Mt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const i=a=>({year:a,isTwoDigitYear:t==="yy"});switch(t){case"y":return Ar(br(4,e),i);case"yo":return Ar(n.ordinalNumber(e,{unit:"year"}),i);default:return Ar(br(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const i=e.getFullYear();if(n.isTwoDigitYear){const s=s5(n.year,i);return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}const a=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Jce extends Mt{priority=130;parse(e,t,n){const i=a=>({year:a,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Ar(br(4,e),i);case"Yo":return Ar(n.ordinalNumber(e,{unit:"year"}),i);default:return Ar(br(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,i){const a=QA(e,i);if(n.isTwoDigitYear){const o=s5(n.year,a);return e.setFullYear(o,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ks(e,i)}const s=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(s,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ks(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class efe extends Mt{priority=130;parse(e,t){return b0(t==="R"?4:t.length,e)}set(e,t,n){const i=Ht(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Ic(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class tfe extends Mt{priority=130;parse(e,t){return b0(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class rfe extends Mt{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return br(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class nfe extends Mt{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return br(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class ife extends Mt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const i=a=>a-1;switch(t){case"M":return Ar(hr(Tr.month,e),i);case"MM":return Ar(br(2,e),i);case"Mo":return Ar(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class afe extends Mt{priority=110;parse(e,t,n){const i=a=>a-1;switch(t){case"L":return Ar(hr(Tr.month,e),i);case"LL":return Ar(br(2,e),i);case"Lo":return Ar(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function sfe(r,e,t){const n=st(r,t?.in),i=r5(n,t)-e;return n.setDate(n.getDate()-i*7),st(n,t?.in)}class ofe extends Mt{priority=100;parse(e,t,n){switch(t){case"w":return hr(Tr.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,i){return Ks(sfe(e,n,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function lfe(r,e,t){const n=st(r,t?.in),i=VA(n,t)-e;return n.setDate(n.getDate()-i*7),n}class ufe extends Mt{priority=100;parse(e,t,n){switch(t){case"I":return hr(Tr.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Ic(lfe(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const cfe=[31,28,31,30,31,30,31,31,30,31,30,31],ffe=[31,29,31,30,31,30,31,31,30,31,30,31];class dfe extends Mt{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return hr(Tr.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return br(t.length,e)}}validate(e,t){const n=e.getFullYear(),i=o5(n),a=e.getMonth();return i?t>=1&&t<=ffe[a]:t>=1&&t<=cfe[a]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class hfe extends Mt{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return hr(Tr.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return br(t.length,e)}}validate(e,t){const n=e.getFullYear();return o5(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function ZA(r,e,t){const n=lu(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=st(r,t?.in),s=a.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(s+c)%7:(l+c)%7-(s+c)%7;return ua(a,f,t)}class pfe extends Mt{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=ZA(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class mfe extends Mt{priority=90;parse(e,t,n,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return Ar(br(t.length,e),a);case"eo":return Ar(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=ZA(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class gfe extends Mt{priority=90;parse(e,t,n,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return Ar(br(t.length,e),a);case"co":return Ar(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=ZA(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function yfe(r,e,t){const n=st(r,t?.in),i=Kce(n,t),a=e-i;return ua(n,a,t)}class vfe extends Mt{priority=90;parse(e,t,n){const i=a=>a===0?7:a;switch(t){case"i":case"ii":return br(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Ar(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return Ar(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Ar(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Ar(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=yfe(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class bfe extends Mt{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(XA(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class xfe extends Mt{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(XA(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Sfe extends Mt{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(XA(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Efe extends Mt{priority=70;parse(e,t,n){switch(t){case"h":return hr(Tr.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):!i&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class wfe extends Mt{priority=70;parse(e,t,n){switch(t){case"H":return hr(Tr.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class _fe extends Mt{priority=70;parse(e,t,n){switch(t){case"K":return hr(Tr.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Tfe extends Mt{priority=70;parse(e,t,n){switch(t){case"k":return hr(Tr.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Afe extends Mt{priority=60;parse(e,t,n){switch(t){case"m":return hr(Tr.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class Dfe extends Mt{priority=50;parse(e,t,n){switch(t){case"s":return hr(Tr.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class Ofe extends Mt{priority=30;parse(e,t){const n=i=>Math.trunc(i*Math.pow(10,-t.length+3));return Ar(br(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class Ife extends Mt{priority=10;parse(e,t){switch(t){case"X":return Da(Aa.basicOptionalMinutes,e);case"XX":return Da(Aa.basic,e);case"XXXX":return Da(Aa.basicOptionalSeconds,e);case"XXXXX":return Da(Aa.extendedOptionalSeconds,e);case"XXX":default:return Da(Aa.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Ht(e,e.getTime()-h0(e)-n)}incompatibleTokens=["t","T","x"]}class Cfe extends Mt{priority=10;parse(e,t){switch(t){case"x":return Da(Aa.basicOptionalMinutes,e);case"xx":return Da(Aa.basic,e);case"xxxx":return Da(Aa.basicOptionalSeconds,e);case"xxxxx":return Da(Aa.extendedOptionalSeconds,e);case"xxx":default:return Da(Aa.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Ht(e,e.getTime()-h0(e)-n)}incompatibleTokens=["t","T","X"]}class Rfe extends Mt{priority=40;parse(e){return a5(e)}set(e,t,n){return[Ht(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Pfe extends Mt{priority=20;parse(e){return a5(e)}set(e,t,n){return[Ht(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Lfe={G:new Xce,y:new Zce,Y:new Jce,R:new efe,u:new tfe,Q:new rfe,q:new nfe,M:new ife,L:new afe,w:new ofe,I:new ufe,d:new dfe,D:new hfe,E:new pfe,e:new mfe,c:new gfe,i:new vfe,a:new bfe,b:new xfe,B:new Sfe,h:new Efe,H:new wfe,K:new _fe,k:new Tfe,m:new Afe,s:new Dfe,S:new Ofe,X:new Ife,x:new Cfe,t:new Rfe,T:new Pfe},kfe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mfe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nfe=/^'([^]*?)'?$/,jfe=/''/g,Ffe=/\S/,Bfe=/[a-zA-Z]/;function Ufe(r,e,t,n){const i=()=>Ht(n?.in||t,NaN),a=Gce(),s=n?.locale??a.locale??t5,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!e)return r?i():st(t,n?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:s},f=[new Qce(n?.in,t)],h=e.match(Mfe).map(v=>{const E=v[0];if(E in ET){const S=ET[E];return S(v,s.formatLong)}return v}).join("").match(kfe),p=[];for(let v of h){const E=v[0],S=Lfe[E];if(S){const{incompatibleTokens:w}=S;if(Array.isArray(w)){const _=p.find(I=>w.includes(I.token)||I.token===E);if(_)throw new RangeError(`The format string mustn't contain \`${_.fullToken}\` and \`${v}\` at the same time`)}else if(S.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${v}\` and any other token at the same time`);p.push({token:E,fullToken:v});const A=S.run(r,v,s.match,c);if(!A)return i();f.push(A.setter),r=A.rest}else{if(E.match(Bfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(v==="''"?v="'":E==="'"&&(v=$fe(v)),r.indexOf(v)===0)r=r.slice(v.length);else return i()}}if(r.length>0&&Ffe.test(r))return i();const g=f.map(v=>v.priority).sort((v,E)=>E-v).filter((v,E,S)=>S.indexOf(v)===E).map(v=>f.filter(E=>E.priority===v).sort((E,S)=>S.subPriority-E.subPriority)).map(v=>v[0]);let y=st(t,n?.in);if(isNaN(+y))return i();const b={};for(const v of g){if(!v.validate(y,c))return i();const E=v.set(y,b,c);Array.isArray(E)?(y=E[0],Object.assign(b,E[1])):y=E}return y}function $fe(r){return r.match(Nfe)[1].replace(jfe,"'")}function Hfe(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function Gfe(r,e,t){const[n,i]=ro(t?.in,r,e);return+ST(n)==+ST(i)}function Kfe(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()===i.getFullYear()}function Ud(r,e,t){const n=+st(r,t?.in),[i,a]=[+st(e.start,t?.in),+st(e.end,t?.in)].sort((s,o)=>s-o);return n>=i&&n<=a}function zfe(r,e,t){return ua(r,-1,t)}function Yfe(r,e){const t=()=>Ht(e?.in,NaN),i=Qfe(r);let a;if(i.date){const c=Xfe(i.date,2);a=Zfe(c.restDateString,c.year)}if(!a||isNaN(+a))return t();const s=+a;let o=0,l;if(i.time&&(o=Jfe(i.time),isNaN(o)))return t();if(i.timezone){if(l=ede(i.timezone),isNaN(l))return t()}else{const c=new Date(s+o),f=st(0,e?.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return st(s+o+l,e?.in)}const nm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},qfe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wfe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Vfe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qfe(r){const e={},t=r.split(nm.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],nm.timeZoneDelimiter.test(e.date)&&(e.date=r.split(nm.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const i=nm.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function Xfe(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?i:a*100,restDateString:r.slice((n[1]||n[2]).length)}}function Zfe(r,e){if(e===null)return new Date(NaN);const t=r.match(qfe);if(!t)return new Date(NaN);const n=!!t[4],i=nd(t[1]),a=nd(t[2])-1,s=nd(t[3]),o=nd(t[4]),l=nd(t[5])-1;if(n)return ade(e,o,l)?tde(e,o,l):new Date(NaN);{const c=new Date(0);return!nde(e,a,s)||!ide(e,i)?new Date(NaN):(c.setUTCFullYear(e,a,Math.max(i,s)),c)}}function nd(r){return r?parseInt(r):1}function Jfe(r){const e=r.match(Wfe);if(!e)return NaN;const t=$S(e[1]),n=$S(e[2]),i=$S(e[3]);return sde(t,n,i)?t*Ry+n*Cy+i*1e3:NaN}function $S(r){return r&&parseFloat(r.replace(",","."))||0}function ede(r){if(r==="Z")return 0;const e=r.match(Vfe);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return ode(n,i)?t*(n*Ry+i*Cy):NaN}function tde(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const i=n.getUTCDay()||7,a=(e-1)*7+t+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const rde=[31,null,31,30,31,30,31,31,30,31,30,31];function l5(r){return r%400===0||r%4===0&&r%100!==0}function nde(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(rde[e]||(l5(r)?29:28))}function ide(r,e){return e>=1&&e<=(l5(r)?366:365)}function ade(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function sde(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function ode(r,e){return e>=0&&e<=59}function gi(r,e,t){const n=st(r,t?.in),i=n.getFullYear(),a=n.getDate(),s=Ht(r,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=Hce(s);return n.setMonth(e,Math.min(a,o)),n}function ag(r,e,t){const n=st(r,t?.in);return n.setHours(e),n}function sg(r,e,t){const n=st(r,t?.in);return n.setMinutes(e),n}function oc(r,e,t){const n=st(r,t?.in),i=Math.trunc(n.getMonth()/3)+1,a=e-i;return gi(n,n.getMonth()+a*3)}function og(r,e,t){const n=st(r,t?.in);return n.setSeconds(e),n}function Ea(r,e,t){const n=st(r,t?.in);return isNaN(+n)?Ht(r,NaN):(n.setFullYear(e),n)}function zl(r,e,t){return da(r,-e,t)}function u5(r,e,t){return WA(r,-1,t)}function h2(r,e,t){return p0(r,-1,t)}function Rc(r,e,t){return Ps(r,-e,t)}function Ly(){return typeof window<"u"}function Jc(r){return c5(r)?(r.nodeName||"").toLowerCase():"#document"}function _i(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function qa(r){var e;return(e=(c5(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function c5(r){return Ly()?r instanceof Node||r instanceof _i(r).Node:!1}function Rn(r){return Ly()?r instanceof Element||r instanceof _i(r).Element:!1}function Ha(r){return Ly()?r instanceof HTMLElement||r instanceof _i(r).HTMLElement:!1}function p2(r){return!Ly()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof _i(r).ShadowRoot}const lde=new Set(["inline","contents"]);function Eh(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=Wi(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!lde.has(i)}const ude=new Set(["table","td","th"]);function cde(r){return ude.has(Jc(r))}const fde=[":popover-open",":modal"];function ky(r){return fde.some(e=>{try{return r.matches(e)}catch{return!1}})}const dde=["transform","translate","scale","rotate","perspective"],hde=["transform","translate","scale","rotate","perspective","filter"],pde=["paint","layout","strict","content"];function JA(r){const e=eD(),t=Rn(r)?Wi(r):r;return dde.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||hde.some(n=>(t.willChange||"").includes(n))||pde.some(n=>(t.contain||"").includes(n))}function mde(r){let e=Qo(r);for(;Ha(e)&&!Pc(e);){if(JA(e))return e;if(ky(e))return null;e=Qo(e)}return null}function eD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gde=new Set(["html","body","#document"]);function Pc(r){return gde.has(Jc(r))}function Wi(r){return _i(r).getComputedStyle(r)}function My(r){return Rn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Qo(r){if(Jc(r)==="html")return r;const e=r.assignedSlot||r.parentNode||p2(r)&&r.host||qa(r);return p2(e)?e.host:e}function f5(r){const e=Qo(r);return Pc(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ha(e)&&Eh(e)?e:f5(e)}function $d(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=f5(r),a=i===((n=r.ownerDocument)==null?void 0:n.body),s=_i(i);if(a){const o=_T(s);return e.concat(s,s.visualViewport||[],Eh(i)?i:[],o&&t?$d(o):[])}return e.concat(i,$d(i,[],t))}function _T(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}const Lc=Math.min,Yl=Math.max,x0=Math.round,im=Math.floor,Na=r=>({x:r,y:r}),yde={left:"right",right:"left",bottom:"top",top:"bottom"},vde={start:"end",end:"start"};function bde(r,e,t){return Yl(r,Lc(e,t))}function Ny(r,e){return typeof r=="function"?r(e):r}function kc(r){return r.split("-")[0]}function wh(r){return r.split("-")[1]}function xde(r){return r==="x"?"y":"x"}function tD(r){return r==="y"?"height":"width"}const Sde=new Set(["top","bottom"]);function jl(r){return Sde.has(kc(r))?"y":"x"}function rD(r){return xde(jl(r))}function Ede(r,e,t){t===void 0&&(t=!1);const n=wh(r),i=rD(r),a=tD(i);let s=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=S0(s)),[s,S0(s)]}function wde(r){const e=S0(r);return[TT(r),e,TT(e)]}function TT(r){return r.replace(/start|end/g,e=>vde[e])}const m2=["left","right"],g2=["right","left"],_de=["top","bottom"],Tde=["bottom","top"];function Ade(r,e,t){switch(r){case"top":case"bottom":return t?e?g2:m2:e?m2:g2;case"left":case"right":return e?_de:Tde;default:return[]}}function Dde(r,e,t,n){const i=wh(r);let a=Ade(kc(r),t==="start",n);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(TT)))),a}function S0(r){return r.replace(/left|right|bottom|top/g,e=>yde[e])}function Ode(r){return{top:0,right:0,bottom:0,left:0,...r}}function d5(r){return typeof r!="number"?Ode(r):{top:r,right:r,bottom:r,left:r}}function E0(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}var Ide=typeof document<"u",Cde=function(){},w0=Ide?R.useLayoutEffect:Cde;const Rde={...YT},Pde=Rde.useInsertionEffect,Lde=Pde||(r=>r());function kde(r){const e=R.useRef(()=>{});return Lde(()=>{e.current=r}),R.useCallback(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function y2(r,e,t){let{reference:n,floating:i}=r;const a=jl(e),s=rD(e),o=tD(s),l=kc(e),c=a==="y",f=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,p=n[o]/2-i[o]/2;let g;switch(l){case"top":g={x:f,y:n.y-i.height};break;case"bottom":g={x:f,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-i.width,y:h};break;default:g={x:n.x,y:n.y}}switch(wh(e)){case"start":g[s]-=p*(t&&c?-1:1);break;case"end":g[s]+=p*(t&&c?-1:1);break}return g}const Mde=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:r,floating:e,strategy:i}),{x:f,y:h}=y2(c,n,l),p=n,g={},y=0;for(let b=0;b<o.length;b++){const{name:v,fn:E}=o[b],{x:S,y:w,data:A,reset:_}=await E({x:f,y:h,initialPlacement:n,placement:p,strategy:i,middlewareData:g,rects:c,platform:s,elements:{reference:r,floating:e}});f=S??f,h=w??h,g={...g,[v]:{...g[v],...A}},_&&y<=50&&(y++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(c=_.rects===!0?await s.getElementRects({reference:r,floating:e,strategy:i}):_.rects),{x:f,y:h}=y2(c,p,l)),b=-1)}return{x:f,y:h,placement:p,strategy:i,middlewareData:g}};async function Nde(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=Ny(e,r),y=d5(g),v=o[p?h==="floating"?"reference":"floating":h],E=E0(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(v)))==null||t?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:f,strategy:l})),S=h==="floating"?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},_=E0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:w,strategy:l}):S);return{top:(E.top-_.top+y.top)/A.y,bottom:(_.bottom-E.bottom+y.bottom)/A.y,left:(E.left-_.left+y.left)/A.x,right:(_.right-E.right+y.right)/A.x}}const jde=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:f=0}=Ny(r,e)||{};if(c==null)return{};const h=d5(f),p={x:t,y:n},g=rD(i),y=tD(g),b=await s.getDimensions(c),v=g==="y",E=v?"top":"left",S=v?"bottom":"right",w=v?"clientHeight":"clientWidth",A=a.reference[y]+a.reference[g]-p[g]-a.floating[y],_=p[g]-a.reference[g],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let D=I?I[w]:0;(!D||!await(s.isElement==null?void 0:s.isElement(I)))&&(D=o.floating[w]||a.floating[y]);const P=A/2-_/2,k=D/2-b[y]/2-1,M=Lc(h[E],k),H=Lc(h[S],k),N=M,Q=D-b[y]-H,z=D/2-b[y]/2+P,V=bde(N,z,Q),K=!l.arrow&&wh(i)!=null&&z!==V&&a.reference[y]/2-(z<N?M:H)-b[y]/2<0,Y=K?z<N?z-N:z-Q:0;return{[g]:p[g]+Y,data:{[g]:V,centerOffset:z-V-Y,...K&&{alignmentOffset:Y}},reset:K}}}),Fde=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=Ny(r,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const E=kc(i),S=jl(o),w=kc(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=p||(w||!b?[S0(o)]:wde(o)),I=y!=="none";!p&&I&&_.push(...Dde(o,b,y,A));const D=[o,..._],P=await Nde(e,v),k=[];let M=((n=a.flip)==null?void 0:n.overflows)||[];if(f&&k.push(P[E]),h){const z=Ede(i,s,A);k.push(P[z[0]],P[z[1]])}if(M=[...M,{placement:i,overflows:k}],!k.every(z=>z<=0)){var H,N;const z=(((H=a.flip)==null?void 0:H.index)||0)+1,V=D[z];if(V&&(!(h==="alignment"?S!==jl(V):!1)||M.every(W=>jl(W.placement)===S?W.overflows[0]>0:!0)))return{data:{index:z,overflows:M},reset:{placement:V}};let K=(N=M.filter(Y=>Y.overflows[0]<=0).sort((Y,W)=>Y.overflows[1]-W.overflows[1])[0])==null?void 0:N.placement;if(!K)switch(g){case"bestFit":{var Q;const Y=(Q=M.filter(W=>{if(I){const J=jl(W.placement);return J===S||J==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(J=>J>0).reduce((J,G)=>J+G,0)]).sort((W,J)=>W[1]-J[1])[0])==null?void 0:Q[0];Y&&(K=Y);break}case"initialPlacement":K=o;break}if(i!==K)return{reset:{placement:K}}}return{}}}},Bde=new Set(["left","top"]);async function Ude(r,e){const{placement:t,platform:n,elements:i}=r,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=kc(t),o=wh(t),l=jl(t)==="y",c=Bde.has(s)?-1:1,f=a&&l?-1:1,h=Ny(e,r);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),l?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const $de=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await Ude(e,r);return s===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}};function h5(r){const e=Wi(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ha(r),a=i?r.offsetWidth:t,s=i?r.offsetHeight:n,o=x0(t)!==a||x0(n)!==s;return o&&(t=a,n=s),{width:t,height:n,$:o}}function nD(r){return Rn(r)?r:r.contextElement}function mc(r){const e=nD(r);if(!Ha(e))return Na(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=h5(e);let s=(a?x0(t.width):t.width)/n,o=(a?x0(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Hde=Na(0);function p5(r){const e=_i(r);return!eD()||!e.visualViewport?Hde:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Gde(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==_i(r)?!1:e}function eu(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),a=nD(r);let s=Na(1);e&&(n?Rn(n)&&(s=mc(n)):s=mc(r));const o=Gde(a,t,n)?p5(a):Na(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(a){const p=_i(a),g=n&&Rn(n)?_i(n):n;let y=p,b=_T(y);for(;b&&n&&g!==y;){const v=mc(b),E=b.getBoundingClientRect(),S=Wi(b),w=E.left+(b.clientLeft+parseFloat(S.paddingLeft))*v.x,A=E.top+(b.clientTop+parseFloat(S.paddingTop))*v.y;l*=v.x,c*=v.y,f*=v.x,h*=v.y,l+=w,c+=A,y=_i(b),b=_T(y)}}return E0({width:f,height:h,x:l,y:c})}function jy(r,e){const t=My(r).scrollLeft;return e?e.left+t:eu(qa(r)).left+t}function m5(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-jy(r,t),i=t.top+e.scrollTop;return{x:n,y:i}}function Kde(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const a=i==="fixed",s=qa(n),o=e?ky(e.floating):!1;if(n===s||o&&a)return t;let l={scrollLeft:0,scrollTop:0},c=Na(1);const f=Na(0),h=Ha(n);if((h||!h&&!a)&&((Jc(n)!=="body"||Eh(s))&&(l=My(n)),Ha(n))){const g=eu(n);c=mc(n),f.x=g.x+n.clientLeft,f.y=g.y+n.clientTop}const p=s&&!h&&!a?m5(s,l):Na(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+f.x+p.x,y:t.y*c.y-l.scrollTop*c.y+f.y+p.y}}function zde(r){return Array.from(r.getClientRects())}function Yde(r){const e=qa(r),t=My(r),n=r.ownerDocument.body,i=Yl(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Yl(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let s=-t.scrollLeft+jy(r);const o=-t.scrollTop;return Wi(n).direction==="rtl"&&(s+=Yl(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:s,y:o}}const v2=25;function qde(r,e){const t=_i(r),n=qa(r),i=t.visualViewport;let a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const f=eD();(!f||f&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=jy(n);if(c<=0){const f=n.ownerDocument,h=f.body,p=getComputedStyle(h),g=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(n.clientWidth-h.clientWidth-g);y<=v2&&(a-=y)}else c<=v2&&(a+=c);return{width:a,height:s,x:o,y:l}}const Wde=new Set(["absolute","fixed"]);function Vde(r,e){const t=eu(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,a=Ha(r)?mc(r):Na(1),s=r.clientWidth*a.x,o=r.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:s,height:o,x:l,y:c}}function b2(r,e,t){let n;if(e==="viewport")n=qde(r,t);else if(e==="document")n=Yde(qa(r));else if(Rn(e))n=Vde(e,t);else{const i=p5(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return E0(n)}function g5(r,e){const t=Qo(r);return t===e||!Rn(t)||Pc(t)?!1:Wi(t).position==="fixed"||g5(t,e)}function Qde(r,e){const t=e.get(r);if(t)return t;let n=$d(r,[],!1).filter(o=>Rn(o)&&Jc(o)!=="body"),i=null;const a=Wi(r).position==="fixed";let s=a?Qo(r):r;for(;Rn(s)&&!Pc(s);){const o=Wi(s),l=JA(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&Wde.has(i.position)||Eh(s)&&!l&&g5(r,s))?n=n.filter(f=>f!==s):i=o,s=Qo(s)}return e.set(r,n),n}function Xde(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=[...t==="clippingAncestors"?ky(e)?[]:Qde(e,this._c):[].concat(t),n],o=s[0],l=s.reduce((c,f)=>{const h=b2(e,f,i);return c.top=Yl(h.top,c.top),c.right=Lc(h.right,c.right),c.bottom=Lc(h.bottom,c.bottom),c.left=Yl(h.left,c.left),c},b2(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zde(r){const{width:e,height:t}=h5(r);return{width:e,height:t}}function Jde(r,e,t){const n=Ha(e),i=qa(e),a=t==="fixed",s=eu(r,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=Na(0);function c(){l.x=jy(i)}if(n||!n&&!a)if((Jc(e)!=="body"||Eh(i))&&(o=My(e)),n){const g=eu(e,!0,a,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();a&&!n&&i&&c();const f=i&&!n&&!a?m5(i,o):Na(0),h=s.left+o.scrollLeft-l.x-f.x,p=s.top+o.scrollTop-l.y-f.y;return{x:h,y:p,width:s.width,height:s.height}}function HS(r){return Wi(r).position==="static"}function x2(r,e){if(!Ha(r)||Wi(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return qa(r)===t&&(t=t.ownerDocument.body),t}function y5(r,e){const t=_i(r);if(ky(r))return t;if(!Ha(r)){let i=Qo(r);for(;i&&!Pc(i);){if(Rn(i)&&!HS(i))return i;i=Qo(i)}return t}let n=x2(r,e);for(;n&&cde(n)&&HS(n);)n=x2(n,e);return n&&Pc(n)&&HS(n)&&!JA(n)?t:n||mde(r)||t}const ehe=async function(r){const e=this.getOffsetParent||y5,t=this.getDimensions,n=await t(r.floating);return{reference:Jde(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function the(r){return Wi(r).direction==="rtl"}const rhe={convertOffsetParentRelativeRectToViewportRelativeRect:Kde,getDocumentElement:qa,getClippingRect:Xde,getOffsetParent:y5,getElementRects:ehe,getClientRects:zde,getDimensions:Zde,getScale:mc,isElement:Rn,isRTL:the};function v5(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function nhe(r,e){let t=null,n;const i=qa(r);function a(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=r.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(o||e(),!p||!g)return;const y=im(h),b=im(i.clientWidth-(f+p)),v=im(i.clientHeight-(h+g)),E=im(f),w={rootMargin:-y+"px "+-b+"px "+-v+"px "+-E+"px",threshold:Yl(0,Lc(1,l))||1};let A=!0;function _(I){const D=I[0].intersectionRatio;if(D!==l){if(!A)return s();D?s(!1,D):n=setTimeout(()=>{s(!1,1e-7)},1e3)}D===1&&!v5(c,r.getBoundingClientRect())&&s(),A=!1}try{t=new IntersectionObserver(_,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(_,w)}t.observe(r)}return s(!0),a}function ihe(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=nD(r),f=i||a?[...c?$d(c):[],...$d(e)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",t,{passive:!0}),a&&E.addEventListener("resize",t)});const h=c&&o?nhe(c,t):null;let p=-1,g=null;s&&(g=new ResizeObserver(E=>{let[S]=E;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let y,b=l?eu(r):null;l&&v();function v(){const E=eu(r);b&&!v5(b,E)&&t(),b=E,y=requestAnimationFrame(v)}return t(),()=>{var E;f.forEach(S=>{i&&S.removeEventListener("scroll",t),a&&S.removeEventListener("resize",t)}),h?.(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const ahe=$de,she=Fde,S2=jde,ohe=(r,e,t)=>{const n=new Map,i={platform:rhe,...t},a={...i.platform,_c:n};return Mde(r,e,{...i,platform:a})};var lhe=typeof document<"u",uhe=function(){},lg=lhe?R.useLayoutEffect:uhe;function _0(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,i;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!_0(r[n],e[n]))return!1;return!0}if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const a=i[n];if(!(a==="_owner"&&r.$$typeof)&&!_0(r[a],e[a]))return!1}return!0}return r!==r&&e!==e}function b5(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function E2(r,e){const t=b5(r);return Math.round(e*t)/t}function GS(r){const e=R.useRef(r);return lg(()=>{e.current=r}),e}function che(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=r,[f,h]=R.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=R.useState(n);_0(p,n)||g(n);const[y,b]=R.useState(null),[v,E]=R.useState(null),S=R.useCallback(W=>{W!==I.current&&(I.current=W,b(W))},[]),w=R.useCallback(W=>{W!==D.current&&(D.current=W,E(W))},[]),A=a||y,_=s||v,I=R.useRef(null),D=R.useRef(null),P=R.useRef(f),k=l!=null,M=GS(l),H=GS(i),N=GS(c),Q=R.useCallback(()=>{if(!I.current||!D.current)return;const W={placement:e,strategy:t,middleware:p};H.current&&(W.platform=H.current),ohe(I.current,D.current,W).then(J=>{const G={...J,isPositioned:N.current!==!1};z.current&&!_0(P.current,G)&&(P.current=G,Zd.flushSync(()=>{h(G)}))})},[p,e,t,H,N]);lg(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const z=R.useRef(!1);lg(()=>(z.current=!0,()=>{z.current=!1}),[]),lg(()=>{if(A&&(I.current=A),_&&(D.current=_),A&&_){if(M.current)return M.current(A,_,Q);Q()}},[A,_,Q,M,k]);const V=R.useMemo(()=>({reference:I,floating:D,setReference:S,setFloating:w}),[S,w]),K=R.useMemo(()=>({reference:A,floating:_}),[A,_]),Y=R.useMemo(()=>{const W={position:t,left:0,top:0};if(!K.floating)return W;const J=E2(K.floating,f.x),G=E2(K.floating,f.y);return o?{...W,transform:"translate("+J+"px, "+G+"px)",...b5(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:G}},[t,o,K.floating,f.x,f.y]);return R.useMemo(()=>({...f,update:Q,refs:V,elements:K,floatingStyles:Y}),[f,Q,V,K,Y])}const fhe=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:i}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?S2({element:n.current,padding:i}).fn(t):{}:n?S2({element:n,padding:i}).fn(t):{}}}},dhe=(r,e)=>({...ahe(r),options:[r,e]}),hhe=(r,e)=>({...she(r),options:[r,e]}),phe=(r,e)=>({...fhe(r),options:[r,e]}),mhe={...YT};let w2=!1,ghe=0;const _2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ghe++;function yhe(){const[r,e]=R.useState(()=>w2?_2():void 0);return w0(()=>{r==null&&e(_2())},[]),R.useEffect(()=>{w2=!0},[]),r}const vhe=mhe.useId,x5=vhe||yhe,bhe=R.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:i},middlewareData:{arrow:a,shift:s}},width:o=14,height:l=7,tipRadius:c=0,strokeWidth:f=0,staticOffset:h,stroke:p,d:g,style:{transform:y,...b}={},...v}=e,E=x5(),[S,w]=R.useState(!1);if(w0(()=>{if(!i)return;Wi(i).direction==="rtl"&&w(!0)},[i]),!i)return null;const[A,_]=n.split("-"),I=A==="top"||A==="bottom";let D=h;(I&&s!=null&&s.x||!I&&s!=null&&s.y)&&(D=null);const P=f*2,k=P/2,M=o/2*(c/-8+1),H=l/2*c/4,N=!!g,Q=D&&_==="end"?"bottom":"top";let z=D&&_==="end"?"right":"left";D&&S&&(z=_==="end"?"left":"right");const V=a?.x!=null?D||a.x:"",K=a?.y!=null?D||a.y:"",Y=g||"M0,0"+(" H"+o)+(" L"+(o-M)+","+(l-H))+(" Q"+o/2+","+l+" "+M+","+(l-H))+" Z",W={top:N?"rotate(180deg)":"",left:N?"rotate(90deg)":"rotate(-90deg)",bottom:N?"":"rotate(180deg)",right:N?"rotate(-90deg)":"rotate(90deg)"}[A];return L.jsxs("svg",{...v,"aria-hidden":!0,ref:t,width:N?o:o+P,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[z]:V,[Q]:K,[A]:I||N?"100%":"calc(100% - "+P/2+"px)",transform:[W,y].filter(J=>!!J).join(" "),...b},children:[P>0&&L.jsx("path",{clipPath:"url(#"+E+")",fill:"none",stroke:p,strokeWidth:P+(g?0:1),d:Y}),L.jsx("path",{stroke:P&&!g?v.fill:"none",d:Y}),L.jsx("clipPath",{id:E,children:L.jsx("rect",{x:-k,y:k*(N?-1:1),width:o+P,height:o})})]})});function xhe(){const r=new Map;return{emit(e,t){var n;(n=r.get(e))==null||n.forEach(i=>i(t))},on(e,t){r.has(e)||r.set(e,new Set),r.get(e).add(t)},off(e,t){var n;(n=r.get(e))==null||n.delete(t)}}}const She=R.createContext(null),Ehe=R.createContext(null),whe=()=>{var r;return((r=R.useContext(She))==null?void 0:r.id)||null},_he=()=>R.useContext(Ehe);function The(r){const{open:e=!1,onOpenChange:t,elements:n}=r,i=x5(),a=R.useRef({}),[s]=R.useState(()=>xhe()),o=whe()!=null,[l,c]=R.useState(n.reference),f=kde((g,y,b)=>{a.current.openEvent=g?y:void 0,s.emit("openchange",{open:g,event:y,reason:b,nested:o}),t?.(g,y,b)}),h=R.useMemo(()=>({setPositionReference:c}),[]),p=R.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return R.useMemo(()=>({dataRef:a,open:e,onOpenChange:f,elements:p,events:s,floatingId:i,refs:h}),[e,f,p,s,i,h])}function Ahe(r){r===void 0&&(r={});const{nodeId:e}=r,t=The({...r,elements:{reference:null,floating:null,...r.elements}}),n=r.rootContext||t,i=n.elements,[a,s]=R.useState(null),[o,l]=R.useState(null),f=i?.domReference||a,h=R.useRef(null),p=_he();w0(()=>{f&&(h.current=f)},[f]);const g=che({...r,elements:{...i,...o&&{reference:o}}}),y=R.useCallback(w=>{const A=Rn(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(A),g.refs.setReference(A)},[g.refs]),b=R.useCallback(w=>{(Rn(w)||w===null)&&(h.current=w,s(w)),(Rn(g.refs.reference.current)||g.refs.reference.current===null||w!==null&&!Rn(w))&&g.refs.setReference(w)},[g.refs]),v=R.useMemo(()=>({...g.refs,setReference:b,setPositionReference:y,domReference:h}),[g.refs,b,y]),E=R.useMemo(()=>({...g.elements,domReference:f}),[g.elements,f]),S=R.useMemo(()=>({...g,...n,refs:v,elements:E,nodeId:e}),[g,v,E,e,n]);return w0(()=>{n.dataRef.current.floatingContext=S;const w=p?.nodesRef.current.find(A=>A.id===e);w&&(w.context=S)}),R.useMemo(()=>({...g,context:S,refs:v,elements:E}),[g,v,E,S])}var AT=function(e,t){return AT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},AT(e,t)};function hn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");AT(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _t=function(){return _t=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_t.apply(this,arguments)};function Pa(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}var Dhe=function(r){var e=r.showTimeSelectOnly,t=e===void 0?!1:e,n=r.showTime,i=n===void 0?!1:n,a=r.className,s=r.children,o=r.inline,l=t?"Choose Time":"Choose Date".concat(i?" and Time":"");return Ue.createElement("div",{className:a,"aria-label":l,role:o?void 0:"dialog","aria-modal":o?void 0:"true"},s)},Ohe=function(r,e){var t=R.useRef(null),n=R.useRef(r);R.useEffect(function(){n.current=r},[r]);var i=R.useCallback(function(a){var s,o=a.composed&&a.composedPath&&a.composedPath().find(function(l){return l instanceof Node})||a.target;t.current&&!t.current.contains(o)&&(e&&o instanceof HTMLElement&&o.classList.contains(e)||(s=n.current)===null||s===void 0||s.call(n,a))},[e]);return R.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),t},Fy=function(r){var e=r.children,t=r.onClickOutside,n=r.className,i=r.containerRef,a=r.style,s=r.ignoreClass,o=Ohe(t,s);return Ue.createElement("div",{className:n,style:a,ref:function(l){o.current=l,i&&(i.current=l)}},e)},Qe;(function(r){r.ArrowUp="ArrowUp",r.ArrowDown="ArrowDown",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.PageUp="PageUp",r.PageDown="PageDown",r.Home="Home",r.End="End",r.Enter="Enter",r.Space=" ",r.Tab="Tab",r.Escape="Escape",r.Backspace="Backspace",r.X="x"})(Qe||(Qe={}));function S5(){var r=typeof window<"u"?window:globalThis;return r}var _h=12;function Pt(r){if(r==null)return new Date;var e=typeof r=="string"?Yfe(r):st(r);return Si(e)?e:new Date}function Xu(r,e,t,n,i){i===void 0&&(i=Pt());for(var a=Mc(t)||Mc(iD()),s=Array.isArray(e)?e:[e],o=0,l=s;o<l.length;o++){var c=l[o],f=Ufe(r,c,i,{locale:a});if(Si(f)&&(!n||r===nr(f,c,t)))return f}return null}function Si(r,e){return m0(r)&&!Ra(r,new Date("1/1/1800"))}function nr(r,e,t){if(t==="en")return f2(r,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?Mc(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||Mc(iD()),f2(r,e,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function pi(r,e){var t=e.dateFormat,n=e.locale,i=Array.isArray(t)&&t.length>0?t[0]:t;return r&&nr(r,i,n)||""}var E5=" - ";function Ihe(r,e,t){if(!r&&!e)return"";var n=r?pi(r,t):"",i=e?pi(e,t):"",a=t.rangeSeparator||E5;return"".concat(n).concat(a).concat(i)}function Che(r,e){if(!r?.length)return"";var t=r[0]?pi(r[0],e):"";if(r.length===1)return t;if(r.length===2&&r[1]){var n=pi(r[1],e);return"".concat(t,", ").concat(n)}var i=r.length-1;return"".concat(t," (+").concat(i,")")}function am(r,e){var t=e.hour,n=t===void 0?0:t,i=e.minute,a=i===void 0?0:i,s=e.second,o=s===void 0?0:s;return ag(sg(og(r,o),a),n)}function Rhe(r){return VA(r)}function Phe(r,e){return nr(r,"ddd",e)}function dd(r){return Jl(r)}function Ko(r,e,t){var n=Mc(e||iD());return Ks(r,{locale:n,weekStartsOn:t})}function ks(r){return J6(r)}function hd(r){return Py(r)}function T2(r){return ST(r)}function A2(){return Jl(Pt())}function D2(r){return X6(r)}function Lhe(r){return Yue(r)}function khe(r){return Z6(r)}function _a(r,e){return r&&e?Kfe(r,e):!r&&!e}function On(r,e){return r&&e?Hfe(r,e):!r&&!e}function T0(r,e){return r&&e?Gfe(r,e):!r&&!e}function Ot(r,e){return r&&e?Kue(r,e):!r&&!e}function Fl(r,e){return r&&e?zce(r,e):!r&&!e}function Cl(r,e,t){var n,i=Jl(e),a=X6(t);try{n=Ud(r,{start:i,end:a})}catch{n=!1}return n}function iD(){var r=S5();return r.__localeId__}function Mc(r){if(typeof r=="string"){var e=S5();return e.__localeData__?e.__localeData__[r]:void 0}else return r}function Mhe(r,e,t){return e(nr(r,"EEEE",t))}function Nhe(r,e){return nr(r,"EEEEEE",e)}function jhe(r,e){return nr(r,"EEE",e)}function aD(r,e){return nr(gi(Pt(),r),"LLLL",e)}function w5(r,e){return nr(gi(Pt(),r),"LLL",e)}function Fhe(r,e){return nr(oc(Pt(),r),"QQQ",e)}function Gi(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.excludeDateIntervals,o=t.includeDates,l=t.includeDateIntervals,c=t.filterDate,f=t.disabled;return f?!0:Th(r,{minDate:n,maxDate:i})||a&&a.some(function(h){return h instanceof Date?Ot(r,h):Ot(r,h.date)})||s&&s.some(function(h){var p=h.start,g=h.end;return Ud(r,{start:p,end:g})})||o&&!o.some(function(h){return Ot(r,h)})||l&&!l.some(function(h){var p=h.start,g=h.end;return Ud(r,{start:p,end:g})})||c&&!c(Pt(r))||!1}function sD(r,e){var t=e===void 0?{}:e,n=t.excludeDates,i=t.excludeDateIntervals;return i&&i.length>0?i.some(function(a){var s=a.start,o=a.end;return Ud(r,{start:s,end:o})}):n&&n.some(function(a){var s;return a instanceof Date?Ot(r,a):Ot(r,(s=a.date)!==null&&s!==void 0?s:new Date)})||!1}function _5(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate;return Th(r,{minDate:n?J6(n):void 0,maxDate:i?Z6(i):void 0})||a?.some(function(l){return On(r,l instanceof Date?l:l.date)})||s&&!s.some(function(l){return On(r,l)})||o&&!o(Pt(r))||!1}function sm(r,e,t,n){var i=Tt(r),a=Xn(r),s=Tt(e),o=Xn(e),l=Tt(n);return i===s&&i===l?a<=t&&t<=o:i<s?l===i&&a<=t||l===s&&o>=t||l<s&&l>i:!1}function Bhe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates;return Th(r,{minDate:n,maxDate:i})||a&&a.some(function(o){return On(o instanceof Date?o:o.date,r)})||s&&!s.some(function(o){return On(o,r)})||!1}function om(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate,l=t.disabled;return l?!0:Th(r,{minDate:n,maxDate:i})||a?.some(function(c){return T0(r,c instanceof Date?c:c.date)})||s&&!s.some(function(c){return T0(r,c)})||o&&!o(Pt(r))||!1}function lm(r,e,t){if(!e||!t||!m0(e)||!m0(t))return!1;var n=Tt(e),i=Tt(t);return n<=r&&i>=r}function ug(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate,l=t.disabled;if(l)return!0;var c=new Date(r,0,1);return Th(c,{minDate:n?Py(n):void 0,maxDate:i?e5(i):void 0})||a?.some(function(f){return _a(c,f instanceof Date?f:f.date)})||s&&!s.some(function(f){return _a(c,f)})||o&&!o(Pt(c))||!1}function um(r,e,t,n){var i=Tt(r),a=Uo(r),s=Tt(e),o=Uo(e),l=Tt(n);return i===s&&i===l?a<=t&&t<=o:i<s?l===i&&a<=t||l===s&&o>=t||l<s&&l>i:!1}function Th(r,e){var t,n=e===void 0?{}:e,i=n.minDate,a=n.maxDate;return(t=i&&Cc(r,i)<0||a&&Cc(r,a)>0)!==null&&t!==void 0?t:!1}function O2(r,e){return e.some(function(t){return sa(t)===sa(r)&&oa(t)===oa(r)&&Go(t)===Go(r)})}function I2(r,e){var t=e===void 0?{}:e,n=t.excludeTimes,i=t.includeTimes,a=t.filterTime;return n&&O2(r,n)||i&&!O2(r,i)||a&&!a(r)||!1}function C2(r,e){var t=e.minTime,n=e.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var i=Pt();i=ag(i,sa(r)),i=sg(i,oa(r)),i=og(i,Go(r));var a=Pt();a=ag(a,sa(t)),a=sg(a,oa(t)),a=og(a,Go(t));var s=Pt();s=ag(s,sa(n)),s=sg(s,oa(n)),s=og(s,Go(n));var o;try{o=!Ud(i,{start:a,end:s})}catch{o=!1}return o}function R2(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=zl(r,1);return n&&g0(n,a)>0||i&&i.every(function(s){return g0(s,a)>0})||!1}function P2(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=da(r,1);return n&&g0(a,n)>0||i&&i.every(function(s){return g0(a,s)>0})||!1}function Uhe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=Py(r),s=u5(a);return n&&y0(n,s)>0||i&&i.every(function(o){return y0(o,s)>0})||!1}function $he(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=e5(r),s=WA(a,1);return n&&y0(s,n)>0||i&&i.every(function(o){return y0(s,o)>0})||!1}function L2(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=Rc(r,1);return n&&v0(n,a)>0||i&&i.every(function(s){return v0(s,a)>0})||!1}function Hhe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.yearItemNumber,a=i===void 0?_h:i,s=hd(Rc(r,a)),o=Os(s,a).endPeriod,l=n&&Tt(n);return l&&l>o||!1}function k2(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=Ps(r,1);return n&&v0(a,n)>0||i&&i.every(function(s){return v0(a,s)>0})||!1}function Ghe(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.yearItemNumber,a=i===void 0?_h:i,s=Ps(r,a),o=Os(s,a).startPeriod,l=n&&Tt(n);return l&&l<o||!1}function T5(r){var e=r.minDate,t=r.includeDates;if(t&&e){var n=t.filter(function(i){return Cc(i,e)>=0});return a2(n)}else return t?a2(t):e}function A5(r){var e=r.maxDate,t=r.includeDates;if(t&&e){var n=t.filter(function(i){return Cc(i,e)<=0});return i2(n)}else return t?i2(t):e}function M2(r,e){var t;r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var n=new Map,i=0,a=r.length;i<a;i++){var s=r[i];if(Ls(s)){var o=nr(s,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(e)||(l.push(e),n.set(o,l))}else if(typeof s=="object"){var c=Object.keys(s),f=(t=c[0])!==null&&t!==void 0?t:"",h=s[f];if(typeof f=="string"&&Array.isArray(h))for(var p=0,g=h.length;p<g;p++){var y=h[p];if(y){var o=nr(y,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(f)||(l.push(f),n.set(o,l))}}}}return n}function Khe(r,e){return r.length!==e.length?!1:r.every(function(t,n){return t===e[n]})}function zhe(r,e){r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return r.forEach(function(n){var i=n.date,a=n.holidayName;if(Ls(i)){var s=nr(i,"MM.dd.yyyy"),o=t.get(s)||{className:"",holidayNames:[]};if(!("className"in o&&o.className===e&&Khe(o.holidayNames,[a]))){o.className=e;var l=o.holidayNames;o.holidayNames=l?Pa(Pa([],l,!0),[a],!1):[a],t.set(s,o)}}}),t}function Yhe(r,e,t,n,i){for(var a=i.length,s=[],o=0;o<a;o++){var l=r,c=i[o];c&&(l=Uue(l,sa(c)),l=Bd(l,oa(c)),l=Gue(l,Go(c)));var f=Bd(r,(t+1)*n);Vo(l,e)&&Ra(l,f)&&c!=null&&s.push(c)}return s}function N2(r){return r<10?"0".concat(r):"".concat(r)}function Os(r,e){e===void 0&&(e=_h);var t=Math.ceil(Tt(r)/e)*e,n=t-(e-1);return{startPeriod:n,endPeriod:t}}function qhe(r){var e=new Date(r.getFullYear(),r.getMonth(),r.getDate()),t=new Date(r.getFullYear(),r.getMonth(),r.getDate(),24);return Math.round((+t-+e)/36e5)}function j2(r){var e=r.getSeconds(),t=r.getMilliseconds();return st(r.getTime()-e*1e3-t)}function D5(r,e){return j2(r).getTime()===j2(e).getTime()}function F2(r){if(!Ls(r))throw new Error("Invalid date");var e=new Date(r);return e.setHours(0,0,0,0),e}function KS(r,e){if(!Ls(r)||!Ls(e))throw new Error("Invalid date received");var t=F2(r),n=F2(e);return Ra(t,n)}function O5(r){return r.key===Qe.Space}var Whe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.inputRef=Ue.createRef(),n.onTimeChange=function(i){var a,s;n.setState({time:i});var o=n.props.date,l=o instanceof Date&&!isNaN(+o),c=l?o:new Date;if(i?.includes(":")){var f=i.split(":"),h=f[0],p=f[1];c.setHours(Number(h)),c.setMinutes(Number(p))}(s=(a=n.props).onChange)===null||s===void 0||s.call(a,c)},n.renderTimeInput=function(){var i=n.state.time,a=n.props,s=a.date,o=a.timeString,l=a.customTimeInput;return l?R.cloneElement(l,{date:s,value:i,onChange:n.onTimeChange}):Ue.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var c;(c=n.inputRef.current)===null||c===void 0||c.focus()},required:!0,value:i,onChange:function(c){n.onTimeChange(c.target.value||o)}})},n.state={time:n.props.timeString},n}return e.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},e.prototype.render=function(){return Ue.createElement("div",{className:"react-datepicker__input-time-container"},Ue.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Ue.createElement("div",{className:"react-datepicker-time__input-container"},Ue.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(R.Component),Vhe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dayEl=R.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var i,a,s=n.key;s===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,n)},t.isSameDay=function(n){return Ot(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var i=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return t.isSameDayOrWeek(s)}):t.isSameDayOrWeek(t.props.selected),a=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!i&&t.isSameDayOrWeek(t.props.preSelection)&&!a},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Gi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(){return sD(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Ot(t.props.day,Ko(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&Ot(n,Ko(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,i=n.day,a=n.highlightDates;if(!a)return!1;var s=nr(i,"MM.dd.yyyy");return a.get(s)},t.getHolidaysClass=function(){var n,i=t.props,a=i.day,s=i.holidays;if(!s)return[void 0];var o=nr(a,"MM.dd.yyyy");return s.has(o)?[(n=s.get(o))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Cl(i,a,s)},t.isInSelectingRange=function(){var n,i=t.props,a=i.day,s=i.selectsStart,o=i.selectsEnd,l=i.selectsRange,c=i.selectsDisabledDaysInRange,f=i.startDate,h=i.swapRange,p=i.endDate,g=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;if(!(s||o||l)||!g||!c&&t.isDisabled())return!1;if(s&&p&&(Ra(g,p)||Fl(g,p)))return Cl(a,g,p);if(o&&f&&(Vo(g,f)||Fl(g,f)))return Cl(a,f,g);if(l&&f&&!p){if(Fl(g,f)||Vo(g,f))return Cl(a,f,g);if(h&&Ra(g,f))return Cl(a,g,f)}return!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.startDate,o=i.selectsStart,l=i.swapRange,c=i.selectsRange,f=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return o?Ot(a,f):c&&l&&s&&f?Ot(a,Ra(f,s)?f:s):Ot(a,s)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.endDate,o=i.selectsEnd,l=i.selectsRange,c=i.swapRange,f=i.startDate,h=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return o?Ot(a,h):l&&c&&f&&h?Ot(a,Ra(h,f)?f:h):l?Ot(a,h):Ot(a,s)},t.isRangeStart=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Ot(a,i)},t.isRangeEnd=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Ot(s,i)},t.isWeekend=function(){var n=$ce(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Xn(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Xn(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Pt())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(i){return t.isSameDayOrWeek(i)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var i=t.props.dayClassName?t.props.dayClassName(n):void 0;return mt("react-datepicker__day",i,"react-datepicker__day--"+Phe(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,i=n.day,a=n.ariaLabelPrefixWhenEnabled,s=a===void 0?"Choose":a,o=n.ariaLabelPrefixWhenDisabled,l=o===void 0?"Not available":o,c=t.isDisabled()||t.isExcluded()?l:s;return"".concat(c," ").concat(nr(i,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,i=n.day,a=n.holidays,s=a===void 0?new Map:a,o=n.excludeDates,l=nr(i,"MM.dd.yyyy"),c=[];return s.has(l)&&c.push.apply(c,s.get(l).holidayNames),t.isExcluded()&&c.push(o?.filter(function(f){return f instanceof Date?Ot(f,i):Ot(f?.date,i)}).map(function(f){if(!(f instanceof Date))return f?.message})),c.join(", ")},t.getTabIndex=function(){var n=t.props.selected,i=t.props.preSelection,a=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&Ot(i,n))?0:-1;return a},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(d2(t.props.day),t.props.day):d2(t.props.day)},t.render=function(){return Ue.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&Ue.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,n,i;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(R.Component),Qhe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.weekNumberEl=R.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var i,a,s=n.key;s===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ot(t.props.date,t.props.selected)&&Ot(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Ot(t.props.date,t.props.selected)&&Ot(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var i=!1;t.getTabIndex()===0&&!n?.isInputFocused&&Ot(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(i=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,n=t.weekNumber,i=t.isWeekDisabled,a=t.ariaLabelPrefix,s=a===void 0?e.defaultProps.ariaLabelPrefix:a,o=t.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!i,"react-datepicker__week-number--selected":!!o&&Ot(this.props.date,this.props.selected)};return Ue.createElement("div",{ref:this.weekNumberEl,className:mt(l),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},e})(R.Component),Xhe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isDisabled=function(n){return Gi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,i){t.props.onDayClick&&t.props.onDayClick(n,i)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,i,a){for(var s,o,l,c=new Date(n),f=0;f<7;f++){var h=new Date(n);h.setDate(h.getDate()+f);var p=!t.isDisabled(h);if(p){c=h;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(c,i,a),t.props.showWeekPicker&&t.handleDayClick(c,a),((s=t.props.shouldCloseOnSelect)!==null&&s!==void 0?s:e.defaultProps.shouldCloseOnSelect)&&((l=(o=t.props).setOpen)===null||l===void 0||l.call(o,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):Rhe(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),i=ua(n,6),a=new Date(n);a<=i;){if(!t.isDisabled(a))return!1;a=ua(a,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),i=[],a=t.formatWeekNumber(n);if(t.props.showWeekNumber){var s=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,a):void 0;i.push(Ue.createElement(Qhe,_t({key:"W"},e.defaultProps,t.props,{weekNumber:a,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map(function(o){var l=ua(n,o);return Ue.createElement(Vhe,_t({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:t.handleDayClick.bind(t,l),onMouseEnter:t.handleDayMouseEnter.bind(t,l)}))}))},t.startOfWeek=function(){return Ko(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ot(t.startOfWeek(),t.props.selected)&&Ot(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Ot(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Ue.createElement("div",{className:mt(t,n),role:"row"},this.renderDays())},e})(R.Component),id,Zhe=6,gc={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},zS=(id={},id[gc.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},id[gc.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},id[gc.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},id),cm=1;function B2(r,e){return r?gc.FOUR_COLUMNS:e?gc.TWO_COLUMNS:gc.THREE_COLUMNS}var Jhe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.MONTH_REFS=Pa([],Array(12),!0).map(function(){return R.createRef()}),t.QUARTER_REFS=Pa([],Array(4),!0).map(function(){return R.createRef()}),t.isDisabled=function(n){return Gi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(n){return sD(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,i){var a,s;(s=(a=t.props).onDayClick)===null||s===void 0||s.call(a,n,i,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var i,a;(a=(i=t.props).onDayMouseEnter)===null||a===void 0||a.call(i,n)},t.handleMouseLeave=function(){var n,i;(i=(n=t.props).onMouseLeave)===null||i===void 0||i.call(n)},t.isRangeStartMonth=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:On(gi(a,n),s)},t.isRangeStartQuarter=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:T0(oc(a,n),s)},t.isRangeEndMonth=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:On(gi(a,n),o)},t.isRangeEndQuarter=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:T0(oc(a,n),o)},t.isInSelectingRangeMonth=function(n){var i,a=t.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,f=a.startDate,h=a.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(o||l||c)||!p?!1:o&&h?sm(p,h,n,s):l&&f||c&&f&&!h?sm(f,p,n,s):!1},t.isSelectingMonthRangeStart=function(n){var i;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,s=a.day,o=a.startDate,l=a.selectsStart,c=gi(s,n),f=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l?On(c,f):On(c,o)},t.isSelectingMonthRangeEnd=function(n){var i;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,s=a.day,o=a.endDate,l=a.selectsEnd,c=a.selectsRange,f=gi(s,n),h=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l||c?On(f,h):On(f,o)},t.isInSelectingRangeQuarter=function(n){var i,a=t.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,f=a.startDate,h=a.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(o||l||c)||!p?!1:o&&h?um(p,h,n,s):l&&f||c&&f&&!h?um(f,p,n,s):!1},t.isWeekInMonth=function(n){var i=t.props.day,a=ua(n,6);return On(n,i)||On(a,i)},t.isCurrentMonth=function(n,i){return Tt(n)===Tt(Pt())&&i===Xn(Pt())},t.isCurrentQuarter=function(n,i){return Tt(n)===Tt(Pt())&&i===Uo(Pt())},t.isSelectedMonth=function(n,i,a){return Xn(a)===i&&Tt(n)===Tt(a)},t.isSelectMonthInList=function(n,i,a){return a.some(function(s){return t.isSelectedMonth(n,i,s)})},t.isSelectedQuarter=function(n,i,a){return Uo(a)===i&&Tt(n)===Tt(a)},t.isSelectQuarterInList=function(n,i,a){return a.some(function(s){return t.isSelectedQuarter(n,i,s)})},t.isMonthSelected=function(){var n=t.props,i=n.day,a=n.selected,s=n.selectedDates,o=n.selectsMultiple,l=Xn(i);return o?s?.some(function(c){return t.isSelectedMonth(i,l,c)}):!!a&&t.isSelectedMonth(i,l,a)},t.isQuarterSelected=function(){var n=t.props,i=n.day,a=n.selected,s=n.selectedDates,o=n.selectsMultiple,l=Uo(i);return o?s?.some(function(c){return t.isSelectedQuarter(i,l,c)}):!!a&&t.isSelectedQuarter(i,l,a)},t.renderWeeks=function(){if(!Si(t.props.day))return[];for(var n=[],i=t.props.fixedHeight,a=0,s=!1,o=Ko(ks(t.props.day),t.props.locale,t.props.calendarStartDay),l=function(y){return t.props.showWeekPicker?Ko(y,t.props.locale,t.props.calendarStartDay):t.props.preSelection},c=function(y){return t.props.showWeekPicker?Ko(y,t.props.locale,t.props.calendarStartDay):t.props.selected},f=t.props.selected?c(t.props.selected):void 0,h=t.props.preSelection?l(t.props.preSelection):void 0;n.push(Ue.createElement(Xhe,_t({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:a,day:o,month:Xn(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:f,preSelection:h,showWeekNumber:t.props.showWeekNumbers}))),!s;){a++,o=p0(o,1);var p=i&&a>=Zhe,g=!i&&!t.isWeekInMonth(o);if(p||g)if(t.props.peekNextMonth)s=!0;else break}return n},t.onMonthClick=function(n,i){var a=t.isMonthDisabledForLabelDate(i),s=a.isDisabled,o=a.labelDate;s||t.handleDayClick(ks(o),n)},t.onMonthMouseEnter=function(n){var i=t.isMonthDisabledForLabelDate(n),a=i.isDisabled,s=i.labelDate;a||t.handleDayMouseEnter(ks(s))},t.handleMonthNavigation=function(n,i){var a,s,o,l;(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=t.MONTH_REFS[n])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()},t.handleKeyboardNavigation=function(n,i,a){var s,o=t.props,l=o.selected,c=o.preSelection,f=o.setPreSelection,h=o.minDate,p=o.maxDate,g=o.showFourColumnMonthYearPicker,y=o.showTwoColumnMonthYearPicker;if(c){var b=B2(g,y),v=t.getVerticalOffset(b),E=(s=zS[b])===null||s===void 0?void 0:s.grid,S=function(D,P,k){var M,H,N=P,Q=k;switch(D){case Qe.ArrowRight:N=da(P,cm),Q=k===11?0:k+cm;break;case Qe.ArrowLeft:N=zl(P,cm),Q=k===0?11:k-cm;break;case Qe.ArrowUp:N=zl(P,v),Q=!((M=E?.[0])===null||M===void 0)&&M.includes(k)?k+12-v:k-v;break;case Qe.ArrowDown:N=da(P,v),Q=!((H=E?.[E.length-1])===null||H===void 0)&&H.includes(k)?k-12+v:k+v;break}return{newCalculatedDate:N,newCalculatedMonth:Q}},w=function(D,P,k){for(var M=40,H=D,N=!1,Q=0,z=S(H,P,k),V=z.newCalculatedDate,K=z.newCalculatedMonth;!N;){if(Q>=M){V=P,K=k;break}if(h&&V<h){H=Qe.ArrowRight;var Y=S(H,V,K);V=Y.newCalculatedDate,K=Y.newCalculatedMonth}if(p&&V>p){H=Qe.ArrowLeft;var Y=S(H,V,K);V=Y.newCalculatedDate,K=Y.newCalculatedMonth}if(Bhe(V,t.props)){var Y=S(H,V,K);V=Y.newCalculatedDate,K=Y.newCalculatedMonth}else N=!0;Q++}return{newCalculatedDate:V,newCalculatedMonth:K}};if(i===Qe.Enter){t.isMonthDisabled(a)||(t.onMonthClick(n,a),f?.(l));return}var A=w(i,c,a),_=A.newCalculatedDate,I=A.newCalculatedMonth;switch(i){case Qe.ArrowRight:case Qe.ArrowLeft:case Qe.ArrowUp:case Qe.ArrowDown:t.handleMonthNavigation(I,_);break}}},t.getVerticalOffset=function(n){var i,a;return(a=(i=zS[n])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&a!==void 0?a:0},t.onMonthKeyDown=function(n,i){var a=t.props,s=a.disabledKeyboardNavigation,o=a.handleOnMonthKeyDown,l=n.key;l!==Qe.Tab&&n.preventDefault(),s||t.handleKeyboardNavigation(n,l,i),o&&o(n)},t.onQuarterClick=function(n,i){var a=oc(t.props.day,i);om(a,t.props)||t.handleDayClick(T2(a),n)},t.onQuarterMouseEnter=function(n){var i=oc(t.props.day,n);om(i,t.props)||t.handleDayMouseEnter(T2(i))},t.handleQuarterNavigation=function(n,i){var a,s,o,l;t.isDisabled(i)||t.isExcluded(i)||((s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=t.QUARTER_REFS[n-1])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus())},t.onQuarterKeyDown=function(n,i){var a,s,o=n.key;if(!t.props.disabledKeyboardNavigation)switch(o){case Qe.Enter:t.onQuarterClick(n,i),(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,t.props.selected);break;case Qe.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===4?1:i+1,WA(t.props.preSelection,1));break;case Qe.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===1?4:i-1,u5(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var i,a=t.props,s=a.day,o=a.disabled,l=a.minDate,c=a.maxDate,f=a.excludeDates,h=a.includeDates,p=gi(s,n);return o?{isDisabled:!0,labelDate:gi(s,n)}:{isDisabled:(i=(l||c||f||h)&&_5(p,t.props))!==null&&i!==void 0?i:!1,labelDate:p}},t.isMonthDisabled=function(n){var i=t.isMonthDisabledForLabelDate(n).isDisabled;return i},t.getMonthClassNames=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate,l=i.preSelection,c=i.monthClassName,f=c?c(gi(a,n)):void 0,h=t.getSelection();return mt("react-datepicker__month-text","react-datepicker__month-".concat(n),f,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":h?t.isSelectMonthInList(a,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&l&&t.isSelectedMonth(a,n,l)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":s&&o?sm(s,o,n,a):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(a,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var i=Xn(t.props.preSelection),a=t.isMonthDisabledForLabelDate(i).isDisabled,s=n===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var i=Uo(t.props.preSelection),a=om(t.props.day,t.props),s=n===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getAriaLabel=function(n){var i=t.props,a=i.chooseDayAriaLabelPrefix,s=a===void 0?"Choose":a,o=i.disabledDayAriaLabelPrefix,l=o===void 0?"Not available":o,c=i.day,f=i.locale,h=gi(c,n),p=t.isDisabled(h)||t.isExcluded(h)?l:s;return"".concat(p," ").concat(nr(h,"MMMM yyyy",f))},t.getQuarterClassNames=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate,l=i.minDate,c=i.maxDate,f=i.excludeDates,h=i.includeDates,p=i.filterDate,g=i.preSelection,y=i.disabledKeyboardNavigation,b=i.disabled,v=(l||c||f||h||p||b)&&om(oc(a,n),t.props),E=t.getSelection();return mt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":v,"react-datepicker__quarter-text--selected":E?t.isSelectQuarterInList(a,n,E):void 0,"react-datepicker__quarter-text--keyboard-selected":!y&&g&&t.isSelectedQuarter(a,n,g)&&!t.isQuarterSelected()&&!v,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":s&&o?um(s,o,n,a):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(a,n)})},t.getMonthContent=function(n){var i=t.props,a=i.showFullMonthYearPicker,s=i.renderMonthContent,o=i.locale,l=i.day,c=w5(n,o),f=aD(n,o);return s?s(n,c,f,l):a?f:c},t.getQuarterContent=function(n){var i,a=t.props,s=a.renderQuarterContent,o=a.locale,l=Fhe(n,o);return(i=s?.(n,l))!==null&&i!==void 0?i:l},t.renderMonths=function(){var n,i=t.props,a=i.showTwoColumnMonthYearPicker,s=i.showFourColumnMonthYearPicker,o=i.day,l=i.selected,c=(n=zS[B2(s,a)])===null||n===void 0?void 0:n.grid;return c?.map(function(f,h){return Ue.createElement("div",{className:"react-datepicker__month-wrapper",key:h},f.map(function(p,g){return Ue.createElement("div",{ref:t.MONTH_REFS[p],key:g,onClick:function(y){t.onMonthClick(y,p)},onKeyDown:function(y){O5(y)&&(y.preventDefault(),y.key=Qe.Enter),t.onMonthKeyDown(y,p)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(p)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(p)}:void 0,tabIndex:Number(t.getTabIndex(p)),className:t.getMonthClassNames(p),"aria-disabled":t.isMonthDisabled(p),role:"option","aria-label":t.getAriaLabel(p),"aria-current":t.isCurrentMonth(o,p)?"date":void 0,"aria-selected":l?t.isSelectedMonth(o,p,l):void 0},t.getMonthContent(p))}))})},t.renderQuarters=function(){var n=t.props,i=n.day,a=n.selected,s=[1,2,3,4];return Ue.createElement("div",{className:"react-datepicker__quarter-wrapper"},s.map(function(o,l){return Ue.createElement("div",{key:l,ref:t.QUARTER_REFS[l],role:"option",onClick:function(c){t.onQuarterClick(c,o)},onKeyDown:function(c){t.onQuarterKeyDown(c,o)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(o)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(o)}:void 0,className:t.getQuarterClassNames(o),"aria-selected":a?t.isSelectedQuarter(i,o,a):void 0,tabIndex:Number(t.getQuarterTabIndex(o)),"aria-current":t.isCurrentQuarter(i,o)?"date":void 0},t.getQuarterContent(o))}))},t.getClassNames=function(){var n=t.props,i=n.selectingDate,a=n.selectsStart,s=n.selectsEnd,o=n.showMonthYearPicker,l=n.showQuarterYearPicker,c=n.showWeekPicker;return mt("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(a||s)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},t}return e.prototype.getSelection=function(){var t=this.props,n=t.selected,i=t.selectedDates,a=t.selectsMultiple;if(a)return i;if(n)return[n]},e.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,i=t.showQuarterYearPicker,a=t.day,s=t.ariaLabelPrefix,o=s===void 0?"Month ":s,l=o?o.trim()+" ":"",c=Si(a)?"".concat(l).concat(nr(a,"MMMM, yyyy",this.props.locale)):"",f=n||i;return f?Ue.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":c,role:"listbox"},n?this.renderMonths():this.renderQuarters()):Ue.createElement("div",{role:"table"},this.props.dayNamesHeader&&Ue.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),Ue.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":c,role:"rowgroup"},this.renderWeeks()))},e})(R.Component),epe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(n){return t.props.month===n},t.handleOptionKeyDown=function(n,i){var a;switch(i.key){case"Enter":i.preventDefault(),t.onChange(n);break;case"Escape":i.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":{i.preventDefault();var s=(n+(i.key==="ArrowUp"?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;(a=t.monthOptionButtonsRef[s])===null||a===void 0||a.focus();break}}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(n,i){return Ue.createElement("div",{ref:function(a){t.monthOptionButtonsRef[i]=a,t.isSelectedMonth(i)&&a?.focus()},role:"button",tabIndex:0,className:t.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,i),onKeyDown:t.handleOptionKeyDown.bind(t,i),"aria-selected":t.isSelectedMonth(i)?"true":void 0},t.isSelectedMonth(i)?Ue.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return Ue.createElement(Fy,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(R.Component),tpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(i,a){return Ue.createElement("option",{key:i,value:a},i)})},t.renderSelectMode=function(n){return Ue.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(i){return t.onChange(parseInt(i.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,i){return Ue.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[t.props.month]))},t.renderDropdown=function(n){return Ue.createElement(epe,_t({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var i=t.state.dropdownVisible,a=[t.renderReadView(!i,n)];return i&&a.unshift(t.renderDropdown(n)),a},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return w5(a,t.props.locale)}:function(a){return aD(a,t.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(n);break;case"select":i=this.renderSelectMode(n);break}return Ue.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},e})(R.Component);function rpe(r,e){for(var t=[],n=ks(r),i=ks(e);!Vo(n,i);)t.push(Pt(n)),n=da(n,1);return t}var npe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(i){var a=wT(i),s=_a(n.props.date,i)&&On(n.props.date,i);return Ue.createElement("div",{className:s?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:n.onChange.bind(n,a),"aria-selected":s?"true":void 0},s?Ue.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",nr(i,n.props.dateFormat,n.props.locale))})},n.onChange=function(i){return n.props.onChange(i)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:rpe(n.props.minDate,n.props.maxDate)},n}return e.prototype.render=function(){var t=mt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Ue.createElement(Fy,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(R.Component),ipe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=ks(t.props.minDate),i=ks(t.props.maxDate),a=[];!Vo(n,i);){var s=wT(n);a.push(Ue.createElement("option",{key:s,value:s},nr(n,t.props.dateFormat,t.props.locale))),n=da(n,1)}return a},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return Ue.createElement("select",{value:wT(ks(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var i=nr(t.props.date,t.props.dateFormat,t.props.locale);return Ue.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},t.renderDropdown=function(){return Ue.createElement(npe,_t({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,i=[t.renderReadView(!n)];return n&&i.unshift(t.renderDropdown()),i},t.onChange=function(n){t.toggleDropdown();var i=Pt(n);_a(t.props.date,i)&&On(t.props.date,i)||t.props.onChange(i)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return Ue.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(R.Component),ape=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,i,a;t.list&&(t.list.scrollTop=(a=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((i=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&i!==void 0?i:0):t.list.clientHeight,t.centerLi))!==null&&a!==void 0?a:0)})},t.handleClick=function(n){var i,a;(t.props.minTime||t.props.maxTime)&&C2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&I2(n,t.props)||(a=(i=t.props).onChange)===null||a===void 0||a.call(i,n)},t.isSelectedTime=function(n){return t.props.selected&&D5(t.props.selected,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&C2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&I2(n,t.props)},t.liClasses=function(n){var i,a=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&a.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&a.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(sa(n)*3600+oa(n)*60+Go(n))%(((i=t.props.intervals)!==null&&i!==void 0?i:e.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},t.handleOnKeyDown=function(n,i){var a,s;n.key===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(n.key===Qe.ArrowUp||n.key===Qe.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Qe.ArrowDown||n.key===Qe.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Qe.Enter&&t.handleClick(i),(s=(a=t.props).handleOnKeyDown)===null||s===void 0||s.call(a,n)},t.renderTimes=function(){for(var n,i=[],a=typeof t.props.format=="string"?t.props.format:"p",s=(n=t.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals,o=t.props.selected||t.props.openToDate||Pt(),l=dd(o),c=t.props.injectTimes&&t.props.injectTimes.sort(function(v,E){return v.getTime()-E.getTime()}),f=60*qhe(o),h=f/s,p=0;p<h;p++){var g=Bd(l,p*s);if(i.push(g),c){var y=Yhe(l,g,p,s,c);i=i.concat(y)}}var b=i.reduce(function(v,E){return E.getTime()<=o.getTime()?E:v},i[0]);return i.map(function(v){return Ue.createElement("li",{key:v.valueOf(),onClick:t.handleClick.bind(t,v),className:t.liClasses(v),ref:function(E){v===b&&(t.centerLi=E)},onKeyDown:function(E){t.handleOnKeyDown(E,v)},tabIndex:v===b?0:-1,role:"option","aria-selected":t.isSelectedTime(v)?"true":void 0,"aria-disabled":t.isDisabledTime(v)?"true":void 0},nr(v,a,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?Ue.createElement(Ue.Fragment,null):Ue.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},Ue.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var t=this,n,i=this.state.height;return Ue.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Ue.createElement("div",{className:"react-datepicker__time"},Ue.createElement("div",{className:"react-datepicker__time-box"},Ue.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){t.list=a},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},e})(R.Component),U2=3,spe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.YEAR_REFS=Pa([],Array(n.props.yearItemNumber),!0).map(function(){return R.createRef()}),n.isDisabled=function(i){return Gi(i,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(i){return sD(i,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var i;return(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection},n.updateFocusOnPaginate=function(i){var a=function(){var s,o;(o=(s=n.YEAR_REFS[i])===null||s===void 0?void 0:s.current)===null||o===void 0||o.focus()};window.requestAnimationFrame(a)},n.handleYearClick=function(i,a){n.props.onDayClick&&n.props.onDayClick(i,a)},n.handleYearNavigation=function(i,a){var s,o,l,c,f=n.props,h=f.date,p=f.yearItemNumber;if(!(h===void 0||p===void 0)){var g=Os(h,p).startPeriod;n.isDisabled(a)||n.isExcluded(a)||((o=(s=n.props).setPreSelection)===null||o===void 0||o.call(s,a),i-g<0?n.updateFocusOnPaginate(p-(g-i)):i-g>=p?n.updateFocusOnPaginate(Math.abs(p-(i-g))):(c=(l=n.YEAR_REFS[i-g])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},n.isSameDay=function(i,a){return Ot(i,a)},n.isCurrentYear=function(i){return i===Tt(Pt())},n.isRangeStart=function(i){return n.props.startDate&&n.props.endDate&&_a(Ea(Pt(),i),n.props.startDate)},n.isRangeEnd=function(i){return n.props.startDate&&n.props.endDate&&_a(Ea(Pt(),i),n.props.endDate)},n.isInRange=function(i){return lm(i,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(i){var a=n.props,s=a.selectsStart,o=a.selectsEnd,l=a.selectsRange,c=a.startDate,f=a.endDate;return!(s||o||l)||!n.selectingDate()?!1:s&&f?lm(i,n.selectingDate(),f):o&&c||l&&c&&!f?lm(i,c,n.selectingDate()):!1},n.isSelectingRangeStart=function(i){var a;if(!n.isInSelectingRange(i))return!1;var s=n.props,o=s.startDate,l=s.selectsStart,c=Ea(Pt(),i);return l?_a(c,(a=n.selectingDate())!==null&&a!==void 0?a:null):_a(c,o??null)},n.isSelectingRangeEnd=function(i){var a;if(!n.isInSelectingRange(i))return!1;var s=n.props,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,f=Ea(Pt(),i);return l||c?_a(f,(a=n.selectingDate())!==null&&a!==void 0?a:null):_a(f,o??null)},n.isKeyboardSelected=function(i){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var a=n.props,s=a.minDate,o=a.maxDate,l=a.excludeDates,c=a.includeDates,f=a.filterDate,h=a.selected,p=hd(Ea(n.props.date,i)),g=(s||o||l||c||f)&&ug(i,n.props),y=!!h&&Ot(p,hd(h)),b=Ot(p,hd(n.props.preSelection));return!n.props.inline&&!y&&b&&!g}},n.isSelectedYear=function(i){var a=n.props,s=a.selectsMultiple,o=a.selected,l=a.selectedDates;return s?l?.some(function(c){return i===Tt(c)}):!!o&&i===Tt(o)},n.onYearClick=function(i,a){var s=n.props.date;s!==void 0&&n.handleYearClick(hd(Ea(s,a)),i)},n.onYearKeyDown=function(i,a){var s,o,l=i.key,c=n.props,f=c.date,h=c.yearItemNumber,p=c.handleOnKeyDown;if(l!==Qe.Tab&&i.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case Qe.Enter:if(n.props.selected==null)break;n.onYearClick(i,a),(o=(s=n.props).setPreSelection)===null||o===void 0||o.call(s,n.props.selected);break;case Qe.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(a+1,Ps(n.props.preSelection,1));break;case Qe.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(a-1,Rc(n.props.preSelection,1));break;case Qe.ArrowUp:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var g=Os(f,h).startPeriod,y=U2,b=a-y;if(b<g){var v=h%y;a>=g&&a<g+v?y=v:y+=v,b=a-y}n.handleYearNavigation(b,Rc(n.props.preSelection,y));break}case Qe.ArrowDown:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var E=Os(f,h).endPeriod,y=U2,b=a+y;if(b>E){var v=h%y;a<=E&&a>E-v?y=v:y+=v,b=a+y}n.handleYearNavigation(b,Ps(n.props.preSelection,y));break}}p&&p(i)},n.getYearClassNames=function(i){var a=n.props,s=a.date,o=a.disabled,l=a.minDate,c=a.maxDate,f=a.excludeDates,h=a.includeDates,p=a.filterDate,g=a.yearClassName;return mt("react-datepicker__year-text","react-datepicker__year-".concat(i),s?g?.(Ea(s,i)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(i),"react-datepicker__year-text--disabled":(l||c||f||h||p||o)&&ug(i,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(i),"react-datepicker__year-text--range-start":n.isRangeStart(i),"react-datepicker__year-text--range-end":n.isRangeEnd(i),"react-datepicker__year-text--in-range":n.isInRange(i),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(i),"react-datepicker__year-text--today":n.isCurrentYear(i)})},n.getYearTabIndex=function(i){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var a=Tt(n.props.preSelection),s=ug(i,n.props);return i===a&&!s?"0":"-1"},n.getYearContent=function(i){return n.props.renderYearContent?n.props.renderYearContent(i):i},n}return e.prototype.render=function(){var t=this,n=[],i=this.props,a=i.date,s=i.yearItemNumber,o=i.onYearMouseEnter,l=i.onYearMouseLeave;if(a===void 0)return null;for(var c=Os(a,s),f=c.startPeriod,h=c.endPeriod,p=function(b){n.push(Ue.createElement("div",{ref:g.YEAR_REFS[b-f],onClick:function(v){t.onYearClick(v,b)},onKeyDown:function(v){O5(v)&&(v.preventDefault(),v.key=Qe.Enter),t.onYearKeyDown(v,b)},tabIndex:Number(g.getYearTabIndex(b)),className:g.getYearClassNames(b),onMouseEnter:g.props.usePointerEvent?void 0:function(v){return o(v,b)},onPointerEnter:g.props.usePointerEvent?function(v){return o(v,b)}:void 0,onMouseLeave:g.props.usePointerEvent?void 0:function(v){return l(v,b)},onPointerLeave:g.props.usePointerEvent?function(v){return l(v,b)}:void 0,key:b,"aria-current":g.isCurrentYear(b)?"date":void 0},g.getYearContent(b)))},g=this,y=f;y<=h;y++)p(y);return Ue.createElement("div",{className:"react-datepicker__year"},Ue.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},e})(R.Component);function ope(r,e,t,n){for(var i=[],a=0;a<2*e+1;a++){var s=r+e-a,o=!0;t&&(o=Tt(t)<=s),n&&o&&(o=Tt(n)>=s),o&&i.push(s)}return i}var lpe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(o,l){var c;switch(l.key){case"Enter":l.preventDefault(),n.onChange(o);break;case"Escape":l.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{l.preventDefault();var f=o+(l.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[f]&&((c=n.yearOptionButtonsRef[f])===null||c===void 0||c.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var o=n.props.year,l=n.state.yearsList.map(function(h){return Ue.createElement("div",{ref:function(p){n.yearOptionButtonsRef[h]=p,h===o&&p?.focus()},role:"button",tabIndex:0,className:o===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),onKeyDown:n.handleOptionKeyDown.bind(n,h),"aria-selected":o===h?"true":void 0},o===h?Ue.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),c=n.props.minDate?Tt(n.props.minDate):null,f=n.props.maxDate?Tt(n.props.maxDate):null;return(!f||!n.state.yearsList.find(function(h){return h===f}))&&l.unshift(Ue.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},Ue.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!n.state.yearsList.find(function(h){return h===c}))&&l.push(Ue.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},Ue.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(o){n.props.onChange(o)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(o){var l=n.state.yearsList.map(function(c){return c+o});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var i=t.yearDropdownItemNumber,a=t.scrollableYearDropdown,s=i||(a?10:5);return n.state={yearsList:ope(n.props.year,s,n.props.minDate,n.props.maxDate)},n.dropdownRef=R.createRef(),n}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,i=n?n.find(function(a){return a.ariaSelected}):null;t.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=mt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Ue.createElement(Fy,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(R.Component),upe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Tt(t.props.minDate):1900,i=t.props.maxDate?Tt(t.props.maxDate):2100,a=[],s=n;s<=i;s++)a.push(Ue.createElement("option",{key:s,value:s},s));return a},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return Ue.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return Ue.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return Ue.createElement(lpe,_t({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,i=[t.renderReadView(!n)];return n&&i.unshift(t.renderDropdown()),i},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,i){var a;(a=t.onSelect)===null||a===void 0||a.call(t,n,i),t.setOpen()},t.onSelect=function(n,i){var a,s;(s=(a=t.props).onSelect)===null||s===void 0||s.call(a,n,i)},t.setOpen=function(){var n,i;(i=(n=t.props).setOpen)===null||i===void 0||i.call(n,!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return Ue.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(R.Component),cpe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],I5="react-datepicker-ignore-onclickoutside",fpe=function(r){var e=(r.className||"").split(/\s+/);return cpe.some(function(t){return e.indexOf(t)>=0})},dpe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(i){n.props.onClickOutside(i)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(i){var a,s;fpe(i.target)&&((s=(a=n.props).onDropdownFocus)===null||s===void 0||s.call(a,i))},n.getDateInView=function(){var i=n.props,a=i.preSelection,s=i.selected,o=i.openToDate,l=T5(n.props),c=A5(n.props),f=Pt(),h=o||s||a;return h||(l&&Ra(f,l)?l:c&&Vo(f,c)?c:f)},n.increaseMonth=function(){n.setState(function(i){var a=i.date;return{date:da(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(i){var a=i.date;return{date:zl(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(i,a,s){n.props.onSelect(i,a,s),n.props.setPreSelection&&n.props.setPreSelection(i)},n.handleDayMouseEnter=function(i){n.setState({selectingDate:i}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(i)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(i,a){n.setState({selectingDate:Ea(Pt(),a)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(i,a)},n.handleYearMouseLeave=function(i,a){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(i,a)},n.handleYearChange=function(i){var a,s,o,l;(s=(a=n.props).onYearChange)===null||s===void 0||s.call(a,i),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(i),(l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(i)},n.getEnabledPreSelectionDateForMonth=function(i){if(!Gi(i,n.props))return i;for(var a=ks(i),s=khe(i),o=zue(s,a),l=null,c=0;c<=o;c++){var f=ua(a,c);if(!Gi(f,n.props)){l=f;break}}return l},n.handleMonthChange=function(i){var a,s,o,l=(a=n.getEnabledPreSelectionDateForMonth(i))!==null&&a!==void 0?a:i;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(o=(s=n.props).setOpen)===null||o===void 0||o.call(s,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(i){var a,s;(s=(a=n.props).onMonthChange)===null||s===void 0||s.call(a,i),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(i){n.handleYearChange(i),n.handleMonthChange(i)},n.changeYear=function(i){n.setState(function(a){var s=a.date;return{date:Ea(s,Number(i))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(i){n.setState(function(a){var s=a.date;return{date:gi(s,Number(i))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(i){n.setState(function(a){var s=a.date;return{date:Ea(gi(s,Xn(i)),Tt(i))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(i){if(i===void 0&&(i=n.state.date),!Si(i))return[];var a=n.props.disabled,s=Ko(i,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(Ue.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(a?"react-datepicker__day-name--disabled":""),role:"columnheader"},Ue.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Ue.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),o.concat([0,1,2,3,4,5,6].map(function(l){var c=ua(s,l),f=n.formatWeekday(c,n.props.locale),h=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return Ue.createElement("div",{key:l,role:"columnheader",className:mt("react-datepicker__day-name",h,a?"react-datepicker__day-name--disabled":"")},Ue.createElement("span",{className:"react-datepicker__sr-only"},nr(c,"EEEE",n.props.locale)),Ue.createElement("span",{"aria-hidden":"true"},f))}))},n.formatWeekday=function(i,a){return n.props.formatWeekDay?Mhe(i,n.props.formatWeekDay,a):n.props.useWeekdaysShort?jhe(i,a):Nhe(i,a)},n.decreaseYear=function(){n.setState(function(i){var a,s=i.date;return{date:Rc(s,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var i,a,s;if(!n.props.renderCustomHeader){var o=(i=n.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=n.props.showPreviousMonths?o-1:0,c=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:l,f=zl(n.state.date,c),h;switch(!0){case n.props.disabled:h=!0;break;case n.props.showMonthYearPicker:h=L2(n.state.date,n.props);break;case n.props.showYearPicker:h=Hhe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=Uhe(n.state.date,n.props);break;default:h=R2(f,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var p=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],g=["react-datepicker__navigation","react-datepicker__navigation--previous"],y=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(y=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(g.push("react-datepicker__navigation--previous--disabled"),y=void 0);var b=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,v=n.props,E=v.previousMonthButtonLabel,S=E===void 0?e.defaultProps.previousMonthButtonLabel:E,w=v.previousYearButtonLabel,A=w===void 0?e.defaultProps.previousYearButtonLabel:w,_=n.props,I=_.previousMonthAriaLabel,D=I===void 0?typeof S=="string"?S:"Previous Month":I,P=_.previousYearAriaLabel,k=P===void 0?typeof A=="string"?A:"Previous Year":P;return Ue.createElement("button",{type:"button",className:g.join(" "),onClick:y,onKeyDown:n.props.handleOnKeyDown,"aria-label":b?k:D},Ue.createElement("span",{className:p.join(" ")},b?A:S))}}},n.increaseYear=function(){n.setState(function(i){var a,s=i.date;return{date:Ps(s,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var i;if(!n.props.renderCustomHeader){var a;switch(!0){case n.props.disabled:a=!0;break;case n.props.showMonthYearPicker:a=k2(n.state.date,n.props);break;case n.props.showYearPicker:a=Ghe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:a=$he(n.state.date,n.props);break;default:a=P2(n.state.date,n.props);break}if(!(!((i=n.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&a||n.props.showTimeSelectOnly)){var s=["react-datepicker__navigation","react-datepicker__navigation--next"],o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),a&&n.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,f=n.props,h=f.nextMonthButtonLabel,p=h===void 0?e.defaultProps.nextMonthButtonLabel:h,g=f.nextYearButtonLabel,y=g===void 0?e.defaultProps.nextYearButtonLabel:g,b=n.props,v=b.nextMonthAriaLabel,E=v===void 0?typeof p=="string"?p:"Next Month":v,S=b.nextYearAriaLabel,w=S===void 0?typeof y=="string"?y:"Next Year":S;return Ue.createElement("button",{type:"button",className:s.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":c?w:E},Ue.createElement("span",{className:o.join(" ")},c?y:p))}}},n.renderCurrentMonth=function(i){i===void 0&&(i=n.state.date);var a=["react-datepicker__current-month"];return n.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),Ue.createElement("h2",{className:a.join(" ")},Si(i)?nr(i,n.props.dateFormat,n.props.locale):"")},n.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showYearDropdown||i))return Ue.createElement(upe,_t({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Tt(n.state.date)}))},n.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showMonthDropdown||i))return Ue.createElement(tpe,_t({},e.defaultProps,n.props,{month:Xn(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showMonthYearDropdown||i))return Ue.createElement(ipe,_t({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(i){n.props.onSelect(A2(),i),n.props.setPreSelection&&n.props.setPreSelection(A2())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return Ue.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(i){return Ue.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(i))},n.renderDefaultHeader=function(i){var a=i.monthDate,s=i.i;return Ue.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(a),Ue.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(s!==0),n.renderMonthYearDropdown(s!==0),n.renderYearDropdown(s!==0)))},n.renderCustomHeader=function(i){var a,s,o=i.monthDate,l=i.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var c=n.props,f=c.showYearPicker,h=c.yearItemNumber,p;if(f){var g=Os(o,h),y=g.startPeriod,b=g.endPeriod;p={startYear:y,endYear:b}}var v=R2(n.state.date,n.props),E=P2(n.state.date,n.props),S=L2(n.state.date,n.props),w=k2(n.state.date,n.props);return Ue.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(s=(a=n.props).renderCustomHeader)===null||s===void 0?void 0:s.call(a,_t(_t(_t({},n.state),f&&{visibleYearsRange:p}),{customHeaderCount:l,monthDate:o,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:v,nextMonthButtonDisabled:E,prevYearButtonDisabled:S,nextYearButtonDisabled:w})))},n.renderYearHeader=function(i){var a=i.monthDate,s=n.props,o=s.showYearPicker,l=s.yearItemNumber,c=l===void 0?e.defaultProps.yearItemNumber:l,f=Os(a,c),h=f.startPeriod,p=f.endPeriod;return Ue.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(h," - ").concat(p):Tt(a))},n.renderHeader=function(i){var a=i.monthDate,s=i.i,o=s===void 0?0:s,l={monthDate:a,i:o};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var i,a;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var s=[],o=(i=n.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=n.props.showPreviousMonths?o-1:0,c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ps(n.state.date,l):zl(n.state.date,l),f=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:l,h=0;h<o;++h){var p=h-f+l,g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ps(c,p):da(c,p),y="month-".concat(h),b=h<o-1,v=h>0;s.push(Ue.createElement("div",{key:y,ref:function(E){n.monthContainer=E??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:g,i:h}),Ue.createElement(Jhe,_t({},e.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:g,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:v,dayNamesHeader:n.renderDayNamesHeader(g)}))))}return s}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return Ue.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),Ue.createElement(spe,_t({},e.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return Ue.createElement(ape,_t({},e.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var i=n.props.selected?new Date(n.props.selected):void 0,a=i&&Si(i)&&!!n.props.selected,s=a?"".concat(N2(i.getHours()),":").concat(N2(i.getMinutes())):"";if(n.props.showTimeInput)return Ue.createElement(Whe,_t({},e.defaultProps,n.props,{date:i,timeString:s,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var i;if(!Si(n.state.date))return Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var a=Os(n.state.date,(i=n.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber),s=a.startPeriod,o=a.endPeriod,l;return n.props.showYearPicker?l="".concat(s," - ").concat(o):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=Tt(n.state.date):l="".concat(aD(Xn(n.state.date),n.props.locale)," ").concat(Tt(n.state.date)),Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return Ue.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=R.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:I5,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:_h}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){t.setState({monthContainer:t.monthContainer})})())},e.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&Si(this.props.preSelection)&&(!Ot(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var i=!On(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Ot(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||Dhe;return Ue.createElement(Fy,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Ue.createElement("div",{style:{display:"contents"},ref:this.containerRef},Ue.createElement(t,{className:mt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(R.Component),hpe=function(r){var e=r.icon,t=r.className,n=t===void 0?"":t,i=r.onClick,a="react-datepicker__calendar-icon";if(typeof e=="string")return Ue.createElement("i",{className:"".concat(a," ").concat(e," ").concat(n),"aria-hidden":"true",onClick:i});if(Ue.isValidElement(e)){var s=e;return Ue.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(a," ").concat(n),onClick:function(o){typeof s.props.onClick=="function"&&s.props.onClick(o),typeof i=="function"&&i(o)}})}return Ue.createElement("svg",{className:"".concat(a," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},Ue.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},C5=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return Zz.createPortal(this.props.children,this.el)},e})(R.Component),ppe="[tabindex], a, button, input, select, textarea",mpe=function(r){return(r instanceof HTMLAnchorElement||!r.disabled)&&r.tabIndex!==-1},R5=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.getTabChildren=function(){var i;return Array.prototype.slice.call((i=n.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(ppe),1,-1).filter(mpe)},n.handleFocusStart=function(){var i=n.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},n.handleFocusEnd=function(){var i=n.getTabChildren();i&&i.length>1&&i[0].focus()},n.tabLoopRef=R.createRef(),n}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?Ue.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Ue.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Ue.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(R.Component);function gpe(r){function e(t){var n,i=typeof t.hidePopper=="boolean"?t.hidePopper:!0,a=R.useRef(null),s=Ahe(_t({open:!i,whileElementsMounted:ihe,placement:t.popperPlacement,middleware:Pa([hhe({padding:15}),dhe(10),phe({element:a})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),o=_t(_t({},t),{hidePopper:i,popperProps:_t(_t({},s),{arrowRef:a})});return Ue.createElement(r,_t({},o))}return e.displayName="withFloating(".concat(r.displayName||r.name||"Component",")"),e}var ype=function(r){var e=r.className,t=r.wrapperClassName,n=r.hidePopper,i=n===void 0?!0:n,a=r.popperComponent,s=r.targetComponent,o=r.enableTabLoop,l=r.popperOnKeyDown,c=r.portalId,f=r.portalHost,h=r.popperProps,p=r.showArrow,g=void 0;if(!i){var y=mt("react-datepicker-popper",e);g=Ue.createElement(R5,{enableTabLoop:o},Ue.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:y,"data-placement":h.placement,onKeyDown:l},a,p&&Ue.createElement(bhe,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}r.popperContainer&&(g=R.createElement(r.popperContainer,{},g)),c&&!i&&(g=Ue.createElement(C5,{portalId:c,portalHost:f},g));var b=mt("react-datepicker-wrapper",t);return Ue.createElement(Ue.Fragment,null,Ue.createElement("div",{ref:h.refs.setReference,className:b},s),g)},vpe=gpe(ype);function bpe(r,e){return r&&e?Xn(r)!==Xn(e)||Tt(r)!==Tt(e):r!==e}var YS="Date input not valid.",$2=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Pt()},n.modifyHolidays=function(){var i;return(i=n.props.holidays)===null||i===void 0?void 0:i.reduce(function(a,s){var o=new Date(s.date);return Si(o)?Pa(Pa([],a,!0),[_t(_t({},s),{date:o})],!1):a},[])},n.calcInitialState=function(){var i,a=n.getPreSelection(),s=T5(n.props),o=A5(n.props),l=s&&Ra(a,dd(s))?s:o&&Vo(a,D2(o))?o:a;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&i!==void 0?i:l,highlightDates:M2(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var i,a=n.props,s=a.locale,o=a.startDate,l=a.endDate,c=a.rangeSeparator,f=a.selected,h=a.selectedDates,p=a.selectsMultiple,g=a.selectsRange,y=a.value,b=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,v=n.state.inputValue;return typeof y=="string"?y:typeof v=="string"?v:g?Ihe(o,l,{dateFormat:b,locale:s,rangeSeparator:c}):p?Che(h??[],{dateFormat:b,locale:s}):pi(f,{dateFormat:b,locale:s})},n.resetHiddenStatus=function(){n.setState(_t(_t({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(_t(_t({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var i,a;(a=(i=n.input)===null||i===void 0?void 0:i.focus)===null||a===void 0||a.call(i,{preventScroll:!0})},n.setBlur=function(){var i,a;(a=(i=n.input)===null||i===void 0?void 0:i.blur)===null||a===void 0||a.call(i),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(i,a){a===void 0&&(a=!1),n.setState({open:i,preSelection:i&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:qS},function(){i||n.setState(function(s){return{focused:a?s.focused:!1}},function(){!a&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Ls(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(i){var a,s,o=n.state.wasHidden,l=o?n.state.open:!0;o&&n.resetHiddenStatus(),n.state.preventFocus||((s=(a=n.props).onFocus)===null||s===void 0||s.call(a,i),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(_t(_t({},n.state),{inputValue:null}))},n.handleBlur=function(i){var a,s;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((s=(a=n.props).onBlur)===null||s===void 0||s.call(a,i)),n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(i){var a,s;n.props.inline||n.setOpen(!1),(s=(a=n.props).onClickOutside)===null||s===void 0||s.call(a,i),n.props.withPortal&&i.preventDefault()},n.handleChange=function(){for(var i,a,s,o,l,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=c[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,c),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:xpe});var p=n.props,g=p.selectsRange,y=p.startDate,b=p.endDate,v=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,E=(a=n.props.strictParsing)!==null&&a!==void 0?a:e.defaultProps.strictParsing,S=h?.target instanceof HTMLInputElement?h.target.value:"";if(g){var w=n.props.rangeSeparator,A=w.trim(),_=S.split(v.includes(A)?w:A,2).map(function(Q){return Q.trim()}),I=_[0],D=_[1],P=Xu(I??"",v,n.props.locale,E),k=P?Xu(D??"",v,n.props.locale,E):null,M=y?.getTime()!==P?.getTime(),H=b?.getTime()!==k?.getTime();if(!M&&!H||P&&Gi(P,n.props)||k&&Gi(k,n.props))return;(o=(s=n.props).onChange)===null||o===void 0||o.call(s,[P,k],h)}else{var N=Xu(S,v,n.props.locale,E,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(N||!S)&&n.setSelected(N,h,!0)}}},n.handleSelect=function(i,a,s){var o;if(!n.props.readOnly){var l=n.props,c=l.selectsRange,f=l.startDate,h=l.endDate,p=l.locale,g=l.swapRange,y=(o=n.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,b=!c||f&&!h&&(g||!KS(i,f));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&b&&n.sendFocusBackToInput(),n.props.onChangeRaw){var v=pi(i,{dateFormat:y,locale:p});n.props.onChangeRaw(a,{date:i,formattedDate:v})}n.setSelected(i,a,!1,s),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(i):b&&n.setOpen(!1)}},n.setSelected=function(i,a,s,o){var l,c,f=i;if(n.props.showYearPicker){if(f!==null&&ug(Tt(f),n.props))return}else if(n.props.showMonthYearPicker){if(f!==null&&_5(f,n.props))return}else if(f!==null&&Gi(f,n.props))return;var h=n.props,p=h.onChange,g=h.selectsRange,y=h.startDate,b=h.endDate,v=h.selectsMultiple,E=h.selectedDates,S=h.minTime,w=h.swapRange;if(!Fl(n.props.selected,f)||n.props.allowSameDay||g||v)if(f!==null&&(n.props.selected&&(!s||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(f=am(f,{hour:sa(n.props.selected),minute:oa(n.props.selected),second:Go(n.props.selected)})),!s&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&S&&(f=am(f,{hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds()})),n.props.inline||n.setState({preSelection:f}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:o})),g){var A=!y&&!b,_=y&&!b,I=!y&&!!b,D=y&&b;A?p?.([f,null],a):_?f===null?p?.([null,null],a):KS(f,y)?p?.(w?[f,y]:[f,null],a):p?.([y,f],a):I&&(f&&KS(f,b)?p?.([f,b],a):p?.([f,null],a)),D&&p?.([f,null],a)}else if(v){if(f!==null)if(!E?.length)p?.([f],a);else{var P=E.some(function(M){return Ot(M,f)});if(P){var k=E.filter(function(M){return!Ot(M,f)});p?.(k,a)}else p?.(Pa(Pa([],E,!0),[f],!1),a)}}else p?.(f,a);s||((c=(l=n.props).onSelect)===null||c===void 0||c.call(l,f,a),n.setState({inputValue:null}))},n.setPreSelection=function(i){if(!n.props.readOnly){var a=Ls(n.props.minDate),s=Ls(n.props.maxDate),o=!0;if(i){var l=dd(i);if(a&&s)o=Cl(i,n.props.minDate,n.props.maxDate);else if(a){var c=dd(n.props.minDate);o=Vo(i,c)||Fl(l,c)}else if(s){var f=D2(n.props.maxDate);o=Ra(i,f)||Fl(l,f)}}o&&n.setState({preSelection:i})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(i){var a,s;if(!(n.props.selectsRange||n.props.selectsMultiple)){var o=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?i:am(o,{hour:sa(i),minute:oa(i)});n.setState({preSelection:l}),(s=(a=n.props).onChange)===null||s===void 0||s.call(a,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var i,a;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(a=(i=n.props).onInputClick)===null||a===void 0||a.call(i)},n.handleTimeOnlyArrowKey=function(i){var a,s,o,l,c=n.props.selected||n.state.preSelection||Pt(),f=(a=n.props.timeIntervals)!==null&&a!==void 0?a:30,h=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,p=Array.isArray(h)?h[0]:h,g=dd(c),y=sa(c)*60+oa(c),b=1440-f,v;if(i===Qe.ArrowUp){var E=Math.max(0,y-f);v=Bd(g,E)}else{var E=Math.min(b,y+f);v=Bd(g,E)}var S=nr(v,p||e.defaultProps.dateFormat,n.props.locale);if(n.setState({preSelection:v,inputValue:S}),!(n.props.selectsRange||n.props.selectsMultiple)){var w=n.props.selected?n.props.selected:n.getPreSelection(),A=n.props.selected?v:am(w,{hour:sa(v),minute:oa(v)});(l=(o=n.props).onChange)===null||l===void 0||l.call(o,A),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){n.scrollToTimeOption(v)})}},n.handleTimeOnlyEnterKey=function(i){var a,s,o,l,c=i.target,f=c.value,h=(a=n.props.dateFormat)!==null&&a!==void 0?a:e.defaultProps.dateFormat,p=n.props.timeFormat||"p",g=n.state.preSelection||n.props.selected||Pt(),y=Xu(f,h,n.props.locale,(s=n.props.strictParsing)!==null&&s!==void 0?s:!1,g),b=g;if(y&&Si(y))b=y;else{var v=((o=n.calendar)===null||o===void 0?void 0:o.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(v instanceof HTMLElement){var E=(l=v.textContent)===null||l===void 0?void 0:l.trim();if(E){var S=Xu(E,p,n.props.locale,!1,g);S&&Si(S)&&(b=S)}}}n.handleTimeChange(b),n.setOpen(!1),n.sendFocusBackToInput()},n.scrollToTimeOption=function(i){var a,s;if(!((a=n.calendar)===null||a===void 0)&&a.containerRef.current){for(var o=n.calendar.containerRef.current,l=Array.from(o.querySelectorAll(".react-datepicker__time-list-item")),c=null,f=1/0,h=n.props.timeFormat||"p",p=0,g=l;p<g.length;p++){var y=g[p],b=(s=y.textContent)===null||s===void 0?void 0:s.trim();if(b){var v=Xu(b,h,n.props.locale,!1,i);if(v&&Si(v)){if(D5(v,i)){c=y;break}var E=Math.abs(v.getTime()-i.getTime());E<f&&(f=E,c=y)}}}c&&(l.forEach(function(S){S.setAttribute("tabindex","-1")}),c.setAttribute("tabindex","0"),c.scrollIntoView({behavior:"smooth",block:"center"}))}},n.onInputKeyDown=function(i){var a,s,o,l,c,f;(s=(a=n.props).onKeyDown)===null||s===void 0||s.call(a,i);var h=i.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Qe.ArrowDown||h===Qe.ArrowUp||h===Qe.Enter)&&((o=n.onInputClick)===null||o===void 0||o.call(n));return}if(n.state.open&&n.props.showTimeSelectOnly){if(h===Qe.ArrowDown||h===Qe.ArrowUp){i.preventDefault(),n.handleTimeOnlyArrowKey(h);return}if(h===Qe.Enter){i.preventDefault(),n.handleTimeOnlyEnterKey(i);return}}if(n.state.open){if(h===Qe.ArrowDown||h===Qe.ArrowUp){i.preventDefault();var p=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',g=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(p);g instanceof HTMLElement&&g.focus({preventScroll:!0});return}var y=Pt(n.state.preSelection);h===Qe.Enter?(i.preventDefault(),i.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===qS?(n.handleSelect(y,i),!n.props.shouldCloseOnSelect&&n.setPreSelection(y)):n.setOpen(!1)):h===Qe.Escape?(i.preventDefault(),i.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Qe.Tab&&n.setOpen(!1),n.inputOk()||(f=(c=n.props).onInputError)===null||f===void 0||f.call(c,{code:1,msg:YS})}},n.onPortalKeyDown=function(i){var a=i.key;a===Qe.Escape&&(i.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(i){var a,s,o,l,c,f,h=n.props,p=h.minDate,g=h.maxDate,y=h.disabledKeyboardNavigation,b=h.showWeekPicker,v=h.shouldCloseOnSelect,E=h.locale,S=h.calendarStartDay,w=h.adjustDateOnChange,A=h.inline;if((s=(a=n.props).onKeyDown)===null||s===void 0||s.call(a,i),!y){var _=i.key,I=i.shiftKey,D=Pt(n.state.preSelection),P=function(H,N){var Q=N;switch(H){case Qe.ArrowRight:Q=b?p0(N,1):ua(N,1);break;case Qe.ArrowLeft:Q=b?h2(N):zfe(N);break;case Qe.ArrowUp:Q=h2(N);break;case Qe.ArrowDown:Q=p0(N,1);break;case Qe.PageUp:Q=I?Rc(N,1):zl(N,1);break;case Qe.PageDown:Q=I?Ps(N,1):da(N,1);break;case Qe.Home:Q=Ko(N,E,S);break;case Qe.End:Q=Lhe(N);break}return Q},k=function(H,N){for(var Q=40,z=H,V=!1,K=0,Y=P(H,N);!V;){if(K>=Q){Y=N;break}p&&Y<p&&(z=Qe.ArrowRight,Y=Gi(p,n.props)?P(z,Y):p),g&&Y>g&&(z=Qe.ArrowLeft,Y=Gi(g,n.props)?P(z,Y):g),Gi(Y,n.props)?((z===Qe.PageUp||z===Qe.Home)&&(z=Qe.ArrowRight),(z===Qe.PageDown||z===Qe.End)&&(z=Qe.ArrowLeft),Y=P(z,Y)):V=!0,K++}return Y};if(_===Qe.Enter){i.preventDefault(),n.handleSelect(D,i),!v&&n.setPreSelection(D);return}else if(_===Qe.Escape){i.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(o=n.props).onInputError)===null||l===void 0||l.call(o,{code:1,msg:YS});return}var M=null;switch(_){case Qe.ArrowLeft:case Qe.ArrowRight:case Qe.ArrowUp:case Qe.ArrowDown:case Qe.PageUp:case Qe.PageDown:case Qe.Home:case Qe.End:M=k(_,D);break}if(!M){(f=(c=n.props).onInputError)===null||f===void 0||f.call(c,{code:1,msg:YS});return}i.preventDefault(),n.setState({lastPreSelectChange:qS}),w&&n.setSelected(M),n.setPreSelection(M),A&&n.setState({shouldFocusDayInline:!0})}},n.onPopperKeyDown=function(i){var a=i.key;a===Qe.Escape&&(i.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),n.sendFocusBackToInput();var a=n.props,s=a.selectsRange,o=a.onChange;o?.(s?[null,null]:null,i),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(i){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(i)&&n.setOpen(!1)},n.renderCalendar=function(){var i,a;return!n.props.inline&&!n.isCalendarOpen()?null:Ue.createElement(dpe,_t({showMonthYearDropdown:void 0,ref:function(s){n.calendar=s}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(i=n.props.dateFormatCalendar)!==null&&i!==void 0?i:e.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:zhe(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(a=n.props.dropdownMode)!==null&&a!==void 0?a:e.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var i,a=n.props.locale,s=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,o=n.props.showTimeInput||n.props.showTimeSelect,l=o?"PPPPp":"PPPP",c;return n.props.selectsRange?c="Selected start date: ".concat(pi(n.props.startDate,{dateFormat:l,locale:a}),". ").concat(n.props.endDate?"End date: "+pi(n.props.endDate,{dateFormat:l,locale:a}):""):n.props.showTimeSelectOnly?c="Selected time: ".concat(pi(n.props.selected,{dateFormat:s,locale:a})):n.props.showYearPicker?c="Selected year: ".concat(pi(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?c="Selected month: ".concat(pi(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?c="Selected quarter: ".concat(pi(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):c="Selected date: ".concat(pi(n.props.selected,{dateFormat:l,locale:a})),Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},c)},n.renderDateInput=function(){var i,a,s,o,l,c,f=mt(n.props.className,(i={},i[n.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=n.state.open,i)),h=n.props.customInput||Ue.createElement("input",{type:"text"}),p=n.props.customInputRef||"ref",g={},y=(s=n.props["aria-describedby"])!==null&&s!==void 0?s:n.props.ariaDescribedBy,b=(o=n.props["aria-invalid"])!==null&&o!==void 0?o:n.props.ariaInvalid,v=(l=n.props["aria-labelledby"])!==null&&l!==void 0?l:n.props.ariaLabelledBy,E=(c=n.props["aria-required"])!==null&&c!==void 0?c:n.props.ariaRequired;return y!=null&&(g["aria-describedby"]=y),b!=null&&(g["aria-invalid"]=b),v!=null&&(g["aria-labelledby"]=v),E!=null&&(g["aria-required"]=E),R.cloneElement(h,_t((a={},a[p]=function(S){n.input=S},a.value=n.getInputValue(),a.onBlur=n.handleBlur,a.onChange=n.handleChange,a.onClick=n.onInputClick,a.onFocus=n.handleFocus,a.onKeyDown=n.onInputKeyDown,a.id=n.props.id,a.name=n.props.name,a.form=n.props.form,a.autoFocus=n.props.autoFocus,a.placeholder=n.props.placeholderText,a.disabled=n.props.disabled,a.autoComplete=n.props.autoComplete,a.className=mt(h.props.className,f),a.title=n.props.title,a.readOnly=n.props.readOnly,a.required=n.props.required,a.tabIndex=n.props.tabIndex,a),g))},n.renderClearButton=function(){var i=n.props,a=i.isClearable,s=i.disabled,o=i.selected,l=i.startDate,c=i.endDate,f=i.clearButtonTitle,h=i.clearButtonClassName,p=h===void 0?"":h,g=i.ariaLabelClose,y=g===void 0?"Close":g,b=i.selectedDates,v=i.readOnly;return a&&!v&&(o!=null||l!=null||c!=null||b?.length)?Ue.createElement("button",{type:"button",className:mt("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":s}),disabled:s,"aria-label":y,onClick:n.onClearClick,title:f,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:I5,readOnly:!1,rangeSeparator:E5,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:_h,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,n){var i,a,s,o;t.inline&&bpe(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:M2(this.props.highlightDates)}),!n.focused&&!Fl(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((a=(i=this.props).onCalendarOpen)===null||a===void 0||a.call(i)),n.open===!0&&this.state.open===!1&&((o=(s=this.props).onCalendarClose)===null||o===void 0||o.call(s)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,i=t.icon,a=t.calendarIconClassname,s=t.calendarIconClassName,o=t.toggleCalendarOnIconClick,l=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Ue.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&Ue.createElement(hpe,_t({icon:i,className:mt(s,!s&&a,l&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?Ue.createElement(R5,{enableTabLoop:this.props.enableTabLoop},Ue.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=Ue.createElement(C5,_t({portalId:this.props.portalId},this.props),n)),Ue.createElement("div",null,this.renderInputContainer(),n)}return Ue.createElement(vpe,_t({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(R.Component),xpe="input",qS="navigate";function Spe(){const[r,e]=R.useState("current"),[t,n]=R.useState("all"),[i,a]=R.useState(!0),[s,o]=R.useState({temperature:null,humidity:null,lastUpdate:null}),[l,c]=R.useState({temperature:null,humidity:null,lastUpdate:null}),[f,h]=R.useState({temperature:null,humidity:null,lastUpdate:null}),[p,g]=R.useState([]),[y,b]=R.useState({temperature:null,humidity:null}),[v,E]=R.useState(new Date),[S,w]=R.useState(new Date),[A,_]=R.useState([]),[I,D]=R.useState(!1),[P]=R.useState({rootTemp:null,rootHumidity:null,ec:null,ph:null,tankLevel:null,co2:null,ppfd:null});R.useEffect(()=>{const z=async()=>{try{const K=await fetch("/api/smartfarm/get_realtime_sensor_data.php");a(K.ok)}catch{a(!1)}};z();const V=setInterval(z,1e4);return()=>clearInterval(V)},[]),R.useEffect(()=>{const z=async()=>{try{const Y=await(await fetch("/api/smartfarm/get_realtime_sensor_data.php")).json();if(Y.success){const W=Y.data;o({temperature:W.front.temperature,humidity:W.front.humidity,lastUpdate:W.front.lastUpdate?Date.now():null}),c({temperature:W.back.temperature,humidity:W.back.humidity,lastUpdate:W.back.lastUpdate?Date.now():null}),h({temperature:W.top.temperature,humidity:W.top.humidity,lastUpdate:W.top.lastUpdate?Date.now():null})}}catch(K){console.error("Failed to fetch sensor data:",K)}};z();const V=setInterval(z,1e3);return()=>clearInterval(V)},[]),R.useEffect(()=>{if(s.temperature!==null||l.temperature!==null||f.temperature!==null){const z={timestamp:new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),frontTemp:s.temperature,backTemp:l.temperature,topTemp:f.temperature,frontHum:s.humidity,backHum:l.humidity,topHum:f.humidity};g(V=>{const K=[...V,z],Y=r==="current"?20:r==="1h"?60:r==="1w"?168:720;return K.slice(-Y)})}},[s,l,f,r]),R.useEffect(()=>{if(p.length>0){const z=p.slice(-10),V=z.reduce((Y,W)=>{const J=[W.frontTemp,W.backTemp,W.topTemp].filter(G=>G!==null);return Y+(J.length>0?J.reduce((G,j)=>G+j,0)/J.length:0)},0)/z.length,K=z.reduce((Y,W)=>{const J=[W.frontHum,W.backHum,W.topHum].filter(G=>G!==null);return Y+(J.length>0?J.reduce((G,j)=>G+j,0)/J.length:0)},0)/z.length;b({temperature:isNaN(V)?null:parseFloat(V.toFixed(1)),humidity:isNaN(K)?null:parseFloat(K.toFixed(1))})}},[p]);const k=async()=>{if(!(!v||!S)){D(!0);try{const z=v.toISOString().split("T")[0],V=S.toISOString().split("T")[0],Y=await(await fetch(`/api/smartfarm/get_sensor_data.php?start_date=${z}&end_date=${V}`)).json();Y.success?_(Y.data):console.error("Failed to load historical data:",Y.error)}catch(z){console.error("Error loading historical data:",z)}finally{D(!1)}}},M=[s.temperature,l.temperature,f.temperature].filter(z=>z!==null),H=[s.humidity,l.humidity,f.humidity].filter(z=>z!==null),N=M.length>0?M.reduce((z,V)=>z+V,0)/M.length:null,Q=H.length>0?H.reduce((z,V)=>z+V,0)/H.length:null;return L.jsx("div",{className:"bg-gray-50",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[L.jsx("header",{className:"bg-farm-500 p-4 sm:px-6 rounded-xl mb-6",children:L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold m-0",children:"  "}),L.jsx("p",{className:"text-sm text-gray-800 mt-1 m-0",children:", , EC, pH     "})]}),L.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[L.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-green-300 animate-pulse":"bg-red-300"}`}),L.jsxs("span",{className:"text-sm font-medium",children:[" ",i?" ":" "]})]})]})}),L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-6",children:[L.jsxs("section",{className:"lg:col-span-1",children:[L.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:L.jsx("h3",{className:"text-sm font-semibold m-0",children:" "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-3",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),L.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[N!==null?N.toFixed(1):"0.0","C"]})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),L.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Q!==null?Q.toFixed(1):"0.0","%"]})]})]})]}),L.jsxs("section",{className:"lg:col-span-1",children:[L.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:L.jsx("h3",{className:"text-sm font-semibold m-0",children:"  "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[s.temperature!==null?s.temperature.toFixed(1):"0.0","C"]})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[s.humidity!==null?s.humidity.toFixed(1):"0.0","%"]})]})]})]}),L.jsxs("section",{className:"lg:col-span-1",children:[L.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:L.jsx("h3",{className:"text-sm font-semibold m-0",children:"  "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[l.temperature!==null?l.temperature.toFixed(1):"0.0","C"]})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[l.humidity!==null?l.humidity.toFixed(1):"0.0","%"]})]})]})]}),L.jsxs("section",{className:"lg:col-span-1",children:[L.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:L.jsx("h3",{className:"text-sm font-semibold m-0",children:" "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[f.temperature!==null?f.temperature.toFixed(1):"0.0","C"]})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600",children:" "}),L.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[f.humidity!==null?f.humidity.toFixed(1):"0.0","%"]})]})]})]}),L.jsxs("section",{className:"lg:col-span-1",children:[L.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:L.jsx("h3",{className:"text-sm font-semibold m-0",children:" 10 "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-3",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),L.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[y.temperature!==null?y.temperature.toFixed(1):"0.0","C"]})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),L.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[y.humidity!==null?y.humidity.toFixed(1):"0.0","%"]})]})]})]})]}),L.jsxs("section",{className:"mb-6",children:[L.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:L.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),L.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),L.jsx($2,{selected:v,onChange:z=>E(z),dateFormat:"yyyy-MM-dd",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",maxDate:new Date})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),L.jsx($2,{selected:S,onChange:z=>w(z),dateFormat:"yyyy-MM-dd",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",maxDate:new Date})]}),L.jsx("div",{children:L.jsx("button",{onClick:k,disabled:I,className:"w-full px-6 py-2 bg-farm-500 text-gray-900 rounded-lg font-medium hover:bg-farm-600 disabled:opacity-50 disabled:cursor-not-allowed",children:I?" ...":" "})})]}),A.length>0&&L.jsxs("div",{className:"mt-6 overflow-x-auto",children:[L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" (C)"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" (%)"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.slice(0,100).map((z,V)=>L.jsxs("tr",{className:"hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:z.sensor_location}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:z.temperature??"-"}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:z.humidity??"-"}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(z.recorded_at).toLocaleString("ko-KR")})]},V))})]}),A.length>100&&L.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[" 100   (: ",A.length,")"]})]})]})]}),L.jsxs("section",{className:"mb-6",children:[L.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:L.jsx("h2",{className:"text-xl font-semibold m-0",children:"    "})}),L.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:L.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),L.jsxs("select",{value:r,onChange:z=>e(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[L.jsx("option",{value:"current",children:""}),L.jsx("option",{value:"1h",children:" 1"}),L.jsx("option",{value:"1w",children:" 1"}),L.jsx("option",{value:"1m",children:" 1"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zone"}),L.jsxs("select",{value:t,onChange:z=>n(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[L.jsx("option",{value:"all",children:""}),L.jsx("option",{value:"zone_a",children:"Zone A ()"}),L.jsx("option",{value:"zone_b",children:"Zone B ()"}),L.jsx("option",{value:"zone_c",children:"Zone C ()"})]})]})]})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[L.jsxs("section",{children:[L.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:L.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),L.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:p.length===0?L.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):L.jsx(wk,{width:"100%",height:400,children:L.jsxs(r2,{data:p,children:[L.jsx(pT,{strokeDasharray:"3 3"}),L.jsx(gT,{dataKey:"timestamp"}),L.jsx(vT,{}),L.jsx(uN,{}),L.jsx(K_,{}),L.jsx(Ol,{type:"monotone",dataKey:"frontTemp",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),L.jsx(Ol,{type:"monotone",dataKey:"backTemp",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),L.jsx(Ol,{type:"monotone",dataKey:"topTemp",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]}),L.jsxs("section",{children:[L.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:L.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),L.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:p.length===0?L.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):L.jsx(wk,{width:"100%",height:400,children:L.jsxs(r2,{data:p,children:[L.jsx(pT,{strokeDasharray:"3 3"}),L.jsx(gT,{dataKey:"timestamp"}),L.jsx(vT,{}),L.jsx(uN,{}),L.jsx(K_,{}),L.jsx(Ol,{type:"monotone",dataKey:"frontHum",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),L.jsx(Ol,{type:"monotone",dataKey:"backHum",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),L.jsx(Ol,{type:"monotone",dataKey:"topHum",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]})]}),L.jsxs("section",{className:"mb-6",children:[L.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:L.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),L.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:L.jsxs("dl",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-3",children:[L.jsx(El,{label:" ",value:P.rootTemp,unit:"C"}),L.jsx(El,{label:" ",value:P.rootHumidity,unit:"%"}),L.jsx(El,{label:"EC",value:P.ec,unit:"mS/cm"}),L.jsx(El,{label:"pH",value:P.ph,unit:""}),L.jsx(El,{label:" ",value:P.tankLevel,unit:"%"}),L.jsx(El,{label:"CO",value:P.co2,unit:"ppm"}),L.jsx(El,{label:"PPFD",value:P.ppfd,unit:"mol/m/s"})]})})]})]})})}const Xe=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},Epe=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=wpe},wpe=Number.MAX_SAFE_INTEGER||9007199254740991;let at=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),we=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r})({}),$=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r})({});var St={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},et={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Zu{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class _pe{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Zu(e),this.fast_=new Zu(t),this.defaultTTFB_=i,this.ttfb_=new Zu(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:a}=this;n.halfLife!==e&&(this.slow_=new Zu(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Zu(t,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Zu(e,a.getEstimate(),a.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,a=n/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Tpe(r,e,t){return(e=Dpe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Yt(){return Yt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Yt.apply(null,arguments)}function H2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Bt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(t),!0).forEach(function(n){Tpe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):H2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ape(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Dpe(r){var e=Ape(r,"string");return typeof e=="symbol"?e:e+""}class Xi{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=jo,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const jo=function(){},Ope={trace:jo,debug:jo,log:jo,warn:jo,info:jo,error:jo};function DT(){return Yt({},Ope)}function Ipe(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):jo}function G2(r,e,t){return e[r]?e[r].bind(e):Ipe(r,t)}const OT=DT();function Cpe(r,e,t){const n=DT();if(typeof console=="object"&&r===!0||typeof r=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{n[a]=G2(a,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return DT()}i.forEach(a=>{OT[a]=G2(a,r)})}else Yt(OT,n);return n}const $t=OT;function Xo(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Rpe(r){return typeof self<"u"&&r===self.ManagedMediaSource}function P5(r,e){const t=Object.keys(r),n=Object.keys(e),i=t.length,a=n.length;return!i||!a||i===a&&!t.some(s=>n.indexOf(s)===-1)}function Ti(r,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(r);if(e){const f=c.indexOf("\0");return f!==-1?c.substring(0,f):c}return c.replace(/\0/g,"")}const t=r.length;let n,i,a,s="",o=0;for(;o<t;){if(n=r[o++],n===0&&e)return s;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(n);break;case 12:case 13:i=r[o++],s+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=r[o++],a=r[o++],s+=String.fromCharCode((n&15)<<12|(i&63)<<6|(a&63)<<0);break}}return s}function un(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function L5(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Ppe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var WS={exports:{}},K2;function Lpe(){return K2||(K2=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,f){if(f=f||{},l=l.trim(),c=c.trim(),!c){if(!f.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(c);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return f.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):c;var g=o.parseURL(l);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var y=i.exec(g.path);g.netLoc=y[1],g.path=y[2]}g.netLoc&&!g.path&&(g.path="/");var b={scheme:g.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(b.netLoc=g.netLoc,p.path[0]!=="/"))if(!p.path)b.path=g.path,p.params||(b.params=g.params,p.query||(b.query=g.query));else{var v=g.path,E=v.substring(0,v.lastIndexOf("/")+1)+p.path;b.path=o.normalizePath(E)}return b.path===null&&(b.path=f.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(b)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(WS)),WS.exports}var oD=Lpe();class lD{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Vt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class k5{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Mpe(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Vt.AUDIO]:null,[Vt.VIDEO]:null,[Vt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new lD),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=oD.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Vt.AUDIO]=null,e[Vt.VIDEO]=null,e[Vt.AUDIOVIDEO]=null}}function _r(r){return r.sn!=="initSegment"}class VS extends k5{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Xe(e)&&Xe(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const i=this._decryptdata=t[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Xe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return _r(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const i=t[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,a,s=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:a,partial:s};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,a)}}class kpe extends k5{constructor(e,t,n,i,a){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function M5(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||M5(t,e)}}function Mpe(r,e){const t=M5(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const z2=Math.pow(2,32)-1,Npe=[].push,N5={video:1,audio:2,id3:3,text:4};function Fr(r){return String.fromCharCode.apply(null,r)}function j5(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function dt(r,e){const t=F5(r,e);return t<0?4294967296+t:t}function Y2(r,e){let t=dt(r,e);return t*=Math.pow(2,32),t+=dt(r,e+4),t}function F5(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function jpe(r){const e=r.byteLength;for(let t=0;t<e;){const n=dt(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function xt(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const a=dt(r,i),s=Fr(r.subarray(i+4,i+8)),o=a>1?i+a:n;if(s===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const l=xt(r.subarray(i+8,o),e.slice(1));l.length&&Npe.apply(t,l)}i=o}return t}function Fpe(r){const e=[],t=r[0];let n=8;const i=dt(r,n);n+=4;let a=0,s=0;t===0?(a=dt(r,n),s=dt(r,n+4),n+=8):(a=Y2(r,n),s=Y2(r,n+8),n+=16),n+=2;let o=r.length+s;const l=j5(r,n);n+=2;for(let c=0;c<l;c++){let f=n;const h=dt(r,f);f+=4;const p=h&2147483647;if((h&2147483648)>>>31===1)return $t.warn("SIDX has hierarchical references (not supported)"),null;const y=dt(r,f);f+=4,e.push({referenceSize:p,subsegmentDuration:y,info:{duration:y/i,start:o,end:o+p-1}}),o+=p,f+=4,n=f}return{earliestPresentationTime:a,timescale:i,version:t,referencesCount:l,references:e}}function B5(r){const e=[],t=xt(r,["moov","trak"]);for(let i=0;i<t.length;i++){const a=t[i],s=xt(a,["tkhd"])[0];if(s){let o=s[0];const l=dt(s,o===0?12:20),c=xt(a,["mdia","mdhd"])[0];if(c){o=c[0];const f=dt(c,o===0?12:20),h=xt(a,["mdia","hdlr"])[0];if(h){const p=Fr(h.subarray(8,12)),g={soun:Vt.AUDIO,vide:Vt.VIDEO}[p],y=xt(a,["mdia","minf","stbl","stsd"])[0],b=Bpe(y);g?(e[l]={timescale:f,type:g,stsd:b},e[g]=Bt({timescale:f,id:l},b)):e[l]={timescale:f,type:p,stsd:b}}}}}return xt(r,["moov","mvex","trex"]).forEach(i=>{const a=dt(i,4),s=e[a];s&&(s.default={duration:dt(i,12),flags:dt(i,20)})}),e}function Bpe(r){const e=r.subarray(8),t=e.subarray(86),n=Fr(e.subarray(4,8));let i=n,a;const s=n==="enca"||n==="encv";if(s){const c=xt(e,[n])[0].subarray(n==="enca"?28:78);xt(c,["sinf"]).forEach(h=>{const p=xt(h,["schm"])[0];if(p){const g=Fr(p.subarray(4,8));if(g==="cbcs"||g==="cenc"){const y=xt(h,["frma"])[0];y&&(i=Fr(y))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=xt(t,["avcC"])[0];l&&l.length>3&&(i+="."+dm(l[1])+dm(l[2])+dm(l[3]),a=fm(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=xt(e,[n])[0],c=xt(l.subarray(28),["esds"])[0];if(c&&c.length>7){let f=4;if(c[f++]!==3)break;f=QS(c,f),f+=2;const h=c[f++];if(h&128&&(f+=2),h&64&&(f+=c[f++]),c[f++]!==4)break;f=QS(c,f);const p=c[f++];if(p===64)i+="."+dm(p);else break;if(f+=12,c[f++]!==5)break;f=QS(c,f);const g=c[f++];let y=(g&248)>>3;y===31&&(y+=1+((g&7)<<3)+((c[f]&224)>>5)),i+="."+y}break}case"hvc1":case"hev1":{const l=xt(t,["hvcC"])[0];if(l&&l.length>12){const c=l[1],f=["","A","B","C"][c>>6],h=c&31,p=dt(l,2),g=(c&32)>>5?"H":"L",y=l[12],b=l.subarray(6,12);i+="."+f+h,i+="."+Upe(p).toString(16).toUpperCase(),i+="."+g+y;let v="";for(let E=b.length;E--;){const S=b[E];(S||v)&&(v="."+S.toString(16).toUpperCase()+v)}i+=v}a=fm(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=fm(i,t)||i;break}case"vp09":{const l=xt(t,["vpcC"])[0];if(l&&l.length>6){const c=l[4],f=l[5],h=l[6]>>4&15;i+="."+Sa(c)+"."+Sa(f)+"."+Sa(h)}break}case"av01":{const l=xt(t,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,f=l[1]&31,h=l[2]>>>7?"H":"M",p=(l[2]&64)>>6,g=(l[2]&32)>>5,y=c===2&&p?g?12:10:p?10:8,b=(l[2]&16)>>4,v=(l[2]&8)>>3,E=(l[2]&4)>>2,S=l[2]&3;i+="."+c+"."+Sa(f)+h+"."+Sa(y)+"."+b+"."+v+E+S+"."+Sa(1)+"."+Sa(1)+"."+Sa(1)+"."+0,a=fm("dav1",t)}break}}return{codec:i,encrypted:s,supplemental:a}}function fm(r,e){const t=xt(e,["dvvC"]),n=t.length?t[0]:xt(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,a=n[2]<<5&32|n[3]>>3&31;return r+"."+Sa(i)+"."+Sa(a)}}function Upe(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function QS(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function dm(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function Sa(r){return(r<10?"0":"")+r}function $pe(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&U5(r,(n,i)=>{const a=n.subarray(8,24);a.some(s=>s!==0)||($t.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${un(a)} -> ${un(t)}`),n.set(t,8))})}function Hpe(r){const e=[];return U5(r,t=>e.push(t.subarray(8,24))),e}function U5(r,e){xt(r,["moov","trak"]).forEach(n=>{const i=xt(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const a=i.subarray(8);let s=xt(a,["enca"]);const o=s.length>0;o||(s=xt(a,["encv"])),s.forEach(l=>{const c=o?l.subarray(28):l.subarray(78);xt(c,["sinf"]).forEach(h=>{const p=$5(h);p&&e(p,o)})})})}function $5(r){const e=xt(r,["schm"])[0];if(e){const t=Fr(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=xt(r,["schi","tenc"])[0];if(n)return n}}}function Gpe(r,e,t){const n={},i=xt(r,["moof","traf"]);for(let a=0;a<i.length;a++){const s=i[a],o=xt(s,["tfhd"])[0],l=dt(o,4),c=e[l];if(!c)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const f=n[l],h=xt(s,["tfdt"])[0];if(h){const w=h[0];let A=dt(h,4);w===1&&(A===z2?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(A*=z2+1,A+=dt(h,8))),Xe(A)&&(!Xe(f.start)||A<f.start)&&(f.start=A)}const p=c.default,g=dt(o,0)|p?.flags;let y=p?.duration||0;g&8&&(g&2?y=dt(o,12):y=dt(o,8));const b=xt(s,["trun"]);let v=f.start||0,E=0,S=y;for(let w=0;w<b.length;w++){const A=b[w],_=dt(A,4),I=f.sampleCount;f.sampleCount+=_;const D=A[3]&1,P=A[3]&4,k=A[2]&1,M=A[2]&2,H=A[2]&4,N=A[2]&8;let Q=8,z=_;for(D&&(Q+=4),P&&_&&(!(A[Q+1]&1)&&f.keyFrameIndex===void 0&&(f.keyFrameIndex=I),Q+=4,k?(S=dt(A,Q),Q+=4):S=y,M&&(Q+=4),N&&(Q+=4),v+=S,E+=S,z--);z--;)k?(S=dt(A,Q),Q+=4):S=y,M&&(Q+=4),H&&(A[Q+1]&1||f.keyFrameIndex===void 0&&(f.keyFrameIndex=f.sampleCount-(z+1),f.keyFrameStart=v),Q+=4),N&&(Q+=4),v+=S,E+=S;!E&&y&&(E+=y*_)}f.duration+=E}if(!Object.keys(n).some(a=>n[a].duration)){let a=1/0,s=0;const o=xt(r,["sidx"]);for(let l=0;l<o.length;l++){const c=Fpe(o[l]);if(c!=null&&c.references){a=Math.min(a,c.earliestPresentationTime/c.timescale);const f=c.references.reduce((h,p)=>h+p.info.duration||0,0);s=Math.max(s,f+c.earliestPresentationTime/c.timescale)}}s&&Xe(s)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=s*n[l].timescale-n[l].start)})}return n}function Kpe(r){const e={valid:null,remainder:null},t=xt(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function Vi(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function q2(r,e){const t=[],n=e.samples,i=e.timescale,a=e.id;let s=!1;return xt(n,["moof"]).map(l=>{const c=l.byteOffset-8;xt(l,["traf"]).map(h=>{const p=xt(h,["tfdt"]).map(g=>{const y=g[0];let b=dt(g,4);return y===1&&(b*=Math.pow(2,32),b+=dt(g,8)),b/i})[0];return p!==void 0&&(r=p),xt(h,["tfhd"]).map(g=>{const y=dt(g,4),b=dt(g,0)&16777215,v=(b&1)!==0,E=(b&2)!==0,S=(b&8)!==0;let w=0;const A=(b&16)!==0;let _=0;const I=(b&32)!==0;let D=8;y===a&&(v&&(D+=8),E&&(D+=4),S&&(w=dt(g,D),D+=4),A&&(_=dt(g,D),D+=4),I&&(D+=4),e.type==="video"&&(s=By(e.codec)),xt(h,["trun"]).map(P=>{const k=P[0],M=dt(P,0)&16777215,H=(M&1)!==0;let N=0;const Q=(M&4)!==0,z=(M&256)!==0;let V=0;const K=(M&512)!==0;let Y=0;const W=(M&1024)!==0,J=(M&2048)!==0;let G=0;const j=dt(P,4);let F=8;H&&(N=dt(P,F),F+=4),Q&&(F+=4);let Z=N+c;for(let ae=0;ae<j;ae++){if(z?(V=dt(P,F),F+=4):V=w,K?(Y=dt(P,F),F+=4):Y=_,W&&(F+=4),J&&(k===0?G=dt(P,F):G=F5(P,F),F+=4),e.type===Vt.VIDEO){let ee=0;for(;ee<Y;){const ve=dt(n,Z);if(Z+=4,zpe(s,n[Z])){const le=n.subarray(Z,Z+ve);uD(le,s?2:1,r+G/i,t)}Z+=ve,ee+=ve+4}}r+=V/i}}))})})}),t}function By(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function zpe(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function uD(r,e,t,n){const i=H5(r);let a=0;a+=e;let s=0,o=0,l=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(l===255);o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(l===255);const c=i.length-a;let f=a;if(o<c)a+=o;else if(o>c){$t.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(s===4){if(i[f++]===181){const p=j5(i,f);if(f+=2,p===49){const g=dt(i,f);if(f+=4,g===1195456820){const y=i[f++];if(y===3){const b=i[f++],v=31&b,E=64&b,S=E?2+v*3:0,w=new Uint8Array(S);if(E){w[0]=b;for(let A=1;A<S;A++)w[A]=i[f++]}n.push({type:y,payloadType:s,pts:t,bytes:w})}}}}}else if(s===5&&o>16){const h=[];for(let y=0;y<16;y++){const b=i[f++].toString(16);h.push(b.length==1?"0"+b:b),(y===3||y===5||y===7||y===9)&&h.push("-")}const p=o-16,g=new Uint8Array(p);for(let y=0;y<p;y++)g[y]=i[f++];n.push({payloadType:s,pts:t,uuid:h.join(""),userData:Ti(g),userDataBytes:g})}}}function H5(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,a=new Uint8Array(i);let s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),a[n]=r[s];return a}function Ype(r){const e=r[0];let t="",n="",i=0,a=0,s=0,o=0,l=0,c=0;if(e===0){for(;Fr(r.subarray(c,c+1))!=="\0";)t+=Fr(r.subarray(c,c+1)),c+=1;for(t+=Fr(r.subarray(c,c+1)),c+=1;Fr(r.subarray(c,c+1))!=="\0";)n+=Fr(r.subarray(c,c+1)),c+=1;n+=Fr(r.subarray(c,c+1)),c+=1,i=dt(r,12),a=dt(r,16),o=dt(r,20),l=dt(r,24),c=28}else if(e===1){c+=4,i=dt(r,c),c+=4;const h=dt(r,c);c+=4;const p=dt(r,c);for(c+=4,s=2**32*h+p,Epe(s)||(s=Number.MAX_SAFE_INTEGER,$t.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=dt(r,c),c+=4,l=dt(r,c),c+=4;Fr(r.subarray(c,c+1))!=="\0";)t+=Fr(r.subarray(c,c+1)),c+=1;for(t+=Fr(r.subarray(c,c+1)),c+=1;Fr(r.subarray(c,c+1))!=="\0";)n+=Fr(r.subarray(c,c+1)),c+=1;n+=Fr(r.subarray(c,c+1)),c+=1}const f=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:f}}function qpe(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(r,4),i=0,n=8;i<t;i++)a.set(e[i],n),n+=e[i].byteLength;return a}function Wpe(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let a;n>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const s=new Uint8Array(4);return t.byteLength>0&&new DataView(s.buffer).setUint32(0,t.byteLength,!1),qpe([112,115,115,104],new Uint8Array([n,0,0,0]),r,a,i,s,t)}function Vpe(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),a=Qpe(i);e.push(a),n+=a.size}}return e}function Qpe(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const a=r.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:t,size:e};const s=r.buffer,o=un(new Uint8Array(s,t+12,16));let l=null,c=null,f=0;if(a===0)f=28;else{const p=r.getUint32(28);if(!p||n<32+p*16)return{offset:t,size:e};l=[];for(let g=0;g<p;g++)l.push(new Uint8Array(s,t+32+g*16,16));f=32+p*16}if(!f)return{offset:t,size:e};const h=r.getUint32(f);return e-32<h?{offset:t,size:e}:(c=new Uint8Array(s,t+f+4,h),{version:a,systemId:o,kids:l,data:c,offset:t,size:e})}const G5=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Nc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function cD(r,e){const t=Nc[e];return!!t&&!!t[r.slice(0,4)]}function Hd(r,e,t=!0){return!r.split(",").some(n=>!fD(n,e,t))}function fD(r,e,t=!0){var n;const i=Xo(t);return(n=i?.isTypeSupported(Gd(r,e)))!=null?n:!1}function Gd(r,e){return`${e}/mp4;codecs=${r}`}function W2(r){if(r){const e=r.substring(0,4);return Nc.video[e]}return 2}function A0(r){const e=G5();return r.split(",").reduce((t,n)=>{const a=e&&By(n)?9:Nc.video[n];return a?(a*2+t)/(t?3:2):(Nc.audio[n]+t)/(t?2:1)},0)}const XS={};function Xpe(r,e=!0){if(XS[r])return XS[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let i=0;i<t.length;i++){var n;if(fD(t[i],"audio",e))return XS[r]=t[i],t[i];if(t[i]==="mp3"&&(n=Xo(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const Zpe=/flac|opus|mp4a\.40\.34/i;function D0(r,e=!0){return r.replace(Zpe,t=>Xpe(t.toLowerCase(),e))}function Jpe(r,e){const t=[];if(r){const n=r.split(",");for(let i=0;i<n.length;i++)cD(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function cg(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(V2(r,"audio")||V2(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function V2(r,e){return cD(r,e)&&fD(r,e)}function eme(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function tme(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function Q2(r){const e=Xo(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function IT(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const rme={supported:!0,powerEfficient:!0,smooth:!0},nme={supported:!1,smooth:!1,powerEfficient:!1},K5={supported:!0,configurations:[],decodingInfoResults:[rme]};function z5(r,e){return{supported:!1,configurations:e,decodingInfoResults:[nme],error:r}}function ime(r,e,t,n,i,a){const s=r.videoCodec,o=r.audioCodec?r.audioGroups:null,l=a?.audioCodec,c=a?.channels,f=c?parseInt(c):l?1/0:2;let h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((p,g)=>{if(g){const y=e.groups[g];if(!y)throw new Error(`Audio track group ${g} not found`);Object.keys(y.channels).forEach(b=>{p[b]=(p[b]||0)+y.channels[b]})}return p},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(p=>By(p))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!h&&Xe(f)&&Object.keys(h).some(p=>parseInt(p)>f)}function Y5(r,e,t,n={}){const i=r.videoCodec;if(!i&&!r.audioCodec||!t)return Promise.resolve(K5);const a=[],s=ame(r),o=s.length,l=sme(r,e,o>0),c=l.length;for(let f=o||1*c||1;f--;){const h={type:"media-source"};if(o&&(h.video=s[f%o]),c){h.audio=l[f%c];const p=h.audio.bitrate;h.video&&p&&(h.video.bitrate-=p)}a.push(h)}if(i){const f=navigator.userAgent;if(i.split(",").some(h=>By(h))&&G5())return Promise.resolve(z5(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${f})`),a))}return Promise.all(a.map(f=>{const h=lme(f);return n[h]||(n[h]=t.decodingInfo(f))})).then(f=>({supported:!f.some(h=>!h.supported),configurations:a,decodingInfoResults:f})).catch(f=>({supported:!1,configurations:a,decodingInfoResults:[],error:f}))}function ame(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=q5(r),i=r.width||640,a=r.height||480,s=r.frameRate||30,o=r.videoRange.toLowerCase();return t?t.map(l=>{const c={contentType:Gd(tme(l),"video"),width:i,height:a,bitrate:n,framerate:s};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function sme(r,e,t){var n;const i=(n=r.audioCodec)==null?void 0:n.split(","),a=q5(r);return i&&r.audioGroups?r.audioGroups.reduce((s,o)=>{var l;const c=o?(l=e.groups[o])==null?void 0:l.tracks:null;return c?c.reduce((f,h)=>{if(h.groupId===o){const p=parseFloat(h.channels||"");i.forEach(g=>{const y={contentType:Gd(g,"audio"),bitrate:t?ome(g,a):a};p&&(y.channels=""+p),f.push(y)})}return f},s):s},[]):[]}function ome(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function q5(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function lme(r){let e="";const{audio:t,video:n}=r;if(n){const i=IT(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const i=IT(t.contentType);e+=`${n?"_":""}${i}_c${t.channels}`}return e}const CT=["NONE","TYPE-0","TYPE-1",null];function ume(r){return CT.indexOf(r)>-1}const O0=["SDR","PQ","HLG"];function cme(r){return!!r&&O0.indexOf(r)>-1}var fg={No:"",Yes:"YES",v2:"v2"};function X2(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?fg.v2:fg.Yes:fg.No}class Z2{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Kd{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return J2(this._audioGroups,e)}hasSubtitleGroup(e){return J2(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function J2(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function fme(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function dme(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||O0.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&fme(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const hme=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Xt=(r,e)=>JSON.stringify(r,hme(e));function pme(r,e,t,n,i){const a=Object.keys(r),s=n?.channels,o=n?.audioCodec,l=i?.videoCodec,c=s&&parseInt(s)===2;let f=!1,h=!1,p=1/0,g=1/0,y=1/0,b=1/0,v=0,E=[];const{preferHDR:S,allowedVideoRanges:w}=dme(e,i);for(let P=a.length;P--;){const k=r[a[P]];f||(f=k.channels[2]>0),p=Math.min(p,k.minHeight),g=Math.min(g,k.minFramerate),y=Math.min(y,k.minBitrate),w.filter(H=>k.videoRanges[H]>0).length>0&&(h=!0)}p=Xe(p)?p:0,g=Xe(g)?g:0;const A=Math.max(1080,p),_=Math.max(30,g);y=Xe(y)?y:t,t=Math.max(y,t),h||(e=void 0);const I=a.length>1;return{codecSet:a.reduce((P,k)=>{const M=r[k];if(k===P)return P;if(E=h?w.filter(H=>M.videoRanges[H]>0):[],I){if(M.minBitrate>t)return ba(k,`min bitrate of ${M.minBitrate} > current estimate of ${t}`),P;if(!M.hasDefaultAudio)return ba(k,"no renditions with default or auto-select sound found"),P;if(o&&k.indexOf(o.substring(0,4))%5!==0)return ba(k,`audio codec preference "${o}" not found`),P;if(s&&!c){if(!M.channels[s])return ba(k,`no renditions with ${s} channel sound found (channels options: ${Object.keys(M.channels)})`),P}else if((!o||c)&&f&&M.channels[2]===0)return ba(k,"no renditions with stereo sound found"),P;if(M.minHeight>A)return ba(k,`min resolution of ${M.minHeight} > maximum of ${A}`),P;if(M.minFramerate>_)return ba(k,`min framerate of ${M.minFramerate} > maximum of ${_}`),P;if(!E.some(H=>M.videoRanges[H]>0))return ba(k,`no variants with VIDEO-RANGE of ${Xt(E)} found`),P;if(l&&k.indexOf(l.substring(0,4))%5!==0)return ba(k,`video codec preference "${l}" not found`),P;if(M.maxScore<v)return ba(k,`max score of ${M.maxScore} < selected max of ${v}`),P}return P&&(A0(k)>=A0(P)||M.fragmentError>r[P].fragmentError)?P:(b=M.minIndex,v=M.maxScore,k)},void 0),videoRanges:E,preferHDR:S,minFramerate:g,minBitrate:y,minIndex:b}}function ba(r,e){$t.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function W5(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function mme(r,e,t,n){return r.slice(t,n+1).reduce((i,a,s)=>{if(!a.codecSet)return i;const o=a.audioGroups;let l=i[a.codecSet];l||(i[a.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,a.bitrate);const c=Math.min(a.height,a.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,a.frameRate),l.minIndex=Math.min(l.minIndex,s),l.maxScore=Math.max(l.maxScore,a.score),l.fragmentError+=a.fragmentError,l.videoRanges[a.videoRange]=(l.videoRanges[a.videoRange]||0)+1,o&&o.forEach(f=>{if(!f)return;const h=e.groups[f];h&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{l.channels[p]=(l.channels[p]||0)+h.channels[p]}))}),i},{})}function ej(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:a}=r;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:a}}function La(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(ql(r,i,t))return n}return-1}function ql(r,e,t){const{groupId:n,name:i,lang:a,assocLang:s,default:o}=r,l=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(a===void 0||gme(a,e.lang))&&(a===void 0||e.assocLang===s)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in r)||yme(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function gme(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function yme(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Rl(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function vme(r,e,t,n,i){const a=e[n],o=e.reduce((p,g,y)=>{const b=g.uri;return(p[b]||(p[b]=[])).push(y),p},{})[a.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=a.videoRange,c=a.frameRate,f=a.codecSet.substring(0,4),h=tj(e,n,p=>{if(p.videoRange!==l||p.frameRate!==c||p.codecSet.substring(0,4)!==f)return!1;const g=p.audioGroups,y=t.filter(b=>!g||g.indexOf(b.groupId)!==-1);return La(r,y,i)>-1});return h>-1?h:tj(e,n,p=>{const g=p.audioGroups,y=t.filter(b=>!g||g.indexOf(b.groupId)!==-1);return La(r,y,i)>-1})}function tj(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function I0(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class bme extends Xi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:a,hls:s}=this,{autoLevelEnabled:o,media:l}=s;if(!i||!l)return;const c=performance.now(),f=a?a.stats:i.stats,h=a?a.duration:i.duration,p=c-f.loading.start,g=s.minAutoLevel,y=i.level,b=this._nextAutoLevel;if(f.aborted||f.loaded&&f.loaded===f.total||y<=g){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const v=b>-1&&b!==y,E=!!t||v;if(!E&&(l.paused||!l.playbackRate||!l.readyState))return;const S=s.mainForwardBufferInfo;if(!E&&S===null)return;const w=this.bwEstimator.getEstimateTTFB(),A=Math.abs(l.playbackRate);if(p<=Math.max(w,1e3*(h/(A*2))))return;const _=S?S.len/A:0,I=f.loading.first?f.loading.first-f.loading.start:-1,D=f.loaded&&I>-1,P=this.getBwEstimate(),k=s.levels,M=k[y],H=Math.max(f.loaded,Math.round(h*(i.bitrate||M.averageBitrate)/8));let N=D?p-I:p;N<1&&D&&(N=Math.min(p,f.loaded*8/P));const Q=D?f.loaded*1e3/N:0,z=w/1e3,V=Q?(H-f.loaded)/Q:H*8/P+z;if(V<=_)return;const K=Q?Q*8:P,Y=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,W=this.hls.config.abrBandWidthUpFactor;let J=Number.POSITIVE_INFINITY,G;for(G=y-1;G>g;G--){const ae=k[G].maxBitrate,ee=!k[G].details||Y;if(J=this.getTimeToLoadFrag(z,K,h*ae,ee),J<Math.min(_,h+z))break}if(J>=V||J>h*10)return;D?this.bwEstimator.sample(p-Math.min(w,I),f.loaded):this.bwEstimator.sampleTTFB(p);const j=k[G].maxBitrate;this.getBwEstimate()*W>j&&this.resetEstimator(j);const F=this.findBestLevel(j,g,G,0,_,1,1);F>-1&&(G=F),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${_.toFixed(3)} s
      Estimated load time for current fragment: ${V.toFixed(3)} s
      Estimated load time for down switch fragment: ${J.toFixed(3)} s
      TTFB estimate: ${I|0} ms
      Current BW estimate: ${Xe(P)?P|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${G} @ ${j|0} bps`),s.nextLoadLevel=s.nextAutoLevel=G,this.clearTimer();const Z=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===G&&G>0){const ae=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${G>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${ae.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,G>g){let ee=this.findBestLevel(this.hls.levels[g].bitrate,g,G,0,ae,1,1);ee===-1&&(ee=g),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ee,this.resetEstimator(this.hls.levels[ee].bitrate)}}};v||V>J*2?Z():this.timer=self.setInterval(Z,J*1e3),s.trigger($.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:f})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new _pe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_LOADED,this.onFragLoaded,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_LOADED,this.onFragLoaded,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off($.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case we.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:a}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const s=performance.now(),o=a?a.stats:n.stats,l=s-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(h,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,n,i){const a=e+n/t,s=i?e+this.lastLevelLoadSec:0;return a+s}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,a=i.end-i.first;Xe(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===et.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=n?n.duration:t.duration,s=this.hls.levels[t.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const a={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered($.FRAG_BUFFERED,a),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,a=i!=null&&i.stats.loaded?i.stats:n.stats;if(a.aborted||this.ignoreFragment(n))return;const s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==et.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,t,e,0,i,1,1);if(a>-1)return a;const s=this.hls.firstLevel,o=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,a)&&s[e].loadError<=s[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:s}=n,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let f=a.abrBandWidthFactor,h=a.abrBandWidthUpFactor;if(c){const v=this.findBestLevel(l,s,i,c,0,f,h);if(v>=0)return this.rebufferNotice=-1,v}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!c){const v=this.bitrateTestDelay;v&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-v,this.info(`bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),f=h=1)}const g=this.findBestLevel(l,s,i,c,p,f,h);if(this.rebufferNotice!==g&&(this.rebufferNotice=g,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${g}`)),g>-1)return g;const y=n.levels[s],b=n.loadLevelObj;return b&&y?.bitrate<b.bitrate?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,a,s,o){var l;const c=i+a,f=this.lastLoadedFragLevel,h=f===-1?this.hls.firstLevel:f,{fragCurrent:p,partCurrent:g}=this,{levels:y,allAudioTracks:b,loadLevel:v,config:E}=this.hls;if(y.length===1)return 0;const S=y[h],w=!!((l=this.hls.latestLevelDetails)!=null&&l.live),A=v===-1||f===-1;let _,I="SDR",D=S?.frameRate||0;const{audioPreference:P,videoPreference:k}=E,M=this.audioTracksByGroup||(this.audioTracksByGroup=W5(b));let H=-1;if(A){if(this.firstSelection!==-1)return this.firstSelection;const K=this.codecTiers||(this.codecTiers=mme(y,M,t,n)),Y=pme(K,I,e,P,k),{codecSet:W,videoRanges:J,minFramerate:G,minBitrate:j,minIndex:F,preferHDR:Z}=Y;H=F,_=W,I=Z?J[J.length-1]:J[0],D=G,e=Math.max(e,j),this.log(`picked start tier ${Xt(Y)}`)}else _=S?.codecSet,I=S?.videoRange;const N=g?g.duration:p?p.duration:0,Q=this.bwEstimator.getEstimateTTFB()/1e3,z=[];for(let K=n;K>=t;K--){var V;const Y=y[K],W=K>h;if(!Y)continue;if(E.useMediaCapabilities&&!Y.supportedResult&&!Y.supportedPromise){const ee=navigator.mediaCapabilities;typeof ee?.decodingInfo=="function"&&ime(Y,M,I,D,e,P)?(Y.supportedPromise=Y5(Y,M,ee,this.supportedCache),Y.supportedPromise.then(ve=>{if(!this.hls)return;Y.supportedResult=ve;const le=this.hls.levels,ne=le.indexOf(Y);ve.error?this.warn(`MediaCapabilities decodingInfo error: "${ve.error}" for level ${ne} ${Xt(ve)}`):ve.supported?ve.decodingInfoResults.some(re=>re.smooth===!1||re.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${ne} not smooth or powerEfficient: ${Xt(ve)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ne} ${Xt(ve)}`),ne>-1&&le.length>1&&(this.log(`Removing unsupported level ${ne}`),this.hls.removeLevel(ne),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(ve=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${ve}`)})):Y.supportedResult=K5}if((_&&Y.codecSet!==_||I&&Y.videoRange!==I||W&&D>Y.frameRate||!W&&D>0&&D<Y.frameRate||(V=Y.supportedResult)!=null&&(V=V.decodingInfoResults)!=null&&V.some(ee=>ee.smooth===!1))&&(!A||K!==H)){z.push(K);continue}const J=Y.details,G=(g?J?.partTarget:J?.averagetargetduration)||N;let j;W?j=o*e:j=s*e;const F=N&&i>=N*2&&a===0?Y.averageBitrate:Y.maxBitrate,Z=this.getTimeToLoadFrag(Q,j,F*G,J===void 0);if(j>=F&&(K===f||Y.loadError===0&&Y.fragmentError===0)&&(Z<=Q||!Xe(Z)||w&&!this.bitrateTestDelay||Z<c)){const ee=this.forcedAutoLevel;return K!==v&&(ee===-1||ee!==v)&&(z.length&&this.trace(`Skipped level(s) ${z.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${y[z[0]].codecs}" ${y[z[0]].videoRange}; not compatible with "${_}" ${I}`),this.info(`switch candidate:${h}->${K} adjustedbw(${Math.round(j)})-bitrate=${Math.round(j-F)} ttfb:${Q.toFixed(1)} avgDuration:${G.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Z.toFixed(1)} firstSelection:${A} codecSet:${Y.codecSet} videoRange:${Y.videoRange} hls.loadLevel:${v}`)),A&&(this.firstSelection=K),K}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const V5={search:function(r,e){let t=0,n=r.length-1,i=null,a=null;for(;t<=n;){i=(t+n)/2|0,a=r[i];const s=e(a);if(s>0)t=i+1;else if(s<0)n=i-1;else return a}return null}};function xme(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Xe(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<r.length;++a){const s=r[a];if(Eme(e,t,s))return s}return null}function tu(r,e,t=0,n=0,i=.005){let a=null;if(r){a=e[1+r.sn-e[0].sn]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),a&&r.level!==a.level&&a.end<=r.end&&(a=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(a=e[0]);if(a&&((!r||r.level===a.level)&&rj(t,n,a)===0||Sme(a,r,Math.min(i,n))))return a;const s=V5.search(e,rj.bind(null,t,n));return s&&(s!==r||!a)?s:a}function Sme(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),t);return r.start<=n}return!1}function rj(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function Eme(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function Q5(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:i}=r;i&&(n=n.concat(i));let a;return V5.search(n,s=>s.cc<e?1:s.cc>e?-1:(a=s,s.end<=t?1:s.start>t?-1:0)),a||null}return null}function C0(r){switch(r.details){case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_TIMEOUT:case we.LEVEL_LOAD_TIMEOUT:case we.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function X5(r){return r.details.startsWith("key")}function Z5(r){return X5(r)&&!!r.frag&&!r.frag.decryptdata}function nj(r,e){const t=C0(e);return r.default[`${t?"timeout":"error"}Retry`]}function dD(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function ij(r){return Bt(Bt({},r),{errorRetry:null,timeoutRetry:null})}function R0(r,e,t,n){if(!r)return!1;const i=n?.code,a=e<r.maxNumRetry&&(wme(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,a):a}function wme(r){return RT(r)||!!r&&(r<400||r>499)}function RT(r){return r===0&&navigator.onLine===!1}var ln={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},hi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class _me extends Xi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($.ERROR,this.onError,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off($.ERROR,this.onError,this),e.off($.ERROR,this.onErrorOut,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===et.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(s=>i.indexOf(s.groupId)>=0).some(s=>{var o;return(o=s.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,a=t.context;switch(t.details){case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case we.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=yc();return}case we.FRAG_GAP:case we.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=ln.SendAlternateToPenaltyBox;return}case we.LEVEL_EMPTY_ERROR:case we.LEVEL_PARSING_ERROR:{var s;const l=t.parent===et.MAIN?t.level:i.loadLevel;t.details===we.LEVEL_EMPTY_ERROR&&((s=t.context)!=null&&(s=s.levelDetails)!=null&&s.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l))}return;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.SUBTITLE_LOAD_ERROR:case we.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const l=i.loadLevelObj;if(l&&(a.type===St.AUDIO_TRACK&&l.hasAudioGroup(a.groupId)||a.type===St.SUBTITLE_TRACK&&l.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=ln.SendAlternateToPenaltyBox,t.errorAction.flags=hi.MoveAllAlternatesMatchingHost;return}}return;case we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingHDCP};return;case we.KEY_SYSTEM_SESSION_UPDATE_FAILED:case we.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case we.KEY_SYSTEM_NO_SESSION:t.errorAction={action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingKey};return;case we.BUFFER_ADD_CODEC_ERROR:case we.REMUX_ALLOC_ERROR:case we.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:i.loadLevel)}return;case we.INTERNAL_EXCEPTION:case we.BUFFER_APPENDING_ERROR:case we.BUFFER_FULL_ERROR:case we.LEVEL_SWITCH_ERROR:case we.BUFFER_STALLED_ERROR:case we.BUFFER_SEEK_OVER_HOLE:case we.BUFFER_NUDGE_ON_STALL:t.errorAction=yc();return}t.type===at.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=yc())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=nj(n.config.playlistLoadPolicy,e),a=this.playlistError++;if(R0(i,a,C0(e),e.response))return{action:ln.RetryRequest,flags:hi.None,retryConfig:i,retryCount:a};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:a,keyLoadPolicy:s}=t.config,o=nj(X5(e)?s:a,e),l=t.levels.reduce((f,h)=>f+h.fragmentError,0);if(i&&(e.details!==we.FRAG_GAP&&i.fragmentError++,!Z5(e)&&R0(o,l,C0(e),e.response)))return{action:ln.RetryRequest,flags:hi.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var a,s;const c=e.details;i.loadError++,c===we.BUFFER_APPEND_ERROR&&i.fragmentError++;let f=-1;const{levels:h,loadLevel:p,minAutoLevel:g,maxAutoLevel:y}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const b=(a=e.frag)==null?void 0:a.type,E=(b===et.AUDIO&&c===we.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===we.BUFFER_ADD_CODEC_ERROR||c===we.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:I})=>i.audioCodec!==I),w=e.sourceBufferName==="video"&&(c===we.BUFFER_ADD_CODEC_ERROR||c===we.BUFFER_APPEND_ERROR)&&h.some(({codecSet:I,audioCodec:D})=>i.codecSet!==I&&i.audioCodec===D),{type:A,groupId:_}=(s=e.context)!=null?s:{};for(let I=h.length;I--;){const D=(I+p)%h.length;if(D!==p&&D>=g&&D<=y&&h[D].loadError===0){var o,l;const P=h[D];if(c===we.FRAG_GAP&&b===et.MAIN&&e.frag){const k=h[D].details;if(k){const M=tu(e.frag,k.fragments,e.frag.start);if(M!=null&&M.gap)continue}}else{if(A===St.AUDIO_TRACK&&P.hasAudioGroup(_)||A===St.SUBTITLE_TRACK&&P.hasSubtitleGroup(_))continue;if(b===et.AUDIO&&(o=i.audioGroups)!=null&&o.some(k=>P.hasAudioGroup(k))||b===et.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(k=>P.hasSubtitleGroup(k))||E&&i.audioCodec===P.audioCodec||w&&i.codecSet===P.codecSet||!E&&i.codecSet!==P.codecSet)continue}f=D;break}}if(f>-1&&n.loadLevel!==f)return e.levelRetry=!0,this.playlistError=0,{action:ln.SendAlternateToPenaltyBox,flags:hi.None,nextAutoLevel:f}}return{action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case ln.DoNothing:break;case ln.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==we.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,a=n.nextAutoLevel;switch(i){case hi.None:this.switchLevel(e,a);break;case hi.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),c=t.levels[l],f=c?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=f,f==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(f){t.maxHdcpLevel=CT[CT.indexOf(f)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case hi.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const c=this.hls.levels,f=c.length;for(let p=f;p--;)if(this.variantHasKey(c[p],l)){var s,o;this.log(`Banned key found in level ${p} (${c[p].bitrate}bps) or audio group "${(s=c[p].audioGroups)==null?void 0:s.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${un(l.keyId||[])}`),c[p].fragmentError++,c[p].loadError++,this.log(`Removing level ${p} with key error (${e.error})`),this.hls.removeLevel(p)}const h=e.frag;if(this.hls.levels.length<f)n.resolved=!0;else if(h&&h.type!==et.MAIN){const p=h.decryptdata;p&&!l.matches(p)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===we.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=IT(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${a} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(a))}}}function yc(r){const e={action:ln.DoNothing,flags:hi.None};return r&&(e.resolved=!0),e}var Ur={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Tme{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const a=n[i];if(!a)break;if(a.start<=e&&e<=a.end&&a.loaded)return a}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,a=Object.keys(i);for(let s=a.length;s--;){const o=i[a[s]];if(o?.body.type===t&&(!n||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,n,i,a){this.timeRanges&&(this.timeRanges[e]=t);const s=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||s>=l.body.sn)return;if(!l.buffered&&(!l.loaded||a)){l.body.type===n&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(f=>{const h=!this.isTimeBuffered(f.startPTS,f.endPTS,t);return h&&this.removeFragment(l.body),h})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=Ju(n),a=this.fragments[i];if(!a||a.buffered&&n.gap)return;const s=!n.relurl;Object.keys(t).forEach(o=>{const l=n.elementaryStreams[o];if(!l)return;const c=t[o],f=s||l.partial===!0;a.range[o]=this.getBufferedTimes(n,e.part,f,c)}),a.loaded=null,Object.keys(a.range).length?(this.bufferedEnd(a,n),hm(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=aj(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Ju(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,n,i){const a={time:[],partial:n},s=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||s;for(let f=0;f<i.length;f++){const h=i.start(f)-this.bufferPadding,p=i.end(f)+this.bufferPadding;if(c>=h&&l<=p){a.time.push({startPTS:Math.max(s,i.start(f)),endPTS:Math.min(o,i.end(f))});break}else if(s<p&&o>h){const g=Math.max(s,i.start(f)),y=Math.min(o,i.end(f));y>g&&(a.partial=!0,a.time.push({startPTS:g,endPTS:y}))}else if(o<=h)break}return a}getPartialFragment(e){let t=null,n,i,a,s=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const f=l[c];f&&hm(f)&&(i=f.body.start-o,a=f.body.end+o,e>=i&&e<=a&&(n=Math.min(e-i,a-e),s<=n&&(t=f.body,s=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||hm(t))}getState(e){const t=Ju(e),n=this.fragments[t];return n?n.buffered?hm(n)?Ur.PARTIAL:Ur.OK:Ur.APPENDING:Ur.NOT_LOADED}isTimeBuffered(e,t,n){let i,a;for(let s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,a=n.end(s)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,a=Ju(n);this.fragments[a]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:a,type:s}=t;if(n.sn==="initSegment")return;const o=n.type;if(i){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(i)}this.timeRanges=a;const l=a[s];this.detectEvictedFragments(s,l,o,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Ju(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const a=t[n[i]];if(a?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const o=this.fragments[s];if(!o)return;const l=o.body;l.type!==n||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||a)&&this.removeFragment(l)})}removeFragment(e){const t=Ju(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=aj(n,a=>a.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function hm(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function Ju(r){return`${r.type}_${r.level}_${r.sn}`}function aj(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var Zo={cbc:0,ctr:1};class Ame{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Zo.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Zo.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Dme(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class Ome{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],a=n[1],s=n[2],o=n[3],l=this.invSubMix,c=l[0],f=l[1],h=l[2],p=l[3],g=new Uint32Array(256);let y=0,b=0,v=0;for(v=0;v<256;v++)v<128?g[v]=v<<1:g[v]=v<<1^283;for(v=0;v<256;v++){let E=b^b<<1^b<<2^b<<3^b<<4;E=E>>>8^E&255^99,e[y]=E,t[E]=y;const S=g[y],w=g[S],A=g[w];let _=g[E]*257^E*16843008;i[y]=_<<24|_>>>8,a[y]=_<<16|_>>>16,s[y]=_<<8|_>>>24,o[y]=_,_=A*16843009^w*65537^S*257^y*16843008,c[E]=_<<24|_>>>8,f[E]=_<<16|_>>>16,h[E]=_<<8|_>>>24,p[E]=_,y?(y=S^g[g[g[A^S]]],b^=g[g[b]]):y=b=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const a=this.keySize=t.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const s=this.ksRows=(a+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(s),f=this.invKeySchedule=new Uint32Array(s),h=this.sBox,p=this.rcon,g=this.invSubMix,y=g[0],b=g[1],v=g[2],E=g[3];let S,w;for(o=0;o<s;o++){if(o<a){S=c[o]=t[o];continue}w=S,o%a===0?(w=w<<8|w>>>24,w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255],w^=p[o/a|0]<<24):a>6&&o%a===4&&(w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255]),c[o]=S=(c[o-a]^w)>>>0}for(l=0;l<s;l++)o=s-l,l&3?w=c[o]:w=c[o-4],l<4||o<=4?f[l]=w:f[l]=y[h[w>>>24]]^b[h[w>>>16&255]]^v[h[w>>>8&255]]^E[h[w&255]],f[l]=f[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],f=o[2],h=o[3],p=this.uint8ArrayToUint32Array_(n);let g=p[0],y=p[1],b=p[2],v=p[3];const E=new Int32Array(e),S=new Int32Array(E.length);let w,A,_,I,D,P,k,M,H,N,Q,z,V,K;const Y=this.networkToHostOrderSwap;for(;t<E.length;){for(H=Y(E[t]),N=Y(E[t+1]),Q=Y(E[t+2]),z=Y(E[t+3]),D=H^a[0],P=z^a[1],k=Q^a[2],M=N^a[3],V=4,K=1;K<i;K++)w=l[D>>>24]^c[P>>16&255]^f[k>>8&255]^h[M&255]^a[V],A=l[P>>>24]^c[k>>16&255]^f[M>>8&255]^h[D&255]^a[V+1],_=l[k>>>24]^c[M>>16&255]^f[D>>8&255]^h[P&255]^a[V+2],I=l[M>>>24]^c[D>>16&255]^f[P>>8&255]^h[k&255]^a[V+3],D=w,P=A,k=_,M=I,V=V+4;w=s[D>>>24]<<24^s[P>>16&255]<<16^s[k>>8&255]<<8^s[M&255]^a[V],A=s[P>>>24]<<24^s[k>>16&255]<<16^s[M>>8&255]<<8^s[D&255]^a[V+1],_=s[k>>>24]<<24^s[M>>16&255]<<16^s[D>>8&255]<<8^s[P&255]^a[V+2],I=s[M>>>24]<<24^s[D>>16&255]<<16^s[P>>8&255]<<8^s[k&255]^a[V+3],S[t]=Y(w^g),S[t+1]=Y(I^y),S[t+2]=Y(_^b),S[t+3]=Y(A^v),g=H,y=N,b=Q,v=z,t=t+4}return S.buffer}}class Ime{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=Cme(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Cme(r){switch(r){case Zo.cbc:return"AES-CBC";case Zo.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const Rme=16;class hD{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Dme(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((a,s)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,n,i);const l=this.flush();l?a(l.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:a,currentResult:s,remainderData:o}=this;if(i!==Zo.cbc||t.byteLength!==16)return $t.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Vi(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;a&&(n=a);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Ome),c.expandKey(t);const f=s;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,f||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new Ime(this.subtle,t,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Ame(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>($t.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%Rme;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&($t.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const sj=Math.pow(2,17);class Pme{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){l(lj(e));return}else e.gap=!1;const c=this.loader=a?new a(i):new s(i),f=oj(e);e.loader=c;const h=ij(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:sj};e.stats=c.stats;const g={onSuccess:(y,b,v,E)=>{this.resetLoader(e,c);let S=y.data;v.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),o({frag:e,part:null,payload:S,networkDetails:E})},onError:(y,b,v,E)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Bt({url:n,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:v,stats:E}))},onAbort:(y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:v,stats:y}))},onTimeout:(y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:v,stats:y}))}};t&&(g.onProgress=(y,b,v,E)=>t({frag:e,part:null,payload:v,networkDetails:E})),c.load(f,p,g)})}loadPart(e,t,n){this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(lj(e,t));return}const c=this.loader=a?new a(i):new s(i),f=oj(e,t);e.loader=c;const h=ij(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:sj};t.stats=c.stats,c.load(f,p,{onSuccess:(g,y,b,v)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const E={frag:e,part:t,payload:g.data,networkDetails:v};n(E),o(E)},onError:(g,y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Bt({url:f.url,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:b,stats:v}))},onAbort:(g,y,b)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:g}))},onTimeout:(g,y,b)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:b,stats:g}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,a=i.total;if(n.loaded+=i.loaded,a){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/a),l),h=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+h}else n.total=Math.max(n.loaded,n.total);const s=n.loading,o=i.loading;s.start?s.first+=o.first-o.start:(s.start=o.start,s.first=o.first),s.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function oj(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,a=t.byteRangeEndOffset;if(Xe(i)&&Xe(a)){var s;let o=i,l=a;if(r.sn==="initSegment"&&Lme((s=r.decryptdata)==null?void 0:s.method)){const c=a-i;c%16&&(l=a+(16-c%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=l}return n}function lj(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:at.MEDIA_ERROR,details:we.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new bs(n)}function Lme(r){return r==="AES-128"||r==="AES-256"}class bs extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class J5 extends Xi{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class pD{constructor(e,t,n,i=0,a=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=pm(),this.buffering={audio:pm(),video:pm(),audiovideo:pm()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=a,this.partial=s}}function pm(){return{start:0,executeStart:0,executeEnd:0,end:0}}const uj={length:0,start:()=>0,end:()=>0};class pt{static isBuffered(e,t){if(e){const n=pt.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=pt.getBuffered(e);return pt.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=pt.bufferedRanges(e);if(i.length)return pt.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((f,h)=>f.start-h.start||h.end-f.end);let i=-1,a=[];if(n)for(let f=0;f<e.length;f++){t>=e[f].start&&t<=e[f].end&&(i=f);const h=a.length;if(h){const p=a[h-1].end;e[f].start-p<n?e[f].end>p&&(a[h-1].end=e[f].end):a.push(e[f])}else a.push(e[f])}else a=e;let s=0,o,l=t,c=t;for(let f=0;f<a.length;f++){const h=a[f].start,p=a[f].end;if(i===-1&&t>=h&&t<=p&&(i=f),t+n>=h&&t<p)l=h,c=p,s=c-t;else if(t+n<h){o=h;break}}return{len:s,start:l||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||uj}catch(t){return $t.log("failed to get media.buffered",t),uj}}}const e8=/\{\$([a-zA-Z0-9-_]+)\}/g;function cj(r){return e8.test(r)}function PT(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(e8,n=>{const i=n.substring(2,n.length-1),a=t?.[i];return a===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):a})}return e}function fj(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(t).searchParams;if(s.has(i))a=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(s){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,a=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=a||""}function kme(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const Mme=/^(\d+)x(\d+)$/,dj=/(.+?)=(".*?"|.*?)(?:,|$)/g;class fr{constructor(e,t){typeof e=="string"&&(e=fr.parseAttrList(e,t)),Yt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Mme.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={};for(dj.lastIndex=0;(n=dj.exec(e))!==null;){const s=n[1].trim();let o=n[2];const l=o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1;let c=!1;if(l)o=o.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(l||c))o=PT(t,o);else if(!c&&!l)switch(s){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":$t.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=o}return i}}const Nme="com.apple.hls.interstitial";function jme(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function Fme(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class t8{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(i=t?.tagOrder)!=null?i:n,t){const a=t.attr;for(const s in a)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==a[s]){$t.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=Yt(new fr({}),a,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=t?.endDate||new Date(this.attr["END-DATE"]);Xe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?($t.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Nme}get isValid(){return!!this.id&&!this._badValueForSameId&&Xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Bme=10;class Ume{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Bme}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function P0(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function hj(r,e){return!r&&!e?!0:!r||!e?!1:P0(r,e)}function vc(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function mD(r){switch(r){case"AES-128":case"AES-256":return Zo.cbc;case"AES-256-CTR":return Zo.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function gD(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function LT(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function $me(r){const e=LT(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function r8(r){const e=function(n,i,a){const s=n[i];n[i]=n[a],n[a]=s};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function n8(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const a=i[0]==="base64",s=i[1];a?(n.splice(-1,1),t=gD(s)):t=$me(s)}}return t}const L0=typeof self<"u"?self:void 0;var dr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function dg(r){switch(r){case cn.FAIRPLAY:return dr.FAIRPLAY;case cn.PLAYREADY:return dr.PLAYREADY;case cn.WIDEVINE:return dr.WIDEVINE;case cn.CLEARKEY:return dr.CLEARKEY}}function ZS(r){switch(r){case dr.FAIRPLAY:return cn.FAIRPLAY;case dr.PLAYREADY:return cn.PLAYREADY;case dr.WIDEVINE:return cn.WIDEVINE;case dr.CLEARKEY:return cn.CLEARKEY}}function pd(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[dr.FAIRPLAY,dr.WIDEVINE,dr.PLAYREADY,dr.CLEARKEY].filter(i=>!!e[i]):[];return!n[dr.WIDEVINE]&&t&&n.push(dr.WIDEVINE),n}const i8=(function(r){return L0!=null&&(r=L0.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function Hme(r,e,t,n){let i;switch(r){case dr.FAIRPLAY:i=["cenc","sinf"];break;case dr.WIDEVINE:case dr.PLAYREADY:i=["cenc"];break;case dr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return Gme(i,e,t,n)}function Gme(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Kme(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function a8(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(s){const o=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(o){const l=gD(o).subarray(0,16);return r8(l),l}}return null}let ec={};class zo{static clearKeyUriToKeyIdMap(){ec={}}static setKeyIdForUri(e,t){ec[e]=t}static addKeyIdForUri(e){const t=Object.keys(ec).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,t),ec[e]=n,n}constructor(e,t,n,i=[1],a=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!vc(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(L5(s)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&P0(e.keyFormatVersions,this.keyFormatVersions)&&hj(e.iv,this.iv)&&hj(e.keyId,this.keyId)}isSupported(){if(this.method){if(vc(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case cn.FAIRPLAY:case cn.WIDEVINE:case cn.PLAYREADY:case cn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(vc(this.method)){let a=this.iv;return a||(typeof e!="number"&&($t.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),a=Yme(e)),new zo(this.method,this.uri,"identity",this.keyFormatVersions,a)}if(this.keyId){const a=ec[this.uri];if(a&&!P0(this.keyId,a)&&zo.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=n8(this.uri);if(n)switch(this.keyFormat){case cn.WIDEVINE:if(this.pssh=n,!this.keyId){const a=Vpe(n.buffer);if(a.length){var i;const s=a[0];this.keyId=(i=s.kids)!=null&&i.length?s.kids[0]:null}}this.keyId||(this.keyId=pj(t));break;case cn.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Wpe(a,null,n),this.keyId=a8(n);break}default:{let a=n.subarray(0,16);if(a.length!==16){const s=new Uint8Array(16);s.set(a,16-a.length),a=s}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a;a=zme(t),a||(a=pj(t),a||(a=ec[this.uri])),a&&(this.keyId=a,zo.setKeyIdForUri(this.uri,a))}return this}}function zme(r){const e=r?.[cn.WIDEVINE];return e?e.keyId:null}function pj(r){const e=r?.[cn.PLAYREADY];if(e){const t=n8(e.uri);if(t)return a8(t)}return null}function Yme(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const mj=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,gj=/#EXT-X-MEDIA:(.*)/g,qme=/^#EXT(?:INF|-X-TARGETDURATION):/m,JS=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Wme=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ka{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return oD.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return qme.test(e)}static parseMasterPlaylist(e,t){const n=cj(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},a=[];if(mj.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let s;for(;(s=mj.exec(e))!=null;)if(s[1]){var o;const c=new fr(s[1],i),f=PT(i,s[2]),h={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:ka.resolve(f,t)},p=c.decimalResolution("RESOLUTION");p&&(h.width=p.width,h.height=p.height),bj(c.CODECS,h);const g=c["SUPPLEMENTAL-CODECS"];g&&(h.supplemental={},bj(g,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||a.push(h),i.levels.push(h)}else if(s[3]){const c=s[3],f=s[4];switch(c){case"SESSION-DATA":{const h=new fr(f,i),p=h["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=h);break}case"SESSION-KEY":{const h=yj(f,t,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):$t.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${f}"`);break}case"DEFINE":{{const h=new fr(f,i);fj(i,h,t)}break}case"CONTENT-STEERING":{const h=new fr(f,i);i.contentSteering={uri:ka.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=vj(f);break}}}const l=a.length>0&&a.length<i.levels.length;return i.levels=l?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const a={},s=n.levels,o={AUDIO:s.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:s.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(gj.lastIndex=0;(i=gj.exec(e))!==null;){const c=new fr(i[1],n),f=c.TYPE;if(f){const h=o[f],p=a[f]||[];a[f]=p;const g=c.LANGUAGE,y=c["ASSOC-LANGUAGE"],b=c.CHANNELS,v=c.CHARACTERISTICS,E=c["INSTREAM-ID"],S={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||g||"",type:f,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:g,url:c.URI?ka.resolve(c.URI,t):""};if(y&&(S.assocLang=y),b&&(S.channels=b),v&&(S.characteristics=v),E&&(S.instreamId=E),h!=null&&h.length){const w=ka.findGroup(h,S.groupId)||h[0];xj(S,w,"audioCodec"),xj(S,w,"textCodec")}p.push(S)}}return a}static parseLevelPlaylist(e,t,n,i,a,s){var o;const l={url:t},c=new Ume(t),f=c.fragments,h=[];let p=null,g=0,y=0,b=0,v=0,E=0,S=null,w=new VS(i,l),A,_,I,D=-1,P=!1,k=null,M;if(JS.lastIndex=0,c.m3u8=e,c.hasVariableRefs=cj(e),((o=JS.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(A=JS.exec(e))!==null;){P&&(P=!1,w=new VS(i,l),w.playlistOffset=b,w.setStart(b),w.sn=g,w.cc=v,E&&(w.bitrate=E),w.level=n,p&&(w.initSegment=p,p.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),k&&(w.setByteRange(k),k=null)));const z=A[1];if(z){w.duration=parseFloat(z);const V=(" "+A[2]).slice(1);w.title=V||null,w.tagList.push(V?["INF",z,V]:["INF",z])}else if(A[3]){if(Xe(w.duration)){w.playlistOffset=b,w.setStart(b),I&&Ej(w,I,c),w.sn=g,w.level=n,w.cc=v,f.push(w);const V=(" "+A[3]).slice(1);w.relurl=PT(c,V),kT(w,S,h),S=w,b+=w.duration,g++,y=0,P=!0}}else{if(A=A[0].match(Wme),!A){$t.warn("No matches on slow regex match for level playlist!");continue}for(_=1;_<A.length&&A[_]===void 0;_++);const V=(" "+A[_]).slice(1),K=(" "+A[_+1]).slice(1),Y=A[_+2]?(" "+A[_+2]).slice(1):null;switch(V){case"BYTERANGE":S?w.setByteRange(K,S):w.setByteRange(K);break;case"PROGRAM-DATE-TIME":w.rawProgramDateTime=K,w.tagList.push(["PROGRAM-DATE-TIME",K]),D===-1&&(D=f.length);break;case"PLAYLIST-TYPE":c.type&&ms(c,V,A),c.type=K.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?ms(c,V,A):f.length>0&&wj(c,V,A),g=c.startSN=parseInt(K);break;case"SKIP":{c.skippedSegments&&ms(c,V,A);const W=new fr(K,c),J=W.decimalInteger("SKIPPED-SEGMENTS");if(Xe(J)){c.skippedSegments+=J;for(let j=J;j--;)f.push(null);g+=J}const G=W.enumeratedString("RECENTLY-REMOVED-DATERANGES");G&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(G.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&ms(c,V,A),c.targetduration=Math.max(parseInt(K),1);break;case"VERSION":c.version!==null&&ms(c,V,A),c.version=parseInt(K);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||ms(c,V,A),c.live=!1;break;case"#":(K||Y)&&w.tagList.push(Y?[K,Y]:[K]);break;case"DISCONTINUITY":v++,w.tagList.push(["DIS"]);break;case"GAP":w.gap=!0,w.tagList.push([V]);break;case"BITRATE":w.tagList.push([V,K]),E=parseInt(K)*1e3,Xe(E)?w.bitrate=E:E=0;break;case"DATERANGE":{const W=new fr(K,c),J=new t8(W,c.dateRanges[W.ID],c.dateRangeTagCount);c.dateRangeTagCount++,J.isValid||c.skippedSegments?c.dateRanges[J.id]=J:$t.warn(`Ignoring invalid DATERANGE tag: "${K}"`),w.tagList.push(["EXT-X-DATERANGE",K]);break}case"DEFINE":{{const W=new fr(K,c);"IMPORT"in W?kme(c,W,s):fj(c,W,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?ms(c,V,A):f.length>0&&wj(c,V,A),c.startCC=v=parseInt(K);break;case"KEY":{const W=yj(K,t,c);if(W.isSupported()){if(W.method==="NONE"){I=void 0;break}I||(I={});const J=I[W.keyFormat];J!=null&&J.matches(W)||(J&&(I=Yt({},I)),I[W.keyFormat]=W)}else $t.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${K}"`);break}case"START":c.startTimeOffset=vj(K);break;case"MAP":{const W=new fr(K,c);if(w.duration){const J=new VS(i,l);Sj(J,W,n,I),p=J,w.initSegment=p,p.rawProgramDateTime&&!w.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime)}else{const J=w.byteRangeEndOffset;if(J){const G=w.byteRangeStartOffset;k=`${J-G}@${G}`}else k=null;Sj(w,W,n,I),p=w,P=!0}p.cc=v;break}case"SERVER-CONTROL":{M&&ms(c,V,A),M=new fr(K),c.canBlockReload=M.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=M.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&M.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=M.optionalFloat("PART-HOLD-BACK",0),c.holdBack=M.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&ms(c,V,A);const W=new fr(K);c.partTarget=W.decimalFloatingPoint("PART-TARGET");break}case"PART":{let W=c.partList;W||(W=c.partList=[]);const J=y>0?W[W.length-1]:void 0,G=y++,j=new fr(K,c),F=new kpe(j,w,l,G,J);W.push(F),w.duration+=F.duration;break}case"PRELOAD-HINT":{const W=new fr(K,c);c.preloadHint=W;break}case"RENDITION-REPORT":{const W=new fr(K,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(W);break}default:$t.warn(`line parsed but not handled: ${A}`);break}}}S&&!S.relurl?(f.pop(),b-=S.duration,c.partList&&(c.fragmentHint=S)):c.partList&&(kT(w,S,h),w.cc=v,c.fragmentHint=w,I&&Ej(w,I,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const H=f.length,N=f[0],Q=f[H-1];if(b+=c.skippedSegments*c.targetduration,b>0&&H&&Q){c.averagetargetduration=b/H;const z=Q.sn;c.endSN=z!=="initSegment"?z:0,c.live||(Q.endList=!0),D>0&&(Qme(f,D),N&&h.unshift(N))}return c.fragmentHint&&(b+=c.fragmentHint.duration),c.totalduration=b,h.length&&c.dateRangeTagCount&&N&&s8(h,c),c.endCC=v,c}}function s8(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];r.push(o),t++}else return;const n=r[t-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let o=a.length;o--;){const l=e.dateRanges[a[o]],c=l.startDate.getTime();l.tagAnchor=n.ref;for(let f=t;f--;){var s;if(((s=r[f])==null?void 0:s.sn)<e.startSN)break;const h=Vme(e,c,r,f,i);if(h!==-1){l.tagAnchor=e.fragments[h].ref;break}}}}function Vme(r,e,t,n,i){const a=t[n];if(a){const o=a.programDateTime;if(e>=o||n===0){var s;const l=(((s=t[n+1])==null?void 0:s.start)||i)-a.start;if(e<=o+l*1e3){const c=t[n].sn-r.startSN;if(c<0)return-1;const f=r.fragments;if(f.length>t.length){const p=(t[n+1]||f[f.length-1]).sn-r.startSN;for(let g=p;g>c;g--){const y=f[g].programDateTime;if(e>=y&&e<y+f[g].duration*1e3)return g}}return c}}}return-1}function yj(r,e,t){var n,i;const a=new fr(r,t),s=(n=a.METHOD)!=null?n:"",o=a.URI,l=a.hexadecimalInteger("IV"),c=a.KEYFORMATVERSIONS,f=(i=a.KEYFORMAT)!=null?i:"identity";o&&a.IV&&!l&&$t.error(`Invalid IV: ${a.IV}`);const h=o?ka.resolve(o,e):"",p=(c||"1").split("/").map(Number).filter(Number.isFinite);return new zo(s,h,f,p,l,a.KEYID)}function vj(r){const t=new fr(r).decimalFloatingPoint("TIME-OFFSET");return Xe(t)?t:null}function bj(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(a=>cD(a,n));i.length&&(e[`${n}Codec`]=i.map(a=>a.split("/")[0]).join(","),t=t.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=t}function xj(r,e,t){const n=e[t];n&&(r[t]=n)}function Qme(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function kT(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function Sj(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function Ej(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}function ms(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function wj(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function eE(r,e){const t=e.startPTS;if(Xe(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function o8(r,e,t,n,i,a,s){n-t<=0&&(s.warn("Fragment should have a positive duration",e),n=t+e.duration,a=i+e.duration);let l=t,c=n;const f=e.startPTS,h=e.endPTS;if(Xe(f)){const E=Math.abs(f-t);r&&E>r.totalduration?s.warn(`media timestamps and playlist times differ by ${E}s for level ${e.level} ${r.url}`):Xe(e.deltaPTS)?e.deltaPTS=Math.max(E,e.deltaPTS):e.deltaPTS=E,l=Math.max(t,f),t=Math.min(t,f),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,c=Math.min(n,h),n=Math.max(n,h),a=e.endDTS!==void 0?Math.max(a,e.endDTS):a}const p=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=l,e.startDTS=i,e.endPTS=n,e.minEndPTS=c,e.endDTS=a;const g=e.sn;if(!r||g<r.startSN||g>r.endSN)return 0;let y;const b=g-r.startSN,v=r.fragments;for(v[b]=e,y=b;y>0;y--)eE(v[y],v[y-1]);for(y=b;y<v.length-1;y++)eE(v[y],v[y+1]);return r.fragmentHint&&eE(v[v.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,p}function Xme(r,e,t){if(r===e)return;let n=null;const i=r.fragments;for(let f=i.length-1;f>=0;f--){const h=i[f].initSegment;if(h){n=h;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let a;ege(r,e,(f,h,p,g)=>{if((!e.startCC||e.skippedSegments)&&h.cc!==f.cc){const y=f.cc-h.cc;for(let b=p;b<g.length;b++)g[b].cc+=y;e.endCC=g[g.length-1].cc}Xe(f.startPTS)&&Xe(f.endPTS)&&(h.setStart(h.startPTS=f.startPTS),h.startDTS=f.startDTS,h.maxStartPTS=f.maxStartPTS,h.endPTS=f.endPTS,h.endDTS=f.endDTS,h.minEndPTS=f.minEndPTS,h.setDuration(f.endPTS-f.startPTS),h.duration&&(a=h),e.PTSKnown=e.alignedSliding=!0),f.hasStreams&&(h.elementaryStreams=f.elementaryStreams),h.loader=f.loader,f.hasStats&&(h.stats=f.stats),f.initSegment&&(h.initSegment=f.initSegment,n=f.initSegment)});const s=e.fragments,o=e.fragmentHint?s.concat(e.fragmentHint):s;if(n&&o.forEach(f=>{var h;f&&(!f.initSegment||f.initSegment.relurl===((h=n)==null?void 0:h.relurl))&&(f.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(f=>!f),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let f=e.skippedSegments;f--;)s.shift();e.startSN=s[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=Zme(r.dateRanges,e,t));const f=r.fragments.filter(h=>h.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let h=1;h<o.length;h++)o[h].programDateTime===null&&kT(o[h],o[h-1],f);s8(f,e)}e.endCC=s[s.length-1].cc}if(!e.startCC){var l;const f=c8(r,e.startSN-1);e.startCC=(l=f?.cc)!=null?l:s[0].cc}Jme(r.partList,e.partList,(f,h)=>{h.elementaryStreams=f.elementaryStreams,h.stats=f.stats}),a?o8(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS,t):l8(r,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const f=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=f),e.driftEndTime=c,e.driftEnd=f}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function Zme(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:i}=e,a=Yt({},r);i&&i.forEach(l=>{delete a[l]});const o=Object.keys(a).length;return o?(Object.keys(n).forEach(l=>{const c=a[l],f=new t8(n[l].attr,c);f.isValid?(a[l]=f,c||(f.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Xt(n[l].attr)}"`)}),a):n}function Jme(r,e,t){if(r&&e){let n=0;for(let i=0,a=r.length;i<=a;i++){const s=r[i],o=e[i+n];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?t(s,o):n--}}}function ege(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,a=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,s=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=i;c<=a;c++){const f=l[s+c];let h=o[c];if(n&&!h&&f&&(h=e.fragments[c]=f),f&&h){t(f,h,c,o);const p=f.relurl,g=h.relurl;if(p&&tge(p,g)){e.playlistParsingError=_j(`media sequence mismatch ${h.sn}:`,r,e,f,h);return}else if(f.cc!==h.cc){e.playlistParsingError=_j(`discontinuity sequence mismatch (${f.cc}!=${h.cc})`,r,e,f,h);return}}}}function _j(r,e,t,n,i){return new Error(`${r} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function l8(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,i=r.fragments,a=n>=0;let s=0;if(a&&n<i.length)s=i[n].start;else if(a&&e.startSN===r.endSN+1)s=r.fragmentEnd;else if(a&&t)s=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=r.fragmentStart;else return;MT(e,s)}function MT(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function u8(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const a=n[n.length-1].duration*1e3;a<t&&(t=a)}}else t/=2;return Math.round(t)}function c8(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function Tj(r,e,t){return r?f8(r.partList,e,t):null}function f8(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function d8(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function tge(r,e){return r!==e&&e?Aj(r)!==Aj(e):!1}function Aj(r){return r.replace(/\?[^?]*$/,"")}function vd(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function rge(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function Dj(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function h8(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)Dj(t[n],r);e.fragmentHint&&Dj(e.fragmentHint,r),e.alignedSliding=!0}function nge(r,e){r&&(p8(e,r),e.alignedSliding||k0(e,r),!e.alignedSliding&&!e.skippedSegments&&l8(r,e,!1))}function p8(r,e){if(!rge(e,r))return;const t=Math.min(e.endCC,r.endCC),n=vd(e.fragments,t),i=vd(r.fragments,t);if(!n||!i)return;$t.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const a=n.start-i.start;h8(a,r)}function k0(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,a;const s=Math.min(e.endCC,r.endCC);e.startCC<s&&r.startCC<s&&(i=vd(n,s),a=vd(t,s)),(!i||!a)&&(i=n[Math.floor(n.length/2)],a=vd(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,l=a.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(a.start-i.start);h8(c,r)}function Pn(r,e,t){Jn(r,e,t),r.addEventListener(e,t)}function Jn(r,e,t){r.removeEventListener(e,t)}const ige={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},Ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class yD extends J5{constructor(e,t,n,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ge.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:o,media:l,mediaBuffer:c,state:f}=this,h=l?l.currentTime:0,p=pt.bufferInfo(c||l,h,s.maxBufferHole),g=!p.len;if(this.log(`Media seeking to ${Xe(h)?h.toFixed(3):h}, state: ${f}, ${g?"out of":"in"} buffer`),this.state===Ge.ENDED)this.resetLoadingState();else if(o){const y=s.maxFragLookUpTolerance,b=o.start-y,v=o.start+o.duration+y;if(g||v<p.start||b>p.end){const E=h>v;(h<b||E)&&(E&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(h>y&&(this.lastCurrentTime=h),!this.loadingParts){const b=Math.max(p.end,h),v=this.shouldLoadParts(this.getLevelDetails(),b);v&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${b.toFixed(2)}`),this.loadingParts=v)}}this.hls.hasEnoughToStart||(this.log(`Setting ${g?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,g&&(this.startPosition=h)),g&&this.state===Ge.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Pme(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new hD(e.config)}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Ge.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ge.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=pt.bufferedInfo(a,e.start,0));const s=e.nextStart;if(s&&s>i&&s<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const f=l[l.length-1];return pt.isBuffered(this.media,f.start+f.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Pn(n,"seeking",this.onMediaSeeking),Pn(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Ge.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Jn(i,"seeking",this.onMediaSeeking),Jn(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Ge.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=a=>{const s=a.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(s,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,t,n,i).then(a=>{if(!a)return;const s=this.state,o=a.frag;if(this.fragContextChanged(o)){(s===Ge.FRAG_LOADING||!this.fragCurrent&&s===Ge.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=Ge.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger($.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(`Frag error: ${a?.message||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Ur.APPENDING){const a=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,s?s.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ur.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger($.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:a,payload:s}=n,o=a.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&vc(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer,mD(o.method)).catch(c=>{throw i.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:a}),c}).then(c=>{const f=self.performance.now();return i.trigger($.FRAG_DECRYPTED,{frag:a,payload:c,stats:{tstart:l,tdecrypt:f}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Ge.STOPPED&&(this.state=Ge.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,i;const a=e.tracks;if(a&&!t.encrypted&&((n=a.audio)!=null&&n.encrypted||(i=a.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const s=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${s?"attached mediaKeys: "+s.mediaKeys:"detached"})`);return this.warn(o.message),!s||s.mediaKeys?!1:(this.hls.trigger($.ERROR,{type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?ige.toString(pt.getBuffered(n)):"(detached)"})`),_r(e)){var i;if(e.type!==et.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(o=>!!s[o])){this.state=Ge.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=Ge.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:a}=e,s=!a||a.length===0||a.some(l=>!l),o=new pD(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!s);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var a;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;if(e.encrypted&&!((a=e.decryptdata)!=null&&a.key)){if(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Ge.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(p=>{if(!this.fragContextChanged(p.frag))return this.hls.trigger($.KEY_LOADED,p),this.state===Ge.KEY_LOADING&&(this.state=Ge.IDLE),p}),this.hls.trigger($.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(_r(e)&&(!l||e.sn!==l.sn)){const p=this.shouldLoadParts(t.details,e.end);p!==this.loadingParts&&(this.log(`LL-Part loading ${p?"ON":"OFF"} loading sn ${l?.sn}->${e.sn}`),this.loadingParts=p)}if(n=Math.max(e.start,n||0),this.loadingParts&&_r(e)){const p=s.partList;if(p&&i){n>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const g=this.getNextPart(p,e,n);if(g>-1){const y=p[g];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${g}/${p.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=Ge.FRAG_LOADING;let b;return o?b=o.then(v=>!v||this.fragContextChanged(v.frag)?null:this.doFragPartsLoad(e,y,t,i)).catch(v=>this.handleFragLoadError(v)):b=this.doFragPartsLoad(e,y,t,i).catch(v=>this.handleFragLoadError(v)),this.hls.trigger($.FRAG_LOADING,{frag:e,part:y,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):b}else if(!e.url||this.loadedEndOfParts(p,n))return Promise.resolve(null)}}if(_r(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=s.partList)==null?void 0:c.filter(p=>p.loaded).map(p=>`[${p.start}-${p.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ge.FRAG_LOADING;const f=this.config.progressive&&e.type!==et.SUBTITLE;let h;return f&&o?h=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.fragmentLoader.load(e,i)).catch(p=>this.handleFragLoadError(p)):h=Promise.all([this.fragmentLoader.load(e,f?i:void 0),o]).then(([p])=>(!f&&i&&i(p),p)).catch(p=>this.handleFragLoadError(p)),this.hls.trigger($.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(e,t,n,i){return new Promise((a,s)=>{var o;const l=[],c=(o=n.details)==null?void 0:o.partList,f=h=>{this.fragmentLoader.loadPart(e,h,i).then(p=>{l[h.index]=p;const g=p.part;this.hls.trigger($.FRAG_LOADED,p);const y=Tj(n.details,e.sn,h.index+1)||f8(c,e.sn,h.index+1);if(y)f(y);else return a({frag:e,part:g,partsLoaded:l})}).catch(s)};f(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===we.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===at.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger($.ERROR,t)}else this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Ge.PARSING){!this.fragCurrent&&this.state!==Ge.STOPPED&&this.state!==Ge.ERROR&&(this.state=Ge.IDLE);return}const{frag:n,part:i,level:a}=t,s=self.performance.now();n.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const o=this.getLevelDetails(),c=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(n,i,a,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const a=e.partList[0];if(a.fragment.type===et.SUBTITLE)return!1;const s=a.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:a,part:s}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=t[i],l=o.details,c=s>-1?Tj(l,a,s):null,f=c?c.fragment:c8(l,a,n);return f?(n&&n!==f&&(f.stats=n.stats),{frag:f,part:c,level:o}):null}bufferFragmentData(e,t,n,i,a){if(this.state!==Ge.PARSING)return;const{data1:s,data2:o}=e;let l=s;if(o&&(l=Vi(s,o)),!l.length)return;const c=this.initPTS[t.cc],f=c?-c.baseTime/c.timescale:void 0,h={type:e.type,frag:t,part:n,chunkMeta:i,offset:f,parent:t.type,data:l};if(this.hls.trigger($.BUFFER_APPENDING,h),e.dropped&&e.independent&&!n){if(a)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!pt.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=pt.bufferInfo(t,n,0),a=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-s,i.end-s),n+s);e.start-o>s&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!Xe(i))return null;const s=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,s)}getFwdBufferInfoAtPos(e,t,n,i){const a=pt.bufferInfo(e,t,i);if(a.len===0&&a.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&(a.nextStart<=s.end||s.gap)){const o=Math.max(Math.min(a.nextStart,s.end)-t,i);return pt.bufferInfo(e,t,o)}}return a}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),a=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return a>=i?(n.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,t=et.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:a}=this,s=n[0].start,o=a.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const h=a.initialLiveManifestSize;if(i<h)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${h})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);const p=this.hls.startPosition,g=this.hls.liveSyncPosition,y=l?(p!==-1&&p>=s?p:g)||l.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${g} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=s&&(l=n[0]);if(!l){const h=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,h,t)}let f=this.filterReplacedPrimary(l,t);if(!f&&l){const h=l.sn-t.startSN;f=this.filterReplacedPrimary(n[h+1]||null,t)}return this.mapToInitFragWhenRequired(f)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Ur.OK||n===Ur.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,a){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(o!==null&&n.len+o.len>=a){const l=s.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(Oj(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(Oj(this.config)&&e.type!==et.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&t?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=n?.playerQueue;if(a)for(let s=a.length;s--;){const o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,a=!1,s=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(s=s&&!c.independent,i>-1&&n<c.start)break;const f=c.loaded;f?i=-1:(a||(c.independent||s)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),i=o),a=f}return i}loadedEndOfParts(e,t){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=xme(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=n.sn+1;if(a>=e.startSN&&a<=e.endSN){const s=t[a-e.startSN];n.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=Q5(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:a}=this,{fragments:s,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=i,f=n.partList,h=!!(this.loadingParts&&f!=null&&f.length&&l);h&&!this.bitrateTest&&f[f.length-1].fragment.sn===l.sn&&(s=s.concat(l),o=l.sn);let p;if(e<t){var g;const b=e<this.lastCurrentTime||e>t-c||(g=this.media)!=null&&g.paused||!this.startFragRequested?0:c;p=tu(a,s,e,b)}else p=s[s.length-1];if(p){const y=p.sn-n.startSN,b=this.fragmentTracker.getState(p);if((b===Ur.OK||b===Ur.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!h||f[0].fragment.sn>p.sn||!n.live)&&p.level===a.level){const E=s[y+1];p.sn<o&&this.fragmentTracker.getState(E)!==Ur.OK?p=E:p=null}}return p}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!t,o=e.alignedSliding&&Xe(a);if(s||!o&&!a){nge(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),l}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const a=this.startTimeOffset!==null,s=a?this.startTimeOffset:e.startTimeOffset;s!==null&&Xe(s)?(n=t+s,s<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&_r(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Ge.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ge.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const E=this.getCurrentContext(t.chunkMeta);E&&(t.frag=E.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var a;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(a=this.fragCurrent)==null?void 0:a.url}`);return}const s=t.details===we.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction;if(!o){this.state=Ge.ERROR;return}const{action:l,flags:c,retryCount:f=0,retryConfig:h}=o,p=!!h,g=p&&l===ln.RetryRequest,y=p&&!o.resolved&&c===hi.MoveAllAlternatesMatchingHost,b=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!g&&y&&_r(i)&&!i.endList&&b&&!Z5(t))this.resetFragmentErrors(e),this.treatAsGap(i),o.resolved=!0;else if((g||y)&&f<h.maxNumRetry){var v;const E=RT((v=t.response)==null?void 0:v.code),S=dD(h,f);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+S,this.state=Ge.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,E){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${f+1}/${h.maxNumRetry} in ${S}ms`)}else if(h)if(this.resetFragmentErrors(e),f<h.maxNumRetry)!s&&l!==ln.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${f})`);return}else l===ln.SendAlternateToPenaltyBox?this.state=Ge.WAITING_LEVEL:this.state=Ge.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!RT(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Ge.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Ge.PARSING||this.state===Ge.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,t?.duration||10);const s=!a;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===et.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=pt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ge.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const f=e.elementaryStreams[c];if(f){const h=f.endPTS-f.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${h})`),l||!1;const p=i?0:o8(a,e,f.startPTS,f.endPTS,f.startDTS,f.endDTS,this);return this.hls.trigger($.LEVEL_PTS_UPDATED,{details:a,level:n,drift:p,type:c,frag:e,start:f.startPTS,end:f.endPTS}),!0}return l},!1)){var o;const l=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||l&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),l){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Ge.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger($.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===et.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,a;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((a=t&&!n?e.endPTS:(n||e).end)!=null?a:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Oj(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class m8{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=age(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function age(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const a=r[i];t.set(a,n),n+=a.length}return t}var tE={exports:{}},Ij;function sge(){return Ij||(Ij=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,h||l,p),y=t?t+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=t?t+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,y=new Array(g);p<g;p++)y[p]=h[p].fn;return y},o.prototype.listenerCount=function(c){var f=t?t+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,y){var b=t?t+c:c;if(!this._events[b])return!1;var v=this._events[b],E=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,y),!0}for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var A=v.length,_;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),E){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,h);break;case 4:v[w].fn.call(v[w].context,f,h,p);break;default:if(!S)for(_=1,S=new Array(E-1);_<E;_++)S[_-1]=arguments[_];v[w].fn.apply(v[w].context,S)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=t?t+c:c;if(!this._events[g])return this;if(!f)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!h||y.context===h)&&s(this,g);else{for(var b=0,v=[],E=y.length;b<E;b++)(y[b].fn!==f||p&&!y[b].once||h&&y[b].context!==h)&&v.push(y[b]);v.length?this._events[g]=v.length===1?v[0]:v:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=t?t+c:c,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(tE)),tE.exports}var oge=sge(),vD=Ppe(oge);const zd="1.6.15",jc={};function lge(){return typeof __HLS_WORKER_BUNDLE__=="function"}function uge(){const r=jc[zd];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return jc[zd]=i,i}function cge(r){const e=jc[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return jc[r]=i,i}function fge(r){const e=jc[r||zd];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete jc[r||zd],i&&self.URL.revokeObjectURL(i),n.terminate()}}function g8(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function bD(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function Uy(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function Yd(r,e){const t=e;let n=0;for(;bD(r,e);){n+=10;const i=Uy(r,e+6);n+=i,g8(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function dge(r,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[t+2],s=a>>2&15;if(s>12){const g=new Error(`invalid ADTS sampling index:${s}`);r.emit($.ERROR,$.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}const o=(a>>6&3)+1,l=e[t+3]>>6&3|(a&1)<<2,c="mp4a.40."+o,f=i[s];let h=s;(o===5||o===29)&&(h-=3);const p=[o<<3|(h&14)>>1,(h&1)<<7|l<<3];return $t.log(`manifest codec:${n}, parsed codec:${c}, channels:${l}, rate:${f} (ADTS object type:${o} sampling index:${s})`),{config:p,samplerate:f,channelCount:l,codec:c,parsedCodec:c,manifestCodec:n}}function y8(r,e){return r[e]===255&&(r[e+1]&246)===240}function v8(r,e){return r[e+1]&1?7:9}function xD(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function hge(r,e){return e+5<r.length}function M0(r,e){return e+1<r.length&&y8(r,e)}function pge(r,e){return hge(r,e)&&y8(r,e)&&xD(r,e)<=r.length-e}function mge(r,e){if(M0(r,e)){const t=v8(r,e);if(e+t>=r.length)return!1;const n=xD(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||M0(r,i)}return!1}function b8(r,e,t,n,i){if(!r.samplerate){const a=dge(e,t,n,i);if(!a)return;Yt(r,a)}}function x8(r){return 1024*9e4/r}function gge(r,e){const t=v8(r,e);if(e+t<=r.length){const n=xD(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function S8(r,e,t,n,i){const a=x8(r.samplerate),s=n+i*a,o=gge(e,t);let l;if(o){const{frameLength:h,headerLength:p}=o,g=p+h,y=Math.max(0,t+g-e.length);y?(l=new Uint8Array(g-p),l.set(e.subarray(t+p,e.length),0)):l=e.subarray(t+p,t+g);const b={unit:l,pts:s};return y||r.samples.push(b),{sample:b,length:g,missing:y}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:s},length:c,missing:-1}}function yge(r,e){return bD(r,e)&&Uy(r,e+6)+10<=r.length-e}function vge(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function rE(r,e=0,t=1/0){return bge(r,e,t,Uint8Array)}function bge(r,e,t,n){const i=xge(r);let a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);const s=Sge(r)?r.byteOffset:0,o=(s+r.byteLength)/a,l=(s+e)/a,c=Math.floor(Math.max(0,Math.min(l,o))),f=Math.floor(Math.min(c+Math.max(t,0),o));return new n(i,c,f-c)}function xge(r){return r instanceof ArrayBuffer?r:r.buffer}function Sge(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function Ege(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const i=Ti(rE(r.data,1,n)),a=r.data[2+n],s=r.data.subarray(3+n).indexOf(0);if(s===-1)return;const o=Ti(rE(r.data,3+n,s));let l;return i==="-->"?l=Ti(rE(r.data,4+n+s)):l=vge(r.data.subarray(4+n+s)),e.mimeType=i,e.pictureType=a,e.description=o,e.data=l,e}function wge(r){if(r.size<2)return;const e=Ti(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function _ge(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=Ti(r.data.subarray(t),!0);t+=n.length+1;const i=Ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Ti(r.data.subarray(1));return{key:r.type,info:"",data:e}}function Tge(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=Ti(r.data.subarray(t),!0);t+=n.length+1;const i=Ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Ti(r.data);return{key:r.type,info:"",data:e}}function Age(r){return r.type==="PRIV"?wge(r):r.type[0]==="W"?Tge(r):r.type==="APIC"?Ege(r):_ge(r)}function Dge(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Uy(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const mm=10,Oge=10;function E8(r){let e=0;const t=[];for(;bD(r,e);){const n=Uy(r,e+6);r[e+5]>>6&1&&(e+=mm),e+=mm;const i=e+n;for(;e+Oge<i;){const a=Dge(r.subarray(e)),s=Age(a);s&&t.push(s),e+=a.size+mm}g8(r,e)&&(e+=mm)}return t}function w8(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function Ige(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function SD(r){const e=E8(r);for(let t=0;t<e.length;t++){const n=e[t];if(w8(n))return Ige(n)}}let vi=(function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r})({});function Ta(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class ED{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Vi(this.cachedData,e),this.cachedData=null);let n=Yd(e,0),i=n?n.length:0,a;const s=this._audioTrack,o=this._id3Track,l=n?SD(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Xe(l))&&(this.basePTS=Cge(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:vi.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const f=this.appendFrame(s,e,i);f?(this.frameIndex++,this.lastPTS=f.sample.pts,i+=f.length,a=i):i=c}else yge(e,i)?(n=Yd(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:vi.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,a=i):i++;if(i===c&&a!==c){const f=e.slice(a);this.cachedData?this.cachedData=Vi(this.cachedData,f):this.cachedData=f}}return{audioTrack:s,videoTrack:Ta(),id3Track:o,textTrack:Ta()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Ta(),id3Track:this._id3Track,textTrack:Ta()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Cge=(r,e,t)=>{if(Xe(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let gm=null;const Rge=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Pge=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Lge=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],kge=[0,1,1,4];function _8(r,e,t,n,i){if(t+24>e.length)return;const a=T8(e,t);if(a&&t+a.frameLength<=e.length){const s=a.samplesPerFrame*9e4/a.sampleRate,o=n+i*s,l={unit:e.subarray(t,t+a.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=a.channelCount,r.samplerate=a.sampleRate,r.samples.push(l),{sample:l,length:a.frameLength,missing:0}}}function T8(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,a=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&a!==3){const s=r[e+2]>>1&1,o=r[e+3]>>6,l=t===3?3-n:n===3?3:4,c=Rge[l*14+i-1]*1e3,h=Pge[(t===3?0:t===2?1:2)*3+a],p=o===3?1:2,g=Lge[t][n],y=kge[n],b=g*8*y,v=Math.floor(g*c/h+s)*y;if(gm===null){const w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);gm=w?parseInt(w[1]):0}return!!gm&&gm<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:h,channelCount:p,frameLength:v,samplesPerFrame:b}}}function wD(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function A8(r,e){return e+1<r.length&&wD(r,e)}function Mge(r,e){return wD(r,e)&&4<=r.length-e}function D8(r,e){if(e+1<r.length&&wD(r,e)){const n=T8(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const a=e+i;return a===r.length||A8(r,a)}return!1}class Nge extends ED{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=Yd(e,0);let i=n?.length||0;if(D8(e,i))return!1;for(let a=e.length;i<a;i++)if(mge(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return pge(e,t)}appendFrame(e,t,n){b8(e,this.observer,t,n,e.manifestCodec);const i=S8(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const O8=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;n>0;){s[0]=r[e];const o=Math.min(n,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,t=t?t<<o|i[0]:i[0],e+=1,n-=o}return t};class jge extends ED{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=I8(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Yd(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&SD(t)!==void 0&&O8(e,n)<16}}function I8(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const a=e[t+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],l=e[t+4]&63,f=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+a]*2;if(t+f>e.length)return-1;const h=e[t+6]>>5;let p=0;h===2?p+=2:(h&1&&h!==1&&(p+=2),h&4&&(p+=2));const g=(e[t+6]<<8|e[t+7])>>12-p&1,b=[2,1,2,3,3,4,4,5][h]+g,v=e[t+5]>>3,E=e[t+5]&7,S=new Uint8Array([a<<6|v<<1|E>>2,(E&3)<<6|h<<3|g<<2|l>>4,l<<4&224]),w=1536/o*9e4,A=n+i*w,_=e.subarray(t,t+f);return r.config=S,r.channelCount=b,r.samplerate=o,r.samples.push({unit:_,pts:A}),f}class Fge extends ED{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Yd(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&SD(t)!==void 0&&O8(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(D8(e,n))return $t.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return Mge(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return _8(e,t,n,this.basePTS,this.frameIndex)}}const Bge=/\/emsg[-/]ID3/i;class Uge{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const a=this.videoTrack=Ta("video",1),s=this.audioTrack=Ta("audio",1),o=this.txtTrack=Ta("text",1);if(this.id3Track=Ta("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=B5(e);if(l.video){const{id:c,timescale:f,codec:h,supplemental:p}=l.video;a.id=c,a.timescale=o.timescale=f,a.codec=h,a.supplemental=p}if(l.audio){const{id:c,timescale:f,codec:h}=l.audio;s.id=c,s.timescale=f,s.codec=h}o.id=N5.text,a.sampleDuration=0,a.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return jpe(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Vi(this.remainderData,e));const o=Kpe(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const s=this.extractID3Track(i,t);return a.samples=q2(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=q2(e,t),{videoTrack:t,audioTrack:Ta(),id3Track:i,textTrack:Ta()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=xt(e.samples,["emsg"]);i&&i.forEach(a=>{const s=Ype(a);if(Bge.test(s.schemeIdUri)){const o=Cj(s,t);let l=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=s.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:vi.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=Cj(s,t);n.samples.push({data:s.payload,len:s.payload.byteLength,dts:o,pts:o,type:vi.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Cj(r,e){return Xe(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class $ge{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new hD(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Zo.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)n.set(e.subarray(a,a+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(n.subarray(i,i+16),a);return e}decryptAvcSample(e,t,n,i,a){const s=H5(a.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(l=>{a.data=this.getAvcDecryptedUnit(s,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}).catch(i)}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const a=e[t].units;for(;!(n>=a.length);n++){const s=a[n];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,t,n,i,s),!this.decrypter.isSync()))return}}}}class C8{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const a=n.units;i=a[a.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const a=n[i-1];e.pts=a.pts,e.dts=a.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let a=e.naluState||0;const s=a,o=[];let l=0,c,f,h,p=-1,g=0;for(a===-1&&(p=0,g=this.getNALuType(t,0),a=0,l=1);l<i;){if(c=t[l++],!a){a=c?0:1;continue}if(a===1){a=c?0:2;continue}if(!c)a=3;else if(c===1){if(f=l-a-1,p>=0){const y={data:t.subarray(p,f),type:g};o.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(s&&l<=4-s&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-s)),f>0&&(y.data=Vi(y.data,t.subarray(0,f)),y.state=0))}l<i?(h=this.getNALuType(t,l),p=l,g=h,a=0):a=-1}else a=0}if(p>=0&&a>=0){const y={data:t.subarray(p,i),type:g,state:a};o.push(y)}if(o.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=Vi(y.data,t))}return e.naluState=a,o}}class bd{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(a===0)throw new Error("no bytes available");i.set(e.subarray(n,n+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&$t.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Hge extends C8{parsePES(e,t,n,i){const a=this.parseNALu(e,n.data,i);let s=this.VideoSample,o,l=!1;n.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(c=>{var f,h;switch(c.type){case 1:{let b=!1;o=!0;const v=c.data;if(l&&v.length>4){const E=this.readSliceType(v);(E===2||E===4||E===7||E===9)&&(b=!0)}if(b){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.frame=!0,s.key=b;break}case 5:o=!0,(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 6:{o=!0,uD(c.data,1,n.pts,t.samples);break}case 7:{var g,y;o=!0,l=!0;const b=c.data,v=this.readSPS(b);if(!e.sps||e.width!==v.width||e.height!==v.height||((g=e.pixelRatio)==null?void 0:g[0])!==v.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[b];const E=b.subarray(1,4);let S="avc1.";for(let w=0;w<3;w++){let A=E[w].toString(16);A.length<2&&(A="0"+A),S+=A}e.codec=S}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}s&&o&&s.units.push(c)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new bd(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,a;for(let s=0;s<e;s++)i!==0&&(a=t.readEG(),i=(n+a+256)%256),n=i===0?n:i}readSPS(e){const t=new bd(e);let n=0,i=0,a=0,s=0,o,l,c;const f=t.readUByte.bind(t),h=t.readBits.bind(t),p=t.readUEG.bind(t),g=t.readBoolean.bind(t),y=t.skipBits.bind(t),b=t.skipEG.bind(t),v=t.skipUEG.bind(t),E=this.skipScalingList.bind(this);f();const S=f();if(h(5),y(3),f(),v(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const P=p();if(P===3&&y(1),v(),v(),y(1),g())for(l=P!==3?8:12,c=0;c<l;c++)g()&&(c<6?E(16,t):E(64,t))}v();const w=p();if(w===0)p();else if(w===1)for(y(1),b(),b(),o=p(),c=0;c<o;c++)b();v(),y(1);const A=p(),_=p(),I=h(1);I===0&&y(1),y(1),g()&&(n=p(),i=p(),a=p(),s=p());let D=[1,1];if(g()&&g())switch(f()){case 1:D=[1,1];break;case 2:D=[12,11];break;case 3:D=[10,11];break;case 4:D=[16,11];break;case 5:D=[40,33];break;case 6:D=[24,11];break;case 7:D=[20,11];break;case 8:D=[32,11];break;case 9:D=[80,33];break;case 10:D=[18,11];break;case 11:D=[15,11];break;case 12:D=[64,33];break;case 13:D=[160,99];break;case 14:D=[4,3];break;case 15:D=[3,2];break;case 16:D=[2,1];break;case 255:{D=[f()<<8|f(),f()<<8|f()];break}}return{width:Math.ceil((A+1)*16-n*2-i*2),height:(2-I)*(_+1)*16-(I?2:4)*(a+s),pixelRatio:D}}}class Gge extends C8{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const a=this.parseNALu(e,n.data,i);let s=this.VideoSample,o,l=!1;n.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(c=>{var f,h;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:o=!0,(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 39:o=!0,uD(c.data,2,n.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Yt(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const g=this.readSPS(c.data);e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.codec=g.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in g.params)e.params[y]=g.params[y]}this.pushParameterSet(e.sps,c.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const g=this.readPPS(c.data);for(const y in g)e.params[y]=g[y]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}s&&o&&s.units.push(c)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new bd(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new bd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),a=t.readBoolean(),s=t.readBits(5),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),f=t.readUByte(),h=t.readUByte(),p=t.readUByte(),g=t.readUByte(),y=t.readUByte(),b=t.readUByte(),v=t.readUByte(),E=t.readUByte(),S=[],w=[];for(let oe=0;oe<n;oe++)S.push(t.readBoolean()),w.push(t.readBoolean());if(n>0)for(let oe=n;oe<8;oe++)t.readBits(2);for(let oe=0;oe<n;oe++)S[oe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),w[oe]&&t.readUByte();t.readUEG();const A=t.readUEG();A==3&&t.skipBits(1);const _=t.readUEG(),I=t.readUEG(),D=t.readBoolean();let P=0,k=0,M=0,H=0;D&&(P+=t.readUEG(),k+=t.readUEG(),M+=t.readUEG(),H+=t.readUEG());const N=t.readUEG(),Q=t.readUEG(),z=t.readUEG(),V=t.readBoolean();for(let oe=V?0:n;oe<=n;oe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ye=0;ye<4;ye++)for(let Ie=0;Ie<(ye===3?2:6);Ie++)if(!t.readBoolean())t.readUEG();else{const Be=Math.min(64,1<<4+(ye<<1));ye>1&&t.readEG();for(let pe=0;pe<Be;pe++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const W=t.readUEG();let J=0;for(let oe=0;oe<W;oe++){let ye=!1;if(oe!==0&&(ye=t.readBoolean()),ye){oe===W&&t.readUEG(),t.readBoolean(),t.readUEG();let Ie=0;for(let Re=0;Re<=J;Re++){const Be=t.readBoolean();let pe=!1;Be||(pe=t.readBoolean()),(Be||pe)&&Ie++}J=Ie}else{const Ie=t.readUEG(),Re=t.readUEG();J=Ie+Re;for(let Be=0;Be<Ie;Be++)t.readUEG(),t.readBoolean();for(let Be=0;Be<Re;Be++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const oe=t.readUEG();for(let ye=0;ye<oe;ye++){for(let Ie=0;Ie<z+4;Ie++)t.readBits(1);t.readBits(1)}}let j=0,F=1,Z=1,ae=!0,ee=1,ve=0;t.readBoolean(),t.readBoolean();let le=!1;if(t.readBoolean()){if(t.readBoolean()){const Fe=t.readUByte(),Ye=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],De=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Fe>0&&Fe<16?(F=Ye[Fe-1],Z=De[Fe-1]):Fe===255&&(F=t.readBits(16),Z=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),le=t.readBoolean(),le&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(ee=t.readBits(32),ve=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const De=t.readBoolean(),ft=t.readBoolean();let C=!1;(De||ft)&&(C=t.readBoolean(),C&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),C&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let B=0;B<=n;B++){ae=t.readBoolean();const q=ae||t.readBoolean();let de=!1;q?t.readEG():de=t.readBoolean();const be=de?1:t.readUEG()+1;if(De)for(let Pe=0;Pe<be;Pe++)t.readUEG(),t.readUEG(),C&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(ft)for(let Pe=0;Pe<be;Pe++)t.readUEG(),t.readUEG(),C&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),j=t.readUEG())}let re=_,ue=I;if(D){let oe=1,ye=1;A===1?oe=ye=2:A==2&&(oe=2),re=_-oe*k-oe*P,ue=I-ye*H-ye*M}const fe=i?["A","B","C"][i]:"",ie=o<<24|l<<16|c<<8|f;let Ce=0;for(let oe=0;oe<32;oe++)Ce=(Ce|(ie>>oe&1)<<31-oe)>>>0;let Se=Ce.toString(16);return s===1&&Se==="2"&&(Se="6"),{codecString:`hvc1.${fe}${s}.${Se}.${a?"H":"L"}${E}.B0`,params:{general_tier_flag:a,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[o,l,c,f],general_constraint_indicator_flags:[h,p,g,y,b,v],general_level_idc:E,bit_depth:N+8,bit_depth_luma_minus8:N,bit_depth_chroma_minus8:Q,min_spatial_segmentation_idc:j,chroma_format_idc:A,frame_rate:{fixed:ae,fps:ve/ee}},width:re,height:ue,pixelRatio:[F,Z]}}readPPS(e){const t=new bd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),a=t.readBoolean();let s=1;return a&&i?s=0:a?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const qr=188;class Fo{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Fo.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(qr*5,t-qr)+1,i=0;for(;i<n;){let a=!1,s=-1,o=0;for(let l=i;l<t;l+=qr)if(e[l]===71&&(t-l===qr||e[l+qr]===71)){if(o++,s===-1&&(s=l,s!==0&&(n=Math.min(s+qr*99,e.length-qr)+1)),a||(a=NT(e,l)===0),a&&o>1&&(s===0&&o>2||l+qr>n))return s}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:N5[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Fo.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Fo.createTrack("audio",i),this._id3Track=Fo.createTrack("id3"),this._txtTrack=Fo.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let a;const s=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let f=s.pid,h=s.pesData,p=o.pid,g=l.pid,y=o.pesData,b=l.pesData,v=null,E=this.pmtParsed,S=this._pmtId,w=e.length;if(this.remainderData&&(e=Vi(this.remainderData,e),w=e.length,this.remainderData=null),w<qr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:c};const A=Math.max(0,Fo.syncOffset(e));w-=(w-A)%qr,w<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,w,e.buffer.byteLength-w));let _=0;for(let D=A;D<w;D+=qr)if(e[D]===71){const P=!!(e[D+1]&64),k=NT(e,D),M=(e[D+3]&48)>>4;let H;if(M>1){if(H=D+5+e[D+4],H===D+qr)continue}else H=D+4;switch(k){case f:P&&(h&&(a=tc(h,this.logger))&&(this.readyVideoParser(s.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(s,c,a,!1)),h={data:[],size:0}),h&&(h.data.push(e.subarray(H,D+qr)),h.size+=D+qr-H);break;case p:if(P){if(y&&(a=tc(y,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(H,D+qr)),y.size+=D+qr-H);break;case g:P&&(b&&(a=tc(b,this.logger))&&this.parseID3PES(l,a),b={data:[],size:0}),b&&(b.data.push(e.subarray(H,D+qr)),b.size+=D+qr-H);break;case 0:P&&(H+=e[H]+1),S=this._pmtId=Kge(e,H);break;case S:{P&&(H+=e[H]+1);const N=zge(e,H,this.typeSupported,n,this.observer,this.logger);f=N.videoPid,f>0&&(s.pid=f,s.segmentCodec=N.segmentVideoCodec),p=N.audioPid,p>0&&(o.pid=p,o.segmentCodec=N.segmentAudioCodec),g=N.id3Pid,g>0&&(l.pid=g),v!==null&&!E&&(this.logger.warn(`MPEG-TS PMT found at ${D} after unknown PID '${v}'. Backtracking to sync byte @${A} to parse all TS packets.`),v=null,D=A-188),E=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=k;break}}else _++;_>0&&jT(this.observer,new Error(`Found ${_} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=h,o.pesData=y,l.pesData=b;const I={audioTrack:o,videoTrack:s,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(I),I}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:a}=e,s=n.pesData,o=t.pesData,l=i.pesData;let c;if(s&&(c=tc(s,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,a,c,!0),n.pesData=null)):n.pesData=s,o&&(c=tc(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=tc(l,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),a=this.sampleAes=new $ge(this.observer,this.config,t);return this.decrypt(i,a)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Hge:e==="hevc"&&(this.videoParser=new Gge))}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{a.samples?t.decryptAvcSamples(a.samples,0,0,()=>{n(e)}):n(e)}):a.samples&&t.decryptAvcSamples(a.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let a=t.data;if(i){this.aacOverFlow=null;const h=i.missing,p=i.sample.unit.byteLength;if(h===-1)a=Vi(i.sample.unit,a);else{const g=p-h;i.sample.unit.set(a.subarray(0,h),g),e.samples.push(i.sample),n=i.missing}}let s,o;for(s=n,o=a.length;s<o-1&&!M0(a,s);s++);if(s!==n){let h;const p=s<o-1;if(p?h=`AAC PES did not start with ADTS header,offset:${s}`:h="No ADTS header found in AAC PES",jT(this.observer,new Error(h),p,this.logger),!p)return}b8(e,this.observer,a,s,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const h=x8(e.samplerate);l=i.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,f;for(;s<o;)if(f=S8(e,a,s,l,c),s+=f.length,f.missing){this.aacOverFlow=f;break}else for(c++;s<o-1&&!M0(a,s);s++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let a=0,s=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(A8(n,s)){const l=_8(e,n,s,o,a);if(l)s+=l.length,a++;else break}else s++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=n.length;let s=0,o=0,l;for(;o<a&&(l=I8(e,n,o,i,s++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Yt({},t,{type:this._videoTrack?vi.emsg:vi.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function NT(r,e){return((r[e+1]&31)<<8)+r[e+2]}function Kge(r,e){return(r[e+10]&31)<<8|r[e+11]}function zge(r,e,t,n,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(r[e+1]&15)<<8|r[e+2],l=e+3+o-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<l;){const f=NT(r,e),h=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){nE("ADTS AAC",a);break}case 15:s.audioPid===-1&&(s.audioPid=f);break;case 21:s.id3Pid===-1&&(s.id3Pid=f);break;case 219:if(!n){nE("H.264",a);break}case 27:s.videoPid===-1&&(s.videoPid=f);break;case 3:case 4:!t.mpeg&&!t.mp3?a.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=f,s.segmentAudioCodec="mp3");break;case 193:if(!n){nE("AC-3",a);break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=f,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,g=h;for(;g>2;){switch(r[p]){case 106:t.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=f,s.segmentAudioCodec="ac3");break}const b=r[p+1]+2;p+=b,g-=b}}break;case 194:case 135:return jT(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:s.videoPid===-1&&(s.videoPid=f,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=h+5}return s}function jT(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit($.ERROR,$.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function nE(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function tc(r,e){let t=0,n,i,a,s,o;const l=r.data;if(!r||r.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Vi(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>r.size-6)return null;const f=n[7];f&192&&(s=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,f&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,s-o>60*9e4&&(e.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),a=n[8];let h=a+9;if(r.size<=h)return null;r.size-=h;const p=new Uint8Array(r.size);for(let g=0,y=l.length;g<y;g++){n=l[g];let b=n.byteLength;if(h)if(h>b){h-=b;continue}else n=n.subarray(h),b-=h,h=0;p.set(n,t),t+=b}return i&&(i-=a+3),{data:p,pts:s,dts:o,len:i}}return null}class Yge{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Co=Math.pow(2,32)-1;class Ee{static init(){Ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ee.types)Ee.types.hasOwnProperty(e)&&(Ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ee.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Ee.STTS=Ee.STSC=Ee.STCO=a,Ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Ee.FTYP=Ee.box(Ee.types.ftyp,s,l,s,o),Ee.DINF=Ee.box(Ee.types.dinf,Ee.box(Ee.types.dref,i))}static box(e,...t){let n=8,i=t.length;const a=i;for(;i--;)n+=t[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(e,4),i=0,n=8;i<a;i++)s.set(t[i],n),n+=t[i].byteLength;return s}static hdlr(e){return Ee.box(Ee.types.hdlr,Ee.HDLR_TYPES[e])}static mdat(e){return Ee.box(Ee.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Co+1)),i=Math.floor(t%(Co+1));return Ee.box(Ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return Ee.box(Ee.types.mdia,Ee.mdhd(e.timescale||0,e.duration||0),Ee.hdlr(e.type),Ee.minf(e))}static mfhd(e){return Ee.box(Ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ee.box(Ee.types.minf,Ee.box(Ee.types.smhd,Ee.SMHD),Ee.DINF,Ee.stbl(e)):Ee.box(Ee.types.minf,Ee.box(Ee.types.vmhd,Ee.VMHD),Ee.DINF,Ee.stbl(e))}static moof(e,t,n){return Ee.box(Ee.types.moof,Ee.mfhd(e),Ee.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trak(e[t]);return Ee.box.apply(null,[Ee.types.moov,Ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Ee.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trex(e[t]);return Ee.box.apply(null,[Ee.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Co+1)),i=Math.floor(t%(Co+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ee.box(Ee.types.mvhd,a)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,a;for(i=0;i<t.length;i++)a=t[i].flags,n[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return Ee.box(Ee.types.sdtp,n)}static stbl(e){return Ee.box(Ee.types.stbl,Ee.stsd(e),Ee.box(Ee.types.stts,Ee.STTS),Ee.box(Ee.types.stsc,Ee.STSC),Ee.box(Ee.types.stsz,Ee.STSZ),Ee.box(Ee.types.stco,Ee.STCO))}static avc1(e){let t=[],n=[],i,a,s;for(i=0;i<e.sps.length;i++)a=e.sps[i],s=a.byteLength,t.push(s>>>8&255),t.push(s&255),t=t.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],s=a.byteLength,n.push(s>>>8&255),n.push(s&255),n=n.concat(Array.prototype.slice.call(a));const o=Ee.box(Ee.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return Ee.box(Ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ee.box(Ee.types.mp4a,Ee.audioStsd(e),Ee.box(Ee.types.esds,Ee.esds(e)))}static mp3(e){return Ee.box(Ee.types[".mp3"],Ee.audioStsd(e))}static ac3(e){return Ee.box(Ee.types["ac-3"],Ee.audioStsd(e),Ee.box(Ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp4a(e));if(t==="ac3"&&e.config)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.avc1(e));if(t==="hevc"&&e.vps)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,s=Math.floor(n/(Co+1)),o=Math.floor(n%(Co+1));return Ee.box(Ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,t){const n=Ee.sdtp(e),i=e.id,a=Math.floor(t/(Co+1)),s=Math.floor(t%(Co+1));return Ee.box(Ee.types.traf,Ee.box(Ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),Ee.box(Ee.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,s>>24,s>>16&255,s>>8&255,s&255])),Ee.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Ee.box(Ee.types.trak,Ee.tkhd(e),Ee.mdia(e))}static trex(e){const t=e.id;return Ee.box(Ee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,a=12+16*i,s=new Uint8Array(a);let o,l,c,f,h,p;for(t+=8+a,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)l=n[o],c=l.duration,f=l.size,h=l.flags,p=l.cts,s.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return Ee.box(Ee.types.trun,s)}static initSegment(e){Ee.types||Ee.init();const t=Ee.moov(e);return Vi(Ee.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let s=a.length;for(let y=0;y<n.length;y+=1){s+=3;for(let b=0;b<n[y].length;b+=1)s+=2+n[y][b].length}const o=new Uint8Array(s);o.set(a,0),s=a.length;const l=n.length-1;for(let y=0;y<n.length;y+=1){o.set(new Uint8Array([32+y|(y===l?128:0),0,n[y].length]),s),s+=3;for(let b=0;b<n[y].length;b+=1)o.set(new Uint8Array([n[y][b].length>>8,n[y][b].length&255]),s),s+=2,o.set(n[y][b],s),s+=n[y][b].length}const c=Ee.box(Ee.types.hvcC,o),f=e.width,h=e.height,p=e.pixelRatio[0],g=e.pixelRatio[1];return Ee.box(Ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,g>>24,g>>16&255,g>>8&255,g&255])))}}Ee.types=void 0;Ee.HDLR_TYPES=void 0;Ee.STTS=void 0;Ee.STSC=void 0;Ee.STCO=void 0;Ee.STSZ=void 0;Ee.VMHD=void 0;Ee.SMHD=void 0;Ee.STSD=void 0;Ee.FTYP=void 0;Ee.DINF=void 0;const R8=9e4;function _D(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function qge(r,e,t=1,n=!1){return _D(r,e,1/t,n)}function ad(r,e=!1){return _D(r,1e3,1/R8,e)}function Wge(r,e=1){return _D(r,R8,1/e)}function Rj(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const Vge=10*1e3,Qge=1024,Xge=1152,Zge=1536;let rc=null,iE=null;function Pj(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class hg extends Xi{constructor(e,t,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,rc===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);rc=s?parseInt(s[1]):0}if(iE===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);iE=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&Rj(t)} > ${e&&Rj(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((a,s)=>{let o=s.pts,l=o-a;return l<-4294967296&&(t=!0,o=mi(o,n),l=o-a),l>0?a:o},n);return t&&this.debug("PTS rollover detected"),i}remux(e,t,n,i,a,s,o,l){let c,f,h,p,g,y,b=a,v=a;const E=e.pid>-1,S=t.pid>-1,w=t.samples.length,A=e.samples.length>0,_=o&&w>0||w>1;if((!E||A)&&(!S||_)||this.ISGenerated||o){if(this.ISGenerated){var D,P,k,M;const z=this.videoTrackConfig;(z&&(t.width!==z.width||t.height!==z.height||((D=t.pixelRatio)==null?void 0:D[0])!==((P=z.pixelRatio)==null?void 0:P[0])||((k=t.pixelRatio)==null?void 0:k[1])!==((M=z.pixelRatio)==null?void 0:M[1]))||!z&&_||this.nextAudioTs===null&&A)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,t,a,s));const H=this.isVideoContiguous;let N=-1,Q;if(_&&(N=Jge(t.samples),!H&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,N>0){this.warn(`Dropped ${N} out of ${w} video samples due to a missing keyframe`);const z=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(N),t.dropped+=N,v+=(t.samples[0].pts-z)/t.inputTimeScale,Q=v}else N===-1&&(this.warn(`No keyframe found out of ${w} video samples`),y=!1);if(this.ISGenerated){if(A&&_){const z=this.getVideoStartPts(t.samples),K=(mi(e.samples[0].pts,z)-z)/t.inputTimeScale;b+=Math.max(0,K),v+=Math.max(0,-K)}if(A){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,t,a,s)),f=this.remuxAudio(e,b,this.isAudioContiguous,s,S||_||l===et.AUDIO?v:void 0),_){const z=f?f.endPTS-f.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,t,a,s)),c=this.remuxVideo(t,v,H,z)}}else _&&(c=this.remuxVideo(t,v,H,0));c&&(c.firstKeyFrame=N,c.independent=N!==-1,c.firstKeyFramePTS=Q)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(g=P8(n,a,this._initPTS,this._initDTS)),i.samples.length&&(p=L8(i,a,this._initPTS))),{audio:f,video:c,initSegment:h,independent:y,text:p,id3:g}}computeInitPts(e,t,n,i){const a=Math.round(n*t);let s=mi(e,a);if(s<a+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(a-s)/t} ${i}`);s<a+t;)s+=8589934592;return s-a}generateIS(e,t,n,i){const a=e.samples,s=t.samples,o=this.typeSupported,l={},c=this._initPTS;let f=!c||i,h="audio/mp4",p,g,y,b=-1;if(f&&(p=g=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ee.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(b=e.id,y=e.inputTimeScale,!c||y!==c.timescale?p=g=this.computeInitPts(a[0].pts,y,n,"audio"):f=!1)}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ee.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(b=t.id,y=t.inputTimeScale,!c||y!==c.timescale){const v=this.getVideoStartPts(s),E=mi(s[0].dts,v),S=this.computeInitPts(E,y,n,"video"),w=this.computeInitPts(v,y,n,"video");g=Math.min(g,S),p=Math.min(p,w)}else f=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,f?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${p/y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${p/y} (${p}/${y}) trackId: ${b}`),this._initPTS={baseTime:p,timescale:y,trackId:b},this._initDTS={baseTime:g,timescale:y,trackId:b}):p=y=void 0,{tracks:l,initPTS:p,timescale:y,trackId:b}}remuxVideo(e,t,n,i){const a=e.inputTimeScale,s=e.samples,o=[],l=s.length,c=this._initPTS,f=c.baseTime*a/c.timescale;let h=this.nextVideoTs,p=8,g=this.videoSampleDuration,y,b,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=!1;if(!n||h===null){const j=f+t*a,F=s[0].pts-mi(s[0].dts,s[0].pts);rc&&h!==null&&Math.abs(j-F-(h+f))<15e3?n=!0:h=j-F-f}const w=h+f;for(let j=0;j<l;j++){const F=s[j];F.pts=mi(F.pts,w),F.dts=mi(F.dts,w),F.dts<s[j>0?j-1:j].dts&&(S=!0)}S&&s.sort(function(j,F){const Z=j.dts-F.dts,ae=j.pts-F.pts;return Z||ae}),y=s[0].dts,b=s[s.length-1].dts;const A=b-y,_=A?Math.round(A/(l-1)):g||e.inputTimeScale/30;if(n){const j=y-w,F=j>_,Z=j<-1;if((F||Z)&&(F?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ad(j,!0)} ms (${j}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ad(-j,!0)} ms (${j}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!Z||w>=s[0].pts||rc)){y=w;const ae=s[0].pts-j;if(F)s[0].dts=y,s[0].pts=ae;else{let ee=!0;for(let ve=0;ve<s.length&&!(s[ve].dts>ae&&ee);ve++){const le=s[ve].pts;if(s[ve].dts-=j,s[ve].pts-=j,ve<s.length-1){const ne=s[ve+1].pts,re=s[ve].pts,ue=ne<=re,fe=ne<=le;ee=ue==fe}}}this.log(`Video: Initial PTS/DTS adjusted: ${ad(ae,!0)}/${ad(y,!0)}, delta: ${ad(j,!0)} ms`)}}y=Math.max(0,y);let I=0,D=0,P=y;for(let j=0;j<l;j++){const F=s[j],Z=F.units,ae=Z.length;let ee=0;for(let ve=0;ve<ae;ve++)ee+=Z[ve].data.length;D+=ee,I+=ae,F.length=ee,F.dts<P?(F.dts=P,P+=_/4|0||1):P=F.dts,v=Math.min(F.pts,v),E=Math.max(F.pts,E)}b=s[l-1].dts;const k=D+4*I+8;let M;try{M=new Uint8Array(k)}catch(j){this.observer.emit($.ERROR,$.ERROR,{type:at.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:j,bytes:k,reason:`fail allocating video mdat ${k}`});return}const H=new DataView(M.buffer);H.setUint32(0,k),M.set(Ee.types.mdat,4);let N=!1,Q=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let j=0;j<l;j++){const F=s[j],Z=F.units;let ae=0;for(let le=0,ne=Z.length;le<ne;le++){const re=Z[le],ue=re.data,fe=re.data.byteLength;H.setUint32(p,fe),p+=4,M.set(ue,p),p+=fe,ae+=4+fe}let ee;if(j<l-1)g=s[j+1].dts-F.dts,ee=s[j+1].pts-F.pts;else{const le=this.config,ne=j>0?F.dts-s[j-1].dts:_;if(ee=j>0?F.pts-s[j-1].pts:_,le.stretchShortVideoTrack&&this.nextAudioTs!==null){const re=Math.floor(le.maxBufferHole*a),ue=(i?v+i*a:this.nextAudioTs+f)-F.pts;ue>re?(g=ue-ne,g<0?g=ne:N=!0,this.log(`It is approximately ${ue/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=ne}else g=ne}const ve=Math.round(F.pts-F.dts);Q=Math.min(Q,g),V=Math.max(V,g),z=Math.min(z,ee),K=Math.max(K,ee),o.push(Pj(F.key,g,ae,ve))}if(o.length){if(rc){if(rc<70){const j=o[0].flags;j.dependsOn=2,j.isNonSync=0}}else if(iE&&K-z<V-Q&&_/V<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let j=y;for(let F=0,Z=o.length;F<Z;F++){const ae=j+o[F].duration,ee=j+o[F].cts;if(F<Z-1){const ve=ae+o[F+1].cts;o[F].duration=ve-ee}else o[F].duration=F?o[F-1].duration:_;o[F].cts=0,j=ae}}}g=N||!g?_:g;const Y=b+g;this.nextVideoTs=h=Y-f,this.videoSampleDuration=g,this.isVideoContiguous=!0;const G={data1:Ee.moof(e.sequenceNumber++,y,Yt(e,{samples:o})),data2:M,startPTS:(v-f)/a,endPTS:(E+g-f)/a,startDTS:(y-f)/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,G}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Xge;case"ac3":return Zge;default:return Qge}}remuxAudio(e,t,n,i,a){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,l=s/o,c=this.getSamplesPerFrame(e),f=c*l,h=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,g=[],y=a!==void 0;let b=e.samples,v=p?0:8,E=this.nextAudioTs||-1;const S=h.baseTime*s/h.timescale,w=S+t*s;if(this.isAudioContiguous=n=n||b.length&&E>0&&(i&&Math.abs(w-(E+S))<9e3||Math.abs(mi(b[0].pts,w)-(E+S))<20*f),b.forEach(function(K){K.pts=mi(K.pts,w)}),!n||E<0){const K=b.length;if(b=b.filter(Y=>Y.pts>=0),K!==b.length&&this.warn(`Removed ${b.length-K} of ${K} samples (initPTS ${S} / ${s})`),!b.length)return;a===0?E=0:i&&!y?E=Math.max(0,w-S):E=b[0].pts-S}if(e.segmentCodec==="aac"){const K=this.config.maxAudioFramesDrift;for(let Y=0,W=E+S;Y<b.length;Y++){const J=b[Y],G=J.pts,j=G-W,F=Math.abs(1e3*j/s);if(j<=-K*f&&y)Y===0&&(this.warn(`Audio frame @ ${(G/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*j/s)} ms.`),this.nextAudioTs=E=G-S,W=G);else if(j>=K*f&&F<Vge&&y){let Z=Math.round(j/f);for(W=G-Z*f;W<0&&Z&&f;)Z--,W+=f;Y===0&&(this.nextAudioTs=E=W-S),this.warn(`Injecting ${Z} audio frames @ ${((W-S)/s).toFixed(3)}s due to ${Math.round(1e3*j/s)} ms gap.`);for(let ae=0;ae<Z;ae++){let ee=Yge.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ee||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ee=J.unit.subarray()),b.splice(Y,0,{unit:ee,pts:W}),W+=f,Y++}}J.pts=W,W+=f}}let A=null,_=null,I,D=0,P=b.length;for(;P--;)D+=b[P].unit.byteLength;for(let K=0,Y=b.length;K<Y;K++){const W=b[K],J=W.unit;let G=W.pts;if(_!==null){const F=g[K-1];F.duration=Math.round((G-_)/l)}else if(n&&e.segmentCodec==="aac"&&(G=E+S),A=G,D>0){D+=v;try{I=new Uint8Array(D)}catch(F){this.observer.emit($.ERROR,$.ERROR,{type:at.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:F,bytes:D,reason:`fail allocating audio mdat ${D}`});return}p||(new DataView(I.buffer).setUint32(0,D),I.set(Ee.types.mdat,4))}else return;I.set(J,v);const j=J.byteLength;v+=j,g.push(Pj(!0,c,j,0)),_=G}const k=g.length;if(!k)return;const M=g[g.length-1];E=_-S,this.nextAudioTs=E+l*M.duration;const H=p?new Uint8Array(0):Ee.moof(e.sequenceNumber++,A/l,Yt({},e,{samples:g}));e.samples=[];const N=(A-S)/s,Q=this.nextAudioTs/s,V={data1:H,data2:I,startPTS:N,endPTS:Q,startDTS:N,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,V}}function mi(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function Jge(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function P8(r,e,t,n){const i=r.samples.length;if(!i)return;const a=r.inputTimeScale;for(let o=0;o<i;o++){const l=r.samples[o];l.pts=mi(l.pts-t.baseTime*a/t.timescale,e*a)/a,l.dts=mi(l.dts-n.baseTime*a/n.timescale,e*a)/a}const s=r.samples;return r.samples=[],{samples:s}}function L8(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let s=0;s<n;s++){const o=r.samples[s];o.pts=mi(o.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((s,o)=>s.pts-o.pts);const a=r.samples;return r.samples=[],{samples:a}}class e0e extends Xi{constructor(e,t,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:a,video:s}=this.initData=B5(e);if(t)$pe(e,t);else{const l=a||s;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}a&&(n=Lj(a,Vt.AUDIO,this)),s&&(i=Lj(s,Vt.VIDEO,this));const o={};a&&s?o.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:a?o.audio={container:"audio/mp4",codec:n,encrypted:a.encrypted,initSegment:e,id:"audio"}:s?o.video={container:"video/mp4",codec:i,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,a,s){var o,l;let{initPTS:c,lastEndTime:f}=this;const h={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Xe(f)||(f=this.lastEndTime=a||0);const p=t.samples;if(!p.length)return h;const g={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((o=y)!=null&&o.length||(this.generateInitSegment(p),y=this.initData),!((l=y)!=null&&l.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(g.tracks=this.initTracks,this.emitInitSegment=!1);const b=Gpe(p,y,this),v=y.audio?b[y.audio.id]:null,E=y.video?b[y.video.id]:null,S=ym(E,1/0),w=ym(v,1/0),A=ym(E,0,!0),_=ym(v,0,!0);let I=a,D=0;const P=v&&(!E||!c&&w<S||c&&c.trackId===y.audio.id),k=P?v:E;if(k){const W=k.timescale,J=k.start-a*W,G=P?y.audio.id:y.video.id;I=k.start/W,D=P?_-w:A-S,(s||!c)&&(t0e(c,I,a,D)||W!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${a} ${J/W} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${I-a} (${J}/${W}) trackId: ${G}`),c=null,g.initPTS=J,g.timescale=W,g.trackId=G)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);c?(g.initPTS=c.baseTime,g.timescale=c.timescale,g.trackId=c.trackId):((!g.timescale||g.trackId===void 0||g.initPTS===void 0)&&(this.warn("Could not set initPTS"),g.initPTS=I,g.timescale=1,g.trackId=-1),this.initPTS=c={baseTime:g.initPTS,timescale:g.timescale,trackId:g.trackId});const M=I-c.baseTime/c.timescale,H=M+D;D>0?this.lastEndTime=H:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const N=!!y.audio,Q=!!y.video;let z="";N&&(z+="audio"),Q&&(z+="video");const V=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),K={data1:p,startPTS:M,startDTS:M,endPTS:H,endDTS:H,type:z,hasAudio:N,hasVideo:Q,nb:1,dropped:0,encrypted:V};h.audio=N&&!Q?K:void 0,h.video=Q?K:void 0;const Y=E?.sampleCount;if(Y){const W=E.keyFrameIndex,J=W!==-1;K.nb=Y,K.dropped=W===0||this.isVideoContiguous?0:J?W:Y,K.independent=J,K.firstKeyFrame=W,J&&E.keyFrameStart&&(K.firstKeyFramePTS=(E.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(h.independent=J),this.isVideoContiguous||(this.isVideoContiguous=J),K.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${W}/${Y} dropped: ${K.dropped} start: ${K.firstKeyFramePTS||"NA"}`)}return h.initSegment=g,h.id3=P8(n,a,c,c),i.samples.length&&(h.text=L8(i,a,c)),h}}function ym(r,e,t=!1){return r?.start!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function t0e(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),a=e-r.baseTime/r.timescale;return Math.abs(a-t)>i}function Lj(r,e,t){const n=r.codec;return n&&n.length>4?n:e===Vt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?D0(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let xs;try{xs=self.performance.now.bind(self.performance)}catch{xs=Date.now}const pg=[{demux:Uge,remux:e0e},{demux:Fo,remux:hg},{demux:Nge,remux:hg},{demux:Fge,remux:hg}];pg.splice(2,0,{demux:jge,remux:hg});class kj{constructor(e,t,n,i,a,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=a,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const a=n.transmuxing;a.executeStart=xs();let s=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:f,trackSwitch:h,accurateTimeOffset:p,timeOffset:g,initSegmentChange:y}=i||o,{audioCodec:b,videoCodec:v,defaultInitPts:E,duration:S,initSegmentData:w}=l,A=r0e(s,t);if(A&&vc(A.method)){const P=this.getDecrypter(),k=mD(A.method);if(P.isSync()){let M=P.softwareDecrypt(s,A.key.buffer,A.iv.buffer,k);if(n.part>-1){const N=P.flush();M=N&&N.buffer}if(!M)return a.executeEnd=xs(),aE(n);s=new Uint8Array(M)}else return this.asyncResult=!0,this.decryptionPromise=P.webCryptoDecrypt(s,A.key.buffer,A.iv.buffer,k).then(M=>{const H=this.push(M,null,n);return this.decryptionPromise=null,H}),this.decryptionPromise}const _=this.needsProbing(f,h);if(_){const P=this.configureTransmuxer(s);if(P)return this.logger.warn(`[transmuxer] ${P.message}`),this.observer.emit($.ERROR,$.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message}),a.executeEnd=xs(),aE(n)}(f||h||y||_)&&this.resetInitSegment(w,b,v,S,t),(f||y||_)&&this.resetInitialTimestamp(E),c||this.resetContiguity();const I=this.transmux(s,A,g,p,n);this.asyncResult=qd(I);const D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,a.executeEnd=xs(),I}flush(e){const t=e.transmuxing;t.executeStart=xs();const{decrypter:n,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const s=[],{timeOffset:o}=i;if(n){const h=n.flush();h&&s.push(this.push(h.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){t.executeEnd=xs();const h=[aE(e)];return this.asyncResult?Promise.resolve(h):h}const f=l.flush(o);return qd(f)?(this.asyncResult=!0,f.then(h=>(this.flushRemux(s,h,e),s))):(this.flushRemux(s,f,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===et.MAIN?"level":"track"} ${n.level}`);const f=this.remuxer.remux(i,a,s,o,c,l,!0,this.id);e.push({remuxResult:f,chunkMeta:n}),n.transmuxing.executeEnd=xs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,a){const{demuxer:s,remuxer:o}=this;!s||!o||(s.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,a){let s;return t&&t.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,t,n,i,a):s=this.transmuxUnencrypted(e,n,i,a),s}transmuxUnencrypted(e,t,n,i){const{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,s,o,l,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,a){return this.demuxer.demuxSampleAes(e,t,n).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,n,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let a;for(let h=0,p=pg.length;h<p;h++){var s;if((s=pg[h].demux)!=null&&s.probe(e,this.logger)){a=pg[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=a.remux,f=a.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(n,t,i,this.logger)),(!o||!(o instanceof f))&&(this.demuxer=new f(n,t,i,this.logger),this.probe=f.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new hD(this.config)),e}}function r0e(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const aE=r=>({remuxResult:{},chunkMeta:r});function qd(r){return"then"in r&&r.then instanceof Function}class n0e{constructor(e,t,n,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=a||null}}class i0e{constructor(e,t,n,i,a,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=s}}let Mj=0;class k8{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Mj++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,f=this.hls;if(!(!f||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var h;const p=(h=this.workerContext)==null?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{f.logger[c.data.logType]&&f.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,f.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const s=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===$.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new vD,this.observer.on($.FRAG_DECRYPTED,s),this.observer.on($.ERROR,s);const o=Q2(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(a.workerPath||lge()){try{a.workerPath?(l.log(`loading Web Worker ${a.workerPath} for "${t}"`),this.workerContext=cge(a.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=uge());const{worker:f}=this.workerContext;f.addEventListener("message",this.onWorkerMessage),f.addEventListener("error",this.onWorkerError),f.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:Xt(a)})}catch(f){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,f),this.terminateWorker(),this.error=null,this.transmuxer=new kj(this.observer,o,a,"",t,e.logger)}return}}this.transmuxer=new kj(this.observer,o,a,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Mj++;const t=this.hls.config,n=Q2(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Xt(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),fge(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,a,s,o,l,c,f){var h,p;c.transmuxing.start=self.performance.now();const{instanceNo:g,transmuxer:y}=this,b=s?s.start:a.start,v=a.decryptdata,E=this.frag,S=!(E&&a.cc===E.cc),w=!(E&&c.level===E.level),A=E?c.sn-E.sn:-1,_=this.part?c.part-this.part.index:-1,I=A===0&&c.id>1&&c.id===E?.stats.chunkCount,D=!w&&(A===1||A===0&&(_===1||I&&_<=0)),P=self.performance.now();(w||A||a.stats.parsing.start===0)&&(a.stats.parsing.start=P),s&&(_||!D)&&(s.stats.parsing.start=P);const k=!(E&&((h=a.initSegment)==null?void 0:h.url)===((p=E.initSegment)==null?void 0:p.url)),M=new i0e(S,D,l,w,b,k);if(!D||S||k){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===et.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${S}
        trackSwitch: ${w}
        contiguous: ${D}
        accurateTimeOffset: ${l}
        timeOffset: ${b}
        initSegmentChange: ${k}`);const H=new n0e(n,i,t,o,f);this.configureTransmuxer(H)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:g,cmd:"demux",data:e,decryptdata:v,chunkMeta:c,state:M},e instanceof ArrayBuffer?[e]:[]);else if(y){const H=y.push(e,v,c,M);qd(H)?H.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(H)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);qd(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Nj=100;class a0e extends yD{constructor(e,t,n){super(e,t,n,"audio-stream-controller",et.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($.BUFFER_RESET,this.onBufferReset,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($.BUFFER_RESET,this.onBufferReset,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:a,trackId:s}){if(n===et.MAIN){const o=t.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:i,timescale:a,trackId:s},this.log(`InitPTS for cc: ${o} found from main: ${i/a} (${i}/${a}) trackId: ${s}`),this.mainAnchor=t,this.state===Ge.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(t,l)):this.state===Ge.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&i?.cc===t.cc)return;const a=(i||e).cc,s=this.getLevelDetails(),o=this.getLoadPosition(),l=Q5(s,a,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===Ge.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Ge.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Nj),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ge.IDLE):this.state=Ge.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Ge.IDLE:this.doTickIdle();break;case Ge.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e?.[t],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Ge.WAITING_INIT_PTS}break}case Ge.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Ge.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:a}=e,s=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Ge.FRAG_LOADING;const o=i.flush().buffer,l={frag:t,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),a&&super._handleFragmentLoadComplete(l)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=Ge.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:a}=this,s=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(n!=null&&n[a]))return;const o=n[a],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=Ge.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Vt.AUDIO,et.AUDIO));const f=this.getFwdBufferInfo(c,et.AUDIO);if(f===null)return;if(!this.switchingTrack&&this._streamEnded(f,l)){t.trigger($.BUFFER_EOS,{type:"audio"}),this.state=Ge.ENDED;return}const h=f.len,p=t.maxBufferLength,g=l.fragments,y=g[0].start,b=this.getLoadPosition(),v=this.flushing?b:f.end;if(this.switchingTrack&&i){const w=b;l.PTSKnown&&w<y&&(f.end>y||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=y+.05)}if(h>=p&&!this.switchingTrack&&v<g[g.length-1].start)return;let E=this.getNextFragment(v,l);if(E&&this.isLoopLoading(E,v)&&(E=this.getNextFragmentLoopLoading(E,l,f,et.MAIN,p)),!E){this.bufferFlushed=!0;return}let S=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&S&&_r(E)&&!E.endList&&(!l.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(S)===Ur.OK&&(this.mainFragLoading=S=null),S&&_r(S))){if(E.start>S.end){const A=this.fragmentTracker.getFragAtPos(v,et.MAIN);A&&A.end>S.end&&(S=A,this.mainFragLoading={frag:A,targetBufferTime:null})}if(E.start>S.end)return}this.loadFragment(E,o,v)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Kd(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ge.STOPPED&&(this.setInterval(Nj),this.state=Ge.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded($.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:a,id:s,groupId:o,track:l}=t;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${l.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||a.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${l.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const f=i[s];let h=0;if(a.live||(n=f.details)!=null&&n.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(f.details){var p;h=this.alignPlaylists(a,f.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(p8(a,c),a.alignedSliding||k0(a,c),h=a.fragmentStart)}f.details=a,this.levelLastLoaded=f,this.startFragRequested||this.setStartPosition(c,h),this.hls.trigger($.AUDIO_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.state===Ge.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=Ge.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:a}=e,{config:s,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const f=c.details;if(!f){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const h=s.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new k8(this.hls,et.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const g=this.initPTS[n.cc],y=(t=n.initSegment)==null?void 0:t.data;if(g!==void 0){const v=i?i.index:-1,E=v!==-1,S=new pD(n.level,n.sn,n.stats.chunkCount,a.byteLength,v,E);p.push(a,y,h,"",n,i,f.totalduration,!1,S,g)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${f.startSN} ,${f.endSN}],track ${o}`);const{cache:b}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new m8,complete:!1};b.push(new Uint8Array(a)),this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===et.MAIN&&_r(t.frag)&&(this.mainFragLoading=t,this.state===Ge.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==et.AUDIO){!this.audioOnly&&n.type===et.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(_r(n)){this.fragPrevious=n;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger($.AUDIO_TRACK_SWITCHED,Bt({},a)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.AUDIO,t);break;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===St.AUDIO_TRACK&&(this.state=Ge.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Vt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Vt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ge.ENDED&&(this.state=Ge.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,et.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:l,part:c,level:f}=o,{details:h}=f,{audio:p,text:g,id3:y,initSegment:b}=a;if(this.fragContextChanged(l)||!h){this.fragmentTracker.removeFragment(l);return}if(this.state=Ge.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){const v=l.initSegment||l;if(this.unhandledEncryptionError(b,l))return;this._bufferInitSegment(f,b.tracks,v,s),i.trigger($.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:n,tracks:b.tracks})}if(p){const{startPTS:v,endPTS:E,startDTS:S,endDTS:w}=p;c&&(c.elementaryStreams[Vt.AUDIO]={startPTS:v,endPTS:E,startDTS:S,endDTS:w}),l.setElementaryStreamInfo(Vt.AUDIO,v,E,S,w),this.bufferFragmentData(p,l,c,s)}if(y!=null&&(t=y.samples)!=null&&t.length){const v=Yt({id:n,frag:l,details:h},y);i.trigger($.FRAG_PARSING_METADATA,v)}if(g){const v=Yt({id:n,frag:l,details:h},g);i.trigger($.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const a=t.audio;a.id=et.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${s}/${a.codec}]`),s&&s.split(",").length===1&&(a.levelCodec=s),this.hls.trigger($.BUFFER_CODECS,t);const o=a.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger($.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===Ur.NOT_LOADED||i===Ur.PARTIAL){var a;if(!_r(e))this._loadInitSegment(e,t);else if((a=t.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ge.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==t.details.fragmentStart&&k0(t.details,s)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o}=this.bufferedTrack;ql({name:t,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o},e,Rl)||(I0(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger($.AUDIO_TRACK_SWITCHED,Bt({},e))}}class TD extends Xi{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let a=-1;for(let s=0;s<i.length;s++){const o=i[s];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){a=s;break}else l===e.substring(0,l.length)&&(a=s)}if(a!==-1){const s=i[a],o=parseInt(s["LAST-MSN"])||t.lastPartSn;let l=parseInt(s["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const f=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&f>t.partTarget&&(l+=1)}const c=n&&X2(n);return new Z2(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:a}=t,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;i.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){const f=Math.max(l||0,0);i.appliedTimelineOffset=f,i.fragments.forEach(h=>{h.setStart(h.playlistOffset+f)})}if(i.live||n!=null&&n.live){const f="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){Xme(n,i,this);const S=i.playlistParsingError;if(S){this.warn(S);const w=this.hls;if(!w.config.ignorePlaylistParsingErrors){var c;const{networkDetails:A}=t;w.trigger($.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:S,reason:S.message,level:t.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:A,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const h=this.hls.mainForwardBufferInfo,p=h?h.end-h.len:0,g=(i.edge-p)*1e3,y=u8(i,g);if(i.requestScheduled+y<s?i.requestScheduled=s:i.requestScheduled+=y,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let b,v,E;if(i.canBlockReload&&i.endSN&&i.advanced){const S=this.hls.config.lowLatencyMode,w=i.lastPartSn,A=i.endSN,_=i.lastPartIndex,I=_!==-1,D=w===A;I?D?(v=A+1,E=S?0:_):(v=w,E=S?_+1:i.maxPartIndex):v=A+1;const P=i.age,k=P+i.ageHeader;let M=Math.min(k-i.partTarget,i.targetduration*1.5);if(M>0){if(k>i.targetduration*3)this.log(`Playlist last advanced ${P.toFixed(2)}s ago. Omitting segment and part directives.`),v=void 0,E=void 0;else if(n!=null&&n.tuneInGoal&&k-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${M} with playlist age: ${i.age}`),M=0;else{const H=Math.floor(M/i.targetduration);if(v+=H,E!==void 0){const N=Math.round(M%i.targetduration/i.partTarget);E+=N}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${M} skip sn ${H} to part ${E}`)}i.tuneInGoal=M}if(b=this.getDeliveryDirectives(i,t.deliveryDirectives,v,E),S||!D){i.requestScheduled=s,this.loadingPlaylist(f,b);return}}else(i.canBlockReload||i.canSkipUntil)&&(b=this.getDeliveryDirectives(i,t.deliveryDirectives,v,E));b&&v!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(y-o*2,y/2)),this.scheduleLoading(f,b,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const a=self.performance.now(),s=i.requestScheduled;if(a>=s){this.loadingPlaylist(e,t);return}const o=s-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,n,i){let a=X2(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,a=fg.No),new Z2(n,i,a)}checkRetry(e){const t=e.details,n=C0(e),i=e.errorAction,{action:a,retryCount:s=0,retryConfig:o}=i||{},l=!!i&&!!o&&(a===ln.RetryRequest||!i.resolved&&a===ln.SendAlternateToPenaltyBox);if(l){var c;if(s>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const f=dD(o,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),f),this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${t}" in ${f}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}function M8(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Wd(r[t].attrs,e[t].attrs))return!1;return!0}function Wd(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function FT(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class s0e extends TD{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:a}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${s?.groupId}`);return}const o=s.details;s.details=t.details,this.log(`Audio track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!n||n.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,g)=>{p.id=g});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!a&&l){const p=La(l,o,Rl);if(p>-1)a=o[p];else{const g=La(l,this.tracks);a=this.tracks[g]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const f={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger($.AUDIO_TRACKS_UPDATED,f);const h=this.trackId;if(c!==-1&&h===-1)this.setAudioTrack(c);else if(o.length&&h===-1){var s;const p=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,t){t.fatal||!t.context||t.context.type===St.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&ql(e,i,Rl))return i;const a=La(e,this.tracksInGroup,Rl);if(a>-1){const s=this.tracksInGroup[a];return this.setAudioTrack(a),s}else if(i){let s=t.loadLevel;s===-1&&(s=t.firstAutoLevel);const o=vme(e,t.levels,n,s,Rl);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const s=La(e,n);if(s>-1)return n[s]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===n&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger($.AUDIO_TRACK_SWITCHING,Bt({},i)),a))return;const s=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||ql(e,i,Rl)))return n}if(e){const{name:n,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const f=t[c];if(ql({name:n,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:l},f,Rl))return c}for(let c=0;c<t.length;c++){const f=t[c];if(Wd(e.attrs,f.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const f=t[c];if(Wd(e.attrs,f.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&I0(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,t),s=e.details,o=s?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger($.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class o0e{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(a){var n;if(i.onError(a),this.queues===null||this.tracks===null)return;const s=(n=this.tracks[e])==null?void 0:n.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const jj=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,N8="HlsJsTrackRemovedError";class l0e extends Error{constructor(e){super(e),this.name=N8}}class u0e extends Xi{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:a}=this;n&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger($.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=Rpe(Xo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.BUFFER_RESET,this.onBufferReset,this),e.on($.BUFFER_APPENDING,this.onBufferAppending,this),e.on($.BUFFER_CODECS,this.onBufferCodecs,this),e.on($.BUFFER_EOS,this.onBufferEos,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.FRAG_PARSED,this.onFragParsed,this),e.on($.FRAG_CHANGED,this.onFragChanged,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.BUFFER_RESET,this.onBufferReset,this),e.off($.BUFFER_APPENDING,this.onBufferAppending,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.BUFFER_EOS,this.onBufferEos,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.FRAG_PARSED,this.onFragParsed,this),e.off($.FRAG_CHANGED,this.onFragChanged,this),e.off($.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const s=this.isQueued();(a||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?Yt(n,i.tracks):this.sourceBuffers.forEach(a=>{const[s]=a;s&&(n[s]=Yt({},this.tracks[s]),this.removeBuffer(s)),a[0]=a[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const i=Xo(this.appendSource);if(i){const a=!!t.mediaSource;(a||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(s),a)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&s instanceof l,Fj(n),c0e(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&a&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Xt(n,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${Xt(i,(l,c)=>l==="initSegment"?void 0:c)}}`),!P5(i,n)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,c=this.details,f=Math.max(l,c?.fragments[0].start||0);if(f-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${f}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${f} currentTime: ${l}`),this.onMediaDetaching($.MEDIA_DETACHING,{}),this.onMediaAttaching($.MEDIA_ATTACHING,t),e.currentTime=f;return}this.transferData=void 0,a.forEach(l=>{const c=l,f=i[c];if(f){const h=f.buffer;if(h){const p=this.fragmentTracker,g=f.id;if(p.hasFragments(g)||p.hasParts(g)){const v=pt.getBuffered(h);p.detectEvictedFragments(c,v,g,null,!0)}const y=sE(c),b=[c,h];this.sourceBuffers[y]=b,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,f)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:s}=this;if(a){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const l=a.sourceBuffers;for(let c=l.length;c--;)o&&l[c].abort(),a.removeSourceBuffer(l[c]);o&&a.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&Fj(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger($.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[sE(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new o0e(this.tracks)}onBufferCodecs(e,t){var n;const i=this.tracks,a=Object.keys(t);this.log(`BUFFER_CODECS: "${a}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),o=!s&&this.sourceBufferCount&&this.media&&a.some(l=>!i[l]);if(s||o){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${a}" SourceBuffers`);return}a.forEach(l=>{var c,f;const h=t[l],{id:p,codec:g,levelCodec:y,container:b,metadata:v,supplemental:E}=h;let S=i[l];const w=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[l],A=w!=null&&w.buffer?w:S,_=A?.pendingCodec||A?.codec,I=A?.levelCodec;S||(S=i[l]={buffer:void 0,listeners:[],codec:g,supplemental:E,container:b,levelCodec:y,metadata:v,id:p});const D=cg(_,I),P=D?.replace(jj,"$1");let k=cg(g,y);const M=(f=k)==null?void 0:f.replace(jj,"$1");k&&D&&P!==M&&(l.slice(0,5)==="audio"&&(k=D0(k,this.appendSource)),this.log(`switching codec ${_} to ${k}`),k!==(S.pendingCodec||S.codec)&&(S.pendingCodec=k),S.container=b,this.appendChangeType(l,b,k))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,a={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const o=s.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),s.codec=n,s.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,et.MAIN))==null?void 0:t.gap)===!0)return;const s={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>i||l!=null&&l.buffer&&pt.isBuffered(l.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,et.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:a,parent:s,frag:o,part:l,chunkMeta:c,offset:f}=t,h=c.buffering[a],{sn:p,cc:g}=o,y=self.performance.now();h.start=y;const b=o.stats.buffering,v=l?l.stats.buffering:null;b.start===0&&(b.start=y),v&&v.start===0&&(v.start=y);const E=n.audio;let S=!1;a==="audio"&&E?.container==="audio/mpeg"&&(S=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const w=n.video,A=w?.buffer;if(A&&p!=="initSegment"){const D=l||o,P=this.blockedAudioAppend;if(a==="audio"&&s!=="main"&&!this.blockedAudioAppend&&!(w.ending||w.ended)){const M=D.start+D.duration*.05,H=A.buffered,N=this.currentOp("video");!H.length&&!N?this.blockAudio(D):!N&&!pt.isBuffered(A,M)&&this.lastVideoAppendEnd<M&&this.blockAudio(D)}else if(a==="video"){const k=D.end;if(P){const M=P.frag.start;(k>M||k<this.lastVideoAppendEnd||pt.isBuffered(A,M))&&this.unblockAudio()}this.lastVideoAppendEnd=k}}const _=(l||o).start,I={label:`append-${a}`,execute:()=>{var D;h.executeStart=self.performance.now();const P=(D=this.tracks[a])==null?void 0:D.buffer;P&&(S?this.updateTimestampOffset(P,_,.1,a,p,g):f!==void 0&&Xe(f)&&this.updateTimestampOffset(P,f,1e-6,a,p,g)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const D=self.performance.now();h.executeEnd=h.end=D,b.first===0&&(b.first=D),v&&v.first===0&&(v.first=D);const P={};this.sourceBuffers.forEach(([k,M])=>{k&&(P[k]=pt.getBuffered(M))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger($.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:P})},onError:D=>{var P;const k={type:at.MEDIA_ERROR,parent:o.type,details:we.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:c,error:D,err:D,fatal:!1},M=(P=this.media)==null?void 0:P.error;if(D.code===DOMException.QUOTA_EXCEEDED_ERR||D.name=="QuotaExceededError"||"quota"in D)k.details=we.BUFFER_FULL_ERROR;else if(D.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!M)k.errorAction=yc(!0);else if(D.name===N8&&this.sourceBufferCount===0)k.errorAction=yc(!0);else{const H=++this.appendErrors[a];this.warn(`Failed ${H}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${M||"no media error"})`),(H>=this.hls.config.appendErrorMaxRetry||M)&&(k.fatal=!0)}this.hls.trigger($.ERROR,k)}};this.log(`queuing "${a}" append sn: ${p}${l?" p: "+l.index:""} of ${o.type===et.MAIN?"level":"track"} ${o.level} cc: ${g}`),this.append(I,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger($.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:a}=t;n?this.append(this.getFlushOp(n,i,a),n):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,a),s)})}onFragParsed(e,t){const{frag:n,part:i}=t,a=[],s=i?i.elementaryStreams:n.elementaryStreams;s[Vt.AUDIOVIDEO]?a.push("audiovideo"):(s[Vt.AUDIO]&&a.push("audio"),s[Vt.VIDEO]&&a.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:n.stats;this.hls.trigger($.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,a).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([s])=>{if(s){const o=this.tracks[s];(!t.type||t.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger($.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger($.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===we.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;Xe(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,a=n.currentTime,s=t.levelTargetDuration,o=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Xe(o)&&o>=0){const c=Math.max(o,s),f=Math.floor(a/s)*s-c;this.flushBackBuffer(a,s,f)}const l=i.frontBufferFlushThreshold;if(Xe(l)&&l>0){const c=Math.max(i.maxBufferLength,l),f=Math.max(c,s),h=Math.floor(a/s)*s+f;this.flushFrontBuffer(a,s,h)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=pt.getBuffered(a);if(o.length>0&&n>o.start(0)){var s;this.hls.trigger($.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger($.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger($.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const s=pt.getBuffered(a),o=s.length;if(o<2)return;const l=s.start(o-1),c=s.end(o-1);if(n>l||e>=l&&e<=c)return;this.hls.trigger($.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),f=Math.max(c,i);return{duration:1/0,start:c,end:f}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return Xe(a)?{duration:a}:null;const s=this.media.duration,o=Xe(n.duration)?n.duration:0;return i>o&&i>s||!Xe(s)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Xe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Xt(n)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger($.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,o=e[s];if(this.isPending(o)){const l=this.getTrackCodec(o,s),c=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(s)?" Queued":""} ${Xt(o)}`);try{const f=n.addSourceBuffer(c),h=sE(s),p=[s,f];t[h]=p,o.buffer=f}catch(f){var i;this.error(`error while trying to add sourceBuffer: ${f.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,sourceBufferName:s,mimeType:c,parent:o.id});return}this.trackSourceBuffer(s,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&Hd(n,"video")&&(i=Jpe(i,n));const a=cg(i,e.levelCodec);return a?t.slice(0,5)==="audio"?D0(a,this.appendSource):a:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,s)=>{const o=s.removedRanges;o!=null&&o.length&&this.hls.trigger($.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,t,n,i,a,s){const o=t-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${a} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=s?.buffer;if(!i||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Xe(i.duration)?i.duration:1/0,c=Xe(a.duration)?a.duration:1/0,f=Math.max(0,t),h=Math.min(n,l,c);h>f&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${f},${h}] from the ${e} SourceBuffer`),o.remove(f,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n?.buffer;if(!i)throw new l0e(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(s=>this.appendBlocker(s));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const s=n.bind(this,e);i.listeners.push({event:t,listener:s}),a.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function Fj(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function c0e(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function sE(r){return r==="audio"?1:0}class AD{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on($.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.BUFFER_CODECS,this.onBufferCodecs,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off($.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,AD.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let a=e.length-1;const s=Math.max(t,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=s||l.height>=s)&&i(l,e[o+1])){a=o;break}}return a}}const f0e={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Wn=f0e,d0e={HLS:"h"},h0e=d0e;class Ga{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof Ga?n:new Ga(n))),this.value=e,this.params=t}}const p0e="Dict";function m0e(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function g0e(r,e,t,n){return new Error(`failed to ${r} "${m0e(e)}" as ${t}`,{cause:n})}function Ka(r,e,t){return g0e("serialize",r,e,t)}class j8{constructor(e){this.description=e}}const Bj="Bare Item",y0e="Boolean";function v0e(r){if(typeof r!="boolean")throw Ka(r,y0e);return r?"?1":"?0"}function b0e(r){return btoa(String.fromCharCode(...r))}const x0e="Byte Sequence";function S0e(r){if(ArrayBuffer.isView(r)===!1)throw Ka(r,x0e);return`:${b0e(r)}:`}const E0e="Integer";function w0e(r){return r<-999999999999999||999999999999999<r}function F8(r){if(w0e(r))throw Ka(r,E0e);return r.toString()}function _0e(r){return`@${F8(r.getTime()/1e3)}`}function B8(r,e){if(r<0)return-B8(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}const T0e="Decimal";function A0e(r){const e=B8(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ka(r,T0e);const t=e.toString();return t.includes(".")?t:`${t}.0`}const D0e="String",O0e=/[\x00-\x1f\x7f]+/;function I0e(r){if(O0e.test(r))throw Ka(r,D0e);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function C0e(r){return r.description||r.toString().slice(7,-1)}const R0e="Token";function Uj(r){const e=C0e(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ka(e,R0e);return e}function BT(r){switch(typeof r){case"number":if(!Xe(r))throw Ka(r,Bj);return Number.isInteger(r)?F8(r):A0e(r);case"string":return I0e(r);case"symbol":return Uj(r);case"boolean":return v0e(r);case"object":if(r instanceof Date)return _0e(r);if(r instanceof Uint8Array)return S0e(r);if(r instanceof j8)return Uj(r);default:throw Ka(r,Bj)}}const P0e="Key";function UT(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw Ka(r,P0e);return r}function DD(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${UT(e)}`:`;${UT(e)}=${BT(t)}`).join("")}function U8(r){return r instanceof Ga?`${BT(r.value)}${DD(r.params)}`:BT(r)}function L0e(r){return`(${r.value.map(U8).join(" ")})${DD(r.params)}`}function k0e(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw Ka(r,p0e);const t=r instanceof Map?r.entries():Object.entries(r),n=e?.whitespace?" ":"";return Array.from(t).map(([i,a])=>{a instanceof Ga||(a=new Ga(a));let s=UT(i);return a.value===!0?s+=DD(a.params):(s+="=",Array.isArray(a.value)?s+=L0e(a):s+=U8(a)),s}).join(`,${n}`)}function $8(r,e){return k0e(r,e)}const xa="CMCD-Object",vr="CMCD-Request",wl="CMCD-Session",Ro="CMCD-Status",M0e={br:xa,ab:xa,d:xa,ot:xa,tb:xa,tpb:xa,lb:xa,tab:xa,lab:xa,url:xa,pb:vr,bl:vr,tbl:vr,dl:vr,ltc:vr,mtp:vr,nor:vr,nrr:vr,rc:vr,sn:vr,sta:vr,su:vr,ttfb:vr,ttfbb:vr,ttlb:vr,cmsdd:vr,cmsds:vr,smrt:vr,df:vr,cs:vr,ts:vr,cid:wl,pr:wl,sf:wl,sid:wl,st:wl,v:wl,msd:wl,bs:Ro,bsd:Ro,cdn:Ro,rtp:Ro,bg:Ro,pt:Ro,ec:Ro,e:Ro},N0e={REQUEST:vr};function j0e(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(i=>e[i]=t),e},{})}function F0e(r,e){const t={};if(!r)return t;const n=Object.keys(r),i=e?j0e(e):{};return n.reduce((a,s)=>{var o;const l=M0e[s]||i[s]||N0e.REQUEST,c=(o=a[l])!==null&&o!==void 0?o:a[l]={};return c[s]=r[s],a},t)}function B0e(r){return["ot","sf","st","e","sta"].includes(r)}function U0e(r){return typeof r=="number"?Xe(r):r!=null&&r!==""&&r!==!1}const H8="event";function $0e(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const mg=r=>Math.round(r),$T=(r,e)=>Array.isArray(r)?r.map(t=>$T(t,e)):r instanceof Ga&&typeof r.value=="string"?new Ga($T(r.value,e),r.params):(e.baseUrl&&(r=$0e(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),vm=r=>mg(r/100)*100,H0e=(r,e)=>{let t=r;return e.version>=2&&(r instanceof Ga&&typeof r.value=="string"?t=new Ga([r]):typeof r=="string"&&(t=[r])),$T(t,e)},G0e={br:mg,d:mg,bl:vm,dl:vm,mtp:vm,nor:H0e,rtp:vm,tb:mg},G8="request",K8="response",OD=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],K0e=["e"],z0e=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function $y(r){return z0e.test(r)}function Y0e(r){return OD.includes(r)||K0e.includes(r)||$y(r)}const z8=["d","dl","nor","ot","rtp","su"];function q0e(r){return OD.includes(r)||z8.includes(r)||$y(r)}const W0e=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function V0e(r){return OD.includes(r)||z8.includes(r)||W0e.includes(r)||$y(r)}const Q0e=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function X0e(r){return Q0e.includes(r)||$y(r)}const Z0e={[K8]:V0e,[H8]:Y0e,[G8]:q0e};function Y8(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,i=e.reportingMode||G8,a=n===1?X0e:Z0e[i];let s=Object.keys(r).filter(a);const o=e.filter;typeof o=="function"&&(s=s.filter(o));const l=i===K8||i===H8;l&&!s.includes("ts")&&s.push("ts"),n>1&&!s.includes("v")&&s.push("v");const c=Yt({},G0e,e.formatters),f={version:n,reportingMode:i,baseUrl:e.baseUrl};return s.sort().forEach(h=>{let p=r[h];const g=c[h];if(typeof g=="function"&&(p=g(p,f)),h==="v"){if(n===1)return;p=n}h=="pr"&&p===1||(l&&h==="ts"&&!Xe(p)&&(p=Date.now()),U0e(p)&&(B0e(h)&&typeof p=="string"&&(p=new j8(p)),t[h]=p))}),t}function J0e(r,e={}){const t={};if(!r)return t;const n=Y8(r,e),i=F0e(n,e?.customHeaderMap);return Object.entries(i).reduce((a,[s,o])=>{const l=$8(o,{whitespace:!1});return l&&(a[s]=l),a},t)}function eye(r,e,t){return Yt(r,J0e(e,t))}const tye="CMCD";function rye(r,e={}){return r?$8(Y8(r,e),{whitespace:!1}):""}function nye(r,e={}){if(!r)return"";const t=rye(r,e);return encodeURIComponent(t)}function iye(r,e={}){if(!r)return"";const t=nye(r,e);return`${tye}=${t}`}const $j=/CMCD=[^&#]+/;function aye(r,e,t){const n=iye(e,t);if(!n)return r;if($j.test(r))return r.replace($j,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class sye{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Wn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:s}=i,o=this.hls.levels[a.level],l=this.getObjectType(a),c={d:(s||a).duration*1e3,ot:l};(l===Wn.VIDEO||l===Wn.AUDIO||l==Wn.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const f=s?this.getNextPart(s):this.getNextFrag(a);f!=null&&f.url&&f.url!==a.url&&(c.nor=f.url),this.apply(i,c)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHED,this.onMediaDetached,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHED,this.onMediaDetached,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:h0e.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Yt(t,this.createData());const n=t.ot===Wn.INIT||t.ot===Wn.VIDEO||t.ot===Wn.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((s,o)=>(i.includes(o)&&(s[o]=t[o]),s),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),eye(e.headers,t,a)):e.url=aye(e.url,t,a)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t;const{index:n,fragment:i}=e,a=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(a){const{sn:s}=i;for(let o=a.length-1;o>=0;o--){const l=a[o];if(l.index===n&&l.fragment.sn===s)return a[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Wn.TIMED_TEXT;if(e.sn==="initSegment")return Wn.INIT;if(t==="audio")return Wn.AUDIO;if(t==="main")return this.hls.audioTracks.length?Wn.VIDEO:Wn.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===Wn.AUDIO)n=i.audioTracks;else{const a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;n=i.levels.slice(0,s)}return n.forEach(a=>{a.bitrate>t&&(t=a.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===Wn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:pt.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){t(a),this.loader.load(a,s,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){t(a),this.loader.load(a,s,o)}}}}const oye=3e5;class lye extends Xi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===ln.SendAlternateToPenaltyBox&&n.flags===hi.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,s=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&i?s=this.getPathwayForGroupId(o,c,s):l&&(s=l)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),n.resolved=this.pathwayId!==s),t.details===we.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Xt(a)} penalized: ${Xt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(a=>{i-n[a]>oye&&delete n[a]});for(let a=0;a<e.length;a++){const s=e[a];if(s in n)continue;if(s===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(s),t.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,d8(t),this.hls.trigger($.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(t===St.AUDIO_TRACK&&i[a].hasAudioGroup(e)||t===St.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(a=>{const{ID:s,"BASE-ID":o,"URI-REPLACEMENT":l}=a;if(t.some(f=>f.pathwayId===s))return;const c=this.getLevelsForPathway(o).map(f=>{const h=new fr(f.attrs);h["PATHWAY-ID"]=s;const p=h.AUDIO&&`${h.AUDIO}_clone_${s}`,g=h.SUBTITLES&&`${h.SUBTITLES}_clone_${s}`;p&&(n[h.AUDIO]=p,h.AUDIO=p),g&&(i[h.SUBTITLES]=g,h.SUBTITLES=g);const y=q8(f.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),b=new Kd({attrs:h,audioCodec:f.audioCodec,bitrate:f.bitrate,height:f.height,name:f.name,url:y,videoCodec:f.videoCodec,width:f.width});if(f.audioGroups)for(let v=1;v<f.audioGroups.length;v++)b.addGroupId("audio",`${f.audioGroups[v]}_clone_${s}`);if(f.subtitleGroups)for(let v=1;v<f.subtitleGroups.length;v++)b.addGroupId("text",`${f.subtitleGroups[v]}_clone_${s}`);return b});t.push(...c),Hj(this.audioTracks,n,l,s),Hj(this.subtitleTracks,i,l,s)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const f=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+f)}const a={responseType:"json",url:i.href},s=t.steeringManifestLoadPolicy.default,o=s.errorRetry||s.timeoutRetry||{},l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(f,h,p,g)=>{this.log(`Loaded steering manifest: "${i}"`);const y=f.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":b,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":E}=y;if(b)try{this.uri=new self.URL(b,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||p.url),v&&this.clonePathways(v);const S={steeringManifest:y,url:i.toString()};this.hls.trigger($.STEERING_MANIFEST_LOADED,S),E&&this.updatePathwayPriority(E)},onError:(f,h,p,g)=>{if(this.log(`Error loading steering manifest: ${f.code} ${f.text} (${h.url})`),this.stopLoad(),f.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let y=this.timeToLoad*1e3;if(f.code===429){const b=this.loader;if(typeof b?.getResponseHeader=="function"){const v=b.getResponseHeader("Retry-After");v&&(y=parseFloat(v)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,y)},onTimeout:(f,h,p)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function Hj(r,e,t,n){r&&Object.keys(e).forEach(i=>{const a=r.filter(s=>s.groupId===i).map(s=>{const o=Yt({},s);return o.details=void 0,o.attrs=new fr(o.attrs),o.url=o.attrs.URI=q8(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...a)})}function q8(r,e,t,n){const{HOST:i,PARAMS:a,[t]:s}=n;let o;e&&(o=s?.[e],o&&(r=o));const l=new self.URL(r);return i&&!o&&(l.host=i),a&&Object.keys(a).sort().forEach(c=>{c&&l.searchParams.set(c,a[c])}),l.href}class bc extends Xi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=bc.CDMCleanupPromise?[bc.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,a=`"${t.type}" event: init data type: "${n}"`;if(this.debug(a),i!==null){if(!this.keyFormatPromise){let s=Object.keys(this.keySystemAccessPromises);s.length||(s=pd(this.config));const o=s.map(ZS).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(s=>{const o=dg(s);if(n!=="sinf"||o!==dr.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let l;try{const g=Fr(new Uint8Array(i)),y=gD(JSON.parse(g).sinf),b=$5(y);if(!b)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(b.subarray(8,24))}catch(g){this.warn(`${a} Failed to parse sinf: ${g}`);return}const c=un(l),{keyIdToKeySessionPromise:f,mediaKeySessions:h}=this;let p=f[c];for(let g=0;g<h.length;g++){const y=h[g],b=y.decryptdata;if(!b.keyId)continue;const v=un(b.keyId);if(P0(l,b.keyId)||b.uri.replace(/-/g,"").indexOf(c)!==-1){if(p=f[v],!p)continue;if(b.pssh)break;delete f[v],b.pssh=new Uint8Array(i),b.keyId=l,p=f[c]=p.then(()=>this.generateRequestWithPreferredKeySession(y,n,i,"encrypted-event-key-match")),p.catch(E=>this.handleError(E));break}}p||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${h.length}.`))}).catch(s=>this.handleError(s))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on($.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on($.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on($.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on($.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on($.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off($.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off($.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off($.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off($.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off($.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t?.[e];if(i)return i.licenseUrl;if(e===dr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(s,o,l)=>!!s&&l.indexOf(s)===o,i=t.map(s=>s.audioCodec).filter(n),a=t.map(s=>s.videoCodec).filter(n);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((s,o)=>{const l=c=>{const f=c.shift();this.getMediaKeysPromise(f,i,a).then(h=>s({keySystem:f,mediaKeys:h})).catch(h=>{c.length?l(c):h instanceof di?o(h):o(new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return i8===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){var i;const a=Hme(e,t,n,this.config.drmSystemOptions||{});let s=this.keySystemAccessPromises[e],o=(i=s)==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Xt(a)}`),o=this.requestMediaKeySystemAccess(e,a);const l=s=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const f=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const h=l.mediaKeys=c.createMediaKeys().then(p=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,f.then(g=>g?this.setMediaKeysServerCertificate(p,e,g):p)));return h.catch(p=>{this.error(`Failed to create media-keys for "${e}"}: ${p}`)}),h})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${un(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),a={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=bm(t),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,a,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${un(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>ZS(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=ZS(i);a?t(a):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=pd(this.config),n=e.map(dg).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const i=uye(e,t[n]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,n=bm(t),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(t)==="internal-error"){const o=Gj(i||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const a=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${a}`);const s=this.keyIdToKeySessionPromise[n];if(!s){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${a}`),this.attemptSetMediaKeys(l,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:t}))))).then(l=>{const c="cenc",f=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,c,f,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return s.catch(o=>{if(o instanceof di){const l=Bt({},o.data);this.getKeyStatus(t)==="internal-error"&&(l.decryptdata=t);const c=new di(l,o.message);this.handleError(c,e.frag)}}),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof di){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${un(n.keyId||[])})`:""}`),this.hls.trigger($.ERROR,e.data)}else this.error(e.message),this.hls.trigger($.ERROR,{type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=bm(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=dg(e.keyFormat),a=i?[i]:pd(this.config);return this.attemptKeySystemAccess(a)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=pd(this.config)),e.length===0)throw new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Xt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((a,s)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return s(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(a).catch(s)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>n.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var a;const s=(a=this.config.drmSystems)==null||(a=a[e.keySystem])==null?void 0:a.generateRequest;if(s)try{const y=s.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=y.initData?y.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const o=bm(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${o} URI: ${l} (init data type: ${t} length: ${n.byteLength})`);const c=new vD,f=e._onmessage=y=>{const b=e.mediaKeysSession;if(!b){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:E}=y;this.log(`"${v}" message event for session "${b.sessionId}" message size: ${E.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,E).catch(S=>{c.eventNames().length?c.emit("error",S):this.handleError(S)}):v==="license-release"?e.keySystem===dr.FAIRPLAY&&this.updateKeySession(e,LT("acknowledged")).then(()=>this.removeSession(e)).catch(S=>this.handleError(S)):this.warn(`unhandled media key message type "${v}"`)},h=(y,b)=>{b.keyStatus=y;let v;y.startsWith("usable")?c.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?v=Gj(y,b.decryptdata):y==="expired"?v=new Error(`key expired (keyId: ${o})`):y==="released"?v=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${o})`),v&&(c.eventNames().length?c.emit("error",v):this.handleError(v))},p=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const v=this.getKeyStatuses(e);if(!Object.keys(v).some(A=>v[A]!=="status-pending"))return;if(v[o]==="expired"){this.log(`Expired key ${Xt(v)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let S=v[o];if(S)h(S,e);else{var w;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(w=e.keyStatusTimeouts)[o]||(w[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const _=this.getKeyStatus(e.decryptdata);if(_&&_!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${_} from other session.`),h(_,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),S="internal-error",h(S,e)},1e3)),this.log(`No status for keyId ${o} (${Xt(v)}).`)}};Pn(e.mediaKeysSession,"message",f),Pn(e.mediaKeysSession,"keystatuseschange",p);const g=new Promise((y,b)=>{c.on("error",b),c.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(y=>{throw new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>g).catch(y=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const o=i;i=n,n=o}const a="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===dr.PLAYREADY&&a.length===16){const o=un(a);t[o]=n,r8(a)}const s=un(a);n==="internal-error"&&(this.bannedKeyIds[s]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${s} key-session "${e.mediaKeysSession.sessionId}"`),t[s]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,o)=>{const l={responseType:"arraybuffer",url:a},c=t.certLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{s(p.data)},onError:(p,g,y,b)=>{o(new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Bt({url:l.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,g,y)=>{o(new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,g,y)=>{o(new Error("aborted"))}};i.load(l,f,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,a)=>{e.setServerCertificate(n).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),i(e)}).catch(s=>{a(new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let f;for(let h=0,p=a.length;h<p;h++){var s,o;f=a[h];const g=(s=f.querySelector("name"))==null?void 0:s.textContent,y=(o=f.querySelector("value"))==null?void 0:o.textContent;g&&y&&e.setRequestHeader(g,y)}}const l=i.querySelector("Challenge"),c=l?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return LT(atob(c))}setupLicenseXHR(e,t,n,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,t,n,i)}).catch(s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),a.call(this.hls,e,t,n,i)}).then(s=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,s,e)}catch(f){this.error(f)}i(l)}else{const l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)a(new di({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${s}). Status: ${o.status} (${o.statusText})`));else{const f=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${f} attempts left`),this.requestLicense(e,t).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,s,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==dr.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)}).catch(a)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Pn(n,"encrypted",this.onMediaEncrypted),Pn(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Jn(e,"encrypted",this.onMediaEncrypted),Jn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,zo.clearKeyUriToKeyIdMap();const a=i.length;bc.CDMCleanupPromise=Promise.all(i.map(s=>this.removeSession(s)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(s=>{this.log(`Could not clear media keys: ${s}`),this.hls&&this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))||Promise.resolve())).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`),this.hls&&this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})}).then(()=>{a&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${un(i?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const a=this.mediaKeySessions.indexOf(e);a>-1&&this.mediaKeySessions.splice(a,1);const{keyStatusTimeouts:s}=e;s&&Object.keys(s).forEach(c=>self.clearTimeout(s[c]));const{drmSystemOptions:o}=this.config;return(Kme(o)?new Promise((c,f)=>{self.setTimeout(()=>f(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(f)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}bc.CDMCleanupPromise=void 0;function bm(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return un(r.keyId)}function uye(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class di extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function Gj(r,e){const t=r==="output-restricted",n=t?we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:we.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new di({type:at.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class cye{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on($.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off($.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const a=i-this.lastTime,s=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*s/a,c=this.hls;if(c.trigger($.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:n}),l>0&&s>c.config.fpsDroppedMonitoringThreshold*o){let f=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=f)&&(f=f-1,c.trigger($.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:c.currentLevel}),c.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function W8(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function V8(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){$t.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){$t.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function fc(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function HT(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const a=dye(r.cues,e,t);for(let s=0;s<a.length;s++)(!n||n(a[s]))&&r.removeCue(a[s])}i==="disabled"&&(r.mode=i)}function fye(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t,a;for(;n<=i;)if(a=Math.floor((i+n)/2),e<r[a].startTime)i=a-1;else if(e>r[a].startTime&&n<t)n=a+1;else return a;return r[n].startTime-e<e-r[i].startTime?n:i}function dye(r,e,t){const n=[],i=fye(r,e);if(i>-1)for(let a=i,s=r.length;a<s;a++){const o=r[a];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function gg(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class hye extends TD{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=gg(this.media.textTracks);for(let a=0;a<n.length;a++)if(n[a].mode==="hidden")t=n[a];else if(n[a].mode==="showing"){t=n[a];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;gg(n.textTracks).forEach(s=>{fc(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:a}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${s?.groupId}`);return}const o=s.details;s.details=t.details,this.log(`Subtitle track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(s=>i?.indexOf(s)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(f=>f.default)&&(this.selectDefaultTrack=!1),s.forEach((f,h)=>{f.id=h});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const f=La(o,s);if(f>-1)a=s[f];else{const h=La(o,this.tracks);a=this.tracks[h]}}let l=this.findTrackId(a);l===-1&&a&&(l=this.findTrackId(null));const c={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger($.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const a=t[i];if(!(n&&!a.default||!n&&!e)&&(!e||ql(a,e)))return i}if(e){for(let i=0;i<t.length;i++){const a=t[i];if(Wd(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const a=t[i];if(Wd(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(FT(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===St.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&ql(e,n))return n;const i=La(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(n)return null;{const a=La(e,t);if(a>-1)return t[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,t),s=e.details,o=s?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger($.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=gg(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(a=>FT(n,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger($.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:l,type:c,url:f}=i;this.hls.trigger($.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:l,type:c,url:f});const h=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(h)}}function pye(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?a:a&3|8).toString(16)})}}}function xd(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const xc=.025;let N0=(function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r})({});function mye(r,e,t){return`${r.identifier}-${t+1}-${xd(e)}`}class gye{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return oE(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=oE(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Xe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return oE(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<xc))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?N0.Range:N0.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return yye(this)}}function oE(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<xc)?e.start:e.start+e.duration}function Q8(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function lE(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function yye(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function lc(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class vye{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger($.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(t);this.interstitial=n,this.assetItem=i;const s=()=>{this.hasDetails=!0};a.once($.LEVEL_LOADED,s),a.once($.AUDIO_TRACK_LOADED,s),a.once($.SUBTITLE_TRACK_LOADED,s),a.on($.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on($.BUFFER_APPENDED,()=>{const f=this.bufferedEnd;this.reachedPlayout(f)&&(this._bufferedEosTime=f,a.trigger($.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=Q8(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,a=pt.bufferInfo(e,i,0);return this.getAssetTime(a.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=pt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,n){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,n){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${lc(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Kj=.033;class bye extends Xi{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(a=i[n])!=null&&a.event;){var a;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let a=n[i];if(t&&t!=="primary"&&(a=a[t]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const a=n[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let a=0;a<i;a++){const s=n[a];if(!s.error){const o=s.timelineStart;if(t===o||t>o&&(t<o+(s.duration||0)||a===i-1))return a}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,a=this.events,s=this.parseDateRanges(i,{url:n.url},t),o=Object.keys(i),l=a?a.filter(c=>!o.includes(c.identifier)):[];s.length&&s.sort((c,f)=>{const h=c.cue.pre,p=c.cue.post,g=f.cue.pre,y=f.cue.post;if(h&&!g)return-1;if(g&&!h||p&&!y)return 1;if(y&&!p)return-1;if(!h&&!g&&!p&&!y){const b=c.startTime,v=f.startTime;if(b!==v)return b-v}return c.dateRange.tagOrder-f.dateRange.tagOrder}),this.events=s,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,t=[],n=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const a=this.items,s=this.parseSchedule(i,e);(n||t.length||a?.length!==s.length||s.some((l,c)=>Math.abs(l.playout.start-a[c].playout.start)>.005||Math.abs(l.playout.end-a[c].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(t,a))}}parseDateRanges(e,t,n){const i=[],a=Object.keys(e);for(let s=0;s<a.length;s++){const o=a[s],l=e[o];if(l.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(l):(c=new gye(l,t),this.eventMap[o]=c,n===!1&&(c.appendInPlace=n)),i.push(c)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,a=i.live?1/0:i.edge;let s=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,c=0;if(e.forEach((f,h)=>{const p=f.cue.pre,g=f.cue.post,y=e[h-1]||null,b=f.appendInPlace,v=g?a:f.startOffset,E=f.duration,S=f.timelineOccupancy===N0.Range?E:0,w=f.resumptionOffset,A=y?.startTime===v,_=v+f.cumulativeDuration;let I=b?_+E:v+w;if(p||!g&&v<=0){const P=c;c+=S,f.timelineStart=_;const k=s;s+=E,n.push({event:f,start:_,end:I,playout:{start:k,end:s},integrated:{start:P,end:c}})}else if(v<=a){if(!A){const M=v-l;if(M>Kj){const H=l,N=c;c+=M;const Q=s;s+=M;const z={previousEvent:e[h-1]||null,nextEvent:f,start:H,end:H+M,playout:{start:Q,end:s},integrated:{start:N,end:c}};n.push(z)}else M>0&&y&&(y.cumulativeDuration+=M,n[n.length-1].end=v)}g&&(I=_),f.timelineStart=_;const P=c;c+=S;const k=s;s+=E,n.push({event:f,start:_,end:I,playout:{start:k,end:s},integrated:{start:P,end:c}})}else return;const D=f.resumeTime;g||D>a?l=a:l=D}),l<a){var o;const f=l,h=c,p=a-l;c+=p;const g=s;s+=p,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:f+p,playout:{start:g,end:s},integrated:{start:h,end:c}})}this.setDurations(a,s,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let a=0,s=-1;e.forEach((o,l)=>{const c=o.cue.pre,f=o.cue.post,h=c?0:f?i:o.startTime;this.updateAssetDurations(o),s===h?o.cumulativeDuration=a:(a=0,s=h),!f&&o.snapOptions.in&&(o.resumeAnchor=tu(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<Kj&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const g=Xe(o.resumeOffset)?o.resumeOffset:o.duration;a+=g})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>xc?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(s=>{const o=t[s].details,l=o.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${s} playlist end ${l}`),!1;const c=tu(null,o.fragments,n);if(!c)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const f=s==="audio"?.175:0;return Math.abs(c.start-n)<xc+f||Math.abs(c.end-n)<xc+f?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${s} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,a=!1;for(let s=0;s<e.assetList.length;s++){const o=e.assetList[s],l=t+n;o.startOffset=n,o.timelineStart=l,i||(i=o.duration===null),a||(a=!!o.error);const c=o.error?0:o.duration||0;n+=c}i&&!a?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function ta(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class xye{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=Q8(n,this.hls.sessionId,e.baseUrl)}catch(p){const g=this.assignAssetListError(e,we.ASSET_LIST_LOAD_ERROR,p,n);this.hls.trigger($.ERROR,g);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const a=this.hls.config,s=a.loader,o=new s(a),l={responseType:"json",url:i.href},c=a.interstitialAssetListLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{const v=p.data,E=v?.ASSETS;if(!Array.isArray(E)){const S=this.assignAssetListError(e,we.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,g,b);this.hls.trigger($.ERROR,S);return}e.assetListResponse=v,this.hls.trigger($.ASSET_LIST_LOADED,{event:e,assetListResponse:v,networkDetails:b})},onError:(p,g,y,b)=>{const v=this.assignAssetListError(e,we.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${g.url})`),g.url,b,y);this.hls.trigger($.ERROR,v)},onTimeout:(p,g,y)=>{const b=this.assignAssetListError(e,we.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${g.url})`),g.url,p,y);this.hls.trigger($.ERROR,b)}};return o.load(l,f,h),this.hls.trigger($.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,n,i,a,s){return e.error=n,{type:at.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:s,stats:a}}}function zj(r){var e;r==null||(e=r.play())==null||e.catch(()=>{})}function xm(r,e){return`[${r}] Advancing timeline position to ${e}`}class Sye extends Xi{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),s&&n<o.start||n>=o.end){var l;const g=this.findItemIndex(o);let y=this.schedule.findItemIndexAtTime(n);if(y===-1&&(y=g+(s?-1:1),this.log(`seeked ${s?"back ":""}to position not covered by schedule ${n} (resolving from ${g} to ${y})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!s&&y>g){const b=this.schedule.findJumpRestrictedIndex(g+1,y);if(b>g){this.setSchedulePosition(b);return}}this.setSchedulePosition(y);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const g=o.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,g))}return}const f=c.timelineStart,h=c.duration||0;if(s&&n<f||n>=f+h){var p;(p=o.event)!=null&&p.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,c)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const s=a.timelineStart+(a.duration||0);n>=s&&this.setScheduleToAssetAtTime(n,a)},this.onScheduleUpdate=(n,i)=>{const a=this.schedule;if(!a)return;const s=this.playingItem,o=a.events||[],l=a.items||[],c=a.durations,f=n.map(b=>b.identifier),h=!!(o.length||f.length);(h||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(b=>ta(b))} pos: ${this.timelinePos}`),f.length&&this.log(`Removed events ${f}`);let p=null,g=null;s&&(p=this.updateItem(s,this.timelinePos),this.itemsMatch(s,p)?this.playingItem=p:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(g=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,g)?this.bufferingItem=g:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),n.forEach(b=>{b.assetList.forEach(v=>{this.clearAssetPlayer(v.identifier,null)})}),this.playerQueue.forEach(b=>{if(b.interstitial.appendInPlace){const v=b.assetItem.timelineStart,E=b.timelineOffset-v;if(E)try{b.timelineOffset=v}catch(S){Math.abs(E)>xc&&this.warn(`${S} ("${b.assetId}" ${b.timelineOffset}->${v})`)}}}),h||i){if(this.hls.trigger($.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:c,removedIds:f}),this.isInterstitial(s)&&f.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}s&&this.trimInPlace(p,s),y&&g!==p&&this.trimInPlace(g,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new xye(e),this.schedule=new bye(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on($.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on($.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on($.MEDIA_ENDED,this.onMediaEnded,this),e.on($.ERROR,this.onError,this),e.on($.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off($.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off($.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off($.MEDIA_ENDED,this.onMediaEnded,this),e.off($.ERROR,this.onError,this),e.off($.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Jn(e,"play",this.onPlay),Jn(e,"pause",this.onPause),Jn(e,"seeking",this.onSeeking),Jn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Pn(n,"seeking",this.onSeeking),Pn(n,"timeupdate",this.onTimeupdate),Pn(n,"play",this.onPlay),Pn(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(n);this.setSchedulePosition(a)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.log(`Removing schedule state for detachedData and ${a}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=h=>h&&e.getAssetPlayer(h.identifier),i=(h,p,g,y,b)=>{if(h){let v=h[p].start;const E=h.event;if(E){if(p==="playout"||E.timelineOccupancy!==N0.Point){const S=n(g);S?.interstitial===E&&(v+=S.assetItem.startOffset+S[b])}}else{const S=y==="bufferedPos"?s():e[y];v+=S-h.start}return v}return 0},a=(h,p)=>{var g;if(h!==0&&p!=="primary"&&(g=e.schedule)!=null&&g.length){var y;const b=e.schedule.findItemIndexAtTime(h),v=(y=e.schedule.items)==null?void 0:y[b];if(v){const E=v[p].start-v.start;return h+E}}return h},s=()=>{const h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var p,g;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:((g=e.schedule)==null?void 0:g.durations[h])||0},l=(h,p)=>{var g,y;const b=e.effectivePlayingItem;if(b!=null&&(g=b.event)!=null&&g.restrictions.skip||!e.schedule)return;e.log(`seek to ${h} "${p}"`);const v=e.effectivePlayingItem,E=e.schedule.findItemIndexAtTime(h,p),S=(y=e.schedule.items)==null?void 0:y[E],w=e.getBufferingPlayer(),A=w?.interstitial,_=A?.appendInPlace,I=v&&e.itemsMatch(v,S);if(v&&(_||I)){const D=n(e.playingAsset),P=D?.media||e.primaryMedia;if(P){const k=p==="primary"?P.currentTime:i(v,p,e.playingAsset,"timelinePos","currentTime"),M=h-k,H=(_?k:P.currentTime)+M;if(H>=0&&(!D||_||H<=D.duration)){P.currentTime=H;return}}}if(S){let D=h;if(p!=="primary"){const k=S[p].start,M=h-k;D=S.start+M}const P=!e.isInterstitial(S);if((!e.isInterstitial(v)||v.event.appendInPlace)&&(P||S.event.appendInPlace)){const k=e.media||(_?w?.media:null);k&&(k.currentTime=D)}else if(v){const k=e.findItemIndex(v);if(E>k){const H=e.schedule.findJumpRestrictedIndex(k+1,E);if(H>k){e.setSchedulePosition(H);return}}let M=0;if(P)e.timelinePos=D,e.checkBuffer();else{const H=S.event.assetList,N=h-(S[p]||S).start;for(let Q=H.length;Q--;){const z=H[Q];if(z.duration&&N>=z.startOffset&&N<z.startOffset+z.duration){M=Q;break}}}e.setSchedulePosition(E,M)}}},c=()=>{const h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;const p=t();return e.isInterstitial(p)?p:null},f={get bufferedEnd(){const h=t(),p=e.bufferingItem;if(p&&p===h){var g;return i(p,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-p.playout.start||((g=e.bufferingAsset)==null?void 0:g.startOffset)||0}return 0},get currentTime(){const h=c(),p=e.effectivePlayingItem;return p&&p===h?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(h){const p=c(),g=e.effectivePlayingItem;g&&g===p&&l(h+g.playout.start,"playout")},get duration(){const h=c();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;const p=(h=c())==null?void 0:h.event.assetList;return p?p.map(g=>e.getAssetPlayer(g.identifier)):[]},get playingIndex(){var h;const p=(h=c())==null?void 0:h.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var h;return((h=e.schedule)==null||(h=h.events)==null?void 0:h.slice(0))||[]},get schedule(){var h;return((h=e.schedule)==null||(h=h.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return c()?f:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const h=t();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return s()},get currentTime(){const h=e.timelinePos;return h>0?h:0},set currentTime(h){l(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){l(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return a(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{const h=e.effectivePlayingItem,p=h?.event;if(p&&!p.restrictions.skip){const g=e.findItemIndex(h);if(p.appendInPlace){const y=h.playout.start+h.event.duration;l(y+.001,"playout")}else e.advanceAfterAssetEnded(p,g,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const a=(t=i)==null?void 0:t.currentTime;if(!(a===void 0||!Xe(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Xt(a)}`),this.detachedData=a}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let a=null;const s=this.hls,o=e!==s,l=o&&e.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource;let f;if(s.media)l&&(a=s.transferMedia(),this.detachedData=a),f="Primary";else if(c){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),f=`${y}`):f="detached MediaSource"}else f="detached media";if(!a){if(c)a=this.detachedData,this.log(`using detachedData: MediaSource ${Xt(a)}`);else if(!this.detachedData||s.media===t){const y=this.playerQueue;y.length>1&&y.forEach(b=>{if(o&&b.interstitial.appendInPlace!==l){const v=b.interstitial;this.clearInterstitial(b.interstitial,null),v.appendInPlace=!1,v.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${v}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const h=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",p=h&&a?a:t;this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${f} (media.currentTime: ${t.currentTime})`);const g=this.schedule;if(p===a&&g){const y=o&&e.assetId===g.assetIdAtEnd;p.overrides={duration:g.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const a=this.hls.startPosition;if(this.log(xm("checkStart",a)),this.timelinePos=a,t.length&&t[0].cue.pre){const s=e.findEventIndex(t[0].identifier);this.setSchedulePosition(s)}else if(a>=0||!this.primaryLive){const s=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAssetBuffering(e,t){const n=e.event,i=n.findAssetIndex(t),a=lE(n,i);if(!n.isAssetPastPlayoutLimit(a))this.bufferedToEvent(e,a);else if(this.schedule){var s;const o=(s=this.schedule.items)==null?void 0:s[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,n){const i=lE(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const a=this.schedule.items;if(a){const s=t+1,o=a.length;if(s>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(xm("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(s)}}}else{if(e.appendInPlace){const a=e.assetList[i];a&&this.advanceInPlace(a.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const i=t.parentIdentifier,a=n.getEvent(i);if(a){const s=n.findEventIndex(i),o=n.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,s,o-1)}}setSchedulePosition(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const a=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${a&&ta(a)}) pos: ${this.timelinePos}`);const s=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(s)){const f=s.event,h=this.playingAsset,p=h?.identifier,g=p?this.getAssetPlayer(p):null;if(g&&p&&(!this.eventItemsMatch(s,a)||t!==void 0&&p!==f.assetList[t].identifier)){var l;const y=f.findAssetIndex(h);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${f.assetList.length} ${lc(h)}`),this.endedAsset=h,this.playingAsset=null,this.hls.trigger($.INTERSTITIAL_ASSET_ENDED,{asset:h,assetListIndex:y,event:f,schedule:i.slice(0),scheduleIndex:e,player:g}),s!==this.playingItem){this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(f,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(p,a),g.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(s,a)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${f} ${ta(s)}`),f.hasPlayed=!0,this.hls.trigger($.INTERSTITIAL_ENDED,{event:f,schedule:i.slice(0),scheduleIndex:e}),f.cue.once)){var c;this.updateSchedule();const y=(c=this.schedule)==null?void 0:c.items;if(a&&y){const b=this.findItemIndex(a);this.advanceSchedule(b,y,t,s,o)}return}}this.advanceSchedule(e,i,t,s,o)}advanceSchedule(e,t,n,i,a){const s=this.schedule;if(!s)return;const o=t[e]||null,l=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(f=>{const h=f.interstitial,p=s.findEventIndex(h.identifier);(p<e||p>e+1)&&this.clearInterstitial(h,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const f=o.event;if(n===void 0){n=s.findAssetIndex(f,this.timelinePos);const y=lE(f,n-1);if(f.isAssetPastPlayoutLimit(y)||f.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(f,e,n);return}n=y}const h=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let p=this.preloadAssets(f,n);if(this.eventItemsMatch(o,h||i)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${ta(o)} ${f.appendInPlace?"append in place":""}`),this.hls.trigger($.INTERSTITIAL_STARTED,{event:f,schedule:t.slice(0),scheduleIndex:e})),!f.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${f}`);return}if(f.assetListLoader&&(f.assetListLoader.destroy(),f.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${f}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const g=f.assetList[n];if(!g){this.advanceAfterAssetEnded(f,e,n||0);return}if(p||(p=this.getAssetPlayer(g.identifier)),p===null||p.destroyed){const y=f.assetList.length;this.warn(`asset ${n+1}/${y} player destroyed ${f}`),p=this.createAssetPlayer(f,g,n),p.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&f.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(p,n,t,e,l),this.shouldPlay&&zj(p.media)}else o?(this.resumePrimary(o,e,i),this.shouldPlay&&zj(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i,a;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${ta(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(xm("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const s=(a=this.schedule)==null?void 0:a.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ta(e)}`),this.hls.trigger($.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:pt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(xm("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off($.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on($.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const i=Bt(Bt({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Bt(Bt({},this.altSelection),{},{audio:n});return}const a=Bt(Bt({},i),{},{audio:n});this.mediaSelection=a}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Bt(Bt({},this.altSelection),{},{subtitles:n});return}const a=Bt(Bt({},i),{},{subtitles:n});this.mediaSelection=a}onAudioTrackSwitching(e,t){const n=ej(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=ej(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const a=t[i];if(a.cue.post){var n;const s=this.schedule.findEventIndex(a.identifier),o=(n=this.schedule.items)==null?void 0:n[s];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const a=this.findItemIndex(e,t);return i[a]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((a,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(a.identifier,null)});const n=e.end+.25,i=pt.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${ta(e)} (was ${ta(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const i=pt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,t,n){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],a)){this.bufferedPos=e;return}const s=this.playingItem,o=this.findItemIndex(s);let l=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const f=this.findItemIndex(a),h=Math.min(f+1,t.length-1),p=t[h];if((l===-1&&a&&e>=a.end||(c=p.event)!=null&&c.appendInPlace&&e+.01>=p.start)&&(l=h),this.isInterstitial(a)){const g=a.event;if(h-o>1&&g.appendInPlace===!1||g.assetList.length===0&&g.assetListLoader)return}if(this.bufferedPos=e,l>f&&l>o)this.bufferedToItem(p);else{const g=this.primaryDetails;this.primaryLive&&g&&e>g.edge-g.targetduration&&p.start<g.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(p)&&this.preloadAssets(p.event,0)}}else n&&s&&!this.itemsMatch(s,a)&&(l===o?this.bufferedToItem(s):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:i,events:a}=n;if(!i||!a)return t;const s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ta(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const c=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((f,h)=>{const p=this.getAssetPlayer(f.identifier);p&&(h===c&&p.loadSource(),p.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger($.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,a=n.cue.once;if(i||!a){const s=this.preloadAssets(n,t);if(s!=null&&s.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(s,o)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,s=e.cue.once;if(a){const l=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,f=0;if(!this.playingItem&&this.primaryLive&&(f=this.hls.startPosition,f===-1&&(f=this.hls.liveSyncPosition||0)),f&&!(e.cue.pre||e.cue.post)){const p=f-l;p>0&&(c=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${c?` live-start: ${f} start-offset: ${c}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const h=this.assetListLoader.loadAssetList(e,c);h&&(e.assetListLoader=h)}else if(!s&&i){for(let c=t;c<i;c++){const f=e.assetList[c],h=this.getAssetPlayerQueueIndex(f.identifier);(h===-1||this.playerQueue[h].destroyed)&&!f.error&&this.createAssetPlayer(e,f,c)}const l=e.assetList[t];if(l){const c=this.getAssetPlayer(l.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger($.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,a,s){const o={parentIdentifier:e.identifier,identifier:mye(e,s,t),duration:a,startOffset:n,timelineStart:i,uri:s};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,n){const i=this.hls,a=i.userConfig;let s=a.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(s||o)&&(s=Yt({},s),o.videoCodec&&(s.videoCodec=o.videoCodec),o.videoRange&&(s.allowedVideoRanges=[o.videoRange]));const l=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack];let f=0;if(this.primaryLive||e.appendInPlace){const A=this.timelinePos-t.timelineStart;if(A>1){const _=t.duration;_&&A<_&&(f=A)}}const h=t.identifier,p=Bt(Bt({},a),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:f,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:l||a.audioPreference,subtitlePreference:c||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const g=p.cmcd;g!=null&&g.sessionId&&g.contentId&&(p.cmcd=Yt({},g,{contentId:xd(t.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);const y=new vye(this.HlsPlayerClass,p,e,t);this.playerQueue.push(y),e.assetList[n]=t;let b=!0;const v=A=>{if(A.live){var _;const P=new Error(`Interstitials MUST be VOD assets ${e}`),k={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:P},M=((_=this.schedule)==null?void 0:_.findEventIndex(e.identifier))||-1;this.handleAssetItemError(k,e,M,n,P.message);return}const I=A.edge-A.fragmentStart,D=t.duration;(b||D===null||I>D)&&(b=!1,this.log(`Interstitial asset "${h}" duration change ${D} > ${I}`),t.duration=I,this.updateSchedule())};y.on($.LEVEL_UPDATED,(A,{details:_})=>v(_)),y.on($.LEVEL_PTS_UPDATED,(A,{details:_})=>v(_)),y.on($.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const E=(A,_)=>{const I=this.getAssetPlayer(h);if(I&&_.tracks){I.off($.BUFFER_CODECS,E),I.tracks=_.tracks;const D=this.primaryMedia;this.bufferingAsset===I.assetItem&&D&&!I.media&&this.bufferAssetPlayer(I,D)}};y.on($.BUFFER_CODECS,E);const S=()=>{var A;const _=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${_}`),!_||!this.schedule)return;const I=this.schedule.findEventIndex(e.identifier),D=(A=this.schedule.items)==null?void 0:A[I];this.isInterstitial(D)&&this.advanceAssetBuffering(D,t)};y.on($.BUFFERED_TO_END,S);const w=A=>()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;this.shouldPlay=!0;const I=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,I,A)};return y.once($.MEDIA_ENDED,w(n)),y.once($.PLAYOUT_LIMIT_REACHED,w(1/0)),y.on($.ERROR,(A,_)=>{if(!this.schedule)return;const I=this.getAssetPlayer(h);if(_.details===we.BUFFER_STALLED_ERROR){if(I!=null&&I.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(_,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${_.error} ${e}`)}),y.on($.DESTROYING,()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;const _=new Error(`Asset player destroyed unexpectedly ${h}`),I={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:_};this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),n,_.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${lc(t)}`),this.hls.trigger($.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${t&&ta(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,a){const{interstitial:s,assetItem:o,assetId:l}=e,c=s.assetList.length,f=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!f||f.identifier!==l)&&(f&&(this.clearAssetPlayer(f.identifier,n[i]),delete f.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${lc(o)}`),this.hls.trigger($.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:s,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,t){var n,i;if(!this.schedule)return;const{interstitial:a,assetItem:s}=e,o=this.schedule.findEventIndex(a.identifier),l=(n=this.schedule.items)==null?void 0:n[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=s;const c=this.getBufferingPlayer();if(c===e)return;const f=a.appendInPlace;if(f&&c?.interstitial.appendInPlace===!1)return;const h=c?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(f&&s!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(h&&!P5(h,e.tracks)){const p=new Error(`Asset ${lc(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),g={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},y=a.findAssetIndex(s);this.handleAssetItemError(g,a,o,y,p.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const i=n.currentTime,a=t.findAssetIndex(e,i),s=e.assetList[a];if(s){const o=this.getAssetPlayer(s.identifier);if(o){const l=o.currentTime||i-s.timelineStart,c=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+c} in ${o} ${e} (media.currentTime: ${i})`),l&&(c/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const f=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,f,a)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,i,a){if(e.details===we.BUFFER_STALLED_ERROR)return;const s=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&lc(s)} ${e.error}`),!this.schedule)return;const o=s?.identifier||"",l=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[l]||null,f=this.schedule.items,h=Yt({},e,{fatal:!1,errorAction:yc(!0),asset:s,assetListIndex:i,event:t,schedule:f,scheduleIndex:n,player:c});if(this.hls.trigger($.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const p=this.playingAsset,g=this.bufferingAsset,y=new Error(a);if(s&&(this.clearAssetPlayer(o,null),s.error=y),!t.assetList.some(b=>!b.error))t.error=y;else for(let b=i;b<t.assetList.length;b++)this.resetAssetPlayer(t.assetList[b].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):p&&p.identifier===o?this.advanceAfterAssetEnded(t,n,i):g&&g.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${ta(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const s=this.updateItem(n,i);this.itemsMatch(n,s)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const a=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(a)}onAssetListLoaded(e,t){var n,i;const a=t.event,s=a.identifier,o=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(s)))return;const l=a.timelineStart,c=a.duration;let f=0;o.forEach((b,v)=>{const E=parseFloat(b.DURATION);this.createAsset(a,v,f,l+f,E,b.URI),f+=E}),a.duration=f,this.log(`Loaded asset-list with duration: ${f} (was: ${c}) ${a}`);const h=this.waitingItem,p=h?.event.identifier===s;this.updateSchedule();const g=(i=this.bufferingItem)==null?void 0:i.event;if(p){var y;const b=this.schedule.findEventIndex(s),v=(y=this.schedule.items)==null?void 0:y[b];if(v){if(!this.playingItem&&this.timelinePos>v.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==b){a.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${a}`),this.log(a.error.message),this.updateSchedule(!0),this.primaryFallback(a);return}this.setBufferingItem(v)}this.setSchedulePosition(b)}else if(g?.identifier===s){const b=a.assetList[0];if(b){const v=this.getAssetPlayer(b.identifier);if(g.appendInPlace){const E=this.primaryMedia;v&&E&&this.bufferAssetPlayer(v,E)}else v&&v.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case we.ASSET_LIST_PARSING_ERROR:case we.ASSET_LIST_LOAD_ERROR:case we.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case we.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const Yj=500;class Eye extends yD{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",et.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Ge.IDLE,this.setInterval(Yj),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragContextChanged(n)||(_r(n)&&(this.fragPrevious=n),this.state=Ge.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s;const o=n.start;for(let c=0;c<a.length;c++)if(o>=a[c].start&&o<=a[c].end){s=a[c];break}const l=n.start+n.duration;s?s.end=l:(s={start:o,end:l},a.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;t.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(s=>{for(let o=0;o<s.length;){if(s[o].end<=a){s.shift();continue}else if(s[o].start<a)s[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,a,et.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===et.SUBTITLE&&(t.details===we.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&M8(this.levels,t)){this.levels=t.map(n=>new Kd(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new Kd(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,et.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Ge.STOPPED&&this.setInterval(Yj)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:a}=this,{details:s,id:o}=t;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=a[o];if(o>=a.length||!l)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(s.live||(n=l.details)!=null&&n.live){if(s.deltaUpdateFailed)return;const h=this.mainDetails;if(!h){this.startFragRequested=!1;return}const p=h.fragments[0];if(!l.details)s.hasProgramDateTime&&h.hasProgramDateTime?(k0(s,h),c=s.fragmentStart):p&&(c=p.start,MT(s,c));else{var f;c=this.alignPlaylists(s,l.details,(f=this.levelLastLoaded)==null?void 0:f.details),c===0&&p&&(c=p.start,MT(s,c))}h&&!this.startFragRequested&&this.setStartPosition(h,c)}l.details=s,this.levelLastLoaded=l,o===i&&(this.hls.trigger($.SUBTITLE_TRACK_UPDATED,{details:s,id:o,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===Ge.IDLE&&(tu(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&vc(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,mD(i.method)).catch(o=>{throw a.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();a.trigger($.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:s,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=Ge.IDLE})}}doTick(){if(!this.media){this.state=Ge.IDLE;return}if(this.state===Ge.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,a=this.getLoadPosition(),s=pt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:o,len:l}=s,c=n.details,f=this.hls.maxBufferLength+c.levelTargetDuration;if(l>f)return;const h=c.fragments,p=h.length,g=c.edge;let y=null;const b=this.fragPrevious;if(o<g){const S=i.maxFragLookUpTolerance,w=o>g-S?0:S;y=tu(b,h,Math.max(h[0].start,o),w),!y&&b&&b.start<h[0].start&&(y=h[0])}else y=h[p-1];if(y=this.filterReplacedPrimary(y,n.details),!y)return;const v=y.sn-c.startSN,E=h[v-1];if(E&&E.cc===y.cc&&this.fragmentTracker.getState(E)===Ur.NOT_LOADED&&(y=E),this.fragmentTracker.getState(y)===Ur.NOT_LOADED){const S=this.mapToInitFragWhenRequired(y);S&&this.loadFragment(S,n,o)}}}loadFragment(e,t,n){_r(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new wye(this.tracksBuffered[this.currentTrackId]||[])}}class wye{constructor(e){this.buffered=void 0;const t=(n,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const _ye={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},X8=r=>String.fromCharCode(_ye[r]||r),ra=15,gs=100,Tye={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Aye={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Dye={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Oye={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Iye=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Cye{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;$t.log(`${this.time} [${e}] ${n}`)}}}const _l=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Z8{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Rye{constructor(){this.uchar=" ",this.penState=new Z8}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Pye{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Z8,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<gs;t++)this.chars.push(new Rye);this.logger=e}equals(e){for(let t=0;t<gs;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<gs;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<gs;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>gs&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=gs)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=X8(e);if(this.pos>=gs){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<gs;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<gs;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class uE{constructor(e){this.rows=[],this.currRow=ra-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ra;t++)this.rows.push(new Pye(e));this.logger=e}reset(){for(let e=0;e<ra;e++)this.rows[e].clear();this.currRow=ra-1}equals(e){let t=!0;for(let n=0;n<ra;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<ra;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ra;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Xt(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<ra;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const o=s.rows[a].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(s.rows[a+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,s=Math.max(a-1,0);n.setCursor(e.indent),e.color=n.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Xt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let a=0;a<ra;a++){const s=this.rows[a].getTextString();s&&(i=a+1,e?t.push("Row "+i+": '"+s+"'"):t.push(s.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class qj{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new uE(n),this.nonDisplayedMemory=new uE(n),this.lastOutputScreen=new uE(n),this.currRollUpRow=this.displayedMemory.rows[ra-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ra-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+Xt(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Wj{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=kye(),this.logger=void 0;const i=this.logger=new Cye;this.channels=[null,new qj(e,t,i),new qj(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,a=t[n+1]&127;let s=!1,o=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+_l([t[n],t[n+1]])+"] -> ("+_l([i,a])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(Lye(i,a,l)){Sm(null,null,l),this.logger.log(3,()=>"Repeated command ("+_l([i,a])+") is dropped");continue}Sm(i,a,this.cmdHistory),s=this.parseCmd(i,a),s||(s=this.parseMidrow(i,a)),s||(s=this.parsePAC(i,a)),s||(s=this.parseBackgroundAttributes(i,a))}else Sm(null,null,l);if(!s&&(o=this.parseChars(i,a),o)){const f=this.currentChannel;f&&f>0?this.channels[f].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+_l([i,a])+" orig: "+_l([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const a=e===20||e===21||e===23?1:2,s=this.channels[a];return e===20||e===21||e===28||e===29?t===32?s.ccRCL():t===33?s.ccBS():t===34?s.ccAOF():t===35?s.ccAON():t===36?s.ccDER():t===37?s.ccRU(2):t===38?s.ccRU(3):t===39?s.ccRU(4):t===40?s.ccFON():t===41?s.ccRDC():t===42?s.ccTR():t===43?s.ccRTD():t===44?s.ccEDM():t===45?s.ccCR():t===46?s.ccENM():t===47&&s.ccEOC():s.ccTO(t-32),this.currentChannel=a,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+_l([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(i||a))return!1;const s=e<=23?1:2;t>=64&&t<=95?n=s===1?Tye[e]:Dye[e]:n=s===1?Aye[e]:Oye[e];const o=this.channels[s];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=s,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19){let s;a===17?s=t+80:a===18?s=t+112:s=t+144,this.logger.log(2,()=>"Special char '"+X8(s)+"' in channel "+n),i=[s]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+_l(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let a;const s={};e===16||e===24?(a=Math.floor((t-32)/2),s.background=Iye[a],t%2===1&&(s.background=s.background+"_semi")):t===45?s.background="transparent":(s.foreground="black",t===47&&(s.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Sm(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Sm(r,e,t){t.a=r,t.b=e}function Lye(r,e,t){return t.a===r&&t.b===e}function kye(){return{a:null,b:null}}var ID=(function(){if(L0!=null&&L0.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function a(o,...l){let c=1;for(;c<arguments.length;c++){const f=arguments[c];for(const h in f)o[h]=f[h]}return o}function s(o,l,c){const f=this,h={enumerable:!0};f.hasBeenReset=!1;let p="",g=!1,y=o,b=l,v=c,E=null,S="",w=!0,A="auto",_="start",I=50,D="middle",P=50,k="middle";Object.defineProperty(f,"id",a({},h,{get:function(){return p},set:function(M){p=""+M}})),Object.defineProperty(f,"pauseOnExit",a({},h,{get:function(){return g},set:function(M){g=!!M}})),Object.defineProperty(f,"startTime",a({},h,{get:function(){return y},set:function(M){if(typeof M!="number")throw new TypeError("Start time must be set to a number.");y=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"endTime",a({},h,{get:function(){return b},set:function(M){if(typeof M!="number")throw new TypeError("End time must be set to a number.");b=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"text",a({},h,{get:function(){return v},set:function(M){v=""+M,this.hasBeenReset=!0}})),Object.defineProperty(f,"region",a({},h,{get:function(){return E},set:function(M){E=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"vertical",a({},h,{get:function(){return S},set:function(M){const H=n(M);if(H===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=H,this.hasBeenReset=!0}})),Object.defineProperty(f,"snapToLines",a({},h,{get:function(){return w},set:function(M){w=!!M,this.hasBeenReset=!0}})),Object.defineProperty(f,"line",a({},h,{get:function(){return A},set:function(M){if(typeof M!="number"&&M!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");A=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"lineAlign",a({},h,{get:function(){return _},set:function(M){const H=i(M);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");_=H,this.hasBeenReset=!0}})),Object.defineProperty(f,"position",a({},h,{get:function(){return I},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");I=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"positionAlign",a({},h,{get:function(){return D},set:function(M){const H=i(M);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");D=H,this.hasBeenReset=!0}})),Object.defineProperty(f,"size",a({},h,{get:function(){return P},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");P=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"align",a({},h,{get:function(){return k},set:function(M){const H=i(M);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");k=H,this.hasBeenReset=!0}})),f.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s})();class Mye{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function J8(r){function e(n,i,a,s){return(n|0)*3600+(i|0)*60+(a|0)+parseFloat(s||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}let Nye=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}};function eH(r,e,t,n){const i=n?r.split(n):[r];for(const a in i){if(typeof i[a]!="string")continue;const s=i[a].split(t);if(s.length!==2)continue;const o=s[0],l=s[1];e(o,l)}}const GT=new ID(0,0,""),Em=GT.align==="middle"?"middle":"center";function jye(r,e,t){const n=r;function i(){const o=J8(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){const c=new Nye;eH(o,function(p,g){let y;switch(p){case"region":for(let b=t.length-1;b>=0;b--)if(t[b].id===g){c.set(p,t[b].region);break}break;case"vertical":c.alt(p,g,["rl","lr"]);break;case"line":y=g.split(","),c.integer(p,y[0]),c.percent(p,y[0])&&c.set("snapToLines",!1),c.alt(p,y[0],["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start",Em,"end"]);break;case"position":y=g.split(","),c.percent(p,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start",Em,"end","line-left","line-right","auto"]);break;case"size":c.percent(p,g);break;case"align":c.alt(p,g,["start",Em,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let f=c.get("line","auto");f==="auto"&&GT.line===-1&&(f=-1),l.line=f,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Em);let h=c.get("position","auto");h==="auto"&&GT.position===50&&(h=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=h}function s(){r=r.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),s(),e.endTime=i(),s(),a(r,e)}function tH(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class Fye{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Mye,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let a=t.buffer,s=0;for(a=tH(a);s<a.length&&a[s]!=="\r"&&a[s]!==`
`;)++s;const o=a.slice(0,s);return a[s]==="\r"&&++s,a[s]===`
`&&++s,t.buffer=a.slice(s),o}function i(a){eH(a,function(s,o){},/:/)}try{let a="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;a=n();const o=a.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let s=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:a=n(),t.state){case"HEADER":/:/.test(a)?i(a):a||(t.state="ID");continue;case"NOTE":a||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){t.state="NOTE";break}if(!a)continue;if(t.cue=new ID(0,0,""),t.state="CUE",a.indexOf("-->")===-1){t.cue.id=a;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{jye(a,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=a}continue;case"BADCUE":a||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Bye=/\r\n|\n\r|\n|\r/g,cE=function(e,t,n=0){return e.slice(n,n+t.length)===t},Uye=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Xe(t)||!Xe(n)||!Xe(i)||!Xe(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*a,t};function CD(r,e,t){return xd(r.toString())+xd(e.toString())+xd(t)}const $ye=function(e,t,n){let i=e[t],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=a)!=null&&s.new;){var s;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=n};function Hye(r,e,t,n,i,a,s){const o=new Fye,l=Ti(new Uint8Array(r)).trim().replace(Bye,`
`).split(`
`),c=[],f=e?Wge(e.baseTime,e.timescale):0;let h="00:00.000",p=0,g=0,y,b=!0;o.oncue=function(v){const E=t[n];let S=t.ccOffset;const w=(p-f)/9e4;if(E!=null&&E.new&&(g!==void 0?S=t.ccOffset=E.start:$ye(t,n,w)),w){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}S=w-t.presentationOffset}const A=v.endTime-v.startTime,_=mi((v.startTime+S-g)*9e4,i*9e4)/9e4;v.startTime=Math.max(_,0),v.endTime=Math.max(_+A,0);const I=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(I)),v.id||(v.id=CD(v.startTime,v.endTime,I)),v.endTime>0&&c.push(v)},o.onparsingerror=function(v){y=v},o.onflush=function(){if(y){s(y);return}a(c)},l.forEach(v=>{if(b)if(cE(v,"X-TIMESTAMP-MAP=")){b=!1,v.slice(16).split(",").forEach(E=>{cE(E,"LOCAL:")?h=E.slice(6):cE(E,"MPEGTS:")&&(p=parseInt(E.slice(7)))});try{g=Uye(h)/1e3}catch(E){y=E}return}else v===""&&(b=!1);o.parse(v+`
`)}),o.flush()}const fE="stpp.ttml.im1t",rH=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nH=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Gye={left:"start",center:"center",right:"end",start:"start",end:"end"};function Vj(r,e,t,n){const i=xt(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(o=>Ti(o)),s=qge(e.baseTime,1,e.timescale);try{a.forEach(o=>t(Kye(o,s)))}catch(o){n(o)}}function Kye(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(a).reduce((h,p)=>(h[p]=i.getAttribute(`ttp:${p}`)||a[p],h),{}),o=i.getAttribute("xml:space")!=="preserve",l=Qj(dE(i,"styling","style")),c=Qj(dE(i,"layout","region")),f=dE(i,"body","[begin]");return[].map.call(f,h=>{const p=iH(h,o);if(!p||!h.hasAttribute("begin"))return null;const g=pE(h.getAttribute("begin"),s),y=pE(h.getAttribute("dur"),s);let b=pE(h.getAttribute("end"),s);if(g===null)throw Xj(h);if(b===null){if(y===null)throw Xj(h);b=g+y}const v=new ID(g-e,b-e,p);v.id=CD(v.startTime,v.endTime,v.text);const E=c[h.getAttribute("region")],S=l[h.getAttribute("style")],w=zye(E,S,l),{textAlign:A}=w;if(A){const _=Gye[A];_&&(v.lineAlign=_),v.align=A}return Yt(v,w),v}).filter(h=>h!==null)}function dE(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function Qj(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function iH(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var a;return n.nodeName==="br"&&i?t+`
`:(a=n.childNodes)!=null&&a.length?iH(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function zye(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return s&&t.hasOwnProperty(s)&&(i=t[s]),a.reduce((o,l)=>{const c=hE(e,n,l)||hE(r,n,l)||hE(i,n,l);return c&&(o[l]=c),o},{})}function hE(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function Xj(r){return new Error(`Could not parse ttml timestamp ${r}`)}function pE(r,e){if(!r)return null;let t=J8(r);return t===null&&(rH.test(r)?t=Yye(r,e):nH.test(r)&&(t=qye(r,e))),t}function Yye(r,e){const t=rH.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function qye(r,e){const t=nH.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class wm{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Wye{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Jj(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_LOADED,this.onFragLoaded,this),e.on($.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on($.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_LOADED,this.onFragLoaded,this),e.off($.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off($.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new wm(this,"textTrack1"),t=new wm(this,"textTrack2"),n=new wm(this,"textTrack3"),i=new wm(this,"textTrack4");this.cea608Parser1=new Wj(1,e,t),this.cea608Parser2=new Wj(3,n,i)}addCues(e,t,n,i,a){let s=!1;for(let o=a.length;o--;){const l=a[o],c=Vye(l[0],l[1],t,n);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],n),s=!0,c/(n-t)>.5))return}if(s||a.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger($.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:a,trackId:s}){const{unparsedVttFrags:o}=this;n===et.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:a,trackId:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded($.FRAG_LOADED,l):this.hls.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const a=n.textTracks[i];if(Zj(a,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:a,languageCode:s}=t[e],o=this.getExistingTrack(a,s);if(o)n[e]=o,fc(n[e]),W8(n[e],i);else{const l=this.createTextTrack("captions",a,s);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger($.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{fc(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Jj(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)fc(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(a=>a.textCodec===fE);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(M8(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const s=this.media,o=s?gg(s.textTracks):null;if(this.tracks.forEach((l,c)=>{let f;if(o){let h=null;for(let p=0;p<o.length;p++)if(o[p]&&Zj(o[p],l)){h=o[p],o[p]=null;break}h&&(f=h)}if(f)fc(f);else{const h=aH(l);f=this.createTextTrack(h,l.name,l.lang),f&&(f.mode="disabled")}f&&this.textTracks.push(f)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger($.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const a=`textTrack${i[1]}`,s=this.captionsProperties[a];s&&(s.label=n.name,n.lang&&(s.languageCode=n.lang),s.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===et.MAIN){var n,i;const{cea608Parser1:a,cea608Parser2:s,lastSn:o}=this,{cc:l,sn:c}=t.frag,f=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;a&&s&&(c!==o+1||c===o&&f!==this.lastPartIndex+1||l!==this.lastCc)&&(a.reset(),s.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=f}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===et.SUBTITLE)if(i.byteLength){const a=n.decryptdata,s="stats"in t;if(a==null||!a.encrypted||s){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===fE?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;Vj(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[n.cc]&&o===-1){s.push(e);return}const l=this.hls,c=(t=n.initSegment)!=null&&t.data?Vi(n.initSegment.data,new Uint8Array(i)).buffer:i;Hye(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,f=>{this._appendCues(f,n.level),l.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},f=>{const h=f.message==="Missing initPTS for VTT MPEGTS";h?s.push(e):this._fallbackToIMSC1(n,i),l.logger.log(`Failed to parse VTT cue: ${f}`),!(h&&o>n.cc)&&l.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:f})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||Vj(t,this.initPTS[e.cc],()=>{n.textCodec=fE,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(a=>V8(i,a))}else{const i=this.tracks[t];if(!i)return;const a=i.default?"default":"subtitles"+t;n.trigger($.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===et.SUBTITLE&&this.onFragLoaded($.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===et.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let a=0;a<i.length;a++){const s=i[a].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(s);this.cea608Parser1.addData(i[a].pts,o[0]),this.cea608Parser2.addData(i[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:a}){const{media:s}=this;if(!(!s||s.currentTime<n)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>HT(o[l],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>HT(o[l],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let a=0;a<n;a++){const s=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&s)!==0){const f=3&s;(f===0||f===1)&&(t[f].push(o),t[f].push(l))}}return t}}function aH(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function Zj(r,e){return!!r&&r.kind===aH(e)&&FT(e,r)}function Vye(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function Jj(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const Qye=/\s/,Xye={newCue(r,e,t,n){const i=[];let a,s,o,l,c;const f=self.VTTCue||self.TextTrackCue;for(let p=0;p<n.rows.length;p++)if(a=n.rows[p],o=!0,l=0,c="",!a.isEmpty()){var h;for(let b=0;b<a.chars.length;b++)Qye.test(a.chars[b].uchar)&&o?l++:(c+=a.chars[b].uchar,o=!1);a.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const g=tH(c.trim()),y=CD(e,t,g);r!=null&&(h=r.cues)!=null&&h.getCueById(y)||(s=new f(e,t,g),s.id=y,s.line=p+1,s.align="left",s.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(s))}return r&&i.length&&(i.sort((p,g)=>p.line==="auto"||g.line==="auto"?0:p.line>8&&g.line>8?g.line-p.line:p.line-g.line),i.forEach(p=>V8(r,p))),i}};function Zye(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Jye=/(\d+)-(\d+)\/(\d+)/;class eF{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||nve,this.controller=new self.AbortController,this.stats=new lD}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=eve(e,this.controller.signal),s=e.responseType==="arraybuffer",o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=l&&Xe(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(qd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var p;this.response=this.loader=h;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},c-(g-i.loading.start)),!h.ok){const{status:b,statusText:v}=h;throw new ive(v||"fetch, bad network response",b,h)}i.loading.first=g,i.total=rve(h.headers)||i.total;const y=(p=this.callbacks)==null?void 0:p.onProgress;return y&&Xe(t.highWaterMark)?this.loadProgressively(h,i,e,t.highWaterMark,y):s?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var p,g;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const b=h[o];b&&(i.loaded=i.total=b);const v={url:y.url,data:h,code:y.status},E=(p=this.callbacks)==null?void 0:p.onProgress;E&&!Xe(t.highWaterMark)&&E(i,e,h,y),(g=this.callbacks)==null||g.onSuccess(v,i,e,y)}).catch(h=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=h&&h.code||0,y=h?h.message:null;(p=this.callbacks)==null||p.onError({code:g,text:y},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,a){const s=new m8,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return s.dataLength&&a(t,n,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const f=c.value,h=f.length;return t.loaded+=h,h<i||s.dataLength?(s.push(f),s.dataLength>=i&&a(t,n,s.flush().buffer,e)):a(t,n,f.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function eve(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Yt({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function tve(r){const e=Jye.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function rve(r){const e=r.get("Content-Range");if(e){const n=tve(e);if(Xe(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function nve(r,e){return new self.Request(r.url,e)}class ive extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const ave=/^age:\s*[\d.]+\s*$/im;class sH{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new lD,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return a(n,t.url)}).catch(s=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),a(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(s=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:s.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&Xe(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,a=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,f=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const y=f??t.response;if(y!=null){var s,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const b=t.responseType==="arraybuffer"?y.byteLength:y.length;n.loaded=n.total=b,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const v=(s=this.callbacks)==null?void 0:s.onProgress;v&&v(n,e,y,t);const E={url:t.responseURL,data:y,code:c};(o=this.callbacks)==null||o.onSuccess(E,n,e,t);return}}const h=a.loadPolicy.errorRetry,p=n.retry,g={url:e.url,data:void 0,code:c};if(R0(h,p,!1,g))this.retry(h);else{var l;$t.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(R0(e,t,!0))this.retry(e);else{var n;$t.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=dD(e,n.retry),n.retry++,$t.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&ave.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const sve={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},ove=Bt(Bt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:sH,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:bme,bufferController:u0e,capLevelController:AD,errorController:_me,fpsController:cye,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:i8,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:sve},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},lve()),{},{subtitleStreamController:Eye,subtitleTrackController:hye,timelineController:Wye,audioStreamController:a0e,audioTrackController:s0e,emeController:bc,cmcdController:sye,contentSteeringController:lye,interstitialsController:Sye});function lve(){return{cueHandler:Xye,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function uve(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=KT(r),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,l=e[o]===void 0,c=[];a.forEach(f=>{const h=`${s}Loading${f}`,p=e[h];if(p!==void 0&&l){c.push(h);const g=n[o].default;switch(e[o]={default:g},f){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${Xt(e[o])}`)}),Bt(Bt({},n),e)}function KT(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(KT):Object.keys(r).reduce((e,t)=>(e[t]=KT(r[t]),e),{}):r}function cve(r,e){const t=r.loader;t!==eF&&t!==sH?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):Zye()&&(r.loader=eF,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const yg=2,fve=.1,dve=.05,hve=100;class pve extends J5{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(hve),this.mediaSource=t.mediaSource;const n=this.media=t.media;Pn(n,"playing",this.onMediaPlaying),Pn(n,"waiting",this.onMediaWaiting),Pn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Jn(n,"playing",this.onMediaPlaying),Jn(n,"waiting",this.onMediaWaiting),Jn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const a=(n=this.hls)==null?void 0:n.config;if(!a)return;const s=this.media;if(!s)return;const{seeking:o}=s,l=this.seeking&&!o,c=!this.seeking&&o,f=s.paused&&!o||s.ended||s.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!f&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||l){l&&this.stallResolved(e);return}if(f){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!1}));return}if(!pt.getBuffered(s).length){this.nudgeRetry=0;return}const h=pt.bufferInfo(s,e,0),p=h.nextStart||0,g=this.fragmentTracker;if(o&&g&&this.hls){const I=tF(this.hls.inFlightFragments,e),D=h.len>yg,P=!p||I||p-e>yg&&!g.getPartialFragment(e);if(D||P)return;this.moved=!1}const y=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&g){if(!(h.len>0)&&!p)return;const D=Math.max(p,h.start||0)-e,k=!!(y!=null&&y.live)?y.targetduration*2:yg,M=_m(e,g);if(D>0&&(D<=k||M)){s.paused||this._trySkipBufferHole(M);return}}const b=a.detectStallWithCurrentTimeMs,v=self.performance.now(),E=this.waiting;let S=this.stalled;if(S===null)if(E>0&&v-E<b)S=this.stalled=E;else{this.stalled=v;return}const w=v-S;if(!o&&(w>=b||E)&&this.hls){var A;if(((A=this.mediaSource)==null?void 0:A.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const _=pt.bufferInfo(s,e,a.maxBufferHole);this._tryFixBufferStall(_,w,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger($.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const a=pt.bufferedInfo(pt.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&t>=a.start){const s=pt.timeRangesToArray(i),o=pt.bufferedInfo(s,t,0).bufferedIndex;if(o>-1&&o<s.length-1){const l=pt.bufferedInfo(s,e,0).bufferedIndex,c=s[o].end,f=s[o+1].start;if((l===-1||l>o)&&f-c<1&&e-c<2){const h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${f} buffered index: ${l}`);this.warn(h.message),this.media.currentTime+=1e-6;let p=_m(e,this.fragmentTracker);p&&"fragment"in p?p=p.fragment:p||(p=void 0);const g=pt.bufferInfo(this.media,e,0);this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:p,buffer:g.len,bufferInfo:g})}}}}}_tryFixBufferStall(e,t,n){var i,a;const{fragmentTracker:s,media:o}=this,l=(i=this.hls)==null?void 0:i.config;if(!o||!s||!l)return;const c=(a=this.hls)==null?void 0:a.latestLevelDetails,f=_m(n,s);if((f||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(f)||!this.media))return;const h=e.buffered,p=this.adjacentTraversal(e,n);(h&&h.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||p))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const a=n.getFragAtPos(t,et.MAIN),s=n.getFragAtPos(i,et.MAIN);if(a&&s)return s.sn-a.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:a}=this;if(!i&&a!==null&&n&&t){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Xt(e)})`);this.warn(s.message),t.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,a=(t=this.hls)==null?void 0:t.config;if(!i||!n||!a)return 0;const s=i.currentTime,o=pt.bufferInfo(i,s,0),l=s<o.start?o.start:o.nextStart;if(l&&this.hls){const f=o.len<=a.maxBufferHole,h=o.len>0&&o.len<1&&i.readyState<3,p=l-s;if(p>0&&(f||h)){if(p>a.maxBufferHole){let y=!1;if(s===0){const b=n.getAppendedFrag(0,et.MAIN);b&&l<b.end&&(y=!0)}if(!y&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||tF(this.hls.inFlightFragments,l))return 0;let v=!1,E=e.end;for(;E<l;){const S=_m(E,n);if(S)E+=S.duration;else{v=!0;break}}if(v)return 0}}const g=Math.max(l+dve,s+fve);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${g}`),this.moved=!0,i.currentTime=g,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${g}`),b={type:at.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?b.part=e:b.frag=e),this.hls.trigger($.ERROR,b)}return g}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,a=t?.config;if(!n||!a)return 0;const s=n.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const o=s+(i+1)*a.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${s} to ${o}`);this.warn(l.message),n.currentTime=o,t.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function tF(r,e){const t=rF(r.main);if(t&&t.start<=e)return t;const n=rF(r.audio);return n&&n.start<=e?n:null}function rF(r){if(!r)return null;switch(r.state){case Ge.IDLE:case Ge.STOPPED:case Ge.ENDED:case Ge.ERROR:return null}return r.frag}function _m(r,e){return e.getAppendedFrag(r,et.MAIN)||e.getPartialFragment(r)}const mve=.25;function zT(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function mE(r,e,t,n,i){let a=new r(e,t,"");try{a.value=n,i&&(a.type=i)}catch{a=new r(e,t,Xt(i?Bt({type:i},n):n))}return a}const Tm=(()=>{const r=zT();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class gve{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger($.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&fc(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return W8(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:a}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=zT();if(s)for(let o=0;o<a.length;o++){const l=a[o].type;if(l===vi.emsg&&!n||!i)continue;const c=E8(a[o].data),f=a[o].pts;let h=f+a[o].duration;h>Tm&&(h=Tm),h-f<=0&&(h=f+mve);for(let g=0;g<c.length;g++){const y=c[g];if(!w8(y)){this.updateId3CueEnds(f,l);const b=mE(s,f,h,y,l);b&&this.id3Track.addCue(b)}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let a=i.length;a--;){const s=i[a];s.type===t&&s.startTime<e&&s.endTime===Tm&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:a,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=s;if(a&&(o||l)){let c;i==="audio"?c=f=>f.type===vi.audioId3&&l:i==="video"?c=f=>f.type===vi.emsg&&o:c=f=>f.type===vi.audioId3&&l||f.type===vi.emsg&&o,HT(a,t,n,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:a,interstitialsController:s}=this.hls.config;if(!a)return;const o=zT();if(n&&i&&!s){const{fragmentStart:b,fragmentEnd:v}=e;let E=this.assetCue;E?(E.startTime=b,E.endTime=v):o&&(E=this.assetCue=mE(o,b,v,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),E&&(E.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(E),E.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:c}=e,f=Object.keys(c);let h=this.dateRangeCuesAppended;if(l&&t){var p;if((p=l.cues)!=null&&p.length){const b=Object.keys(h).filter(v=>!f.includes(v));for(let v=b.length;v--;){var g;const E=b[v],S=(g=h[E])==null?void 0:g.cues;delete h[E],S&&Object.keys(S).forEach(w=>{const A=S[w];if(A){A.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(A)}catch{}}})}}else h=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(f.length===0||!Xe(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let b=0;b<f.length;b++){const v=f[b],E=c[v],S=E.startTime,w=h[v],A=w?.cues||{};let _=w?.durationKnown||!1,I=Tm;const{duration:D,endDate:P}=E;if(P&&D!==null)I=S+D,_=!0;else if(E.endOnNext&&!_){const M=f.reduce((H,N)=>{if(N!==E.id){const Q=c[N];if(Q.class===E.class&&Q.startDate>E.startDate&&(!H||E.startDate<H.startDate))return Q}return H},null);M&&(I=M.startTime,_=!0)}const k=Object.keys(E.attr);for(let M=0;M<k.length;M++){const H=k[M];if(!jme(H))continue;const N=A[H];if(N)_&&!(w!=null&&w.durationKnown)?N.endTime=I:Math.abs(N.startTime-S)>.01&&(N.startTime=S,N.endTime=I);else if(o){let Q=E.attr[H];Fme(H)&&(Q=L5(Q));const V=mE(o,S,I,{key:H,data:Q},vi.dateRange);V&&(V.id=v,this.id3Track.addCue(V),A[H]=V,s&&(H==="X-ASSET-LIST"||H==="X-ASSET-URL")&&V.addEventListener("enter",this.onEventCueEnter))}}h[v]={cues:A,dateRange:E,durationKnown:_}}}}}class yve{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:s}=this.config;if(!a||s===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const l=i-o,c=Math.min(this.maxLatency,o+n.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,g=Math.min(h,Math.max(1,p));this.changeMediaPlaybackRate(t,g)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:s,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&n||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=a!==void 0?a:s*i);const f=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,f)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,a=e-t-this.edgeStalled,s=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===we.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class vve extends TD{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],a={},s={};let o=!1,l=!1,c=!1;t.levels.forEach(f=>{const h=f.attrs;let{audioCodec:p,videoCodec:g}=f;p&&(f.audioCodec=p=D0(p,n)||void 0),g&&(g=f.videoCodec=eme(g));const{width:y,height:b,unknownCodecs:v}=f,E=v?.length||0;if(o||(o=!!(y&&b)),l||(l=!!g),c||(c=!!p),E||p&&!this.isAudioSupported(p)||g&&!this.isVideoSupported(g)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:S,"FRAME-RATE":w,"HDCP-LEVEL":A,"PATHWAY-ID":_,RESOLUTION:I,"VIDEO-RANGE":D}=h,k=`${`${_||"."}-`}${f.bitrate}-${I}-${w}-${S}-${D}-${A}`;if(a[k])if(a[k].uri!==f.url&&!f.attrs["PATHWAY-ID"]){const M=s[k]+=1;f.attrs["PATHWAY-ID"]=new Array(M+1).join(".");const H=this.createLevel(f);a[k]=H,i.push(H)}else a[k].addGroupId("audio",h.AUDIO),a[k].addGroupId("text",h.SUBTITLES);else{const M=this.createLevel(f);a[k]=M,s[k]=1,i.push(M)}}),this.filterAndSortMediaOptions(i,t,o,l,c)}createLevel(e){const t=new Kd(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=z5(i,[])}return t}isAudioSupported(e){return Hd(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Hd(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,a){var s;let o=[],l=[],c=e;const f=((s=t.stats)==null?void 0:s.parsing)||{};if((n||i)&&a&&(c=c.filter(({videoCodec:S,videoRange:w,width:A,height:_})=>(!!S||!!(A&&_))&&cme(w))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let S="no level with compatible codecs found in manifest",w=S;t.levels.length&&(w=`one or more CODECS in variant not supported: ${Xt(t.levels.map(_=>_.attrs.CODECS).filter((_,I,D)=>D.indexOf(_)===I))}`,this.warn(w),S+=` (${w})`);const A=new Error(S);this.hls.trigger($.ERROR,{type:at.MEDIA_ERROR,details:we.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:A,reason:w})}}),f.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(S=>!S.audioCodec||this.isAudioSupported(S.audioCodec)),nF(o)),t.subtitles&&(l=t.subtitles,nF(l));const h=c.slice(0);c.sort((S,w)=>{if(S.attrs["HDCP-LEVEL"]!==w.attrs["HDCP-LEVEL"])return(S.attrs["HDCP-LEVEL"]||"")>(w.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&S.height!==w.height)return S.height-w.height;if(S.frameRate!==w.frameRate)return S.frameRate-w.frameRate;if(S.videoRange!==w.videoRange)return O0.indexOf(S.videoRange)-O0.indexOf(w.videoRange);if(S.videoCodec!==w.videoCodec){const A=W2(S.videoCodec),_=W2(w.videoCodec);if(A!==_)return _-A}if(S.uri===w.uri&&S.codecSet!==w.codecSet){const A=A0(S.codecSet),_=A0(w.codecSet);if(A!==_)return _-A}return S.averageBitrate!==w.averageBitrate?S.averageBitrate-w.averageBitrate:0});let p=h[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==h.length)){for(let S=0;S<h.length;S++)if(h[S].pathwayId===c[0].pathwayId){p=h[S];break}}this._levels=c;for(let S=0;S<c.length;S++)if(c[S]===p){var g;this._firstLevel=S;const w=p.bitrate,A=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${w}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const _=Math.min(w,this.hls.config.abrEwmaDefaultEstimateMax);_>A&&A===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=_)}break}const y=a&&!i,b=this.hls.config,v=!!(b.audioStreamController&&b.audioTrackController),E={levels:c,audioTracks:o,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:i,altAudio:v&&!y&&o.some(S=>!!S.url)};f.end=performance.now(),this.hls.trigger($.MANIFEST_PARSED,E)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const f=new Error("invalid level idx"),h=e<0;if(this.hls.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:f,reason:f.message}),h)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,s=t[e],o=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&i&&a===o)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${o?" with Pathway "+o:""} from level ${n}${a?" with Pathway "+a:""}`);const l={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger($.LEVEL_SWITCHING,l);const c=s.details;if(!c||c.live){const f=this.switchParams(s.uri,i?.details,c);this.loadPlaylist(f)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===St.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===et.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(a=>!!n[a]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:a}=t,s=t.levelInfo;if(!s){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(s===this.currentLevel||t.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let l=s.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,t,l)}else(n=t.deliveryDirectives)!=null&&n.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],s=e.details,o=s?.age;this.log(`Loading level index ${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${a?" Pathway "+a:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${n}`),this.hls.trigger($.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((a,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));d8(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger($.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger($.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function nF(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function oH(){return self.SourceBuffer||self.WebKitSourceBuffer}function lH(){if(!Xo())return!1;const e=oH();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function bve(){if(!lH())return!1;const r=Xo();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(Gd(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(Gd(e,"audio"))))}function xve(){var r;const e=oH();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const Sve=100;class Eve extends yD{constructor(e,t,n){super(e,t,n,"stream-controller",et.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!Xe(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const s=this.getFwdBufferInfoAtPos(i,a,et.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Sve),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ge.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Ge.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ge.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e?.[t],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Ge.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Ge.IDLE;break}break}case Ge.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Ge.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[a]))return;const s=n[a],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const b={};this.altAudio===2&&(b.type="video"),this.hls.trigger($.BUFFER_EOS,b),this.state=Ge.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const c=s.details;if(!c||this.state===Ge.WAITING_LEVEL||this.waitForLive(s)){this.level=a,this.state=Ge.WAITING_LEVEL,this.startFragRequested=!1;return}const f=o.len,h=this.getMaxBufferLength(s.maxBitrate);if(f>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let g=this.getNextFragment(p,c);if(this.couldBacktrack&&!this.fragPrevious&&g&&_r(g)&&this.fragmentTracker.getState(g)!==Ur.OK){var y;const v=((y=this.backtrackFragment)!=null?y:g).sn-c.startSN,E=c.fragments[v-1];E&&g.cc===E.cc&&(g=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,p)){if(!g.gap){const v=this.audioOnly&&!this.altAudio?Vt.AUDIO:Vt.VIDEO,E=(v===Vt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,v,et.MAIN)}g=this.getNextFragmentLoopLoading(g,c,o,et.MAIN,h)}g&&(g.initSegment&&!g.initSegment.data&&!this.bitrateTest&&(g=g.initSegment),this.loadFragment(g,s,p))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===Ur.NOT_LOADED||i===Ur.PARTIAL?_r(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,et.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,f=Math.max(s.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(f,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ge.KEY_LOADING:case Ge.FRAG_LOADING:case Ge.FRAG_LOADING_WAITING_RETRY:case Ge.PARSING:case Ge.PARSED:this.state=Ge.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Pn(n,"playing",this.onMediaPlaying),Pn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Jn(n,"playing",this.onMediaPlaying),Jn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger($.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;for(let a=0;a<t.levels.length;a++){const s=t.levels[a].audioCodec;s&&(n=n||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!xve(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Ge.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Ge.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:a}=this,s=t.level,o=t.details,l=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const c=t.levelInfo,f=this.fragCurrent;f&&(this.state===Ge.FRAG_LOADING||this.state===Ge.FRAG_LOADING_WAITING_RETRY)&&f.level!==t.level&&f.loader&&this.abortCurrentFrag();let h=0;if(o.live||(n=c.details)!=null&&n.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,c.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(c.details=o,this.levelLastLoaded=c,a||this.setStartPosition(o,h),this.hls.trigger($.LEVEL_UPDATED,{details:o,level:s}),this.state===Ge.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Ge.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),s=e.fragmentStart,o=e.edge,l=a>=s-t.maxFragLookUpTolerance&&a<=o;if(i!==null&&n.duration>i&&(a<i||!l)){const f=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||a<o-f)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const h=pt.bufferInfo(n,i,0);if(!((c=h.buffered)!=null&&c.length)){n.currentTime=i;return}if(h.start<=a){n.currentTime=i;return}const{nextStart:g}=pt.bufferedInfo(h.buffered,a,0);g&&(n.currentTime=g)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:a}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=s[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,f=l.PTSKnown||!l.live,h=(t=n.initSegment)==null?void 0:t.data,p=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new k8(this.hls,et.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=i?i.index:-1,b=y!==-1,v=new pD(n.level,n.sn,n.stats.chunkCount,a.byteLength,y,b),E=this.initPTS[n.cc];g.push(a,h,p,c,n,i,l.totalduration,f,v,E)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio!==0;if(I0(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once($.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger($.AUDIO_TRACK_SWITCHED,t)}),n.trigger($.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger($.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=I0(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,a,s=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(a=o,i=l,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,a=n.type===et.MAIN;if(a){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Ge.PARSED&&(this.state=Ge.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),_r(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const s=this.media;s&&(!this._hasEnoughToStart&&pt.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.MAIN,t);break;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===St.LEVEL&&(this.state=Ge.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Ge.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Vt.AUDIO||!this.altAudio){const n=(t===Vt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,et.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const a=this.getLevelDetails(),s=pt.getBuffered(e),o=s.length?s.start(0):0,l=o-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<c||this.loadingParts&&l<2*(a?.partTarget||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,a=n?.frag;if(!a||this.fragContextChanged(a))return;t.fragmentError=0,this.state=Ge.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=a.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger($.FRAG_LOADED,n),a.bitrateTest=!1}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s){this.resetWhenMissingContext(a);return}const{frag:o,part:l,level:c}=s,{video:f,text:h,id3:p,initSegment:g}=i,{details:y}=c,b=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=Ge.PARSING,g){const v=g.tracks;if(v){const A=o.initSegment||o;if(this.unhandledEncryptionError(g,o))return;this._bufferInitSegment(c,v,A,a),n.trigger($.FRAG_PARSING_INIT_SEGMENT,{frag:A,id:t,tracks:v})}const E=g.initPTS,S=g.timescale,w=this.initPTS[o.cc];if(Xe(E)&&(!w||w.baseTime!==E||w.timescale!==S)){const A=g.trackId;this.initPTS[o.cc]={baseTime:E,timescale:S,trackId:A},n.trigger($.INIT_PTS_FOUND,{frag:o,id:t,initPTS:E,timescale:S,trackId:A})}}if(f&&y){b&&f.type==="audiovideo"&&this.logMuxedErr(o);const v=y.fragments[o.sn-1-y.startSN],E=o.sn===y.startSN,S=!v||o.cc>v.cc;if(i.independent!==!1){const{startPTS:w,endPTS:A,startDTS:_,endDTS:I}=f;if(l)l.elementaryStreams[f.type]={startPTS:w,endPTS:A,startDTS:_,endDTS:I};else if(f.firstKeyFrame&&f.independent&&a.id===1&&!S&&(this.couldBacktrack=!0),f.dropped&&f.independent){const D=this.getMainFwdBufferInfo(),P=(D?D.end:this.getLoadPosition())+this.config.maxBufferHole,k=f.firstKeyFramePTS?f.firstKeyFramePTS:w;if(!E&&P<k-this.config.maxBufferHole&&!S){this.backtrack(o);return}else S&&(o.gap=!0);o.setElementaryStreamInfo(f.type,o.start,A,o.start,I,!0)}else E&&w-(y.appliedTimelineOffset||0)>yg&&(o.gap=!0);o.setElementaryStreamInfo(f.type,w,A,_,I),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(f,o,l,a,E||S)}else if(E||S)o.gap=!0;else{this.backtrack(o);return}}if(b){const{startPTS:v,endPTS:E,startDTS:S,endDTS:w}=b;l&&(l.elementaryStreams[Vt.AUDIO]={startPTS:v,endPTS:E,startDTS:S,endDTS:w}),o.setElementaryStreamInfo(Vt.AUDIO,v,E,S,w),this.bufferFragmentData(b,o,l,a)}if(y&&p!=null&&p.samples.length){const v={id:t,frag:o,details:y,samples:p.samples};n.trigger($.FRAG_PARSING_METADATA,v)}if(y&&h){const v={id:t,frag:o,details:y,samples:h.samples};n.trigger($.FRAG_PARSING_USERDATA,v)}}logMuxedErr(e){this.warn(`${_r(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:a,video:s,audiovideo:o}=t;if(a){const c=e.audioCodec;let f=cg(a.codec,c);f==="mp4a"&&(f="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){f&&(f.indexOf("mp4a.40.5")!==-1?f="mp4a.40.2":f="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(f="mp4a.40.5")}f&&f.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(f="mp4a.40.2",this.log(`Android: force audio codec to ${f}`)),c&&c!==f&&this.log(`Swapping manifest audio codec "${c}" for "${f}"`),a.levelCodec=f,a.id=et.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${f||""}/${c||""}/${a.codec}]`),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=et.MAIN;const c=s.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${s.codec!==c?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger($.BUFFER_CODECS,t),!this.hls)return;l.forEach(c=>{const h=t[c].initSegment;h!=null&&h.byteLength&&this.hls.trigger($.BUFFER_APPENDING,{type:c,data:h,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,et.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ge.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(pt.isBuffered(e,n)?t=this.getAppendedFrag(n):pt.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,a=t.level;(!i||t.sn!==i.sn||i.level!==a)&&(this.fragPlaying=t,this.hls.trigger($.FRAG_CHANGED,{frag:t}),(!i||i.level!==a)&&this.hls.trigger($.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Xe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Xe(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?tu(null,n.fragments,t):null);if(i){const a=i.programDateTime;if(a!==null){const s=a+(t-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class wve extends Xi{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=we.KEY_LOAD_ERROR,n,i,a){return new bs({type:at.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:n,networkDetails:i})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,a=t.length;i<a;i++){const s=t[i];if(e.cc<=s.cc&&(!_r(e)||!_r(s)||e.sn<s.sn)||!n&&i==a-1)return this.emeController.selectKeySystemFormat(s).then(o=>{if(!this.emeController)return;s.setKeyFormat(o);const l=dg(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const i=pd(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const a=e.decryptdata;if(!a){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,c))}const s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));const o=gE(a);let l=this.keyIdToKeyInfo[o];if((n=l)!=null&&n.decryptdata.key)return a.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(i=l)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(f=>{const{keyInfo:h}=f;return a.key=h.decryptdata.key,{frag:e,keyInfo:h}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${a.keyId?" keyId: "+un(a.keyId):""} URI: ${a.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const s=Hpe(t.initSegment.data);if(s.length){let o=s[0];o.some(l=>l!==0)?(this.log(`Using keyId found in init segment ${un(o)}`),zo.setKeyIdForUri(e.decryptdata.uri,o)):(o=zo.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${un(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!_r(t))return Promise.resolve(n);const a=this.emeController.loadKey(n);return(e.keyLoadPromise=a.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,"data"in s&&(s.data.frag=t),s})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,a=new i(n);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((s,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{const{frag:v,keyInfo:E}=y,S=gE(E.decryptdata);if(!v.decryptdata||E!==this.keyIdToKeyInfo[S])return o(this.createKeyLoadError(v,we.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));E.decryptdata.key=v.decryptdata.key=new Uint8Array(p.data),v.keyLoader=null,E.loader=null,s({frag:v,keyInfo:E})},onError:(p,g,y,b)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),y,Bt({url:l.url,data:void 0},p)))},onTimeout:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};a.load(l,f,h)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,a=n.loader;t.keyLoader===a&&(t.keyLoader=null,n.loader=null);const s=gE(n.decryptdata)||i;delete this.keyIdToKeyInfo[s],a&&a.destroy()}}function gE(r){if(r.keyFormat!==cn.FAIRPLAY){const e=r.keyId;if(e)return un(e)}return r.uri}function iF(r){const{type:e}=r;switch(e){case St.AUDIO_TRACK:return et.AUDIO;case St.SUBTITLE_TRACK:return et.SUBTITLE;default:return et.MAIN}}function yE(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class _ve{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on($.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off($.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,a=n||i,s=new a(t);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:St.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:a,url:s,deliveryDirectives:o,levelInfo:l}=t;this.load({id:n,level:i,pathwayId:a,responseType:"text",type:St.LEVEL,url:s,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:a,deliveryDirectives:s,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:St.AUDIO_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:a,deliveryDirectives:s,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:St.SUBTITLE_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onLevelsUpdated(e,t){const n=this.loaders[St.LEVEL];if(n){const i=n.context;i&&!t.levels.some(a=>a===i.levelOrTrack)&&(n.abort(),delete this.loaders[St.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=this.hls.logger,f=i.context;if(f&&f.levelOrTrack===e.levelOrTrack&&(f.url===e.url||f.deliveryDirectives&&!e.deliveryDirectives)){f.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${f.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===St.MANIFEST?a=n.manifestLoadPolicy.default:a=Yt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Xe((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===St.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===St.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===St.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const f=c.partTarget,h=c.targetduration;if(f&&h){const p=Math.max(f*3,h*.8)*1e3;a=Yt({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(c,f,h,p)=>{const g=this.getInternalLoader(h);this.resetInternalLoader(h.type);const y=c.data;f.parsing.start=performance.now(),ka.isMediaPlaylist(y)||h.type!==St.MANIFEST?this.handleTrackOrLevelPlaylist(c,f,h,p||null,g):this.handleMasterPlaylist(c,f,h,p)},onError:(c,f,h,p)=>{this.handleNetworkError(f,h,!1,c,p)},onTimeout:(c,f,h)=>{this.handleNetworkError(f,h,!0,void 0,c)}};i.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const a=this.hls,s=e.data,o=yE(e,n),l=ka.parseMasterPlaylist(s,o);if(l.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,i,t);return}const{contentSteering:c,levels:f,sessionData:h,sessionKeys:p,startTimeOffset:g,variableList:y}=l;this.variableList=y,f.forEach(S=>{const{unknownCodecs:w}=S;if(w){const{preferManagedMediaSource:A}=this.hls.config;let{audioCodec:_,videoCodec:I}=S;for(let D=w.length;D--;){const P=w[D];Hd(P,"audio",A)?(S.audioCodec=_=_?`${_},${P}`:P,Nc.audio[_.substring(0,4)]=2,w.splice(D,1)):Hd(P,"video",A)&&(S.videoCodec=I=I?`${I},${P}`:P,Nc.video[I.substring(0,4)]=2,w.splice(D,1))}}});const{AUDIO:b=[],SUBTITLES:v,"CLOSED-CAPTIONS":E}=ka.parseMasterPlaylistMedia(s,o,l);b.length&&!b.some(w=>!w.url)&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new fr({}),bitrate:0,url:""})),a.trigger($.MANIFEST_LOADED,{levels:f,audioTracks:b,subtitles:v,captions:E,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:h,sessionKeys:p,startTimeOffset:g,variableList:y})}handleTrackOrLevelPlaylist(e,t,n,i,a){const s=this.hls,{id:o,level:l,type:c}=n,f=yE(e,n),h=Xe(l)?l:Xe(o)?o:0,p=iF(n),g=ka.parseLevelPlaylist(e.data,f,h,p,0,this.variableList);if(c===St.MANIFEST){const y={attrs:new fr({}),bitrate:0,details:g,name:"",url:f};g.requestScheduled=t.loading.start+u8(g,0),s.trigger($.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=g,this.handlePlaylistLoaded(g,e,t,n,i,a)}handleManifestParsingError(e,t,n,i,a){this.hls.trigger($.ERROR,{type:at.NETWORK_ERROR,details:we.MANIFEST_PARSING_ERROR,fatal:t.type===St.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:a})}handleNetworkError(e,t,n=!1,i,a){let s=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===St.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===St.AUDIO_TRACK||e.type===St.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let l=we.UNKNOWN,c=!1;const f=this.getInternalLoader(e);switch(e.type){case St.MANIFEST:l=n?we.MANIFEST_LOAD_TIMEOUT:we.MANIFEST_LOAD_ERROR,c=!0;break;case St.LEVEL:l=n?we.LEVEL_LOAD_TIMEOUT:we.LEVEL_LOAD_ERROR,c=!1;break;case St.AUDIO_TRACK:l=n?we.AUDIO_TRACK_LOAD_TIMEOUT:we.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case St.SUBTITLE_TRACK:l=n?we.SUBTITLE_TRACK_LOAD_TIMEOUT:we.SUBTITLE_LOAD_ERROR,c=!1;break}f&&this.resetInternalLoader(e.type);const h={type:at.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:f,context:e,error:o,networkDetails:t,stats:a};if(i){const p=t?.url||e.url;h.response=Bt({url:p,data:void 0},i)}this.hls.trigger($.ERROR,h)}handlePlaylistLoaded(e,t,n,i,a,s){const o=this.hls,{type:l,level:c,levelOrTrack:f,id:h,groupId:p,deliveryDirectives:g}=i,y=yE(t,i),b=iF(i);let v=typeof i.level=="number"&&b===et.MAIN?c:void 0;const E=e.playlistParsingError;if(E){if(this.hls.logger.warn(`${E} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger($.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:E,reason:E.message,response:t,context:i,level:v,parent:b,networkDetails:a,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const S=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger($.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:S,reason:S.message,response:t,context:i,level:v,parent:b,networkDetails:a,stats:n});return}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case St.MANIFEST:case St.LEVEL:if(v){if(!f)v=0;else if(f!==o.levels[v]){const S=o.levels.indexOf(f);S>-1&&(v=S)}}o.trigger($.LEVEL_LOADED,{details:e,levelInfo:f||o.levels[0],level:v||0,id:h||0,stats:n,networkDetails:a,deliveryDirectives:g,withoutMultiVariant:l===St.MANIFEST});break;case St.AUDIO_TRACK:o.trigger($.AUDIO_TRACK_LOADED,{details:e,track:f,id:h||0,groupId:p||"",stats:n,networkDetails:a,deliveryDirectives:g});break;case St.SUBTITLE_TRACK:o.trigger($.SUBTITLE_TRACK_LOADED,{details:e,track:f,id:h||0,groupId:p||"",stats:n,networkDetails:a,deliveryDirectives:g});break}}}class bi{static get version(){return zd}static isMSESupported(){return lH()}static isSupported(){return bve()}static getMediaSource(){return Xo()}static get Events(){return $}static get MetadataSchema(){return vi}static get ErrorTypes(){return at}static get ErrorDetails(){return we}static get DefaultConfig(){return bi.defaultConfig?bi.defaultConfig:ove}static set DefaultConfig(e){bi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new vD,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Cpe(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=uve(bi.DefaultConfig,e,t);this.userConfig=e,n.progressive&&cve(n,t);const{abrController:i,bufferController:a,capLevelController:s,errorController:o,fpsController:l}=n,c=new o(this),f=this.abrController=new i(this),h=new Tme(this),p=n.interstitialsController,g=p?this.interstitialsController=new p(this,bi):null,y=this.bufferController=new a(this,h),b=this.capLevelController=new s(this),v=new l(this),E=new _ve(this),S=n.contentSteeringController,w=S?new S(this):null,A=this.levelController=new vve(this,w),_=new gve(this),I=new wve(this.config,this.logger),D=this.streamController=new Eve(this,h,I),P=this.gapController=new pve(this,h);b.setStreamController(D),v.setStreamController(D);const k=[E,A,D];g&&k.splice(1,0,g),w&&k.splice(1,0,w),this.networkControllers=k;const M=[f,y,P,b,v,_,h];this.audioTrackController=this.createController(n.audioTrackController,k);const H=n.audioStreamController;H&&k.push(this.audioStreamController=new H(this,h,I)),this.subtitleTrackController=this.createController(n.subtitleTrackController,k);const N=n.subtitleStreamController;N&&k.push(this.subtititleStreamController=new N(this,h,I)),this.createController(n.timelineController,M),I.emeController=this.emeController=this.createController(n.emeController,M),this.cmcdController=this.createController(n.cmcdController,M),this.latencyController=this.createController(yve,M),this.coreComponents=M,k.push(c);const Q=c.onErrorOut;typeof Q=="function"&&this.on($.ERROR,Q,c),this.on($.MANIFEST_LOADED,E.onManifestLoaded,E)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===$.ERROR;this.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger($.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger($.ERROR,{type:at.OTHER_ERROR,details:we.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger($.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger($.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger($.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=oD.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger($.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[et.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[et.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[et.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=pye()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){ume(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let a=i;a--;){const s=e[a].attrs["HDCP-LEVEL"];if(s&&s<=n)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=W5(t);return Y5(e,n,navigator.mediaCapabilities)}}bi.defaultConfig=void 0;function $o({cameraId:r,title:e}){const t=R.useRef(null),n=R.useRef(null),[i,a]=R.useState(null),[s,o]=R.useState(!0),c={1:"https://www.tansaeng.com/live/tapo1.m3u8",2:"https://www.tansaeng.com/live/tapo2.m3u8",3:"https://www.tansaeng.com/live/tapo3.m3u8",4:"https://www.tansaeng.com/live/tapo4.m3u8"}[r];return R.useEffect(()=>{const f=t.current;if(!f||!c){a(" URL  ."),o(!1);return}if(a(null),o(!0),bi.isSupported()){const h=new bi({liveBackBufferLength:0,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,enableWorker:!0,lowLatencyMode:!0});return n.current=h,h.loadSource(c),h.attachMedia(f),h.on(bi.Events.MANIFEST_PARSED,()=>{o(!1),f.play().catch(p=>{console.warn("Auto-play failed:",p),a("  ")})}),h.on(bi.Events.ERROR,(p,g)=>{if(console.error("HLS error:",g),g.fatal)switch(g.type){case bi.ErrorTypes.NETWORK_ERROR:a(" :    "),setTimeout(()=>{h.startLoad()},3e3);break;case bi.ErrorTypes.MEDIA_ERROR:a(" :     "),h.recoverMediaError();break;default:a(" :    "),h.destroy();break}}),()=>{h.destroy(),n.current=null}}else{if(f.canPlayType("application/vnd.apple.mpegurl"))return f.src=c,f.addEventListener("loadedmetadata",()=>{o(!1),f.play().catch(h=>{console.warn("Auto-play failed:",h),a("  ")})}),f.addEventListener("error",()=>{a("  ")}),()=>{f.src=""};a("  HLS   "),o(!1)}},[c]),L.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden",children:[e&&L.jsx("div",{className:"bg-farm-500 px-4 py-2",children:L.jsx("h3",{className:"text-base font-semibold text-gray-900 m-0",children:e})}),L.jsxs("div",{className:"relative bg-black aspect-video",children:[L.jsx("video",{ref:t,className:"w-full h-full",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),s&&L.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:L.jsxs("div",{className:"text-white text-center",children:[L.jsx("div",{className:"text-2xl mb-2",children:""}),L.jsx("div",{className:"text-sm",children:"  ..."})]})}),i&&L.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70",children:L.jsxs("div",{className:"text-white text-center p-4",children:[L.jsx("div",{className:"text-3xl mb-2",children:""}),L.jsx("div",{className:"text-sm",children:i})]})})]}),L.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:L.jsxs("div",{className:"text-xs text-gray-500 truncate",title:c,children:[" ",c]})})]})}const Am="tansaeng_rpi_ip";function Tve(){const[r,e]=R.useState(""),[t,n]=R.useState(null),[i,a]=R.useState("");R.useEffect(()=>{const f=localStorage.getItem(Am);f&&n(f)},[]);const s=f=>/^(\d{1,3}\.){3}\d{1,3}$/.test(f)?f.split(".").every(g=>{const y=parseInt(g,10);return y>=0&&y<=255}):!1,o=()=>{const f=r.trim();if(console.log("[RpiIpSettings]   , :",f),!f){console.log("[RpiIpSettings]  "),a(" IP  ");return}if(!s(f)){console.log("[RpiIpSettings] IP  :",f),a("  IP    (: 192.168.1.100)");return}localStorage.setItem(Am,f),console.log("[RpiIpSettings] localStorage  :",f),console.log("[RpiIpSettings]  :",localStorage.getItem(Am)),n(f),e(""),a("  IP "),setTimeout(()=>a(""),3e3)},l=()=>{t&&window.confirm("  IP ?")&&(localStorage.removeItem(Am),n(null),a("  IP "),setTimeout(()=>a(""),3e3))},c=f=>{f.key==="Enter"&&o()};return L.jsxs("div",{className:"mb-6 rounded-lg border border-slate-600 bg-slate-800 p-4",children:[L.jsx("h2",{className:"mb-3 text-lg font-semibold text-slate-100",children:"  IP "}),L.jsxs("div",{className:"mb-3 flex gap-2",children:[L.jsx("input",{type:"text",value:r,onChange:f=>e(f.target.value),onKeyPress:c,placeholder:": 192.168.219.170",className:"flex-1 rounded border border-slate-600 bg-slate-700 px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-blue-500 focus:outline-none"}),L.jsx("button",{onClick:o,className:"rounded bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:""})]}),i&&L.jsx("div",{className:`mb-3 rounded p-2 text-sm ${i.includes("")?"bg-red-900/30 text-red-300":i.includes("")?"bg-yellow-900/30 text-yellow-300":"bg-green-900/30 text-green-300"}`,children:i}),t&&L.jsxs("div",{className:"rounded border border-slate-600 bg-slate-700 p-3",children:[L.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[L.jsx("span",{className:"text-sm text-slate-400",children:"  IP:"}),L.jsx("button",{onClick:l,className:"rounded bg-red-600 px-3 py-1 text-sm font-medium text-white transition hover:bg-red-700",children:""})]}),L.jsx("div",{className:"rounded bg-slate-800 p-2 font-mono text-green-400",children:t}),L.jsx("div",{className:"mt-2 text-xs text-slate-400",children:"  IP HLS   "})]}),!t&&L.jsx("div",{className:"rounded border border-yellow-600/30 bg-yellow-900/20 p-3 text-sm text-yellow-300",children:"  IP  .    IP ."})]})}function Ave(r){return L.jsxs("div",{className:"p-4",children:[L.jsx("h1",{className:"mb-4 text-2xl font-bold text-slate-100",children:"   "}),L.jsx(Tve,{}),L.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[L.jsx($o,{cameraId:1,title:"  1"}),L.jsx($o,{cameraId:2,title:"  2"}),L.jsx($o,{cameraId:3,title:"  3"}),L.jsx($o,{cameraId:4,title:" "})]})]})}function Dve({farmSettings:r,setFarmSettings:e}){const t="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",n="8884",i="esp32-client-01",a=s=>s==="fan"?{bg:"#dbeafe",text:"#1e40af"}:s==="vent"?{bg:"#d1fae5",text:"#065f46"}:s==="pump"?{bg:"#f3e8ff",text:"#6b21a8"}:s==="camera"?{bg:"#fed7aa",text:"#c2410c"}:{bg:"#f3f4f6",text:"#4b5563"};return L.jsx("div",{className:"bg-gray-50",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[L.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" "}),L.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:"MQTT ,  ,    "})]}),L.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"MQTT   ( )"}),L.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"HiveMQ Cloud Host"}),L.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:t})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"WebSocket Port"}),L.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:n})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Username"}),L.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:i})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Password"}),L.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:""})]})]}),L.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:"MQTT   .env  ."})]}),L.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),L.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[" ",SE.length,"   ."]}),L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"w-full text-sm border-collapse",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ID"}),L.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),L.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),L.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ESP32 "}),L.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"Command Topic"})]})}),L.jsx("tbody",{children:SE.map((s,o)=>{const l=a(s.type);return L.jsxs("tr",{className:o%2===0?"bg-white":"bg-gray-50",children:[L.jsx("td",{className:"px-4 py-2 text-gray-700",children:s.id}),L.jsx("td",{className:"px-4 py-2 text-gray-700",children:s.name}),L.jsx("td",{className:"px-4 py-2",children:L.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{background:l.bg,color:l.text},children:s.type})}),L.jsx("td",{className:"px-4 py-2 text-gray-600 text-xs",children:s.esp32Id}),L.jsx("td",{className:"px-4 py-2 text-gray-500 text-xs font-mono",children:s.commandTopic})]},s.id)})})]})}),L.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:" / src/config/devices.ts  ."})]}),L.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),L.jsxs("div",{children:[L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),L.jsx("input",{type:"text",value:r.farmName,onChange:s=>e({...r,farmName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),L.jsx("input",{type:"text",value:r.adminName,onChange:s=>e({...r,adminName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),L.jsx("textarea",{value:r.notes,onChange:s=>e({...r,notes:s.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base resize-vertical"})]}),L.jsx("button",{className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-2 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:""})]})]})]})})}const aF="tansaeng-smartfarm-device-state-v1",sF="tansaeng-smartfarm-mist-zones-v1",oF="tansaeng-smartfarm-cameras-v1",lF="tansaeng-smartfarm-farm-settings-v1";function Ove(){const[r,e]=R.useState({});return R.useEffect(()=>{const t=localStorage.getItem(aF);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse device state from localStorage:",n)}},[]),R.useEffect(()=>{localStorage.setItem(aF,JSON.stringify(r))},[r]),[r,e]}const Ive=[{id:"zone_a",name:"Zone A ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_b",name:"Zone B ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_c",name:"Zone C ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1}];function Cve(){const[r,e]=R.useState(Ive);return R.useEffect(()=>{const t=localStorage.getItem(sF);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse mist zones from localStorage:",n)}},[]),R.useEffect(()=>{localStorage.setItem(sF,JSON.stringify(r))},[r]),[r,e]}function Rve(){const[r,e]=R.useState([]);return R.useEffect(()=>{const t=localStorage.getItem(oF);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse cameras from localStorage:",n)}},[]),R.useEffect(()=>{localStorage.setItem(oF,JSON.stringify(r))},[r]),[r,e]}const Pve={farmName:"",adminName:"",notes:""};function Lve(){const[r,e]=R.useState(Pve);return R.useEffect(()=>{const t=localStorage.getItem(lF);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse farm settings from localStorage:",n)}},[]),R.useEffect(()=>{localStorage.setItem(lF,JSON.stringify(r))},[r]),[r,e]}function kve(){const[r,e]=R.useState("devices"),[t,n]=R.useState("connecting"),[i,a]=Ove(),[s,o]=Cve(),[l,c]=Rve(),[f,h]=Lve();return R.useEffect(()=>{const p=Sg();return p.on("connect",()=>{n("connected")}),p.on("error",()=>{n("error")}),p.on("reconnect",()=>{n("connecting")}),p.on("offline",()=>{n("disconnected")}),()=>{}},[]),L.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[L.jsx(Jz,{connectionState:t}),L.jsx(tY,{activeTab:r,onTabChange:e}),L.jsxs("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pb-5 min-h-0",children:[r==="devices"&&L.jsx(yW,{deviceState:i,setDeviceState:a}),r==="mist"&&L.jsx(vW,{zones:s,setZones:o}),r==="environment"&&L.jsx(Spe,{}),r==="cameras"&&L.jsx(Ave,{cameras:l,setCameras:c}),r==="settings"&&L.jsx(Dve,{farmSettings:f,setFarmSettings:h})]}),L.jsx("footer",{className:"bg-white border-t border-gray-200 px-4 py-3 flex-shrink-0",children:L.jsxs("div",{className:"max-w-screen-2xl mx-auto text-center text-xs text-gray-500",children:[L.jsx("p",{className:"mb-1",children:"    v2.5"}),L.jsx("p",{className:"text-2xs text-gray-400",children:"Powered by React + TypeScript + HiveMQ Cloud"})]})})]})}const Mve=()=>L.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:L.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4",children:[L.jsxs("header",{className:"bg-farm-500 rounded-lg px-6 py-4 mb-6 shadow-md",children:[L.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" Tapo  "}),L.jsx("p",{className:"text-gray-800 text-sm mt-1 m-0",children:"TP-Link Tapo  4  HLS "})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsx($o,{cameraId:1,title:"  1"}),L.jsx($o,{cameraId:2,title:"  2"}),L.jsx($o,{cameraId:3,title:"  3"}),L.jsx($o,{cameraId:4,title:" "})]}),L.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4",children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),L.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[L.jsx("li",{children:"    HLS  "}),L.jsx("li",{children:"       "}),L.jsx("li",{children:"      "}),L.jsx("li",{children:"  URL .env  VITE_TAPO_CAM*_HLS_URL  "})]})]})]})});DK.createRoot(document.getElementById("root")).render(L.jsx(R.StrictMode,{children:L.jsx(Hz,{basename:"/smartfarm-ui",children:L.jsxs(bz,{children:[L.jsx(bE,{path:"/",element:L.jsx(kve,{})}),L.jsx(bE,{path:"/camera",element:L.jsx(Mve,{})})]})})}));
