function o6(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function na(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var By={exports:{}},wc={};var PO;function l6(){if(PO)return wc;PO=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:a,ref:i!==void 0?i:null,props:s}}return wc.Fragment=e,wc.jsx=t,wc.jsxs=t,wc}var DO;function u6(){return DO||(DO=1,By.exports=l6()),By.exports}var z=u6(),Uy={exports:{}},ht={};var kO;function c6(){if(kO)return ht;kO=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),g=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function E($,F,Z){this.props=$,this.context=F,this.refs=b,this.updater=Z||y}E.prototype.isReactComponent={},E.prototype.setState=function($,F){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,F,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function x(){}x.prototype=E.prototype;function T($,F,Z){this.props=$,this.context=F,this.refs=b,this.updater=Z||y}var w=T.prototype=new x;w.constructor=T,S(w,E.prototype),w.isPureReactComponent=!0;var _=Array.isArray;function R(){}var O={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function B($,F,Z){var de=Z.ref;return{$$typeof:r,type:$,key:F,ref:de!==void 0?de:null,props:Z}}function N($,F){return B($.type,F,$.props)}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function k($){var F={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Z){return F[Z]})}var W=/\/+/g;function q($,F){return typeof $=="object"&&$!==null&&$.key!=null?k(""+$.key):F.toString(36)}function X($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(R,R):($.status="pending",$.then(function(F){$.status==="pending"&&($.status="fulfilled",$.value=F)},function(F){$.status==="pending"&&($.status="rejected",$.reason=F)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function H($,F,Z,de,oe){var xe=typeof $;(xe==="undefined"||xe==="boolean")&&($=null);var ae=!1;if($===null)ae=!0;else switch(xe){case"bigint":case"string":case"number":ae=!0;break;case"object":switch($.$$typeof){case r:case e:ae=!0;break;case h:return ae=$._init,H(ae($._payload),F,Z,de,oe)}}if(ae)return oe=oe($),ae=de===""?"."+q($,0):de,_(oe)?(Z="",ae!=null&&(Z=ae.replace(W,"$&/")+"/"),H(oe,F,Z,"",function(le){return le})):oe!=null&&(U(oe)&&(oe=N(oe,Z+(oe.key==null||$&&$.key===oe.key?"":(""+oe.key).replace(W,"$&/")+"/")+ae)),F.push(oe)),1;ae=0;var re=de===""?".":de+":";if(_($))for(var te=0;te<$.length;te++)de=$[te],xe=re+q(de,te),ae+=H(de,F,Z,xe,oe);else if(te=m($),typeof te=="function")for($=te.call($),te=0;!(de=$.next()).done;)de=de.value,xe=re+q(de,te++),ae+=H(de,F,Z,xe,oe);else if(xe==="object"){if(typeof $.then=="function")return H(X($),F,Z,de,oe);throw F=String($),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ae}function K($,F,Z){if($==null)return $;var de=[],oe=0;return H($,de,"","",function(xe){return F.call(Z,xe,oe++)}),de}function V($){if($._status===-1){var F=$._result;F=F(),F.then(function(Z){($._status===0||$._status===-1)&&($._status=1,$._result=Z)},function(Z){($._status===0||$._status===-1)&&($._status=2,$._result=Z)}),$._status===-1&&($._status=0,$._result=F)}if($._status===1)return $._result.default;throw $._result}var J=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Q={map:K,forEach:function($,F,Z){K($,function(){F.apply(this,arguments)},Z)},count:function($){var F=0;return K($,function(){F++}),F},toArray:function($){return K($,function(F){return F})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ht.Activity=d,ht.Children=Q,ht.Component=E,ht.Fragment=t,ht.Profiler=i,ht.PureComponent=T,ht.StrictMode=n,ht.Suspense=u,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ht.__COMPILER_RUNTIME={__proto__:null,c:function($){return O.H.useMemoCache($)}},ht.cache=function($){return function(){return $.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function($,F,Z){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var de=S({},$.props),oe=$.key;if(F!=null)for(xe in F.key!==void 0&&(oe=""+F.key),F)!C.call(F,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&F.ref===void 0||(de[xe]=F[xe]);var xe=arguments.length-2;if(xe===1)de.children=Z;else if(1<xe){for(var ae=Array(xe),re=0;re<xe;re++)ae[re]=arguments[re+2];de.children=ae}return B($.type,oe,de)},ht.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},ht.createElement=function($,F,Z){var de,oe={},xe=null;if(F!=null)for(de in F.key!==void 0&&(xe=""+F.key),F)C.call(F,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(oe[de]=F[de]);var ae=arguments.length-2;if(ae===1)oe.children=Z;else if(1<ae){for(var re=Array(ae),te=0;te<ae;te++)re[te]=arguments[te+2];oe.children=re}if($&&$.defaultProps)for(de in ae=$.defaultProps,ae)oe[de]===void 0&&(oe[de]=ae[de]);return B($,xe,oe)},ht.createRef=function(){return{current:null}},ht.forwardRef=function($){return{$$typeof:o,render:$}},ht.isValidElement=U,ht.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:V}},ht.memo=function($,F){return{$$typeof:c,type:$,compare:F===void 0?null:F}},ht.startTransition=function($){var F=O.T,Z={};O.T=Z;try{var de=$(),oe=O.S;oe!==null&&oe(Z,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(R,J)}catch(xe){J(xe)}finally{F!==null&&Z.types!==null&&(F.types=Z.types),O.T=F}},ht.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ht.use=function($){return O.H.use($)},ht.useActionState=function($,F,Z){return O.H.useActionState($,F,Z)},ht.useCallback=function($,F){return O.H.useCallback($,F)},ht.useContext=function($){return O.H.useContext($)},ht.useDebugValue=function(){},ht.useDeferredValue=function($,F){return O.H.useDeferredValue($,F)},ht.useEffect=function($,F){return O.H.useEffect($,F)},ht.useEffectEvent=function($){return O.H.useEffectEvent($)},ht.useId=function(){return O.H.useId()},ht.useImperativeHandle=function($,F,Z){return O.H.useImperativeHandle($,F,Z)},ht.useInsertionEffect=function($,F){return O.H.useInsertionEffect($,F)},ht.useLayoutEffect=function($,F){return O.H.useLayoutEffect($,F)},ht.useMemo=function($,F){return O.H.useMemo($,F)},ht.useOptimistic=function($,F){return O.H.useOptimistic($,F)},ht.useReducer=function($,F,Z){return O.H.useReducer($,F,Z)},ht.useRef=function($){return O.H.useRef($)},ht.useState=function($){return O.H.useState($)},ht.useSyncExternalStore=function($,F,Z){return O.H.useSyncExternalStore($,F,Z)},ht.useTransition=function(){return O.H.useTransition()},ht.version="19.2.0",ht}var MO;function Tu(){return MO||(MO=1,Uy.exports=c6()),Uy.exports}var P=Tu();const f6=na(P),h6=o6({__proto__:null,default:f6},[P]);var jy={exports:{}},Ic={},Fy={exports:{}},$y={};var NO;function d6(){return NO||(NO=1,(function(r){function e(H,K){var V=H.length;H.push(K);e:for(;0<V;){var J=V-1>>>1,Q=H[J];if(0<i(Q,K))H[J]=K,H[V]=Q,V=J;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],V=H.pop();if(V!==K){H[0]=V;e:for(var J=0,Q=H.length,$=Q>>>1;J<$;){var F=2*(J+1)-1,Z=H[F],de=F+1,oe=H[de];if(0>i(Z,V))de<Q&&0>i(oe,Z)?(H[J]=oe,H[de]=V,J=de):(H[J]=Z,H[F]=V,J=F);else if(de<Q&&0>i(oe,V))H[J]=oe,H[de]=V,J=de;else break e}}return K}function i(H,K){var V=H.sortIndex-K.sortIndex;return V!==0?V:H.id-K.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var u=[],c=[],h=1,d=null,g=3,m=!1,y=!1,S=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function w(H){for(var K=t(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=H)n(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(c)}}function _(H){if(S=!1,w(H),!y)if(t(u)!==null)y=!0,R||(R=!0,k());else{var K=t(c);K!==null&&X(_,K.startTime-H)}}var R=!1,O=-1,C=5,B=-1;function N(){return b?!0:!(r.unstable_now()-B<C)}function U(){if(b=!1,R){var H=r.unstable_now();B=H;var K=!0;try{e:{y=!1,S&&(S=!1,x(O),O=-1),m=!0;var V=g;try{t:{for(w(H),d=t(u);d!==null&&!(d.expirationTime>H&&N());){var J=d.callback;if(typeof J=="function"){d.callback=null,g=d.priorityLevel;var Q=J(d.expirationTime<=H);if(H=r.unstable_now(),typeof Q=="function"){d.callback=Q,w(H),K=!0;break t}d===t(u)&&n(u),w(H)}else n(u);d=t(u)}if(d!==null)K=!0;else{var $=t(c);$!==null&&X(_,$.startTime-H),K=!1}}break e}finally{d=null,g=V,m=!1}K=void 0}}finally{K?k():R=!1}}}var k;if(typeof T=="function")k=function(){T(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=U,k=function(){q.postMessage(null)}}else k=function(){E(U,0)};function X(H,K){O=E(function(){H(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_next=function(H){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var V=g;g=K;try{return H()}finally{g=V}},r.unstable_requestPaint=function(){b=!0},r.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=g;g=H;try{return K()}finally{g=V}},r.unstable_scheduleCallback=function(H,K,V){var J=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,H={id:h++,callback:K,priorityLevel:H,startTime:V,expirationTime:Q,sortIndex:-1},V>J?(H.sortIndex=V,e(c,H),t(u)===null&&H===t(c)&&(S?(x(O),O=-1):S=!0,X(_,V-J))):(H.sortIndex=Q,e(u,H),y||m||(y=!0,R||(R=!0,k()))),H},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(H){var K=g;return function(){var V=g;g=K;try{return H.apply(this,arguments)}finally{g=V}}}})($y)),$y}var BO;function p6(){return BO||(BO=1,Fy.exports=d6()),Fy.exports}var Gy={exports:{}},Qr={};var UO;function g6(){if(UO)return Qr;UO=1;var r=Tu();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,c,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:u,containerInfo:c,implementation:h}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(u,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(u,c,null,h)},Qr.flushSync=function(u){var c=a.T,h=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=c,n.p=h,n.d.f()}},Qr.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(u,c))},Qr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Qr.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?n.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:g,fetchPriority:m}):h==="script"&&n.d.X(u,{crossOrigin:d,integrity:g,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Qr.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);n.d.M(u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(u)},Qr.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin);n.d.L(u,h,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Qr.preloadModule=function(u,c){if(typeof u=="string")if(c){var h=o(c.as,c.crossOrigin);n.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(u)},Qr.requestFormReset=function(u){n.d.r(u)},Qr.unstable_batchedUpdates=function(u,c){return u(c)},Qr.useFormState=function(u,c,h){return a.H.useFormState(u,c,h)},Qr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qr.version="19.2.0",Qr}var jO;function CM(){if(jO)return Gy.exports;jO=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gy.exports=g6(),Gy.exports}var FO;function m6(){if(FO)return Ic;FO=1;var r=p6(),e=Tu(),t=CM();function n(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var f=l,p=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(p=f.return),l=f.return;while(l)}return f.tag===3?p:null}function a(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function u(l){if(s(l)!==l)throw Error(n(188))}function c(l){var f=l.alternate;if(!f){if(f=s(l),f===null)throw Error(n(188));return f!==l?null:l}for(var p=l,v=f;;){var A=p.return;if(A===null)break;var I=A.alternate;if(I===null){if(v=A.return,v!==null){p=v;continue}break}if(A.child===I.child){for(I=A.child;I;){if(I===p)return u(A),l;if(I===v)return u(A),f;I=I.sibling}throw Error(n(188))}if(p.return!==v.return)p=A,v=I;else{for(var M=!1,Y=A.child;Y;){if(Y===p){M=!0,p=A,v=I;break}if(Y===v){M=!0,v=A,p=I;break}Y=Y.sibling}if(!M){for(Y=I.child;Y;){if(Y===p){M=!0,p=I,v=A;break}if(Y===v){M=!0,v=I,p=A;break}Y=Y.sibling}if(!M)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:f}function h(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=h(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function k(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var W=Symbol.for("react.client.reference");function q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===W?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case R:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case T:return l.displayName||"Context";case x:return(l._context.displayName||"Context")+".Consumer";case w:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return f=l.displayName||null,f!==null?f:q(l.type)||"Memo";case C:f=l._payload,l=l._init;try{return q(l(f))}catch{}}return null}var X=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},J=[],Q=-1;function $(l){return{current:l}}function F(l){0>Q||(l.current=J[Q],J[Q]=null,Q--)}function Z(l,f){Q++,J[Q]=l.current,l.current=f}var de=$(null),oe=$(null),xe=$(null),ae=$(null);function re(l,f){switch(Z(xe,f),Z(oe,l),Z(de,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?tO(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=tO(f),l=rO(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}F(de),Z(de,l)}function te(){F(de),F(oe),F(xe)}function le(l){l.memoizedState!==null&&Z(ae,l);var f=de.current,p=rO(f,l.type);f!==p&&(Z(oe,l),Z(de,p))}function ce(l){oe.current===l&&(F(de),F(oe)),ae.current===l&&(F(ae),Ec._currentValue=V)}var ne,Le;function Se(l){if(ne===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);ne=f&&f[1]||"",Le=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+Le}var ie=!1;function se(l,f){if(!l||ie)return"";ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(De){var Oe=De}Reflect.construct(l,[],He)}else{try{He.call()}catch(De){Oe=De}l.call(He.prototype)}}else{try{throw Error()}catch(De){Oe=De}(He=l())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(De){if(De&&Oe&&typeof De.stack=="string")return[De.stack,Oe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),M=I[0],Y=I[1];if(M&&Y){var he=M.split(`
`),we=Y.split(`
`);for(A=v=0;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;for(;A<we.length&&!we[A].includes("DetermineComponentFrameRoot");)A++;if(v===he.length||A===we.length)for(v=he.length-1,A=we.length-1;1<=v&&0<=A&&he[v]!==we[A];)A--;for(;1<=v&&0<=A;v--,A--)if(he[v]!==we[A]){if(v!==1||A!==1)do if(v--,A--,0>A||he[v]!==we[A]){var Fe=`
`+he[v].replace(" at new "," at ");return l.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",l.displayName)),Fe}while(1<=v&&0<=A);break}}}finally{ie=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Se(p):""}function ye(l,f){switch(l.tag){case 26:case 27:case 5:return Se(l.type);case 16:return Se("Lazy");case 13:return l.child!==f&&f!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return se(l.type,!1);case 11:return se(l.type.render,!1);case 1:return se(l.type,!0);case 31:return Se("Activity");default:return""}}function Re(l){try{var f="",p=null;do f+=ye(l,p),p=l,l=l.return;while(l);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Ce=Object.prototype.hasOwnProperty,je=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,Ue=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Ie=r.unstable_now,lt=r.unstable_getCurrentPriorityLevel,L=r.unstable_ImmediatePriority,D=r.unstable_UserBlockingPriority,G=r.unstable_NormalPriority,fe=r.unstable_LowPriority,ve=r.unstable_IdlePriority,Pe=r.log,Ve=r.unstable_setDisableYieldValue,me=null,Ae=null;function Je(l){if(typeof Pe=="function"&&Ve(l),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(me,l)}catch{}}var Xe=Math.clz32?Math.clz32:ni,ct=Math.log,dt=Math.LN2;function ni(l){return l>>>=0,l===0?32:31-(ct(l)/dt|0)|0}var an=256,or=262144,on=4194304;function vn(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ln(l,f,p){var v=l.pendingLanes;if(v===0)return 0;var A=0,I=l.suspendedLanes,M=l.pingedLanes;l=l.warmLanes;var Y=v&134217727;return Y!==0?(v=Y&~I,v!==0?A=vn(v):(M&=Y,M!==0?A=vn(M):p||(p=Y&~l,p!==0&&(A=vn(p))))):(Y=v&~I,Y!==0?A=vn(Y):M!==0?A=vn(M):p||(p=v&~l,p!==0&&(A=vn(p)))),A===0?0:f!==0&&f!==A&&(f&I)===0&&(I=A&-A,p=f&-f,I>=p||I===32&&(p&4194048)!==0)?f:A}function br(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function al(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var l=on;return on<<=1,(on&62914560)===0&&(on=4194304),l}function hs(l){for(var f=[],p=0;31>p;p++)f.push(l);return f}function ee(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ue(l,f,p,v,A,I){var M=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Y=l.entanglements,he=l.expirationTimes,we=l.hiddenUpdates;for(p=M&~p;0<p;){var Fe=31-Xe(p),He=1<<Fe;Y[Fe]=0,he[Fe]=-1;var Oe=we[Fe];if(Oe!==null)for(we[Fe]=null,Fe=0;Fe<Oe.length;Fe++){var De=Oe[Fe];De!==null&&(De.lane&=-536870913)}p&=~He}v!==0&&qe(l,v,0),I!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=I&~(M&~f))}function qe(l,f,p){l.pendingLanes|=f,l.suspendedLanes&=~f;var v=31-Xe(f);l.entangledLanes|=f,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function We(l,f){var p=l.entangledLanes|=f;for(l=l.entanglements;p;){var v=31-Xe(p),A=1<<v;A&f|l[v]&f&&(l[v]|=f),p&=~A}}function Qe(l,f){var p=f&-f;return p=(p&42)!==0?1:Zt(p),(p&(l.suspendedLanes|f))!==0?0:p}function Zt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Sr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function bn(){var l=K.p;return l!==0?l:(l=window.event,l===void 0?32:_O(l.type))}function ga(l,f){var p=K.p;try{return K.p=l,f()}finally{K.p=p}}var Sn=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Sn,xr="__reactProps$"+Sn,xn="__reactContainer$"+Sn,En="__reactEvents$"+Sn,Ui="__reactListeners$"+Sn,ds="__reactHandles$"+Sn,Un="__reactResources$"+Sn,un="__reactMarker$"+Sn;function Rm(l){delete l[Jt],delete l[xr],delete l[En],delete l[Ui],delete l[ds]}function ol(l){var f=l[Jt];if(f)return f;for(var p=l.parentNode;p;){if(f=p[xn]||p[Jt]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(l=uO(l);l!==null;){if(p=l[Jt])return p;l=uO(l)}return f}l=p,p=l.parentNode}return null}function ll(l){if(l=l[Jt]||l[xn]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function Uu(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(n(33))}function ul(l){var f=l[Un];return f||(f=l[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Lr(l){l[un]=!0}var z_=new Set,H_={};function co(l,f){cl(l,f),cl(l+"Capture",f)}function cl(l,f){for(H_[l]=f,l=0;l<f.length;l++)z_.add(f[l])}var Z$=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),K_={},q_={};function J$(l){return Ce.call(q_,l)?!0:Ce.call(K_,l)?!1:Z$.test(l)?q_[l]=!0:(K_[l]=!0,!1)}function Yf(l,f,p){if(J$(f))if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+p)}}function Xf(l,f,p){if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+p)}}function ps(l,f,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(f,p,""+v)}}function ii(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function V_(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function e4(l,f,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,I=v.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return A.call(this)},set:function(M){p=""+M,I.call(this,M)}}),Object.defineProperty(l,f,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(M){p=""+M},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Lm(l){if(!l._valueTracker){var f=V_(l)?"checked":"value";l._valueTracker=e4(l,f,""+l[f])}}function W_(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var p=f.getValue(),v="";return l&&(v=V_(l)?l.checked?"true":"false":l.value),l=v,l!==p?(f.setValue(l),!0):!1}function Qf(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var t4=/[\n"\\]/g;function si(l){return l.replace(t4,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Cm(l,f,p,v,A,I,M,Y){l.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?l.type=M:l.removeAttribute("type"),f!=null?M==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+ii(f)):l.value!==""+ii(f)&&(l.value=""+ii(f)):M!=="submit"&&M!=="reset"||l.removeAttribute("value"),f!=null?Pm(l,M,ii(f)):p!=null?Pm(l,M,ii(p)):v!=null&&l.removeAttribute("value"),A==null&&I!=null&&(l.defaultChecked=!!I),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.name=""+ii(Y):l.removeAttribute("name")}function Y_(l,f,p,v,A,I,M,Y){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.type=I),f!=null||p!=null){if(!(I!=="submit"&&I!=="reset"||f!=null)){Lm(l);return}p=p!=null?""+ii(p):"",f=f!=null?""+ii(f):p,Y||f===l.value||(l.value=f),l.defaultValue=f}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=Y?l.checked:!!v,l.defaultChecked=!!v,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.name=M),Lm(l)}function Pm(l,f,p){f==="number"&&Qf(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function fl(l,f,p,v){if(l=l.options,f){f={};for(var A=0;A<p.length;A++)f["$"+p[A]]=!0;for(p=0;p<l.length;p++)A=f.hasOwnProperty("$"+l[p].value),l[p].selected!==A&&(l[p].selected=A),A&&v&&(l[p].defaultSelected=!0)}else{for(p=""+ii(p),f=null,A=0;A<l.length;A++){if(l[A].value===p){l[A].selected=!0,v&&(l[A].defaultSelected=!0);return}f!==null||l[A].disabled||(f=l[A])}f!==null&&(f.selected=!0)}}function X_(l,f,p){if(f!=null&&(f=""+ii(f),f!==l.value&&(l.value=f),p==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=p!=null?""+ii(p):""}function Q_(l,f,p,v){if(f==null){if(v!=null){if(p!=null)throw Error(n(92));if(X(v)){if(1<v.length)throw Error(n(93));v=v[0]}p=v}p==null&&(p=""),f=p}p=ii(f),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),Lm(l)}function hl(l,f){if(f){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=f;return}}l.textContent=f}var r4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Z_(l,f,p){var v=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":v?l.setProperty(f,p):typeof p!="number"||p===0||r4.has(f)?f==="float"?l.cssFloat=p:l[f]=(""+p).trim():l[f]=p+"px"}function J_(l,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var A in f)v=f[A],f.hasOwnProperty(A)&&p[A]!==v&&Z_(l,A,v)}else for(var I in f)f.hasOwnProperty(I)&&Z_(l,I,f[I])}function Dm(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zf(l){return i4.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function gs(){}var km=null;function Mm(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var dl=null,pl=null;function ew(l){var f=ll(l);if(f&&(l=f.stateNode)){var p=l[xr]||null;e:switch(l=f.stateNode,f.type){case"input":if(Cm(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+si(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var v=p[f];if(v!==l&&v.form===l.form){var A=v[xr]||null;if(!A)throw Error(n(90));Cm(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<p.length;f++)v=p[f],v.form===l.form&&W_(v)}break e;case"textarea":X_(l,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&fl(l,!!p.multiple,f,!1)}}}var Nm=!1;function tw(l,f,p){if(Nm)return l(f,p);Nm=!0;try{var v=l(f);return v}finally{if(Nm=!1,(dl!==null||pl!==null)&&(jh(),dl&&(f=dl,l=pl,pl=dl=null,ew(f),l)))for(f=0;f<l.length;f++)ew(l[f])}}function ju(l,f){var p=l.stateNode;if(p===null)return null;var v=p[xr]||null;if(v===null)return null;p=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bm=!1;if(ms)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{Bm=!1}var ma=null,Um=null,Jf=null;function rw(){if(Jf)return Jf;var l,f=Um,p=f.length,v,A="value"in ma?ma.value:ma.textContent,I=A.length;for(l=0;l<p&&f[l]===A[l];l++);var M=p-l;for(v=1;v<=M&&f[p-v]===A[I-v];v++);return Jf=A.slice(l,1<v?1-v:void 0)}function eh(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function th(){return!0}function nw(){return!1}function Tn(l){function f(p,v,A,I,M){this._reactName=p,this._targetInst=A,this.type=v,this.nativeEvent=I,this.target=M,this.currentTarget=null;for(var Y in l)l.hasOwnProperty(Y)&&(p=l[Y],this[Y]=p?p(I):I[Y]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?th:nw,this.isPropagationStopped=nw,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),f}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=Tn(fo),$u=d({},fo,{view:0,detail:0}),s4=Tn($u),jm,Fm,Gu,nh=d({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Gu&&(Gu&&l.type==="mousemove"?(jm=l.screenX-Gu.screenX,Fm=l.screenY-Gu.screenY):Fm=jm=0,Gu=l),jm)},movementY:function(l){return"movementY"in l?l.movementY:Fm}}),iw=Tn(nh),a4=d({},nh,{dataTransfer:0}),o4=Tn(a4),l4=d({},$u,{relatedTarget:0}),$m=Tn(l4),u4=d({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),c4=Tn(u4),f4=d({},fo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),h4=Tn(f4),d4=d({},fo,{data:0}),sw=Tn(d4),p4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y4(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=m4[l])?!!f[l]:!1}function Gm(){return y4}var v4=d({},$u,{key:function(l){if(l.key){var f=p4[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=eh(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?g4[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(l){return l.type==="keypress"?eh(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?eh(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),b4=Tn(v4),S4=d({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aw=Tn(S4),x4=d({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),E4=Tn(x4),T4=d({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),A4=Tn(T4),_4=d({},nh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),w4=Tn(_4),I4=d({},fo,{newState:0,oldState:0}),O4=Tn(I4),R4=[9,13,27,32],zm=ms&&"CompositionEvent"in window,zu=null;ms&&"documentMode"in document&&(zu=document.documentMode);var L4=ms&&"TextEvent"in window&&!zu,ow=ms&&(!zm||zu&&8<zu&&11>=zu),lw=" ",uw=!1;function cw(l,f){switch(l){case"keyup":return R4.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var gl=!1;function C4(l,f){switch(l){case"compositionend":return fw(f);case"keypress":return f.which!==32?null:(uw=!0,lw);case"textInput":return l=f.data,l===lw&&uw?null:l;default:return null}}function P4(l,f){if(gl)return l==="compositionend"||!zm&&cw(l,f)?(l=rw(),Jf=Um=ma=null,gl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ow&&f.locale!=="ko"?null:f.data;default:return null}}var D4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!D4[l.type]:f==="textarea"}function dw(l,f,p,v){dl?pl?pl.push(v):pl=[v]:dl=v,f=qh(f,"onChange"),0<f.length&&(p=new rh("onChange","change",null,p,v),l.push({event:p,listeners:f}))}var Hu=null,Ku=null;function k4(l){YI(l,0)}function ih(l){var f=Uu(l);if(W_(f))return l}function pw(l,f){if(l==="change")return f}var gw=!1;if(ms){var Hm;if(ms){var Km="oninput"in document;if(!Km){var mw=document.createElement("div");mw.setAttribute("oninput","return;"),Km=typeof mw.oninput=="function"}Hm=Km}else Hm=!1;gw=Hm&&(!document.documentMode||9<document.documentMode)}function yw(){Hu&&(Hu.detachEvent("onpropertychange",vw),Ku=Hu=null)}function vw(l){if(l.propertyName==="value"&&ih(Ku)){var f=[];dw(f,Ku,l,Mm(l)),tw(k4,f)}}function M4(l,f,p){l==="focusin"?(yw(),Hu=f,Ku=p,Hu.attachEvent("onpropertychange",vw)):l==="focusout"&&yw()}function N4(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ih(Ku)}function B4(l,f){if(l==="click")return ih(f)}function U4(l,f){if(l==="input"||l==="change")return ih(f)}function j4(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var jn=typeof Object.is=="function"?Object.is:j4;function qu(l,f){if(jn(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var p=Object.keys(l),v=Object.keys(f);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var A=p[v];if(!Ce.call(f,A)||!jn(l[A],f[A]))return!1}return!0}function bw(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Sw(l,f){var p=bw(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=f&&v>=f)return{node:p,offset:f-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=bw(p)}}function xw(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?xw(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function Ew(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=Qf(l.document);f instanceof l.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)l=f.contentWindow;else break;f=Qf(l.document)}return f}function qm(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var F4=ms&&"documentMode"in document&&11>=document.documentMode,ml=null,Vm=null,Vu=null,Wm=!1;function Tw(l,f,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Wm||ml==null||ml!==Qf(v)||(v=ml,"selectionStart"in v&&qm(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Vu&&qu(Vu,v)||(Vu=v,v=qh(Vm,"onSelect"),0<v.length&&(f=new rh("onSelect","select",null,f,p),l.push({event:f,listeners:v}),f.target=ml)))}function ho(l,f){var p={};return p[l.toLowerCase()]=f.toLowerCase(),p["Webkit"+l]="webkit"+f,p["Moz"+l]="moz"+f,p}var yl={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Ym={},Aw={};ms&&(Aw=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function po(l){if(Ym[l])return Ym[l];if(!yl[l])return l;var f=yl[l],p;for(p in f)if(f.hasOwnProperty(p)&&p in Aw)return Ym[l]=f[p];return l}var _w=po("animationend"),ww=po("animationiteration"),Iw=po("animationstart"),$4=po("transitionrun"),G4=po("transitionstart"),z4=po("transitioncancel"),Ow=po("transitionend"),Rw=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function wi(l,f){Rw.set(l,f),co(f,[l])}var sh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ai=[],vl=0,Qm=0;function ah(){for(var l=vl,f=Qm=vl=0;f<l;){var p=ai[f];ai[f++]=null;var v=ai[f];ai[f++]=null;var A=ai[f];ai[f++]=null;var I=ai[f];if(ai[f++]=null,v!==null&&A!==null){var M=v.pending;M===null?A.next=A:(A.next=M.next,M.next=A),v.pending=A}I!==0&&Lw(p,A,I)}}function oh(l,f,p,v){ai[vl++]=l,ai[vl++]=f,ai[vl++]=p,ai[vl++]=v,Qm|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Zm(l,f,p,v){return oh(l,f,p,v),lh(l)}function go(l,f){return oh(l,null,null,f),lh(l)}function Lw(l,f,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var A=!1,I=l.return;I!==null;)I.childLanes|=p,v=I.alternate,v!==null&&(v.childLanes|=p),I.tag===22&&(l=I.stateNode,l===null||l._visibility&1||(A=!0)),l=I,I=I.return;return l.tag===3?(I=l.stateNode,A&&f!==null&&(A=31-Xe(p),l=I.hiddenUpdates,v=l[A],v===null?l[A]=[f]:v.push(f),f.lane=p|536870912),I):null}function lh(l){if(50<gc)throw gc=0,oy=null,Error(n(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var bl={};function H4(l,f,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(l,f,p,v){return new H4(l,f,p,v)}function Jm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ys(l,f){var p=l.alternate;return p===null?(p=Fn(l.tag,f,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=f,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,f=l.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Cw(l,f){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,f=p.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function uh(l,f,p,v,A,I){var M=0;if(v=l,typeof l=="function")Jm(l)&&(M=1);else if(typeof l=="string")M=Y8(l,p,de.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=Fn(31,p,f,A),l.elementType=B,l.lanes=I,l;case S:return mo(p.children,A,I,f);case b:M=8,A|=24;break;case E:return l=Fn(12,p,f,A|2),l.elementType=E,l.lanes=I,l;case _:return l=Fn(13,p,f,A),l.elementType=_,l.lanes=I,l;case R:return l=Fn(19,p,f,A),l.elementType=R,l.lanes=I,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:M=10;break e;case x:M=9;break e;case w:M=11;break e;case O:M=14;break e;case C:M=16,v=null;break e}M=29,p=Error(n(130,l===null?"null":typeof l,"")),v=null}return f=Fn(M,p,f,A),f.elementType=l,f.type=v,f.lanes=I,f}function mo(l,f,p,v){return l=Fn(7,l,v,f),l.lanes=p,l}function e0(l,f,p){return l=Fn(6,l,null,f),l.lanes=p,l}function Pw(l){var f=Fn(18,null,null,0);return f.stateNode=l,f}function t0(l,f,p){return f=Fn(4,l.children!==null?l.children:[],l.key,f),f.lanes=p,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Dw=new WeakMap;function oi(l,f){if(typeof l=="object"&&l!==null){var p=Dw.get(l);return p!==void 0?p:(f={value:l,source:f,stack:Re(f)},Dw.set(l,f),f)}return{value:l,source:f,stack:Re(f)}}var Sl=[],xl=0,ch=null,Wu=0,li=[],ui=0,ya=null,ji=1,Fi="";function vs(l,f){Sl[xl++]=Wu,Sl[xl++]=ch,ch=l,Wu=f}function kw(l,f,p){li[ui++]=ji,li[ui++]=Fi,li[ui++]=ya,ya=l;var v=ji;l=Fi;var A=32-Xe(v)-1;v&=~(1<<A),p+=1;var I=32-Xe(f)+A;if(30<I){var M=A-A%5;I=(v&(1<<M)-1).toString(32),v>>=M,A-=M,ji=1<<32-Xe(f)+A|p<<A|v,Fi=I+l}else ji=1<<I|p<<A|v,Fi=l}function r0(l){l.return!==null&&(vs(l,1),kw(l,1,0))}function n0(l){for(;l===ch;)ch=Sl[--xl],Sl[xl]=null,Wu=Sl[--xl],Sl[xl]=null;for(;l===ya;)ya=li[--ui],li[ui]=null,Fi=li[--ui],li[ui]=null,ji=li[--ui],li[ui]=null}function Mw(l,f){li[ui++]=ji,li[ui++]=Fi,li[ui++]=ya,ji=f.id,Fi=f.overflow,ya=l}var $r=null,Ht=null,Et=!1,va=null,ci=!1,i0=Error(n(519));function ba(l){var f=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yu(oi(f,l)),i0}function Nw(l){var f=l.stateNode,p=l.type,v=l.memoizedProps;switch(f[Jt]=l,f[xr]=v,p){case"dialog":bt("cancel",f),bt("close",f);break;case"iframe":case"object":case"embed":bt("load",f);break;case"video":case"audio":for(p=0;p<yc.length;p++)bt(yc[p],f);break;case"source":bt("error",f);break;case"img":case"image":case"link":bt("error",f),bt("load",f);break;case"details":bt("toggle",f);break;case"input":bt("invalid",f),Y_(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":bt("invalid",f);break;case"textarea":bt("invalid",f),Q_(f,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||v.suppressHydrationWarning===!0||JI(f.textContent,p)?(v.popover!=null&&(bt("beforetoggle",f),bt("toggle",f)),v.onScroll!=null&&bt("scroll",f),v.onScrollEnd!=null&&bt("scrollend",f),v.onClick!=null&&(f.onclick=gs),f=!0):f=!1,f||ba(l,!0)}function Bw(l){for($r=l.return;$r;)switch($r.tag){case 5:case 31:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:$r=$r.return}}function El(l){if(l!==$r)return!1;if(!Et)return Bw(l),Et=!0,!1;var f=l.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Ey(l.type,l.memoizedProps)),p=!p),p&&Ht&&ba(l),Bw(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Ht=lO(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Ht=lO(l)}else f===27?(f=Ht,Da(l.type)?(l=Iy,Iy=null,Ht=l):Ht=f):Ht=$r?hi(l.stateNode.nextSibling):null;return!0}function yo(){Ht=$r=null,Et=!1}function s0(){var l=va;return l!==null&&(In===null?In=l:In.push.apply(In,l),va=null),l}function Yu(l){va===null?va=[l]:va.push(l)}var a0=$(null),vo=null,bs=null;function Sa(l,f,p){Z(a0,f._currentValue),f._currentValue=p}function Ss(l){l._currentValue=a0.current,F(a0)}function o0(l,f,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),l===p)break;l=l.return}}function l0(l,f,p,v){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var I=A.dependencies;if(I!==null){var M=A.child;I=I.firstContext;e:for(;I!==null;){var Y=I;I=A;for(var he=0;he<f.length;he++)if(Y.context===f[he]){I.lanes|=p,Y=I.alternate,Y!==null&&(Y.lanes|=p),o0(I.return,p,l),v||(M=null);break e}I=Y.next}}else if(A.tag===18){if(M=A.return,M===null)throw Error(n(341));M.lanes|=p,I=M.alternate,I!==null&&(I.lanes|=p),o0(M,p,l),M=null}else M=A.child;if(M!==null)M.return=A;else for(M=A;M!==null;){if(M===l){M=null;break}if(A=M.sibling,A!==null){A.return=M.return,M=A;break}M=M.return}A=M}}function Tl(l,f,p,v){l=null;for(var A=f,I=!1;A!==null;){if(!I){if((A.flags&524288)!==0)I=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var M=A.alternate;if(M===null)throw Error(n(387));if(M=M.memoizedProps,M!==null){var Y=A.type;jn(A.pendingProps.value,M.value)||(l!==null?l.push(Y):l=[Y])}}else if(A===ae.current){if(M=A.alternate,M===null)throw Error(n(387));M.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(Ec):l=[Ec])}A=A.return}l!==null&&l0(f,l,p,v),f.flags|=262144}function fh(l){for(l=l.firstContext;l!==null;){if(!jn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function bo(l){vo=l,bs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gr(l){return Uw(vo,l)}function hh(l,f){return vo===null&&bo(l),Uw(l,f)}function Uw(l,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},bs===null){if(l===null)throw Error(n(308));bs=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else bs=bs.next=f;return p}var K4=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){f.aborted=!0,l.forEach(function(p){return p()})}},q4=r.unstable_scheduleCallback,V4=r.unstable_NormalPriority,hr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function u0(){return{controller:new K4,data:new Map,refCount:0}}function Xu(l){l.refCount--,l.refCount===0&&q4(V4,function(){l.controller.abort()})}var Qu=null,c0=0,Al=0,_l=null;function W4(l,f){if(Qu===null){var p=Qu=[];c0=0,Al=dy(),_l={status:"pending",value:void 0,then:function(v){p.push(v)}}}return c0++,f.then(jw,jw),f}function jw(){if(--c0===0&&Qu!==null){_l!==null&&(_l.status="fulfilled");var l=Qu;Qu=null,Al=0,_l=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function Y4(l,f){var p=[],v={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return l.then(function(){v.status="fulfilled",v.value=f;for(var A=0;A<p.length;A++)(0,p[A])(f)},function(A){for(v.status="rejected",v.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),v}var Fw=H.S;H.S=function(l,f){TI=Ie(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&W4(l,f),Fw!==null&&Fw(l,f)};var So=$(null);function f0(){var l=So.current;return l!==null?l:Ut.pooledCache}function dh(l,f){f===null?Z(So,So.current):Z(So,f.pool)}function $w(){var l=f0();return l===null?null:{parent:hr._currentValue,pool:l}}var wl=Error(n(460)),h0=Error(n(474)),ph=Error(n(542)),gh={then:function(){}};function Gw(l){return l=l.status,l==="fulfilled"||l==="rejected"}function zw(l,f,p){switch(p=l[p],p===void 0?l.push(f):p!==f&&(f.then(gs,gs),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Kw(l),l;default:if(typeof f.status=="string")f.then(gs,gs);else{if(l=Ut,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=f,l.status="pending",l.then(function(v){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=v}},function(v){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Kw(l),l}throw Eo=f,wl}}function xo(l){try{var f=l._init;return f(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Eo=p,wl):p}}var Eo=null;function Hw(){if(Eo===null)throw Error(n(459));var l=Eo;return Eo=null,l}function Kw(l){if(l===wl||l===ph)throw Error(n(483))}var Il=null,Zu=0;function mh(l){var f=Zu;return Zu+=1,Il===null&&(Il=[]),zw(Il,l,f)}function Ju(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function yh(l,f){throw f.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(f),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function qw(l){function f(be,ge){if(l){var _e=be.deletions;_e===null?(be.deletions=[ge],be.flags|=16):_e.push(ge)}}function p(be,ge){if(!l)return null;for(;ge!==null;)f(be,ge),ge=ge.sibling;return null}function v(be){for(var ge=new Map;be!==null;)be.key!==null?ge.set(be.key,be):ge.set(be.index,be),be=be.sibling;return ge}function A(be,ge){return be=ys(be,ge),be.index=0,be.sibling=null,be}function I(be,ge,_e){return be.index=_e,l?(_e=be.alternate,_e!==null?(_e=_e.index,_e<ge?(be.flags|=67108866,ge):_e):(be.flags|=67108866,ge)):(be.flags|=1048576,ge)}function M(be){return l&&be.alternate===null&&(be.flags|=67108866),be}function Y(be,ge,_e,ze){return ge===null||ge.tag!==6?(ge=e0(_e,be.mode,ze),ge.return=be,ge):(ge=A(ge,_e),ge.return=be,ge)}function he(be,ge,_e,ze){var st=_e.type;return st===S?Fe(be,ge,_e.props.children,ze,_e.key):ge!==null&&(ge.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===C&&xo(st)===ge.type)?(ge=A(ge,_e.props),Ju(ge,_e),ge.return=be,ge):(ge=uh(_e.type,_e.key,_e.props,null,be.mode,ze),Ju(ge,_e),ge.return=be,ge)}function we(be,ge,_e,ze){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==_e.containerInfo||ge.stateNode.implementation!==_e.implementation?(ge=t0(_e,be.mode,ze),ge.return=be,ge):(ge=A(ge,_e.children||[]),ge.return=be,ge)}function Fe(be,ge,_e,ze,st){return ge===null||ge.tag!==7?(ge=mo(_e,be.mode,ze,st),ge.return=be,ge):(ge=A(ge,_e),ge.return=be,ge)}function He(be,ge,_e){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=e0(""+ge,be.mode,_e),ge.return=be,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:return _e=uh(ge.type,ge.key,ge.props,null,be.mode,_e),Ju(_e,ge),_e.return=be,_e;case y:return ge=t0(ge,be.mode,_e),ge.return=be,ge;case C:return ge=xo(ge),He(be,ge,_e)}if(X(ge)||k(ge))return ge=mo(ge,be.mode,_e,null),ge.return=be,ge;if(typeof ge.then=="function")return He(be,mh(ge),_e);if(ge.$$typeof===T)return He(be,hh(be,ge),_e);yh(be,ge)}return null}function Oe(be,ge,_e,ze){var st=ge!==null?ge.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return st!==null?null:Y(be,ge,""+_e,ze);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case m:return _e.key===st?he(be,ge,_e,ze):null;case y:return _e.key===st?we(be,ge,_e,ze):null;case C:return _e=xo(_e),Oe(be,ge,_e,ze)}if(X(_e)||k(_e))return st!==null?null:Fe(be,ge,_e,ze,null);if(typeof _e.then=="function")return Oe(be,ge,mh(_e),ze);if(_e.$$typeof===T)return Oe(be,ge,hh(be,_e),ze);yh(be,_e)}return null}function De(be,ge,_e,ze,st){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return be=be.get(_e)||null,Y(ge,be,""+ze,st);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case m:return be=be.get(ze.key===null?_e:ze.key)||null,he(ge,be,ze,st);case y:return be=be.get(ze.key===null?_e:ze.key)||null,we(ge,be,ze,st);case C:return ze=xo(ze),De(be,ge,_e,ze,st)}if(X(ze)||k(ze))return be=be.get(_e)||null,Fe(ge,be,ze,st,null);if(typeof ze.then=="function")return De(be,ge,_e,mh(ze),st);if(ze.$$typeof===T)return De(be,ge,_e,hh(ge,ze),st);yh(ge,ze)}return null}function tt(be,ge,_e,ze){for(var st=null,Tt=null,rt=ge,gt=ge=0,xt=null;rt!==null&&gt<_e.length;gt++){rt.index>gt?(xt=rt,rt=null):xt=rt.sibling;var At=Oe(be,rt,_e[gt],ze);if(At===null){rt===null&&(rt=xt);break}l&&rt&&At.alternate===null&&f(be,rt),ge=I(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At,rt=xt}if(gt===_e.length)return p(be,rt),Et&&vs(be,gt),st;if(rt===null){for(;gt<_e.length;gt++)rt=He(be,_e[gt],ze),rt!==null&&(ge=I(rt,ge,gt),Tt===null?st=rt:Tt.sibling=rt,Tt=rt);return Et&&vs(be,gt),st}for(rt=v(rt);gt<_e.length;gt++)xt=De(rt,be,gt,_e[gt],ze),xt!==null&&(l&&xt.alternate!==null&&rt.delete(xt.key===null?gt:xt.key),ge=I(xt,ge,gt),Tt===null?st=xt:Tt.sibling=xt,Tt=xt);return l&&rt.forEach(function(Ua){return f(be,Ua)}),Et&&vs(be,gt),st}function ot(be,ge,_e,ze){if(_e==null)throw Error(n(151));for(var st=null,Tt=null,rt=ge,gt=ge=0,xt=null,At=_e.next();rt!==null&&!At.done;gt++,At=_e.next()){rt.index>gt?(xt=rt,rt=null):xt=rt.sibling;var Ua=Oe(be,rt,At.value,ze);if(Ua===null){rt===null&&(rt=xt);break}l&&rt&&Ua.alternate===null&&f(be,rt),ge=I(Ua,ge,gt),Tt===null?st=Ua:Tt.sibling=Ua,Tt=Ua,rt=xt}if(At.done)return p(be,rt),Et&&vs(be,gt),st;if(rt===null){for(;!At.done;gt++,At=_e.next())At=He(be,At.value,ze),At!==null&&(ge=I(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At);return Et&&vs(be,gt),st}for(rt=v(rt);!At.done;gt++,At=_e.next())At=De(rt,be,gt,At.value,ze),At!==null&&(l&&At.alternate!==null&&rt.delete(At.key===null?gt:At.key),ge=I(At,ge,gt),Tt===null?st=At:Tt.sibling=At,Tt=At);return l&&rt.forEach(function(a6){return f(be,a6)}),Et&&vs(be,gt),st}function kt(be,ge,_e,ze){if(typeof _e=="object"&&_e!==null&&_e.type===S&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case m:e:{for(var st=_e.key;ge!==null;){if(ge.key===st){if(st=_e.type,st===S){if(ge.tag===7){p(be,ge.sibling),ze=A(ge,_e.props.children),ze.return=be,be=ze;break e}}else if(ge.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===C&&xo(st)===ge.type){p(be,ge.sibling),ze=A(ge,_e.props),Ju(ze,_e),ze.return=be,be=ze;break e}p(be,ge);break}else f(be,ge);ge=ge.sibling}_e.type===S?(ze=mo(_e.props.children,be.mode,ze,_e.key),ze.return=be,be=ze):(ze=uh(_e.type,_e.key,_e.props,null,be.mode,ze),Ju(ze,_e),ze.return=be,be=ze)}return M(be);case y:e:{for(st=_e.key;ge!==null;){if(ge.key===st)if(ge.tag===4&&ge.stateNode.containerInfo===_e.containerInfo&&ge.stateNode.implementation===_e.implementation){p(be,ge.sibling),ze=A(ge,_e.children||[]),ze.return=be,be=ze;break e}else{p(be,ge);break}else f(be,ge);ge=ge.sibling}ze=t0(_e,be.mode,ze),ze.return=be,be=ze}return M(be);case C:return _e=xo(_e),kt(be,ge,_e,ze)}if(X(_e))return tt(be,ge,_e,ze);if(k(_e)){if(st=k(_e),typeof st!="function")throw Error(n(150));return _e=st.call(_e),ot(be,ge,_e,ze)}if(typeof _e.then=="function")return kt(be,ge,mh(_e),ze);if(_e.$$typeof===T)return kt(be,ge,hh(be,_e),ze);yh(be,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,ge!==null&&ge.tag===6?(p(be,ge.sibling),ze=A(ge,_e),ze.return=be,be=ze):(p(be,ge),ze=e0(_e,be.mode,ze),ze.return=be,be=ze),M(be)):p(be,ge)}return function(be,ge,_e,ze){try{Zu=0;var st=kt(be,ge,_e,ze);return Il=null,st}catch(rt){if(rt===wl||rt===ph)throw rt;var Tt=Fn(29,rt,null,be.mode);return Tt.lanes=ze,Tt.return=be,Tt}finally{}}}var To=qw(!0),Vw=qw(!1),xa=!1;function d0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ea(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ta(l,f,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(wt&2)!==0){var A=v.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),v.pending=f,f=lh(l),Lw(l,null,p),f}return oh(l,v,f,p),lh(l)}function ec(l,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,We(l,p)}}function g0(l,f){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var A=null,I=null;if(p=p.firstBaseUpdate,p!==null){do{var M={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};I===null?A=I=M:I=I.next=M,p=p.next}while(p!==null);I===null?A=I=f:I=I.next=f}else A=I=f;p={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=f}var m0=!1;function tc(){if(m0){var l=_l;if(l!==null)throw l}}function rc(l,f,p,v){m0=!1;var A=l.updateQueue;xa=!1;var I=A.firstBaseUpdate,M=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var he=Y,we=he.next;he.next=null,M===null?I=we:M.next=we,M=he;var Fe=l.alternate;Fe!==null&&(Fe=Fe.updateQueue,Y=Fe.lastBaseUpdate,Y!==M&&(Y===null?Fe.firstBaseUpdate=we:Y.next=we,Fe.lastBaseUpdate=he))}if(I!==null){var He=A.baseState;M=0,Fe=we=he=null,Y=I;do{var Oe=Y.lane&-536870913,De=Oe!==Y.lane;if(De?(St&Oe)===Oe:(v&Oe)===Oe){Oe!==0&&Oe===Al&&(m0=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var tt=l,ot=Y;Oe=f;var kt=p;switch(ot.tag){case 1:if(tt=ot.payload,typeof tt=="function"){He=tt.call(kt,He,Oe);break e}He=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=ot.payload,Oe=typeof tt=="function"?tt.call(kt,He,Oe):tt,Oe==null)break e;He=d({},He,Oe);break e;case 2:xa=!0}}Oe=Y.callback,Oe!==null&&(l.flags|=64,De&&(l.flags|=8192),De=A.callbacks,De===null?A.callbacks=[Oe]:De.push(Oe))}else De={lane:Oe,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Fe===null?(we=Fe=De,he=He):Fe=Fe.next=De,M|=Oe;if(Y=Y.next,Y===null){if(Y=A.shared.pending,Y===null)break;De=Y,Y=De.next,De.next=null,A.lastBaseUpdate=De,A.shared.pending=null}}while(!0);Fe===null&&(he=He),A.baseState=he,A.firstBaseUpdate=we,A.lastBaseUpdate=Fe,I===null&&(A.shared.lanes=0),Oa|=M,l.lanes=M,l.memoizedState=He}}function Ww(l,f){if(typeof l!="function")throw Error(n(191,l));l.call(f)}function Yw(l,f){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)Ww(p[l],f)}var Ol=$(null),vh=$(0);function Xw(l,f){l=Rs,Z(vh,l),Z(Ol,f),Rs=l|f.baseLanes}function y0(){Z(vh,Rs),Z(Ol,Ol.current)}function v0(){Rs=vh.current,F(Ol),F(vh)}var $n=$(null),fi=null;function Aa(l){var f=l.alternate;Z(lr,lr.current&1),Z($n,l),fi===null&&(f===null||Ol.current!==null||f.memoizedState!==null)&&(fi=l)}function b0(l){Z(lr,lr.current),Z($n,l),fi===null&&(fi=l)}function Qw(l){l.tag===22?(Z(lr,lr.current),Z($n,l),fi===null&&(fi=l)):_a()}function _a(){Z(lr,lr.current),Z($n,$n.current)}function Gn(l){F($n),fi===l&&(fi=null),F(lr)}var lr=$(0);function bh(l){for(var f=l;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||_y(p)||wy(p)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var xs=0,pt=null,Pt=null,dr=null,Sh=!1,Rl=!1,Ao=!1,xh=0,nc=0,Ll=null,X4=0;function ir(){throw Error(n(321))}function S0(l,f){if(f===null)return!1;for(var p=0;p<f.length&&p<l.length;p++)if(!jn(l[p],f[p]))return!1;return!0}function x0(l,f,p,v,A,I){return xs=I,pt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,H.H=l===null||l.memoizedState===null?k1:N0,Ao=!1,I=p(v,A),Ao=!1,Rl&&(I=Jw(f,p,v,A)),Zw(l),I}function Zw(l){H.H=ac;var f=Pt!==null&&Pt.next!==null;if(xs=0,dr=Pt=pt=null,Sh=!1,nc=0,Ll=null,f)throw Error(n(300));l===null||pr||(l=l.dependencies,l!==null&&fh(l)&&(pr=!0))}function Jw(l,f,p,v){pt=l;var A=0;do{if(Rl&&(Ll=null),nc=0,Rl=!1,25<=A)throw Error(n(301));if(A+=1,dr=Pt=null,l.updateQueue!=null){var I=l.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}H.H=M1,I=f(p,v)}while(Rl);return I}function Q4(){var l=H.H,f=l.useState()[0];return f=typeof f.then=="function"?ic(f):f,l=l.useState()[0],(Pt!==null?Pt.memoizedState:null)!==l&&(pt.flags|=1024),f}function E0(){var l=xh!==0;return xh=0,l}function T0(l,f,p){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~p}function A0(l){if(Sh){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Sh=!1}xs=0,dr=Pt=pt=null,Rl=!1,nc=xh=0,Ll=null}function cn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?pt.memoizedState=dr=l:dr=dr.next=l,dr}function ur(){if(Pt===null){var l=pt.alternate;l=l!==null?l.memoizedState:null}else l=Pt.next;var f=dr===null?pt.memoizedState:dr.next;if(f!==null)dr=f,Pt=l;else{if(l===null)throw pt.alternate===null?Error(n(467)):Error(n(310));Pt=l,l={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},dr===null?pt.memoizedState=dr=l:dr=dr.next=l}return dr}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(l){var f=nc;return nc+=1,Ll===null&&(Ll=[]),l=zw(Ll,l,f),f=pt,(dr===null?f.memoizedState:dr.next)===null&&(f=f.alternate,H.H=f===null||f.memoizedState===null?k1:N0),l}function Th(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return ic(l);if(l.$$typeof===T)return Gr(l)}throw Error(n(438,String(l)))}function _0(l){var f=null,p=pt.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var v=pt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=Eh(),pt.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(l),v=0;v<l;v++)p[v]=N;return f.index++,p}function Es(l,f){return typeof f=="function"?f(l):f}function Ah(l){var f=ur();return w0(f,Pt,l)}function w0(l,f,p){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var A=l.baseQueue,I=v.pending;if(I!==null){if(A!==null){var M=A.next;A.next=I.next,I.next=M}f.baseQueue=A=I,v.pending=null}if(I=l.baseState,A===null)l.memoizedState=I;else{f=A.next;var Y=M=null,he=null,we=f,Fe=!1;do{var He=we.lane&-536870913;if(He!==we.lane?(St&He)===He:(xs&He)===He){var Oe=we.revertLane;if(Oe===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),He===Al&&(Fe=!0);else if((xs&Oe)===Oe){we=we.next,Oe===Al&&(Fe=!0);continue}else He={lane:0,revertLane:we.revertLane,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},he===null?(Y=he=He,M=I):he=he.next=He,pt.lanes|=Oe,Oa|=Oe;He=we.action,Ao&&p(I,He),I=we.hasEagerState?we.eagerState:p(I,He)}else Oe={lane:He,revertLane:we.revertLane,gesture:we.gesture,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},he===null?(Y=he=Oe,M=I):he=he.next=Oe,pt.lanes|=He,Oa|=He;we=we.next}while(we!==null&&we!==f);if(he===null?M=I:he.next=Y,!jn(I,l.memoizedState)&&(pr=!0,Fe&&(p=_l,p!==null)))throw p;l.memoizedState=I,l.baseState=M,l.baseQueue=he,v.lastRenderedState=I}return A===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function I0(l){var f=ur(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var v=p.dispatch,A=p.pending,I=f.memoizedState;if(A!==null){p.pending=null;var M=A=A.next;do I=l(I,M.action),M=M.next;while(M!==A);jn(I,f.memoizedState)||(pr=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),p.lastRenderedState=I}return[I,v]}function e1(l,f,p){var v=pt,A=ur(),I=Et;if(I){if(p===void 0)throw Error(n(407));p=p()}else p=f();var M=!jn((Pt||A).memoizedState,p);if(M&&(A.memoizedState=p,pr=!0),A=A.queue,L0(n1.bind(null,v,A,l),[l]),A.getSnapshot!==f||M||dr!==null&&dr.memoizedState.tag&1){if(v.flags|=2048,Cl(9,{destroy:void 0},r1.bind(null,v,A,p,f),null),Ut===null)throw Error(n(349));I||(xs&127)!==0||t1(v,f,p)}return p}function t1(l,f,p){l.flags|=16384,l={getSnapshot:f,value:p},f=pt.updateQueue,f===null?(f=Eh(),pt.updateQueue=f,f.stores=[l]):(p=f.stores,p===null?f.stores=[l]:p.push(l))}function r1(l,f,p,v){f.value=p,f.getSnapshot=v,i1(f)&&s1(l)}function n1(l,f,p){return p(function(){i1(f)&&s1(l)})}function i1(l){var f=l.getSnapshot;l=l.value;try{var p=f();return!jn(l,p)}catch{return!0}}function s1(l){var f=go(l,2);f!==null&&On(f,l,2)}function O0(l){var f=cn();if(typeof l=="function"){var p=l;if(l=p(),Ao){Je(!0);try{p()}finally{Je(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:l},f}function a1(l,f,p,v){return l.baseState=p,w0(l,Pt,typeof v=="function"?v:Es)}function Z4(l,f,p,v,A){if(Ih(l))throw Error(n(485));if(l=f.action,l!==null){var I={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){I.listeners.push(M)}};H.T!==null?p(!0):I.isTransition=!1,v(I),p=f.pending,p===null?(I.next=f.pending=I,o1(f,I)):(I.next=p.next,f.pending=p.next=I)}}function o1(l,f){var p=f.action,v=f.payload,A=l.state;if(f.isTransition){var I=H.T,M={};H.T=M;try{var Y=p(A,v),he=H.S;he!==null&&he(M,Y),l1(l,f,Y)}catch(we){R0(l,f,we)}finally{I!==null&&M.types!==null&&(I.types=M.types),H.T=I}}else try{I=p(A,v),l1(l,f,I)}catch(we){R0(l,f,we)}}function l1(l,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){u1(l,f,v)},function(v){return R0(l,f,v)}):u1(l,f,p)}function u1(l,f,p){f.status="fulfilled",f.value=p,c1(f),l.state=p,f=l.pending,f!==null&&(p=f.next,p===f?l.pending=null:(p=p.next,f.next=p,o1(l,p)))}function R0(l,f,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=p,c1(f),f=f.next;while(f!==v)}l.action=null}function c1(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function f1(l,f){return f}function h1(l,f){if(Et){var p=Ut.formState;if(p!==null){e:{var v=pt;if(Et){if(Ht){t:{for(var A=Ht,I=ci;A.nodeType!==8;){if(!I){A=null;break t}if(A=hi(A.nextSibling),A===null){A=null;break t}}I=A.data,A=I==="F!"||I==="F"?A:null}if(A){Ht=hi(A.nextSibling),v=A.data==="F!";break e}}ba(v)}v=!1}v&&(f=p[0])}}return p=cn(),p.memoizedState=p.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f1,lastRenderedState:f},p.queue=v,p=C1.bind(null,pt,v),v.dispatch=p,v=O0(!1),I=M0.bind(null,pt,!1,v.queue),v=cn(),A={state:f,dispatch:null,action:l,pending:null},v.queue=A,p=Z4.bind(null,pt,A,I,p),A.dispatch=p,v.memoizedState=l,[f,p,!1]}function d1(l){var f=ur();return p1(f,Pt,l)}function p1(l,f,p){if(f=w0(l,f,f1)[0],l=Ah(Es)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=ic(f)}catch(M){throw M===wl?ph:M}else v=f;f=ur();var A=f.queue,I=A.dispatch;return p!==f.memoizedState&&(pt.flags|=2048,Cl(9,{destroy:void 0},J4.bind(null,A,p),null)),[v,I,l]}function J4(l,f){l.action=f}function g1(l){var f=ur(),p=Pt;if(p!==null)return p1(f,p,l);ur(),f=f.memoizedState,p=ur();var v=p.queue.dispatch;return p.memoizedState=l,[f,v,!1]}function Cl(l,f,p,v){return l={tag:l,create:p,deps:v,inst:f,next:null},f=pt.updateQueue,f===null&&(f=Eh(),pt.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,f.lastEffect=l),l}function m1(){return ur().memoizedState}function _h(l,f,p,v){var A=cn();pt.flags|=l,A.memoizedState=Cl(1|f,{destroy:void 0},p,v===void 0?null:v)}function wh(l,f,p,v){var A=ur();v=v===void 0?null:v;var I=A.memoizedState.inst;Pt!==null&&v!==null&&S0(v,Pt.memoizedState.deps)?A.memoizedState=Cl(f,I,p,v):(pt.flags|=l,A.memoizedState=Cl(1|f,I,p,v))}function y1(l,f){_h(8390656,8,l,f)}function L0(l,f){wh(2048,8,l,f)}function e8(l){pt.flags|=4;var f=pt.updateQueue;if(f===null)f=Eh(),pt.updateQueue=f,f.events=[l];else{var p=f.events;p===null?f.events=[l]:p.push(l)}}function v1(l){var f=ur().memoizedState;return e8({ref:f,nextImpl:l}),function(){if((wt&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}function b1(l,f){return wh(4,2,l,f)}function S1(l,f){return wh(4,4,l,f)}function x1(l,f){if(typeof f=="function"){l=l();var p=f(l);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function E1(l,f,p){p=p!=null?p.concat([l]):null,wh(4,4,x1.bind(null,f,l),p)}function C0(){}function T1(l,f){var p=ur();f=f===void 0?null:f;var v=p.memoizedState;return f!==null&&S0(f,v[1])?v[0]:(p.memoizedState=[l,f],l)}function A1(l,f){var p=ur();f=f===void 0?null:f;var v=p.memoizedState;if(f!==null&&S0(f,v[1]))return v[0];if(v=l(),Ao){Je(!0);try{l()}finally{Je(!1)}}return p.memoizedState=[v,f],v}function P0(l,f,p){return p===void 0||(xs&1073741824)!==0&&(St&261930)===0?l.memoizedState=f:(l.memoizedState=p,l=_I(),pt.lanes|=l,Oa|=l,p)}function _1(l,f,p,v){return jn(p,f)?p:Ol.current!==null?(l=P0(l,p,v),jn(l,f)||(pr=!0),l):(xs&42)===0||(xs&1073741824)!==0&&(St&261930)===0?(pr=!0,l.memoizedState=p):(l=_I(),pt.lanes|=l,Oa|=l,f)}function w1(l,f,p,v,A){var I=K.p;K.p=I!==0&&8>I?I:8;var M=H.T,Y={};H.T=Y,M0(l,!1,f,p);try{var he=A(),we=H.S;if(we!==null&&we(Y,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var Fe=Y4(he,v);sc(l,f,Fe,Kn(l))}else sc(l,f,v,Kn(l))}catch(He){sc(l,f,{then:function(){},status:"rejected",reason:He},Kn())}finally{K.p=I,M!==null&&Y.types!==null&&(M.types=Y.types),H.T=M}}function t8(){}function D0(l,f,p,v){if(l.tag!==5)throw Error(n(476));var A=I1(l).queue;w1(l,A,f,V,p===null?t8:function(){return O1(l),p(v)})}function I1(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:V},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:p},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function O1(l){var f=I1(l);f.next===null&&(f=l.alternate.memoizedState),sc(l,f.next.queue,{},Kn())}function k0(){return Gr(Ec)}function R1(){return ur().memoizedState}function L1(){return ur().memoizedState}function r8(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var p=Kn();l=Ea(p);var v=Ta(f,l,p);v!==null&&(On(v,f,p),ec(v,f,p)),f={cache:u0()},l.payload=f;return}f=f.return}}function n8(l,f,p){var v=Kn();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ih(l)?P1(f,p):(p=Zm(l,f,p,v),p!==null&&(On(p,l,v),D1(p,f,v)))}function C1(l,f,p){var v=Kn();sc(l,f,p,v)}function sc(l,f,p,v){var A={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ih(l))P1(f,A);else{var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var M=f.lastRenderedState,Y=I(M,p);if(A.hasEagerState=!0,A.eagerState=Y,jn(Y,M))return oh(l,f,A,0),Ut===null&&ah(),!1}catch{}finally{}if(p=Zm(l,f,A,v),p!==null)return On(p,l,v),D1(p,f,v),!0}return!1}function M0(l,f,p,v){if(v={lane:2,revertLane:dy(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Ih(l)){if(f)throw Error(n(479))}else f=Zm(l,p,v,2),f!==null&&On(f,l,2)}function Ih(l){var f=l.alternate;return l===pt||f!==null&&f===pt}function P1(l,f){Rl=Sh=!0;var p=l.pending;p===null?f.next=f:(f.next=p.next,p.next=f),l.pending=f}function D1(l,f,p){if((p&4194048)!==0){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,We(l,p)}}var ac={readContext:Gr,use:Th,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useLayoutEffect:ir,useInsertionEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useSyncExternalStore:ir,useId:ir,useHostTransitionStatus:ir,useFormState:ir,useActionState:ir,useOptimistic:ir,useMemoCache:ir,useCacheRefresh:ir};ac.useEffectEvent=ir;var k1={readContext:Gr,use:Th,useCallback:function(l,f){return cn().memoizedState=[l,f===void 0?null:f],l},useContext:Gr,useEffect:y1,useImperativeHandle:function(l,f,p){p=p!=null?p.concat([l]):null,_h(4194308,4,x1.bind(null,f,l),p)},useLayoutEffect:function(l,f){return _h(4194308,4,l,f)},useInsertionEffect:function(l,f){_h(4,2,l,f)},useMemo:function(l,f){var p=cn();f=f===void 0?null:f;var v=l();if(Ao){Je(!0);try{l()}finally{Je(!1)}}return p.memoizedState=[v,f],v},useReducer:function(l,f,p){var v=cn();if(p!==void 0){var A=p(f);if(Ao){Je(!0);try{p(f)}finally{Je(!1)}}}else A=f;return v.memoizedState=v.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},v.queue=l,l=l.dispatch=n8.bind(null,pt,l),[v.memoizedState,l]},useRef:function(l){var f=cn();return l={current:l},f.memoizedState=l},useState:function(l){l=O0(l);var f=l.queue,p=C1.bind(null,pt,f);return f.dispatch=p,[l.memoizedState,p]},useDebugValue:C0,useDeferredValue:function(l,f){var p=cn();return P0(p,l,f)},useTransition:function(){var l=O0(!1);return l=w1.bind(null,pt,l.queue,!0,!1),cn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,p){var v=pt,A=cn();if(Et){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),Ut===null)throw Error(n(349));(St&127)!==0||t1(v,f,p)}A.memoizedState=p;var I={value:p,getSnapshot:f};return A.queue=I,y1(n1.bind(null,v,I,l),[l]),v.flags|=2048,Cl(9,{destroy:void 0},r1.bind(null,v,I,p,f),null),p},useId:function(){var l=cn(),f=Ut.identifierPrefix;if(Et){var p=Fi,v=ji;p=(v&~(1<<32-Xe(v)-1)).toString(32)+p,f="_"+f+"R_"+p,p=xh++,0<p&&(f+="H"+p.toString(32)),f+="_"}else p=X4++,f="_"+f+"r_"+p.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:k0,useFormState:h1,useActionState:h1,useOptimistic:function(l){var f=cn();f.memoizedState=f.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=M0.bind(null,pt,!0,p),p.dispatch=f,[l,f]},useMemoCache:_0,useCacheRefresh:function(){return cn().memoizedState=r8.bind(null,pt)},useEffectEvent:function(l){var f=cn(),p={impl:l};return f.memoizedState=p,function(){if((wt&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},N0={readContext:Gr,use:Th,useCallback:T1,useContext:Gr,useEffect:L0,useImperativeHandle:E1,useInsertionEffect:b1,useLayoutEffect:S1,useMemo:A1,useReducer:Ah,useRef:m1,useState:function(){return Ah(Es)},useDebugValue:C0,useDeferredValue:function(l,f){var p=ur();return _1(p,Pt.memoizedState,l,f)},useTransition:function(){var l=Ah(Es)[0],f=ur().memoizedState;return[typeof l=="boolean"?l:ic(l),f]},useSyncExternalStore:e1,useId:R1,useHostTransitionStatus:k0,useFormState:d1,useActionState:d1,useOptimistic:function(l,f){var p=ur();return a1(p,Pt,l,f)},useMemoCache:_0,useCacheRefresh:L1};N0.useEffectEvent=v1;var M1={readContext:Gr,use:Th,useCallback:T1,useContext:Gr,useEffect:L0,useImperativeHandle:E1,useInsertionEffect:b1,useLayoutEffect:S1,useMemo:A1,useReducer:I0,useRef:m1,useState:function(){return I0(Es)},useDebugValue:C0,useDeferredValue:function(l,f){var p=ur();return Pt===null?P0(p,l,f):_1(p,Pt.memoizedState,l,f)},useTransition:function(){var l=I0(Es)[0],f=ur().memoizedState;return[typeof l=="boolean"?l:ic(l),f]},useSyncExternalStore:e1,useId:R1,useHostTransitionStatus:k0,useFormState:g1,useActionState:g1,useOptimistic:function(l,f){var p=ur();return Pt!==null?a1(p,Pt,l,f):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:_0,useCacheRefresh:L1};M1.useEffectEvent=v1;function B0(l,f,p,v){f=l.memoizedState,p=p(v,f),p=p==null?f:d({},f,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var U0={enqueueSetState:function(l,f,p){l=l._reactInternals;var v=Kn(),A=Ea(v);A.payload=f,p!=null&&(A.callback=p),f=Ta(l,A,v),f!==null&&(On(f,l,v),ec(f,l,v))},enqueueReplaceState:function(l,f,p){l=l._reactInternals;var v=Kn(),A=Ea(v);A.tag=1,A.payload=f,p!=null&&(A.callback=p),f=Ta(l,A,v),f!==null&&(On(f,l,v),ec(f,l,v))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var p=Kn(),v=Ea(p);v.tag=2,f!=null&&(v.callback=f),f=Ta(l,v,p),f!==null&&(On(f,l,p),ec(f,l,p))}};function N1(l,f,p,v,A,I,M){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,I,M):f.prototype&&f.prototype.isPureReactComponent?!qu(p,v)||!qu(A,I):!0}function B1(l,f,p,v){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,v),f.state!==l&&U0.enqueueReplaceState(f,f.state,null)}function _o(l,f){var p=f;if("ref"in f){p={};for(var v in f)v!=="ref"&&(p[v]=f[v])}if(l=l.defaultProps){p===f&&(p=d({},p));for(var A in l)p[A]===void 0&&(p[A]=l[A])}return p}function U1(l){sh(l)}function j1(l){console.error(l)}function F1(l){sh(l)}function Oh(l,f){try{var p=l.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function $1(l,f,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function j0(l,f,p){return p=Ea(p),p.tag=3,p.payload={element:null},p.callback=function(){Oh(l,f)},p}function G1(l){return l=Ea(l),l.tag=3,l}function z1(l,f,p,v){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var I=v.value;l.payload=function(){return A(I)},l.callback=function(){$1(f,p,v)}}var M=p.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(l.callback=function(){$1(f,p,v),typeof A!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var Y=v.stack;this.componentDidCatch(v.value,{componentStack:Y!==null?Y:""})})}function i8(l,f,p,v,A){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=p.alternate,f!==null&&Tl(f,p,A,!0),p=$n.current,p!==null){switch(p.tag){case 31:case 13:return fi===null?Fh():p.alternate===null&&sr===0&&(sr=3),p.flags&=-257,p.flags|=65536,p.lanes=A,v===gh?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([v]):f.add(v),cy(l,v,A)),!1;case 22:return p.flags|=65536,v===gh?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([v]):p.add(v)),cy(l,v,A)),!1}throw Error(n(435,p.tag))}return cy(l,v,A),Fh(),!1}if(Et)return f=$n.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,v!==i0&&(l=Error(n(422),{cause:v}),Yu(oi(l,p)))):(v!==i0&&(f=Error(n(423),{cause:v}),Yu(oi(f,p))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,v=oi(v,p),A=j0(l.stateNode,v,A),g0(l,A),sr!==4&&(sr=2)),!1;var I=Error(n(520),{cause:v});if(I=oi(I,p),pc===null?pc=[I]:pc.push(I),sr!==4&&(sr=2),f===null)return!0;v=oi(v,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,l=A&-A,p.lanes|=l,l=j0(p.stateNode,v,l),g0(p,l),!1;case 1:if(f=p.type,I=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ra===null||!Ra.has(I))))return p.flags|=65536,A&=-A,p.lanes|=A,A=G1(A),z1(A,l,p,v),g0(p,A),!1}p=p.return}while(p!==null);return!1}var F0=Error(n(461)),pr=!1;function zr(l,f,p,v){f.child=l===null?Vw(f,null,p,v):To(f,l.child,p,v)}function H1(l,f,p,v,A){p=p.render;var I=f.ref;if("ref"in v){var M={};for(var Y in v)Y!=="ref"&&(M[Y]=v[Y])}else M=v;return bo(f),v=x0(l,f,p,M,I,A),Y=E0(),l!==null&&!pr?(T0(l,f,A),Ts(l,f,A)):(Et&&Y&&r0(f),f.flags|=1,zr(l,f,v,A),f.child)}function K1(l,f,p,v,A){if(l===null){var I=p.type;return typeof I=="function"&&!Jm(I)&&I.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=I,q1(l,f,I,v,A)):(l=uh(p.type,null,v,f,f.mode,A),l.ref=f.ref,l.return=f,f.child=l)}if(I=l.child,!W0(l,A)){var M=I.memoizedProps;if(p=p.compare,p=p!==null?p:qu,p(M,v)&&l.ref===f.ref)return Ts(l,f,A)}return f.flags|=1,l=ys(I,v),l.ref=f.ref,l.return=f,f.child=l}function q1(l,f,p,v,A){if(l!==null){var I=l.memoizedProps;if(qu(I,v)&&l.ref===f.ref)if(pr=!1,f.pendingProps=v=I,W0(l,A))(l.flags&131072)!==0&&(pr=!0);else return f.lanes=l.lanes,Ts(l,f,A)}return $0(l,f,p,v,A)}function V1(l,f,p,v){var A=v.children,I=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((f.flags&128)!==0){if(I=I!==null?I.baseLanes|p:p,l!==null){for(v=f.child=l.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;v=A&~I}else v=0,f.child=null;return W1(l,f,I,p,v)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&dh(f,I!==null?I.cachePool:null),I!==null?Xw(f,I):y0(),Qw(f);else return v=f.lanes=536870912,W1(l,f,I!==null?I.baseLanes|p:p,p,v)}else I!==null?(dh(f,I.cachePool),Xw(f,I),_a(),f.memoizedState=null):(l!==null&&dh(f,null),y0(),_a());return zr(l,f,A,p),f.child}function oc(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function W1(l,f,p,v,A){var I=f0();return I=I===null?null:{parent:hr._currentValue,pool:I},f.memoizedState={baseLanes:p,cachePool:I},l!==null&&dh(f,null),y0(),Qw(f),l!==null&&Tl(l,f,v,!0),f.childLanes=A,null}function Rh(l,f){return f=Ch({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function Y1(l,f,p){return To(f,l.child,null,p),l=Rh(f,f.pendingProps),l.flags|=2,Gn(f),f.memoizedState=null,l}function s8(l,f,p){var v=f.pendingProps,A=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(Et){if(v.mode==="hidden")return l=Rh(f,v),f.lanes=536870912,oc(null,l);if(b0(f),(l=Ht)?(l=oO(l,ci),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ya!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},p=Pw(l),p.return=f,f.child=p,$r=f,Ht=null)):l=null,l===null)throw ba(f);return f.lanes=536870912,null}return Rh(f,v)}var I=l.memoizedState;if(I!==null){var M=I.dehydrated;if(b0(f),A)if(f.flags&256)f.flags&=-257,f=Y1(l,f,p);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(n(558));else if(pr||Tl(l,f,p,!1),A=(p&l.childLanes)!==0,pr||A){if(v=Ut,v!==null&&(M=Qe(v,p),M!==0&&M!==I.retryLane))throw I.retryLane=M,go(l,M),On(v,l,M),F0;Fh(),f=Y1(l,f,p)}else l=I.treeContext,Ht=hi(M.nextSibling),$r=f,Et=!0,va=null,ci=!1,l!==null&&Mw(f,l),f=Rh(f,v),f.flags|=4096;return f}return l=ys(l.child,{mode:v.mode,children:v.children}),l.ref=f.ref,f.child=l,l.return=f,l}function Lh(l,f){var p=f.ref;if(p===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(l===null||l.ref!==p)&&(f.flags|=4194816)}}function $0(l,f,p,v,A){return bo(f),p=x0(l,f,p,v,void 0,A),v=E0(),l!==null&&!pr?(T0(l,f,A),Ts(l,f,A)):(Et&&v&&r0(f),f.flags|=1,zr(l,f,p,A),f.child)}function X1(l,f,p,v,A,I){return bo(f),f.updateQueue=null,p=Jw(f,v,p,A),Zw(l),v=E0(),l!==null&&!pr?(T0(l,f,I),Ts(l,f,I)):(Et&&v&&r0(f),f.flags|=1,zr(l,f,p,I),f.child)}function Q1(l,f,p,v,A){if(bo(f),f.stateNode===null){var I=bl,M=p.contextType;typeof M=="object"&&M!==null&&(I=Gr(M)),I=new p(v,I),f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=U0,f.stateNode=I,I._reactInternals=f,I=f.stateNode,I.props=v,I.state=f.memoizedState,I.refs={},d0(f),M=p.contextType,I.context=typeof M=="object"&&M!==null?Gr(M):bl,I.state=f.memoizedState,M=p.getDerivedStateFromProps,typeof M=="function"&&(B0(f,p,M,v),I.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(M=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),M!==I.state&&U0.enqueueReplaceState(I,I.state,null),rc(f,v,I,A),tc(),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(l===null){I=f.stateNode;var Y=f.memoizedProps,he=_o(p,Y);I.props=he;var we=I.context,Fe=p.contextType;M=bl,typeof Fe=="object"&&Fe!==null&&(M=Gr(Fe));var He=p.getDerivedStateFromProps;Fe=typeof He=="function"||typeof I.getSnapshotBeforeUpdate=="function",Y=f.pendingProps!==Y,Fe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y||we!==M)&&B1(f,I,v,M),xa=!1;var Oe=f.memoizedState;I.state=Oe,rc(f,v,I,A),tc(),we=f.memoizedState,Y||Oe!==we||xa?(typeof He=="function"&&(B0(f,p,He,v),we=f.memoizedState),(he=xa||N1(f,p,he,v,Oe,we,M))?(Fe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(f.flags|=4194308)):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=we),I.props=v,I.state=we,I.context=M,v=he):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{I=f.stateNode,p0(l,f),M=f.memoizedProps,Fe=_o(p,M),I.props=Fe,He=f.pendingProps,Oe=I.context,we=p.contextType,he=bl,typeof we=="object"&&we!==null&&(he=Gr(we)),Y=p.getDerivedStateFromProps,(we=typeof Y=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(M!==He||Oe!==he)&&B1(f,I,v,he),xa=!1,Oe=f.memoizedState,I.state=Oe,rc(f,v,I,A),tc();var De=f.memoizedState;M!==He||Oe!==De||xa||l!==null&&l.dependencies!==null&&fh(l.dependencies)?(typeof Y=="function"&&(B0(f,p,Y,v),De=f.memoizedState),(Fe=xa||N1(f,p,Fe,v,Oe,De,he)||l!==null&&l.dependencies!==null&&fh(l.dependencies))?(we||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,De,he),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,De,he)),typeof I.componentDidUpdate=="function"&&(f.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof I.componentDidUpdate!="function"||M===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||M===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=De),I.props=v,I.state=De,I.context=he,v=Fe):(typeof I.componentDidUpdate!="function"||M===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||M===l.memoizedProps&&Oe===l.memoizedState||(f.flags|=1024),v=!1)}return I=v,Lh(l,f),v=(f.flags&128)!==0,I||v?(I=f.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:I.render(),f.flags|=1,l!==null&&v?(f.child=To(f,l.child,null,A),f.child=To(f,null,p,A)):zr(l,f,p,A),f.memoizedState=I.state,l=f.child):l=Ts(l,f,A),l}function Z1(l,f,p,v){return yo(),f.flags|=256,zr(l,f,p,v),f.child}var G0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z0(l){return{baseLanes:l,cachePool:$w()}}function H0(l,f,p){return l=l!==null?l.childLanes&~p:0,f&&(l|=Hn),l}function J1(l,f,p){var v=f.pendingProps,A=!1,I=(f.flags&128)!==0,M;if((M=I)||(M=l!==null&&l.memoizedState===null?!1:(lr.current&2)!==0),M&&(A=!0,f.flags&=-129),M=(f.flags&32)!==0,f.flags&=-33,l===null){if(Et){if(A?Aa(f):_a(),(l=Ht)?(l=oO(l,ci),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ya!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},p=Pw(l),p.return=f,f.child=p,$r=f,Ht=null)):l=null,l===null)throw ba(f);return wy(l)?f.lanes=32:f.lanes=536870912,null}var Y=v.children;return v=v.fallback,A?(_a(),A=f.mode,Y=Ch({mode:"hidden",children:Y},A),v=mo(v,A,p,null),Y.return=f,v.return=f,Y.sibling=v,f.child=Y,v=f.child,v.memoizedState=z0(p),v.childLanes=H0(l,M,p),f.memoizedState=G0,oc(null,v)):(Aa(f),K0(f,Y))}var he=l.memoizedState;if(he!==null&&(Y=he.dehydrated,Y!==null)){if(I)f.flags&256?(Aa(f),f.flags&=-257,f=q0(l,f,p)):f.memoizedState!==null?(_a(),f.child=l.child,f.flags|=128,f=null):(_a(),Y=v.fallback,A=f.mode,v=Ch({mode:"visible",children:v.children},A),Y=mo(Y,A,p,null),Y.flags|=2,v.return=f,Y.return=f,v.sibling=Y,f.child=v,To(f,l.child,null,p),v=f.child,v.memoizedState=z0(p),v.childLanes=H0(l,M,p),f.memoizedState=G0,f=oc(null,v));else if(Aa(f),wy(Y)){if(M=Y.nextSibling&&Y.nextSibling.dataset,M)var we=M.dgst;M=we,v=Error(n(419)),v.stack="",v.digest=M,Yu({value:v,source:null,stack:null}),f=q0(l,f,p)}else if(pr||Tl(l,f,p,!1),M=(p&l.childLanes)!==0,pr||M){if(M=Ut,M!==null&&(v=Qe(M,p),v!==0&&v!==he.retryLane))throw he.retryLane=v,go(l,v),On(M,l,v),F0;_y(Y)||Fh(),f=q0(l,f,p)}else _y(Y)?(f.flags|=192,f.child=l.child,f=null):(l=he.treeContext,Ht=hi(Y.nextSibling),$r=f,Et=!0,va=null,ci=!1,l!==null&&Mw(f,l),f=K0(f,v.children),f.flags|=4096);return f}return A?(_a(),Y=v.fallback,A=f.mode,he=l.child,we=he.sibling,v=ys(he,{mode:"hidden",children:v.children}),v.subtreeFlags=he.subtreeFlags&65011712,we!==null?Y=ys(we,Y):(Y=mo(Y,A,p,null),Y.flags|=2),Y.return=f,v.return=f,v.sibling=Y,f.child=v,oc(null,v),v=f.child,Y=l.child.memoizedState,Y===null?Y=z0(p):(A=Y.cachePool,A!==null?(he=hr._currentValue,A=A.parent!==he?{parent:he,pool:he}:A):A=$w(),Y={baseLanes:Y.baseLanes|p,cachePool:A}),v.memoizedState=Y,v.childLanes=H0(l,M,p),f.memoizedState=G0,oc(l.child,v)):(Aa(f),p=l.child,l=p.sibling,p=ys(p,{mode:"visible",children:v.children}),p.return=f,p.sibling=null,l!==null&&(M=f.deletions,M===null?(f.deletions=[l],f.flags|=16):M.push(l)),f.child=p,f.memoizedState=null,p)}function K0(l,f){return f=Ch({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Ch(l,f){return l=Fn(22,l,null,f),l.lanes=0,l}function q0(l,f,p){return To(f,l.child,null,p),l=K0(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function eI(l,f,p){l.lanes|=f;var v=l.alternate;v!==null&&(v.lanes|=f),o0(l.return,f,p)}function V0(l,f,p,v,A,I){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:A,treeForkCount:I}:(M.isBackwards=f,M.rendering=null,M.renderingStartTime=0,M.last=v,M.tail=p,M.tailMode=A,M.treeForkCount=I)}function tI(l,f,p){var v=f.pendingProps,A=v.revealOrder,I=v.tail;v=v.children;var M=lr.current,Y=(M&2)!==0;if(Y?(M=M&1|2,f.flags|=128):M&=1,Z(lr,M),zr(l,f,v,p),v=Et?Wu:0,!Y&&l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&eI(l,p,f);else if(l.tag===19)eI(l,p,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(A){case"forwards":for(p=f.child,A=null;p!==null;)l=p.alternate,l!==null&&bh(l)===null&&(A=p),p=p.sibling;p=A,p===null?(A=f.child,f.child=null):(A=p.sibling,p.sibling=null),V0(f,!1,A,p,I,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,A=f.child,f.child=null;A!==null;){if(l=A.alternate,l!==null&&bh(l)===null){f.child=A;break}l=A.sibling,A.sibling=p,p=A,A=l}V0(f,!0,p,null,I,v);break;case"together":V0(f,!1,null,null,void 0,v);break;default:f.memoizedState=null}return f.child}function Ts(l,f,p){if(l!==null&&(f.dependencies=l.dependencies),Oa|=f.lanes,(p&f.childLanes)===0)if(l!==null){if(Tl(l,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(n(153));if(f.child!==null){for(l=f.child,p=ys(l,l.pendingProps),f.child=p,p.return=f;l.sibling!==null;)l=l.sibling,p=p.sibling=ys(l,l.pendingProps),p.return=f;p.sibling=null}return f.child}function W0(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&fh(l)))}function a8(l,f,p){switch(f.tag){case 3:re(f,f.stateNode.containerInfo),Sa(f,hr,l.memoizedState.cache),yo();break;case 27:case 5:le(f);break;case 4:re(f,f.stateNode.containerInfo);break;case 10:Sa(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,b0(f),null;break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(Aa(f),f.flags|=128,null):(p&f.child.childLanes)!==0?J1(l,f,p):(Aa(f),l=Ts(l,f,p),l!==null?l.sibling:null);Aa(f);break;case 19:var A=(l.flags&128)!==0;if(v=(p&f.childLanes)!==0,v||(Tl(l,f,p,!1),v=(p&f.childLanes)!==0),A){if(v)return tI(l,f,p);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Z(lr,lr.current),v)break;return null;case 22:return f.lanes=0,V1(l,f,p,f.pendingProps);case 24:Sa(f,hr,l.memoizedState.cache)}return Ts(l,f,p)}function rI(l,f,p){if(l!==null)if(l.memoizedProps!==f.pendingProps)pr=!0;else{if(!W0(l,p)&&(f.flags&128)===0)return pr=!1,a8(l,f,p);pr=(l.flags&131072)!==0}else pr=!1,Et&&(f.flags&1048576)!==0&&kw(f,Wu,f.index);switch(f.lanes=0,f.tag){case 16:e:{var v=f.pendingProps;if(l=xo(f.elementType),f.type=l,typeof l=="function")Jm(l)?(v=_o(l,v),f.tag=1,f=Q1(null,f,l,v,p)):(f.tag=0,f=$0(null,f,l,v,p));else{if(l!=null){var A=l.$$typeof;if(A===w){f.tag=11,f=H1(null,f,l,v,p);break e}else if(A===O){f.tag=14,f=K1(null,f,l,v,p);break e}}throw f=q(l)||l,Error(n(306,f,""))}}return f;case 0:return $0(l,f,f.type,f.pendingProps,p);case 1:return v=f.type,A=_o(v,f.pendingProps),Q1(l,f,v,A,p);case 3:e:{if(re(f,f.stateNode.containerInfo),l===null)throw Error(n(387));v=f.pendingProps;var I=f.memoizedState;A=I.element,p0(l,f),rc(f,v,null,p);var M=f.memoizedState;if(v=M.cache,Sa(f,hr,v),v!==I.cache&&l0(f,[hr],p,!0),tc(),v=M.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:M.cache},f.updateQueue.baseState=I,f.memoizedState=I,f.flags&256){f=Z1(l,f,v,p);break e}else if(v!==A){A=oi(Error(n(424)),f),Yu(A),f=Z1(l,f,v,p);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ht=hi(l.firstChild),$r=f,Et=!0,va=null,ci=!0,p=Vw(f,null,v,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(yo(),v===A){f=Ts(l,f,p);break e}zr(l,f,v,p)}f=f.child}return f;case 26:return Lh(l,f),l===null?(p=dO(f.type,null,f.pendingProps,null))?f.memoizedState=p:Et||(p=f.type,l=f.pendingProps,v=Vh(xe.current).createElement(p),v[Jt]=f,v[xr]=l,Hr(v,p,l),Lr(v),f.stateNode=v):f.memoizedState=dO(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return le(f),l===null&&Et&&(v=f.stateNode=cO(f.type,f.pendingProps,xe.current),$r=f,ci=!0,A=Ht,Da(f.type)?(Iy=A,Ht=hi(v.firstChild)):Ht=A),zr(l,f,f.pendingProps.children,p),Lh(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Et&&((A=v=Ht)&&(v=N8(v,f.type,f.pendingProps,ci),v!==null?(f.stateNode=v,$r=f,Ht=hi(v.firstChild),ci=!1,A=!0):A=!1),A||ba(f)),le(f),A=f.type,I=f.pendingProps,M=l!==null?l.memoizedProps:null,v=I.children,Ey(A,I)?v=null:M!==null&&Ey(A,M)&&(f.flags|=32),f.memoizedState!==null&&(A=x0(l,f,Q4,null,null,p),Ec._currentValue=A),Lh(l,f),zr(l,f,v,p),f.child;case 6:return l===null&&Et&&((l=p=Ht)&&(p=B8(p,f.pendingProps,ci),p!==null?(f.stateNode=p,$r=f,Ht=null,l=!0):l=!1),l||ba(f)),null;case 13:return J1(l,f,p);case 4:return re(f,f.stateNode.containerInfo),v=f.pendingProps,l===null?f.child=To(f,null,v,p):zr(l,f,v,p),f.child;case 11:return H1(l,f,f.type,f.pendingProps,p);case 7:return zr(l,f,f.pendingProps,p),f.child;case 8:return zr(l,f,f.pendingProps.children,p),f.child;case 12:return zr(l,f,f.pendingProps.children,p),f.child;case 10:return v=f.pendingProps,Sa(f,f.type,v.value),zr(l,f,v.children,p),f.child;case 9:return A=f.type._context,v=f.pendingProps.children,bo(f),A=Gr(A),v=v(A),f.flags|=1,zr(l,f,v,p),f.child;case 14:return K1(l,f,f.type,f.pendingProps,p);case 15:return q1(l,f,f.type,f.pendingProps,p);case 19:return tI(l,f,p);case 31:return s8(l,f,p);case 22:return V1(l,f,p,f.pendingProps);case 24:return bo(f),v=Gr(hr),l===null?(A=f0(),A===null&&(A=Ut,I=u0(),A.pooledCache=I,I.refCount++,I!==null&&(A.pooledCacheLanes|=p),A=I),f.memoizedState={parent:v,cache:A},d0(f),Sa(f,hr,A)):((l.lanes&p)!==0&&(p0(l,f),rc(f,null,null,p),tc()),A=l.memoizedState,I=f.memoizedState,A.parent!==v?(A={parent:v,cache:v},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),Sa(f,hr,v)):(v=I.cache,Sa(f,hr,v),v!==A.cache&&l0(f,[hr],p,!0))),zr(l,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function As(l){l.flags|=4}function Y0(l,f,p,v,A){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(A&335544128)===A)if(l.stateNode.complete)l.flags|=8192;else if(RI())l.flags|=8192;else throw Eo=gh,h0}else l.flags&=-16777217}function nI(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!vO(f))if(RI())l.flags|=8192;else throw Eo=gh,h0}function Ph(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?fs():536870912,l.lanes|=f,Ml|=f)}function lc(l,f){if(!Et)switch(l.tailMode){case"hidden":f=l.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Kt(l){var f=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(f)for(var A=l.child;A!==null;)p|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)p|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=v,l.childLanes=p,f}function o8(l,f,p){var v=f.pendingProps;switch(n0(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(f),null;case 1:return Kt(f),null;case 3:return p=f.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),Ss(hr),te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(El(f)?As(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,s0())),Kt(f),null;case 26:var A=f.type,I=f.memoizedState;return l===null?(As(f),I!==null?(Kt(f),nI(f,I)):(Kt(f),Y0(f,A,null,v,p))):I?I!==l.memoizedState?(As(f),Kt(f),nI(f,I)):(Kt(f),f.flags&=-16777217):(l=l.memoizedProps,l!==v&&As(f),Kt(f),Y0(f,A,l,v,p)),null;case 27:if(ce(f),p=xe.current,A=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==v&&As(f);else{if(!v){if(f.stateNode===null)throw Error(n(166));return Kt(f),null}l=de.current,El(f)?Nw(f):(l=cO(A,v,p),f.stateNode=l,As(f))}return Kt(f),null;case 5:if(ce(f),A=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==v&&As(f);else{if(!v){if(f.stateNode===null)throw Error(n(166));return Kt(f),null}if(I=de.current,El(f))Nw(f);else{var M=Vh(xe.current);switch(I){case 1:I=M.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:I=M.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":I=M.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":I=M.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":I=M.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof v.is=="string"?M.createElement("select",{is:v.is}):M.createElement("select"),v.multiple?I.multiple=!0:v.size&&(I.size=v.size);break;default:I=typeof v.is=="string"?M.createElement(A,{is:v.is}):M.createElement(A)}}I[Jt]=f,I[xr]=v;e:for(M=f.child;M!==null;){if(M.tag===5||M.tag===6)I.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break e;for(;M.sibling===null;){if(M.return===null||M.return===f)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}f.stateNode=I;e:switch(Hr(I,A,v),A){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&As(f)}}return Kt(f),Y0(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,p),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==v&&As(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(n(166));if(l=xe.current,El(f)){if(l=f.stateNode,p=f.memoizedProps,v=null,A=$r,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}l[Jt]=f,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||JI(l.nodeValue,p)),l||ba(f,!0)}else l=Vh(l).createTextNode(v),l[Jt]=f,f.stateNode=l}return Kt(f),null;case 31:if(p=f.memoizedState,l===null||l.memoizedState!==null){if(v=El(f),p!==null){if(l===null){if(!v)throw Error(n(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Jt]=f}else yo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Kt(f),l=!1}else p=s0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return f.flags&256?(Gn(f),f):(Gn(f),null);if((f.flags&128)!==0)throw Error(n(558))}return Kt(f),null;case 13:if(v=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=El(f),v!==null&&v.dehydrated!==null){if(l===null){if(!A)throw Error(n(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Jt]=f}else yo(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Kt(f),A=!1}else A=s0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return f.flags&256?(Gn(f),f):(Gn(f),null)}return Gn(f),(f.flags&128)!==0?(f.lanes=p,f):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=f.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool),I=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==A&&(v.flags|=2048)),p!==l&&p&&(f.child.flags|=8192),Ph(f,f.updateQueue),Kt(f),null);case 4:return te(),l===null&&yy(f.stateNode.containerInfo),Kt(f),null;case 10:return Ss(f.type),Kt(f),null;case 19:if(F(lr),v=f.memoizedState,v===null)return Kt(f),null;if(A=(f.flags&128)!==0,I=v.rendering,I===null)if(A)lc(v,!1);else{if(sr!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(I=bh(l),I!==null){for(f.flags|=128,lc(v,!1),l=I.updateQueue,f.updateQueue=l,Ph(f,l),f.subtreeFlags=0,l=p,p=f.child;p!==null;)Cw(p,l),p=p.sibling;return Z(lr,lr.current&1|2),Et&&vs(f,v.treeForkCount),f.child}l=l.sibling}v.tail!==null&&Ie()>Bh&&(f.flags|=128,A=!0,lc(v,!1),f.lanes=4194304)}else{if(!A)if(l=bh(I),l!==null){if(f.flags|=128,A=!0,l=l.updateQueue,f.updateQueue=l,Ph(f,l),lc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!Et)return Kt(f),null}else 2*Ie()-v.renderingStartTime>Bh&&p!==536870912&&(f.flags|=128,A=!0,lc(v,!1),f.lanes=4194304);v.isBackwards?(I.sibling=f.child,f.child=I):(l=v.last,l!==null?l.sibling=I:f.child=I,v.last=I)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Ie(),l.sibling=null,p=lr.current,Z(lr,A?p&1|2:p&1),Et&&vs(f,v.treeForkCount),l):(Kt(f),null);case 22:case 23:return Gn(f),v0(),v=f.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(p&536870912)!==0&&(f.flags&128)===0&&(Kt(f),f.subtreeFlags&6&&(f.flags|=8192)):Kt(f),p=f.updateQueue,p!==null&&Ph(f,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==p&&(f.flags|=2048),l!==null&&F(So),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),Ss(hr),Kt(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function l8(l,f){switch(n0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Ss(hr),te(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return ce(f),null;case 31:if(f.memoizedState!==null){if(Gn(f),f.alternate===null)throw Error(n(340));yo()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if(Gn(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(n(340));yo()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return F(lr),null;case 4:return te(),null;case 10:return Ss(f.type),null;case 22:case 23:return Gn(f),v0(),l!==null&&F(So),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return Ss(hr),null;case 25:return null;default:return null}}function iI(l,f){switch(n0(f),f.tag){case 3:Ss(hr),te();break;case 26:case 27:case 5:ce(f);break;case 4:te();break;case 31:f.memoizedState!==null&&Gn(f);break;case 13:Gn(f);break;case 19:F(lr);break;case 10:Ss(f.type);break;case 22:case 23:Gn(f),v0(),l!==null&&F(So);break;case 24:Ss(hr)}}function uc(l,f){try{var p=f.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var A=v.next;p=A;do{if((p.tag&l)===l){v=void 0;var I=p.create,M=p.inst;v=I(),M.destroy=v}p=p.next}while(p!==A)}}catch(Y){Ot(f,f.return,Y)}}function wa(l,f,p){try{var v=f.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var I=A.next;v=I;do{if((v.tag&l)===l){var M=v.inst,Y=M.destroy;if(Y!==void 0){M.destroy=void 0,A=f;var he=p,we=Y;try{we()}catch(Fe){Ot(A,he,Fe)}}}v=v.next}while(v!==I)}}catch(Fe){Ot(f,f.return,Fe)}}function sI(l){var f=l.updateQueue;if(f!==null){var p=l.stateNode;try{Yw(f,p)}catch(v){Ot(l,l.return,v)}}}function aI(l,f,p){p.props=_o(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Ot(l,f,v)}}function cc(l,f){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(A){Ot(l,f,A)}}function $i(l,f){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(A){Ot(l,f,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){Ot(l,f,A)}else p.current=null}function oI(l){var f=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(A){Ot(l,l.return,A)}}function X0(l,f,p){try{var v=l.stateNode;L8(v,l.type,p,f),v[xr]=f}catch(A){Ot(l,l.return,A)}}function lI(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Da(l.type)||l.tag===4}function Q0(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||lI(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Da(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Z0(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(l),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=gs));else if(v!==4&&(v===27&&Da(l.type)&&(p=l.stateNode,f=null),l=l.child,l!==null))for(Z0(l,f,p),l=l.sibling;l!==null;)Z0(l,f,p),l=l.sibling}function Dh(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?p.insertBefore(l,f):p.appendChild(l);else if(v!==4&&(v===27&&Da(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Dh(l,f,p),l=l.sibling;l!==null;)Dh(l,f,p),l=l.sibling}function uI(l){var f=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,A=f.attributes;A.length;)f.removeAttributeNode(A[0]);Hr(f,v,p),f[Jt]=l,f[xr]=p}catch(I){Ot(l,l.return,I)}}var _s=!1,gr=!1,J0=!1,cI=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function u8(l,f){if(l=l.containerInfo,Sy=ed,l=Ew(l),qm(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var A=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{p.nodeType,I.nodeType}catch{p=null;break e}var M=0,Y=-1,he=-1,we=0,Fe=0,He=l,Oe=null;t:for(;;){for(var De;He!==p||A!==0&&He.nodeType!==3||(Y=M+A),He!==I||v!==0&&He.nodeType!==3||(he=M+v),He.nodeType===3&&(M+=He.nodeValue.length),(De=He.firstChild)!==null;)Oe=He,He=De;for(;;){if(He===l)break t;if(Oe===p&&++we===A&&(Y=M),Oe===I&&++Fe===v&&(he=M),(De=He.nextSibling)!==null)break;He=Oe,Oe=He.parentNode}He=De}p=Y===-1||he===-1?null:{start:Y,end:he}}else p=null}p=p||{start:0,end:0}}else p=null;for(xy={focusedElem:l,selectionRange:p},ed=!1,Cr=f;Cr!==null;)if(f=Cr,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,Cr=l;else for(;Cr!==null;){switch(f=Cr,I=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)A=l[p],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&I!==null){l=void 0,p=f,A=I.memoizedProps,I=I.memoizedState,v=p.stateNode;try{var tt=_o(p.type,A);l=v.getSnapshotBeforeUpdate(tt,I),v.__reactInternalSnapshotBeforeUpdate=l}catch(ot){Ot(p,p.return,ot)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,p=l.nodeType,p===9)Ay(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ay(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=f.sibling,l!==null){l.return=f.return,Cr=l;break}Cr=f.return}}function fI(l,f,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Is(l,p),v&4&&uc(5,p);break;case 1:if(Is(l,p),v&4)if(l=p.stateNode,f===null)try{l.componentDidMount()}catch(M){Ot(p,p.return,M)}else{var A=_o(p.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(A,f,l.__reactInternalSnapshotBeforeUpdate)}catch(M){Ot(p,p.return,M)}}v&64&&sI(p),v&512&&cc(p,p.return);break;case 3:if(Is(l,p),v&64&&(l=p.updateQueue,l!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Yw(l,f)}catch(M){Ot(p,p.return,M)}}break;case 27:f===null&&v&4&&uI(p);case 26:case 5:Is(l,p),f===null&&v&4&&oI(p),v&512&&cc(p,p.return);break;case 12:Is(l,p);break;case 31:Is(l,p),v&4&&pI(l,p);break;case 13:Is(l,p),v&4&&gI(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=v8.bind(null,p),U8(l,p))));break;case 22:if(v=p.memoizedState!==null||_s,!v){f=f!==null&&f.memoizedState!==null||gr,A=_s;var I=gr;_s=v,(gr=f)&&!I?Os(l,p,(p.subtreeFlags&8772)!==0):Is(l,p),_s=A,gr=I}break;case 30:break;default:Is(l,p)}}function hI(l){var f=l.alternate;f!==null&&(l.alternate=null,hI(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&Rm(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Wt=null,An=!1;function ws(l,f,p){for(p=p.child;p!==null;)dI(l,f,p),p=p.sibling}function dI(l,f,p){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(me,p)}catch{}switch(p.tag){case 26:gr||$i(p,f),ws(l,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:gr||$i(p,f);var v=Wt,A=An;Da(p.type)&&(Wt=p.stateNode,An=!1),ws(l,f,p),bc(p.stateNode),Wt=v,An=A;break;case 5:gr||$i(p,f);case 6:if(v=Wt,A=An,Wt=null,ws(l,f,p),Wt=v,An=A,Wt!==null)if(An)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(p.stateNode)}catch(I){Ot(p,f,I)}else try{Wt.removeChild(p.stateNode)}catch(I){Ot(p,f,I)}break;case 18:Wt!==null&&(An?(l=Wt,sO(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),zl(l)):sO(Wt,p.stateNode));break;case 4:v=Wt,A=An,Wt=p.stateNode.containerInfo,An=!0,ws(l,f,p),Wt=v,An=A;break;case 0:case 11:case 14:case 15:wa(2,p,f),gr||wa(4,p,f),ws(l,f,p);break;case 1:gr||($i(p,f),v=p.stateNode,typeof v.componentWillUnmount=="function"&&aI(p,f,v)),ws(l,f,p);break;case 21:ws(l,f,p);break;case 22:gr=(v=gr)||p.memoizedState!==null,ws(l,f,p),gr=v;break;default:ws(l,f,p)}}function pI(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{zl(l)}catch(p){Ot(f,f.return,p)}}}function gI(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{zl(l)}catch(p){Ot(f,f.return,p)}}function c8(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new cI),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new cI),f;default:throw Error(n(435,l.tag))}}function kh(l,f){var p=c8(l);f.forEach(function(v){if(!p.has(v)){p.add(v);var A=b8.bind(null,l,v);v.then(A,A)}})}function _n(l,f){var p=f.deletions;if(p!==null)for(var v=0;v<p.length;v++){var A=p[v],I=l,M=f,Y=M;e:for(;Y!==null;){switch(Y.tag){case 27:if(Da(Y.type)){Wt=Y.stateNode,An=!1;break e}break;case 5:Wt=Y.stateNode,An=!1;break e;case 3:case 4:Wt=Y.stateNode.containerInfo,An=!0;break e}Y=Y.return}if(Wt===null)throw Error(n(160));dI(I,M,A),Wt=null,An=!1,I=A.alternate,I!==null&&(I.return=null),A.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)mI(f,l),f=f.sibling}var Ii=null;function mI(l,f){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:_n(f,l),wn(l),v&4&&(wa(3,l,l.return),uc(3,l),wa(5,l,l.return));break;case 1:_n(f,l),wn(l),v&512&&(gr||p===null||$i(p,p.return)),v&64&&_s&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var A=Ii;if(_n(f,l),wn(l),v&512&&(gr||p===null||$i(p,p.return)),v&4){var I=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,A=A.ownerDocument||A;t:switch(v){case"title":I=A.getElementsByTagName("title")[0],(!I||I[un]||I[Jt]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=A.createElement(v),A.head.insertBefore(I,A.querySelector("head > title"))),Hr(I,v,p),I[Jt]=l,Lr(I),v=I;break e;case"link":var M=mO("link","href",A).get(v+(p.href||""));if(M){for(var Y=0;Y<M.length;Y++)if(I=M[Y],I.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&I.getAttribute("rel")===(p.rel==null?null:p.rel)&&I.getAttribute("title")===(p.title==null?null:p.title)&&I.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){M.splice(Y,1);break t}}I=A.createElement(v),Hr(I,v,p),A.head.appendChild(I);break;case"meta":if(M=mO("meta","content",A).get(v+(p.content||""))){for(Y=0;Y<M.length;Y++)if(I=M[Y],I.getAttribute("content")===(p.content==null?null:""+p.content)&&I.getAttribute("name")===(p.name==null?null:p.name)&&I.getAttribute("property")===(p.property==null?null:p.property)&&I.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&I.getAttribute("charset")===(p.charSet==null?null:p.charSet)){M.splice(Y,1);break t}}I=A.createElement(v),Hr(I,v,p),A.head.appendChild(I);break;default:throw Error(n(468,v))}I[Jt]=l,Lr(I),v=I}l.stateNode=v}else yO(A,l.type,l.stateNode);else l.stateNode=gO(A,v,l.memoizedProps);else I!==v?(I===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):I.count--,v===null?yO(A,l.type,l.stateNode):gO(A,v,l.memoizedProps)):v===null&&l.stateNode!==null&&X0(l,l.memoizedProps,p.memoizedProps)}break;case 27:_n(f,l),wn(l),v&512&&(gr||p===null||$i(p,p.return)),p!==null&&v&4&&X0(l,l.memoizedProps,p.memoizedProps);break;case 5:if(_n(f,l),wn(l),v&512&&(gr||p===null||$i(p,p.return)),l.flags&32){A=l.stateNode;try{hl(A,"")}catch(tt){Ot(l,l.return,tt)}}v&4&&l.stateNode!=null&&(A=l.memoizedProps,X0(l,A,p!==null?p.memoizedProps:A)),v&1024&&(J0=!0);break;case 6:if(_n(f,l),wn(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch(tt){Ot(l,l.return,tt)}}break;case 3:if(Xh=null,A=Ii,Ii=Wh(f.containerInfo),_n(f,l),Ii=A,wn(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{zl(f.containerInfo)}catch(tt){Ot(l,l.return,tt)}J0&&(J0=!1,yI(l));break;case 4:v=Ii,Ii=Wh(l.stateNode.containerInfo),_n(f,l),wn(l),Ii=v;break;case 12:_n(f,l),wn(l);break;case 31:_n(f,l),wn(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 13:_n(f,l),wn(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Nh=Ie()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 22:A=l.memoizedState!==null;var he=p!==null&&p.memoizedState!==null,we=_s,Fe=gr;if(_s=we||A,gr=Fe||he,_n(f,l),gr=Fe,_s=we,wn(l),v&8192)e:for(f=l.stateNode,f._visibility=A?f._visibility&-2:f._visibility|1,A&&(p===null||he||_s||gr||wo(l)),p=null,f=l;;){if(f.tag===5||f.tag===26){if(p===null){he=p=f;try{if(I=he.stateNode,A)M=I.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{Y=he.stateNode;var He=he.memoizedProps.style,Oe=He!=null&&He.hasOwnProperty("display")?He.display:null;Y.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(tt){Ot(he,he.return,tt)}}}else if(f.tag===6){if(p===null){he=f;try{he.stateNode.nodeValue=A?"":he.memoizedProps}catch(tt){Ot(he,he.return,tt)}}}else if(f.tag===18){if(p===null){he=f;try{var De=he.stateNode;A?aO(De,!0):aO(he.stateNode,!1)}catch(tt){Ot(he,he.return,tt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,kh(l,p))));break;case 19:_n(f,l),wn(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,kh(l,v)));break;case 30:break;case 21:break;default:_n(f,l),wn(l)}}function wn(l){var f=l.flags;if(f&2){try{for(var p,v=l.return;v!==null;){if(lI(v)){p=v;break}v=v.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var A=p.stateNode,I=Q0(l);Dh(l,I,A);break;case 5:var M=p.stateNode;p.flags&32&&(hl(M,""),p.flags&=-33);var Y=Q0(l);Dh(l,Y,M);break;case 3:case 4:var he=p.stateNode.containerInfo,we=Q0(l);Z0(l,we,he);break;default:throw Error(n(161))}}catch(Fe){Ot(l,l.return,Fe)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function yI(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;yI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function Is(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)fI(l,f.alternate,f),f=f.sibling}function wo(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:wa(4,f,f.return),wo(f);break;case 1:$i(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&aI(f,f.return,p),wo(f);break;case 27:bc(f.stateNode);case 26:case 5:$i(f,f.return),wo(f);break;case 22:f.memoizedState===null&&wo(f);break;case 30:wo(f);break;default:wo(f)}l=l.sibling}}function Os(l,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,A=l,I=f,M=I.flags;switch(I.tag){case 0:case 11:case 15:Os(A,I,p),uc(4,I);break;case 1:if(Os(A,I,p),v=I,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(we){Ot(v,v.return,we)}if(v=I,A=v.updateQueue,A!==null){var Y=v.stateNode;try{var he=A.shared.hiddenCallbacks;if(he!==null)for(A.shared.hiddenCallbacks=null,A=0;A<he.length;A++)Ww(he[A],Y)}catch(we){Ot(v,v.return,we)}}p&&M&64&&sI(I),cc(I,I.return);break;case 27:uI(I);case 26:case 5:Os(A,I,p),p&&v===null&&M&4&&oI(I),cc(I,I.return);break;case 12:Os(A,I,p);break;case 31:Os(A,I,p),p&&M&4&&pI(A,I);break;case 13:Os(A,I,p),p&&M&4&&gI(A,I);break;case 22:I.memoizedState===null&&Os(A,I,p),cc(I,I.return);break;case 30:break;default:Os(A,I,p)}f=f.sibling}}function ey(l,f){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Xu(p))}function ty(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Xu(l))}function Oi(l,f,p,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)vI(l,f,p,v),f=f.sibling}function vI(l,f,p,v){var A=f.flags;switch(f.tag){case 0:case 11:case 15:Oi(l,f,p,v),A&2048&&uc(9,f);break;case 1:Oi(l,f,p,v);break;case 3:Oi(l,f,p,v),A&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Xu(l)));break;case 12:if(A&2048){Oi(l,f,p,v),l=f.stateNode;try{var I=f.memoizedProps,M=I.id,Y=I.onPostCommit;typeof Y=="function"&&Y(M,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(he){Ot(f,f.return,he)}}else Oi(l,f,p,v);break;case 31:Oi(l,f,p,v);break;case 13:Oi(l,f,p,v);break;case 23:break;case 22:I=f.stateNode,M=f.alternate,f.memoizedState!==null?I._visibility&2?Oi(l,f,p,v):fc(l,f):I._visibility&2?Oi(l,f,p,v):(I._visibility|=2,Pl(l,f,p,v,(f.subtreeFlags&10256)!==0||!1)),A&2048&&ey(M,f);break;case 24:Oi(l,f,p,v),A&2048&&ty(f.alternate,f);break;default:Oi(l,f,p,v)}}function Pl(l,f,p,v,A){for(A=A&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var I=l,M=f,Y=p,he=v,we=M.flags;switch(M.tag){case 0:case 11:case 15:Pl(I,M,Y,he,A),uc(8,M);break;case 23:break;case 22:var Fe=M.stateNode;M.memoizedState!==null?Fe._visibility&2?Pl(I,M,Y,he,A):fc(I,M):(Fe._visibility|=2,Pl(I,M,Y,he,A)),A&&we&2048&&ey(M.alternate,M);break;case 24:Pl(I,M,Y,he,A),A&&we&2048&&ty(M.alternate,M);break;default:Pl(I,M,Y,he,A)}f=f.sibling}}function fc(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=l,v=f,A=v.flags;switch(v.tag){case 22:fc(p,v),A&2048&&ey(v.alternate,v);break;case 24:fc(p,v),A&2048&&ty(v.alternate,v);break;default:fc(p,v)}f=f.sibling}}var hc=8192;function Dl(l,f,p){if(l.subtreeFlags&hc)for(l=l.child;l!==null;)bI(l,f,p),l=l.sibling}function bI(l,f,p){switch(l.tag){case 26:Dl(l,f,p),l.flags&hc&&l.memoizedState!==null&&X8(p,Ii,l.memoizedState,l.memoizedProps);break;case 5:Dl(l,f,p);break;case 3:case 4:var v=Ii;Ii=Wh(l.stateNode.containerInfo),Dl(l,f,p),Ii=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=hc,hc=16777216,Dl(l,f,p),hc=v):Dl(l,f,p));break;default:Dl(l,f,p)}}function SI(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function dc(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];Cr=v,EI(v,l)}SI(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xI(l),l=l.sibling}function xI(l){switch(l.tag){case 0:case 11:case 15:dc(l),l.flags&2048&&wa(9,l,l.return);break;case 3:dc(l);break;case 12:dc(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Mh(l)):dc(l);break;default:dc(l)}}function Mh(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];Cr=v,EI(v,l)}SI(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:wa(8,f,f.return),Mh(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,Mh(f));break;default:Mh(f)}l=l.sibling}}function EI(l,f){for(;Cr!==null;){var p=Cr;switch(p.tag){case 0:case 11:case 15:wa(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Xu(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Cr=v;else e:for(p=l;Cr!==null;){v=Cr;var A=v.sibling,I=v.return;if(hI(v),v===p){Cr=null;break e}if(A!==null){A.return=I,Cr=A;break e}Cr=I}}}var f8={getCacheForType:function(l){var f=Gr(hr),p=f.data.get(l);return p===void 0&&(p=l(),f.data.set(l,p)),p},cacheSignal:function(){return Gr(hr).controller.signal}},h8=typeof WeakMap=="function"?WeakMap:Map,wt=0,Ut=null,vt=null,St=0,It=0,zn=null,Ia=!1,kl=!1,ry=!1,Rs=0,sr=0,Oa=0,Io=0,ny=0,Hn=0,Ml=0,pc=null,In=null,iy=!1,Nh=0,TI=0,Bh=1/0,Uh=null,Ra=null,Er=0,La=null,Nl=null,Ls=0,sy=0,ay=null,AI=null,gc=0,oy=null;function Kn(){return(wt&2)!==0&&St!==0?St&-St:H.T!==null?dy():bn()}function _I(){if(Hn===0)if((St&536870912)===0||Et){var l=or;or<<=1,(or&3932160)===0&&(or=262144),Hn=l}else Hn=536870912;return l=$n.current,l!==null&&(l.flags|=32),Hn}function On(l,f,p){(l===Ut&&(It===2||It===9)||l.cancelPendingCommit!==null)&&(Bl(l,0),Ca(l,St,Hn,!1)),ee(l,p),((wt&2)===0||l!==Ut)&&(l===Ut&&((wt&2)===0&&(Io|=p),sr===4&&Ca(l,St,Hn,!1)),Gi(l))}function wI(l,f,p){if((wt&6)!==0)throw Error(n(327));var v=!p&&(f&127)===0&&(f&l.expiredLanes)===0||br(l,f),A=v?g8(l,f):uy(l,f,!0),I=v;do{if(A===0){kl&&!v&&Ca(l,f,0,!1);break}else{if(p=l.current.alternate,I&&!d8(p)){A=uy(l,f,!1),I=!1;continue}if(A===2){if(I=f,l.errorRecoveryDisabledLanes&I)var M=0;else M=l.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){f=M;e:{var Y=l;A=pc;var he=Y.current.memoizedState.isDehydrated;if(he&&(Bl(Y,M).flags|=256),M=uy(Y,M,!1),M!==2){if(ry&&!he){Y.errorRecoveryDisabledLanes|=I,Io|=I,A=4;break e}I=In,In=A,I!==null&&(In===null?In=I:In.push.apply(In,I))}A=M}if(I=!1,A!==2)continue}}if(A===1){Bl(l,0),Ca(l,f,0,!0);break}e:{switch(v=l,I=A,I){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Ca(v,f,Hn,!Ia);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(A=Nh+300-Ie(),10<A)){if(Ca(v,f,Hn,!Ia),ln(v,0,!0)!==0)break e;Ls=f,v.timeoutHandle=nO(II.bind(null,v,p,In,Uh,iy,f,Hn,Io,Ml,Ia,I,"Throttled",-0,0),A);break e}II(v,p,In,Uh,iy,f,Hn,Io,Ml,Ia,I,null,-0,0)}}break}while(!0);Gi(l)}function II(l,f,p,v,A,I,M,Y,he,we,Fe,He,Oe,De){if(l.timeoutHandle=-1,He=f.subtreeFlags,He&8192||(He&16785408)===16785408){He={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gs},bI(f,I,He);var tt=(I&62914560)===I?Nh-Ie():(I&4194048)===I?TI-Ie():0;if(tt=Q8(He,tt),tt!==null){Ls=I,l.cancelPendingCommit=tt(MI.bind(null,l,f,I,p,v,A,M,Y,he,Fe,He,null,Oe,De)),Ca(l,I,M,!we);return}}MI(l,f,I,p,v,A,M,Y,he)}function d8(l){for(var f=l;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var A=p[v],I=A.getSnapshot;A=A.value;try{if(!jn(I(),A))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ca(l,f,p,v){f&=~ny,f&=~Io,l.suspendedLanes|=f,l.pingedLanes&=~f,v&&(l.warmLanes|=f),v=l.expirationTimes;for(var A=f;0<A;){var I=31-Xe(A),M=1<<I;v[I]=-1,A&=~M}p!==0&&qe(l,p,f)}function jh(){return(wt&6)===0?(mc(0),!1):!0}function ly(){if(vt!==null){if(It===0)var l=vt.return;else l=vt,bs=vo=null,A0(l),Il=null,Zu=0,l=vt;for(;l!==null;)iI(l.alternate,l),l=l.return;vt=null}}function Bl(l,f){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,D8(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Ls=0,ly(),Ut=l,vt=p=ys(l.current,null),St=f,It=0,zn=null,Ia=!1,kl=br(l,f),ry=!1,Ml=Hn=ny=Io=Oa=sr=0,In=pc=null,iy=!1,(f&8)!==0&&(f|=f&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=f;0<v;){var A=31-Xe(v),I=1<<A;f|=l[A],v&=~I}return Rs=f,ah(),p}function OI(l,f){pt=null,H.H=ac,f===wl||f===ph?(f=Hw(),It=3):f===h0?(f=Hw(),It=4):It=f===F0?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,zn=f,vt===null&&(sr=1,Oh(l,oi(f,l.current)))}function RI(){var l=$n.current;return l===null?!0:(St&4194048)===St?fi===null:(St&62914560)===St||(St&536870912)!==0?l===fi:!1}function LI(){var l=H.H;return H.H=ac,l===null?ac:l}function CI(){var l=H.A;return H.A=f8,l}function Fh(){sr=4,Ia||(St&4194048)!==St&&$n.current!==null||(kl=!0),(Oa&134217727)===0&&(Io&134217727)===0||Ut===null||Ca(Ut,St,Hn,!1)}function uy(l,f,p){var v=wt;wt|=2;var A=LI(),I=CI();(Ut!==l||St!==f)&&(Uh=null,Bl(l,f)),f=!1;var M=sr;e:do try{if(It!==0&&vt!==null){var Y=vt,he=zn;switch(It){case 8:ly(),M=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(f=!0);var we=It;if(It=0,zn=null,Ul(l,Y,he,we),p&&kl){M=0;break e}break;default:we=It,It=0,zn=null,Ul(l,Y,he,we)}}p8(),M=sr;break}catch(Fe){OI(l,Fe)}while(!0);return f&&l.shellSuspendCounter++,bs=vo=null,wt=v,H.H=A,H.A=I,vt===null&&(Ut=null,St=0,ah()),M}function p8(){for(;vt!==null;)PI(vt)}function g8(l,f){var p=wt;wt|=2;var v=LI(),A=CI();Ut!==l||St!==f?(Uh=null,Bh=Ie()+500,Bl(l,f)):kl=br(l,f);e:do try{if(It!==0&&vt!==null){f=vt;var I=zn;t:switch(It){case 1:It=0,zn=null,Ul(l,f,I,1);break;case 2:case 9:if(Gw(I)){It=0,zn=null,DI(f);break}f=function(){It!==2&&It!==9||Ut!==l||(It=7),Gi(l)},I.then(f,f);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:Gw(I)?(It=0,zn=null,DI(f)):(It=0,zn=null,Ul(l,f,I,7));break;case 5:var M=null;switch(vt.tag){case 26:M=vt.memoizedState;case 5:case 27:var Y=vt;if(M?vO(M):Y.stateNode.complete){It=0,zn=null;var he=Y.sibling;if(he!==null)vt=he;else{var we=Y.return;we!==null?(vt=we,$h(we)):vt=null}break t}}It=0,zn=null,Ul(l,f,I,5);break;case 6:It=0,zn=null,Ul(l,f,I,6);break;case 8:ly(),sr=6;break e;default:throw Error(n(462))}}m8();break}catch(Fe){OI(l,Fe)}while(!0);return bs=vo=null,H.H=v,H.A=A,wt=p,vt!==null?0:(Ut=null,St=0,ah(),sr)}function m8(){for(;vt!==null&&!Ue();)PI(vt)}function PI(l){var f=rI(l.alternate,l,Rs);l.memoizedProps=l.pendingProps,f===null?$h(l):vt=f}function DI(l){var f=l,p=f.alternate;switch(f.tag){case 15:case 0:f=X1(p,f,f.pendingProps,f.type,void 0,St);break;case 11:f=X1(p,f,f.pendingProps,f.type.render,f.ref,St);break;case 5:A0(f);default:iI(p,f),f=vt=Cw(f,Rs),f=rI(p,f,Rs)}l.memoizedProps=l.pendingProps,f===null?$h(l):vt=f}function Ul(l,f,p,v){bs=vo=null,A0(f),Il=null,Zu=0;var A=f.return;try{if(i8(l,A,f,p,St)){sr=1,Oh(l,oi(p,l.current)),vt=null;return}}catch(I){if(A!==null)throw vt=A,I;sr=1,Oh(l,oi(p,l.current)),vt=null;return}f.flags&32768?(Et||v===1?l=!0:kl||(St&536870912)!==0?l=!1:(Ia=l=!0,(v===2||v===9||v===3||v===6)&&(v=$n.current,v!==null&&v.tag===13&&(v.flags|=16384))),kI(f,l)):$h(f)}function $h(l){var f=l;do{if((f.flags&32768)!==0){kI(f,Ia);return}l=f.return;var p=o8(f.alternate,f,Rs);if(p!==null){vt=p;return}if(f=f.sibling,f!==null){vt=f;return}vt=f=l}while(f!==null);sr===0&&(sr=5)}function kI(l,f){do{var p=l8(l.alternate,l);if(p!==null){p.flags&=32767,vt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(l=l.sibling,l!==null)){vt=l;return}vt=l=p}while(l!==null);sr=6,vt=null}function MI(l,f,p,v,A,I,M,Y,he){l.cancelPendingCommit=null;do Gh();while(Er!==0);if((wt&6)!==0)throw Error(n(327));if(f!==null){if(f===l.current)throw Error(n(177));if(I=f.lanes|f.childLanes,I|=Qm,ue(l,p,I,M,Y,he),l===Ut&&(vt=Ut=null,St=0),Nl=f,La=l,Ls=p,sy=I,ay=A,AI=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,S8(G,function(){return FI(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=H.T,H.T=null,A=K.p,K.p=2,M=wt,wt|=4;try{u8(l,f,p)}finally{wt=M,K.p=A,H.T=v}}Er=1,NI(),BI(),UI()}}function NI(){if(Er===1){Er=0;var l=La,f=Nl,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var A=wt;wt|=4;try{mI(f,l);var I=xy,M=Ew(l.containerInfo),Y=I.focusedElem,he=I.selectionRange;if(M!==Y&&Y&&Y.ownerDocument&&xw(Y.ownerDocument.documentElement,Y)){if(he!==null&&qm(Y)){var we=he.start,Fe=he.end;if(Fe===void 0&&(Fe=we),"selectionStart"in Y)Y.selectionStart=we,Y.selectionEnd=Math.min(Fe,Y.value.length);else{var He=Y.ownerDocument||document,Oe=He&&He.defaultView||window;if(Oe.getSelection){var De=Oe.getSelection(),tt=Y.textContent.length,ot=Math.min(he.start,tt),kt=he.end===void 0?ot:Math.min(he.end,tt);!De.extend&&ot>kt&&(M=kt,kt=ot,ot=M);var be=Sw(Y,ot),ge=Sw(Y,kt);if(be&&ge&&(De.rangeCount!==1||De.anchorNode!==be.node||De.anchorOffset!==be.offset||De.focusNode!==ge.node||De.focusOffset!==ge.offset)){var _e=He.createRange();_e.setStart(be.node,be.offset),De.removeAllRanges(),ot>kt?(De.addRange(_e),De.extend(ge.node,ge.offset)):(_e.setEnd(ge.node,ge.offset),De.addRange(_e))}}}}for(He=[],De=Y;De=De.parentNode;)De.nodeType===1&&He.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<He.length;Y++){var ze=He[Y];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}ed=!!Sy,xy=Sy=null}finally{wt=A,K.p=v,H.T=p}}l.current=f,Er=2}}function BI(){if(Er===2){Er=0;var l=La,f=Nl,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var A=wt;wt|=4;try{fI(l,f.alternate,f)}finally{wt=A,K.p=v,H.T=p}}Er=3}}function UI(){if(Er===4||Er===3){Er=0,Ke();var l=La,f=Nl,p=Ls,v=AI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Er=5:(Er=0,Nl=La=null,jI(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Ra=null),Sr(p),f=f.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(me,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=H.T,A=K.p,K.p=2,H.T=null;try{for(var I=l.onRecoverableError,M=0;M<v.length;M++){var Y=v[M];I(Y.value,{componentStack:Y.stack})}}finally{H.T=f,K.p=A}}(Ls&3)!==0&&Gh(),Gi(l),A=l.pendingLanes,(p&261930)!==0&&(A&42)!==0?l===oy?gc++:(gc=0,oy=l):gc=0,mc(0)}}function jI(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Xu(f)))}function Gh(){return NI(),BI(),UI(),FI()}function FI(){if(Er!==5)return!1;var l=La,f=sy;sy=0;var p=Sr(Ls),v=H.T,A=K.p;try{K.p=32>p?32:p,H.T=null,p=ay,ay=null;var I=La,M=Ls;if(Er=0,Nl=La=null,Ls=0,(wt&6)!==0)throw Error(n(331));var Y=wt;if(wt|=4,xI(I.current),vI(I,I.current,M,p),wt=Y,mc(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(me,I)}catch{}return!0}finally{K.p=A,H.T=v,jI(l,f)}}function $I(l,f,p){f=oi(p,f),f=j0(l.stateNode,f,2),l=Ta(l,f,2),l!==null&&(ee(l,2),Gi(l))}function Ot(l,f,p){if(l.tag===3)$I(l,l,p);else for(;f!==null;){if(f.tag===3){$I(f,l,p);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ra===null||!Ra.has(v))){l=oi(p,l),p=G1(2),v=Ta(f,p,2),v!==null&&(z1(p,v,f,l),ee(v,2),Gi(v));break}}f=f.return}}function cy(l,f,p){var v=l.pingCache;if(v===null){v=l.pingCache=new h8;var A=new Set;v.set(f,A)}else A=v.get(f),A===void 0&&(A=new Set,v.set(f,A));A.has(p)||(ry=!0,A.add(p),l=y8.bind(null,l,f,p),f.then(l,l))}function y8(l,f,p){var v=l.pingCache;v!==null&&v.delete(f),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Ut===l&&(St&p)===p&&(sr===4||sr===3&&(St&62914560)===St&&300>Ie()-Nh?(wt&2)===0&&Bl(l,0):ny|=p,Ml===St&&(Ml=0)),Gi(l)}function GI(l,f){f===0&&(f=fs()),l=go(l,f),l!==null&&(ee(l,f),Gi(l))}function v8(l){var f=l.memoizedState,p=0;f!==null&&(p=f.retryLane),GI(l,p)}function b8(l,f){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,A=l.memoizedState;A!==null&&(p=A.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(f),GI(l,p)}function S8(l,f){return je(l,f)}var zh=null,jl=null,fy=!1,Hh=!1,hy=!1,Pa=0;function Gi(l){l!==jl&&l.next===null&&(jl===null?zh=jl=l:jl=jl.next=l),Hh=!0,fy||(fy=!0,E8())}function mc(l,f){if(!hy&&Hh){hy=!0;do for(var p=!1,v=zh;v!==null;){if(l!==0){var A=v.pendingLanes;if(A===0)var I=0;else{var M=v.suspendedLanes,Y=v.pingedLanes;I=(1<<31-Xe(42|l)+1)-1,I&=A&~(M&~Y),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(p=!0,qI(v,I))}else I=St,I=ln(v,v===Ut?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||br(v,I)||(p=!0,qI(v,I));v=v.next}while(p);hy=!1}}function x8(){zI()}function zI(){Hh=fy=!1;var l=0;Pa!==0&&P8()&&(l=Pa);for(var f=Ie(),p=null,v=zh;v!==null;){var A=v.next,I=HI(v,f);I===0?(v.next=null,p===null?zh=A:p.next=A,A===null&&(jl=p)):(p=v,(l!==0||(I&3)!==0)&&(Hh=!0)),v=A}Er!==0&&Er!==5||mc(l),Pa!==0&&(Pa=0)}function HI(l,f){for(var p=l.suspendedLanes,v=l.pingedLanes,A=l.expirationTimes,I=l.pendingLanes&-62914561;0<I;){var M=31-Xe(I),Y=1<<M,he=A[M];he===-1?((Y&p)===0||(Y&v)!==0)&&(A[M]=al(Y,f)):he<=f&&(l.expiredLanes|=Y),I&=~Y}if(f=Ut,p=St,p=ln(l,l===f?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===f&&(It===2||It===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&pe(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||br(l,p)){if(f=p&-p,f===l.callbackPriority)return f;switch(v!==null&&pe(v),Sr(p)){case 2:case 8:p=D;break;case 32:p=G;break;case 268435456:p=ve;break;default:p=G}return v=KI.bind(null,l),p=je(p,v),l.callbackPriority=f,l.callbackNode=p,f}return v!==null&&v!==null&&pe(v),l.callbackPriority=2,l.callbackNode=null,2}function KI(l,f){if(Er!==0&&Er!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Gh()&&l.callbackNode!==p)return null;var v=St;return v=ln(l,l===Ut?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(wI(l,v,f),HI(l,Ie()),l.callbackNode!=null&&l.callbackNode===p?KI.bind(null,l):null)}function qI(l,f){if(Gh())return null;wI(l,f,!0)}function E8(){k8(function(){(wt&6)!==0?je(L,x8):zI()})}function dy(){if(Pa===0){var l=Al;l===0&&(l=an,an<<=1,(an&261888)===0&&(an=256)),Pa=l}return Pa}function VI(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Zf(""+l)}function WI(l,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,l.id&&p.setAttribute("form",l.id),f.parentNode.insertBefore(p,f),l=new FormData(l),p.parentNode.removeChild(p),l}function T8(l,f,p,v,A){if(f==="submit"&&p&&p.stateNode===A){var I=VI((A[xr]||null).action),M=v.submitter;M&&(f=(f=M[xr]||null)?VI(f.formAction):M.getAttribute("formAction"),f!==null&&(I=f,M=null));var Y=new rh("action","action",null,v,A);l.push({event:Y,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Pa!==0){var he=M?WI(A,M):new FormData(A);D0(p,{pending:!0,data:he,method:A.method,action:I},null,he)}}else typeof I=="function"&&(Y.preventDefault(),he=M?WI(A,M):new FormData(A),D0(p,{pending:!0,data:he,method:A.method,action:I},I,he))},currentTarget:A}]})}}for(var py=0;py<Xm.length;py++){var gy=Xm[py],A8=gy.toLowerCase(),_8=gy[0].toUpperCase()+gy.slice(1);wi(A8,"on"+_8)}wi(_w,"onAnimationEnd"),wi(ww,"onAnimationIteration"),wi(Iw,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi($4,"onTransitionRun"),wi(G4,"onTransitionStart"),wi(z4,"onTransitionCancel"),wi(Ow,"onTransitionEnd"),cl("onMouseEnter",["mouseout","mouseover"]),cl("onMouseLeave",["mouseout","mouseover"]),cl("onPointerEnter",["pointerout","pointerover"]),cl("onPointerLeave",["pointerout","pointerover"]),co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),co("onBeforeInput",["compositionend","keypress","textInput","paste"]),co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yc));function YI(l,f){f=(f&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],A=v.event;v=v.listeners;e:{var I=void 0;if(f)for(var M=v.length-1;0<=M;M--){var Y=v[M],he=Y.instance,we=Y.currentTarget;if(Y=Y.listener,he!==I&&A.isPropagationStopped())break e;I=Y,A.currentTarget=we;try{I(A)}catch(Fe){sh(Fe)}A.currentTarget=null,I=he}else for(M=0;M<v.length;M++){if(Y=v[M],he=Y.instance,we=Y.currentTarget,Y=Y.listener,he!==I&&A.isPropagationStopped())break e;I=Y,A.currentTarget=we;try{I(A)}catch(Fe){sh(Fe)}A.currentTarget=null,I=he}}}}function bt(l,f){var p=f[En];p===void 0&&(p=f[En]=new Set);var v=l+"__bubble";p.has(v)||(XI(f,l,2,!1),p.add(v))}function my(l,f,p){var v=0;f&&(v|=4),XI(p,l,v,f)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function yy(l){if(!l[Kh]){l[Kh]=!0,z_.forEach(function(p){p!=="selectionchange"&&(w8.has(p)||my(p,!1,l),my(p,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Kh]||(f[Kh]=!0,my("selectionchange",!1,f))}}function XI(l,f,p,v){switch(_O(f)){case 2:var A=e6;break;case 8:A=t6;break;default:A=Py}p=A.bind(null,f,p,l),A=void 0,!Bm||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),v?A!==void 0?l.addEventListener(f,p,{capture:!0,passive:A}):l.addEventListener(f,p,!0):A!==void 0?l.addEventListener(f,p,{passive:A}):l.addEventListener(f,p,!1)}function vy(l,f,p,v,A){var I=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var M=v.tag;if(M===3||M===4){var Y=v.stateNode.containerInfo;if(Y===A)break;if(M===4)for(M=v.return;M!==null;){var he=M.tag;if((he===3||he===4)&&M.stateNode.containerInfo===A)return;M=M.return}for(;Y!==null;){if(M=ol(Y),M===null)return;if(he=M.tag,he===5||he===6||he===26||he===27){v=I=M;continue e}Y=Y.parentNode}}v=v.return}tw(function(){var we=I,Fe=Mm(p),He=[];e:{var Oe=Rw.get(l);if(Oe!==void 0){var De=rh,tt=l;switch(l){case"keypress":if(eh(p)===0)break e;case"keydown":case"keyup":De=b4;break;case"focusin":tt="focus",De=$m;break;case"focusout":tt="blur",De=$m;break;case"beforeblur":case"afterblur":De=$m;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=iw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=o4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=E4;break;case _w:case ww:case Iw:De=c4;break;case Ow:De=A4;break;case"scroll":case"scrollend":De=s4;break;case"wheel":De=w4;break;case"copy":case"cut":case"paste":De=h4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=aw;break;case"toggle":case"beforetoggle":De=O4}var ot=(f&4)!==0,kt=!ot&&(l==="scroll"||l==="scrollend"),be=ot?Oe!==null?Oe+"Capture":null:Oe;ot=[];for(var ge=we,_e;ge!==null;){var ze=ge;if(_e=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||_e===null||be===null||(ze=ju(ge,be),ze!=null&&ot.push(vc(ge,ze,_e))),kt)break;ge=ge.return}0<ot.length&&(Oe=new De(Oe,tt,null,p,Fe),He.push({event:Oe,listeners:ot}))}}if((f&7)===0){e:{if(Oe=l==="mouseover"||l==="pointerover",De=l==="mouseout"||l==="pointerout",Oe&&p!==km&&(tt=p.relatedTarget||p.fromElement)&&(ol(tt)||tt[xn]))break e;if((De||Oe)&&(Oe=Fe.window===Fe?Fe:(Oe=Fe.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,De?(tt=p.relatedTarget||p.toElement,De=we,tt=tt?ol(tt):null,tt!==null&&(kt=s(tt),ot=tt.tag,tt!==kt||ot!==5&&ot!==27&&ot!==6)&&(tt=null)):(De=null,tt=we),De!==tt)){if(ot=iw,ze="onMouseLeave",be="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(ot=aw,ze="onPointerLeave",be="onPointerEnter",ge="pointer"),kt=De==null?Oe:Uu(De),_e=tt==null?Oe:Uu(tt),Oe=new ot(ze,ge+"leave",De,p,Fe),Oe.target=kt,Oe.relatedTarget=_e,ze=null,ol(Fe)===we&&(ot=new ot(be,ge+"enter",tt,p,Fe),ot.target=_e,ot.relatedTarget=kt,ze=ot),kt=ze,De&&tt)t:{for(ot=I8,be=De,ge=tt,_e=0,ze=be;ze;ze=ot(ze))_e++;ze=0;for(var st=ge;st;st=ot(st))ze++;for(;0<_e-ze;)be=ot(be),_e--;for(;0<ze-_e;)ge=ot(ge),ze--;for(;_e--;){if(be===ge||ge!==null&&be===ge.alternate){ot=be;break t}be=ot(be),ge=ot(ge)}ot=null}else ot=null;De!==null&&QI(He,Oe,De,ot,!1),tt!==null&&kt!==null&&QI(He,kt,tt,ot,!0)}}e:{if(Oe=we?Uu(we):window,De=Oe.nodeName&&Oe.nodeName.toLowerCase(),De==="select"||De==="input"&&Oe.type==="file")var Tt=pw;else if(hw(Oe))if(gw)Tt=U4;else{Tt=N4;var rt=M4}else De=Oe.nodeName,!De||De.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?we&&Dm(we.elementType)&&(Tt=pw):Tt=B4;if(Tt&&(Tt=Tt(l,we))){dw(He,Tt,p,Fe);break e}rt&&rt(l,Oe,we),l==="focusout"&&we&&Oe.type==="number"&&we.memoizedProps.value!=null&&Pm(Oe,"number",Oe.value)}switch(rt=we?Uu(we):window,l){case"focusin":(hw(rt)||rt.contentEditable==="true")&&(ml=rt,Vm=we,Vu=null);break;case"focusout":Vu=Vm=ml=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Tw(He,p,Fe);break;case"selectionchange":if(F4)break;case"keydown":case"keyup":Tw(He,p,Fe)}var gt;if(zm)e:{switch(l){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else gl?cw(l,p)&&(xt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(xt="onCompositionStart");xt&&(ow&&p.locale!=="ko"&&(gl||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&gl&&(gt=rw()):(ma=Fe,Um="value"in ma?ma.value:ma.textContent,gl=!0)),rt=qh(we,xt),0<rt.length&&(xt=new sw(xt,l,null,p,Fe),He.push({event:xt,listeners:rt}),gt?xt.data=gt:(gt=fw(p),gt!==null&&(xt.data=gt)))),(gt=L4?C4(l,p):P4(l,p))&&(xt=qh(we,"onBeforeInput"),0<xt.length&&(rt=new sw("onBeforeInput","beforeinput",null,p,Fe),He.push({event:rt,listeners:xt}),rt.data=gt)),T8(He,l,we,p,Fe)}YI(He,f)})}function vc(l,f,p){return{instance:l,listener:f,currentTarget:p}}function qh(l,f){for(var p=f+"Capture",v=[];l!==null;){var A=l,I=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||I===null||(A=ju(l,p),A!=null&&v.unshift(vc(l,A,I)),A=ju(l,f),A!=null&&v.push(vc(l,A,I))),l.tag===3)return v;l=l.return}return[]}function I8(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function QI(l,f,p,v,A){for(var I=f._reactName,M=[];p!==null&&p!==v;){var Y=p,he=Y.alternate,we=Y.stateNode;if(Y=Y.tag,he!==null&&he===v)break;Y!==5&&Y!==26&&Y!==27||we===null||(he=we,A?(we=ju(p,I),we!=null&&M.unshift(vc(p,we,he))):A||(we=ju(p,I),we!=null&&M.push(vc(p,we,he)))),p=p.return}M.length!==0&&l.push({event:f,listeners:M})}var O8=/\r\n?/g,R8=/\u0000|\uFFFD/g;function ZI(l){return(typeof l=="string"?l:""+l).replace(O8,`
`).replace(R8,"")}function JI(l,f){return f=ZI(f),ZI(l)===f}function Dt(l,f,p,v,A,I){switch(p){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||hl(l,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&hl(l,""+v);break;case"className":Xf(l,"class",v);break;case"tabIndex":Xf(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Xf(l,p,v);break;case"style":J_(l,v,I);break;case"data":if(f!=="object"){Xf(l,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Zf(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(p==="formAction"?(f!=="input"&&Dt(l,f,"name",A.name,A,null),Dt(l,f,"formEncType",A.formEncType,A,null),Dt(l,f,"formMethod",A.formMethod,A,null),Dt(l,f,"formTarget",A.formTarget,A,null)):(Dt(l,f,"encType",A.encType,A,null),Dt(l,f,"method",A.method,A,null),Dt(l,f,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Zf(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=gs);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=Zf(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":bt("beforetoggle",l),bt("toggle",l),Yf(l,"popover",v);break;case"xlinkActuate":ps(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ps(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ps(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ps(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ps(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ps(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ps(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ps(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ps(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Yf(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=n4.get(p)||p,Yf(l,p,v))}}function by(l,f,p,v,A,I){switch(p){case"style":J_(l,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"children":typeof v=="string"?hl(l,v):(typeof v=="number"||typeof v=="bigint")&&hl(l,""+v);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=gs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!H_.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),f=p.slice(2,A?p.length-7:void 0),I=l[xr]||null,I=I!=null?I[p]:null,typeof I=="function"&&l.removeEventListener(f,I,A),typeof v=="function")){typeof I!="function"&&I!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(f,v,A);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):Yf(l,p,v)}}}function Hr(l,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",l),bt("load",l);var v=!1,A=!1,I;for(I in p)if(p.hasOwnProperty(I)){var M=p[I];if(M!=null)switch(I){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Dt(l,f,I,M,p,null)}}A&&Dt(l,f,"srcSet",p.srcSet,p,null),v&&Dt(l,f,"src",p.src,p,null);return;case"input":bt("invalid",l);var Y=I=M=A=null,he=null,we=null;for(v in p)if(p.hasOwnProperty(v)){var Fe=p[v];if(Fe!=null)switch(v){case"name":A=Fe;break;case"type":M=Fe;break;case"checked":he=Fe;break;case"defaultChecked":we=Fe;break;case"value":I=Fe;break;case"defaultValue":Y=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,f));break;default:Dt(l,f,v,Fe,p,null)}}Y_(l,I,Y,he,we,M,A,!1);return;case"select":bt("invalid",l),v=M=I=null;for(A in p)if(p.hasOwnProperty(A)&&(Y=p[A],Y!=null))switch(A){case"value":I=Y;break;case"defaultValue":M=Y;break;case"multiple":v=Y;default:Dt(l,f,A,Y,p,null)}f=I,p=M,l.multiple=!!v,f!=null?fl(l,!!v,f,!1):p!=null&&fl(l,!!v,p,!0);return;case"textarea":bt("invalid",l),I=A=v=null;for(M in p)if(p.hasOwnProperty(M)&&(Y=p[M],Y!=null))switch(M){case"value":v=Y;break;case"defaultValue":A=Y;break;case"children":I=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:Dt(l,f,M,Y,p,null)}Q_(l,v,A,I);return;case"option":for(he in p)if(p.hasOwnProperty(he)&&(v=p[he],v!=null))switch(he){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Dt(l,f,he,v,p,null)}return;case"dialog":bt("beforetoggle",l),bt("toggle",l),bt("cancel",l),bt("close",l);break;case"iframe":case"object":bt("load",l);break;case"video":case"audio":for(v=0;v<yc.length;v++)bt(yc[v],l);break;case"image":bt("error",l),bt("load",l);break;case"details":bt("toggle",l);break;case"embed":case"source":case"link":bt("error",l),bt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in p)if(p.hasOwnProperty(we)&&(v=p[we],v!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Dt(l,f,we,v,p,null)}return;default:if(Dm(f)){for(Fe in p)p.hasOwnProperty(Fe)&&(v=p[Fe],v!==void 0&&by(l,f,Fe,v,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(v=p[Y],v!=null&&Dt(l,f,Y,v,p,null))}function L8(l,f,p,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,I=null,M=null,Y=null,he=null,we=null,Fe=null;for(De in p){var He=p[De];if(p.hasOwnProperty(De)&&He!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":he=He;default:v.hasOwnProperty(De)||Dt(l,f,De,null,v,He)}}for(var Oe in v){var De=v[Oe];if(He=p[Oe],v.hasOwnProperty(Oe)&&(De!=null||He!=null))switch(Oe){case"type":I=De;break;case"name":A=De;break;case"checked":we=De;break;case"defaultChecked":Fe=De;break;case"value":M=De;break;case"defaultValue":Y=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,f));break;default:De!==He&&Dt(l,f,Oe,De,v,He)}}Cm(l,M,Y,he,we,Fe,I,A);return;case"select":De=M=Y=Oe=null;for(I in p)if(he=p[I],p.hasOwnProperty(I)&&he!=null)switch(I){case"value":break;case"multiple":De=he;default:v.hasOwnProperty(I)||Dt(l,f,I,null,v,he)}for(A in v)if(I=v[A],he=p[A],v.hasOwnProperty(A)&&(I!=null||he!=null))switch(A){case"value":Oe=I;break;case"defaultValue":Y=I;break;case"multiple":M=I;default:I!==he&&Dt(l,f,A,I,v,he)}f=Y,p=M,v=De,Oe!=null?fl(l,!!p,Oe,!1):!!v!=!!p&&(f!=null?fl(l,!!p,f,!0):fl(l,!!p,p?[]:"",!1));return;case"textarea":De=Oe=null;for(Y in p)if(A=p[Y],p.hasOwnProperty(Y)&&A!=null&&!v.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Dt(l,f,Y,null,v,A)}for(M in v)if(A=v[M],I=p[M],v.hasOwnProperty(M)&&(A!=null||I!=null))switch(M){case"value":Oe=A;break;case"defaultValue":De=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==I&&Dt(l,f,M,A,v,I)}X_(l,Oe,De);return;case"option":for(var tt in p)if(Oe=p[tt],p.hasOwnProperty(tt)&&Oe!=null&&!v.hasOwnProperty(tt))switch(tt){case"selected":l.selected=!1;break;default:Dt(l,f,tt,null,v,Oe)}for(he in v)if(Oe=v[he],De=p[he],v.hasOwnProperty(he)&&Oe!==De&&(Oe!=null||De!=null))switch(he){case"selected":l.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:Dt(l,f,he,Oe,v,De)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in p)Oe=p[ot],p.hasOwnProperty(ot)&&Oe!=null&&!v.hasOwnProperty(ot)&&Dt(l,f,ot,null,v,Oe);for(we in v)if(Oe=v[we],De=p[we],v.hasOwnProperty(we)&&Oe!==De&&(Oe!=null||De!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,f));break;default:Dt(l,f,we,Oe,v,De)}return;default:if(Dm(f)){for(var kt in p)Oe=p[kt],p.hasOwnProperty(kt)&&Oe!==void 0&&!v.hasOwnProperty(kt)&&by(l,f,kt,void 0,v,Oe);for(Fe in v)Oe=v[Fe],De=p[Fe],!v.hasOwnProperty(Fe)||Oe===De||Oe===void 0&&De===void 0||by(l,f,Fe,Oe,v,De);return}}for(var be in p)Oe=p[be],p.hasOwnProperty(be)&&Oe!=null&&!v.hasOwnProperty(be)&&Dt(l,f,be,null,v,Oe);for(He in v)Oe=v[He],De=p[He],!v.hasOwnProperty(He)||Oe===De||Oe==null&&De==null||Dt(l,f,He,Oe,v,De)}function eO(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C8(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var A=p[v],I=A.transferSize,M=A.initiatorType,Y=A.duration;if(I&&Y&&eO(M)){for(M=0,Y=A.responseEnd,v+=1;v<p.length;v++){var he=p[v],we=he.startTime;if(we>Y)break;var Fe=he.transferSize,He=he.initiatorType;Fe&&eO(He)&&(he=he.responseEnd,M+=Fe*(he<Y?1:(Y-we)/(he-we)))}if(--v,f+=8*(I+M)/(A.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Sy=null,xy=null;function Vh(l){return l.nodeType===9?l:l.ownerDocument}function tO(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rO(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Ey(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Ty=null;function P8(){var l=window.event;return l&&l.type==="popstate"?l===Ty?!1:(Ty=l,!0):(Ty=null,!1)}var nO=typeof setTimeout=="function"?setTimeout:void 0,D8=typeof clearTimeout=="function"?clearTimeout:void 0,iO=typeof Promise=="function"?Promise:void 0,k8=typeof queueMicrotask=="function"?queueMicrotask:typeof iO<"u"?function(l){return iO.resolve(null).then(l).catch(M8)}:nO;function M8(l){setTimeout(function(){throw l})}function Da(l){return l==="head"}function sO(l,f){var p=f,v=0;do{var A=p.nextSibling;if(l.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(A),zl(f);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")bc(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,bc(p);for(var I=p.firstChild;I;){var M=I.nextSibling,Y=I.nodeName;I[un]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&I.rel.toLowerCase()==="stylesheet"||p.removeChild(I),I=M}}else p==="body"&&bc(l.ownerDocument.body);p=A}while(p);zl(f)}function aO(l,f){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?f?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(f?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function Ay(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Ay(p),Rm(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function N8(l,f,p,v){for(;l.nodeType===1;){var A=p;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[un])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(I=l.getAttribute("rel"),I==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(I!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(I=l.getAttribute("src"),(I!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&I&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var I=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===I)return l}else return l;if(l=hi(l.nextSibling),l===null)break}return null}function B8(l,f,p){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=hi(l.nextSibling),l===null))return null;return l}function oO(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=hi(l.nextSibling),l===null))return null;return l}function _y(l){return l.data==="$?"||l.data==="$~"}function wy(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function U8(l,f){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||p.readyState!=="loading")f();else{var v=function(){f(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function hi(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var Iy=null;function lO(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(f===0)return hi(l.nextSibling);f--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||f++}l=l.nextSibling}return null}function uO(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(f===0)return l;f--}else p!=="/$"&&p!=="/&"||f++}l=l.previousSibling}return null}function cO(l,f,p){switch(f=Vh(p),l){case"html":if(l=f.documentElement,!l)throw Error(n(452));return l;case"head":if(l=f.head,!l)throw Error(n(453));return l;case"body":if(l=f.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function bc(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);Rm(l)}var di=new Map,fO=new Set;function Wh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Cs=K.d;K.d={f:j8,r:F8,D:$8,C:G8,L:z8,m:H8,X:q8,S:K8,M:V8};function j8(){var l=Cs.f(),f=jh();return l||f}function F8(l){var f=ll(l);f!==null&&f.tag===5&&f.type==="form"?O1(f):Cs.r(l)}var Fl=typeof document>"u"?null:document;function hO(l,f,p){var v=Fl;if(v&&typeof f=="string"&&f){var A=si(f);A='link[rel="'+l+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),fO.has(A)||(fO.add(A),l={rel:l,crossOrigin:p,href:f},v.querySelector(A)===null&&(f=v.createElement("link"),Hr(f,"link",l),Lr(f),v.head.appendChild(f)))}}function $8(l){Cs.D(l),hO("dns-prefetch",l,null)}function G8(l,f){Cs.C(l,f),hO("preconnect",l,f)}function z8(l,f,p){Cs.L(l,f,p);var v=Fl;if(v&&l&&f){var A='link[rel="preload"][as="'+si(f)+'"]';f==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+si(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+si(p.imageSizes)+'"]')):A+='[href="'+si(l)+'"]';var I=A;switch(f){case"style":I=$l(l);break;case"script":I=Gl(l)}di.has(I)||(l=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:l,as:f},p),di.set(I,l),v.querySelector(A)!==null||f==="style"&&v.querySelector(Sc(I))||f==="script"&&v.querySelector(xc(I))||(f=v.createElement("link"),Hr(f,"link",l),Lr(f),v.head.appendChild(f)))}}function H8(l,f){Cs.m(l,f);var p=Fl;if(p&&l){var v=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+si(v)+'"][href="'+si(l)+'"]',I=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=Gl(l)}if(!di.has(I)&&(l=d({rel:"modulepreload",href:l},f),di.set(I,l),p.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(xc(I)))return}v=p.createElement("link"),Hr(v,"link",l),Lr(v),p.head.appendChild(v)}}}function K8(l,f,p){Cs.S(l,f,p);var v=Fl;if(v&&l){var A=ul(v).hoistableStyles,I=$l(l);f=f||"default";var M=A.get(I);if(!M){var Y={loading:0,preload:null};if(M=v.querySelector(Sc(I)))Y.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},p),(p=di.get(I))&&Oy(l,p);var he=M=v.createElement("link");Lr(he),Hr(he,"link",l),he._p=new Promise(function(we,Fe){he.onload=we,he.onerror=Fe}),he.addEventListener("load",function(){Y.loading|=1}),he.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Yh(M,f,v)}M={type:"stylesheet",instance:M,count:1,state:Y},A.set(I,M)}}}function q8(l,f){Cs.X(l,f);var p=Fl;if(p&&l){var v=ul(p).hoistableScripts,A=Gl(l),I=v.get(A);I||(I=p.querySelector(xc(A)),I||(l=d({src:l,async:!0},f),(f=di.get(A))&&Ry(l,f),I=p.createElement("script"),Lr(I),Hr(I,"link",l),p.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(A,I))}}function V8(l,f){Cs.M(l,f);var p=Fl;if(p&&l){var v=ul(p).hoistableScripts,A=Gl(l),I=v.get(A);I||(I=p.querySelector(xc(A)),I||(l=d({src:l,async:!0,type:"module"},f),(f=di.get(A))&&Ry(l,f),I=p.createElement("script"),Lr(I),Hr(I,"link",l),p.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(A,I))}}function dO(l,f,p,v){var A=(A=xe.current)?Wh(A):null;if(!A)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=$l(p.href),p=ul(A).hoistableStyles,v=p.get(f),v||(v={type:"style",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=$l(p.href);var I=ul(A).hoistableStyles,M=I.get(l);if(M||(A=A.ownerDocument||A,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(l,M),(I=A.querySelector(Sc(l)))&&!I._p&&(M.instance=I,M.state.loading=5),di.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},di.set(l,p),I||W8(A,l,p,M.state))),f&&v===null)throw Error(n(528,""));return M}if(f&&v!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Gl(p),p=ul(A).hoistableScripts,v=p.get(f),v||(v={type:"script",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function $l(l){return'href="'+si(l)+'"'}function Sc(l){return'link[rel="stylesheet"]['+l+"]"}function pO(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function W8(l,f,p,v){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=l.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),Hr(f,"link",p),Lr(f),l.head.appendChild(f))}function Gl(l){return'[src="'+si(l)+'"]'}function xc(l){return"script[async]"+l}function gO(l,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var v=l.querySelector('style[data-href~="'+si(p.href)+'"]');if(v)return f.instance=v,Lr(v),v;var A=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Lr(v),Hr(v,"style",A),Yh(v,p.precedence,l),f.instance=v;case"stylesheet":A=$l(p.href);var I=l.querySelector(Sc(A));if(I)return f.state.loading|=4,f.instance=I,Lr(I),I;v=pO(p),(A=di.get(A))&&Oy(v,A),I=(l.ownerDocument||l).createElement("link"),Lr(I);var M=I;return M._p=new Promise(function(Y,he){M.onload=Y,M.onerror=he}),Hr(I,"link",v),f.state.loading|=4,Yh(I,p.precedence,l),f.instance=I;case"script":return I=Gl(p.src),(A=l.querySelector(xc(I)))?(f.instance=A,Lr(A),A):(v=p,(A=di.get(I))&&(v=d({},p),Ry(v,A)),l=l.ownerDocument||l,A=l.createElement("script"),Lr(A),Hr(A,"link",v),l.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,Yh(v,p.precedence,l));return f.instance}function Yh(l,f,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,I=A,M=0;M<v.length;M++){var Y=v[M];if(Y.dataset.precedence===f)I=Y;else if(I!==A)break}I?I.parentNode.insertBefore(l,I.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(l,f.firstChild))}function Oy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function Ry(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var Xh=null;function mO(l,f,p){if(Xh===null){var v=new Map,A=Xh=new Map;A.set(p,v)}else A=Xh,v=A.get(p),v||(v=new Map,A.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),A=0;A<p.length;A++){var I=p[A];if(!(I[un]||I[Jt]||l==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var M=I.getAttribute(f)||"";M=l+M;var Y=v.get(M);Y?Y.push(I):v.set(M,[I])}}return v}function yO(l,f,p){l=l.ownerDocument||l,l.head.insertBefore(p,f==="title"?l.querySelector("head > title"):null)}function Y8(l,f,p){if(p===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function vO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function X8(l,f,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var A=$l(v.href),I=f.querySelector(Sc(A));if(I){f=I._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=Qh.bind(l),f.then(l,l)),p.state.loading|=4,p.instance=I,Lr(I);return}I=f.ownerDocument||f,v=pO(v),(A=di.get(A))&&Oy(v,A),I=I.createElement("link"),Lr(I);var M=I;M._p=new Promise(function(Y,he){M.onload=Y,M.onerror=he}),Hr(I,"link",v),p.instance=I}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Qh.bind(l),f.addEventListener("load",p),f.addEventListener("error",p))}}var Ly=0;function Q8(l,f){return l.stylesheets&&l.count===0&&Jh(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&Jh(l,l.stylesheets),l.unsuspend){var I=l.unsuspend;l.unsuspend=null,I()}},6e4+f);0<l.imgBytes&&Ly===0&&(Ly=62500*C8());var A=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Jh(l,l.stylesheets),l.unsuspend)){var I=l.unsuspend;l.unsuspend=null,I()}},(l.imgBytes>Ly?50:800)+f);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(A)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Zh=null;function Jh(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Zh=new Map,f.forEach(Z8,l),Zh=null,Qh.call(l))}function Z8(l,f){if(!(f.state.loading&4)){var p=Zh.get(l);if(p)var v=p.get(null);else{p=new Map,Zh.set(l,p);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<A.length;I++){var M=A[I];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(p.set(M.dataset.precedence,M),v=M)}v&&p.set(null,v)}A=f.instance,M=A.getAttribute("data-precedence"),I=p.get(M)||v,I===v&&p.set(null,A),p.set(M,A),this.count++,v=Qh.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),I?I.parentNode.insertBefore(A,I.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),f.state.loading|=4}}var Ec={$$typeof:T,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function J8(l,f,p,v,A,I,M,Y,he){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.hiddenUpdates=hs(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=I,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function bO(l,f,p,v,A,I,M,Y,he,we,Fe,He){return l=new J8(l,f,p,M,he,we,Fe,He,Y),f=1,I===!0&&(f|=24),I=Fn(3,null,null,f),l.current=I,I.stateNode=l,f=u0(),f.refCount++,l.pooledCache=f,f.refCount++,I.memoizedState={element:v,isDehydrated:p,cache:f},d0(I),l}function SO(l){return l?(l=bl,l):bl}function xO(l,f,p,v,A,I){A=SO(A),v.context===null?v.context=A:v.pendingContext=A,v=Ea(f),v.payload={element:p},I=I===void 0?null:I,I!==null&&(v.callback=I),p=Ta(l,v,f),p!==null&&(On(p,l,f),ec(p,l,f))}function EO(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<f?p:f}}function Cy(l,f){EO(l,f),(l=l.alternate)&&EO(l,f)}function TO(l){if(l.tag===13||l.tag===31){var f=go(l,67108864);f!==null&&On(f,l,67108864),Cy(l,67108864)}}function AO(l){if(l.tag===13||l.tag===31){var f=Kn();f=Zt(f);var p=go(l,f);p!==null&&On(p,l,f),Cy(l,f)}}var ed=!0;function e6(l,f,p,v){var A=H.T;H.T=null;var I=K.p;try{K.p=2,Py(l,f,p,v)}finally{K.p=I,H.T=A}}function t6(l,f,p,v){var A=H.T;H.T=null;var I=K.p;try{K.p=8,Py(l,f,p,v)}finally{K.p=I,H.T=A}}function Py(l,f,p,v){if(ed){var A=Dy(v);if(A===null)vy(l,f,v,td,p),wO(l,v);else if(n6(A,l,f,p,v))v.stopPropagation();else if(wO(l,v),f&4&&-1<r6.indexOf(l)){for(;A!==null;){var I=ll(A);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var M=vn(I.pendingLanes);if(M!==0){var Y=I;for(Y.pendingLanes|=2,Y.entangledLanes|=2;M;){var he=1<<31-Xe(M);Y.entanglements[1]|=he,M&=~he}Gi(I),(wt&6)===0&&(Bh=Ie()+500,mc(0))}}break;case 31:case 13:Y=go(I,2),Y!==null&&On(Y,I,2),jh(),Cy(I,2)}if(I=Dy(v),I===null&&vy(l,f,v,td,p),I===A)break;A=I}A!==null&&v.stopPropagation()}else vy(l,f,v,null,p)}}function Dy(l){return l=Mm(l),ky(l)}var td=null;function ky(l){if(td=null,l=ol(l),l!==null){var f=s(l);if(f===null)l=null;else{var p=f.tag;if(p===13){if(l=a(f),l!==null)return l;l=null}else if(p===31){if(l=o(f),l!==null)return l;l=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return td=l,null}function _O(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case L:return 2;case D:return 8;case G:case fe:return 32;case ve:return 268435456;default:return 32}default:return 32}}var My=!1,ka=null,Ma=null,Na=null,Tc=new Map,Ac=new Map,Ba=[],r6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wO(l,f){switch(l){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":Tc.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(f.pointerId)}}function _c(l,f,p,v,A,I){return l===null||l.nativeEvent!==I?(l={blockedOn:f,domEventName:p,eventSystemFlags:v,nativeEvent:I,targetContainers:[A]},f!==null&&(f=ll(f),f!==null&&TO(f)),l):(l.eventSystemFlags|=v,f=l.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),l)}function n6(l,f,p,v,A){switch(f){case"focusin":return ka=_c(ka,l,f,p,v,A),!0;case"dragenter":return Ma=_c(Ma,l,f,p,v,A),!0;case"mouseover":return Na=_c(Na,l,f,p,v,A),!0;case"pointerover":var I=A.pointerId;return Tc.set(I,_c(Tc.get(I)||null,l,f,p,v,A)),!0;case"gotpointercapture":return I=A.pointerId,Ac.set(I,_c(Ac.get(I)||null,l,f,p,v,A)),!0}return!1}function IO(l){var f=ol(l.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=a(p),f!==null){l.blockedOn=f,ga(l.priority,function(){AO(p)});return}}else if(f===31){if(f=o(p),f!==null){l.blockedOn=f,ga(l.priority,function(){AO(p)});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function rd(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var p=Dy(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);km=v,p.target.dispatchEvent(v),km=null}else return f=ll(p),f!==null&&TO(f),l.blockedOn=p,!1;f.shift()}return!0}function OO(l,f,p){rd(l)&&p.delete(f)}function i6(){My=!1,ka!==null&&rd(ka)&&(ka=null),Ma!==null&&rd(Ma)&&(Ma=null),Na!==null&&rd(Na)&&(Na=null),Tc.forEach(OO),Ac.forEach(OO)}function nd(l,f){l.blockedOn===f&&(l.blockedOn=null,My||(My=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,i6)))}var id=null;function RO(l){id!==l&&(id=l,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){id===l&&(id=null);for(var f=0;f<l.length;f+=3){var p=l[f],v=l[f+1],A=l[f+2];if(typeof v!="function"){if(ky(v||p)===null)continue;break}var I=ll(p);I!==null&&(l.splice(f,3),f-=3,D0(I,{pending:!0,data:A,method:p.method,action:v},v,A))}}))}function zl(l){function f(he){return nd(he,l)}ka!==null&&nd(ka,l),Ma!==null&&nd(Ma,l),Na!==null&&nd(Na,l),Tc.forEach(f),Ac.forEach(f);for(var p=0;p<Ba.length;p++){var v=Ba[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Ba.length&&(p=Ba[0],p.blockedOn===null);)IO(p),p.blockedOn===null&&Ba.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var A=p[v],I=p[v+1],M=A[xr]||null;if(typeof I=="function")M||RO(p);else if(M){var Y=null;if(I&&I.hasAttribute("formAction")){if(A=I,M=I[xr]||null)Y=M.formAction;else if(ky(A)!==null)continue}else Y=M.action;typeof Y=="function"?p[v+1]=Y:(p.splice(v,3),v-=3),RO(p)}}}function LO(){function l(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(M){return A=M})},focusReset:"manual",scroll:"manual"})}function f(){A!==null&&(A(),A=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,A=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),A!==null&&(A(),A=null)}}}function Ny(l){this._internalRoot=l}sd.prototype.render=Ny.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,v=Kn();xO(p,v,l,f,null,null)},sd.prototype.unmount=Ny.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;xO(l.current,2,null,l,null,null),jh(),f[xn]=null}};function sd(l){this._internalRoot=l}sd.prototype.unstable_scheduleHydration=function(l){if(l){var f=bn();l={blockedOn:null,target:l,priority:f};for(var p=0;p<Ba.length&&f!==0&&f<Ba[p].priority;p++);Ba.splice(p,0,l),p===0&&IO(l)}};var CO=e.version;if(CO!=="19.2.0")throw Error(n(527,CO,"19.2.0"));K.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=c(f),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var s6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{me=ad.inject(s6),Ae=ad}catch{}}return Ic.createRoot=function(l,f){if(!i(l))throw Error(n(299));var p=!1,v="",A=U1,I=j1,M=F1;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),f=bO(l,1,!1,null,null,p,v,null,A,I,M,LO),l[xn]=f.current,yy(l),new Ny(f)},Ic.hydrateRoot=function(l,f,p){if(!i(l))throw Error(n(299));var v=!1,A="",I=U1,M=j1,Y=F1,he=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(M=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.formState!==void 0&&(he=p.formState)),f=bO(l,1,!0,f,p??null,v,A,he,I,M,Y,LO),f.context=SO(null),p=f.current,v=Kn(),v=Zt(v),A=Ea(v),A.callback=null,Ta(p,A,v),p=v,f.current.lanes=p,ee(f,p),Gi(f),l[xn]=f.current,yy(l),new sd(f)},Ic.version="19.2.0",Ic}var $O;function y6(){if($O)return jy.exports;$O=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jy.exports=m6(),jy.exports}var v6=y6();var GO="popstate";function b6(r={}){function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return Zb("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Xc(i)}return x6(e,t,null,r)}function rr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Mi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S6(){return Math.random().toString(36).substring(2,10)}function zO(r,e){return{usr:r.state,key:r.key,idx:e}}function Zb(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Au(e):e,state:t,key:e&&e.key||n||S6()}}function Xc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Au(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function x6(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",u=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let b=h(),E=b==null?null:b-c;c=b,u&&u({action:o,location:S.location,delta:E})}function g(b,E){o="PUSH";let x=Zb(S.location,b,E);c=h()+1;let T=zO(x,c),w=S.createHref(x);try{a.pushState(T,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(w)}s&&u&&u({action:o,location:S.location,delta:1})}function m(b,E){o="REPLACE";let x=Zb(S.location,b,E);c=h();let T=zO(x,c),w=S.createHref(x);a.replaceState(T,"",w),s&&u&&u({action:o,location:S.location,delta:0})}function y(b){return E6(b)}let S={get action(){return o},get location(){return r(i,a)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(GO,d),u=b,()=>{i.removeEventListener(GO,d),u=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let E=y(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:m,go(b){return a.go(b)}};return S}function E6(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),rr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Xc(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function PM(r,e,t="/"){return T6(r,e,t,!1)}function T6(r,e,t,n){let i=typeof e=="string"?Au(e):e,s=Ws(i.pathname||"/",t);if(s==null)return null;let a=DM(r);A6(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let c=M6(s);o=D6(a[u],c,n)}return o}function DM(r,e=[],t=[],n="",i=!1){let s=(a,o,u=i,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;rr(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let d=Ks([n,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(rr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),DM(a.children,e,g,d,u)),!(a.path==null&&!a.index)&&e.push({path:d,score:C6(d,a.index),routesMeta:g})};return r.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let u of kM(a.path))s(a,o,!0,u)}),e}function kM(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=kM(n.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>r.startsWith("/")&&u===""?"/":u)}function A6(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:P6(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var _6=/^:[\w-]+$/,w6=3,I6=2,O6=1,R6=10,L6=-2,HO=r=>r==="*";function C6(r,e){let t=r.split("/"),n=t.length;return t.some(HO)&&(n+=L6),e&&(n+=I6),t.filter(i=>!HO(i)).reduce((i,s)=>i+(_6.test(s)?w6:s===""?O6:R6),n)}function P6(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function D6(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let u=n[o],c=o===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Op({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!d&&c&&t&&!n[n.length-1].route.index&&(d=Op({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Ks([s,d.pathname]),pathnameBase:F6(Ks([s,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(s=Ks([s,d.pathnameBase]))}return a}function Op(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=k6(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:h,isOptional:d},g)=>{if(h==="*"){let y=o[g]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=o[g];return d&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:r}}function k6(r,e=!1,t=!0){Mi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function M6(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ws(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var N6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B6=r=>N6.test(r);function U6(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Au(r):r,s;if(t)if(B6(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Mi(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?s=KO(t.substring(1),"/"):s=KO(t,e)}else s=e;return{pathname:s,search:$6(n),hash:G6(i)}}function KO(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function zy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j6(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function MM(r){let e=j6(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function NM(r,e,t,n=!1){let i;typeof r=="string"?i=Au(r):(i={...r},rr(!i.pathname||!i.pathname.includes("?"),zy("?","pathname","search",i)),rr(!i.pathname||!i.pathname.includes("#"),zy("#","pathname","hash",i)),rr(!i.search||!i.search.includes("#"),zy("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),d-=1;i.pathname=g.join("/")}o=d>=0?e[d]:"/"}let u=U6(i,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var Ks=r=>r.join("/").replace(/\/\/+/g,"/"),F6=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$6=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,G6=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function z6(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BM=["POST","PUT","PATCH","DELETE"];new Set(BM);var H6=["GET",...BM];new Set(H6);var _u=P.createContext(null);_u.displayName="DataRouter";var Dg=P.createContext(null);Dg.displayName="DataRouterState";P.createContext(!1);var UM=P.createContext({isTransitioning:!1});UM.displayName="ViewTransition";var K6=P.createContext(new Map);K6.displayName="Fetchers";var q6=P.createContext(null);q6.displayName="Await";var cs=P.createContext(null);cs.displayName="Navigation";var Tf=P.createContext(null);Tf.displayName="Location";var ia=P.createContext({outlet:null,matches:[],isDataRoute:!1});ia.displayName="Route";var yT=P.createContext(null);yT.displayName="RouteError";function V6(r,{relative:e}={}){rr(Af(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=P.useContext(cs),{hash:i,pathname:s,search:a}=_f(r,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Ks([t,s])),n.createHref({pathname:o,search:a,hash:i})}function Af(){return P.useContext(Tf)!=null}function el(){return rr(Af(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Tf).location}var jM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FM(r){P.useContext(cs).static||P.useLayoutEffect(r)}function W6(){let{isDataRoute:r}=P.useContext(ia);return r?o5():Y6()}function Y6(){rr(Af(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(_u),{basename:e,navigator:t}=P.useContext(cs),{matches:n}=P.useContext(ia),{pathname:i}=el(),s=JSON.stringify(MM(n)),a=P.useRef(!1);return FM(()=>{a.current=!0}),P.useCallback((u,c={})=>{if(Mi(a.current,jM),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=NM(u,JSON.parse(s),i,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ks([e,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[e,t,s,i,r])}P.createContext(null);function _f(r,{relative:e}={}){let{matches:t}=P.useContext(ia),{pathname:n}=el(),i=JSON.stringify(MM(t));return P.useMemo(()=>NM(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function X6(r,e){return $M(r,e)}function $M(r,e,t,n,i){rr(Af(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(cs),{matches:a}=P.useContext(ia),o=a[a.length-1],u=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let x=d&&d.path||"";GM(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let g=el(),m;if(e){let x=typeof e=="string"?Au(e):e;rr(h==="/"||x.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=g;let y=m.pathname||"/",S=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=PM(r,{pathname:S});Mi(d||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Mi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=t5(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Ks([h,s.encodeLocation?s.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Ks([h,s.encodeLocation?s.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),a,t,n,i);return e&&E?P.createElement(Tf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},E):E}function Q6(){let r=a5(),e=z6(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,a)}var Z6=P.createElement(Q6,null),J6=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?P.createElement(ia.Provider,{value:this.props.routeContext},P.createElement(yT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function e5({routeContext:r,match:e,children:t}){let n=P.useContext(_u);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ia.Provider,{value:r},t)}function t5(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,a=t?.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);rr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,u=-1;if(t)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:g,errors:m}=t,y=d.route.loader&&!g.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){o=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let c=t&&n?(h,d)=>{n(h,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,g)=>{let m,y=!1,S=null,b=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||Z6,o&&(u<0&&g===0?(GM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):u===g&&(y=!0,b=d.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),x=()=>{let T;return m?T=S:y?T=b:d.route.Component?T=P.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,P.createElement(e5,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:T})};return t&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?P.createElement(J6,{location:t.location,revalidation:t.revalidation,component:S,error:m,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:c}):x()},null)}function vT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r5(r){let e=P.useContext(_u);return rr(e,vT(r)),e}function n5(r){let e=P.useContext(Dg);return rr(e,vT(r)),e}function i5(r){let e=P.useContext(ia);return rr(e,vT(r)),e}function bT(r){let e=i5(r),t=e.matches[e.matches.length-1];return rr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function s5(){return bT("useRouteId")}function a5(){let r=P.useContext(yT),e=n5("useRouteError"),t=bT("useRouteError");return r!==void 0?r:e.errors?.[t]}function o5(){let{router:r}=r5("useNavigate"),e=bT("useNavigate"),t=P.useRef(!1);return FM(()=>{t.current=!0}),P.useCallback(async(i,s={})=>{Mi(t.current,jM),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var qO={};function GM(r,e,t){!e&&!qO[r]&&(qO[r]=!0,Mi(!1,t))}P.memo(l5);function l5({routes:r,future:e,state:t,unstable_onError:n}){return $M(r,void 0,t,n,e)}function Jb(r){rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u5({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){rr(!Af(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Au(t));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:g="default"}=t,m=P.useMemo(()=>{let y=Ws(u,a);return y==null?null:{location:{pathname:y,search:c,hash:h,state:d,key:g},navigationType:n}},[a,u,c,h,d,g,n]);return Mi(m!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:P.createElement(cs.Provider,{value:o},P.createElement(Tf.Provider,{children:e,value:m}))}function c5({children:r,location:e}){return X6(eS(r),e)}function eS(r,e=[]){let t=[];return P.Children.forEach(r,(n,i)=>{if(!P.isValidElement(n))return;let s=[...e,i];if(n.type===P.Fragment){t.push.apply(t,eS(n.props.children,s));return}rr(n.type===Jb,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=eS(n.props.children,s)),t.push(a)}),t}var Gd="get",zd="application/x-www-form-urlencoded";function kg(r){return r!=null&&typeof r.tagName=="string"}function f5(r){return kg(r)&&r.tagName.toLowerCase()==="button"}function h5(r){return kg(r)&&r.tagName.toLowerCase()==="form"}function d5(r){return kg(r)&&r.tagName.toLowerCase()==="input"}function p5(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function g5(r,e){return r.button===0&&(!e||e==="_self")&&!p5(r)}var od=null;function m5(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var y5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hy(r){return r!=null&&!y5.has(r)?(Mi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):r}function v5(r,e){let t,n,i,s,a;if(h5(r)){let o=r.getAttribute("action");n=o?Ws(o,e):null,t=r.getAttribute("method")||Gd,i=Hy(r.getAttribute("enctype"))||zd,s=new FormData(r)}else if(f5(r)||d5(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||o.getAttribute("action");if(n=u?Ws(u,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Gd,i=Hy(r.getAttribute("formenctype"))||Hy(o.getAttribute("enctype"))||zd,s=new FormData(o,r),!m5()){let{name:c,type:h,value:d}=r;if(h==="image"){let g=c?`${c}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else c&&s.append(c,d)}}else{if(kg(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Gd,n=null,i=zd,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ST(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function b5(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ws(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function S5(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x5(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function E5(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await S5(s,t);return a.links?a.links():[]}return[]}));return w5(n.flat(1).filter(x5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function VO(r,e,t,n,i,s){let a=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,o=(u,c)=>t[c].pathname!==u.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,c)=>a(u,c)||o(u,c)):s==="data"?e.filter((u,c)=>{let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,c)||o(u,c))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function T5(r,e,{includeHydrateFallback:t}={}){return A5(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function A5(r){return[...new Set(r)]}function _5(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function w5(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(_5(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function zM(){let r=P.useContext(_u);return ST(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function I5(){let r=P.useContext(Dg);return ST(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var xT=P.createContext(void 0);xT.displayName="FrameworkContext";function HM(){let r=P.useContext(xT);return ST(r,"You must render this element inside a <HydratedRouter> element"),r}function O5(r,e){let t=P.useContext(xT),[n,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,g=P.useRef(null);P.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let S=E=>{E.forEach(x=>{a(x.isIntersecting)})},b=new IntersectionObserver(S,{threshold:.5});return g.current&&b.observe(g.current),()=>{b.disconnect()}}},[r]),P.useEffect(()=>{if(n){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[n]);let m=()=>{i(!0)},y=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,g,{}]:[s,g,{onFocus:Oc(o,m),onBlur:Oc(u,y),onMouseEnter:Oc(c,m),onMouseLeave:Oc(h,y),onTouchStart:Oc(d,m)}]:[!1,g,{}]}function Oc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function R5({page:r,...e}){let{router:t}=zM(),n=P.useMemo(()=>PM(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?P.createElement(C5,{page:r,matches:n,...e}):null}function L5(r){let{manifest:e,routeModules:t}=HM(),[n,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return E5(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function C5({page:r,matches:e,...t}){let n=el(),{manifest:i,routeModules:s}=HM(),{basename:a}=zM(),{loaderData:o,matches:u}=I5(),c=P.useMemo(()=>VO(r,e,u,i,n,"data"),[r,e,u,i,n]),h=P.useMemo(()=>VO(r,e,u,i,n,"assets"),[r,e,u,i,n]),d=P.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,S=!1;if(e.forEach(E=>{let x=i.routes[E.route.id];!x||!x.hasLoader||(!c.some(T=>T.route.id===E.route.id)&&E.route.id in o&&s[E.route.id]?.shouldRevalidate||x.hasClientLoader?S=!0:y.add(E.route.id))}),y.size===0)return[];let b=b5(r,a,"data");return S&&y.size>0&&b.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[b.pathname+b.search]},[a,o,n,i,c,e,r,s]),g=P.useMemo(()=>T5(h,i),[h,i]),m=L5(h);return P.createElement(P.Fragment,null,d.map(y=>P.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>P.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),m.map(({key:y,link:S})=>P.createElement("link",{key:y,nonce:t.nonce,...S})))}function P5(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var KM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KM&&(window.__reactRouterVersion="7.9.6")}catch{}function D5({basename:r,children:e,window:t}){let n=P.useRef();n.current==null&&(n.current=b6({window:t,v5Compat:!0}));let i=n.current,[s,a]=P.useState({action:i.action,location:i.location}),o=P.useCallback(u=>{P.startTransition(()=>a(u))},[a]);return P.useLayoutEffect(()=>i.listen(o),[i,o]),P.createElement(u5,{basename:r,children:e,location:s.location,navigationType:s.action,navigator:i})}var qM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VM=P.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:u,to:c,preventScrollReset:h,viewTransition:d,...g},m){let{basename:y}=P.useContext(cs),S=typeof c=="string"&&qM.test(c),b,E=!1;if(typeof c=="string"&&S&&(b=c,KM))try{let B=new URL(window.location.href),N=c.startsWith("//")?new URL(B.protocol+c):new URL(c),U=Ws(N.pathname,y);N.origin===B.origin&&U!=null?c=U+N.search+N.hash:E=!0}catch{Mi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=V6(c,{relative:i}),[T,w,_]=O5(n,g),R=B5(c,{replace:a,state:o,target:u,preventScrollReset:h,relative:i,viewTransition:d});function O(B){e&&e(B),B.defaultPrevented||R(B)}let C=P.createElement("a",{...g,..._,href:b||x,onClick:E||s?e:O,ref:P5(m,w),target:u,"data-discover":!S&&t==="render"?"true":void 0});return T&&!S?P.createElement(P.Fragment,null,C,P.createElement(R5,{page:x})):C});VM.displayName="Link";var k5=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:u,...c},h){let d=_f(a,{relative:c.relative}),g=el(),m=P.useContext(Dg),{navigator:y,basename:S}=P.useContext(cs),b=m!=null&&G5(d)&&o===!0,E=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,x=g.pathname,T=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(x=x.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&S&&(T=Ws(T,S)||T);const w=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let _=x===E||!i&&x.startsWith(E)&&x.charAt(w)==="/",R=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),O={isActive:_,isPending:R,isTransitioning:b},C=_?e:void 0,B;typeof n=="function"?B=n(O):B=[n,_?"active":null,R?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let N=typeof s=="function"?s(O):s;return P.createElement(VM,{...c,"aria-current":C,className:B,ref:h,style:N,to:a,viewTransition:o},typeof u=="function"?u(O):u)});k5.displayName="NavLink";var M5=P.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=Gd,action:o,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:d,...g},m)=>{let y=F5(),S=$5(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&qM.test(o),x=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let w=T.nativeEvent.submitter,_=w?.getAttribute("formmethod")||a;y(w||T.currentTarget,{fetcherKey:e,method:_,navigate:t,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return P.createElement("form",{ref:m,method:b,action:S,onSubmit:n?u:x,...g,"data-discover":!E&&r==="render"?"true":void 0})});M5.displayName="Form";function N5(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WM(r){let e=P.useContext(_u);return rr(e,N5(r)),e}function B5(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=W6(),u=el(),c=_f(r,{relative:s});return P.useCallback(h=>{if(g5(h,e)){h.preventDefault();let d=t!==void 0?t:Xc(u)===Xc(c);o(r,{replace:d,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[u,o,c,t,n,e,r,i,s,a])}var U5=0,j5=()=>`__${String(++U5)}__`;function F5(){let{router:r}=WM("useSubmit"),{basename:e}=P.useContext(cs),t=s5();return P.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:u,body:c}=v5(n,e);if(i.navigate===!1){let h=i.fetcherKey||j5();await r.fetch(h,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function $5(r,{relative:e}={}){let{basename:t}=P.useContext(cs),n=P.useContext(ia);rr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={..._f(r||".",{relative:e})},a=el();if(r==null){s.search=a.search;let o=new URLSearchParams(s.search),u=o.getAll("index");if(u.some(h=>h==="")){o.delete("index"),u.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ks([t,s.pathname])),Xc(s)}function G5(r,{relative:e}={}){let t=P.useContext(UM);rr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=WM("useViewTransitionState"),i=_f(r,{relative:e});if(!t.isTransitioning)return!1;let s=Ws(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Ws(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Op(i.pathname,a)!=null||Op(i.pathname,s)!=null}var ET=CM();function z5({connectionState:r}){const[e,t]=P.useState(new Date);P.useEffect(()=>{const i=setInterval(()=>{t(new Date)},5e3);return()=>clearInterval(i)},[]);const n=()=>{switch(r){case"connected":return z.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-farm-100 text-farm-700 text-xs font-medium",children:[z.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-farm-500"}),"Connected"]});case"connecting":return z.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-medium",children:[z.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Connecting"]});case"disconnected":return z.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[z.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Disconnected"]});case"error":return z.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[z.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Error"]})}};return z.jsx("header",{className:"bg-farm-500 shadow-lg flex-shrink-0",children:z.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 py-3",children:z.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[z.jsxs("div",{className:"flex items-center gap-3",children:[z.jsx("div",{className:"text-lg font-bold text-gray-900",children:" | Tansaeng SmartFarm"}),z.jsxs("div",{className:"flex items-center gap-2",children:[z.jsx("a",{href:"/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""}),z.jsx("a",{href:"/admin/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""})]})]}),z.jsx("div",{className:"text-sm font-medium text-gray-800",children:e.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),z.jsx("div",{className:"flex items-center gap-2",children:n()})]})})})}const H5=[{id:"devices",label:" ",icon:""},{id:"mist",label:"",icon:""},{id:"environment",label:" ",icon:""},{id:"cameras",label:"",icon:""},{id:"settings",label:"",icon:""}];function K5({activeTab:r,onTabChange:e}){return z.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:z.jsx("div",{className:"max-w-screen-2xl mx-auto px-2 sm:px-4",children:z.jsx("div",{className:"flex justify-start sm:justify-center gap-1 overflow-x-auto scrollbar-hide",children:H5.map(t=>z.jsxs("button",{onClick:()=>e(t.id),className:`
                flex items-center gap-1.5 px-3 sm:px-4 py-3 text-xs sm:text-sm font-medium
                transition-all duration-200 whitespace-nowrap border-b-2 flex-shrink-0
                ${r===t.id?"border-farm-500 bg-farm-50 text-farm-700":"border-transparent text-gray-500 hover:bg-gray-50 hover:text-farm-700"}
              `,children:[z.jsx("span",{className:"text-base sm:text-lg",children:t.icon}),z.jsx("span",{className:"hidden xs:inline sm:inline",children:t.label})]},t.id))})})})}const tS=[{id:"fan_front",name:" ",type:"fan",esp32Id:"ctlr-0001",commandTopic:"tansaeng/ctlr-0001/fan1/cmd",stateTopic:"tansaeng/ctlr-0001/fan1/state"},{id:"fan_back",name:" ",type:"fan",esp32Id:"ctlr-0002",commandTopic:"tansaeng/ctlr-0002/fan2/cmd",stateTopic:"tansaeng/ctlr-0002/fan2/state"},{id:"fan_top",name:"",type:"fan",esp32Id:"esp32-node-1",commandTopic:"tansaeng/esp32-node-1/fan_top/cmd",stateTopic:"tansaeng/esp32-node-1/fan_top/state"},{id:"vent_side_left",name:" Left",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_side_left/cmd",stateTopic:"tansaeng/esp32-node-2/vent_side_left/state",extra:{supportsPercentage:!0}},{id:"vent_side_right",name:" Right",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_side_right/cmd",stateTopic:"tansaeng/esp32-node-2/vent_side_right/state",extra:{supportsPercentage:!0}},{id:"vent_top_left",name:" Left",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_top_left/cmd",stateTopic:"tansaeng/esp32-node-2/vent_top_left/state",extra:{supportsPercentage:!0}},{id:"vent_top_right",name:" Right",type:"vent",esp32Id:"esp32-node-2",commandTopic:"tansaeng/esp32-node-2/vent_top_right/cmd",stateTopic:"tansaeng/esp32-node-2/vent_top_right/state",extra:{supportsPercentage:!0}},{id:"pump_nutrient_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/state"},{id:"pump_water_curtain",name:"",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_water_curtain/cmd",stateTopic:"tansaeng/esp32-node-3/pump_water_curtain/state"},{id:"pump_heating_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_heating_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_heating_fill/state"}];function Ky(r){return tS.filter(e=>e.type===r)}const Xi=[{id:"esp32-in-fan-front",name:" ",controllerId:"ctlr-0001",statusTopic:"tansaeng/ctlr-0001/status"},{id:"esp32-in-fan-back",name:" ",controllerId:"ctlr-0002",statusTopic:"tansaeng/ctlr-0002/status"},{id:"esp32-in-top",name:" ",controllerId:"ctlr-0003",statusTopic:"tansaeng/ctlr-0003/status"},{id:"esp32-in-main-val",name:" ",controllerId:"ctlr-0004",statusTopic:"tansaeng/ctlr-0004/status"},{id:"esp32-in-line-val",name:" ",controllerId:"ctlr-0005",statusTopic:"tansaeng/ctlr-0005/status"},{id:"esp32-out-pressur-pump",name:" ",controllerId:"ctlr-0006",statusTopic:"tansaeng/ctlr-0006/status"},{id:"esp32-out-insert-pump",name:" ",controllerId:"ctlr-0007",statusTopic:"tansaeng/ctlr-0007/status"},{id:"esp32-out-hit-pump-val",name:" ",controllerId:"ctlr-0008",statusTopic:"tansaeng/ctlr-0008/status"},{id:"esp32-out-chiller-pump",name:" ",controllerId:"ctlr-0009",statusTopic:"tansaeng/ctlr-0009/status"},{id:"esp32-in-chil-hit-pump",name:"/  ",controllerId:"ctlr-0010",statusTopic:"tansaeng/ctlr-0010/status"},{id:"esp32-out-top-side-screen",name:"/ ",controllerId:"ctlr-0011",statusTopic:"tansaeng/ctlr-0011/status"},{id:"esp32-out-top-chillerline-pump-valve",name:"   ",controllerId:"ctlr-0012",statusTopic:"tansaeng/ctlr-0012/status"}];function qy({device:r,power:e,percentage:t,lastSavedAt:n,onToggle:i,onPercentageChange:s}){const a=e==="on",o=()=>r.type==="fan"?"":r.type==="vent"?"":r.type==="pump"?"":"";return z.jsxs("div",{className:"bg-white rounded-lg shadow-card hover:shadow-card-hover transition-all duration-200 p-3 border border-gray-200",children:[z.jsxs("div",{className:"flex items-center justify-between mb-2",children:[z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx("div",{className:"text-2xl",children:o()}),z.jsxs("div",{children:[z.jsx("h3",{className:"text-sm font-bold text-gray-800 m-0",children:r.name}),z.jsx("p",{className:"text-2xs text-gray-500 m-0",children:r.type==="fan"?"":r.type==="vent"?"":""})]})]}),!r.extra?.supportsPercentage&&z.jsxs("div",{className:"flex flex-col items-end gap-1",children:[z.jsx("button",{onClick:()=>i?.(!a),className:`
                relative inline-flex h-9 w-18 cursor-pointer rounded-full
                border-2 border-transparent transition-all duration-300
                ${a?"bg-farm-500":"bg-gray-300"}
              `,role:"switch","aria-checked":a,children:z.jsx("span",{className:`
                flex items-center justify-center h-8 w-8 rounded-full
                bg-white shadow-md transition-transform duration-300
                ${a?"translate-x-9":"translate-x-0"}
              `,children:a?z.jsx("svg",{className:"w-4 h-4 text-farm-500",fill:"currentColor",viewBox:"0 0 20 20",children:z.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):z.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:z.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),z.jsx("span",{className:`text-xs font-semibold ${a?"text-farm-500":"text-gray-500"}`,children:a?"ON":"OFF"})]})]}),r.extra?.supportsPercentage&&z.jsxs("div",{className:"mb-3",children:[z.jsxs("div",{className:"flex items-center justify-between mb-2",children:[z.jsx("span",{className:"text-xs font-medium text-gray-600",children:" "}),z.jsxs("span",{className:"text-2xl font-bold text-farm-500",children:[t??0,"%"]})]}),z.jsx("input",{type:"range",min:"0",max:"100",value:t??0,onChange:u=>s?.(Number(u.target.value)),className:"slider-thumb w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${t??0}%, #e5e7eb ${t??0}%, #e5e7eb 100%)`}}),z.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[z.jsx("span",{children:""}),z.jsx("span",{children:""})]})]}),z.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx("div",{className:`
            w-1.5 h-1.5 rounded-full
            ${a?"bg-farm-500 animate-pulse":"bg-gray-400"}
          `}),z.jsx("span",{className:`
            text-2xs font-semibold
            ${a?"text-farm-700":"text-gray-600"}
          `,children:a?" ":""})]}),z.jsx("div",{className:"text-2xs text-gray-400",children:n?new Date(n).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]})]})}var TT=Object.defineProperty,q5=Object.getOwnPropertyDescriptor,V5=Object.getOwnPropertyNames,W5=Object.prototype.hasOwnProperty,Mn=(r,e)=>()=>(r&&(e=r(r=0)),e),$e=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),wu=(r,e)=>{for(var t in e)TT(r,t,{get:e[t],enumerable:!0})},Y5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of V5(e))!W5.call(r,i)&&i!==t&&TT(r,i,{get:()=>e[i],enumerable:!(n=q5(e,i))||n.enumerable});return r},Nt=r=>Y5(TT({},"__esModule",{value:!0}),r),Me=Mn(()=>{}),zt={};wu(zt,{_debugEnd:()=>MS,_debugProcess:()=>kS,_events:()=>XS,_eventsCount:()=>QS,_exiting:()=>SS,_fatalExceptions:()=>CS,_getActiveHandles:()=>tN,_getActiveRequests:()=>eN,_kill:()=>TS,_linkedBinding:()=>ZM,_maxListeners:()=>YS,_preload_modules:()=>VS,_rawDebug:()=>yS,_startProfilerIdleNotifier:()=>NS,_stopProfilerIdleNotifier:()=>BS,_tickCallback:()=>DS,abort:()=>$S,addListener:()=>ZS,allowedNodeEnvironmentFlags:()=>RS,arch:()=>nS,argv:()=>aS,argv0:()=>qS,assert:()=>rN,binding:()=>fS,browser:()=>mS,chdir:()=>pS,config:()=>xS,cpuUsage:()=>Bc,cwd:()=>dS,debugPort:()=>KS,default:()=>_T,dlopen:()=>JM,domain:()=>bS,emit:()=>nx,emitWarning:()=>cS,env:()=>sS,execArgv:()=>oS,execPath:()=>HS,exit:()=>IS,features:()=>LS,hasUncaughtExceptionCaptureCallback:()=>nN,hrtime:()=>Hd,kill:()=>wS,listeners:()=>sN,memoryUsage:()=>_S,moduleLoadList:()=>vS,nextTick:()=>XM,off:()=>ex,on:()=>ks,once:()=>JS,openStdin:()=>OS,pid:()=>GS,platform:()=>iS,ppid:()=>zS,prependListener:()=>ix,prependOnceListener:()=>sx,reallyExit:()=>ES,release:()=>gS,removeAllListeners:()=>rx,removeListener:()=>tx,resourceUsage:()=>AS,setSourceMapsEnabled:()=>WS,setUncaughtExceptionCaptureCallback:()=>PS,stderr:()=>jS,stdin:()=>FS,stdout:()=>US,title:()=>rS,umask:()=>hS,uptime:()=>iN,version:()=>lS,versions:()=>uS});function AT(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function X5(){!$o||!No||($o=!1,No.length?Qi=No.concat(Qi):Hc=-1,Qi.length&&YM())}function YM(){if(!$o){var r=setTimeout(X5,0);$o=!0;for(var e=Qi.length;e;){for(No=Qi,Qi=[];++Hc<e;)No&&No[Hc].run();Hc=-1,e=Qi.length}No=null,$o=!1,clearTimeout(r)}}function XM(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Qi.push(new QM(r,e)),Qi.length===1&&!$o&&setTimeout(YM,0)}function QM(r,e){this.fun=r,this.array=e}function Zr(){}function ZM(r){AT("_linkedBinding")}function JM(r){AT("dlopen")}function eN(){return[]}function tN(){return[]}function rN(r,e){if(!r)throw new Error(e||"assertion error")}function nN(){return!1}function iN(){return Us.now()/1e3}function Hd(r){var e=Math.floor((Date.now()-Us.now())*.001),t=Us.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=Kd)),[n,i]}function ks(){return _T}function sN(r){return[]}var Qi,$o,No,Hc,rS,nS,iS,sS,aS,oS,lS,uS,cS,fS,hS,dS,pS,gS,mS,yS,vS,bS,SS,xS,ES,TS,Bc,AS,_S,wS,IS,OS,RS,LS,CS,PS,DS,kS,MS,NS,BS,US,jS,FS,$S,GS,zS,HS,KS,qS,VS,WS,Us,Vy,Kd,YS,XS,QS,ZS,JS,ex,tx,rx,nx,ix,sx,_T,Q5=Mn(()=>{Me(),Be(),Ne(),Qi=[],$o=!1,Hc=-1,QM.prototype.run=function(){this.fun.apply(null,this.array)},rS="browser",nS="x64",iS="browser",sS={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},aS=["/usr/bin/node"],oS=[],lS="v16.8.0",uS={},cS=function(r,e){console.warn((e?e+": ":"")+r)},fS=function(r){AT("binding")},hS=function(r){return 0},dS=function(){return"/"},pS=function(r){},gS={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},mS=!0,yS=Zr,vS=[],bS={},SS=!1,xS={},ES=Zr,TS=Zr,Bc=function(){return{}},AS=Bc,_S=Bc,wS=Zr,IS=Zr,OS=Zr,RS={},LS={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},CS=Zr,PS=Zr,DS=Zr,kS=Zr,MS=Zr,NS=Zr,BS=Zr,US=void 0,jS=void 0,FS=void 0,$S=Zr,GS=2,zS=1,HS="/bin/usr/node",KS=9229,qS="node",VS=[],WS=Zr,Us={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Us.now===void 0&&(Vy=Date.now(),Us.timing&&Us.timing.navigationStart&&(Vy=Us.timing.navigationStart),Us.now=()=>Date.now()-Vy),Kd=1e9,Hd.bigint=function(r){var e=Hd(r);return typeof BigInt>"u"?e[0]*Kd+e[1]:BigInt(e[0]*Kd)+BigInt(e[1])},YS=10,XS={},QS=0,ZS=ks,JS=ks,ex=ks,tx=ks,rx=ks,nx=Zr,ix=ks,sx=ks,_T={version:lS,versions:uS,arch:nS,platform:iS,browser:mS,release:gS,_rawDebug:yS,moduleLoadList:vS,binding:fS,_linkedBinding:ZM,_events:XS,_eventsCount:QS,_maxListeners:YS,on:ks,addListener:ZS,once:JS,off:ex,removeListener:tx,removeAllListeners:rx,emit:nx,prependListener:ix,prependOnceListener:sx,listeners:sN,domain:bS,_exiting:SS,config:xS,dlopen:JM,uptime:iN,_getActiveRequests:eN,_getActiveHandles:tN,reallyExit:ES,_kill:TS,cpuUsage:Bc,resourceUsage:AS,memoryUsage:_S,kill:wS,exit:IS,openStdin:OS,allowedNodeEnvironmentFlags:RS,assert:rN,features:LS,_fatalExceptions:CS,setUncaughtExceptionCaptureCallback:PS,hasUncaughtExceptionCaptureCallback:nN,emitWarning:cS,nextTick:XM,_tickCallback:DS,_debugProcess:kS,_debugEnd:MS,_startProfilerIdleNotifier:NS,_stopProfilerIdleNotifier:BS,stdout:US,stdin:FS,stderr:jS,abort:$S,umask:hS,chdir:pS,cwd:dS,env:sS,title:rS,argv:aS,execArgv:oS,pid:GS,ppid:zS,execPath:HS,debugPort:KS,hrtime:Hd,argv0:qS,_preload_modules:VS,setSourceMapsEnabled:WS}}),Ne=Mn(()=>{Q5()});function Z5(){if(ax)return Zl;ax=!0,Zl.byteLength=o,Zl.toByteArray=c,Zl.fromByteArray=g;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(m){var y=m.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=m.indexOf("=");S===-1&&(S=y);var b=S===y?0:4-S%4;return[S,b]}function o(m){var y=a(m),S=y[0],b=y[1];return(S+b)*3/4-b}function u(m,y,S){return(y+S)*3/4-S}function c(m){var y,S=a(m),b=S[0],E=S[1],x=new t(u(m,b,E)),T=0,w=E>0?b-4:b,_;for(_=0;_<w;_+=4)y=e[m.charCodeAt(_)]<<18|e[m.charCodeAt(_+1)]<<12|e[m.charCodeAt(_+2)]<<6|e[m.charCodeAt(_+3)],x[T++]=y>>16&255,x[T++]=y>>8&255,x[T++]=y&255;return E===2&&(y=e[m.charCodeAt(_)]<<2|e[m.charCodeAt(_+1)]>>4,x[T++]=y&255),E===1&&(y=e[m.charCodeAt(_)]<<10|e[m.charCodeAt(_+1)]<<4|e[m.charCodeAt(_+2)]>>2,x[T++]=y>>8&255,x[T++]=y&255),x}function h(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function d(m,y,S){for(var b,E=[],x=y;x<S;x+=3)b=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),E.push(h(b));return E.join("")}function g(m){for(var y,S=m.length,b=S%3,E=[],x=16383,T=0,w=S-b;T<w;T+=x)E.push(d(m,T,T+x>w?w:T+x));return b===1?(y=m[S-1],E.push(r[y>>2]+r[y<<4&63]+"==")):b===2&&(y=(m[S-2]<<8)+m[S-1],E.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),E.join("")}return Zl}function J5(){return ox?Uc:(ox=!0,Uc.read=function(r,e,t,n,i){var s,a,o=i*8-n-1,u=(1<<o)-1,c=u>>1,h=-7,d=t?i-1:0,g=t?-1:1,m=r[e+d];for(d+=g,s=m&(1<<-h)-1,m>>=-h,h+=o;h>0;s=s*256+r[e+d],d+=g,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=n;h>0;a=a*256+r[e+d],d+=g,h-=8);if(s===0)s=1-c;else{if(s===u)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(m?-1:1)*a*Math.pow(2,s-n)},Uc.write=function(r,e,t,n,i,s){var a,o,u,c=s*8-i-1,h=(1<<c)-1,d=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,y=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?e+=g/u:e+=g*Math.pow(2,1-d),e*u>=2&&(a++,u/=2),a+d>=h?(o=0,a=h):a+d>=1?(o=(e*u-1)*Math.pow(2,i),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;r[t+m]=o&255,m+=y,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;r[t+m]=a&255,m+=y,a/=256,c-=8);r[t+m-y]|=S*128},Uc)}function eG(){if(lx)return Ga;lx=!0;let r=Z5(),e=J5(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ga.Buffer=a,Ga.SlowBuffer=E,Ga.INSPECT_MAX_BYTES=50;let n=2147483647;Ga.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let L=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(L,D),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');let D=new Uint8Array(L);return Object.setPrototypeOf(D,a.prototype),D}function a(L,D,G){if(typeof L=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(L)}return o(L,D,G)}a.poolSize=8192;function o(L,D,G){if(typeof L=="string")return d(L,D);if(ArrayBuffer.isView(L))return m(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(pe(L,ArrayBuffer)||L&&pe(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(L,SharedArrayBuffer)||L&&pe(L.buffer,SharedArrayBuffer)))return y(L,D,G);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let fe=L.valueOf&&L.valueOf();if(fe!=null&&fe!==L)return a.from(fe,D,G);let ve=S(L);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),D,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,D,G){return o(L,D,G)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function c(L,D,G){return u(L),L<=0?s(L):D!==void 0?typeof G=="string"?s(L).fill(D,G):s(L).fill(D):s(L)}a.alloc=function(L,D,G){return c(L,D,G)};function h(L){return u(L),s(L<0?0:b(L)|0)}a.allocUnsafe=function(L){return h(L)},a.allocUnsafeSlow=function(L){return h(L)};function d(L,D){if((typeof D!="string"||D==="")&&(D="utf8"),!a.isEncoding(D))throw new TypeError("Unknown encoding: "+D);let G=x(L,D)|0,fe=s(G),ve=fe.write(L,D);return ve!==G&&(fe=fe.slice(0,ve)),fe}function g(L){let D=L.length<0?0:b(L.length)|0,G=s(D);for(let fe=0;fe<D;fe+=1)G[fe]=L[fe]&255;return G}function m(L){if(pe(L,Uint8Array)){let D=new Uint8Array(L);return y(D.buffer,D.byteOffset,D.byteLength)}return g(L)}function y(L,D,G){if(D<0||L.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<D+(G||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return D===void 0&&G===void 0?fe=new Uint8Array(L):G===void 0?fe=new Uint8Array(L,D):fe=new Uint8Array(L,D,G),Object.setPrototypeOf(fe,a.prototype),fe}function S(L){if(a.isBuffer(L)){let D=b(L.length)|0,G=s(D);return G.length===0||L.copy(G,0,0,D),G}if(L.length!==void 0)return typeof L.length!="number"||Ue(L.length)?s(0):g(L);if(L.type==="Buffer"&&Array.isArray(L.data))return g(L.data)}function b(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function E(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,D){if(pe(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),pe(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(L)||!a.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;let G=L.length,fe=D.length;for(let ve=0,Pe=Math.min(G,fe);ve<Pe;++ve)if(L[ve]!==D[ve]){G=L[ve],fe=D[ve];break}return G<fe?-1:fe<G?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let G;if(D===void 0)for(D=0,G=0;G<L.length;++G)D+=L[G].length;let fe=a.allocUnsafe(D),ve=0;for(G=0;G<L.length;++G){let Pe=L[G];if(pe(Pe,Uint8Array))ve+Pe.length>fe.length?(a.isBuffer(Pe)||(Pe=a.from(Pe)),Pe.copy(fe,ve)):Uint8Array.prototype.set.call(fe,Pe,ve);else if(a.isBuffer(Pe))Pe.copy(fe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Pe.length}return fe};function x(L,D){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||pe(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);let G=L.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&G===0)return 0;let ve=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return se(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return Ce(L).length;default:if(ve)return fe?-1:se(L).length;D=(""+D).toLowerCase(),ve=!0}}a.byteLength=x;function T(L,D,G){let fe=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,D>>>=0,G<=D))return"";for(L||(L="utf8");;)switch(L){case"hex":return V(this,D,G);case"utf8":case"utf-8":return W(this,D,G);case"ascii":return H(this,D,G);case"latin1":case"binary":return K(this,D,G);case"base64":return k(this,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,D,G);default:if(fe)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),fe=!0}}a.prototype._isBuffer=!0;function w(L,D,G){let fe=L[D];L[D]=L[G],L[G]=fe}a.prototype.swap16=function(){let L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<L;D+=2)w(this,D,D+1);return this},a.prototype.swap32=function(){let L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<L;D+=4)w(this,D,D+3),w(this,D+1,D+2);return this},a.prototype.swap64=function(){let L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<L;D+=8)w(this,D,D+7),w(this,D+1,D+6),w(this,D+2,D+5),w(this,D+3,D+4);return this},a.prototype.toString=function(){let L=this.length;return L===0?"":arguments.length===0?W(this,0,L):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="",D=Ga.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},t&&(a.prototype[t]=a.prototype.inspect),a.prototype.compare=function(L,D,G,fe,ve){if(pe(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),G===void 0&&(G=L?L.length:0),fe===void 0&&(fe=0),ve===void 0&&(ve=this.length),D<0||G>L.length||fe<0||ve>this.length)throw new RangeError("out of range index");if(fe>=ve&&D>=G)return 0;if(fe>=ve)return-1;if(D>=G)return 1;if(D>>>=0,G>>>=0,fe>>>=0,ve>>>=0,this===L)return 0;let Pe=ve-fe,Ve=G-D,me=Math.min(Pe,Ve),Ae=this.slice(fe,ve),Je=L.slice(D,G);for(let Xe=0;Xe<me;++Xe)if(Ae[Xe]!==Je[Xe]){Pe=Ae[Xe],Ve=Je[Xe];break}return Pe<Ve?-1:Ve<Pe?1:0};function _(L,D,G,fe,ve){if(L.length===0)return-1;if(typeof G=="string"?(fe=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,Ue(G)&&(G=ve?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(ve)return-1;G=L.length-1}else if(G<0)if(ve)G=0;else return-1;if(typeof D=="string"&&(D=a.from(D,fe)),a.isBuffer(D))return D.length===0?-1:R(L,D,G,fe,ve);if(typeof D=="number")return D=D&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(L,D,G):Uint8Array.prototype.lastIndexOf.call(L,D,G):R(L,[D],G,fe,ve);throw new TypeError("val must be string, number or Buffer")}function R(L,D,G,fe,ve){let Pe=1,Ve=L.length,me=D.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(L.length<2||D.length<2)return-1;Pe=2,Ve/=2,me/=2,G/=2}function Ae(Xe,ct){return Pe===1?Xe[ct]:Xe.readUInt16BE(ct*Pe)}let Je;if(ve){let Xe=-1;for(Je=G;Je<Ve;Je++)if(Ae(L,Je)===Ae(D,Xe===-1?0:Je-Xe)){if(Xe===-1&&(Xe=Je),Je-Xe+1===me)return Xe*Pe}else Xe!==-1&&(Je-=Je-Xe),Xe=-1}else for(G+me>Ve&&(G=Ve-me),Je=G;Je>=0;Je--){let Xe=!0;for(let ct=0;ct<me;ct++)if(Ae(L,Je+ct)!==Ae(D,ct)){Xe=!1;break}if(Xe)return Je}return-1}a.prototype.includes=function(L,D,G){return this.indexOf(L,D,G)!==-1},a.prototype.indexOf=function(L,D,G){return _(this,L,D,G,!0)},a.prototype.lastIndexOf=function(L,D,G){return _(this,L,D,G,!1)};function O(L,D,G,fe){G=Number(G)||0;let ve=L.length-G;fe?(fe=Number(fe),fe>ve&&(fe=ve)):fe=ve;let Pe=D.length;fe>Pe/2&&(fe=Pe/2);let Ve;for(Ve=0;Ve<fe;++Ve){let me=parseInt(D.substr(Ve*2,2),16);if(Ue(me))return Ve;L[G+Ve]=me}return Ve}function C(L,D,G,fe){return je(se(D,L.length-G),L,G,fe)}function B(L,D,G,fe){return je(ye(D),L,G,fe)}function N(L,D,G,fe){return je(Ce(D),L,G,fe)}function U(L,D,G,fe){return je(Re(D,L.length-G),L,G,fe)}a.prototype.write=function(L,D,G,fe){if(D===void 0)fe="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")fe=D,G=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(G)?(G=G>>>0,fe===void 0&&(fe="utf8")):(fe=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let ve=this.length-D;if((G===void 0||G>ve)&&(G=ve),L.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let Pe=!1;for(;;)switch(fe){case"hex":return O(this,L,D,G);case"utf8":case"utf-8":return C(this,L,D,G);case"ascii":case"latin1":case"binary":return B(this,L,D,G);case"base64":return N(this,L,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,L,D,G);default:if(Pe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),Pe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(L,D,G){return D===0&&G===L.length?r.fromByteArray(L):r.fromByteArray(L.slice(D,G))}function W(L,D,G){G=Math.min(L.length,G);let fe=[],ve=D;for(;ve<G;){let Pe=L[ve],Ve=null,me=Pe>239?4:Pe>223?3:Pe>191?2:1;if(ve+me<=G){let Ae,Je,Xe,ct;switch(me){case 1:Pe<128&&(Ve=Pe);break;case 2:Ae=L[ve+1],(Ae&192)===128&&(ct=(Pe&31)<<6|Ae&63,ct>127&&(Ve=ct));break;case 3:Ae=L[ve+1],Je=L[ve+2],(Ae&192)===128&&(Je&192)===128&&(ct=(Pe&15)<<12|(Ae&63)<<6|Je&63,ct>2047&&(ct<55296||ct>57343)&&(Ve=ct));break;case 4:Ae=L[ve+1],Je=L[ve+2],Xe=L[ve+3],(Ae&192)===128&&(Je&192)===128&&(Xe&192)===128&&(ct=(Pe&15)<<18|(Ae&63)<<12|(Je&63)<<6|Xe&63,ct>65535&&ct<1114112&&(Ve=ct))}}Ve===null?(Ve=65533,me=1):Ve>65535&&(Ve-=65536,fe.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),fe.push(Ve),ve+=me}return X(fe)}let q=4096;function X(L){let D=L.length;if(D<=q)return String.fromCharCode.apply(String,L);let G="",fe=0;for(;fe<D;)G+=String.fromCharCode.apply(String,L.slice(fe,fe+=q));return G}function H(L,D,G){let fe="";G=Math.min(L.length,G);for(let ve=D;ve<G;++ve)fe+=String.fromCharCode(L[ve]&127);return fe}function K(L,D,G){let fe="";G=Math.min(L.length,G);for(let ve=D;ve<G;++ve)fe+=String.fromCharCode(L[ve]);return fe}function V(L,D,G){let fe=L.length;(!D||D<0)&&(D=0),(!G||G<0||G>fe)&&(G=fe);let ve="";for(let Pe=D;Pe<G;++Pe)ve+=Ke[L[Pe]];return ve}function J(L,D,G){let fe=L.slice(D,G),ve="";for(let Pe=0;Pe<fe.length-1;Pe+=2)ve+=String.fromCharCode(fe[Pe]+fe[Pe+1]*256);return ve}a.prototype.slice=function(L,D){let G=this.length;L=~~L,D=D===void 0?G:~~D,L<0?(L+=G,L<0&&(L=0)):L>G&&(L=G),D<0?(D+=G,D<0&&(D=0)):D>G&&(D=G),D<L&&(D=L);let fe=this.subarray(L,D);return Object.setPrototypeOf(fe,a.prototype),fe};function Q(L,D,G){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+D>G)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,D,G){L=L>>>0,D=D>>>0,G||Q(L,D,this.length);let fe=this[L],ve=1,Pe=0;for(;++Pe<D&&(ve*=256);)fe+=this[L+Pe]*ve;return fe},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,D,G){L=L>>>0,D=D>>>0,G||Q(L,D,this.length);let fe=this[L+--D],ve=1;for(;D>0&&(ve*=256);)fe+=this[L+--D]*ve;return fe},a.prototype.readUint8=a.prototype.readUInt8=function(L,D){return L=L>>>0,D||Q(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,D){return L=L>>>0,D||Q(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,D){return L=L>>>0,D||Q(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ie(function(L){L=L>>>0,ne(L,"offset");let D=this[L],G=this[L+7];(D===void 0||G===void 0)&&Le(L,this.length-8);let fe=D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,ve=this[++L]+this[++L]*2**8+this[++L]*2**16+G*2**24;return BigInt(fe)+(BigInt(ve)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ie(function(L){L=L>>>0,ne(L,"offset");let D=this[L],G=this[L+7];(D===void 0||G===void 0)&&Le(L,this.length-8);let fe=D*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],ve=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+G;return(BigInt(fe)<<BigInt(32))+BigInt(ve)}),a.prototype.readIntLE=function(L,D,G){L=L>>>0,D=D>>>0,G||Q(L,D,this.length);let fe=this[L],ve=1,Pe=0;for(;++Pe<D&&(ve*=256);)fe+=this[L+Pe]*ve;return ve*=128,fe>=ve&&(fe-=Math.pow(2,8*D)),fe},a.prototype.readIntBE=function(L,D,G){L=L>>>0,D=D>>>0,G||Q(L,D,this.length);let fe=D,ve=1,Pe=this[L+--fe];for(;fe>0&&(ve*=256);)Pe+=this[L+--fe]*ve;return ve*=128,Pe>=ve&&(Pe-=Math.pow(2,8*D)),Pe},a.prototype.readInt8=function(L,D){return L=L>>>0,D||Q(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,D){L=L>>>0,D||Q(L,2,this.length);let G=this[L]|this[L+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(L,D){L=L>>>0,D||Q(L,2,this.length);let G=this[L+1]|this[L]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ie(function(L){L=L>>>0,ne(L,"offset");let D=this[L],G=this[L+7];(D===void 0||G===void 0)&&Le(L,this.length-8);let fe=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(G<<24);return(BigInt(fe)<<BigInt(32))+BigInt(D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ie(function(L){L=L>>>0,ne(L,"offset");let D=this[L],G=this[L+7];(D===void 0||G===void 0)&&Le(L,this.length-8);let fe=(D<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(fe)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+G)}),a.prototype.readFloatLE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),e.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,D){return L=L>>>0,D||Q(L,4,this.length),e.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,D){return L=L>>>0,D||Q(L,8,this.length),e.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,D){return L=L>>>0,D||Q(L,8,this.length),e.read(this,L,!1,52,8)};function $(L,D,G,fe,ve,Pe){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>ve||D<Pe)throw new RangeError('"value" argument is out of bounds');if(G+fe>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,D,G,fe){if(L=+L,D=D>>>0,G=G>>>0,!fe){let Ve=Math.pow(2,8*G)-1;$(this,L,D,G,Ve,0)}let ve=1,Pe=0;for(this[D]=L&255;++Pe<G&&(ve*=256);)this[D+Pe]=L/ve&255;return D+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,D,G,fe){if(L=+L,D=D>>>0,G=G>>>0,!fe){let Ve=Math.pow(2,8*G)-1;$(this,L,D,G,Ve,0)}let ve=G-1,Pe=1;for(this[D+ve]=L&255;--ve>=0&&(Pe*=256);)this[D+ve]=L/Pe&255;return D+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,1,255,0),this[D]=L&255,D+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,2,65535,0),this[D]=L&255,this[D+1]=L>>>8,D+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=L&255,D+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=L&255,D+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4};function F(L,D,G,fe,ve){ce(D,fe,ve,L,G,7);let Pe=Number(D&BigInt(4294967295));L[G++]=Pe,Pe=Pe>>8,L[G++]=Pe,Pe=Pe>>8,L[G++]=Pe,Pe=Pe>>8,L[G++]=Pe;let Ve=Number(D>>BigInt(32)&BigInt(4294967295));return L[G++]=Ve,Ve=Ve>>8,L[G++]=Ve,Ve=Ve>>8,L[G++]=Ve,Ve=Ve>>8,L[G++]=Ve,G}function Z(L,D,G,fe,ve){ce(D,fe,ve,L,G,7);let Pe=Number(D&BigInt(4294967295));L[G+7]=Pe,Pe=Pe>>8,L[G+6]=Pe,Pe=Pe>>8,L[G+5]=Pe,Pe=Pe>>8,L[G+4]=Pe;let Ve=Number(D>>BigInt(32)&BigInt(4294967295));return L[G+3]=Ve,Ve=Ve>>8,L[G+2]=Ve,Ve=Ve>>8,L[G+1]=Ve,Ve=Ve>>8,L[G]=Ve,G+8}a.prototype.writeBigUInt64LE=Ie(function(L,D=0){return F(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ie(function(L,D=0){return Z(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,D,G,fe){if(L=+L,D=D>>>0,!fe){let me=Math.pow(2,8*G-1);$(this,L,D,G,me-1,-me)}let ve=0,Pe=1,Ve=0;for(this[D]=L&255;++ve<G&&(Pe*=256);)L<0&&Ve===0&&this[D+ve-1]!==0&&(Ve=1),this[D+ve]=(L/Pe>>0)-Ve&255;return D+G},a.prototype.writeIntBE=function(L,D,G,fe){if(L=+L,D=D>>>0,!fe){let me=Math.pow(2,8*G-1);$(this,L,D,G,me-1,-me)}let ve=G-1,Pe=1,Ve=0;for(this[D+ve]=L&255;--ve>=0&&(Pe*=256);)L<0&&Ve===0&&this[D+ve+1]!==0&&(Ve=1),this[D+ve]=(L/Pe>>0)-Ve&255;return D+G},a.prototype.writeInt8=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=L&255,D+1},a.prototype.writeInt16LE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,2,32767,-32768),this[D]=L&255,this[D+1]=L>>>8,D+2},a.prototype.writeInt16BE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=L&255,D+2},a.prototype.writeInt32LE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,4,2147483647,-2147483648),this[D]=L&255,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},a.prototype.writeInt32BE=function(L,D,G){return L=+L,D=D>>>0,G||$(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4},a.prototype.writeBigInt64LE=Ie(function(L,D=0){return F(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ie(function(L,D=0){return Z(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(L,D,G,fe,ve,Pe){if(G+fe>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function oe(L,D,G,fe,ve){return D=+D,G=G>>>0,ve||de(L,D,G,4),e.write(L,D,G,fe,23,4),G+4}a.prototype.writeFloatLE=function(L,D,G){return oe(this,L,D,!0,G)},a.prototype.writeFloatBE=function(L,D,G){return oe(this,L,D,!1,G)};function xe(L,D,G,fe,ve){return D=+D,G=G>>>0,ve||de(L,D,G,8),e.write(L,D,G,fe,52,8),G+8}a.prototype.writeDoubleLE=function(L,D,G){return xe(this,L,D,!0,G)},a.prototype.writeDoubleBE=function(L,D,G){return xe(this,L,D,!1,G)},a.prototype.copy=function(L,D,G,fe){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(G||(G=0),!fe&&fe!==0&&(fe=this.length),D>=L.length&&(D=L.length),D||(D=0),fe>0&&fe<G&&(fe=G),fe===G||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),L.length-D<fe-G&&(fe=L.length-D+G);let ve=fe-G;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,G,fe):Uint8Array.prototype.set.call(L,this.subarray(G,fe),D),ve},a.prototype.fill=function(L,D,G,fe){if(typeof L=="string"){if(typeof D=="string"?(fe=D,D=0,G=this.length):typeof G=="string"&&(fe=G,G=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!a.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(L.length===1){let Pe=L.charCodeAt(0);(fe==="utf8"&&Pe<128||fe==="latin1")&&(L=Pe)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;D=D>>>0,G=G===void 0?this.length:G>>>0,L||(L=0);let ve;if(typeof L=="number")for(ve=D;ve<G;++ve)this[ve]=L;else{let Pe=a.isBuffer(L)?L:a.from(L,fe),Ve=Pe.length;if(Ve===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ve=0;ve<G-D;++ve)this[ve+D]=Pe[ve%Ve]}return this};let ae={};function re(L,D,G){ae[L]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(L,D){return`The "${L}" argument must be of type number. Received type ${typeof D}`},TypeError),re("ERR_OUT_OF_RANGE",function(L,D,G){let fe=`The value of "${L}" is out of range.`,ve=G;return Number.isInteger(G)&&Math.abs(G)>2**32?ve=te(String(G)):typeof G=="bigint"&&(ve=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(ve=te(ve)),ve+="n"),fe+=` It must be ${D}. Received ${ve}`,fe},RangeError);function te(L){let D="",G=L.length,fe=L[0]==="-"?1:0;for(;G>=fe+4;G-=3)D=`_${L.slice(G-3,G)}${D}`;return`${L.slice(0,G)}${D}`}function le(L,D,G){ne(D,"offset"),(L[D]===void 0||L[D+G]===void 0)&&Le(D,L.length-(G+1))}function ce(L,D,G,fe,ve,Pe){if(L>G||L<D){let Ve=typeof D=="bigint"?"n":"",me;throw D===0||D===BigInt(0)?me=`>= 0${Ve} and < 2${Ve} ** ${(Pe+1)*8}${Ve}`:me=`>= -(2${Ve} ** ${(Pe+1)*8-1}${Ve}) and < 2 ** ${(Pe+1)*8-1}${Ve}`,new ae.ERR_OUT_OF_RANGE("value",me,L)}le(fe,ve,Pe)}function ne(L,D){if(typeof L!="number")throw new ae.ERR_INVALID_ARG_TYPE(D,"number",L)}function Le(L,D,G){throw Math.floor(L)!==L?(ne(L,G),new ae.ERR_OUT_OF_RANGE("offset","an integer",L)):D<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,L)}let Se=/[^+/0-9A-Za-z-_]/g;function ie(L){if(L=L.split("=")[0],L=L.trim().replace(Se,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function se(L,D){D=D||1/0;let G,fe=L.length,ve=null,Pe=[];for(let Ve=0;Ve<fe;++Ve){if(G=L.charCodeAt(Ve),G>55295&&G<57344){if(!ve){if(G>56319){(D-=3)>-1&&Pe.push(239,191,189);continue}else if(Ve+1===fe){(D-=3)>-1&&Pe.push(239,191,189);continue}ve=G;continue}if(G<56320){(D-=3)>-1&&Pe.push(239,191,189),ve=G;continue}G=(ve-55296<<10|G-56320)+65536}else ve&&(D-=3)>-1&&Pe.push(239,191,189);if(ve=null,G<128){if((D-=1)<0)break;Pe.push(G)}else if(G<2048){if((D-=2)<0)break;Pe.push(G>>6|192,G&63|128)}else if(G<65536){if((D-=3)<0)break;Pe.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((D-=4)<0)break;Pe.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return Pe}function ye(L){let D=[];for(let G=0;G<L.length;++G)D.push(L.charCodeAt(G)&255);return D}function Re(L,D){let G,fe,ve,Pe=[];for(let Ve=0;Ve<L.length&&!((D-=2)<0);++Ve)G=L.charCodeAt(Ve),fe=G>>8,ve=G%256,Pe.push(ve),Pe.push(fe);return Pe}function Ce(L){return r.toByteArray(ie(L))}function je(L,D,G,fe){let ve;for(ve=0;ve<fe&&!(ve+G>=D.length||ve>=L.length);++ve)D[ve+G]=L[ve];return ve}function pe(L,D){return L instanceof D||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===D.name}function Ue(L){return L!==L}let Ke=(function(){let L="0123456789abcdef",D=new Array(256);for(let G=0;G<16;++G){let fe=G*16;for(let ve=0;ve<16;++ve)D[fe+ve]=L[G]+L[ve]}return D})();function Ie(L){return typeof BigInt>"u"?lt:L}function lt(){throw new Error("BigInt not supported")}return Ga}var Zl,ax,Uc,ox,Ga,lx,tG=Mn(()=>{Me(),Be(),Ne(),Zl={},ax=!1,Uc={},ox=!1,Ga={},lx=!1}),Ur={};wu(Ur,{Buffer:()=>Rp,INSPECT_MAX_BYTES:()=>aN,default:()=>Ms,kMaxLength:()=>oN});var Ms,Rp,aN,oN,jr=Mn(()=>{Me(),Be(),Ne(),tG(),Ms=eG(),Ms.Buffer,Ms.SlowBuffer,Ms.INSPECT_MAX_BYTES,Ms.kMaxLength,Rp=Ms.Buffer,aN=Ms.INSPECT_MAX_BYTES,oN=Ms.kMaxLength}),Be=Mn(()=>{jr()}),nr=$e((r,e)=>{Me(),Be(),Ne();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let i="";for(let s=0;s<n.length;s++)i+=`    ${n[s].stack}
`;super(i),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,i){return n.includes(i)},ArrayPrototypeIndexOf(n,i){return n.indexOf(i)},ArrayPrototypeJoin(n,i){return n.join(i)},ArrayPrototypeMap(n,i){return n.map(i)},ArrayPrototypePop(n,i){return n.pop(i)},ArrayPrototypePush(n,i){return n.push(i)},ArrayPrototypeSlice(n,i,s){return n.slice(i,s)},Error,FunctionPrototypeCall(n,i,...s){return n.call(i,...s)},FunctionPrototypeSymbolHasInstance(n,i){return Function.prototype[Symbol.hasInstance].call(n,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,i){return Object.defineProperties(n,i)},ObjectDefineProperty(n,i,s){return Object.defineProperty(n,i,s)},ObjectGetOwnPropertyDescriptor(n,i){return Object.getOwnPropertyDescriptor(n,i)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,i){return Object.setPrototypeOf(n,i)},Promise,PromisePrototypeCatch(n,i){return n.catch(i)},PromisePrototypeThen(n,i,s){return n.then(i,s)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,i){return n.test(i)},SafeSet:Set,String,StringPrototypeSlice(n,i,s){return n.slice(i,s)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,i,s){return n.set(i,s)},Boolean,Uint8Array}}),lN=$e((r,e)=>{Me(),Be(),Ne(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[i,s]){let a=n.shift();return s==="f"?a.toFixed(6):s==="j"?JSON.stringify(a):s==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),mn=$e((r,e)=>{Me(),Be(),Ne();var{format:t,inspect:n}=lN(),{AggregateError:i}=nr(),s=globalThis.AggregateError||i,a=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",h={};function d(x,T){if(!x)throw new h.ERR_INTERNAL_ASSERTION(T)}function g(x){let T="",w=x.length,_=x[0]==="-"?1:0;for(;w>=_+4;w-=3)T=`_${x.slice(w-3,w)}${T}`;return`${x.slice(0,w)}${T}`}function m(x,T,w){if(typeof T=="function")return d(T.length<=w.length,`Code: ${x}; The provided arguments length (${w.length}) does not match the required ones (${T.length}).`),T(...w);let _=(T.match(/%[dfijoOs]/g)||[]).length;return d(_===w.length,`Code: ${x}; The provided arguments length (${w.length}) does not match the required ones (${_}).`),w.length===0?T:t(T,...w)}function y(x,T,w){w||(w=Error);class _ extends w{constructor(...O){super(m(x,T,O))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:w.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=x,_.prototype[a]=!0,h[x]=_}function S(x){let T=c+x.name;return Object.defineProperty(x,"name",{value:T}),x}function b(x,T){if(x&&T&&x!==T){if(Array.isArray(T.errors))return T.errors.push(x),T;let w=new s([T,x],T.message);return w.code=T.code,w}return x||T}var E=class extends Error{constructor(x="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",T);super(x,T),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(x,T,w)=>{d(typeof x=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let _="The ";x.endsWith(" argument")?_+=`${x} `:_+=`"${x}" ${x.includes(".")?"property":"argument"} `,_+="must be ";let R=[],O=[],C=[];for(let N of T)d(typeof N=="string","All expected entries have to be of type string"),o.includes(N)?R.push(N.toLowerCase()):u.test(N)?O.push(N):(d(N!=="object",'The value "object" should be written as "Object"'),C.push(N));if(O.length>0){let N=R.indexOf("object");N!==-1&&(R.splice(R,N,1),O.push("Object"))}if(R.length>0){switch(R.length){case 1:_+=`of type ${R[0]}`;break;case 2:_+=`one of type ${R[0]} or ${R[1]}`;break;default:{let N=R.pop();_+=`one of type ${R.join(", ")}, or ${N}`}}(O.length>0||C.length>0)&&(_+=" or ")}if(O.length>0){switch(O.length){case 1:_+=`an instance of ${O[0]}`;break;case 2:_+=`an instance of ${O[0]} or ${O[1]}`;break;default:{let N=O.pop();_+=`an instance of ${O.join(", ")}, or ${N}`}}C.length>0&&(_+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(_+="an "),_+=`${C[0]}`;break;case 2:_+=`one of ${C[0]} or ${C[1]}`;break;default:{let N=C.pop();_+=`one of ${C.join(", ")}, or ${N}`}}if(w==null)_+=`. Received ${w}`;else if(typeof w=="function"&&w.name)_+=`. Received function ${w.name}`;else if(typeof w=="object"){var B;if((B=w.constructor)!==null&&B!==void 0&&B.name)_+=`. Received an instance of ${w.constructor.name}`;else{let N=n(w,{depth:-1});_+=`. Received ${N}`}}else{let N=n(w,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),_+=`. Received type ${typeof w} (${N})`}return _},TypeError),y("ERR_INVALID_ARG_VALUE",(x,T,w="is invalid")=>{let _=n(T);return _.length>128&&(_=_.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${w}. Received ${_}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(x,T,w)=>{var _;let R=w!=null&&(_=w.constructor)!==null&&_!==void 0&&_.name?`instance of ${w.constructor.name}`:`type ${typeof w}`;return`Expected ${x} to be returned from the "${T}" function but got ${R}.`},TypeError),y("ERR_MISSING_ARGS",(...x)=>{d(x.length>0,"At least one arg needs to be specified");let T,w=x.length;switch(x=(Array.isArray(x)?x:[x]).map(_=>`"${_}"`).join(" or "),w){case 1:T+=`The ${x[0]} argument`;break;case 2:T+=`The ${x[0]} and ${x[1]} arguments`;break;default:{let _=x.pop();T+=`The ${x.join(", ")}, and ${_} arguments`}break}return`${T} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(x,T,w)=>{d(T,'Missing "range" argument');let _;if(Number.isInteger(w)&&Math.abs(w)>2**32)_=g(String(w));else if(typeof w=="bigint"){_=String(w);let R=BigInt(2)**BigInt(32);(w>R||w<-R)&&(_=g(_)),_+="n"}else _=n(w);return`The value of "${x}" is out of range. It must be ${T}. Received ${_}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:E,aggregateTwoErrors:S(b),hideStackFrames:S,codes:h}}),Qc=$e((r,e)=>{Me(),Be(),Ne();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t}),io={};wu(io,{EventEmitter:()=>uN,default:()=>Jl,defaultMaxListeners:()=>cN,init:()=>fN,listenerCount:()=>hN,on:()=>dN,once:()=>pN});function rG(){if(ux)return jc;ux=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(w,_,R){return Function.prototype.apply.call(w,_,R)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:t=function(w){return Object.getOwnPropertyNames(w)};function n(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(w){return w!==w};function s(){s.init.call(this)}jc=s,jc.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function u(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(w){for(var _=[],R=1;R<arguments.length;R++)_.push(arguments[R]);var O=w==="error",C=this._events;if(C!==void 0)O=O&&C.error===void 0;else if(!O)return!1;if(O){var B;if(_.length>0&&(B=_[0]),B instanceof Error)throw B;var N=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw N.context=B,N}var U=C[w];if(U===void 0)return!1;if(typeof U=="function")e(U,this,_);else for(var k=U.length,W=y(U,k),R=0;R<k;++R)e(W[R],this,_);return!0};function c(w,_,R,O){var C,B,N;if(o(R),B=w._events,B===void 0?(B=w._events=Object.create(null),w._eventsCount=0):(B.newListener!==void 0&&(w.emit("newListener",_,R.listener?R.listener:R),B=w._events),N=B[_]),N===void 0)N=B[_]=R,++w._eventsCount;else if(typeof N=="function"?N=B[_]=O?[R,N]:[N,R]:O?N.unshift(R):N.push(R),C=u(w),C>0&&N.length>C&&!N.warned){N.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=w,U.type=_,U.count=N.length,n(U)}return w}s.prototype.addListener=function(w,_){return c(this,w,_,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(w,_){return c(this,w,_,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(w,_,R){var O={fired:!1,wrapFn:void 0,target:w,type:_,listener:R},C=h.bind(O);return C.listener=R,O.wrapFn=C,C}s.prototype.once=function(w,_){return o(_),this.on(w,d(this,w,_)),this},s.prototype.prependOnceListener=function(w,_){return o(_),this.prependListener(w,d(this,w,_)),this},s.prototype.removeListener=function(w,_){var R,O,C,B,N;if(o(_),O=this._events,O===void 0)return this;if(R=O[w],R===void 0)return this;if(R===_||R.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete O[w],O.removeListener&&this.emit("removeListener",w,R.listener||_));else if(typeof R!="function"){for(C=-1,B=R.length-1;B>=0;B--)if(R[B]===_||R[B].listener===_){N=R[B].listener,C=B;break}if(C<0)return this;C===0?R.shift():S(R,C),R.length===1&&(O[w]=R[0]),O.removeListener!==void 0&&this.emit("removeListener",w,N||_)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(w){var _,R,O;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[w]),this;if(arguments.length===0){var C=Object.keys(R),B;for(O=0;O<C.length;++O)B=C[O],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=R[w],typeof _=="function")this.removeListener(w,_);else if(_!==void 0)for(O=_.length-1;O>=0;O--)this.removeListener(w,_[O]);return this};function g(w,_,R){var O=w._events;if(O===void 0)return[];var C=O[_];return C===void 0?[]:typeof C=="function"?R?[C.listener||C]:[C]:R?b(C):y(C,C.length)}s.prototype.listeners=function(w){return g(this,w,!0)},s.prototype.rawListeners=function(w){return g(this,w,!1)},s.listenerCount=function(w,_){return typeof w.listenerCount=="function"?w.listenerCount(_):m.call(w,_)},s.prototype.listenerCount=m;function m(w){var _=this._events;if(_!==void 0){var R=_[w];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(w,_){for(var R=new Array(_),O=0;O<_;++O)R[O]=w[O];return R}function S(w,_){for(;_+1<w.length;_++)w[_]=w[_+1];w.pop()}function b(w){for(var _=new Array(w.length),R=0;R<_.length;++R)_[R]=w[R].listener||w[R];return _}function E(w,_){return new Promise(function(R,O){function C(N){w.removeListener(_,B),O(N)}function B(){typeof w.removeListener=="function"&&w.removeListener("error",C),R([].slice.call(arguments))}T(w,_,B,{once:!0}),_!=="error"&&x(w,C,{once:!0})})}function x(w,_,R){typeof w.on=="function"&&T(w,"error",_,R)}function T(w,_,R,O){if(typeof w.on=="function")O.once?w.once(_,R):w.on(_,R);else if(typeof w.addEventListener=="function")w.addEventListener(_,function C(B){O.once&&w.removeEventListener(_,C),R(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return jc}var jc,ux,Jl,uN,cN,fN,hN,dN,pN,tl=Mn(()=>{Me(),Be(),Ne(),jc={},ux=!1,Jl=rG(),Jl.once,Jl.once=function(r,e){return new Promise((t,n)=>{function i(...a){s!==void 0&&r.removeListener("error",s),t(a)}let s;e!=="error"&&(s=a=>{r.removeListener(name,i),n(a)},r.once("error",s)),r.once(e,i)})},Jl.on=function(r,e){let t=[],n=[],i=null,s=!1,a={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let h=Promise.reject(i);return i=null,h}return s?createIterResult(void 0,!0):new Promise((h,d)=>n.push({resolve:h,reject:d}))},async return(){r.removeListener(e,o),r.removeListener("error",u),s=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,o),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,o),r.on("error",u),a;function o(...c){let h=n.shift();h?h.resolve(createIterResult(c,!1)):t.push(c)}function u(c){s=!0;let h=n.shift();h?h.reject(c):i=c,a.return()}},{EventEmitter:uN,defaultMaxListeners:cN,init:fN,listenerCount:hN,on:dN,once:pN}=Jl}),kn=$e((r,e)=>{Me(),Be(),Ne();var t=(jr(),Nt(Ur)),{format:n,inspect:i}=lN(),{codes:{ERR_INVALID_ARG_TYPE:s}}=mn(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:u}=nr(),c=globalThis.AbortSignal||Qc().AbortSignal,h=globalThis.AbortController||Qc().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,g=globalThis.Blob||t.Blob,m=typeof g<"u"?function(b){return b instanceof g}:function(b){return!1},y=(b,E)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new s(E,"AbortSignal",b)},S=(b,E)=>{if(typeof b!="function")throw new s(E,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let E=!1;return function(...x){E||(E=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,E;return{promise:new Promise((x,T)=>{b=x,E=T}),resolve:b,reject:E}},promisify(b){return new Promise((E,x)=>{b((T,...w)=>T?x(T):E(...w))})},debuglog(){return function(){}},format:n,inspect:i,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,E){return b},addAbortListener:(tl(),Nt(io)).addAbortListener||function(b,E){if(b===void 0)throw new s("signal","AbortSignal",b);y(b,"signal"),S(E,"listener");let x;return b.aborted?queueMicrotask(()=>E()):(b.addEventListener("abort",E,{__proto__:null,once:!0,[a]:!0}),x=()=>{b.removeEventListener("abort",E)}),{__proto__:null,[u](){var T;(T=x)===null||T===void 0||T()}}},AbortSignalAny:c.any||function(b){if(b.length===1)return b[0];let E=new h,x=()=>E.abort();return b.forEach(T=>{y(T,"signals"),T.addEventListener("abort",x,{once:!0})}),E.signal.addEventListener("abort",()=>{b.forEach(T=>T.removeEventListener("abort",x))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),wf=$e((r,e)=>{Me(),Be(),Ne();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:g,String:m,StringPrototypeToUpperCase:y,StringPrototypeTrim:S}=nr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:_}}=mn(),{normalizeEncoding:R}=kn(),{isAsyncFunction:O,isArrayBufferView:C}=kn().types,B={};function N(pe){return pe===(pe|0)}function U(pe){return pe===pe>>>0}var k=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function q(pe,Ue,Ke){if(typeof pe>"u"&&(pe=Ke),typeof pe=="string"){if(g(k,pe)===null)throw new T(Ue,pe,W);pe=h(pe,8)}return K(pe,Ue),pe}var X=b((pe,Ue,Ke=c,Ie=u)=>{if(typeof pe!="number")throw new x(Ue,"number",pe);if(!a(pe))throw new w(Ue,"an integer",pe);if(pe<Ke||pe>Ie)throw new w(Ue,`>= ${Ke} && <= ${Ie}`,pe)}),H=b((pe,Ue,Ke=-2147483648,Ie=2147483647)=>{if(typeof pe!="number")throw new x(Ue,"number",pe);if(!a(pe))throw new w(Ue,"an integer",pe);if(pe<Ke||pe>Ie)throw new w(Ue,`>= ${Ke} && <= ${Ie}`,pe)}),K=b((pe,Ue,Ke=!1)=>{if(typeof pe!="number")throw new x(Ue,"number",pe);if(!a(pe))throw new w(Ue,"an integer",pe);let Ie=Ke?1:0,lt=4294967295;if(pe<Ie||pe>lt)throw new w(Ue,`>= ${Ie} && <= ${lt}`,pe)});function V(pe,Ue){if(typeof pe!="string")throw new x(Ue,"string",pe)}function J(pe,Ue,Ke=void 0,Ie){if(typeof pe!="number")throw new x(Ue,"number",pe);if(Ke!=null&&pe<Ke||Ie!=null&&pe>Ie||(Ke!=null||Ie!=null)&&o(pe))throw new w(Ue,`${Ke!=null?`>= ${Ke}`:""}${Ke!=null&&Ie!=null?" && ":""}${Ie!=null?`<= ${Ie}`:""}`,pe)}var Q=b((pe,Ue,Ke)=>{if(!n(Ke,pe)){let Ie="must be one of: "+i(s(Ke,lt=>typeof lt=="string"?`'${lt}'`:m(lt)),", ");throw new T(Ue,pe,Ie)}});function $(pe,Ue){if(typeof pe!="boolean")throw new x(Ue,"boolean",pe)}function F(pe,Ue,Ke){return pe==null||!d(pe,Ue)?Ke:pe[Ue]}var Z=b((pe,Ue,Ke=null)=>{let Ie=F(Ke,"allowArray",!1),lt=F(Ke,"allowFunction",!1);if(!F(Ke,"nullable",!1)&&pe===null||!Ie&&t(pe)||typeof pe!="object"&&(!lt||typeof pe!="function"))throw new x(Ue,"Object",pe)}),de=b((pe,Ue)=>{if(pe!=null&&typeof pe!="object"&&typeof pe!="function")throw new x(Ue,"a dictionary",pe)}),oe=b((pe,Ue,Ke=0)=>{if(!t(pe))throw new x(Ue,"Array",pe);if(pe.length<Ke){let Ie=`must be longer than ${Ke}`;throw new T(Ue,pe,Ie)}});function xe(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++)V(pe[Ke],`${Ue}[${Ke}]`)}function ae(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++)$(pe[Ke],`${Ue}[${Ke}]`)}function re(pe,Ue){oe(pe,Ue);for(let Ke=0;Ke<pe.length;Ke++){let Ie=pe[Ke],lt=`${Ue}[${Ke}]`;if(Ie==null)throw new x(lt,"AbortSignal",Ie);Le(Ie,lt)}}function te(pe,Ue="signal"){if(V(pe,Ue),B[pe]===void 0)throw B[y(pe)]!==void 0?new _(pe+" (signals must use all capital letters)"):new _(pe)}var le=b((pe,Ue="buffer")=>{if(!C(pe))throw new x(Ue,["Buffer","TypedArray","DataView"],pe)});function ce(pe,Ue){let Ke=R(Ue),Ie=pe.length;if(Ke==="hex"&&Ie%2!==0)throw new T("encoding",Ue,`is invalid for data of length ${Ie}`)}function ne(pe,Ue="Port",Ke=!0){if(typeof pe!="number"&&typeof pe!="string"||typeof pe=="string"&&S(pe).length===0||+pe!==+pe>>>0||pe>65535||pe===0&&!Ke)throw new E(Ue,pe,Ke);return pe|0}var Le=b((pe,Ue)=>{if(pe!==void 0&&(pe===null||typeof pe!="object"||!("aborted"in pe)))throw new x(Ue,"AbortSignal",pe)}),Se=b((pe,Ue)=>{if(typeof pe!="function")throw new x(Ue,"Function",pe)}),ie=b((pe,Ue)=>{if(typeof pe!="function"||O(pe))throw new x(Ue,"Function",pe)}),se=b((pe,Ue)=>{if(pe!==void 0)throw new x(Ue,"undefined",pe)});function ye(pe,Ue,Ke){if(!n(Ke,pe))throw new x(Ue,`('${i(Ke,"|")}')`,pe)}var Re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ce(pe,Ue){if(typeof pe>"u"||!g(Re,pe))throw new T(Ue,pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function je(pe){if(typeof pe=="string")return Ce(pe,"hints"),pe;if(t(pe)){let Ue=pe.length,Ke="";if(Ue===0)return Ke;for(let Ie=0;Ie<Ue;Ie++){let lt=pe[Ie];Ce(lt,"hints"),Ke+=lt,Ie!==Ue-1&&(Ke+=", ")}return Ke}throw new T("hints",pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:N,isUint32:U,parseFileMode:q,validateArray:oe,validateStringArray:xe,validateBooleanArray:ae,validateAbortSignalArray:re,validateBoolean:$,validateBuffer:le,validateDictionary:de,validateEncoding:ce,validateFunction:Se,validateInt32:H,validateInteger:X,validateNumber:J,validateObject:Z,validateOneOf:Q,validatePlainFunction:ie,validatePort:ne,validateSignalName:te,validateString:V,validateUint32:K,validateUndefined:se,validateUnion:ye,validateAbortSignal:Le,validateLinkHeaderValue:je}}),rl=$e((r,e)=>{Me(),Be(),Ne();var t=e.exports={},n,i;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=s}catch{n=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=a}catch{i=a}})();function o(E){if(n===setTimeout)return setTimeout(E,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(E,0);try{return n(E,0)}catch{try{return n.call(null,E,0)}catch{return n.call(this,E,0)}}}function u(E){if(i===clearTimeout)return clearTimeout(E);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{return i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}var c=[],h=!1,d,g=-1;function m(){!h||!d||(h=!1,d.length?c=d.concat(c):g=-1,c.length&&y())}function y(){if(!h){var E=o(m);h=!0;for(var x=c.length;x;){for(d=c,c=[];++g<x;)d&&d[g].run();g=-1,x=c.length}d=null,h=!1,u(E)}}t.nextTick=function(E){var x=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];c.push(new S(E,x)),c.length===1&&!h&&o(y)};function S(E,x){this.fun=E,this.array=x}S.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function b(){}t.on=b,t.addListener=b,t.once=b,t.off=b,t.removeListener=b,t.removeAllListeners=b,t.emit=b,t.prependListener=b,t.prependOnceListener=b,t.listeners=function(E){return[]},t.binding=function(E){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(E){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),sa=$e((r,e)=>{Me(),Be(),Ne();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:i}=nr(),s=i("nodejs.stream.destroyed"),a=i("nodejs.stream.errored"),o=i("nodejs.stream.readable"),u=i("nodejs.stream.writable"),c=i("nodejs.stream.disturbed"),h=i("nodejs.webstream.isClosedPromise"),d=i("nodejs.webstream.controllerErrorFunction");function g(F,Z=!1){var de;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!Z||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((de=F._readableState)===null||de===void 0?void 0:de.readable)!==!1)&&(!F._writableState||F._readableState))}function m(F){var Z;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((Z=F._writableState)===null||Z===void 0?void 0:Z.writable)!==!1))}function y(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function S(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function b(F){return!!(F&&!S(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function E(F){return!!(F&&!S(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function x(F){return!!(F&&!S(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function T(F){return b(F)||E(F)||x(F)}function w(F,Z){return F==null?!1:Z===!0?typeof F[t]=="function":Z===!1?typeof F[n]=="function":typeof F[t]=="function"||typeof F[n]=="function"}function _(F){if(!S(F))return null;let Z=F._writableState,de=F._readableState,oe=Z||de;return!!(F.destroyed||F[s]||oe!=null&&oe.destroyed)}function R(F){if(!m(F))return null;if(F.writableEnded===!0)return!0;let Z=F._writableState;return Z!=null&&Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function O(F,Z){if(!m(F))return null;if(F.writableFinished===!0)return!0;let de=F._writableState;return de!=null&&de.errored?!1:typeof de?.finished!="boolean"?null:!!(de.finished||Z===!1&&de.ended===!0&&de.length===0)}function C(F){if(!g(F))return null;if(F.readableEnded===!0)return!0;let Z=F._readableState;return!Z||Z.errored?!1:typeof Z?.ended!="boolean"?null:Z.ended}function B(F,Z){if(!g(F))return null;let de=F._readableState;return de!=null&&de.errored?!1:typeof de?.endEmitted!="boolean"?null:!!(de.endEmitted||Z===!1&&de.ended===!0&&de.length===0)}function N(F){return F&&F[o]!=null?F[o]:typeof F?.readable!="boolean"?null:_(F)?!1:g(F)&&F.readable&&!B(F)}function U(F){return F&&F[u]!=null?F[u]:typeof F?.writable!="boolean"?null:_(F)?!1:m(F)&&F.writable&&!R(F)}function k(F,Z){return S(F)?_(F)?!0:!(Z?.readable!==!1&&N(F)||Z?.writable!==!1&&U(F)):null}function W(F){var Z,de;return S(F)?F.writableErrored?F.writableErrored:(Z=(de=F._writableState)===null||de===void 0?void 0:de.errored)!==null&&Z!==void 0?Z:null:null}function q(F){var Z,de;return S(F)?F.readableErrored?F.readableErrored:(Z=(de=F._readableState)===null||de===void 0?void 0:de.errored)!==null&&Z!==void 0?Z:null:null}function X(F){if(!S(F))return null;if(typeof F.closed=="boolean")return F.closed;let Z=F._writableState,de=F._readableState;return typeof Z?.closed=="boolean"||typeof de?.closed=="boolean"?Z?.closed||de?.closed:typeof F._closed=="boolean"&&H(F)?F._closed:null}function H(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function K(F){return typeof F._sent100=="boolean"&&H(F)}function V(F){var Z;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((Z=F.req)===null||Z===void 0?void 0:Z.upgradeOrConnect)===void 0}function J(F){if(!S(F))return null;let Z=F._writableState,de=F._readableState,oe=Z||de;return!oe&&K(F)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function Q(F){var Z;return!!(F&&((Z=F[c])!==null&&Z!==void 0?Z:F.readableDidRead||F.readableAborted))}function $(F){var Z,de,oe,xe,ae,re,te,le,ce,ne;return!!(F&&((Z=(de=(oe=(xe=(ae=(re=F[a])!==null&&re!==void 0?re:F.readableErrored)!==null&&ae!==void 0?ae:F.writableErrored)!==null&&xe!==void 0?xe:(te=F._readableState)===null||te===void 0?void 0:te.errorEmitted)!==null&&oe!==void 0?oe:(le=F._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&de!==void 0?de:(ce=F._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&Z!==void 0?Z:!((ne=F._writableState)===null||ne===void 0)&&ne.errored))}e.exports={isDestroyed:_,kIsDestroyed:s,isDisturbed:Q,kIsDisturbed:c,isErrored:$,kIsErrored:a,isReadable:N,kIsReadable:o,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:u,isClosed:X,isDuplexNodeStream:y,isFinished:k,isIterable:w,isReadableNodeStream:g,isReadableStream:b,isReadableEnded:C,isReadableFinished:B,isReadableErrored:q,isNodeStream:S,isWebStream:T,isWritable:U,isWritableNodeStream:m,isWritableStream:E,isWritableEnded:R,isWritableFinished:O,isWritableErrored:W,isServerRequest:V,isServerResponse:K,willEmitClose:J,isTransformStream:x}}),so=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{AbortError:n,codes:i}=mn(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=i,{kEmptyObject:o,once:u}=kn(),{validateAbortSignal:c,validateFunction:h,validateObject:d,validateBoolean:g}=wf(),{Promise:m,PromisePrototypeThen:y,SymbolDispose:S}=nr(),{isClosed:b,isReadable:E,isReadableNodeStream:x,isReadableStream:T,isReadableFinished:w,isReadableErrored:_,isWritable:R,isWritableNodeStream:O,isWritableStream:C,isWritableFinished:B,isWritableErrored:N,isNodeStream:U,willEmitClose:k,kIsClosedPromise:W}=sa(),q;function X(Q){return Q.setHeader&&typeof Q.abort=="function"}var H=()=>{};function K(Q,$,F){var Z,de;if(arguments.length===2?(F=$,$=o):$==null?$=o:d($,"options"),h(F,"callback"),c($.signal,"options.signal"),F=u(F),T(Q)||C(Q))return V(Q,$,F);if(!U(Q))throw new s("stream",["ReadableStream","WritableStream","Stream"],Q);let oe=(Z=$.readable)!==null&&Z!==void 0?Z:x(Q),xe=(de=$.writable)!==null&&de!==void 0?de:O(Q),ae=Q._writableState,re=Q._readableState,te=()=>{Q.writable||ne()},le=k(Q)&&x(Q)===oe&&O(Q)===xe,ce=B(Q,!1),ne=()=>{ce=!0,Q.destroyed&&(le=!1),!(le&&(!Q.readable||oe))&&(!oe||Le)&&F.call(Q)},Le=w(Q,!1),Se=()=>{Le=!0,Q.destroyed&&(le=!1),!(le&&(!Q.writable||xe))&&(!xe||ce)&&F.call(Q)},ie=pe=>{F.call(Q,pe)},se=b(Q),ye=()=>{se=!0;let pe=N(Q)||_(Q);if(pe&&typeof pe!="boolean")return F.call(Q,pe);if(oe&&!Le&&x(Q,!0)&&!w(Q,!1))return F.call(Q,new a);if(xe&&!ce&&!B(Q,!1))return F.call(Q,new a);F.call(Q)},Re=()=>{se=!0;let pe=N(Q)||_(Q);if(pe&&typeof pe!="boolean")return F.call(Q,pe);F.call(Q)},Ce=()=>{Q.req.on("finish",ne)};X(Q)?(Q.on("complete",ne),le||Q.on("abort",ye),Q.req?Ce():Q.on("request",Ce)):xe&&!ae&&(Q.on("end",te),Q.on("close",te)),!le&&typeof Q.aborted=="boolean"&&Q.on("aborted",ye),Q.on("end",Se),Q.on("finish",ne),$.error!==!1&&Q.on("error",ie),Q.on("close",ye),se?t.nextTick(ye):ae!=null&&ae.errorEmitted||re!=null&&re.errorEmitted?le||t.nextTick(Re):(!oe&&(!le||E(Q))&&(ce||R(Q)===!1)||!xe&&(!le||R(Q))&&(Le||E(Q)===!1)||re&&Q.req&&Q.aborted)&&t.nextTick(Re);let je=()=>{F=H,Q.removeListener("aborted",ye),Q.removeListener("complete",ne),Q.removeListener("abort",ye),Q.removeListener("request",Ce),Q.req&&Q.req.removeListener("finish",ne),Q.removeListener("end",te),Q.removeListener("close",te),Q.removeListener("finish",ne),Q.removeListener("end",Se),Q.removeListener("error",ie),Q.removeListener("close",ye)};if($.signal&&!se){let pe=()=>{let Ue=F;je(),Ue.call(Q,new n(void 0,{cause:$.signal.reason}))};if($.signal.aborted)t.nextTick(pe);else{q=q||kn().addAbortListener;let Ue=q($.signal,pe),Ke=F;F=u((...Ie)=>{Ue[S](),Ke.apply(Q,Ie)})}}return je}function V(Q,$,F){let Z=!1,de=H;if($.signal)if(de=()=>{Z=!0,F.call(Q,new n(void 0,{cause:$.signal.reason}))},$.signal.aborted)t.nextTick(de);else{q=q||kn().addAbortListener;let xe=q($.signal,de),ae=F;F=u((...re)=>{xe[S](),ae.apply(Q,re)})}let oe=(...xe)=>{Z||t.nextTick(()=>F.apply(Q,xe))};return y(Q[W].promise,oe,oe),H}function J(Q,$){var F;let Z=!1;return $===null&&($=o),(F=$)!==null&&F!==void 0&&F.cleanup&&(g($.cleanup,"cleanup"),Z=$.cleanup),new m((de,oe)=>{let xe=K(Q,$,ae=>{Z&&xe(),ae?oe(ae):de()})})}e.exports=K,e.exports.finished=J}),Iu=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:s}=mn(),{Symbol:a}=nr(),{kIsDestroyed:o,isDestroyed:u,isFinished:c,isServerRequest:h}=sa(),d=a("kDestroy"),g=a("kConstruct");function m(k,W,q){k&&(k.stack,W&&!W.errored&&(W.errored=k),q&&!q.errored&&(q.errored=k))}function y(k,W){let q=this._readableState,X=this._writableState,H=X||q;return X!=null&&X.destroyed||q!=null&&q.destroyed?(typeof W=="function"&&W(),this):(m(k,X,q),X&&(X.destroyed=!0),q&&(q.destroyed=!0),H.constructed?S(this,k,W):this.once(d,function(K){S(this,n(K,k),W)}),this)}function S(k,W,q){let X=!1;function H(K){if(X)return;X=!0;let V=k._readableState,J=k._writableState;m(K,J,V),J&&(J.closed=!0),V&&(V.closed=!0),typeof q=="function"&&q(K),K?t.nextTick(b,k,K):t.nextTick(E,k)}try{k._destroy(W||null,H)}catch(K){H(K)}}function b(k,W){x(k,W),E(k)}function E(k){let W=k._readableState,q=k._writableState;q&&(q.closeEmitted=!0),W&&(W.closeEmitted=!0),(q!=null&&q.emitClose||W!=null&&W.emitClose)&&k.emit("close")}function x(k,W){let q=k._readableState,X=k._writableState;X!=null&&X.errorEmitted||q!=null&&q.errorEmitted||(X&&(X.errorEmitted=!0),q&&(q.errorEmitted=!0),k.emit("error",W))}function T(){let k=this._readableState,W=this._writableState;k&&(k.constructed=!0,k.closed=!1,k.closeEmitted=!1,k.destroyed=!1,k.errored=null,k.errorEmitted=!1,k.reading=!1,k.ended=k.readable===!1,k.endEmitted=k.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function w(k,W,q){let X=k._readableState,H=k._writableState;if(H!=null&&H.destroyed||X!=null&&X.destroyed)return this;X!=null&&X.autoDestroy||H!=null&&H.autoDestroy?k.destroy(W):W&&(W.stack,H&&!H.errored&&(H.errored=W),X&&!X.errored&&(X.errored=W),q?t.nextTick(x,k,W):x(k,W))}function _(k,W){if(typeof k._construct!="function")return;let q=k._readableState,X=k._writableState;q&&(q.constructed=!1),X&&(X.constructed=!1),k.once(g,W),!(k.listenerCount(g)>1)&&t.nextTick(R,k)}function R(k){let W=!1;function q(X){if(W){w(k,X??new i);return}W=!0;let H=k._readableState,K=k._writableState,V=K||H;H&&(H.constructed=!0),K&&(K.constructed=!0),V.destroyed?k.emit(d,X):X?w(k,X,!0):t.nextTick(O,k)}try{k._construct(X=>{t.nextTick(q,X)})}catch(X){t.nextTick(q,X)}}function O(k){k.emit(g)}function C(k){return k?.setHeader&&typeof k.abort=="function"}function B(k){k.emit("close")}function N(k,W){k.emit("error",W),t.nextTick(B,k)}function U(k,W){!k||u(k)||(!W&&!c(k)&&(W=new s),h(k)?(k.socket=null,k.destroy(W)):C(k)?k.abort():C(k.req)?k.req.abort():typeof k.destroy=="function"?k.destroy(W):typeof k.close=="function"?k.close():W?t.nextTick(N,k,W):t.nextTick(B,k),k.destroyed||(k[o]=!0))}e.exports={construct:_,destroyer:U,destroy:y,undestroy:T,errorOrDestroy:w}}),wT=$e((r,e)=>{Me(),Be(),Ne();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=nr(),{EventEmitter:i}=(tl(),Nt(io));function s(o){i.call(this,o)}n(s.prototype,i.prototype),n(s,i),s.prototype.pipe=function(o,u){let c=this;function h(E){o.writable&&o.write(E)===!1&&c.pause&&c.pause()}c.on("data",h);function d(){c.readable&&c.resume&&c.resume()}o.on("drain",d),!o._isStdio&&(!u||u.end!==!1)&&(c.on("end",m),c.on("close",y));let g=!1;function m(){g||(g=!0,o.end())}function y(){g||(g=!0,typeof o.destroy=="function"&&o.destroy())}function S(E){b(),i.listenerCount(this,"error")===0&&this.emit("error",E)}a(c,"error",S),a(o,"error",S);function b(){c.removeListener("data",h),o.removeListener("drain",d),c.removeListener("end",m),c.removeListener("close",y),c.removeListener("error",S),o.removeListener("error",S),c.removeListener("end",b),c.removeListener("close",b),o.removeListener("close",b)}return c.on("end",b),c.on("close",b),o.on("close",b),o.emit("pipe",c),o};function a(o,u,c){if(typeof o.prependListener=="function")return o.prependListener(u,c);!o._events||!o._events[u]?o.on(u,c):t(o._events[u])?o._events[u].unshift(c):o._events[u]=[c,o._events[u]]}e.exports={Stream:s,prependListener:a}}),Mg=$e((r,e)=>{Me(),Be(),Ne();var{SymbolDispose:t}=nr(),{AbortError:n,codes:i}=mn(),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:o}=sa(),u=so(),{ERR_INVALID_ARG_TYPE:c}=i,h,d=(g,m)=>{if(typeof g!="object"||!("aborted"in g))throw new c(m,"AbortSignal",g)};e.exports.addAbortSignal=function(g,m){if(d(g,"signal"),!s(m)&&!a(m))throw new c("stream",["ReadableStream","WritableStream","Stream"],m);return e.exports.addAbortSignalNoValidate(g,m)},e.exports.addAbortSignalNoValidate=function(g,m){if(typeof g!="object"||!("aborted"in g))return m;let y=s(m)?()=>{m.destroy(new n(void 0,{cause:g.reason}))}:()=>{m[o](new n(void 0,{cause:g.reason}))};if(g.aborted)y();else{h=h||kn().addAbortListener;let S=h(g,y);u(m,S[t])}return m}}),nG=$e((r,e)=>{Me(),Be(),Ne();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:s}=nr(),{Buffer:a}=(jr(),Nt(Ur)),{inspect:o}=kn();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){let c={data:u,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(u){let c={data:u,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let c=this.head,h=""+c.data;for(;(c=c.next)!==null;)h+=u+c.data;return h}concat(u){if(this.length===0)return a.alloc(0);let c=a.allocUnsafe(u>>>0),h=this.head,d=0;for(;h;)i(c,h.data,d),d+=h.data.length,h=h.next;return c}consume(u,c){let h=this.head.data;if(u<h.length){let d=h.slice(0,u);return this.head.data=h.slice(u),d}return u===h.length?this.shift():c?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[n](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let c="",h=this.head,d=0;do{let g=h.data;if(u>g.length)c+=g,u-=g.length;else{u===g.length?(c+=g,++d,h.next?this.head=h.next:this.head=this.tail=null):(c+=t(g,0,u),this.head=h,h.data=t(g,u));break}++d}while((h=h.next)!==null);return this.length-=d,c}_getBuffer(u){let c=a.allocUnsafe(u),h=u,d=this.head,g=0;do{let m=d.data;if(u>m.length)i(c,m,h-u),u-=m.length;else{u===m.length?(i(c,m,h-u),++g,d.next?this.head=d.next:this.head=this.tail=null):(i(c,new s(m.buffer,m.byteOffset,u),h-u),this.head=d,d.data=m.slice(u));break}++g}while((d=d.next)!==null);return this.length-=g,c}[Symbol.for("nodejs.util.inspect.custom")](u,c){return o(this,{...c,depth:0,customInspect:!1})}}}),Ng=$e((r,e)=>{Me(),Be(),Ne();var{MathFloor:t,NumberIsInteger:n}=nr(),{validateInteger:i}=wf(),{ERR_INVALID_ARG_VALUE:s}=mn().codes,a=16*1024,o=16;function u(g,m,y){return g.highWaterMark!=null?g.highWaterMark:m?g[y]:null}function c(g){return g?o:a}function h(g,m){i(m,"value",0),g?o=m:a=m}function d(g,m,y,S){let b=u(m,S,y);if(b!=null){if(!n(b)||b<0){let E=S?`options.${y}`:"options.highWaterMark";throw new s(E,b)}return t(b)}return c(g.objectMode)}e.exports={getHighWaterMark:d,getDefaultHighWaterMark:c,setDefaultHighWaterMark:h}}),iG=$e((r,e)=>{Me(),Be(),Ne();var t=(jr(),Nt(Ur)),n=t.Buffer;function i(a,o){for(var u in a)o[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=s);function s(a,o,u){return n(a,o,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,u)},s.alloc=function(a,o,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return o!==void 0?typeof u=="string"?c.fill(o,u):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}}),sG=$e(r=>{Me(),Be(),Ne();var e=iG().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var T;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(T)return;x=(""+x).toLowerCase(),T=!0}}function i(x){var T=n(x);if(typeof T!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return T||x}r.StringDecoder=s;function s(x){this.encoding=i(x);var T;switch(this.encoding){case"utf16le":this.text=g,this.end=m,T=4;break;case"utf8":this.fillLast=c,T=4;break;case"base64":this.text=y,this.end=S,T=3;break;default:this.write=b,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(T)}s.prototype.write=function(x){if(x.length===0)return"";var T,w;if(this.lastNeed){if(T=this.fillLast(x),T===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<x.length?T?T+this.text(x,w):this.text(x,w):T||""},s.prototype.end=d,s.prototype.text=h,s.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function a(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,T,w){var _=T.length-1;if(_<w)return 0;var R=a(T[_]);return R>=0?(R>0&&(x.lastNeed=R-1),R):--_<w||R===-2?0:(R=a(T[_]),R>=0?(R>0&&(x.lastNeed=R-2),R):--_<w||R===-2?0:(R=a(T[_]),R>=0?(R>0&&(R===2?R=0:x.lastNeed=R-3),R):0))}function u(x,T,w){if((T[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return x.lastNeed=2,""}}function c(x){var T=this.lastTotal-this.lastNeed,w=u(this,x);if(w!==void 0)return w;if(this.lastNeed<=x.length)return x.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,T,0,x.length),this.lastNeed-=x.length}function h(x,T){var w=o(this,x,T);if(!this.lastNeed)return x.toString("utf8",T);this.lastTotal=w;var _=x.length-(w-this.lastNeed);return x.copy(this.lastChar,0,_),x.toString("utf8",T,_)}function d(x){var T=x&&x.length?this.write(x):"";return this.lastNeed?T+"":T}function g(x,T){if((x.length-T)%2===0){var w=x.toString("utf16le",T);if(w){var _=w.charCodeAt(w.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",T,x.length-1)}function m(x){var T=x&&x.length?this.write(x):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,w)}return T}function y(x,T){var w=(x.length-T)%3;return w===0?x.toString("base64",T):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",T,x.length-w))}function S(x){var T=x&&x.length?this.write(x):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function b(x){return x.toString(this.encoding)}function E(x){return x&&x.length?this.write(x):""}}),gN=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:s}=nr(),{Buffer:a}=(jr(),Nt(Ur)),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:u}=mn().codes;function c(h,d,g){let m;if(typeof d=="string"||d instanceof a)return new h({objectMode:!0,...g,read(){this.push(d),this.push(null)}});let y;if(d&&d[i])y=!0,m=d[i]();else if(d&&d[s])y=!1,m=d[s]();else throw new o("iterable",["Iterable"],d);let S=new h({objectMode:!0,highWaterMark:1,...g}),b=!1;S._read=function(){b||(b=!0,x())},S._destroy=function(T,w){n(E(T),()=>t.nextTick(w,T),_=>t.nextTick(w,_||T))};async function E(T){let w=T!=null,_=typeof m.throw=="function";if(w&&_){let{value:R,done:O}=await m.throw(T);if(await R,O)return}if(typeof m.return=="function"){let{value:R}=await m.return();await R}}async function x(){for(;;){try{let{value:T,done:w}=y?await m.next():m.next();if(w)S.push(null);else{let _=T&&typeof T.then=="function"?await T:T;if(_===null)throw b=!1,new u;if(S.push(_))continue;b=!1}}catch(T){S.destroy(T)}break}}return S}e.exports=c}),Bg=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:o,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:h,SafeSet:d,SymbolAsyncDispose:g,SymbolAsyncIterator:m,Symbol:y}=nr();e.exports=Ie,Ie.ReadableState=Ke;var{EventEmitter:S}=(tl(),Nt(io)),{Stream:b,prependListener:E}=wT(),{Buffer:x}=(jr(),Nt(Ur)),{addAbortSignal:T}=Mg(),w=so(),_=kn().debuglog("stream",ee=>{_=ee}),R=nG(),O=Iu(),{getHighWaterMark:C,getDefaultHighWaterMark:B}=Ng(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_OUT_OF_RANGE:W,ERR_STREAM_PUSH_AFTER_EOF:q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:X},AbortError:H}=mn(),{validateObject:K}=wf(),V=y("kPaused"),{StringDecoder:J}=sG(),Q=gN();c(Ie.prototype,b.prototype),c(Ie,b);var $=()=>{},{errorOrDestroy:F}=O,Z=1,de=2,oe=4,xe=8,ae=16,re=32,te=64,le=128,ce=256,ne=512,Le=1024,Se=2048,ie=4096,se=8192,ye=16384,Re=32768,Ce=65536,je=1<<17,pe=1<<18;function Ue(ee){return{enumerable:!1,get(){return(this.state&ee)!==0},set(ue){ue?this.state|=ee:this.state&=~ee}}}o(Ke.prototype,{objectMode:Ue(Z),ended:Ue(de),endEmitted:Ue(oe),reading:Ue(xe),constructed:Ue(ae),sync:Ue(re),needReadable:Ue(te),emittedReadable:Ue(le),readableListening:Ue(ce),resumeScheduled:Ue(ne),errorEmitted:Ue(Le),emitClose:Ue(Se),autoDestroy:Ue(ie),destroyed:Ue(se),closed:Ue(ye),closeEmitted:Ue(Re),multiAwaitDrain:Ue(Ce),readingMore:Ue(je),dataEmitted:Ue(pe)});function Ke(ee,ue,qe){typeof qe!="boolean"&&(qe=ue instanceof Ys()),this.state=Se|ie|ae|re,ee&&ee.objectMode&&(this.state|=Z),qe&&ee&&ee.readableObjectMode&&(this.state|=Z),this.highWaterMark=ee?C(this,ee,"readableHighWaterMark",qe):B(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,ee&&ee.emitClose===!1&&(this.state&=~Se),ee&&ee.autoDestroy===!1&&(this.state&=~ie),this.errored=null,this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ee&&ee.encoding&&(this.decoder=new J(ee.encoding),this.encoding=ee.encoding)}function Ie(ee){if(!(this instanceof Ie))return new Ie(ee);let ue=this instanceof Ys();this._readableState=new Ke(ee,this,ue),ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy),typeof ee.construct=="function"&&(this._construct=ee.construct),ee.signal&&!ue&&T(ee.signal,this)),b.call(this,ee),O.construct(this,()=>{this._readableState.needReadable&&me(this,this._readableState)})}Ie.prototype.destroy=O.destroy,Ie.prototype._undestroy=O.undestroy,Ie.prototype._destroy=function(ee,ue){ue(ee)},Ie.prototype[S.captureRejectionSymbol]=function(ee){this.destroy(ee)},Ie.prototype[g]=function(){let ee;return this.destroyed||(ee=this.readableEnded?null:new H,this.destroy(ee)),new h((ue,qe)=>w(this,We=>We&&We!==ee?qe(We):ue(null)))},Ie.prototype.push=function(ee,ue){return lt(this,ee,ue,!1)},Ie.prototype.unshift=function(ee,ue){return lt(this,ee,ue,!0)};function lt(ee,ue,qe,We){_("readableAddChunk",ue);let Qe=ee._readableState,Zt;if((Qe.state&Z)===0&&(typeof ue=="string"?(qe=qe||Qe.defaultEncoding,Qe.encoding!==qe&&(We&&Qe.encoding?ue=x.from(ue,qe).toString(Qe.encoding):(ue=x.from(ue,qe),qe=""))):ue instanceof x?qe="":b._isUint8Array(ue)?(ue=b._uint8ArrayToBuffer(ue),qe=""):ue!=null&&(Zt=new U("chunk",["string","Buffer","Uint8Array"],ue))),Zt)F(ee,Zt);else if(ue===null)Qe.state&=~xe,ve(ee,Qe);else if((Qe.state&Z)!==0||ue&&ue.length>0)if(We)if((Qe.state&oe)!==0)F(ee,new X);else{if(Qe.destroyed||Qe.errored)return!1;L(ee,Qe,ue,!0)}else if(Qe.ended)F(ee,new q);else{if(Qe.destroyed||Qe.errored)return!1;Qe.state&=~xe,Qe.decoder&&!qe?(ue=Qe.decoder.write(ue),Qe.objectMode||ue.length!==0?L(ee,Qe,ue,!1):me(ee,Qe)):L(ee,Qe,ue,!1)}else We||(Qe.state&=~xe,me(ee,Qe));return!Qe.ended&&(Qe.length<Qe.highWaterMark||Qe.length===0)}function L(ee,ue,qe,We){ue.flowing&&ue.length===0&&!ue.sync&&ee.listenerCount("data")>0?((ue.state&Ce)!==0?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null,ue.dataEmitted=!0,ee.emit("data",qe)):(ue.length+=ue.objectMode?1:qe.length,We?ue.buffer.unshift(qe):ue.buffer.push(qe),(ue.state&te)!==0&&Pe(ee)),me(ee,ue)}Ie.prototype.isPaused=function(){let ee=this._readableState;return ee[V]===!0||ee.flowing===!1},Ie.prototype.setEncoding=function(ee){let ue=new J(ee);this._readableState.decoder=ue,this._readableState.encoding=this._readableState.decoder.encoding;let qe=this._readableState.buffer,We="";for(let Qe of qe)We+=ue.write(Qe);return qe.clear(),We!==""&&qe.push(We),this._readableState.length=We.length,this};var D=1073741824;function G(ee){if(ee>D)throw new W("size","<= 1GiB",ee);return ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++,ee}function fe(ee,ue){return ee<=0||ue.length===0&&ue.ended?0:(ue.state&Z)!==0?1:s(ee)?ue.flowing&&ue.length?ue.buffer.first().length:ue.length:ee<=ue.length?ee:ue.ended?ue.length:0}Ie.prototype.read=function(ee){_("read",ee),ee===void 0?ee=NaN:i(ee)||(ee=a(ee,10));let ue=this._readableState,qe=ee;if(ee>ue.highWaterMark&&(ue.highWaterMark=G(ee)),ee!==0&&(ue.state&=~le),ee===0&&ue.needReadable&&((ue.highWaterMark!==0?ue.length>=ue.highWaterMark:ue.length>0)||ue.ended))return _("read: emitReadable",ue.length,ue.ended),ue.length===0&&ue.ended?ln(this):Pe(this),null;if(ee=fe(ee,ue),ee===0&&ue.ended)return ue.length===0&&ln(this),null;let We=(ue.state&te)!==0;if(_("need readable",We),(ue.length===0||ue.length-ee<ue.highWaterMark)&&(We=!0,_("length less than watermark",We)),ue.ended||ue.reading||ue.destroyed||ue.errored||!ue.constructed)We=!1,_("reading, ended or constructing",We);else if(We){_("do read"),ue.state|=xe|re,ue.length===0&&(ue.state|=te);try{this._read(ue.highWaterMark)}catch(Zt){F(this,Zt)}ue.state&=~re,ue.reading||(ee=fe(qe,ue))}let Qe;return ee>0?Qe=vn(ee,ue):Qe=null,Qe===null?(ue.needReadable=ue.length<=ue.highWaterMark,ee=0):(ue.length-=ee,ue.multiAwaitDrain?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null),ue.length===0&&(ue.ended||(ue.needReadable=!0),qe!==ee&&ue.ended&&ln(this)),Qe!==null&&!ue.errorEmitted&&!ue.closeEmitted&&(ue.dataEmitted=!0,this.emit("data",Qe)),Qe};function ve(ee,ue){if(_("onEofChunk"),!ue.ended){if(ue.decoder){let qe=ue.decoder.end();qe&&qe.length&&(ue.buffer.push(qe),ue.length+=ue.objectMode?1:qe.length)}ue.ended=!0,ue.sync?Pe(ee):(ue.needReadable=!1,ue.emittedReadable=!0,Ve(ee))}}function Pe(ee){let ue=ee._readableState;_("emitReadable",ue.needReadable,ue.emittedReadable),ue.needReadable=!1,ue.emittedReadable||(_("emitReadable",ue.flowing),ue.emittedReadable=!0,t.nextTick(Ve,ee))}function Ve(ee){let ue=ee._readableState;_("emitReadable_",ue.destroyed,ue.length,ue.ended),!ue.destroyed&&!ue.errored&&(ue.length||ue.ended)&&(ee.emit("readable"),ue.emittedReadable=!1),ue.needReadable=!ue.flowing&&!ue.ended&&ue.length<=ue.highWaterMark,an(ee)}function me(ee,ue){!ue.readingMore&&ue.constructed&&(ue.readingMore=!0,t.nextTick(Ae,ee,ue))}function Ae(ee,ue){for(;!ue.reading&&!ue.ended&&(ue.length<ue.highWaterMark||ue.flowing&&ue.length===0);){let qe=ue.length;if(_("maybeReadMore read 0"),ee.read(0),qe===ue.length)break}ue.readingMore=!1}Ie.prototype._read=function(ee){throw new k("_read()")},Ie.prototype.pipe=function(ee,ue){let qe=this,We=this._readableState;We.pipes.length===1&&(We.multiAwaitDrain||(We.multiAwaitDrain=!0,We.awaitDrainWriters=new d(We.awaitDrainWriters?[We.awaitDrainWriters]:[]))),We.pipes.push(ee),_("pipe count=%d opts=%j",We.pipes.length,ue);let Qe=(!ue||ue.end!==!1)&&ee!==t.stdout&&ee!==t.stderr?Sr:ds;We.endEmitted?t.nextTick(Qe):qe.once("end",Qe),ee.on("unpipe",Zt);function Zt(Un,un){_("onunpipe"),Un===qe&&un&&un.hasUnpiped===!1&&(un.hasUnpiped=!0,Sn())}function Sr(){_("onend"),ee.end()}let bn,ga=!1;function Sn(){_("cleanup"),ee.removeListener("close",En),ee.removeListener("finish",Ui),bn&&ee.removeListener("drain",bn),ee.removeListener("error",xn),ee.removeListener("unpipe",Zt),qe.removeListener("end",Sr),qe.removeListener("end",ds),qe.removeListener("data",xr),ga=!0,bn&&We.awaitDrainWriters&&(!ee._writableState||ee._writableState.needDrain)&&bn()}function Jt(){ga||(We.pipes.length===1&&We.pipes[0]===ee?(_("false write response, pause",0),We.awaitDrainWriters=ee,We.multiAwaitDrain=!1):We.pipes.length>1&&We.pipes.includes(ee)&&(_("false write response, pause",We.awaitDrainWriters.size),We.awaitDrainWriters.add(ee)),qe.pause()),bn||(bn=Je(qe,ee),ee.on("drain",bn))}qe.on("data",xr);function xr(Un){_("ondata");let un=ee.write(Un);_("dest.write",un),un===!1&&Jt()}function xn(Un){if(_("onerror",Un),ds(),ee.removeListener("error",xn),ee.listenerCount("error")===0){let un=ee._writableState||ee._readableState;un&&!un.errorEmitted?F(ee,Un):ee.emit("error",Un)}}E(ee,"error",xn);function En(){ee.removeListener("finish",Ui),ds()}ee.once("close",En);function Ui(){_("onfinish"),ee.removeListener("close",En),ds()}ee.once("finish",Ui);function ds(){_("unpipe"),qe.unpipe(ee)}return ee.emit("pipe",qe),ee.writableNeedDrain===!0?Jt():We.flowing||(_("pipe resume"),qe.resume()),ee};function Je(ee,ue){return function(){let qe=ee._readableState;qe.awaitDrainWriters===ue?(_("pipeOnDrain",1),qe.awaitDrainWriters=null):qe.multiAwaitDrain&&(_("pipeOnDrain",qe.awaitDrainWriters.size),qe.awaitDrainWriters.delete(ue)),(!qe.awaitDrainWriters||qe.awaitDrainWriters.size===0)&&ee.listenerCount("data")&&ee.resume()}}Ie.prototype.unpipe=function(ee){let ue=this._readableState,qe={hasUnpiped:!1};if(ue.pipes.length===0)return this;if(!ee){let Qe=ue.pipes;ue.pipes=[],this.pause();for(let Zt=0;Zt<Qe.length;Zt++)Qe[Zt].emit("unpipe",this,{hasUnpiped:!1});return this}let We=n(ue.pipes,ee);return We===-1?this:(ue.pipes.splice(We,1),ue.pipes.length===0&&this.pause(),ee.emit("unpipe",this,qe),this)},Ie.prototype.on=function(ee,ue){let qe=b.prototype.on.call(this,ee,ue),We=this._readableState;return ee==="data"?(We.readableListening=this.listenerCount("readable")>0,We.flowing!==!1&&this.resume()):ee==="readable"&&!We.endEmitted&&!We.readableListening&&(We.readableListening=We.needReadable=!0,We.flowing=!1,We.emittedReadable=!1,_("on readable",We.length,We.reading),We.length?Pe(this):We.reading||t.nextTick(ct,this)),qe},Ie.prototype.addListener=Ie.prototype.on,Ie.prototype.removeListener=function(ee,ue){let qe=b.prototype.removeListener.call(this,ee,ue);return ee==="readable"&&t.nextTick(Xe,this),qe},Ie.prototype.off=Ie.prototype.removeListener,Ie.prototype.removeAllListeners=function(ee){let ue=b.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&t.nextTick(Xe,this),ue};function Xe(ee){let ue=ee._readableState;ue.readableListening=ee.listenerCount("readable")>0,ue.resumeScheduled&&ue[V]===!1?ue.flowing=!0:ee.listenerCount("data")>0?ee.resume():ue.readableListening||(ue.flowing=null)}function ct(ee){_("readable nexttick read 0"),ee.read(0)}Ie.prototype.resume=function(){let ee=this._readableState;return ee.flowing||(_("resume"),ee.flowing=!ee.readableListening,dt(this,ee)),ee[V]=!1,this};function dt(ee,ue){ue.resumeScheduled||(ue.resumeScheduled=!0,t.nextTick(ni,ee,ue))}function ni(ee,ue){_("resume",ue.reading),ue.reading||ee.read(0),ue.resumeScheduled=!1,ee.emit("resume"),an(ee),ue.flowing&&!ue.reading&&ee.read(0)}Ie.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[V]=!0,this};function an(ee){let ue=ee._readableState;for(_("flow",ue.flowing);ue.flowing&&ee.read()!==null;);}Ie.prototype.wrap=function(ee){let ue=!1;ee.on("data",We=>{!this.push(We)&&ee.pause&&(ue=!0,ee.pause())}),ee.on("end",()=>{this.push(null)}),ee.on("error",We=>{F(this,We)}),ee.on("close",()=>{this.destroy()}),ee.on("destroy",()=>{this.destroy()}),this._read=()=>{ue&&ee.resume&&(ue=!1,ee.resume())};let qe=u(ee);for(let We=1;We<qe.length;We++){let Qe=qe[We];this[Qe]===void 0&&typeof ee[Qe]=="function"&&(this[Qe]=ee[Qe].bind(ee))}return this},Ie.prototype[m]=function(){return or(this)},Ie.prototype.iterator=function(ee){return ee!==void 0&&K(ee,"options"),or(this,ee)};function or(ee,ue){typeof ee.read!="function"&&(ee=Ie.wrap(ee,{objectMode:!0}));let qe=on(ee,ue);return qe.stream=ee,qe}async function*on(ee,ue){let qe=$;function We(Sr){this===ee?(qe(),qe=$):qe=Sr}ee.on("readable",We);let Qe,Zt=w(ee,{writable:!1},Sr=>{Qe=Sr?N(Qe,Sr):null,qe(),qe=$});try{for(;;){let Sr=ee.destroyed?null:ee.read();if(Sr!==null)yield Sr;else{if(Qe)throw Qe;if(Qe===null)return;await new h(We)}}}catch(Sr){throw Qe=N(Qe,Sr),Qe}finally{(Qe||ue?.destroyOnReturn!==!1)&&(Qe===void 0||ee._readableState.autoDestroy)?O.destroyer(ee,null):(ee.off("readable",We),Zt())}}o(Ie.prototype,{readable:{__proto__:null,get(){let ee=this._readableState;return!!ee&&ee.readable!==!1&&!ee.destroyed&&!ee.errorEmitted&&!ee.endEmitted},set(ee){this._readableState&&(this._readableState.readable=!!ee)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ee){this._readableState&&(this._readableState.destroyed=ee)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Ke.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(ee){this[V]=!!ee}}}),Ie._fromList=vn;function vn(ee,ue){if(ue.length===0)return null;let qe;return ue.objectMode?qe=ue.buffer.shift():!ee||ee>=ue.length?(ue.decoder?qe=ue.buffer.join(""):ue.buffer.length===1?qe=ue.buffer.first():qe=ue.buffer.concat(ue.length),ue.buffer.clear()):qe=ue.buffer.consume(ee,ue.decoder),qe}function ln(ee){let ue=ee._readableState;_("endReadable",ue.endEmitted),ue.endEmitted||(ue.ended=!0,t.nextTick(br,ue,ee))}function br(ee,ue){if(_("endReadableNT",ee.endEmitted,ee.length),!ee.errored&&!ee.closeEmitted&&!ee.endEmitted&&ee.length===0){if(ee.endEmitted=!0,ue.emit("end"),ue.writable&&ue.allowHalfOpen===!1)t.nextTick(al,ue);else if(ee.autoDestroy){let qe=ue._writableState;(!qe||qe.autoDestroy&&(qe.finished||qe.writable===!1))&&ue.destroy()}}}function al(ee){ee.writable&&!ee.writableEnded&&!ee.destroyed&&ee.end()}Ie.from=function(ee,ue){return Q(Ie,ee,ue)};var fs;function hs(){return fs===void 0&&(fs={}),fs}Ie.fromWeb=function(ee,ue){return hs().newStreamReadableFromReadableStream(ee,ue)},Ie.toWeb=function(ee,ue){return hs().newReadableStreamFromStreamReadable(ee,ue)},Ie.wrap=function(ee,ue){var qe,We;return new Ie({objectMode:(qe=(We=ee.readableObjectMode)!==null&&We!==void 0?We:ee.objectMode)!==null&&qe!==void 0?qe:!0,...ue,destroy(Qe,Zt){O.destroyer(ee,Qe),Zt(Qe)}}).wrap(ee)}}),IT=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:o,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:h,SymbolHasInstance:d}=nr();e.exports=K,K.WritableState=X;var{EventEmitter:g}=(tl(),Nt(io)),m=wT().Stream,{Buffer:y}=(jr(),Nt(Ur)),S=Iu(),{addAbortSignal:b}=Mg(),{getHighWaterMark:E,getDefaultHighWaterMark:x}=Ng(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:U}=mn().codes,{errorOrDestroy:k}=S;u(K.prototype,m.prototype),u(K,m);function W(){}var q=h("kOnFinished");function X(ie,se,ye){typeof ye!="boolean"&&(ye=se instanceof Ys()),this.objectMode=!!(ie&&ie.objectMode),ye&&(this.objectMode=this.objectMode||!!(ie&&ie.writableObjectMode)),this.highWaterMark=ie?E(this,ie,"writableHighWaterMark",ye):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Re=!!(ie&&ie.decodeStrings===!1);this.decodeStrings=!Re,this.defaultEncoding=ie&&ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,se),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,H(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ie||ie.emitClose!==!1,this.autoDestroy=!ie||ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[q]=[]}function H(ie){ie.buffered=[],ie.bufferedIndex=0,ie.allBuffers=!0,ie.allNoop=!0}X.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},a(X.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K(ie){let se=this instanceof Ys();if(!se&&!s(K,this))return new K(ie);this._writableState=new X(ie,this,se),ie&&(typeof ie.write=="function"&&(this._write=ie.write),typeof ie.writev=="function"&&(this._writev=ie.writev),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.final=="function"&&(this._final=ie.final),typeof ie.construct=="function"&&(this._construct=ie.construct),ie.signal&&b(ie.signal,this)),m.call(this,ie),S.construct(this,()=>{let ye=this._writableState;ye.writing||xe(this,ye),le(this,ye)})}a(K,d,{__proto__:null,value:function(ie){return s(this,ie)?!0:this!==K?!1:ie&&ie._writableState instanceof X}}),K.prototype.pipe=function(){k(this,new R)};function V(ie,se,ye,Re){let Ce=ie._writableState;if(typeof ye=="function")Re=ye,ye=Ce.defaultEncoding;else{if(!ye)ye=Ce.defaultEncoding;else if(ye!=="buffer"&&!y.isEncoding(ye))throw new U(ye);typeof Re!="function"&&(Re=W)}if(se===null)throw new B;if(!Ce.objectMode)if(typeof se=="string")Ce.decodeStrings!==!1&&(se=y.from(se,ye),ye="buffer");else if(se instanceof y)ye="buffer";else if(m._isUint8Array(se))se=m._uint8ArrayToBuffer(se),ye="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],se);let je;return Ce.ending?je=new N:Ce.destroyed&&(je=new O("write")),je?(t.nextTick(Re,je),k(ie,je,!0),je):(Ce.pendingcb++,J(ie,Ce,se,ye,Re))}K.prototype.write=function(ie,se,ye){return V(this,ie,se,ye)===!0},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){let ie=this._writableState;ie.corked&&(ie.corked--,ie.writing||xe(this,ie))},K.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=c(ie)),!y.isEncoding(ie))throw new U(ie);return this._writableState.defaultEncoding=ie,this};function J(ie,se,ye,Re,Ce){let je=se.objectMode?1:ye.length;se.length+=je;let pe=se.length<se.highWaterMark;return pe||(se.needDrain=!0),se.writing||se.corked||se.errored||!se.constructed?(se.buffered.push({chunk:ye,encoding:Re,callback:Ce}),se.allBuffers&&Re!=="buffer"&&(se.allBuffers=!1),se.allNoop&&Ce!==W&&(se.allNoop=!1)):(se.writelen=je,se.writecb=Ce,se.writing=!0,se.sync=!0,ie._write(ye,Re,se.onwrite),se.sync=!1),pe&&!se.errored&&!se.destroyed}function Q(ie,se,ye,Re,Ce,je,pe){se.writelen=Re,se.writecb=pe,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new O("write")):ye?ie._writev(Ce,se.onwrite):ie._write(Ce,je,se.onwrite),se.sync=!1}function $(ie,se,ye,Re){--se.pendingcb,Re(ye),oe(se),k(ie,ye)}function F(ie,se){let ye=ie._writableState,Re=ye.sync,Ce=ye.writecb;if(typeof Ce!="function"){k(ie,new _);return}ye.writing=!1,ye.writecb=null,ye.length-=ye.writelen,ye.writelen=0,se?(se.stack,ye.errored||(ye.errored=se),ie._readableState&&!ie._readableState.errored&&(ie._readableState.errored=se),Re?t.nextTick($,ie,ye,se,Ce):$(ie,ye,se,Ce)):(ye.buffered.length>ye.bufferedIndex&&xe(ie,ye),Re?ye.afterWriteTickInfo!==null&&ye.afterWriteTickInfo.cb===Ce?ye.afterWriteTickInfo.count++:(ye.afterWriteTickInfo={count:1,cb:Ce,stream:ie,state:ye},t.nextTick(Z,ye.afterWriteTickInfo)):de(ie,ye,1,Ce))}function Z({stream:ie,state:se,count:ye,cb:Re}){return se.afterWriteTickInfo=null,de(ie,se,ye,Re)}function de(ie,se,ye,Re){for(!se.ending&&!ie.destroyed&&se.length===0&&se.needDrain&&(se.needDrain=!1,ie.emit("drain"));ye-- >0;)se.pendingcb--,Re();se.destroyed&&oe(se),le(ie,se)}function oe(ie){if(ie.writing)return;for(let Ce=ie.bufferedIndex;Ce<ie.buffered.length;++Ce){var se;let{chunk:je,callback:pe}=ie.buffered[Ce],Ue=ie.objectMode?1:je.length;ie.length-=Ue,pe((se=ie.errored)!==null&&se!==void 0?se:new O("write"))}let ye=ie[q].splice(0);for(let Ce=0;Ce<ye.length;Ce++){var Re;ye[Ce]((Re=ie.errored)!==null&&Re!==void 0?Re:new O("end"))}H(ie)}function xe(ie,se){if(se.corked||se.bufferProcessing||se.destroyed||!se.constructed)return;let{buffered:ye,bufferedIndex:Re,objectMode:Ce}=se,je=ye.length-Re;if(!je)return;let pe=Re;if(se.bufferProcessing=!0,je>1&&ie._writev){se.pendingcb-=je-1;let Ue=se.allNoop?W:Ie=>{for(let lt=pe;lt<ye.length;++lt)ye[lt].callback(Ie)},Ke=se.allNoop&&pe===0?ye:n(ye,pe);Ke.allBuffers=se.allBuffers,Q(ie,se,!0,se.length,Ke,"",Ue),H(se)}else{do{let{chunk:Ue,encoding:Ke,callback:Ie}=ye[pe];ye[pe++]=null;let lt=Ce?1:Ue.length;Q(ie,se,!1,lt,Ue,Ke,Ie)}while(pe<ye.length&&!se.writing);pe===ye.length?H(se):pe>256?(ye.splice(0,pe),se.bufferedIndex=0):se.bufferedIndex=pe}se.bufferProcessing=!1}K.prototype._write=function(ie,se,ye){if(this._writev)this._writev([{chunk:ie,encoding:se}],ye);else throw new w("_write()")},K.prototype._writev=null,K.prototype.end=function(ie,se,ye){let Re=this._writableState;typeof ie=="function"?(ye=ie,ie=null,se=null):typeof se=="function"&&(ye=se,se=null);let Ce;if(ie!=null){let je=V(this,ie,se);je instanceof i&&(Ce=je)}return Re.corked&&(Re.corked=1,this.uncork()),Ce||(!Re.errored&&!Re.ending?(Re.ending=!0,le(this,Re,!0),Re.ended=!0):Re.finished?Ce=new C("end"):Re.destroyed&&(Ce=new O("end"))),typeof ye=="function"&&(Ce||Re.finished?t.nextTick(ye,Ce):Re[q].push(ye)),this};function ae(ie){return ie.ending&&!ie.destroyed&&ie.constructed&&ie.length===0&&!ie.errored&&ie.buffered.length===0&&!ie.finished&&!ie.writing&&!ie.errorEmitted&&!ie.closeEmitted}function re(ie,se){let ye=!1;function Re(Ce){if(ye){k(ie,Ce??_());return}if(ye=!0,se.pendingcb--,Ce){let je=se[q].splice(0);for(let pe=0;pe<je.length;pe++)je[pe](Ce);k(ie,Ce,se.sync)}else ae(se)&&(se.prefinished=!0,ie.emit("prefinish"),se.pendingcb++,t.nextTick(ce,ie,se))}se.sync=!0,se.pendingcb++;try{ie._final(Re)}catch(Ce){Re(Ce)}se.sync=!1}function te(ie,se){!se.prefinished&&!se.finalCalled&&(typeof ie._final=="function"&&!se.destroyed?(se.finalCalled=!0,re(ie,se)):(se.prefinished=!0,ie.emit("prefinish")))}function le(ie,se,ye){ae(se)&&(te(ie,se),se.pendingcb===0&&(ye?(se.pendingcb++,t.nextTick((Re,Ce)=>{ae(Ce)?ce(Re,Ce):Ce.pendingcb--},ie,se)):ae(se)&&(se.pendingcb++,ce(ie,se))))}function ce(ie,se){se.pendingcb--,se.finished=!0;let ye=se[q].splice(0);for(let Re=0;Re<ye.length;Re++)ye[Re]();if(ie.emit("finish"),se.autoDestroy){let Re=ie._readableState;(!Re||Re.autoDestroy&&(Re.endEmitted||Re.readable===!1))&&ie.destroy()}}o(K.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ie){this._writableState&&(this._writableState.destroyed=ie)}},writable:{__proto__:null,get(){let ie=this._writableState;return!!ie&&ie.writable!==!1&&!ie.destroyed&&!ie.errored&&!ie.ending&&!ie.ended},set(ie){this._writableState&&(this._writableState.writable=!!ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let ie=this._writableState;return ie?!ie.destroyed&&!ie.ending&&ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ne=S.destroy;K.prototype.destroy=function(ie,se){let ye=this._writableState;return!ye.destroyed&&(ye.bufferedIndex<ye.buffered.length||ye[q].length)&&t.nextTick(oe,ye),ne.call(this,ie,se),this},K.prototype._undestroy=S.undestroy,K.prototype._destroy=function(ie,se){se(ie)},K.prototype[g.captureRejectionSymbol]=function(ie){this.destroy(ie)};var Le;function Se(){return Le===void 0&&(Le={}),Le}K.fromWeb=function(ie,se){return Se().newStreamWritableFromWritableStream(ie,se)},K.toWeb=function(ie){return Se().newWritableStreamFromStreamWritable(ie)}}),aG=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),n=(jr(),Nt(Ur)),{isReadable:i,isWritable:s,isIterable:a,isNodeStream:o,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:g}=sa(),m=so(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:b}}=mn(),{destroyer:E}=Iu(),x=Ys(),T=Bg(),w=IT(),{createDeferredPromise:_}=kn(),R=gN(),O=globalThis.Blob||n.Blob,C=typeof O<"u"?function(q){return q instanceof O}:function(q){return!1},B=globalThis.AbortController||Qc().AbortController,{FunctionPrototypeCall:N}=nr(),U=class extends x{constructor(q){super(q),q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function q(X,H){if(h(X))return X;if(u(X))return W({readable:X});if(c(X))return W({writable:X});if(o(X))return W({writable:!1,readable:!1});if(d(X))return W({readable:T.fromWeb(X)});if(g(X))return W({writable:w.fromWeb(X)});if(typeof X=="function"){let{value:V,write:J,final:Q,destroy:$}=k(X);if(a(V))return R(U,V,{objectMode:!0,write:J,final:Q,destroy:$});let F=V?.then;if(typeof F=="function"){let Z,de=N(F,V,oe=>{if(oe!=null)throw new b("nully","body",oe)},oe=>{E(Z,oe)});return Z=new U({objectMode:!0,readable:!1,write:J,final(oe){Q(async()=>{try{await de,t.nextTick(oe,null)}catch(xe){t.nextTick(oe,xe)}})},destroy:$})}throw new b("Iterable, AsyncIterable or AsyncFunction",H,V)}if(C(X))return q(X.arrayBuffer());if(a(X))return R(U,X,{objectMode:!0,writable:!1});if(d(X?.readable)&&g(X?.writable))return U.fromWeb(X);if(typeof X?.writable=="object"||typeof X?.readable=="object"){let V=X!=null&&X.readable?u(X?.readable)?X?.readable:q(X.readable):void 0,J=X!=null&&X.writable?c(X?.writable)?X?.writable:q(X.writable):void 0;return W({readable:V,writable:J})}let K=X?.then;if(typeof K=="function"){let V;return N(K,X,J=>{J!=null&&V.push(J),V.push(null)},J=>{E(V,J)}),V=new U({objectMode:!0,writable:!1,read(){}})}throw new S(H,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],X)};function k(q){let{promise:X,resolve:H}=_(),K=new B,V=K.signal;return{value:q((async function*(){for(;;){let J=X;X=null;let{chunk:Q,done:$,cb:F}=await J;if(t.nextTick(F),$)return;if(V.aborted)throw new y(void 0,{cause:V.reason});({promise:X,resolve:H}=_()),yield Q}})(),{signal:V}),write(J,Q,$){let F=H;H=null,F({chunk:J,done:!1,cb:$})},final(J){let Q=H;H=null,Q({done:!0,cb:J})},destroy(J,Q){K.abort(),Q(J)}}}function W(q){let X=q.readable&&typeof q.readable.read!="function"?T.wrap(q.readable):q.readable,H=q.writable,K=!!i(X),V=!!s(H),J,Q,$,F,Z;function de(oe){let xe=F;F=null,xe?xe(oe):oe&&Z.destroy(oe)}return Z=new U({readableObjectMode:!!(X!=null&&X.readableObjectMode),writableObjectMode:!!(H!=null&&H.writableObjectMode),readable:K,writable:V}),V&&(m(H,oe=>{V=!1,oe&&E(X,oe),de(oe)}),Z._write=function(oe,xe,ae){H.write(oe,xe)?ae():J=ae},Z._final=function(oe){H.end(),Q=oe},H.on("drain",function(){if(J){let oe=J;J=null,oe()}}),H.on("finish",function(){if(Q){let oe=Q;Q=null,oe()}})),K&&(m(X,oe=>{K=!1,oe&&E(X,oe),de(oe)}),X.on("readable",function(){if($){let oe=$;$=null,oe()}}),X.on("end",function(){Z.push(null)}),Z._read=function(){for(;;){let oe=X.read();if(oe===null){$=Z._read;return}if(!Z.push(oe))return}}),Z._destroy=function(oe,xe){!oe&&F!==null&&(oe=new y),$=null,J=null,Q=null,F===null?xe(oe):(F=xe,E(H,oe),E(X,oe))},Z}}),Ys=$e((r,e)=>{Me(),Be(),Ne();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:s}=nr();e.exports=u;var a=Bg(),o=IT();s(u.prototype,a.prototype),s(u,a);{let g=i(o.prototype);for(let m=0;m<g.length;m++){let y=g[m];u.prototype[y]||(u.prototype[y]=o.prototype[y])}}function u(g){if(!(this instanceof u))return new u(g);a.call(this,g),o.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(u.prototype,{writable:{__proto__:null,...n(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(o.prototype,"writableLength")},writableFinished:{__proto__:null,...n(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var c;function h(){return c===void 0&&(c={}),c}u.fromWeb=function(g,m){return h().newStreamDuplexFromReadableWritablePair(g,m)},u.toWeb=function(g){return h().newReadableWritablePairFromDuplex(g)};var d;u.from=function(g){return d||(d=aG()),d(g,"body")}}),mN=$e((r,e)=>{Me(),Be(),Ne();var{ObjectSetPrototypeOf:t,Symbol:n}=nr();e.exports=u;var{ERR_METHOD_NOT_IMPLEMENTED:i}=mn().codes,s=Ys(),{getHighWaterMark:a}=Ng();t(u.prototype,s.prototype),t(u,s);var o=n("kCallback");function u(d){if(!(this instanceof u))return new u(d);let g=d?a(this,d,"readableHighWaterMark",!0):null;g===0&&(d={...d,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:d.writableHighWaterMark||0}),s.call(this,d),this._readableState.sync=!1,this[o]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",h)}function c(d){typeof this._flush=="function"&&!this.destroyed?this._flush((g,m)=>{if(g){d?d(g):this.destroy(g);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function h(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(d,g,m){throw new i("_transform()")},u.prototype._write=function(d,g,m){let y=this._readableState,S=this._writableState,b=y.length;this._transform(d,g,(E,x)=>{if(E){m(E);return}x!=null&&this.push(x),S.ended||b===y.length||y.length<y.highWaterMark?m():this[o]=m})},u.prototype._read=function(){if(this[o]){let d=this[o];this[o]=null,d()}}}),yN=$e((r,e)=>{Me(),Be(),Ne();var{ObjectSetPrototypeOf:t}=nr();e.exports=i;var n=mN();t(i.prototype,n.prototype),t(i,n);function i(s){if(!(this instanceof i))return new i(s);n.call(this,s)}i.prototype._transform=function(s,a,o){o(null,s)}}),OT=$e((r,e)=>{Me(),Be(),Ne();var t=rl(),{ArrayIsArray:n,Promise:i,SymbolAsyncIterator:s,SymbolDispose:a}=nr(),o=so(),{once:u}=kn(),c=Iu(),h=Ys(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:E}=mn(),{validateFunction:x,validateAbortSignal:T}=wf(),{isIterable:w,isReadable:_,isReadableNodeStream:R,isNodeStream:O,isTransformStream:C,isWebStream:B,isReadableStream:N,isReadableFinished:U}=sa(),k=globalThis.AbortController||Qc().AbortController,W,q,X;function H(oe,xe,ae){let re=!1;oe.on("close",()=>{re=!0});let te=o(oe,{readable:xe,writable:ae},le=>{re=!le});return{destroy:le=>{re||(re=!0,c.destroyer(oe,le||new S("pipe")))},cleanup:te}}function K(oe){return x(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function V(oe){if(w(oe))return oe;if(R(oe))return J(oe);throw new g("val",["Readable","Iterable","AsyncIterable"],oe)}async function*J(oe){q||(q=Bg()),yield*q.prototype[s].call(oe)}async function Q(oe,xe,ae,{end:re}){let te,le=null,ce=Se=>{if(Se&&(te=Se),le){let ie=le;le=null,ie()}},ne=()=>new i((Se,ie)=>{te?ie(te):le=()=>{te?ie(te):Se()}});xe.on("drain",ce);let Le=o(xe,{readable:!1},ce);try{xe.writableNeedDrain&&await ne();for await(let Se of oe)xe.write(Se)||await ne();re&&(xe.end(),await ne()),ae()}catch(Se){ae(te!==Se?d(te,Se):Se)}finally{Le(),xe.off("drain",ce)}}async function $(oe,xe,ae,{end:re}){C(xe)&&(xe=xe.writable);let te=xe.getWriter();try{for await(let le of oe)await te.ready,te.write(le).catch(()=>{});await te.ready,re&&await te.close(),ae()}catch(le){try{await te.abort(le),ae(le)}catch(ce){ae(ce)}}}function F(...oe){return Z(oe,u(K(oe)))}function Z(oe,xe,ae){if(oe.length===1&&n(oe[0])&&(oe=oe[0]),oe.length<2)throw new y("streams");let re=new k,te=re.signal,le=ae?.signal,ce=[];T(le,"options.signal");function ne(){Ce(new E)}X=X||kn().addAbortListener;let Le;le&&(Le=X(le,ne));let Se,ie,se=[],ye=0;function Re(Ke){Ce(Ke,--ye===0)}function Ce(Ke,Ie){var lt;if(Ke&&(!Se||Se.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Se=Ke),!(!Se&&!Ie)){for(;se.length;)se.shift()(Se);(lt=Le)===null||lt===void 0||lt[a](),re.abort(),Ie&&(Se||ce.forEach(L=>L()),t.nextTick(xe,Se,ie))}}let je;for(let Ke=0;Ke<oe.length;Ke++){let Ie=oe[Ke],lt=Ke<oe.length-1,L=Ke>0,D=lt||ae?.end!==!1,G=Ke===oe.length-1;if(O(Ie)){let fe=function(ve){ve&&ve.name!=="AbortError"&&ve.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Re(ve)};if(D){let{destroy:ve,cleanup:Pe}=H(Ie,lt,L);se.push(ve),_(Ie)&&G&&ce.push(Pe)}Ie.on("error",fe),_(Ie)&&G&&ce.push(()=>{Ie.removeListener("error",fe)})}if(Ke===0)if(typeof Ie=="function"){if(je=Ie({signal:te}),!w(je))throw new m("Iterable, AsyncIterable or Stream","source",je)}else w(Ie)||R(Ie)||C(Ie)?je=Ie:je=h.from(Ie);else if(typeof Ie=="function"){if(C(je)){var pe;je=V((pe=je)===null||pe===void 0?void 0:pe.readable)}else je=V(je);if(je=Ie(je,{signal:te}),lt){if(!w(je,!0))throw new m("AsyncIterable",`transform[${Ke-1}]`,je)}else{var Ue;W||(W=yN());let fe=new W({objectMode:!0}),ve=(Ue=je)===null||Ue===void 0?void 0:Ue.then;if(typeof ve=="function")ye++,ve.call(je,me=>{ie=me,me!=null&&fe.write(me),D&&fe.end(),t.nextTick(Re)},me=>{fe.destroy(me),t.nextTick(Re,me)});else if(w(je,!0))ye++,Q(je,fe,Re,{end:D});else if(N(je)||C(je)){let me=je.readable||je;ye++,Q(me,fe,Re,{end:D})}else throw new m("AsyncIterable or Promise","destination",je);je=fe;let{destroy:Pe,cleanup:Ve}=H(je,!1,!0);se.push(Pe),G&&ce.push(Ve)}}else if(O(Ie)){if(R(je)){ye+=2;let fe=de(je,Ie,Re,{end:D});_(Ie)&&G&&ce.push(fe)}else if(C(je)||N(je)){let fe=je.readable||je;ye++,Q(fe,Ie,Re,{end:D})}else if(w(je))ye++,Q(je,Ie,Re,{end:D});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ie}else if(B(Ie)){if(R(je))ye++,$(V(je),Ie,Re,{end:D});else if(N(je)||w(je))ye++,$(je,Ie,Re,{end:D});else if(C(je))ye++,$(je.readable,Ie,Re,{end:D});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ie}else je=h.from(Ie)}return(te!=null&&te.aborted||le!=null&&le.aborted)&&t.nextTick(ne),je}function de(oe,xe,ae,{end:re}){let te=!1;if(xe.on("close",()=>{te||ae(new b)}),oe.pipe(xe,{end:!1}),re){let le=function(){te=!0,xe.end()};U(oe)?t.nextTick(le):oe.once("end",le)}else ae();return o(oe,{readable:!0,writable:!1},le=>{let ce=oe._readableState;le&&le.code==="ERR_STREAM_PREMATURE_CLOSE"&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?oe.once("end",ae).once("error",ae):ae(le)}),o(xe,{readable:!1,writable:!0},ae)}e.exports={pipelineImpl:Z,pipeline:F}}),vN=$e((r,e)=>{Me(),Be(),Ne();var{pipeline:t}=OT(),n=Ys(),{destroyer:i}=Iu(),{isNodeStream:s,isReadable:a,isWritable:o,isWebStream:u,isTransformStream:c,isWritableStream:h,isReadableStream:d}=sa(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:y}}=mn(),S=so();e.exports=function(...b){if(b.length===0)throw new y("streams");if(b.length===1)return n.from(b[0]);let E=[...b];if(typeof b[0]=="function"&&(b[0]=n.from(b[0])),typeof b[b.length-1]=="function"){let k=b.length-1;b[k]=n.from(b[k])}for(let k=0;k<b.length;++k)if(!(!s(b[k])&&!u(b[k]))){if(k<b.length-1&&!(a(b[k])||d(b[k])||c(b[k])))throw new m(`streams[${k}]`,E[k],"must be readable");if(k>0&&!(o(b[k])||h(b[k])||c(b[k])))throw new m(`streams[${k}]`,E[k],"must be writable")}let x,T,w,_,R;function O(k){let W=_;_=null,W?W(k):k?R.destroy(k):!U&&!N&&R.destroy()}let C=b[0],B=t(b,O),N=!!(o(C)||h(C)||c(C)),U=!!(a(B)||d(B)||c(B));if(R=new n({writableObjectMode:!!(C!=null&&C.writableObjectMode),readableObjectMode:!!(B!=null&&B.readableObjectMode),writable:N,readable:U}),N){if(s(C))R._write=function(W,q,X){C.write(W,q)?X():x=X},R._final=function(W){C.end(),T=W},C.on("drain",function(){if(x){let W=x;x=null,W()}});else if(u(C)){let W=(c(C)?C.writable:C).getWriter();R._write=async function(q,X,H){try{await W.ready,W.write(q).catch(()=>{}),H()}catch(K){H(K)}},R._final=async function(q){try{await W.ready,W.close().catch(()=>{}),T=q}catch(X){q(X)}}}let k=c(B)?B.readable:B;S(k,()=>{if(T){let W=T;T=null,W()}})}if(U){if(s(B))B.on("readable",function(){if(w){let k=w;w=null,k()}}),B.on("end",function(){R.push(null)}),R._read=function(){for(;;){let k=B.read();if(k===null){w=R._read;return}if(!R.push(k))return}};else if(u(B)){let k=(c(B)?B.readable:B).getReader();R._read=async function(){for(;;)try{let{value:W,done:q}=await k.read();if(!R.push(W))return;if(q){R.push(null);return}}catch{return}}}}return R._destroy=function(k,W){!k&&_!==null&&(k=new g),w=null,x=null,T=null,_===null?W(k):(_=W,s(B)&&i(B,k))},R}}),oG=$e((r,e)=>{Me(),Be(),Ne();var t=globalThis.AbortController||Qc().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:o}=mn(),{validateAbortSignal:u,validateInteger:c,validateObject:h}=wf(),d=nr().Symbol("kWeak"),g=nr().Symbol("kResistStopPropagation"),{finished:m}=so(),y=vN(),{addAbortSignalNoValidate:S}=Mg(),{isWritable:b,isNodeStream:E}=sa(),{deprecate:x}=kn(),{ArrayPrototypePush:T,Boolean:w,MathFloor:_,Number:R,NumberIsNaN:O,Promise:C,PromiseReject:B,PromiseResolve:N,PromisePrototypeThen:U,Symbol:k}=nr(),W=k("kEmpty"),q=k("kEof");function X(le,ce){if(ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),E(le)&&!b(le))throw new n("stream",le,"must be writable");let ne=y(this,le);return ce!=null&&ce.signal&&S(ce.signal,ne),ne}function H(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal");let ne=1;ce?.concurrency!=null&&(ne=_(ce.concurrency));let Le=ne-1;return ce?.highWaterMark!=null&&(Le=_(ce.highWaterMark)),c(ne,"options.concurrency",1),c(Le,"options.highWaterMark",0),Le+=ne,(async function*(){let Se=kn().AbortSignalAny([ce?.signal].filter(w)),ie=this,se=[],ye={signal:Se},Re,Ce,je=!1,pe=0;function Ue(){je=!0,Ke()}function Ke(){pe-=1,Ie()}function Ie(){Ce&&!je&&pe<ne&&se.length<Le&&(Ce(),Ce=null)}async function lt(){try{for await(let L of ie){if(je)return;if(Se.aborted)throw new o;try{if(L=le(L,ye),L===W)continue;L=N(L)}catch(D){L=B(D)}pe+=1,U(L,Ke,Ue),se.push(L),Re&&(Re(),Re=null),!je&&(se.length>=Le||pe>=ne)&&await new C(D=>{Ce=D})}se.push(q)}catch(L){let D=B(L);U(D,Ke,Ue),se.push(D)}finally{je=!0,Re&&(Re(),Re=null)}}lt();try{for(;;){for(;se.length>0;){let L=await se[0];if(L===q)return;if(Se.aborted)throw new o;L!==W&&(yield L),se.shift(),Ie()}await new C(L=>{Re=L})}}finally{je=!0,Ce&&(Ce(),Ce=null)}}).call(this)}function K(le=void 0){return le!=null&&h(le,"options"),le?.signal!=null&&u(le.signal,"options.signal"),(async function*(){let ce=0;for await(let Le of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o({cause:le.signal.reason});yield[ce++,Le]}}).call(this)}async function V(le,ce=void 0){for await(let ne of F.call(this,le,ce))return!0;return!1}async function J(le,ce=void 0){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);return!await V.call(this,async(...ne)=>!await le(...ne),ce)}async function Q(le,ce){for await(let ne of F.call(this,le,ce))return ne}async function $(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Le,Se){return await le(Le,Se),W}for await(let Le of H.call(this,ne,ce));}function F(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Le,Se){return await le(Le,Se)?Le:W}return H.call(this,ne,ce)}var Z=class extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function de(le,ce,ne){var Le;if(typeof le!="function")throw new i("reducer",["Function","AsyncFunction"],le);ne!=null&&h(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal");let Se=arguments.length>1;if(ne!=null&&(Le=ne.signal)!==null&&Le!==void 0&&Le.aborted){let Ce=new o(void 0,{cause:ne.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(Ce)),Ce}let ie=new t,se=ie.signal;if(ne!=null&&ne.signal){let Ce={once:!0,[d]:this,[g]:!0};ne.signal.addEventListener("abort",()=>ie.abort(),Ce)}let ye=!1;try{for await(let Ce of this){var Re;if(ye=!0,ne!=null&&(Re=ne.signal)!==null&&Re!==void 0&&Re.aborted)throw new o;Se?ce=await le(ce,Ce,{signal:se}):(ce=Ce,Se=!0)}if(!ye&&!Se)throw new Z}finally{ie.abort()}return ce}async function oe(le){le!=null&&h(le,"options"),le?.signal!=null&&u(le.signal,"options.signal");let ce=[];for await(let Le of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o(void 0,{cause:le.signal.reason});T(ce,Le)}return ce}function xe(le,ce){let ne=H.call(this,le,ce);return(async function*(){for await(let Le of ne)yield*Le}).call(this)}function ae(le){if(le=R(le),O(le))return 0;if(le<0)throw new a("number",">= 0",le);return le}function re(le,ce=void 0){return ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),le=ae(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let Se of this){var Le;if(ce!=null&&(Le=ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new o;le--<=0&&(yield Se)}}).call(this)}function te(le,ce=void 0){return ce!=null&&h(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal"),le=ae(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let Se of this){var Le;if(ce!=null&&(Le=ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new o;if(le-- >0&&(yield Se),le<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:x(K,"readable.asIndexedPairs will be removed in a future version."),drop:re,filter:F,flatMap:xe,map:H,take:te,compose:X},e.exports.promiseReturningOperators={every:J,forEach:$,reduce:de,toArray:oe,some:V,find:Q}}),bN=$e((r,e)=>{Me(),Be(),Ne();var{ArrayPrototypePop:t,Promise:n}=nr(),{isIterable:i,isNodeStream:s,isWebStream:a}=sa(),{pipelineImpl:o}=OT(),{finished:u}=so();SN();function c(...h){return new n((d,g)=>{let m,y,S=h[h.length-1];if(S&&typeof S=="object"&&!s(S)&&!i(S)&&!a(S)){let b=t(h);m=b.signal,y=b.end}o(h,(b,E)=>{b?g(b):d(E)},{signal:m,end:y})})}e.exports={finished:u,pipeline:c}}),SN=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:s}=nr(),{promisify:{custom:a}}=kn(),{streamReturningOperators:o,promiseReturningOperators:u}=oG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=mn(),h=vN(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:g}=Ng(),{pipeline:m}=OT(),{destroyer:y}=Iu(),S=so(),b=bN(),E=sa(),x=e.exports=wT().Stream;x.isDestroyed=E.isDestroyed,x.isDisturbed=E.isDisturbed,x.isErrored=E.isErrored,x.isReadable=E.isReadable,x.isWritable=E.isWritable,x.Readable=Bg();for(let w of i(o)){let _=function(...O){if(new.target)throw c();return x.Readable.from(s(R,this,O))},R=o[w];n(_,"name",{__proto__:null,value:R.name}),n(_,"length",{__proto__:null,value:R.length}),n(x.Readable.prototype,w,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let w of i(u)){let _=function(...O){if(new.target)throw c();return s(R,this,O)},R=u[w];n(_,"name",{__proto__:null,value:R.name}),n(_,"length",{__proto__:null,value:R.length}),n(x.Readable.prototype,w,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}x.Writable=IT(),x.Duplex=Ys(),x.Transform=mN(),x.PassThrough=yN(),x.pipeline=m;var{addAbortSignal:T}=Mg();x.addAbortSignal=T,x.finished=S,x.destroy=y,x.compose=h,x.setDefaultHighWaterMark=d,x.getDefaultHighWaterMark=g,n(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),n(m,a,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),n(S,a,{__proto__:null,enumerable:!0,get(){return b.finished}}),x.Stream=x,x._isUint8Array=function(w){return w instanceof Uint8Array},x._uint8ArrayToBuffer=function(w){return t.from(w.buffer,w.byteOffset,w.byteLength)}}),nl=$e((r,e)=>{Me(),Be(),Ne();var t=SN(),n=bN(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),lG=$e((r,e)=>{Me(),Be(),Ne(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),uG=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),n=Symbol.for("BufferList");function i(s){if(!(this instanceof i))return new i(s);i._init.call(this,s)}i._init=function(s){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},i.prototype._new=function(s){return new i(s)},i.prototype._offset=function(s){if(s===0)return[0,0];let a=0;for(let o=0;o<this._bufs.length;o++){let u=a+this._bufs[o].length;if(s<u||o===this._bufs.length-1)return[o,s-a];a=u}},i.prototype._reverseOffset=function(s){let a=s[0],o=s[1];for(let u=0;u<a;u++)o+=this._bufs[u].length;return o},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(s){if(s>this.length||s<0)return;let a=this._offset(s);return this._bufs[a[0]][a[1]]},i.prototype.slice=function(s,a){return typeof s=="number"&&s<0&&(s+=this.length),typeof a=="number"&&a<0&&(a+=this.length),this.copy(null,0,s,a)},i.prototype.copy=function(s,a,o,u){if((typeof o!="number"||o<0)&&(o=0),(typeof u!="number"||u>this.length)&&(u=this.length),o>=this.length||u<=0)return s||t.alloc(0);let c=!!s,h=this._offset(o),d=u-o,g=d,m=c&&a||0,y=h[1];if(o===0&&u===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(s,m),m+=this._bufs[S].length;return s}if(g<=this._bufs[h[0]].length-y)return c?this._bufs[h[0]].copy(s,a,y,y+g):this._bufs[h[0]].slice(y,y+g);c||(s=t.allocUnsafe(d));for(let S=h[0];S<this._bufs.length;S++){let b=this._bufs[S].length-y;if(g>b)this._bufs[S].copy(s,m,y),m+=b;else{this._bufs[S].copy(s,m,y,y+g),m+=b;break}g-=b,y&&(y=0)}return s.length>m?s.slice(0,m):s},i.prototype.shallowSlice=function(s,a){if(s=s||0,a=typeof a!="number"?this.length:a,s<0&&(s+=this.length),a<0&&(a+=this.length),s===a)return this._new();let o=this._offset(s),u=this._offset(a),c=this._bufs.slice(o[0],u[0]+1);return u[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,u[1]),o[1]!==0&&(c[0]=c[0].slice(o[1])),this._new(c)},i.prototype.toString=function(s,a,o){return this.slice(a,o).toString(s)},i.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},i.prototype.duplicate=function(){let s=this._new();for(let a=0;a<this._bufs.length;a++)s.append(this._bufs[a]);return s},i.prototype.append=function(s){return this._attach(s,i.prototype._appendBuffer)},i.prototype.prepend=function(s){return this._attach(s,i.prototype._prependBuffer,!0)},i.prototype._attach=function(s,a,o){if(s==null)return this;if(s.buffer)a.call(this,t.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s)){let[u,c]=o?[s.length-1,-1]:[0,1];for(let h=u;h>=0&&h<s.length;h+=c)this._attach(s[h],a,o)}else if(this._isBufferList(s)){let[u,c]=o?[s._bufs.length-1,-1]:[0,1];for(let h=u;h>=0&&h<s._bufs.length;h+=c)this._attach(s._bufs[h],a,o)}else typeof s=="number"&&(s=s.toString()),a.call(this,t.from(s));return this},i.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},i.prototype._prependBuffer=function(s){this._bufs.unshift(s),this.length+=s.length},i.prototype.indexOf=function(s,a,o){if(o===void 0&&typeof a=="string"&&(o=a,a=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=t.from([s]):typeof s=="string"?s=t.from(s,o):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=t.from(s.buffer,s.byteOffset,s.byteLength):t.isBuffer(s)||(s=t.from(s)),a=Number(a||0),isNaN(a)&&(a=0),a<0&&(a=this.length+a),a<0&&(a=0),s.length===0)return a>this.length?this.length:a;let u=this._offset(a),c=u[0],h=u[1];for(;c<this._bufs.length;c++){let d=this._bufs[c];for(;h<d.length;)if(d.length-h>=s.length){let g=d.indexOf(s,h);if(g!==-1)return this._reverseOffset([c,g]);h=d.length-s.length+1}else{let g=this._reverseOffset([c,h]);if(this._match(g,s))return g;h++}h=0}return-1},i.prototype._match=function(s,a){if(this.length-s<a.length)return!1;for(let o=0;o<a.length;o++)if(this.get(s+o)!==a[o])return!1;return!0},(function(){let s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let a in s)(function(o){s[o]===null?i.prototype[o]=function(u,c){return this.slice(u,u+c)[o](0,c)}:i.prototype[o]=function(u=0){return this.slice(u,u+s[o])[o](0)}})(a)})(),i.prototype._isBufferList=function(s){return s instanceof i||i.isBufferList(s)},i.isBufferList=function(s){return s!=null&&s[n]},e.exports=i}),cG=$e((r,e)=>{Me(),Be(),Ne();var t=nl().Duplex,n=lG(),i=uG();function s(a){if(!(this instanceof s))return new s(a);if(typeof a=="function"){this._callback=a;let o=(function(u){this._callback&&(this._callback(u),this._callback=null)}).bind(this);this.on("pipe",function(u){u.on("error",o)}),this.on("unpipe",function(u){u.removeListener("error",o)}),a=null}i._init.call(this,a),t.call(this)}n(s,t),Object.assign(s.prototype,i.prototype),s.prototype._new=function(a){return new s(a)},s.prototype._write=function(a,o,u){this._appendBuffer(a),typeof u=="function"&&u()},s.prototype._read=function(a){if(!this.length)return this.push(null);a=Math.min(a,this.length),this.push(this.slice(0,a)),this.consume(a)},s.prototype.end=function(a){t.prototype.end.call(this,a),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(a,o){this._bufs.length=0,this.length=0,o(a)},s.prototype._isBufferList=function(a){return a instanceof s||a instanceof i||s.isBufferList(a)},s.isBufferList=i.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=i}),fG=$e((r,e)=>{Me(),Be(),Ne();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),xN=$e((r,e)=>{Me(),Be(),Ne();var t=e.exports,{Buffer:n}=(jr(),Nt(Ur));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let s in t.requiredHeaderFlags){let a=t.requiredHeaderFlags[s];t.requiredHeaderFlagsErrors[s]="Invalid header flag bits, must be 0x"+a.toString(16)+" for "+t.types[s]+" packet"}t.codes={};for(let s in t.types){let a=t.types[s];t.codes[a]=s}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let s in t.properties){let a=t.properties[s];t.propertiesCodes[a]=s}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function i(s){return[0,1,2].map(a=>[0,1].map(o=>[0,1].map(u=>{let c=n.alloc(1);return c.writeUInt8(t.codes[s]<<t.CMD_SHIFT|(o?t.DUP_MASK:0)|a<<t.QOS_SHIFT|u,0,!0),c})))}t.PUBLISH_HEADER=i("publish"),t.SUBSCRIBE_HEADER=i("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=i("unsubscribe"),t.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(s=>n.from([s])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),hG=$e((r,e)=>{Me(),Be(),Ne();var t=1e3,n=t*60,i=n*60,s=i*24,a=s*7,o=s*365.25;e.exports=function(g,m){m=m||{};var y=typeof g;if(y==="string"&&g.length>0)return u(g);if(y==="number"&&isFinite(g))return m.long?h(g):c(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function u(g){if(g=String(g),!(g.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(m){var y=parseFloat(m[1]),S=(m[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return y*o;case"weeks":case"week":case"w":return y*a;case"days":case"day":case"d":return y*s;case"hours":case"hour":case"hrs":case"hr":case"h":return y*i;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(g){var m=Math.abs(g);return m>=s?Math.round(g/s)+"d":m>=i?Math.round(g/i)+"h":m>=n?Math.round(g/n)+"m":m>=t?Math.round(g/t)+"s":g+"ms"}function h(g){var m=Math.abs(g);return m>=s?d(g,m,s,"day"):m>=i?d(g,m,i,"hour"):m>=n?d(g,m,n,"minute"):m>=t?d(g,m,t,"second"):g+" ms"}function d(g,m,y,S){var b=m>=y*1.5;return Math.round(g/y)+" "+S+(b?"s":"")}}),dG=$e((r,e)=>{Me(),Be(),Ne();function t(n){s.debug=s,s.default=s,s.coerce=d,s.disable=c,s.enable=o,s.enabled=h,s.humanize=hG(),s.destroy=g,Object.keys(n).forEach(m=>{s[m]=n[m]}),s.names=[],s.skips=[],s.formatters={};function i(m){let y=0;for(let S=0;S<m.length;S++)y=(y<<5)-y+m.charCodeAt(S),y|=0;return s.colors[Math.abs(y)%s.colors.length]}s.selectColor=i;function s(m){let y,S=null,b,E;function x(...T){if(!x.enabled)return;let w=x,_=Number(new Date),R=_-(y||_);w.diff=R,w.prev=y,w.curr=_,y=_,T[0]=s.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let O=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(C,B)=>{if(C==="%%")return"%";O++;let N=s.formatters[B];if(typeof N=="function"){let U=T[O];C=N.call(w,U),T.splice(O,1),O--}return C}),s.formatArgs.call(w,T),(w.log||s.log).apply(w,T)}return x.namespace=m,x.useColors=s.useColors(),x.color=s.selectColor(m),x.extend=a,x.destroy=s.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(b!==s.namespaces&&(b=s.namespaces,E=s.enabled(m)),E),set:T=>{S=T}}),typeof s.init=="function"&&s.init(x),x}function a(m,y){let S=s(this.namespace+(typeof y>"u"?":":y)+m);return S.log=this.log,S}function o(m){s.save(m),s.namespaces=m,s.names=[],s.skips=[];let y=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let S of y)S[0]==="-"?s.skips.push(S.slice(1)):s.names.push(S)}function u(m,y){let S=0,b=0,E=-1,x=0;for(;S<m.length;)if(b<y.length&&(y[b]===m[S]||y[b]==="*"))y[b]==="*"?(E=b,x=S,b++):(S++,b++);else if(E!==-1)b=E+1,x++,S=x;else return!1;for(;b<y.length&&y[b]==="*";)b++;return b===y.length}function c(){let m=[...s.names,...s.skips.map(y=>"-"+y)].join(",");return s.enable(""),m}function h(m){for(let y of s.skips)if(u(m,y))return!1;for(let y of s.names)if(u(m,y))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}e.exports=t}),Xs=$e((r,e)=>{Me(),Be(),Ne(),r.formatArgs=n,r.save=i,r.load=s,r.useColors=t,r.storage=a(),r.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;u.splice(1,0,c,"color: inherit");let h=0,d=0;u[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(d=h))}),u.splice(d,0,c)}r.log=console.debug||console.log||(()=>{});function i(u){try{u?r.storage.setItem("debug",u):r.storage.removeItem("debug")}catch{}}function s(){let u;try{u=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!u&&typeof zt<"u"&&"env"in zt&&(u=zt.env.DEBUG),u}function a(){try{return localStorage}catch{}}e.exports=dG()(r);var{formatters:o}=e.exports;o.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),pG=$e((r,e)=>{Me(),Be(),Ne();var t=cG(),{EventEmitter:n}=(tl(),Nt(io)),i=fG(),s=xN(),a=Xs()("mqtt-packet:parser"),o=class cx extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof cx?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new cx().parser(c)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),a("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),h=c>>s.CMD_SHIFT;this.packet.cmd=s.types[h];let d=c&15,g=s.requiredHeaderFlags[h];return g!=null&&d!==g?this._emitError(new Error(s.requiredHeaderFlagsErrors[h])):(this.packet.retain=(c&s.RETAIN_MASK)!==0,this.packet.qos=c>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&s.DUP_MASK)!==0,a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),a("_parseLength %d",c.value),!!c}_parsePayload(){a("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return a("_parsePayload complete result: %s",c),c}_parseConnect(){a("_parseConnect");let c,h,d,g,m={},y=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;let b=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(m.will)y.will={},y.will.retain=b,y.will.qos=E;else{if(b)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(y.properties=T)}let x=this._parseString();if(x===null)return this._emitError(new Error("Packet too short"));if(y.clientId=x,a("_parseConnect: packet.clientId: %s",y.clientId),m.will){if(y.protocolVersion===5){let T=this._parseProperties();Object.getOwnPropertyNames(T).length&&(y.will.properties=T)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=c,a("_parseConnect: packet.will.topic: %s",y.will.topic),h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=h,a("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(m.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));y.username=g,a("_parseConnect: packet.username: %s",y.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));y.password=d}return this.settings=y,a("_parseConnect: complete"),y}_parseConnack(){a("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let h=this._list.readUInt8(this._pos++);if(h>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(h&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(c.properties=d)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}c.payload=this._list.slice(this._pos,c.length),a("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){a("_parseSubscribe");let c=this.packet,h,d,g,m,y,S,b;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(c.properties=E)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=d&s.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(d>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(d>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));b={topic:h,qos:g},this.settings.protocolVersion===5?(b.nl=S,b.rap=y,b.rh=m):this.settings.bridgeMode&&(b.rh=0,b.rap=!0,b.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",b),c.subscriptions.push(b)}}}_parseSuback(){a("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!s.MQTT5_SUBACK_CODES[h])return this._emitError(new Error("Invalid suback code"))}else if(h>2&&h!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(h)}}}_parseUnsubscribe(){a("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let h=this._parseString();if(h===null)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",h),c.unsubscriptions.push(h)}}}_parseUnsuback(){a("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let h=this._parseProperties();for(Object.getOwnPropertyNames(h).length&&(c.properties=h),c.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}a("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}}return!0}_parseDisconnect(){let c=this.packet;if(a("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let h=this._parseProperties();return Object.getOwnPropertyNames(h).length&&(c.properties=h),a("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let h=this._parseNum(),d=h+this._pos;if(h===-1||d>this._list.length||d>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,d);return this._pos+=h,a("_parseString: result: %s",g),g}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),h=c+this._pos;if(c===-1||h>this._list.length||h>this.packet.length)return null;let d=this._list.slice(this._pos,h);return this._pos+=c,a("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){a("_parseVarByteNum");let h=4,d=0,g=1,m=0,y=!1,S,b=this._pos?this._pos:0;for(;d<h&&b+d<this._list.length;){if(S=this._list.readUInt8(b+d++),m+=g*(S&s.VARBYTEINT_MASK),g*=128,(S&s.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=d)break}return!y&&d===h&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=d),y?c?y={bytes:d,value:m}:y=m:y=!1,a("_parseVarByteNum: result: %o",y),y}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",c),c}_parseByType(c){switch(a("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");let c=this._parseVarByteNum(),h=this._pos+c,d={};for(;this._pos<h;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let m=s.propertiesCodes[g];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let y=this._parseByType(s.propertiesTypes[m]);if(d[m][y.name])if(Array.isArray(d[m][y.name]))d[m][y.name].push(y.value);else{let S=d[m][y.name];d[m][y.name]=[S],d[m][y.name].push(y.value)}else d[m][y.name]=y.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(s.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(s.propertiesTypes[m]))):d[m]=this._parseByType(s.propertiesTypes[m])}return d}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(c){a("_emitError",c),this.error=c,this.emit("error",c)}};e.exports=o}),gG=$e((r,e)=>{Me(),Be(),Ne();var{Buffer:t}=(jr(),Nt(Ur)),n=65536,i={},s=t.isBuffer(t.from([1,2]).subarray(0,1));function a(h){let d=t.allocUnsafe(2);return d.writeUInt8(h>>8,0),d.writeUInt8(h&255,1),d}function o(){for(let h=0;h<n;h++)i[h]=a(h)}function u(h){let d=0,g=0,m=t.allocUnsafe(4);do d=h%128|0,h=h/128|0,h>0&&(d=d|128),m.writeUInt8(d,g++);while(h>0&&g<4);return h>0&&(g=0),s?m.subarray(0,g):m.slice(0,g)}function c(h){let d=t.allocUnsafe(4);return d.writeUInt32BE(h,0),d}e.exports={cache:i,generateCache:o,generateNumber:a,genBufVariableByteInt:u,generate4ByteBuffer:c}}),mG=$e((r,e)=>{Me(),Be(),Ne(),typeof zt>"u"||!zt.version||zt.version.indexOf("v0.")===0||zt.version.indexOf("v1.")===0&&zt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=zt;function t(n,i,s,a){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,u,c;switch(o){case 0:case 1:return zt.nextTick(n);case 2:return zt.nextTick(function(){n.call(null,i)});case 3:return zt.nextTick(function(){n.call(null,i,s)});case 4:return zt.nextTick(function(){n.call(null,i,s,a)});default:for(u=new Array(o-1),c=0;c<u.length;)u[c++]=arguments[c];return zt.nextTick(function(){n.apply(null,u)})}}}),EN=$e((r,e)=>{Me(),Be(),Ne();var t=xN(),{Buffer:n}=(jr(),Nt(Ur)),i=n.allocUnsafe(0),s=n.from([0]),a=gG(),o=mG().nextTick,u=Xs()("mqtt-packet:writeToStream"),c=a.cache,h=a.generateNumber,d=a.generateCache,g=a.genBufVariableByteInt,m=a.generate4ByteBuffer,y=K,S=!0;function b(ae,re,te){switch(u("generate called"),re.cork&&(re.cork(),o(E,re)),S&&(S=!1,d()),u("generate: packet.cmd: %s",ae.cmd),ae.cmd){case"connect":return x(ae,re);case"connack":return T(ae,re,te);case"publish":return w(ae,re,te);case"puback":case"pubrec":case"pubrel":case"pubcomp":return _(ae,re,te);case"subscribe":return R(ae,re,te);case"suback":return O(ae,re,te);case"unsubscribe":return C(ae,re,te);case"unsuback":return B(ae,re,te);case"pingreq":case"pingresp":return N(ae,re);case"disconnect":return U(ae,re,te);case"auth":return k(ae,re,te);default:return re.destroy(new Error("Unknown command")),!1}}Object.defineProperty(b,"cacheNumbers",{get(){return y===K},set(ae){ae?((!c||Object.keys(c).length===0)&&(S=!0),y=K):(S=!1,y=V)}});function E(ae){ae.uncork()}function x(ae,re,te){let le=ae||{},ce=le.protocolId||"MQTT",ne=le.protocolVersion||4,Le=le.will,Se=le.clean,ie=le.keepalive||0,se=le.clientId||"",ye=le.username,Re=le.password,Ce=le.properties;Se===void 0&&(Se=!0);let je=0;if(typeof ce!="string"&&!n.isBuffer(ce))return re.destroy(new Error("Invalid protocolId")),!1;if(je+=ce.length+2,ne!==3&&ne!==4&&ne!==5)return re.destroy(new Error("Invalid protocol version")),!1;if(je+=1,(typeof se=="string"||n.isBuffer(se))&&(se||ne>=4)&&(se||Se))je+=n.byteLength(se)+2;else{if(ne<4)return re.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Se*1===0)return re.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof ie!="number"||ie<0||ie>65535||ie%1!==0)return re.destroy(new Error("Invalid keepalive")),!1;je+=2,je+=1;let pe,Ue;if(ne===5){if(pe=$(re,Ce),!pe)return!1;je+=pe.length}if(Le){if(typeof Le!="object")return re.destroy(new Error("Invalid will")),!1;if(!Le.topic||typeof Le.topic!="string")return re.destroy(new Error("Invalid will topic")),!1;if(je+=n.byteLength(Le.topic)+2,je+=2,Le.payload)if(Le.payload.length>=0)typeof Le.payload=="string"?je+=n.byteLength(Le.payload):je+=Le.payload.length;else return re.destroy(new Error("Invalid will payload")),!1;if(Ue={},ne===5){if(Ue=$(re,Le.properties),!Ue)return!1;je+=Ue.length}}let Ke=!1;if(ye!=null)if(xe(ye))Ke=!0,je+=n.byteLength(ye)+2;else return re.destroy(new Error("Invalid username")),!1;if(Re!=null){if(!Ke)return re.destroy(new Error("Username is required to use password")),!1;if(xe(Re))je+=oe(Re)+2;else return re.destroy(new Error("Invalid password")),!1}re.write(t.CONNECT_HEADER),q(re,je),Q(re,ce),le.bridgeMode&&(ne+=128),re.write(ne===131?t.VERSION131:ne===132?t.VERSION132:ne===4?t.VERSION4:ne===5?t.VERSION5:t.VERSION3);let Ie=0;return Ie|=ye!=null?t.USERNAME_MASK:0,Ie|=Re!=null?t.PASSWORD_MASK:0,Ie|=Le&&Le.retain?t.WILL_RETAIN_MASK:0,Ie|=Le&&Le.qos?Le.qos<<t.WILL_QOS_SHIFT:0,Ie|=Le?t.WILL_FLAG_MASK:0,Ie|=Se?t.CLEAN_SESSION_MASK:0,re.write(n.from([Ie])),y(re,ie),ne===5&&pe.write(),Q(re,se),Le&&(ne===5&&Ue.write(),X(re,Le.topic),Q(re,Le.payload)),ye!=null&&Q(re,ye),Re!=null&&Q(re,Re),!0}function T(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=le===5?ce.reasonCode:ce.returnCode,Le=ce.properties,Se=2;if(typeof ne!="number")return re.destroy(new Error("Invalid return code")),!1;let ie=null;if(le===5){if(ie=$(re,Le),!ie)return!1;Se+=ie.length}return re.write(t.CONNACK_HEADER),q(re,Se),re.write(ce.sessionPresent?t.SESSIONPRESENT_HEADER:s),re.write(n.from([ne])),ie?.write(),!0}function w(ae,re,te){u("publish: packet: %o",ae);let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.qos||0,Le=ce.retain?t.RETAIN_MASK:0,Se=ce.topic,ie=ce.payload||i,se=ce.messageId,ye=ce.properties,Re=0;if(typeof Se=="string")Re+=n.byteLength(Se)+2;else if(n.isBuffer(Se))Re+=Se.length+2;else return re.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(ie)?Re+=ie.length:Re+=n.byteLength(ie),ne&&typeof se!="number")return re.destroy(new Error("Invalid messageId")),!1;ne&&(Re+=2);let Ce=null;if(le===5){if(Ce=$(re,ye),!Ce)return!1;Re+=Ce.length}return re.write(t.PUBLISH_HEADER[ne][ce.dup?1:0][Le?1:0]),q(re,Re),y(re,oe(Se)),re.write(Se),ne>0&&y(re,se),Ce?.write(),u("publish: payload: %o",ie),re.write(ie)}function _(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.cmd||"puback",Le=ce.messageId,Se=ce.dup&&ne==="pubrel"?t.DUP_MASK:0,ie=0,se=ce.reasonCode,ye=ce.properties,Re=le===5?3:2;if(ne==="pubrel"&&(ie=1),typeof Le!="number")return re.destroy(new Error("Invalid messageId")),!1;let Ce=null;if(le===5&&typeof ye=="object"){if(Ce=F(re,ye,te,Re),!Ce)return!1;Re+=Ce.length}return re.write(t.ACKS[ne][ie][Se][0]),Re===3&&(Re+=se!==0?1:-1),q(re,Re),y(re,Le),le===5&&Re!==2&&re.write(n.from([se])),Ce!==null?Ce.write():Re===4&&re.write(n.from([0])),!0}function R(ae,re,te){u("subscribe: packet: ");let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.dup?t.DUP_MASK:0,Le=ce.messageId,Se=ce.subscriptions,ie=ce.properties,se=0;if(typeof Le!="number")return re.destroy(new Error("Invalid messageId")),!1;se+=2;let ye=null;if(le===5){if(ye=$(re,ie),!ye)return!1;se+=ye.length}if(typeof Se=="object"&&Se.length)for(let Ce=0;Ce<Se.length;Ce+=1){let je=Se[Ce].topic,pe=Se[Ce].qos;if(typeof je!="string")return re.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof pe!="number")return re.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(le===5){if(typeof(Se[Ce].nl||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Se[Ce].rap||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Ue=Se[Ce].rh||0;if(typeof Ue!="number"||Ue>2)return re.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}se+=n.byteLength(je)+2+1}else return re.destroy(new Error("Invalid subscriptions")),!1;u("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),re.write(t.SUBSCRIBE_HEADER[1][ne?1:0][0]),q(re,se),y(re,Le),ye!==null&&ye.write();let Re=!0;for(let Ce of Se){let je=Ce.topic,pe=Ce.qos,Ue=+Ce.nl,Ke=+Ce.rap,Ie=Ce.rh,lt;X(re,je),lt=t.SUBSCRIBE_OPTIONS_QOS[pe],le===5&&(lt|=Ue?t.SUBSCRIBE_OPTIONS_NL:0,lt|=Ke?t.SUBSCRIBE_OPTIONS_RAP:0,lt|=Ie?t.SUBSCRIBE_OPTIONS_RH[Ie]:0),Re=re.write(n.from([lt]))}return Re}function O(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.granted,Se=ce.properties,ie=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(ie+=2,typeof Le=="object"&&Le.length)for(let ye=0;ye<Le.length;ye+=1){if(typeof Le[ye]!="number")return re.destroy(new Error("Invalid qos vector")),!1;ie+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let se=null;if(le===5){if(se=F(re,Se,te,ie),!se)return!1;ie+=se.length}return re.write(t.SUBACK_HEADER),q(re,ie),y(re,ne),se!==null&&se.write(),re.write(n.from(Le))}function C(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.dup?t.DUP_MASK:0,Se=ce.unsubscriptions,ie=ce.properties,se=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(se+=2,typeof Se=="object"&&Se.length)for(let Ce=0;Ce<Se.length;Ce+=1){if(typeof Se[Ce]!="string")return re.destroy(new Error("Invalid unsubscriptions")),!1;se+=n.byteLength(Se[Ce])+2}else return re.destroy(new Error("Invalid unsubscriptions")),!1;let ye=null;if(le===5){if(ye=$(re,ie),!ye)return!1;se+=ye.length}re.write(t.UNSUBSCRIBE_HEADER[1][Le?1:0][0]),q(re,se),y(re,ne),ye!==null&&ye.write();let Re=!0;for(let Ce=0;Ce<Se.length;Ce++)Re=X(re,Se[Ce]);return Re}function B(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.messageId,Le=ce.dup?t.DUP_MASK:0,Se=ce.granted,ie=ce.properties,se=ce.cmd,ye=0,Re=2;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(le===5)if(typeof Se=="object"&&Se.length)for(let je=0;je<Se.length;je+=1){if(typeof Se[je]!="number")return re.destroy(new Error("Invalid qos vector")),!1;Re+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let Ce=null;if(le===5){if(Ce=F(re,ie,te,Re),!Ce)return!1;Re+=Ce.length}return re.write(t.ACKS[se][ye][Le][0]),q(re,Re),y(re,ne),Ce!==null&&Ce.write(),le===5&&re.write(n.from(Se)),!0}function N(ae,re,te){return re.write(t.EMPTY[ae.cmd])}function U(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.reasonCode,Le=ce.properties,Se=le===5?1:0,ie=null;if(le===5){if(ie=F(re,Le,te,Se),!ie)return!1;Se+=ie.length}return re.write(n.from([t.codes.disconnect<<4])),q(re,Se),le===5&&re.write(n.from([ne])),ie!==null&&ie.write(),!0}function k(ae,re,te){let le=te?te.protocolVersion:4,ce=ae||{},ne=ce.reasonCode,Le=ce.properties,Se=le===5?1:0;le!==5&&re.destroy(new Error("Invalid mqtt version for auth packet"));let ie=F(re,Le,te,Se);return ie?(Se+=ie.length,re.write(n.from([t.codes.auth<<4])),q(re,Se),re.write(n.from([ne])),ie!==null&&ie.write(),!0):!1}var W={};function q(ae,re){if(re>t.VARBYTEINT_MAX)return ae.destroy(new Error(`Invalid variable byte integer: ${re}`)),!1;let te=W[re];return te||(te=g(re),re<16384&&(W[re]=te)),u("writeVarByteInt: writing to stream: %o",te),ae.write(te)}function X(ae,re){let te=n.byteLength(re);return y(ae,te),u("writeString: %s",re),ae.write(re,"utf8")}function H(ae,re,te){X(ae,re),X(ae,te)}function K(ae,re){return u("writeNumberCached: number: %d",re),u("writeNumberCached: %o",c[re]),ae.write(c[re])}function V(ae,re){let te=h(re);return u("writeNumberGenerated: %o",te),ae.write(te)}function J(ae,re){let te=m(re);return u("write4ByteNumber: %o",te),ae.write(te)}function Q(ae,re){typeof re=="string"?X(ae,re):re?(y(ae,re.length),ae.write(re)):y(ae,0)}function $(ae,re){if(typeof re!="object"||re.length!=null)return{length:1,write(){de(ae,{},0)}};let te=0;function le(ce,ne){let Le=t.propertiesTypes[ce],Se=0;switch(Le){case"byte":{if(typeof ne!="boolean")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=2;break}case"int8":{if(typeof ne!="number"||ne<0||ne>255)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=2;break}case"binary":{if(ne&&ne===null)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=1+n.byteLength(ne)+2;break}case"int16":{if(typeof ne!="number"||ne<0||ne>65535)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=3;break}case"int32":{if(typeof ne!="number"||ne<0||ne>4294967295)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=5;break}case"var":{if(typeof ne!="number"||ne<0||ne>268435455)return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=1+n.byteLength(g(ne));break}case"string":{if(typeof ne!="string")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=3+n.byteLength(ne.toString());break}case"pair":{if(typeof ne!="object")return ae.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=Object.getOwnPropertyNames(ne).reduce((ie,se)=>{let ye=ne[se];return Array.isArray(ye)?ie+=ye.reduce((Re,Ce)=>(Re+=3+n.byteLength(se.toString())+2+n.byteLength(Ce.toString()),Re),0):ie+=3+n.byteLength(se.toString())+2+n.byteLength(ne[se].toString()),ie},0);break}default:return ae.destroy(new Error(`Invalid property ${ce}: ${ne}`)),!1}return Se}if(re)for(let ce in re){let ne=0,Le=0,Se=re[ce];if(Se!==void 0){if(Array.isArray(Se))for(let ie=0;ie<Se.length;ie++){if(Le=le(ce,Se[ie]),!Le)return!1;ne+=Le}else{if(Le=le(ce,Se),!Le)return!1;ne=Le}if(!ne)return!1;te+=ne}}return{length:n.byteLength(g(te))+te,write(){de(ae,re,te)}}}function F(ae,re,te,le){let ce=["reasonString","userProperties"],ne=te&&te.properties&&te.properties.maximumPacketSize?te.properties.maximumPacketSize:0,Le=$(ae,re);if(ne)for(;le+Le.length>ne;){let Se=ce.shift();if(Se&&re[Se])delete re[Se],Le=$(ae,re);else return!1}return Le}function Z(ae,re,te){switch(t.propertiesTypes[re]){case"byte":{ae.write(n.from([t.properties[re]])),ae.write(n.from([+te]));break}case"int8":{ae.write(n.from([t.properties[re]])),ae.write(n.from([te]));break}case"binary":{ae.write(n.from([t.properties[re]])),Q(ae,te);break}case"int16":{ae.write(n.from([t.properties[re]])),y(ae,te);break}case"int32":{ae.write(n.from([t.properties[re]])),J(ae,te);break}case"var":{ae.write(n.from([t.properties[re]])),q(ae,te);break}case"string":{ae.write(n.from([t.properties[re]])),X(ae,te);break}case"pair":{Object.getOwnPropertyNames(te).forEach(le=>{let ce=te[le];Array.isArray(ce)?ce.forEach(ne=>{ae.write(n.from([t.properties[re]])),H(ae,le.toString(),ne.toString())}):(ae.write(n.from([t.properties[re]])),H(ae,le.toString(),ce.toString()))});break}default:return ae.destroy(new Error(`Invalid property ${re} value: ${te}`)),!1}}function de(ae,re,te){q(ae,te);for(let le in re)if(Object.prototype.hasOwnProperty.call(re,le)&&re[le]!=null){let ce=re[le];if(Array.isArray(ce))for(let ne=0;ne<ce.length;ne++)Z(ae,le,ce[ne]);else Z(ae,le,ce)}}function oe(ae){return ae?ae instanceof n?ae.length:n.byteLength(ae):0}function xe(ae){return typeof ae=="string"||ae instanceof n}e.exports=b}),yG=$e((r,e)=>{Me(),Be(),Ne();var t=EN(),{EventEmitter:n}=(tl(),Nt(io)),{Buffer:i}=(jr(),Nt(Ur));function s(o,u){let c=new a;return t(o,c,u),c.concat()}var a=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0,u=new Array(this._array.length),c=this._array,h=0,d;for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?u[d]=c[d].length:u[d]=i.byteLength(c[d]),o+=u[d];let g=i.allocUnsafe(o);for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?(c[d].copy(g,h),h+=u[d]):(g.write(c[d],h),h+=u[d]);return g}destroy(o){o&&this.emit("error",o)}};e.exports=s}),vG=$e(r=>{Me(),Be(),Ne(),r.parser=pG().parser,r.generate=yG(),r.writeToStream=EN()}),bG=$e((r,e)=>{Me(),Be(),Ne(),e.exports=n;function t(s){return s instanceof Rp?Rp.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function n(s){if(s=s||{},s.circles)return i(s);let a=new Map;if(a.set(Date,d=>new Date(d)),a.set(Map,(d,g)=>new Map(u(Array.from(d),g))),a.set(Set,(d,g)=>new Set(u(Array.from(d),g))),s.constructorHandlers)for(let d of s.constructorHandlers)a.set(d[0],d[1]);let o=null;return s.proto?h:c;function u(d,g){let m=Object.keys(d),y=new Array(m.length);for(let S=0;S<m.length;S++){let b=m[S],E=d[b];typeof E!="object"||E===null?y[b]=E:E.constructor!==Object&&(o=a.get(E.constructor))?y[b]=o(E,g):ArrayBuffer.isView(E)?y[b]=t(E):y[b]=g(E)}return y}function c(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return u(d,c);if(d.constructor!==Object&&(o=a.get(d.constructor)))return o(d,c);let g={};for(let m in d){if(Object.hasOwnProperty.call(d,m)===!1)continue;let y=d[m];typeof y!="object"||y===null?g[m]=y:y.constructor!==Object&&(o=a.get(y.constructor))?g[m]=o(y,c):ArrayBuffer.isView(y)?g[m]=t(y):g[m]=c(y)}return g}function h(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return u(d,h);if(d.constructor!==Object&&(o=a.get(d.constructor)))return o(d,h);let g={};for(let m in d){let y=d[m];typeof y!="object"||y===null?g[m]=y:y.constructor!==Object&&(o=a.get(y.constructor))?g[m]=o(y,h):ArrayBuffer.isView(y)?g[m]=t(y):g[m]=h(y)}return g}}function i(s){let a=[],o=[],u=new Map;if(u.set(Date,m=>new Date(m)),u.set(Map,(m,y)=>new Map(h(Array.from(m),y))),u.set(Set,(m,y)=>new Set(h(Array.from(m),y))),s.constructorHandlers)for(let m of s.constructorHandlers)u.set(m[0],m[1]);let c=null;return s.proto?g:d;function h(m,y){let S=Object.keys(m),b=new Array(S.length);for(let E=0;E<S.length;E++){let x=S[E],T=m[x];if(typeof T!="object"||T===null)b[x]=T;else if(T.constructor!==Object&&(c=u.get(T.constructor)))b[x]=c(T,y);else if(ArrayBuffer.isView(T))b[x]=t(T);else{let w=a.indexOf(T);w!==-1?b[x]=o[w]:b[x]=y(T)}}return b}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return h(m,d);if(m.constructor!==Object&&(c=u.get(m.constructor)))return c(m,d);let y={};a.push(m),o.push(y);for(let S in m){if(Object.hasOwnProperty.call(m,S)===!1)continue;let b=m[S];if(typeof b!="object"||b===null)y[S]=b;else if(b.constructor!==Object&&(c=u.get(b.constructor)))y[S]=c(b,d);else if(ArrayBuffer.isView(b))y[S]=t(b);else{let E=a.indexOf(b);E!==-1?y[S]=o[E]:y[S]=d(b)}}return a.pop(),o.pop(),y}function g(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return h(m,g);if(m.constructor!==Object&&(c=u.get(m.constructor)))return c(m,g);let y={};a.push(m),o.push(y);for(let S in m){let b=m[S];if(typeof b!="object"||b===null)y[S]=b;else if(b.constructor!==Object&&(c=u.get(b.constructor)))y[S]=c(b,g);else if(ArrayBuffer.isView(b))y[S]=t(b);else{let E=a.indexOf(b);E!==-1?y[S]=o[E]:y[S]=g(b)}}return a.pop(),o.pop(),y}}}),SG=$e((r,e)=>{Me(),Be(),Ne(),e.exports=bG()()}),xG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let i=n.split("/");for(let s=0;s<i.length;s++)if(i[s]!=="+"){if(i[s]==="#")return s===i.length-1;if(i[s].indexOf("+")!==-1||i[s].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let i=0;i<n.length;i++)if(!e(n[i]))return n[i];return null}}),TN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=nl(),t={objectMode:!0},n={clean:!0},i=class{options;_inflights;constructor(s){this.options=s||{},this.options={...n,...s},this._inflights=new Map}put(s,a){return this._inflights.set(s.messageId,s),a&&a(),this}createStream(){let s=new e.Readable(t),a=[],o=!1,u=0;return this._inflights.forEach((c,h)=>{a.push(c)}),s._read=()=>{!o&&u<a.length?s.push(a[u++]):s.push(null)},s.destroy=c=>{if(!o)return o=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,a){let o=this._inflights.get(s.messageId);return o?(this._inflights.delete(s.messageId),a(null,o)):a&&a(new Error("missing packet")),this}get(s,a){let o=this._inflights.get(s.messageId);return o?a(null,o):a&&a(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}};r.default=i}),EG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,i,s)=>{n.log("handlePublish: packet %o",i),s=typeof s<"u"?s:n.noop;let a=i.topic.toString(),o=i.payload,{qos:u}=i,{messageId:c}=i,{options:h}=n;if(n.options.protocolVersion===5){let d;if(i.properties&&(d=i.properties.topicAlias),typeof d<"u")if(a.length===0)if(d>0&&d<=65535){let g=n.topicAliasRecv.getTopicByAlias(d);if(g)a=g,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",a,d);else{n.log("handlePublish :: unregistered topic alias. alias: %d",d),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(a,d))n.log("handlePublish :: registered topic: %s - alias: %d",a,d);else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",u),u){case 2:{h.customHandleAcks(a,o,i,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));g?n._sendPacket({cmd:"pubrec",messageId:c,reasonCode:g},s):n.incomingStore.put(i,()=>{n._sendPacket({cmd:"pubrec",messageId:c},s)})});break}case 1:{h.customHandleAcks(a,o,i,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for puback"));g||n.emit("message",a,o,i),n.handleMessage(i,m=>{if(m)return s&&s(m);n._sendPacket({cmd:"puback",messageId:c,reasonCode:g},s)})});break}case 0:n.emit("message",a,o,i),n.handleMessage(i,s);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),TG=$e((r,e)=>{e.exports={version:"5.14.1"}}),Ou=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithSubackPacket=r.ErrorWithReasonCode=void 0,r.applyMixin=n;var e=class AN extends Error{code;constructor(s,a){super(s),this.code=a,Object.setPrototypeOf(this,AN.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;var t=class _N extends Error{packet;constructor(s,a){super(s),this.packet=a,Object.setPrototypeOf(this,_N.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};r.ErrorWithSubackPacket=t;function n(i,s,a=!1){let o=[s];for(;;){let u=o[0],c=Object.getPrototypeOf(u);if(c?.prototype)o.unshift(c);else break}for(let u of o)for(let c of Object.getOwnPropertyNames(u.prototype))(a||c!=="constructor")&&Object.defineProperty(i.prototype,c,Object.getOwnPropertyDescriptor(u.prototype,c)??Object.create(null))}r.nextTick=typeof zt?.nextTick=="function"?zt.nextTick:i=>{setTimeout(i,0)},r.MQTTJS_VERSION=TG().version}),Ug=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=Ou();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,i)=>{let{messageId:s}=i,a=i.cmd,o=null,u=n.outgoing[s]?n.outgoing[s].cb:null,c=null;if(!u){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",a),a){case"pubcomp":case"puback":{let h=i.reasonCode;h&&h>0&&h!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[h]}`,h),n._removeOutgoingAndStoreMessage(s,()=>{u(c,i)})):n._removeOutgoingAndStoreMessage(s,u);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:s};let h=i.reasonCode;h&&h>0&&h!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[h]}`,h),n._removeOutgoingAndStoreMessage(s,()=>{u(c,i)})):n._sendPacket(o);break}case"suback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s);let h=i.granted;for(let d=0;d<h.length;d++){let g=h[d];if((g&128)!==0){c=new Error(`Subscribe error: ${r.ReasonCodes[g]}`),c.code=g;let m=n.messageIdToTopic[s];m&&m.forEach(y=>{delete n._resubscribeTopics[y]})}}delete n.messageIdToTopic[s],n._invokeStoreProcessingQueue(),u(c,i);break}case"unsuback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s),n._invokeStoreProcessingQueue(),u(null,i);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),AG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=Ou(),t=Ug(),n=(i,s)=>{let{options:a}=i,o=a.protocolVersion,u=o===5?s.reasonCode:s.returnCode;if(o!==5){let c=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,u);i.emit("error",c);return}i.handleAuth(s,(c,h)=>{if(c){i.emit("error",c);return}if(u===24)i.reconnecting=!1,i._sendPacket(h);else{let d=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[u]}`,u);i.emit("error",d)}})};r.default=n}),_G=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof zt=="object"&&zt?zt:{},i=(m,y,S,b)=>{typeof n.emitWarning=="function"?n.emitWarning(m,y,S,b):console.error(`[${S}] ${y}: ${m}`)},s=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof s>"u"){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(S,b){this._onabort.push(b)}},s=class{constructor(){y()}signal=new a;abort(S){if(!this.signal.aborted){this.signal.reason=S,this.signal.aborted=!0;for(let b of this.signal._onabort)b(S);this.signal.onabort?.(S)}}};let m=n.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",y=()=>{m&&(m=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",y))}}var o=m=>!t.has(m),u=m=>m&&m===Math.floor(m)&&m>0&&isFinite(m),c=m=>u(m)?m<=Math.pow(2,8)?Uint8Array:m<=Math.pow(2,16)?Uint16Array:m<=Math.pow(2,32)?Uint32Array:m<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(m){super(m),this.fill(0)}},d=class Fc{heap;length;static#l=!1;static create(y){let S=c(y);if(!S)return[];Fc.#l=!0;let b=new Fc(y,S);return Fc.#l=!1,b}constructor(y,S){if(!Fc.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new S(y),this.length=0}push(y){this.heap[this.length++]=y}pop(){return this.heap[--this.length]}},g=class wN{#l;#f;#g;#m;#L;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#u;#h;#o;#s;#v;#a;#b;#S;#d;#x;#w;#c;static unsafeExposeInternals(y){return{starts:y.#S,ttls:y.#d,sizes:y.#b,keyMap:y.#n,keyList:y.#r,valList:y.#e,next:y.#u,prev:y.#h,get head(){return y.#o},get tail(){return y.#s},free:y.#v,isBackgroundFetch:S=>y.#t(S),backgroundFetch:(S,b,E,x)=>y.#k(S,b,E,x),moveToTail:S=>y.#R(S),indexes:S=>y.#E(S),rindexes:S=>y.#T(S),isStale:S=>y.#p(S)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#L}get memoMethod(){return this.#C}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(y){let{max:S=0,ttl:b,ttlResolution:E=1,ttlAutopurge:x,updateAgeOnGet:T,updateAgeOnHas:w,allowStale:_,dispose:R,disposeAfter:O,noDisposeOnSet:C,noUpdateTTL:B,maxSize:N=0,maxEntrySize:U=0,sizeCalculation:k,fetchMethod:W,memoMethod:q,noDeleteOnFetchRejection:X,noDeleteOnStaleGet:H,allowStaleOnFetchRejection:K,allowStaleOnFetchAbort:V,ignoreFetchAbort:J}=y;if(S!==0&&!u(S))throw new TypeError("max option must be a nonnegative integer");let Q=S?c(S):Array;if(!Q)throw new Error("invalid max value: "+S);if(this.#l=S,this.#f=N,this.maxEntrySize=U||this.#f,this.sizeCalculation=k,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(q!==void 0&&typeof q!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#C=q,W!==void 0&&typeof W!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=W,this.#w=!!W,this.#n=new Map,this.#r=new Array(S).fill(void 0),this.#e=new Array(S).fill(void 0),this.#u=new Q(S),this.#h=new Q(S),this.#o=0,this.#s=0,this.#v=d.create(S),this.#i=0,this.#y=0,typeof R=="function"&&(this.#g=R),typeof O=="function"?(this.#m=O,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#x=!!this.#g,this.#c=!!this.#m,this.noDisposeOnSet=!!C,this.noUpdateTTL=!!B,this.noDeleteOnFetchRejection=!!X,this.allowStaleOnFetchRejection=!!K,this.allowStaleOnFetchAbort=!!V,this.ignoreFetchAbort=!!J,this.maxEntrySize!==0){if(this.#f!==0&&!u(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!_,this.noDeleteOnStaleGet=!!H,this.updateAgeOnGet=!!T,this.updateAgeOnHas=!!w,this.ttlResolution=u(E)||E===0?E:1,this.ttlAutopurge=!!x,this.ttl=b||0,this.ttl){if(!u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let $="LRU_CACHE_UNBOUNDED";o($)&&(t.add($),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",$,wN))}}getRemainingTTL(y){return this.#n.has(y)?1/0:0}#M(){let y=new h(this.#l),S=new h(this.#l);this.#d=y,this.#S=S,this.#N=(x,T,w=e.now())=>{if(S[x]=T!==0?w:0,y[x]=T,T!==0&&this.ttlAutopurge){let _=setTimeout(()=>{this.#p(x)&&this.#A(this.#r[x],"expire")},T+1);_.unref&&_.unref()}},this.#I=x=>{S[x]=y[x]!==0?e.now():0},this.#_=(x,T)=>{if(y[T]){let w=y[T],_=S[T];if(!w||!_)return;x.ttl=w,x.start=_,x.now=b||E();let R=x.now-_;x.remainingTTL=w-R}};let b=0,E=()=>{let x=e.now();if(this.ttlResolution>0){b=x;let T=setTimeout(()=>b=0,this.ttlResolution);T.unref&&T.unref()}return x};this.getRemainingTTL=x=>{let T=this.#n.get(x);if(T===void 0)return 0;let w=y[T],_=S[T];if(!w||!_)return 1/0;let R=(b||E())-_;return w-R},this.#p=x=>{let T=S[x],w=y[x];return!!w&&!!T&&(b||E())-T>w}}#I=()=>{};#_=()=>{};#N=()=>{};#p=()=>!1;#$(){let y=new h(this.#l);this.#y=0,this.#b=y,this.#O=S=>{this.#y-=y[S],y[S]=0},this.#B=(S,b,E,x)=>{if(this.#t(b))return 0;if(!u(E))if(x){if(typeof x!="function")throw new TypeError("sizeCalculation must be a function");if(E=x(b,S),!u(E))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return E},this.#P=(S,b,E)=>{if(y[S]=b,this.#f){let x=this.#f-y[S];for(;this.#y>x;)this.#D(!0)}this.#y+=y[S],E&&(E.entrySize=b,E.totalCalculatedSize=this.#y)}}#O=y=>{};#P=(y,S,b)=>{};#B=(y,S,b,E)=>{if(b||E)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:y=this.allowStale}={}){if(this.#i)for(let S=this.#s;!(!this.#U(S)||((y||!this.#p(S))&&(yield S),S===this.#o));)S=this.#h[S]}*#T({allowStale:y=this.allowStale}={}){if(this.#i)for(let S=this.#o;!(!this.#U(S)||((y||!this.#p(S))&&(yield S),S===this.#s));)S=this.#u[S]}#U(y){return y!==void 0&&this.#n.get(this.#r[y])===y}*entries(){for(let y of this.#E())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*rentries(){for(let y of this.#T())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*keys(){for(let y of this.#E()){let S=this.#r[y];S!==void 0&&!this.#t(this.#e[y])&&(yield S)}}*rkeys(){for(let y of this.#T()){let S=this.#r[y];S!==void 0&&!this.#t(this.#e[y])&&(yield S)}}*values(){for(let y of this.#E())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}*rvalues(){for(let y of this.#T())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(y,S={}){for(let b of this.#E()){let E=this.#e[b],x=this.#t(E)?E.__staleWhileFetching:E;if(x!==void 0&&y(x,this.#r[b],this))return this.get(this.#r[b],S)}}forEach(y,S=this){for(let b of this.#E()){let E=this.#e[b],x=this.#t(E)?E.__staleWhileFetching:E;x!==void 0&&y.call(S,x,this.#r[b],this)}}rforEach(y,S=this){for(let b of this.#T()){let E=this.#e[b],x=this.#t(E)?E.__staleWhileFetching:E;x!==void 0&&y.call(S,x,this.#r[b],this)}}purgeStale(){let y=!1;for(let S of this.#T({allowStale:!0}))this.#p(S)&&(this.#A(this.#r[S],"expire"),y=!0);return y}info(y){let S=this.#n.get(y);if(S===void 0)return;let b=this.#e[S],E=this.#t(b)?b.__staleWhileFetching:b;if(E===void 0)return;let x={value:E};if(this.#d&&this.#S){let T=this.#d[S],w=this.#S[S];if(T&&w){let _=T-(e.now()-w);x.ttl=_,x.start=Date.now()}}return this.#b&&(x.size=this.#b[S]),x}dump(){let y=[];for(let S of this.#E({allowStale:!0})){let b=this.#r[S],E=this.#e[S],x=this.#t(E)?E.__staleWhileFetching:E;if(x===void 0||b===void 0)continue;let T={value:x};if(this.#d&&this.#S){T.ttl=this.#d[S];let w=e.now()-this.#S[S];T.start=Math.floor(Date.now()-w)}this.#b&&(T.size=this.#b[S]),y.unshift([b,T])}return y}load(y){this.clear();for(let[S,b]of y){if(b.start){let E=Date.now()-b.start;b.start=e.now()-E}this.set(S,b.value,b)}}set(y,S,b={}){if(S===void 0)return this.delete(y),this;let{ttl:E=this.ttl,start:x,noDisposeOnSet:T=this.noDisposeOnSet,sizeCalculation:w=this.sizeCalculation,status:_}=b,{noUpdateTTL:R=this.noUpdateTTL}=b,O=this.#B(y,S,b.size||0,w);if(this.maxEntrySize&&O>this.maxEntrySize)return _&&(_.set="miss",_.maxEntrySizeExceeded=!0),this.#A(y,"set"),this;let C=this.#i===0?void 0:this.#n.get(y);if(C===void 0)C=this.#i===0?this.#s:this.#v.length!==0?this.#v.pop():this.#i===this.#l?this.#D(!1):this.#i,this.#r[C]=y,this.#e[C]=S,this.#n.set(y,C),this.#u[this.#s]=C,this.#h[C]=this.#s,this.#s=C,this.#i++,this.#P(C,O,_),_&&(_.set="add"),R=!1;else{this.#R(C);let B=this.#e[C];if(S!==B){if(this.#w&&this.#t(B)){B.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:N}=B;N!==void 0&&!T&&(this.#x&&this.#g?.(N,y,"set"),this.#c&&this.#a?.push([N,y,"set"]))}else T||(this.#x&&this.#g?.(B,y,"set"),this.#c&&this.#a?.push([B,y,"set"]));if(this.#O(C),this.#P(C,O,_),this.#e[C]=S,_){_.set="replace";let N=B&&this.#t(B)?B.__staleWhileFetching:B;N!==void 0&&(_.oldValue=N)}}else _&&(_.set="update")}if(E!==0&&!this.#d&&this.#M(),this.#d&&(R||this.#N(C,E,x),_&&this.#_(_,C)),!T&&this.#c&&this.#a){let B=this.#a,N;for(;N=B?.shift();)this.#m?.(...N)}return this}pop(){try{for(;this.#i;){let y=this.#e[this.#o];if(this.#D(!0),this.#t(y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(this.#c&&this.#a){let y=this.#a,S;for(;S=y?.shift();)this.#m?.(...S)}}}#D(y){let S=this.#o,b=this.#r[S],E=this.#e[S];return this.#w&&this.#t(E)?E.__abortController.abort(new Error("evicted")):(this.#x||this.#c)&&(this.#x&&this.#g?.(E,b,"evict"),this.#c&&this.#a?.push([E,b,"evict"])),this.#O(S),y&&(this.#r[S]=void 0,this.#e[S]=void 0,this.#v.push(S)),this.#i===1?(this.#o=this.#s=0,this.#v.length=0):this.#o=this.#u[S],this.#n.delete(b),this.#i--,S}has(y,S={}){let{updateAgeOnHas:b=this.updateAgeOnHas,status:E}=S,x=this.#n.get(y);if(x!==void 0){let T=this.#e[x];if(this.#t(T)&&T.__staleWhileFetching===void 0)return!1;if(this.#p(x))E&&(E.has="stale",this.#_(E,x));else return b&&this.#I(x),E&&(E.has="hit",this.#_(E,x)),!0}else E&&(E.has="miss");return!1}peek(y,S={}){let{allowStale:b=this.allowStale}=S,E=this.#n.get(y);if(E===void 0||!b&&this.#p(E))return;let x=this.#e[E];return this.#t(x)?x.__staleWhileFetching:x}#k(y,S,b,E){let x=S===void 0?void 0:this.#e[S];if(this.#t(x))return x;let T=new s,{signal:w}=b;w?.addEventListener("abort",()=>T.abort(w.reason),{signal:T.signal});let _={signal:T.signal,options:b,context:E},R=(k,W=!1)=>{let{aborted:q}=T.signal,X=b.ignoreFetchAbort&&k!==void 0;if(b.status&&(q&&!W?(b.status.fetchAborted=!0,b.status.fetchError=T.signal.reason,X&&(b.status.fetchAbortIgnored=!0)):b.status.fetchResolved=!0),q&&!X&&!W)return C(T.signal.reason);let H=N;return this.#e[S]===N&&(k===void 0?H.__staleWhileFetching?this.#e[S]=H.__staleWhileFetching:this.#A(y,"fetch"):(b.status&&(b.status.fetchUpdated=!0),this.set(y,k,_.options))),k},O=k=>(b.status&&(b.status.fetchRejected=!0,b.status.fetchError=k),C(k)),C=k=>{let{aborted:W}=T.signal,q=W&&b.allowStaleOnFetchAbort,X=q||b.allowStaleOnFetchRejection,H=X||b.noDeleteOnFetchRejection,K=N;if(this.#e[S]===N&&(!H||K.__staleWhileFetching===void 0?this.#A(y,"fetch"):q||(this.#e[S]=K.__staleWhileFetching)),X)return b.status&&K.__staleWhileFetching!==void 0&&(b.status.returnedStale=!0),K.__staleWhileFetching;if(K.__returned===K)throw k},B=(k,W)=>{let q=this.#L?.(y,x,_);q&&q instanceof Promise&&q.then(X=>k(X===void 0?void 0:X),W),T.signal.addEventListener("abort",()=>{(!b.ignoreFetchAbort||b.allowStaleOnFetchAbort)&&(k(void 0),b.allowStaleOnFetchAbort&&(k=X=>R(X,!0)))})};b.status&&(b.status.fetchDispatched=!0);let N=new Promise(B).then(R,O),U=Object.assign(N,{__abortController:T,__staleWhileFetching:x,__returned:void 0});return S===void 0?(this.set(y,U,{..._.options,status:void 0}),S=this.#n.get(y)):this.#e[S]=U,U}#t(y){if(!this.#w)return!1;let S=y;return!!S&&S instanceof Promise&&S.hasOwnProperty("__staleWhileFetching")&&S.__abortController instanceof s}async fetch(y,S={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:x=this.noDeleteOnStaleGet,ttl:T=this.ttl,noDisposeOnSet:w=this.noDisposeOnSet,size:_=0,sizeCalculation:R=this.sizeCalculation,noUpdateTTL:O=this.noUpdateTTL,noDeleteOnFetchRejection:C=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:B=this.allowStaleOnFetchRejection,ignoreFetchAbort:N=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:k,forceRefresh:W=!1,status:q,signal:X}=S;if(!this.#w)return q&&(q.fetch="get"),this.get(y,{allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:x,status:q});let H={allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:x,ttl:T,noDisposeOnSet:w,size:_,sizeCalculation:R,noUpdateTTL:O,noDeleteOnFetchRejection:C,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:U,ignoreFetchAbort:N,status:q,signal:X},K=this.#n.get(y);if(K===void 0){q&&(q.fetch="miss");let V=this.#k(y,K,H,k);return V.__returned=V}else{let V=this.#e[K];if(this.#t(V)){let F=b&&V.__staleWhileFetching!==void 0;return q&&(q.fetch="inflight",F&&(q.returnedStale=!0)),F?V.__staleWhileFetching:V.__returned=V}let J=this.#p(K);if(!W&&!J)return q&&(q.fetch="hit"),this.#R(K),E&&this.#I(K),q&&this.#_(q,K),V;let Q=this.#k(y,K,H,k),$=Q.__staleWhileFetching!==void 0&&b;return q&&(q.fetch=J?"stale":"refresh",$&&J&&(q.returnedStale=!0)),$?Q.__staleWhileFetching:Q.__returned=Q}}async forceFetch(y,S={}){let b=await this.fetch(y,S);if(b===void 0)throw new Error("fetch() returned undefined");return b}memo(y,S={}){let b=this.#C;if(!b)throw new Error("no memoMethod provided to constructor");let{context:E,forceRefresh:x,...T}=S,w=this.get(y,T);if(!x&&w!==void 0)return w;let _=b(y,w,{options:T,context:E});return this.set(y,_,T),_}get(y,S={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:x=this.noDeleteOnStaleGet,status:T}=S,w=this.#n.get(y);if(w!==void 0){let _=this.#e[w],R=this.#t(_);return T&&this.#_(T,w),this.#p(w)?(T&&(T.get="stale"),R?(T&&b&&_.__staleWhileFetching!==void 0&&(T.returnedStale=!0),b?_.__staleWhileFetching:void 0):(x||this.#A(y,"expire"),T&&b&&(T.returnedStale=!0),b?_:void 0)):(T&&(T.get="hit"),R?_.__staleWhileFetching:(this.#R(w),E&&this.#I(w),_))}else T&&(T.get="miss")}#j(y,S){this.#h[S]=y,this.#u[y]=S}#R(y){y!==this.#s&&(y===this.#o?this.#o=this.#u[y]:this.#j(this.#h[y],this.#u[y]),this.#j(this.#s,y),this.#s=y)}delete(y){return this.#A(y,"delete")}#A(y,S){let b=!1;if(this.#i!==0){let E=this.#n.get(y);if(E!==void 0)if(b=!0,this.#i===1)this.#F(S);else{this.#O(E);let x=this.#e[E];if(this.#t(x)?x.__abortController.abort(new Error("deleted")):(this.#x||this.#c)&&(this.#x&&this.#g?.(x,y,S),this.#c&&this.#a?.push([x,y,S])),this.#n.delete(y),this.#r[E]=void 0,this.#e[E]=void 0,E===this.#s)this.#s=this.#h[E];else if(E===this.#o)this.#o=this.#u[E];else{let T=this.#h[E];this.#u[T]=this.#u[E];let w=this.#u[E];this.#h[w]=this.#h[E]}this.#i--,this.#v.push(E)}}if(this.#c&&this.#a?.length){let E=this.#a,x;for(;x=E?.shift();)this.#m?.(...x)}return b}clear(){return this.#F("delete")}#F(y){for(let S of this.#T({allowStale:!0})){let b=this.#e[S];if(this.#t(b))b.__abortController.abort(new Error("deleted"));else{let E=this.#r[S];this.#x&&this.#g?.(b,E,y),this.#c&&this.#a?.push([b,E,y])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#S&&(this.#d.fill(0),this.#S.fill(0)),this.#b&&this.#b.fill(0),this.#o=0,this.#s=0,this.#v.length=0,this.#y=0,this.#i=0,this.#c&&this.#a){let S=this.#a,b;for(;b=S?.shift();)this.#m?.(...b)}}};r.LRUCache=g}),aa=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(i=0){this.iteratorType=i}equals(i){return this.o===i.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),wG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[]){super(),this.S=[];let s=this;i.forEach(function(a){s.push(a)})}clear(){this.i=0,this.S=[]}push(i){return this.S.push(i),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),IG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[]){super(),this.j=0,this.q=[];let s=this;i.forEach(function(a){s.push(a)})}clear(){this.q=[],this.i=this.j=0}push(i){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let a=this.i;for(let o=0;o<a;++o)this.q[o]=this.q[this.j+o];this.j=0,this.q[this.i]=i}else this.q[this.j+this.i]=i;return++this.i}pop(){if(this.i===0)return;let i=this.q[this.j++];return this.i-=1,i}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),OG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Base{constructor(i=[],s=function(o,u){return o>u?-1:o<u?1:0},a=!0){if(super(),this.v=s,Array.isArray(i))this.C=a?[...i]:i;else{this.C=[];let u=this;i.forEach(function(c){u.C.push(c)})}this.i=this.C.length;let o=this.i>>1;for(let u=this.i-1>>1;u>=0;--u)this.k(u,o)}m(i){let s=this.C[i];for(;i>0;){let a=i-1>>1,o=this.C[a];if(this.v(o,s)<=0)break;this.C[i]=o,i=a}this.C[i]=s}k(i,s){let a=this.C[i];for(;i<s;){let o=i<<1|1,u=o+1,c=this.C[o];if(u<this.i&&this.v(c,this.C[u])>0&&(o=u,c=this.C[u]),this.v(c,a)>=0)break;this.C[i]=c,i=o}this.C[i]=a}clear(){this.i=0,this.C.length=0}push(i){this.C.push(i),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let i=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),i}top(){return this.C[0]}find(i){return this.C.indexOf(i)>=0}remove(i){let s=this.C.indexOf(i);return s<0?!1:(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(i){let s=this.C.indexOf(i);return s<0?!1:(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),RT=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=class extends e.Container{},n=t;r.default=n}),oa=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),IN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=aa(),t=oa(),n=class extends e.ContainerIterator{constructor(i,s){super(s),this.o=i,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(i){this.container.setElementByPos(this.o,i)}};r.RandomIterator=n}),RG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(RT()),t=IN();function n(o){return o&&o.t?o:{default:o}}var i=class ON extends t.RandomIterator{constructor(u,c,h){super(u,h),this.container=c}copy(){return new ON(this.o,this.container,this.iteratorType)}},s=class extends e.default{constructor(o=[],u=!0){if(super(),Array.isArray(o))this.J=u?[...o]:o,this.i=o.length;else{this.J=[];let c=this;o.forEach(function(h){c.pushBack(h)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J[o]}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J.splice(o,1),this.i-=1,this.i}eraseElementByValue(o){let u=0;for(let c=0;c<this.i;++c)this.J[c]!==o&&(this.J[u++]=this.J[c]);return this.i=this.J.length=u,this.i}eraseElementByIterator(o){let u=o.o;return o=o.next(),this.eraseElementByPos(u),o}pushBack(o){return this.J.push(o),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(o,u){if(o<0||o>this.i-1)throw new RangeError;this.J[o]=u}insert(o,u,c=1){if(o<0||o>this.i)throw new RangeError;return this.J.splice(o,0,...new Array(c).fill(u)),this.i+=c,this.i}find(o){for(let u=0;u<this.i;++u)if(this.J[u]===o)return new i(u,this);return this.end()}reverse(){this.J.reverse()}unique(){let o=1;for(let u=1;u<this.i;++u)this.J[u]!==this.J[u-1]&&(this.J[o++]=this.J[u]);return this.i=this.J.length=o,this.i}sort(o){this.J.sort(o)}forEach(o){for(let u=0;u<this.i;++u)o(this.J[u],u,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},a=s;r.default=a}),LG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(RT()),t=aa(),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class RN extends t.ContainerIterator{constructor(c,h,d,g){super(g),this.o=c,this.h=h,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=c}copy(){return new RN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;u.forEach(function(h){c.pushBack(h)})}V(u){let{L:c,B:h}=u;c.B=h,h.L=c,u===this.p&&(this.p=h),u===this._&&(this._=c),this.i-=1}G(u,c){let h=c.B,d={l:u,L:c,B:h};c.B=d,h.L=d,c===this.h&&(this.p=d),h===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return c.l}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return this.V(c),this.i}eraseElementByValue(u){let c=this.p;for(;c!==this.h;)c.l===u&&this.V(c),c=c.B;return this.i}eraseElementByIterator(u){let c=u.o;return c===this.h&&(0,n.throwIteratorAccessError)(),u=u.next(),this.V(c),u}pushBack(u){return this.G(u,this._),this.i}popBack(){if(this.i===0)return;let u=this._.l;return this.V(this._),u}pushFront(u){return this.G(u,this.h),this.i}popFront(){if(this.i===0)return;let u=this.p.l;return this.V(this.p),u}setElementByPos(u,c){if(u<0||u>this.i-1)throw new RangeError;let h=this.p;for(;u--;)h=h.B;h.l=c}insert(u,c,h=1){if(u<0||u>this.i)throw new RangeError;if(h<=0)return this.i;if(u===0)for(;h--;)this.pushFront(c);else if(u===this.i)for(;h--;)this.pushBack(c);else{let d=this.p;for(let m=1;m<u;++m)d=d.B;let g=d.B;for(this.i+=h;h--;)d.B={l:c,L:d},d.B.L=d,d=d.B;d.B=g,g.L=d}return this.i}find(u){let c=this.p;for(;c!==this.h;){if(c.l===u)return new s(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let u=this.p,c=this._,h=0;for(;h<<1<this.i;){let d=u.l;u.l=c.l,c.l=d,u=u.B,c=c.L,h+=1}}unique(){if(this.i<=1)return this.i;let u=this.p;for(;u!==this.h;){let c=u;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;u.B=c.B,u.B.L=u,u=u.B}return this.i}sort(u){if(this.i<=1)return;let c=[];this.forEach(function(d){c.push(d)}),c.sort(u);let h=this.p;c.forEach(function(d){h.l=d,h=h.B})}merge(u){let c=this;if(this.i===0)u.forEach(function(h){c.pushBack(h)});else{let h=this.p;u.forEach(function(d){for(;h!==c.h&&h.l<=d;)h=h.B;c.G(d,h.L)})}return this.i}forEach(u){let c=this.p,h=0;for(;c!==this.h;)u(c.l,h++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let u=this.p;for(;u!==this.h;)yield u.l,u=u.B}).bind(this)()}},o=a;r.default=o}),CG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(RT()),t=IN();function n(o){return o&&o.t?o:{default:o}}var i=class LN extends t.RandomIterator{constructor(u,c,h){super(u,h),this.container=c}copy(){return new LN(this.o,this.container,this.iteratorType)}},s=class extends e.default{constructor(o=[],u=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size;if(typeof o.size=="function")return o.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=u,this.P=Math.max(Math.ceil(c/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let h=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(h>>1),this.D=this.N=this.F-c%this.F>>1;let d=this;o.forEach(function(g){d.pushBack(g)})}T(){let o=[],u=Math.max(this.P>>1,1);for(let c=0;c<u;++c)o[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)o[o.length]=this.A[c];for(let c=0;c<this.R;++c)o[o.length]=this.A[c];o[o.length]=[...this.A[this.R]],this.j=u,this.R=o.length-1;for(let c=0;c<u;++c)o[o.length]=new Array(this.F);this.A=o,this.P=o.length}O(o){let u=this.D+o+1,c=u%this.F,h=c-1,d=this.j+(u-c)/this.F;return c===0&&(d-=1),d%=this.P,h<0&&(h+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:h}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(o){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=o,this.i}popBack(){if(this.i===0)return;let o=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,o}pushFront(o){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=o,this.i}popFront(){if(this.i===0)return;let o=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,o}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:u,curNodePointerIndex:c}=this.O(o);return this.A[u][c]}setElementByPos(o,u){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:h}=this.O(o);this.A[c][h]=u}insert(o,u,c=1){if(o<0||o>this.i)throw new RangeError;if(o===0)for(;c--;)this.pushFront(u);else if(o===this.i)for(;c--;)this.pushBack(u);else{let h=[];for(let d=o;d<this.i;++d)h.push(this.getElementByPos(d));this.cut(o-1);for(let d=0;d<c;++d)this.pushBack(u);for(let d=0;d<h.length;++d)this.pushBack(h[d])}return this.i}cut(o){if(o<0)return this.clear(),0;let{curNodeBucketIndex:u,curNodePointerIndex:c}=this.O(o);return this.R=u,this.N=c,this.i=o+1,this.i}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;if(o===0)this.popFront();else if(o===this.i-1)this.popBack();else{let u=[];for(let h=o+1;h<this.i;++h)u.push(this.getElementByPos(h));this.cut(o),this.popBack();let c=this;u.forEach(function(h){c.pushBack(h)})}return this.i}eraseElementByValue(o){if(this.i===0)return 0;let u=[];for(let h=0;h<this.i;++h){let d=this.getElementByPos(h);d!==o&&u.push(d)}let c=u.length;for(let h=0;h<c;++h)this.setElementByPos(h,u[h]);return this.cut(c-1)}eraseElementByIterator(o){let u=o.o;return this.eraseElementByPos(u),o=o.next(),o}find(o){for(let u=0;u<this.i;++u)if(this.getElementByPos(u)===o)return new i(u,this);return this.end()}reverse(){let o=0,u=this.i-1;for(;o<u;){let c=this.getElementByPos(o);this.setElementByPos(o,this.getElementByPos(u)),this.setElementByPos(u,c),o+=1,u-=1}}unique(){if(this.i<=1)return this.i;let o=1,u=this.getElementByPos(0);for(let c=1;c<this.i;++c){let h=this.getElementByPos(c);h!==u&&(u=h,this.setElementByPos(o++,h))}for(;this.i>o;)this.popBack();return this.i}sort(o){let u=[];for(let c=0;c<this.i;++c)u.push(this.getElementByPos(c));u.sort(o);for(let c=0;c<this.i;++c)this.setElementByPos(c,u[c])}shrinkToFit(){if(this.i===0)return;let o=[];this.forEach(function(u){o.push(u)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let u=0;u<this.P;++u)this.A.push(new Array(this.F));for(let u=0;u<o.length;++u)this.pushBack(o[u])}forEach(o){for(let u=0;u<this.i;++u)o(this.getElementByPos(u),u,this)}[Symbol.iterator](){return(function*(){for(let o=0;o<this.i;++o)yield this.getElementByPos(o)}).bind(this)()}},a=s;r.default=a}),PG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,i){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=i}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let i=n.tt;for(;i.U===n;)n=i,i=n.tt;n=i}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let i=n.tt;for(;i.W===n;)n=i,i=n.tt;return n.W!==i?i:n}}te(){let n=this.tt,i=this.W,s=i.U;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.U=this,this.tt=i,this.W=s,s&&(s.tt=this),i}se(){let n=this.tt,i=this.U,s=i.W;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.W=this,this.tt=i,this.U=s,s&&(s.tt=this),i}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),CN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=PG(),t=aa(),n=oa(),i=class extends t.Container{constructor(a=function(u,c){return u<c?-1:u>c?1:0},o=!1){super(),this.Y=void 0,this.v=a,o?(this.re=e.TreeNodeEnableIndex,this.M=function(u,c,h){let d=this.ne(u,c,h);if(d){let g=d.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let m=this.he(d);if(m){let{parentNode:y,grandParent:S,curNode:b}=m;y.ie(),S.ie(),b.ie()}}return this.i},this.V=function(u){let c=this.fe(u);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=e.TreeNode,this.M=function(u,c,h){let d=this.ne(u,c,h);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(a,o){let u=this.h;for(;a;){let c=this.v(a.u,o);if(c<0)a=a.W;else if(c>0)u=a,a=a.U;else return a}return u}Z(a,o){let u=this.h;for(;a;)this.v(a.u,o)<=0?a=a.W:(u=a,a=a.U);return u}$(a,o){let u=this.h;for(;a;){let c=this.v(a.u,o);if(c<0)u=a,a=a.W;else if(c>0)a=a.U;else return a}return u}rr(a,o){let u=this.h;for(;a;)this.v(a.u,o)<0?(u=a,a=a.W):a=a.U;return u}ue(a){for(;;){let o=a.tt;if(o===this.h)return;if(a.ee===1){a.ee=0;return}if(a===o.U){let u=o.W;if(u.ee===1)u.ee=0,o.ee=1,o===this.Y?this.Y=o.te():o.te();else if(u.W&&u.W.ee===1){u.ee=o.ee,o.ee=0,u.W.ee=0,o===this.Y?this.Y=o.te():o.te();return}else u.U&&u.U.ee===1?(u.ee=1,u.U.ee=0,u.se()):(u.ee=1,a=o)}else{let u=o.U;if(u.ee===1)u.ee=0,o.ee=1,o===this.Y?this.Y=o.se():o.se();else if(u.U&&u.U.ee===1){u.ee=o.ee,o.ee=0,u.U.ee=0,o===this.Y?this.Y=o.se():o.se();return}else u.W&&u.W.ee===1?(u.ee=1,u.W.ee=0,u.te()):(u.ee=1,a=o)}}}fe(a){if(this.i===1)return this.clear(),this.h;let o=a;for(;o.U||o.W;){if(o.W)for(o=o.W;o.U;)o=o.U;else o=o.U;[a.u,o.u]=[o.u,a.u],[a.l,o.l]=[o.l,a.l],a=o}this.h.U===o?this.h.U=o.tt:this.h.W===o&&(this.h.W=o.tt),this.ue(o);let u=o.tt;return o===u.U?u.U=void 0:u.W=void 0,this.i-=1,this.Y.ee=0,u}oe(a,o){return a===void 0?!1:this.oe(a.U,o)||o(a)?!0:this.oe(a.W,o)}he(a){for(;;){let o=a.tt;if(o.ee===0)return;let u=o.tt;if(o===u.U){let c=u.W;if(c&&c.ee===1){if(c.ee=o.ee=0,u===this.Y)return;u.ee=1,a=u;continue}else if(a===o.W){if(a.ee=0,a.U&&(a.U.tt=o),a.W&&(a.W.tt=u),o.W=a.U,u.U=a.W,a.U=o,a.W=u,u===this.Y)this.Y=a,this.h.tt=a;else{let h=u.tt;h.U===u?h.U=a:h.W=a}return a.tt=u.tt,o.tt=a,u.tt=a,u.ee=1,{parentNode:o,grandParent:u,curNode:a}}else o.ee=0,u===this.Y?this.Y=u.se():u.se(),u.ee=1}else{let c=u.U;if(c&&c.ee===1){if(c.ee=o.ee=0,u===this.Y)return;u.ee=1,a=u;continue}else if(a===o.U){if(a.ee=0,a.U&&(a.U.tt=u),a.W&&(a.W.tt=o),u.W=a.U,o.U=a.W,a.U=u,a.W=o,u===this.Y)this.Y=a,this.h.tt=a;else{let h=u.tt;h.U===u?h.U=a:h.W=a}return a.tt=u.tt,o.tt=a,u.tt=a,u.ee=1,{parentNode:o,grandParent:u,curNode:a}}else o.ee=0,u===this.Y?this.Y=u.te():u.te(),u.ee=1}return}}ne(a,o,u){if(this.Y===void 0){this.i+=1,this.Y=new this.re(a,o),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,h=this.h.U,d=this.v(h.u,a);if(d===0){h.l=o;return}else if(d>0)h.U=new this.re(a,o),h.U.tt=h,c=h.U,this.h.U=c;else{let g=this.h.W,m=this.v(g.u,a);if(m===0){g.l=o;return}else if(m<0)g.W=new this.re(a,o),g.W.tt=g,c=g.W,this.h.W=c;else{if(u!==void 0){let y=u.o;if(y!==this.h){let S=this.v(y.u,a);if(S===0){y.l=o;return}else if(S>0){let b=y.L(),E=this.v(b.u,a);if(E===0){b.l=o;return}else E<0&&(c=new this.re(a,o),b.W===void 0?(b.W=c,c.tt=b):(y.U=c,c.tt=y))}}}if(c===void 0)for(c=this.Y;;){let y=this.v(c.u,a);if(y>0){if(c.U===void 0){c.U=new this.re(a,o),c.U.tt=c,c=c.U;break}c=c.U}else if(y<0){if(c.W===void 0){c.W=new this.re(a,o),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=o;return}}}}return this.i+=1,c}I(a,o){for(;a;){let u=this.v(a.u,o);if(u<0)a=a.W;else if(u>0)a=a.U;else return a}return a||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(a,o){let u=a.o;if(u===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return u.u=o,!0;if(u===this.h.U)return this.v(u.B().u,o)>0?(u.u=o,!0):!1;if(u===this.h.W)return this.v(u.L().u,o)<0?(u.u=o,!0):!1;let c=u.L().u;if(this.v(c,o)>=0)return!1;let h=u.B().u;return this.v(h,o)<=0?!1:(u.u=o,!0)}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o=0,u=this;return this.oe(this.Y,function(c){return a===o?(u.V(c),!0):(o+=1,!1)}),this.i}eraseElementByKey(a){if(this.i===0)return!1;let o=this.I(this.Y,a);return o===this.h?!1:(this.V(o),!0)}eraseElementByIterator(a){let o=a.o;o===this.h&&(0,n.throwIteratorAccessError)();let u=o.W===void 0;return a.iteratorType===0?u&&a.next():(!u||o.U===void 0)&&a.next(),this.V(o),a}forEach(a){let o=0;for(let u of this)a(u,o++,this)}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o,u=0;for(let c of this){if(u===a){o=c;break}u+=1}return o}getHeight(){if(this.i===0)return 0;let a=function(o){return o?Math.max(a(o.U),a(o.W))+1:0};return a(this.Y)}},s=i;r.default=s}),PN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=aa(),t=oa(),n=class extends e.ContainerIterator{constructor(s,a,o){super(o),this.o=s,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,a=this.h.tt;if(s===this.h)return a?a.rt-1:0;let o=0;for(s.U&&(o+=s.U.rt);s!==a;){let u=s.tt;s===u.W&&(o+=1,u.U&&(o+=u.U.rt)),s=u}return o}},i=n;r.default=i}),DG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(CN()),t=i(PN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class DN extends t.default{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new DN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[],c,h){super(c,h);let d=this;u.forEach(function(g){d.insert(g)})}*K(u){u!==void 0&&(yield*this.K(u.U),yield u.u,yield*this.K(u.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(u,c){return this.M(u,void 0,c)}find(u){let c=this.I(this.Y,u);return new s(c,this.h,this)}lowerBound(u){let c=this.X(this.Y,u);return new s(c,this.h,this)}upperBound(u){let c=this.Z(this.Y,u);return new s(c,this.h,this)}reverseLowerBound(u){let c=this.$(this.Y,u);return new s(c,this.h,this)}reverseUpperBound(u){let c=this.rr(this.Y,u);return new s(c,this.h,this)}union(u){let c=this;return u.forEach(function(h){c.insert(h)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=a;r.default=o}),kG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(CN()),t=i(PN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class kN extends t.default{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(h,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new kN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.default{constructor(u=[],c,h){super(c,h);let d=this;u.forEach(function(g){d.setElement(g[0],g[1])})}*K(u){u!==void 0&&(yield*this.K(u.U),yield[u.u,u.l],yield*this.K(u.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;let u=this.h.U;return[u.u,u.l]}back(){if(this.i===0)return;let u=this.h.W;return[u.u,u.l]}lowerBound(u){let c=this.X(this.Y,u);return new s(c,this.h,this)}upperBound(u){let c=this.Z(this.Y,u);return new s(c,this.h,this)}reverseLowerBound(u){let c=this.$(this.Y,u);return new s(c,this.h,this)}reverseUpperBound(u){let c=this.rr(this.Y,u);return new s(c,this.h,this)}setElement(u,c,h){return this.M(u,c,h)}find(u){let c=this.I(this.Y,u);return new s(c,this.h,this)}getElementByKey(u){return this.I(this.Y,u).l}union(u){let c=this;return u.forEach(function(h){c.setElement(h[0],h[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=a;r.default=o}),MN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),NN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=aa(),t=i(MN()),n=oa();function i(o){return o&&o.t?o:{default:o}}var s=class extends e.ContainerIterator{constructor(o,u,c){super(c),this.o=o,this.h=u,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=s;var a=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(o){let{L:u,B:c}=o;u.B=c,c.L=u,o===this.p&&(this.p=c),o===this._&&(this._=u),this.i-=1}M(o,u,c){c===void 0&&(c=(0,t.default)(o));let h;if(c){let d=o[this.HASH_TAG];if(d!==void 0)return this.H[d].l=u,this.i;Object.defineProperty(o,this.HASH_TAG,{value:this.H.length,configurable:!0}),h={u:o,l:u,L:this._,B:this.h},this.H.push(h)}else{let d=this.g[o];if(d)return d.l=u,this.i;h={u:o,l:u,L:this._,B:this.h},this.g[o]=h}return this.i===0?(this.p=h,this.h.B=h):this._.B=h,this._=h,this.h.L=h,++this.i}I(o,u){if(u===void 0&&(u=(0,t.default)(o)),u){let c=o[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[o]||this.h}clear(){let o=this.HASH_TAG;this.H.forEach(function(u){delete u.u[o]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(o,u){let c;if(u===void 0&&(u=(0,t.default)(o)),u){let h=o[this.HASH_TAG];if(h===void 0)return!1;delete o[this.HASH_TAG],c=this.H[h],delete this.H[h]}else{if(c=this.g[o],c===void 0)return!1;delete this.g[o]}return this.V(c),!0}eraseElementByIterator(o){let u=o.o;return u===this.h&&(0,n.throwIteratorAccessError)(),this.V(u),o.next()}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let u=this.p;for(;o--;)u=u.B;return this.V(u),this.i}};r.HashContainer=a}),MG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=NN(),t=oa(),n=class BN extends e.HashContainerIterator{constructor(o,u,c,h){super(o,u,h),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new BN(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(a=[]){super();let o=this;a.forEach(function(u){o.insert(u)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(a,o){return this.M(a,void 0,o)}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o=this.p;for(;a--;)o=o.B;return o.u}find(a,o){let u=this.I(a,o);return new n(u,this.h,this)}forEach(a){let o=0,u=this.p;for(;u!==this.h;)a(u.u,o++,this),u=u.B}[Symbol.iterator](){return(function*(){let a=this.p;for(;a!==this.h;)yield a.u,a=a.B}).bind(this)()}},s=i;r.default=s}),NG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=NN(),t=i(MN()),n=oa();function i(u){return u&&u.t?u:{default:u}}var s=class UN extends e.HashContainerIterator{constructor(c,h,d,g){super(c,h,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(h,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(h,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new UN(this.o,this.h,this.container,this.iteratorType)}},a=class extends e.HashContainer{constructor(u=[]){super();let c=this;u.forEach(function(h){c.setElement(h[0],h[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(u,c,h){return this.M(u,c,h)}getElementByKey(u,c){if(c===void 0&&(c=(0,t.default)(u)),c){let d=u[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let h=this.g[u];return h?h.l:void 0}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let c=this.p;for(;u--;)c=c.B;return[c.u,c.l]}find(u,c){let h=this.I(u,c);return new s(h,this.h,this)}forEach(u){let c=0,h=this.p;for(;h!==this.h;)u([h.u,h.l],c++,this),h=h.B}[Symbol.iterator](){return(function*(){let u=this.p;for(;u!==this.h;)yield[u.u,u.l],u=u.B}).bind(this)()}},o=a;r.default=o}),BG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return i.default}});var e=d(wG()),t=d(IG()),n=d(OG()),i=d(RG()),s=d(LG()),a=d(CG()),o=d(DG()),u=d(kG()),c=d(MG()),h=d(NG());function d(g){return g&&g.t?g:{default:g}}}),UG=$e((r,e)=>{Me(),Be(),Ne();var t=BG().OrderedSet,n=Xs()("number-allocator:trace"),i=Xs()("number-allocator:error");function s(o,u){this.low=o,this.high=u}s.prototype.equals=function(o){return this.low===o.low&&this.high===o.high},s.prototype.compare=function(o){return this.low<o.low&&this.high<o.low?-1:o.low<this.low&&o.high<this.low?1:0};function a(o,u){if(!(this instanceof a))return new a(o,u);this.min=o,this.max=u,this.ss=new t([],(c,h)=>c.compare(h)),n("Create"),this.clear()}a.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},a.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let o=this.ss.begin(),u=o.pointer.low,c=o.pointer.high,h=u;return h+1<=c?this.ss.updateKeyByIterator(o,new s(u+1,c)):this.ss.eraseElementByPos(0),n("alloc():"+h),h},a.prototype.use=function(o){let u=new s(o,o),c=this.ss.lowerBound(u);if(!c.equals(this.ss.end())){let h=c.pointer.low,d=c.pointer.high;return c.pointer.equals(u)?(this.ss.eraseElementByIterator(c),n("use():"+o),!0):h>o?!1:h===o?(this.ss.updateKeyByIterator(c,new s(h+1,d)),n("use():"+o),!0):d===o?(this.ss.updateKeyByIterator(c,new s(h,d-1)),n("use():"+o),!0):(this.ss.updateKeyByIterator(c,new s(o+1,d)),this.ss.insert(new s(h,o-1)),n("use():"+o),!0)}return n("use():failed"),!1},a.prototype.free=function(o){if(o<this.min||o>this.max){i("free():"+o+" is out of range");return}let u=new s(o,o),c=this.ss.upperBound(u);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(u);return}c.pre();let h=c.pointer.high;c.pointer.high+1===o?this.ss.updateKeyByIterator(c,new s(h,o)):this.ss.insert(u)}else if(c.equals(this.ss.begin()))if(o+1===c.pointer.low){let h=c.pointer.high;this.ss.updateKeyByIterator(c,new s(o,h))}else this.ss.insert(u);else{let h=c.pointer.low,d=c.pointer.high;c.pre();let g=c.pointer.low;c.pointer.high+1===o?o+1===h?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new s(g,d))):this.ss.updateKeyByIterator(c,new s(g,o)):o+1===h?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new s(o,d))):this.ss.insert(u)}n("free():"+o)},a.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(let o of this.ss)console.log(o)},e.exports=a}),jN=$e((r,e)=>{Me(),Be(),Ne();var t=UG();e.exports.NumberAllocator=t}),jG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=_G(),t=jN(),n=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(i){i>0&&(this.aliasToTopic=new e.LRUCache({max:i}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,i),this.max=i,this.length=0)}put(i,s){if(s===0||s>this.max)return!1;let a=this.aliasToTopic.get(s);return a&&delete this.topicToAlias[a],this.aliasToTopic.set(s,i),this.topicToAlias[i]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(i){return this.aliasToTopic.get(i)}getAliasByTopic(i){let s=this.topicToAlias[i];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),FG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0});var t=Ug(),n=e(jG()),i=Ou(),s=(a,o)=>{a.log("_handleConnack");let{options:u}=a,c=u.protocolVersion===5?o.reasonCode:o.returnCode;if(clearTimeout(a.connackTimer),delete a.topicAliasSend,o.properties){if(o.properties.topicAliasMaximum){if(o.properties.topicAliasMaximum>65535){a.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}o.properties.topicAliasMaximum>0&&(a.topicAliasSend=new n.default(o.properties.topicAliasMaximum))}o.properties.serverKeepAlive&&u.keepalive&&(u.keepalive=o.properties.serverKeepAlive),o.properties.maximumPacketSize&&(u.properties||(u.properties={}),u.properties.maximumPacketSize=o.properties.maximumPacketSize)}if(c===0)a.reconnecting=!1,a._onConnect(o);else if(c>0){let h=new i.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);a.emit("error",h),a.options.reconnectOnConnackError&&a._cleanUp(!0)}};r.default=s}),$G=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,i)=>{t.log("handling pubrel packet");let s=typeof i<"u"?i:t.noop,{messageId:a}=n,o={cmd:"pubcomp",messageId:a};t.incomingStore.get(n,(u,c)=>{u?t._sendPacket(o,s):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,h=>{if(h)return s(h);t.incomingStore.del(c,t.noop),t._sendPacket(o,s)}))})};r.default=e}),GG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(EG()),n=e(AG()),i=e(FG()),s=e(Ug()),a=e($G()),o=(u,c,h)=>{let{options:d}=u;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<c.length)return u.emit("error",new Error(`exceeding packets size ${c.cmd}`)),u.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),u;switch(u.log("_handlePacket :: emitting packetreceive"),u.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(u,c,h);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":u.reschedulePing(),(0,s.default)(u,c),h();break;case"pubrel":u.reschedulePing(),(0,a.default)(u,c,h);break;case"connack":(0,i.default)(u,c),h();break;case"auth":u.reschedulePing(),(0,n.default)(u,c),h();break;case"pingresp":u.log("_handlePacket :: received pingresp"),u.reschedulePing(!0),h();break;case"disconnect":u.emit("disconnect",c),h();break;default:u.log("_handlePacket :: unknown command"),h();break}};r.default=o}),FN=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),zG=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),HG=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((tl(),Nt(io))),n=Ou(),i=class{};r.TypedEventEmitter=i,(0,n.applyMixin)(i,t.default)}),jg=$e((r,e)=>{Me(),Be(),Ne();function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),KG=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default;function n(i,s){if(t(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var o=a.call(i,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),qG=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default,n=KG();function i(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),VG=$e((r,e)=>{Me(),Be(),Ne();var t=qG();function n(i,s,a){return(s=t(s))in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),WG=$e((r,e)=>{Me(),Be(),Ne();function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),YG=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,o,u,c,h=[],d=!0,g=!1;try{if(u=(s=s.call(n)).next,i===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=u.call(s)).done)&&(h.push(a.value),h.length!==i);d=!0);}catch(m){g=!0,o=m}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(g)throw o}}return h}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),XG=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){(i==null||i>n.length)&&(i=n.length);for(var s=0,a=Array(i);s<i;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),QG=$e((r,e)=>{Me(),Be(),Ne();var t=XG();function n(i,s){if(i){if(typeof i=="string")return t(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(i,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),ZG=$e((r,e)=>{Me(),Be(),Ne();function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),JG=$e((r,e)=>{Me(),Be(),Ne();var t=WG(),n=YG(),i=QG(),s=ZG();function a(o,u){return t(o)||n(o,u)||i(o,u)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}),$N=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))})(r,function(t){var n=function(m){return function(y){var S=m(y);return y.add(S),S}},i=function(m){return function(y,S){return m.set(y,S),S}},s=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,a=536870912,o=a*2,u=function(m,y){return function(S){var b=y.get(S),E=b===void 0?S.size:b<o?b+1:0;if(!S.has(E))return m(S,E);if(S.size<a){for(;S.has(E);)E=Math.floor(Math.random()*o);return m(S,E)}if(S.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(E);)E=Math.floor(Math.random()*s);return m(S,E)}},c=new WeakMap,h=i(c),d=u(h,c),g=n(d);t.addUniqueNumber=g,t.generateUniqueNumber=d})}),ez=$e((r,e)=>{Me(),Be(),Ne();function t(i,s,a,o,u,c,h){try{var d=i[c](h),g=d.value}catch(m){return void a(m)}d.done?s(g):Promise.resolve(g).then(o,u)}function n(i){return function(){var s=this,a=arguments;return new Promise(function(o,u){var c=i.apply(s,a);function h(g){t(c,o,u,h,d,"next",g)}function d(g){t(c,o,u,h,d,"throw",g)}h(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),GN=$e((r,e)=>{Me(),Be(),Ne();function t(n,i){this.v=n,this.k=i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),zN=$e((r,e)=>{Me(),Be(),Ne();function t(n,i,s,a){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}e.exports=t=function(u,c,h,d){function g(m,y){t(u,m,function(S){return this._invoke(m,y,S)})}c?o?o(u,c,{value:h,enumerable:!d,configurable:!d,writable:!d}):u[c]=h:(g("next",0),g("throw",1),g("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,s,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),HN=$e((r,e)=>{Me(),Be(),Ne();var t=zN();function n(){var i,s,a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function c(E,x,T,w){var _=x&&x.prototype instanceof d?x:d,R=Object.create(_.prototype);return t(R,"_invoke",(function(O,C,B){var N,U,k,W=0,q=B||[],X=!1,H={p:0,n:0,v:i,a:K,f:K.bind(i,4),d:function(V,J){return N=V,U=0,k=i,H.n=J,h}};function K(V,J){for(U=V,k=J,s=0;!X&&W&&!Q&&s<q.length;s++){var Q,$=q[s],F=H.p,Z=$[2];V>3?(Q=Z===J)&&(k=$[(U=$[4])?5:(U=3,3)],$[4]=$[5]=i):$[0]<=F&&((Q=V<2&&F<$[1])?(U=0,H.v=J,H.n=$[1]):F<Z&&(Q=V<3||$[0]>J||J>Z)&&($[4]=V,$[5]=J,H.n=Z,U=0))}if(Q||V>1)return h;throw X=!0,J}return function(V,J,Q){if(W>1)throw TypeError("Generator is already running");for(X&&J===1&&K(J,Q),U=J,k=Q;(s=U<2?i:k)||!X;){N||(U?U<3?(U>1&&(H.n=-1),K(U,k)):H.n=k:H.v=k);try{if(W=2,N){if(U||(V="next"),s=N[V]){if(!(s=s.call(N,k)))throw TypeError("iterator result is not an object");if(!s.done)return s;k=s.value,U<2&&(U=0)}else U===1&&(s=N.return)&&s.call(N),U<2&&(k=TypeError("The iterator does not provide a '"+V+"' method"),U=1);N=i}else if((s=(X=H.n<0)?k:O.call(C,H))!==h)break}catch($){N=i,U=1,k=$}finally{W=1}}return{value:s,done:X}}})(E,T,w),!0),R}var h={};function d(){}function g(){}function m(){}s=Object.getPrototypeOf;var y=[][o]?s(s([][o]())):(t(s={},o,function(){return this}),s),S=m.prototype=d.prototype=Object.create(y);function b(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,m):(E.__proto__=m,t(E,u,"GeneratorFunction")),E.prototype=Object.create(S),E}return g.prototype=m,t(S,"constructor",m),t(m,"constructor",g),g.displayName="GeneratorFunction",t(m,u,"GeneratorFunction"),t(S),t(S,u,"Generator"),t(S,o,function(){return this}),t(S,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:c,m:b}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),KN=$e((r,e)=>{Me(),Be(),Ne();var t=GN(),n=zN();function i(s,a){function o(c,h,d,g){try{var m=s[c](h),y=m.value;return y instanceof t?a.resolve(y.v).then(function(S){o("next",S,d,g)},function(S){o("throw",S,d,g)}):a.resolve(y).then(function(S){m.value=S,d(m)},function(S){return o("throw",S,d,g)})}catch(S){g(S)}}var u;this.next||(n(i.prototype),n(i.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(c,h,d){function g(){return new a(function(m,y){o(c,d,m,y)})}return u=u?u.then(g,g):g()},!0)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),qN=$e((r,e)=>{Me(),Be(),Ne();var t=HN(),n=KN();function i(s,a,o,u,c){return new n(t().w(s,a,o,u),c||Promise)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),tz=$e((r,e)=>{Me(),Be(),Ne();var t=qN();function n(i,s,a,o,u){var c=t(i,s,a,o,u);return c.next().then(function(h){return h.done?h.value:c.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),rz=$e((r,e)=>{Me(),Be(),Ne();function t(n){var i=Object(n),s=[];for(var a in i)s.unshift(a);return function o(){for(;s.length;)if((a=s.pop())in i)return o.value=a,o.done=!1,o;return o.done=!0,o}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),nz=$e((r,e)=>{Me(),Be(),Ne();var t=jg().default;function n(i){if(i!=null){var s=i[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],a=0;if(s)return s.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length))return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}}}throw new TypeError(t(i)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),iz=$e((r,e)=>{Me(),Be(),Ne();var t=GN(),n=HN(),i=tz(),s=qN(),a=KN(),o=rz(),u=nz();function c(){var h=n(),d=h.m(c),g=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function m(b){var E=typeof b=="function"&&b.constructor;return!!E&&(E===g||(E.displayName||E.name)==="GeneratorFunction")}var y={throw:1,return:2,break:3,continue:3};function S(b){var E,x;return function(T){E||(E={stop:function(){return x(T.a,2)},catch:function(){return T.v},abrupt:function(w,_){return x(T.a,y[w],_)},delegateYield:function(w,_,R){return E.resultName=_,x(T.d,u(w),R)},finish:function(w){return x(T.f,w)}},x=function(w,_,R){T.p=E.prev,T.n=E.next;try{return w(_,R)}finally{E.next=T.n}}),E.resultName&&(E[E.resultName]=T.v,E.resultName=void 0),E.sent=T.v,E.next=T.n;try{return b.call(this,E)}finally{T.p=E.prev,T.n=E.next}}}return(e.exports=c=function(){return{wrap:function(b,E,x,T){return h.w(S(b),E,x,T&&T.reverse())},isGeneratorFunction:m,mark:h.m,awrap:function(b,E){return new t(b,E)},AsyncIterator:a,async:function(b,E,x,T,w){return(m(E)?s:i)(S(b),E,x,T,w)},keys:o,values:u}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}),sz=$e((r,e)=>{Me(),Be(),Ne();var t=iz()();e.exports=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),az=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,VG(),JG(),$N(),ez(),sz()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.brokerFactory={},t._defineProperty,t._slicedToArray,t.fastUniqueNumbers,t._asyncToGenerator,t._regeneratorRuntime))})(r,function(t,n,i,s,a,o){var u=function(x){return typeof x.start=="function"},c=new WeakMap;function h(x,T){var w=Object.keys(x);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(x);T&&(_=_.filter(function(R){return Object.getOwnPropertyDescriptor(x,R).enumerable})),w.push.apply(w,_)}return w}function d(x){for(var T=1;T<arguments.length;T++){var w=arguments[T]!=null?arguments[T]:{};T%2?h(Object(w),!0).forEach(function(_){n(x,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(w)):h(Object(w)).forEach(function(_){Object.defineProperty(x,_,Object.getOwnPropertyDescriptor(w,_))})}return x}var g=function(x){return d(d({},x),{},{connect:function(T){var w=T.call;return a(o.mark(function _(){var R,O,C,B;return o.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return R=new MessageChannel,O=R.port1,C=R.port2,N.next=1,w("connect",{port:O},[O]);case 1:return B=N.sent,c.set(C,B),N.abrupt("return",C);case 2:case"end":return N.stop()}},_)}))},disconnect:function(T){var w=T.call;return(function(){var _=a(o.mark(function R(O){var C;return o.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(C=c.get(O),C!==void 0){B.next=1;break}throw new Error("The given port is not connected.");case 1:return B.next=2,w("disconnect",{portId:C});case 2:case"end":return B.stop()}},R)}));return function(R){return _.apply(this,arguments)}})()},isSupported:function(T){var w=T.call;return function(){return w("isSupported")}}})};function m(x,T){var w=Object.keys(x);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(x);T&&(_=_.filter(function(R){return Object.getOwnPropertyDescriptor(x,R).enumerable})),w.push.apply(w,_)}return w}function y(x){for(var T=1;T<arguments.length;T++){var w=arguments[T]!=null?arguments[T]:{};T%2?m(Object(w),!0).forEach(function(_){n(x,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(w)):m(Object(w)).forEach(function(_){Object.defineProperty(x,_,Object.getOwnPropertyDescriptor(w,_))})}return x}var S=new WeakMap,b=function(x){if(S.has(x))return S.get(x);var T=new Map;return S.set(x,T),T},E=function(x){var T=g(x);return function(w){var _=b(w);w.addEventListener("message",function(q){var X=q.data,H=X.id;if(H!==null&&_.has(H)){var K=_.get(H),V=K.reject,J=K.resolve;_.delete(H),X.error===void 0?J(X.result):V(new Error(X.error.message))}}),u(w)&&w.start();for(var R=function(q){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(K,V){var J=s.generateUniqueNumber(_);_.set(J,{reject:V,resolve:K}),X===null?w.postMessage({id:J,method:q},H):w.postMessage({id:J,method:q,params:X},H)})},O=function(q,X){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];w.postMessage({id:null,method:q,params:X},H)},C={},B=0,N=Object.entries(T);B<N.length;B++){var U=i(N[B],2),k=U[0],W=U[1];C=y(y({},C),{},n({},k,W({call:R,notify:O})))}return y({},C)}};t.createBroker=E})}),oz=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,jg(),az(),$N()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t._typeof,t.brokerFactory,t.fastUniqueNumbers))})(r,function(t,n,i,s){var a=new Map([[0,null]]),o=new Map([[0,null]]),u=i.createBroker({clearInterval:function(h){var d=h.call;return function(g){n(a.get(g))==="symbol"&&(a.set(g,null),d("clear",{timerId:g,timerType:"interval"}).then(function(){a.delete(g)}))}},clearTimeout:function(h){var d=h.call;return function(g){n(o.get(g))==="symbol"&&(o.set(g,null),d("clear",{timerId:g,timerType:"timeout"}).then(function(){o.delete(g)}))}},setInterval:function(h){var d=h.call;return function(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,S=new Array(y>2?y-2:0),b=2;b<y;b++)S[b-2]=arguments[b];var E=Symbol(),x=s.generateUniqueNumber(a);a.set(x,E);var T=function(){return d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:x,timerType:"interval"}).then(function(){var w=a.get(x);if(w===void 0)throw new Error("The timer is in an undefined state.");w===E&&(g.apply(void 0,S),a.get(x)===E&&T())})};return T(),x}},setTimeout:function(h){var d=h.call;return function(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,S=new Array(y>2?y-2:0),b=2;b<y;b++)S[b-2]=arguments[b];var E=Symbol(),x=s.generateUniqueNumber(o);return o.set(x,E),d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:x,timerType:"timeout"}).then(function(){var T=o.get(x);if(T===void 0)throw new Error("The timer is in an undefined state.");T===E&&(o.delete(x),g.apply(void 0,S))}),x}}}),c=function(h){var d=new Worker(h);return u(d)};t.load=c,t.wrap=u})}),lz=$e((r,e)=>{Me(),Be(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,oz()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))})(r,function(t,n){var i=function(d,g){var m=null;return function(){if(m!==null)return m;var y=new Blob([g],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(y);return m=d(S),setTimeout(function(){return URL.revokeObjectURL(S)}),m}},s=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,a=i(n.load,s),o=function(d){return a().clearInterval(d)},u=function(d){return a().clearTimeout(d)},c=function(){var d;return(d=a()).setInterval.apply(d,arguments)},h=function(){var d;return(d=a()).setTimeout.apply(d,arguments)};t.clearInterval=o,t.clearTimeout=u,t.setInterval=c,t.setTimeout=h})}),Fg=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&zt?.versions?!Object.prototype.hasOwnProperty.call(zt.versions,"electron"):typeof window.document<"u":!1,t=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=i}),uz=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(c,h,d,g){g===void 0&&(g=d);var m=Object.getOwnPropertyDescriptor(h,d);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(c,g,m)}:function(c,h,d,g){g===void 0&&(g=d),c[g]=h[d]}),t=r&&r.__setModuleDefault||(Object.create?function(c,h){Object.defineProperty(c,"default",{enumerable:!0,value:h})}:function(c,h){c.default=h}),n=r&&r.__importStar||(function(){var c=function(h){return c=Object.getOwnPropertyNames||function(d){var g=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(g[g.length]=m);return g},c(h)};return function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var g=c(h),m=0;m<g.length;m++)g[m]!=="default"&&e(d,h,g[m]);return t(d,h),d}})();Object.defineProperty(r,"__esModule",{value:!0});var i=lz(),s=n(Fg()),a={set:i.setInterval,clear:i.clearInterval},o={set:(c,h)=>setInterval(c,h),clear:c=>clearInterval(c)},u=c=>{switch(c){case"native":return o;case"worker":return a;case"auto":default:return s.default&&!s.isWebWorker&&!s.isReactNativeBrowser?a:o}};r.default=u}),VN=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(uz()),n=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(i,s){this.client=i,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,t.default)(s),this.setKeepalive(i.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(i){if(i*=1e3,isNaN(i)||i<=0||i>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${i}`);this._keepalive=i,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${i}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let i=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+i,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),fx=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(_,R,O,C){C===void 0&&(C=O);var B=Object.getOwnPropertyDescriptor(R,O);(!B||("get"in B?!R.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return R[O]}}),Object.defineProperty(_,C,B)}:function(_,R,O,C){C===void 0&&(C=O),_[C]=R[O]}),t=r&&r.__setModuleDefault||(Object.create?function(_,R){Object.defineProperty(_,"default",{enumerable:!0,value:R})}:function(_,R){_.default=R}),n=r&&r.__importStar||(function(){var _=function(R){return _=Object.getOwnPropertyNames||function(O){var C=[];for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(C[C.length]=B);return C},_(R)};return function(R){if(R&&R.__esModule)return R;var O={};if(R!=null)for(var C=_(R),B=0;B<C.length;B++)C[B]!=="default"&&e(O,R,C[B]);return t(O,R),O}})(),i=r&&r.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(r,"__esModule",{value:!0});var s=i(vG()),a=nl(),o=i(SG()),u=i(Xs()),c=n(xG()),h=i(TN()),d=i(GG()),g=i(FN()),m=i(zG()),y=Ou(),S=HG(),b=i(VN()),E=n(Fg()),x=globalThis.setImmediate||((..._)=>{let R=_.shift();(0,y.nextTick)(()=>{R(..._)})}),T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},w=class hx extends S.TypedEventEmitter{static VERSION=y.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(R,O){super(),this.options=O||{};for(let C in T)typeof this.options[C]>"u"?this.options[C]=T[C]:this.options[C]=O[C];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",hx.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",O.protocol),this.log("MqttClient :: options.protocolVersion",O.protocolVersion),this.log("MqttClient :: options.username",O.username),this.log("MqttClient :: options.keepalive",O.keepalive),this.log("MqttClient :: options.reconnectPeriod",O.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",O.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",O.properties?O.properties.topicAliasMaximum:void 0),this.options.clientId=typeof O.clientId=="string"?O.clientId:hx.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=O.protocolVersion===5&&O.customHandleAcks?O.customHandleAcks:(...C)=>{C[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=R,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new g.default:this.options.messageIdProvider,this.outgoingStore=O.outgoingStore||new h.default,this.incomingStore=O.incomingStore||new h.default,this.queueQoSZero=O.queueQoSZero===void 0?!0:O.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,O.properties&&O.properties.topicAliasMaximum>0&&(O.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(O.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:C}=this,B=()=>{let N=C.shift();this.log("deliver :: entry %o",N);let U=null;if(!N){this._resubscribe();return}U=N.packet,this.log("deliver :: call _sendPacket for %o",U);let k=!0;U.messageId&&U.messageId!==0&&(this.messageIdProvider.register(U.messageId)||(k=!1)),k?this._sendPacket(U,W=>{N.cb&&N.cb(W),B()}):(this.log("messageId: %d has already used. The message is skipped and removed.",U.messageId),B())};this.log("connect :: sending queued packets"),B()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(R,O){O()}handleMessage(R,O){O()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let R=new a.Writable,O=s.default.parser(this.options),C=null,B=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),O.on("packet",q=>{this.log("parser :: on packet push to packets array."),B.push(q)});let N=()=>{this.log("work :: getting next packet in queue");let q=B.shift();if(q)this.log("work :: packet pulled from queue"),(0,d.default)(this,q,U);else{this.log("work :: no packets in queue");let X=C;C=null,this.log("work :: done flag is %s",!!X),X&&X()}},U=()=>{if(B.length)(0,y.nextTick)(N);else{let q=C;C=null,q()}};R._write=(q,X,H)=>{C=H,this.log("writable stream :: parsing buffer"),O.parse(q),N()};let k=q=>{this.log("streamErrorHandler :: error",q.message),q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",q)):this.noop(q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(R),this.stream.on("error",k),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let W={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(W.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(W.properties||(W.properties={}),this.topicAliasRecv&&(W.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(W),O.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let q={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(R,O,C,B){this.log("publish :: message `%s` to topic `%s`",O,R);let{options:N}=this;typeof C=="function"&&(B=C,C=null),C=C||{},C={qos:0,retain:!1,dup:!1,...C};let{qos:U,retain:k,dup:W,properties:q,cbStorePut:X}=C;if(this._checkDisconnecting(B))return this;let H=()=>{let K=0;if((U===1||U===2)&&(K=this._nextId(),K===null))return this.log("No messageId left"),!1;let V={cmd:"publish",topic:R,payload:O,qos:U,retain:k,messageId:K,dup:W};switch(N.protocolVersion===5&&(V.properties=q),this.log("publish :: qos",U),U){case 1:case 2:this.outgoing[V.messageId]={volatile:!1,cb:B||this.noop},this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,void 0,X);break;default:this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,B,X);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,cbStorePut:C.cbStorePut,callback:B}),this}publishAsync(R,O,C){return new Promise((B,N)=>{this.publish(R,O,C,(U,k)=>{U?N(U):B(k)})})}subscribe(R,O,C){let B=this.options.protocolVersion;typeof O=="function"&&(C=O),C=C||this.noop;let N=!1,U=[];typeof R=="string"?(R=[R],U=R):Array.isArray(R)?U=R:typeof R=="object"&&(N=R.resubscribe,delete R.resubscribe,U=Object.keys(R));let k=c.validateTopics(U);if(k!==null)return x(C,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(C))return this.log("subscribe: discconecting true"),this;let W={qos:0};B===5&&(W.nl=!1,W.rap=!1,W.rh=0),O={...W,...O};let{properties:q}=O,X=[],H=(J,Q)=>{if(Q=Q||O,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,J)||this._resubscribeTopics[J].qos<Q.qos||N){let $={topic:J,qos:Q.qos};B===5&&($.nl=Q.nl,$.rap=Q.rap,$.rh=Q.rh,$.properties=q),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",$.topic,$.qos),X.push($)}};if(Array.isArray(R)?R.forEach(J=>{this.log("subscribe: array topic %s",J),H(J)}):Object.keys(R).forEach(J=>{this.log("subscribe: object topic %s, %o",J,R[J]),H(J,R[J])}),!X.length)return C(null,[]),this;let K=(J,Q)=>{let $={cmd:"subscribe",subscriptions:J,messageId:Q};if(q&&($.properties=q),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Z=[];J.forEach(de=>{if(this.options.reconnectPeriod>0){let oe={qos:de.qos};B===5&&(oe.nl=de.nl||!1,oe.rap=de.rap||!1,oe.rh=de.rh||0,oe.properties=de.properties),this._resubscribeTopics[de.topic]=oe,Z.push(de.topic)}}),this.messageIdToTopic[$.messageId]=Z}let F=new Promise((Z,de)=>{this.outgoing[$.messageId]={volatile:!0,cb(oe,xe){if(!oe){let{granted:ae}=xe;for(let re=0;re<ae.length;re+=1)J[re].qos=ae[re]}oe?de(new y.ErrorWithSubackPacket(oe.message,xe)):Z(xe)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket($),F},V=()=>{let J=this.options.subscribeBatchSize??X.length,Q=[];for(let $=0;$<X.length;$+=J){let F=X.slice($,$+J),Z=this._nextId();if(Z===null)return this.log("No messageId left"),!1;Q.push(K(F,Z))}return Promise.all(Q).then($=>{C(null,X,$.at(-1))}).catch($=>{C($,X,$.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!V())&&this._storeProcessingQueue.push({invoke:V,callback:C}),this}subscribeAsync(R,O){return new Promise((C,B)=>{this.subscribe(R,O,(N,U)=>{N?B(N):C(U)})})}unsubscribe(R,O,C){typeof R=="string"&&(R=[R]),typeof O=="function"&&(C=O),C=C||this.noop;let B=c.validateTopics(R);if(B!==null)return x(C,new Error(`Invalid topic ${B}`)),this;if(this._checkDisconnecting(C))return this;let N=()=>{let U=this._nextId();if(U===null)return this.log("No messageId left"),!1;let k={cmd:"unsubscribe",messageId:U,unsubscriptions:[]};return typeof R=="string"?k.unsubscriptions=[R]:Array.isArray(R)&&(k.unsubscriptions=R),this.options.resubscribe&&k.unsubscriptions.forEach(W=>{delete this._resubscribeTopics[W]}),typeof O=="object"&&O.properties&&(k.properties=O.properties),this.outgoing[k.messageId]={volatile:!0,cb:C},this.log("unsubscribe: call _sendPacket"),this._sendPacket(k),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!N())&&this._storeProcessingQueue.push({invoke:N,callback:C}),this}unsubscribeAsync(R,O){return new Promise((C,B)=>{this.unsubscribe(R,O,(N,U)=>{N?B(N):C(U)})})}end(R,O,C){this.log("end :: (%s)",this.options.clientId),(R==null||typeof R!="boolean")&&(C=C||O,O=R,R=!1),typeof O!="object"&&(C=C||O,O=null),this.log("end :: cb? %s",!!C),(!C||typeof C!="function")&&(C=this.noop);let B=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(U=>{this.outgoingStore.close(k=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),C){let W=U||k;this.log("end :: closeStores: invoking callback with args"),C(W)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},N=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,R),this._cleanUp(R,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(B)},O)};return this.disconnecting?(C(),this):(this._clearReconnect(),this.disconnecting=!0,!R&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,N,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),N()),this)}endAsync(R,O){return new Promise((C,B)=>{this.end(R,O,N=>{N?B(N):C()})})}removeOutgoingMessage(R){if(this.outgoing[R]){let{cb:O}=this.outgoing[R];this._removeOutgoingAndStoreMessage(R,()=>{O(new Error("Message removed"))})}return this}reconnect(R){this.log("client reconnect");let O=()=>{R?(this.options.incomingStore=R.incomingStore,this.options.outgoingStore=R.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=O:O(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(R=>{this.outgoing[R].volatile&&typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(R=>{typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_removeTopicAliasAndRecoverTopicName(R){let O;R.properties&&(O=R.properties.topicAlias);let C=R.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",O,C),C.length===0){if(typeof O>"u")return new Error("Unregistered Topic Alias");if(C=this.topicAliasSend.getTopicByAlias(O),typeof C>"u")return new Error("Unregistered Topic Alias");R.topic=C}O&&delete R.properties.topicAlias}_checkDisconnecting(R){return this.disconnecting&&(R&&R!==this.noop?R(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(R,O,C={}){if(O&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",O)),this.log("_cleanUp :: forced? %s",R),R)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let B={cmd:"disconnect",...C};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(B,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),x(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),O&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",O),O())}_storeAndSend(R,O,C){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",R.cmd);let B=R,N;if(B.cmd==="publish"&&(B=(0,o.default)(R),N=this._removeTopicAliasAndRecoverTopicName(B),N))return O&&O(N);this.outgoingStore.put(B,U=>{if(U)return O&&O(U);C(),this._writePacket(R,O)})}_applyTopicAlias(R){if(this.options.protocolVersion===5&&R.cmd==="publish"){let O;R.properties&&(O=R.properties.topicAlias);let C=R.topic.toString();if(this.topicAliasSend)if(O){if(C.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",C,O),!this.topicAliasSend.put(C,O)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,O),new Error("Sending Topic Alias out of range")}else C.length!==0&&(this.options.autoAssignTopicAlias?(O=this.topicAliasSend.getAliasByTopic(C),O?(R.topic="",R.properties={...R.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",C,O)):(O=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(C,O),R.properties={...R.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",C,O))):this.options.autoUseTopicAlias&&(O=this.topicAliasSend.getAliasByTopic(C),O&&(R.topic="",R.properties={...R.properties,topicAlias:O},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",C,O))));else if(O)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,O),new Error("Sending Topic Alias out of range")}}_noop(R){this.log("noop ::",R)}_writePacket(R,O){this.log("_writePacket :: packet: %O",R),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",R),this.log("_writePacket :: writing to stream");let C=s.default.writeToStream(R,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",C),!C&&O&&O!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",O)):O&&(this.log("_writePacket :: invoking cb"),O())}_sendPacket(R,O,C,B){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),C=C||this.noop,O=O||this.noop;let N=this._applyTopicAlias(R);if(N){O(N);return}if(!this.connected){if(R.cmd==="auth"){this._writePacket(R,O);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(R,O,C);return}if(B){this._writePacket(R,O);return}switch(R.cmd){case"publish":break;case"pubrel":this._storeAndSend(R,O,C);return;default:this._writePacket(R,O);return}switch(R.qos){case 2:case 1:this._storeAndSend(R,O,C);break;case 0:default:this._writePacket(R,O);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(R,O,C){this.log("_storePacket :: packet: %o",R),this.log("_storePacket :: cb? %s",!!O),C=C||this.noop;let B=R;if(B.cmd==="publish"){B=(0,o.default)(R);let U=this._removeTopicAliasAndRecoverTopicName(B);if(U)return O&&O(U)}let N=B.qos||0;N===0&&this.queueQoSZero||B.cmd!=="publish"?this.queue.push({packet:B,cb:O}):N>0?(O=this.outgoing[B.messageId]?this.outgoing[B.messageId].cb:null,this.outgoingStore.put(B,U=>{if(U)return O&&O(U);C()})):O&&O(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(R=!1){this.keepaliveManager&&this.options.keepalive&&(R||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let R=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&R.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let O=0;O<R.length;O++){let C={};C[R[O]]=this._resubscribeTopics[R[O]],C.resubscribe=!0,this.subscribe(C,{properties:C[R[O]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(R){if(this.disconnected){this.emit("connect",R);return}this.connackPacket=R,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let O=()=>{let C=this.outgoingStore.createStream(),B=()=>{C.destroy(),C=null,this._flushStoreProcessingQueue(),N()},N=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",B),C.on("error",k=>{N(),this._flushStoreProcessingQueue(),this.removeListener("close",B),this.emit("error",k)});let U=()=>{if(!C)return;let k=C.read(1),W;if(!k){C.once("readable",U);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[k.messageId]){U();return}!this.disconnecting&&!this.reconnectTimer?(W=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoing[k.messageId]={volatile:!1,cb(q,X){W&&W(q,X),U()}},this._packetIdsDuringStoreProcessing[k.messageId]=!0,this.messageIdProvider.register(k.messageId)?this._sendPacket(k,void 0,void 0,!0):this.log("messageId: %d has already used.",k.messageId)):C.destroy&&C.destroy()};C.on("end",()=>{let k=!0;for(let W in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[W]){k=!1;break}this.removeListener("close",B),k?(N(),this._invokeAllStoreProcessingQueue(),this.emit("connect",R)):O()}),U()};O()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let R=this._storeProcessingQueue[0];if(R&&R.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let R of this._storeProcessingQueue)R.cbStorePut&&R.cbStorePut(new Error("Connection closed")),R.callback&&R.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(R,O){delete this.outgoing[R],this.outgoingStore.del({messageId:R},(C,B)=>{O(C,B),this.messageIdProvider.deallocate(R),this._invokeStoreProcessingQueue()})}};r.default=w}),cz=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=jN(),t=class{numberAllocator;lastId;constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function fz(){if(dx)return qd;dx=!0;let r=2147483647,e=36,t=1,n=26,i=38,s=700,a=72,o=128,u="-",c=/^xn--/,h=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=e-t,y=Math.floor,S=String.fromCharCode;function b(N){throw new RangeError(g[N])}function E(N,U){let k=[],W=N.length;for(;W--;)k[W]=U(N[W]);return k}function x(N,U){let k=N.split("@"),W="";k.length>1&&(W=k[0]+"@",N=k[1]),N=N.replace(d,".");let q=N.split("."),X=E(q,U).join(".");return W+X}function T(N){let U=[],k=0,W=N.length;for(;k<W;){let q=N.charCodeAt(k++);if(q>=55296&&q<=56319&&k<W){let X=N.charCodeAt(k++);(X&64512)==56320?U.push(((q&1023)<<10)+(X&1023)+65536):(U.push(q),k--)}else U.push(q)}return U}let w=N=>String.fromCodePoint(...N),_=function(N){return N>=48&&N<58?26+(N-48):N>=65&&N<91?N-65:N>=97&&N<123?N-97:e},R=function(N,U){return N+22+75*(N<26)-((U!=0)<<5)},O=function(N,U,k){let W=0;for(N=k?y(N/s):N>>1,N+=y(N/U);N>m*n>>1;W+=e)N=y(N/m);return y(W+(m+1)*N/(N+i))},C=function(N){let U=[],k=N.length,W=0,q=o,X=a,H=N.lastIndexOf(u);H<0&&(H=0);for(let K=0;K<H;++K)N.charCodeAt(K)>=128&&b("not-basic"),U.push(N.charCodeAt(K));for(let K=H>0?H+1:0;K<k;){let V=W;for(let Q=1,$=e;;$+=e){K>=k&&b("invalid-input");let F=_(N.charCodeAt(K++));F>=e&&b("invalid-input"),F>y((r-W)/Q)&&b("overflow"),W+=F*Q;let Z=$<=X?t:$>=X+n?n:$-X;if(F<Z)break;let de=e-Z;Q>y(r/de)&&b("overflow"),Q*=de}let J=U.length+1;X=O(W-V,J,V==0),y(W/J)>r-q&&b("overflow"),q+=y(W/J),W%=J,U.splice(W++,0,q)}return String.fromCodePoint(...U)},B=function(N){let U=[];N=T(N);let k=N.length,W=o,q=0,X=a;for(let V of N)V<128&&U.push(S(V));let H=U.length,K=H;for(H&&U.push(u);K<k;){let V=r;for(let Q of N)Q>=W&&Q<V&&(V=Q);let J=K+1;V-W>y((r-q)/J)&&b("overflow"),q+=(V-W)*J,W=V;for(let Q of N)if(Q<W&&++q>r&&b("overflow"),Q===W){let $=q;for(let F=e;;F+=e){let Z=F<=X?t:F>=X+n?n:F-X;if($<Z)break;let de=$-Z,oe=e-Z;U.push(S(R(Z+de%oe,0))),$=y(de/oe)}U.push(S(R($,0))),X=O(q,J,K===H),q=0,++K}++q,++W}return U.join("")};return qd={version:"2.3.1",ucs2:{decode:T,encode:w},decode:C,encode:B,toASCII:function(N){return x(N,function(U){return h.test(U)?"xn--"+B(U):U})},toUnicode:function(N){return x(N,function(U){return c.test(U)?C(U.slice(4).toLowerCase()):U})}},qd}var qd,dx,za,hz=Mn(()=>{Me(),Be(),Ne(),qd={},dx=!1,za=fz(),za.decode,za.encode,za.toASCII,za.toUnicode,za.ucs2,za.version});function dz(){return gx||(gx=!0,px=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;var n=42;r[e]=n;for(e in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(r,e);if(s.value!==n||s.enumerable!==!0)return!1}return!0}),px}function pz(){return yx||(yx=!0,mx=Error),mx}function gz(){return bx||(bx=!0,vx=EvalError),vx}function mz(){return xx||(xx=!0,Sx=RangeError),Sx}function yz(){return Tx||(Tx=!0,Ex=ReferenceError),Ex}function WN(){return _x||(_x=!0,Ax=SyntaxError),Ax}function If(){return Ox||(Ox=!0,Ix=TypeError),Ix}function vz(){return Lx||(Lx=!0,Rx=URIError),Rx}function bz(){if(Cx)return Vd;Cx=!0;var r=typeof Symbol<"u"&&Symbol,e=dz();return Vd=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Vd}function Sz(){if(Px)return Wd;Px=!0;var r={__proto__:null,foo:{}},e=Object;return Wd=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},Wd}function xz(){if(Dx)return Yd;Dx=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(o,u){for(var c=[],h=0;h<o.length;h+=1)c[h]=o[h];for(var d=0;d<u.length;d+=1)c[d+o.length]=u[d];return c},s=function(o,u){for(var c=[],h=u,d=0;h<o.length;h+=1,d+=1)c[d]=o[h];return c},a=function(o,u){for(var c="",h=0;h<o.length;h+=1)c+=o[h],h+1<o.length&&(c+=u);return c};return Yd=function(o){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(r+u);for(var c=s(arguments,1),h,d=function(){if(this instanceof h){var b=u.apply(this,i(c,arguments));return Object(b)===b?b:this}return u.apply(o,i(c,arguments))},g=t(0,u.length-c.length),m=[],y=0;y<g;y++)m[y]="$"+y;if(h=Function("binder","return function ("+a(m,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var S=function(){};S.prototype=u.prototype,h.prototype=new S,S.prototype=null}return h},Yd}function LT(){if(kx)return Xd;kx=!0;var r=xz();return Xd=Function.prototype.bind||r,Xd}function Ez(){if(Mx)return Qd;Mx=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=LT();return Qd=t.call(r,e),Qd}function Ru(){if(Nx)return Zd;Nx=!0;var r,e=pz(),t=gz(),n=mz(),i=yz(),s=WN(),a=If(),o=vz(),u=Function,c=function(K){try{return u('"use strict"; return ('+K+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var d=function(){throw new a},g=h?(function(){try{return arguments.callee,d}catch{try{return h(arguments,"callee").get}catch{return d}}})():d,m=bz()(),y=Sz()(),S=Object.getPrototypeOf||(y?function(K){return K.__proto__}:null),b={},E=typeof Uint8Array>"u"||!S?r:S(Uint8Array),x={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&S?S([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&S?S(S([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!S?r:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!S?r:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&S?S(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":g,"%TypedArray%":E,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":o,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(S)try{null.error}catch(K){var T=S(S(K));x["%Error.prototype%"]=T}var w=function K(V){var J;if(V==="%AsyncFunction%")J=c("async function () {}");else if(V==="%GeneratorFunction%")J=c("function* () {}");else if(V==="%AsyncGeneratorFunction%")J=c("async function* () {}");else if(V==="%AsyncGenerator%"){var Q=K("%AsyncGeneratorFunction%");Q&&(J=Q.prototype)}else if(V==="%AsyncIteratorPrototype%"){var $=K("%AsyncGenerator%");$&&S&&(J=S($.prototype))}return x[V]=J,J},_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=LT(),O=Ez(),C=R.call(Function.call,Array.prototype.concat),B=R.call(Function.apply,Array.prototype.splice),N=R.call(Function.call,String.prototype.replace),U=R.call(Function.call,String.prototype.slice),k=R.call(Function.call,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,X=function(K){var V=U(K,0,1),J=U(K,-1);if(V==="%"&&J!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&V!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Q=[];return N(K,W,function($,F,Z,de){Q[Q.length]=Z?N(de,q,"$1"):F||$}),Q},H=function(K,V){var J=K,Q;if(O(_,J)&&(Q=_[J],J="%"+Q[0]+"%"),O(x,J)){var $=x[J];if($===b&&($=w(J)),typeof $>"u"&&!V)throw new a("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:Q,name:J,value:$}}throw new s("intrinsic "+K+" does not exist!")};return Zd=function(K,V){if(typeof K!="string"||K.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof V!="boolean")throw new a('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,K)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var J=X(K),Q=J.length>0?J[0]:"",$=H("%"+Q+"%",V),F=$.name,Z=$.value,de=!1,oe=$.alias;oe&&(Q=oe[0],B(J,C([0,1],oe)));for(var xe=1,ae=!0;xe<J.length;xe+=1){var re=J[xe],te=U(re,0,1),le=U(re,-1);if((te==='"'||te==="'"||te==="`"||le==='"'||le==="'"||le==="`")&&te!==le)throw new s("property names with quotes must have matching quotes");if((re==="constructor"||!ae)&&(de=!0),Q+="."+re,F="%"+Q+"%",O(x,F))Z=x[F];else if(Z!=null){if(!(re in Z)){if(!V)throw new a("base intrinsic for "+K+" exists, but the property is not available.");return}if(h&&xe+1>=J.length){var ce=h(Z,re);ae=!!ce,ae&&"get"in ce&&!("originalValue"in ce.get)?Z=ce.get:Z=Z[re]}else ae=O(Z,re),Z=Z[re];ae&&!de&&(x[F]=Z)}}return Z},Zd}function CT(){if(Bx)return Jd;Bx=!0;var r=Ru(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Jd=e,Jd}function YN(){if(Ux)return ep;Ux=!0;var r=Ru(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return ep=e,ep}function Tz(){if(jx)return tp;jx=!0;var r=CT(),e=WN(),t=If(),n=YN();return tp=function(i,s,a){if(!i||typeof i!="object"&&typeof i!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,d=!!n&&n(i,s);if(r)r(i,s,{configurable:c===null&&d?d.configurable:!c,enumerable:o===null&&d?d.enumerable:!o,value:a,writable:u===null&&d?d.writable:!u});else if(h||!o&&!u&&!c)i[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},tp}function Az(){if(Fx)return rp;Fx=!0;var r=CT(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},rp=e,rp}function _z(){if($x)return np;$x=!0;var r=Ru(),e=Tz(),t=Az()(),n=YN(),i=If(),s=r("%Math.floor%");return np=function(a,o){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof o!="number"||o<0||o>4294967295||s(o)!==o)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],c=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(c=!1),d&&!d.writable&&(h=!1)}return(c||h||!u)&&(t?e(a,"length",o,!0,!0):e(a,"length",o)),a},np}function wz(){if(Gx)return eu;Gx=!0;var r=LT(),e=Ru(),t=_z(),n=If(),i=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||r.call(s,i),o=CT(),u=e("%Math.max%");eu=function(h){if(typeof h!="function")throw new n("a function is required");var d=a(r,s,arguments);return t(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return a(r,i,arguments)};return o?o(eu,"apply",{value:c}):eu.apply=c,eu}function Iz(){if(zx)return ip;zx=!0;var r=Ru(),e=wz(),t=e(r("String.prototype.indexOf"));return ip=function(n,i){var s=r(n,!!i);return typeof s=="function"&&t(n,".prototype.")>-1?e(s):s},ip}var px,gx,mx,yx,vx,bx,Sx,xx,Ex,Tx,Ax,_x,Ix,Ox,Rx,Lx,Vd,Cx,Wd,Px,Yd,Dx,Xd,kx,Qd,Mx,Zd,Nx,Jd,Bx,ep,Ux,tp,jx,rp,Fx,np,$x,eu,Gx,ip,zx,Oz=Mn(()=>{Me(),Be(),Ne(),px={},gx=!1,mx={},yx=!1,vx={},bx=!1,Sx={},xx=!1,Ex={},Tx=!1,Ax={},_x=!1,Ix={},Ox=!1,Rx={},Lx=!1,Vd={},Cx=!1,Wd={},Px=!1,Yd={},Dx=!1,Xd={},kx=!1,Qd={},Mx=!1,Zd={},Nx=!1,Jd={},Bx=!1,ep={},Ux=!1,tp={},jx=!1,rp={},Fx=!1,np={},$x=!1,eu={},Gx=!1,ip={},zx=!1});function PT(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function Rz(){!Go||!Bo||(Go=!1,Bo.length?Zi=Bo.concat(Zi):Kc=-1,Zi.length&&XN())}function XN(){if(!Go){var r=setTimeout(Rz,0);Go=!0;for(var e=Zi.length;e;){for(Bo=Zi,Zi=[];++Kc<e;)Bo&&Bo[Kc].run();Kc=-1,e=Zi.length}Bo=null,Go=!1,clearTimeout(r)}}function Lz(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Zi.push(new QN(r,e)),Zi.length===1&&!Go&&setTimeout(XN,0)}function QN(r,e){this.fun=r,this.array=e}function Jr(){}function Cz(r){PT("_linkedBinding")}function Pz(r){PT("dlopen")}function Dz(){return[]}function kz(){return[]}function Mz(r,e){if(!r)throw new Error(e||"assertion error")}function Nz(){return!1}function Bz(){return js.now()/1e3}function Wy(r){var e=Math.floor((Date.now()-js.now())*.001),t=js.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=sp)),[n,i]}function ja(){return DT}function Uz(r){return[]}var Zi,Go,Bo,Kc,WO,YO,XO,QO,ZO,JO,eR,tR,rR,nR,iR,sR,aR,oR,lR,uR,cR,fR,hR,dR,pR,ld,gR,mR,yR,vR,bR,SR,xR,ER,TR,AR,_R,wR,IR,OR,RR,LR,CR,PR,DR,kR,MR,NR,BR,UR,jR,js,Yy,sp,FR,$R,GR,zR,HR,KR,qR,VR,WR,YR,XR,DT,ZN=Mn(()=>{Me(),Be(),Ne(),Zi=[],Go=!1,Kc=-1,QN.prototype.run=function(){this.fun.apply(null,this.array)},WO="browser",YO="x64",XO="browser",QO={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},ZO=["/usr/bin/node"],JO=[],eR="v16.8.0",tR={},rR=function(r,e){console.warn((e?e+": ":"")+r)},nR=function(r){PT("binding")},iR=function(r){return 0},sR=function(){return"/"},aR=function(r){},oR={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},lR=Jr,uR=[],cR={},fR=!1,hR={},dR=Jr,pR=Jr,ld=function(){return{}},gR=ld,mR=ld,yR=Jr,vR=Jr,bR=Jr,SR={},xR={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ER=Jr,TR=Jr,AR=Jr,_R=Jr,wR=Jr,IR=Jr,OR=Jr,RR=void 0,LR=void 0,CR=void 0,PR=Jr,DR=2,kR=1,MR="/bin/usr/node",NR=9229,BR="node",UR=[],jR=Jr,js={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},js.now===void 0&&(Yy=Date.now(),js.timing&&js.timing.navigationStart&&(Yy=js.timing.navigationStart),js.now=()=>Date.now()-Yy),sp=1e9,Wy.bigint=function(r){var e=Wy(r);return typeof BigInt>"u"?e[0]*sp+e[1]:BigInt(e[0]*sp)+BigInt(e[1])},FR=10,$R={},GR=0,zR=ja,HR=ja,KR=ja,qR=ja,VR=ja,WR=Jr,YR=ja,XR=ja,DT={version:eR,versions:tR,arch:YO,platform:XO,release:oR,_rawDebug:lR,moduleLoadList:uR,binding:nR,_linkedBinding:Cz,_events:$R,_eventsCount:GR,_maxListeners:FR,on:ja,addListener:zR,once:HR,off:KR,removeListener:qR,removeAllListeners:VR,emit:WR,prependListener:YR,prependOnceListener:XR,listeners:Uz,domain:cR,_exiting:fR,config:hR,dlopen:Pz,uptime:Bz,_getActiveRequests:Dz,_getActiveHandles:kz,reallyExit:dR,_kill:pR,cpuUsage:ld,resourceUsage:gR,memoryUsage:mR,kill:yR,exit:vR,openStdin:bR,allowedNodeEnvironmentFlags:SR,assert:Mz,features:xR,_fatalExceptions:ER,setUncaughtExceptionCaptureCallback:TR,hasUncaughtExceptionCaptureCallback:Nz,emitWarning:rR,nextTick:Lz,_tickCallback:AR,_debugProcess:_R,_debugEnd:wR,_startProfilerIdleNotifier:IR,_stopProfilerIdleNotifier:OR,stdout:RR,stdin:CR,stderr:LR,abort:PR,umask:iR,chdir:aR,cwd:sR,env:QO,title:WO,argv:ZO,execArgv:JO,pid:DR,ppid:kR,execPath:MR,debugPort:NR,hrtime:Wy,argv0:BR,_preload_modules:UR,setSourceMapsEnabled:jR}});function jz(){if(Hx)return ap;Hx=!0;var r=DT;function e(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function t(s,a){for(var o="",u=0,c=-1,h=0,d,g=0;g<=s.length;++g){if(g<s.length)d=s.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(c===g-1||h===1))if(c!==g-1&&h===2){if(o.length<2||u!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",u=0):(o=o.slice(0,m),u=o.length-1-o.lastIndexOf("/")),c=g,h=0;continue}}else if(o.length===2||o.length===1){o="",u=0,c=g,h=0;continue}}a&&(o.length>0?o+="/..":o="..",u=2)}else o.length>0?o+="/"+s.slice(c+1,g):o=s.slice(c+1,g),u=g-c-1;c=g,h=0}else d===46&&h!==-1?++h:h=-1}return o}function n(s,a){var o=a.dir||a.root,u=a.base||(a.name||"")+(a.ext||"");return o?o===a.root?o+u:o+s+u:u}var i={resolve:function(){for(var s="",a=!1,o,u=arguments.length-1;u>=-1&&!a;u--){var c;u>=0?c=arguments[u]:(o===void 0&&(o=r.cwd()),c=o),e(c),c.length!==0&&(s=c+"/"+s,a=c.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,o=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&o&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(s===void 0?s=o:s+="/"+o)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var o=1;o<s.length&&s.charCodeAt(o)===47;++o);for(var u=s.length,c=u-o,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,g=d-h,m=c<g?c:g,y=-1,S=0;S<=m;++S){if(S===m){if(g>m){if(a.charCodeAt(h+S)===47)return a.slice(h+S+1);if(S===0)return a.slice(h+S)}else c>m&&(s.charCodeAt(o+S)===47?y=S:S===0&&(y=0));break}var b=s.charCodeAt(o+S),E=a.charCodeAt(h+S);if(b!==E)break;b===47&&(y=S)}var x="";for(S=o+y+1;S<=u;++S)(S===u||s.charCodeAt(S)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+a.slice(h+y):(h+=y,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),o=a===47,u=-1,c=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!c){u=h;break}}else c=!1;return u===-1?o?"/":".":o&&u===1?"//":s.slice(0,u)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var o=0,u=-1,c=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,g=-1;for(h=s.length-1;h>=0;--h){var m=s.charCodeAt(h);if(m===47){if(!c){o=h+1;break}}else g===-1&&(c=!1,g=h+1),d>=0&&(m===a.charCodeAt(d)?--d===-1&&(u=h):(d=-1,u=g))}return o===u?u=g:u===-1&&(u=s.length),s.slice(o,u)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!c){o=h+1;break}}else u===-1&&(c=!1,u=h+1);return u===-1?"":s.slice(o,u)}},extname:function(s){e(s);for(var a=-1,o=0,u=-1,c=!0,h=0,d=s.length-1;d>=0;--d){var g=s.charCodeAt(d);if(g===47){if(!c){o=d+1;break}continue}u===-1&&(c=!1,u=d+1),g===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||u===-1||h===0||h===1&&a===u-1&&a===o+1?"":s.slice(a,u)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var o=s.charCodeAt(0),u=o===47,c;u?(a.root="/",c=1):c=0;for(var h=-1,d=0,g=-1,m=!0,y=s.length-1,S=0;y>=c;--y){if(o=s.charCodeAt(y),o===47){if(!m){d=y+1;break}continue}g===-1&&(m=!1,g=y+1),o===46?h===-1?h=y:S!==1&&(S=1):h!==-1&&(S=-1)}return h===-1||g===-1||S===0||S===1&&h===g-1&&h===d+1?g!==-1&&(d===0&&u?a.base=a.name=s.slice(1,g):a.base=a.name=s.slice(d,g)):(d===0&&u?(a.name=s.slice(1,h),a.base=s.slice(1,g)):(a.name=s.slice(d,h),a.base=s.slice(d,g)),a.ext=s.slice(h,g)),d>0?a.dir=s.slice(0,d-1):u&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,ap=i,ap}var ap,Hx,Kx,Fz=Mn(()=>{Me(),Be(),Ne(),ZN(),ap={},Hx=!1,Kx=jz()}),JN={};wu(JN,{URL:()=>u2,Url:()=>i2,default:()=>en,fileURLToPath:()=>t2,format:()=>s2,parse:()=>l2,pathToFileURL:()=>r2,resolve:()=>a2,resolveObject:()=>o2});function $z(){if(qx)return op;qx=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,h=typeof WeakSet=="function"&&WeakSet.prototype,d=h?WeakSet.prototype.has:null,g=typeof WeakRef=="function"&&WeakRef.prototype,m=g?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,S=Object.prototype.toString,b=Function.prototype.toString,E=String.prototype.match,x=String.prototype.slice,T=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,R=RegExp.prototype.test,O=Array.prototype.concat,C=Array.prototype.join,B=Array.prototype.slice,N=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,q=typeof Symbol=="function"&&typeof Symbol.iterator=="object",X=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===q||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,K=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(me){return me.__proto__}:null);function V(me,Ae){if(me===1/0||me===-1/0||me!==me||me&&me>-1e3&&me<1e3||R.call(/e/,Ae))return Ae;var Je=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof me=="number"){var Xe=me<0?-N(-me):N(me);if(Xe!==me){var ct=String(Xe),dt=x.call(Ae,ct.length+1);return T.call(ct,Je,"$&_")+"."+T.call(T.call(dt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return T.call(Ae,Je,"$&_")}var J=n2,Q=J.custom,$=ce(Q)?Q:null;op=function me(Ae,Je,Xe,ct){var dt=Je||{};if(Se(dt,"quoteStyle")&&dt.quoteStyle!=="single"&&dt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Se(dt,"maxStringLength")&&(typeof dt.maxStringLength=="number"?dt.maxStringLength<0&&dt.maxStringLength!==1/0:dt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ni=Se(dt,"customInspect")?dt.customInspect:!0;if(typeof ni!="boolean"&&ni!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Se(dt,"indent")&&dt.indent!==null&&dt.indent!=="	"&&!(parseInt(dt.indent,10)===dt.indent&&dt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Se(dt,"numericSeparator")&&typeof dt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var an=dt.numericSeparator;if(typeof Ae>"u")return"undefined";if(Ae===null)return"null";if(typeof Ae=="boolean")return Ae?"true":"false";if(typeof Ae=="string")return Ie(Ae,dt);if(typeof Ae=="number"){if(Ae===0)return 1/0/Ae>0?"0":"-0";var or=String(Ae);return an?V(Ae,or):or}if(typeof Ae=="bigint"){var on=String(Ae)+"n";return an?V(Ae,on):on}var vn=typeof dt.depth>"u"?5:dt.depth;if(typeof Xe>"u"&&(Xe=0),Xe>=vn&&vn>0&&typeof Ae=="object")return de(Ae)?"[Array]":"[Object]";var ln=ve(dt,Xe);if(typeof ct>"u")ct=[];else if(ye(ct,Ae)>=0)return"[Circular]";function br(En,Ui,ds){if(Ui&&(ct=B.call(ct),ct.push(Ui)),ds){var Un={depth:dt.depth};return Se(dt,"quoteStyle")&&(Un.quoteStyle=dt.quoteStyle),me(En,Un,Xe+1,ct)}return me(En,dt,Xe+1,ct)}if(typeof Ae=="function"&&!xe(Ae)){var al=se(Ae),fs=Ve(Ae,br);return"[Function"+(al?": "+al:" (anonymous)")+"]"+(fs.length>0?" { "+C.call(fs,", ")+" }":"")}if(ce(Ae)){var hs=q?T.call(String(Ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):W.call(Ae);return typeof Ae=="object"&&!q?L(hs):hs}if(Ke(Ae)){for(var ee="<"+_.call(String(Ae.nodeName)),ue=Ae.attributes||[],qe=0;qe<ue.length;qe++)ee+=" "+ue[qe].name+"="+F(Z(ue[qe].value),"double",dt);return ee+=">",Ae.childNodes&&Ae.childNodes.length&&(ee+="..."),ee+="</"+_.call(String(Ae.nodeName))+">",ee}if(de(Ae)){if(Ae.length===0)return"[]";var We=Ve(Ae,br);return ln&&!fe(We)?"["+Pe(We,ln)+"]":"[ "+C.call(We,", ")+" ]"}if(ae(Ae)){var Qe=Ve(Ae,br);return!("cause"in Error.prototype)&&"cause"in Ae&&!H.call(Ae,"cause")?"{ ["+String(Ae)+"] "+C.call(O.call("[cause]: "+br(Ae.cause),Qe),", ")+" }":Qe.length===0?"["+String(Ae)+"]":"{ ["+String(Ae)+"] "+C.call(Qe,", ")+" }"}if(typeof Ae=="object"&&ni){if($&&typeof Ae[$]=="function"&&J)return J(Ae,{depth:vn-Xe});if(ni!=="symbol"&&typeof Ae.inspect=="function")return Ae.inspect()}if(Re(Ae)){var Zt=[];return n&&n.call(Ae,function(En,Ui){Zt.push(br(Ui,Ae,!0)+" => "+br(En,Ae))}),G("Map",t.call(Ae),Zt,ln)}if(pe(Ae)){var Sr=[];return o&&o.call(Ae,function(En){Sr.push(br(En,Ae))}),G("Set",a.call(Ae),Sr,ln)}if(Ce(Ae))return D("WeakMap");if(Ue(Ae))return D("WeakSet");if(je(Ae))return D("WeakRef");if(te(Ae))return L(br(Number(Ae)));if(ne(Ae))return L(br(U.call(Ae)));if(le(Ae))return L(y.call(Ae));if(re(Ae))return L(br(String(Ae)));if(typeof window<"u"&&Ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ae===globalThis||typeof lp<"u"&&Ae===lp)return"{ [object globalThis] }";if(!oe(Ae)&&!xe(Ae)){var bn=Ve(Ae,br),ga=K?K(Ae)===Object.prototype:Ae instanceof Object||Ae.constructor===Object,Sn=Ae instanceof Object?"":"null prototype",Jt=!ga&&X&&Object(Ae)===Ae&&X in Ae?x.call(ie(Ae),8,-1):Sn?"Object":"",xr=ga||typeof Ae.constructor!="function"?"":Ae.constructor.name?Ae.constructor.name+" ":"",xn=xr+(Jt||Sn?"["+C.call(O.call([],Jt||[],Sn||[]),": ")+"] ":"");return bn.length===0?xn+"{}":ln?xn+"{"+Pe(bn,ln)+"}":xn+"{ "+C.call(bn,", ")+" }"}return String(Ae)};function F(me,Ae,Je){var Xe=(Je.quoteStyle||Ae)==="double"?'"':"'";return Xe+me+Xe}function Z(me){return T.call(String(me),/"/g,"&quot;")}function de(me){return ie(me)==="[object Array]"&&(!X||!(typeof me=="object"&&X in me))}function oe(me){return ie(me)==="[object Date]"&&(!X||!(typeof me=="object"&&X in me))}function xe(me){return ie(me)==="[object RegExp]"&&(!X||!(typeof me=="object"&&X in me))}function ae(me){return ie(me)==="[object Error]"&&(!X||!(typeof me=="object"&&X in me))}function re(me){return ie(me)==="[object String]"&&(!X||!(typeof me=="object"&&X in me))}function te(me){return ie(me)==="[object Number]"&&(!X||!(typeof me=="object"&&X in me))}function le(me){return ie(me)==="[object Boolean]"&&(!X||!(typeof me=="object"&&X in me))}function ce(me){if(q)return me&&typeof me=="object"&&me instanceof Symbol;if(typeof me=="symbol")return!0;if(!me||typeof me!="object"||!W)return!1;try{return W.call(me),!0}catch{}return!1}function ne(me){if(!me||typeof me!="object"||!U)return!1;try{return U.call(me),!0}catch{}return!1}var Le=Object.prototype.hasOwnProperty||function(me){return me in(this||lp)};function Se(me,Ae){return Le.call(me,Ae)}function ie(me){return S.call(me)}function se(me){if(me.name)return me.name;var Ae=E.call(b.call(me),/^function\s*([\w$]+)/);return Ae?Ae[1]:null}function ye(me,Ae){if(me.indexOf)return me.indexOf(Ae);for(var Je=0,Xe=me.length;Je<Xe;Je++)if(me[Je]===Ae)return Je;return-1}function Re(me){if(!t||!me||typeof me!="object")return!1;try{t.call(me);try{a.call(me)}catch{return!0}return me instanceof Map}catch{}return!1}function Ce(me){if(!c||!me||typeof me!="object")return!1;try{c.call(me,c);try{d.call(me,d)}catch{return!0}return me instanceof WeakMap}catch{}return!1}function je(me){if(!m||!me||typeof me!="object")return!1;try{return m.call(me),!0}catch{}return!1}function pe(me){if(!a||!me||typeof me!="object")return!1;try{a.call(me);try{t.call(me)}catch{return!0}return me instanceof Set}catch{}return!1}function Ue(me){if(!d||!me||typeof me!="object")return!1;try{d.call(me,d);try{c.call(me,c)}catch{return!0}return me instanceof WeakSet}catch{}return!1}function Ke(me){return!me||typeof me!="object"?!1:typeof HTMLElement<"u"&&me instanceof HTMLElement?!0:typeof me.nodeName=="string"&&typeof me.getAttribute=="function"}function Ie(me,Ae){if(me.length>Ae.maxStringLength){var Je=me.length-Ae.maxStringLength,Xe="... "+Je+" more character"+(Je>1?"s":"");return Ie(x.call(me,0,Ae.maxStringLength),Ae)+Xe}var ct=T.call(T.call(me,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lt);return F(ct,"single",Ae)}function lt(me){var Ae=me.charCodeAt(0),Je={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ae];return Je?"\\"+Je:"\\x"+(Ae<16?"0":"")+w.call(Ae.toString(16))}function L(me){return"Object("+me+")"}function D(me){return me+" { ? }"}function G(me,Ae,Je,Xe){var ct=Xe?Pe(Je,Xe):C.call(Je,", ");return me+" ("+Ae+") {"+ct+"}"}function fe(me){for(var Ae=0;Ae<me.length;Ae++)if(ye(me[Ae],`
`)>=0)return!1;return!0}function ve(me,Ae){var Je;if(me.indent==="	")Je="	";else if(typeof me.indent=="number"&&me.indent>0)Je=C.call(Array(me.indent+1)," ");else return null;return{base:Je,prev:C.call(Array(Ae+1),Je)}}function Pe(me,Ae){if(me.length===0)return"";var Je=`
`+Ae.prev+Ae.base;return Je+C.call(me,","+Je)+`
`+Ae.prev}function Ve(me,Ae){var Je=de(me),Xe=[];if(Je){Xe.length=me.length;for(var ct=0;ct<me.length;ct++)Xe[ct]=Se(me,ct)?Ae(me[ct],me):""}var dt=typeof k=="function"?k(me):[],ni;if(q){ni={};for(var an=0;an<dt.length;an++)ni["$"+dt[an]]=dt[an]}for(var or in me)Se(me,or)&&(Je&&String(Number(or))===or&&or<me.length||q&&ni["$"+or]instanceof Symbol||(R.call(/[^\w$]/,or)?Xe.push(Ae(or,me)+": "+Ae(me[or],me)):Xe.push(or+": "+Ae(me[or],me))));if(typeof k=="function")for(var on=0;on<dt.length;on++)H.call(me,dt[on])&&Xe.push("["+Ae(dt[on])+"]: "+Ae(me[dt[on]],me));return Xe}return op}function Gz(){if(Vx)return up;Vx=!0;var r=Ru(),e=Iz(),t=$z(),n=If(),i=r("%WeakMap%",!0),s=r("%Map%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),h=e("Map.prototype.set",!0),d=e("Map.prototype.has",!0),g=function(b,E){for(var x=b,T;(T=x.next)!==null;x=T)if(T.key===E)return x.next=T.next,T.next=b.next,b.next=T,T},m=function(b,E){var x=g(b,E);return x&&x.value},y=function(b,E,x){var T=g(b,E);T?T.value=x:b.next={key:E,next:b.next,value:x}},S=function(b,E){return!!g(b,E)};return up=function(){var b,E,x,T={assert:function(w){if(!T.has(w))throw new n("Side channel does not contain "+t(w))},get:function(w){if(i&&w&&(typeof w=="object"||typeof w=="function")){if(b)return a(b,w)}else if(s){if(E)return c(E,w)}else if(x)return m(x,w)},has:function(w){if(i&&w&&(typeof w=="object"||typeof w=="function")){if(b)return u(b,w)}else if(s){if(E)return d(E,w)}else if(x)return S(x,w);return!1},set:function(w,_){i&&w&&(typeof w=="object"||typeof w=="function")?(b||(b=new i),o(b,w,_)):s?(E||(E=new s),h(E,w,_)):(x||(x={key:{},next:null}),y(x,w,_))}};return T},up}function kT(){if(Wx)return cp;Wx=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return cp={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},cp}function e2(){if(Yx)return fp;Yx=!0;var r=kT(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var b=[],E=0;E<256;++E)b.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return b})(),i=function(b){for(;b.length>1;){var E=b.pop(),x=E.obj[E.prop];if(t(x)){for(var T=[],w=0;w<x.length;++w)typeof x[w]<"u"&&T.push(x[w]);E.obj[E.prop]=T}}},s=function(b,E){for(var x=E&&E.plainObjects?Object.create(null):{},T=0;T<b.length;++T)typeof b[T]<"u"&&(x[T]=b[T]);return x},a=function b(E,x,T){if(!x)return E;if(typeof x!="object"){if(t(E))E.push(x);else if(E&&typeof E=="object")(T&&(T.plainObjects||T.allowPrototypes)||!e.call(Object.prototype,x))&&(E[x]=!0);else return[E,x];return E}if(!E||typeof E!="object")return[E].concat(x);var w=E;return t(E)&&!t(x)&&(w=s(E,T)),t(E)&&t(x)?(x.forEach(function(_,R){if(e.call(E,R)){var O=E[R];O&&typeof O=="object"&&_&&typeof _=="object"?E[R]=b(O,_,T):E.push(_)}else E[R]=_}),E):Object.keys(x).reduce(function(_,R){var O=x[R];return e.call(_,R)?_[R]=b(_[R],O,T):_[R]=O,_},w)},o=function(b,E){return Object.keys(E).reduce(function(x,T){return x[T]=E[T],x},b)},u=function(b,E,x){var T=b.replace(/\+/g," ");if(x==="iso-8859-1")return T.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(T)}catch{return T}},c=1024,h=function(b,E,x,T,w){if(b.length===0)return b;var _=b;if(typeof b=="symbol"?_=Symbol.prototype.toString.call(b):typeof b!="string"&&(_=String(b)),x==="iso-8859-1")return escape(_).replace(/%u[0-9a-f]{4}/gi,function(k){return"%26%23"+parseInt(k.slice(2),16)+"%3B"});for(var R="",O=0;O<_.length;O+=c){for(var C=_.length>=c?_.slice(O,O+c):_,B=[],N=0;N<C.length;++N){var U=C.charCodeAt(N);if(U===45||U===46||U===95||U===126||U>=48&&U<=57||U>=65&&U<=90||U>=97&&U<=122||w===r.RFC1738&&(U===40||U===41)){B[B.length]=C.charAt(N);continue}if(U<128){B[B.length]=n[U];continue}if(U<2048){B[B.length]=n[192|U>>6]+n[128|U&63];continue}if(U<55296||U>=57344){B[B.length]=n[224|U>>12]+n[128|U>>6&63]+n[128|U&63];continue}N+=1,U=65536+((U&1023)<<10|C.charCodeAt(N)&1023),B[B.length]=n[240|U>>18]+n[128|U>>12&63]+n[128|U>>6&63]+n[128|U&63]}R+=B.join("")}return R},d=function(b){for(var E=[{obj:{o:b},prop:"o"}],x=[],T=0;T<E.length;++T)for(var w=E[T],_=w.obj[w.prop],R=Object.keys(_),O=0;O<R.length;++O){var C=R[O],B=_[C];typeof B=="object"&&B!==null&&x.indexOf(B)===-1&&(E.push({obj:_,prop:C}),x.push(B))}return i(E),b},g=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},m=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},y=function(b,E){return[].concat(b,E)},S=function(b,E){if(t(b)){for(var x=[],T=0;T<b.length;T+=1)x.push(E(b[T]));return x}return E(b)};return fp={arrayToObject:s,assign:o,combine:y,compact:d,decode:u,encode:h,isBuffer:m,isRegExp:g,maybeMap:S,merge:a},fp}function zz(){if(Xx)return hp;Xx=!0;var r=Gz(),e=e2(),t=kT(),n=Object.prototype.hasOwnProperty,i={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,b){return S+"["+b+"]"},repeat:function(S){return S}},s=Array.isArray,a=Array.prototype.push,o=function(S,b){a.apply(S,s(b)?b:[b])},u=Date.prototype.toISOString,c=t.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(S){return u.call(S)},skipNulls:!1,strictNullHandling:!1},d=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},g={},m=function S(b,E,x,T,w,_,R,O,C,B,N,U,k,W,q,X,H,K){for(var V=b,J=K,Q=0,$=!1;(J=J.get(g))!==void 0&&!$;){var F=J.get(b);if(Q+=1,typeof F<"u"){if(F===Q)throw new RangeError("Cyclic object value");$=!0}typeof J.get(g)>"u"&&(Q=0)}if(typeof B=="function"?V=B(E,V):V instanceof Date?V=k(V):x==="comma"&&s(V)&&(V=e.maybeMap(V,function(ie){return ie instanceof Date?k(ie):ie})),V===null){if(_)return C&&!X?C(E,h.encoder,H,"key",W):E;V=""}if(d(V)||e.isBuffer(V)){if(C){var Z=X?E:C(E,h.encoder,H,"key",W);return[q(Z)+"="+q(C(V,h.encoder,H,"value",W))]}return[q(E)+"="+q(String(V))]}var de=[];if(typeof V>"u")return de;var oe;if(x==="comma"&&s(V))X&&C&&(V=e.maybeMap(V,C)),oe=[{value:V.length>0?V.join(",")||null:void 0}];else if(s(B))oe=B;else{var xe=Object.keys(V);oe=N?xe.sort(N):xe}var ae=O?E.replace(/\./g,"%2E"):E,re=T&&s(V)&&V.length===1?ae+"[]":ae;if(w&&s(V)&&V.length===0)return re+"[]";for(var te=0;te<oe.length;++te){var le=oe[te],ce=typeof le=="object"&&typeof le.value<"u"?le.value:V[le];if(!(R&&ce===null)){var ne=U&&O?le.replace(/\./g,"%2E"):le,Le=s(V)?typeof x=="function"?x(re,ne):re:re+(U?"."+ne:"["+ne+"]");K.set(b,Q);var Se=r();Se.set(g,K),o(de,S(ce,Le,x,T,w,_,R,O,x==="comma"&&X&&s(V)?null:C,B,N,U,k,W,q,X,H,Se))}}return de},y=function(S){if(!S)return h;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=S.charset||h.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof S.format<"u"){if(!n.call(t.formatters,S.format))throw new TypeError("Unknown format option provided.");E=S.format}var x=t.formatters[E],T=h.filter;(typeof S.filter=="function"||s(S.filter))&&(T=S.filter);var w;if(S.arrayFormat in i?w=S.arrayFormat:"indices"in S?w=S.indices?"indices":"repeat":w=h.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var _=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:h.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:h.addQueryPrefix,allowDots:_,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:w,charset:b,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:h.charsetSentinel,commaRoundTrip:S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?h.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:h.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:h.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:h.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:h.encodeValuesOnly,filter:T,format:E,formatter:x,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:h.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:h.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:h.strictNullHandling}};return hp=function(S,b){var E=S,x=y(b),T,w;typeof x.filter=="function"?(w=x.filter,E=w("",E)):s(x.filter)&&(w=x.filter,T=w);var _=[];if(typeof E!="object"||E===null)return"";var R=i[x.arrayFormat],O=R==="comma"&&x.commaRoundTrip;T||(T=Object.keys(E)),x.sort&&T.sort(x.sort);for(var C=r(),B=0;B<T.length;++B){var N=T[B];x.skipNulls&&E[N]===null||o(_,m(E[N],N,R,O,x.allowEmptyArrays,x.strictNullHandling,x.skipNulls,x.encodeDotInKeys,x.encode?x.encoder:null,x.filter,x.sort,x.allowDots,x.serializeDate,x.format,x.formatter,x.encodeValuesOnly,x.charset,C))}var U=_.join(x.delimiter),k=x.addQueryPrefix===!0?"?":"";return x.charsetSentinel&&(x.charset==="iso-8859-1"?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),U.length>0?k+U:""},hp}function Hz(){if(Qx)return dp;Qx=!0;var r=e2(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(g){return g.replace(/&#(\d+);/g,function(m,y){return String.fromCharCode(parseInt(y,10))})},s=function(g,m){return g&&typeof g=="string"&&m.comma&&g.indexOf(",")>-1?g.split(","):g},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",u=function(g,m){var y={__proto__:null},S=m.ignoreQueryPrefix?g.replace(/^\?/,""):g;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var b=m.parameterLimit===1/0?void 0:m.parameterLimit,E=S.split(m.delimiter,b),x=-1,T,w=m.charset;if(m.charsetSentinel)for(T=0;T<E.length;++T)E[T].indexOf("utf8=")===0&&(E[T]===o?w="utf-8":E[T]===a&&(w="iso-8859-1"),x=T,T=E.length);for(T=0;T<E.length;++T)if(T!==x){var _=E[T],R=_.indexOf("]="),O=R===-1?_.indexOf("="):R+1,C,B;O===-1?(C=m.decoder(_,n.decoder,w,"key"),B=m.strictNullHandling?null:""):(C=m.decoder(_.slice(0,O),n.decoder,w,"key"),B=r.maybeMap(s(_.slice(O+1),m),function(U){return m.decoder(U,n.decoder,w,"value")})),B&&m.interpretNumericEntities&&w==="iso-8859-1"&&(B=i(B)),_.indexOf("[]=")>-1&&(B=t(B)?[B]:B);var N=e.call(y,C);N&&m.duplicates==="combine"?y[C]=r.combine(y[C],B):(!N||m.duplicates==="last")&&(y[C]=B)}return y},c=function(g,m,y,S){for(var b=S?m:s(m,y),E=g.length-1;E>=0;--E){var x,T=g[E];if(T==="[]"&&y.parseArrays)x=y.allowEmptyArrays&&(b===""||y.strictNullHandling&&b===null)?[]:[].concat(b);else{x=y.plainObjects?Object.create(null):{};var w=T.charAt(0)==="["&&T.charAt(T.length-1)==="]"?T.slice(1,-1):T,_=y.decodeDotInKeys?w.replace(/%2E/g,"."):w,R=parseInt(_,10);!y.parseArrays&&_===""?x={0:b}:!isNaN(R)&&T!==_&&String(R)===_&&R>=0&&y.parseArrays&&R<=y.arrayLimit?(x=[],x[R]=b):_!=="__proto__"&&(x[_]=b)}b=x}return b},h=function(g,m,y,S){if(g){var b=y.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,E=/(\[[^[\]]*])/,x=/(\[[^[\]]*])/g,T=y.depth>0&&E.exec(b),w=T?b.slice(0,T.index):b,_=[];if(w){if(!y.plainObjects&&e.call(Object.prototype,w)&&!y.allowPrototypes)return;_.push(w)}for(var R=0;y.depth>0&&(T=x.exec(b))!==null&&R<y.depth;){if(R+=1,!y.plainObjects&&e.call(Object.prototype,T[1].slice(1,-1))&&!y.allowPrototypes)return;_.push(T[1])}if(T){if(y.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+y.depth+" and strictDepth is true");_.push("["+b.slice(T.index)+"]")}return c(_,m,y,S)}},d=function(g){if(!g)return n;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=typeof g.charset>"u"?n.charset:g.charset,y=typeof g.duplicates>"u"?n.duplicates:g.duplicates;if(y!=="combine"&&y!=="first"&&y!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:n.allowDots:!!g.allowDots;return{allowDots:S,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:n.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:n.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:n.arrayLimit,charset:m,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:n.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:n.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:n.decoder,delimiter:typeof g.delimiter=="string"||r.isRegExp(g.delimiter)?g.delimiter:n.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:n.depth,duplicates:y,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:n.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:n.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:n.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:n.strictNullHandling}};return dp=function(g,m){var y=d(m);if(g===""||g===null||typeof g>"u")return y.plainObjects?Object.create(null):{};for(var S=typeof g=="string"?u(g,y):g,b=y.plainObjects?Object.create(null):{},E=Object.keys(S),x=0;x<E.length;++x){var T=E[x],w=h(T,S[T],y,typeof g=="string");b=r.merge(b,w,y)}return y.allowSparse===!0?b:r.compact(b)},dp}function Kz(){if(Zx)return pp;Zx=!0;var r=zz(),e=Hz(),t=kT();return pp={formats:t,parse:e,stringify:r},pp}function qz(){if(Jx)return Ha;Jx=!0;var r=za;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),u=["%","/","?",";","#"].concat(o),c=["/","?","#"],h=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=Kz();function E(_,R,O){if(_&&typeof _=="object"&&_ instanceof e)return _;var C=new e;return C.parse(_,R,O),C}e.prototype.parse=function(_,R,O){if(typeof _!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _);var C=_.indexOf("?"),B=C!==-1&&C<_.indexOf("#")?"?":"#",N=_.split(B),U=/\\/g;N[0]=N[0].replace(U,"/"),_=N.join(B);var k=_;if(k=k.trim(),!O&&_.split("#").length===1){var W=i.exec(k);if(W)return this.path=k,this.href=k,this.pathname=W[1],W[2]?(this.search=W[2],R?this.query=b.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var q=t.exec(k);if(q){q=q[0];var X=q.toLowerCase();this.protocol=X,k=k.substr(q.length)}if(O||q||k.match(/^\/\/[^@/]+@[^@/]+/)){var H=k.substr(0,2)==="//";H&&!(q&&y[q])&&(k=k.substr(2),this.slashes=!0)}if(!y[q]&&(H||q&&!S[q])){for(var K=-1,V=0;V<c.length;V++){var J=k.indexOf(c[V]);J!==-1&&(K===-1||J<K)&&(K=J)}var Q,$;K===-1?$=k.lastIndexOf("@"):$=k.lastIndexOf("@",K),$!==-1&&(Q=k.slice(0,$),k=k.slice($+1),this.auth=decodeURIComponent(Q)),K=-1;for(var V=0;V<u.length;V++){var J=k.indexOf(u[V]);J!==-1&&(K===-1||J<K)&&(K=J)}K===-1&&(K=k.length),this.host=k.slice(0,K),k=k.slice(K),this.parseHost(),this.hostname=this.hostname||"";var F=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!F)for(var Z=this.hostname.split(/\./),V=0,de=Z.length;V<de;V++){var oe=Z[V];if(oe&&!oe.match(d)){for(var xe="",ae=0,re=oe.length;ae<re;ae++)oe.charCodeAt(ae)>127?xe+="x":xe+=oe[ae];if(!xe.match(d)){var te=Z.slice(0,V),le=Z.slice(V+1),ce=oe.match(g);ce&&(te.push(ce[1]),le.unshift(ce[2])),le.length&&(k="/"+le.join(".")+k),this.hostname=te.join(".");break}}}this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=r.toASCII(this.hostname));var ne=this.port?":"+this.port:"",Le=this.hostname||"";this.host=Le+ne,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!m[X])for(var V=0,de=o.length;V<de;V++){var Se=o[V];if(k.indexOf(Se)!==-1){var ie=encodeURIComponent(Se);ie===Se&&(ie=escape(Se)),k=k.split(Se).join(ie)}}var se=k.indexOf("#");se!==-1&&(this.hash=k.substr(se),k=k.slice(0,se));var ye=k.indexOf("?");if(ye!==-1?(this.search=k.substr(ye),this.query=k.substr(ye+1),R&&(this.query=b.parse(this.query)),k=k.slice(0,ye)):R&&(this.search="",this.query={}),k&&(this.pathname=k),S[X]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ne=this.pathname||"",Re=this.search||"";this.path=ne+Re}return this.href=this.format(),this};function x(_){return typeof _=="string"&&(_=E(_)),_ instanceof e?_.format():e.prototype.format.call(_)}e.prototype.format=function(){var _=this.auth||"";_&&(_=encodeURIComponent(_),_=_.replace(/%3A/i,":"),_+="@");var R=this.protocol||"",O=this.pathname||"",C=this.hash||"",B=!1,N="";this.host?B=_+this.host:this.hostname&&(B=_+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(B+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(N=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var U=this.search||N&&"?"+N||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||S[R])&&B!==!1?(B="//"+(B||""),O&&O.charAt(0)!=="/"&&(O="/"+O)):B||(B=""),C&&C.charAt(0)!=="#"&&(C="#"+C),U&&U.charAt(0)!=="?"&&(U="?"+U),O=O.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),U=U.replace("#","%23"),R+B+O+U+C};function T(_,R){return E(_,!1,!0).resolve(R)}e.prototype.resolve=function(_){return this.resolveObject(E(_,!1,!0)).format()};function w(_,R){return _?E(_,!1,!0).resolveObject(R):R}return e.prototype.resolveObject=function(_){if(typeof _=="string"){var R=new e;R.parse(_,!1,!0),_=R}for(var O=new e,C=Object.keys(this),B=0;B<C.length;B++){var N=C[B];O[N]=this[N]}if(O.hash=_.hash,_.href==="")return O.href=O.format(),O;if(_.slashes&&!_.protocol){for(var U=Object.keys(_),k=0;k<U.length;k++){var W=U[k];W!=="protocol"&&(O[W]=_[W])}return S[O.protocol]&&O.hostname&&!O.pathname&&(O.pathname="/",O.path=O.pathname),O.href=O.format(),O}if(_.protocol&&_.protocol!==O.protocol){if(!S[_.protocol]){for(var q=Object.keys(_),X=0;X<q.length;X++){var H=q[X];O[H]=_[H]}return O.href=O.format(),O}if(O.protocol=_.protocol,!_.host&&!y[_.protocol]){for(var de=(_.pathname||"").split("/");de.length&&!(_.host=de.shift()););_.host||(_.host=""),_.hostname||(_.hostname=""),de[0]!==""&&de.unshift(""),de.length<2&&de.unshift(""),O.pathname=de.join("/")}else O.pathname=_.pathname;if(O.search=_.search,O.query=_.query,O.host=_.host||"",O.auth=_.auth,O.hostname=_.hostname||_.host,O.port=_.port,O.pathname||O.search){var K=O.pathname||"",V=O.search||"";O.path=K+V}return O.slashes=O.slashes||_.slashes,O.href=O.format(),O}var J=O.pathname&&O.pathname.charAt(0)==="/",Q=_.host||_.pathname&&_.pathname.charAt(0)==="/",$=Q||J||O.host&&_.pathname,F=$,Z=O.pathname&&O.pathname.split("/")||[],de=_.pathname&&_.pathname.split("/")||[],oe=O.protocol&&!S[O.protocol];if(oe&&(O.hostname="",O.port=null,O.host&&(Z[0]===""?Z[0]=O.host:Z.unshift(O.host)),O.host="",_.protocol&&(_.hostname=null,_.port=null,_.host&&(de[0]===""?de[0]=_.host:de.unshift(_.host)),_.host=null),$=$&&(de[0]===""||Z[0]==="")),Q)O.host=_.host||_.host===""?_.host:O.host,O.hostname=_.hostname||_.hostname===""?_.hostname:O.hostname,O.search=_.search,O.query=_.query,Z=de;else if(de.length)Z||(Z=[]),Z.pop(),Z=Z.concat(de),O.search=_.search,O.query=_.query;else if(_.search!=null){if(oe){O.host=Z.shift(),O.hostname=O.host;var xe=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;xe&&(O.auth=xe.shift(),O.hostname=xe.shift(),O.host=O.hostname)}return O.search=_.search,O.query=_.query,(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O}if(!Z.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var ae=Z.slice(-1)[0],re=(O.host||_.host||Z.length>1)&&(ae==="."||ae==="..")||ae==="",te=0,le=Z.length;le>=0;le--)ae=Z[le],ae==="."?Z.splice(le,1):ae===".."?(Z.splice(le,1),te++):te&&(Z.splice(le,1),te--);if(!$&&!F)for(;te--;te)Z.unshift("..");$&&Z[0]!==""&&(!Z[0]||Z[0].charAt(0)!=="/")&&Z.unshift(""),re&&Z.join("/").substr(-1)!=="/"&&Z.push("");var ce=Z[0]===""||Z[0]&&Z[0].charAt(0)==="/";if(oe){O.hostname=ce?"":Z.length?Z.shift():"",O.host=O.hostname;var xe=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;xe&&(O.auth=xe.shift(),O.hostname=xe.shift(),O.host=O.hostname)}return $=$||O.host&&Z.length,$&&!ce&&Z.unshift(""),Z.length>0?O.pathname=Z.join("/"):(O.pathname=null,O.path=null),(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=_.auth||O.auth,O.slashes=O.slashes||_.slashes,O.href=O.format(),O},e.prototype.parseHost=function(){var _=this.host,R=n.exec(_);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),_=_.substr(0,_.length-R.length)),_&&(this.hostname=_)},Ha.parse=E,Ha.resolve=T,Ha.resolveObject=w,Ha.format=x,Ha.Url=e,Ha}function t2(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Lp?Vz(r):Wz(r)}function Vz(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(p2,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<h2||n>d2||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Wz(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function r2(r){let e=Kx.resolve(r),t=r.charCodeAt(r.length-1);(t===f2||Lp&&t===c2)&&e[e.length-1]!==Kx.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(g2,"%25")),!Lp&&e.includes("\\")&&(e=e.replace(m2,"%5C")),e.includes(`
`)&&(e=e.replace(y2,"%0A")),e.includes("\r")&&(e=e.replace(v2,"%0D")),e.includes("	")&&(e=e.replace(b2,"%09")),n.pathname=e,n}var n2,op,qx,lp,up,Vx,cp,Wx,fp,Yx,hp,Xx,dp,Qx,pp,Zx,Ha,Jx,en,QR,i2,s2,a2,o2,l2,u2,c2,f2,h2,d2,Lp,p2,g2,m2,y2,v2,b2,Yz=Mn(()=>{Me(),Be(),Ne(),hz(),Oz(),Fz(),ZN(),n2=Object.freeze(Object.create(null)),op={},qx=!1,lp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,up={},Vx=!1,cp={},Wx=!1,fp={},Yx=!1,hp={},Xx=!1,dp={},Qx=!1,pp={},Zx=!1,Ha={},Jx=!1,en=qz(),en.parse,en.resolve,en.resolveObject,en.format,en.Url,QR=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,en.URL=typeof URL<"u"?URL:null,en.pathToFileURL=r2,en.fileURLToPath=t2,i2=en.Url,s2=en.format,a2=en.resolve,o2=en.resolveObject,l2=en.parse,u2=en.URL,c2=92,f2=47,h2=97,d2=122,Lp=QR==="win32",p2=/\//g,g2=/%/g,m2=/\\/g,y2=/\n/g,v2=/\r/g,b2=/\t/g}),Xz=$e((r,e)=>{Me(),Be(),Ne(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),MT=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=nl(),t=(jr(),Nt(Ur));function n(s,a){let o=new Array(s.length);for(let u=0;u<s.length;u++)typeof s[u].chunk=="string"?o[u]=t.Buffer.from(s[u].chunk,"utf8"):o[u]=s[u].chunk;this._write(t.Buffer.concat(o),"binary",a)}var i=class extends e.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(s,a,o){super({objectMode:!0}),this.proxy=a,this.socket=o,this.writeQueue=[],s.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",u=>{!this.destroyed&&this.readable&&this.push(u)})}_read(s){this.proxy.read(s)}_write(s,a,o){this.isSocketOpen?this.writeToProxy(s,a,o):this.writeQueue.push({chunk:s,encoding:a,cb:o})}_final(s){this.writeQueue=[],this.proxy.end(s)}_destroy(s,a){this.writeQueue=[],this.proxy.destroy(),a(s)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(s,a,o){this.proxy.write(s,a)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:s,encoding:a,cb:o}=this.writeQueue.shift();this.writeToProxy(s,a,o)}}};r.BufferedDuplex=i}),ud=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(jr(),Nt(Ur)),n=e(Xz()),i=e(Xs()),s=nl(),a=e(Fg()),o=MT(),u=(0,i.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function h(E,x){let T=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(T=E.transformWsUrl(T,E,x)),T}function d(E){let x=E;return E.port||(E.protocol==="wss"?x.port=443:x.port=80),E.path||(x.path="/"),E.wsOptions||(x.wsOptions={}),!a.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&c.forEach(T=>{Object.prototype.hasOwnProperty.call(E,T)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,T)&&(x.wsOptions[T]=E[T])}),x}function g(E){let x=d(E);if(x.hostname||(x.hostname=x.host),!x.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let T=new URL(document.URL);x.hostname=T.hostname,x.port||(x.port=Number(T.port))}return x.objectMode===void 0&&(x.objectMode=!(x.binary===!0||x.binary===void 0)),x}function m(E,x,T){u("createWebSocket"),u(`protocol: ${T.protocolId} ${T.protocolVersion}`);let w=T.protocolId==="MQIsdp"&&T.protocolVersion===3?"mqttv3.1":"mqtt";u(`creating new Websocket for url: ${x} and protocol: ${w}`);let _;return T.createWebsocket?_=T.createWebsocket(x,[w],T):_=new n.default(x,[w],T.wsOptions),_}function y(E,x){let T=x.protocolId==="MQIsdp"&&x.protocolVersion===3?"mqttv3.1":"mqtt",w=h(x,E),_;return x.createWebsocket?_=x.createWebsocket(w,[T],x):_=new WebSocket(w,[T]),_.binaryType="arraybuffer",_}var S=(E,x)=>{u("streamBuilder");let T=d(x);T.hostname=T.hostname||T.host||"localhost";let w=h(T,E),_=m(E,w,T),R=n.default.createWebSocketStream(_,T.wsOptions);return R.url=w,_.on("close",()=>{R.destroy()}),R};r.streamBuilder=S;var b=(E,x)=>{u("browserStreamBuilder");let T,w=g(x).browserBufferSize||1024*512,_=x.browserBufferTimeout||1e3,R=!x.objectMode,O=y(E,x),C=N(x,X,H);x.objectMode||(C._writev=o.writev.bind(C)),C.on("close",()=>{O.close()});let B=typeof O.addEventListener<"u";O.readyState===O.OPEN?(T=C,T.socket=O):(T=new o.BufferedDuplex(x,C,O),B?O.addEventListener("open",U):O.onopen=U),B?(O.addEventListener("close",k),O.addEventListener("error",W),O.addEventListener("message",q)):(O.onclose=k,O.onerror=W,O.onmessage=q);function N(K,V,J){let Q=new s.Transform({objectMode:K.objectMode});return Q._write=V,Q._flush=J,Q}function U(){u("WebSocket onOpen"),T instanceof o.BufferedDuplex&&T.socketReady()}function k(K){u("WebSocket onClose",K),T.end(),T.destroy()}function W(K){u("WebSocket onError",K);let V=new Error("WebSocket error");V.event=K,T.destroy(V)}async function q(K){if(!C||!C.readable||!C.writable)return;let{data:V}=K;V instanceof ArrayBuffer?V=t.Buffer.from(V):V instanceof Blob?V=t.Buffer.from(await new Response(V).arrayBuffer()):V=t.Buffer.from(V,"utf8"),C.push(V)}function X(K,V,J){if(O.bufferedAmount>w){setTimeout(X,_,K,V,J);return}R&&typeof K=="string"&&(K=t.Buffer.from(K,"utf8"));try{O.send(K)}catch(Q){return J(Q)}J()}function H(K){O.close(),K()}return T};r.browserStreamBuilder=b}),NT={};wu(NT,{Server:()=>Yt,Socket:()=>Yt,Stream:()=>Yt,_createServerHandle:()=>Yt,_normalizeArgs:()=>Yt,_setSimultaneousAccepts:()=>Yt,connect:()=>Yt,createConnection:()=>Yt,createServer:()=>Yt,default:()=>S2,isIP:()=>Yt,isIPv4:()=>Yt,isIPv6:()=>Yt});function Yt(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var S2,x2=Mn(()=>{Me(),Be(),Ne(),S2={_createServerHandle:Yt,_normalizeArgs:Yt,_setSimultaneousAccepts:Yt,connect:Yt,createConnection:Yt,createServer:Yt,isIP:Yt,isIPv4:Yt,isIPv6:Yt,Server:Yt,Socket:Yt,Stream:Yt}}),E2=$e((r,e)=>{Me(),Be(),Ne(),e.exports={}}),ZR=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((x2(),Nt(NT))),n=e(Xs()),i=e(E2()),s=(0,n.default)("mqttjs:tcp"),a=(o,u)=>{if(u.port=u.port||1883,u.hostname=u.hostname||u.host||"localhost",u.socksProxy)return(0,i.default)(u.hostname,u.port,u.socksProxy,{timeout:u.socksTimeout});let{port:c,path:h}=u,d=u.hostname;return s("port %d and host %s",c,d),t.default.createConnection({port:c,host:d,path:h})};r.default=a}),T2={};wu(T2,{default:()=>A2});var A2,Qz=Mn(()=>{Me(),Be(),Ne(),A2={}}),JR=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=(Qz(),Nt(T2)),n=e((x2(),Nt(NT))),i=e(Xs()),s=e(E2()),a=(0,i.default)("mqttjs:tls");function o(c){let{host:h,port:d,socksProxy:g,...m}=c;if(g!==void 0){let y=(0,s.default)(h,d,g,{timeout:c.socksTimeout});return(0,t.connect)({...m,socket:y})}return(0,t.connect)(c)}var u=(c,h)=>{h.port=h.port||8883,h.host=h.hostname||h.host||"localhost",n.default.isIP(h.host)===0&&(h.servername=h.host),h.rejectUnauthorized=h.rejectUnauthorized!==!1,delete h.path,a("port %d host %s rejectUnauthorized %b",h.port,h.host,h.rejectUnauthorized);let d=o(h);d.on("secureConnect",()=>{h.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",g)});function g(m){h.rejectUnauthorized&&c.emit("error",m),d.end()}return d.on("error",g),d};r.default=u}),eL=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(jr(),Nt(Ur)),t=nl(),n=MT(),i,s,a;function o(){let g=new t.Transform;return g._write=(m,y,S)=>{i.send({data:m.buffer,success(){S()},fail(b){S(new Error(b))}})},g._flush=m=>{i.close({success(){m()}})},g}function u(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,m){let y=g.protocol==="wxs"?"wss":"ws",S=`${y}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(S=`${y}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(S=g.transformWsUrl(S,g,m)),S}function h(){i.onOpen(()=>{a.socketReady()}),i.onMessage(g=>{let{data:m}=g;m instanceof ArrayBuffer?m=e.Buffer.from(m):m=e.Buffer.from(m,"utf8"),s.push(m)}),i.onClose(()=>{a.emit("close"),a.end(),a.destroy()}),i.onError(g=>{let m=new Error(g.errMsg);a.destroy(m)})}var d=(g,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let y=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";u(m);let S=c(m,g);i=wx.connectSocket({url:S,protocols:[y]}),s=o(),a=new n.BufferedDuplex(m,s,i),a._destroy=(E,x)=>{i.close({success(){x&&x(E)}})};let b=a.destroy;return a.destroy=(E,x)=>(a.destroy=b,setTimeout(()=>{i.close({fail(){a._destroy(E,x)}})},0),a),h(),a};r.default=d}),tL=$e(r=>{Me(),Be(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(jr(),Nt(Ur)),t=nl(),n=MT(),i,s,a,o=!1;function u(){let m=new t.Transform;return m._write=(y,S,b)=>{i.sendSocketMessage({data:y.buffer,success(){b()},fail(){b(new Error)}})},m._flush=y=>{i.closeSocket({success(){y()}})},m}function c(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function h(m,y){let S=m.protocol==="alis"?"wss":"ws",b=`${S}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(b=`${S}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(b=m.transformWsUrl(b,m,y)),b}function d(){o||(o=!0,i.onSocketOpen(()=>{a.socketReady()}),i.onSocketMessage(m=>{if(typeof m.data=="string"){let y=e.Buffer.from(m.data,"base64");s.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{if(y.result instanceof ArrayBuffer){s.push(e.Buffer.from(y.result));return}s.push(e.Buffer.from(y.result,"utf-8"))}),y.readAsArrayBuffer(m.data)}}),i.onSocketClose(()=>{a.end(),a.destroy()}),i.onSocketError(m=>{a.destroy(m)}))}var g=(m,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let S=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";c(y);let b=h(y,m);return i=y.my,i.connectSocket({url:b,protocols:S}),s=u(),a=new n.BufferedDuplex(y,s,i),d(),a};r.default=g}),Zz=$e(r=>{Me(),Be(),Ne();var e=r&&r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=h;var t=e(Xs()),n=e((Yz(),Nt(JN))),i=e(fx()),s=e(Fg());typeof zt?.nextTick!="function"&&(zt.nextTick=setImmediate);var a=(0,t.default)("mqttjs"),o=null;function u(d){let g;if(d.auth)if(g=d.auth.match(/^(.+):(.+)$/),g){let[,m,y]=g;d.username=m,d.password=y}else d.username=d.auth}function c(d,g){if(a("connecting to an MQTT broker..."),typeof d=="object"&&!g&&(g=d,d=""),g=g||{},d&&typeof d=="string"){let S=n.default.parse(d,!0),b={};if(S.port!=null&&(b.port=Number(S.port)),b.host=S.hostname,b.query=S.query,b.auth=S.auth,b.protocol=S.protocol,b.path=S.path,g={...b,...g},!g.protocol)throw new Error("Missing protocol");g.protocol=g.protocol.replace(/:$/,"")}if(g.unixSocket=g.unixSocket||g.protocol?.includes("+unix"),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!g.protocol?.startsWith("ws")&&!g.protocol?.startsWith("wx")&&delete g.path,u(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),s.default||g.unixSocket?g.socksProxy=void 0:g.socksProxy===void 0&&typeof zt<"u"&&(g.socksProxy=zt.env.MQTTJS_SOCKS_PROXY),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(o||(o={},!s.default&&!g.forceNativeWebSocket?(o.ws=ud().streamBuilder,o.wss=ud().streamBuilder,o.mqtt=ZR().default,o.tcp=ZR().default,o.ssl=JR().default,o.tls=o.ssl,o.mqtts=JR().default):(o.ws=ud().browserStreamBuilder,o.wss=ud().browserStreamBuilder,o.wx=eL().default,o.wxs=eL().default,o.ali=tL().default,o.alis=tL().default)),!o[g.protocol]){let S=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((b,E)=>S&&E%2===0?!1:typeof o[b]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function m(S){return g.servers&&((!S._reconnectCount||S._reconnectCount===g.servers.length)&&(S._reconnectCount=0),g.host=g.servers[S._reconnectCount].host,g.port=g.servers[S._reconnectCount].port,g.protocol=g.servers[S._reconnectCount].protocol?g.servers[S._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,S._reconnectCount++),a("calling streambuilder for",g.protocol),o[g.protocol](S,g)}let y=new i.default(m,g);return y.on("error",()=>{}),y}function h(d,g,m=!0){return new Promise((y,S)=>{let b=c(d,g),E={connect:T=>{x(),y(b)},end:()=>{x(),y(b)},error:T=>{x(),b.end(),S(T)}};m===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function x(){Object.keys(E).forEach(T=>{b.off(T,E[T])})}Object.keys(E).forEach(T=>{b.on(T,E[T])})})}r.default=c}),rL=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(m,y,S,b){b===void 0&&(b=S);var E=Object.getOwnPropertyDescriptor(y,S);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[S]}}),Object.defineProperty(m,b,E)}:function(m,y,S,b){b===void 0&&(b=S),m[b]=y[S]}),t=r&&r.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),n=r&&r.__importStar||(function(){var m=function(y){return m=Object.getOwnPropertyNames||function(S){var b=[];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(b[b.length]=E);return b},m(y)};return function(y){if(y&&y.__esModule)return y;var S={};if(y!=null)for(var b=m(y),E=0;E<b.length;E++)b[E]!=="default"&&e(S,y,b[E]);return t(S,y),S}})(),i=r&&r.__exportStar||function(m,y){for(var S in m)S!=="default"&&!Object.prototype.hasOwnProperty.call(y,S)&&e(y,m,S)},s=r&&r.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var a=s(fx());r.MqttClient=a.default;var o=s(FN());r.DefaultMessageIdProvider=o.default;var u=s(cz());r.UniqueMessageIdProvider=u.default;var c=s(TN());r.Store=c.default;var h=n(Zz());r.connect=h.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var d=s(VN());r.KeepaliveManager=d.default,r.Client=a.default,i(fx(),r),i(Ou(),r);var g=Ug();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),Jz=$e(r=>{Me(),Be(),Ne();var e=r&&r.__createBinding||(Object.create?function(a,o,u,c){c===void 0&&(c=u);var h=Object.getOwnPropertyDescriptor(o,u);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(a,c,h)}:function(a,o,u,c){c===void 0&&(c=u),a[c]=o[u]}),t=r&&r.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=r&&r.__importStar||(function(){var a=function(o){return a=Object.getOwnPropertyNames||function(u){var c=[];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[c.length]=h);return c},a(o)};return function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var c=a(o),h=0;h<c.length;h++)c[h]!=="default"&&e(u,o,c[h]);return t(u,o),u}})(),i=r&&r.__exportStar||function(a,o){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,a,u)};Object.defineProperty(r,"__esModule",{value:!0});var s=n(rL());r.default=s,i(rL(),r)});const eH=Jz();const tH="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",rH="8884",nH="esp32-client-01",iH="Qjawns3445";let qi=null;const au=[];function Zc(){if(qi)return qi;const r=`wss://${tH}:${rH}/mqtt`;return console.log(` Connecting to HiveMQ Cloud: ${r}`),qi=eH.connect(r,{username:nH,password:iH,clean:!0,reconnectPeriod:3e3,clientId:`tansaeng-web-${Math.random().toString(16).slice(2,10)}`}),qi.on("connect",()=>{console.log(" MQTT Connected to HiveMQ Cloud"),au.forEach(e=>e(!0))}),qi.on("error",e=>{console.error(" MQTT Connection Error:",e),au.forEach(t=>t(!1))}),qi.on("reconnect",()=>{console.log(" MQTT Reconnecting...")}),qi.on("offline",()=>{console.log(" MQTT Offline"),au.forEach(e=>e(!1))}),qi}function _2(r){return au.push(r),qi&&r(qi.connected),()=>{const e=au.indexOf(r);e>-1&&au.splice(e,1)}}function vi(r,e){const t=Zc();let n;"power"in e?n=e.power.toUpperCase():n=JSON.stringify(e),t.publish(r,n,{qos:1},i=>{i?console.error(` Failed to publish to ${r}:`,i):console.log(` Published to ${r}:`,n)})}function sH({deviceState:r,setDeviceState:e}){const[t,n]=P.useState(!1),[i,s]=P.useState({}),a=Ky("fan"),o=Ky("vent"),u=Ky("pump");P.useEffect(()=>_2(y=>{n(y)}),[]),P.useEffect(()=>{const m=Zc(),y=(S,b)=>{const E=Xi.find(x=>S===x.statusTopic);if(E){const x=b.toString();s(T=>({...T,[E.controllerId]:x==="online"}))}};return m.on("message",y),Xi.forEach(S=>{m.subscribe(S.statusTopic)}),()=>{m.off("message",y),Xi.forEach(S=>{m.unsubscribe(S.statusTopic)})}},[]);const c=(m,y)=>{const S={...r,[m]:{...r[m],power:y?"on":"off",lastSavedAt:new Date().toISOString()}};e(S);const b=[...a,...o,...u].find(E=>E.id===m);b&&vi(b.commandTopic,{power:y?"on":"off"})},h=(m,y)=>{const S={...r,[m]:{...r[m],targetPercentage:y,lastSavedAt:new Date().toISOString()}};e(S);const b=o.find(E=>E.id===m);b&&vi(b.commandTopic,{target:y})},d=Object.values(i).filter(Boolean).length,g=Xi.length;return z.jsx("div",{className:"bg-gray-50",children:z.jsxs("div",{className:"max-w-screen-2xl mx-auto p-3",children:[z.jsx("header",{className:"bg-white border-2 border-farm-500 px-4 py-3 rounded-lg mb-3 shadow-md",children:z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsxs("div",{children:[z.jsx("h1",{className:"text-xl font-bold mb-1 text-gray-900",children:"  "}),z.jsx("p",{className:"text-xs text-gray-600",children:", ,     "})]}),z.jsxs("div",{className:"flex items-center gap-2 bg-farm-50 border border-farm-200 px-3 py-1.5 rounded-md",children:[z.jsx("div",{className:`
                w-2.5 h-2.5 rounded-full
                ${t&&d>0?"bg-farm-500 animate-pulse":"bg-red-500"}
              `}),z.jsxs("span",{className:"text-xs font-medium text-gray-900",children:["MQTT ",t?"":" "," (",d,"/",g," )"]})]})]})}),z.jsxs("section",{className:"mb-3",children:[z.jsx("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg",children:z.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:" ESP32   "})}),z.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:z.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-2",children:Xi.map(m=>{const y=i[m.controllerId]===!0;return z.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-md border transition-colors ${y?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"}`,children:[z.jsx("div",{className:`w-2 h-2 rounded-full ${y?"bg-green-500 animate-pulse":"bg-gray-400"}`}),z.jsxs("div",{className:"flex-1 min-w-0",children:[z.jsx("span",{className:"text-xs font-medium text-gray-900 block truncate",children:m.name}),z.jsx("span",{className:"text-xs text-gray-500",children:m.controllerId})]}),z.jsx("span",{className:`text-xs font-medium ${y?"text-green-600":"text-gray-500"}`,children:y?"ON":"OFF"})]},m.id)})})})]}),z.jsxs("section",{className:"mb-3",children:[z.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[z.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),z.jsxs("span",{className:"text-xs text-gray-800",children:[" ",a.length,""]})]}),z.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:z.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:a.map(m=>z.jsx(qy,{device:m,power:r[m.id]?.power??"off",lastSavedAt:r[m.id]?.lastSavedAt,onToggle:y=>c(m.id,y)},m.id))})})]}),z.jsxs("section",{className:"mb-3",children:[z.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[z.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),z.jsxs("span",{className:"text-xs text-gray-800",children:[" ",o.length,""]})]}),z.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:z.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(350px,1fr))] gap-3",children:o.map(m=>z.jsx(qy,{device:m,power:r[m.id]?.power??"off",percentage:r[m.id]?.targetPercentage??0,lastSavedAt:r[m.id]?.lastSavedAt,onPercentageChange:y=>h(m.id,y)},m.id))})})]}),z.jsxs("section",{className:"mb-3",children:[z.jsxs("header",{className:"bg-farm-500 px-4 py-2.5 rounded-t-lg flex items-center justify-between",children:[z.jsx("h2",{className:"text-base font-semibold flex items-center gap-1.5 text-gray-900",children:"  "}),z.jsxs("span",{className:"text-xs text-gray-800",children:[" ",u.length,""]})]}),z.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-3",children:z.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-3",children:u.map(m=>z.jsx(qy,{device:m,power:r[m.id]?.power??"off",lastSavedAt:r[m.id]?.lastSavedAt,onToggle:y=>c(m.id,y)},m.id))})})]})]})})}function aH({zones:r,setZones:e}){const t=(a,o)=>{e(u=>u.map(c=>c.id===a?{...c,...o}:c))},n=a=>{if(a.mode==="AUTO"){if(!a.intervalMinutes||!a.spraySeconds){alert("AUTO       .");return}if(a.startTime&&a.endTime&&a.startTime>=a.endTime){alert("     .");return}}vi(`tansaeng/mist/${a.id}/config`,{mode:a.mode,intervalMinutes:a.intervalMinutes,spraySeconds:a.spraySeconds,startTime:a.startTime,endTime:a.endTime,allowNightOperation:a.allowNightOperation}),alert(`${a.name}  .`)},i=a=>{vi(`tansaeng/mist/${a.id}/manual`,{action:"spray"}),alert(`${a.name}    .`)},s=a=>a==="OFF"?{bg:"#f3f4f6",text:"#4b5563"}:a==="MANUAL"?{bg:"#dbeafe",text:"#1e40af"}:{bg:"#d1fae5",text:"#065f46"};return z.jsx("div",{className:"bg-gray-50",children:z.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[z.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[z.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:"  "}),z.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:" Zone      "})]}),r.map(a=>{const o=s(a.mode);return z.jsxs("div",{className:"bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-200 p-6 mb-6",children:[z.jsxs("div",{className:"flex items-center justify-between mb-4",children:[z.jsx("h2",{className:"text-xl font-semibold text-gray-800 m-0",children:a.name}),z.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{background:o.bg,color:o.text},children:a.mode})]}),z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),z.jsx("div",{className:"flex gap-4",children:["OFF","MANUAL","AUTO"].map(u=>z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[z.jsx("input",{type:"radio",name:`mode-${a.id}`,checked:a.mode===u,onChange:()=>t(a.id,{mode:u}),className:"w-4 h-4 accent-farm-500"}),z.jsx("span",{className:"text-gray-700",children:u})]},u))})]}),a.mode==="MANUAL"&&z.jsx("div",{className:"mb-4",children:z.jsx("button",{onClick:()=>i(a),className:"w-full bg-blue-600 hover:bg-blue-700 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:"  "})}),a.mode==="AUTO"&&z.jsxs("div",{children:[z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),z.jsx("input",{type:"number",min:"1",value:a.intervalMinutes??"",onChange:u=>t(a.id,{intervalMinutes:Number(u.target.value)||null}),placeholder:": 30",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),z.jsx("input",{type:"number",min:"1",value:a.spraySeconds??"",onChange:u=>t(a.id,{spraySeconds:Number(u.target.value)||null}),placeholder:": 10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),z.jsx("input",{type:"time",value:a.startTime,onChange:u=>t(a.id,{startTime:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),z.jsx("input",{type:"time",value:a.endTime,onChange:u=>t(a.id,{endTime:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),z.jsx("div",{className:"mb-4",children:z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[z.jsx("input",{type:"checkbox",checked:a.allowNightOperation,onChange:u=>t(a.id,{allowNightOperation:u.target.checked}),className:"w-4 h-4 accent-farm-500"}),z.jsx("span",{className:"text-gray-700",children:"  "})]})}),z.jsx("button",{onClick:()=>n(a),className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:" "})]})]},a.id)})]})})}function zi({icon:r,title:e,value:t,unit:n,maxValue:i,color:s="green"}){const a=t!=null,o=a?Math.min(t/i*100,100):0,u={green:"#059669",blue:"#2563eb",orange:"#f97316"};return z.jsxs("div",{className:"bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all duration-200 p-6",children:[z.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[z.jsx("span",{className:"text-3xl",children:r}),z.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e})]}),z.jsxs("div",{className:"text-center mb-4",children:[z.jsxs("div",{className:`text-5xl font-bold ${a?"text-farm-600":"text-gray-300"}`,children:[a?t:"-",a&&z.jsx("span",{className:"text-2xl font-normal ml-2",children:n})]}),!a&&z.jsx("div",{className:"text-sm text-gray-500 mt-2",children:" "})]}),z.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:z.jsx("div",{className:"h-full transition-all duration-500",style:{background:u[s],width:`${o}%`}})})]})}function Oo({label:r,value:e,unit:t}){const n=e!=null;return z.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[z.jsx("dt",{className:"text-sm text-gray-600",children:r}),z.jsx("dd",{className:`text-base font-semibold ${n?"text-gray-800":"text-gray-400"}`,children:n?`${e}${t}`:" "})]})}function w2(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=w2(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Bt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=w2(r))&&(n&&(n+=" "),n+=e);return n}var oH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BT(r){if(typeof r!="string")return!1;var e=oH;return e.includes(r)}var lH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],uH=new Set(lH);function I2(r){return typeof r!="string"?!1:uH.has(r)}function O2(r){return typeof r=="string"&&r.startsWith("data-")}function ns(r){if(typeof r!="object"||r===null)return{};var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(I2(t)||O2(t))&&(e[t]=r[t]);return e}function $g(r){if(r==null)return null;if(P.isValidElement(r)&&typeof r.props=="object"&&r.props!==null){var e=r.props;return ns(e)}return typeof r=="object"&&!Array.isArray(r)?ns(r):null}function pn(r){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(I2(t)||O2(t)||BT(t))&&(e[t]=r[t]);return e}function cH(r){return r==null?null:P.isValidElement(r)?pn(r.props):typeof r=="object"&&!Array.isArray(r)?pn(r):null}var fH=["children","width","height","viewBox","className","style","title","desc"];function eE(){return eE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eE.apply(null,arguments)}function hH(r,e){if(r==null)return{};var t,n,i=dH(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function dH(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var UT=P.forwardRef((r,e)=>{var{children:t,width:n,height:i,viewBox:s,className:a,style:o,title:u,desc:c}=r,h=hH(r,fH),d=s||{width:n,height:i,x:0,y:0},g=Bt("recharts-surface",a);return P.createElement("svg",eE({},pn(h),{className:g,width:n,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),P.createElement("title",null,u),P.createElement("desc",null,c),t)}),pH=["children","className"];function tE(){return tE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tE.apply(null,arguments)}function gH(r,e){if(r==null)return{};var t,n,i=mH(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function mH(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Ja=P.forwardRef((r,e)=>{var{children:t,className:n}=r,i=gH(r,pH),s=Bt("recharts-layer",n);return P.createElement("g",tE({className:s},pn(i),{ref:e}),t)}),R2=P.createContext(null),yH=()=>P.useContext(R2);function Gt(r){return function(){return r}}const L2=Math.cos,Cp=Math.sin,Bi=Math.sqrt,Pp=Math.PI,Gg=2*Pp,rE=Math.PI,nE=2*rE,Co=1e-6,vH=nE-Co;function C2(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function bH(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return C2;const t=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+n[i]}}class SH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?C2:bH(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,s,a){this._append`C${+e},${+t},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,n,i,s){if(e=+e,t=+t,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=n-e,c=i-t,h=a-e,d=o-t,g=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Co)if(!(Math.abs(d*u-c*h)>Co)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let m=n-a,y=i-o,S=u*u+c*c,b=m*m+y*y,E=Math.sqrt(S),x=Math.sqrt(g),T=s*Math.tan((rE-Math.acos((S+g-b)/(2*E*x)))/2),w=T/x,_=T/E;Math.abs(w-1)>Co&&this._append`L${e+w*h},${t+w*d}`,this._append`A${s},${s},0,0,${+(d*m>h*y)},${this._x1=e+_*u},${this._y1=t+_*c}`}}arc(e,t,n,i,s,a){if(e=+e,t=+t,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),u=n*Math.sin(i),c=e+o,h=t+u,d=1^a,g=a?i-s:s-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Co||Math.abs(this._y1-h)>Co)&&this._append`L${c},${h}`,n&&(g<0&&(g=g%nE+nE),g>vH?this._append`A${n},${n},0,1,${d},${e-o},${t-u}A${n},${n},0,1,${d},${this._x1=c},${this._y1=h}`:g>Co&&this._append`A${n},${n},0,${+(g>=rE)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=t+n*Math.sin(s)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function jT(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return r},()=>new SH(e)}function FT(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function P2(r){this._context=r}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function zg(r){return new P2(r)}function D2(r){return r[0]}function k2(r){return r[1]}function M2(r,e){var t=Gt(!0),n=null,i=zg,s=null,a=jT(o);r=typeof r=="function"?r:r===void 0?D2:Gt(r),e=typeof e=="function"?e:e===void 0?k2:Gt(e);function o(u){var c,h=(u=FT(u)).length,d,g=!1,m;for(n==null&&(s=i(m=a())),c=0;c<=h;++c)!(c<h&&t(d=u[c],c,u))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+r(d,c,u),+e(d,c,u));if(m)return s=null,m+""||null}return o.x=function(u){return arguments.length?(r=typeof u=="function"?u:Gt(+u),o):r},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Gt(+u),o):e},o.defined=function(u){return arguments.length?(t=typeof u=="function"?u:Gt(!!u),o):t},o.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),o):i},o.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),o):n},o}function cd(r,e,t){var n=null,i=Gt(!0),s=null,a=zg,o=null,u=jT(c);r=typeof r=="function"?r:r===void 0?D2:Gt(+r),e=typeof e=="function"?e:Gt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?k2:Gt(+t);function c(d){var g,m,y,S=(d=FT(d)).length,b,E=!1,x,T=new Array(S),w=new Array(S);for(s==null&&(o=a(x=u())),g=0;g<=S;++g){if(!(g<S&&i(b=d[g],g,d))===E)if(E=!E)m=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=g-1;y>=m;--y)o.point(T[y],w[y]);o.lineEnd(),o.areaEnd()}E&&(T[g]=+r(b,g,d),w[g]=+e(b,g,d),o.point(n?+n(b,g,d):T[g],t?+t(b,g,d):w[g]))}if(x)return o=null,x+""||null}function h(){return M2().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(r=typeof d=="function"?d:Gt(+d),n=null,c):r},c.x0=function(d){return arguments.length?(r=typeof d=="function"?d:Gt(+d),c):r},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Gt(+d),c):n},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Gt(+d),c):t},c.lineX0=c.lineY0=function(){return h().x(r).y(e)},c.lineY1=function(){return h().x(r).y(t)},c.lineX1=function(){return h().x(n).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Gt(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class N2{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function xH(r){return new N2(r,!0)}function EH(r){return new N2(r,!1)}const $T={draw(r,e){const t=Bi(e/Pp);r.moveTo(t,0),r.arc(0,0,t,0,Gg)}},TH={draw(r,e){const t=Bi(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},B2=Bi(1/3),AH=B2*2,_H={draw(r,e){const t=Bi(e/AH),n=t*B2;r.moveTo(0,-t),r.lineTo(n,0),r.lineTo(0,t),r.lineTo(-n,0),r.closePath()}},wH={draw(r,e){const t=Bi(e),n=-t/2;r.rect(n,n,t,t)}},IH=.8908130915292852,U2=Cp(Pp/10)/Cp(7*Pp/10),OH=Cp(Gg/10)*U2,RH=-L2(Gg/10)*U2,LH={draw(r,e){const t=Bi(e*IH),n=OH*t,i=RH*t;r.moveTo(0,-t),r.lineTo(n,i);for(let s=1;s<5;++s){const a=Gg*s/5,o=L2(a),u=Cp(a);r.lineTo(u*t,-o*t),r.lineTo(o*n-u*i,u*n+o*i)}r.closePath()}},Xy=Bi(3),CH={draw(r,e){const t=-Bi(e/(Xy*3));r.moveTo(0,t*2),r.lineTo(-Xy*t,-t),r.lineTo(Xy*t,-t),r.closePath()}},pi=-.5,gi=Bi(3)/2,iE=1/Bi(12),PH=(iE/2+1)*3,DH={draw(r,e){const t=Bi(e/PH),n=t/2,i=t*iE,s=n,a=t*iE+t,o=-s,u=a;r.moveTo(n,i),r.lineTo(s,a),r.lineTo(o,u),r.lineTo(pi*n-gi*i,gi*n+pi*i),r.lineTo(pi*s-gi*a,gi*s+pi*a),r.lineTo(pi*o-gi*u,gi*o+pi*u),r.lineTo(pi*n+gi*i,pi*i-gi*n),r.lineTo(pi*s+gi*a,pi*a-gi*s),r.lineTo(pi*o+gi*u,pi*u-gi*o),r.closePath()}};function kH(r,e){let t=null,n=jT(i);r=typeof r=="function"?r:Gt(r||$T),e=typeof e=="function"?e:Gt(e===void 0?64:+e);function i(){let s;if(t||(t=s=n()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(s),i):r},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Gt(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function Dp(){}function kp(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function j2(r){this._context=r}j2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function MH(r){return new j2(r)}function F2(r){this._context=r}F2.prototype={areaStart:Dp,areaEnd:Dp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function NH(r){return new F2(r)}function $2(r){this._context=r}$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 3:this._point=4;default:kp(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function BH(r){return new $2(r)}function G2(r){this._context=r}G2.prototype={areaStart:Dp,areaEnd:Dp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function UH(r){return new G2(r)}function nL(r){return r<0?-1:1}function iL(r,e,t){var n=r._x1-r._x0,i=e-r._x1,s=(r._y1-r._y0)/(n||i<0&&-0),a=(t-r._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(nL(s)+nL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function sL(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function Qy(r,e,t){var n=r._x0,i=r._y0,s=r._x1,a=r._y1,o=(s-n)/3;r._context.bezierCurveTo(n+o,i+o*e,s-o,a-o*t,s,a)}function Mp(r){this._context=r}Mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qy(this,this._t0,sL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,Qy(this,sL(this,t=iL(this,r,e)),t);break;default:Qy(this,this._t0,t=iL(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function z2(r){this._context=new H2(r)}(z2.prototype=Object.create(Mp.prototype)).point=function(r,e){Mp.prototype.point.call(this,e,r)};function H2(r){this._context=r}H2.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,n,i,s){this._context.bezierCurveTo(e,r,n,t,s,i)}};function jH(r){return new Mp(r)}function FH(r){return new z2(r)}function K2(r){this._context=r}K2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var n=aL(r),i=aL(e),s=0,a=1;a<t;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],r[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function aL(r){var e,t=r.length-1,n,i=new Array(t),s=new Array(t),a=new Array(t);for(i[0]=0,s[0]=2,a[0]=r[0]+2*r[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,a[e]=4*r[e]+2*r[e+1];for(i[t-1]=2,s[t-1]=7,a[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[t-1]=a[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[t-1]=(r[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*r[e+1]-i[e+1];return[i,s]}function $H(r){return new K2(r)}function Hg(r,e){this._context=r,this._t=e}Hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function GH(r){return new Hg(r,.5)}function zH(r){return new Hg(r,0)}function HH(r){return new Hg(r,1)}function du(r,e){if((a=r.length)>1)for(var t=1,n,i,s=r[e[0]],a,o=s.length;t<a;++t)for(i=s,s=r[e[t]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function sE(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function KH(r,e){return r[e]}function qH(r){const e=[];return e.key=r,e}function VH(){var r=Gt([]),e=sE,t=du,n=KH;function i(s){var a=Array.from(r.apply(this,arguments),qH),o,u=a.length,c=-1,h;for(const d of s)for(o=0,++c;o<u;++o)(a[o][c]=[0,+n(d,a[o].key,c,s)]).data=d;for(o=0,h=FT(e(a));o<u;++o)a[h[o]].index=o;return t(a,h),a}return i.keys=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(Array.from(s)),i):r},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Gt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?sE:typeof s=="function"?s:Gt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(t=s??du,i):t},i}function WH(r,e){if((n=r.length)>0){for(var t,n,i=0,s=r[0].length,a;i<s;++i){for(a=t=0;t<n;++t)a+=r[t][i][1]||0;if(a)for(t=0;t<n;++t)r[t][i][1]/=a}du(r,e)}}function YH(r,e){if((i=r.length)>0){for(var t=0,n=r[e[0]],i,s=n.length;t<s;++t){for(var a=0,o=0;a<i;++a)o+=r[a][t][1]||0;n[t][1]+=n[t][0]=-o/2}du(r,e)}}function XH(r,e){if(!(!((a=r.length)>0)||!((s=(i=r[e[0]]).length)>0))){for(var t=0,n=1,i,s,a;n<s;++n){for(var o=0,u=0,c=0;o<a;++o){for(var h=r[e[o]],d=h[n][1]||0,g=h[n-1][1]||0,m=(d-g)/2,y=0;y<o;++y){var S=r[e[y]],b=S[n][1]||0,E=S[n-1][1]||0;m+=b-E}u+=d,c+=m*d}i[n-1][1]+=i[n-1][0]=t,u&&(t-=c/u)}i[n-1][1]+=i[n-1][0]=t,du(r,e)}}var Zy={},Jy={},oL;function QH(){return oL||(oL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}r.isUnsafeProperty=e})(Jy)),Jy}var ev={},lL;function q2(){return lL||(lL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}r.isDeepKey=e})(ev)),ev}var tv={},uL;function GT(){return uL||(uL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}r.toKey=e})(tv)),tv}var rv={},nv={},cL;function ZH(){return cL||(cL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return n==="0"&&Object.is(Number(t),-0)?"-0":n}r.toString=e})(nv)),nv}var fL;function zT(){return fL||(fL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=ZH(),t=GT();function n(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let o=0,u="",c="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const d=i[o];c?d==="\\"&&o+1<a?(o++,u+=i[o]):d===c?c="":u+=d:h?d==='"'||d==="'"?c=d:d==="]"?(h=!1,s.push(u),u=""):u+=d:d==="["?(h=!0,u&&(s.push(u),u="")):d==="."?u&&(s.push(u),u=""):u+=d,o++}return u&&s.push(u),s}r.toPath=n})(rv)),rv}var hL;function HT(){return hL||(hL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=QH(),t=q2(),n=GT(),i=zT();function s(o,u,c){if(o==null)return c;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return c;const h=o[u];return h===void 0?t.isDeepKey(u)?s(o,i.toPath(u),c):c:h}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const h=o[u];return h===void 0?c:h}default:{if(Array.isArray(u))return a(o,u,c);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return c;const h=o[u];return h===void 0?c:h}}}function a(o,u,c){if(u.length===0)return c;let h=o;for(let d=0;d<u.length;d++){if(h==null||e.isUnsafeProperty(u[d]))return c;h=h[u[d]]}return h===void 0?c:h}r.get=s})(Zy)),Zy}var iv,dL;function JH(){return dL||(dL=1,iv=HT().get),iv}var eK=JH();const Kg=na(eK);var bi=r=>r===0?0:r>0?1:-1,is=r=>typeof r=="number"&&r!=+r,Qs=r=>typeof r=="string"&&r.indexOf("%")===r.length-1,at=r=>(typeof r=="number"||r instanceof Number)&&!is(r),ss=r=>at(r)||typeof r=="string",tK=0,Jc=r=>{var e=++tK;return"".concat(r||"").concat(e)},eo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(e)&&typeof e!="string")return n;var s;if(Qs(e)){if(t==null)return n;var a=e.indexOf("%");s=t*parseFloat(e.slice(0,a))/100}else s=+e;return is(s)&&(s=n),i&&t!=null&&s>t&&(s=t),s},V2=r=>{if(!Array.isArray(r))return!1;for(var e=r.length,t={},n=0;n<e;n++)if(!t[r[n]])t[r[n]]=!0;else return!0;return!1};function Cn(r,e,t){return at(r)&&at(e)?r+t*(e-r):e}function W2(r,e,t){if(!(!r||!r.length))return r.find(n=>n&&(typeof e=="function"?e(n):Kg(n,e))===t)}var Nr=r=>r===null||typeof r>"u",Of=r=>Nr(r)?r:"".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));function rK(r){return r!=null}function Rf(){}var nK=["type","size","sizeType"];function aE(){return aE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},aE.apply(null,arguments)}function pL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(t),!0).forEach(function(n){iK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iK(r,e,t){return(e=sK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sK(r){var e=aK(r,"string");return typeof e=="symbol"?e:e+""}function aK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function oK(r,e){if(r==null)return{};var t,n,i=lK(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function lK(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Y2={symbolCircle:$T,symbolCross:TH,symbolDiamond:_H,symbolSquare:wH,symbolStar:LH,symbolTriangle:CH,symbolWye:DH},uK=Math.PI/180,cK=r=>{var e="symbol".concat(Of(r));return Y2[e]||$T},fK=(r,e,t)=>{if(e==="area")return r;switch(t){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*uK;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},hK=(r,e)=>{Y2["symbol".concat(Of(r))]=e},KT=r=>{var{type:e="circle",size:t=64,sizeType:n="area"}=r,i=oK(r,nK),s=gL(gL({},i),{},{type:e,size:t,sizeType:n}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var g=cK(a),m=kH().type(g).size(fK(t,n,a)),y=m();if(y!==null)return y},{className:u,cx:c,cy:h}=s,d=pn(s);return at(c)&&at(h)&&at(t)?P.createElement("path",aE({},d,{className:Bt("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(h,")"),d:o()})):null};KT.registerSymbol=hK;var X2=r=>"radius"in r&&"startAngle"in r&&"endAngle"in r,qT=(r,e)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var t=r;if(P.isValidElement(r)&&(t=r.props),typeof t!="object"&&typeof t!="function")return null;var n={};return Object.keys(t).forEach(i=>{BT(i)&&(n[i]=(s=>t[i](t,s)))}),n},dK=(r,e,t)=>n=>(r(e,t,n),null),Q2=(r,e,t)=>{if(r===null||typeof r!="object"&&typeof r!="function")return null;var n=null;return Object.keys(r).forEach(i=>{var s=r[i];BT(i)&&typeof s=="function"&&(n||(n={}),n[i]=dK(s,e,t))}),n};function mL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mL(Object(t),!0).forEach(function(n){gK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):mL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gK(r,e,t){return(e=mK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mK(r){var e=yK(r,"string");return typeof e=="symbol"?e:e+""}function yK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function sn(r,e){var t=pK({},r),n=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&n[o]!==void 0&&(a[o]=n[o]),a),t);return s}function Np(){return Np=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Np.apply(null,arguments)}function yL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(t),!0).forEach(function(n){bK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bK(r,e,t){return(e=SK(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SK(r){var e=xK(r,"string");return typeof e=="symbol"?e:e+""}function xK(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var yi=32,EK={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function TK(r){var{data:e,iconType:t,inactiveColor:n}=r,i=yi/2,s=yi/6,a=yi/3,o=e.inactive?n:e.color,u=t??e.type;if(u==="none")return null;if(u==="plainline"){var c;return P.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:yi,y2:i,className:"recharts-legend-icon"})}if(u==="line")return P.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(yi,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return P.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(yi/8,"h").concat(yi,"v").concat(yi*3/4,"h").concat(-yi,"z"),className:"recharts-legend-icon"});if(P.isValidElement(e.legendIcon)){var h=vK({},e);return delete h.legendIcon,P.cloneElement(e.legendIcon,h)}return P.createElement(KT,{fill:o,cx:i,cy:i,size:yi,sizeType:"diameter",type:u})}function AK(r){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:s,iconType:a}=r,o={x:0,y:0,width:yi,height:yi},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,d)=>{var g=h.formatter||i,m=Bt({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:h.inactive});if(h.type==="none")return null;var y=h.inactive?s:h.color,S=g?g(h.value,h,d):h.value;return P.createElement("li",Np({className:m,style:u,key:"legend-item-".concat(d)},Q2(r,h,d)),P.createElement(UT,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(S," legend icon")},P.createElement(TK,{data:h,iconType:a,inactiveColor:s})),P.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},S))})}var _K=r=>{var e=sn(r,EK),{payload:t,layout:n,align:i}=e;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return P.createElement("ul",{className:"recharts-default-legend",style:s},P.createElement(AK,Np({},e,{payload:t})))},sv={},av={},vL;function wK(){return vL||(vL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){const i=new Map;for(let s=0;s<t.length;s++){const a=t[s],o=n(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}r.uniqBy=e})(av)),av}var ov={},bL;function Z2(){return bL||(bL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t}r.identity=e})(ov)),ov}var lv={},uv={},cv={},SL;function IK(){return SL||(SL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}r.isLength=e})(cv)),cv}var xL;function VT(){return xL||(xL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=IK();function t(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}r.isArrayLike=t})(uv)),uv}var fv={},EL;function OK(){return EL||(EL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}r.isObjectLike=e})(fv)),fv}var TL;function RK(){return TL||(TL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=VT(),t=OK();function n(i){return t.isObjectLike(i)&&e.isArrayLike(i)}r.isArrayLikeObject=n})(lv)),lv}var hv={},dv={},AL;function LK(){return AL||(AL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=HT();function t(n){return function(i){return e.get(i,n)}}r.property=t})(dv)),dv}var pv={},gv={},mv={},yv={},_L;function J2(){return _L||(_L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}r.isObject=e})(yv)),yv}var vv={},wL;function eB(){return wL||(wL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}r.isPrimitive=e})(vv)),vv}var bv={},IL;function tB(){return IL||(IL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){return t===n||Number.isNaN(t)&&Number.isNaN(n)}r.eq=e})(bv)),bv}var OL;function CK(){return OL||(OL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=J2(),t=eB(),n=tB();function i(h,d,g){return typeof g!="function"?i(h,d,()=>{}):s(h,d,function m(y,S,b,E,x,T){const w=g(y,S,b,E,x,T);return w!==void 0?!!w:s(y,S,m,T)},new Map)}function s(h,d,g,m){if(d===h)return!0;switch(typeof d){case"object":return a(h,d,g,m);case"function":return Object.keys(d).length>0?s(h,{...d},g,m):n.eq(h,d);default:return e.isObject(h)?typeof d=="string"?d==="":!0:n.eq(h,d)}}function a(h,d,g,m){if(d==null)return!0;if(Array.isArray(d))return u(h,d,g,m);if(d instanceof Map)return o(h,d,g,m);if(d instanceof Set)return c(h,d,g,m);const y=Object.keys(d);if(h==null)return y.length===0;if(y.length===0)return!0;if(m?.has(d))return m.get(d)===h;m?.set(d,h);try{for(let S=0;S<y.length;S++){const b=y[S];if(!t.isPrimitive(h)&&!(b in h)||d[b]===void 0&&h[b]!==void 0||d[b]===null&&h[b]!==null||!g(h[b],d[b],b,h,d,m))return!1}return!0}finally{m?.delete(d)}}function o(h,d,g,m){if(d.size===0)return!0;if(!(h instanceof Map))return!1;for(const[y,S]of d.entries()){const b=h.get(y);if(g(b,S,y,h,d,m)===!1)return!1}return!0}function u(h,d,g,m){if(d.length===0)return!0;if(!Array.isArray(h))return!1;const y=new Set;for(let S=0;S<d.length;S++){const b=d[S];let E=!1;for(let x=0;x<h.length;x++){if(y.has(x))continue;const T=h[x];let w=!1;if(g(T,b,S,h,d,m)&&(w=!0),w){y.add(x),E=!0;break}}if(!E)return!1}return!0}function c(h,d,g,m){return d.size===0?!0:h instanceof Set?u([...h],[...d],g,m):!1}r.isMatchWith=i,r.isSetMatch=c})(mv)),mv}var RL;function rB(){return RL||(RL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=CK();function t(n,i){return e.isMatchWith(n,i,()=>{})}r.isMatch=t})(gv)),gv}var Sv={},xv={},Ev={},LL;function PK(){return LL||(LL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(n=>Object.prototype.propertyIsEnumerable.call(t,n))}r.getSymbols=e})(Ev)),Ev}var Tv={},CL;function nB(){return CL||(CL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.getTag=e})(Tv)),Tv}var Av={},PL;function iB(){return PL||(PL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",u="[object Map]",c="[object Set]",h="[object Array]",d="[object Function]",g="[object ArrayBuffer]",m="[object Object]",y="[object Error]",S="[object DataView]",b="[object Uint8Array]",E="[object Uint8ClampedArray]",x="[object Uint16Array]",T="[object Uint32Array]",w="[object BigUint64Array]",_="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",C="[object BigInt64Array]",B="[object Float32Array]",N="[object Float64Array]";r.argumentsTag=s,r.arrayBufferTag=g,r.arrayTag=h,r.bigInt64ArrayTag=C,r.bigUint64ArrayTag=w,r.booleanTag=i,r.dataViewTag=S,r.dateTag=o,r.errorTag=y,r.float32ArrayTag=B,r.float64ArrayTag=N,r.functionTag=d,r.int16ArrayTag=R,r.int32ArrayTag=O,r.int8ArrayTag=_,r.mapTag=u,r.numberTag=n,r.objectTag=m,r.regexpTag=e,r.setTag=c,r.stringTag=t,r.symbolTag=a,r.uint16ArrayTag=x,r.uint32ArrayTag=T,r.uint8ArrayTag=b,r.uint8ClampedArrayTag=E})(Av)),Av}var _v={},DL;function DK(){return DL||(DL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}r.isTypedArray=e})(_v)),_v}var kL;function sB(){return kL||(kL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=PK(),t=nB(),n=iB(),i=eB(),s=DK();function a(h,d){return o(h,void 0,h,new Map,d)}function o(h,d,g,m=new Map,y=void 0){const S=y?.(h,d,g,m);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(m.has(h))return m.get(h);if(Array.isArray(h)){const b=new Array(h.length);m.set(h,b);for(let E=0;E<h.length;E++)b[E]=o(h[E],E,g,m,y);return Object.hasOwn(h,"index")&&(b.index=h.index),Object.hasOwn(h,"input")&&(b.input=h.input),b}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const b=new RegExp(h.source,h.flags);return b.lastIndex=h.lastIndex,b}if(h instanceof Map){const b=new Map;m.set(h,b);for(const[E,x]of h)b.set(E,o(x,E,g,m,y));return b}if(h instanceof Set){const b=new Set;m.set(h,b);for(const E of h)b.add(o(E,void 0,g,m,y));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const b=new(Object.getPrototypeOf(h)).constructor(h.length);m.set(h,b);for(let E=0;E<h.length;E++)b[E]=o(h[E],E,g,m,y);return b}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const b=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return m.set(h,b),u(b,h,g,m,y),b}if(typeof File<"u"&&h instanceof File){const b=new File([h],h.name,{type:h.type});return m.set(h,b),u(b,h,g,m,y),b}if(typeof Blob<"u"&&h instanceof Blob){const b=new Blob([h],{type:h.type});return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof Error){const b=new h.constructor;return m.set(h,b),b.message=h.message,b.name=h.name,b.stack=h.stack,b.cause=h.cause,u(b,h,g,m,y),b}if(h instanceof Boolean){const b=new Boolean(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof Number){const b=new Number(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(h instanceof String){const b=new String(h.valueOf());return m.set(h,b),u(b,h,g,m,y),b}if(typeof h=="object"&&c(h)){const b=Object.create(Object.getPrototypeOf(h));return m.set(h,b),u(b,h,g,m,y),b}return h}function u(h,d,g=h,m,y){const S=[...Object.keys(d),...e.getSymbols(d)];for(let b=0;b<S.length;b++){const E=S[b],x=Object.getOwnPropertyDescriptor(h,E);(x==null||x.writable)&&(h[E]=o(d[E],E,g,m,y))}}function c(h){switch(t.getTag(h)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}r.cloneDeepWith=a,r.cloneDeepWithImpl=o,r.copyProperties=u})(xv)),xv}var ML;function kK(){return ML||(ML=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=sB();function t(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}r.cloneDeep=t})(Sv)),Sv}var NL;function MK(){return NL||(NL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=rB(),t=kK();function n(i){return i=t.cloneDeep(i),s=>e.isMatch(s,i)}r.matches=n})(pv)),pv}var wv={},Iv={},Ov={},BL;function NK(){return BL||(BL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=sB(),t=iB();function n(i,s){return e.cloneDeepWith(i,(a,o,u,c)=>{const h=s?.(a,o,u,c);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const d=new i.constructor(i?.valueOf());return e.copyProperties(d,i),d}case t.argumentsTag:{const d={};return e.copyProperties(d,i),d.length=i.length,d[Symbol.iterator]=i[Symbol.iterator],d}default:return}})}r.cloneDeepWith=n})(Ov)),Ov}var UL;function BK(){return UL||(UL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=NK();function t(n){return e.cloneDeepWith(n)}r.cloneDeep=t})(Iv)),Iv}var Rv={},Lv={},jL;function aB(){return jL||(jL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}r.isIndex=t})(Lv)),Lv}var Cv={},FL;function UK(){return FL||(FL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=nB();function t(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}r.isArguments=t})(Cv)),Cv}var $L;function jK(){return $L||($L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=q2(),t=aB(),n=UK(),i=zT();function s(a,o){let u;if(Array.isArray(o)?u=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?u=i.toPath(o):u=[o],u.length===0)return!1;let c=a;for(let h=0;h<u.length;h++){const d=u[h];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||n.isArguments(c))&&t.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}r.has=s})(Rv)),Rv}var GL;function FK(){return GL||(GL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=rB(),t=GT(),n=BK(),i=HT(),s=jK();function a(o,u){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return u=n.cloneDeep(u),function(c){const h=i.get(c,o);return h===void 0?s.has(c,o):u===void 0?h===void 0:e.isMatch(h,u)}}r.matchesProperty=a})(wv)),wv}var zL;function $K(){return zL||(zL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Z2(),t=LK(),n=MK(),i=FK();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):n.matches(a);case"string":case"symbol":case"number":return t.property(a)}}r.iteratee=s})(hv)),hv}var HL;function GK(){return HL||(HL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=wK(),t=Z2(),n=RK(),i=$K();function s(a,o=t.identity){return n.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}r.uniqBy=s})(sv)),sv}var Pv,KL;function zK(){return KL||(KL=1,Pv=GK().uniqBy),Pv}var HK=zK();const qL=na(HK);function oB(r,e,t){return e===!0?qL(r,t):typeof e=="function"?qL(r,e):r}var Dv={exports:{}},kv={},Mv={exports:{}},Nv={};var VL;function KK(){if(VL)return Nv;VL=1;var r=Tu();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,s=r.useLayoutEffect,a=r.useDebugValue;function o(d,g){var m=g(),y=n({inst:{value:m,getSnapshot:g}}),S=y[0].inst,b=y[1];return s(function(){S.value=m,S.getSnapshot=g,u(S)&&b({inst:S})},[d,m,g]),i(function(){return u(S)&&b({inst:S}),d(function(){u(S)&&b({inst:S})})},[d]),a(m),m}function u(d){var g=d.getSnapshot;d=d.value;try{var m=g();return!t(d,m)}catch{return!0}}function c(d,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return Nv.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:h,Nv}var WL;function qK(){return WL||(WL=1,Mv.exports=KK()),Mv.exports}var YL;function VK(){if(YL)return kv;YL=1;var r=Tu(),e=qK();function t(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=r.useRef,a=r.useEffect,o=r.useMemo,u=r.useDebugValue;return kv.useSyncExternalStoreWithSelector=function(c,h,d,g,m){var y=s(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=o(function(){function E(R){if(!x){if(x=!0,T=R,R=g(R),m!==void 0&&S.hasValue){var O=S.value;if(m(O,R))return w=O}return w=R}if(O=w,n(T,R))return O;var C=g(R);return m!==void 0&&m(O,C)?(T=R,O):(T=R,w=C)}var x=!1,T,w,_=d===void 0?null:d;return[function(){return E(h())},_===null?void 0:function(){return E(_())}]},[h,d,g,m]);var b=i(c,y[0],y[1]);return a(function(){S.hasValue=!0,S.value=b},[b]),u(b),b},kv}var XL;function WK(){return XL||(XL=1,Dv.exports=VK()),Dv.exports}var YK=WK(),WT=P.createContext(null),XK=r=>r,vr=()=>{var r=P.useContext(WT);return r?r.store.dispatch:XK},gp=()=>{},QK=()=>gp,ZK=(r,e)=>r===e;function it(r){var e=P.useContext(WT);return YK.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:QK,e?e.store.getState:gp,e?e.store.getState:gp,e?r:gp,ZK)}function JK(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function eq(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function tq(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var QL=r=>Array.isArray(r)?r:[r];function rq(r){const e=Array.isArray(r[0])?r[0]:r;return tq(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function nq(r,e){const t=[],{length:n}=r;for(let i=0;i<n;i++)t.push(r[i].apply(null,e));return t}var iq=class{constructor(r){this.value=r}deref(){return this.value}},sq=typeof WeakRef<"u"?WeakRef:iq,aq=0,ZL=1;function fd(){return{s:aq,v:void 0,o:null,p:null}}function lB(r,e={}){let t=fd();const{resultEqualityCheck:n}=e;let i,s=0;function a(){let o=t;const{length:u}=arguments;for(let d=0,g=u;d<g;d++){const m=arguments[d];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const S=y.get(m);S===void 0?(o=fd(),y.set(m,o)):o=S}else{let y=o.p;y===null&&(o.p=y=new Map);const S=y.get(m);S===void 0?(o=fd(),y.set(m,o)):o=S}}const c=o;let h;if(o.s===ZL)h=o.v;else if(h=r.apply(null,arguments),s++,n){const d=i?.deref?.()??i;d!=null&&n(d,h)&&(h=d,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new sq(h):h}return c.s=ZL,c.v=h,h}return a.clearCache=()=>{t=fd(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function oq(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,n=(...i)=>{let s=0,a=0,o,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),JK(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...t,...u},{memoize:d,memoizeOptions:g=[],argsMemoize:m=lB,argsMemoizeOptions:y=[]}=h,S=QL(g),b=QL(y),E=rq(i),x=d(function(){return s++,c.apply(null,arguments)},...S),T=m(function(){a++;const _=nq(E,arguments);return o=x.apply(null,_),o},...b);return Object.assign(T,{resultFunc:c,memoizedResultFunc:x,dependencies:E,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ke=oq(lB),lq=Object.assign((r,e=ke)=>{eq(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),n=t.map(s=>r[s]);return e(n,(...s)=>s.reduce((a,o,u)=>(a[t[u]]=o,a),{}))},{withTypes:()=>lq}),Bv={},Uv={},jv={},JL;function uq(){return JL||(JL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const t=(n,i,s)=>{if(n!==i){const a=e(n),o=e(i);if(a===o&&a===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};r.compareValues=t})(jv)),jv}var Fv={},$v={},eC;function uB(){return eC||(eC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}r.isSymbol=e})($v)),$v}var tC;function cq(){return tC||(tC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uB(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!t.test(s))||a!=null&&Object.hasOwn(a,s)}r.isKey=i})(Fv)),Fv}var rC;function fq(){return rC||(rC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uq(),t=cq(),n=zT();function i(s,a,o,u){if(s==null)return[];o=u?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,y)=>{let S=m;for(let b=0;b<y.length&&S!=null;++b)S=S[y[b]];return S},h=(m,y)=>y==null||m==null?y:typeof m=="object"&&"key"in m?Object.hasOwn(y,m.key)?y[m.key]:c(y,m.path):typeof m=="function"?m(y):Array.isArray(m)?c(y,m):typeof y=="object"?y[m]:y,d=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||t.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:d.map(y=>h(y,m))})).slice().sort((m,y)=>{for(let S=0;S<d.length;S++){const b=e.compareValues(m.criteria[S],y.criteria[S],o[S]);if(b!==0)return b}return 0}).map(m=>m.original)}r.orderBy=i})(Uv)),Uv}var Gv={},nC;function hq(){return nC||(nC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n=1){const i=[],s=Math.floor(n),a=(o,u)=>{for(let c=0;c<o.length;c++){const h=o[c];Array.isArray(h)&&u<s?a(h,u+1):i.push(h)}};return a(t,0),i}r.flatten=e})(Gv)),Gv}var zv={},iC;function cB(){return iC||(iC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=aB(),t=VT(),n=J2(),i=tB();function s(a,o,u){return n.isObject(u)&&(typeof o=="number"&&t.isArrayLike(u)&&e.isIndex(o)&&o<u.length||typeof o=="string"&&o in u)?i.eq(u[o],a):!1}r.isIterateeCall=s})(zv)),zv}var sC;function dq(){return sC||(sC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=fq(),t=hq(),n=cB();function i(s,...a){const o=a.length;return o>1&&n.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&n.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,t.flatten(a),["asc"])}r.sortBy=i})(Bv)),Bv}var Hv,aC;function pq(){return aC||(aC=1,Hv=dq().sortBy),Hv}var gq=pq();const qg=na(gq);var fB=r=>r.legend.settings,mq=r=>r.legend.size,yq=r=>r.legend.payload,vq=ke([yq,fB],(r,e)=>{var{itemSorter:t}=e,n=r.flat(1);return t?qg(n,t):n});function bq(){return it(vq)}var hd=1;function hB(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=P.useState({height:0,left:0,top:0,width:0}),n=P.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>hd||Math.abs(a.left-e.left)>hd||Math.abs(a.top-e.top)>hd||Math.abs(a.width-e.width)>hd)&&t({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...r]);return[e,n]}function Kr(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var Sq=typeof Symbol=="function"&&Symbol.observable||"@@observable",oC=Sq,Kv=()=>Math.random().toString(36).substring(7).split("").join("."),xq={INIT:`@@redux/INIT${Kv()}`,REPLACE:`@@redux/REPLACE${Kv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Kv()}`},Bp=xq;function YT(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function dB(r,e,t){if(typeof r!="function")throw new Error(Kr(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Kr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Kr(1));return t(dB)(r,e)}let n=r,i=e,s=new Map,a=s,o=0,u=!1;function c(){a===s&&(a=new Map,s.forEach((b,E)=>{a.set(E,b)}))}function h(){if(u)throw new Error(Kr(3));return i}function d(b){if(typeof b!="function")throw new Error(Kr(4));if(u)throw new Error(Kr(5));let E=!0;c();const x=o++;return a.set(x,b),function(){if(E){if(u)throw new Error(Kr(6));E=!1,c(),a.delete(x),s=null}}}function g(b){if(!YT(b))throw new Error(Kr(7));if(typeof b.type>"u")throw new Error(Kr(8));if(typeof b.type!="string")throw new Error(Kr(17));if(u)throw new Error(Kr(9));try{u=!0,i=n(i,b)}finally{u=!1}return(s=a).forEach(x=>{x()}),b}function m(b){if(typeof b!="function")throw new Error(Kr(10));n=b,g({type:Bp.REPLACE})}function y(){const b=d;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Kr(11));function x(){const w=E;w.next&&w.next(h())}return x(),{unsubscribe:b(x)}},[oC](){return this}}}return g({type:Bp.INIT}),{dispatch:g,subscribe:d,getState:h,replaceReducer:m,[oC]:y}}function Eq(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Bp.INIT})>"u")throw new Error(Kr(12));if(typeof t(void 0,{type:Bp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Kr(13))})}function pB(r){const e=Object.keys(r),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof r[a]=="function"&&(t[a]=r[a])}const n=Object.keys(t);let i;try{Eq(t)}catch(s){i=s}return function(a={},o){if(i)throw i;let u=!1;const c={};for(let h=0;h<n.length;h++){const d=n[h],g=t[d],m=a[d],y=g(m,o);if(typeof y>"u")throw o&&o.type,new Error(Kr(14));c[d]=y,u=u||y!==m}return u=u||n.length!==Object.keys(a).length,u?c:a}}function Up(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function Tq(...r){return e=>(t,n)=>{const i=e(t,n);let s=()=>{throw new Error(Kr(15))};const a={getState:i.getState,dispatch:(u,...c)=>s(u,...c)},o=r.map(u=>u(a));return s=Up(...o)(i.dispatch),{...i,dispatch:s}}}function gB(r){return YT(r)&&"type"in r&&typeof r.type=="string"}var mB=Symbol.for("immer-nothing"),lC=Symbol.for("immer-draftable"),gn=Symbol.for("immer-state");function Ci(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Jn=Object,pu=Jn.getPrototypeOf,jp="constructor",Vg="prototype",oE="configurable",Fp="enumerable",mp="writable",ef="value",Zs=r=>!!r&&!!r[gn];function Ni(r){return r?yB(r)||Wg(r)||!!r[lC]||!!r[jp]?.[lC]||Yg(r)||Xg(r):!1}var Aq=Jn[Vg][jp].toString(),uC=new WeakMap;function yB(r){if(!r||!XT(r))return!1;const e=pu(r);if(e===null||e===Jn[Vg])return!0;const t=Jn.hasOwnProperty.call(e,jp)&&e[jp];if(t===Object)return!0;if(!tu(t))return!1;let n=uC.get(t);return n===void 0&&(n=Function.toString.call(t),uC.set(t,n)),n===Aq}function Lf(r,e,t=!0){Cf(r)===0?(t?Reflect.ownKeys(r):Jn.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function Cf(r){const e=r[gn];return e?e.type_:Wg(r)?1:Yg(r)?2:Xg(r)?3:0}var cC=(r,e,t=Cf(r))=>t===2?r.has(e):Jn[Vg].hasOwnProperty.call(r,e),lE=(r,e,t=Cf(r))=>t===2?r.get(e):r[e],$p=(r,e,t,n=Cf(r))=>{n===2?r.set(e,t):n===3?r.add(t):r[e]=t};function _q(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Wg=Array.isArray,Yg=r=>r instanceof Map,Xg=r=>r instanceof Set,XT=r=>typeof r=="object",tu=r=>typeof r=="function",qv=r=>typeof r=="boolean",Fs=r=>r.copy_||r.base_,QT=r=>r.modified_?r.copy_:r.base_;function uE(r,e){if(Yg(r))return new Map(r);if(Xg(r))return new Set(r);if(Wg(r))return Array[Vg].slice.call(r);const t=yB(r);if(e===!0||e==="class_only"&&!t){const n=Jn.getOwnPropertyDescriptors(r);delete n[gn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],o=n[a];o[mp]===!1&&(o[mp]=!0,o[oE]=!0),(o.get||o.set)&&(n[a]={[oE]:!0,[mp]:!0,[Fp]:o[Fp],[ef]:r[a]})}return Jn.create(pu(r),n)}else{const n=pu(r);if(n!==null&&t)return{...r};const i=Jn.create(n);return Jn.assign(i,r)}}function ZT(r,e=!1){return Qg(r)||Zs(r)||!Ni(r)||(Cf(r)>1&&Jn.defineProperties(r,{set:dd,add:dd,clear:dd,delete:dd}),Jn.freeze(r),e&&Lf(r,(t,n)=>{ZT(n,!0)},!1)),r}function wq(){Ci(2)}var dd={[ef]:wq};function Qg(r){return r===null||!XT(r)?!0:Jn.isFrozen(r)}var Gp="MapSet",cE="Patches",vB={};function gu(r){const e=vB[r];return e||Ci(0,r),e}var Iq=r=>!!vB[r],tf,bB=()=>tf,Oq=(r,e)=>({drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Iq(Gp)?gu(Gp):void 0});function fC(r,e){e&&(r.patchPlugin_=gu(cE),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function fE(r){hE(r),r.drafts_.forEach(Rq),r.drafts_=null}function hE(r){r===tf&&(tf=r.parent_)}var hC=r=>tf=Oq(tf,r);function Rq(r){const e=r[gn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dC(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(r!==void 0&&r!==t){t[gn].modified_&&(fE(e),Ci(4)),Ni(r)&&(r=pC(e,r));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(t[gn].base_,r,e)}else r=pC(e,t);return Lq(e,r,!0),fE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==mB?r:void 0}function pC(r,e){if(Qg(e))return e;const t=e[gn];if(!t)return JT(e,r.handledSet_,r);if(!Zg(t,r))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:n}=t;if(n)for(;n.length>0;)n.pop()(r);EB(t,r)}return t.copy_}function Lq(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&ZT(e,t)}function SB(r){r.finalized_=!0,r.scope_.unfinalizedDrafts_--}var Zg=(r,e)=>r.scope_===e,Cq=[];function xB(r,e,t,n){const i=Fs(r),s=r.type_;if(n!==void 0&&lE(i,n,s)===e){$p(i,n,t,s);return}if(!r.draftLocations_){const o=r.draftLocations_=new Map;Lf(i,(u,c)=>{if(Zs(c)){const h=o.get(c)||[];h.push(u),o.set(c,h)}})}const a=r.draftLocations_.get(e)??Cq;for(const o of a)$p(i,o,t,s)}function Pq(r,e,t){r.callbacks_.push(function(i){const s=e;if(!s||!Zg(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=QT(s);xB(r,s.draft_??s,a,t),EB(s,i)})}function EB(r,e){if(r.modified_&&!r.finalized_&&(r.type_===3||(r.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(r);i&&n.generatePatches_(r,i,e)}SB(r)}}function Dq(r,e,t){const{scope_:n}=r;if(Zs(t)){const i=t[gn];Zg(i,n)&&i.callbacks_.push(function(){yp(r);const a=QT(i);xB(r,t,a,e)})}else Ni(t)&&r.callbacks_.push(function(){const s=Fs(r);lE(s,e,r.type_)===t&&n.drafts_.length>1&&(r.assigned_.get(e)??!1)===!0&&r.copy_&&JT(lE(r.copy_,e,r.type_),n.handledSet_,n)})}function JT(r,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Zs(r)||e.has(r)||!Ni(r)||Qg(r)||(e.add(r),Lf(r,(n,i)=>{if(Zs(i)){const s=i[gn];if(Zg(s,t)){const a=QT(s);$p(r,n,a,r.type_),SB(s)}}else Ni(i)&&JT(i,e,t)})),r}function kq(r,e){const t=Wg(r),n={type_:t?1:0,scope_:e?e.scope_:bB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=eA;t&&(i=[n],s=rf);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,[o,n]}var eA={get(r,e){if(e===gn)return r;const t=Fs(r);if(!cC(t,e,r.type_))return Mq(r,t,e);const n=t[e];if(r.finalized_||!Ni(n))return n;if(n===Vv(r.base_,e)){yp(r);const i=r.type_===1?+e:e,s=pE(r.scope_,n,r,i);return r.copy_[i]=s}return n},has(r,e){return e in Fs(r)},ownKeys(r){return Reflect.ownKeys(Fs(r))},set(r,e,t){const n=TB(Fs(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Vv(Fs(r),e),s=i?.[gn];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_.set(e,!1),!0;if(_q(t,i)&&(t!==void 0||cC(r.base_,e,r.type_)))return!0;yp(r),dE(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_.set(e,!0),Dq(r,e,t)),!0},deleteProperty(r,e){return yp(r),Vv(r.base_,e)!==void 0||e in r.base_?(r.assigned_.set(e,!1),dE(r)):r.assigned_.delete(e),r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Fs(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{[mp]:!0,[oE]:r.type_!==1||e!=="length",[Fp]:n[Fp],[ef]:t[e]}},defineProperty(){Ci(11)},getPrototypeOf(r){return pu(r.base_)},setPrototypeOf(){Ci(12)}},rf={};Lf(eA,(r,e)=>{rf[r]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}});rf.deleteProperty=function(r,e){return rf.set.call(this,r,e,void 0)};rf.set=function(r,e,t){return eA.set.call(this,r[0],e,t,r[0])};function Vv(r,e){const t=r[gn];return(t?Fs(t):r)[e]}function Mq(r,e,t){const n=TB(e,t);return n?ef in n?n[ef]:n.get?.call(r.draft_):void 0}function TB(r,e){if(!(e in r))return;let t=pu(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=pu(t)}}function dE(r){r.modified_||(r.modified_=!0,r.parent_&&dE(r.parent_))}function yp(r){r.copy_||(r.assigned_=new Map,r.copy_=uE(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var Nq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,i)=>{if(tu(t)&&!tu(n)){const a=n;n=t;const o=this;return function(c=a,...h){return o.produce(c,d=>n.call(this,d,...h))}}tu(n)||Ci(6),i!==void 0&&!tu(i)&&Ci(7);let s;if(Ni(t)){const a=hC(this),o=pE(a,t,void 0);let u=!0;try{s=n(o),u=!1}finally{u?fE(a):hE(a)}return fC(a,i),dC(s,a)}else if(!t||!XT(t)){if(s=n(t),s===void 0&&(s=t),s===mB&&(s=void 0),this.autoFreeze_&&ZT(s,!0),i){const a=[],o=[];gu(cE).generateReplacementPatches_(t,s,{patches_:a,inversePatches_:o}),i(a,o)}return s}else Ci(1,t)},this.produceWithPatches=(t,n)=>{if(tu(t))return(o,...u)=>this.produceWithPatches(o,c=>t(c,...u));let i,s;return[this.produce(t,n,(o,u)=>{i=o,s=u}),i,s]},qv(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),qv(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),qv(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ni(e)||Ci(8),Zs(e)&&(e=ki(e));const t=hC(this),n=pE(t,e,void 0);return n[gn].isManual_=!0,hE(t),n}finishDraft(e,t){const n=e&&e[gn];(!n||!n.isManual_)&&Ci(9);const{scope_:i}=n;return fC(i,t),dC(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const i=gu(cE).applyPatches_;return Zs(e)?i(e,t):this.produce(e,s=>i(s,t))}};function pE(r,e,t,n){const[i,s]=Yg(e)?gu(Gp).proxyMap_(e,t):Xg(e)?gu(Gp).proxySet_(e,t):kq(e,t);return(t?.scope_??bB()).drafts_.push(i),s.callbacks_=t?.callbacks_??[],s.key_=n,t&&n!==void 0?Pq(t,s,n):s.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:c}=u;s.modified_&&c&&c.generatePatches_(s,[],u)}),i}function ki(r){return Zs(r)||Ci(10,r),AB(r)}function AB(r){if(!Ni(r)||Qg(r))return r;const e=r[gn];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=uE(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=uE(r,!0);return Lf(t,(i,s)=>{$p(t,i,AB(s))},n),e&&(e.finalized_=!1),t}var Bq=new Nq,_B=Bq.produce;function wB(r){return({dispatch:t,getState:n})=>i=>s=>typeof s=="function"?s(t,n,r):i(s)}var Uq=wB(),jq=wB,Fq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Up:Up.apply(null,arguments)};function xi(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(ei(0));return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>gB(n)&&n.type===r,t}var IB=class $c extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$c.prototype)}static get[Symbol.species](){return $c}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $c(...e[0].concat(this)):new $c(...e.concat(this))}};function gC(r){return Ni(r)?_B(r,()=>{}):r}function pd(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function $q(r){return typeof r=="boolean"}var Gq=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new IB;return t&&($q(t)?a.push(Uq):a.push(jq(t.extraArgument))),a},OB="RTK_autoBatch",Xt=()=>r=>({payload:r,meta:{[OB]:!0}}),mC=r=>e=>{setTimeout(e,r)},RB=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,s=!1,a=!1;const o=new Set,u=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mC(10):r.type==="callback"?r.queueNotification:mC(r.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const d=()=>i&&h(),g=n.subscribe(d);return o.add(h),()=>{g(),o.delete(h)}},dispatch(h){try{return i=!h?.meta?.[OB],s=!i,s&&(a||(a=!0,u(c))),n.dispatch(h)}finally{i=!0}}})},zq=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new IB(r);return n&&i.push(RB(typeof n=="object"?n:void 0)),i};function Hq(r){const e=Gq(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(YT(t))o=pB(t);else throw new Error(ei(1));let u;typeof n=="function"?u=n(e):u=e();let c=Up;i&&(c=Fq({trace:!1,...typeof i=="object"&&i}));const h=Tq(...u),d=zq(h);let g=typeof a=="function"?a(d):d();const m=c(...g);return dB(o,s,m)}function LB(r){const e={},t=[];let n;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(ei(28));if(o in e)throw new Error(ei(29));return e[o]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&t.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return t.push({matcher:s,reducer:a}),i},addDefaultCase(s){return n=s,i}};return r(i),[e,t,n]}function Kq(r){return typeof r=="function"}function qq(r,e){let[t,n,i]=LB(e),s;if(Kq(r))s=()=>gC(r());else{const o=gC(r);s=()=>o}function a(o=s(),u){let c=[t[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,d)=>{if(d)if(Zs(h)){const m=d(h,u);return m===void 0?h:m}else{if(Ni(h))return _B(h,g=>d(g,u));{const g=d(h,u);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},o)}return a.getInitialState=s,a}var Vq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wq=(r=21)=>{let e="",t=r;for(;t--;)e+=Vq[Math.random()*64|0];return e},Yq=Symbol.for("rtk-slice-createasyncthunk");function Xq(r,e){return`${r}/${e}`}function Qq({creators:r}={}){const e=r?.asyncThunk?.[Yq];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(ei(11));const a=(typeof n.reducers=="function"?n.reducers(Jq()):n.reducers)||{},o=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(T,w){const _=typeof T=="string"?T:T.type;if(!_)throw new Error(ei(12));if(_ in u.sliceCaseReducersByType)throw new Error(ei(13));return u.sliceCaseReducersByType[_]=w,c},addMatcher(T,w){return u.sliceMatchers.push({matcher:T,reducer:w}),c},exposeAction(T,w){return u.actionCreators[T]=w,c},exposeCaseReducer(T,w){return u.sliceCaseReducersByName[T]=w,c}};o.forEach(T=>{const w=a[T],_={reducerName:T,type:Xq(i,T),createNotation:typeof n.reducers=="function"};t9(w)?n9(_,w,c,e):e9(_,w,c)});function h(){const[T={},w=[],_=void 0]=typeof n.extraReducers=="function"?LB(n.extraReducers):[n.extraReducers],R={...T,...u.sliceCaseReducersByType};return qq(n.initialState,O=>{for(let C in R)O.addCase(C,R[C]);for(let C of u.sliceMatchers)O.addMatcher(C.matcher,C.reducer);for(let C of w)O.addMatcher(C.matcher,C.reducer);_&&O.addDefaultCase(_)})}const d=T=>T,g=new Map,m=new WeakMap;let y;function S(T,w){return y||(y=h()),y(T,w)}function b(){return y||(y=h()),y.getInitialState()}function E(T,w=!1){function _(O){let C=O[T];return typeof C>"u"&&w&&(C=pd(m,_,b)),C}function R(O=d){const C=pd(g,w,()=>new WeakMap);return pd(C,O,()=>{const B={};for(const[N,U]of Object.entries(n.selectors??{}))B[N]=Zq(U,O,()=>pd(m,O,b),w);return B})}return{reducerPath:T,getSelectors:R,get selectors(){return R(_)},selectSlice:_}}const x={name:i,reducer:S,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...E(s),injectInto(T,{reducerPath:w,..._}={}){const R=w??s;return T.inject({reducerPath:R,reducer:S},_),{...x,...E(R,!0)}}};return x}}function Zq(r,e,t,n){function i(s,...a){let o=e(s);return typeof o>"u"&&n&&(o=t()),r(o,...a)}return i.unwrapped=r,i}var Nn=Qq();function Jq(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function e9({type:r,reducerName:e,createNotation:t},n,i){let s,a;if("reducer"in n){if(t&&!r9(n))throw new Error(ei(17));s=n.reducer,a=n.prepare}else s=n;i.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,a?xi(r,a):xi(r))}function t9(r){return r._reducerDefinitionType==="asyncThunk"}function r9(r){return r._reducerDefinitionType==="reducerWithPrepare"}function n9({type:r,reducerName:e},t,n,i){if(!i)throw new Error(ei(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:u,settled:c,options:h}=t,d=i(r,s,h);n.exposeAction(e,d),a&&n.addCase(d.fulfilled,a),o&&n.addCase(d.pending,o),u&&n.addCase(d.rejected,u),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(e,{fulfilled:a||gd,pending:o||gd,rejected:u||gd,settled:c||gd})}function gd(){}var i9="task",CB="listener",PB="completed",tA="cancelled",s9=`task-${tA}`,a9=`task-${PB}`,gE=`${CB}-${tA}`,o9=`${CB}-${PB}`,Jg=class{constructor(r){this.code=r,this.message=`${i9} ${tA} (reason: ${r})`}name="TaskAbortError";message},rA=(r,e)=>{if(typeof r!="function")throw new TypeError(ei(32))},zp=()=>{},DB=(r,e=zp)=>(r.catch(e),r),kB=(r,e)=>(r.addEventListener("abort",e,{once:!0}),()=>r.removeEventListener("abort",e)),zo=(r,e)=>{const t=r.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),r.abort(e))},Ho=r=>{if(r.aborted){const{reason:e}=r;throw new Jg(e)}};function MB(r,e){let t=zp;return new Promise((n,i)=>{const s=()=>i(new Jg(r.reason));if(r.aborted){s();return}t=kB(r,s),e.finally(()=>t()).then(n,i)}).finally(()=>{t=zp})}var l9=async(r,e)=>{try{return await Promise.resolve(),{status:"ok",value:await r()}}catch(t){return{status:t instanceof Jg?"cancelled":"rejected",error:t}}finally{e?.()}},Hp=r=>e=>DB(MB(r,e).then(t=>(Ho(r),t))),NB=r=>{const e=Hp(r);return t=>e(new Promise(n=>setTimeout(n,t)))},{assign:ou}=Object,yC={},em="listenerMiddleware",u9=(r,e)=>{const t=n=>kB(r,()=>zo(n,r.reason));return(n,i)=>{rA(n);const s=new AbortController;t(s);const a=l9(async()=>{Ho(r),Ho(s.signal);const o=await n({pause:Hp(s.signal),delay:NB(s.signal),signal:s.signal});return Ho(s.signal),o},()=>zo(s,a9));return i?.autoJoin&&e.push(a.catch(zp)),{result:Hp(r)(a),cancel(){zo(s,s9)}}}},c9=(r,e)=>{const t=async(n,i)=>{Ho(e);let s=()=>{};const o=[new Promise((u,c)=>{let h=r({predicate:n,effect:(d,g)=>{g.unsubscribe(),u([d,g.getState(),g.getOriginalState()])}});s=()=>{h(),c()}})];i!=null&&o.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await MB(e,Promise.race(o));return Ho(e),u}finally{s()}};return(n,i)=>DB(t(n,i))},BB=r=>{let{type:e,actionCreator:t,matcher:n,predicate:i,effect:s}=r;if(e)i=xi(e).match;else if(t)e=t.type,i=t.match;else if(n)i=n;else if(!i)throw new Error(ei(21));return rA(s),{predicate:i,type:e,effect:s}},UB=ou(r=>{const{type:e,predicate:t,effect:n}=BB(r);return{id:Wq(),effect:n,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(ei(22))}}},{withTypes:()=>UB}),vC=(r,e)=>{const{type:t,effect:n,predicate:i}=BB(e);return Array.from(r.values()).find(s=>(typeof t=="string"?s.type===t:s.predicate===i)&&s.effect===n)},mE=r=>{r.pending.forEach(e=>{zo(e,gE)})},f9=(r,e)=>()=>{for(const t of e.keys())mE(t);r.clear()},bC=(r,e,t)=>{try{r(e,t)}catch(n){setTimeout(()=>{throw n},0)}},jB=ou(xi(`${em}/add`),{withTypes:()=>jB}),h9=xi(`${em}/removeAll`),FB=ou(xi(`${em}/remove`),{withTypes:()=>FB}),d9=(...r)=>{console.error(`${em}/error`,...r)},Pf=(r={})=>{const e=new Map,t=new Map,n=m=>{const y=t.get(m)??0;t.set(m,y+1)},i=m=>{const y=t.get(m)??1;y===1?t.delete(m):t.set(m,y-1)},{extra:s,onError:a=d9}=r;rA(a);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),y=>{m.unsubscribe(),y?.cancelActive&&mE(m)}),u=m=>{const y=vC(e,m)??UB(m);return o(y)};ou(u,{withTypes:()=>u});const c=m=>{const y=vC(e,m);return y&&(y.unsubscribe(),m.cancelActive&&mE(y)),!!y};ou(c,{withTypes:()=>c});const h=async(m,y,S,b)=>{const E=new AbortController,x=c9(u,E.signal),T=[];try{m.pending.add(E),n(m),await Promise.resolve(m.effect(y,ou({},S,{getOriginalState:b,condition:(w,_)=>x(w,_).then(Boolean),take:x,delay:NB(E.signal),pause:Hp(E.signal),extra:s,signal:E.signal,fork:u9(E.signal,T),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((w,_,R)=>{w!==E&&(zo(w,gE),R.delete(w))})},cancel:()=>{zo(E,gE),m.pending.delete(E)},throwIfCancelled:()=>{Ho(E.signal)}})))}catch(w){w instanceof Jg||bC(a,w,{raisedBy:"effect"})}finally{await Promise.all(T),zo(E,o9),i(m),m.pending.delete(E)}},d=f9(e,t);return{middleware:m=>y=>S=>{if(!gB(S))return y(S);if(jB.match(S))return u(S.payload);if(h9.match(S)){d();return}if(FB.match(S))return c(S.payload);let b=m.getState();const E=()=>{if(b===yC)throw new Error(ei(23));return b};let x;try{if(x=y(S),e.size>0){const T=m.getState(),w=Array.from(e.values());for(const _ of w){let R=!1;try{R=_.predicate(S,T,b)}catch(O){R=!1,bC(a,O,{raisedBy:"predicate"})}R&&h(_,S,m,E)}}}finally{b=yC}return x},startListening:u,stopListening:c,clearListeners:d}};function ei(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var p9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$B=Nn({name:"chartLayout",initialState:p9,reducers:{setLayout(r,e){r.layoutType=e.payload},setChartSize(r,e){r.width=e.payload.width,r.height=e.payload.height},setMargin(r,e){var t,n,i,s;r.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,r.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,r.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,r.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(r,e){r.scale=e.payload}}}),{setMargin:g9,setLayout:m9,setChartSize:y9,setScale:v9}=$B.actions,b9=$B.reducer;function GB(r,e,t){return Array.isArray(r)&&r&&e+t!==0?r.slice(e,t+1):r}function SC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(t),!0).forEach(function(n){S9(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):SC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function S9(r,e,t){return(e=x9(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function x9(r){var e=E9(r,"string");return typeof e=="symbol"?e:e+""}function E9(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function nn(r,e,t){return Nr(r)||Nr(e)?t:ss(e)?Kg(r,e,t):typeof e=="function"?e(r):t}var T9=(r,e,t)=>{if(e&&t){var{width:n,height:i}=t,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&at(r[s]))return nu(nu({},r),{},{[s]:r[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&at(r[a]))return nu(nu({},r),{},{[a]:r[a]+(i||0)})}return r},ao=(r,e)=>r==="horizontal"&&e==="xAxis"||r==="vertical"&&e==="yAxis"||r==="centric"&&e==="angleAxis"||r==="radial"&&e==="radiusAxis",zB=(r,e,t,n)=>{if(n)return r.map(o=>o.coordinate);var i,s,a=r.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(t),a},HB=(r,e,t)=>{if(!r)return null;var{duplicateDomain:n,type:i,range:s,scale:a,realScaleType:o,isCategorical:u,categoricalDomain:c,tickCount:h,ticks:d,niceTicks:g,axisType:m}=r;if(!a)return null;var y=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,S=i==="category"&&a.bandwidth?a.bandwidth()/y:0;if(S=m==="angleAxis"&&s&&s.length>=2?bi(s[0]-s[1])*2*S:S,d||g){var b=(d||g||[]).map((E,x)=>{var T=n?n.indexOf(E):E;return{coordinate:a(T)+S,value:E,offset:S,index:x}});return b.filter(E=>!is(E.coordinate))}return u&&c?c.map((E,x)=>({coordinate:a(E)+S,value:E,index:x,offset:S})):a.ticks&&h!=null?a.ticks(h).map((E,x)=>({coordinate:a(E)+S,value:E,offset:S,index:x})):a.domain().map((E,x)=>({coordinate:a(E)+S,value:n?n[E]:E,index:x,offset:S}))},xC=1e-4,A9=r=>{var e=r.domain();if(!(!e||e.length<=2)){var t=e.length,n=r.range(),i=Math.min(n[0],n[1])-xC,s=Math.max(n[0],n[1])+xC,a=r(e[0]),o=r(e[t-1]);(a<i||a>s||o<i||o>s)&&r.domain([e[0],e[t-1]])}},_9=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,s=0,a=0;a<e;++a){var o=is(r[a][t][1])?r[a][t][0]:r[a][t][1];o>=0?(r[a][t][0]=i,r[a][t][1]=i+o,i=r[a][t][1]):(r[a][t][0]=s,r[a][t][1]=s+o,s=r[a][t][1])}},w9=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,s=0;s<e;++s){var a=is(r[s][t][1])?r[s][t][0]:r[s][t][1];a>=0?(r[s][t][0]=i,r[s][t][1]=i+a,i=r[s][t][1]):(r[s][t][0]=0,r[s][t][1]=0)}},I9={sign:_9,expand:WH,none:du,silhouette:YH,wiggle:XH,positive:w9},O9=(r,e,t)=>{var n=I9[t],i=VH().keys(e).value((s,a)=>Number(nn(s,a,0))).order(sE).offset(n);return i(r)};function EC(r){var{axis:e,ticks:t,bandSize:n,entry:i,index:s,dataKey:a}=r;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Nr(i[e.dataKey])){var o=W2(t,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return t[s]?t[s].coordinate+n/2:null}var u=nn(i,Nr(a)?e.dataKey:a);return Nr(u)?null:e.scale(u)}var R9=r=>{var e=r.flat(2).filter(at);return[Math.min(...e),Math.max(...e)]},L9=r=>[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]],C9=(r,e,t)=>{if(r!=null)return L9(Object.keys(r).reduce((n,i)=>{var s=r[i],{stackedData:a}=s,o=a.reduce((u,c)=>{var h=GB(c,e,t),d=R9(h);return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},TC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kp=(r,e,t)=>{if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!t||n>0)return n}if(r&&e&&e.length>=2){for(var i=qg(e,h=>h.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var u=i[a],c=i[a-1];s=Math.min((u.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return t?void 0:0};function _C(r){var{tooltipEntrySettings:e,dataKey:t,payload:n,value:i,name:s}=r;return nu(nu({},e),{},{dataKey:t,payload:n,value:i,name:s})}function KB(r,e){if(r)return String(r);if(typeof e=="string")return e}var P9=(r,e)=>{if(e==="horizontal")return r.chartX;if(e==="vertical")return r.chartY},D9=(r,e)=>e==="centric"?r.angle:r.radius,la=r=>r.layout.width,ua=r=>r.layout.height,k9=r=>r.layout.scale,qB=r=>r.layout.margin,tm=ke(r=>r.cartesianAxis.xAxis,r=>Object.values(r)),rm=ke(r=>r.cartesianAxis.yAxis,r=>Object.values(r)),M9="data-recharts-item-index",N9="data-recharts-item-data-key",Df=60;function wC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function md(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wC(Object(t),!0).forEach(function(n){B9(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function B9(r,e,t){return(e=U9(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function U9(r){var e=j9(r,"string");return typeof e=="symbol"?e:e+""}function j9(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var F9=r=>r.brush.height;function $9(r){var e=rm(r);return e.reduce((t,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Df;return t+i}return t},0)}function G9(r){var e=rm(r);return e.reduce((t,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Df;return t+i}return t},0)}function z9(r){var e=tm(r);return e.reduce((t,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?t+n.height:t,0)}function H9(r){var e=tm(r);return e.reduce((t,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?t+n.height:t,0)}var Xr=ke([la,ua,qB,F9,$9,G9,z9,H9,fB,mq],(r,e,t,n,i,s,a,o,u,c)=>{var h={left:(t.left||0)+i,right:(t.right||0)+s},d={top:(t.top||0)+a,bottom:(t.bottom||0)+o},g=md(md({},d),h),m=g.bottom;g.bottom+=n,g=T9(g,u,c);var y=r-g.left-g.right,S=e-g.top-g.bottom;return md(md({brushBottom:m},g),{},{width:Math.max(y,0),height:Math.max(S,0)})}),K9=ke(Xr,r=>({x:r.left,y:r.top,width:r.width,height:r.height})),VB=ke(la,ua,(r,e)=>({x:0,y:0,width:r,height:e})),q9=P.createContext(null),Bn=()=>P.useContext(q9)!=null,nm=r=>r.brush,im=ke([nm,Xr,qB],(r,e,t)=>({height:r.height,x:at(r.x)?r.x:e.left,y:at(r.y)?r.y:e.top+e.height+e.brushBottom-(t?.bottom||0),width:at(r.width)?r.width:e.width})),Wv={},Yv={},Xv={},IC;function V9(){return IC||(IC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n,{signal:i,edges:s}={}){let a,o=null;const u=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),h=()=>{o!==null&&(t.apply(a,o),a=void 0,o=null)},d=()=>{c&&h(),S()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,d()},n)},y=()=>{g!==null&&(clearTimeout(g),g=null)},S=()=>{y(),a=void 0,o=null},b=()=>{h()},E=function(...x){if(i?.aborted)return;a=this,o=x;const T=g==null;m(),u&&T&&h()};return E.schedule=m,E.cancel=S,E.flush=b,i?.addEventListener("abort",S,{once:!0}),E}r.debounce=e})(Xv)),Xv}var OC;function W9(){return OC||(OC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=V9();function t(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:u}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let h,d=null;const g=e.debounce(function(...S){h=n.apply(this,S),d=null},i,{edges:c}),m=function(...S){return u!=null&&(d===null&&(d=Date.now()),Date.now()-d>=u)?(h=n.apply(this,S),d=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,S),h)},y=()=>(g.flush(),h);return m.cancel=g.cancel,m.flush=y,m}r.debounce=t})(Yv)),Yv}var RC;function Y9(){return RC||(RC=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=W9();function t(n,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(n,i,{leading:a,maxWait:i,trailing:o})}r.throttle=t})(Wv)),Wv}var Qv,LC;function X9(){return LC||(LC=1,Qv=Y9().throttle),Qv}var Q9=X9();const Z9=na(Q9);var qp=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(t.replace(/%s/g,()=>i[a++]))}},WB=(r,e,t)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:a}=t,o=Qs(n)?r:Number(n),u=Qs(i)?e:Number(i);return s&&s>0&&(o?u=o/s:u&&(o=u*s),a&&u!=null&&u>a&&(u=a)),{calculatedWidth:o,calculatedHeight:u}},J9={width:0,height:0,overflow:"visible"},eV={width:0,overflowX:"visible"},tV={height:0,overflowY:"visible"},rV={},nV=r=>{var{width:e,height:t}=r,n=Qs(e),i=Qs(t);return n&&i?J9:n?eV:i?tV:rV};function iV(r){var{width:e,height:t,aspect:n}=r,i=e,s=t;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Br(r){return Number.isFinite(r)}function as(r){return typeof r=="number"&&r>0&&Number.isFinite(r)}function yE(){return yE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yE.apply(null,arguments)}function CC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function PC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CC(Object(t),!0).forEach(function(n){sV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function sV(r,e,t){return(e=aV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function aV(r){var e=oV(r,"string");return typeof e=="symbol"?e:e+""}function oV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var YB=P.createContext({width:-1,height:-1});function lV(r){return as(r.width)&&as(r.height)}function XB(r){var{children:e,width:t,height:n}=r,i=P.useMemo(()=>({width:t,height:n}),[t,n]);return lV(i)?P.createElement(YB.Provider,{value:i},e):null}var nA=()=>P.useContext(YB),uV=P.forwardRef((r,e)=>{var{aspect:t,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:u,children:c,debounce:h=0,id:d,className:g,onResize:m,style:y={}}=r,S=P.useRef(null),b=P.useRef();b.current=m,P.useImperativeHandle(e,()=>S.current);var[E,x]=P.useState({containerWidth:n.width,containerHeight:n.height}),T=P.useCallback((C,B)=>{x(N=>{var U=Math.round(C),k=Math.round(B);return N.containerWidth===U&&N.containerHeight===k?N:{containerWidth:U,containerHeight:k}})},[]);P.useEffect(()=>{if(S.current==null||typeof ResizeObserver>"u")return Rf;var C=k=>{var W,{width:q,height:X}=k[0].contentRect;T(q,X),(W=b.current)===null||W===void 0||W.call(b,q,X)};h>0&&(C=Z9(C,h,{trailing:!0,leading:!1}));var B=new ResizeObserver(C),{width:N,height:U}=S.current.getBoundingClientRect();return T(N,U),B.observe(S.current),()=>{B.disconnect()}},[T,h]);var{containerWidth:w,containerHeight:_}=E;qp(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:R,calculatedHeight:O}=WB(w,_,{width:i,height:s,aspect:t,maxHeight:u});return qp(R!=null&&R>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,O,i,s,a,o,t),P.createElement("div",{id:d?"".concat(d):void 0,className:Bt("recharts-responsive-container",g),style:PC(PC({},y),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:u}),ref:S},P.createElement("div",{style:nV({width:i,height:s})},P.createElement(XB,{width:R,height:O},c)))}),cV=P.forwardRef((r,e)=>{var t=nA();if(as(t.width)&&as(t.height))return r.children;var{width:n,height:i}=iV({width:r.width,height:r.height,aspect:r.aspect}),{calculatedWidth:s,calculatedHeight:a}=WB(void 0,void 0,{width:n,height:i,aspect:r.aspect,maxHeight:r.maxHeight});return at(s)&&at(a)?P.createElement(XB,{width:s,height:a},r.children):P.createElement(uV,yE({},r,{width:n,height:i,ref:e}))});function QB(r){if(r)return{x:r.x,y:r.y,upperWidth:"upperWidth"in r?r.upperWidth:r.width,lowerWidth:"lowerWidth"in r?r.lowerWidth:r.width,width:r.width,height:r.height}}var sm=()=>{var r,e=Bn(),t=it(K9),n=it(im),i=(r=it(nm))===null||r===void 0?void 0:r.padding;return!e||!n||!i?t:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},fV={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ZB=()=>{var r;return(r=it(Xr))!==null&&r!==void 0?r:fV},iA=()=>it(la),sA=()=>it(ua),hV=()=>it(r=>r.layout.margin),Vt=r=>r.layout.layoutType,am=()=>it(Vt),dV=()=>{var r=am();return r!==void 0},om=r=>{var e=vr(),t=Bn(),{width:n,height:i}=r,s=nA(),a=n,o=i;return s&&(a=s.width>0?s.width:n,o=s.height>0?s.height:i),P.useEffect(()=>{!t&&as(a)&&as(o)&&e(y9({width:a,height:o}))},[e,t,a,o]),null},JB=Symbol.for("immer-nothing"),DC=Symbol.for("immer-draftable"),ri=Symbol.for("immer-state");function Pi(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var nf=Object.getPrototypeOf;function mu(r){return!!r&&!!r[ri]}function Wo(r){return r?eU(r)||Array.isArray(r)||!!r[DC]||!!r.constructor?.[DC]||kf(r)||um(r):!1}var pV=Object.prototype.constructor.toString(),kC=new WeakMap;function eU(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let n=kC.get(t);return n===void 0&&(n=Function.toString.call(t),kC.set(t,n)),n===pV}function Vp(r,e,t=!0){lm(r)===0?(t?Reflect.ownKeys(r):Object.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function lm(r){const e=r[ri];return e?e.type_:Array.isArray(r)?1:kf(r)?2:um(r)?3:0}function vE(r,e){return lm(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function tU(r,e,t){const n=lm(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function gV(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function kf(r){return r instanceof Map}function um(r){return r instanceof Set}function Po(r){return r.copy_||r.base_}function bE(r,e){if(kf(r))return new Map(r);if(um(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=eU(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[ri];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],o=n[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[a]})}return Object.create(nf(r),n)}else{const n=nf(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function aA(r,e=!1){return cm(r)||mu(r)||!Wo(r)||(lm(r)>1&&Object.defineProperties(r,{set:yd,add:yd,clear:yd,delete:yd}),Object.freeze(r),e&&Object.values(r).forEach(t=>aA(t,!0))),r}function mV(){Pi(2)}var yd={value:mV};function cm(r){return r===null||typeof r!="object"?!0:Object.isFrozen(r)}var yV={};function Yo(r){const e=yV[r];return e||Pi(0,r),e}var sf;function rU(){return sf}function vV(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MC(r,e){e&&(Yo("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function SE(r){xE(r),r.drafts_.forEach(bV),r.drafts_=null}function xE(r){r===sf&&(sf=r.parent_)}function NC(r){return sf=vV(sf,r)}function bV(r){const e=r[ri];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function BC(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[ri].modified_&&(SE(e),Pi(4)),Wo(r)&&(r=Wp(e,r),e.parent_||Yp(e,r)),e.patches_&&Yo("Patches").generateReplacementPatches_(t[ri].base_,r,e.patches_,e.inversePatches_)):r=Wp(e,t,[]),SE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==JB?r:void 0}function Wp(r,e,t){if(cm(e))return e;const n=r.immer_.shouldUseStrictIteration(),i=e[ri];if(!i)return Vp(e,(s,a)=>UC(r,i,e,s,a,t),n),e;if(i.scope_!==r)return e;if(!i.modified_)return Yp(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),Vp(a,(u,c)=>UC(r,i,s,u,c,t,o),n),Yp(r,s,!1),t&&r.patches_&&Yo("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function UC(r,e,t,n,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=cm(i);if(!(o&&!a)){if(mu(i)){const u=s&&e&&e.type_!==3&&!vE(e.assigned_,n)?s.concat(n):void 0,c=Wp(r,i,u);if(tU(t,n,c),mu(c))r.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Wo(i)&&!o){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;Wp(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(kf(t)?t.has(n):Object.prototype.propertyIsEnumerable.call(t,n))&&Yp(r,i)}}}function Yp(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&aA(e,t)}function SV(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:rU(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=oA;t&&(i=[n],s=af);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,o}var oA={get(r,e){if(e===ri)return r;const t=Po(r);if(!vE(t,e))return xV(r,t,e);const n=t[e];return r.finalized_||!Wo(n)?n:n===Zv(r.base_,e)?(Jv(r),r.copy_[e]=TE(n,r)):n},has(r,e){return e in Po(r)},ownKeys(r){return Reflect.ownKeys(Po(r))},set(r,e,t){const n=nU(Po(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Zv(Po(r),e),s=i?.[ri];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(gV(t,i)&&(t!==void 0||vE(r.base_,e)))return!0;Jv(r),EE(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Zv(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Jv(r),EE(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Po(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Pi(11)},getPrototypeOf(r){return nf(r.base_)},setPrototypeOf(){Pi(12)}},af={};Vp(oA,(r,e)=>{af[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});af.deleteProperty=function(r,e){return af.set.call(this,r,e,void 0)};af.set=function(r,e,t){return oA.set.call(this,r[0],e,t,r[0])};function Zv(r,e){const t=r[ri];return(t?Po(t):r)[e]}function xV(r,e,t){const n=nU(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function nU(r,e){if(!(e in r))return;let t=nf(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=nf(t)}}function EE(r){r.modified_||(r.modified_=!0,r.parent_&&EE(r.parent_))}function Jv(r){r.copy_||(r.copy_=bE(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var EV=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(u=s,...c){return a.produce(u,h=>t.call(this,h,...c))}}typeof t!="function"&&Pi(6),n!==void 0&&typeof n!="function"&&Pi(7);let i;if(Wo(e)){const s=NC(this),a=TE(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?SE(s):xE(s)}return MC(s,n),BC(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===JB&&(i=void 0),this.autoFreeze_&&aA(i,!0),n){const s=[],a=[];Yo("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else Pi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,u=>e(u,...o));let n,i;return[this.produce(e,t,(a,o)=>{n=a,i=o}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),typeof r?.useStrictIteration=="boolean"&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Wo(r)||Pi(8),mu(r)&&(r=TV(r));const e=NC(this),t=TE(r,void 0);return t[ri].isManual_=!0,xE(e),t}finishDraft(r,e){const t=r&&r[ri];(!t||!t.isManual_)&&Pi(9);const{scope_:n}=t;return MC(n,e),BC(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=Yo("Patches").applyPatches_;return mu(r)?n(r,e):this.produce(r,i=>n(i,e))}};function TE(r,e){const t=kf(r)?Yo("MapSet").proxyMap_(r,e):um(r)?Yo("MapSet").proxySet_(r,e):SV(r,e);return(e?e.scope_:rU()).drafts_.push(t),t}function TV(r){return mu(r)||Pi(10,r),iU(r)}function iU(r){if(!Wo(r)||cm(r))return r;const e=r[ri];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=bE(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=bE(r,!0);return Vp(t,(i,s)=>{tU(t,i,iU(s))},n),e&&(e.finalized_=!1),t}var AV=new EV;AV.produce;var _V={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},sU=Nn({name:"legend",initialState:_V,reducers:{setLegendSize(r,e){r.size.width=e.payload.width,r.size.height=e.payload.height},setLegendSettings(r,e){r.settings.align=e.payload.align,r.settings.layout=e.payload.layout,r.settings.verticalAlign=e.payload.verticalAlign,r.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(r,e){r.payload.push(e.payload)},prepare:Xt()},replaceLegendPayload:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).payload.indexOf(t);i>-1&&(r.payload[i]=n)},prepare:Xt()},removeLegendPayload:{reducer(r,e){var t=ki(r).payload.indexOf(e.payload);t>-1&&r.payload.splice(t,1)},prepare:Xt()}}}),{setLegendSize:jC,setLegendSettings:wV,addLegendPayload:IV,replaceLegendPayload:OV,removeLegendPayload:RV}=sU.actions,LV=sU.reducer,CV=["contextPayload"];function AE(){return AE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},AE.apply(null,arguments)}function FC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FC(Object(t),!0).forEach(function(n){PV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):FC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function PV(r,e,t){return(e=DV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function DV(r){var e=kV(r,"string");return typeof e=="symbol"?e:e+""}function kV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function MV(r,e){if(r==null)return{};var t,n,i=NV(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function NV(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function BV(r){return r.value}function UV(r){var{contextPayload:e}=r,t=MV(r,CV),n=oB(e,r.payloadUniqBy,BV),i=yu(yu({},t),{},{payload:n});return P.isValidElement(r.content)?P.cloneElement(r.content,i):typeof r.content=="function"?P.createElement(r.content,i):P.createElement(_K,i)}function jV(r,e,t,n,i,s){var{layout:a,align:o,verticalAlign:u}=e,c,h;return(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))&&(o==="center"&&a==="vertical"?c={left:((n||0)-s.width)/2}:c=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))&&(u==="middle"?h={top:((i||0)-s.height)/2}:h=u==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),yu(yu({},c),h)}function FV(r){var e=vr();return P.useEffect(()=>{e(wV(r))},[e,r]),null}function $V(r){var e=vr();return P.useEffect(()=>(e(jC(r)),()=>{e(jC({width:0,height:0}))}),[e,r]),null}function GV(r,e,t,n){return r==="vertical"&&at(e)?{height:e}:r==="horizontal"?{width:t||n}:null}var zV={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function aU(r){var e=sn(r,zV),t=bq(),n=yH(),i=hV(),{width:s,height:a,wrapperStyle:o,portal:u}=e,[c,h]=hB([t]),d=iA(),g=sA();if(d==null||g==null)return null;var m=d-(i?.left||0)-(i?.right||0),y=GV(e.layout,a,s,m),S=u?o:yu(yu({position:"absolute",width:y?.width||s||"auto",height:y?.height||a||"auto"},jV(o,e,i,d,g,c)),o),b=u??n;if(b==null||t==null)return null;var E=P.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:h},P.createElement(FV,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&P.createElement($V,{width:c.width,height:c.height}),P.createElement(UV,AE({},e,y,{margin:i,chartWidth:d,chartHeight:g,contextPayload:t})));return ET.createPortal(E,b)}aU.displayName="Legend";function _E(){return _E=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_E.apply(null,arguments)}function $C(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$C(Object(t),!0).forEach(function(n){HV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$C(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function HV(r,e,t){return(e=KV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KV(r){var e=qV(r,"string");return typeof e=="symbol"?e:e+""}function qV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function VV(r){return Array.isArray(r)&&ss(r[0])&&ss(r[1])?r.join(" ~ "):r}var WV=r=>{var{separator:e=" : ",contentStyle:t={},itemStyle:n={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:u,labelClassName:c,label:h,labelFormatter:d,accessibilityLayer:g=!1}=r,m=()=>{if(s&&s.length){var _={padding:0,margin:0},R=(o?qg(s,o):s).map((O,C)=>{if(O.type==="none")return null;var B=O.formatter||a||VV,{value:N,name:U}=O,k=N,W=U;if(B){var q=B(N,U,O,C,s);if(Array.isArray(q))[k,W]=q;else if(q!=null)k=q;else return null}var X=eb({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:X},ss(W)?P.createElement("span",{className:"recharts-tooltip-item-name"},W):null,ss(W)?P.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,P.createElement("span",{className:"recharts-tooltip-item-value"},k),P.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:_},R)}return null},y=eb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),S=eb({margin:0},i),b=!Nr(h),E=b?h:"",x=Bt("recharts-default-tooltip",u),T=Bt("recharts-tooltip-label",c);b&&d&&s!==void 0&&s!==null&&(E=d(h,s));var w=g?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",_E({className:x,style:y},w),P.createElement("p",{className:T,style:S},P.isValidElement(E)?E:"".concat(E)),m())},Rc="recharts-tooltip-wrapper",YV={visibility:"hidden"};function XV(r){var{coordinate:e,translateX:t,translateY:n}=r;return Bt(Rc,{["".concat(Rc,"-right")]:at(t)&&e&&at(e.x)&&t>=e.x,["".concat(Rc,"-left")]:at(t)&&e&&at(e.x)&&t<e.x,["".concat(Rc,"-bottom")]:at(n)&&e&&at(e.y)&&n>=e.y,["".concat(Rc,"-top")]:at(n)&&e&&at(e.y)&&n<e.y})}function GC(r){var{allowEscapeViewBox:e,coordinate:t,key:n,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:u,viewBoxDimension:c}=r;if(s&&at(s[n]))return s[n];var h=t[n]-o-(i>0?i:0),d=t[n]+i;if(e[n])return a[n]?h:d;var g=u[n];if(g==null)return 0;if(a[n]){var m=h,y=g;return m<y?Math.max(d,g):Math.max(h,g)}if(c==null)return 0;var S=d+o,b=g+c;return S>b?Math.max(h,g):Math.max(d,g)}function QV(r){var{translateX:e,translateY:t,useTranslate3d:n}=r;return{transform:n?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function ZV(r){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:u}=r,c,h,d;return a.height>0&&a.width>0&&t?(h=GC({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),d=GC({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),c=QV({translateX:h,translateY:d,useTranslate3d:o})):c=YV,{cssProperties:c,cssClasses:XV({translateX:h,translateY:d,coordinate:t})}}function zC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vd(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zC(Object(t),!0).forEach(function(n){wE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wE(r,e,t){return(e=JV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function JV(r){var e=eW(r,"string");return typeof e=="symbol"?e:e+""}function eW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class tW extends P.PureComponent{constructor(){super(...arguments),wE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),wE(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&t!==void 0?t:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:u,offset:c,position:h,reverseDirection:d,useTranslate3d:g,viewBox:m,wrapperStyle:y,lastBoundingBox:S,innerRef:b,hasPortalFromProps:E}=this.props,{cssClasses:x,cssProperties:T}=ZV({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:h,reverseDirection:d,tooltipBox:{height:S.height,width:S.width},useTranslate3d:g,viewBox:m}),w=E?{}:vd(vd({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),_=vd(vd({},w),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:_,ref:b},s)}}var oU=()=>{var r;return(r=it(e=>e.rootProps.accessibilityLayer))!==null&&r!==void 0?r:!0};function IE(){return IE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},IE.apply(null,arguments)}function HC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function KC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HC(Object(t),!0).forEach(function(n){rW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):HC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function rW(r,e,t){return(e=nW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nW(r){var e=iW(r,"string");return typeof e=="symbol"?e:e+""}function iW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var qC={curveBasisClosed:NH,curveBasisOpen:BH,curveBasis:MH,curveBumpX:xH,curveBumpY:EH,curveLinearClosed:UH,curveLinear:zg,curveMonotoneX:jH,curveMonotoneY:FH,curveNatural:$H,curveStep:GH,curveStepAfter:HH,curveStepBefore:zH},Xp=r=>Br(r.x)&&Br(r.y),VC=r=>r.base!=null&&Xp(r.base)&&Xp(r),Lc=r=>r.x,Cc=r=>r.y,sW=(r,e)=>{if(typeof r=="function")return r;var t="curve".concat(Of(r));return(t==="curveMonotone"||t==="curveBump")&&e?qC["".concat(t).concat(e==="vertical"?"Y":"X")]:qC[t]||zg},aW=r=>{var{type:e="linear",points:t=[],baseLine:n,layout:i,connectNulls:s=!1}=r,a=sW(e,i),o=s?t.filter(Xp):t,u;if(Array.isArray(n)){var c=t.map((m,y)=>KC(KC({},m),{},{base:n[y]}));i==="vertical"?u=cd().y(Cc).x1(Lc).x0(m=>m.base.x):u=cd().x(Lc).y1(Cc).y0(m=>m.base.y);var h=u.defined(VC).curve(a),d=s?c.filter(VC):c;return h(d)}i==="vertical"&&at(n)?u=cd().y(Cc).x1(Lc).x0(n):at(n)?u=cd().x(Lc).y1(Cc).y0(n):u=M2().x(Lc).y(Cc);var g=u.defined(Xp).curve(a);return g(o)},lU=r=>{var{className:e,points:t,path:n,pathRef:i}=r;if((!t||!t.length)&&!n)return null;var s=t&&t.length?aW(r):n;return P.createElement("path",IE({},ns(r),qT(r),{className:Bt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},oW=["x","y","top","left","width","height","className"];function OE(){return OE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},OE.apply(null,arguments)}function WC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function lW(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WC(Object(t),!0).forEach(function(n){uW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function uW(r,e,t){return(e=cW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cW(r){var e=fW(r,"string");return typeof e=="symbol"?e:e+""}function fW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function hW(r,e){if(r==null)return{};var t,n,i=dW(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function dW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var pW=(r,e,t,n,i,s)=>"M".concat(r,",").concat(i,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(t),gW=r=>{var{x:e=0,y:t=0,top:n=0,left:i=0,width:s=0,height:a=0,className:o}=r,u=hW(r,oW),c=lW({x:e,y:t,top:n,left:i,width:s,height:a},u);return!at(e)||!at(t)||!at(s)||!at(a)||!at(n)||!at(i)?null:P.createElement("path",OE({},pn(c),{className:Bt("recharts-cross",o),d:pW(e,t,s,a,n,i)}))};function mW(r,e,t,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-i:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-i,width:r==="horizontal"?n:t.width-1,height:r==="horizontal"?t.height-1:n}}function YC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function XC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YC(Object(t),!0).forEach(function(n){yW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yW(r,e,t){return(e=vW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vW(r){var e=bW(r,"string");return typeof e=="symbol"?e:e+""}function bW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var SW=r=>r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),uU=(r,e,t)=>r.map(n=>"".concat(SW(n)," ").concat(e,"ms ").concat(t)).join(","),xW=(r,e)=>[Object.keys(r),Object.keys(e)].reduce((t,n)=>t.filter(i=>n.includes(i))),of=(r,e)=>Object.keys(e).reduce((t,n)=>XC(XC({},t),{},{[n]:r(n,e[n])}),{});function QC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ar(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QC(Object(t),!0).forEach(function(n){EW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EW(r,e,t){return(e=TW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TW(r){var e=AW(r,"string");return typeof e=="symbol"?e:e+""}function AW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Qp=(r,e,t)=>r+(e-r)*t,RE=r=>{var{from:e,to:t}=r;return e!==t},cU=(r,e,t)=>{var n=of((i,s)=>{if(RE(s)){var[a,o]=r(s.from,s.to,s.velocity);return Ar(Ar({},s),{},{from:a,velocity:o})}return s},e);return t<1?of((i,s)=>RE(s)?Ar(Ar({},s),{},{velocity:Qp(s.velocity,n[i].velocity,t),from:Qp(s.from,n[i].from,t)}):s,e):cU(r,n,t-1)};function _W(r,e,t,n,i,s){var a,o=n.reduce((g,m)=>Ar(Ar({},g),{},{[m]:{from:r[m],velocity:0,to:e[m]}}),{}),u=()=>of((g,m)=>m.from,o),c=()=>!Object.values(o).filter(RE).length,h=null,d=g=>{a||(a=g);var m=g-a,y=m/t.dt;o=cU(t,o,y),i(Ar(Ar(Ar({},r),e),u())),a=g,c()||(h=s.setTimeout(d))};return()=>(h=s.setTimeout(d),()=>{var g;(g=h)===null||g===void 0||g()})}function wW(r,e,t,n,i,s,a){var o=null,u=i.reduce((d,g)=>Ar(Ar({},d),{},{[g]:[r[g],e[g]]}),{}),c,h=d=>{c||(c=d);var g=(d-c)/n,m=of((S,b)=>Qp(...b,t(g)),u);if(s(Ar(Ar(Ar({},r),e),m)),g<1)o=a.setTimeout(h);else{var y=of((S,b)=>Qp(...b,t(1)),u);s(Ar(Ar(Ar({},r),e),y))}};return()=>(o=a.setTimeout(h),()=>{var d;(d=o)===null||d===void 0||d()})}const IW=(r,e,t,n,i,s)=>{var a=xW(r,e);return t==null?()=>(i(Ar(Ar({},r),e)),()=>{}):t.isStepper===!0?_W(r,e,t,a,i,s):wW(r,e,t,n,a,i,s)};var Zp=1e-4,fU=(r,e)=>[0,3*r,3*e-6*r,3*r-3*e+1],hU=(r,e)=>r.map((t,n)=>t*e**n).reduce((t,n)=>t+n),ZC=(r,e)=>t=>{var n=fU(r,e);return hU(n,t)},OW=(r,e)=>t=>{var n=fU(r,e),i=[...n.map((s,a)=>s*a).slice(1),0];return hU(i,t)},RW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=t[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(o=>parseFloat(o));return[a[0],a[1],a[2],a[3]]}}}return t.length===4?t:[0,0,1,1]},LW=(r,e,t,n)=>{var i=ZC(r,t),s=ZC(e,n),a=OW(r,t),o=c=>c>1?1:c<0?0:c,u=c=>{for(var h=c>1?1:c,d=h,g=0;g<8;++g){var m=i(d)-h,y=a(d);if(Math.abs(m-h)<Zp||y<Zp)return s(d);d=o(d-m/y)}return s(d)};return u.isStepper=!1,u},JC=function(){return LW(...RW(...arguments))},CW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,s=(a,o,u)=>{var c=-(a-o)*t,h=u*n,d=u+(c-h)*i/1e3,g=u*i/1e3+a;return Math.abs(g-o)<Zp&&Math.abs(d)<Zp?[o,0]:[g,d]};return s.isStepper=!0,s.dt=i,s},PW=r=>{if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JC(r);case"spring":return CW();default:if(r.split("(")[0]==="cubic-bezier")return JC(r)}return typeof r=="function"?r:null};function DW(r){var e,t=()=>null,n=!1,i=null,s=a=>{if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,[u,...c]=o;if(typeof u=="number"){i=r.setTimeout(s.bind(null,c),u);return}s(u),i=r.setTimeout(s.bind(null,c));return}typeof a=="string"&&(e=a,t(e)),typeof a=="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:()=>{n=!0},start:a=>{n=!1,i&&(i(),i=null),s(a)},subscribe:a=>(t=a,()=>{t=()=>null}),getTimeoutController:()=>r}}class kW{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=a=>{a-n>=t?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function MW(){return DW(new kW)}var NW=P.createContext(MW);function BW(r,e){var t=P.useContext(NW);return P.useMemo(()=>e??t(r),[r,e,t])}var UW=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Mf={devToolsEnabled:!1,isSsr:UW()},jW={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eP={t:0},tb={t:1};function lA(r){var e=sn(r,jW),{isActive:t,canBegin:n,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:u,children:c}=e,h=t==="auto"?!Mf.isSsr:t,d=BW(e.animationId,e.animationManager),[g,m]=P.useState(h?eP:tb),y=P.useRef(null);return P.useEffect(()=>{h||m(tb)},[h]),P.useEffect(()=>{if(!h||!n)return Rf;var S=IW(eP,tb,PW(s),i,m,d.getTimeoutController()),b=()=>{y.current=S()};return d.start([u,a,b,i,o]),()=>{d.stop(),y.current&&y.current(),o()}},[h,n,i,s,a,u,o,d]),c(g.t)}function uA(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=P.useRef(Jc(e)),n=P.useRef(r);return n.current!==r&&(t.current=Jc(e),n.current=r),t.current}var FW=["radius"],$W=["radius"];function tP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tP(Object(t),!0).forEach(function(n){GW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function GW(r,e,t){return(e=zW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zW(r){var e=HW(r,"string");return typeof e=="symbol"?e:e+""}function HW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jp.apply(null,arguments)}function nP(r,e){if(r==null)return{};var t,n,i=KW(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function KW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var iP=(r,e,t,n,i)=>{var s=Math.min(Math.abs(t)/2,Math.abs(n)/2),a=n>=0?1:-1,o=t>=0?1:-1,u=n>=0&&t>=0||n<0&&t<0?1:0,c;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],d=0,g=4;d<g;d++)h[d]=i[d]>s?s:i[d];c="M".concat(r,",").concat(e+a*h[0]),h[0]>0&&(c+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(r+o*h[0],",").concat(e)),c+="L ".concat(r+t-o*h[1],",").concat(e),h[1]>0&&(c+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(r+t,",").concat(e+a*h[1])),c+="L ".concat(r+t,",").concat(e+n-a*h[2]),h[2]>0&&(c+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(r+t-o*h[2],",").concat(e+n)),c+="L ".concat(r+o*h[3],",").concat(e+n),h[3]>0&&(c+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(r,",").concat(e+n-a*h[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var m=Math.min(s,i);c="M ".concat(r,",").concat(e+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+o*m,",").concat(e,`
            L `).concat(r+t-o*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+t,",").concat(e+a*m,`
            L `).concat(r+t,",").concat(e+n-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r+t-o*m,",").concat(e+n,`
            L `).concat(r+o*m,",").concat(e+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(r,",").concat(e+n-a*m," Z")}else c="M ".concat(r,",").concat(e," h ").concat(t," v ").concat(n," h ").concat(-t," Z");return c},sP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dU=r=>{var e=sn(r,sP),t=P.useRef(null),[n,i]=P.useState(-1);P.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var K=t.current.getTotalLength();K&&i(K)}catch{}},[]);var{x:s,y:a,width:o,height:u,radius:c,className:h}=e,{animationEasing:d,animationDuration:g,animationBegin:m,isAnimationActive:y,isUpdateAnimationActive:S}=e,b=P.useRef(o),E=P.useRef(u),x=P.useRef(s),T=P.useRef(a),w=P.useMemo(()=>({x:s,y:a,width:o,height:u,radius:c}),[s,a,o,u,c]),_=uA(w,"rectangle-");if(s!==+s||a!==+a||o!==+o||u!==+u||o===0||u===0)return null;var R=Bt("recharts-rectangle",h);if(!S){var O=pn(e),{radius:C}=O,B=nP(O,FW);return P.createElement("path",Jp({},B,{radius:typeof c=="number"?c:void 0,className:R,d:iP(s,a,o,u,c)}))}var N=b.current,U=E.current,k=x.current,W=T.current,q="0px ".concat(n===-1?1:n,"px"),X="".concat(n,"px 0px"),H=uU(["strokeDasharray"],g,typeof d=="string"?d:sP.animationEasing);return P.createElement(lA,{animationId:_,key:_,canBegin:n>0,duration:g,easing:d,isActive:S,begin:m},K=>{var V=Cn(N,o,K),J=Cn(U,u,K),Q=Cn(k,s,K),$=Cn(W,a,K);t.current&&(b.current=V,E.current=J,x.current=Q,T.current=$);var F;y?K>0?F={transition:H,strokeDasharray:X}:F={strokeDasharray:q}:F={strokeDasharray:X};var Z=pn(e),{radius:de}=Z,oe=nP(Z,$W);return P.createElement("path",Jp({},oe,{radius:typeof c=="number"?c:void 0,className:R,d:iP(Q,$,V,J,c),ref:t,style:rP(rP({},F),e.style)}))})};function aP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function oP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(t),!0).forEach(function(n){qW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qW(r,e,t){return(e=VW(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VW(r){var e=WW(r,"string");return typeof e=="symbol"?e:e+""}function WW(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var eg=Math.PI/180,YW=r=>r*180/Math.PI,Yr=(r,e,t,n)=>({x:r+Math.cos(-eg*n)*t,y:e+Math.sin(-eg*n)*t}),XW=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},QW=(r,e)=>{var{x:t,y:n}=r,{x:i,y:s}=e;return Math.sqrt((t-i)**2+(n-s)**2)},ZW=(r,e)=>{var{x:t,y:n}=r,{cx:i,cy:s}=e,a=QW({x:t,y:n},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(t-i)/a,u=Math.acos(o);return n>s&&(u=2*Math.PI-u),{radius:a,angle:YW(u),angleInRadian:u}},JW=r=>{var{startAngle:e,endAngle:t}=r,n=Math.floor(e/360),i=Math.floor(t/360),s=Math.min(n,i);return{startAngle:e-s*360,endAngle:t-s*360}},e7=(r,e)=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),s=Math.floor(n/360),a=Math.min(i,s);return r+a*360},t7=(r,e)=>{var{chartX:t,chartY:n}=r,{radius:i,angle:s}=ZW({x:t,y:n},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:u,endAngle:c}=JW(e),h=s,d;if(u<=c){for(;h>c;)h-=360;for(;h<u;)h+=360;d=h>=u&&h<=c}else{for(;h>u;)h-=360;for(;h<c;)h+=360;d=h>=c&&h<=u}return d?oP(oP({},e),{},{radius:i,angle:e7(h,e)}):null};function pU(r){var{cx:e,cy:t,radius:n,startAngle:i,endAngle:s}=r,a=Yr(e,t,n,i),o=Yr(e,t,n,s);return{points:[a,o],cx:e,cy:t,radius:n,startAngle:i,endAngle:s}}function LE(){return LE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},LE.apply(null,arguments)}var r7=(r,e)=>{var t=bi(e-r),n=Math.min(Math.abs(e-r),359.999);return t*n},bd=r=>{var{cx:e,cy:t,radius:n,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:u}=r,c=o*(a?1:-1)+n,h=Math.asin(o/c)/eg,d=u?i:i+s*h,g=Yr(e,t,c,d),m=Yr(e,t,n,d),y=u?i-s*h:i,S=Yr(e,t,c*Math.cos(h*eg),y);return{center:g,circleTangency:m,lineTangency:S,theta:h}},gU=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:s,endAngle:a}=r,o=r7(s,a),u=s+o,c=Yr(e,t,i,s),h=Yr(e,t,i,u),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(n>0){var g=Yr(e,t,n,s),m=Yr(e,t,n,u);d+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else d+="L ".concat(e,",").concat(t," Z");return d},n7=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:u,endAngle:c}=r,h=bi(c-u),{circleTangency:d,lineTangency:g,theta:m}=bd({cx:e,cy:t,radius:i,angle:u,sign:h,cornerRadius:s,cornerIsExternal:o}),{circleTangency:y,lineTangency:S,theta:b}=bd({cx:e,cy:t,radius:i,angle:c,sign:-h,cornerRadius:s,cornerIsExternal:o}),E=o?Math.abs(u-c):Math.abs(u-c)-m-b;if(E<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):gU({cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:u,endAngle:c});var x="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(n>0){var{circleTangency:T,lineTangency:w,theta:_}=bd({cx:e,cy:t,radius:n,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:R,lineTangency:O,theta:C}=bd({cx:e,cy:t,radius:n,angle:c,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),B=o?Math.abs(u-c):Math.abs(u-c)-_-C;if(B<0&&s===0)return"".concat(x,"L").concat(e,",").concat(t,"Z");x+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,"Z")}else x+="L".concat(e,",").concat(t,"Z");return x},i7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mU=r=>{var e=sn(r,i7),{cx:t,cy:n,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:u,startAngle:c,endAngle:h,className:d}=e;if(s<i||c===h)return null;var g=Bt("recharts-sector",d),m=s-i,y=eo(a,m,0,!0),S;return y>0&&Math.abs(c-h)<360?S=n7({cx:t,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:o,cornerIsExternal:u,startAngle:c,endAngle:h}):S=gU({cx:t,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:h}),P.createElement("path",LE({},pn(e),{className:g,d:S}))};function s7(r,e,t){if(r==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(r==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(X2(e)){if(r==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:a,angle:o}=e,u=Yr(n,i,s,o),c=Yr(n,i,a,o);return[{x:u.x,y:u.y},{x:c.x,y:c.y}]}return pU(e)}}var rb={},nb={},ib={},lP;function a7(){return lP||(lP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=uB();function t(n){return e.isSymbol(n)?NaN:Number(n)}r.toNumber=t})(ib)),ib}var uP;function o7(){return uP||(uP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=a7();function t(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}r.toFinite=t})(nb)),nb}var cP;function l7(){return cP||(cP=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=cB(),t=o7();function n(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=t.toFinite(i),s===void 0?(s=i,i=0):s=t.toFinite(s),a=a===void 0?i<s?1:-1:t.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),u=new Array(o);for(let c=0;c<o;c++)u[c]=i,i+=a;return u}r.range=n})(rb)),rb}var sb,fP;function u7(){return fP||(fP=1,sb=l7().range),sb}var c7=u7();const yU=na(c7);function Qa(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function f7(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function cA(r){let e,t,n;r.length!==2?(e=Qa,t=(o,u)=>Qa(r(o),u),n=(o,u)=>r(o)-u):(e=r===Qa||r===f7?r:h7,t=r,n=r);function i(o,u,c=0,h=o.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;t(o[d],u)<0?c=d+1:h=d}while(c<h)}return c}function s(o,u,c=0,h=o.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;t(o[d],u)<=0?c=d+1:h=d}while(c<h)}return c}function a(o,u,c=0,h=o.length){const d=i(o,u,c,h-1);return d>c&&n(o[d-1],u)>-n(o[d],u)?d-1:d}return{left:i,center:a,right:s}}function h7(){return 0}function vU(r){return r===null?NaN:+r}function*d7(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const p7=cA(Qa),Nf=p7.right;cA(vU).center;class hP extends Map{constructor(e,t=y7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(dP(this,e))}has(e){return super.has(dP(this,e))}set(e,t){return super.set(g7(this,e),t)}delete(e){return super.delete(m7(this,e))}}function dP({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):t}function g7({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function m7({_intern:r,_key:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function y7(r){return r!==null&&typeof r=="object"?r.valueOf():r}function v7(r=Qa){if(r===Qa)return bU;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const n=r(e,t);return n||n===0?n:(r(t,t)===0)-(r(e,e)===0)}}function bU(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const b7=Math.sqrt(50),S7=Math.sqrt(10),x7=Math.sqrt(2);function tg(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=b7?10:s>=S7?5:s>=x7?2:1;let o,u,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(r*c),u=Math.round(e*c),o/c<r&&++o,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,o=Math.round(r/c),u=Math.round(e/c),o*c<r&&++o,u*c>e&&--u),u<o&&.5<=t&&t<2?tg(r,e,t*2):[o,u,c]}function CE(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,s,a]=n?tg(e,r,t):tg(r,e,t);if(!(s>=i))return[];const o=s-i+1,u=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)u[c]=(s-c)/-a;else for(let c=0;c<o;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)u[c]=(i+c)/-a;else for(let c=0;c<o;++c)u[c]=(i+c)*a;return u}function PE(r,e,t){return e=+e,r=+r,t=+t,tg(r,e,t)[2]}function DE(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?PE(e,r,t):PE(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function pP(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function gP(r,e){let t;for(const n of r)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);return t}function SU(r,e,t=0,n=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),n=Math.floor(Math.min(r.length-1,n)),!(t<=e&&e<=n))return r;for(i=i===void 0?bU:v7(i);n>t;){if(n-t>600){const u=n-t+1,c=e-t+1,h=Math.log(u),d=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*d*(u-d)/u)*(c-u/2<0?-1:1),m=Math.max(t,Math.floor(e-c*d/u+g)),y=Math.min(n,Math.floor(e+(u-c)*d/u+g));SU(r,e,m,y,i)}const s=r[e];let a=t,o=n;for(Pc(r,t,e),i(r[n],s)>0&&Pc(r,t,n);a<o;){for(Pc(r,a,o),++a,--o;i(r[a],s)<0;)++a;for(;i(r[o],s)>0;)--o}i(r[t],s)===0?Pc(r,t,o):(++o,Pc(r,o,n)),o<=e&&(t=o+1),e<=o&&(n=o-1)}return r}function Pc(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function E7(r,e,t){if(r=Float64Array.from(d7(r)),!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return gP(r);if(e>=1)return pP(r);var n,i=(n-1)*e,s=Math.floor(i),a=pP(SU(r,s).subarray(0,s+1)),o=gP(r.subarray(s+1));return a+(o-a)*(i-s)}}function T7(r,e,t=vU){if(!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(r[0],0,r);if(e>=1)return+t(r[n-1],n-1,r);var n,i=(n-1)*e,s=Math.floor(i),a=+t(r[s],s,r),o=+t(r[s+1],s+1,r);return a+(o-a)*(i-s)}}function A7(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,s=new Array(i);++n<i;)s[n]=r+n*t;return s}function Ai(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function ca(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kE=Symbol("implicit");function fA(){var r=new hP,e=[],t=[],n=kE;function i(s){let a=r.get(s);if(a===void 0){if(n!==kE)return n;r.set(s,a=e.push(s)-1)}return t[a%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],r=new hP;for(const a of s)r.has(a)||r.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return fA(e,t).unknown(n)},Ai.apply(i,arguments),i}function hA(){var r=fA().unknown(void 0),e=r.domain,t=r.range,n=0,i=1,s,a,o=!1,u=0,c=0,h=.5;delete r.unknown;function d(){var g=e().length,m=i<n,y=m?i:n,S=m?n:i;s=(S-y)/Math.max(1,g-u+c*2),o&&(s=Math.floor(s)),y+=(S-y-s*(g-u))*h,a=s*(1-u),o&&(y=Math.round(y),a=Math.round(a));var b=A7(g).map(function(E){return y+s*E});return t(m?b.reverse():b)}return r.domain=function(g){return arguments.length?(e(g),d()):e()},r.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,d()):[n,i]},r.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,o=!0,d()},r.bandwidth=function(){return a},r.step=function(){return s},r.round=function(g){return arguments.length?(o=!!g,d()):o},r.padding=function(g){return arguments.length?(u=Math.min(1,c=+g),d()):u},r.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),d()):u},r.paddingOuter=function(g){return arguments.length?(c=+g,d()):c},r.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),d()):h},r.copy=function(){return hA(e(),[n,i]).round(o).paddingInner(u).paddingOuter(c).align(h)},Ai.apply(d(),arguments)}function xU(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return xU(e())},r}function _7(){return xU(hA.apply(null,arguments).paddingInner(1))}function dA(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function EU(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Bf(){}var lf=.7,rg=1/lf,lu="\\s*([+-]?\\d+)\\s*",uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w7=/^#([0-9a-f]{3,8})$/,I7=new RegExp(`^rgb\\(${lu},${lu},${lu}\\)$`),O7=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),R7=new RegExp(`^rgba\\(${lu},${lu},${lu},${uf}\\)$`),L7=new RegExp(`^rgba\\(${rs},${rs},${rs},${uf}\\)$`),C7=new RegExp(`^hsl\\(${uf},${rs},${rs}\\)$`),P7=new RegExp(`^hsla\\(${uf},${rs},${rs},${uf}\\)$`),mP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dA(Bf,cf,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:yP,formatHex:yP,formatHex8:D7,formatHsl:k7,formatRgb:vP,toString:vP});function yP(){return this.rgb().formatHex()}function D7(){return this.rgb().formatHex8()}function k7(){return TU(this).formatHsl()}function vP(){return this.rgb().formatRgb()}function cf(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=w7.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?bP(e):t===3?new Pn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Sd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Sd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=I7.exec(r))?new Pn(e[1],e[2],e[3],1):(e=O7.exec(r))?new Pn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=R7.exec(r))?Sd(e[1],e[2],e[3],e[4]):(e=L7.exec(r))?Sd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=C7.exec(r))?EP(e[1],e[2]/100,e[3]/100,1):(e=P7.exec(r))?EP(e[1],e[2]/100,e[3]/100,e[4]):mP.hasOwnProperty(r)?bP(mP[r]):r==="transparent"?new Pn(NaN,NaN,NaN,0):null}function bP(r){return new Pn(r>>16&255,r>>8&255,r&255,1)}function Sd(r,e,t,n){return n<=0&&(r=e=t=NaN),new Pn(r,e,t,n)}function M7(r){return r instanceof Bf||(r=cf(r)),r?(r=r.rgb(),new Pn(r.r,r.g,r.b,r.opacity)):new Pn}function ME(r,e,t,n){return arguments.length===1?M7(r):new Pn(r,e,t,n??1)}function Pn(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}dA(Pn,ME,EU(Bf,{brighter(r){return r=r==null?rg:Math.pow(rg,r),new Pn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?lf:Math.pow(lf,r),new Pn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Pn(Ko(this.r),Ko(this.g),Ko(this.b),ng(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SP,formatHex:SP,formatHex8:N7,formatRgb:xP,toString:xP}));function SP(){return`#${Uo(this.r)}${Uo(this.g)}${Uo(this.b)}`}function N7(){return`#${Uo(this.r)}${Uo(this.g)}${Uo(this.b)}${Uo((isNaN(this.opacity)?1:this.opacity)*255)}`}function xP(){const r=ng(this.opacity);return`${r===1?"rgb(":"rgba("}${Ko(this.r)}, ${Ko(this.g)}, ${Ko(this.b)}${r===1?")":`, ${r})`}`}function ng(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Ko(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Uo(r){return r=Ko(r),(r<16?"0":"")+r.toString(16)}function EP(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Di(r,e,t,n)}function TU(r){if(r instanceof Di)return new Di(r.h,r.s,r.l,r.opacity);if(r instanceof Bf||(r=cf(r)),!r)return new Di;if(r instanceof Di)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),s=Math.max(e,t,n),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(t-n)/o+(t<n)*6:t===s?a=(n-e)/o+2:a=(e-t)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new Di(a,o,u,r.opacity)}function B7(r,e,t,n){return arguments.length===1?TU(r):new Di(r,e,t,n??1)}function Di(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}dA(Di,B7,EU(Bf,{brighter(r){return r=r==null?rg:Math.pow(rg,r),new Di(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?lf:Math.pow(lf,r),new Di(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Pn(ab(r>=240?r-240:r+120,i,n),ab(r,i,n),ab(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Di(TP(this.h),xd(this.s),xd(this.l),ng(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=ng(this.opacity);return`${r===1?"hsl(":"hsla("}${TP(this.h)}, ${xd(this.s)*100}%, ${xd(this.l)*100}%${r===1?")":`, ${r})`}`}}));function TP(r){return r=(r||0)%360,r<0?r+360:r}function xd(r){return Math.max(0,Math.min(1,r||0))}function ab(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const pA=r=>()=>r;function U7(r,e){return function(t){return r+t*e}}function j7(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function F7(r){return(r=+r)==1?AU:function(e,t){return t-e?j7(e,t,r):pA(isNaN(e)?t:e)}}function AU(r,e){var t=e-r;return t?U7(r,t):pA(isNaN(r)?e:r)}const AP=(function r(e){var t=F7(e);function n(i,s){var a=t((i=ME(i)).r,(s=ME(s)).r),o=t(i.g,s.g),u=t(i.b,s.b),c=AU(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=o(h),i.b=u(h),i.opacity=c(h),i+""}}return n.gamma=r,n})(1);function $7(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(s){for(i=0;i<t;++i)n[i]=r[i]*(1-s)+e[i]*s;return n}}function G7(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function z7(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),s=new Array(t),a;for(a=0;a<n;++a)i[a]=Lu(r[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function H7(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function ig(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function K7(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=Lu(r[i],e[i]):n[i]=e[i];return function(s){for(i in t)n[i]=t[i](s);return n}}var NE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ob=new RegExp(NE.source,"g");function q7(r){return function(){return r}}function V7(r){return function(e){return r(e)+""}}function W7(r,e){var t=NE.lastIndex=ob.lastIndex=0,n,i,s,a=-1,o=[],u=[];for(r=r+"",e=e+"";(n=NE.exec(r))&&(i=ob.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:ig(n,i)})),t=ob.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?V7(u[0].x):q7(e):(e=u.length,function(c){for(var h=0,d;h<e;++h)o[(d=u[h]).i]=d.x(c);return o.join("")})}function Lu(r,e){var t=typeof e,n;return e==null||t==="boolean"?pA(e):(t==="number"?ig:t==="string"?(n=cf(e))?(e=n,AP):W7:e instanceof cf?AP:e instanceof Date?H7:G7(e)?$7:Array.isArray(e)?z7:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?K7:ig)(r,e)}function gA(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function Y7(r,e){e===void 0&&(e=r,r=Lu);for(var t=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);t<n;)s[t]=r(i,i=e[++t]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function X7(r){return function(){return r}}function sg(r){return+r}var _P=[0,1];function fn(r){return r}function BE(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:X7(isNaN(e)?NaN:.5)}function Q7(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function Z7(r,e,t){var n=r[0],i=r[1],s=e[0],a=e[1];return i<n?(n=BE(i,n),s=t(a,s)):(n=BE(n,i),s=t(s,a)),function(o){return s(n(o))}}function J7(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=BE(r[a],r[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var u=Nf(r,o,1,n)-1;return s[u](i[u](o))}}function Uf(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function fm(){var r=_P,e=_P,t=Lu,n,i,s,a=fn,o,u,c;function h(){var g=Math.min(r.length,e.length);return a!==fn&&(a=Q7(r[0],r[g-1])),o=g>2?J7:Z7,u=c=null,d}function d(g){return g==null||isNaN(g=+g)?s:(u||(u=o(r.map(n),e,t)))(n(a(g)))}return d.invert=function(g){return a(i((c||(c=o(e,r.map(n),ig)))(g)))},d.domain=function(g){return arguments.length?(r=Array.from(g,sg),h()):r.slice()},d.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},d.rangeRound=function(g){return e=Array.from(g),t=gA,h()},d.clamp=function(g){return arguments.length?(a=g?!0:fn,h()):a!==fn},d.interpolate=function(g){return arguments.length?(t=g,h()):t},d.unknown=function(g){return arguments.length?(s=g,d):s},function(g,m){return n=g,i=m,h()}}function mA(){return fm()(fn,fn)}function eY(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function ag(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function vu(r){return r=ag(Math.abs(r)),r?r[1]:NaN}function tY(r,e){return function(t,n){for(var i=t.length,s=[],a=0,o=r[0],u=0;i>0&&o>0&&(u+o+1>n&&(o=Math.max(1,n-u)),s.push(t.substring(i-=o,i+o)),!((u+=o+1)>n));)o=r[a=(a+1)%r.length];return s.reverse().join(e)}}function rY(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var nY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ff(r){if(!(e=nY.exec(r)))throw new Error("invalid format: "+r);var e;return new yA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ff.prototype=yA.prototype;function yA(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}yA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iY(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var _U;function sY(r,e){var t=ag(r,e);if(!t)return r+"";var n=t[0],i=t[1],s=i-(_U=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+ag(r,Math.max(0,e+s-1))[0]}function wP(r,e){var t=ag(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const IP={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:eY,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>wP(r*100,e),r:wP,s:sY,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function OP(r){return r}var RP=Array.prototype.map,LP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aY(r){var e=r.grouping===void 0||r.thousands===void 0?OP:tY(RP.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",s=r.numerals===void 0?OP:rY(RP.call(r.numerals,String)),a=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"":r.minus+"",u=r.nan===void 0?"NaN":r.nan+"";function c(d){d=ff(d);var g=d.fill,m=d.align,y=d.sign,S=d.symbol,b=d.zero,E=d.width,x=d.comma,T=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):IP[_]||(T===void 0&&(T=12),w=!0,_="g"),(b||g==="0"&&m==="=")&&(b=!0,g="0",m="=");var R=S==="$"?t:S==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",O=S==="$"?n:/[%p]/.test(_)?a:"",C=IP[_],B=/[defgprs%]/.test(_);T=T===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function N(U){var k=R,W=O,q,X,H;if(_==="c")W=C(U)+W,U="";else{U=+U;var K=U<0||1/U<0;if(U=isNaN(U)?u:C(Math.abs(U),T),w&&(U=iY(U)),K&&+U==0&&y!=="+"&&(K=!1),k=(K?y==="("?y:o:y==="-"||y==="("?"":y)+k,W=(_==="s"?LP[8+_U/3]:"")+W+(K&&y==="("?")":""),B){for(q=-1,X=U.length;++q<X;)if(H=U.charCodeAt(q),48>H||H>57){W=(H===46?i+U.slice(q+1):U.slice(q))+W,U=U.slice(0,q);break}}}x&&!b&&(U=e(U,1/0));var V=k.length+U.length+W.length,J=V<E?new Array(E-V+1).join(g):"";switch(x&&b&&(U=e(J+U,J.length?E-W.length:1/0),J=""),m){case"<":U=k+U+W+J;break;case"=":U=k+J+U+W;break;case"^":U=J.slice(0,V=J.length>>1)+k+U+W+J.slice(V);break;default:U=J+k+U+W;break}return s(U)}return N.toString=function(){return d+""},N}function h(d,g){var m=c((d=ff(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(vu(g)/3)))*3,S=Math.pow(10,-y),b=LP[8+y/3];return function(E){return m(S*E)+b}}return{format:c,formatPrefix:h}}var Ed,vA,wU;oY({thousands:",",grouping:[3],currency:["$",""]});function oY(r){return Ed=aY(r),vA=Ed.format,wU=Ed.formatPrefix,Ed}function lY(r){return Math.max(0,-vu(Math.abs(r)))}function uY(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vu(e)/3)))*3-vu(Math.abs(r)))}function cY(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,vu(e)-vu(r))+1}function IU(r,e,t,n){var i=DE(r,e,t),s;switch(n=ff(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(s=uY(i,a))&&(n.precision=s),wU(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=cY(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=lY(i))&&(n.precision=s-(n.type==="%")*2);break}}return vA(n)}function oo(r){var e=r.domain;return r.ticks=function(t){var n=e();return CE(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return IU(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],u,c,h=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);h-- >0;){if(c=PE(a,o,t),c===u)return n[i]=a,n[s]=o,e(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;u=c}return r},r}function OU(){var r=mA();return r.copy=function(){return Uf(r,OU())},Ai.apply(r,arguments),oo(r)}function RU(r){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(r=Array.from(n,sg),t):r.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return RU(r).unknown(e)},r=arguments.length?Array.from(r,sg):[0,1],oo(t)}function LU(r,e){r=r.slice();var t=0,n=r.length-1,i=r[t],s=r[n],a;return s<i&&(a=t,t=n,n=a,a=i,i=s,s=a),r[t]=e.floor(i),r[n]=e.ceil(s),r}function CP(r){return Math.log(r)}function PP(r){return Math.exp(r)}function fY(r){return-Math.log(-r)}function hY(r){return-Math.exp(-r)}function dY(r){return isFinite(r)?+("1e"+r):r<0?0:r}function pY(r){return r===10?dY:r===Math.E?Math.exp:e=>Math.pow(r,e)}function gY(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function DP(r){return(e,t)=>-r(-e,t)}function bA(r){const e=r(CP,PP),t=e.domain;let n=10,i,s;function a(){return i=gY(n),s=pY(n),t()[0]<0?(i=DP(i),s=DP(s),r(fY,hY)):r(CP,PP),e}return e.base=function(o){return arguments.length?(n=+o,a()):n},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=o=>{const u=t();let c=u[0],h=u[u.length-1];const d=h<c;d&&([c,h]=[h,c]);let g=i(c),m=i(h),y,S;const b=o==null?10:+o;let E=[];if(!(n%1)&&m-g<b){if(g=Math.floor(g),m=Math.ceil(m),c>0){for(;g<=m;++g)for(y=1;y<n;++y)if(S=g<0?y/s(-g):y*s(g),!(S<c)){if(S>h)break;E.push(S)}}else for(;g<=m;++g)for(y=n-1;y>=1;--y)if(S=g>0?y/s(-g):y*s(g),!(S<c)){if(S>h)break;E.push(S)}E.length*2<b&&(E=CE(c,h,b))}else E=CE(g,m,Math.min(m-g,b)).map(s);return d?E.reverse():E},e.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=ff(u)).precision==null&&(u.trim=!0),u=vA(u)),o===1/0)return u;const c=Math.max(1,n*o/e.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*n<n-.5&&(d*=n),d<=c?u(h):""}},e.nice=()=>t(LU(t(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function CU(){const r=bA(fm()).domain([1,10]);return r.copy=()=>Uf(r,CU()).base(r.base()),Ai.apply(r,arguments),r}function kP(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function MP(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function SA(r){var e=1,t=r(kP(e),MP(e));return t.constant=function(n){return arguments.length?r(kP(e=+n),MP(e)):e},oo(t)}function PU(){var r=SA(fm());return r.copy=function(){return Uf(r,PU()).constant(r.constant())},Ai.apply(r,arguments)}function NP(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function mY(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function yY(r){return r<0?-r*r:r*r}function xA(r){var e=r(fn,fn),t=1;function n(){return t===1?r(fn,fn):t===.5?r(mY,yY):r(NP(t),NP(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,n()):t},oo(e)}function EA(){var r=xA(fm());return r.copy=function(){return Uf(r,EA()).exponent(r.exponent())},Ai.apply(r,arguments),r}function vY(){return EA.apply(null,arguments).exponent(.5)}function BP(r){return Math.sign(r)*r*r}function bY(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function DU(){var r=mA(),e=[0,1],t=!1,n;function i(s){var a=bY(r(s));return isNaN(a)?n:t?Math.round(a):a}return i.invert=function(s){return r.invert(BP(s))},i.domain=function(s){return arguments.length?(r.domain(s),i):r.domain()},i.range=function(s){return arguments.length?(r.range((e=Array.from(s,sg)).map(BP)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(t=!!s,i):t},i.clamp=function(s){return arguments.length?(r.clamp(s),i):r.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return DU(r.domain(),e).round(t).clamp(r.clamp()).unknown(n)},Ai.apply(i,arguments),oo(i)}function kU(){var r=[],e=[],t=[],n;function i(){var a=0,o=Math.max(1,e.length);for(t=new Array(o-1);++a<o;)t[a-1]=T7(r,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:e[Nf(t,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?t[o-1]:r[0],o<t.length?t[o]:r[r.length-1]]},s.domain=function(a){if(!arguments.length)return r.slice();r=[];for(let o of a)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(Qa),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return t.slice()},s.copy=function(){return kU().domain(r).range(e).unknown(n)},Ai.apply(s,arguments)}function MU(){var r=0,e=1,t=1,n=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Nf(n,u,0,t)]:s}function o(){var u=-1;for(n=new Array(t);++u<t;)n[u]=((u+1)*e-(u-t)*r)/(t+1);return a}return a.domain=function(u){return arguments.length?([r,e]=u,r=+r,e=+e,o()):[r,e]},a.range=function(u){return arguments.length?(t=(i=Array.from(u)).length-1,o()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[r,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return MU().domain([r,e]).range(i).unknown(s)},Ai.apply(oo(a),arguments)}function NU(){var r=[.5],e=[0,1],t,n=1;function i(s){return s!=null&&s<=s?e[Nf(r,s,0,n)]:t}return i.domain=function(s){return arguments.length?(r=Array.from(s),n=Math.min(r.length,e.length-1),i):r.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(r.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[r[a-1],r[a]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return NU().domain(r).range(e).unknown(t)},Ai.apply(i,arguments)}const lb=new Date,ub=new Date;function wr(r,e,t,n){function i(s){return r(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(r(s=new Date(+s)),s),i.ceil=s=>(r(s=new Date(s-1)),e(s,1),r(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const u=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;let c;do u.push(c=new Date(+s)),e(s,o),r(s);while(c<s&&s<a);return u},i.filter=s=>wr(a=>{if(a>=a)for(;r(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),t&&(i.count=(s,a)=>(lb.setTime(+s),ub.setTime(+a),r(lb),r(ub),Math.floor(t(lb,ub))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const og=wr(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);og.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?wr(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):og);og.range;const zs=1e3,Si=zs*60,Hs=Si*60,Js=Hs*24,TA=Js*7,UP=Js*30,cb=Js*365,jo=wr(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*zs)},(r,e)=>(e-r)/zs,r=>r.getUTCSeconds());jo.range;const AA=wr(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*zs)},(r,e)=>{r.setTime(+r+e*Si)},(r,e)=>(e-r)/Si,r=>r.getMinutes());AA.range;const _A=wr(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*Si)},(r,e)=>(e-r)/Si,r=>r.getUTCMinutes());_A.range;const wA=wr(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*zs-r.getMinutes()*Si)},(r,e)=>{r.setTime(+r+e*Hs)},(r,e)=>(e-r)/Hs,r=>r.getHours());wA.range;const IA=wr(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*Hs)},(r,e)=>(e-r)/Hs,r=>r.getUTCHours());IA.range;const jf=wr(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Si)/Js,r=>r.getDate()-1);jf.range;const hm=wr(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Js,r=>r.getUTCDate()-1);hm.range;const BU=wr(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Js,r=>Math.floor(r/Js));BU.range;function il(r){return wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Si)/TA)}const dm=il(0),lg=il(1),SY=il(2),xY=il(3),bu=il(4),EY=il(5),TY=il(6);dm.range;lg.range;SY.range;xY.range;bu.range;EY.range;TY.range;function sl(r){return wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/TA)}const pm=sl(0),ug=sl(1),AY=sl(2),_Y=sl(3),Su=sl(4),wY=sl(5),IY=sl(6);pm.range;ug.range;AY.range;_Y.range;Su.range;wY.range;IY.range;const OA=wr(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());OA.range;const RA=wr(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());RA.range;const ea=wr(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());ea.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});ea.range;const ta=wr(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());ta.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});ta.range;function UU(r,e,t,n,i,s){const a=[[jo,1,zs],[jo,5,5*zs],[jo,15,15*zs],[jo,30,30*zs],[s,1,Si],[s,5,5*Si],[s,15,15*Si],[s,30,30*Si],[i,1,Hs],[i,3,3*Hs],[i,6,6*Hs],[i,12,12*Hs],[n,1,Js],[n,2,2*Js],[t,1,TA],[e,1,UP],[e,3,3*UP],[r,1,cb]];function o(c,h,d){const g=h<c;g&&([c,h]=[h,c]);const m=d&&typeof d.range=="function"?d:u(c,h,d),y=m?m.range(c,+h+1):[];return g?y.reverse():y}function u(c,h,d){const g=Math.abs(h-c)/d,m=cA(([,,b])=>b).right(a,g);if(m===a.length)return r.every(DE(c/cb,h/cb,d));if(m===0)return og.every(Math.max(DE(c,h,d),1));const[y,S]=a[g/a[m-1][2]<a[m][2]/g?m-1:m];return y.every(S)}return[o,u]}const[OY,RY]=UU(ta,RA,pm,BU,IA,_A),[LY,CY]=UU(ea,OA,dm,jf,wA,AA);function fb(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function hb(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Dc(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function PY(r){var e=r.dateTime,t=r.date,n=r.time,i=r.periods,s=r.days,a=r.shortDays,o=r.months,u=r.shortMonths,c=kc(i),h=Mc(i),d=kc(s),g=Mc(s),m=kc(a),y=Mc(a),S=kc(o),b=Mc(o),E=kc(u),x=Mc(u),T={a:K,A:V,b:J,B:Q,c:null,d:HP,e:HP,f:tX,g:fX,G:dX,H:ZY,I:JY,j:eX,L:jU,m:rX,M:nX,p:$,q:F,Q:VP,s:WP,S:iX,u:sX,U:aX,V:oX,w:lX,W:uX,x:null,X:null,y:cX,Y:hX,Z:pX,"%":qP},w={a:Z,A:de,b:oe,B:xe,c:null,d:KP,e:KP,f:vX,g:OX,G:LX,H:gX,I:mX,j:yX,L:$U,m:bX,M:SX,p:ae,q:re,Q:VP,s:WP,S:xX,u:EX,U:TX,V:AX,w:_X,W:wX,x:null,X:null,y:IX,Y:RX,Z:CX,"%":qP},_={a:N,A:U,b:k,B:W,c:q,d:GP,e:GP,f:WY,g:$P,G:FP,H:zP,I:zP,j:HY,L:VY,m:zY,M:KY,p:B,q:GY,Q:XY,s:QY,S:qY,u:BY,U:UY,V:jY,w:NY,W:FY,x:X,X:H,y:$P,Y:FP,Z:$Y,"%":YY};T.x=R(t,T),T.X=R(n,T),T.c=R(e,T),w.x=R(t,w),w.X=R(n,w),w.c=R(e,w);function R(te,le){return function(ce){var ne=[],Le=-1,Se=0,ie=te.length,se,ye,Re;for(ce instanceof Date||(ce=new Date(+ce));++Le<ie;)te.charCodeAt(Le)===37&&(ne.push(te.slice(Se,Le)),(ye=jP[se=te.charAt(++Le)])!=null?se=te.charAt(++Le):ye=se==="e"?" ":"0",(Re=le[se])&&(se=Re(ce,ye)),ne.push(se),Se=Le+1);return ne.push(te.slice(Se,Le)),ne.join("")}}function O(te,le){return function(ce){var ne=Dc(1900,void 0,1),Le=C(ne,te,ce+="",0),Se,ie;if(Le!=ce.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(le&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Se=hb(Dc(ne.y,0,1)),ie=Se.getUTCDay(),Se=ie>4||ie===0?ug.ceil(Se):ug(Se),Se=hm.offset(Se,(ne.V-1)*7),ne.y=Se.getUTCFullYear(),ne.m=Se.getUTCMonth(),ne.d=Se.getUTCDate()+(ne.w+6)%7):(Se=fb(Dc(ne.y,0,1)),ie=Se.getDay(),Se=ie>4||ie===0?lg.ceil(Se):lg(Se),Se=jf.offset(Se,(ne.V-1)*7),ne.y=Se.getFullYear(),ne.m=Se.getMonth(),ne.d=Se.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),ie="Z"in ne?hb(Dc(ne.y,0,1)).getUTCDay():fb(Dc(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(ie+5)%7:ne.w+ne.U*7-(ie+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,hb(ne)):fb(ne)}}function C(te,le,ce,ne){for(var Le=0,Se=le.length,ie=ce.length,se,ye;Le<Se;){if(ne>=ie)return-1;if(se=le.charCodeAt(Le++),se===37){if(se=le.charAt(Le++),ye=_[se in jP?le.charAt(Le++):se],!ye||(ne=ye(te,ce,ne))<0)return-1}else if(se!=ce.charCodeAt(ne++))return-1}return ne}function B(te,le,ce){var ne=c.exec(le.slice(ce));return ne?(te.p=h.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function N(te,le,ce){var ne=m.exec(le.slice(ce));return ne?(te.w=y.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function U(te,le,ce){var ne=d.exec(le.slice(ce));return ne?(te.w=g.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function k(te,le,ce){var ne=E.exec(le.slice(ce));return ne?(te.m=x.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function W(te,le,ce){var ne=S.exec(le.slice(ce));return ne?(te.m=b.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function q(te,le,ce){return C(te,e,le,ce)}function X(te,le,ce){return C(te,t,le,ce)}function H(te,le,ce){return C(te,n,le,ce)}function K(te){return a[te.getDay()]}function V(te){return s[te.getDay()]}function J(te){return u[te.getMonth()]}function Q(te){return o[te.getMonth()]}function $(te){return i[+(te.getHours()>=12)]}function F(te){return 1+~~(te.getMonth()/3)}function Z(te){return a[te.getUTCDay()]}function de(te){return s[te.getUTCDay()]}function oe(te){return u[te.getUTCMonth()]}function xe(te){return o[te.getUTCMonth()]}function ae(te){return i[+(te.getUTCHours()>=12)]}function re(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var le=R(te+="",T);return le.toString=function(){return te},le},parse:function(te){var le=O(te+="",!1);return le.toString=function(){return te},le},utcFormat:function(te){var le=R(te+="",w);return le.toString=function(){return te},le},utcParse:function(te){var le=O(te+="",!0);return le.toString=function(){return te},le}}}var jP={"-":"",_:" ",0:"0"},Fr=/^\s*\d+/,DY=/^%/,kY=/[\\^$*+?|[\]().{}]/g;function _t(r,e,t){var n=r<0?"-":"",i=(n?-r:r)+"",s=i.length;return n+(s<t?new Array(t-s+1).join(e)+i:i)}function MY(r){return r.replace(kY,"\\$&")}function kc(r){return new RegExp("^(?:"+r.map(MY).join("|")+")","i")}function Mc(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function NY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.w=+n[0],t+n[0].length):-1}function BY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.u=+n[0],t+n[0].length):-1}function UY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.U=+n[0],t+n[0].length):-1}function jY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.V=+n[0],t+n[0].length):-1}function FY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.W=+n[0],t+n[0].length):-1}function FP(r,e,t){var n=Fr.exec(e.slice(t,t+4));return n?(r.y=+n[0],t+n[0].length):-1}function $P(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function $Y(r,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function GY(r,e,t){var n=Fr.exec(e.slice(t,t+1));return n?(r.q=n[0]*3-3,t+n[0].length):-1}function zY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.m=n[0]-1,t+n[0].length):-1}function GP(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.d=+n[0],t+n[0].length):-1}function HY(r,e,t){var n=Fr.exec(e.slice(t,t+3));return n?(r.m=0,r.d=+n[0],t+n[0].length):-1}function zP(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.H=+n[0],t+n[0].length):-1}function KY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.M=+n[0],t+n[0].length):-1}function qY(r,e,t){var n=Fr.exec(e.slice(t,t+2));return n?(r.S=+n[0],t+n[0].length):-1}function VY(r,e,t){var n=Fr.exec(e.slice(t,t+3));return n?(r.L=+n[0],t+n[0].length):-1}function WY(r,e,t){var n=Fr.exec(e.slice(t,t+6));return n?(r.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function YY(r,e,t){var n=DY.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function XY(r,e,t){var n=Fr.exec(e.slice(t));return n?(r.Q=+n[0],t+n[0].length):-1}function QY(r,e,t){var n=Fr.exec(e.slice(t));return n?(r.s=+n[0],t+n[0].length):-1}function HP(r,e){return _t(r.getDate(),e,2)}function ZY(r,e){return _t(r.getHours(),e,2)}function JY(r,e){return _t(r.getHours()%12||12,e,2)}function eX(r,e){return _t(1+jf.count(ea(r),r),e,3)}function jU(r,e){return _t(r.getMilliseconds(),e,3)}function tX(r,e){return jU(r,e)+"000"}function rX(r,e){return _t(r.getMonth()+1,e,2)}function nX(r,e){return _t(r.getMinutes(),e,2)}function iX(r,e){return _t(r.getSeconds(),e,2)}function sX(r){var e=r.getDay();return e===0?7:e}function aX(r,e){return _t(dm.count(ea(r)-1,r),e,2)}function FU(r){var e=r.getDay();return e>=4||e===0?bu(r):bu.ceil(r)}function oX(r,e){return r=FU(r),_t(bu.count(ea(r),r)+(ea(r).getDay()===4),e,2)}function lX(r){return r.getDay()}function uX(r,e){return _t(lg.count(ea(r)-1,r),e,2)}function cX(r,e){return _t(r.getFullYear()%100,e,2)}function fX(r,e){return r=FU(r),_t(r.getFullYear()%100,e,2)}function hX(r,e){return _t(r.getFullYear()%1e4,e,4)}function dX(r,e){var t=r.getDay();return r=t>=4||t===0?bu(r):bu.ceil(r),_t(r.getFullYear()%1e4,e,4)}function pX(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function KP(r,e){return _t(r.getUTCDate(),e,2)}function gX(r,e){return _t(r.getUTCHours(),e,2)}function mX(r,e){return _t(r.getUTCHours()%12||12,e,2)}function yX(r,e){return _t(1+hm.count(ta(r),r),e,3)}function $U(r,e){return _t(r.getUTCMilliseconds(),e,3)}function vX(r,e){return $U(r,e)+"000"}function bX(r,e){return _t(r.getUTCMonth()+1,e,2)}function SX(r,e){return _t(r.getUTCMinutes(),e,2)}function xX(r,e){return _t(r.getUTCSeconds(),e,2)}function EX(r){var e=r.getUTCDay();return e===0?7:e}function TX(r,e){return _t(pm.count(ta(r)-1,r),e,2)}function GU(r){var e=r.getUTCDay();return e>=4||e===0?Su(r):Su.ceil(r)}function AX(r,e){return r=GU(r),_t(Su.count(ta(r),r)+(ta(r).getUTCDay()===4),e,2)}function _X(r){return r.getUTCDay()}function wX(r,e){return _t(ug.count(ta(r)-1,r),e,2)}function IX(r,e){return _t(r.getUTCFullYear()%100,e,2)}function OX(r,e){return r=GU(r),_t(r.getUTCFullYear()%100,e,2)}function RX(r,e){return _t(r.getUTCFullYear()%1e4,e,4)}function LX(r,e){var t=r.getUTCDay();return r=t>=4||t===0?Su(r):Su.ceil(r),_t(r.getUTCFullYear()%1e4,e,4)}function CX(){return"+0000"}function qP(){return"%"}function VP(r){return+r}function WP(r){return Math.floor(+r/1e3)}var Hl,zU,HU;PX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PX(r){return Hl=PY(r),zU=Hl.format,Hl.parse,HU=Hl.utcFormat,Hl.utcParse,Hl}function DX(r){return new Date(r)}function kX(r){return r instanceof Date?+r:+new Date(+r)}function LA(r,e,t,n,i,s,a,o,u,c){var h=mA(),d=h.invert,g=h.domain,m=c(".%L"),y=c(":%S"),S=c("%I:%M"),b=c("%I %p"),E=c("%a %d"),x=c("%b %d"),T=c("%B"),w=c("%Y");function _(R){return(u(R)<R?m:o(R)<R?y:a(R)<R?S:s(R)<R?b:n(R)<R?i(R)<R?E:x:t(R)<R?T:w)(R)}return h.invert=function(R){return new Date(d(R))},h.domain=function(R){return arguments.length?g(Array.from(R,kX)):g().map(DX)},h.ticks=function(R){var O=g();return r(O[0],O[O.length-1],R??10)},h.tickFormat=function(R,O){return O==null?_:c(O)},h.nice=function(R){var O=g();return(!R||typeof R.range!="function")&&(R=e(O[0],O[O.length-1],R??10)),R?g(LU(O,R)):h},h.copy=function(){return Uf(h,LA(r,e,t,n,i,s,a,o,u,c))},h}function MX(){return Ai.apply(LA(LY,CY,ea,OA,dm,jf,wA,AA,jo,zU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NX(){return Ai.apply(LA(OY,RY,ta,RA,pm,hm,IA,_A,jo,HU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gm(){var r=0,e=1,t,n,i,s,a=fn,o=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-t)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([r,e]=d,t=s(r=+r),n=s(e=+e),i=t===n?0:1/(n-t),c):[r,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function h(d){return function(g){var m,y;return arguments.length?([m,y]=g,a=d(m,y),c):[a(0),a(1)]}}return c.range=h(Lu),c.rangeRound=h(gA),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,t=d(r),n=d(e),i=t===n?0:1/(n-t),c}}function lo(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function KU(){var r=oo(gm()(fn));return r.copy=function(){return lo(r,KU())},ca.apply(r,arguments)}function qU(){var r=bA(gm()).domain([1,10]);return r.copy=function(){return lo(r,qU()).base(r.base())},ca.apply(r,arguments)}function VU(){var r=SA(gm());return r.copy=function(){return lo(r,VU()).constant(r.constant())},ca.apply(r,arguments)}function CA(){var r=xA(gm());return r.copy=function(){return lo(r,CA()).exponent(r.exponent())},ca.apply(r,arguments)}function BX(){return CA.apply(null,arguments).exponent(.5)}function WU(){var r=[],e=fn;function t(n){if(n!=null&&!isNaN(n=+n))return e((Nf(r,n,1)-1)/(r.length-1))}return t.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let i of n)i!=null&&!isNaN(i=+i)&&r.push(i);return r.sort(Qa),t},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.range=function(){return r.map((n,i)=>e(i/(r.length-1)))},t.quantiles=function(n){return Array.from({length:n+1},(i,s)=>E7(r,s/n))},t.copy=function(){return WU(e).domain(r)},ca.apply(t,arguments)}function mm(){var r=0,e=.5,t=1,n=1,i,s,a,o,u,c=fn,h,d=!1,g;function m(S){return isNaN(S=+S)?g:(S=.5+((S=+h(S))-s)*(n*S<n*s?o:u),c(d?Math.max(0,Math.min(1,S)):S))}m.domain=function(S){return arguments.length?([r,e,t]=S,i=h(r=+r),s=h(e=+e),a=h(t=+t),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,m):[r,e,t]},m.clamp=function(S){return arguments.length?(d=!!S,m):d},m.interpolator=function(S){return arguments.length?(c=S,m):c};function y(S){return function(b){var E,x,T;return arguments.length?([E,x,T]=b,c=Y7(S,[E,x,T]),m):[c(0),c(.5),c(1)]}}return m.range=y(Lu),m.rangeRound=y(gA),m.unknown=function(S){return arguments.length?(g=S,m):g},function(S){return h=S,i=S(r),s=S(e),a=S(t),o=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,m}}function YU(){var r=oo(mm()(fn));return r.copy=function(){return lo(r,YU())},ca.apply(r,arguments)}function XU(){var r=bA(mm()).domain([.1,1,10]);return r.copy=function(){return lo(r,XU()).base(r.base())},ca.apply(r,arguments)}function QU(){var r=SA(mm());return r.copy=function(){return lo(r,QU()).constant(r.constant())},ca.apply(r,arguments)}function PA(){var r=xA(mm());return r.copy=function(){return lo(r,PA()).exponent(r.exponent())},ca.apply(r,arguments)}function UX(){return PA.apply(null,arguments).exponent(.5)}const Gc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hA,scaleDiverging:YU,scaleDivergingLog:XU,scaleDivergingPow:PA,scaleDivergingSqrt:UX,scaleDivergingSymlog:QU,scaleIdentity:RU,scaleImplicit:kE,scaleLinear:OU,scaleLog:CU,scaleOrdinal:fA,scalePoint:_7,scalePow:EA,scaleQuantile:kU,scaleQuantize:MU,scaleRadial:DU,scaleSequential:KU,scaleSequentialLog:qU,scaleSequentialPow:CA,scaleSequentialQuantile:WU,scaleSequentialSqrt:BX,scaleSequentialSymlog:VU,scaleSqrt:vY,scaleSymlog:PU,scaleThreshold:NU,scaleTime:MX,scaleUtc:NX,tickFormat:IU},Symbol.toStringTag,{value:"Module"}));var uo=r=>r.chartData,jX=ke([uo],r=>{var e=r.chartData!=null?r.chartData.length-1:0;return{chartData:r.chartData,computedData:r.computedData,dataEndIndex:e,dataStartIndex:0}}),DA=(r,e,t,n)=>n?jX(r):uo(r);function to(r){if(Array.isArray(r)&&r.length===2){var[e,t]=r;if(Br(e)&&Br(t))return!0}return!1}function YP(r,e,t){return t?r:[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}function ZU(r,e){if(e&&typeof r!="function"&&Array.isArray(r)&&r.length===2){var[t,n]=r,i,s;if(Br(t))i=t;else if(typeof t=="function")return;if(Br(n))s=n;else if(typeof n=="function")return;var a=[i,s];if(to(a))return a}}function FX(r,e,t){if(!(!t&&e==null)){if(typeof r=="function"&&e!=null)try{var n=r(e,t);if(to(n))return YP(n,e,t)}catch{}if(Array.isArray(r)&&r.length===2){var[i,s]=r,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(at(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&TC.test(i)){var u=TC.exec(i);if(u==null||e==null)a=void 0;else{var c=+u[1];a=e[0]-c}}else a=e?.[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(at(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e?.[1]))}catch{}else if(typeof s=="string"&&AC.test(s)){var h=AC.exec(s);if(h==null||e==null)o=void 0;else{var d=+h[1];o=e[1]+d}}else o=e?.[1];var g=[a,o];if(to(g))return e==null?g:YP(g,e,t)}}}var Cu=1e9,$X={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MA,Qt=!0,Ei="[DecimalError] ",qo=Ei+"Invalid argument: ",kA=Ei+"Exponent out of range: ",Pu=Math.floor,Do=Math.pow,GX=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zn,Mr=1e7,qt=7,JU=9007199254740991,cg=Pu(JU/qt),et={};et.absoluteValue=et.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};et.comparedTo=et.cmp=function(r){var e,t,n,i,s=this;if(r=new s.constructor(r),s.s!==r.s)return s.s||-r.s;if(s.e!==r.e)return s.e>r.e^s.s<0?1:-1;for(n=s.d.length,i=r.d.length,e=0,t=n<i?n:i;e<t;++e)if(s.d[e]!==r.d[e])return s.d[e]>r.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};et.decimalPlaces=et.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*qt;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};et.dividedBy=et.div=function(r){return qs(this,new this.constructor(r))};et.dividedToIntegerBy=et.idiv=function(r){var e=this,t=e.constructor;return Ft(qs(e,new t(r),0,1),t.precision)};et.equals=et.eq=function(r){return!this.cmp(r)};et.exponent=function(){return yr(this)};et.greaterThan=et.gt=function(r){return this.cmp(r)>0};et.greaterThanOrEqualTo=et.gte=function(r){return this.cmp(r)>=0};et.isInteger=et.isint=function(){return this.e>this.d.length-2};et.isNegative=et.isneg=function(){return this.s<0};et.isPositive=et.ispos=function(){return this.s>0};et.isZero=function(){return this.s===0};et.lessThan=et.lt=function(r){return this.cmp(r)<0};et.lessThanOrEqualTo=et.lte=function(r){return this.cmp(r)<1};et.logarithm=et.log=function(r){var e,t=this,n=t.constructor,i=n.precision,s=i+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(Zn))throw Error(Ei+"NaN");if(t.s<1)throw Error(Ei+(t.s?"NaN":"-Infinity"));return t.eq(Zn)?new n(0):(Qt=!1,e=qs(hf(t,s),hf(r,s),s),Qt=!0,Ft(e,i))};et.minus=et.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?rj(e,r):ej(e,(r.s=-r.s,r))};et.modulo=et.mod=function(r){var e,t=this,n=t.constructor,i=n.precision;if(r=new n(r),!r.s)throw Error(Ei+"NaN");return t.s?(Qt=!1,e=qs(t,r,0,1).times(r),Qt=!0,t.minus(e)):Ft(new n(t),i)};et.naturalExponential=et.exp=function(){return tj(this)};et.naturalLogarithm=et.ln=function(){return hf(this)};et.negated=et.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};et.plus=et.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?ej(e,r):rj(e,(r.s=-r.s,r))};et.precision=et.sd=function(r){var e,t,n,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(qo+r);if(e=yr(i)+1,n=i.d.length-1,t=n*qt+1,n=i.d[n],n){for(;n%10==0;n/=10)t--;for(n=i.d[0];n>=10;n/=10)t++}return r&&e>t?e:t};et.squareRoot=et.sqrt=function(){var r,e,t,n,i,s,a,o=this,u=o.constructor;if(o.s<1){if(!o.s)return new u(0);throw Error(Ei+"NaN")}for(r=yr(o),Qt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ji(o.d),(e.length+r)%2==0&&(e+="0"),i=Math.sqrt(e),r=Pu((r+1)/2)-(r<0||r%2),i==1/0?e="5e"+r:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new u(e)):n=new u(i.toString()),t=u.precision,i=a=t+3;;)if(s=n,n=s.plus(qs(o,s,a+2)).times(.5),Ji(s.d).slice(0,a)===(e=Ji(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ft(s,t+1,0),s.times(s).eq(o)){n=s;break}}else if(e!="9999")break;a+=4}return Qt=!0,Ft(n,t)};et.times=et.mul=function(r){var e,t,n,i,s,a,o,u,c,h=this,d=h.constructor,g=h.d,m=(r=new d(r)).d;if(!h.s||!r.s)return new d(0);for(r.s*=h.s,t=h.e+r.e,u=g.length,c=m.length,u<c&&(s=g,g=m,m=s,a=u,u=c,c=a),s=[],a=u+c,n=a;n--;)s.push(0);for(n=c;--n>=0;){for(e=0,i=u+n;i>n;)o=s[i]+m[n]*g[i-n-1]+e,s[i--]=o%Mr|0,e=o/Mr|0;s[i]=(s[i]+e)%Mr|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=t,Qt?Ft(r,d.precision):r};et.toDecimalPlaces=et.todp=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(os(r,0,Cu),e===void 0?e=n.rounding:os(e,0,8),Ft(t,r+yr(t)+1,e))};et.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Xo(n,!0):(os(r,0,Cu),e===void 0?e=i.rounding:os(e,0,8),n=Ft(new i(n),r+1,e),t=Xo(n,!0,r+1)),t};et.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?Xo(i):(os(r,0,Cu),e===void 0?e=s.rounding:os(e,0,8),n=Ft(new s(i),r+yr(i)+1,e),t=Xo(n.abs(),!1,r+yr(n)+1),i.isneg()&&!i.isZero()?"-"+t:t)};et.toInteger=et.toint=function(){var r=this,e=r.constructor;return Ft(new e(r),yr(r)+1,e.rounding)};et.toNumber=function(){return+this};et.toPower=et.pow=function(r){var e,t,n,i,s,a,o=this,u=o.constructor,c=12,h=+(r=new u(r));if(!r.s)return new u(Zn);if(o=new u(o),!o.s){if(r.s<1)throw Error(Ei+"Infinity");return o}if(o.eq(Zn))return o;if(n=u.precision,r.eq(Zn))return Ft(o,n);if(e=r.e,t=r.d.length-1,a=e>=t,s=o.s,a){if((t=h<0?-h:h)<=JU){for(i=new u(Zn),e=Math.ceil(n/qt+4),Qt=!1;t%2&&(i=i.times(o),QP(i.d,e)),t=Pu(t/2),t!==0;)o=o.times(o),QP(o.d,e);return Qt=!0,r.s<0?new u(Zn).div(i):Ft(i,n)}}else if(s<0)throw Error(Ei+"NaN");return s=s<0&&r.d[Math.max(e,t)]&1?-1:1,o.s=1,Qt=!1,i=r.times(hf(o,n+c)),Qt=!0,i=tj(i),i.s=s,i};et.toPrecision=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?(t=yr(i),n=Xo(i,t<=s.toExpNeg||t>=s.toExpPos)):(os(r,1,Cu),e===void 0?e=s.rounding:os(e,0,8),i=Ft(new s(i),r,e),t=yr(i),n=Xo(i,r<=t||t<=s.toExpNeg,r)),n};et.toSignificantDigits=et.tosd=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(os(r,1,Cu),e===void 0?e=n.rounding:os(e,0,8)),Ft(new n(t),r,e)};et.toString=et.valueOf=et.val=et.toJSON=et[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=yr(r),t=r.constructor;return Xo(r,e<=t.toExpNeg||e>=t.toExpPos)};function ej(r,e){var t,n,i,s,a,o,u,c,h=r.constructor,d=h.precision;if(!r.s||!e.s)return e.s||(e=new h(r)),Qt?Ft(e,d):e;if(u=r.d,c=e.d,a=r.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(n=u,s=-s,o=c.length):(n=c,i=a,o=u.length),a=Math.ceil(d/qt),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=u.length,s=c.length,o-s<0&&(s=o,n=c,c=u,u=n),t=0;s;)t=(u[--s]=u[s]+c[s]+t)/Mr|0,u[s]%=Mr;for(t&&(u.unshift(t),++i),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=i,Qt?Ft(e,d):e}function os(r,e,t){if(r!==~~r||r<e||r>t)throw Error(qo+r)}function Ji(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=qt-n.length,t&&(s+=Ka(t)),s+=n;a=r[e],n=a+"",t=qt-n.length,t&&(s+=Ka(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var qs=(function(){function r(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%Mr|0,a=s/Mr|0;return a&&n.unshift(a),n}function e(n,i,s,a){var o,u;if(s!=a)u=s>a?1:-1;else for(o=u=0;o<s;o++)if(n[o]!=i[o]){u=n[o]>i[o]?1:-1;break}return u}function t(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Mr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,u,c,h,d,g,m,y,S,b,E,x,T,w,_,R,O,C,B=n.constructor,N=n.s==i.s?1:-1,U=n.d,k=i.d;if(!n.s)return new B(n);if(!i.s)throw Error(Ei+"Division by zero");for(u=n.e-i.e,O=k.length,_=U.length,m=new B(N),y=m.d=[],c=0;k[c]==(U[c]||0);)++c;if(k[c]>(U[c]||0)&&--u,s==null?x=s=B.precision:a?x=s+(yr(n)-yr(i))+1:x=s,x<0)return new B(0);if(x=x/qt+2|0,c=0,O==1)for(h=0,k=k[0],x++;(c<_||h)&&x--;c++)T=h*Mr+(U[c]||0),y[c]=T/k|0,h=T%k|0;else{for(h=Mr/(k[0]+1)|0,h>1&&(k=r(k,h),U=r(U,h),O=k.length,_=U.length),w=O,S=U.slice(0,O),b=S.length;b<O;)S[b++]=0;C=k.slice(),C.unshift(0),R=k[0],k[1]>=Mr/2&&++R;do h=0,o=e(k,S,O,b),o<0?(E=S[0],O!=b&&(E=E*Mr+(S[1]||0)),h=E/R|0,h>1?(h>=Mr&&(h=Mr-1),d=r(k,h),g=d.length,b=S.length,o=e(d,S,g,b),o==1&&(h--,t(d,O<g?C:k,g))):(h==0&&(o=h=1),d=k.slice()),g=d.length,g<b&&d.unshift(0),t(S,d,b),o==-1&&(b=S.length,o=e(k,S,O,b),o<1&&(h++,t(S,O<b?C:k,b))),b=S.length):o===0&&(h++,S=[0]),y[c++]=h,o&&S[0]?S[b++]=U[w]||0:(S=[U[w]],b=1);while((w++<_||S[0]!==void 0)&&x--)}return y[0]||y.shift(),m.e=u,Ft(m,a?s+yr(m)+1:s)}})();function tj(r,e){var t,n,i,s,a,o,u=0,c=0,h=r.constructor,d=h.precision;if(yr(r)>16)throw Error(kA+yr(r));if(!r.s)return new h(Zn);for(Qt=!1,o=d,a=new h(.03125);r.abs().gte(.1);)r=r.times(a),c+=5;for(n=Math.log(Do(2,c))/Math.LN10*2+5|0,o+=n,t=i=s=new h(Zn),h.precision=o;;){if(i=Ft(i.times(r),o),t=t.times(++u),a=s.plus(qs(i,t,o)),Ji(a.d).slice(0,o)===Ji(s.d).slice(0,o)){for(;c--;)s=Ft(s.times(s),o);return h.precision=d,e==null?(Qt=!0,Ft(s,d)):s}s=a}}function yr(r){for(var e=r.e*qt,t=r.d[0];t>=10;t/=10)e++;return e}function db(r,e,t){if(e>r.LN10.sd())throw Qt=!0,t&&(r.precision=t),Error(Ei+"LN10 precision limit exceeded");return Ft(new r(r.LN10),e)}function Ka(r){for(var e="";r--;)e+="0";return e}function hf(r,e){var t,n,i,s,a,o,u,c,h,d=1,g=10,m=r,y=m.d,S=m.constructor,b=S.precision;if(m.s<1)throw Error(Ei+(m.s?"NaN":"-Infinity"));if(m.eq(Zn))return new S(0);if(e==null?(Qt=!1,c=b):c=e,m.eq(10))return e==null&&(Qt=!0),db(S,c);if(c+=g,S.precision=c,t=Ji(y),n=t.charAt(0),s=yr(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)m=m.times(r),t=Ji(m.d),n=t.charAt(0),d++;s=yr(m),n>1?(m=new S("0."+t),s++):m=new S(n+"."+t.slice(1))}else return u=db(S,c+2,b).times(s+""),m=hf(new S(n+"."+t.slice(1)),c-g).plus(u),S.precision=b,e==null?(Qt=!0,Ft(m,b)):m;for(o=a=m=qs(m.minus(Zn),m.plus(Zn),c),h=Ft(m.times(m),c),i=3;;){if(a=Ft(a.times(h),c),u=o.plus(qs(a,new S(i),c)),Ji(u.d).slice(0,c)===Ji(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(db(S,c+2,b).times(s+""))),o=qs(o,new S(d),c),S.precision=b,e==null?(Qt=!0,Ft(o,b)):o;o=u,i+=2}}function XP(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,t=t-n-1,r.e=Pu(t/qt),r.d=[],n=(t+1)%qt,t<0&&(n+=qt),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=qt;n<i;)r.d.push(+e.slice(n,n+=qt));e=e.slice(n),n=qt-e.length}else n-=i;for(;n--;)e+="0";if(r.d.push(+e),Qt&&(r.e>cg||r.e<-cg))throw Error(kA+t)}else r.s=0,r.e=0,r.d=[0];return r}function Ft(r,e,t){var n,i,s,a,o,u,c,h,d=r.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=qt,i=e,c=d[h=0];else{if(h=Math.ceil((n+1)/qt),s=d.length,h>=s)return r;for(c=s=d[h],a=1;s>=10;s/=10)a++;n%=qt,i=n-qt+a}if(t!==void 0&&(s=Do(10,a-i-1),o=c/s%10|0,u=e<0||d[h+1]!==void 0||c%s,u=t<4?(o||u)&&(t==0||t==(r.s<0?3:2)):o>5||o==5&&(t==4||u||t==6&&(n>0?i>0?c/Do(10,a-i):0:d[h-1])%10&1||t==(r.s<0?8:7))),e<1||!d[0])return u?(s=yr(r),d.length=1,e=e-s-1,d[0]=Do(10,(qt-e%qt)%qt),r.e=Pu(-e/qt)||0):(d.length=1,d[0]=r.e=r.s=0),r;if(n==0?(d.length=h,s=1,h--):(d.length=h+1,s=Do(10,qt-n),d[h]=i>0?(c/Do(10,a-i)%Do(10,i)|0)*s:0),u)for(;;)if(h==0){(d[0]+=s)==Mr&&(d[0]=1,++r.e);break}else{if(d[h]+=s,d[h]!=Mr)break;d[h--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(Qt&&(r.e>cg||r.e<-cg))throw Error(kA+yr(r));return r}function rj(r,e){var t,n,i,s,a,o,u,c,h,d,g=r.constructor,m=g.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new g(r),Qt?Ft(e,m):e;if(u=r.d,d=e.d,n=e.e,c=r.e,u=u.slice(),a=c-n,a){for(h=a<0,h?(t=u,a=-a,o=d.length):(t=d,n=c,o=u.length),i=Math.max(Math.ceil(m/qt),o)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=u.length,o=d.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(u[i]!=d[i]){h=u[i]<d[i];break}a=0}for(h&&(t=u,u=d,d=t,e.s=-e.s),o=u.length,i=d.length-o;i>0;--i)u[o++]=0;for(i=d.length;i>a;){if(u[--i]<d[i]){for(s=i;s&&u[--s]===0;)u[s]=Mr-1;--u[s],u[i]+=Mr}u[i]-=d[i]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,Qt?Ft(e,m):e):new g(0)}function Xo(r,e,t){var n,i=yr(r),s=Ji(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ka(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ka(-i-1)+s,t&&(n=t-a)>0&&(s+=Ka(n))):i>=a?(s+=Ka(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+Ka(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=Ka(n))),r.s<0?"-"+s:s}function QP(r,e){if(r.length>e)return r.length=e,!0}function nj(r){var e,t,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(qo+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return XP(a,s.toString())}else if(typeof s!="string")throw Error(qo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,GX.test(s))XP(a,s);else throw Error(qo+s)}if(i.prototype=et,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=nj,i.config=i.set=zX,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function zX(r){if(!r||typeof r!="object")throw Error(Ei+"Object expected");var e,t,n,i=["precision",1,Cu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=r[t=i[e]])!==void 0)if(Pu(n)===n&&n>=i[e+1]&&n<=i[e+2])this[t]=n;else throw Error(qo+t+": "+n);if((n=r[t="LN10"])!==void 0)if(n==Math.LN10)this[t]=new this(n);else throw Error(qo+t+": "+n);return this}var MA=nj($X);Zn=new MA(1);const Lt=MA;var HX=r=>r,ij={},sj=r=>r===ij,ZP=r=>function e(){return arguments.length===0||arguments.length===1&&sj(arguments.length<=0?void 0:arguments[0])?e:r(...arguments)},aj=(r,e)=>r===1?e:ZP(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=n.filter(a=>a!==ij).length;return s>=r?e(...n):aj(r-s,ZP(function(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];var c=n.map(h=>sj(h)?o.shift():h);return e(...c,...o)}))}),KX=r=>aj(r.length,r),UE=(r,e)=>{for(var t=[],n=r;n<e;++n)t[n-r]=n;return t},qX=KX((r,e)=>Array.isArray(e)?e.map(r):Object.keys(e).map(t=>e[t]).map(r)),VX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return HX;var i=t.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,u)=>u(o),s(...arguments))}},jE=r=>Array.isArray(r)?r.reverse():r.split("").reverse().join("");function oj(r){var e;return r===0?e=1:e=Math.floor(new Lt(r).abs().log(10).toNumber())+1,e}function lj(r,e,t){for(var n=new Lt(r),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(t),i++;return s}var uj=r=>{var[e,t]=r,[n,i]=[e,t];return e>t&&([n,i]=[t,e]),[n,i]},cj=(r,e,t)=>{if(r.lte(0))return new Lt(0);var n=oj(r.toNumber()),i=new Lt(10).pow(n),s=r.div(i),a=n!==1?.05:.1,o=new Lt(Math.ceil(s.div(a).toNumber())).add(t).mul(a),u=o.mul(i);return e?new Lt(u.toNumber()):new Lt(Math.ceil(u.toNumber()))},WX=(r,e,t)=>{var n=new Lt(1),i=new Lt(r);if(!i.isint()&&t){var s=Math.abs(r);s<1?(n=new Lt(10).pow(oj(r)-1),i=new Lt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Lt(Math.floor(r)))}else r===0?i=new Lt(Math.floor((e-1)/2)):t||(i=new Lt(Math.floor(r)));var a=Math.floor((e-1)/2),o=VX(qX(u=>i.add(new Lt(u-a).mul(n)).toNumber()),UE);return o(0,e)},fj=function(e,t,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Lt(0),tickMin:new Lt(0),tickMax:new Lt(0)};var a=cj(new Lt(t).sub(e).div(n-1),i,s),o;e<=0&&t>=0?o=new Lt(0):(o=new Lt(e).add(t).div(2),o=o.sub(new Lt(o).mod(a)));var u=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new Lt(t).sub(o).div(a).toNumber()),h=u+c+1;return h>n?fj(e,t,n,i,s+1):(h<n&&(c=t>0?c+(n-h):c,u=t>0?u:u+(n-h)),{step:a,tickMin:o.sub(new Lt(u).mul(a)),tickMax:o.add(new Lt(c).mul(a))})},YX=function(e){var[t,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[o,u]=uj([t,n]);if(o===-1/0||u===1/0){var c=u===1/0?[o,...UE(0,i-1).map(()=>1/0)]:[...UE(0,i-1).map(()=>-1/0),u];return t>n?jE(c):c}if(o===u)return WX(o,i,s);var{step:h,tickMin:d,tickMax:g}=fj(o,u,a,s,0),m=lj(d,g.add(new Lt(.1).mul(h)),h);return t>n?jE(m):m},XX=function(e,t){var[n,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=uj([n,i]);if(a===-1/0||o===1/0)return[n,i];if(a===o)return[a];var u=Math.max(t,2),c=cj(new Lt(o).sub(a).div(u-1),s,0),h=[...lj(new Lt(a),new Lt(o),c),o];return s===!1&&(h=h.map(d=>Math.round(d))),n>i?jE(h):h},QX=r=>r.rootProps.barCategoryGap,ym=r=>r.rootProps.stackOffset,hj=r=>r.rootProps.reverseStackOrder,NA=r=>r.options.chartName,BA=r=>r.rootProps.syncId,dj=r=>r.rootProps.syncMethod,UA=r=>r.options.eventEmitter,hn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},$s={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Yn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},vm=(r,e)=>{if(!(!r||!e))return r!=null&&r.reversed?[e[1],e[0]]:e},ZX={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$s.angleAxisId,includeHidden:!1,name:void 0,reversed:$s.reversed,scale:$s.scale,tick:$s.tick,tickCount:void 0,ticks:void 0,type:$s.type,unit:void 0},JX={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yn.scale,tick:Yn.tick,tickCount:Yn.tickCount,ticks:void 0,type:Yn.type,unit:void 0},eQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$s.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$s.scale,tick:$s.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},tQ={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yn.scale,tick:Yn.tick,tickCount:Yn.tickCount,ticks:void 0,type:"category",unit:void 0},jA=(r,e)=>r.polarAxis.angleAxis[e]!=null?r.polarAxis.angleAxis[e]:r.layout.layoutType==="radial"?eQ:ZX,FA=(r,e)=>r.polarAxis.radiusAxis[e]!=null?r.polarAxis.radiusAxis[e]:r.layout.layoutType==="radial"?tQ:JX,bm=r=>r.polarOptions,$A=ke([la,ua,Xr],XW),pj=ke([bm,$A],(r,e)=>{if(r!=null)return eo(r.innerRadius,e,0)}),gj=ke([bm,$A],(r,e)=>{if(r!=null)return eo(r.outerRadius,e,e*.8)}),rQ=r=>{if(r==null)return[0,0];var{startAngle:e,endAngle:t}=r;return[e,t]},mj=ke([bm],rQ);ke([jA,mj],vm);var yj=ke([$A,pj,gj],(r,e,t)=>{if(!(r==null||e==null||t==null))return[e,t]});ke([FA,yj],vm);var vj=ke([Vt,bm,pj,gj,la,ua],(r,e,t,n,i,s)=>{if(!(r!=="centric"&&r!=="radial"||e==null||t==null||n==null)){var{cx:a,cy:o,startAngle:u,endAngle:c}=e;return{cx:eo(a,i,i/2),cy:eo(o,s,s/2),innerRadius:t,outerRadius:n,startAngle:u,endAngle:c,clockWise:!1}}}),Ir=(r,e)=>e,Sm=(r,e,t)=>t;function bj(r){return r?.id}function Sj(r,e,t){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=t,a=new Map;return r.forEach(o=>{var u,c=(u=o.data)!==null&&u!==void 0?u:n;if(!(c==null||c.length===0)){var h=bj(o);c.forEach((d,g)=>{var m=s==null||i?g:String(nn(d,s,null)),y=nn(d,o.dataKey,0),S;a.has(m)?S=a.get(m):S={},Object.assign(S,{[h]:y}),a.set(m,S)})}}),Array.from(a.values())}function GA(r){return r.stackId!=null&&r.dataKey!=null}var xm=(r,e)=>r===e?!0:r==null||e==null?!1:r[0]===e[0]&&r[1]===e[1];function Em(r,e){return Array.isArray(r)&&Array.isArray(e)&&r.length===0&&e.length===0?!0:r===e}function nQ(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return!1}var Or=r=>{var e=Vt(r);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Du=r=>r.tooltip.settings.axisId;function JP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function fg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(t),!0).forEach(function(n){iQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iQ(r,e,t){return(e=sQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sQ(r){var e=aQ(r,"string");return typeof e=="symbol"?e:e+""}function aQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var FE=[0,"auto"],Dr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xj=(r,e)=>r.cartesianAxis.xAxis[e],fa=(r,e)=>{var t=xj(r,e);return t??Dr},kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:FE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Df},Ej=(r,e)=>r.cartesianAxis.yAxis[e],ha=(r,e)=>{var t=Ej(r,e);return t??kr},oQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},zA=(r,e)=>{var t=r.cartesianAxis.zAxis[e];return t??oQ},yn=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);case"zAxis":return zA(r,t);case"angleAxis":return jA(r,t);case"radiusAxis":return FA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},lQ=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Ff=(r,e,t)=>{switch(e){case"xAxis":return fa(r,t);case"yAxis":return ha(r,t);case"angleAxis":return jA(r,t);case"radiusAxis":return FA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Tj=r=>r.graphicalItems.cartesianItems.some(e=>e.type==="bar")||r.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Aj(r,e){return t=>{switch(r){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var _j=r=>r.graphicalItems.cartesianItems,uQ=ke([Ir,Sm],Aj),wj=(r,e,t)=>r.filter(t).filter(n=>e?.includeHidden===!0?!0:!n.hide),$f=ke([_j,yn,uQ],wj,{memoizeOptions:{resultEqualityCheck:Em}}),Ij=ke([$f],r=>r.filter(e=>e.type==="area"||e.type==="bar").filter(GA)),Oj=r=>r.filter(e=>!("stackId"in e)||e.stackId===void 0),cQ=ke([$f],Oj),Rj=r=>r.map(e=>e.data).filter(Boolean).flat(1),fQ=ke([$f],Rj,{memoizeOptions:{resultEqualityCheck:Em}}),Lj=(r,e)=>{var{chartData:t=[],dataStartIndex:n,dataEndIndex:i}=e;return r.length>0?r:t.slice(n,i+1)},HA=ke([fQ,DA],Lj),Cj=(r,e,t)=>e?.dataKey!=null?r.map(n=>({value:nn(n,e.dataKey)})):t.length>0?t.map(n=>n.dataKey).flatMap(n=>r.map(i=>({value:nn(i,n)}))):r.map(n=>({value:n})),Tm=ke([HA,yn,$f],Cj);function Pj(r,e){switch(r){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function vp(r){if(ss(r)||r instanceof Date){var e=Number(r);if(Br(e))return e}}function eD(r){if(Array.isArray(r)){var e=[vp(r[0]),vp(r[1])];return to(e)?e:void 0}var t=vp(r);if(t!=null)return[t,t]}function ra(r){return r.map(vp).filter(rK)}function hQ(r,e,t){return!t||typeof e!="number"||is(e)?[]:t.length?ra(t.flatMap(n=>{var i=nn(r,n.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!Br(s)||!Br(a)))return[e-s,e+a]})):[]}var Rr=r=>{var e=Or(r),t=Du(r);return Ff(r,e,t)},Gf=ke([Rr],r=>r?.dataKey),dQ=ke([Ij,DA,Rr],Sj),Dj=(r,e,t,n)=>{var i={},s=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[o,u]=a,c=n?[...u].reverse():u,h=c.map(bj);return[o,{stackedData:O9(r,h,t),graphicalItems:c}]}))},pQ=ke([dQ,Ij,ym,hj],Dj),kj=(r,e,t,n)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(n==null&&t!=="zAxis"){var a=C9(r,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},gQ=ke([yn],r=>r.allowDataOverflow),KA=r=>{var e;if(r==null||!("domain"in r))return FE;if(r.domain!=null)return r.domain;if(r.ticks!=null){if(r.type==="number"){var t=ra(r.ticks);return[Math.min(...t),Math.max(...t)]}if(r.type==="category")return r.ticks.map(String)}return(e=r?.domain)!==null&&e!==void 0?e:FE},Mj=ke([yn],KA),Nj=ke([Mj,gQ],ZU),mQ=ke([pQ,uo,Ir,Nj],kj,{memoizeOptions:{resultEqualityCheck:xm}}),qA=r=>r.errorBars,yQ=(r,e,t)=>r.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Pj(t,n)),hg=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},Bj=(r,e,t,n,i)=>{var s,a;if(t.length>0&&r.forEach(o=>{t.forEach(u=>{var c,h,d=(c=n[u.id])===null||c===void 0?void 0:c.filter(E=>Pj(i,E)),g=nn(o,(h=e.dataKey)!==null&&h!==void 0?h:u.dataKey),m=hQ(o,g,d);if(m.length>=2){var y=Math.min(...m),S=Math.max(...m);(s==null||y<s)&&(s=y),(a==null||S>a)&&(a=S)}var b=eD(g);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),a=a==null?b[1]:Math.max(a,b[1]))})}),e?.dataKey!=null&&r.forEach(o=>{var u=eD(nn(o,e.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),a=a==null?u[1]:Math.max(a,u[1]))}),Br(s)&&Br(a))return[s,a]},vQ=ke([HA,yn,cQ,qA,Ir],Bj,{memoizeOptions:{resultEqualityCheck:xm}});function bQ(r){var{value:e}=r;if(ss(e)||e instanceof Date)return e}var SQ=(r,e,t)=>{var n=r.map(bQ).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&V2(n))?yU(0,r.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Uj=r=>r.referenceElements.dots,ku=(r,e,t)=>r.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===t:n.yAxisId===t),xQ=ke([Uj,Ir,Sm],ku),jj=r=>r.referenceElements.areas,EQ=ke([jj,Ir,Sm],ku),Fj=r=>r.referenceElements.lines,TQ=ke([Fj,Ir,Sm],ku),$j=(r,e)=>{var t=ra(r.map(n=>e==="xAxis"?n.x:n.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},AQ=ke(xQ,Ir,$j),Gj=(r,e)=>{var t=ra(r.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},_Q=ke([EQ,Ir],Gj);function wQ(r){var e;if(r.x!=null)return ra([r.x]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.x);return t==null||t.length===0?[]:ra(t)}function IQ(r){var e;if(r.y!=null)return ra([r.y]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.y);return t==null||t.length===0?[]:ra(t)}var zj=(r,e)=>{var t=r.flatMap(n=>e==="xAxis"?wQ(n):IQ(n));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},OQ=ke([TQ,Ir],zj),RQ=ke(AQ,OQ,_Q,(r,e,t)=>hg(r,t,e)),Hj=(r,e,t,n,i,s,a,o)=>{if(t!=null)return t;var u=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=u?hg(n,s,i):hg(s,i);return FX(e,c,r.allowDataOverflow)},LQ=ke([yn,Mj,Nj,mQ,vQ,RQ,Vt,Ir],Hj,{memoizeOptions:{resultEqualityCheck:xm}}),CQ=[0,1],Kj=(r,e,t,n,i,s,a)=>{if(!((r==null||t==null||t.length===0)&&a===void 0)){var{dataKey:o,type:u}=r,c=ao(e,s);if(c&&o==null){var h;return yU(0,(h=t?.length)!==null&&h!==void 0?h:0)}return u==="category"?SQ(n,r,c):i==="expand"?CQ:a}},VA=ke([yn,Vt,HA,Tm,ym,Ir,LQ],Kj),qj=(r,e,t,n,i)=>{if(r!=null){var{scale:s,type:a}=r;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Of(s));return o in Gc?o:"point"}}},zf=ke([yn,Vt,Tj,NA,Ir],qj);function PQ(r){if(r!=null){if(r in Gc)return Gc[r]();var e="scale".concat(Of(r));if(e in Gc)return Gc[e]()}}function WA(r,e,t,n){if(!(t==null||n==null)){if(typeof r.scale=="function")return r.scale.copy().domain(t).range(n);var i=PQ(e);if(i!=null){var s=i.domain(t).range(n);return A9(s),s}}}var Vj=(r,e,t)=>{var n=KA(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&to(r))return YX(r,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&to(r))return XX(r,e.tickCount,e.allowDecimals)}},YA=ke([VA,Ff,zf],Vj),Wj=(r,e,t,n)=>{if(n!=="angleAxis"&&r?.type==="number"&&to(e)&&Array.isArray(t)&&t.length>0){var i=e[0],s=t[0],a=e[1],o=t[t.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},DQ=ke([yn,VA,YA,Ir],Wj),kQ=ke(Tm,yn,(r,e)=>{if(!(!e||e.type!=="number")){var t=1/0,n=Array.from(ra(r.map(o=>o.value))).sort((o,u)=>o-u);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var s=0;s<n.length-1;s++){var a=n[s+1]-n[s];t=Math.min(t,a)}return t/i}}),Yj=ke(kQ,Vt,QX,Xr,(r,e,t,n)=>n,(r,e,t,n,i)=>{if(!Br(r))return 0;var s=e==="vertical"?n.height:n.width;if(i==="gap")return r*s/2;if(i==="no-gap"){var a=eo(t,r*s),o=r*s/2;return o-a-(o-a)/s*a}return 0}),MQ=(r,e)=>{var t=fa(r,e);return t==null||typeof t.padding!="string"?0:Yj(r,"xAxis",e,t.padding)},NQ=(r,e)=>{var t=ha(r,e);return t==null||typeof t.padding!="string"?0:Yj(r,"yAxis",e,t.padding)},BQ=ke(fa,MQ,(r,e)=>{var t,n;if(r==null)return{left:0,right:0};var{padding:i}=r;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),UQ=ke(ha,NQ,(r,e)=>{var t,n;if(r==null)return{top:0,bottom:0};var{padding:i}=r;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),jQ=ke([Xr,BQ,im,nm,(r,e,t)=>t],(r,e,t,n,i)=>{var{padding:s}=n;return i?[s.left,t.width-s.right]:[r.left+e.left,r.left+r.width-e.right]}),FQ=ke([Xr,Vt,UQ,im,nm,(r,e,t)=>t],(r,e,t,n,i,s)=>{var{padding:a}=i;return s?[n.height-a.bottom,a.top]:e==="horizontal"?[r.top+r.height-t.bottom,r.top+t.top]:[r.top+t.top,r.top+r.height-t.bottom]}),Hf=(r,e,t,n)=>{var i;switch(e){case"xAxis":return jQ(r,t,n);case"yAxis":return FQ(r,t,n);case"zAxis":return(i=zA(r,t))===null||i===void 0?void 0:i.range;case"angleAxis":return mj(r);case"radiusAxis":return yj(r,t);default:return}},Xj=ke([yn,Hf],vm),Mu=ke([yn,zf,DQ,Xj],WA);ke([$f,qA,Ir],yQ);function Qj(r,e){return r.id<e.id?-1:r.id>e.id?1:0}var Am=(r,e)=>e,_m=(r,e,t)=>t,$Q=ke(tm,Am,_m,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(Qj)),GQ=ke(rm,Am,_m,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(Qj)),Zj=(r,e)=>({width:r.width,height:e.height}),zQ=(r,e)=>{var t=typeof e.width=="number"?e.width:Df;return{width:t,height:r.height}},HQ=ke(Xr,fa,Zj),KQ=(r,e,t)=>{switch(e){case"top":return r.top;case"bottom":return t-r.bottom;default:return 0}},qQ=(r,e,t)=>{switch(e){case"left":return r.left;case"right":return t-r.right;default:return 0}},VQ=ke(ua,Xr,$Q,Am,_m,(r,e,t,n,i)=>{var s={},a;return t.forEach(o=>{var u=Zj(e,o);a==null&&(a=KQ(e,n,r));var c=n==="top"&&!i||n==="bottom"&&i;s[o.id]=a-Number(c)*u.height,a+=(c?-1:1)*u.height}),s}),WQ=ke(la,Xr,GQ,Am,_m,(r,e,t,n,i)=>{var s={},a;return t.forEach(o=>{var u=zQ(e,o);a==null&&(a=qQ(e,n,r));var c=n==="left"&&!i||n==="right"&&i;s[o.id]=a-Number(c)*u.width,a+=(c?-1:1)*u.width}),s}),YQ=(r,e)=>{var t=fa(r,e);if(t!=null)return VQ(r,t.orientation,t.mirror)},XQ=ke([Xr,fa,YQ,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}}),QQ=(r,e)=>{var t=ha(r,e);if(t!=null)return WQ(r,t.orientation,t.mirror)},ZQ=ke([Xr,ha,QQ,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}}),JQ=ke(Xr,ha,(r,e)=>{var t=typeof e.width=="number"?e.width:Df;return{width:t,height:r.height}}),Jj=(r,e,t,n)=>{if(t!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=t,o=ao(r,n),u=e.map(c=>c.value);if(a&&o&&s==="category"&&i&&V2(u))return u}},XA=ke([Vt,Tm,yn,Ir],Jj),eF=(r,e,t,n)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:s}=t,a=ao(r,n);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},QA=ke([Vt,Tm,Ff,Ir],eF),tD=ke([Vt,lQ,zf,Mu,XA,QA,Hf,YA,Ir],(r,e,t,n,i,s,a,o,u)=>{if(e!=null){var c=ao(r,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:t,scale:n}}}),eZ=(r,e,t,n,i,s,a,o,u)=>{if(!(e==null||n==null)){var c=ao(r,u),{type:h,ticks:d,tickCount:g}=e,m=t==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=h==="category"&&n.bandwidth?n.bandwidth()/m:0;y=u==="angleAxis"&&s!=null&&s.length>=2?bi(s[0]-s[1])*2*y:y;var S=d||i;if(S){var b=S.map((E,x)=>{var T=a?a.indexOf(E):E;return{index:x,coordinate:n(T)+y,value:E,offset:y}});return b.filter(E=>Br(E.coordinate))}return c&&o?o.map((E,x)=>({coordinate:n(E)+y,value:E,index:x,offset:y})).filter(E=>Br(E.coordinate)):n.ticks?n.ticks(g).map(E=>({coordinate:n(E)+y,value:E,offset:y})):n.domain().map((E,x)=>({coordinate:n(E)+y,value:a?a[E]:E,index:x,offset:y}))}},tF=ke([Vt,Ff,zf,Mu,YA,Hf,XA,QA,Ir],eZ),tZ=(r,e,t,n,i,s,a)=>{if(!(e==null||t==null||n==null||n[0]===n[1])){var o=ao(r,a),{tickCount:u}=e,c=0;return c=a==="angleAxis"&&n?.length>=2?bi(n[0]-n[1])*2*c:c,o&&s?s.map((h,d)=>({coordinate:t(h)+c,value:h,index:d,offset:c})):t.ticks?t.ticks(u).map(h=>({coordinate:t(h)+c,value:h,offset:c})):t.domain().map((h,d)=>({coordinate:t(h)+c,value:i?i[h]:h,index:d,offset:c}))}},rF=ke([Vt,Ff,Mu,Hf,XA,QA,Ir],tZ),nF=ke(yn,Mu,(r,e)=>{if(!(r==null||e==null))return fg(fg({},r),{},{scale:e})}),rZ=ke([yn,zf,VA,Xj],WA);ke((r,e,t)=>zA(r,t),rZ,(r,e)=>{if(!(r==null||e==null))return fg(fg({},r),{},{scale:e})});var nZ=ke([Vt,tm,rm],(r,e,t)=>{switch(r){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iF=r=>r.options.defaultTooltipEventType,sF=r=>r.options.validateTooltipEventTypes;function aF(r,e,t){if(r==null)return e;var n=r?"axis":"item";return t==null?e:t.includes(n)?n:e}function ZA(r,e){var t=iF(r),n=sF(r);return aF(e,t,n)}function iZ(r){return it(e=>ZA(e,r))}var oF=(r,e)=>{var t,n=Number(e);if(!(is(n)||e==null))return n>=0?r==null||(t=r[n])===null||t===void 0?void 0:t.value:void 0},sZ=r=>r.tooltip.settings,Ya={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},aZ={itemInteraction:{click:Ya,hover:Ya},axisInteraction:{click:Ya,hover:Ya},keyboardInteraction:Ya,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},lF=Nn({name:"tooltip",initialState:aZ,reducers:{addTooltipEntrySettings:{reducer(r,e){r.tooltipItemPayloads.push(e.payload)},prepare:Xt()},replaceTooltipEntrySettings:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).tooltipItemPayloads.indexOf(t);i>-1&&(r.tooltipItemPayloads[i]=n)},prepare:Xt()},removeTooltipEntrySettings:{reducer(r,e){var t=ki(r).tooltipItemPayloads.indexOf(e.payload);t>-1&&r.tooltipItemPayloads.splice(t,1)},prepare:Xt()},setTooltipSettingsState(r,e){r.settings=e.payload},setActiveMouseOverItemIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.itemInteraction.hover.active=!0,r.itemInteraction.hover.index=e.payload.activeIndex,r.itemInteraction.hover.dataKey=e.payload.activeDataKey,r.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(r){r.itemInteraction.hover.active=!1,r.axisInteraction.hover.active=!1},mouseLeaveItem(r){r.itemInteraction.hover.active=!1},setActiveClickItemIndex(r,e){r.syncInteraction.active=!1,r.itemInteraction.click.active=!0,r.keyboardInteraction.active=!1,r.itemInteraction.click.index=e.payload.activeIndex,r.itemInteraction.click.dataKey=e.payload.activeDataKey,r.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(r,e){r.syncInteraction.active=!1,r.axisInteraction.hover.active=!0,r.keyboardInteraction.active=!1,r.axisInteraction.hover.index=e.payload.activeIndex,r.axisInteraction.hover.dataKey=e.payload.activeDataKey,r.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.axisInteraction.click.active=!0,r.axisInteraction.click.index=e.payload.activeIndex,r.axisInteraction.click.dataKey=e.payload.activeDataKey,r.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(r,e){r.syncInteraction=e.payload},setKeyboardInteraction(r,e){r.keyboardInteraction.active=e.payload.active,r.keyboardInteraction.index=e.payload.activeIndex,r.keyboardInteraction.coordinate=e.payload.activeCoordinate,r.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:oZ,replaceTooltipEntrySettings:lZ,removeTooltipEntrySettings:uZ,setTooltipSettingsState:cZ,setActiveMouseOverItemIndex:fZ,mouseLeaveItem:Kce,mouseLeaveChart:uF,setActiveClickItemIndex:qce,setMouseOverAxisIndex:cF,setMouseClickAxisIndex:hZ,setSyncInteraction:$E,setKeyboardInteraction:GE}=lF.actions,dZ=lF.reducer;function rD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Td(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(t),!0).forEach(function(n){pZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pZ(r,e,t){return(e=gZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gZ(r){var e=mZ(r,"string");return typeof e=="symbol"?e:e+""}function mZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function yZ(r,e,t){return e==="axis"?t==="click"?r.axisInteraction.click:r.axisInteraction.hover:t==="click"?r.itemInteraction.click:r.itemInteraction.hover}function vZ(r){return r.index!=null}var fF=(r,e,t,n)=>{if(e==null)return Ya;var i=yZ(r,e,t);if(i==null)return Ya;if(i.active)return i;if(r.keyboardInteraction.active)return r.keyboardInteraction;if(r.syncInteraction.active&&r.syncInteraction.index!=null)return r.syncInteraction;var s=r.settings.active===!0;if(vZ(i)){if(s)return Td(Td({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Td(Td({},Ya),{},{coordinate:i.coordinate})};function bZ(r){if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(r instanceof Date){var e=r.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(r);return Number.isFinite(t)?t:void 0}function SZ(r,e){var t=bZ(r),n=e[0],i=e[1];if(t===void 0)return!1;var s=Math.min(n,i),a=Math.max(n,i);return t>=s&&t<=a}function xZ(r,e,t){if(t==null||e==null)return!0;var n=nn(r,e);return n==null||!to(t)?!0:SZ(n,t)}var JA=(r,e,t,n)=>{var i=r?.index;if(i==null)return null;var s=Number(i);if(!Br(s))return i;var a=0,o=1/0;e.length>0&&(o=e.length-1);var u=Math.max(a,Math.min(s,o)),c=e[u];return c==null||xZ(c,t,n)?String(u):null},hF=(r,e,t,n,i,s,a,o)=>{if(!(s==null||o==null)){var u=a[0],c=u==null?void 0:o(u.positions,s);if(c!=null)return c;var h=i?.[Number(s)];if(h)switch(t){case"horizontal":return{x:h.coordinate,y:(n.top+e)/2};default:return{x:(n.left+r)/2,y:h.coordinate}}}},dF=(r,e,t,n)=>{if(e==="axis")return r.tooltipItemPayloads;if(r.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=r.itemInteraction.hover.dataKey:i=r.itemInteraction.click.dataKey,i==null&&n!=null?[r.tooltipItemPayloads[0]]:r.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Kf=r=>r.options.tooltipPayloadSearcher,Nu=r=>r.tooltip;function nD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function iD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(t),!0).forEach(function(n){EZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):nD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EZ(r,e,t){return(e=TZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TZ(r){var e=AZ(r,"string");return typeof e=="symbol"?e:e+""}function AZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _Z(r,e){return r??e}var pF=(r,e,t,n,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:u,dataStartIndex:c,dataEndIndex:h}=t,d=[];return r.reduce((g,m)=>{var y,{dataDefinedOnItem:S,settings:b}=m,E=_Z(S,o),x=Array.isArray(E)?GB(E,c,h):E,T=(y=b?.dataKey)!==null&&y!==void 0?y:n,w=b?.nameKey,_;if(n&&Array.isArray(x)&&!Array.isArray(x[0])&&a==="axis"?_=W2(x,n,i):_=s(x,e,u,w),Array.isArray(_))_.forEach(O=>{var C=iD(iD({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});g.push(_C({tooltipEntrySettings:C,dataKey:O.dataKey,payload:O.payload,value:nn(O.payload,O.dataKey),name:O.name}))});else{var R;g.push(_C({tooltipEntrySettings:b,dataKey:T,payload:_,value:nn(_,T),name:(R=nn(_,w))!==null&&R!==void 0?R:b?.name}))}return g},d)}},e_=ke([Rr,Vt,Tj,NA,Or],qj),wZ=ke([r=>r.graphicalItems.cartesianItems,r=>r.graphicalItems.polarItems],(r,e)=>[...r,...e]),IZ=ke([Or,Du],Aj),qf=ke([wZ,Rr,IZ],wj,{memoizeOptions:{resultEqualityCheck:Em}}),OZ=ke([qf],r=>r.filter(GA)),RZ=ke([qf],Rj,{memoizeOptions:{resultEqualityCheck:Em}}),Bu=ke([RZ,uo],Lj),LZ=ke([OZ,uo,Rr],Sj),t_=ke([Bu,Rr,qf],Cj),gF=ke([Rr],KA),CZ=ke([Rr],r=>r.allowDataOverflow),mF=ke([gF,CZ],ZU),PZ=ke([qf],r=>r.filter(GA)),DZ=ke([LZ,PZ,ym,hj],Dj),kZ=ke([DZ,uo,Or,mF],kj),MZ=ke([qf],Oj),NZ=ke([Bu,Rr,MZ,qA,Or],Bj,{memoizeOptions:{resultEqualityCheck:xm}}),BZ=ke([Uj,Or,Du],ku),UZ=ke([BZ,Or],$j),jZ=ke([jj,Or,Du],ku),FZ=ke([jZ,Or],Gj),$Z=ke([Fj,Or,Du],ku),GZ=ke([$Z,Or],zj),zZ=ke([UZ,GZ,FZ],hg),HZ=ke([Rr,gF,mF,kZ,NZ,zZ,Vt,Or],Hj),Vf=ke([Rr,Vt,Bu,t_,ym,Or,HZ],Kj),KZ=ke([Vf,Rr,e_],Vj),qZ=ke([Rr,Vf,KZ,Or],Wj),yF=r=>{var e=Or(r),t=Du(r),n=!1;return Hf(r,e,t,n)},vF=ke([Rr,yF],vm),bF=ke([Rr,e_,qZ,vF],WA),VZ=ke([Vt,t_,Rr,Or],Jj),WZ=ke([Vt,t_,Rr,Or],eF),YZ=(r,e,t,n,i,s,a,o)=>{if(e){var{type:u}=e,c=ao(r,o);if(n){var h=t==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,d=u==="category"&&n.bandwidth?n.bandwidth()/h:0;return d=o==="angleAxis"&&i!=null&&i?.length>=2?bi(i[0]-i[1])*2*d:d,c&&a?a.map((g,m)=>({coordinate:n(g)+d,value:g,index:m,offset:d})):n.domain().map((g,m)=>({coordinate:n(g)+d,value:s?s[g]:g,index:m,offset:d}))}}},da=ke([Vt,Rr,e_,bF,yF,VZ,WZ,Or],YZ),r_=ke([iF,sF,sZ],(r,e,t)=>aF(t.shared,r,e)),SF=r=>r.tooltip.settings.trigger,n_=r=>r.tooltip.settings.defaultIndex,Wf=ke([Nu,r_,SF,n_],fF),df=ke([Wf,Bu,Gf,Vf],JA),xF=ke([da,df],oF),XZ=ke([Wf],r=>{if(r)return r.dataKey});ke([Wf],r=>{if(r)return r.graphicalItemId});var EF=ke([Nu,r_,SF,n_],dF),QZ=ke([la,ua,Vt,Xr,da,n_,EF,Kf],hF),ZZ=ke([Wf,QZ],(r,e)=>r!=null&&r.coordinate?r.coordinate:e),JZ=ke([Wf],r=>r.active),eJ=ke([EF,df,uo,Gf,xF,Kf,r_],pF),tJ=ke([eJ],r=>{if(r!=null){var e=r.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function sD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function aD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(t),!0).forEach(function(n){rJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function rJ(r,e,t){return(e=nJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nJ(r){var e=iJ(r,"string");return typeof e=="symbol"?e:e+""}function iJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var sJ=()=>it(Rr),aJ=()=>{var r=sJ(),e=it(da),t=it(bF);return Kp(!r||!t?void 0:aD(aD({},r),{},{scale:t}),e)};function oD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Kl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(t),!0).forEach(function(n){oJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oJ(r,e,t){return(e=lJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lJ(r){var e=uJ(r,"string");return typeof e=="symbol"?e:e+""}function uJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var cJ=(r,e,t,n)=>{var i=e.find(s=>s&&s.index===t);if(i){if(r==="horizontal")return{x:i.coordinate,y:n.chartY};if(r==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},fJ=(r,e,t,n)=>{var i=e.find(c=>c&&c.index===t);if(i){if(r==="centric"){var s=i.coordinate,{radius:a}=n;return Kl(Kl(Kl({},n),Yr(n.cx,n.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:u}=n;return Kl(Kl(Kl({},n),Yr(n.cx,n.cy,o,u)),{},{angle:u,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function hJ(r,e){var{chartX:t,chartY:n}=r;return t>=e.left&&t<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var TF=(r,e,t,n,i)=>{var s,a=-1,o=(s=e?.length)!==null&&s!==void 0?s:0;if(o<=1||r==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<o;u++){var c=u>0?t[u-1].coordinate:t[o-1].coordinate,h=t[u].coordinate,d=u>=o-1?t[0].coordinate:t[u+1].coordinate,g=void 0;if(bi(h-c)!==bi(d-h)){var m=[];if(bi(d-h)===bi(i[1]-i[0])){g=d;var y=h+i[1]-i[0];m[0]=Math.min(y,(y+c)/2),m[1]=Math.max(y,(y+c)/2)}else{g=c;var S=d+i[1]-i[0];m[0]=Math.min(h,(S+h)/2),m[1]=Math.max(h,(S+h)/2)}var b=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(r>b[0]&&r<=b[1]||r>=m[0]&&r<=m[1]){({index:a}=t[u]);break}}else{var E=Math.min(c,d),x=Math.max(c,d);if(r>(E+h)/2&&r<=(x+h)/2){({index:a}=t[u]);break}}}else if(e){for(var T=0;T<o;T++)if(T===0&&r<=(e[T].coordinate+e[T+1].coordinate)/2||T>0&&T<o-1&&r>(e[T].coordinate+e[T-1].coordinate)/2&&r<=(e[T].coordinate+e[T+1].coordinate)/2||T===o-1&&r>(e[T].coordinate+e[T-1].coordinate)/2){({index:a}=e[T]);break}}return a},dJ=()=>it(NA),i_=(r,e)=>e,AF=(r,e,t)=>t,s_=(r,e,t,n)=>n,pJ=ke(da,r=>qg(r,e=>e.coordinate)),a_=ke([Nu,i_,AF,s_],fF),o_=ke([a_,Bu,Gf,Vf],JA),gJ=(r,e,t)=>{if(e!=null){var n=Nu(r);return e==="axis"?t==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:t==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},_F=ke([Nu,i_,AF,s_],dF),dg=ke([la,ua,Vt,Xr,da,s_,_F,Kf],hF),mJ=ke([a_,dg],(r,e)=>{var t;return(t=r.coordinate)!==null&&t!==void 0?t:e}),wF=ke([da,o_],oF),yJ=ke([_F,o_,uo,Gf,wF,Kf,i_],pF),vJ=ke([a_,o_],(r,e)=>({isActive:r.active&&e!=null,activeIndex:e})),bJ=(r,e,t,n,i,s,a)=>{if(!(!r||!t||!n||!i)&&hJ(r,a)){var o=P9(r,e),u=TF(o,s,i,t,n),c=cJ(e,i,u,r);return{activeIndex:String(u),activeCoordinate:c}}},SJ=(r,e,t,n,i,s,a)=>{if(!(!r||!n||!i||!s||!t)){var o=t7(r,t);if(o){var u=D9(o,e),c=TF(u,a,s,n,i),h=fJ(e,s,c,o);return{activeIndex:String(c),activeCoordinate:h}}}},xJ=(r,e,t,n,i,s,a,o)=>{if(!(!r||!e||!n||!i||!s))return e==="horizontal"||e==="vertical"?bJ(r,e,n,i,s,a,o):SJ(r,e,t,n,i,s,a)},EJ=ke(r=>r.zIndex.zIndexMap,(r,e)=>e,(r,e,t)=>t,(r,e,t)=>{if(e!=null){var n=r[e];if(n!=null)return t?n.panoramaElementId:n.elementId}}),TJ=ke(r=>r.zIndex.zIndexMap,r=>{var e=Object.keys(r).map(n=>parseInt(n,10)).concat(Object.values(hn)),t=Array.from(new Set(e));return t.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:nQ}});function lD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function uD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(t),!0).forEach(function(n){AJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function AJ(r,e,t){return(e=_J(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _J(r){var e=wJ(r,"string");return typeof e=="symbol"?e:e+""}function wJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var IJ={},OJ={zIndexMap:Object.values(hn).reduce((r,e)=>uD(uD({},r),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),IJ)},RJ=new Set(Object.values(hn));function LJ(r){return RJ.has(r)}var IF=Nn({name:"zIndex",initialState:OJ,reducers:{registerZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]?r.zIndexMap[t].consumers+=1:r.zIndexMap[t]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Xt()},unregisterZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(r.zIndexMap[t].consumers-=1,r.zIndexMap[t].consumers<=0&&!LJ(t)&&delete r.zIndexMap[t])},prepare:Xt()},registerZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t,elementId:n,isPanorama:i}=e.payload;r.zIndexMap[t]?i?r.zIndexMap[t].panoramaElementId=n:r.zIndexMap[t].elementId=n:r.zIndexMap[t]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Xt()},unregisterZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(e.payload.isPanorama?r.zIndexMap[t].panoramaElementId=void 0:r.zIndexMap[t].elementId=void 0)},prepare:Xt()}}}),{registerZIndexPortal:CJ,unregisterZIndexPortal:PJ,registerZIndexPortalId:DJ,unregisterZIndexPortalId:kJ}=IF.actions,MJ=IF.reducer;function pa(r){var{zIndex:e,children:t}=r,n=dV(),i=n&&e!==void 0&&e!==0,s=Bn(),a=vr();P.useLayoutEffect(()=>i?(a(CJ({zIndex:e})),()=>{a(PJ({zIndex:e}))}):Rf,[a,e,i]);var o=it(c=>EJ(c,e,s));if(!i)return t;if(!o)return null;var u=document.getElementById(o);return u?ET.createPortal(t,u):null}function zE(){return zE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zE.apply(null,arguments)}function cD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ad(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(t),!0).forEach(function(n){NJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function NJ(r,e,t){return(e=BJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function BJ(r){var e=UJ(r,"string");return typeof e=="symbol"?e:e+""}function UJ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jJ(r){var{cursor:e,cursorComp:t,cursorProps:n}=r;return P.isValidElement(e)?P.cloneElement(e,n):P.createElement(t,n)}function FJ(r){var e,{coordinate:t,payload:n,index:i,offset:s,tooltipAxisBandSize:a,layout:o,cursor:u,tooltipEventType:c,chartName:h}=r,d=t,g=n,m=i;if(!u||!d||h!=="ScatterChart"&&c!=="axis")return null;var y,S,b;if(h==="ScatterChart")y=d,S=gW,b=hn.cursorLine;else if(h==="BarChart")y=mW(o,d,s,a),S=dU,b=hn.cursorRectangle;else if(o==="radial"&&X2(d)){var{cx:E,cy:x,radius:T,startAngle:w,endAngle:_}=pU(d);y={cx:E,cy:x,startAngle:w,endAngle:_,innerRadius:T,outerRadius:T},S=mU,b=hn.cursorLine}else y={points:s7(o,d,s)},S=lU,b=hn.cursorLine;var R=typeof u=="object"&&"className"in u?u.className:void 0,O=Ad(Ad(Ad(Ad({stroke:"#ccc",pointerEvents:"none"},s),y),$g(u)),{},{payload:g,payloadIndex:m,className:Bt("recharts-tooltip-cursor",R)});return P.createElement(pa,{zIndex:(e=r.zIndex)!==null&&e!==void 0?e:b},P.createElement(jJ,{cursor:u,cursorComp:S,cursorProps:O}))}function $J(r){var e=aJ(),t=ZB(),n=am(),i=dJ();return e==null||t==null||n==null||i==null?null:P.createElement(FJ,zE({},r,{offset:t,layout:n,tooltipAxisBandSize:e,chartName:i}))}var OF=P.createContext(null),GJ=()=>P.useContext(OF),pb={exports:{}},fD;function zJ(){return fD||(fD=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function s(u,c,h,d,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,d||u,g),y=t?t+c:c;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],m]:u._events[y].push(m):(u._events[y]=m,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=t?t+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,m=d.length,y=new Array(m);g<m;g++)y[g]=d[g].fn;return y},o.prototype.listenerCount=function(c){var h=t?t+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,g,m,y){var S=t?t+c:c;if(!this._events[S])return!1;var b=this._events[S],E=arguments.length,x,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,g),!0;case 5:return b.fn.call(b.context,h,d,g,m),!0;case 6:return b.fn.call(b.context,h,d,g,m,y),!0}for(T=1,x=new Array(E-1);T<E;T++)x[T-1]=arguments[T];b.fn.apply(b.context,x)}else{var w=b.length,_;for(T=0;T<w;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),E){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,h);break;case 3:b[T].fn.call(b[T].context,h,d);break;case 4:b[T].fn.call(b[T].context,h,d,g);break;default:if(!x)for(_=1,x=new Array(E-1);_<E;_++)x[_-1]=arguments[_];b[T].fn.apply(b[T].context,x)}}return!0},o.prototype.on=function(c,h,d){return s(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return s(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,g){var m=t?t+c:c;if(!this._events[m])return this;if(!h)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===h&&(!g||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var S=0,b=[],E=y.length;S<E;S++)(y[S].fn!==h||g&&!y[S].once||d&&y[S].context!==d)&&b.push(y[S]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(pb)),pb.exports}var HJ=zJ();const KJ=na(HJ);var pf=new KJ,HE="recharts.syncEvent.tooltip",hD="recharts.syncEvent.brush";function qJ(r,e){if(e){var t=Number.parseInt(e,10);if(!is(t))return r?.[t]}}var VJ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},RF=Nn({name:"options",initialState:VJ,reducers:{createEventEmitter:r=>{r.eventEmitter==null&&(r.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WJ=RF.reducer,{createEventEmitter:YJ}=RF.actions;function XJ(r){return r.tooltip.syncInteraction}var QJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},LF=Nn({name:"chartData",initialState:QJ,reducers:{setChartData(r,e){if(r.chartData=e.payload,e.payload==null){r.dataStartIndex=0,r.dataEndIndex=0;return}e.payload.length>0&&r.dataEndIndex!==e.payload.length-1&&(r.dataEndIndex=e.payload.length-1)},setComputedData(r,e){r.computedData=e.payload},setDataStartEndIndexes(r,e){var{startIndex:t,endIndex:n}=e.payload;t!=null&&(r.dataStartIndex=t),n!=null&&(r.dataEndIndex=n)}}}),{setChartData:dD,setDataStartEndIndexes:ZJ,setComputedData:Vce}=LF.actions,JJ=LF.reducer,eee=["x","y"];function pD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ql(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(t),!0).forEach(function(n){tee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tee(r,e,t){return(e=ree(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ree(r){var e=nee(r,"string");return typeof e=="symbol"?e:e+""}function nee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iee(r,e){if(r==null)return{};var t,n,i=see(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function see(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function aee(){var r=it(BA),e=it(UA),t=vr(),n=it(dj),i=it(da),s=am(),a=sm(),o=it(u=>u.rootProps.className);P.useEffect(()=>{if(r==null)return Rf;var u=(c,h,d)=>{if(e!==d&&r===c){if(n==="index"){var g;if(a&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate&&h.payload.sourceViewBox){var m=h.payload.coordinate,{x:y,y:S}=m,b=iee(m,eee),{x:E,y:x,width:T,height:w}=h.payload.sourceViewBox,_=ql(ql({},b),{},{x:a.x+(T?(y-E)/T:0)*a.width,y:a.y+(w?(S-x)/w:0)*a.height});t(ql(ql({},h),{},{payload:ql(ql({},h.payload),{},{coordinate:_})}))}else t(h);return}if(i!=null){var R;if(typeof n=="function"){var O={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},C=n(i,O);R=i[C]}else n==="value"&&(R=i.find(H=>String(H.value)===h.payload.label));var{coordinate:B}=h.payload;if(R==null||h.payload.active===!1||B==null||a==null){t($E({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:N,y:U}=B,k=Math.min(N,a.x+a.width),W=Math.min(U,a.y+a.height),q={x:s==="horizontal"?R.coordinate:k,y:s==="horizontal"?W:R.coordinate},X=$E({active:h.payload.active,coordinate:q,dataKey:h.payload.dataKey,index:String(R.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});t(X)}}};return pf.on(HE,u),()=>{pf.off(HE,u)}},[o,t,e,r,n,i,s,a])}function oee(){var r=it(BA),e=it(UA),t=vr();P.useEffect(()=>{if(r==null)return Rf;var n=(i,s,a)=>{e!==a&&r===i&&t(ZJ(s))};return pf.on(hD,n),()=>{pf.off(hD,n)}},[t,e,r])}function lee(){var r=vr();P.useEffect(()=>{r(YJ())},[r]),aee(),oee()}function uee(r,e,t,n,i,s){var a=it(m=>gJ(m,r,e)),o=it(UA),u=it(BA),c=it(dj),h=it(XJ),d=h?.active,g=sm();P.useEffect(()=>{if(!d&&u!=null&&o!=null){var m=$E({active:s,coordinate:t,dataKey:a,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:g,graphicalItemId:void 0});pf.emit(HE,u,m,o)}},[d,t,a,i,n,o,u,c,s,g])}function gD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(t),!0).forEach(function(n){cee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cee(r,e,t){return(e=fee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fee(r){var e=hee(r,"string");return typeof e=="symbol"?e:e+""}function hee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function dee(r){return r.dataKey}function pee(r,e){return P.isValidElement(r)?P.cloneElement(r,e):typeof r=="function"?P.createElement(r,e):P.createElement(WV,e)}var yD=[],gee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function mee(r){var e,t,n=sn(r,gee),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:o,content:u,filterNull:c,isAnimationActive:h,offset:d,payloadUniqBy:g,position:m,reverseDirection:y,useTranslate3d:S,wrapperStyle:b,cursor:E,shared:x,trigger:T,defaultIndex:w,portal:_,axisId:R}=n,O=vr(),C=typeof w=="number"?String(w):w;P.useEffect(()=>{O(cZ({shared:x,trigger:T,axisId:R,active:i,defaultIndex:C}))},[O,x,T,R,i,C]);var B=sm(),N=oU(),U=iZ(x),{activeIndex:k,isActive:W}=(e=it(ae=>vJ(ae,U,T,C)))!==null&&e!==void 0?e:{},q=it(ae=>yJ(ae,U,T,C)),X=it(ae=>wF(ae,U,T,C)),H=it(ae=>mJ(ae,U,T,C)),K=q,V=GJ(),J=(t=i??W)!==null&&t!==void 0?t:!1,[Q,$]=hB([K,J]),F=U==="axis"?X:void 0;uee(U,T,H,F,k,J);var Z=_??V;if(Z==null||B==null||U==null)return null;var de=K??yD;J||(de=yD),c&&de.length&&(de=oB(de.filter(ae=>ae.value!=null&&(ae.hide!==!0||n.includeHidden)),g,dee));var oe=de.length>0,xe=P.createElement(tW,{allowEscapeViewBox:s,animationDuration:a,animationEasing:o,isAnimationActive:h,active:J,coordinate:H,hasPayload:oe,offset:d,position:m,reverseDirection:y,useTranslate3d:S,viewBox:B,wrapperStyle:b,lastBoundingBox:Q,innerRef:$,hasPortalFromProps:!!_},pee(u,mD(mD({},n),{},{payload:de,label:F,active:J,activeIndex:k,coordinate:H,accessibilityLayer:N})));return P.createElement(P.Fragment,null,ET.createPortal(xe,Z),J&&P.createElement($J,{cursor:E,tooltipEventType:U,coordinate:H,payload:de,index:k}))}function yee(r,e,t){return(e=vee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vee(r){var e=bee(r,"string");return typeof e=="symbol"?e:e+""}function bee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class See{constructor(e){yee(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function vD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function xee(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(t),!0).forEach(function(n){Eee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Eee(r,e,t){return(e=Tee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Tee(r){var e=Aee(r,"string");return typeof e=="symbol"?e:e+""}function Aee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var _ee={cacheSize:2e3,enableCache:!0},CF=xee({},_ee),bD=new See(CF.cacheSize),wee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SD="recharts_measurement_span";function Iee(r,e){var t=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(r,"|").concat(t,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var xD=(r,e)=>{try{var t=document.getElementById(SD);t||(t=document.createElement("span"),t.setAttribute("id",SD),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,wee,e),t.textContent="".concat(r);var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},qc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Mf.isSsr)return{width:0,height:0};if(!CF.enableCache)return xD(e,t);var n=Iee(e,t),i=bD.get(n);if(i)return i;var s=xD(e,t);return bD.set(n,s),s},ED=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ree=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lee=Object.keys(PF),iu="NaN";function Cee(r,e){return r*PF[e]}class Ln{static parse(e){var t,[,n,i]=(t=Ree.exec(e))!==null&&t!==void 0?t:[];return new Ln(parseFloat(n),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,is(e)&&(this.unit=""),t!==""&&!Oee.test(t)&&(this.num=NaN,this.unit=""),Lee.includes(t)&&(this.num=Cee(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Ln(NaN,""):new Ln(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ln(NaN,""):new Ln(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ln(NaN,""):new Ln(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ln(NaN,""):new Ln(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return is(this.num)}}function DF(r){if(r.includes(iu))return iu;for(var e=r;e.includes("*")||e.includes("/");){var t,[,n,i,s]=(t=ED.exec(e))!==null&&t!==void 0?t:[],a=Ln.parse(n??""),o=Ln.parse(s??""),u=i==="*"?a.multiply(o):a.divide(o);if(u.isNaN())return iu;e=e.replace(ED,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,h,d,g]=(c=TD.exec(e))!==null&&c!==void 0?c:[],m=Ln.parse(h??""),y=Ln.parse(g??""),S=d==="+"?m.add(y):m.subtract(y);if(S.isNaN())return iu;e=e.replace(TD,S.toString())}return e}var AD=/\(([^()]*)\)/;function Pee(r){for(var e=r,t;(t=AD.exec(e))!=null;){var[,n]=t;e=e.replace(AD,DF(n))}return e}function Dee(r){var e=r.replace(/\s+/g,"");return e=Pee(e),e=DF(e),e}function kee(r){try{return Dee(r)}catch{return iu}}function gb(r){var e=kee(r.slice(5,-1));return e===iu?"":e}var Mee=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Nee=["dx","dy","angle","className","breakAll"];function KE(){return KE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},KE.apply(null,arguments)}function _D(r,e){if(r==null)return{};var t,n,i=Bee(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Bee(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var kF=/[ \f\n\r\t\v\u2028\u2029]+/,MF=r=>{var{children:e,breakAll:t,style:n}=r;try{var i=[];Nr(e)||(t?i=e.toString().split(""):i=e.toString().split(kF));var s=i.map(o=>({word:o,width:qc(o,n).width})),a=t?0:qc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function Uee(r){return r==="start"||r==="middle"||r==="end"||r==="inherit"}var NF=(r,e,t,n)=>r.reduce((i,s)=>{var{word:a,width:o}=s,u=i[i.length-1];if(u&&o!=null&&(e==null||n||u.width+o+t<Number(e)))u.words.push(a),u.width+=o+t;else{var c={words:[a],width:o};i.push(c)}return i},[]),BF=r=>r.reduce((e,t)=>e.width>t.width?e:t),jee="",wD=(r,e,t,n,i,s,a,o)=>{var u=r.slice(0,e),c=MF({breakAll:t,style:n,children:u+jee});if(!c)return[!1,[]];var h=NF(c.wordsWithComputedWidth,s,a,o),d=h.length>i||BF(h).width>Number(s);return[d,h]},Fee=(r,e,t,n,i)=>{var{maxLines:s,children:a,style:o,breakAll:u}=r,c=at(s),h=String(a),d=NF(e,n,t,i);if(!c||i)return d;var g=d.length>s||BF(d).width>Number(n);if(!g)return d;for(var m=0,y=h.length-1,S=0,b;m<=y&&S<=h.length-1;){var E=Math.floor((m+y)/2),x=E-1,[T,w]=wD(h,x,u,o,s,n,t,i),[_]=wD(h,E,u,o,s,n,t,i);if(!T&&!_&&(m=E+1),T&&_&&(y=E-1),!T&&_){b=w;break}S++}return b||d},ID=r=>{var e=Nr(r)?[]:r.toString().split(kF);return[{words:e,width:void 0}]},$ee=r=>{var{width:e,scaleToFit:t,children:n,style:i,breakAll:s,maxLines:a}=r;if((e||t)&&!Mf.isSsr){var o,u,c=MF({breakAll:s,children:n,style:i});if(c){var{wordsWithComputedWidth:h,spaceWidth:d}=c;o=h,u=d}else return ID(n);return Fee({breakAll:s,children:n,maxLines:a,style:i},o,u,e,!!t)}return ID(n)},UF="#808080",Gee={angle:0,breakAll:!1,capHeight:"0.71em",fill:UF,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},l_=P.forwardRef((r,e)=>{var t=sn(r,Gee),{x:n,y:i,lineHeight:s,capHeight:a,fill:o,scaleToFit:u,textAnchor:c,verticalAnchor:h}=t,d=_D(t,Mee),g=P.useMemo(()=>$ee({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:u,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,u,d.style,d.width]),{dx:m,dy:y,angle:S,className:b,breakAll:E}=d,x=_D(d,Nee);if(!ss(n)||!ss(i)||g.length===0)return null;var T=Number(n)+(at(m)?m:0),w=Number(i)+(at(y)?y:0);if(!Br(T)||!Br(w))return null;var _;switch(h){case"start":_=gb("calc(".concat(a,")"));break;case"middle":_=gb("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:_=gb("calc(".concat(g.length-1," * -").concat(s,")"));break}var R=[];if(u){var O=g[0].width,{width:C}=d;R.push("scale(".concat(at(C)&&at(O)?C/O:1,")"))}return S&&R.push("rotate(".concat(S,", ").concat(T,", ").concat(w,")")),R.length&&(x.transform=R.join(" ")),P.createElement("text",KE({},pn(x),{ref:e,x:T,y:w,className:Bt("recharts-text",b),textAnchor:c,fill:o.includes("url")?UF:o}),g.map((B,N)=>{var U=B.words.join(E?"":" ");return P.createElement("tspan",{x:T,dy:N===0?_:s,key:"".concat(U,"-").concat(N)},U)}))});l_.displayName="Text";var zee=["labelRef"];function Hee(r,e){if(r==null)return{};var t,n,i=Kee(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Kee(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function OD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(t),!0).forEach(function(n){qee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):OD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qee(r,e,t){return(e=Vee(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Vee(r){var e=Wee(r,"string");return typeof e=="symbol"?e:e+""}function Wee(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Gs(){return Gs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gs.apply(null,arguments)}var jF=P.createContext(null),Yee=r=>{var{x:e,y:t,upperWidth:n,lowerWidth:i,width:s,height:a,children:o}=r,u=P.useMemo(()=>({x:e,y:t,upperWidth:n,lowerWidth:i,width:s,height:a}),[e,t,n,i,s,a]);return P.createElement(jF.Provider,{value:u},o)},FF=()=>{var r=P.useContext(jF),e=sm();return r||QB(e)},Xee=P.createContext(null),Qee=()=>{var r=P.useContext(Xee),e=it(vj);return r||e},Zee=r=>{var{value:e,formatter:t}=r,n=Nr(r.children)?e:r.children;return typeof t=="function"?t(n):n},u_=r=>r!=null&&typeof r=="function",Jee=(r,e)=>{var t=bi(e-r),n=Math.min(Math.abs(e-r),360);return t*n},ete=(r,e,t,n,i)=>{var{offset:s,className:a}=r,{cx:o,cy:u,innerRadius:c,outerRadius:h,startAngle:d,endAngle:g,clockWise:m}=i,y=(c+h)/2,S=Jee(d,g),b=S>=0?1:-1,E,x;switch(e){case"insideStart":E=d+b*s,x=m;break;case"insideEnd":E=g-b*s,x=!m;break;case"end":E=g+b*s,x=m;break;default:throw new Error("Unsupported position ".concat(e))}x=S<=0?x:!x;var T=Yr(o,u,y,E),w=Yr(o,u,y,E+(x?1:-1)*359),_="M".concat(T.x,",").concat(T.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(x?0:1,`,
    `).concat(w.x,",").concat(w.y),R=Nr(r.id)?Jc("recharts-radial-line-"):r.id;return P.createElement("text",Gs({},n,{dominantBaseline:"central",className:Bt("recharts-radial-bar-label",a)}),P.createElement("defs",null,P.createElement("path",{id:R,d:_})),P.createElement("textPath",{xlinkHref:"#".concat(R)},t))},tte=(r,e,t)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:u}=r,c=(o+u)/2;if(t==="outside"){var{x:h,y:d}=Yr(n,i,a+e,c);return{x:h,y:d,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+a)/2,{x:m,y}=Yr(n,i,g,c);return{x:m,y,textAnchor:"middle",verticalAnchor:"middle"}},qE=r=>"cx"in r&&at(r.cx),rte=(r,e)=>{var{parentViewBox:t,offset:n,position:i}=r,s;t!=null&&!qE(t)&&(s=t);var{x:a,y:o,upperWidth:u,lowerWidth:c,height:h}=e,d=a,g=a+(u-c)/2,m=(d+g)/2,y=(u+c)/2,S=d+u/2,b=h>=0?1:-1,E=b*n,x=b>0?"end":"start",T=b>0?"start":"end",w=u>=0?1:-1,_=w*n,R=w>0?"end":"start",O=w>0?"start":"end";if(i==="top"){var C={x:d+u/2,y:o-E,textAnchor:"middle",verticalAnchor:x};return cr(cr({},C),s?{height:Math.max(o-s.y,0),width:u}:{})}if(i==="bottom"){var B={x:g+c/2,y:o+h+E,textAnchor:"middle",verticalAnchor:T};return cr(cr({},B),s?{height:Math.max(s.y+s.height-(o+h),0),width:c}:{})}if(i==="left"){var N={x:m-_,y:o+h/2,textAnchor:R,verticalAnchor:"middle"};return cr(cr({},N),s?{width:Math.max(N.x-s.x,0),height:h}:{})}if(i==="right"){var U={x:m+y+_,y:o+h/2,textAnchor:O,verticalAnchor:"middle"};return cr(cr({},U),s?{width:Math.max(s.x+s.width-U.x,0),height:h}:{})}var k=s?{width:y,height:h}:{};return i==="insideLeft"?cr({x:m+_,y:o+h/2,textAnchor:O,verticalAnchor:"middle"},k):i==="insideRight"?cr({x:m+y-_,y:o+h/2,textAnchor:R,verticalAnchor:"middle"},k):i==="insideTop"?cr({x:d+u/2,y:o+E,textAnchor:"middle",verticalAnchor:T},k):i==="insideBottom"?cr({x:g+c/2,y:o+h-E,textAnchor:"middle",verticalAnchor:x},k):i==="insideTopLeft"?cr({x:d+_,y:o+E,textAnchor:O,verticalAnchor:T},k):i==="insideTopRight"?cr({x:d+u-_,y:o+E,textAnchor:R,verticalAnchor:T},k):i==="insideBottomLeft"?cr({x:g+_,y:o+h-E,textAnchor:O,verticalAnchor:x},k):i==="insideBottomRight"?cr({x:g+c-_,y:o+h-E,textAnchor:R,verticalAnchor:x},k):i&&typeof i=="object"&&(at(i.x)||Qs(i.x))&&(at(i.y)||Qs(i.y))?cr({x:a+eo(i.x,y),y:o+eo(i.y,h),textAnchor:"end",verticalAnchor:"end"},k):cr({x:S,y:o+h/2,textAnchor:"middle",verticalAnchor:"middle"},k)},nte={angle:0,offset:5,zIndex:hn.label,position:"middle",textBreakAll:!1};function qa(r){var e=sn(r,nte),{viewBox:t,position:n,value:i,children:s,content:a,className:o="",textBreakAll:u,labelRef:c}=e,h=Qee(),d=FF(),g=n==="center"?d:h??d,m,y,S;if(t==null?m=g:qE(t)?m=t:m=QB(t),!m||Nr(i)&&Nr(s)&&!P.isValidElement(a)&&typeof a!="function")return null;var b=cr(cr({},e),{},{viewBox:m});if(P.isValidElement(a)){var{labelRef:E}=b,x=Hee(b,zee);return P.cloneElement(a,x)}if(typeof a=="function"){if(y=P.createElement(a,b),P.isValidElement(y))return y}else y=Zee(e);var T=pn(e);if(qE(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return ete(e,n,y,T,m);S=tte(m,e.offset,e.position)}else S=rte(e,m);return P.createElement(pa,{zIndex:e.zIndex},P.createElement(l_,Gs({ref:c,className:Bt("recharts-label",o)},T,S,{textAnchor:Uee(T.textAnchor)?T.textAnchor:S.textAnchor,breakAll:u}),y))}qa.displayName="Label";var ite=(r,e,t)=>{if(!r)return null;var n={viewBox:e,labelRef:t};return r===!0?P.createElement(qa,Gs({key:"label-implicit"},n)):ss(r)?P.createElement(qa,Gs({key:"label-implicit",value:r},n)):P.isValidElement(r)?r.type===qa?P.cloneElement(r,cr({key:"label-implicit"},n)):P.createElement(qa,Gs({key:"label-implicit",content:r},n)):u_(r)?P.createElement(qa,Gs({key:"label-implicit",content:r},n)):r&&typeof r=="object"?P.createElement(qa,Gs({},r,{key:"label-implicit"},n)):null};function ste(r){var{label:e,labelRef:t}=r,n=FF();return ite(e,n,t)||null}var mb={},yb={},RD;function ate(){return RD||(RD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}r.last=e})(yb)),yb}var vb={},LD;function ote(){return LD||(LD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}r.toArray=e})(vb)),vb}var CD;function lte(){return CD||(CD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=ate(),t=ote(),n=VT();function i(s){if(n.isArrayLike(s))return e.last(t.toArray(s))}r.last=i})(mb)),mb}var bb,PD;function ute(){return PD||(PD=1,bb=lte().last),bb}var cte=ute();const fte=na(cte);var hte=["valueAccessor"],dte=["dataKey","clockWise","id","textBreakAll","zIndex"];function pg(){return pg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},pg.apply(null,arguments)}function DD(r,e){if(r==null)return{};var t,n,i=pte(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function pte(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var gte=r=>Array.isArray(r.value)?fte(r.value):r.value,$F=P.createContext(void 0),mte=$F.Provider,GF=P.createContext(void 0);GF.Provider;function yte(){return P.useContext($F)}function vte(){return P.useContext(GF)}function bp(r){var{valueAccessor:e=gte}=r,t=DD(r,hte),{dataKey:n,clockWise:i,id:s,textBreakAll:a,zIndex:o}=t,u=DD(t,dte),c=yte(),h=vte(),d=c||h;return!d||!d.length?null:P.createElement(pa,{zIndex:o??hn.label},P.createElement(Ja,{className:"recharts-label-list"},d.map((g,m)=>{var y,S=Nr(n)?e(g,m):nn(g&&g.payload,n),b=Nr(s)?{}:{id:"".concat(s,"-").concat(m)};return P.createElement(qa,pg({key:"label-".concat(m)},pn(g),u,b,{fill:(y=t.fill)!==null&&y!==void 0?y:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:a,viewBox:g.viewBox,index:m,zIndex:0}))})))}bp.displayName="LabelList";function bte(r){var{label:e}=r;return e?e===!0?P.createElement(bp,{key:"labelList-implicit"}):P.isValidElement(e)||u_(e)?P.createElement(bp,{key:"labelList-implicit",content:e}):typeof e=="object"?P.createElement(bp,pg({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function VE(){return VE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},VE.apply(null,arguments)}var zF=r=>{var{cx:e,cy:t,r:n,className:i}=r,s=Bt("recharts-dot",i);return at(e)&&at(t)&&at(n)?P.createElement("circle",VE({},ns(r),qT(r),{className:s,cx:e,cy:t,r:n})):null},Ste={radiusAxis:{},angleAxis:{}},HF=Nn({name:"polarAxis",initialState:Ste,reducers:{addRadiusAxis(r,e){r.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(r,e){delete r.radiusAxis[e.payload.id]},addAngleAxis(r,e){r.angleAxis[e.payload.id]=e.payload},removeAngleAxis(r,e){delete r.angleAxis[e.payload.id]}}}),{addRadiusAxis:Wce,removeRadiusAxis:Yce,addAngleAxis:Xce,removeAngleAxis:Qce}=HF.actions,xte=HF.reducer,KF=r=>r&&typeof r=="object"&&"clipDot"in r?!!r.clipDot:!0,Sb={},kD;function Ete(){return kD||(kD=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}r.isPlainObject=e})(Sb)),Sb}var xb,MD;function Tte(){return MD||(MD=1,xb=Ete().isPlainObject),xb}var Ate=Tte();const _te=na(Ate);function ND(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function BD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(t),!0).forEach(function(n){wte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ND(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wte(r,e,t){return(e=Ite(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ite(r){var e=Ote(r,"string");return typeof e=="symbol"?e:e+""}function Ote(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gg(){return gg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gg.apply(null,arguments)}var UD=(r,e,t,n,i)=>{var s=t-n,a;return a="M ".concat(r,",").concat(e),a+="L ".concat(r+t,",").concat(e),a+="L ".concat(r+t-s/2,",").concat(e+i),a+="L ".concat(r+t-s/2-n,",").concat(e+i),a+="L ".concat(r,",").concat(e," Z"),a},Rte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lte=r=>{var e=sn(r,Rte),{x:t,y:n,upperWidth:i,lowerWidth:s,height:a,className:o}=e,{animationEasing:u,animationDuration:c,animationBegin:h,isUpdateAnimationActive:d}=e,g=P.useRef(null),[m,y]=P.useState(-1),S=P.useRef(i),b=P.useRef(s),E=P.useRef(a),x=P.useRef(t),T=P.useRef(n),w=uA(r,"trapezoid-");if(P.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var q=g.current.getTotalLength();q&&y(q)}catch{}},[]),t!==+t||n!==+n||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var _=Bt("recharts-trapezoid",o);if(!d)return P.createElement("g",null,P.createElement("path",gg({},pn(e),{className:_,d:UD(t,n,i,s,a)})));var R=S.current,O=b.current,C=E.current,B=x.current,N=T.current,U="0px ".concat(m===-1?1:m,"px"),k="".concat(m,"px 0px"),W=uU(["strokeDasharray"],c,u);return P.createElement(lA,{animationId:w,key:w,canBegin:m>0,duration:c,easing:u,isActive:d,begin:h},q=>{var X=Cn(R,i,q),H=Cn(O,s,q),K=Cn(C,a,q),V=Cn(B,t,q),J=Cn(N,n,q);g.current&&(S.current=X,b.current=H,E.current=K,x.current=V,T.current=J);var Q=q>0?{transition:W,strokeDasharray:k}:{strokeDasharray:U};return P.createElement("path",gg({},pn(e),{className:_,d:UD(V,J,X,H,K),ref:g,style:BD(BD({},Q),e.style)}))})},Cte=["option","shapeType","propTransformer","activeClassName"];function Pte(r,e){if(r==null)return{};var t,n,i=Dte(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Dte(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function jD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(t),!0).forEach(function(n){kte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kte(r,e,t){return(e=Mte(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Mte(r){var e=Nte(r,"string");return typeof e=="symbol"?e:e+""}function Nte(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Bte(r,e){return mg(mg({},e),r)}function Ute(r,e){return r==="symbols"}function FD(r){var{shapeType:e,elementProps:t}=r;switch(e){case"rectangle":return P.createElement(dU,t);case"trapezoid":return P.createElement(Lte,t);case"sector":return P.createElement(mU,t);case"symbols":if(Ute(e))return P.createElement(KT,t);break;case"curve":return P.createElement(lU,t);default:return null}}function jte(r){return P.isValidElement(r)?r.props:r}function Fte(r){var{option:e,shapeType:t,propTransformer:n=Bte,activeClassName:i="recharts-active-shape"}=r,s=Pte(r,Cte),a;if(P.isValidElement(e))a=P.cloneElement(e,mg(mg({},s),jte(e)));else if(typeof e=="function")a=e(s,s.index);else if(_te(e)&&typeof e!="boolean"){var o=n(e,s);a=P.createElement(FD,{shapeType:t,elementProps:o})}else{var u=s;a=P.createElement(FD,{shapeType:t,elementProps:u})}return s.isActive?P.createElement(Ja,{className:i},a):a}function $te(r){var{tooltipEntrySettings:e}=r,t=vr(),n=Bn(),i=P.useRef(null);return P.useLayoutEffect(()=>{n||(i.current===null?t(oZ(e)):i.current!==e&&t(lZ({prev:i.current,next:e})),i.current=e)},[e,t,n]),P.useLayoutEffect(()=>()=>{i.current&&(t(uZ(i.current)),i.current=null)},[t]),null}function Gte(r){var{legendPayload:e}=r,t=vr(),n=Bn(),i=P.useRef(null);return P.useLayoutEffect(()=>{n||(i.current===null?t(IV(e)):i.current!==e&&t(OV({prev:i.current,next:e})),i.current=e)},[t,n,e]),P.useLayoutEffect(()=>()=>{i.current&&(t(RV(i.current)),i.current=null)},[t]),null}var Eb,zte=()=>{var[r]=P.useState(()=>Jc("uid-"));return r},Hte=(Eb=h6.useId)!==null&&Eb!==void 0?Eb:zte;function qF(r,e){var t=Hte();return e||(r?"".concat(r,"-").concat(t):t)}var Kte=P.createContext(void 0),qte=r=>{var{id:e,type:t,children:n}=r,i=qF("recharts-".concat(t),e);return P.createElement(Kte.Provider,{value:i},n(i))},Vte={cartesianItems:[],polarItems:[]},VF=Nn({name:"graphicalItems",initialState:Vte,reducers:{addCartesianGraphicalItem:{reducer(r,e){r.cartesianItems.push(e.payload)},prepare:Xt()},replaceCartesianGraphicalItem:{reducer(r,e){var{prev:t,next:n}=e.payload,i=ki(r).cartesianItems.indexOf(t);i>-1&&(r.cartesianItems[i]=n)},prepare:Xt()},removeCartesianGraphicalItem:{reducer(r,e){var t=ki(r).cartesianItems.indexOf(e.payload);t>-1&&r.cartesianItems.splice(t,1)},prepare:Xt()},addPolarGraphicalItem:{reducer(r,e){r.polarItems.push(e.payload)},prepare:Xt()},removePolarGraphicalItem:{reducer(r,e){var t=ki(r).polarItems.indexOf(e.payload);t>-1&&r.polarItems.splice(t,1)},prepare:Xt()}}}),{addCartesianGraphicalItem:Wte,replaceCartesianGraphicalItem:Yte,removeCartesianGraphicalItem:Xte,addPolarGraphicalItem:Zce,removePolarGraphicalItem:Jce}=VF.actions,Qte=VF.reducer,Zte=r=>{var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(Wte(r)):t.current!==r&&e(Yte({prev:t.current,next:r})),t.current=r},[e,r]),P.useLayoutEffect(()=>()=>{t.current&&(e(Xte(t.current)),t.current=null)},[e]),null},Jte=P.memo(Zte),ere=["points"];function $D(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(t),!0).forEach(function(n){tre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$D(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tre(r,e,t){return(e=rre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rre(r){var e=nre(r,"string");return typeof e=="symbol"?e:e+""}function nre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function yg(){return yg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yg.apply(null,arguments)}function ire(r,e){if(r==null)return{};var t,n,i=sre(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function sre(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function are(r){var{option:e,dotProps:t,className:n}=r;if(P.isValidElement(e))return P.cloneElement(e,t);if(typeof e=="function")return e(t);var i=Bt(n,typeof e!="boolean"?e.className:""),s=t??{},{points:a}=s,o=ire(s,ere);return P.createElement(zF,yg({},o,{className:i}))}function ore(r,e){return r==null?!1:e?!0:r.length===1}function lre(r){var{points:e,dot:t,className:n,dotClassName:i,dataKey:s,baseProps:a,needClip:o,clipPathId:u,zIndex:c=hn.scatter}=r;if(!ore(e,t))return null;var h=KF(t),d=cH(t),g=e.map((y,S)=>{var b,E,x=Tb(Tb(Tb({r:3},a),d),{},{index:S,cx:(b=y.x)!==null&&b!==void 0?b:void 0,cy:(E=y.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:y.value,payload:y.payload,points:e});return P.createElement(are,{key:"dot-".concat(S),option:t,dotProps:x,className:i})}),m={};return o&&u!=null&&(m.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),P.createElement(pa,{zIndex:c},P.createElement(Ja,yg({className:n},m),g))}function GD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(t),!0).forEach(function(n){ure(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):GD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ure(r,e,t){return(e=cre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cre(r){var e=fre(r,"string");return typeof e=="symbol"?e:e+""}function fre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var hre={xAxis:{},yAxis:{},zAxis:{}},WF=Nn({name:"cartesianAxis",initialState:hre,reducers:{addXAxis:{reducer(r,e){r.xAxis[e.payload.id]=e.payload},prepare:Xt()},replaceXAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.xAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.xAxis[t.id],r.xAxis[n.id]=n)},prepare:Xt()},removeXAxis:{reducer(r,e){delete r.xAxis[e.payload.id]},prepare:Xt()},addYAxis:{reducer(r,e){r.yAxis[e.payload.id]=e.payload},prepare:Xt()},replaceYAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.yAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.yAxis[t.id],r.yAxis[n.id]=n)},prepare:Xt()},removeYAxis:{reducer(r,e){delete r.yAxis[e.payload.id]},prepare:Xt()},addZAxis:{reducer(r,e){r.zAxis[e.payload.id]=e.payload},prepare:Xt()},replaceZAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.zAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.zAxis[t.id],r.zAxis[n.id]=n)},prepare:Xt()},removeZAxis:{reducer(r,e){delete r.zAxis[e.payload.id]},prepare:Xt()},updateYAxisWidth(r,e){var{id:t,width:n}=e.payload,i=r.yAxis[t];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var a=[...s,n].slice(-3);r.yAxis[t]=zD(zD({},r.yAxis[t]),{},{width:n,widthHistory:a})}}}}),{addXAxis:dre,replaceXAxis:pre,removeXAxis:gre,addYAxis:mre,replaceYAxis:yre,removeYAxis:vre,addZAxis:efe,replaceZAxis:tfe,removeZAxis:rfe,updateYAxisWidth:bre}=WF.actions,Sre=WF.reducer,xre=ke([Xr],r=>({top:r.top,bottom:r.bottom,left:r.left,right:r.right})),Ere=ke([xre,la,ua],(r,e,t)=>{if(!(!r||e==null||t==null))return{x:r.left,y:r.top,width:Math.max(0,e-r.left-r.right),height:Math.max(0,t-r.top-r.bottom)}}),c_=()=>it(Ere),Tre=()=>it(tJ);function HD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ab(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(t),!0).forEach(function(n){Are(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):HD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Are(r,e,t){return(e=_re(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _re(r){var e=wre(r,"string");return typeof e=="symbol"?e:e+""}function wre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ire=r=>{var{point:e,childIndex:t,mainColor:n,activeDot:i,dataKey:s,clipPath:a}=r;if(i===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=Ab(Ab(Ab({},o),$g(i)),qT(i)),c;return P.isValidElement(i)?c=P.cloneElement(i,u):typeof i=="function"?c=i(u):c=P.createElement(zF,u),P.createElement(Ja,{className:"recharts-active-dot",clipPath:a},c)};function Ore(r){var{points:e,mainColor:t,activeDot:n,itemDataKey:i,clipPath:s,zIndex:a=hn.activeDot}=r,o=it(df),u=Tre();if(e==null||u==null)return null;var c=e.find(h=>u.includes(h.payload));return Nr(c)?null:P.createElement(pa,{zIndex:a},P.createElement(Ire,{point:c,childIndex:Number(o),mainColor:t,dataKey:i,activeDot:n,clipPath:s}))}var Rre={},YF=Nn({name:"errorBars",initialState:Rre,reducers:{addErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]||(r[t]=[]),r[t].push(n)},replaceErrorBar:(r,e)=>{var{itemId:t,prev:n,next:i}=e.payload;r[t]&&(r[t]=r[t].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]&&(r[t]=r[t].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:nfe,replaceErrorBar:ife,removeErrorBar:sfe}=YF.actions,Lre=YF.reducer,Cre=["children"];function Pre(r,e){if(r==null)return{};var t,n,i=Dre(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Dre(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var kre={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Mre=P.createContext(kre);function Nre(r){var{children:e}=r,t=Pre(r,Cre);return P.createElement(Mre.Provider,{value:t},e)}function XF(r,e){var t,n,i=it(c=>fa(c,r)),s=it(c=>ha(c,e)),a=(t=i?.allowDataOverflow)!==null&&t!==void 0?t:Dr.allowDataOverflow,o=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:kr.allowDataOverflow,u=a||o;return{needClip:u,needClipX:a,needClipY:o}}function Bre(r){var{xAxisId:e,yAxisId:t,clipPathId:n}=r,i=c_(),{needClipX:s,needClipY:a,needClip:o}=XF(e,t);if(!o||!i)return null;var{x:u,y:c,width:h,height:d}=i;return P.createElement("clipPath",{id:"clipPath-".concat(n)},P.createElement("rect",{x:s?u:u-h/2,y:a?c:c-d/2,width:s?h:h*2,height:a?d:d*2}))}var _b={exports:{}},wb={};var KD;function Ure(){if(KD)return wb;KD=1;var r=Tu();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,a=r.useMemo,o=r.useDebugValue;return wb.useSyncExternalStoreWithSelector=function(u,c,h,d,g){var m=i(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function b(_){if(!E){if(E=!0,x=_,_=d(_),g!==void 0&&y.hasValue){var R=y.value;if(g(R,_))return T=R}return T=_}if(R=T,t(x,_))return R;var O=d(_);return g!==void 0&&g(R,O)?(x=_,R):(x=_,T=O)}var E=!1,x,T,w=h===void 0?null:h;return[function(){return b(c())},w===null?void 0:function(){return b(w())}]},[c,h,d,g]);var S=n(u,m[0],m[1]);return s(function(){y.hasValue=!0,y.value=S},[S]),o(S),S},wb}var qD;function jre(){return qD||(qD=1,_b.exports=Ure()),_b.exports}jre();function Fre(r){r()}function $re(){let r=null,e=null;return{clear(){r=null,e=null},notify(){Fre(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var VD={notify(){},get:()=>[]};function Gre(r,e){let t,n=VD,i=0,s=!1;function a(S){h();const b=n.subscribe(S);let E=!1;return()=>{E||(E=!0,b(),d())}}function o(){n.notify()}function u(){y.onStateChange&&y.onStateChange()}function c(){return s}function h(){i++,t||(t=r.subscribe(u),n=$re())}function d(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=VD)}function g(){s||(s=!0,h())}function m(){s&&(s=!1,d())}const y={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:u,isSubscribed:c,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>n};return y}var zre=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hre=zre(),Kre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qre=Kre(),Vre=()=>Hre||qre?P.useLayoutEffect:P.useEffect,Wre=Vre();function WD(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function Yre(r,e){if(WD(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!WD(r[t[i]],e[t[i]]))return!1;return!0}var Xre=Symbol.for("react-redux-context"),Qre=typeof globalThis<"u"?globalThis:{};function Zre(){if(!P.createContext)return{};const r=Qre[Xre]??=new Map;let e=r.get(P.createContext);return e||(e=P.createContext(null),r.set(P.createContext,e)),e}var Jre=Zre();function ene(r){const{children:e,context:t,serverState:n,store:i}=r,s=P.useMemo(()=>{const u=Gre(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),a=P.useMemo(()=>i.getState(),[i]);Wre(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const o=t||Jre;return P.createElement(o.Provider,{value:s},e)}var tne=ene,rne=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function nne(r,e){return r==null&&e==null?!0:typeof r=="number"&&typeof e=="number"?r===e||r!==r&&e!==e:r===e}function f_(r,e){var t=new Set([...Object.keys(r),...Object.keys(e)]);for(var n of t)if(rne.has(n)){if(r[n]==null&&e[n]==null)continue;if(!Yre(r[n],e[n]))return!1}else if(!nne(r[n],e[n]))return!1;return!0}var ine=r=>{var{chartData:e}=r,t=vr(),n=Bn();return P.useEffect(()=>n?()=>{}:(t(dD(e)),()=>{t(dD(void 0))}),[e,t,n]),null},YD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},QF=Nn({name:"brush",initialState:YD,reducers:{setBrushSettings(r,e){return e.payload==null?YD:e.payload}}}),{setBrushSettings:afe}=QF.actions,sne=QF.reducer;function ane(r,e,t){return(e=one(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function one(r){var e=lne(r,"string");return typeof e=="symbol"?e:e+""}function lne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class h_{static create(e){return new h_(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}ane(h_,"EPS",1e-4);function une(r){return(r%180+180)%180}var cne=function(e){var{width:t,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=une(i),a=s*Math.PI/180,o=Math.atan(n/t),u=a>o&&a<Math.PI-o?n/Math.sin(a):t/Math.cos(a);return Math.abs(u)},fne={dots:[],areas:[],lines:[]},ZF=Nn({name:"referenceElements",initialState:fne,reducers:{addDot:(r,e)=>{r.dots.push(e.payload)},removeDot:(r,e)=>{var t=ki(r).dots.findIndex(n=>n===e.payload);t!==-1&&r.dots.splice(t,1)},addArea:(r,e)=>{r.areas.push(e.payload)},removeArea:(r,e)=>{var t=ki(r).areas.findIndex(n=>n===e.payload);t!==-1&&r.areas.splice(t,1)},addLine:(r,e)=>{r.lines.push(e.payload)},removeLine:(r,e)=>{var t=ki(r).lines.findIndex(n=>n===e.payload);t!==-1&&r.lines.splice(t,1)}}}),{addDot:ofe,removeDot:lfe,addArea:ufe,removeArea:cfe,addLine:ffe,removeLine:hfe}=ZF.actions,hne=ZF.reducer,dne=P.createContext(void 0),pne=r=>{var{children:e}=r,[t]=P.useState("".concat(Jc("recharts"),"-clip")),n=c_();if(n==null)return null;var{x:i,y:s,width:a,height:o}=n;return P.createElement(dne.Provider,{value:t},P.createElement("defs",null,P.createElement("clipPath",{id:t},P.createElement("rect",{x:i,y:s,height:o,width:a}))),e)};function JF(r,e){if(e<1)return[];if(e===1)return r;for(var t=[],n=0;n<r.length;n+=e)t.push(r[n]);return t}function gne(r,e,t){var n={width:r.width+e.width,height:r.height+e.height};return cne(n,t)}function mne(r,e,t){var n=t==="width",{x:i,y:s,width:a,height:o}=r;return e===1?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function vg(r,e,t,n,i){if(r*e<r*n||r*e>r*i)return!1;var s=t();return r*(e-r*s/2-n)>=0&&r*(e+r*s/2-i)<=0}function yne(r,e){return JF(r,e+1)}function vne(r,e,t,n,i){for(var s=(n||[]).slice(),{start:a,end:o}=e,u=0,c=1,h=a,d=function(){var y=n?.[u];if(y===void 0)return{v:JF(n,c)};var S=u,b,E=()=>(b===void 0&&(b=t(y,S)),b),x=y.coordinate,T=u===0||vg(r,x,E,h,o);T||(u=0,h=a,c+=1),T&&(h=x+r*(E()/2+i),u+=c)},g;c<=s.length;)if(g=d(),g)return g.v;return[]}function XD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(t),!0).forEach(function(n){bne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):XD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bne(r,e,t){return(e=Sne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Sne(r){var e=xne(r,"string");return typeof e=="symbol"?e:e+""}function xne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ene(r,e,t,n,i){for(var s=(n||[]).slice(),a=s.length,{start:o}=e,{end:u}=e,c=function(g){var m=s[g],y,S=()=>(y===void 0&&(y=t(m,g)),y);if(g===a-1){var b=r*(m.coordinate+r*S()/2-u);s[g]=m=tn(tn({},m),{},{tickCoord:b>0?m.coordinate-b*r:m.coordinate})}else s[g]=m=tn(tn({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var E=vg(r,m.tickCoord,S,o,u);E&&(u=m.tickCoord-r*(S()/2+i),s[g]=tn(tn({},m),{},{isShow:!0}))}},h=a-1;h>=0;h--)c(h);return s}function Tne(r,e,t,n,i,s){var a=(n||[]).slice(),o=a.length,{start:u,end:c}=e;if(s){var h=n[o-1],d=t(h,o-1),g=r*(h.coordinate+r*d/2-c);if(a[o-1]=h=tn(tn({},h),{},{tickCoord:g>0?h.coordinate-g*r:h.coordinate}),h.tickCoord!=null){var m=vg(r,h.tickCoord,()=>d,u,c);m&&(c=h.tickCoord-r*(d/2+i),a[o-1]=tn(tn({},h),{},{isShow:!0}))}}for(var y=s?o-1:o,S=function(x){var T=a[x],w,_=()=>(w===void 0&&(w=t(T,x)),w);if(x===0){var R=r*(T.coordinate-r*_()/2-u);a[x]=T=tn(tn({},T),{},{tickCoord:R<0?T.coordinate-R*r:T.coordinate})}else a[x]=T=tn(tn({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var O=vg(r,T.tickCoord,_,u,c);O&&(u=T.tickCoord+r*(_()/2+i),a[x]=tn(tn({},T),{},{isShow:!0}))}},b=0;b<y;b++)S(b);return a}function d_(r,e,t){var{tick:n,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:u,tickFormatter:c,unit:h,angle:d}=r;if(!i||!i.length||!n)return[];if(at(u)||Mf.isSsr){var g;return(g=yne(i,at(u)?u:0))!==null&&g!==void 0?g:[]}var m=[],y=o==="top"||o==="bottom"?"width":"height",S=h&&y==="width"?qc(h,{fontSize:e,letterSpacing:t}):{width:0,height:0},b=(T,w)=>{var _=typeof c=="function"?c(T.value,w):T.value;return y==="width"?gne(qc(_,{fontSize:e,letterSpacing:t}),S,d):qc(_,{fontSize:e,letterSpacing:t})[y]},E=i.length>=2?bi(i[1].coordinate-i[0].coordinate):1,x=mne(s,E,y);return u==="equidistantPreserveStart"?vne(E,x,b,i,a):(u==="preserveStart"||u==="preserveStartEnd"?m=Tne(E,x,b,i,a,u==="preserveStartEnd"):m=Ene(E,x,b,i,a),m.filter(T=>T.isShow))}var Ane=r=>{var{ticks:e,label:t,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=r,a=0;if(e){Array.from(e).forEach(h=>{if(h){var d=h.getBoundingClientRect();d.width>a&&(a=d.width)}});var o=t?t.getBoundingClientRect().width:0,u=i+s,c=a+u+o+(t?n:0);return Math.round(c)}return 0},_ne=["axisLine","width","height","className","hide","ticks","axisType"];function wne(r,e){if(r==null)return{};var t,n,i=Ine(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Ine(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Qo(){return Qo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qo.apply(null,arguments)}function QD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function mr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(t),!0).forEach(function(n){One(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function One(r,e,t){return(e=Rne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Rne(r){var e=Lne(r,"string");return typeof e=="symbol"?e:e+""}function Lne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Vs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:hn.axis};function Cne(r){var{x:e,y:t,width:n,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:u}=r;if(!o)return null;var c=mr(mr(mr({},u),ns(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!a||s==="bottom"&&a);c=mr(mr({},c),{},{x1:e,y1:t+h*i,x2:e+n,y2:t+h*i})}else{var d=+(s==="left"&&!a||s==="right"&&a);c=mr(mr({},c),{},{x1:e+d*n,y1:t,x2:e+d*n,y2:t+i})}return P.createElement("line",Qo({},c,{className:Bt("recharts-cartesian-axis-line",Kg(o,"className"))}))}function Pne(r,e,t,n,i,s,a,o,u){var c,h,d,g,m,y,S=o?-1:1,b=r.tickSize||a,E=at(r.tickCoord)?r.tickCoord:r.coordinate;switch(s){case"top":c=h=r.coordinate,g=t+ +!o*i,d=g-S*b,y=d-S*u,m=E;break;case"left":d=g=r.coordinate,h=e+ +!o*n,c=h-S*b,m=c-S*u,y=E;break;case"right":d=g=r.coordinate,h=e+ +o*n,c=h+S*b,m=c+S*u,y=E;break;default:c=h=r.coordinate,g=t+ +o*i,d=g+S*b,y=d+S*u,m=E;break}return{line:{x1:c,y1:d,x2:h,y2:g},tick:{x:m,y}}}function Dne(r,e){switch(r){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function kne(r,e){switch(r){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Mne(r){var{option:e,tickProps:t,value:n}=r,i,s=Bt(t.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(e))i=P.cloneElement(e,mr(mr({},t),{},{className:s}));else if(typeof e=="function")i=e(mr(mr({},t),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Bt(a,e?.className)),i=P.createElement(l_,Qo({},t,{className:a}),n)}return i}var Nne=P.forwardRef((r,e)=>{var{ticks:t=[],tick:n,tickLine:i,stroke:s,tickFormatter:a,unit:o,padding:u,tickTextProps:c,orientation:h,mirror:d,x:g,y:m,width:y,height:S,tickSize:b,tickMargin:E,fontSize:x,letterSpacing:T,getTicksConfig:w,events:_,axisType:R}=r,O=d_(mr(mr({},w),{},{ticks:t}),x,T),C=Dne(h,d),B=kne(h,d),N=ns(w),U=$g(n),k={};typeof i=="object"&&(k=i);var W=mr(mr({},N),{},{fill:"none"},k),q=O.map(K=>mr({entry:K},Pne(K,g,m,y,S,h,b,d,E))),X=q.map(K=>{var{entry:V,line:J}=K;return P.createElement(Ja,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},i&&P.createElement("line",Qo({},W,J,{className:Bt("recharts-cartesian-axis-tick-line",Kg(i,"className"))})))}),H=q.map((K,V)=>{var{entry:J,tick:Q}=K,$=mr(mr(mr(mr({textAnchor:C,verticalAnchor:B},N),{},{stroke:"none",fill:s},U),Q),{},{index:V,payload:J,visibleTicksCount:O.length,tickFormatter:a,padding:u},c);return P.createElement(Ja,Qo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},Q2(_,J,V)),n&&P.createElement(Mne,{option:n,tickProps:$,value:"".concat(typeof a=="function"?a(J.value,V):J.value).concat(o||"")}))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},H.length>0&&P.createElement(pa,{zIndex:hn.label},P.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:e},H)),X.length>0&&P.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},X))}),Bne=P.forwardRef((r,e)=>{var{axisLine:t,width:n,height:i,className:s,hide:a,ticks:o,axisType:u}=r,c=wne(r,_ne),[h,d]=P.useState(""),[g,m]=P.useState(""),y=P.useRef(null);P.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return Ane({ticks:y.current,label:(b=r.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:r.tickSize,tickMargin:r.tickMargin})}}));var S=P.useCallback(b=>{if(b){var E=b.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=E;var x=E[0];if(x){var T=window.getComputedStyle(x),w=T.fontSize,_=T.letterSpacing;(w!==h||_!==g)&&(d(w),m(_))}}},[h,g]);return a||n!=null&&n<=0||i!=null&&i<=0?null:P.createElement(pa,{zIndex:r.zIndex},P.createElement(Ja,{className:Bt("recharts-cartesian-axis",s)},P.createElement(Cne,{x:r.x,y:r.y,width:n,height:i,orientation:r.orientation,mirror:r.mirror,axisLine:t,otherSvgProps:ns(r)}),P.createElement(Nne,{ref:S,axisType:u,events:c,fontSize:h,getTicksConfig:r,height:r.height,letterSpacing:g,mirror:r.mirror,orientation:r.orientation,padding:r.padding,stroke:r.stroke,tick:r.tick,tickFormatter:r.tickFormatter,tickLine:r.tickLine,tickMargin:r.tickMargin,tickSize:r.tickSize,tickTextProps:r.tickTextProps,ticks:o,unit:r.unit,width:r.width,x:r.x,y:r.y}),P.createElement(Yee,{x:r.x,y:r.y,width:r.width,height:r.height,lowerWidth:r.width,upperWidth:r.width},P.createElement(ste,{label:r.label,labelRef:r.labelRef}),r.children)))}),p_=P.forwardRef((r,e)=>{var t=sn(r,Vs);return P.createElement(Bne,Qo({},t,{ref:e}))});p_.displayName="CartesianAxis";var Une=["x1","y1","x2","y2","key"],jne=["offset"],Fne=["xAxisId","yAxisId"],$ne=["xAxisId","yAxisId"];function ZD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(t),!0).forEach(function(n){Gne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ZD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Gne(r,e,t){return(e=zne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zne(r){var e=Hne(r,"string");return typeof e=="symbol"?e:e+""}function Hne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Fo(){return Fo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fo.apply(null,arguments)}function bg(r,e){if(r==null)return{};var t,n,i=Kne(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Kne(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var qne=r=>{var{fill:e}=r;if(!e||e==="none")return null;var{fillOpacity:t,x:n,y:i,width:s,height:a,ry:o}=r;return P.createElement("rect",{x:n,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function e3(r){var{option:e,lineItemProps:t}=r,n;if(P.isValidElement(e))n=P.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var i,{x1:s,y1:a,x2:o,y2:u,key:c}=t,h=bg(t,Une),d=(i=ns(h))!==null&&i!==void 0?i:{},{offset:g}=d,m=bg(d,jne);n=P.createElement("line",Fo({},m,{x1:s,y1:a,x2:o,y2:u,fill:"none",key:c}))}return n}function Vne(r){var{x:e,width:t,horizontal:n=!0,horizontalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=r,o=bg(r,Fne),u=i.map((c,h)=>{var d=rn(rn({},o),{},{x1:e,y1:c,x2:e+t,y2:c,key:"line-".concat(h),index:h});return P.createElement(e3,{key:"line-".concat(h),option:n,lineItemProps:d})});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Wne(r){var{y:e,height:t,vertical:n=!0,verticalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=r,o=bg(r,$ne),u=i.map((c,h)=>{var d=rn(rn({},o),{},{x1:c,y1:e,x2:c,y2:e+t,key:"line-".concat(h),index:h});return P.createElement(e3,{option:n,lineItemProps:d,key:"line-".concat(h)})});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Yne(r){var{horizontalFill:e,fillOpacity:t,x:n,y:i,width:s,height:a,horizontalPoints:o,horizontal:u=!0}=r;if(!u||!e||!e.length||o==null)return null;var c=o.map(d=>Math.round(d+i-i)).sort((d,g)=>d-g);i!==c[0]&&c.unshift(0);var h=c.map((d,g)=>{var m=!c[g+1],y=m?i+a-d:c[g+1]-d;if(y<=0)return null;var S=g%e.length;return P.createElement("rect",{key:"react-".concat(g),y:d,x:n,height:y,width:s,stroke:"none",fill:e[S],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Xne(r){var{vertical:e=!0,verticalFill:t,fillOpacity:n,x:i,y:s,width:a,height:o,verticalPoints:u}=r;if(!e||!t||!t.length)return null;var c=u.map(d=>Math.round(d+i-i)).sort((d,g)=>d-g);i!==c[0]&&c.unshift(0);var h=c.map((d,g)=>{var m=!c[g+1],y=m?i+a-d:c[g+1]-d;if(y<=0)return null;var S=g%t.length;return P.createElement("rect",{key:"react-".concat(g),x:d,y:s,width:y,height:o,stroke:"none",fill:t[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Qne=(r,e)=>{var{xAxis:t,width:n,height:i,offset:s}=r;return zB(d_(rn(rn(rn({},Vs),t),{},{ticks:HB(t),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,e)},Zne=(r,e)=>{var{yAxis:t,width:n,height:i,offset:s}=r;return zB(d_(rn(rn(rn({},Vs),t),{},{ticks:HB(t),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,e)},Jne={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:hn.grid};function t3(r){var e=iA(),t=sA(),n=ZB(),i=rn(rn({},sn(r,Jne)),{},{x:at(r.x)?r.x:n.left,y:at(r.y)?r.y:n.top,width:at(r.width)?r.width:n.width,height:at(r.height)?r.height:n.height}),{xAxisId:s,yAxisId:a,x:o,y:u,width:c,height:h,syncWithTicks:d,horizontalValues:g,verticalValues:m}=i,y=Bn(),S=it(B=>tD(B,"xAxis",s,y)),b=it(B=>tD(B,"yAxis",a,y));if(!as(c)||!as(h)||!at(o)||!at(u))return null;var E=i.verticalCoordinatesGenerator||Qne,x=i.horizontalCoordinatesGenerator||Zne,{horizontalPoints:T,verticalPoints:w}=i;if((!T||!T.length)&&typeof x=="function"){var _=g&&g.length,R=x({yAxis:b?rn(rn({},b),{},{ticks:_?g:b.ticks}):void 0,width:e??c,height:t??h,offset:n},_?!0:d);qp(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(T=R)}if((!w||!w.length)&&typeof E=="function"){var O=m&&m.length,C=E({xAxis:S?rn(rn({},S),{},{ticks:O?m:S.ticks}):void 0,width:e??c,height:t??h,offset:n},O?!0:d);qp(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(w=C)}return P.createElement(pa,{zIndex:i.zIndex},P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(qne,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),P.createElement(Yne,Fo({},i,{horizontalPoints:T})),P.createElement(Xne,Fo({},i,{verticalPoints:w})),P.createElement(Vne,Fo({},i,{offset:n,horizontalPoints:T,xAxis:S,yAxis:b})),P.createElement(Wne,Fo({},i,{offset:n,verticalPoints:w,xAxis:S,yAxis:b}))))}t3.displayName="CartesianGrid";var r3=(r,e,t,n)=>nF(r,"xAxis",e,n),n3=(r,e,t,n)=>rF(r,"xAxis",e,n),i3=(r,e,t,n)=>nF(r,"yAxis",t,n),s3=(r,e,t,n)=>rF(r,"yAxis",t,n),eie=ke([Vt,r3,i3,n3,s3],(r,e,t,n,i)=>ao(r,"xAxis")?Kp(e,n,!1):Kp(t,i,!1)),tie=(r,e,t,n,i)=>i;function rie(r){return r.type==="line"}var nie=ke([_j,tie],(r,e)=>r.filter(rie).find(t=>t.id===e)),iie=ke([Vt,r3,i3,n3,s3,nie,eie,DA],(r,e,t,n,i,s,a,o)=>{var{chartData:u,dataStartIndex:c,dataEndIndex:h}=o;if(!(s==null||e==null||t==null||n==null||i==null||n.length===0||i.length===0||a==null||r!=="horizontal"&&r!=="vertical")){var{dataKey:d,data:g}=s,m;if(g!=null&&g.length>0?m=g:m=u?.slice(c,h+1),m!=null)return _ie({layout:r,xAxis:e,yAxis:t,xAxisTicks:n,yAxisTicks:i,dataKey:d,bandSize:a,displayedData:m})}});function sie(r){var e=$g(r),t=3,n=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),o=Number(s);return(Number.isNaN(a)||a<0)&&(a=t),(Number.isNaN(o)||o<0)&&(o=n),{r:a,strokeWidth:o}}return{r:t,strokeWidth:n}}var aie=["id"],oie=["type","layout","connectNulls","needClip","shape"],lie=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function gf(){return gf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gf.apply(null,arguments)}function JD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Wi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(t),!0).forEach(function(n){uie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function uie(r,e,t){return(e=cie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cie(r){var e=fie(r,"string");return typeof e=="symbol"?e:e+""}function fie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function g_(r,e){if(r==null)return{};var t,n,i=hie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function hie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var die=r=>{var{dataKey:e,name:t,stroke:n,legendType:i,hide:s}=r;return[{inactive:s,dataKey:e,type:i,color:n,value:KB(t,e),payload:r}]},pie=P.memo(r=>{var{dataKey:e,data:t,stroke:n,strokeWidth:i,fill:s,name:a,hide:o,unit:u,tooltipType:c}=r,h={dataDefinedOnItem:t,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:KB(a,e),hide:o,type:c,color:n,unit:u}};return P.createElement($te,{tooltipEntrySettings:h})}),a3=(r,e)=>"".concat(e,"px ").concat(r-e,"px");function gie(r,e){for(var t=r.length%2!==0?[...r,0]:r,n=[],i=0;i<e;++i)n=[...n,...t];return n}var mie=(r,e,t)=>{var n=t.reduce((d,g)=>d+g);if(!n)return a3(e,r);for(var i=Math.floor(r/n),s=r%n,a=e-r,o=[],u=0,c=0;u<t.length;c+=t[u],++u)if(c+t[u]>s){o=[...t.slice(0,u),s-c];break}var h=o.length%2===0?[0,a]:[a];return[...gie(t,i),...o,...h].map(d=>"".concat(d,"px")).join(", ")};function yie(r){var{clipPathId:e,points:t,props:n}=r,{dot:i,dataKey:s,needClip:a}=n,{id:o}=n,u=g_(n,aie),c=ns(u);return P.createElement(lre,{points:t,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:a,clipPathId:e})}function vie(r){var{showLabels:e,children:t,points:n}=r,i=P.useMemo(()=>n?.map(s=>{var a,o,u={x:(a=s.x)!==null&&a!==void 0?a:0,y:(o=s.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Wi(Wi({},u),{},{value:s.value,payload:s.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[n]);return P.createElement(mte,{value:e?i:void 0},t)}function ek(r){var{clipPathId:e,pathRef:t,points:n,strokeDasharray:i,props:s}=r,{type:a,layout:o,connectNulls:u,needClip:c,shape:h}=s,d=g_(s,oie),g=Wi(Wi({},pn(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:n,type:a,layout:o,connectNulls:u,strokeDasharray:i??s.strokeDasharray});return P.createElement(P.Fragment,null,n?.length>1&&P.createElement(Fte,gf({shapeType:"curve",option:h},g,{pathRef:t})),P.createElement(yie,{points:n,clipPathId:e,props:s}))}function bie(r){try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}function Sie(r){var{clipPathId:e,props:t,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=r,{points:a,strokeDasharray:o,isAnimationActive:u,animationBegin:c,animationDuration:h,animationEasing:d,animateNewValues:g,width:m,height:y,onAnimationEnd:S,onAnimationStart:b}=t,E=i.current,x=uA(a,"recharts-line-"),T=P.useRef(x),[w,_]=P.useState(!1),R=!w,O=P.useCallback(()=>{typeof S=="function"&&S(),_(!1)},[S]),C=P.useCallback(()=>{typeof b=="function"&&b(),_(!0)},[b]),B=bie(n.current),N=P.useRef(0);T.current!==x&&(N.current=s.current,T.current=x);var U=N.current;return P.createElement(vie,{points:a,showLabels:R},t.children,P.createElement(lA,{animationId:x,begin:c,duration:h,isActive:u,easing:d,onAnimationEnd:O,onAnimationStart:C,key:x},k=>{var W=Cn(U,B+U,k),q=Math.min(W,B),X;if(u)if(o){var H="".concat(o).split(/[,\s]+/gim).map(J=>parseFloat(J));X=mie(q,B,H)}else X=a3(B,q);else X=o==null?void 0:String(o);if(k>0&&B>0&&(i.current=a,s.current=Math.max(s.current,q)),E){var K=E.length/a.length,V=k===1?a:a.map((J,Q)=>{var $=Math.floor(Q*K);if(E[$]){var F=E[$];return Wi(Wi({},J),{},{x:Cn(F.x,J.x,k),y:Cn(F.y,J.y,k)})}return g?Wi(Wi({},J),{},{x:Cn(m*2,J.x,k),y:Cn(y/2,J.y,k)}):Wi(Wi({},J),{},{x:J.x,y:J.y})});return i.current=V,P.createElement(ek,{props:t,points:V,clipPathId:e,pathRef:n,strokeDasharray:X})}return P.createElement(ek,{props:t,points:a,clipPathId:e,pathRef:n,strokeDasharray:X})}),P.createElement(bte,{label:t.label}))}function xie(r){var{clipPathId:e,props:t}=r,n=P.useRef(null),i=P.useRef(0),s=P.useRef(null);return P.createElement(Sie,{props:t,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var Eie=(r,e)=>{var t,n;return{x:(t=r.x)!==null&&t!==void 0?t:void 0,y:(n=r.y)!==null&&n!==void 0?n:void 0,value:r.value,errorVal:nn(r.payload,e)}};class Tie extends P.Component{render(){var{hide:e,dot:t,points:n,className:i,xAxisId:s,yAxisId:a,top:o,left:u,width:c,height:h,id:d,needClip:g,zIndex:m}=this.props;if(e)return null;var y=Bt("recharts-line",i),S=d,{r:b,strokeWidth:E}=sie(t),x=KF(t),T=b*2+E,w=g?"url(#clipPath-".concat(x?"":"dots-").concat(S,")"):void 0;return P.createElement(pa,{zIndex:m},P.createElement(Ja,{className:y},g&&P.createElement("defs",null,P.createElement(Bre,{clipPathId:S,xAxisId:s,yAxisId:a}),!x&&P.createElement("clipPath",{id:"clipPath-dots-".concat(S)},P.createElement("rect",{x:u-T/2,y:o-T/2,width:c+T,height:h+T}))),P.createElement(Nre,{xAxisId:s,yAxisId:a,data:n,dataPointFormatter:Eie,errorBarOffset:0},P.createElement(xie,{props:this.props,clipPathId:S}))),P.createElement(Ore,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:w}))}}var o3={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:hn.line,type:"linear"};function Aie(r){var e=sn(r,o3),{activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:u,hide:c,isAnimationActive:h,label:d,legendType:g,xAxisId:m,yAxisId:y,id:S}=e,b=g_(e,lie),{needClip:E}=XF(m,y),x=c_(),T=am(),w=Bn(),_=it(N=>iie(N,m,y,w,S));if(T!=="horizontal"&&T!=="vertical"||_==null||x==null)return null;var{height:R,width:O,x:C,y:B}=x;return P.createElement(Tie,gf({},b,{id:S,connectNulls:o,dot:u,activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:h,hide:c,label:d,legendType:g,xAxisId:m,yAxisId:y,points:_,layout:T,height:R,width:O,left:C,top:B,needClip:E}))}function _ie(r){var{layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:u}=r;return u.map((c,h)=>{var d=nn(c,a);if(e==="horizontal"){var g=EC({axis:t,ticks:i,bandSize:o,entry:c,index:h}),m=Nr(d)?null:n.scale(d);return{x:g,y:m,value:d,payload:c}}var y=Nr(d)?null:t.scale(d),S=EC({axis:n,ticks:s,bandSize:o,entry:c,index:h});return y==null||S==null?null:{x:y,y:S,value:d,payload:c}}).filter(Boolean)}function wie(r){var e=sn(r,o3),t=Bn();return P.createElement(qte,{id:e.id,type:"line"},n=>P.createElement(P.Fragment,null,P.createElement(Gte,{legendPayload:die(e)}),P.createElement(pie,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),P.createElement(Jte,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:t}),P.createElement(Aie,gf({},e,{id:n}))))}var ko=P.memo(wie,f_);ko.displayName="Line";var Iie=["domain","range"],Oie=["domain","range"];function tk(r,e){if(r==null)return{};var t,n,i=Rie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Rie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function rk(r,e){return r===e?!0:Array.isArray(r)&&r.length===2&&Array.isArray(e)&&e.length===2?r[0]===e[0]&&r[1]===e[1]:!1}function l3(r,e){if(r===e)return!0;var{domain:t,range:n}=r,i=tk(r,Iie),{domain:s,range:a}=e,o=tk(e,Oie);return!rk(t,s)||!rk(n,a)?!1:f_(i,o)}var Lie=["dangerouslySetInnerHTML","ticks"],Cie=["id"];function WE(){return WE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},WE.apply(null,arguments)}function nk(r,e){if(r==null)return{};var t,n,i=Pie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Pie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Die(r){var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(dre(r)):t.current!==r&&e(pre({prev:t.current,next:r})),t.current=r},[r,e]),P.useLayoutEffect(()=>()=>{t.current&&(e(gre(t.current)),t.current=null)},[e]),null}var kie=r=>{var{xAxisId:e,className:t}=r,n=it(VB),i=Bn(),s="xAxis",a=it(b=>Mu(b,s,e,i)),o=it(b=>tF(b,s,e,i)),u=it(b=>HQ(b,e)),c=it(b=>XQ(b,e)),h=it(b=>xj(b,e));if(u==null||c==null||h==null)return null;var{dangerouslySetInnerHTML:d,ticks:g}=r,m=nk(r,Lie),{id:y}=h,S=nk(h,Cie);return P.createElement(p_,WE({},m,S,{scale:a,x:c.x,y:c.y,width:u.width,height:u.height,className:Bt("recharts-".concat(s," ").concat(s),t),viewBox:n,ticks:o,axisType:s}))},Mie={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:Dr.allowDecimals,allowDuplicatedCategory:Dr.allowDuplicatedCategory,angle:Dr.angle,axisLine:Vs.axisLine,height:Dr.height,hide:!1,includeHidden:Dr.includeHidden,interval:Dr.interval,minTickGap:Dr.minTickGap,mirror:Dr.mirror,orientation:Dr.orientation,padding:Dr.padding,reversed:Dr.reversed,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,tickLine:Vs.tickLine,tickSize:Vs.tickSize,type:Dr.type,xAxisId:0},Nie=r=>{var e=sn(r,Mie);return P.createElement(P.Fragment,null,P.createElement(Die,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),P.createElement(kie,e))},u3=P.memo(Nie,l3);u3.displayName="XAxis";var Bie=["dangerouslySetInnerHTML","ticks"],Uie=["id"];function YE(){return YE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},YE.apply(null,arguments)}function ik(r,e){if(r==null)return{};var t,n,i=jie(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function jie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Fie(r){var e=vr(),t=P.useRef(null);return P.useLayoutEffect(()=>{t.current===null?e(mre(r)):t.current!==r&&e(yre({prev:t.current,next:r})),t.current=r},[r,e]),P.useLayoutEffect(()=>()=>{t.current&&(e(vre(t.current)),t.current=null)},[e]),null}var $ie=r=>{var{yAxisId:e,className:t,width:n,label:i}=r,s=P.useRef(null),a=P.useRef(null),o=it(VB),u=Bn(),c=vr(),h="yAxis",d=it(_=>Mu(_,h,e,u)),g=it(_=>JQ(_,e)),m=it(_=>ZQ(_,e)),y=it(_=>tF(_,h,e,u)),S=it(_=>Ej(_,e));if(P.useLayoutEffect(()=>{if(!(n!=="auto"||!g||u_(i)||P.isValidElement(i)||S==null)){var _=s.current;if(_){var R=_.getCalculatedWidth();Math.round(g.width)!==Math.round(R)&&c(bre({id:e,width:R}))}}},[y,g,c,i,e,n,S]),g==null||m==null||S==null)return null;var{dangerouslySetInnerHTML:b,ticks:E}=r,x=ik(r,Bie),{id:T}=S,w=ik(S,Uie);return P.createElement(p_,YE({},x,w,{ref:s,labelRef:a,scale:d,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:Bt("recharts-".concat(h," ").concat(h),t),viewBox:o,ticks:y,axisType:h}))},Gie={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,angle:kr.angle,axisLine:Vs.axisLine,hide:!1,includeHidden:kr.includeHidden,interval:kr.interval,minTickGap:kr.minTickGap,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,tickLine:Vs.tickLine,tickSize:Vs.tickSize,type:kr.type,width:kr.width,yAxisId:0},zie=r=>{var e=sn(r,Gie);return P.createElement(P.Fragment,null,P.createElement(Fie,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),P.createElement($ie,e))},c3=P.memo(zie,l3);c3.displayName="YAxis";var Hie=(r,e)=>e,m_=ke([Hie,Vt,vj,Or,vF,da,pJ,Xr],xJ),y_=r=>{var e=r.currentTarget.getBoundingClientRect(),t=e.width/r.currentTarget.offsetWidth,n=e.height/r.currentTarget.offsetHeight;return{chartX:Math.round((r.clientX-e.left)/t),chartY:Math.round((r.clientY-e.top)/n)}},f3=xi("mouseClick"),h3=Pf();h3.startListening({actionCreator:f3,effect:(r,e)=>{var t=r.payload,n=m_(e.getState(),y_(t));n?.activeIndex!=null&&e.dispatch(hZ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var XE=xi("mouseMove"),d3=Pf(),_d=null;d3.startListening({actionCreator:XE,effect:(r,e)=>{var t=r.payload;_d!==null&&cancelAnimationFrame(_d);var n=y_(t);_d=requestAnimationFrame(()=>{var i=e.getState(),s=ZA(i,i.tooltip.settings.shared);if(s==="axis"){var a=m_(i,n);a?.activeIndex!=null?e.dispatch(cF({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(uF())}_d=null})}});var sk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},p3=Nn({name:"rootProps",initialState:sk,reducers:{updateOptions:(r,e)=>{var t;r.accessibilityLayer=e.payload.accessibilityLayer,r.barCategoryGap=e.payload.barCategoryGap,r.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:sk.barGap,r.barSize=e.payload.barSize,r.maxBarSize=e.payload.maxBarSize,r.stackOffset=e.payload.stackOffset,r.syncId=e.payload.syncId,r.syncMethod=e.payload.syncMethod,r.className=e.payload.className,r.baseValue=e.payload.baseValue,r.reverseStackOrder=e.payload.reverseStackOrder}}}),Kie=p3.reducer,{updateOptions:qie}=p3.actions,g3=Nn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(r,e)=>e.payload}}),{updatePolarOptions:dfe}=g3.actions,Vie=g3.reducer,m3=xi("keyDown"),y3=xi("focus"),v_=Pf();v_.startListening({actionCreator:m3,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip,s=r.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=JA(i,Bu(t),Gf(t),Vf(t)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var u=da(t);if(s==="Enter"){var c=dg(t,"axis","hover",String(i.index));e.dispatch(GE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var h=nZ(t),d=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,m=o+g*d;if(!(u==null||m>=u.length||m<0)){var y=dg(t,"axis","hover",String(m));e.dispatch(GE({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}}});v_.startListening({actionCreator:y3,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var s="0",a=dg(t,"axis","hover",String(s));e.dispatch(GE({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var mi=xi("externalEvent"),v3=Pf(),Ib=new Map;v3.startListening({actionCreator:mi,effect:(r,e)=>{var{handler:t,reactEvent:n}=r.payload;if(t!=null){n.persist();var i=n.type,s=Ib.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var o=e.getState(),u={activeCoordinate:ZZ(o),activeDataKey:XZ(o),activeIndex:df(o),activeLabel:xF(o),activeTooltipIndex:df(o),isTooltipActive:JZ(o)};t(u,n)}finally{Ib.delete(i)}});Ib.set(i,a)}}});var Wie=ke([Nu],r=>r.tooltipItemPayloads),Yie=ke([Wie,Kf,(r,e,t)=>e,(r,e,t)=>t],(r,e,t,n)=>{var i=r.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,t);return a}}}),b3=xi("touchMove"),S3=Pf();S3.startListening({actionCreator:b3,effect:(r,e)=>{var t=r.payload;if(!(t.touches==null||t.touches.length===0)){var n=e.getState(),i=ZA(n,n.tooltip.settings.shared);if(i==="axis"){var s=m_(n,y_({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));s?.activeIndex!=null&&e.dispatch(cF({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=t.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(o.clientX,o.clientY);if(!u||!u.getAttribute)return;var c=u.getAttribute(M9),h=(a=u.getAttribute(N9))!==null&&a!==void 0?a:void 0,d=Yie(e.getState(),c,h);e.dispatch(fZ({activeDataKey:h,activeIndex:c,activeCoordinate:d}))}}}});var Xie=pB({brush:sne,cartesianAxis:Sre,chartData:JJ,errorBars:Lre,graphicalItems:Qte,layout:b9,legend:LV,options:WJ,polarAxis:xte,polarOptions:Vie,referenceElements:hne,rootProps:Kie,tooltip:dZ,zIndex:MJ}),Qie=function(e){return Hq({reducer:Xie,preloadedState:e,middleware:t=>{var n;return t({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([h3.middleware,d3.middleware,v_.middleware,v3.middleware,S3.middleware])},enhancers:t=>{var n=t;return typeof t=="function"&&(n=t()),n.concat(RB({type:"raf"}))},devTools:Mf.devToolsEnabled})};function Zie(r){var{preloadedState:e,children:t,reduxStoreName:n}=r,i=Bn(),s=P.useRef(null);if(i)return t;s.current==null&&(s.current=Qie(e));var a=WT;return P.createElement(tne,{context:a,store:s.current},t)}function Jie(r){var{layout:e,margin:t}=r,n=vr(),i=Bn();return P.useEffect(()=>{i||(n(m9(e)),n(g9(t)))},[n,i,e,t]),null}var ese=P.memo(Jie,f_);function tse(r){var e=vr();return P.useEffect(()=>{e(qie(r))},[e,r]),null}function ak(r){var{zIndex:e,isPanorama:t}=r,n=t?"recharts-zindex-panorama-":"recharts-zindex-",i=qF("".concat(n).concat(e)),s=vr();return P.useLayoutEffect(()=>(s(DJ({zIndex:e,elementId:i,isPanorama:t})),()=>{s(kJ({zIndex:e,isPanorama:t}))}),[s,e,i,t]),P.createElement("g",{tabIndex:-1,id:i})}function ok(r){var{children:e,isPanorama:t}=r,n=it(TJ);if(!n||n.length===0)return e;var i=n.filter(a=>a<0),s=n.filter(a=>a>0);return P.createElement(P.Fragment,null,i.map(a=>P.createElement(ak,{key:a,zIndex:a,isPanorama:t})),e,s.map(a=>P.createElement(ak,{key:a,zIndex:a,isPanorama:t})))}var rse=["children"];function nse(r,e){if(r==null)return{};var t,n,i=ise(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function ise(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Sg(){return Sg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Sg.apply(null,arguments)}var sse={width:"100%",height:"100%",display:"block"},ase=P.forwardRef((r,e)=>{var t=iA(),n=sA(),i=oU();if(!as(t)||!as(n))return null;var{children:s,otherAttributes:a,title:o,desc:u}=r,c,h;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=i?0:void 0,typeof a.role=="string"?h=a.role:h=i?"application":void 0),P.createElement(UT,Sg({},a,{title:o,desc:u,role:h,tabIndex:c,width:t,height:n,style:sse,ref:e}),s)}),ose=r=>{var{children:e}=r,t=it(im);if(!t)return null;var{width:n,height:i,y:s,x:a}=t;return P.createElement(UT,{width:n,height:i,x:a,y:s},e)},lk=P.forwardRef((r,e)=>{var{children:t}=r,n=nse(r,rse),i=Bn();return i?P.createElement(ose,null,P.createElement(ok,{isPanorama:!0},t)):P.createElement(ase,Sg({ref:e},n),P.createElement(ok,{isPanorama:!1},t))});function lse(){var r=vr(),[e,t]=P.useState(null),n=it(k9);return P.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Br(s)&&s!==n&&r(v9(s))}},[e,r,n]),t}function uk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function use(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(t),!0).forEach(function(n){cse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cse(r,e,t){return(e=fse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fse(r){var e=hse(r,"string");return typeof e=="symbol"?e:e+""}function hse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Zo(){return Zo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zo.apply(null,arguments)}var dse=()=>(lee(),null);function xg(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=parseFloat(r);if(!Number.isNaN(e))return e}return 0}var pse=P.forwardRef((r,e)=>{var t,n,i=P.useRef(null),[s,a]=P.useState({containerWidth:xg((t=r.style)===null||t===void 0?void 0:t.width),containerHeight:xg((n=r.style)===null||n===void 0?void 0:n.height)}),o=P.useCallback((c,h)=>{a(d=>{var g=Math.round(c),m=Math.round(h);return d.containerWidth===g&&d.containerHeight===m?d:{containerWidth:g,containerHeight:m}})},[]),u=P.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:h,height:d}=c.getBoundingClientRect();o(h,d);var g=y=>{var{width:S,height:b}=y[0].contentRect;o(S,b)},m=new ResizeObserver(g);m.observe(c),i.current=m}},[e,o]);return P.useEffect(()=>()=>{var c=i.current;c?.disconnect()},[o]),P.createElement(P.Fragment,null,P.createElement(om,{width:s.containerWidth,height:s.containerHeight}),P.createElement("div",Zo({ref:u},r)))}),gse=P.forwardRef((r,e)=>{var{width:t,height:n}=r,[i,s]=P.useState({containerWidth:xg(t),containerHeight:xg(n)}),a=P.useCallback((u,c)=>{s(h=>{var d=Math.round(u),g=Math.round(c);return h.containerWidth===d&&h.containerHeight===g?h:{containerWidth:d,containerHeight:g}})},[]),o=P.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:c,height:h}=u.getBoundingClientRect();a(c,h)}},[e,a]);return P.createElement(P.Fragment,null,P.createElement(om,{width:i.containerWidth,height:i.containerHeight}),P.createElement("div",Zo({ref:o},r)))}),mse=P.forwardRef((r,e)=>{var{width:t,height:n}=r;return P.createElement(P.Fragment,null,P.createElement(om,{width:t,height:n}),P.createElement("div",Zo({ref:e},r)))}),yse=P.forwardRef((r,e)=>{var{width:t,height:n}=r;return Qs(t)||Qs(n)?P.createElement(gse,Zo({},r,{ref:e})):P.createElement(mse,Zo({},r,{ref:e}))});function vse(r){return r===!0?pse:yse}var bse=P.forwardRef((r,e)=>{var{children:t,className:n,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:u,onMouseEnter:c,onMouseLeave:h,onMouseMove:d,onMouseUp:g,onTouchEnd:m,onTouchMove:y,onTouchStart:S,style:b,width:E,responsive:x,dispatchTouchEvents:T=!0}=r,w=P.useRef(null),_=vr(),[R,O]=P.useState(null),[C,B]=P.useState(null),N=lse(),U=nA(),k=U?.width>0?U.width:E,W=U?.height>0?U.height:i,q=P.useCallback(te=>{N(te),typeof e=="function"&&e(te),O(te),B(te),te!=null&&(w.current=te)},[N,e,O,B]),X=P.useCallback(te=>{_(f3(te)),_(mi({handler:s,reactEvent:te}))},[_,s]),H=P.useCallback(te=>{_(XE(te)),_(mi({handler:c,reactEvent:te}))},[_,c]),K=P.useCallback(te=>{_(uF()),_(mi({handler:h,reactEvent:te}))},[_,h]),V=P.useCallback(te=>{_(XE(te)),_(mi({handler:d,reactEvent:te}))},[_,d]),J=P.useCallback(()=>{_(y3())},[_]),Q=P.useCallback(te=>{_(m3(te.key))},[_]),$=P.useCallback(te=>{_(mi({handler:a,reactEvent:te}))},[_,a]),F=P.useCallback(te=>{_(mi({handler:o,reactEvent:te}))},[_,o]),Z=P.useCallback(te=>{_(mi({handler:u,reactEvent:te}))},[_,u]),de=P.useCallback(te=>{_(mi({handler:g,reactEvent:te}))},[_,g]),oe=P.useCallback(te=>{_(mi({handler:S,reactEvent:te}))},[_,S]),xe=P.useCallback(te=>{T&&_(b3(te)),_(mi({handler:y,reactEvent:te}))},[_,T,y]),ae=P.useCallback(te=>{_(mi({handler:m,reactEvent:te}))},[_,m]),re=vse(x);return P.createElement(OF.Provider,{value:R},P.createElement(R2.Provider,{value:C},P.createElement(re,{width:k??b?.width,height:W??b?.height,className:Bt("recharts-wrapper",n),style:use({position:"relative",cursor:"default",width:k,height:W},b),onClick:X,onContextMenu:$,onDoubleClick:F,onFocus:J,onKeyDown:Q,onMouseDown:Z,onMouseEnter:H,onMouseLeave:K,onMouseMove:V,onMouseUp:de,onTouchEnd:ae,onTouchMove:xe,onTouchStart:oe,ref:q},P.createElement(dse,null),t)))}),Sse=["width","height","responsive","children","className","style","compact","title","desc"];function xse(r,e){if(r==null)return{};var t,n,i=Ese(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Ese(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Tse=P.forwardRef((r,e)=>{var{width:t,height:n,responsive:i,children:s,className:a,style:o,compact:u,title:c,desc:h}=r,d=xse(r,Sse),g=ns(d);return u?P.createElement(P.Fragment,null,P.createElement(om,{width:t,height:n}),P.createElement(lk,{otherAttributes:g,title:c,desc:h},s)):P.createElement(bse,{className:a,style:o,width:t,height:n,responsive:i??!1,onClick:r.onClick,onMouseLeave:r.onMouseLeave,onMouseEnter:r.onMouseEnter,onMouseMove:r.onMouseMove,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,onContextMenu:r.onContextMenu,onDoubleClick:r.onDoubleClick,onTouchStart:r.onTouchStart,onTouchMove:r.onTouchMove,onTouchEnd:r.onTouchEnd},P.createElement(lk,{otherAttributes:g,title:c,desc:h,ref:e},P.createElement(pne,null,s)))});function QE(){return QE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},QE.apply(null,arguments)}var Ase={top:5,right:5,bottom:5,left:5},_se={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Ase,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},wse=P.forwardRef(function(e,t){var n,i=sn(e.categoricalChartProps,_se),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:u,categoricalChartProps:c}=e,h={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:u,eventEmitter:void 0};return P.createElement(Zie,{preloadedState:{options:h},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:s},P.createElement(ine,{chartData:c.data}),P.createElement(ese,{layout:i.layout,margin:i.margin}),P.createElement(tse,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),P.createElement(Tse,QE({},i,{ref:t})))}),Ise=["axis"],Ose=P.forwardRef((r,e)=>P.createElement(wse,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ise,tooltipPayloadSearcher:qJ,categoricalChartProps:r,ref:e}));function Rse(){const[r,e]=P.useState("current"),[t,n]=P.useState("all"),[i,s]=P.useState(!1),[a,o]=P.useState("temperature"),[u,c]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[h,d]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[g,m]=P.useState({temperature:null,humidity:null,lastUpdate:null}),[y,S]=P.useState({}),[b,E]=P.useState([]),[x,T]=P.useState({temperature:null,humidity:null}),[w,_]=P.useState({enabled:!1,tempMin:18,tempMax:28,humMin:40,humMax:70}),[R]=P.useState({rootTemp:null,rootHumidity:null,ec:null,ph:null,tankLevel:null,co2:null,ppfd:null});P.useEffect(()=>_2(k=>{s(k)}),[]),P.useEffect(()=>{const U=Zc(),k=(W,q)=>{const X=Xi.find(H=>W===H.statusTopic);if(X){const H=q.toString();S(K=>({...K,[X.controllerId]:H==="online"}))}};return U.on("message",k),Xi.forEach(W=>{U.subscribe(W.statusTopic)}),()=>{U.off("message",k),Xi.forEach(W=>{U.unsubscribe(W.statusTopic)})}},[]),P.useEffect(()=>{const U=Zc(),k=[{name:"front",tempTopic:"tansaeng/ctlr-0001/dht11/temperature",humTopic:"tansaeng/ctlr-0001/dht11/humidity",setter:c},{name:"back",tempTopic:"tansaeng/ctlr-0002/dht22/temperature",humTopic:"tansaeng/ctlr-0002/dht22/humidity",setter:d},{name:"top",tempTopic:"tansaeng/ctlr-0003/dht22/temperature",humTopic:"tansaeng/ctlr-0003/dht22/humidity",setter:m}],W=(q,X)=>{const H=parseFloat(X.toString()),K=new Date().toISOString();k.forEach(V=>{q===V.tempTopic?V.setter(J=>({...J,temperature:H,lastUpdate:K})):q===V.humTopic&&V.setter(J=>({...J,humidity:H,lastUpdate:K}))})};return U.on("message",W),k.forEach(q=>{U.subscribe(q.tempTopic),U.subscribe(q.humTopic)}),()=>{U.off("message",W),k.forEach(q=>{U.unsubscribe(q.tempTopic),U.unsubscribe(q.humTopic)})}},[]),P.useEffect(()=>{if(u.temperature!==null||h.temperature!==null||g.temperature!==null){const U={timestamp:new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),frontTemp:u.temperature,backTemp:h.temperature,topTemp:g.temperature,frontHum:u.humidity,backHum:h.humidity,topHum:g.humidity};E(k=>{const W=[...k,U],q=r==="current"?20:r==="1h"?60:r==="1w"?168:720;return W.slice(-q)})}},[u,h,g,r]),P.useEffect(()=>{if(b.length>0){const U=b.slice(-10),k=U.reduce((q,X)=>{const H=[X.frontTemp,X.backTemp,X.topTemp].filter(K=>K!==null);return q+(H.length>0?H.reduce((K,V)=>K+V,0)/H.length:0)},0)/U.length,W=U.reduce((q,X)=>{const H=[X.frontHum,X.backHum,X.topHum].filter(K=>K!==null);return q+(H.length>0?H.reduce((K,V)=>K+V,0)/H.length:0)},0)/U.length;T({temperature:isNaN(k)?null:parseFloat(k.toFixed(1)),humidity:isNaN(W)?null:parseFloat(W.toFixed(1))})}},[b]),P.useEffect(()=>{if(!w.enabled)return;const U=[u.temperature,h.temperature,g.temperature].filter(W=>W!==null).reduce((W,q)=>W+q,0)/3,k=[u.humidity,h.humidity,g.humidity].filter(W=>W!==null).reduce((W,q)=>W+q,0)/3;U>w.tempMax?(vi("tansaeng/ctlr-0001/fan1/cmd",{power:"on"}),vi("tansaeng/ctlr-0002/fan2/cmd",{power:"on"})):U<w.tempMin&&(vi("tansaeng/ctlr-0001/fan1/cmd",{power:"off"}),vi("tansaeng/ctlr-0002/fan2/cmd",{power:"off"})),k>w.humMax?(vi("tansaeng/esp32-node-2/vent_side_left/cmd",{target:80}),vi("tansaeng/esp32-node-2/vent_side_right/cmd",{target:80})):k<w.humMin&&(vi("tansaeng/esp32-node-2/vent_side_left/cmd",{target:20}),vi("tansaeng/esp32-node-2/vent_side_right/cmd",{target:20}))},[u,h,g,w]);const O=[u.temperature,h.temperature,g.temperature].filter(U=>U!==null).reduce((U,k)=>U+k,0)/3||null,C=[u.humidity,h.humidity,g.humidity].filter(U=>U!==null).reduce((U,k)=>U+k,0)/3||null,B=Object.values(y).filter(Boolean).length,N=Xi.length;return z.jsx("div",{className:"bg-gray-50",children:z.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[z.jsx("header",{className:"bg-farm-500 p-4 sm:px-6 rounded-xl mb-6",children:z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsxs("div",{children:[z.jsx("h1",{className:"text-2xl font-bold m-0",children:"  "}),z.jsx("p",{className:"text-sm text-gray-800 mt-1 m-0",children:", , EC, pH     "})]}),z.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[z.jsx("div",{className:`w-3 h-3 rounded-full ${i&&B>0?"bg-green-300 animate-pulse":"bg-red-300"}`}),z.jsxs("span",{className:"text-sm font-medium",children:["ESP32 ",B,"/",N," "]})]})]})}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsx("h2",{className:"text-xl font-semibold m-0",children:" ESP32   "})}),z.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:z.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-3",children:Xi.map(U=>z.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border ${y[U.controllerId]?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[z.jsx("div",{className:`w-2 h-2 rounded-full ${y[U.controllerId]?"bg-green-500":"bg-red-500"}`}),z.jsx("span",{className:"text-sm font-medium",children:U.name})]},U.id))})})]}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),z.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:[z.jsx("div",{className:"flex items-center gap-4 mb-4",children:z.jsxs("label",{className:"flex items-center gap-2",children:[z.jsx("input",{type:"checkbox",checked:w.enabled,onChange:U=>_({...w,enabled:U.target.checked}),className:"w-5 h-5"}),z.jsx("span",{className:"font-medium",children:"  "})]})}),z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (C)"}),z.jsx("input",{type:"number",value:w.tempMin,onChange:U=>_({...w,tempMin:parseFloat(U.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!w.enabled})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (C)"}),z.jsx("input",{type:"number",value:w.tempMax,onChange:U=>_({...w,tempMax:parseFloat(U.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!w.enabled})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (%)"}),z.jsx("input",{type:"number",value:w.humMin,onChange:U=>_({...w,humMin:parseFloat(U.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!w.enabled})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (%)"}),z.jsx("input",{type:"number",value:w.humMax,onChange:U=>_({...w,humMax:parseFloat(U.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!w.enabled})]})]})]})]}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsx("h2",{className:"text-xl font-semibold m-0",children:" 10  "})}),z.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-6",children:[z.jsx(zi,{icon:"",title:"10  ",value:x.temperature,unit:"C",maxValue:50,color:"green"}),z.jsx(zi,{icon:"",title:"10  ",value:x.humidity,unit:"%",maxValue:100,color:"blue"})]})})]}),z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-6 mb-6",children:[z.jsx(zi,{icon:"",title:" ()",value:u.temperature,unit:"C",maxValue:50,color:"green"}),z.jsx(zi,{icon:"",title:" ()",value:h.temperature,unit:"C",maxValue:50,color:"green"}),z.jsx(zi,{icon:"",title:" ()",value:g.temperature,unit:"C",maxValue:50,color:"green"}),z.jsx(zi,{icon:"",title:" ",value:O,unit:"C",maxValue:50,color:"blue"})]}),z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-6 mb-6",children:[z.jsx(zi,{icon:"",title:" ()",value:u.humidity,unit:"%",maxValue:100,color:"blue"}),z.jsx(zi,{icon:"",title:" ()",value:h.humidity,unit:"%",maxValue:100,color:"blue"}),z.jsx(zi,{icon:"",title:" ()",value:g.humidity,unit:"%",maxValue:100,color:"blue"}),z.jsx(zi,{icon:"",title:" ",value:C,unit:"%",maxValue:100,color:"green"})]}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),z.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),z.jsxs("select",{value:r,onChange:U=>e(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[z.jsx("option",{value:"current",children:""}),z.jsx("option",{value:"1h",children:" 1"}),z.jsx("option",{value:"1w",children:" 1"}),z.jsx("option",{value:"1m",children:" 1"})]})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),z.jsxs("select",{value:a,onChange:U=>o(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[z.jsx("option",{value:"temperature",children:""}),z.jsx("option",{value:"humidity",children:""})]})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zone"}),z.jsxs("select",{value:t,onChange:U=>n(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[z.jsx("option",{value:"all",children:""}),z.jsx("option",{value:"zone_a",children:"Zone A ()"}),z.jsx("option",{value:"zone_b",children:"Zone B ()"}),z.jsx("option",{value:"zone_c",children:"Zone C ()"})]})]})]})})]}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsxs("h2",{className:"text-xl font-semibold m-0",children:[" ",a==="temperature"?"":""," "]})}),z.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:b.length===0?z.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):z.jsx(cV,{width:"100%",height:400,children:z.jsxs(Ose,{data:b,children:[z.jsx(t3,{strokeDasharray:"3 3"}),z.jsx(u3,{dataKey:"timestamp"}),z.jsx(c3,{}),z.jsx(mee,{}),z.jsx(aU,{}),a==="temperature"?z.jsxs(z.Fragment,{children:[z.jsx(ko,{type:"monotone",dataKey:"frontTemp",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),z.jsx(ko,{type:"monotone",dataKey:"backTemp",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),z.jsx(ko,{type:"monotone",dataKey:"topTemp",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]}):z.jsxs(z.Fragment,{children:[z.jsx(ko,{type:"monotone",dataKey:"frontHum",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),z.jsx(ko,{type:"monotone",dataKey:"backHum",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),z.jsx(ko,{type:"monotone",dataKey:"topHum",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})]})})})]}),z.jsxs("section",{className:"mb-6",children:[z.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:z.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),z.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:z.jsxs("dl",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-3",children:[z.jsx(Oo,{label:" ",value:R.rootTemp,unit:"C"}),z.jsx(Oo,{label:" ",value:R.rootHumidity,unit:"%"}),z.jsx(Oo,{label:"EC",value:R.ec,unit:"mS/cm"}),z.jsx(Oo,{label:"pH",value:R.ph,unit:""}),z.jsx(Oo,{label:" ",value:R.tankLevel,unit:"%"}),z.jsx(Oo,{label:"CO",value:R.co2,unit:"ppm"}),z.jsx(Oo,{label:"PPFD",value:R.ppfd,unit:"mol/m/s"})]})})]})]})})}const Ye=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},Lse=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=Cse},Cse=Number.MAX_SAFE_INTEGER||9007199254740991;let nt=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),Te=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r})({}),j=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r})({});var yt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ze={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Vl{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Pse{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Vl(e),this.fast_=new Vl(t),this.defaultTTFB_=i,this.ttfb_=new Vl(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new Vl(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Vl(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Vl(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Dse(r,e,t){return(e=Mse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Mt(){return Mt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Mt.apply(null,arguments)}function ck(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(t),!0).forEach(function(n){Dse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ck(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Mse(r){var e=kse(r,"string");return typeof e=="symbol"?e:e+""}class _i{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Va,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Va=function(){},Nse={trace:Va,debug:Va,log:Va,warn:Va,info:Va,error:Va};function ZE(){return Mt({},Nse)}function Bse(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):Va}function fk(r,e,t){return e[r]?e[r].bind(e):Bse(r,t)}const JE=ZE();function Use(r,e,t){const n=ZE();if(typeof console=="object"&&r===!0||typeof r=="object"){const i=["debug","log","info","warn","error"];i.forEach(s=>{n[s]=fk(s,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return ZE()}i.forEach(s=>{JE[s]=fk(s,r)})}else Mt(JE,n);return n}const Ct=JE;function ro(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function jse(r){return typeof self<"u"&&r===self.ManagedMediaSource}function x3(r,e){const t=Object.keys(r),n=Object.keys(e),i=t.length,s=n.length;return!i||!s||i===s&&!t.some(a=>n.indexOf(a)===-1)}function ti(r,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(r);if(e){const h=c.indexOf("\0");return h!==-1?c.substring(0,h):c}return c.replace(/\0/g,"")}const t=r.length;let n,i,s,a="",o=0;for(;o<t;){if(n=r[o++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=r[o++],a+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=r[o++],s=r[o++],a+=String.fromCharCode((n&15)<<12|(i&63)<<6|(s&63)<<0);break}}return a}function Vr(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function E3(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Fse(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ob={exports:{}},hk;function $se(){return hk||(hk=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,c,h){if(h=h||{},u=u.trim(),c=c.trim(),!c){if(!h.alwaysNormalize)return u;var d=o.parseURL(u);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var g=o.parseURL(c);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=o.normalizePath(g.path),o.buildURLFromParts(g)):c;var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var y=i.exec(m.path);m.netLoc=y[1],m.path=y[2]}m.netLoc&&!m.path&&(m.path="/");var S={scheme:m.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(S.netLoc=m.netLoc,g.path[0]!=="/"))if(!g.path)S.path=m.path,g.params||(S.params=m.params,g.query||(S.query=m.query));else{var b=m.path,E=b.substring(0,b.lastIndexOf("/")+1)+g.path;S.path=o.normalizePath(E)}return S.path===null&&(S.path=h.alwaysNormalize?o.normalizePath(g.path):g.path),o.buildURLFromParts(S)},parseURL:function(u){var c=n.exec(u);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};r.exports=o})()})(Ob)),Ob.exports}var b_=$se();class S_{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var jt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class T3{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,zse(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[jt.AUDIO]:null,[jt.VIDEO]:null,[jt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new S_),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=b_.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[jt.AUDIO]=null,e[jt.VIDEO]=null,e[jt.AUDIOVIDEO]=null}}function fr(r){return r.sn!=="initSegment"}class Rb extends T3{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Ye(e)&&Ye(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const i=this._decryptdata=t[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Ye(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Ye(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return fr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const i=t[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,s,a=!1){const{elementaryStreams:o}=this,u=o[e];if(!u){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:s,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,s)}}class Gse extends T3{constructor(e,t,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function A3(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||A3(t,e)}}function zse(r,e){const t=A3(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const dk=Math.pow(2,32)-1,Hse=[].push,_3={video:1,audio:2,id3:3,text:4};function Tr(r){return String.fromCharCode.apply(null,r)}function w3(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function ut(r,e){const t=I3(r,e);return t<0?4294967296+t:t}function pk(r,e){let t=ut(r,e);return t*=Math.pow(2,32),t+=ut(r,e+4),t}function I3(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function Kse(r){const e=r.byteLength;for(let t=0;t<e;){const n=ut(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function mt(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const s=ut(r,i),a=Tr(r.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const u=mt(r.subarray(i+8,o),e.slice(1));u.length&&Hse.apply(t,u)}i=o}return t}function qse(r){const e=[],t=r[0];let n=8;const i=ut(r,n);n+=4;let s=0,a=0;t===0?(s=ut(r,n),a=ut(r,n+4),n+=8):(s=pk(r,n),a=pk(r,n+8),n+=16),n+=2;let o=r.length+a;const u=w3(r,n);n+=2;for(let c=0;c<u;c++){let h=n;const d=ut(r,h);h+=4;const g=d&2147483647;if((d&2147483648)>>>31===1)return Ct.warn("SIDX has hierarchical references (not supported)"),null;const y=ut(r,h);h+=4,e.push({referenceSize:g,subsegmentDuration:y,info:{duration:y/i,start:o,end:o+g-1}}),o+=g,h+=4,n=h}return{earliestPresentationTime:s,timescale:i,version:t,referencesCount:u,references:e}}function O3(r){const e=[],t=mt(r,["moov","trak"]);for(let i=0;i<t.length;i++){const s=t[i],a=mt(s,["tkhd"])[0];if(a){let o=a[0];const u=ut(a,o===0?12:20),c=mt(s,["mdia","mdhd"])[0];if(c){o=c[0];const h=ut(c,o===0?12:20),d=mt(s,["mdia","hdlr"])[0];if(d){const g=Tr(d.subarray(8,12)),m={soun:jt.AUDIO,vide:jt.VIDEO}[g],y=mt(s,["mdia","minf","stbl","stsd"])[0],S=Vse(y);m?(e[u]={timescale:h,type:m,stsd:S},e[m]=Rt({timescale:h,id:u},S)):e[u]={timescale:h,type:g,stsd:S}}}}}return mt(r,["moov","mvex","trex"]).forEach(i=>{const s=ut(i,4),a=e[s];a&&(a.default={duration:ut(i,12),flags:ut(i,20)})}),e}function Vse(r){const e=r.subarray(8),t=e.subarray(86),n=Tr(e.subarray(4,8));let i=n,s;const a=n==="enca"||n==="encv";if(a){const c=mt(e,[n])[0].subarray(n==="enca"?28:78);mt(c,["sinf"]).forEach(d=>{const g=mt(d,["schm"])[0];if(g){const m=Tr(g.subarray(4,8));if(m==="cbcs"||m==="cenc"){const y=mt(d,["frma"])[0];y&&(i=Tr(y))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=mt(t,["avcC"])[0];u&&u.length>3&&(i+="."+Id(u[1])+Id(u[2])+Id(u[3]),s=wd(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const u=mt(e,[n])[0],c=mt(u.subarray(28),["esds"])[0];if(c&&c.length>7){let h=4;if(c[h++]!==3)break;h=Lb(c,h),h+=2;const d=c[h++];if(d&128&&(h+=2),d&64&&(h+=c[h++]),c[h++]!==4)break;h=Lb(c,h);const g=c[h++];if(g===64)i+="."+Id(g);else break;if(h+=12,c[h++]!==5)break;h=Lb(c,h);const m=c[h++];let y=(m&248)>>3;y===31&&(y+=1+((m&7)<<3)+((c[h]&224)>>5)),i+="."+y}break}case"hvc1":case"hev1":{const u=mt(t,["hvcC"])[0];if(u&&u.length>12){const c=u[1],h=["","A","B","C"][c>>6],d=c&31,g=ut(u,2),m=(c&32)>>5?"H":"L",y=u[12],S=u.subarray(6,12);i+="."+h+d,i+="."+Wse(g).toString(16).toUpperCase(),i+="."+m+y;let b="";for(let E=S.length;E--;){const x=S[E];(x||b)&&(b="."+x.toString(16).toUpperCase()+b)}i+=b}s=wd(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=wd(i,t)||i;break}case"vp09":{const u=mt(t,["vpcC"])[0];if(u&&u.length>6){const c=u[4],h=u[5],d=u[6]>>4&15;i+="."+Vi(c)+"."+Vi(h)+"."+Vi(d)}break}case"av01":{const u=mt(t,["av1C"])[0];if(u&&u.length>2){const c=u[1]>>>5,h=u[1]&31,d=u[2]>>>7?"H":"M",g=(u[2]&64)>>6,m=(u[2]&32)>>5,y=c===2&&g?m?12:10:g?10:8,S=(u[2]&16)>>4,b=(u[2]&8)>>3,E=(u[2]&4)>>2,x=u[2]&3;i+="."+c+"."+Vi(h)+d+"."+Vi(y)+"."+S+"."+b+E+x+"."+Vi(1)+"."+Vi(1)+"."+Vi(1)+"."+0,s=wd("dav1",t)}break}}return{codec:i,encrypted:a,supplemental:s}}function wd(r,e){const t=mt(e,["dvvC"]),n=t.length?t[0]:mt(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return r+"."+Vi(i)+"."+Vi(s)}}function Wse(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function Lb(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Id(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function Vi(r){return(r<10?"0":"")+r}function Yse(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&R3(r,(n,i)=>{const s=n.subarray(8,24);s.some(a=>a!==0)||(Ct.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Vr(s)} -> ${Vr(t)}`),n.set(t,8))})}function Xse(r){const e=[];return R3(r,t=>e.push(t.subarray(8,24))),e}function R3(r,e){mt(r,["moov","trak"]).forEach(n=>{const i=mt(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const s=i.subarray(8);let a=mt(s,["enca"]);const o=a.length>0;o||(a=mt(s,["encv"])),a.forEach(u=>{const c=o?u.subarray(28):u.subarray(78);mt(c,["sinf"]).forEach(d=>{const g=L3(d);g&&e(g,o)})})})}function L3(r){const e=mt(r,["schm"])[0];if(e){const t=Tr(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=mt(r,["schi","tenc"])[0];if(n)return n}}}function Qse(r,e,t){const n={},i=mt(r,["moof","traf"]);for(let s=0;s<i.length;s++){const a=i[s],o=mt(a,["tfhd"])[0],u=ut(o,4),c=e[u];if(!c)continue;n[u]||(n[u]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const h=n[u],d=mt(a,["tfdt"])[0];if(d){const T=d[0];let w=ut(d,4);T===1&&(w===dk?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(w*=dk+1,w+=ut(d,8))),Ye(w)&&(!Ye(h.start)||w<h.start)&&(h.start=w)}const g=c.default,m=ut(o,0)|g?.flags;let y=g?.duration||0;m&8&&(m&2?y=ut(o,12):y=ut(o,8));const S=mt(a,["trun"]);let b=h.start||0,E=0,x=y;for(let T=0;T<S.length;T++){const w=S[T],_=ut(w,4),R=h.sampleCount;h.sampleCount+=_;const O=w[3]&1,C=w[3]&4,B=w[2]&1,N=w[2]&2,U=w[2]&4,k=w[2]&8;let W=8,q=_;for(O&&(W+=4),C&&_&&(!(w[W+1]&1)&&h.keyFrameIndex===void 0&&(h.keyFrameIndex=R),W+=4,B?(x=ut(w,W),W+=4):x=y,N&&(W+=4),k&&(W+=4),b+=x,E+=x,q--);q--;)B?(x=ut(w,W),W+=4):x=y,N&&(W+=4),U&&(w[W+1]&1||h.keyFrameIndex===void 0&&(h.keyFrameIndex=h.sampleCount-(q+1),h.keyFrameStart=b),W+=4),k&&(W+=4),b+=x,E+=x;!E&&y&&(E+=y*_)}h.duration+=E}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,a=0;const o=mt(r,["sidx"]);for(let u=0;u<o.length;u++){const c=qse(o[u]);if(c!=null&&c.references){s=Math.min(s,c.earliestPresentationTime/c.timescale);const h=c.references.reduce((d,g)=>d+g.info.duration||0,0);a=Math.max(a,h+c.earliestPresentationTime/c.timescale)}}a&&Ye(a)&&Object.keys(n).forEach(u=>{n[u].duration||(n[u].duration=a*n[u].timescale-n[u].start)})}return n}function Zse(r){const e={valid:null,remainder:null},t=mt(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function Ti(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function gk(r,e){const t=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return mt(n,["moof"]).map(u=>{const c=u.byteOffset-8;mt(u,["traf"]).map(d=>{const g=mt(d,["tfdt"]).map(m=>{const y=m[0];let S=ut(m,4);return y===1&&(S*=Math.pow(2,32),S+=ut(m,8)),S/i})[0];return g!==void 0&&(r=g),mt(d,["tfhd"]).map(m=>{const y=ut(m,4),S=ut(m,0)&16777215,b=(S&1)!==0,E=(S&2)!==0,x=(S&8)!==0;let T=0;const w=(S&16)!==0;let _=0;const R=(S&32)!==0;let O=8;y===s&&(b&&(O+=8),E&&(O+=4),x&&(T=ut(m,O),O+=4),w&&(_=ut(m,O),O+=4),R&&(O+=4),e.type==="video"&&(a=wm(e.codec)),mt(d,["trun"]).map(C=>{const B=C[0],N=ut(C,0)&16777215,U=(N&1)!==0;let k=0;const W=(N&4)!==0,q=(N&256)!==0;let X=0;const H=(N&512)!==0;let K=0;const V=(N&1024)!==0,J=(N&2048)!==0;let Q=0;const $=ut(C,4);let F=8;U&&(k=ut(C,F),F+=4),W&&(F+=4);let Z=k+c;for(let de=0;de<$;de++){if(q?(X=ut(C,F),F+=4):X=T,H?(K=ut(C,F),F+=4):K=_,V&&(F+=4),J&&(B===0?Q=ut(C,F):Q=I3(C,F),F+=4),e.type===jt.VIDEO){let oe=0;for(;oe<K;){const xe=ut(n,Z);if(Z+=4,Jse(a,n[Z])){const ae=n.subarray(Z,Z+xe);x_(ae,a?2:1,r+Q/i,t)}Z+=xe,oe+=xe+4}}r+=X/i}}))})})}),t}function wm(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Jse(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function x_(r,e,t,n){const i=C3(r);let s=0;s+=e;let a=0,o=0,u=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;u=i[s++],a+=u}while(u===255);o=0;do{if(s>=i.length)break;u=i[s++],o+=u}while(u===255);const c=i.length-s;let h=s;if(o<c)s+=o;else if(o>c){Ct.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(i[h++]===181){const g=w3(i,h);if(h+=2,g===49){const m=ut(i,h);if(h+=4,m===1195456820){const y=i[h++];if(y===3){const S=i[h++],b=31&S,E=64&S,x=E?2+b*3:0,T=new Uint8Array(x);if(E){T[0]=S;for(let w=1;w<x;w++)T[w]=i[h++]}n.push({type:y,payloadType:a,pts:t,bytes:T})}}}}}else if(a===5&&o>16){const d=[];for(let y=0;y<16;y++){const S=i[h++].toString(16);d.push(S.length==1?"0"+S:S),(y===3||y===5||y===7||y===9)&&d.push("-")}const g=o-16,m=new Uint8Array(g);for(let y=0;y<g;y++)m[y]=i[h++];n.push({payloadType:a,pts:t,uuid:d.join(""),userData:ti(m),userDataBytes:m})}}}function C3(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=r[a];return s}function eae(r){const e=r[0];let t="",n="",i=0,s=0,a=0,o=0,u=0,c=0;if(e===0){for(;Tr(r.subarray(c,c+1))!=="\0";)t+=Tr(r.subarray(c,c+1)),c+=1;for(t+=Tr(r.subarray(c,c+1)),c+=1;Tr(r.subarray(c,c+1))!=="\0";)n+=Tr(r.subarray(c,c+1)),c+=1;n+=Tr(r.subarray(c,c+1)),c+=1,i=ut(r,12),s=ut(r,16),o=ut(r,20),u=ut(r,24),c=28}else if(e===1){c+=4,i=ut(r,c),c+=4;const d=ut(r,c);c+=4;const g=ut(r,c);for(c+=4,a=2**32*d+g,Lse(a)||(a=Number.MAX_SAFE_INTEGER,Ct.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=ut(r,c),c+=4,u=ut(r,c),c+=4;Tr(r.subarray(c,c+1))!=="\0";)t+=Tr(r.subarray(c,c+1)),c+=1;for(t+=Tr(r.subarray(c,c+1)),c+=1;Tr(r.subarray(c,c+1))!=="\0";)n+=Tr(r.subarray(c,c+1)),c+=1;n+=Tr(r.subarray(c,c+1)),c+=1}const h=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:u,payload:h}}function tae(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(r,4),i=0,n=8;i<t;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function rae(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),tae([112,115,115,104],new Uint8Array([n,0,0,0]),r,s,i,a,t)}function nae(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),s=iae(i);e.push(s),n+=s.size}}return e}function iae(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const s=r.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=r.buffer,o=Vr(new Uint8Array(a,t+12,16));let u=null,c=null,h=0;if(s===0)h=28;else{const g=r.getUint32(28);if(!g||n<32+g*16)return{offset:t,size:e};u=[];for(let m=0;m<g;m++)u.push(new Uint8Array(a,t+32+m*16,16));h=32+g*16}if(!h)return{offset:t,size:e};const d=r.getUint32(h);return e-32<d?{offset:t,size:e}:(c=new Uint8Array(a,t+h+4,d),{version:s,systemId:o,kids:u,data:c,offset:t,size:e})}const P3=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),xu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function E_(r,e){const t=xu[e];return!!t&&!!t[r.slice(0,4)]}function mf(r,e,t=!0){return!r.split(",").some(n=>!T_(n,e,t))}function T_(r,e,t=!0){var n;const i=ro(t);return(n=i?.isTypeSupported(yf(r,e)))!=null?n:!1}function yf(r,e){return`${e}/mp4;codecs=${r}`}function mk(r){if(r){const e=r.substring(0,4);return xu.video[e]}return 2}function Eg(r){const e=P3();return r.split(",").reduce((t,n)=>{const s=e&&wm(n)?9:xu.video[n];return s?(s*2+t)/(t?3:2):(xu.audio[n]+t)/(t?2:1)},0)}const Cb={};function sae(r,e=!0){if(Cb[r])return Cb[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let i=0;i<t.length;i++){var n;if(T_(t[i],"audio",e))return Cb[r]=t[i],t[i];if(t[i]==="mp3"&&(n=ro(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const aae=/flac|opus|mp4a\.40\.34/i;function Tg(r,e=!0){return r.replace(aae,t=>sae(t.toLowerCase(),e))}function oae(r,e){const t=[];if(r){const n=r.split(",");for(let i=0;i<n.length;i++)E_(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function Sp(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(yk(r,"audio")||yk(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function yk(r,e){return E_(r,e)&&T_(r,e)}function lae(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function uae(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function vk(r){const e=ro(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function eT(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const cae={supported:!0,powerEfficient:!0,smooth:!0},fae={supported:!1,smooth:!1,powerEfficient:!1},D3={supported:!0,configurations:[],decodingInfoResults:[cae]};function k3(r,e){return{supported:!1,configurations:e,decodingInfoResults:[fae],error:r}}function hae(r,e,t,n,i,s){const a=r.videoCodec,o=r.audioCodec?r.audioGroups:null,u=s?.audioCodec,c=s?.channels,h=c?parseInt(c):u?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((g,m)=>{if(m){const y=e.groups[m];if(!y)throw new Error(`Audio track group ${m} not found`);Object.keys(y.channels).forEach(S=>{g[S]=(g[S]||0)+y.channels[S]})}return g},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(g=>wm(g))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!d&&Ye(h)&&Object.keys(d).some(g=>parseInt(g)>h)}function M3(r,e,t,n={}){const i=r.videoCodec;if(!i&&!r.audioCodec||!t)return Promise.resolve(D3);const s=[],a=dae(r),o=a.length,u=pae(r,e,o>0),c=u.length;for(let h=o||1*c||1;h--;){const d={type:"media-source"};if(o&&(d.video=a[h%o]),c){d.audio=u[h%c];const g=d.audio.bitrate;d.video&&g&&(d.video.bitrate-=g)}s.push(d)}if(i){const h=navigator.userAgent;if(i.split(",").some(d=>wm(d))&&P3())return Promise.resolve(k3(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${h})`),s))}return Promise.all(s.map(h=>{const d=mae(h);return n[d]||(n[d]=t.decodingInfo(h))})).then(h=>({supported:!h.some(d=>!d.supported),configurations:s,decodingInfoResults:h})).catch(h=>({supported:!1,configurations:s,decodingInfoResults:[],error:h}))}function dae(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=N3(r),i=r.width||640,s=r.height||480,a=r.frameRate||30,o=r.videoRange.toLowerCase();return t?t.map(u=>{const c={contentType:yf(uae(u),"video"),width:i,height:s,bitrate:n,framerate:a};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function pae(r,e,t){var n;const i=(n=r.audioCodec)==null?void 0:n.split(","),s=N3(r);return i&&r.audioGroups?r.audioGroups.reduce((a,o)=>{var u;const c=o?(u=e.groups[o])==null?void 0:u.tracks:null;return c?c.reduce((h,d)=>{if(d.groupId===o){const g=parseFloat(d.channels||"");i.forEach(m=>{const y={contentType:yf(m,"audio"),bitrate:t?gae(m,s):s};g&&(y.channels=""+g),h.push(y)})}return h},a):a},[]):[]}function gae(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function N3(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function mae(r){let e="";const{audio:t,video:n}=r;if(n){const i=eT(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const i=eT(t.contentType);e+=`${n?"_":""}${i}_c${t.channels}`}return e}const tT=["NONE","TYPE-0","TYPE-1",null];function yae(r){return tT.indexOf(r)>-1}const Ag=["SDR","PQ","HLG"];function vae(r){return!!r&&Ag.indexOf(r)>-1}var xp={No:"",Yes:"YES",v2:"v2"};function bk(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?xp.v2:xp.Yes:xp.No}class Sk{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class vf{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return xk(this._audioGroups,e)}hasSubtitleGroup(e){return xk(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function xk(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function bae(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function Sae(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||Ag.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&bae(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const xae=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},$t=(r,e)=>JSON.stringify(r,xae(e));function Eae(r,e,t,n,i){const s=Object.keys(r),a=n?.channels,o=n?.audioCodec,u=i?.videoCodec,c=a&&parseInt(a)===2;let h=!1,d=!1,g=1/0,m=1/0,y=1/0,S=1/0,b=0,E=[];const{preferHDR:x,allowedVideoRanges:T}=Sae(e,i);for(let C=s.length;C--;){const B=r[s[C]];h||(h=B.channels[2]>0),g=Math.min(g,B.minHeight),m=Math.min(m,B.minFramerate),y=Math.min(y,B.minBitrate),T.filter(U=>B.videoRanges[U]>0).length>0&&(d=!0)}g=Ye(g)?g:0,m=Ye(m)?m:0;const w=Math.max(1080,g),_=Math.max(30,m);y=Ye(y)?y:t,t=Math.max(y,t),d||(e=void 0);const R=s.length>1;return{codecSet:s.reduce((C,B)=>{const N=r[B];if(B===C)return C;if(E=d?T.filter(U=>N.videoRanges[U]>0):[],R){if(N.minBitrate>t)return Hi(B,`min bitrate of ${N.minBitrate} > current estimate of ${t}`),C;if(!N.hasDefaultAudio)return Hi(B,"no renditions with default or auto-select sound found"),C;if(o&&B.indexOf(o.substring(0,4))%5!==0)return Hi(B,`audio codec preference "${o}" not found`),C;if(a&&!c){if(!N.channels[a])return Hi(B,`no renditions with ${a} channel sound found (channels options: ${Object.keys(N.channels)})`),C}else if((!o||c)&&h&&N.channels[2]===0)return Hi(B,"no renditions with stereo sound found"),C;if(N.minHeight>w)return Hi(B,`min resolution of ${N.minHeight} > maximum of ${w}`),C;if(N.minFramerate>_)return Hi(B,`min framerate of ${N.minFramerate} > maximum of ${_}`),C;if(!E.some(U=>N.videoRanges[U]>0))return Hi(B,`no variants with VIDEO-RANGE of ${$t(E)} found`),C;if(u&&B.indexOf(u.substring(0,4))%5!==0)return Hi(B,`video codec preference "${u}" not found`),C;if(N.maxScore<b)return Hi(B,`max score of ${N.maxScore} < selected max of ${b}`),C}return C&&(Eg(B)>=Eg(C)||N.fragmentError>r[C].fragmentError)?C:(S=N.minIndex,b=N.maxScore,B)},void 0),videoRanges:E,preferHDR:x,minFramerate:m,minBitrate:y,minIndex:S}}function Hi(r,e){Ct.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function B3(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Tae(r,e,t,n){return r.slice(t,n+1).reduce((i,s,a)=>{if(!s.codecSet)return i;const o=s.audioGroups;let u=i[s.codecSet];u||(i[s.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,s.bitrate);const c=Math.min(s.height,s.width);return u.minHeight=Math.min(u.minHeight,c),u.minFramerate=Math.min(u.minFramerate,s.frameRate),u.minIndex=Math.min(u.minIndex,a),u.maxScore=Math.max(u.maxScore,s.score),u.fragmentError+=s.fragmentError,u.videoRanges[s.videoRange]=(u.videoRanges[s.videoRange]||0)+1,o&&o.forEach(h=>{if(!h)return;const d=e.groups[h];d&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(g=>{u.channels[g]=(u.channels[g]||0)+d.channels[g]}))}),i},{})}function Ek(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:s}=r;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:s}}function es(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Vo(r,i,t))return n}return-1}function Vo(r,e,t){const{groupId:n,name:i,lang:s,assocLang:a,default:o}=r,u=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||Aae(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(u===void 0||e.forced===u)&&(!("characteristics"in r)||_ae(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function Aae(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function _ae(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Mo(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function wae(r,e,t,n,i){const s=e[n],o=e.reduce((g,m,y)=>{const S=m.uri;return(g[S]||(g[S]=[])).push(y),g},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const u=s.videoRange,c=s.frameRate,h=s.codecSet.substring(0,4),d=Tk(e,n,g=>{if(g.videoRange!==u||g.frameRate!==c||g.codecSet.substring(0,4)!==h)return!1;const m=g.audioGroups,y=t.filter(S=>!m||m.indexOf(S.groupId)!==-1);return es(r,y,i)>-1});return d>-1?d:Tk(e,n,g=>{const m=g.audioGroups,y=t.filter(S=>!m||m.indexOf(S.groupId)!==-1);return es(r,y,i)>-1})}function Tk(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function _g(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class Iae extends _i{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:u}=a;if(!i||!u)return;const c=performance.now(),h=s?s.stats:i.stats,d=s?s.duration:i.duration,g=c-h.loading.start,m=a.minAutoLevel,y=i.level,S=this._nextAutoLevel;if(h.aborted||h.loaded&&h.loaded===h.total||y<=m){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const b=S>-1&&S!==y,E=!!t||b;if(!E&&(u.paused||!u.playbackRate||!u.readyState))return;const x=a.mainForwardBufferInfo;if(!E&&x===null)return;const T=this.bwEstimator.getEstimateTTFB(),w=Math.abs(u.playbackRate);if(g<=Math.max(T,1e3*(d/(w*2))))return;const _=x?x.len/w:0,R=h.loading.first?h.loading.first-h.loading.start:-1,O=h.loaded&&R>-1,C=this.getBwEstimate(),B=a.levels,N=B[y],U=Math.max(h.loaded,Math.round(d*(i.bitrate||N.averageBitrate)/8));let k=O?g-R:g;k<1&&O&&(k=Math.min(g,h.loaded*8/C));const W=O?h.loaded*1e3/k:0,q=T/1e3,X=W?(U-h.loaded)/W:U*8/C+q;if(X<=_)return;const H=W?W*8:C,K=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,V=this.hls.config.abrBandWidthUpFactor;let J=Number.POSITIVE_INFINITY,Q;for(Q=y-1;Q>m;Q--){const de=B[Q].maxBitrate,oe=!B[Q].details||K;if(J=this.getTimeToLoadFrag(q,H,d*de,oe),J<Math.min(_,d+q))break}if(J>=X||J>d*10)return;O?this.bwEstimator.sample(g-Math.min(T,R),h.loaded):this.bwEstimator.sampleTTFB(g);const $=B[Q].maxBitrate;this.getBwEstimate()*V>$&&this.resetEstimator($);const F=this.findBestLevel($,m,Q,0,_,1,1);F>-1&&(Q=F),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${_.toFixed(3)} s
      Estimated load time for current fragment: ${X.toFixed(3)} s
      Estimated load time for down switch fragment: ${J.toFixed(3)} s
      TTFB estimate: ${R|0} ms
      Current BW estimate: ${Ye(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Q} @ ${$|0} bps`),a.nextLoadLevel=a.nextAutoLevel=Q,this.clearTimer();const Z=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Q&&Q>0){const de=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Q>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${de.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Q>m){let oe=this.findBestLevel(this.hls.levels[m].bitrate,m,Q,0,de,1,1);oe===-1&&(oe=m),this.hls.nextLoadLevel=this.hls.nextAutoLevel=oe,this.resetEstimator(this.hls.levels[oe].bitrate)}}};b||X>J*2?Z():this.timer=self.setInterval(Z,J*1e3),a.trigger(j.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:h})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Pse(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(j.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Te.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),o=s?s.stats:n.stats,u=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,n,i){const s=e+n/t,a=i?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,s=i.end-i.first;Ye(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Ze.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,u=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:u},a.realBitrate=Math.round(8*o/u)}if(t.bitrateTest){const s={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(j.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Ze.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,t,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:s,minAutoLevel:a}=n,o=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),c=this.getStarvationDelay();let h=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){const b=this.findBestLevel(u,a,i,c,0,h,d);if(b>=0)return this.rebufferNotice=-1,b}let g=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const b=this.bitrateTestDelay;b&&(g=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-b,this.info(`bitrate test took ${Math.round(1e3*b)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=d=1)}const m=this.findBestLevel(u,a,i,c,g,h,d);if(this.rebufferNotice!==m&&(this.rebufferNotice=m,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`)),m>-1)return m;const y=n.levels[a],S=n.loadLevelObj;return S&&y?.bitrate<S.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,s,a,o){var u;const c=i+s,h=this.lastLoadedFragLevel,d=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:m}=this,{levels:y,allAudioTracks:S,loadLevel:b,config:E}=this.hls;if(y.length===1)return 0;const x=y[d],T=!!((u=this.hls.latestLevelDetails)!=null&&u.live),w=b===-1||h===-1;let _,R="SDR",O=x?.frameRate||0;const{audioPreference:C,videoPreference:B}=E,N=this.audioTracksByGroup||(this.audioTracksByGroup=B3(S));let U=-1;if(w){if(this.firstSelection!==-1)return this.firstSelection;const H=this.codecTiers||(this.codecTiers=Tae(y,N,t,n)),K=Eae(H,R,e,C,B),{codecSet:V,videoRanges:J,minFramerate:Q,minBitrate:$,minIndex:F,preferHDR:Z}=K;U=F,_=V,R=Z?J[J.length-1]:J[0],O=Q,e=Math.max(e,$),this.log(`picked start tier ${$t(K)}`)}else _=x?.codecSet,R=x?.videoRange;const k=m?m.duration:g?g.duration:0,W=this.bwEstimator.getEstimateTTFB()/1e3,q=[];for(let H=n;H>=t;H--){var X;const K=y[H],V=H>d;if(!K)continue;if(E.useMediaCapabilities&&!K.supportedResult&&!K.supportedPromise){const oe=navigator.mediaCapabilities;typeof oe?.decodingInfo=="function"&&hae(K,N,R,O,e,C)?(K.supportedPromise=M3(K,N,oe,this.supportedCache),K.supportedPromise.then(xe=>{if(!this.hls)return;K.supportedResult=xe;const ae=this.hls.levels,re=ae.indexOf(K);xe.error?this.warn(`MediaCapabilities decodingInfo error: "${xe.error}" for level ${re} ${$t(xe)}`):xe.supported?xe.decodingInfoResults.some(te=>te.smooth===!1||te.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${re} not smooth or powerEfficient: ${$t(xe)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${re} ${$t(xe)}`),re>-1&&ae.length>1&&(this.log(`Removing unsupported level ${re}`),this.hls.removeLevel(re),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(xe=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${xe}`)})):K.supportedResult=D3}if((_&&K.codecSet!==_||R&&K.videoRange!==R||V&&O>K.frameRate||!V&&O>0&&O<K.frameRate||(X=K.supportedResult)!=null&&(X=X.decodingInfoResults)!=null&&X.some(oe=>oe.smooth===!1))&&(!w||H!==U)){q.push(H);continue}const J=K.details,Q=(m?J?.partTarget:J?.averagetargetduration)||k;let $;V?$=o*e:$=a*e;const F=k&&i>=k*2&&s===0?K.averageBitrate:K.maxBitrate,Z=this.getTimeToLoadFrag(W,$,F*Q,J===void 0);if($>=F&&(H===h||K.loadError===0&&K.fragmentError===0)&&(Z<=W||!Ye(Z)||T&&!this.bitrateTestDelay||Z<c)){const oe=this.forcedAutoLevel;return H!==b&&(oe===-1||oe!==b)&&(q.length&&this.trace(`Skipped level(s) ${q.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${y[q[0]].codecs}" ${y[q[0]].videoRange}; not compatible with "${_}" ${R}`),this.info(`switch candidate:${d}->${H} adjustedbw(${Math.round($)})-bitrate=${Math.round($-F)} ttfb:${W.toFixed(1)} avgDuration:${Q.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Z.toFixed(1)} firstSelection:${w} codecSet:${K.codecSet} videoRange:${K.videoRange} hls.loadLevel:${b}`)),w&&(this.firstSelection=H),H}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const U3={search:function(r,e){let t=0,n=r.length-1,i=null,s=null;for(;t<=n;){i=(t+n)/2|0,s=r[i];const a=e(s);if(a>0)t=i+1;else if(a<0)n=i-1;else return s}return null}};function Oae(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Ye(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let s=0;s<r.length;++s){const a=r[s];if(Lae(e,t,a))return a}return null}function Jo(r,e,t=0,n=0,i=.005){let s=null;if(r){s=e[1+r.sn-e[0].sn]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),s&&r.level!==s.level&&s.end<=r.end&&(s=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!r||r.level===s.level)&&Ak(t,n,s)===0||Rae(s,r,Math.min(i,n))))return s;const a=U3.search(e,Ak.bind(null,t,n));return a&&(a!==r||!s)?a:s}function Rae(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),t);return r.start<=n}return!1}function Ak(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function Lae(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function j3(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:i}=r;i&&(n=n.concat(i));let s;return U3.search(n,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=t?1:a.start>t?-1:0)),s||null}return null}function wg(r){switch(r.details){case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_TIMEOUT:case Te.LEVEL_LOAD_TIMEOUT:case Te.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function F3(r){return r.details.startsWith("key")}function $3(r){return F3(r)&&!!r.frag&&!r.frag.decryptdata}function _k(r,e){const t=wg(e);return r.default[`${t?"timeout":"error"}Retry`]}function A_(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function wk(r){return Rt(Rt({},r),{errorRetry:null,timeoutRetry:null})}function Ig(r,e,t,n){if(!r)return!1;const i=n?.code,s=e<r.maxNumRetry&&(Cae(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,s):s}function Cae(r){return rT(r)||!!r&&(r<400||r>499)}function rT(r){return r===0&&navigator.onLine===!1}var qr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Vn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class Pae extends _i{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(j.ERROR,this.onError,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(j.ERROR,this.onError,this),e.off(j.ERROR,this.onErrorOut,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===Ze.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(a=>i.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,s=t.context;switch(t.details){case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Te.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=uu();return}case Te.FRAG_GAP:case Te.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=qr.SendAlternateToPenaltyBox;return}case Te.LEVEL_EMPTY_ERROR:case Te.LEVEL_PARSING_ERROR:{var a;const u=t.parent===Ze.MAIN?t.level:i.loadLevel;t.details===Te.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u))}return;case Te.LEVEL_LOAD_ERROR:case Te.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level));return;case Te.AUDIO_TRACK_LOAD_ERROR:case Te.AUDIO_TRACK_LOAD_TIMEOUT:case Te.SUBTITLE_LOAD_ERROR:case Te.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const u=i.loadLevelObj;if(u&&(s.type===yt.AUDIO_TRACK&&u.hasAudioGroup(s.groupId)||s.type===yt.SUBTITLE_TRACK&&u.hasSubtitleGroup(s.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=qr.SendAlternateToPenaltyBox,t.errorAction.flags=Vn.MoveAllAlternatesMatchingHost;return}}return;case Te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:qr.SendAlternateToPenaltyBox,flags:Vn.MoveAllAlternatesMatchingHDCP};return;case Te.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Te.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Te.KEY_SYSTEM_NO_SESSION:t.errorAction={action:qr.SendAlternateToPenaltyBox,flags:Vn.MoveAllAlternatesMatchingKey};return;case Te.BUFFER_ADD_CODEC_ERROR:case Te.REMUX_ALLOC_ERROR:case Te.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:i.loadLevel)}return;case Te.INTERNAL_EXCEPTION:case Te.BUFFER_APPENDING_ERROR:case Te.BUFFER_FULL_ERROR:case Te.LEVEL_SWITCH_ERROR:case Te.BUFFER_STALLED_ERROR:case Te.BUFFER_SEEK_OVER_HOLE:case Te.BUFFER_NUDGE_ON_STALL:t.errorAction=uu();return}t.type===nt.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=uu())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=_k(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(Ig(i,s,wg(e),e.response))return{action:qr.RetryRequest,flags:Vn.None,retryConfig:i,retryCount:s};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=_k(F3(e)?a:s,e),u=t.levels.reduce((h,d)=>h+d.fragmentError,0);if(i&&(e.details!==Te.FRAG_GAP&&i.fragmentError++,!$3(e)&&Ig(o,u,wg(e),e.response)))return{action:qr.RetryRequest,flags:Vn.None,retryConfig:o,retryCount:u};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=u),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var s,a;const c=e.details;i.loadError++,c===Te.BUFFER_APPEND_ERROR&&i.fragmentError++;let h=-1;const{levels:d,loadLevel:g,minAutoLevel:m,maxAutoLevel:y}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const S=(s=e.frag)==null?void 0:s.type,E=(S===Ze.AUDIO&&c===Te.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Te.BUFFER_ADD_CODEC_ERROR||c===Te.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:R})=>i.audioCodec!==R),T=e.sourceBufferName==="video"&&(c===Te.BUFFER_ADD_CODEC_ERROR||c===Te.BUFFER_APPEND_ERROR)&&d.some(({codecSet:R,audioCodec:O})=>i.codecSet!==R&&i.audioCodec===O),{type:w,groupId:_}=(a=e.context)!=null?a:{};for(let R=d.length;R--;){const O=(R+g)%d.length;if(O!==g&&O>=m&&O<=y&&d[O].loadError===0){var o,u;const C=d[O];if(c===Te.FRAG_GAP&&S===Ze.MAIN&&e.frag){const B=d[O].details;if(B){const N=Jo(e.frag,B.fragments,e.frag.start);if(N!=null&&N.gap)continue}}else{if(w===yt.AUDIO_TRACK&&C.hasAudioGroup(_)||w===yt.SUBTITLE_TRACK&&C.hasSubtitleGroup(_))continue;if(S===Ze.AUDIO&&(o=i.audioGroups)!=null&&o.some(B=>C.hasAudioGroup(B))||S===Ze.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(B=>C.hasSubtitleGroup(B))||E&&i.audioCodec===C.audioCodec||T&&i.codecSet===C.codecSet||!E&&i.codecSet!==C.codecSet)continue}h=O;break}}if(h>-1&&n.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:qr.SendAlternateToPenaltyBox,flags:Vn.None,nextAutoLevel:h}}return{action:qr.SendAlternateToPenaltyBox,flags:Vn.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case qr.DoNothing:break;case qr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Te.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,s=n.nextAutoLevel;switch(i){case Vn.None:this.switchLevel(e,s);break;case Vn.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),c=t.levels[u],h=c?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=h,h==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(h){t.maxHdcpLevel=tT[tT.indexOf(h)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Vn.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const c=this.hls.levels,h=c.length;for(let g=h;g--;)if(this.variantHasKey(c[g],u)){var a,o;this.log(`Banned key found in level ${g} (${c[g].bitrate}bps) or audio group "${(a=c[g].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${Vr(u.keyId||[])}`),c[g].fragmentError++,c[g].loadError++,this.log(`Removing level ${g} with key error (${e.error})`),this.hls.removeLevel(g)}const d=e.frag;if(this.hls.levels.length<h)n.resolved=!0;else if(d&&d.type!==Ze.MAIN){const g=d.decryptdata;g&&!u.matches(g)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,s)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Te.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=eT(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}}function uu(r){const e={action:qr.DoNothing,flags:Vn.None};return r&&(e.resolved=!0),e}var _r={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Dae{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,s=Object.keys(i);for(let a=s.length;a--;){const o=i[s[a]];if(o?.body.type===t&&(!n||o.buffered)){const u=o.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,n,i,s){this.timeRanges&&(this.timeRanges[e]=t);const a=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const u=this.fragments[o];if(!u||a>=u.body.sn)return;if(!u.buffered&&(!u.loaded||s)){u.body.type===n&&this.removeFragment(u.body);return}const c=u.range[e];if(c){if(c.time.length===0){this.removeFragment(u.body);return}c.time.some(h=>{const d=!this.isTimeBuffered(h.startPTS,h.endPTS,t);return d&&this.removeFragment(u.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=Wl(n),s=this.fragments[i];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(o=>{const u=n.elementaryStreams[o];if(!u)return;const c=t[o],h=a||u.partial===!0;s.range[o]=this.getBufferedTimes(n,e.part,h,c)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,n),Od(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=Ik(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Wl(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,n,i){const s={time:[],partial:n},a=e.start,o=e.end,u=e.minEndPTS||o,c=e.maxStartPTS||a;for(let h=0;h<i.length;h++){const d=i.start(h)-this.bufferPadding,g=i.end(h)+this.bufferPadding;if(c>=d&&u<=g){s.time.push({startPTS:Math.max(a,i.start(h)),endPTS:Math.min(o,i.end(h))});break}else if(a<g&&o>d){const m=Math.max(a,i.start(h)),y=Math.min(o,i.end(h));y>m&&(s.partial=!0,s.time.push({startPTS:m,endPTS:y}))}else if(o<=d)break}return s}getPartialFragment(e){let t=null,n,i,s,a=0;const{bufferPadding:o,fragments:u}=this;return Object.keys(u).forEach(c=>{const h=u[c];h&&Od(h)&&(i=h.body.start-o,s=h.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(t=h.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Od(t))}getState(e){const t=Wl(e),n=this.fragments[t];return n?n.buffered?Od(n)?_r.PARTIAL:_r.OK:_r.APPENDING:_r.NOT_LOADED}isTimeBuffered(e,t,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&t<=s)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,s=Wl(n);this.fragments[s]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:s,type:a}=t;if(n.sn==="initSegment")return;const o=n.type;if(i){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(i)}this.timeRanges=s;const u=s[a];this.detectEvictedFragments(a,u,o,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Wl(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const s=t[n[i]];if(s?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const u=o.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(o.buffered||s)&&this.removeFragment(u)})}removeFragment(e){const t=Wl(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=Ik(n,s=>s.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function Od(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function Wl(r){return`${r.type}_${r.level}_${r.sn}`}function Ik(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var no={cbc:0,ctr:1};class kae{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case no.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case no.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Mae(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class Nae{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],u=this.invSubMix,c=u[0],h=u[1],d=u[2],g=u[3],m=new Uint32Array(256);let y=0,S=0,b=0;for(b=0;b<256;b++)b<128?m[b]=b<<1:m[b]=b<<1^283;for(b=0;b<256;b++){let E=S^S<<1^S<<2^S<<3^S<<4;E=E>>>8^E&255^99,e[y]=E,t[E]=y;const x=m[y],T=m[x],w=m[T];let _=m[E]*257^E*16843008;i[y]=_<<24|_>>>8,s[y]=_<<16|_>>>16,a[y]=_<<8|_>>>24,o[y]=_,_=w*16843009^T*65537^x*257^y*16843008,c[E]=_<<24|_>>>8,h[E]=_<<16|_>>>16,d[E]=_<<8|_>>>24,g[E]=_,y?(y=x^m[m[m[w^x]]],S^=m[m[S]]):y=S=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,u;const c=this.keySchedule=new Uint32Array(a),h=this.invKeySchedule=new Uint32Array(a),d=this.sBox,g=this.rcon,m=this.invSubMix,y=m[0],S=m[1],b=m[2],E=m[3];let x,T;for(o=0;o<a;o++){if(o<s){x=c[o]=t[o];continue}T=x,o%s===0?(T=T<<8|T>>>24,T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255],T^=g[o/s|0]<<24):s>6&&o%s===4&&(T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255]),c[o]=x=(c[o-s]^T)>>>0}for(u=0;u<a;u++)o=a-u,u&3?T=c[o]:T=c[o-4],u<4||o<=4?h[u]=T:h[u]=y[d[T>>>24]]^S[d[T>>>16&255]]^b[d[T>>>8&255]]^E[d[T&255]],h[u]=h[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,u=o[0],c=o[1],h=o[2],d=o[3],g=this.uint8ArrayToUint32Array_(n);let m=g[0],y=g[1],S=g[2],b=g[3];const E=new Int32Array(e),x=new Int32Array(E.length);let T,w,_,R,O,C,B,N,U,k,W,q,X,H;const K=this.networkToHostOrderSwap;for(;t<E.length;){for(U=K(E[t]),k=K(E[t+1]),W=K(E[t+2]),q=K(E[t+3]),O=U^s[0],C=q^s[1],B=W^s[2],N=k^s[3],X=4,H=1;H<i;H++)T=u[O>>>24]^c[C>>16&255]^h[B>>8&255]^d[N&255]^s[X],w=u[C>>>24]^c[B>>16&255]^h[N>>8&255]^d[O&255]^s[X+1],_=u[B>>>24]^c[N>>16&255]^h[O>>8&255]^d[C&255]^s[X+2],R=u[N>>>24]^c[O>>16&255]^h[C>>8&255]^d[B&255]^s[X+3],O=T,C=w,B=_,N=R,X=X+4;T=a[O>>>24]<<24^a[C>>16&255]<<16^a[B>>8&255]<<8^a[N&255]^s[X],w=a[C>>>24]<<24^a[B>>16&255]<<16^a[N>>8&255]<<8^a[O&255]^s[X+1],_=a[B>>>24]<<24^a[N>>16&255]<<16^a[O>>8&255]<<8^a[C&255]^s[X+2],R=a[N>>>24]<<24^a[O>>16&255]<<16^a[C>>8&255]<<8^a[B&255]^s[X+3],x[t]=K(T^m),x[t+1]=K(R^y),x[t+2]=K(_^S),x[t+3]=K(w^b),m=U,y=k,S=W,b=q,t=t+4}return x.buffer}}class Bae{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=Uae(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Uae(r){switch(r){case no.cbc:return"AES-CBC";case no.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const jae=16;class __{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Mae(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,n,i);const u=this.flush();u?s(u.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:s,currentResult:a,remainderData:o}=this;if(i!==no.cbc||t.byteLength!==16)return Ct.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Ti(o,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;s&&(n=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Nae),c.expandKey(t);const h=a;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,h||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new Bae(this.subtle,t,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new kae(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Ct.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%jae;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Ct.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Ok=Math.pow(2,17);class Fae{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){u(Lk(e));return}else e.gap=!1;const c=this.loader=s?new s(i):new a(i),h=Rk(e);e.loader=c;const d=wk(i.fragLoadPolicy.default),g={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Ok};e.stats=c.stats;const m={onSuccess:(y,S,b,E)=>{this.resetLoader(e,c);let x=y.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(x.slice(0,16)),x=x.slice(16)),o({frag:e,part:null,payload:x,networkDetails:E})},onError:(y,S,b,E)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Rt({url:n,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:b,stats:E}))},onAbort:(y,S,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:(y,S,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:b,stats:y}))}};t&&(m.onProgress=(y,S,b,E)=>t({frag:e,part:null,payload:b,networkDetails:E})),c.load(h,g,m)})}loadPart(e,t,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(Lk(e,t));return}const c=this.loader=s?new s(i):new a(i),h=Rk(e,t);e.loader=c;const d=wk(i.fragLoadPolicy.default),g={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Ok};t.stats=c.stats,c.load(h,g,{onSuccess:(m,y,S,b)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const E={frag:e,part:t,payload:m.data,networkDetails:b};n(E),o(E)},onError:(m,y,S,b)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Rt({url:h.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:S,stats:b}))},onAbort:(m,y,S)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:S,stats:m}))},onTimeout:(m,y,S)=>{this.resetLoader(e,c),u(new Ns({type:nt.NETWORK_ERROR,details:Te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:S,stats:m}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,s=i.total;if(n.loaded+=i.loaded,s){const u=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/s),u),d=(u-c)*Math.round(n.loaded/c);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Rk(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(Ye(i)&&Ye(s)){var a;let o=i,u=s;if(r.sn==="initSegment"&&$ae((a=r.decryptdata)==null?void 0:a.method)){const c=s-i;c%16&&(u=s+(16-c%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=u}return n}function Lk(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:nt.MEDIA_ERROR,details:Te.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new Ns(n)}function $ae(r){return r==="AES-128"||r==="AES-256"}class Ns extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class G3 extends _i{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class w_{constructor(e,t,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Rd(),this.buffering={audio:Rd(),video:Rd(),audiovideo:Rd()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=s,this.partial=a}}function Rd(){return{start:0,executeStart:0,executeEnd:0,end:0}}const Ck={length:0,start:()=>0,end:()=>0};class ft{static isBuffered(e,t){if(e){const n=ft.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=ft.getBuffered(e);return ft.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=ft.bufferedRanges(e);if(i.length)return ft.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((h,d)=>h.start-d.start||d.end-h.end);let i=-1,s=[];if(n)for(let h=0;h<e.length;h++){t>=e[h].start&&t<=e[h].end&&(i=h);const d=s.length;if(d){const g=s[d-1].end;e[h].start-g<n?e[h].end>g&&(s[d-1].end=e[h].end):s.push(e[h])}else s.push(e[h])}else s=e;let a=0,o,u=t,c=t;for(let h=0;h<s.length;h++){const d=s[h].start,g=s[h].end;if(i===-1&&t>=d&&t<=g&&(i=h),t+n>=d&&t<g)u=d,c=g,a=c-t;else if(t+n<d){o=d;break}}return{len:a,start:u||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||Ck}catch(t){return Ct.log("failed to get media.buffered",t),Ck}}}const z3=/\{\$([a-zA-Z0-9-_]+)\}/g;function Pk(r){return z3.test(r)}function nT(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(z3,n=>{const i=n.substring(2,n.length-1),s=t?.[i];return s===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function Dk(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function Gae(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const zae=/^(\d+)x(\d+)$/,kk=/(.+?)=(".*?"|.*?)(?:,|$)/g;class er{constructor(e,t){typeof e=="string"&&(e=er.parseAttrList(e,t)),Mt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=zae.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={};for(kk.lastIndex=0;(n=kk.exec(e))!==null;){const a=n[1].trim();let o=n[2];const u=o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1;let c=!1;if(u)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(u||c))o=nT(t,o);else if(!c&&!u)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ct.warn(`${e}: attribute ${a} is missing quotes`)}i[a]=o}return i}}const Hae="com.apple.hls.interstitial";function Kae(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function qae(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class H3{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(i=t?.tagOrder)!=null?i:n,t){const s=t.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){Ct.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Mt(new er({}),s,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=t?.endDate||new Date(this.attr["END-DATE"]);Ye(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ct.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ye(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Hae}get isValid(){return!!this.id&&!this._badValueForSameId&&Ye(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Vae=10;class Wae{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Ye(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Vae}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Og(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function Mk(r,e){return!r&&!e?!0:!r||!e?!1:Og(r,e)}function cu(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function I_(r){switch(r){case"AES-128":case"AES-256":return no.cbc;case"AES-256-CTR":return no.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function O_(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function iT(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function Yae(r){const e=iT(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function K3(r){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function q3(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),t=O_(a)):t=Yae(a)}}return t}const Rg=typeof self<"u"?self:void 0;var tr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Wr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ep(r){switch(r){case Wr.FAIRPLAY:return tr.FAIRPLAY;case Wr.PLAYREADY:return tr.PLAYREADY;case Wr.WIDEVINE:return tr.WIDEVINE;case Wr.CLEARKEY:return tr.CLEARKEY}}function Pb(r){switch(r){case tr.FAIRPLAY:return Wr.FAIRPLAY;case tr.PLAYREADY:return Wr.PLAYREADY;case tr.WIDEVINE:return Wr.WIDEVINE;case tr.CLEARKEY:return Wr.CLEARKEY}}function zc(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[tr.FAIRPLAY,tr.WIDEVINE,tr.PLAYREADY,tr.CLEARKEY].filter(i=>!!e[i]):[];return!n[tr.WIDEVINE]&&t&&n.push(tr.WIDEVINE),n}const V3=(function(r){return Rg!=null&&(r=Rg.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function Xae(r,e,t,n){let i;switch(r){case tr.FAIRPLAY:i=["cenc","sinf"];break;case tr.WIDEVINE:case tr.PLAYREADY:i=["cenc"];break;case tr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return Qae(i,e,t,n)}function Qae(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Zae(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function W3(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const u=O_(o).subarray(0,16);return K3(u),u}}return null}let Yl={};class Za{static clearKeyUriToKeyIdMap(){Yl={}}static setKeyIdForUri(e,t){Yl[e]=t}static addKeyIdForUri(e){const t=Object.keys(Yl).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,t),Yl[e]=n,n}constructor(e,t,n,i=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!cu(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(E3(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Og(e.keyFormatVersions,this.keyFormatVersions)&&Mk(e.iv,this.iv)&&Mk(e.keyId,this.keyId)}isSupported(){if(this.method){if(cu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Wr.FAIRPLAY:case Wr.WIDEVINE:case Wr.PLAYREADY:case Wr.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(cu(this.method)){let s=this.iv;return s||(typeof e!="number"&&(Ct.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=eoe(e)),new Za(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=Yl[this.uri];if(s&&!Og(this.keyId,s)&&Za.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=q3(this.uri);if(n)switch(this.keyFormat){case Wr.WIDEVINE:if(this.pssh=n,!this.keyId){const s=nae(n.buffer);if(s.length){var i;const a=s[0];this.keyId=(i=a.kids)!=null&&i.length?a.kids[0]:null}}this.keyId||(this.keyId=Nk(t));break;case Wr.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=rae(s,null,n),this.keyId=W3(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){const a=new Uint8Array(16);a.set(s,16-s.length),s=a}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=Jae(t),s||(s=Nk(t),s||(s=Yl[this.uri])),s&&(this.keyId=s,Za.setKeyIdForUri(this.uri,s))}return this}}function Jae(r){const e=r?.[Wr.WIDEVINE];return e?e.keyId:null}function Nk(r){const e=r?.[Wr.PLAYREADY];if(e){const t=q3(e.uri);if(t)return W3(t)}return null}function eoe(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const Bk=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Uk=/#EXT-X-MEDIA:(.*)/g,toe=/^#EXT(?:INF|-X-TARGETDURATION):/m,Db=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),roe=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ts{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return b_.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return toe.test(e)}static parseMasterPlaylist(e,t){const n=Pk(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(Bk.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let a;for(;(a=Bk.exec(e))!=null;)if(a[1]){var o;const c=new er(a[1],i),h=nT(i,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:ts.resolve(h,t)},g=c.decimalResolution("RESOLUTION");g&&(d.width=g.width,d.height=g.height),$k(c.CODECS,d);const m=c["SUPPLEMENTAL-CODECS"];m&&(d.supplemental={},$k(m,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||s.push(d),i.levels.push(d)}else if(a[3]){const c=a[3],h=a[4];switch(c){case"SESSION-DATA":{const d=new er(h,i),g=d["DATA-ID"];g&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[g]=d);break}case"SESSION-KEY":{const d=jk(h,t,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):Ct.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const d=new er(h,i);Dk(i,d,t)}break}case"CONTENT-STEERING":{const d=new er(h,i);i.contentSteering={uri:ts.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=Fk(h);break}}}const u=s.length>0&&s.length<i.levels.length;return i.levels=u?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const s={},a=n.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(Uk.lastIndex=0;(i=Uk.exec(e))!==null;){const c=new er(i[1],n),h=c.TYPE;if(h){const d=o[h],g=s[h]||[];s[h]=g;const m=c.LANGUAGE,y=c["ASSOC-LANGUAGE"],S=c.CHANNELS,b=c.CHARACTERISTICS,E=c["INSTREAM-ID"],x={attrs:c,bitrate:0,id:u++,groupId:c["GROUP-ID"]||"",name:c.NAME||m||"",type:h,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:m,url:c.URI?ts.resolve(c.URI,t):""};if(y&&(x.assocLang=y),S&&(x.channels=S),b&&(x.characteristics=b),E&&(x.instreamId=E),d!=null&&d.length){const T=ts.findGroup(d,x.groupId)||d[0];Gk(x,T,"audioCodec"),Gk(x,T,"textCodec")}g.push(x)}}return s}static parseLevelPlaylist(e,t,n,i,s,a){var o;const u={url:t},c=new Wae(t),h=c.fragments,d=[];let g=null,m=0,y=0,S=0,b=0,E=0,x=null,T=new Rb(i,u),w,_,R,O=-1,C=!1,B=null,N;if(Db.lastIndex=0,c.m3u8=e,c.hasVariableRefs=Pk(e),((o=Db.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(w=Db.exec(e))!==null;){C&&(C=!1,T=new Rb(i,u),T.playlistOffset=S,T.setStart(S),T.sn=m,T.cc=b,E&&(T.bitrate=E),T.level=n,g&&(T.initSegment=g,g.rawProgramDateTime&&(T.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),B&&(T.setByteRange(B),B=null)));const q=w[1];if(q){T.duration=parseFloat(q);const X=(" "+w[2]).slice(1);T.title=X||null,T.tagList.push(X?["INF",q,X]:["INF",q])}else if(w[3]){if(Ye(T.duration)){T.playlistOffset=S,T.setStart(S),R&&Hk(T,R,c),T.sn=m,T.level=n,T.cc=b,h.push(T);const X=(" "+w[3]).slice(1);T.relurl=nT(c,X),sT(T,x,d),x=T,S+=T.duration,m++,y=0,C=!0}}else{if(w=w[0].match(roe),!w){Ct.warn("No matches on slow regex match for level playlist!");continue}for(_=1;_<w.length&&w[_]===void 0;_++);const X=(" "+w[_]).slice(1),H=(" "+w[_+1]).slice(1),K=w[_+2]?(" "+w[_+2]).slice(1):null;switch(X){case"BYTERANGE":x?T.setByteRange(H,x):T.setByteRange(H);break;case"PROGRAM-DATE-TIME":T.rawProgramDateTime=H,T.tagList.push(["PROGRAM-DATE-TIME",H]),O===-1&&(O=h.length);break;case"PLAYLIST-TYPE":c.type&&Ps(c,X,w),c.type=H.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?Ps(c,X,w):h.length>0&&Kk(c,X,w),m=c.startSN=parseInt(H);break;case"SKIP":{c.skippedSegments&&Ps(c,X,w);const V=new er(H,c),J=V.decimalInteger("SKIPPED-SEGMENTS");if(Ye(J)){c.skippedSegments+=J;for(let $=J;$--;)h.push(null);m+=J}const Q=V.enumeratedString("RECENTLY-REMOVED-DATERANGES");Q&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(Q.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&Ps(c,X,w),c.targetduration=Math.max(parseInt(H),1);break;case"VERSION":c.version!==null&&Ps(c,X,w),c.version=parseInt(H);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||Ps(c,X,w),c.live=!1;break;case"#":(H||K)&&T.tagList.push(K?[H,K]:[H]);break;case"DISCONTINUITY":b++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([X]);break;case"BITRATE":T.tagList.push([X,H]),E=parseInt(H)*1e3,Ye(E)?T.bitrate=E:E=0;break;case"DATERANGE":{const V=new er(H,c),J=new H3(V,c.dateRanges[V.ID],c.dateRangeTagCount);c.dateRangeTagCount++,J.isValid||c.skippedSegments?c.dateRanges[J.id]=J:Ct.warn(`Ignoring invalid DATERANGE tag: "${H}"`),T.tagList.push(["EXT-X-DATERANGE",H]);break}case"DEFINE":{{const V=new er(H,c);"IMPORT"in V?Gae(c,V,a):Dk(c,V,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?Ps(c,X,w):h.length>0&&Kk(c,X,w),c.startCC=b=parseInt(H);break;case"KEY":{const V=jk(H,t,c);if(V.isSupported()){if(V.method==="NONE"){R=void 0;break}R||(R={});const J=R[V.keyFormat];J!=null&&J.matches(V)||(J&&(R=Mt({},R)),R[V.keyFormat]=V)}else Ct.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${H}"`);break}case"START":c.startTimeOffset=Fk(H);break;case"MAP":{const V=new er(H,c);if(T.duration){const J=new Rb(i,u);zk(J,V,n,R),g=J,T.initSegment=g,g.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=g.rawProgramDateTime)}else{const J=T.byteRangeEndOffset;if(J){const Q=T.byteRangeStartOffset;B=`${J-Q}@${Q}`}else B=null;zk(T,V,n,R),g=T,C=!0}g.cc=b;break}case"SERVER-CONTROL":{N&&Ps(c,X,w),N=new er(H),c.canBlockReload=N.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=N.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&N.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=N.optionalFloat("PART-HOLD-BACK",0),c.holdBack=N.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&Ps(c,X,w);const V=new er(H);c.partTarget=V.decimalFloatingPoint("PART-TARGET");break}case"PART":{let V=c.partList;V||(V=c.partList=[]);const J=y>0?V[V.length-1]:void 0,Q=y++,$=new er(H,c),F=new Gse($,T,u,Q,J);V.push(F),T.duration+=F.duration;break}case"PRELOAD-HINT":{const V=new er(H,c);c.preloadHint=V;break}case"RENDITION-REPORT":{const V=new er(H,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(V);break}default:Ct.warn(`line parsed but not handled: ${w}`);break}}}x&&!x.relurl?(h.pop(),S-=x.duration,c.partList&&(c.fragmentHint=x)):c.partList&&(sT(T,x,d),T.cc=b,c.fragmentHint=T,R&&Hk(T,R,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const U=h.length,k=h[0],W=h[U-1];if(S+=c.skippedSegments*c.targetduration,S>0&&U&&W){c.averagetargetduration=S/U;const q=W.sn;c.endSN=q!=="initSegment"?q:0,c.live||(W.endList=!0),O>0&&(ioe(h,O),k&&d.unshift(k))}return c.fragmentHint&&(S+=c.fragmentHint.duration),c.totalduration=S,d.length&&c.dateRangeTagCount&&k&&Y3(d,c),c.endCC=b,c}}function Y3(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];r.push(o),t++}else return;const n=r[t-1],i=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let o=s.length;o--;){const u=e.dateRanges[s[o]],c=u.startDate.getTime();u.tagAnchor=n.ref;for(let h=t;h--;){var a;if(((a=r[h])==null?void 0:a.sn)<e.startSN)break;const d=noe(e,c,r,h,i);if(d!==-1){u.tagAnchor=e.fragments[d].ref;break}}}}function noe(r,e,t,n,i){const s=t[n];if(s){const o=s.programDateTime;if(e>=o||n===0){var a;const u=(((a=t[n+1])==null?void 0:a.start)||i)-s.start;if(e<=o+u*1e3){const c=t[n].sn-r.startSN;if(c<0)return-1;const h=r.fragments;if(h.length>t.length){const g=(t[n+1]||h[h.length-1]).sn-r.startSN;for(let m=g;m>c;m--){const y=h[m].programDateTime;if(e>=y&&e<y+h[m].duration*1e3)return m}}return c}}}return-1}function jk(r,e,t){var n,i;const s=new er(r,t),a=(n=s.METHOD)!=null?n:"",o=s.URI,u=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,h=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!u&&Ct.error(`Invalid IV: ${s.IV}`);const d=o?ts.resolve(o,e):"",g=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Za(a,d,h,g,u,s.KEYID)}function Fk(r){const t=new er(r).decimalFloatingPoint("TIME-OFFSET");return Ye(t)?t:null}function $k(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(s=>E_(s,n));i.length&&(e[`${n}Codec`]=i.map(s=>s.split("/")[0]).join(","),t=t.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=t}function Gk(r,e,t){const n=e[t];n&&(r[t]=n)}function ioe(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function sT(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function zk(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function Hk(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}function Ps(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function Kk(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function kb(r,e){const t=e.startPTS;if(Ye(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function X3(r,e,t,n,i,s,a){n-t<=0&&(a.warn("Fragment should have a positive duration",e),n=t+e.duration,s=i+e.duration);let u=t,c=n;const h=e.startPTS,d=e.endPTS;if(Ye(h)){const E=Math.abs(h-t);r&&E>r.totalduration?a.warn(`media timestamps and playlist times differ by ${E}s for level ${e.level} ${r.url}`):Ye(e.deltaPTS)?e.deltaPTS=Math.max(E,e.deltaPTS):e.deltaPTS=E,u=Math.max(t,h),t=Math.min(t,h),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,c=Math.min(n,d),n=Math.max(n,d),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const g=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=c,e.endDTS=s;const m=e.sn;if(!r||m<r.startSN||m>r.endSN)return 0;let y;const S=m-r.startSN,b=r.fragments;for(b[S]=e,y=S;y>0;y--)kb(b[y],b[y-1]);for(y=S;y<b.length-1;y++)kb(b[y],b[y+1]);return r.fragmentHint&&kb(b[b.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,g}function soe(r,e,t){if(r===e)return;let n=null;const i=r.fragments;for(let h=i.length-1;h>=0;h--){const d=i[h].initSegment;if(d){n=d;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let s;loe(r,e,(h,d,g,m)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==h.cc){const y=h.cc-d.cc;for(let S=g;S<m.length;S++)m[S].cc+=y;e.endCC=m[m.length-1].cc}Ye(h.startPTS)&&Ye(h.endPTS)&&(d.setStart(d.startPTS=h.startPTS),d.startDTS=h.startDTS,d.maxStartPTS=h.maxStartPTS,d.endPTS=h.endPTS,d.endDTS=h.endDTS,d.minEndPTS=h.minEndPTS,d.setDuration(h.endPTS-h.startPTS),d.duration&&(s=d),e.PTSKnown=e.alignedSliding=!0),h.hasStreams&&(d.elementaryStreams=h.elementaryStreams),d.loader=h.loader,h.hasStats&&(d.stats=h.stats),h.initSegment&&(d.initSegment=h.initSegment,n=h.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&o.forEach(h=>{var d;h&&(!h.initSegment||h.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(h.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(h=>!h),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let h=e.skippedSegments;h--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=aoe(r.dateRanges,e,t));const h=r.fragments.filter(d=>d.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<o.length;d++)o[d].programDateTime===null&&sT(o[d],o[d-1],h);Y3(h,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var u;const h=J3(r,e.startSN-1);e.startCC=(u=h?.cc)!=null?u:a[0].cc}ooe(r.partList,e.partList,(h,d)=>{d.elementaryStreams=h.elementaryStreams,d.stats=h.stats}),s?X3(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,t):Q3(r,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const h=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=h),e.driftEndTime=c,e.driftEnd=h}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function aoe(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:i}=e,s=Mt({},r);i&&i.forEach(u=>{delete s[u]});const o=Object.keys(s).length;return o?(Object.keys(n).forEach(u=>{const c=s[u],h=new H3(n[u].attr,c);h.isValid?(s[u]=h,c||(h.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${$t(n[u].attr)}"`)}),s):n}function ooe(r,e,t){if(r&&e){let n=0;for(let i=0,s=r.length;i<=s;i++){const a=r[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):n--}}}function loe(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,s=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=i;c<=s;c++){const h=u[a+c];let d=o[c];if(n&&!d&&h&&(d=e.fragments[c]=h),h&&d){t(h,d,c,o);const g=h.relurl,m=d.relurl;if(g&&uoe(g,m)){e.playlistParsingError=qk(`media sequence mismatch ${d.sn}:`,r,e,h,d);return}else if(h.cc!==d.cc){e.playlistParsingError=qk(`discontinuity sequence mismatch (${h.cc}!=${d.cc})`,r,e,h,d);return}}}}function qk(r,e,t,n,i){return new Error(`${r} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function Q3(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,i=r.fragments,s=n>=0;let a=0;if(s&&n<i.length)a=i[n].start;else if(s&&e.startSN===r.endSN+1)a=r.fragmentEnd;else if(s&&t)a=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=r.fragmentStart;else return;aT(e,a)}function aT(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function Z3(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const s=n[n.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function J3(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function Vk(r,e,t){return r?e$(r.partList,e,t):null}function e$(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function t$(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function uoe(r,e){return r!==e&&e?Wk(r)!==Wk(e):!1}function Wk(r){return r.replace(/\?[^?]*$/,"")}function Vc(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function coe(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function Yk(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function r$(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)Yk(t[n],r);e.fragmentHint&&Yk(e.fragmentHint,r),e.alignedSliding=!0}function foe(r,e){r&&(n$(e,r),e.alignedSliding||Lg(e,r),!e.alignedSliding&&!e.skippedSegments&&Q3(r,e,!1))}function n$(r,e){if(!coe(e,r))return;const t=Math.min(e.endCC,r.endCC),n=Vc(e.fragments,t),i=Vc(r.fragments,t);if(!n||!i)return;Ct.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const s=n.start-i.start;r$(s,r)}function Lg(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,s;const a=Math.min(e.endCC,r.endCC);e.startCC<a&&r.startCC<a&&(i=Vc(n,a),s=Vc(t,a)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=Vc(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,u=s.programDateTime;if(!o||!u)return;const c=(u-o)/1e3-(s.start-i.start);r$(c,r)}function dn(r,e,t){Dn(r,e,t),r.addEventListener(e,t)}function Dn(r,e,t){r.removeEventListener(e,t)}const hoe={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},Ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class R_ extends G3{constructor(e,t,n,i,s){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ge.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:u,mediaBuffer:c,state:h}=this,d=u?u.currentTime:0,g=ft.bufferInfo(c||u,d,a.maxBufferHole),m=!g.len;if(this.log(`Media seeking to ${Ye(d)?d.toFixed(3):d}, state: ${h}, ${m?"out of":"in"} buffer`),this.state===Ge.ENDED)this.resetLoadingState();else if(o){const y=a.maxFragLookUpTolerance,S=o.start-y,b=o.start+o.duration+y;if(m||b<g.start||S>g.end){const E=d>b;(d<S||E)&&(E&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(d>y&&(this.lastCurrentTime=d),!this.loadingParts){const S=Math.max(g.end,d),b=this.shouldLoadParts(this.getLevelDetails(),S);b&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${S.toFixed(2)}`),this.loadingParts=b)}}this.hls.hasEnoughToStart||(this.log(`Setting ${m?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,m&&(this.startPosition=d)),m&&this.state===Ge.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new Fae(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new __(e.config)}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Ge.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ge.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=ft.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>i&&a<t.edge||this.media.currentTime<e.start)return!1;const u=t.partList;if(u!=null&&u.length){const h=u[u.length-1];return ft.isBuffered(this.media,h.start+h.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;dn(n,"seeking",this.onMediaSeeking),dn(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Ge.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Dn(i,"seeking",this.onMediaSeeking),Dn(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Ge.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,n,i).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===Ge.FRAG_LOADING||!this.fragCurrent&&a===Ge.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=Ge.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(j.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===_r.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===_r.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(j.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:s,payload:a}=n,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&cu(o.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,I_(o.method)).catch(c=>{throw i.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{const h=self.performance.now();return i.trigger(j.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:u,tdecrypt:h}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Ge.STOPPED&&(this.state=Ge.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,i;const s=e.tracks;if(s&&!t.encrypted&&((n=s.audio)!=null&&n.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(j.ERROR,{type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?hoe.toString(ft.getBuffered(n)):"(detached)"})`),fr(e)){var i;if(e.type!==Ze.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=Ge.IDLE;return}}const s=(i=this.levels)==null?void 0:i[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=Ge.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(u=>!u),o=new w_(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var s;this.fragCurrent=e;const a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Ge.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(j.KEY_LOADED,g),this.state===Ge.KEY_LOADING&&(this.state=Ge.IDLE),g}),this.hls.trigger(j.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(fr(e)&&(!u||e.sn!==u.sn)){const g=this.shouldLoadParts(t.details,e.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=g)}if(n=Math.max(e.start,n||0),this.loadingParts&&fr(e)){const g=a.partList;if(g&&i){n>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const m=this.getNextPart(g,e,n);if(m>-1){const y=g[m];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${m}/${g.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=Ge.FRAG_LOADING;let S;return o?S=o.then(b=>!b||this.fragContextChanged(b.frag)?null:this.doFragPartsLoad(e,y,t,i)).catch(b=>this.handleFragLoadError(b)):S=this.doFragPartsLoad(e,y,t,i).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(j.FRAG_LOADING,{frag:e,part:y,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):S}else if(!e.url||this.loadedEndOfParts(g,n))return Promise.resolve(null)}}if(fr(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=a.partList)==null?void 0:c.filter(g=>g.loaded).map(g=>`[${g.start}-${g.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Ye(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ge.FRAG_LOADING;const h=this.config.progressive&&e.type!==Ze.SUBTITLE;let d;return h&&o?d=o.then(g=>!g||this.fragContextChanged(g.frag)?null:this.fragmentLoader.load(e,i)).catch(g=>this.handleFragLoadError(g)):d=Promise.all([this.fragmentLoader.load(e,h?i:void 0),o]).then(([g])=>(!h&&i&&i(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(j.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,n,i){return new Promise((s,a)=>{var o;const u=[],c=(o=n.details)==null?void 0:o.partList,h=d=>{this.fragmentLoader.loadPart(e,d,i).then(g=>{u[d.index]=g;const m=g.part;this.hls.trigger(j.FRAG_LOADED,g);const y=Vk(n.details,e.sn,d.index+1)||e$(c,e.sn,d.index+1);if(y)h(y);else return s({frag:e,part:m,partsLoaded:u})}).catch(a)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===Te.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===nt.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(j.ERROR,t)}else this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Ge.PARSING){!this.fragCurrent&&this.state!==Ge.STOPPED&&this.state!==Ge.ERROR&&(this.state=Ge.IDLE);return}const{frag:n,part:i,level:s}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a);const o=this.getLevelDetails(),c=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(n,i,s,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const s=e.partList[0];if(s.fragment.type===Ze.SUBTITLE)return!1;const a=s.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=a){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=t[i],u=o.details,c=a>-1?Vk(u,s,a):null,h=c?c.fragment:J3(u,s,n);return h?(n&&n!==h&&(h.stats=n.stats),{frag:h,part:c,level:o}):null}bufferFragmentData(e,t,n,i,s){if(this.state!==Ge.PARSING)return;const{data1:a,data2:o}=e;let u=a;if(o&&(u=Ti(a,o)),!u.length)return;const c=this.initPTS[t.cc],h=c?-c.baseTime/c.timescale:void 0,d={type:e.type,frag:t,part:n,chunkMeta:i,offset:h,parent:t.type,data:u};if(this.hls.trigger(j.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ft.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=ft.bufferInfo(t,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!Ye(i))return null;const a=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,a)}getFwdBufferInfoAtPos(e,t,n,i){const s=ft.bufferInfo(e,t,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-t,i);return ft.bufferInfo(e,t,o)}}return s}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),s=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=Ze.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start,o=s.lowLatencyMode&&!!t.partList;let u=null;if(t.live){const d=s.initialLiveManifestSize;if(i<d)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(t);const g=this.hls.startPosition,m=this.hls.liveSyncPosition,y=u?(g!==-1&&g>=a?g:m)||u.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${g} liveSyncPosition: ${m} frag.start: ${(c=u)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=a&&(u=n[0]);if(!u){const d=this.loadingParts?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,d,t)}let h=this.filterReplacedPrimary(u,t);if(!h&&u){const d=u.sn-t.startSN;h=this.filterReplacedPrimary(n[d+1]||null,t)}return this.mapToInitFragWhenRequired(h)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===_r.OK||n===_r.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(o!==null&&n.len+o.len>=s){const u=a.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(Xk(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(Xk(this.config)&&e.type!==Ze.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const a=i.event;if(a){if(a.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&t?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const s=n?.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,s=!1,a=!0;for(let o=0,u=e.length;o<u;o++){const c=e[o];if(a=a&&!c.independent,i>-1&&n<c.start)break;const h=c.loaded;h?i=-1:(s||(c.independent||a)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),i=o),s=h}return i}loadedEndOfParts(e,t){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=Oae(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=j3(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:c}=i,h=n.partList,d=!!(this.loadingParts&&h!=null&&h.length&&u);d&&!this.bitrateTest&&h[h.length-1].fragment.sn===u.sn&&(a=a.concat(u),o=u.sn);let g;if(e<t){var m;const S=e<this.lastCurrentTime||e>t-c||(m=this.media)!=null&&m.paused||!this.startFragRequested?0:c;g=Jo(s,a,e,S)}else g=a[a.length-1];if(g){const y=g.sn-n.startSN,S=this.fragmentTracker.getState(g);if((S===_r.OK||S===_r.PARTIAL&&g.gap)&&(s=g),s&&g.sn===s.sn&&(!d||h[0].fragment.sn>g.sn||!n.live)&&g.level===s.level){const E=a[y+1];g.sn<o&&this.fragmentTracker.getState(E)!==_r.OK?g=E:g=null}}return g}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!t,o=e.alignedSliding&&Ye(s);if(a||!o&&!s){foe(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&Ye(a)?(n=t+a,a<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&fr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Ge.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ge.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const E=this.getCurrentContext(t.chunkMeta);E&&(t.frag=E.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=t.details===Te.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction;if(!o){this.state=Ge.ERROR;return}const{action:u,flags:c,retryCount:h=0,retryConfig:d}=o,g=!!d,m=g&&u===qr.RetryRequest,y=g&&!o.resolved&&c===Vn.MoveAllAlternatesMatchingHost,S=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!m&&y&&fr(i)&&!i.endList&&S&&!$3(t))this.resetFragmentErrors(e),this.treatAsGap(i),o.resolved=!0;else if((m||y)&&h<d.maxNumRetry){var b;const E=rT((b=t.response)==null?void 0:b.code),x=A_(d,h);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+x,this.state=Ge.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,E){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${h+1}/${d.maxNumRetry} in ${x}ms`)}else if(d)if(this.resetFragmentErrors(e),h<d.maxNumRetry)!a&&u!==qr.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${h})`);return}else u===qr.SendAlternateToPenaltyBox?this.state=Ge.WAITING_LEVEL:this.state=Ge.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!rT(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Ge.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Ge.PARSING||this.state===Ge.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,t?.duration||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Ze.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=ft.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ge.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,c)=>{const h=e.elementaryStreams[c];if(h){const d=h.endPTS-h.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),u||!1;const g=i?0:X3(s,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS,this);return this.hls.trigger(j.LEVEL_PTS_UPDATED,{details:s,level:n,drift:g,type:c,frag:e,start:h.startPTS,end:h.endPTS}),!0}return u},!1)){var o;const u=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||u&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),u){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Ge.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(j.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Ze.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,s;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((s=t&&!n?e.endPTS:(n||e).end)!=null?s:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Xk(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class i${constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=doe(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function doe(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const s=r[i];t.set(s,n),n+=s.length}return t}var Mb={exports:{}},Qk;function poe(){return Qk||(Qk=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function s(u,c,h,d,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,d||u,g),y=t?t+c:c;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],m]:u._events[y].push(m):(u._events[y]=m,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=t?t+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,m=d.length,y=new Array(m);g<m;g++)y[g]=d[g].fn;return y},o.prototype.listenerCount=function(c){var h=t?t+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,g,m,y){var S=t?t+c:c;if(!this._events[S])return!1;var b=this._events[S],E=arguments.length,x,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,g),!0;case 5:return b.fn.call(b.context,h,d,g,m),!0;case 6:return b.fn.call(b.context,h,d,g,m,y),!0}for(T=1,x=new Array(E-1);T<E;T++)x[T-1]=arguments[T];b.fn.apply(b.context,x)}else{var w=b.length,_;for(T=0;T<w;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),E){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,h);break;case 3:b[T].fn.call(b[T].context,h,d);break;case 4:b[T].fn.call(b[T].context,h,d,g);break;default:if(!x)for(_=1,x=new Array(E-1);_<E;_++)x[_-1]=arguments[_];b[T].fn.apply(b[T].context,x)}}return!0},o.prototype.on=function(c,h,d){return s(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return s(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,g){var m=t?t+c:c;if(!this._events[m])return this;if(!h)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===h&&(!g||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var S=0,b=[],E=y.length;S<E;S++)(y[S].fn!==h||g&&!y[S].once||d&&y[S].context!==d)&&b.push(y[S]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Mb)),Mb.exports}var goe=poe(),L_=Fse(goe);const bf="1.6.15",Eu={};function moe(){return typeof __HLS_WORKER_BUNDLE__=="function"}function yoe(){const r=Eu[bf];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Eu[bf]=i,i}function voe(r){const e=Eu[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Eu[r]=i,i}function boe(r){const e=Eu[r||bf];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete Eu[r||bf],i&&self.URL.revokeObjectURL(i),n.terminate()}}function s$(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function C_(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function Im(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function Sf(r,e){const t=e;let n=0;for(;C_(r,e);){n+=10;const i=Im(r,e+6);n+=i,s$(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function Soe(r,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[t+2],a=s>>2&15;if(a>12){const m=new Error(`invalid ADTS sampling index:${a}`);r.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!0,error:m,reason:m.message});return}const o=(s>>6&3)+1,u=e[t+3]>>6&3|(s&1)<<2,c="mp4a.40."+o,h=i[a];let d=a;(o===5||o===29)&&(d-=3);const g=[o<<3|(d&14)>>1,(d&1)<<7|u<<3];return Ct.log(`manifest codec:${n}, parsed codec:${c}, channels:${u}, rate:${h} (ADTS object type:${o} sampling index:${a})`),{config:g,samplerate:h,channelCount:u,codec:c,parsedCodec:c,manifestCodec:n}}function a$(r,e){return r[e]===255&&(r[e+1]&246)===240}function o$(r,e){return r[e+1]&1?7:9}function P_(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function xoe(r,e){return e+5<r.length}function Cg(r,e){return e+1<r.length&&a$(r,e)}function Eoe(r,e){return xoe(r,e)&&a$(r,e)&&P_(r,e)<=r.length-e}function Toe(r,e){if(Cg(r,e)){const t=o$(r,e);if(e+t>=r.length)return!1;const n=P_(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Cg(r,i)}return!1}function l$(r,e,t,n,i){if(!r.samplerate){const s=Soe(e,t,n,i);if(!s)return;Mt(r,s)}}function u$(r){return 1024*9e4/r}function Aoe(r,e){const t=o$(r,e);if(e+t<=r.length){const n=P_(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function c$(r,e,t,n,i){const s=u$(r.samplerate),a=n+i*s,o=Aoe(e,t);let u;if(o){const{frameLength:d,headerLength:g}=o,m=g+d,y=Math.max(0,t+m-e.length);y?(u=new Uint8Array(m-g),u.set(e.subarray(t+g,e.length),0)):u=e.subarray(t+g,t+m);const S={unit:u,pts:a};return y||r.samples.push(S),{sample:S,length:m,missing:y}}const c=e.length-t;return u=new Uint8Array(c),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:c,missing:-1}}function _oe(r,e){return C_(r,e)&&Im(r,e+6)+10<=r.length-e}function woe(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function Nb(r,e=0,t=1/0){return Ioe(r,e,t,Uint8Array)}function Ioe(r,e,t,n){const i=Ooe(r);let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const a=Roe(r)?r.byteOffset:0,o=(a+r.byteLength)/s,u=(a+e)/s,c=Math.floor(Math.max(0,Math.min(u,o))),h=Math.floor(Math.min(c+Math.max(t,0),o));return new n(i,c,h-c)}function Ooe(r){return r instanceof ArrayBuffer?r:r.buffer}function Roe(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function Loe(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const i=ti(Nb(r.data,1,n)),s=r.data[2+n],a=r.data.subarray(3+n).indexOf(0);if(a===-1)return;const o=ti(Nb(r.data,3+n,a));let u;return i==="-->"?u=ti(Nb(r.data,4+n+a)):u=woe(r.data.subarray(4+n+a)),e.mimeType=i,e.pictureType=s,e.description=o,e.data=u,e}function Coe(r){if(r.size<2)return;const e=ti(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function Poe(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=ti(r.data.subarray(t),!0);t+=n.length+1;const i=ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=ti(r.data.subarray(1));return{key:r.type,info:"",data:e}}function Doe(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=ti(r.data.subarray(t),!0);t+=n.length+1;const i=ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=ti(r.data);return{key:r.type,info:"",data:e}}function koe(r){return r.type==="PRIV"?Coe(r):r.type[0]==="W"?Doe(r):r.type==="APIC"?Loe(r):Poe(r)}function Moe(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Im(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const Ld=10,Noe=10;function f$(r){let e=0;const t=[];for(;C_(r,e);){const n=Im(r,e+6);r[e+5]>>6&1&&(e+=Ld),e+=Ld;const i=e+n;for(;e+Noe<i;){const s=Moe(r.subarray(e)),a=koe(s);a&&t.push(a),e+=s.size+Ld}s$(r,e)&&(e+=Ld)}return t}function h$(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function Boe(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function D_(r){const e=f$(r);for(let t=0;t<e.length;t++){const n=e[t];if(h$(n))return Boe(n)}}let Xn=(function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r})({});function Yi(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class k_{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ti(this.cachedData,e),this.cachedData=null);let n=Sf(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,u=n?D_(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Ye(u))&&(this.basePTS=Uoe(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xn.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const h=this.appendFrame(a,e,i);h?(this.frameIndex++,this.lastPTS=h.sample.pts,i+=h.length,s=i):i=c}else _oe(e,i)?(n=Sf(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===c&&s!==c){const h=e.slice(s);this.cachedData?this.cachedData=Ti(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:Yi(),id3Track:o,textTrack:Yi()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Yi(),id3Track:this._id3Track,textTrack:Yi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Uoe=(r,e,t)=>{if(Ye(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let Cd=null;const joe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Foe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],$oe=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Goe=[0,1,1,4];function d$(r,e,t,n,i){if(t+24>e.length)return;const s=p$(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,u={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=s.channelCount,r.samplerate=s.sampleRate,r.samples.push(u),{sample:u,length:s.frameLength,missing:0}}}function p$(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,s=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&s!==3){const a=r[e+2]>>1&1,o=r[e+3]>>6,u=t===3?3-n:n===3?3:4,c=joe[u*14+i-1]*1e3,d=Foe[(t===3?0:t===2?1:2)*3+s],g=o===3?1:2,m=$oe[t][n],y=Goe[n],S=m*8*y,b=Math.floor(m*c/d+a)*y;if(Cd===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Cd=T?parseInt(T[1]):0}return!!Cd&&Cd<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:d,channelCount:g,frameLength:b,samplesPerFrame:S}}}function M_(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function g$(r,e){return e+1<r.length&&M_(r,e)}function zoe(r,e){return M_(r,e)&&4<=r.length-e}function m$(r,e){if(e+1<r.length&&M_(r,e)){const n=p$(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===r.length||g$(r,s)}return!1}class Hoe extends k_{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=Sf(e,0);let i=n?.length||0;if(m$(e,i))return!1;for(let s=e.length;i<s;i++)if(Toe(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return Eoe(e,t)}appendFrame(e,t,n){l$(e,this.observer,t,n,e.manifestCodec);const i=c$(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const y$=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=r[e];const o=Math.min(n,8),u=8-o;s[0]=4278190080>>>24+u<<u,i[0]=(a[0]&s[0])>>u,t=t?t<<o|i[0]:i[0],e+=1,n-=o}return t};class Koe extends k_{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=v$(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Sf(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&D_(t)!==void 0&&y$(e,n)<16}}function v$(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],u=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+s]*2;if(t+h>e.length)return-1;const d=e[t+6]>>5;let g=0;d===2?g+=2:(d&1&&d!==1&&(g+=2),d&4&&(g+=2));const m=(e[t+6]<<8|e[t+7])>>12-g&1,S=[2,1,2,3,3,4,4,5][d]+m,b=e[t+5]>>3,E=e[t+5]&7,x=new Uint8Array([s<<6|b<<1|E>>2,(E&3)<<6|d<<3|m<<2|u>>4,u<<4&224]),T=1536/o*9e4,w=n+i*T,_=e.subarray(t,t+h);return r.config=x,r.channelCount=S,r.samplerate=o,r.samples.push({unit:_,pts:w}),h}class qoe extends k_{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Sf(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&D_(t)!==void 0&&y$(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(m$(e,n))return Ct.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return zoe(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return d$(e,t,n,this.basePTS,this.frameIndex)}}const Voe=/\/emsg[-/]ID3/i;class Woe{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const s=this.videoTrack=Yi("video",1),a=this.audioTrack=Yi("audio",1),o=this.txtTrack=Yi("text",1);if(this.id3Track=Yi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=O3(e);if(u.video){const{id:c,timescale:h,codec:d,supplemental:g}=u.video;s.id=c,s.timescale=o.timescale=h,s.codec=d,s.supplemental=g}if(u.audio){const{id:c,timescale:h,codec:d}=u.audio;a.id=c,a.timescale=h,a.codec=d}o.id=_3.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return Kse(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ti(this.remainderData,e));const o=Zse(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return s.samples=gk(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=gk(e,t),{videoTrack:t,audioTrack:Yi(),id3Track:i,textTrack:Yi()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=mt(e.samples,["emsg"]);i&&i.forEach(s=>{const a=eae(s);if(Voe.test(a.schemeIdUri)){const o=Zk(a,t);let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const c=a.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Xn.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=Zk(a,t);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Xn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Zk(r,e){return Ye(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class Yoe{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new __(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,no.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const u=new Uint8Array(o);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,t,n,i,s){const a=C3(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(u=>{s.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}).catch(i)}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const s=e[t].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}class b${constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let s=e.naluState||0;const a=s,o=[];let u=0,c,h,d,g=-1,m=0;for(s===-1&&(g=0,m=this.getNALuType(t,0),s=0,u=1);u<i;){if(c=t[u++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(h=u-s-1,g>=0){const y={data:t.subarray(g,h),type:m};o.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(a&&u<=4-a&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-a)),h>0&&(y.data=Ti(y.data,t.subarray(0,h)),y.state=0))}u<i?(d=this.getNALuType(t,u),g=u,m=d,s=0):s=-1}else s=0}if(g>=0&&s>=0){const y={data:t.subarray(g,i),type:m,state:s};o.push(y)}if(o.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=Ti(y.data,t))}return e.naluState=s,o}}class Wc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Ct.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Xoe extends b${parsePES(e,t,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,u=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var h,d;switch(c.type){case 1:{let S=!1;o=!0;const b=c.data;if(u&&b.length>4){const E=this.readSliceType(b);(E===2||E===4||E===7||E===9)&&(S=!0)}if(S){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=S;break}case 5:o=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,x_(c.data,1,n.pts,t.samples);break}case 7:{var m,y;o=!0,u=!0;const S=c.data,b=this.readSPS(S);if(!e.sps||e.width!==b.width||e.height!==b.height||((m=e.pixelRatio)==null?void 0:m[0])!==b.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==b.pixelRatio[1]){e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.sps=[S];const E=S.subarray(1,4);let x="avc1.";for(let T=0;T<3;T++){let w=E[T].toString(16);w.length<2&&(w="0"+w),x+=w}e.codec=x}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Wc(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,s;for(let a=0;a<e;a++)i!==0&&(s=t.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(e){const t=new Wc(e);let n=0,i=0,s=0,a=0,o,u,c;const h=t.readUByte.bind(t),d=t.readBits.bind(t),g=t.readUEG.bind(t),m=t.readBoolean.bind(t),y=t.skipBits.bind(t),S=t.skipEG.bind(t),b=t.skipUEG.bind(t),E=this.skipScalingList.bind(this);h();const x=h();if(d(5),y(3),h(),b(),x===100||x===110||x===122||x===244||x===44||x===83||x===86||x===118||x===128){const C=g();if(C===3&&y(1),b(),b(),y(1),m())for(u=C!==3?8:12,c=0;c<u;c++)m()&&(c<6?E(16,t):E(64,t))}b();const T=g();if(T===0)g();else if(T===1)for(y(1),S(),S(),o=g(),c=0;c<o;c++)S();b(),y(1);const w=g(),_=g(),R=d(1);R===0&&y(1),y(1),m()&&(n=g(),i=g(),s=g(),a=g());let O=[1,1];if(m()&&m())switch(h()){case 1:O=[1,1];break;case 2:O=[12,11];break;case 3:O=[10,11];break;case 4:O=[16,11];break;case 5:O=[40,33];break;case 6:O=[24,11];break;case 7:O=[20,11];break;case 8:O=[32,11];break;case 9:O=[80,33];break;case 10:O=[18,11];break;case 11:O=[15,11];break;case 12:O=[64,33];break;case 13:O=[160,99];break;case 14:O=[4,3];break;case 15:O=[3,2];break;case 16:O=[2,1];break;case 255:{O=[h()<<8|h(),h()<<8|h()];break}}return{width:Math.ceil((w+1)*16-n*2-i*2),height:(2-R)*(_+1)*16-(R?2:4)*(s+a),pixelRatio:O}}}class Qoe extends b${constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,u=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var h,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,u){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,x_(c.data,2,n.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Mt(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const m=this.readSPS(c.data);e.width=m.width,e.height=m.height,e.pixelRatio=m.pixelRatio,e.codec=m.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in m.params)e.params[y]=m.params[y]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const m=this.readPPS(c.data);for(const y in m)e.params[y]=m[y]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}a&&o&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Wc(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new Wc(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),s=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),u=t.readUByte(),c=t.readUByte(),h=t.readUByte(),d=t.readUByte(),g=t.readUByte(),m=t.readUByte(),y=t.readUByte(),S=t.readUByte(),b=t.readUByte(),E=t.readUByte(),x=[],T=[];for(let se=0;se<n;se++)x.push(t.readBoolean()),T.push(t.readBoolean());if(n>0)for(let se=n;se<8;se++)t.readBits(2);for(let se=0;se<n;se++)x[se]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),T[se]&&t.readUByte();t.readUEG();const w=t.readUEG();w==3&&t.skipBits(1);const _=t.readUEG(),R=t.readUEG(),O=t.readBoolean();let C=0,B=0,N=0,U=0;O&&(C+=t.readUEG(),B+=t.readUEG(),N+=t.readUEG(),U+=t.readUEG());const k=t.readUEG(),W=t.readUEG(),q=t.readUEG(),X=t.readBoolean();for(let se=X?0:n;se<=n;se++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ye=0;ye<4;ye++)for(let Re=0;Re<(ye===3?2:6);Re++)if(!t.readBoolean())t.readUEG();else{const je=Math.min(64,1<<4+(ye<<1));ye>1&&t.readEG();for(let pe=0;pe<je;pe++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const V=t.readUEG();let J=0;for(let se=0;se<V;se++){let ye=!1;if(se!==0&&(ye=t.readBoolean()),ye){se===V&&t.readUEG(),t.readBoolean(),t.readUEG();let Re=0;for(let Ce=0;Ce<=J;Ce++){const je=t.readBoolean();let pe=!1;je||(pe=t.readBoolean()),(je||pe)&&Re++}J=Re}else{const Re=t.readUEG(),Ce=t.readUEG();J=Re+Ce;for(let je=0;je<Re;je++)t.readUEG(),t.readBoolean();for(let je=0;je<Ce;je++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const se=t.readUEG();for(let ye=0;ye<se;ye++){for(let Re=0;Re<q+4;Re++)t.readBits(1);t.readBits(1)}}let $=0,F=1,Z=1,de=!0,oe=1,xe=0;t.readBoolean(),t.readBoolean();let ae=!1;if(t.readBoolean()){if(t.readBoolean()){const Ue=t.readUByte(),Ke=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ie=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ue>0&&Ue<16?(F=Ke[Ue-1],Z=Ie[Ue-1]):Ue===255&&(F=t.readBits(16),Z=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ae=t.readBoolean(),ae&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(oe=t.readBits(32),xe=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Ie=t.readBoolean(),lt=t.readBoolean();let L=!1;(Ie||lt)&&(L=t.readBoolean(),L&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),L&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let D=0;D<=n;D++){de=t.readBoolean();const G=de||t.readBoolean();let fe=!1;G?t.readEG():fe=t.readBoolean();const ve=fe?1:t.readUEG()+1;if(Ie)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),L&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(lt)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),L&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),$=t.readUEG())}let te=_,le=R;if(O){let se=1,ye=1;w===1?se=ye=2:w==2&&(se=2),te=_-se*B-se*C,le=R-ye*U-ye*N}const ce=i?["A","B","C"][i]:"",ne=o<<24|u<<16|c<<8|h;let Le=0;for(let se=0;se<32;se++)Le=(Le|(ne>>se&1)<<31-se)>>>0;let Se=Le.toString(16);return a===1&&Se==="2"&&(Se="6"),{codecString:`hvc1.${ce}${a}.${Se}.${s?"H":"L"}${E}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:i,general_profile_compatibility_flags:[o,u,c,h],general_constraint_indicator_flags:[d,g,m,y,S,b],general_level_idc:E,bit_depth:k+8,bit_depth_luma_minus8:k,bit_depth_chroma_minus8:W,min_spatial_segmentation_idc:$,chroma_format_idc:w,frame_rate:{fixed:de,fps:xe/oe}},width:te,height:le,pixelRatio:[F,Z]}}readPPS(e){const t=new Wc(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),s=t.readBoolean();let a=1;return s&&i?a=0:s?a=3:i&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Pr=188;class Wa{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Wa.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(Pr*5,t-Pr)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let u=i;u<t;u+=Pr)if(e[u]===71&&(t-u===Pr||e[u+Pr]===71)){if(o++,a===-1&&(a=u,a!==0&&(n=Math.min(a+Pr*99,e.length-Pr)+1)),s||(s=oT(e,u)===0),s&&o>1&&(a===0&&o>2||u+Pr>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:_3[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Wa.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Wa.createTrack("audio",i),this._id3Track=Wa.createTrack("id3"),this._txtTrack=Wa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,u=this._id3Track,c=this._txtTrack;let h=a.pid,d=a.pesData,g=o.pid,m=u.pid,y=o.pesData,S=u.pesData,b=null,E=this.pmtParsed,x=this._pmtId,T=e.length;if(this.remainderData&&(e=Ti(this.remainderData,e),T=e.length,this.remainderData=null),T<Pr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:u,textTrack:c};const w=Math.max(0,Wa.syncOffset(e));T-=(T-w)%Pr,T<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let _=0;for(let O=w;O<T;O+=Pr)if(e[O]===71){const C=!!(e[O+1]&64),B=oT(e,O),N=(e[O+3]&48)>>4;let U;if(N>1){if(U=O+5+e[O+4],U===O+Pr)continue}else U=O+4;switch(B){case h:C&&(d&&(s=Xl(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,c,s,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(U,O+Pr)),d.size+=O+Pr-U);break;case g:if(C){if(y&&(s=Xl(y,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(U,O+Pr)),y.size+=O+Pr-U);break;case m:C&&(S&&(s=Xl(S,this.logger))&&this.parseID3PES(u,s),S={data:[],size:0}),S&&(S.data.push(e.subarray(U,O+Pr)),S.size+=O+Pr-U);break;case 0:C&&(U+=e[U]+1),x=this._pmtId=Zoe(e,U);break;case x:{C&&(U+=e[U]+1);const k=Joe(e,U,this.typeSupported,n,this.observer,this.logger);h=k.videoPid,h>0&&(a.pid=h,a.segmentCodec=k.segmentVideoCodec),g=k.audioPid,g>0&&(o.pid=g,o.segmentCodec=k.segmentAudioCodec),m=k.id3Pid,m>0&&(u.pid=m),b!==null&&!E&&(this.logger.warn(`MPEG-TS PMT found at ${O} after unknown PID '${b}'. Backtracking to sync byte @${w} to parse all TS packets.`),b=null,O=w-188),E=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=B;break}}else _++;_>0&&lT(this.observer,new Error(`Found ${_} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=y,u.pesData=S;const R={audioTrack:o,videoTrack:a,id3Track:u,textTrack:c};return i&&this.extractRemainingSamples(R),R}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=t.pesData,u=i.pesData;let c;if(a&&(c=Xl(a,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,c,!0),n.pesData=null)):n.pesData=a,o&&(c=Xl(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;u&&(c=Xl(u,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new Yoe(this.observer,this.config,t);return this.decrypt(i,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Xoe:e==="hevc"&&(this.videoParser=new Qoe))}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let s=t.data;if(i){this.aacOverFlow=null;const d=i.missing,g=i.sample.unit.byteLength;if(d===-1)s=Ti(i.sample.unit,s);else{const m=g-d;i.sample.unit.set(s.subarray(0,d),m),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!Cg(s,a);a++);if(a!==n){let d;const g=a<o-1;if(g?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",lT(this.observer,new Error(d),g,this.logger),!g)return}l$(e,this.observer,s,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const d=u$(e.samplerate);u=i.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,h;for(;a<o;)if(h=c$(e,s,a,u,c),a+=h.length,h.missing){this.aacOverFlow=h;break}else for(c++;a<o-1&&!Cg(s,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let s=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(g$(n,a)){const u=d$(e,n,a,o,s);if(u)a+=u.length,s++;else break}else a++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,u;for(;o<s&&(u=v$(e,n,o,i,a++))>0;)o+=u}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Mt({},t,{type:this._videoTrack?Xn.emsg:Xn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function oT(r,e){return((r[e+1]&31)<<8)+r[e+2]}function Zoe(r,e){return(r[e+10]&31)<<8|r[e+11]}function Joe(r,e,t,n,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(r[e+1]&15)<<8|r[e+2],u=e+3+o-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<u;){const h=oT(r,e),d=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){Bb("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=h);break;case 21:a.id3Pid===-1&&(a.id3Pid=h);break;case 219:if(!n){Bb("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=h);break;case 3:case 4:!t.mpeg&&!t.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="mp3");break;case 193:if(!n){Bb("AC-3",s);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let g=e+5,m=d;for(;m>2;){switch(r[g]){case 106:t.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=h,a.segmentAudioCodec="ac3");break}const S=r[g+1]+2;g+=S,m-=S}}break;case 194:case 135:return lT(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=h,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return a}function lT(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Bb(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function Xl(r,e){let t=0,n,i,s,a,o;const u=r.data;if(!r||r.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=Ti(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>r.size-6)return null;const h=n[7];h&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,h&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=n[8];let d=s+9;if(r.size<=d)return null;r.size-=d;const g=new Uint8Array(r.size);for(let m=0,y=u.length;m<y;m++){n=u[m];let S=n.byteLength;if(d)if(d>S){d-=S;continue}else n=n.subarray(d),S-=d,d=0;g.set(n,t),t+=S}return i&&(i-=s+3),{data:g,pts:a,dts:o,len:i}}return null}class ele{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Fa=Math.pow(2,32)-1;class Ee{static init(){Ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ee.types)Ee.types.hasOwnProperty(e)&&(Ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ee.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);Ee.STTS=Ee.STSC=Ee.STCO=s,Ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);Ee.FTYP=Ee.box(Ee.types.ftyp,a,u,a,o),Ee.DINF=Ee.box(Ee.types.dinf,Ee.box(Ee.types.dref,i))}static box(e,...t){let n=8,i=t.length;const s=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return Ee.box(Ee.types.hdlr,Ee.HDLR_TYPES[e])}static mdat(e){return Ee.box(Ee.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Fa+1)),i=Math.floor(t%(Fa+1));return Ee.box(Ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return Ee.box(Ee.types.mdia,Ee.mdhd(e.timescale||0,e.duration||0),Ee.hdlr(e.type),Ee.minf(e))}static mfhd(e){return Ee.box(Ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ee.box(Ee.types.minf,Ee.box(Ee.types.smhd,Ee.SMHD),Ee.DINF,Ee.stbl(e)):Ee.box(Ee.types.minf,Ee.box(Ee.types.vmhd,Ee.VMHD),Ee.DINF,Ee.stbl(e))}static moof(e,t,n){return Ee.box(Ee.types.moof,Ee.mfhd(e),Ee.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trak(e[t]);return Ee.box.apply(null,[Ee.types.moov,Ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Ee.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trex(e[t]);return Ee.box.apply(null,[Ee.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Fa+1)),i=Math.floor(t%(Fa+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ee.box(Ee.types.mvhd,s)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,s;for(i=0;i<t.length;i++)s=t[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return Ee.box(Ee.types.sdtp,n)}static stbl(e){return Ee.box(Ee.types.stbl,Ee.stsd(e),Ee.box(Ee.types.stts,Ee.STTS),Ee.box(Ee.types.stsc,Ee.STSC),Ee.box(Ee.types.stsz,Ee.STSZ),Ee.box(Ee.types.stco,Ee.STCO))}static avc1(e){let t=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=Ee.box(Ee.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,c=e.height,h=e.pixelRatio[0],d=e.pixelRatio[1];return Ee.box(Ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ee.box(Ee.types.mp4a,Ee.audioStsd(e),Ee.box(Ee.types.esds,Ee.esds(e)))}static mp3(e){return Ee.box(Ee.types[".mp3"],Ee.audioStsd(e))}static ac3(e){return Ee.box(Ee.types["ac-3"],Ee.audioStsd(e),Ee.box(Ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp4a(e));if(t==="ac3"&&e.config)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.avc1(e));if(t==="hevc"&&e.vps)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,s=e.height||0,a=Math.floor(n/(Fa+1)),o=Math.floor(n%(Fa+1));return Ee.box(Ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const n=Ee.sdtp(e),i=e.id,s=Math.floor(t/(Fa+1)),a=Math.floor(t%(Fa+1));return Ee.box(Ee.types.traf,Ee.box(Ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),Ee.box(Ee.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),Ee.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Ee.box(Ee.types.trak,Ee.tkhd(e),Ee.mdia(e))}static trex(e){const t=e.id;return Ee.box(Ee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,u,c,h,d,g;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)u=n[o],c=u.duration,h=u.size,d=u.flags,g=u.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*o);return Ee.box(Ee.types.trun,a)}static initSegment(e){Ee.types||Ee.init();const t=Ee.moov(e);return Ti(Ee.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,s=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let a=s.length;for(let y=0;y<n.length;y+=1){a+=3;for(let S=0;S<n[y].length;S+=1)a+=2+n[y][S].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const u=n.length-1;for(let y=0;y<n.length;y+=1){o.set(new Uint8Array([32+y|(y===u?128:0),0,n[y].length]),a),a+=3;for(let S=0;S<n[y].length;S+=1)o.set(new Uint8Array([n[y][S].length>>8,n[y][S].length&255]),a),a+=2,o.set(n[y][S],a),a+=n[y][S].length}const c=Ee.box(Ee.types.hvcC,o),h=e.width,d=e.height,g=e.pixelRatio[0],m=e.pixelRatio[1];return Ee.box(Ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,h&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,m>>24,m>>16&255,m>>8&255,m&255])))}}Ee.types=void 0;Ee.HDLR_TYPES=void 0;Ee.STTS=void 0;Ee.STSC=void 0;Ee.STCO=void 0;Ee.STSZ=void 0;Ee.VMHD=void 0;Ee.SMHD=void 0;Ee.STSD=void 0;Ee.FTYP=void 0;Ee.DINF=void 0;const S$=9e4;function N_(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function tle(r,e,t=1,n=!1){return N_(r,e,1/t,n)}function Nc(r,e=!1){return N_(r,1e3,1/S$,e)}function rle(r,e=1){return N_(r,S$,1/e)}function Jk(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const nle=10*1e3,ile=1024,sle=1152,ale=1536;let Ql=null,Ub=null;function eM(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class Tp extends _i{constructor(e,t,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Ql===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ql=a?parseInt(a[1]):0}if(Ub===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Ub=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&Jk(t)} > ${e&&Jk(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((s,a)=>{let o=a.pts,u=o-s;return u<-4294967296&&(t=!0,o=Wn(o,n),u=o-s),u>0?s:o},n);return t&&this.debug("PTS rollover detected"),i}remux(e,t,n,i,s,a,o,u){let c,h,d,g,m,y,S=s,b=s;const E=e.pid>-1,x=t.pid>-1,T=t.samples.length,w=e.samples.length>0,_=o&&T>0||T>1;if((!E||w)&&(!x||_)||this.ISGenerated||o){if(this.ISGenerated){var O,C,B,N;const q=this.videoTrackConfig;(q&&(t.width!==q.width||t.height!==q.height||((O=t.pixelRatio)==null?void 0:O[0])!==((C=q.pixelRatio)==null?void 0:C[0])||((B=t.pixelRatio)==null?void 0:B[1])!==((N=q.pixelRatio)==null?void 0:N[1]))||!q&&_||this.nextAudioTs===null&&w)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,s,a));const U=this.isVideoContiguous;let k=-1,W;if(_&&(k=ole(t.samples),!U&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,k>0){this.warn(`Dropped ${k} out of ${T} video samples due to a missing keyframe`);const q=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(k),t.dropped+=k,b+=(t.samples[0].pts-q)/t.inputTimeScale,W=b}else k===-1&&(this.warn(`No keyframe found out of ${T} video samples`),y=!1);if(this.ISGenerated){if(w&&_){const q=this.getVideoStartPts(t.samples),H=(Wn(e.samples[0].pts,q)-q)/t.inputTimeScale;S+=Math.max(0,H),b+=Math.max(0,-H)}if(w){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,s,a)),h=this.remuxAudio(e,S,this.isAudioContiguous,a,x||_||u===Ze.AUDIO?b:void 0),_){const q=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,s,a)),c=this.remuxVideo(t,b,U,q)}}else _&&(c=this.remuxVideo(t,b,U,0));c&&(c.firstKeyFrame=k,c.independent=k!==-1,c.firstKeyFramePTS=W)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(m=x$(n,s,this._initPTS,this._initDTS)),i.samples.length&&(g=E$(i,s,this._initPTS))),{audio:h,video:c,initSegment:d,independent:y,text:g,id3:m}}computeInitPts(e,t,n,i){const s=Math.round(n*t);let a=Wn(e,s);if(a<s+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-a)/t} ${i}`);a<s+t;)a+=8589934592;return a-s}generateIS(e,t,n,i){const s=e.samples,a=t.samples,o=this.typeSupported,u={},c=this._initPTS;let h=!c||i,d="audio/mp4",g,m,y,S=-1;if(h&&(g=m=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ee.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(S=e.id,y=e.inputTimeScale,!c||y!==c.timescale?g=m=this.computeInitPts(s[0].pts,y,n,"audio"):h=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ee.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(S=t.id,y=t.inputTimeScale,!c||y!==c.timescale){const b=this.getVideoStartPts(a),E=Wn(a[0].dts,b),x=this.computeInitPts(E,y,n,"video"),T=this.computeInitPts(b,y,n,"video");m=Math.min(m,x),g=Math.min(g,T)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${g/y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${g/y} (${g}/${y}) trackId: ${S}`),this._initPTS={baseTime:g,timescale:y,trackId:S},this._initDTS={baseTime:m,timescale:y,trackId:S}):g=y=void 0,{tracks:u,initPTS:g,timescale:y,trackId:S}}remuxVideo(e,t,n,i){const s=e.inputTimeScale,a=e.samples,o=[],u=a.length,c=this._initPTS,h=c.baseTime*s/c.timescale;let d=this.nextVideoTs,g=8,m=this.videoSampleDuration,y,S,b=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,x=!1;if(!n||d===null){const $=h+t*s,F=a[0].pts-Wn(a[0].dts,a[0].pts);Ql&&d!==null&&Math.abs($-F-(d+h))<15e3?n=!0:d=$-F-h}const T=d+h;for(let $=0;$<u;$++){const F=a[$];F.pts=Wn(F.pts,T),F.dts=Wn(F.dts,T),F.dts<a[$>0?$-1:$].dts&&(x=!0)}x&&a.sort(function($,F){const Z=$.dts-F.dts,de=$.pts-F.pts;return Z||de}),y=a[0].dts,S=a[a.length-1].dts;const w=S-y,_=w?Math.round(w/(u-1)):m||e.inputTimeScale/30;if(n){const $=y-T,F=$>_,Z=$<-1;if((F||Z)&&(F?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Nc($,!0)} ms (${$}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Nc(-$,!0)} ms (${$}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!Z||T>=a[0].pts||Ql)){y=T;const de=a[0].pts-$;if(F)a[0].dts=y,a[0].pts=de;else{let oe=!0;for(let xe=0;xe<a.length&&!(a[xe].dts>de&&oe);xe++){const ae=a[xe].pts;if(a[xe].dts-=$,a[xe].pts-=$,xe<a.length-1){const re=a[xe+1].pts,te=a[xe].pts,le=re<=te,ce=re<=ae;oe=le==ce}}}this.log(`Video: Initial PTS/DTS adjusted: ${Nc(de,!0)}/${Nc(y,!0)}, delta: ${Nc($,!0)} ms`)}}y=Math.max(0,y);let R=0,O=0,C=y;for(let $=0;$<u;$++){const F=a[$],Z=F.units,de=Z.length;let oe=0;for(let xe=0;xe<de;xe++)oe+=Z[xe].data.length;O+=oe,R+=de,F.length=oe,F.dts<C?(F.dts=C,C+=_/4|0||1):C=F.dts,b=Math.min(F.pts,b),E=Math.max(F.pts,E)}S=a[u-1].dts;const B=O+4*R+8;let N;try{N=new Uint8Array(B)}catch($){this.observer.emit(j.ERROR,j.ERROR,{type:nt.MUX_ERROR,details:Te.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:B,reason:`fail allocating video mdat ${B}`});return}const U=new DataView(N.buffer);U.setUint32(0,B),N.set(Ee.types.mdat,4);let k=!1,W=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,H=Number.NEGATIVE_INFINITY;for(let $=0;$<u;$++){const F=a[$],Z=F.units;let de=0;for(let ae=0,re=Z.length;ae<re;ae++){const te=Z[ae],le=te.data,ce=te.data.byteLength;U.setUint32(g,ce),g+=4,N.set(le,g),g+=ce,de+=4+ce}let oe;if($<u-1)m=a[$+1].dts-F.dts,oe=a[$+1].pts-F.pts;else{const ae=this.config,re=$>0?F.dts-a[$-1].dts:_;if(oe=$>0?F.pts-a[$-1].pts:_,ae.stretchShortVideoTrack&&this.nextAudioTs!==null){const te=Math.floor(ae.maxBufferHole*s),le=(i?b+i*s:this.nextAudioTs+h)-F.pts;le>te?(m=le-re,m<0?m=re:k=!0,this.log(`It is approximately ${le/90} ms to the next segment; using duration ${m/90} ms for the last video frame.`)):m=re}else m=re}const xe=Math.round(F.pts-F.dts);W=Math.min(W,m),X=Math.max(X,m),q=Math.min(q,oe),H=Math.max(H,oe),o.push(eM(F.key,m,de,xe))}if(o.length){if(Ql){if(Ql<70){const $=o[0].flags;$.dependsOn=2,$.isNonSync=0}}else if(Ub&&H-q<X-W&&_/X<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let $=y;for(let F=0,Z=o.length;F<Z;F++){const de=$+o[F].duration,oe=$+o[F].cts;if(F<Z-1){const xe=de+o[F+1].cts;o[F].duration=xe-oe}else o[F].duration=F?o[F-1].duration:_;o[F].cts=0,$=de}}}m=k||!m?_:m;const K=S+m;this.nextVideoTs=d=K-h,this.videoSampleDuration=m,this.isVideoContiguous=!0;const Q={data1:Ee.moof(e.sequenceNumber++,y,Mt(e,{samples:o})),data2:N,startPTS:(b-h)/s,endPTS:(E+m-h)/s,startDTS:(y-h)/s,endDTS:d/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Q}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return sle;case"ac3":return ale;default:return ile}}remuxAudio(e,t,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,u=a/o,c=this.getSamplesPerFrame(e),h=c*u,d=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],y=s!==void 0;let S=e.samples,b=g?0:8,E=this.nextAudioTs||-1;const x=d.baseTime*a/d.timescale,T=x+t*a;if(this.isAudioContiguous=n=n||S.length&&E>0&&(i&&Math.abs(T-(E+x))<9e3||Math.abs(Wn(S[0].pts,T)-(E+x))<20*h),S.forEach(function(H){H.pts=Wn(H.pts,T)}),!n||E<0){const H=S.length;if(S=S.filter(K=>K.pts>=0),H!==S.length&&this.warn(`Removed ${S.length-H} of ${H} samples (initPTS ${x} / ${a})`),!S.length)return;s===0?E=0:i&&!y?E=Math.max(0,T-x):E=S[0].pts-x}if(e.segmentCodec==="aac"){const H=this.config.maxAudioFramesDrift;for(let K=0,V=E+x;K<S.length;K++){const J=S[K],Q=J.pts,$=Q-V,F=Math.abs(1e3*$/a);if($<=-H*h&&y)K===0&&(this.warn(`Audio frame @ ${(Q/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*$/a)} ms.`),this.nextAudioTs=E=Q-x,V=Q);else if($>=H*h&&F<nle&&y){let Z=Math.round($/h);for(V=Q-Z*h;V<0&&Z&&h;)Z--,V+=h;K===0&&(this.nextAudioTs=E=V-x),this.warn(`Injecting ${Z} audio frames @ ${((V-x)/a).toFixed(3)}s due to ${Math.round(1e3*$/a)} ms gap.`);for(let de=0;de<Z;de++){let oe=ele.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);oe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),oe=J.unit.subarray()),S.splice(K,0,{unit:oe,pts:V}),V+=h,K++}}J.pts=V,V+=h}}let w=null,_=null,R,O=0,C=S.length;for(;C--;)O+=S[C].unit.byteLength;for(let H=0,K=S.length;H<K;H++){const V=S[H],J=V.unit;let Q=V.pts;if(_!==null){const F=m[H-1];F.duration=Math.round((Q-_)/u)}else if(n&&e.segmentCodec==="aac"&&(Q=E+x),w=Q,O>0){O+=b;try{R=new Uint8Array(O)}catch(F){this.observer.emit(j.ERROR,j.ERROR,{type:nt.MUX_ERROR,details:Te.REMUX_ALLOC_ERROR,fatal:!1,error:F,bytes:O,reason:`fail allocating audio mdat ${O}`});return}g||(new DataView(R.buffer).setUint32(0,O),R.set(Ee.types.mdat,4))}else return;R.set(J,b);const $=J.byteLength;b+=$,m.push(eM(!0,c,$,0)),_=Q}const B=m.length;if(!B)return;const N=m[m.length-1];E=_-x,this.nextAudioTs=E+u*N.duration;const U=g?new Uint8Array(0):Ee.moof(e.sequenceNumber++,w/u,Mt({},e,{samples:m}));e.samples=[];const k=(w-x)/a,W=this.nextAudioTs/a,X={data1:U,data2:R,startPTS:k,endPTS:W,startDTS:k,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:B};return this.isAudioContiguous=!0,X}}function Wn(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function ole(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function x$(r,e,t,n){const i=r.samples.length;if(!i)return;const s=r.inputTimeScale;for(let o=0;o<i;o++){const u=r.samples[o];u.pts=Wn(u.pts-t.baseTime*s/t.timescale,e*s)/s,u.dts=Wn(u.dts-n.baseTime*s/n.timescale,e*s)/s}const a=r.samples;return r.samples=[],{samples:a}}function E$(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let a=0;a<n;a++){const o=r.samples[a];o.pts=Wn(o.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((a,o)=>a.pts-o.pts);const s=r.samples;return r.samples=[],{samples:s}}class lle extends _i{constructor(e,t,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:a}=this.initData=O3(e);if(t)Yse(e,t);else{const u=s||a;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}s&&(n=tM(s,jt.AUDIO,this)),a&&(i=tM(a,jt.VIDEO,this));const o={};s&&a?o.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:s?o.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,s,a){var o,u;let{initPTS:c,lastEndTime:h}=this;const d={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Ye(h)||(h=this.lastEndTime=s||0);const g=t.samples;if(!g.length)return d;const m={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((o=y)!=null&&o.length||(this.generateInitSegment(g),y=this.initData),!((u=y)!=null&&u.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);const S=Qse(g,y,this),b=y.audio?S[y.audio.id]:null,E=y.video?S[y.video.id]:null,x=Pd(E,1/0),T=Pd(b,1/0),w=Pd(E,0,!0),_=Pd(b,0,!0);let R=s,O=0;const C=b&&(!E||!c&&T<x||c&&c.trackId===y.audio.id),B=C?b:E;if(B){const V=B.timescale,J=B.start-s*V,Q=C?y.audio.id:y.video.id;R=B.start/V,O=C?_-T:w-x,(a||!c)&&(ule(c,R,s,O)||V!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${s} ${J/V} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${R-s} (${J}/${V}) trackId: ${Q}`),c=null,m.initPTS=J,m.timescale=V,m.trackId=Q)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);c?(m.initPTS=c.baseTime,m.timescale=c.timescale,m.trackId=c.trackId):((!m.timescale||m.trackId===void 0||m.initPTS===void 0)&&(this.warn("Could not set initPTS"),m.initPTS=R,m.timescale=1,m.trackId=-1),this.initPTS=c={baseTime:m.initPTS,timescale:m.timescale,trackId:m.trackId});const N=R-c.baseTime/c.timescale,U=N+O;O>0?this.lastEndTime=U:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const k=!!y.audio,W=!!y.video;let q="";k&&(q+="audio"),W&&(q+="video");const X=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),H={data1:g,startPTS:N,startDTS:N,endPTS:U,endDTS:U,type:q,hasAudio:k,hasVideo:W,nb:1,dropped:0,encrypted:X};d.audio=k&&!W?H:void 0,d.video=W?H:void 0;const K=E?.sampleCount;if(K){const V=E.keyFrameIndex,J=V!==-1;H.nb=K,H.dropped=V===0||this.isVideoContiguous?0:J?V:K,H.independent=J,H.firstKeyFrame=V,J&&E.keyFrameStart&&(H.firstKeyFramePTS=(E.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(d.independent=J),this.isVideoContiguous||(this.isVideoContiguous=J),H.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${V}/${K} dropped: ${H.dropped} start: ${H.firstKeyFramePTS||"NA"}`)}return d.initSegment=m,d.id3=x$(n,s,c,c),i.samples.length&&(d.text=E$(i,s,c)),d}}function Pd(r,e,t=!1){return r?.start!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function ule(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),s=e-r.baseTime/r.timescale;return Math.abs(s-t)>i}function tM(r,e,t){const n=r.codec;return n&&n.length>4?n:e===jt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?Tg(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let Bs;try{Bs=self.performance.now.bind(self.performance)}catch{Bs=Date.now}const Ap=[{demux:Woe,remux:lle},{demux:Wa,remux:Tp},{demux:Hoe,remux:Tp},{demux:qoe,remux:Tp}];Ap.splice(2,0,{demux:Koe,remux:Tp});class rM{constructor(e,t,n,i,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const s=n.transmuxing;s.executeStart=Bs();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:h,trackSwitch:d,accurateTimeOffset:g,timeOffset:m,initSegmentChange:y}=i||o,{audioCodec:S,videoCodec:b,defaultInitPts:E,duration:x,initSegmentData:T}=u,w=cle(a,t);if(w&&cu(w.method)){const C=this.getDecrypter(),B=I_(w.method);if(C.isSync()){let N=C.softwareDecrypt(a,w.key.buffer,w.iv.buffer,B);if(n.part>-1){const k=C.flush();N=k&&k.buffer}if(!N)return s.executeEnd=Bs(),jb(n);a=new Uint8Array(N)}else return this.asyncResult=!0,this.decryptionPromise=C.webCryptoDecrypt(a,w.key.buffer,w.iv.buffer,B).then(N=>{const U=this.push(N,null,n);return this.decryptionPromise=null,U}),this.decryptionPromise}const _=this.needsProbing(h,d);if(_){const C=this.configureTransmuxer(a);if(C)return this.logger.warn(`[transmuxer] ${C.message}`),this.observer.emit(j.ERROR,j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),s.executeEnd=Bs(),jb(n)}(h||d||y||_)&&this.resetInitSegment(T,S,b,x,t),(h||y||_)&&this.resetInitialTimestamp(E),c||this.resetContiguity();const R=this.transmux(a,w,m,g,n);this.asyncResult=xf(R);const O=this.currentTransmuxState;return O.contiguous=!0,O.discontinuity=!1,O.trackSwitch=!1,s.executeEnd=Bs(),R}flush(e){const t=e.transmuxing;t.executeStart=Bs();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const d=n.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:u,remuxer:c}=this;if(!u||!c){t.executeEnd=Bs();const d=[jb(e)];return this.asyncResult?Promise.resolve(d):d}const h=u.flush(o);return xf(h)?(this.asyncResult=!0,h.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,h,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:u,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Ze.MAIN?"level":"track"} ${n.level}`);const h=this.remuxer.remux(i,s,a,o,c,u,!0,this.id);e.push({remuxResult:h,chunkMeta:n}),n.transmuxing.executeEnd=Bs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,s){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let s;for(let d=0,g=Ap.length;d<g;d++){var a;if((a=Ap[d].demux)!=null&&a.probe(e,this.logger)){s=Ap[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,u=this.remuxer,c=s.remux,h=s.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(n,t,i,this.logger)),(!o||!(o instanceof h))&&(this.demuxer=new h(n,t,i,this.logger),this.probe=h.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new __(this.config)),e}}function cle(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const jb=r=>({remuxResult:{},chunkMeta:r});function xf(r){return"then"in r&&r.then instanceof Function}class fle{constructor(e,t,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class hle{constructor(e,t,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}let nM=0;class T${constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=nM++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const c=u.data,h=this.hls;if(!(!h||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const g=(d=this.workerContext)==null?void 0:d.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{h.logger[c.data.logType]&&h.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,h.trigger(c.event,c.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const c=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(u,c)=>{c=c||{},c.frag=this.frag||void 0,u===j.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(u,c)};this.observer=new L_,this.observer.on(j.FRAG_DECRYPTED,a),this.observer.on(j.ERROR,a);const o=vk(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(s.workerPath||moe()){try{s.workerPath?(u.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=voe(s.workerPath)):(u.log(`injecting Web Worker for "${t}"`),this.workerContext=yoe());const{worker:h}=this.workerContext;h.addEventListener("message",this.onWorkerMessage),h.addEventListener("error",this.onWorkerError),h.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:$t(s)})}catch(h){u.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.terminateWorker(),this.error=null,this.transmuxer=new rM(this.observer,o,s,"",t,e.logger)}return}}this.transmuxer=new rM(this.observer,o,s,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=nM++;const t=this.hls.config,n=vk(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:$t(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),boe(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,s,a,o,u,c,h){var d,g;c.transmuxing.start=self.performance.now();const{instanceNo:m,transmuxer:y}=this,S=a?a.start:s.start,b=s.decryptdata,E=this.frag,x=!(E&&s.cc===E.cc),T=!(E&&c.level===E.level),w=E?c.sn-E.sn:-1,_=this.part?c.part-this.part.index:-1,R=w===0&&c.id>1&&c.id===E?.stats.chunkCount,O=!T&&(w===1||w===0&&(_===1||R&&_<=0)),C=self.performance.now();(T||w||s.stats.parsing.start===0)&&(s.stats.parsing.start=C),a&&(_||!O)&&(a.stats.parsing.start=C);const B=!(E&&((d=s.initSegment)==null?void 0:d.url)===((g=E.initSegment)==null?void 0:g.url)),N=new hle(x,O,u,T,S,B);if(!O||x||B){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===Ze.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${x}
        trackSwitch: ${T}
        contiguous: ${O}
        accurateTimeOffset: ${u}
        timeOffset: ${S}
        initSegmentChange: ${B}`);const U=new fle(n,i,t,o,h);this.configureTransmuxer(U)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:m,cmd:"demux",data:e,decryptdata:b,chunkMeta:c,state:N},e instanceof ArrayBuffer?[e]:[]);else if(y){const U=y.push(e,b,c,N);xf(U)?U.then(k=>{this.handleTransmuxComplete(k)}).catch(k=>{this.transmuxerError(k,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(U)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);xf(i)?i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const iM=100;class dle extends R_{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Ze.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(j.BUFFER_RESET,this.onBufferReset,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(j.BUFFER_RESET,this.onBufferReset,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s,trackId:a}){if(n===Ze.MAIN){const o=t.cc,u=this.fragCurrent;if(this.initPTS[o]={baseTime:i,timescale:s,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${i/s} (${i}/${s}) trackId: ${a}`),this.mainAnchor=t,this.state===Ge.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==o?(u.abortRequests(),this.syncWithAnchor(t,u)):this.state===Ge.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&i?.cc===t.cc)return;const s=(i||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),u=j3(a,s,o);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===Ge.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Ge.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(iM),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ge.IDLE):this.state=Ge.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Ge.IDLE:this.doTickIdle();break;case Ge.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e?.[t],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Ge.WAITING_INIT_PTS}break}case Ge.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Ge.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:s}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Ge.FRAG_LOADING;const o=i.flush().buffer,u={frag:t,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=Ge.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:s}=this,a=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],u=o.details;if(!u||this.waitForLive(o)||this.waitForCdnTuneIn(u)){this.state=Ge.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,jt.AUDIO,Ze.AUDIO));const h=this.getFwdBufferInfo(c,Ze.AUDIO);if(h===null)return;if(!this.switchingTrack&&this._streamEnded(h,u)){t.trigger(j.BUFFER_EOS,{type:"audio"}),this.state=Ge.ENDED;return}const d=h.len,g=t.maxBufferLength,m=u.fragments,y=m[0].start,S=this.getLoadPosition(),b=this.flushing?S:h.end;if(this.switchingTrack&&i){const T=S;u.PTSKnown&&T<y&&(h.end>y||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=y+.05)}if(d>=g&&!this.switchingTrack&&b<m[m.length-1].start)return;let E=this.getNextFragment(b,u);if(E&&this.isLoopLoading(E,b)&&(E=this.getNextFragmentLoopLoading(E,u,h,Ze.MAIN,g)),!E){this.bufferFlushed=!0;return}let x=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&x&&fr(E)&&!E.endList&&(!u.live||!this.loadingParts&&b<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(x)===_r.OK&&(this.mainFragLoading=x=null),x&&fr(x))){if(E.start>x.end){const w=this.fragmentTracker.getFragAtPos(b,Ze.MAIN);w&&w.end>x.end&&(x=w,this.mainFragLoading={frag:w,targetBufferTime:null})}if(E.start>x.end)return}this.loadFragment(E,o,b)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new vf(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ge.STOPPED&&(this.setInterval(iM),this.state=Ge.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(j.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:s,id:a,groupId:o,track:u}=t;if(!i){this.warn(`Audio tracks reset while loading track ${a} "${u.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${u.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const h=i[a];let d=0;if(s.live||(n=h.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(h.details){var g;d=this.alignPlaylists(s,h.details,(g=this.levelLastLoaded)==null?void 0:g.details)}s.alignedSliding||(n$(s,c),s.alignedSliding||Lg(s,c),d=s.fragmentStart)}h.details=s,this.levelLastLoaded=h,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(j.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.state===Ge.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Ge.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:s}=e,{config:a,trackId:o,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=u[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const h=c.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new T$(this.hls,Ze.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const m=this.initPTS[n.cc],y=(t=n.initSegment)==null?void 0:t.data;if(m!==void 0){const b=i?i.index:-1,E=b!==-1,x=new w_(n.level,n.sn,n.stats.chunkCount,s.byteLength,b,E);g.push(s,y,d,"",n,i,h.totalduration,!1,x,m)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${h.startSN} ,${h.endSN}],track ${o}`);const{cache:S}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new i$,complete:!1};S.push(new Uint8Array(s)),this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Ze.MAIN&&fr(t.frag)&&(this.mainFragLoading=t,this.state===Ge.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Ze.AUDIO){!this.audioOnly&&n.type===Ze.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(fr(n)){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(j.AUDIO_TRACK_SWITCHED,Rt({},s)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case Te.FRAG_GAP:case Te.FRAG_PARSING_ERROR:case Te.FRAG_DECRYPT_ERROR:case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ze.AUDIO,t);break;case Te.AUDIO_TRACK_LOAD_ERROR:case Te.AUDIO_TRACK_LOAD_TIMEOUT:case Te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===yt.AUDIO_TRACK&&(this.state=Ge.IDLE);break;case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case Te.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==jt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==jt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ge.ENDED&&(this.state=Ge.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Ze.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:u,part:c,level:h}=o,{details:d}=h,{audio:g,text:m,id3:y,initSegment:S}=s;if(this.fragContextChanged(u)||!d){this.fragmentTracker.removeFragment(u);return}if(this.state=Ge.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),S!=null&&S.tracks){const b=u.initSegment||u;if(this.unhandledEncryptionError(S,u))return;this._bufferInitSegment(h,S.tracks,b,a),i.trigger(j.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:n,tracks:S.tracks})}if(g){const{startPTS:b,endPTS:E,startDTS:x,endDTS:T}=g;c&&(c.elementaryStreams[jt.AUDIO]={startPTS:b,endPTS:E,startDTS:x,endDTS:T}),u.setElementaryStreamInfo(jt.AUDIO,b,E,x,T),this.bufferFragmentData(g,u,c,a)}if(y!=null&&(t=y.samples)!=null&&t.length){const b=Mt({id:n,frag:u,details:d},y);i.trigger(j.FRAG_PARSING_METADATA,b)}if(m){const b=Mt({id:n,frag:u,details:d},m);i.trigger(j.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const s=t.audio;s.id=Ze.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(j.BUFFER_CODECS,t);const o=s.initSegment;if(o!=null&&o.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(j.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===_r.NOT_LOADED||i===_r.PARTIAL){var s;if(!fr(e))this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ge.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&Lg(t.details,a)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;Vo({name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},e,Mo)||(_g(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(j.AUDIO_TRACK_SWITCHED,Rt({},e))}}class B_ extends _i{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const o=i[a];let u;try{u=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),u=o.URI||""}if(u===e){s=a;break}else u===e.substring(0,u.length)&&(s=a)}if(s!==-1){const a=i[s],o=parseInt(a["LAST-MSN"])||t.lastPartSn;let u=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&h>t.partTarget&&(u+=1)}const c=n&&bk(n);return new Sk(o,u>=0?u:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;i.advancedDateTime=Date.now()-o;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const h=Math.max(u||0,0);i.appliedTimelineOffset=h,i.fragments.forEach(d=>{d.setStart(d.playlistOffset+h)})}if(i.live||n!=null&&n.live){const h="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){soe(n,i,this);const x=i.playlistParsingError;if(x){this.warn(x);const T=this.hls;if(!T.config.ignorePlaylistParsingErrors){var c;const{networkDetails:w}=t;T.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:x,reason:x.message,level:t.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:w,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,g=d?d.end-d.len:0,m=(i.edge-g)*1e3,y=Z3(i,m);if(i.requestScheduled+y<a?i.requestScheduled=a:i.requestScheduled+=y,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let S,b,E;if(i.canBlockReload&&i.endSN&&i.advanced){const x=this.hls.config.lowLatencyMode,T=i.lastPartSn,w=i.endSN,_=i.lastPartIndex,R=_!==-1,O=T===w;R?O?(b=w+1,E=x?0:_):(b=T,E=x?_+1:i.maxPartIndex):b=w+1;const C=i.age,B=C+i.ageHeader;let N=Math.min(B-i.partTarget,i.targetduration*1.5);if(N>0){if(B>i.targetduration*3)this.log(`Playlist last advanced ${C.toFixed(2)}s ago. Omitting segment and part directives.`),b=void 0,E=void 0;else if(n!=null&&n.tuneInGoal&&B-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${N} with playlist age: ${i.age}`),N=0;else{const U=Math.floor(N/i.targetduration);if(b+=U,E!==void 0){const k=Math.round(N%i.targetduration/i.partTarget);E+=k}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${C.toFixed(2)}s goal: ${N} skip sn ${U} to part ${E}`)}i.tuneInGoal=N}if(S=this.getDeliveryDirectives(i,t.deliveryDirectives,b,E),x||!O){i.requestScheduled=a,this.loadingPlaylist(h,S);return}}else(i.canBlockReload||i.canSkipUntil)&&(S=this.getDeliveryDirectives(i,t.deliveryDirectives,b,E));S&&b!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(y-o*2,y/2)),this.scheduleLoading(h,S,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const s=self.performance.now(),a=i.requestScheduled;if(s>=a){this.loadingPlaylist(e,t);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,n,i){let s=bk(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=xp.No),new Sk(n,i,s)}checkRetry(e){const t=e.details,n=wg(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},u=!!i&&!!o&&(s===qr.RetryRequest||!i.resolved&&s===qr.SendAlternateToPenaltyBox);if(u){var c;if(a>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=A_(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function A$(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Ef(r[t].attrs,e[t].attrs))return!1;return!0}function Ef(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function uT(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class ple extends B_{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(j.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(g=>!n||n.indexOf(g.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(g=>g.default)&&(this.selectDefaultTrack=!1),o.forEach((g,m)=>{g.id=m});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const u=this.hls.config.audioPreference;if(!s&&u){const g=es(u,o,Mo);if(g>-1)s=o[g];else{const m=es(u,this.tracks);s=this.tracks[m]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const h={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(j.AUDIO_TRACKS_UPDATED,h);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(g.message),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}}onError(e,t){t.fatal||!t.context||t.context.type===yt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Vo(e,i,Mo))return i;const s=es(e,this.tracksInGroup,Mo);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=wae(e,t.levels,n,a,Mo);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=es(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(j.AUDIO_TRACK_SWITCHING,Rt({},i)),s))return;const a=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Vo(e,i,Mo)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:u}=e;for(let c=0;c<t.length;c++){const h=t[c];if(Vo({name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:u},h,Mo))return c}for(let c=0;c<t.length;c++){const h=t[c];if(Ef(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const h=t[c];if(Ef(e.attrs,h.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&_g(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(j.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class gle{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(s){var n;if(i.onError(s),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const sM=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,_$="HlsJsTrackRemovedError";class mle extends Error{constructor(e){super(e),this.name=_$}}class yle extends _i{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:s}=this;n&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(j.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=jse(ro(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.BUFFER_RESET,this.onBufferReset,this),e.on(j.BUFFER_APPENDING,this.onBufferAppending,this),e.on(j.BUFFER_CODECS,this.onBufferCodecs,this),e.on(j.BUFFER_EOS,this.onBufferEos,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.FRAG_PARSED,this.onFragParsed,this),e.on(j.FRAG_CHANGED,this.onFragChanged,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.BUFFER_RESET,this.onBufferReset,this),e.off(j.BUFFER_APPENDING,this.onBufferAppending,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.BUFFER_EOS,this.onBufferEos,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.FRAG_PARSED,this.onFragParsed,this),e.off(j.FRAG_CHANGED,this.onFragChanged,this),e.off(j.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?Mt(n,i.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(n[a]=Mt({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const i=ro(this.appendSource);if(i){const s=!!t.mediaSource;(s||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(a),s)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&a instanceof u,aM(n),vle(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,s=i?Object.keys(i):null,a=s?s.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${$t(n,(u,c)=>u==="initSegment"?void 0:c)};
transfer tracks: ${$t(i,(u,c)=>u==="initSegment"?void 0:c)}}`),!x3(i,n)){t.mediaSource=null,t.tracks=void 0;const u=e.currentTime,c=this.details,h=Math.max(u,c?.fragments[0].start||0);if(h-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${h}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${h} currentTime: ${u}`),this.onMediaDetaching(j.MEDIA_DETACHING,{}),this.onMediaAttaching(j.MEDIA_ATTACHING,t),e.currentTime=h;return}this.transferData=void 0,s.forEach(u=>{const c=u,h=i[c];if(h){const d=h.buffer;if(d){const g=this.fragmentTracker,m=h.id;if(g.hasFragments(m)||g.hasParts(m)){const b=ft.getBuffered(d);g.detectEvictedFragments(c,b,m,null,!0)}const y=Fb(c),S=[c,d];this.sourceBuffers[y]=S,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,h)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const u=s.sourceBuffers;for(let c=u.length;c--;)o&&u[c].abort(),s.removeSourceBuffer(u[c]);o&&s.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(i.removeAttribute("src"),this.appendSource&&aM(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(j.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Fb(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new gle(this.tracks)}onBufferCodecs(e,t){var n;const i=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),o=!a&&this.sourceBufferCount&&this.media&&s.some(u=>!i[u]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(u=>{var c,h;const d=t[u],{id:g,codec:m,levelCodec:y,container:S,metadata:b,supplemental:E}=d;let x=i[u];const T=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[u],w=T!=null&&T.buffer?T:x,_=w?.pendingCodec||w?.codec,R=w?.levelCodec;x||(x=i[u]={buffer:void 0,listeners:[],codec:m,supplemental:E,container:S,levelCodec:y,metadata:b,id:g});const O=Sp(_,R),C=O?.replace(sM,"$1");let B=Sp(m,y);const N=(h=B)==null?void 0:h.replace(sM,"$1");B&&O&&C!==N&&(u.slice(0,5)==="audio"&&(B=Tg(B,this.appendSource)),this.log(`switching codec ${_} to ${B}`),B!==(x.pendingCodec||x.codec)&&(x.pendingCodec=B),x.container=S,this.appendChangeType(u,S,B))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,s={label:`change-type=${i}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),a.codec=n,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,Ze.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&ft.isBuffered(u.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Ze.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:s,parent:a,frag:o,part:u,chunkMeta:c,offset:h}=t,d=c.buffering[s],{sn:g,cc:m}=o,y=self.performance.now();d.start=y;const S=o.stats.buffering,b=u?u.stats.buffering:null;S.start===0&&(S.start=y),b&&b.start===0&&(b.start=y);const E=n.audio;let x=!1;s==="audio"&&E?.container==="audio/mpeg"&&(x=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const T=n.video,w=T?.buffer;if(w&&g!=="initSegment"){const O=u||o,C=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(T.ending||T.ended)){const N=O.start+O.duration*.05,U=w.buffered,k=this.currentOp("video");!U.length&&!k?this.blockAudio(O):!k&&!ft.isBuffered(w,N)&&this.lastVideoAppendEnd<N&&this.blockAudio(O)}else if(s==="video"){const B=O.end;if(C){const N=C.frag.start;(B>N||B<this.lastVideoAppendEnd||ft.isBuffered(w,N))&&this.unblockAudio()}this.lastVideoAppendEnd=B}}const _=(u||o).start,R={label:`append-${s}`,execute:()=>{var O;d.executeStart=self.performance.now();const C=(O=this.tracks[s])==null?void 0:O.buffer;C&&(x?this.updateTimestampOffset(C,_,.1,s,g,m):h!==void 0&&Ye(h)&&this.updateTimestampOffset(C,h,1e-6,s,g,m)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const O=self.performance.now();d.executeEnd=d.end=O,S.first===0&&(S.first=O),b&&b.first===0&&(b.first=O);const C={};this.sourceBuffers.forEach(([B,N])=>{B&&(C[B]=ft.getBuffered(N))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(j.BUFFER_APPENDED,{type:s,frag:o,part:u,chunkMeta:c,parent:o.type,timeRanges:C})},onError:O=>{var C;const B={type:nt.MEDIA_ERROR,parent:o.type,details:Te.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:u,chunkMeta:c,error:O,err:O,fatal:!1},N=(C=this.media)==null?void 0:C.error;if(O.code===DOMException.QUOTA_EXCEEDED_ERR||O.name=="QuotaExceededError"||"quota"in O)B.details=Te.BUFFER_FULL_ERROR;else if(O.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!N)B.errorAction=uu(!0);else if(O.name===_$&&this.sourceBufferCount===0)B.errorAction=uu(!0);else{const U=++this.appendErrors[s];this.warn(`Failed ${U}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${N||"no media error"})`),(U>=this.hls.config.appendErrorMaxRetry||N)&&(B.fatal=!0)}this.hls.trigger(j.ERROR,B)}};this.log(`queuing "${s}" append sn: ${g}${u?" p: "+u.index:""} of ${o.type===Ze.MAIN?"level":"track"} ${o.level} cc: ${m}`),this.append(R,s,this.isPending(this.tracks[s]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(j.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:s}=t;n?this.append(this.getFlushOp(n,i,s),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,i,s),a)})}onFragParsed(e,t){const{frag:n,part:i}=t,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[jt.AUDIOVIDEO]?s.push("audiovideo"):(a[jt.AUDIO]&&s.push("audio"),a[jt.VIDEO]&&s.push("video"));const o=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const c=i?i.stats:n.stats;this.hls.trigger(j.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(j.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(j.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===Te.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;Ye(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,s=n.currentTime,a=t.levelTargetDuration,o=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Ye(o)&&o>=0){const c=Math.max(o,a),h=Math.floor(s/a)*a-c;this.flushBackBuffer(s,a,h)}const u=i.frontBufferFlushThreshold;if(Ye(u)&&u>0){const c=Math.max(i.maxBufferLength,u),h=Math.max(c,a),d=Math.floor(s/a)*a+h;this.flushFrontBuffer(s,a,d)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const o=ft.getBuffered(s);if(o.length>0&&n>o.start(0)){var a;this.hls.trigger(j.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((a=this.details)!=null&&a.live)this.hls.trigger(j.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const a=ft.getBuffered(s),o=a.length;if(o<2)return;const u=a.start(o-1),c=a.end(o-1);if(n>u||e>=u&&e<=c)return;this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),h=Math.max(c,i);return{duration:1/0,start:c,end:h}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return Ye(s)?{duration:s}:null;const a=this.media.duration,o=Ye(n.duration)?n.duration:0;return i>o&&i>a||!Ye(a)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Ye(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${$t(n)}`),this.tracksReady){var i;const s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(j.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const u=this.getTrackCodec(o,a),c=`${o.container};codecs=${u}`;o.codec=u,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${$t(o)}`);try{const h=n.addSourceBuffer(c),d=Fb(a),g=[a,h];t[d]=g,o.buffer=h}catch(h){var i;this.error(`error while trying to add sourceBuffer: ${h.message}`),this.shiftAndExecuteNext(a),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[a],this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,sourceBufferName:a,mimeType:c,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&mf(n,"video")&&(i=oae(i,n));const s=Sp(i,e.levelCodec);return s?t.slice(0,5)==="audio"?Tg(s,this.appendSource):s:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(j.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.currentOp(e);s&&s.onError(i)}updateTimestampOffset(e,t,n,i,s,a){const o=t-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${s} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:i,mediaSource:s}=this,a=this.tracks[e],o=a?.buffer;if(!i||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=Ye(i.duration)?i.duration:1/0,c=Ye(s.duration)?s.duration:1/0,h=Math.max(0,t),d=Math.min(n,u,c);d>h&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${h},${d}] from the ${e} SourceBuffer`),o.remove(h,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n?.buffer;if(!i)throw new mle(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const s=i.buffer;if(!s)return;const a=n.bind(this,e);i.listeners.push({event:t,listener:a}),s.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function aM(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function vle(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function Fb(r){return r==="audio"?1:0}class U_{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(j.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.BUFFER_CODECS,this.onBufferCodecs,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(j.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Ye(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,U_.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(o,u)=>u?o.width!==u.width||o.height!==u.height:!0;let s=e.length-1;const a=Math.max(t,n);for(let o=0;o<e.length;o+=1){const u=e[o];if((u.width>=a||u.height>=a)&&i(u,e[o+1])){s=o;break}}return s}}const ble={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Rn=ble,Sle={HLS:"h"},xle=Sle;class ls{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof ls?n:new ls(n))),this.value=e,this.params=t}}const Ele="Dict";function Tle(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function Ale(r,e,t,n){return new Error(`failed to ${r} "${Tle(e)}" as ${t}`,{cause:n})}function us(r,e,t){return Ale("serialize",r,e,t)}class w${constructor(e){this.description=e}}const oM="Bare Item",_le="Boolean";function wle(r){if(typeof r!="boolean")throw us(r,_le);return r?"?1":"?0"}function Ile(r){return btoa(String.fromCharCode(...r))}const Ole="Byte Sequence";function Rle(r){if(ArrayBuffer.isView(r)===!1)throw us(r,Ole);return`:${Ile(r)}:`}const Lle="Integer";function Cle(r){return r<-999999999999999||999999999999999<r}function I$(r){if(Cle(r))throw us(r,Lle);return r.toString()}function Ple(r){return`@${I$(r.getTime()/1e3)}`}function O$(r,e){if(r<0)return-O$(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}const Dle="Decimal";function kle(r){const e=O$(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw us(r,Dle);const t=e.toString();return t.includes(".")?t:`${t}.0`}const Mle="String",Nle=/[\x00-\x1f\x7f]+/;function Ble(r){if(Nle.test(r))throw us(r,Mle);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Ule(r){return r.description||r.toString().slice(7,-1)}const jle="Token";function lM(r){const e=Ule(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw us(e,jle);return e}function cT(r){switch(typeof r){case"number":if(!Ye(r))throw us(r,oM);return Number.isInteger(r)?I$(r):kle(r);case"string":return Ble(r);case"symbol":return lM(r);case"boolean":return wle(r);case"object":if(r instanceof Date)return Ple(r);if(r instanceof Uint8Array)return Rle(r);if(r instanceof w$)return lM(r);default:throw us(r,oM)}}const Fle="Key";function fT(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw us(r,Fle);return r}function j_(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${fT(e)}`:`;${fT(e)}=${cT(t)}`).join("")}function R$(r){return r instanceof ls?`${cT(r.value)}${j_(r.params)}`:cT(r)}function $le(r){return`(${r.value.map(R$).join(" ")})${j_(r.params)}`}function Gle(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw us(r,Ele);const t=r instanceof Map?r.entries():Object.entries(r),n=e?.whitespace?" ":"";return Array.from(t).map(([i,s])=>{s instanceof ls||(s=new ls(s));let a=fT(i);return s.value===!0?a+=j_(s.params):(a+="=",Array.isArray(s.value)?a+=$le(s):a+=R$(s)),a}).join(`,${n}`)}function L$(r,e){return Gle(r,e)}const Ki="CMCD-Object",ar="CMCD-Request",Ro="CMCD-Session",$a="CMCD-Status",zle={br:Ki,ab:Ki,d:Ki,ot:Ki,tb:Ki,tpb:Ki,lb:Ki,tab:Ki,lab:Ki,url:Ki,pb:ar,bl:ar,tbl:ar,dl:ar,ltc:ar,mtp:ar,nor:ar,nrr:ar,rc:ar,sn:ar,sta:ar,su:ar,ttfb:ar,ttfbb:ar,ttlb:ar,cmsdd:ar,cmsds:ar,smrt:ar,df:ar,cs:ar,ts:ar,cid:Ro,pr:Ro,sf:Ro,sid:Ro,st:Ro,v:Ro,msd:Ro,bs:$a,bsd:$a,cdn:$a,rtp:$a,bg:$a,pt:$a,ec:$a,e:$a},Hle={REQUEST:ar};function Kle(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(i=>e[i]=t),e},{})}function qle(r,e){const t={};if(!r)return t;const n=Object.keys(r),i=e?Kle(e):{};return n.reduce((s,a)=>{var o;const u=zle[a]||i[a]||Hle.REQUEST,c=(o=s[u])!==null&&o!==void 0?o:s[u]={};return c[a]=r[a],s},t)}function Vle(r){return["ot","sf","st","e","sta"].includes(r)}function Wle(r){return typeof r=="number"?Ye(r):r!=null&&r!==""&&r!==!1}const C$="event";function Yle(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const _p=r=>Math.round(r),hT=(r,e)=>Array.isArray(r)?r.map(t=>hT(t,e)):r instanceof ls&&typeof r.value=="string"?new ls(hT(r.value,e),r.params):(e.baseUrl&&(r=Yle(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),Dd=r=>_p(r/100)*100,Xle=(r,e)=>{let t=r;return e.version>=2&&(r instanceof ls&&typeof r.value=="string"?t=new ls([r]):typeof r=="string"&&(t=[r])),hT(t,e)},Qle={br:_p,d:_p,bl:Dd,dl:Dd,mtp:Dd,nor:Xle,rtp:Dd,tb:_p},P$="request",D$="response",F_=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],Zle=["e"],Jle=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Om(r){return Jle.test(r)}function eue(r){return F_.includes(r)||Zle.includes(r)||Om(r)}const k$=["d","dl","nor","ot","rtp","su"];function tue(r){return F_.includes(r)||k$.includes(r)||Om(r)}const rue=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function nue(r){return F_.includes(r)||k$.includes(r)||rue.includes(r)||Om(r)}const iue=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function sue(r){return iue.includes(r)||Om(r)}const aue={[D$]:nue,[C$]:eue,[P$]:tue};function M$(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,i=e.reportingMode||P$,s=n===1?sue:aue[i];let a=Object.keys(r).filter(s);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const u=i===D$||i===C$;u&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const c=Mt({},Qle,e.formatters),h={version:n,reportingMode:i,baseUrl:e.baseUrl};return a.sort().forEach(d=>{let g=r[d];const m=c[d];if(typeof m=="function"&&(g=m(g,h)),d==="v"){if(n===1)return;g=n}d=="pr"&&g===1||(u&&d==="ts"&&!Ye(g)&&(g=Date.now()),Wle(g)&&(Vle(d)&&typeof g=="string"&&(g=new w$(g)),t[d]=g))}),t}function oue(r,e={}){const t={};if(!r)return t;const n=M$(r,e),i=qle(n,e?.customHeaderMap);return Object.entries(i).reduce((s,[a,o])=>{const u=L$(o,{whitespace:!1});return u&&(s[a]=u),s},t)}function lue(r,e,t){return Mt(r,oue(e,t))}const uue="CMCD";function cue(r,e={}){return r?L$(M$(r,e),{whitespace:!1}):""}function fue(r,e={}){if(!r)return"";const t=cue(r,e);return encodeURIComponent(t)}function hue(r,e={}){if(!r)return"";const t=fue(r,e);return`${uue}=${t}`}const uM=/CMCD=[^&#]+/;function due(r,e,t){const n=hue(e,t);if(!n)return r;if(uM.test(r))return r.replace(uM,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class pue{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Rn.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const{frag:s,part:a}=i,o=this.hls.levels[s.level],u=this.getObjectType(s),c={d:(a||s).duration*1e3,ot:u};(u===Rn.VIDEO||u===Rn.AUDIO||u==Rn.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(u)/1e3,c.bl=this.getBufferLength(u));const h=a?this.getNextPart(a):this.getNextFrag(s);h!=null&&h.url&&h.url!==s.url&&(c.nor=h.url),this.apply(i,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHED,this.onMediaDetached,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHED,this.onMediaDetached,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:xle.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Mt(t,this.createData());const n=t.ot===Rn.INIT||t.ot===Rn.VIDEO||t.ot===Rn.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((a,o)=>(i.includes(o)&&(a[o]=t[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),lue(e.headers,t,s)):e.url=due(e.url,t,s)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t;const{index:n,fragment:i}=e,s=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(s){const{sn:a}=i;for(let o=s.length-1;o>=0;o--){const u=s[o];if(u.index===n&&u.fragment.sn===a)return s[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Rn.TIMED_TEXT;if(e.sn==="initSegment")return Rn.INIT;if(t==="audio")return Rn.AUDIO;if(t==="main")return this.hls.audioTracks.length?Rn.VIDEO:Rn.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===Rn.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}return n.forEach(s=>{s.bitrate>t&&(t=s.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===Rn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:ft.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}}const gue=3e5;class mue extends _i{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===qr.SendAlternateToPenaltyBox&&n.flags===Vn.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:u,type:c}=t.context;o&&i?a=this.getPathwayForGroupId(o,c,a):u&&(a=u)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),t.details===Te.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${$t(s)} penalized: ${$t(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>gue&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,u=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,t$(t),this.hls.trigger(j.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];u&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(t===yt.AUDIO_TRACK&&i[s].hasAudioGroup(e)||t===yt.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":u}=s;if(t.some(h=>h.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(h=>{const d=new er(h.attrs);d["PATHWAY-ID"]=a;const g=d.AUDIO&&`${d.AUDIO}_clone_${a}`,m=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;g&&(n[d.AUDIO]=g,d.AUDIO=g),m&&(i[d.SUBTITLES]=m,d.SUBTITLES=m);const y=N$(h.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),S=new vf({attrs:d,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:y,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let b=1;b<h.audioGroups.length;b++)S.addGroupId("audio",`${h.audioGroups[b]}_clone_${a}`);if(h.subtitleGroups)for(let b=1;b<h.subtitleGroups.length;b++)S.addGroupId("text",`${h.subtitleGroups[b]}_clone_${a}`);return S});t.push(...c),cM(this.audioTracks,n,u,a),cM(this.subtitleTracks,i,u,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+h)}const s={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(h,d,g,m)=>{this.log(`Loaded steering manifest: "${i}"`);const y=h.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":S,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":E}=y;if(S)try{this.uri=new self.URL(S,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${S}`);return}this.scheduleRefresh(this.uri||g.url),b&&this.clonePathways(b);const x={steeringManifest:y,url:i.toString()};this.hls.trigger(j.STEERING_MANIFEST_LOADED,x),E&&this.updatePathwayPriority(E)},onError:(h,d,g,m)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${d.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let y=this.timeToLoad*1e3;if(h.code===429){const S=this.loader;if(typeof S?.getResponseHeader=="function"){const b=S.getResponseHeader("Retry-After");b&&(y=parseFloat(b)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,y)},onTimeout:(h,d,g)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,u,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function cM(r,e,t,n){r&&Object.keys(e).forEach(i=>{const s=r.filter(a=>a.groupId===i).map(a=>{const o=Mt({},a);return o.details=void 0,o.attrs=new er(o.attrs),o.url=o.attrs.URI=N$(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...s)})}function N$(r,e,t,n){const{HOST:i,PARAMS:s,[t]:a}=n;let o;e&&(o=a?.[e],o&&(r=o));const u=new self.URL(r);return i&&!o&&(u.host=i),s&&Object.keys(s).sort().forEach(c=>{c&&u.searchParams.set(c,s[c])}),u.href}class fu extends _i{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=fu.CDMCleanupPromise?[fu.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,s=`"${t.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=zc(this.config));const o=a.map(Pb).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=Ep(a);if(n!=="sinf"||o!==tr.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let u;try{const m=Tr(new Uint8Array(i)),y=O_(JSON.parse(m).sinf),S=L3(y);if(!S)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(S.subarray(8,24))}catch(m){this.warn(`${s} Failed to parse sinf: ${m}`);return}const c=Vr(u),{keyIdToKeySessionPromise:h,mediaKeySessions:d}=this;let g=h[c];for(let m=0;m<d.length;m++){const y=d[m],S=y.decryptdata;if(!S.keyId)continue;const b=Vr(S.keyId);if(Og(u,S.keyId)||S.uri.replace(/-/g,"").indexOf(c)!==-1){if(g=h[b],!g)continue;if(S.pssh)break;delete h[b],S.pssh=new Uint8Array(i),S.keyId=u,g=h[c]=g.then(()=>this.generateRequestWithPreferredKeySession(y,n,i,"encrypted-event-key-match")),g.catch(E=>this.handleError(E));break}}g||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(j.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(j.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(j.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(j.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(j.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(j.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t?.[e];if(i)return i.licenseUrl;if(e===tr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,o,u)=>!!a&&u.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(n),s=t.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const u=c=>{const h=c.shift();this.getMediaKeysPromise(h,i,s).then(d=>a({keySystem:h,mediaKeys:d})).catch(d=>{c.length?u(c):d instanceof qn?o(d):o(new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return V3===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){var i;const s=Xae(e,t,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(i=a)==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${$t(s)}`),o=this.requestMediaKeySystemAccess(e,s);const u=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const h=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=u.mediaKeys=c.createMediaKeys().then(g=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,h.then(m=>m?this.setMediaKeysServerCertificate(g,e,m):g)));return d.catch(g=>{this.error(`Failed to create media-keys for "${e}"}: ${g}`)}),d})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Vr(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=kd(t),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Vr(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Pb(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const s=Pb(i);s?t(s):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=zc(this.config),n=e.map(Ep).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const i=yue(e,t[n]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,n=kd(t),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(t)==="internal-error"){const o=fM(i||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const s=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:u,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(u,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:c,decryptdata:t}))))).then(u=>{const c="cenc",h=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,c,h,"playlist-key")});return o.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return a.catch(o=>{if(o instanceof qn){const u=Rt({},o.data);this.getKeyStatus(t)==="internal-error"&&(u.decryptdata=t);const c=new qn(u,o.message);this.handleError(c,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof qn){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Vr(n.keyId||[])})`:""}`),this.hls.trigger(j.ERROR,e.data)}else this.error(e.message),this.hls.trigger(j.ERROR,{type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=kd(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=Ep(e.keyFormat),s=i?[i]:zc(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=zc(this.config)),e.length===0)throw new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${$t({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((s,a)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return a(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(s).catch(a)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var s;const a=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(a)try{const y=a.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=y.initData?y.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const o=kd(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${o} URI: ${u} (init data type: ${t} length: ${n.byteLength})`);const c=new L_,h=e._onmessage=y=>{const S=e.mediaKeysSession;if(!S){c.emit("error",new Error("invalid state"));return}const{messageType:b,message:E}=y;this.log(`"${b}" message event for session "${S.sessionId}" message size: ${E.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,E).catch(x=>{c.eventNames().length?c.emit("error",x):this.handleError(x)}):b==="license-release"?e.keySystem===tr.FAIRPLAY&&this.updateKeySession(e,iT("acknowledged")).then(()=>this.removeSession(e)).catch(x=>this.handleError(x)):this.warn(`unhandled media key message type "${b}"`)},d=(y,S)=>{S.keyStatus=y;let b;y.startsWith("usable")?c.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?b=fM(y,S.decryptdata):y==="expired"?b=new Error(`key expired (keyId: ${o})`):y==="released"?b=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${o})`),b&&(c.eventNames().length?c.emit("error",b):this.handleError(b))},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const b=this.getKeyStatuses(e);if(!Object.keys(b).some(w=>b[w]!=="status-pending"))return;if(b[o]==="expired"){this.log(`Expired key ${$t(b)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let x=b[o];if(x)d(x,e);else{var T;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(T=e.keyStatusTimeouts)[o]||(T[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const _=this.getKeyStatus(e.decryptdata);if(_&&_!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${_} from other session.`),d(_,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),x="internal-error",d(x,e)},1e3)),this.log(`No status for keyId ${o} (${$t(b)}).`)}};dn(e.mediaKeysSession,"message",h),dn(e.mediaKeysSession,"keystatuseschange",g);const m=new Promise((y,S)=>{c.on("error",S),c.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${u}`)}).catch(y=>{throw new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>m).catch(y=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const o=i;i=n,n=o}const s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===tr.PLAYREADY&&s.length===16){const o=Vr(s);t[o]=n,K3(s)}const a=Vr(s);n==="internal-error"&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const u={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,S)=>{a(g.data)},onError:(g,m,y,S)=>{o(new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Rt({url:u.url,data:void 0},g)},`"${e}" certificate request failed (${s}). Status: ${g.code} (${g.text})`))},onTimeout:(g,m,y)=>{o(new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(g,m,y)=>{o(new Error("aborted"))}};i.load(u,h,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),i(e)}).catch(a=>{s(new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let h;for(let d=0,g=s.length;d<g;d++){var a,o;h=s[d];const m=(a=h.querySelector("name"))==null?void 0:a.textContent,y=(o=h.querySelector("value"))==null?void 0:o.textContent;m&&y&&e.setRequestHeader(m,y)}}const u=i.querySelector("Challenge"),c=u?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return iT(atob(c))}setupLicenseXHR(e,t,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let u=o.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const c=this.config.licenseResponseCallback;if(c)try{u=c.call(this.hls,o,a,e)}catch(h){this.error(h)}i(u)}else{const u=n.errorRetry,c=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)s(new qn({type:nt.KEY_SYSTEM_ERROR,details:Te.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const h=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:u,licenseChallenge:c})=>{e.keySystem==tr.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(u,c)),u.send(c)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,dn(n,"encrypted",this.onMediaEncrypted),dn(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Dn(e,"encrypted",this.onMediaEncrypted),Dn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Za.clearKeyUriToKeyIdMap();const s=i.length;fu.CDMCleanupPromise=Promise.all(i.map(a=>this.removeSession(a)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{this.log(`Could not clear media keys: ${a}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))||Promise.resolve())).catch(a=>{this.log(`Could not close sessions and clear media keys: ${a}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Vr(i?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(c=>self.clearTimeout(a[c]));const{drmSystemOptions:o}=this.config;return(Zae(o)?new Promise((c,h)=>{self.setTimeout(()=>h(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(h)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}fu.CDMCleanupPromise=void 0;function kd(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return Vr(r.keyId)}function yue(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class qn extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function fM(r,e){const t=r==="output-restricted",n=t?Te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Te.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new qn({type:nt.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class vue{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(j.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(j.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,u=1e3*a/s,c=this.hls;if(c.trigger(j.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let h=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=h)&&(h=h-1,c.trigger(j.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:c.currentLevel}),c.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function B$(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function U$(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Ct.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){Ct.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function su(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function dT(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const s=Sue(r.cues,e,t);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&r.removeCue(s[a])}i==="disabled"&&(r.mode=i)}function bue(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t,s;for(;n<=i;)if(s=Math.floor((i+n)/2),e<r[s].startTime)i=s-1;else if(e>r[s].startTime&&n<t)n=s+1;else return s;return r[n].startTime-e<e-r[i].startTime?n:i}function Sue(r,e,t){const n=[],i=bue(r,e);if(i>-1)for(let s=i,a=r.length;s<a;s++){const o=r[s];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function wp(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class xue extends B_{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=wp(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")t=n[s];else if(n[s].mode==="showing"){t=n[s];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(j.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(j.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;wp(n.textTracks).forEach(a=>{su(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(a=>i?.indexOf(a)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,d)=>{h.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const h=es(o,a);if(h>-1)s=a[h];else{const d=es(o,this.tracks);s=this.tracks[d]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(j.SUBTITLE_TRACKS_UPDATED,c),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const s=t[i];if(!(n&&!s.default||!n&&!e)&&(!e||Vo(s,e)))return i}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(Ef(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(Ef(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(uT(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===yt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Vo(e,n))return n;const i=es(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=es(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(j.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=wp(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(s=>uT(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Ye(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(j.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:u,type:c,url:h}=i;this.hls.trigger(j.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:u,type:c,url:h});const d=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(d)}}function Eue(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?s:s&3|8).toString(16)})}}}function Yc(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const hu=.025;let Pg=(function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r})({});function Tue(r,e,t){return`${r.identifier}-${t+1}-${Yc(e)}`}class Aue{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return $b(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=$b(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Ye(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return $b(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<hu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Pg.Range:Pg.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return _ue(this)}}function $b(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<hu)?e.start:e.start+e.duration}function j$(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function Gb(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function _ue(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function ru(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class wue{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(j.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(t);this.interstitial=n,this.assetItem=i;const a=()=>{this.hasDetails=!0};s.once(j.LEVEL_LOADED,a),s.once(j.AUDIO_TRACK_LOADED,a),s.once(j.SUBTITLE_TRACK_LOADED,a),s.on(j.MEDIA_ATTACHING,(o,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(j.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,s.trigger(j.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=j$(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=ft.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=ft.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,n){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,n){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${ru(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const hM=.033;class Iue extends _i{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(s=i[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(t&&t!=="primary"&&(s=s[t]),e===s.start||e>s.start&&e<s.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const s=n[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let s=0;s<i;s++){const a=n[s];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&(t<o+(a.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,s=this.events,a=this.parseDateRanges(i,{url:n.url},t),o=Object.keys(i),u=s?s.filter(c=>!o.includes(c.identifier)):[];a.length&&a.sort((c,h)=>{const d=c.cue.pre,g=c.cue.post,m=h.cue.pre,y=h.cue.post;if(d&&!m)return-1;if(m&&!d||g&&!y)return 1;if(y&&!g)return-1;if(!d&&!m&&!g&&!y){const S=c.startTime,b=h.startTime;if(S!==b)return S-b}return c.dateRange.tagOrder-h.dateRange.tagOrder}),this.events=a,u.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,u)}updateSchedule(e,t=[],n=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const s=this.items,a=this.parseSchedule(i,e);(n||t.length||s?.length!==a.length||a.some((u,c)=>Math.abs(u.playout.start-s[c].playout.start)>.005||Math.abs(u.playout.end-s[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,n){const i=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],u=e[o];if(u.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(u):(c=new Aue(u,t),this.eventMap[o]=c,n===!1&&(c.appendInPlace=n)),i.push(c)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,s=i.live?1/0:i.edge;let a=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,t);let u=0,c=0;if(e.forEach((h,d)=>{const g=h.cue.pre,m=h.cue.post,y=e[d-1]||null,S=h.appendInPlace,b=m?s:h.startOffset,E=h.duration,x=h.timelineOccupancy===Pg.Range?E:0,T=h.resumptionOffset,w=y?.startTime===b,_=b+h.cumulativeDuration;let R=S?_+E:b+T;if(g||!m&&b<=0){const C=c;c+=x,h.timelineStart=_;const B=a;a+=E,n.push({event:h,start:_,end:R,playout:{start:B,end:a},integrated:{start:C,end:c}})}else if(b<=s){if(!w){const N=b-u;if(N>hM){const U=u,k=c;c+=N;const W=a;a+=N;const q={previousEvent:e[d-1]||null,nextEvent:h,start:U,end:U+N,playout:{start:W,end:a},integrated:{start:k,end:c}};n.push(q)}else N>0&&y&&(y.cumulativeDuration+=N,n[n.length-1].end=b)}m&&(R=_),h.timelineStart=_;const C=c;c+=x;const B=a;a+=E,n.push({event:h,start:_,end:R,playout:{start:B,end:a},integrated:{start:C,end:c}})}else return;const O=h.resumeTime;m||O>s?u=s:u=O}),u<s){var o;const h=u,d=c,g=s-u;c+=g;const m=a;a+=g,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:u,end:h+g,playout:{start:m,end:a},integrated:{start:d,end:c}})}this.setDurations(s,a,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let s=0,a=-1;e.forEach((o,u)=>{const c=o.cue.pre,h=o.cue.post,d=c?0:h?i:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=s:(s=0,a=d),!h&&o.snapOptions.in&&(o.resumeAnchor=Jo(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<hM&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const m=Ye(o.resumeOffset)?o.resumeOffset:o.duration;s+=m})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>hu?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(a=>{const o=t[a].details,u=o.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${u}`),!1;const c=Jo(null,o.fragments,n);if(!c)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const h=a==="audio"?.175:0;return Math.abs(c.start-n)<hu+h||Math.abs(c.end-n)<hu+h?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,s=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],u=t+n;o.startOffset=n,o.timelineStart=u,i||(i=o.duration===null),s||(s=!!o.error);const c=o.error?0:o.duration||0;n+=c}i&&!s?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ri(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class Oue{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=j$(n,this.hls.sessionId,e.baseUrl)}catch(g){const m=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_ERROR,g,n);this.hls.trigger(j.ERROR,m);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const s=this.hls.config,a=s.loader,o=new a(s),u={responseType:"json",url:i.href},c=s.interstitialAssetListLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,S)=>{const b=g.data,E=b?.ASSETS;if(!Array.isArray(E)){const x=this.assignAssetListError(e,Te.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,m,S);this.hls.trigger(j.ERROR,x);return}e.assetListResponse=b,this.hls.trigger(j.ASSET_LIST_LOADED,{event:e,assetListResponse:b,networkDetails:S})},onError:(g,m,y,S)=>{const b=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${g.code} ${g.text} (${m.url})`),m.url,S,y);this.hls.trigger(j.ERROR,b)},onTimeout:(g,m,y)=>{const S=this.assignAssetListError(e,Te.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${m.url})`),m.url,g,y);this.hls.trigger(j.ERROR,S)}};return o.load(u,h,d),this.hls.trigger(j.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,n,i,s,a){return e.error=n,{type:nt.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:a,stats:s}}}function dM(r){var e;r==null||(e=r.play())==null||e.catch(()=>{})}function Md(r,e){return`[${r}] Advancing timeline position to ${e}`}class Rue extends _i{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const a=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),a&&n<o.start||n>=o.end){var u;const m=this.findItemIndex(o);let y=this.schedule.findItemIndexAtTime(n);if(y===-1&&(y=m+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${n} (resolving from ${m} to ${y})`)),!this.isInterstitial(o)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!a&&y>m){const S=this.schedule.findJumpRestrictedIndex(m+1,y);if(S>m){this.setSchedulePosition(S);return}}this.setSchedulePosition(y);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const m=o.event.assetList[0];m&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,m))}return}const h=c.timelineStart,d=c.duration||0;if(a&&n<h||n>=h+d){var g;(g=o.event)!=null&&g.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,c)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,i)=>{const s=this.schedule;if(!s)return;const a=this.playingItem,o=s.events||[],u=s.items||[],c=s.durations,h=n.map(S=>S.identifier),d=!!(o.length||h.length);(d||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${u.map(S=>Ri(S))} pos: ${this.timelinePos}`),h.length&&this.log(`Removed events ${h}`);let g=null,m=null;a&&(g=this.updateItem(a,this.timelinePos),this.itemsMatch(a,g)?this.playingItem=g:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(m=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,m)?this.bufferingItem=m:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),n.forEach(S=>{S.assetList.forEach(b=>{this.clearAssetPlayer(b.identifier,null)})}),this.playerQueue.forEach(S=>{if(S.interstitial.appendInPlace){const b=S.assetItem.timelineStart,E=S.timelineOffset-b;if(E)try{S.timelineOffset=b}catch(x){Math.abs(E)>hu&&this.warn(`${x} ("${S.assetId}" ${S.timelineOffset}->${b})`)}}}),d||i){if(this.hls.trigger(j.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:u.slice(0),durations:c,removedIds:h}),this.isInterstitial(a)&&h.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(g,a),y&&m!==g&&this.trimInPlace(m,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Oue(e),this.schedule=new Iue(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(j.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(j.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(j.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(j.MEDIA_ENDED,this.onMediaEnded,this),e.on(j.ERROR,this.onError,this),e.on(j.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(j.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(j.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(j.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(j.BUFFER_CODECS,this.onBufferCodecs,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(j.MEDIA_ENDED,this.onMediaEnded,this),e.off(j.ERROR,this.onError,this),e.off(j.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Dn(e,"play",this.onPlay),Dn(e,"pause",this.onPause),Dn(e,"seeking",this.onSeeking),Dn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;dn(n,"seeking",this.onSeeking),dn(n,"timeupdate",this.onTimeupdate),dn(n,"play",this.onPlay),dn(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=d=>d&&e.getAssetPlayer(d.identifier),i=(d,g,m,y,S)=>{if(d){let b=d[g].start;const E=d.event;if(E){if(g==="playout"||E.timelineOccupancy!==Pg.Point){const x=n(m);x?.interstitial===E&&(b+=x.assetItem.startOffset+x[S])}}else{const x=y==="bufferedPos"?a():e[y];b+=x-d.start}return b}return 0},s=(d,g)=>{var m;if(d!==0&&g!=="primary"&&(m=e.schedule)!=null&&m.length){var y;const S=e.schedule.findItemIndexAtTime(d),b=(y=e.schedule.items)==null?void 0:y[S];if(b){const E=b[g].start-b.start;return d+E}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var g,m;return(g=e.primaryDetails)!=null&&g.live?e.primaryDetails.edge:((m=e.schedule)==null?void 0:m.durations[d])||0},u=(d,g)=>{var m,y;const S=e.effectivePlayingItem;if(S!=null&&(m=S.event)!=null&&m.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${g}"`);const b=e.effectivePlayingItem,E=e.schedule.findItemIndexAtTime(d,g),x=(y=e.schedule.items)==null?void 0:y[E],T=e.getBufferingPlayer(),w=T?.interstitial,_=w?.appendInPlace,R=b&&e.itemsMatch(b,x);if(b&&(_||R)){const O=n(e.playingAsset),C=O?.media||e.primaryMedia;if(C){const B=g==="primary"?C.currentTime:i(b,g,e.playingAsset,"timelinePos","currentTime"),N=d-B,U=(_?B:C.currentTime)+N;if(U>=0&&(!O||_||U<=O.duration)){C.currentTime=U;return}}}if(x){let O=d;if(g!=="primary"){const B=x[g].start,N=d-B;O=x.start+N}const C=!e.isInterstitial(x);if((!e.isInterstitial(b)||b.event.appendInPlace)&&(C||x.event.appendInPlace)){const B=e.media||(_?T?.media:null);B&&(B.currentTime=O)}else if(b){const B=e.findItemIndex(b);if(E>B){const U=e.schedule.findJumpRestrictedIndex(B+1,E);if(U>B){e.setSchedulePosition(U);return}}let N=0;if(C)e.timelinePos=O,e.checkBuffer();else{const U=x.event.assetList,k=d-(x[g]||x).start;for(let W=U.length;W--;){const q=U[W];if(q.duration&&k>=q.startOffset&&k<q.startOffset+q.duration){N=W;break}}}e.setSchedulePosition(E,N)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const g=t();return e.isInterstitial(g)?g:null},h={get bufferedEnd(){const d=t(),g=e.bufferingItem;if(g&&g===d){var m;return i(g,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-g.playout.start||((m=e.bufferingAsset)==null?void 0:m.startOffset)||0}return 0},get currentTime(){const d=c(),g=e.effectivePlayingItem;return g&&g===d?i(g,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-g.playout.start:0},set currentTime(d){const g=c(),m=e.effectivePlayingItem;m&&m===g&&u(d+m.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const g=(d=c())==null?void 0:d.event.assetList;return g?g.map(m=>e.getAssetPlayer(m.identifier)):[]},get playingIndex(){var d;const g=(d=c())==null?void 0:d.event;return g&&e.effectivePlayingAsset?g.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return c()?h:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){u(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){u(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,g=d?.event;if(g&&!g.restrictions.skip){const m=e.findItemIndex(d);if(g.appendInPlace){const y=d.playout.start+d.event.duration;u(y+.001,"playout")}else e.advanceAfterAssetEnded(g,m,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const s=(t=i)==null?void 0:t.currentTime;if(!(s===void 0||!Ye(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${$t(s)}`),this.detachedData=s}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let s=null;const a=this.hls,o=e!==a,u=o&&e.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource;let h;if(a.media)u&&(s=a.transferMedia(),this.detachedData=s),h="Primary";else if(c){const y=this.getBufferingPlayer();y?(s=y.transferMedia(),h=`${y}`):h="detached MediaSource"}else h="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${$t(s)}`);else if(!this.detachedData||a.media===t){const y=this.playerQueue;y.length>1&&y.forEach(S=>{if(o&&S.interstitial.appendInPlace!==u){const b=S.interstitial;this.clearInterstitial(S.interstitial,null),b.appendInPlace=!1,b.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${b}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",g=d&&s?s:t;this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${h} (media.currentTime: ${t.currentTime})`);const m=this.schedule;if(g===s&&m){const y=o&&e.assetId===m.assetIdAtEnd;g.overrides={duration:m.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(g)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const s=this.hls.startPosition;if(this.log(Md("checkStart",s)),this.timelinePos=s,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const s=e.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(e,t){const n=e.event,i=n.findAssetIndex(t),s=Gb(n,i);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,n){const i=Gb(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const s=this.schedule.items;if(s){const a=t+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(Md("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const s=e.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const i=t.parentIdentifier,s=n.getEvent(i);if(s){const a=n.findEventIndex(i),o=n.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,o-1)}}setSchedulePosition(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const s=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${s&&Ri(s)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const h=a.event,d=this.playingAsset,g=d?.identifier,m=g?this.getAssetPlayer(g):null;if(m&&g&&(!this.eventItemsMatch(a,s)||t!==void 0&&g!==h.assetList[t].identifier)){var u;const y=h.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${h.assetList.length} ${ru(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(j.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:h,schedule:i.slice(0),scheduleIndex:e,player:m}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(h,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(g,s),m.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&m.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${h} ${Ri(a)}`),h.hasPlayed=!0,this.hls.trigger(j.INTERSTITIAL_ENDED,{event:h,schedule:i.slice(0),scheduleIndex:e}),h.cue.once)){var c;this.updateSchedule();const y=(c=this.schedule)==null?void 0:c.items;if(s&&y){const S=this.findItemIndex(s);this.advanceSchedule(S,y,t,a,o)}return}}this.advanceSchedule(e,i,t,a,o)}advanceSchedule(e,t,n,i,s){const a=this.schedule;if(!a)return;const o=t[e]||null,u=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(h=>{const d=h.interstitial,g=a.findEventIndex(d.identifier);(g<e||g>e+1)&&this.clearInterstitial(d,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const h=o.event;if(n===void 0){n=a.findAssetIndex(h,this.timelinePos);const y=Gb(h,n-1);if(h.isAssetPastPlayoutLimit(y)||h.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(h,e,n);return}n=y}const d=this.waitingItem;this.assetsBuffered(o,u)||this.setBufferingItem(o);let g=this.preloadAssets(h,n);if(this.eventItemsMatch(o,d||i)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${Ri(o)} ${h.appendInPlace?"append in place":""}`),this.hls.trigger(j.INTERSTITIAL_STARTED,{event:h,schedule:t.slice(0),scheduleIndex:e})),!h.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${h}`);return}if(h.assetListLoader&&(h.assetListLoader.destroy(),h.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${h}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const m=h.assetList[n];if(!m){this.advanceAfterAssetEnded(h,e,n||0);return}if(g||(g=this.getAssetPlayer(m.identifier)),g===null||g.destroyed){const y=h.assetList.length;this.warn(`asset ${n+1}/${y} player destroyed ${h}`),g=this.createAssetPlayer(h,m,n),g.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&h.appendInPlace&&this.isAssetBuffered(m))return;this.startAssetPlayer(g,n,t,e,u),this.shouldPlay&&dM(g.media)}else o?(this.resumePrimary(o,e,i),this.shouldPlay&&dM(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ri(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(Md("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const a=(s=this.schedule)==null?void 0:s.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ri(e)}`),this.hls.trigger(j.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:ft.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Md("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(j.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(j.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const i=Rt(Rt({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Rt(Rt({},this.altSelection),{},{audio:n});return}const s=Rt(Rt({},i),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Rt(Rt({},this.altSelection),{},{subtitles:n});return}const s=Rt(Rt({},i),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(e,t){const n=Ek(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=Ek(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const s=t[i];if(s.cue.post){var n;const a=this.schedule.findEventIndex(s.identifier),o=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const s=this.findItemIndex(e,t);return i[s]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const n=e.end+.25,i=ft.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${Ri(e)} (was ${Ri(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const i=ft.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,t,n){const i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const h=this.findItemIndex(s),d=Math.min(h+1,t.length-1),g=t[d];if((u===-1&&s&&e>=s.end||(c=g.event)!=null&&c.appendInPlace&&e+.01>=g.start)&&(u=d),this.isInterstitial(s)){const m=s.event;if(d-o>1&&m.appendInPlace===!1||m.assetList.length===0&&m.assetListLoader)return}if(this.bufferedPos=e,u>h&&u>o)this.bufferedToItem(g);else{const m=this.primaryDetails;this.primaryLive&&m&&e>m.edge-m.targetduration&&g.start<m.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(g)&&this.preloadAssets(g.event,0)}}else n&&a&&!this.itemsMatch(a,s)&&(u===o?this.bufferedToItem(a):u===o+1&&this.bufferedToItem(t[u]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const s=this.getAssetPlayer(i.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:i,events:s}=n;if(!i||!s)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ri(e)}`+(t?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const c=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((h,d)=>{const g=this.getAssetPlayer(h.identifier);g&&(d===c&&g.loadSource(),g.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(j.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(i||!s){const a=this.preloadAssets(n,t);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,s=i===0&&!e.assetListLoader,a=e.cue.once;if(s){const u=e.timelineStart;if(e.appendInPlace){var o;const g=this.playingItem;!this.isInterstitial(g)&&(g==null||(o=g.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let c,h=0;if(!this.playingItem&&this.primaryLive&&(h=this.hls.startPosition,h===-1&&(h=this.hls.liveSyncPosition||0)),h&&!(e.cue.pre||e.cue.post)){const g=h-u;g>0&&(c=Math.round(g*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${c?` live-start: ${h} start-offset: ${c}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!a&&i){for(let c=t;c<i;c++){const h=e.assetList[c],d=this.getAssetPlayerQueueIndex(h.identifier);(d===-1||this.playerQueue[d].destroyed)&&!h.error&&this.createAssetPlayer(e,h,c)}const u=e.assetList[t];if(u){const c=this.getAssetPlayer(u.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(j.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,s,a){const o={parentIdentifier:e.identifier,identifier:Tue(e,a,t),duration:s,startOffset:n,timelineStart:i,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,n){const i=this.hls,s=i.userConfig;let a=s.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(a||o)&&(a=Mt({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const u=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const w=this.timelinePos-t.timelineStart;if(w>1){const _=t.duration;_&&w<_&&(h=w)}}const d=t.identifier,g=Rt(Rt({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:u||s.audioPreference,subtitlePreference:c||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));const m=g.cmcd;m!=null&&m.sessionId&&m.contentId&&(g.cmcd=Mt({},m,{contentId:Yc(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const y=new wue(this.HlsPlayerClass,g,e,t);this.playerQueue.push(y),e.assetList[n]=t;let S=!0;const b=w=>{if(w.live){var _;const C=new Error(`Interstitials MUST be VOD assets ${e}`),B={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:C},N=((_=this.schedule)==null?void 0:_.findEventIndex(e.identifier))||-1;this.handleAssetItemError(B,e,N,n,C.message);return}const R=w.edge-w.fragmentStart,O=t.duration;(S||O===null||R>O)&&(S=!1,this.log(`Interstitial asset "${d}" duration change ${O} > ${R}`),t.duration=R,this.updateSchedule())};y.on(j.LEVEL_UPDATED,(w,{details:_})=>b(_)),y.on(j.LEVEL_PTS_UPDATED,(w,{details:_})=>b(_)),y.on(j.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const E=(w,_)=>{const R=this.getAssetPlayer(d);if(R&&_.tracks){R.off(j.BUFFER_CODECS,E),R.tracks=_.tracks;const O=this.primaryMedia;this.bufferingAsset===R.assetItem&&O&&!R.media&&this.bufferAssetPlayer(R,O)}};y.on(j.BUFFER_CODECS,E);const x=()=>{var w;const _=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${_}`),!_||!this.schedule)return;const R=this.schedule.findEventIndex(e.identifier),O=(w=this.schedule.items)==null?void 0:w[R];this.isInterstitial(O)&&this.advanceAssetBuffering(O,t)};y.on(j.BUFFERED_TO_END,x);const T=w=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const R=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,R,w)};return y.once(j.MEDIA_ENDED,T(n)),y.once(j.PLAYOUT_LIMIT_REACHED,T(1/0)),y.on(j.ERROR,(w,_)=>{if(!this.schedule)return;const R=this.getAssetPlayer(d);if(_.details===Te.BUFFER_STALLED_ERROR){if(R!=null&&R.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(_,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${_.error} ${e}`)}),y.on(j.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const _=new Error(`Asset player destroyed unexpectedly ${d}`),R={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:_};this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),n,_.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${ru(t)}`),this.hls.trigger(j.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${t&&Ri(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,s){const{interstitial:a,assetItem:o,assetId:u}=e,c=a.assetList.length,h=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!h||h.identifier!==u)&&(h&&(this.clearAssetPlayer(h.identifier,n[i]),delete h.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${ru(o)}`),this.hls.trigger(j.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,t){var n,i;if(!this.schedule)return;const{interstitial:s,assetItem:a}=e,o=this.schedule.findEventIndex(s.identifier),u=(n=this.schedule.items)==null?void 0:n[o];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const h=s.appendInPlace;if(h&&c?.interstitial.appendInPlace===!1)return;const d=c?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(h&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!x3(d,e.tracks)){const g=new Error(`Asset ${ru(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),m={fatal:!0,type:nt.OTHER_ERROR,details:Te.INTERSTITIAL_ASSET_ITEM_ERROR,error:g},y=s.findAssetIndex(a);this.handleAssetItemError(m,s,o,y,g.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const i=n.currentTime,s=t.findAssetIndex(e,i),a=e.assetList[s];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const u=o.currentTime||i-a.timelineStart,c=o.duration-u;if(this.warn(`Stalled at ${u} of ${u+c} in ${o} ${e} (media.currentTime: ${i})`),u&&(c/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const h=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,h,s)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,i,s){if(e.details===Te.BUFFER_STALLED_ERROR)return;const a=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&ru(a)} ${e.error}`),!this.schedule)return;const o=a?.identifier||"",u=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[u]||null,h=this.schedule.items,d=Mt({},e,{fatal:!1,errorAction:uu(!0),asset:a,assetListIndex:i,event:t,schedule:h,scheduleIndex:n,player:c});if(this.hls.trigger(j.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const g=this.playingAsset,m=this.bufferingAsset,y=new Error(s);if(a&&(this.clearAssetPlayer(o,null),a.error=y),!t.assetList.some(S=>!S.error))t.error=y;else for(let S=i;S<t.assetList.length;S++)this.resetAssetPlayer(t.assetList[S].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):g&&g.identifier===o?this.advanceAfterAssetEnded(t,n,i):m&&m.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,m)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${Ri(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const a=this.updateItem(n,i);this.itemsMatch(n,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}onAssetListLoaded(e,t){var n,i;const s=t.event,a=s.identifier,o=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(a)))return;const u=s.timelineStart,c=s.duration;let h=0;o.forEach((S,b)=>{const E=parseFloat(S.DURATION);this.createAsset(s,b,h,u+h,E,S.URI),h+=E}),s.duration=h,this.log(`Loaded asset-list with duration: ${h} (was: ${c}) ${s}`);const d=this.waitingItem,g=d?.event.identifier===a;this.updateSchedule();const m=(i=this.bufferingItem)==null?void 0:i.event;if(g){var y;const S=this.schedule.findEventIndex(a),b=(y=this.schedule.items)==null?void 0:y[S];if(b){if(!this.playingItem&&this.timelinePos>b.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==S){s.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(b)}this.setSchedulePosition(S)}else if(m?.identifier===a){const S=s.assetList[0];if(S){const b=this.getAssetPlayer(S.identifier);if(m.appendInPlace){const E=this.primaryMedia;b&&E&&this.bufferAssetPlayer(b,E)}else b&&b.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case Te.ASSET_LIST_PARSING_ERROR:case Te.ASSET_LIST_LOAD_ERROR:case Te.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case Te.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const pM=500;class Lue extends R_{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Ze.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(j.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(j.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(j.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(j.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Ge.IDLE,this.setInterval(pM),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragContextChanged(n)||(fr(n)&&(this.fragPrevious=n),this.state=Ge.IDLE),!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let c=0;c<s.length;c++)if(o>=s[c].start&&o<=s[c].end){a=s[c];break}const u=n.start+n.duration;a?a.end=u:(a={start:o,end:u},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,Ze.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===Ze.SUBTITLE&&(t.details===Te.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&A$(this.levels,t)){this.levels=t.map(n=>new vf(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new vf(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ze.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Ge.STOPPED&&this.setInterval(pM)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:s}=this,{details:a,id:o}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const u=s[o];if(o>=s.length||!u)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(n=u.details)!=null&&n.live){if(a.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const g=d.fragments[0];if(!u.details)a.hasProgramDateTime&&d.hasProgramDateTime?(Lg(a,d),c=a.fragmentStart):g&&(c=g.start,aT(a,c));else{var h;c=this.alignPlaylists(a,u.details,(h=this.levelLastLoaded)==null?void 0:h.details),c===0&&g&&(c=g.start,aT(a,c))}d&&!this.startFragRequested&&this.setStartPosition(d,c)}u.details=a,this.levelLastLoaded=u,o===i&&(this.hls.trigger(j.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Ge.IDLE&&(Jo(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&cu(i.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,I_(i.method)).catch(o=>{throw s.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const u=performance.now();s.trigger(j.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:u}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=Ge.IDLE})}}doTick(){if(!this.media){this.state=Ge.IDLE;return}if(this.state===Ge.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,s=this.getLoadPosition(),a=ft.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:o,len:u}=a,c=n.details,h=this.hls.maxBufferLength+c.levelTargetDuration;if(u>h)return;const d=c.fragments,g=d.length,m=c.edge;let y=null;const S=this.fragPrevious;if(o<m){const x=i.maxFragLookUpTolerance,T=o>m-x?0:x;y=Jo(S,d,Math.max(d[0].start,o),T),!y&&S&&S.start<d[0].start&&(y=d[0])}else y=d[g-1];if(y=this.filterReplacedPrimary(y,n.details),!y)return;const b=y.sn-c.startSN,E=d[b-1];if(E&&E.cc===y.cc&&this.fragmentTracker.getState(E)===_r.NOT_LOADED&&(y=E),this.fragmentTracker.getState(y)===_r.NOT_LOADED){const x=this.mapToInitFragWhenRequired(y);x&&this.loadFragment(x,n,o)}}}loadFragment(e,t,n){fr(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Cue(this.tracksBuffered[this.currentTrackId]||[])}}class Cue{constructor(e){this.buffered=void 0;const t=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const Pue={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},F$=r=>String.fromCharCode(Pue[r]||r),Li=15,Ds=100,Due={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kue={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Mue={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Nue={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Bue=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Uue{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;Ct.log(`${this.time} [${e}] ${n}`)}}}const Lo=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class $${constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class jue{constructor(){this.uchar=" ",this.penState=new $$}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Fue{constructor(e){this.chars=[],this.pos=0,this.currPenState=new $$,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Ds;t++)this.chars.push(new jue);this.logger=e}equals(e){for(let t=0;t<Ds;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Ds;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Ds;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ds&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ds)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=F$(e);if(this.pos>=Ds){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Ds;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Ds;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class zb{constructor(e){this.rows=[],this.currRow=Li-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Li;t++)this.rows.push(new Fue(e));this.logger=e}reset(){for(let e=0;e<Li;e++)this.rows[e].clear();this.currRow=Li-1}equals(e){let t=!0;for(let n=0;n<Li;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Li;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Li;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+$t(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<Li;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,u=this.logger.time;if(o!==null&&u!==null&&o<u)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[s+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+$t(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let s=0;s<Li;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class gM{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new zb(n),this.nonDisplayedMemory=new zb(n),this.lastOutputScreen=new zb(n),this.currRollUpRow=this.displayedMemory.rows[Li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+$t(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class mM{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Gue(),this.logger=void 0;const i=this.logger=new Uue;this.channels=[null,new gM(e,t,i),new gM(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,s=t[n+1]&127;let a=!1,o=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+Lo([t[n],t[n+1]])+"] -> ("+Lo([i,s])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if($ue(i,s,u)){Nd(null,null,u),this.logger.log(3,()=>"Repeated command ("+Lo([i,s])+") is dropped");continue}Nd(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else Nd(null,null,u);if(!a&&(o=this.parseChars(i,s),o)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Lo([i,s])+" orig: "+Lo([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Lo([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(i||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?Due[e]:Mue[e]:n=a===1?kue[e]:Nue[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+F$(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Lo(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=Bue[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Nd(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Nd(r,e,t){t.a=r,t.b=e}function $ue(r,e,t){return t.a===r&&t.b===e}function Gue(){return{a:null,b:null}}var $_=(function(){if(Rg!=null&&Rg.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,u){if(typeof u!="string"||!Array.isArray(o))return!1;const c=u.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function s(o,...u){let c=1;for(;c<arguments.length;c++){const h=arguments[c];for(const d in h)o[d]=h[d]}return o}function a(o,u,c){const h=this,d={enumerable:!0};h.hasBeenReset=!1;let g="",m=!1,y=o,S=u,b=c,E=null,x="",T=!0,w="auto",_="start",R=50,O="middle",C=50,B="middle";Object.defineProperty(h,"id",s({},d,{get:function(){return g},set:function(N){g=""+N}})),Object.defineProperty(h,"pauseOnExit",s({},d,{get:function(){return m},set:function(N){m=!!N}})),Object.defineProperty(h,"startTime",s({},d,{get:function(){return y},set:function(N){if(typeof N!="number")throw new TypeError("Start time must be set to a number.");y=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",s({},d,{get:function(){return S},set:function(N){if(typeof N!="number")throw new TypeError("End time must be set to a number.");S=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",s({},d,{get:function(){return b},set:function(N){b=""+N,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",s({},d,{get:function(){return E},set:function(N){E=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",s({},d,{get:function(){return x},set:function(N){const U=n(N);if(U===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",s({},d,{get:function(){return T},set:function(N){T=!!N,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",s({},d,{get:function(){return w},set:function(N){if(typeof N!="number"&&N!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");w=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",s({},d,{get:function(){return _},set:function(N){const U=i(N);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");_=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",s({},d,{get:function(){return R},set:function(N){if(N<0||N>100)throw new Error("Position must be between 0 and 100.");R=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",s({},d,{get:function(){return O},set:function(N){const U=i(N);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");O=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",s({},d,{get:function(){return C},set:function(N){if(N<0||N>100)throw new Error("Size must be between 0 and 100.");C=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",s({},d,{get:function(){return B},set:function(N){const U=i(N);if(!U)throw new SyntaxError("An invalid or illegal string was specified.");B=U,this.hasBeenReset=!0}})),h.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a})();class zue{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function G$(r){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}let Hue=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}};function z$(r,e,t,n){const i=n?r.split(n):[r];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(t);if(a.length!==2)continue;const o=a[0],u=a[1];e(o,u)}}const pT=new $_(0,0,""),Bd=pT.align==="middle"?"middle":"center";function Kue(r,e,t){const n=r;function i(){const o=G$(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,u){const c=new Hue;z$(o,function(g,m){let y;switch(g){case"region":for(let S=t.length-1;S>=0;S--)if(t[S].id===m){c.set(g,t[S].region);break}break;case"vertical":c.alt(g,m,["rl","lr"]);break;case"line":y=m.split(","),c.integer(g,y[0]),c.percent(g,y[0])&&c.set("snapToLines",!1),c.alt(g,y[0],["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start",Bd,"end"]);break;case"position":y=m.split(","),c.percent(g,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start",Bd,"end","line-left","line-right","auto"]);break;case"size":c.percent(g,m);break;case"align":c.alt(g,m,["start",Bd,"end","left","right"]);break}},/:/,/\s/),u.region=c.get("region",null),u.vertical=c.get("vertical","");let h=c.get("line","auto");h==="auto"&&pT.line===-1&&(h=-1),u.line=h,u.lineAlign=c.get("lineAlign","start"),u.snapToLines=c.get("snapToLines",!0),u.size=c.get("size",100),u.align=c.get("align",Bd);let d=c.get("position","auto");d==="auto"&&pT.position===50&&(d=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=d}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=i(),a(),s(r,e)}function H$(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class que{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new zue,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let s=t.buffer,a=0;for(s=H$(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function i(s){z$(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=n();const o=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=n(),t.state){case"HEADER":/:/.test(s)?i(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new $_(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Kue(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Vue=/\r\n|\n\r|\n|\r/g,Hb=function(e,t,n=0){return e.slice(n,n+t.length)===t},Wue=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ye(t)||!Ye(n)||!Ye(i)||!Ye(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*s,t};function G_(r,e,t){return Yc(r.toString())+Yc(e.toString())+Yc(t)}const Yue=function(e,t,n){let i=e[t],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function Xue(r,e,t,n,i,s,a){const o=new que,u=ti(new Uint8Array(r)).trim().replace(Vue,`
`).split(`
`),c=[],h=e?rle(e.baseTime,e.timescale):0;let d="00:00.000",g=0,m=0,y,S=!0;o.oncue=function(b){const E=t[n];let x=t.ccOffset;const T=(g-h)/9e4;if(E!=null&&E.new&&(m!==void 0?x=t.ccOffset=E.start:Yue(t,n,T)),T){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}x=T-t.presentationOffset}const w=b.endTime-b.startTime,_=Wn((b.startTime+x-m)*9e4,i*9e4)/9e4;b.startTime=Math.max(_,0),b.endTime=Math.max(_+w,0);const R=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(R)),b.id||(b.id=G_(b.startTime,b.endTime,R)),b.endTime>0&&c.push(b)},o.onparsingerror=function(b){y=b},o.onflush=function(){if(y){a(y);return}s(c)},u.forEach(b=>{if(S)if(Hb(b,"X-TIMESTAMP-MAP=")){S=!1,b.slice(16).split(",").forEach(E=>{Hb(E,"LOCAL:")?d=E.slice(6):Hb(E,"MPEGTS:")&&(g=parseInt(E.slice(7)))});try{m=Wue(d)/1e3}catch(E){y=E}return}else b===""&&(S=!1);o.parse(b+`
`)}),o.flush()}const Kb="stpp.ttml.im1t",K$=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,q$=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Que={left:"start",center:"center",right:"end",start:"start",end:"end"};function yM(r,e,t,n){const i=mt(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>ti(o)),a=tle(e.baseTime,1,e.timescale);try{s.forEach(o=>t(Zue(o,a)))}catch(o){n(o)}}function Zue(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,g)=>(d[g]=i.getAttribute(`ttp:${g}`)||s[g],d),{}),o=i.getAttribute("xml:space")!=="preserve",u=vM(qb(i,"styling","style")),c=vM(qb(i,"layout","region")),h=qb(i,"body","[begin]");return[].map.call(h,d=>{const g=V$(d,o);if(!g||!d.hasAttribute("begin"))return null;const m=Wb(d.getAttribute("begin"),a),y=Wb(d.getAttribute("dur"),a);let S=Wb(d.getAttribute("end"),a);if(m===null)throw bM(d);if(S===null){if(y===null)throw bM(d);S=m+y}const b=new $_(m-e,S-e,g);b.id=G_(b.startTime,b.endTime,b.text);const E=c[d.getAttribute("region")],x=u[d.getAttribute("style")],T=Jue(E,x,u),{textAlign:w}=T;if(w){const _=Que[w];_&&(b.lineAlign=_),b.align=w}return Mt(b,T),b}).filter(d=>d!==null)}function qb(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function vM(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function V$(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var s;return n.nodeName==="br"&&i?t+`
`:(s=n.childNodes)!=null&&s.length?V$(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Jue(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),s.reduce((o,u)=>{const c=Vb(e,n,u)||Vb(r,n,u)||Vb(i,n,u);return c&&(o[u]=c),o},{})}function Vb(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function bM(r){return new Error(`Could not parse ttml timestamp ${r}`)}function Wb(r,e){if(!r)return null;let t=G$(r);return t===null&&(K$.test(r)?t=ece(r,e):q$.test(r)&&(t=tce(r,e))),t}function ece(r,e){const t=K$.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function tce(r,e){const t=q$.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Ud{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class rce{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xM(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(j.FRAG_LOADING,this.onFragLoading,this),e.on(j.FRAG_LOADED,this.onFragLoaded,this),e.on(j.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(j.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(j.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(j.FRAG_LOADING,this.onFragLoading,this),e.off(j.FRAG_LOADED,this.onFragLoaded,this),e.off(j.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(j.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(j.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(j.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ud(this,"textTrack1"),t=new Ud(this,"textTrack2"),n=new Ud(this,"textTrack3"),i=new Ud(this,"textTrack4");this.cea608Parser1=new mM(1,e,t),this.cea608Parser2=new mM(3,n,i)}addCues(e,t,n,i,s){let a=!1;for(let o=s.length;o--;){const u=s[o],c=nce(u[0],u[1],t,n);if(c>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),a=!0,c/(n-t)>.5))return}if(a||s.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger(j.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s,trackId:a}){const{unparsedVttFrags:o}=this;n===Ze.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(j.FRAG_LOADED,u):this.hls.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(SM(s,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,su(n[e]),B$(n[e],i);else{const u=this.createTextTrack("captions",s,a);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(j.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(s=>{su(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xM(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)su(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(s=>s.textCodec===Kb);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(A$(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?wp(a.textTracks):null;if(this.tracks.forEach((u,c)=>{let h;if(o){let d=null;for(let g=0;g<o.length;g++)if(o[g]&&SM(o[g],u)){d=o[g],o[g]=null;break}d&&(h=d)}if(h)su(h);else{const d=W$(u);h=this.createTextTrack(d,u.name,u.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),o!=null&&o.length){const u=o.filter(c=>c!==null).map(c=>c.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(j.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Ze.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:u,sn:c}=t.frag,h=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;s&&a&&(c!==o+1||c===o&&h!==this.lastPartIndex+1||u!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=u,this.lastSn=c,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===Ze.SUBTITLE)if(i.byteLength){const s=n.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===Kb?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;yM(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const u=this.hls,c=(t=n.initSegment)!=null&&t.data?Ti(n.initSegment.data,new Uint8Array(i)).buffer:i;Xue(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,h=>{this._appendCues(h,n.level),u.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},h=>{const d=h.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${h}`),!(d&&o>n.cc)&&u.trigger(j.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:h})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||yM(t,this.initPTS[e.cc],()=>{n.textCodec=Kb,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(s=>U$(i,s))}else{const i=this.tracks[t];if(!i)return;const s=i.default?"default":"subtitles"+t;n.trigger(j.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Ze.SUBTITLE&&this.onFragLoaded(j.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===Ze.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<i.length;s++){const a=i[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(i[s].pts,o[0]),this.cea608Parser2.addData(i[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(u=>dT(o[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(u=>dT(o[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],u=127&e[i++];if(o===0&&u===0)continue;if((4&a)!==0){const h=3&a;(h===0||h===1)&&(t[h].push(o),t[h].push(u))}}return t}}function W$(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function SM(r,e){return!!r&&r.kind===W$(e)&&uT(e,r)}function nce(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function xM(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const ice=/\s/,sce={newCue(r,e,t,n){const i=[];let s,a,o,u,c;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<n.rows.length;g++)if(s=n.rows[g],o=!0,u=0,c="",!s.isEmpty()){var d;for(let S=0;S<s.chars.length;S++)ice.test(s.chars[S].uchar)&&o?u++:(c+=s.chars[S].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const m=H$(c.trim()),y=G_(e,t,m);r!=null&&(d=r.cues)!=null&&d.getCueById(y)||(a=new h(e,t,m),a.id=y,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(a))}return r&&i.length&&(i.sort((g,m)=>g.line==="auto"||m.line==="auto"?0:g.line>8&&m.line>8?m.line-g.line:g.line-m.line),i.forEach(g=>U$(r,g))),i}};function ace(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const oce=/(\d+)-(\d+)\/(\d+)/;class EM{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||fce,this.controller=new self.AbortController,this.stats=new S_}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=lce(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=u&&Ye(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(xf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var g;this.response=this.loader=d;const m=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},c-(m-i.loading.start)),!d.ok){const{status:S,statusText:b}=d;throw new hce(b||"fetch, bad network response",S,d)}i.loading.first=m,i.total=cce(d.headers)||i.total;const y=(g=this.callbacks)==null?void 0:g.onProgress;return y&&Ye(t.highWaterMark)?this.loadProgressively(d,i,e,t.highWaterMark,y):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var g,m;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const S=d[o];S&&(i.loaded=i.total=S);const b={url:y.url,data:d,code:y.status},E=(g=this.callbacks)==null?void 0:g.onProgress;E&&!Ye(t.highWaterMark)&&E(i,e,d,y),(m=this.callbacks)==null||m.onSuccess(b,i,e,y)}).catch(d=>{var g;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const m=d&&d.code||0,y=d?d.message:null;(g=this.callbacks)==null||g.onError({code:m,text:y},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,s){const a=new i$,o=e.body.getReader(),u=()=>o.read().then(c=>{if(c.done)return a.dataLength&&s(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const h=c.value,d=h.length;return t.loaded+=d,d<i||a.dataLength?(a.push(h),a.dataLength>=i&&s(t,n,a.flush().buffer,e)):s(t,n,h.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function lce(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Mt({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function uce(r){const e=oce.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function cce(r){const e=r.get("Content-Range");if(e){const n=uce(e);if(Ye(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function fce(r,e){return new self.Request(r.url,e)}class hce extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const dce=/^age:\s*[\d.]+\s*$/im;class Y${constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new S_,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),s(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&Ye(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,h=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const y=h??t.response;if(y!=null){var a,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const S=t.responseType==="arraybuffer"?y.byteLength:y.length;n.loaded=n.total=S,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const b=(a=this.callbacks)==null?void 0:a.onProgress;b&&b(n,e,y,t);const E={url:t.responseURL,data:y,code:c};(o=this.callbacks)==null||o.onSuccess(E,n,e,t);return}}const d=s.loadPolicy.errorRetry,g=n.retry,m={url:e.url,data:void 0,code:c};if(Ig(d,g,!1,m))this.retry(d);else{var u;Ct.error(`${c} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:c,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Ig(e,t,!0))this.retry(e);else{var n;Ct.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=A_(e,n.retry),n.retry++,Ct.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&dce.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const pce={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},gce=Rt(Rt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Y$,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Iae,bufferController:yle,capLevelController:U_,errorController:Pae,fpsController:vue,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:V3,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:pce},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},mce()),{},{subtitleStreamController:Lue,subtitleTrackController:xue,timelineController:rce,audioStreamController:dle,audioTrackController:ple,emeController:fu,cmcdController:pue,contentSteeringController:mue,interstitialsController:Rue});function mce(){return{cueHandler:sce,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function yce(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=gT(r),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,u=e[o]===void 0,c=[];s.forEach(h=>{const d=`${a}Loading${h}`,g=e[d];if(g!==void 0&&u){c.push(d);const m=n[o].default;switch(e[o]={default:m},h){case"TimeOut":m.maxLoadTimeMs=g,m.maxTimeToFirstByteMs=g;break;case"MaxRetry":m.errorRetry.maxNumRetry=g,m.timeoutRetry.maxNumRetry=g;break;case"RetryDelay":m.errorRetry.retryDelayMs=g,m.timeoutRetry.retryDelayMs=g;break;case"MaxRetryTimeout":m.errorRetry.maxRetryDelayMs=g,m.timeoutRetry.maxRetryDelayMs=g;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${$t(e[o])}`)}),Rt(Rt({},n),e)}function gT(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(gT):Object.keys(r).reduce((e,t)=>(e[t]=gT(r[t]),e),{}):r}function vce(r,e){const t=r.loader;t!==EM&&t!==Y$?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):ace()&&(r.loader=EM,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Ip=2,bce=.1,Sce=.05,xce=100;class Ece extends G3{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(xce),this.mediaSource=t.mediaSource;const n=this.media=t.media;dn(n,"playing",this.onMediaPlaying),dn(n,"waiting",this.onMediaWaiting),dn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Dn(n,"playing",this.onMediaPlaying),Dn(n,"waiting",this.onMediaWaiting),Dn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const s=(n=this.hls)==null?void 0:n.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:o}=a,u=this.seeking&&!o,c=!this.seeking&&o,h=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!h&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||u){u&&this.stallResolved(e);return}if(h){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!1}));return}if(!ft.getBuffered(a).length){this.nudgeRetry=0;return}const d=ft.bufferInfo(a,e,0),g=d.nextStart||0,m=this.fragmentTracker;if(o&&m&&this.hls){const R=TM(this.hls.inFlightFragments,e),O=d.len>Ip,C=!g||R||g-e>Ip&&!m.getPartialFragment(e);if(O||C)return;this.moved=!1}const y=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&m){if(!(d.len>0)&&!g)return;const O=Math.max(g,d.start||0)-e,B=!!(y!=null&&y.live)?y.targetduration*2:Ip,N=jd(e,m);if(O>0&&(O<=B||N)){a.paused||this._trySkipBufferHole(N);return}}const S=s.detectStallWithCurrentTimeMs,b=self.performance.now(),E=this.waiting;let x=this.stalled;if(x===null)if(E>0&&b-E<S)x=this.stalled=E;else{this.stalled=b;return}const T=b-x;if(!o&&(T>=S||E)&&this.hls){var w;if(((w=this.mediaSource)==null?void 0:w.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(j.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const _=ft.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(_,T,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(j.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const s=ft.bufferedInfo(ft.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&t>=s.start){const a=ft.timeRangesToArray(i),o=ft.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const u=ft.bufferedInfo(a,e,0).bufferedIndex,c=a[o].end,h=a[o+1].start;if((u===-1||u>o)&&h-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${h} buffered index: ${u}`);this.warn(d.message),this.media.currentTime+=1e-6;let g=jd(e,this.fragmentTracker);g&&"fragment"in g?g=g.fragment:g||(g=void 0);const m=ft.bufferInfo(this.media,e,0);this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:g,buffer:m.len,bufferInfo:m})}}}}}_tryFixBufferStall(e,t,n){var i,s;const{fragmentTracker:a,media:o}=this,u=(i=this.hls)==null?void 0:i.config;if(!o||!a||!u)return;const c=(s=this.hls)==null?void 0:s.latestLevelDetails,h=jd(n,a);if((h||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(h)||!this.media))return;const d=e.buffered,g=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-n<u.maxBufferHole||g))&&(t>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const s=n.getFragAtPos(t,Ze.MAIN),a=n.getFragAtPos(i,Ze.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:s}=this;if(!i&&s!==null&&n&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${$t(e)})`);this.warn(a.message),t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,s=(t=this.hls)==null?void 0:t.config;if(!i||!n||!s)return 0;const a=i.currentTime,o=ft.bufferInfo(i,a,0),u=a<o.start?o.start:o.nextStart;if(u&&this.hls){const h=o.len<=s.maxBufferHole,d=o.len>0&&o.len<1&&i.readyState<3,g=u-a;if(g>0&&(h||d)){if(g>s.maxBufferHole){let y=!1;if(a===0){const S=n.getAppendedFrag(0,Ze.MAIN);S&&u<S.end&&(y=!0)}if(!y&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||TM(this.hls.inFlightFragments,u))return 0;let b=!1,E=e.end;for(;E<u;){const x=jd(E,n);if(x)E+=x.duration;else{b=!0;break}}if(b)return 0}}const m=Math.max(u+Sce,a+bce);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${m}`),this.moved=!0,i.currentTime=m,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${m}`),S={type:nt.MEDIA_ERROR,details:Te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?S.part=e:S.frag=e),this.hls.trigger(j.ERROR,S)}return m}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,s=t?.config;if(!n||!s)return 0;const a=n.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){const o=a+(i+1)*s.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(u.message),n.currentTime=o,t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function TM(r,e){const t=AM(r.main);if(t&&t.start<=e)return t;const n=AM(r.audio);return n&&n.start<=e?n:null}function AM(r){if(!r)return null;switch(r.state){case Ge.IDLE:case Ge.STOPPED:case Ge.ENDED:case Ge.ERROR:return null}return r.frag}function jd(r,e){return e.getAppendedFrag(r,Ze.MAIN)||e.getPartialFragment(r)}const Tce=.25;function mT(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Yb(r,e,t,n,i){let s=new r(e,t,"");try{s.value=n,i&&(s.type=i)}catch{s=new r(e,t,$t(i?Rt({type:i},n):n))}return s}const Fd=(()=>{const r=mT();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Ace{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(j.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(j.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&su(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return B$(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=mT();if(a)for(let o=0;o<s.length;o++){const u=s[o].type;if(u===Xn.emsg&&!n||!i)continue;const c=f$(s[o].data),h=s[o].pts;let d=h+s[o].duration;d>Fd&&(d=Fd),d-h<=0&&(d=h+Tce);for(let m=0;m<c.length;m++){const y=c[m];if(!h$(y)){this.updateId3CueEnds(h,u);const S=Yb(a,h,d,y,u);S&&this.id3Track.addCue(S)}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===t&&a.startTime<e&&a.endTime===Fd&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:u}}=a;if(s&&(o||u)){let c;i==="audio"?c=h=>h.type===Xn.audioId3&&u:i==="video"?c=h=>h.type===Xn.emsg&&o:c=h=>h.type===Xn.audioId3&&u||h.type===Xn.emsg&&o,dT(s,t,n,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:a}=this.hls.config;if(!s)return;const o=mT();if(n&&i&&!a){const{fragmentStart:S,fragmentEnd:b}=e;let E=this.assetCue;E?(E.startTime=S,E.endTime=b):o&&(E=this.assetCue=Yb(o,S,b,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),E&&(E.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(E),E.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:c}=e,h=Object.keys(c);let d=this.dateRangeCuesAppended;if(u&&t){var g;if((g=u.cues)!=null&&g.length){const S=Object.keys(d).filter(b=>!h.includes(b));for(let b=S.length;b--;){var m;const E=S[b],x=(m=d[E])==null?void 0:m.cues;delete d[E],x&&Object.keys(x).forEach(T=>{const w=x[T];if(w){w.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(w)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(h.length===0||!Ye(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let S=0;S<h.length;S++){const b=h[S],E=c[b],x=E.startTime,T=d[b],w=T?.cues||{};let _=T?.durationKnown||!1,R=Fd;const{duration:O,endDate:C}=E;if(C&&O!==null)R=x+O,_=!0;else if(E.endOnNext&&!_){const N=h.reduce((U,k)=>{if(k!==E.id){const W=c[k];if(W.class===E.class&&W.startDate>E.startDate&&(!U||E.startDate<U.startDate))return W}return U},null);N&&(R=N.startTime,_=!0)}const B=Object.keys(E.attr);for(let N=0;N<B.length;N++){const U=B[N];if(!Kae(U))continue;const k=w[U];if(k)_&&!(T!=null&&T.durationKnown)?k.endTime=R:Math.abs(k.startTime-x)>.01&&(k.startTime=x,k.endTime=R);else if(o){let W=E.attr[U];qae(U)&&(W=E3(W));const X=Yb(o,x,R,{key:U,data:W},Xn.dateRange);X&&(X.id=b,this.id3Track.addCue(X),w[U]=X,a&&(U==="X-ASSET-LIST"||U==="X-ASSET-URL")&&X.addEventListener("enter",this.onEventCueEnter))}}d[b]={cues:w,dateRange:E,durationKnown:_}}}}}class _ce{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const u=i-o,c=Math.min(this.maxLatency,o+n.targetduration);if(u<c&&u>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),g=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,m=Math.min(d,Math.max(1,g));this.changeMediaPlaybackRate(t,m)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,u=this.hls.userConfig;let c=o&&n||t;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:a*i);const h=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,h)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,s=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(j.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(j.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(j.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(j.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===Te.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class wce extends B_{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this),e.on(j.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this),e.off(j.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let o=!1,u=!1,c=!1;t.levels.forEach(h=>{const d=h.attrs;let{audioCodec:g,videoCodec:m}=h;g&&(h.audioCodec=g=Tg(g,n)||void 0),m&&(m=h.videoCodec=lae(m));const{width:y,height:S,unknownCodecs:b}=h,E=b?.length||0;if(o||(o=!!(y&&S)),u||(u=!!m),c||(c=!!g),E||g&&!this.isAudioSupported(g)||m&&!this.isVideoSupported(m)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:x,"FRAME-RATE":T,"HDCP-LEVEL":w,"PATHWAY-ID":_,RESOLUTION:R,"VIDEO-RANGE":O}=d,B=`${`${_||"."}-`}${h.bitrate}-${R}-${T}-${x}-${O}-${w}`;if(s[B])if(s[B].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const N=a[B]+=1;h.attrs["PATHWAY-ID"]=new Array(N+1).join(".");const U=this.createLevel(h);s[B]=U,i.push(U)}else s[B].addGroupId("audio",d.AUDIO),s[B].addGroupId("text",d.SUBTITLES);else{const N=this.createLevel(h);s[B]=N,a[B]=1,i.push(N)}}),this.filterAndSortMediaOptions(i,t,o,u,c)}createLevel(e){const t=new vf(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=k3(i,[])}return t}isAudioSupported(e){return mf(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return mf(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,s){var a;let o=[],u=[],c=e;const h=((a=t.stats)==null?void 0:a.parsing)||{};if((n||i)&&s&&(c=c.filter(({videoCodec:x,videoRange:T,width:w,height:_})=>(!!x||!!(w&&_))&&vae(T))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",T=x;t.levels.length&&(T=`one or more CODECS in variant not supported: ${$t(t.levels.map(_=>_.attrs.CODECS).filter((_,R,O)=>O.indexOf(_)===R))}`,this.warn(T),x+=` (${T})`);const w=new Error(x);this.hls.trigger(j.ERROR,{type:nt.MEDIA_ERROR,details:Te.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:w,reason:T})}}),h.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),_M(o)),t.subtitles&&(u=t.subtitles,_M(u));const d=c.slice(0);c.sort((x,T)=>{if(x.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&x.height!==T.height)return x.height-T.height;if(x.frameRate!==T.frameRate)return x.frameRate-T.frameRate;if(x.videoRange!==T.videoRange)return Ag.indexOf(x.videoRange)-Ag.indexOf(T.videoRange);if(x.videoCodec!==T.videoCodec){const w=mk(x.videoCodec),_=mk(T.videoCodec);if(w!==_)return _-w}if(x.uri===T.uri&&x.codecSet!==T.codecSet){const w=Eg(x.codecSet),_=Eg(T.codecSet);if(w!==_)return _-w}return x.averageBitrate!==T.averageBitrate?x.averageBitrate-T.averageBitrate:0});let g=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length)){for(let x=0;x<d.length;x++)if(d[x].pathwayId===c[0].pathwayId){g=d[x];break}}this._levels=c;for(let x=0;x<c.length;x++)if(c[x]===g){var m;this._firstLevel=x;const T=g.bitrate,w=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${T}`),((m=this.hls.userConfig)==null?void 0:m.abrEwmaDefaultEstimate)===void 0){const _=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);_>w&&w===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=_)}break}const y=s&&!i,S=this.hls.config,b=!!(S.audioStreamController&&S.audioTrackController),E={levels:c,audioTracks:o,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:i,altAudio:b&&!y&&o.some(x=>!!x.url)};h.end=performance.now(),this.hls.trigger(j.MANIFEST_PARSED,E)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:h,reason:h.message}),d)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&i&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const u={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(j.LEVEL_SWITCHING,u);const c=a.details;if(!c||c.live){const h=this.switchParams(a.uri,i?.details,c);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===yt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Ze.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:s}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let u=a.details;u===t.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,t,u)}else(n=t.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a?.age;this.log(`Loading level index ${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(j.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));t$(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(j.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(j.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function _M(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function X$(){return self.SourceBuffer||self.WebKitSourceBuffer}function Q$(){if(!ro())return!1;const e=X$();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Ice(){if(!Q$())return!1;const r=ro();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(yf(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(yf(e,"audio"))))}function Oce(){var r;const e=X$();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const Rce=100;class Lce extends R_{constructor(e,t,n){super(e,t,n,"stream-controller",Ze.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,s=i?i.currentTime:null;if(s===null||!Ye(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(i,s,Ze.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(j.MANIFEST_PARSED,this.onManifestParsed,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.LEVEL_LOADED,this.onLevelLoaded,this),e.on(j.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(j.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(j.BUFFER_CREATED,this.onBufferCreated,this),e.on(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(j.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(j.MANIFEST_PARSED,this.onManifestParsed,this),e.off(j.LEVEL_LOADED,this.onLevelLoaded,this),e.off(j.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(j.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(j.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(j.BUFFER_CREATED,this.onBufferCreated,this),e.off(j.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(j.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Rce),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ge.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Ge.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ge.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e?.[t],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Ge.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Ge.IDLE;break}break}case Ge.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Ge.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(o,u)){const S={};this.altAudio===2&&(S.type="video"),this.hls.trigger(j.BUFFER_EOS,S),this.state=Ge.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===Ge.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=Ge.WAITING_LEVEL,this.startFragRequested=!1;return}const h=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(h>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:o.end;let m=this.getNextFragment(g,c);if(this.couldBacktrack&&!this.fragPrevious&&m&&fr(m)&&this.fragmentTracker.getState(m)!==_r.OK){var y;const b=((y=this.backtrackFragment)!=null?y:m).sn-c.startSN,E=c.fragments[b-1];E&&m.cc===E.cc&&(m=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,g)){if(!m.gap){const b=this.audioOnly&&!this.altAudio?jt.AUDIO:jt.VIDEO,E=(b===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,b,Ze.MAIN)}m=this.getNextFragmentLoopLoading(m,c,o,Ze.MAIN,d)}m&&(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,a,g))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===_r.NOT_LOADED||i===_r.PARTIAL?fr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Ze.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,u=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*c)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const u=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,h=Math.max(a.end,u+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ge.KEY_LOADING:case Ge.FRAG_LOADING:case Ge.FRAG_LOADING_WAITING_RETRY:case Ge.PARSING:case Ge.PARSED:this.state=Ge.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;dn(n,"playing",this.onMediaPlaying),dn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Dn(n,"playing",this.onMediaPlaying),Dn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(j.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;for(let s=0;s<t.levels.length;s++){const a=t.levels[s].audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!Oce(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Ge.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Ge.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:s}=this,a=t.level,o=t.details,u=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${u}`);const c=t.levelInfo,h=this.fragCurrent;h&&(this.state===Ge.FRAG_LOADING||this.state===Ge.FRAG_LOADING_WAITING_RETRY)&&h.level!==t.level&&h.loader&&this.abortCurrentFrag();let d=0;if(o.live||(n=c.details)!=null&&n.live){var g;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details,(g=this.levelLastLoaded)==null?void 0:g.details)}if(c.details=o,this.levelLastLoaded=c,s||this.setStartPosition(o,d),this.hls.trigger(j.LEVEL_UPDATED,{details:o,level:a}),this.state===Ge.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Ge.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,u=s>=a-t.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!u)){const h=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!u&&n.readyState<4||s<o-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const d=ft.bufferInfo(n,i,0);if(!((c=d.buffered)!=null&&c.length)){n.currentTime=i;return}if(d.start<=s){n.currentTime=i;return}const{nextStart:m}=ft.bufferedInfo(d.buffered,s,0);m&&(n.currentTime=m)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const u=o.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,h=u.PTSKnown||!u.live,d=(t=n.initSegment)==null?void 0:t.data,g=this._getAudioCodec(o),m=this.transmuxer=this.transmuxer||new T$(this.hls,Ze.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=i?i.index:-1,S=y!==-1,b=new w_(n.level,n.sn,n.stats.chunkCount,s.byteLength,y,S),E=this.initPTS[n.cc];m.push(s,d,g,c,n,i,u.totalduration,h,b,E)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio!==0;if(_g(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(j.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(j.AUDIO_TRACK_SWITCHED,t)}),n.trigger(j.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(j.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=_g(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,s,a=!1;for(const o in n){const u=n[o];if(u.id==="main"){if(s=o,i=u,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,s=n.type===Ze.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Ge.PARSED&&(this.state=Ge.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),fr(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const a=this.media;a&&(!this._hasEnoughToStart&&ft.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case Te.FRAG_GAP:case Te.FRAG_PARSING_ERROR:case Te.FRAG_DECRYPT_ERROR:case Te.FRAG_LOAD_ERROR:case Te.FRAG_LOAD_TIMEOUT:case Te.KEY_LOAD_ERROR:case Te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ze.MAIN,t);break;case Te.LEVEL_LOAD_ERROR:case Te.LEVEL_LOAD_TIMEOUT:case Te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===yt.LEVEL&&(this.state=Ge.IDLE);break;case Te.BUFFER_ADD_CODEC_ERROR:case Te.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case Te.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Ge.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==jt.AUDIO||!this.altAudio){const n=(t===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,Ze.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const s=this.getLevelDetails(),a=ft.getBuffered(e),o=a.length?a.start(0):0,u=o-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<c||this.loadingParts&&u<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,s=n?.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=Ge.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(j.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:o,part:u,level:c}=a,{video:h,text:d,id3:g,initSegment:m}=i,{details:y}=c,S=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=Ge.PARSING,m){const b=m.tracks;if(b){const w=o.initSegment||o;if(this.unhandledEncryptionError(m,o))return;this._bufferInitSegment(c,b,w,s),n.trigger(j.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:t,tracks:b})}const E=m.initPTS,x=m.timescale,T=this.initPTS[o.cc];if(Ye(E)&&(!T||T.baseTime!==E||T.timescale!==x)){const w=m.trackId;this.initPTS[o.cc]={baseTime:E,timescale:x,trackId:w},n.trigger(j.INIT_PTS_FOUND,{frag:o,id:t,initPTS:E,timescale:x,trackId:w})}}if(h&&y){S&&h.type==="audiovideo"&&this.logMuxedErr(o);const b=y.fragments[o.sn-1-y.startSN],E=o.sn===y.startSN,x=!b||o.cc>b.cc;if(i.independent!==!1){const{startPTS:T,endPTS:w,startDTS:_,endDTS:R}=h;if(u)u.elementaryStreams[h.type]={startPTS:T,endPTS:w,startDTS:_,endDTS:R};else if(h.firstKeyFrame&&h.independent&&s.id===1&&!x&&(this.couldBacktrack=!0),h.dropped&&h.independent){const O=this.getMainFwdBufferInfo(),C=(O?O.end:this.getLoadPosition())+this.config.maxBufferHole,B=h.firstKeyFramePTS?h.firstKeyFramePTS:T;if(!E&&C<B-this.config.maxBufferHole&&!x){this.backtrack(o);return}else x&&(o.gap=!0);o.setElementaryStreamInfo(h.type,o.start,w,o.start,R,!0)}else E&&T-(y.appliedTimelineOffset||0)>Ip&&(o.gap=!0);o.setElementaryStreamInfo(h.type,T,w,_,R),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(h,o,u,s,E||x)}else if(E||x)o.gap=!0;else{this.backtrack(o);return}}if(S){const{startPTS:b,endPTS:E,startDTS:x,endDTS:T}=S;u&&(u.elementaryStreams[jt.AUDIO]={startPTS:b,endPTS:E,startDTS:x,endDTS:T}),o.setElementaryStreamInfo(jt.AUDIO,b,E,x,T),this.bufferFragmentData(S,o,u,s)}if(y&&g!=null&&g.samples.length){const b={id:t,frag:o,details:y,samples:g.samples};n.trigger(j.FRAG_PARSING_METADATA,b)}if(y&&d){const b={id:t,frag:o,details:y,samples:d.samples};n.trigger(j.FRAG_PARSING_USERDATA,b)}}logMuxedErr(e){this.warn(`${fr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:s,video:a,audiovideo:o}=t;if(s){const c=e.audioCodec;let h=Sp(s.codec,c);h==="mp4a"&&(h="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5");const g=s.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(h="mp4a.40.5")}h&&h.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),c&&c!==h&&this.log(`Swapping manifest audio codec "${c}" for "${h}"`),s.levelCodec=h,s.id=Ze.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${h||""}/${c||""}/${s.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=Ze.MAIN;const c=a.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const u=Object.keys(t);if(u.length){if(this.hls.trigger(j.BUFFER_CODECS,t),!this.hls)return;u.forEach(c=>{const d=t[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(j.BUFFER_APPENDING,{type:c,data:d,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Ze.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ge.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(ft.isBuffered(e,n)?t=this.getAppendedFrag(n):ft.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,s=t.level;(!i||t.sn!==i.sn||i.level!==s)&&(this.fragPlaying=t,this.hls.trigger(j.FRAG_CHANGED,{frag:t}),(!i||i.level!==s)&&this.hls.trigger(j.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Ye(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Ye(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?Jo(null,n.fragments,t):null);if(i){const s=i.programDateTime;if(s!==null){const a=s+(t-i.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Cce extends _i{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=Te.KEY_LOAD_ERROR,n,i,s){return new Ns({type:nt.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,s=t.length;i<s;i++){const a=t[i];if(e.cc<=a.cc&&(!fr(e)||!fr(a)||e.sn<a.sn)||!n&&i==s-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const u=Ep(o);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const i=zc(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,c))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=Xb(s);let u=this.keyIdToKeyInfo[o];if((n=u)!=null&&n.decryptdata.key)return s.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(this.emeController&&(i=u)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(u.decryptdata)){case"usable":case"usable-in-future":return u.keyLoadPromise.then(h=>{const{keyInfo:d}=h;return s.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${s.keyId?" keyId: "+Vr(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,Te.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const a=Xse(t.initSegment.data);if(a.length){let o=a[0];o.some(u=>u!==0)?(this.log(`Using keyId found in init segment ${Vr(o)}`),Za.setKeyIdForUri(e.decryptdata.uri,o)):(o=Za.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${Vr(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!fr(t))return Promise.resolve(n);const s=this.emeController.loadKey(n);return(e.keyLoadPromise=s.then(a=>(e.mediaKeySessionContext=a,n))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=t),a})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,s=new i(n);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(g,m,y,S)=>{const{frag:b,keyInfo:E}=y,x=Xb(E.decryptdata);if(!b.decryptdata||E!==this.keyIdToKeyInfo[x])return o(this.createKeyLoadError(b,Te.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),S));E.decryptdata.key=b.decryptdata.key=new Uint8Array(g.data),b.keyLoader=null,E.loader=null,a({frag:b,keyInfo:E})},onError:(g,m,y,S)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),y,Rt({url:u.url,data:void 0},g)))},onTimeout:(g,m,y)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(g,m,y)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Te.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};s.load(u,h,d)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,s=n.loader;t.keyLoader===s&&(t.keyLoader=null,n.loader=null);const a=Xb(n.decryptdata)||i;delete this.keyIdToKeyInfo[a],s&&s.destroy()}}function Xb(r){if(r.keyFormat!==Wr.FAIRPLAY){const e=r.keyId;if(e)return Vr(e)}return r.uri}function wM(r){const{type:e}=r;switch(e){case yt.AUDIO_TRACK:return Ze.AUDIO;case yt.SUBTITLE_TRACK:return Ze.SUBTITLE;default:return Ze.MAIN}}function Qb(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Pce{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(j.MANIFEST_LOADING,this.onManifestLoading,this),e.on(j.LEVEL_LOADING,this.onLevelLoading,this),e.on(j.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(j.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(j.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(j.MANIFEST_LOADING,this.onManifestLoading,this),e.off(j.LEVEL_LOADING,this.onLevelLoading,this),e.off(j.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(j.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(j.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,s=n||i,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:yt.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:u}=t;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:yt.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:u})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:yt.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:yt.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const n=this.loaders[yt.LEVEL];if(n){const i=n.context;i&&!t.levels.some(s=>s===i.levelOrTrack)&&(n.abort(),delete this.loaders[yt.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=this.hls.logger,h=i.context;if(h&&h.levelOrTrack===e.levelOrTrack&&(h.url===e.url||h.deliveryDirectives&&!e.deliveryDirectives)){h.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${h.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===yt.MANIFEST?s=n.manifestLoadPolicy.default:s=Mt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Ye((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===yt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===yt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===yt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const h=c.partTarget,d=c.targetduration;if(h&&d){const g=Math.max(h*3,d*.8)*1e3;s=Mt({},s,{maxTimeToFirstByteMs:Math.min(g,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,h,d,g)=>{const m=this.getInternalLoader(d);this.resetInternalLoader(d.type);const y=c.data;h.parsing.start=performance.now(),ts.isMediaPlaylist(y)||d.type!==yt.MANIFEST?this.handleTrackOrLevelPlaylist(c,h,d,g||null,m):this.handleMasterPlaylist(c,h,d,g)},onError:(c,h,d,g)=>{this.handleNetworkError(h,d,!1,c,g)},onTimeout:(c,h,d)=>{this.handleNetworkError(h,d,!0,void 0,c)}};i.load(e,o,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const s=this.hls,a=e.data,o=Qb(e,n),u=ts.parseMasterPlaylist(a,o);if(u.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:c,levels:h,sessionData:d,sessionKeys:g,startTimeOffset:m,variableList:y}=u;this.variableList=y,h.forEach(x=>{const{unknownCodecs:T}=x;if(T){const{preferManagedMediaSource:w}=this.hls.config;let{audioCodec:_,videoCodec:R}=x;for(let O=T.length;O--;){const C=T[O];mf(C,"audio",w)?(x.audioCodec=_=_?`${_},${C}`:C,xu.audio[_.substring(0,4)]=2,T.splice(O,1)):mf(C,"video",w)&&(x.videoCodec=R=R?`${R},${C}`:C,xu.video[R.substring(0,4)]=2,T.splice(O,1))}}});const{AUDIO:S=[],SUBTITLES:b,"CLOSED-CAPTIONS":E}=ts.parseMasterPlaylistMedia(a,o,u);S.length&&!S.some(T=>!T.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new er({}),bitrate:0,url:""})),s.trigger(j.MANIFEST_LOADED,{levels:h,audioTracks:S,subtitles:b,captions:E,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:d,sessionKeys:g,startTimeOffset:m,variableList:y})}handleTrackOrLevelPlaylist(e,t,n,i,s){const a=this.hls,{id:o,level:u,type:c}=n,h=Qb(e,n),d=Ye(u)?u:Ye(o)?o:0,g=wM(n),m=ts.parseLevelPlaylist(e.data,h,d,g,0,this.variableList);if(c===yt.MANIFEST){const y={attrs:new er({}),bitrate:0,details:m,name:"",url:h};m.requestScheduled=t.loading.start+Z3(m,0),a.trigger(j.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=m,this.handlePlaylistLoaded(m,e,t,n,i,s)}handleManifestParsingError(e,t,n,i,s){this.hls.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.MANIFEST_PARSING_ERROR,fatal:t.type===yt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:s})}handleNetworkError(e,t,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===yt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===yt.AUDIO_TRACK||e.type===yt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let u=Te.UNKNOWN,c=!1;const h=this.getInternalLoader(e);switch(e.type){case yt.MANIFEST:u=n?Te.MANIFEST_LOAD_TIMEOUT:Te.MANIFEST_LOAD_ERROR,c=!0;break;case yt.LEVEL:u=n?Te.LEVEL_LOAD_TIMEOUT:Te.LEVEL_LOAD_ERROR,c=!1;break;case yt.AUDIO_TRACK:u=n?Te.AUDIO_TRACK_LOAD_TIMEOUT:Te.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case yt.SUBTITLE_TRACK:u=n?Te.SUBTITLE_TRACK_LOAD_TIMEOUT:Te.SUBTITLE_LOAD_ERROR,c=!1;break}h&&this.resetInternalLoader(e.type);const d={type:nt.NETWORK_ERROR,details:u,fatal:c,url:e.url,loader:h,context:e,error:o,networkDetails:t,stats:s};if(i){const g=t?.url||e.url;d.response=Rt({url:g,data:void 0},i)}this.hls.trigger(j.ERROR,d)}handlePlaylistLoaded(e,t,n,i,s,a){const o=this.hls,{type:u,level:c,levelOrTrack:h,id:d,groupId:g,deliveryDirectives:m}=i,y=Qb(t,i),S=wM(i);let b=typeof i.level=="number"&&S===Ze.MAIN?c:void 0;const E=e.playlistParsingError;if(E){if(this.hls.logger.warn(`${E} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:E,reason:E.message,response:t,context:i,level:b,parent:S,networkDetails:s,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const x=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(j.ERROR,{type:nt.NETWORK_ERROR,details:Te.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:x,reason:x.message,response:t,context:i,level:b,parent:S,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case yt.MANIFEST:case yt.LEVEL:if(b){if(!h)b=0;else if(h!==o.levels[b]){const x=o.levels.indexOf(h);x>-1&&(b=x)}}o.trigger(j.LEVEL_LOADED,{details:e,levelInfo:h||o.levels[0],level:b||0,id:d||0,stats:n,networkDetails:s,deliveryDirectives:m,withoutMultiVariant:u===yt.MANIFEST});break;case yt.AUDIO_TRACK:o.trigger(j.AUDIO_TRACK_LOADED,{details:e,track:h,id:d||0,groupId:g||"",stats:n,networkDetails:s,deliveryDirectives:m});break;case yt.SUBTITLE_TRACK:o.trigger(j.SUBTITLE_TRACK_LOADED,{details:e,track:h,id:d||0,groupId:g||"",stats:n,networkDetails:s,deliveryDirectives:m});break}}}class Qn{static get version(){return bf}static isMSESupported(){return Q$()}static isSupported(){return Ice()}static getMediaSource(){return ro()}static get Events(){return j}static get MetadataSchema(){return Xn}static get ErrorTypes(){return nt}static get ErrorDetails(){return Te}static get DefaultConfig(){return Qn.defaultConfig?Qn.defaultConfig:gce}static set DefaultConfig(e){Qn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new L_,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Use(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=yce(Qn.DefaultConfig,e,t);this.userConfig=e,n.progressive&&vce(n,t);const{abrController:i,bufferController:s,capLevelController:a,errorController:o,fpsController:u}=n,c=new o(this),h=this.abrController=new i(this),d=new Dae(this),g=n.interstitialsController,m=g?this.interstitialsController=new g(this,Qn):null,y=this.bufferController=new s(this,d),S=this.capLevelController=new a(this),b=new u(this),E=new Pce(this),x=n.contentSteeringController,T=x?new x(this):null,w=this.levelController=new wce(this,T),_=new Ace(this),R=new Cce(this.config,this.logger),O=this.streamController=new Lce(this,d,R),C=this.gapController=new Ece(this,d);S.setStreamController(O),b.setStreamController(O);const B=[E,w,O];m&&B.splice(1,0,m),T&&B.splice(1,0,T),this.networkControllers=B;const N=[h,y,C,S,b,_,d];this.audioTrackController=this.createController(n.audioTrackController,B);const U=n.audioStreamController;U&&B.push(this.audioStreamController=new U(this,d,R)),this.subtitleTrackController=this.createController(n.subtitleTrackController,B);const k=n.subtitleStreamController;k&&B.push(this.subtititleStreamController=new k(this,d,R)),this.createController(n.timelineController,N),R.emeController=this.emeController=this.createController(n.emeController,N),this.cmcdController=this.createController(n.cmcdController,N),this.latencyController=this.createController(_ce,N),this.coreComponents=N,B.push(c);const W=c.onErrorOut;typeof W=="function"&&this.on(j.ERROR,W,c),this.on(j.MANIFEST_LOADED,E.onManifestLoaded,E)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===j.ERROR;this.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(j.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(j.ERROR,{type:nt.OTHER_ERROR,details:Te.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger(j.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(j.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(j.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=b_.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(j.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Ze.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Ze.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Ze.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Eue()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){yae(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=B3(t);return M3(e,n,navigator.mediaCapabilities)}}Qn.defaultConfig=void 0;function Xa({cameraId:r,title:e}){const t=P.useRef(null),n=P.useRef(null),[i,s]=P.useState(null),[a,o]=P.useState(!0),c={1:"https://www.tansaeng.com/live/tapo1.m3u8",2:"https://www.tansaeng.com/live/tapo2.m3u8",3:"https://www.tansaeng.com/live/tapo3.m3u8",4:"https://www.tansaeng.com/live/tapo4.m3u8"}[r];return P.useEffect(()=>{const h=t.current;if(!h||!c){s(" URL  ."),o(!1);return}if(s(null),o(!0),Qn.isSupported()){const d=new Qn({liveBackBufferLength:0,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,enableWorker:!0,lowLatencyMode:!0});return n.current=d,d.loadSource(c),d.attachMedia(h),d.on(Qn.Events.MANIFEST_PARSED,()=>{o(!1),h.play().catch(g=>{console.warn("Auto-play failed:",g),s("  ")})}),d.on(Qn.Events.ERROR,(g,m)=>{if(console.error("HLS error:",m),m.fatal)switch(m.type){case Qn.ErrorTypes.NETWORK_ERROR:s(" :    "),setTimeout(()=>{d.startLoad()},3e3);break;case Qn.ErrorTypes.MEDIA_ERROR:s(" :     "),d.recoverMediaError();break;default:s(" :    "),d.destroy();break}}),()=>{d.destroy(),n.current=null}}else{if(h.canPlayType("application/vnd.apple.mpegurl"))return h.src=c,h.addEventListener("loadedmetadata",()=>{o(!1),h.play().catch(d=>{console.warn("Auto-play failed:",d),s("  ")})}),h.addEventListener("error",()=>{s("  ")}),()=>{h.src=""};s("  HLS   "),o(!1)}},[c]),z.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden",children:[e&&z.jsx("div",{className:"bg-farm-500 px-4 py-2",children:z.jsx("h3",{className:"text-base font-semibold text-gray-900 m-0",children:e})}),z.jsxs("div",{className:"relative bg-black aspect-video",children:[z.jsx("video",{ref:t,className:"w-full h-full",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),a&&z.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:z.jsxs("div",{className:"text-white text-center",children:[z.jsx("div",{className:"text-2xl mb-2",children:""}),z.jsx("div",{className:"text-sm",children:"  ..."})]})}),i&&z.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70",children:z.jsxs("div",{className:"text-white text-center p-4",children:[z.jsx("div",{className:"text-3xl mb-2",children:""}),z.jsx("div",{className:"text-sm",children:i})]})})]}),z.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:z.jsxs("div",{className:"text-xs text-gray-500 truncate",title:c,children:[" ",c]})})]})}const $d="tansaeng_rpi_ip";function Dce(){const[r,e]=P.useState(""),[t,n]=P.useState(null),[i,s]=P.useState("");P.useEffect(()=>{const h=localStorage.getItem($d);h&&n(h)},[]);const a=h=>/^(\d{1,3}\.){3}\d{1,3}$/.test(h)?h.split(".").every(m=>{const y=parseInt(m,10);return y>=0&&y<=255}):!1,o=()=>{const h=r.trim();if(console.log("[RpiIpSettings]   , :",h),!h){console.log("[RpiIpSettings]  "),s(" IP  ");return}if(!a(h)){console.log("[RpiIpSettings] IP  :",h),s("  IP    (: 192.168.1.100)");return}localStorage.setItem($d,h),console.log("[RpiIpSettings] localStorage  :",h),console.log("[RpiIpSettings]  :",localStorage.getItem($d)),n(h),e(""),s("  IP "),setTimeout(()=>s(""),3e3)},u=()=>{t&&window.confirm("  IP ?")&&(localStorage.removeItem($d),n(null),s("  IP "),setTimeout(()=>s(""),3e3))},c=h=>{h.key==="Enter"&&o()};return z.jsxs("div",{className:"mb-6 rounded-lg border border-slate-600 bg-slate-800 p-4",children:[z.jsx("h2",{className:"mb-3 text-lg font-semibold text-slate-100",children:"  IP "}),z.jsxs("div",{className:"mb-3 flex gap-2",children:[z.jsx("input",{type:"text",value:r,onChange:h=>e(h.target.value),onKeyPress:c,placeholder:": 192.168.219.170",className:"flex-1 rounded border border-slate-600 bg-slate-700 px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-blue-500 focus:outline-none"}),z.jsx("button",{onClick:o,className:"rounded bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:""})]}),i&&z.jsx("div",{className:`mb-3 rounded p-2 text-sm ${i.includes("")?"bg-red-900/30 text-red-300":i.includes("")?"bg-yellow-900/30 text-yellow-300":"bg-green-900/30 text-green-300"}`,children:i}),t&&z.jsxs("div",{className:"rounded border border-slate-600 bg-slate-700 p-3",children:[z.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[z.jsx("span",{className:"text-sm text-slate-400",children:"  IP:"}),z.jsx("button",{onClick:u,className:"rounded bg-red-600 px-3 py-1 text-sm font-medium text-white transition hover:bg-red-700",children:""})]}),z.jsx("div",{className:"rounded bg-slate-800 p-2 font-mono text-green-400",children:t}),z.jsx("div",{className:"mt-2 text-xs text-slate-400",children:"  IP HLS   "})]}),!t&&z.jsx("div",{className:"rounded border border-yellow-600/30 bg-yellow-900/20 p-3 text-sm text-yellow-300",children:"  IP  .    IP ."})]})}function kce(r){return z.jsxs("div",{className:"p-4",children:[z.jsx("h1",{className:"mb-4 text-2xl font-bold text-slate-100",children:"   "}),z.jsx(Dce,{}),z.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[z.jsx(Xa,{cameraId:1,title:"  1"}),z.jsx(Xa,{cameraId:2,title:"  2"}),z.jsx(Xa,{cameraId:3,title:"  3"}),z.jsx(Xa,{cameraId:4,title:" "})]})]})}function Mce({farmSettings:r,setFarmSettings:e}){const t="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",n="8884",i="esp32-client-01",s=a=>a==="fan"?{bg:"#dbeafe",text:"#1e40af"}:a==="vent"?{bg:"#d1fae5",text:"#065f46"}:a==="pump"?{bg:"#f3e8ff",text:"#6b21a8"}:a==="camera"?{bg:"#fed7aa",text:"#c2410c"}:{bg:"#f3f4f6",text:"#4b5563"};return z.jsx("div",{className:"bg-gray-50",children:z.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[z.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[z.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" "}),z.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:"MQTT ,  ,    "})]}),z.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[z.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"MQTT   ( )"}),z.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"HiveMQ Cloud Host"}),z.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:t})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"WebSocket Port"}),z.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:n})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Username"}),z.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:i})]}),z.jsxs("div",{children:[z.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Password"}),z.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:""})]})]}),z.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:"MQTT   .env  ."})]}),z.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[z.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),z.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[" ",tS.length,"   ."]}),z.jsx("div",{className:"overflow-x-auto",children:z.jsxs("table",{className:"w-full text-sm border-collapse",children:[z.jsx("thead",{className:"bg-gray-50",children:z.jsxs("tr",{children:[z.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ID"}),z.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),z.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),z.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ESP32 "}),z.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"Command Topic"})]})}),z.jsx("tbody",{children:tS.map((a,o)=>{const u=s(a.type);return z.jsxs("tr",{className:o%2===0?"bg-white":"bg-gray-50",children:[z.jsx("td",{className:"px-4 py-2 text-gray-700",children:a.id}),z.jsx("td",{className:"px-4 py-2 text-gray-700",children:a.name}),z.jsx("td",{className:"px-4 py-2",children:z.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{background:u.bg,color:u.text},children:a.type})}),z.jsx("td",{className:"px-4 py-2 text-gray-600 text-xs",children:a.esp32Id}),z.jsx("td",{className:"px-4 py-2 text-gray-500 text-xs font-mono",children:a.commandTopic})]},a.id)})})]})}),z.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:" / src/config/devices.ts  ."})]}),z.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[z.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),z.jsxs("div",{children:[z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),z.jsx("input",{type:"text",value:r.farmName,onChange:a=>e({...r,farmName:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),z.jsx("input",{type:"text",value:r.adminName,onChange:a=>e({...r,adminName:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),z.jsxs("div",{className:"mb-4",children:[z.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),z.jsx("textarea",{value:r.notes,onChange:a=>e({...r,notes:a.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base resize-vertical"})]}),z.jsx("button",{className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-2 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:""})]})]})]})})}const IM="tansaeng-smartfarm-device-state-v1",OM="tansaeng-smartfarm-mist-zones-v1",RM="tansaeng-smartfarm-cameras-v1",LM="tansaeng-smartfarm-farm-settings-v1";function Nce(){const[r,e]=P.useState({});return P.useEffect(()=>{const t=localStorage.getItem(IM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse device state from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(IM,JSON.stringify(r))},[r]),[r,e]}const Bce=[{id:"zone_a",name:"Zone A ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_b",name:"Zone B ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1},{id:"zone_c",name:"Zone C ()",mode:"OFF",intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1}];function Uce(){const[r,e]=P.useState(Bce);return P.useEffect(()=>{const t=localStorage.getItem(OM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse mist zones from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(OM,JSON.stringify(r))},[r]),[r,e]}function jce(){const[r,e]=P.useState([]);return P.useEffect(()=>{const t=localStorage.getItem(RM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse cameras from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(RM,JSON.stringify(r))},[r]),[r,e]}const Fce={farmName:"",adminName:"",notes:""};function $ce(){const[r,e]=P.useState(Fce);return P.useEffect(()=>{const t=localStorage.getItem(LM);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse farm settings from localStorage:",n)}},[]),P.useEffect(()=>{localStorage.setItem(LM,JSON.stringify(r))},[r]),[r,e]}function Gce(){const[r,e]=P.useState("devices"),[t,n]=P.useState("connecting"),[i,s]=Nce(),[a,o]=Uce(),[u,c]=jce(),[h,d]=$ce();return P.useEffect(()=>{const g=Zc();return g.on("connect",()=>{n("connected")}),g.on("error",()=>{n("error")}),g.on("reconnect",()=>{n("connecting")}),g.on("offline",()=>{n("disconnected")}),()=>{}},[]),z.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[z.jsx(z5,{connectionState:t}),z.jsx(K5,{activeTab:r,onTabChange:e}),z.jsxs("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pb-5 min-h-0",children:[r==="devices"&&z.jsx(sH,{deviceState:i,setDeviceState:s}),r==="mist"&&z.jsx(aH,{zones:a,setZones:o}),r==="environment"&&z.jsx(Rse,{}),r==="cameras"&&z.jsx(kce,{cameras:u,setCameras:c}),r==="settings"&&z.jsx(Mce,{farmSettings:h,setFarmSettings:d})]}),z.jsx("footer",{className:"bg-white border-t border-gray-200 px-4 py-3 flex-shrink-0",children:z.jsxs("div",{className:"max-w-screen-2xl mx-auto text-center text-xs text-gray-500",children:[z.jsx("p",{className:"mb-1",children:"    v2.5"}),z.jsx("p",{className:"text-2xs text-gray-400",children:"Powered by React + TypeScript + HiveMQ Cloud"})]})})]})}const zce=()=>z.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:z.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4",children:[z.jsxs("header",{className:"bg-farm-500 rounded-lg px-6 py-4 mb-6 shadow-md",children:[z.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" Tapo  "}),z.jsx("p",{className:"text-gray-800 text-sm mt-1 m-0",children:"TP-Link Tapo  4  HLS "})]}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[z.jsx(Xa,{cameraId:1,title:"  1"}),z.jsx(Xa,{cameraId:2,title:"  2"}),z.jsx(Xa,{cameraId:3,title:"  3"}),z.jsx(Xa,{cameraId:4,title:" "})]}),z.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4",children:[z.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),z.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[z.jsx("li",{children:"    HLS  "}),z.jsx("li",{children:"       "}),z.jsx("li",{children:"      "}),z.jsx("li",{children:"  URL .env  VITE_TAPO_CAM*_HLS_URL  "})]})]})]})});v6.createRoot(document.getElementById("root")).render(z.jsx(P.StrictMode,{children:z.jsx(D5,{basename:"/smartfarm-ui",children:z.jsxs(c5,{children:[z.jsx(Jb,{path:"/",element:z.jsx(Gce,{})}),z.jsx(Jb,{path:"/camera",element:z.jsx(zce,{})})]})})}));
