function _K(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Ya(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Zb={exports:{}},Kf={};var ER;function TK(){if(ER)return Kf;ER=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return Kf.Fragment=e,Kf.jsx=t,Kf.jsxs=t,Kf}var wR;function AK(){return wR||(wR=1,Zb.exports=TK()),Zb.exports}var j=AK(),Jb={exports:{}},gt={};var _R;function DK(){if(_R)return gt;_R=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function E(H,G,J){this.props=H,this.context=G,this.refs=v,this.updater=J||y}E.prototype.isReactComponent={},E.prototype.setState=function(H,G){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,G,"setState")},E.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function S(){}S.prototype=E.prototype;function w(H,G,J){this.props=H,this.context=G,this.refs=v,this.updater=J||y}var A=w.prototype=new S;A.constructor=w,b(A,E.prototype),A.isPureReactComponent=!0;var T=Array.isArray;function I(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function k(H,G,J){var fe=J.ref;return{$$typeof:r,type:H,key:G,ref:fe!==void 0?fe:null,props:J}}function M(H,G){return k(H.type,G,H.props)}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function C(H){var G={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(J){return G[J]})}var W=/\/+/g;function Y(H,G){return typeof H=="object"&&H!==null&&H.key!=null?C(""+H.key):G.toString(36)}function q(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(I,I):(H.status="pending",H.then(function(G){H.status==="pending"&&(H.status="fulfilled",H.value=G)},function(G){H.status==="pending"&&(H.status="rejected",H.reason=G)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function $(H,G,J,fe,se){var be=typeof H;(be==="undefined"||be==="boolean")&&(H=null);var oe=!1;if(H===null)oe=!0;else switch(be){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(H.$$typeof){case r:case e:oe=!0;break;case f:return oe=H._init,$(oe(H._payload),G,J,fe,se)}}if(oe)return se=se(H),oe=fe===""?"."+Y(H,0):fe,T(se)?(J="",oe!=null&&(J=oe.replace(W,"$&/")+"/"),$(se,G,J,"",function(le){return le})):se!=null&&(B(se)&&(se=M(se,J+(se.key==null||H&&H.key===se.key?"":(""+se.key).replace(W,"$&/")+"/")+oe)),G.push(se)),1;oe=0;var re=fe===""?".":fe+":";if(T(H))for(var te=0;te<H.length;te++)fe=H[te],be=re+Y(fe,te),oe+=$(fe,G,J,be,se);else if(te=g(H),typeof te=="function")for(H=te.call(H),te=0;!(fe=H.next()).done;)fe=fe.value,be=re+Y(fe,te++),oe+=$(fe,G,J,be,se);else if(be==="object"){if(typeof H.then=="function")return $(q(H),G,J,fe,se);throw G=String(H),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return oe}function z(H,G,J){if(H==null)return H;var fe=[],se=0;return $(H,fe,"","",function(be){return G.call(J,be,se++)}),fe}function K(H){if(H._status===-1){var G=H._result;G=G(),G.then(function(J){(H._status===0||H._status===-1)&&(H._status=1,H._result=J)},function(J){(H._status===0||H._status===-1)&&(H._status=2,H._result=J)}),H._status===-1&&(H._status=0,H._result=G)}if(H._status===1)return H._result.default;throw H._result}var Z=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},X={map:z,forEach:function(H,G,J){z(H,function(){G.apply(this,arguments)},J)},count:function(H){var G=0;return z(H,function(){G++}),G},toArray:function(H){return z(H,function(G){return G})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return gt.Activity=h,gt.Children=X,gt.Component=E,gt.Fragment=t,gt.Profiler=i,gt.PureComponent=w,gt.StrictMode=n,gt.Suspense=l,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,gt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},gt.cache=function(H){return function(){return H.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(H,G,J){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var fe=b({},H.props),se=H.key;if(G!=null)for(be in G.key!==void 0&&(se=""+G.key),G)!P.call(G,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&G.ref===void 0||(fe[be]=G[be]);var be=arguments.length-2;if(be===1)fe.children=J;else if(1<be){for(var oe=Array(be),re=0;re<be;re++)oe[re]=arguments[re+2];fe.children=oe}return k(H.type,se,fe)},gt.createContext=function(H){return H={$$typeof:s,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},gt.createElement=function(H,G,J){var fe,se={},be=null;if(G!=null)for(fe in G.key!==void 0&&(be=""+G.key),G)P.call(G,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(se[fe]=G[fe]);var oe=arguments.length-2;if(oe===1)se.children=J;else if(1<oe){for(var re=Array(oe),te=0;te<oe;te++)re[te]=arguments[te+2];se.children=re}if(H&&H.defaultProps)for(fe in oe=H.defaultProps,oe)se[fe]===void 0&&(se[fe]=oe[fe]);return k(H,be,se)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(H){return{$$typeof:o,render:H}},gt.isValidElement=B,gt.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:K}},gt.memo=function(H,G){return{$$typeof:c,type:H,compare:G===void 0?null:G}},gt.startTransition=function(H){var G=D.T,J={};D.T=J;try{var fe=H(),se=D.S;se!==null&&se(J,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(I,Z)}catch(be){Z(be)}finally{G!==null&&J.types!==null&&(G.types=J.types),D.T=G}},gt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},gt.use=function(H){return D.H.use(H)},gt.useActionState=function(H,G,J){return D.H.useActionState(H,G,J)},gt.useCallback=function(H,G){return D.H.useCallback(H,G)},gt.useContext=function(H){return D.H.useContext(H)},gt.useDebugValue=function(){},gt.useDeferredValue=function(H,G){return D.H.useDeferredValue(H,G)},gt.useEffect=function(H,G){return D.H.useEffect(H,G)},gt.useEffectEvent=function(H){return D.H.useEffectEvent(H)},gt.useId=function(){return D.H.useId()},gt.useImperativeHandle=function(H,G,J){return D.H.useImperativeHandle(H,G,J)},gt.useInsertionEffect=function(H,G){return D.H.useInsertionEffect(H,G)},gt.useLayoutEffect=function(H,G){return D.H.useLayoutEffect(H,G)},gt.useMemo=function(H,G){return D.H.useMemo(H,G)},gt.useOptimistic=function(H,G){return D.H.useOptimistic(H,G)},gt.useReducer=function(H,G,J){return D.H.useReducer(H,G,J)},gt.useRef=function(H){return D.H.useRef(H)},gt.useState=function(H){return D.H.useState(H)},gt.useSyncExternalStore=function(H,G,J){return D.H.useSyncExternalStore(H,G,J)},gt.useTransition=function(){return D.H.useTransition()},gt.version="19.2.0",gt}var TR;function Uc(){return TR||(TR=1,Jb.exports=DK()),Jb.exports}var L=Uc();const je=Ya(L),WT=_K({__proto__:null,default:je},[L]);var ex={exports:{}},Yf={},tx={exports:{}},rx={};var AR;function OK(){return AR||(AR=1,(function(r){function e($,z){var K=$.length;$.push(z);e:for(;0<K;){var Z=K-1>>>1,X=$[Z];if(0<i(X,z))$[Z]=z,$[K]=X,K=Z;else break e}}function t($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var z=$[0],K=$.pop();if(K!==z){$[0]=K;e:for(var Z=0,X=$.length,H=X>>>1;Z<H;){var G=2*(Z+1)-1,J=$[G],fe=G+1,se=$[fe];if(0>i(J,K))fe<X&&0>i(se,J)?($[Z]=se,$[fe]=K,Z=fe):($[Z]=J,$[G]=K,Z=G);else if(fe<X&&0>i(se,K))$[Z]=se,$[fe]=K,Z=fe;else break e}}return z}function i($,z){var K=$.sortIndex-z.sortIndex;return K!==0?K:$.id-z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var l=[],c=[],f=1,h=null,p=3,g=!1,y=!1,b=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A($){for(var z=t(c);z!==null;){if(z.callback===null)n(c);else if(z.startTime<=$)n(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(c)}}function T($){if(b=!1,A($),!y)if(t(l)!==null)y=!0,I||(I=!0,C());else{var z=t(c);z!==null&&q(T,z.startTime-$)}}var I=!1,D=-1,P=5,k=-1;function M(){return v?!0:!(r.unstable_now()-k<P)}function B(){if(v=!1,I){var $=r.unstable_now();k=$;var z=!0;try{e:{y=!1,b&&(b=!1,S(D),D=-1),g=!0;var K=p;try{t:{for(A($),h=t(l);h!==null&&!(h.expirationTime>$&&M());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var X=Z(h.expirationTime<=$);if($=r.unstable_now(),typeof X=="function"){h.callback=X,A($),z=!0;break t}h===t(l)&&n(l),A($)}else n(l);h=t(l)}if(h!==null)z=!0;else{var H=t(c);H!==null&&q(T,H.startTime-$),z=!1}}break e}finally{h=null,p=K,g=!1}z=void 0}}finally{z?C():I=!1}}}var C;if(typeof w=="function")C=function(){w(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=B,C=function(){Y.postMessage(null)}}else C=function(){E(B,0)};function q($,z){D=E(function(){$(r.unstable_now())},z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_next=function($){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var K=p;p=z;try{return $()}finally{p=K}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var K=p;p=$;try{return z()}finally{p=K}},r.unstable_scheduleCallback=function($,z,K){var Z=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,$={id:f++,callback:z,priorityLevel:$,startTime:K,expirationTime:X,sortIndex:-1},K>Z?($.sortIndex=K,e(c,$),t(l)===null&&$===t(c)&&(b?(S(D),D=-1):b=!0,q(T,K-Z))):($.sortIndex=X,e(l,$),y||g||(y=!0,I||(I=!0,C()))),$},r.unstable_shouldYield=M,r.unstable_wrapCallback=function($){var z=p;return function(){var K=p;p=z;try{return $.apply(this,arguments)}finally{p=K}}}})(rx)),rx}var DR;function IK(){return DR||(DR=1,tx.exports=OK()),tx.exports}var nx={exports:{}},pn={};var OR;function CK(){if(OR)return pn;OR=1;var r=Uc();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:f}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,pn.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,f)},pn.flushSync=function(l){var c=s.T,f=n.p;try{if(s.T=null,n.p=2,l)return l()}finally{s.T=c,n.p=f,n.d.f()}},pn.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},pn.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},pn.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&n.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},pn.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},pn.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin);n.d.L(l,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},pn.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},pn.requestFormReset=function(l){n.d.r(l)},pn.unstable_batchedUpdates=function(l,c){return l(c)},pn.useFormState=function(l,c,f){return s.H.useFormState(l,c,f)},pn.useFormStatus=function(){return s.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var IR;function pB(){if(IR)return nx.exports;IR=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),nx.exports=CK(),nx.exports}var CR;function RK(){if(CR)return Yf;CR=1;var r=IK(),e=Uc(),t=pB();function n(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function s(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function o(u){if(u.tag===31){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function l(u){if(a(u)!==u)throw Error(n(188))}function c(u){var d=u.alternate;if(!d){if(d=a(u),d===null)throw Error(n(188));return d!==u?null:u}for(var m=u,x=d;;){var _=m.return;if(_===null)break;var O=_.alternate;if(O===null){if(x=_.return,x!==null){m=x;continue}break}if(_.child===O.child){for(O=_.child;O;){if(O===m)return l(_),u;if(O===x)return l(_),d;O=O.sibling}throw Error(n(188))}if(m.return!==x.return)m=_,x=O;else{for(var F=!1,Q=_.child;Q;){if(Q===m){F=!0,m=_,x=O;break}if(Q===x){F=!0,x=_,m=O;break}Q=Q.sibling}if(!F){for(Q=O.child;Q;){if(Q===m){F=!0,m=O,x=_;break}if(Q===x){F=!0,x=O,m=_;break}Q=Q.sibling}if(!F)throw Error(n(189))}}if(m.alternate!==x)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?u:d}function f(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u;for(u=u.child;u!==null;){if(d=f(u),d!==null)return d;u=u.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function C(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var W=Symbol.for("react.client.reference");function Y(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===W?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case E:return"Profiler";case v:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList";case k:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case w:return u.displayName||"Context";case S:return(u._context.displayName||"Context")+".Consumer";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case D:return d=u.displayName||null,d!==null?d:Y(u.type)||"Memo";case P:d=u._payload,u=u._init;try{return Y(u(d))}catch{}}return null}var q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Z=[],X=-1;function H(u){return{current:u}}function G(u){0>X||(u.current=Z[X],Z[X]=null,X--)}function J(u,d){X++,Z[X]=u.current,u.current=d}var fe=H(null),se=H(null),be=H(null),oe=H(null);function re(u,d){switch(J(be,d),J(se,u),J(fe,null),d.nodeType){case 9:case 11:u=(u=d.documentElement)&&(u=u.namespaceURI)?YC(u):0;break;default:if(u=d.tagName,d=d.namespaceURI)d=YC(d),u=zC(d,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}G(fe),J(fe,u)}function te(){G(fe),G(se),G(be)}function le(u){u.memoizedState!==null&&J(oe,u);var d=fe.current,m=zC(d,u.type);d!==m&&(J(se,u),J(fe,m))}function ce(u){se.current===u&&(G(fe),G(se)),oe.current===u&&(G(oe),jf._currentValue=K)}var ne,Ce;function Se(u){if(ne===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ne=d&&d[1]||"",Ce=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+u+Ce}var ie=!1;function ae(u,d){if(!u||ie)return"";ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Le){var Oe=Le}Reflect.construct(u,[],Ye)}else{try{Ye.call()}catch(Le){Oe=Le}u.call(Ye.prototype)}}else{try{throw Error()}catch(Le){Oe=Le}(Ye=u())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Le){if(Le&&Oe&&typeof Le.stack=="string")return[Le.stack,Oe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),F=O[0],Q=O[1];if(F&&Q){var he=F.split(`
`),Ae=Q.split(`
`);for(_=x=0;x<he.length&&!he[x].includes("DetermineComponentFrameRoot");)x++;for(;_<Ae.length&&!Ae[_].includes("DetermineComponentFrameRoot");)_++;if(x===he.length||_===Ae.length)for(x=he.length-1,_=Ae.length-1;1<=x&&0<=_&&he[x]!==Ae[_];)_--;for(;1<=x&&0<=_;x--,_--)if(he[x]!==Ae[_]){if(x!==1||_!==1)do if(x--,_--,0>_||he[x]!==Ae[_]){var $e=`
`+he[x].replace(" at new "," at ");return u.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",u.displayName)),$e}while(1<=x&&0<=_);break}}}finally{ie=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Se(m):""}function ye(u,d){switch(u.tag){case 26:case 27:case 5:return Se(u.type);case 16:return Se("Lazy");case 13:return u.child!==d&&d!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return ae(u.type,!1);case 11:return ae(u.type.render,!1);case 1:return ae(u.type,!0);case 31:return Se("Activity");default:return""}}function Ie(u){try{var d="",m=null;do d+=ye(u,m),m=u,u=u.return;while(u);return d}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var Re=Object.prototype.hasOwnProperty,Ue=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,Be=r.unstable_shouldYield,ze=r.unstable_requestPaint,De=r.unstable_now,ft=r.unstable_getCurrentPriorityLevel,R=r.unstable_ImmediatePriority,N=r.unstable_UserBlockingPriority,V=r.unstable_NormalPriority,de=r.unstable_LowPriority,ve=r.unstable_IdlePriority,Pe=r.log,We=r.unstable_setDisableYieldValue,ge=null,_e=null;function tt(u){if(typeof Pe=="function"&&We(u),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(ge,u)}catch{}}var Ze=Math.clz32?Math.clz32:Di,ht=Math.log,yt=Math.LN2;function Di(u){return u>>>=0,u===0?32:31-(ht(u)/yt|0)|0}var En=256,xr=262144,wn=4194304;function Nn(u){var d=u&42;if(d!==0)return d;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function _n(u,d,m){var x=u.pendingLanes;if(x===0)return 0;var _=0,O=u.suspendedLanes,F=u.pingedLanes;u=u.warmLanes;var Q=x&134217727;return Q!==0?(x=Q&~O,x!==0?_=Nn(x):(F&=Q,F!==0?_=Nn(F):m||(m=Q&~u,m!==0&&(_=Nn(m))))):(Q=x&~O,Q!==0?_=Nn(Q):F!==0?_=Nn(F):m||(m=x&~u,m!==0&&(_=Nn(m)))),_===0?0:d!==0&&d!==_&&(d&O)===0&&(O=_&-_,m=d&-d,O>=m||O===32&&(m&4194048)!==0)?d:_}function kr(u,d){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&d)===0}function cu(u,d){switch(u){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wa(){var u=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),u}function Va(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function ee(u,d){u.pendingLanes|=d,d!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ue(u,d,m,x,_,O){var F=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var Q=u.entanglements,he=u.expirationTimes,Ae=u.hiddenUpdates;for(m=F&~m;0<m;){var $e=31-Ze(m),Ye=1<<$e;Q[$e]=0,he[$e]=-1;var Oe=Ae[$e];if(Oe!==null)for(Ae[$e]=null,$e=0;$e<Oe.length;$e++){var Le=Oe[$e];Le!==null&&(Le.lane&=-536870913)}m&=~Ye}x!==0&&qe(u,x,0),O!==0&&_===0&&u.tag!==0&&(u.suspendedLanes|=O&~(F&~d))}function qe(u,d,m){u.pendingLanes|=d,u.suspendedLanes&=~d;var x=31-Ze(d);u.entangledLanes|=d,u.entanglements[x]=u.entanglements[x]|1073741824|m&261930}function Ve(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var x=31-Ze(m),_=1<<x;_&d|u[x]&d&&(u[x]|=d),m&=~_}}function Je(u,d){var m=d&-d;return m=(m&42)!==0?1:ur(m),(m&(u.suspendedLanes|d))!==0?0:m}function ur(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Mr(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Fn(){var u=z.p;return u!==0?u:(u=window.event,u===void 0?32:mR(u.type))}function no(u,d){var m=z.p;try{return z.p=u,d()}finally{z.p=m}}var Bn=Math.random().toString(36).slice(2),cr="__reactFiber$"+Bn,Nr="__reactProps$"+Bn,Un="__reactContainer$"+Bn,jn="__reactEvents$"+Bn,pa="__reactListeners$"+Bn,Qa="__reactHandles$"+Bn,ni="__reactResources$"+Bn,Tn="__reactMarker$"+Bn;function Ky(u){delete u[cr],delete u[Nr],delete u[jn],delete u[pa],delete u[Qa]}function fu(u){var d=u[cr];if(d)return d;for(var m=u.parentNode;m;){if(d=m[Un]||m[cr]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(u=JC(u);u!==null;){if(m=u[cr])return m;u=JC(u)}return d}u=m,m=u.parentNode}return null}function du(u){if(u=u[cr]||u[Un]){var d=u.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return u}return null}function tf(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u.stateNode;throw Error(n(33))}function hu(u){var d=u[ni];return d||(d=u[ni]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Yr(u){u[Tn]=!0}var LD=new Set,kD={};function sl(u,d){pu(u,d),pu(u+"Capture",d)}function pu(u,d){for(kD[u]=d,u=0;u<d.length;u++)LD.add(d[u])}var mH=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),MD={},ND={};function gH(u){return Re.call(ND,u)?!0:Re.call(MD,u)?!1:mH.test(u)?ND[u]=!0:(MD[u]=!0,!1)}function Dh(u,d,m){if(gH(d))if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){u.removeAttribute(d);return}}u.setAttribute(d,""+m)}}function Oh(u,d,m){if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(d);return}u.setAttribute(d,""+m)}}function Xa(u,d,m,x){if(x===null)u.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(d,m,""+x)}}function Oi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function FD(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function yH(u,d,m){var x=Object.getOwnPropertyDescriptor(u.constructor.prototype,d);if(!u.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var _=x.get,O=x.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return _.call(this)},set:function(F){m=""+F,O.call(this,F)}}),Object.defineProperty(u,d,{enumerable:x.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Yy(u){if(!u._valueTracker){var d=FD(u)?"checked":"value";u._valueTracker=yH(u,d,""+u[d])}}function BD(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var m=d.getValue(),x="";return u&&(x=FD(u)?u.checked?"true":"false":u.value),u=x,u!==m?(d.setValue(u),!0):!1}function Ih(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var vH=/[\n"\\]/g;function Ii(u){return u.replace(vH,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function zy(u,d,m,x,_,O,F,Q){u.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?u.type=F:u.removeAttribute("type"),d!=null?F==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+Oi(d)):u.value!==""+Oi(d)&&(u.value=""+Oi(d)):F!=="submit"&&F!=="reset"||u.removeAttribute("value"),d!=null?qy(u,F,Oi(d)):m!=null?qy(u,F,Oi(m)):x!=null&&u.removeAttribute("value"),_==null&&O!=null&&(u.defaultChecked=!!O),_!=null&&(u.checked=_&&typeof _!="function"&&typeof _!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?u.name=""+Oi(Q):u.removeAttribute("name")}function UD(u,d,m,x,_,O,F,Q){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(u.type=O),d!=null||m!=null){if(!(O!=="submit"&&O!=="reset"||d!=null)){Yy(u);return}m=m!=null?""+Oi(m):"",d=d!=null?""+Oi(d):m,Q||d===u.value||(u.value=d),u.defaultValue=d}x=x??_,x=typeof x!="function"&&typeof x!="symbol"&&!!x,u.checked=Q?u.checked:!!x,u.defaultChecked=!!x,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(u.name=F),Yy(u)}function qy(u,d,m){d==="number"&&Ih(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function mu(u,d,m,x){if(u=u.options,d){d={};for(var _=0;_<m.length;_++)d["$"+m[_]]=!0;for(m=0;m<u.length;m++)_=d.hasOwnProperty("$"+u[m].value),u[m].selected!==_&&(u[m].selected=_),_&&x&&(u[m].defaultSelected=!0)}else{for(m=""+Oi(m),d=null,_=0;_<u.length;_++){if(u[_].value===m){u[_].selected=!0,x&&(u[_].defaultSelected=!0);return}d!==null||u[_].disabled||(d=u[_])}d!==null&&(d.selected=!0)}}function jD(u,d,m){if(d!=null&&(d=""+Oi(d),d!==u.value&&(u.value=d),m==null)){u.defaultValue!==d&&(u.defaultValue=d);return}u.defaultValue=m!=null?""+Oi(m):""}function $D(u,d,m,x){if(d==null){if(x!=null){if(m!=null)throw Error(n(92));if(q(x)){if(1<x.length)throw Error(n(93));x=x[0]}m=x}m==null&&(m=""),d=m}m=Oi(d),u.defaultValue=m,x=u.textContent,x===m&&x!==""&&x!==null&&(u.value=x),Yy(u)}function gu(u,d){if(d){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=d;return}}u.textContent=d}var bH=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function HD(u,d,m){var x=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="":x?u.setProperty(d,m):typeof m!="number"||m===0||bH.has(d)?d==="float"?u.cssFloat=m:u[d]=(""+m).trim():u[d]=m+"px"}function GD(u,d,m){if(d!=null&&typeof d!="object")throw Error(n(62));if(u=u.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?u.setProperty(x,""):x==="float"?u.cssFloat="":u[x]="");for(var _ in d)x=d[_],d.hasOwnProperty(_)&&m[_]!==x&&HD(u,_,x)}else for(var O in d)d.hasOwnProperty(O)&&HD(u,O,d[O])}function Wy(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xH=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SH=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ch(u){return SH.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Za(){}var Vy=null;function Qy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var yu=null,vu=null;function KD(u){var d=du(u);if(d&&(u=d.stateNode)){var m=u[Nr]||null;e:switch(u=d.stateNode,d.type){case"input":if(zy(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ii(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var x=m[d];if(x!==u&&x.form===u.form){var _=x[Nr]||null;if(!_)throw Error(n(90));zy(x,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(d=0;d<m.length;d++)x=m[d],x.form===u.form&&BD(x)}break e;case"textarea":jD(u,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&mu(u,!!m.multiple,d,!1)}}}var Xy=!1;function YD(u,d,m){if(Xy)return u(d,m);Xy=!0;try{var x=u(d);return x}finally{if(Xy=!1,(yu!==null||vu!==null)&&(yp(),yu&&(d=yu,u=vu,vu=yu=null,KD(d),u)))for(d=0;d<u.length;d++)KD(u[d])}}function rf(u,d){var m=u.stateNode;if(m===null)return null;var x=m[Nr]||null;if(x===null)return null;m=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(u=u.type,x=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!x;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zy=!1;if(Ja)try{var nf={};Object.defineProperty(nf,"passive",{get:function(){Zy=!0}}),window.addEventListener("test",nf,nf),window.removeEventListener("test",nf,nf)}catch{Zy=!1}var io=null,Jy=null,Rh=null;function zD(){if(Rh)return Rh;var u,d=Jy,m=d.length,x,_="value"in io?io.value:io.textContent,O=_.length;for(u=0;u<m&&d[u]===_[u];u++);var F=m-u;for(x=1;x<=F&&d[m-x]===_[O-x];x++);return Rh=_.slice(u,1<x?1-x:void 0)}function Ph(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Lh(){return!0}function qD(){return!1}function $n(u){function d(m,x,_,O,F){this._reactName=m,this._targetInst=_,this.type=x,this.nativeEvent=O,this.target=F,this.currentTarget=null;for(var Q in u)u.hasOwnProperty(Q)&&(m=u[Q],this[Q]=m?m(O):O[Q]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Lh:qD,this.isPropagationStopped=qD,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Lh)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Lh)},persist:function(){},isPersistent:Lh}),d}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=$n(ol),af=h({},ol,{view:0,detail:0}),EH=$n(af),ev,tv,sf,Mh=h({},af,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nv,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==sf&&(sf&&u.type==="mousemove"?(ev=u.screenX-sf.screenX,tv=u.screenY-sf.screenY):tv=ev=0,sf=u),ev)},movementY:function(u){return"movementY"in u?u.movementY:tv}}),WD=$n(Mh),wH=h({},Mh,{dataTransfer:0}),_H=$n(wH),TH=h({},af,{relatedTarget:0}),rv=$n(TH),AH=h({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),DH=$n(AH),OH=h({},ol,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),IH=$n(OH),CH=h({},ol,{data:0}),VD=$n(CH),RH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kH(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=LH[u])?!!d[u]:!1}function nv(){return kH}var MH=h({},af,{key:function(u){if(u.key){var d=RH[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=Ph(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?PH[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nv,charCode:function(u){return u.type==="keypress"?Ph(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ph(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),NH=$n(MH),FH=h({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QD=$n(FH),BH=h({},af,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nv}),UH=$n(BH),jH=h({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),$H=$n(jH),HH=h({},Mh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),GH=$n(HH),KH=h({},ol,{newState:0,oldState:0}),YH=$n(KH),zH=[9,13,27,32],iv=Ja&&"CompositionEvent"in window,of=null;Ja&&"documentMode"in document&&(of=document.documentMode);var qH=Ja&&"TextEvent"in window&&!of,XD=Ja&&(!iv||of&&8<of&&11>=of),ZD=" ",JD=!1;function eO(u,d){switch(u){case"keyup":return zH.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tO(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var bu=!1;function WH(u,d){switch(u){case"compositionend":return tO(d);case"keypress":return d.which!==32?null:(JD=!0,ZD);case"textInput":return u=d.data,u===ZD&&JD?null:u;default:return null}}function VH(u,d){if(bu)return u==="compositionend"||!iv&&eO(u,d)?(u=zD(),Rh=Jy=io=null,bu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return XD&&d.locale!=="ko"?null:d.data;default:return null}}var QH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rO(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!QH[u.type]:d==="textarea"}function nO(u,d,m,x){yu?vu?vu.push(x):vu=[x]:yu=x,d=_p(d,"onChange"),0<d.length&&(m=new kh("onChange","change",null,m,x),u.push({event:m,listeners:d}))}var lf=null,uf=null;function XH(u){UC(u,0)}function Nh(u){var d=tf(u);if(BD(d))return u}function iO(u,d){if(u==="change")return d}var aO=!1;if(Ja){var av;if(Ja){var sv="oninput"in document;if(!sv){var sO=document.createElement("div");sO.setAttribute("oninput","return;"),sv=typeof sO.oninput=="function"}av=sv}else av=!1;aO=av&&(!document.documentMode||9<document.documentMode)}function oO(){lf&&(lf.detachEvent("onpropertychange",lO),uf=lf=null)}function lO(u){if(u.propertyName==="value"&&Nh(uf)){var d=[];nO(d,uf,u,Qy(u)),YD(XH,d)}}function ZH(u,d,m){u==="focusin"?(oO(),lf=d,uf=m,lf.attachEvent("onpropertychange",lO)):u==="focusout"&&oO()}function JH(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Nh(uf)}function eG(u,d){if(u==="click")return Nh(d)}function tG(u,d){if(u==="input"||u==="change")return Nh(d)}function rG(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var ii=typeof Object.is=="function"?Object.is:rG;function cf(u,d){if(ii(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),x=Object.keys(d);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var _=m[x];if(!Re.call(d,_)||!ii(u[_],d[_]))return!1}return!0}function uO(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function cO(u,d){var m=uO(u);u=0;for(var x;m;){if(m.nodeType===3){if(x=u+m.textContent.length,u<=d&&x>=d)return{node:m,offset:d-u};u=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=uO(m)}}function fO(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?fO(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function dO(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var d=Ih(u.document);d instanceof u.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)u=d.contentWindow;else break;d=Ih(u.document)}return d}function ov(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}var nG=Ja&&"documentMode"in document&&11>=document.documentMode,xu=null,lv=null,ff=null,uv=!1;function hO(u,d,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;uv||xu==null||xu!==Ih(x)||(x=xu,"selectionStart"in x&&ov(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ff&&cf(ff,x)||(ff=x,x=_p(lv,"onSelect"),0<x.length&&(d=new kh("onSelect","select",null,d,m),u.push({event:d,listeners:x}),d.target=xu)))}function ll(u,d){var m={};return m[u.toLowerCase()]=d.toLowerCase(),m["Webkit"+u]="webkit"+d,m["Moz"+u]="moz"+d,m}var Su={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionrun:ll("Transition","TransitionRun"),transitionstart:ll("Transition","TransitionStart"),transitioncancel:ll("Transition","TransitionCancel"),transitionend:ll("Transition","TransitionEnd")},cv={},pO={};Ja&&(pO=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function ul(u){if(cv[u])return cv[u];if(!Su[u])return u;var d=Su[u],m;for(m in d)if(d.hasOwnProperty(m)&&m in pO)return cv[u]=d[m];return u}var mO=ul("animationend"),gO=ul("animationiteration"),yO=ul("animationstart"),iG=ul("transitionrun"),aG=ul("transitionstart"),sG=ul("transitioncancel"),vO=ul("transitionend"),bO=new Map,fv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fv.push("scrollEnd");function Xi(u,d){bO.set(u,d),sl(d,[u])}var Fh=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ci=[],Eu=0,dv=0;function Bh(){for(var u=Eu,d=dv=Eu=0;d<u;){var m=Ci[d];Ci[d++]=null;var x=Ci[d];Ci[d++]=null;var _=Ci[d];Ci[d++]=null;var O=Ci[d];if(Ci[d++]=null,x!==null&&_!==null){var F=x.pending;F===null?_.next=_:(_.next=F.next,F.next=_),x.pending=_}O!==0&&xO(m,_,O)}}function Uh(u,d,m,x){Ci[Eu++]=u,Ci[Eu++]=d,Ci[Eu++]=m,Ci[Eu++]=x,dv|=x,u.lanes|=x,u=u.alternate,u!==null&&(u.lanes|=x)}function hv(u,d,m,x){return Uh(u,d,m,x),jh(u)}function cl(u,d){return Uh(u,null,null,d),jh(u)}function xO(u,d,m){u.lanes|=m;var x=u.alternate;x!==null&&(x.lanes|=m);for(var _=!1,O=u.return;O!==null;)O.childLanes|=m,x=O.alternate,x!==null&&(x.childLanes|=m),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(_=!0)),u=O,O=O.return;return u.tag===3?(O=u.stateNode,_&&d!==null&&(_=31-Ze(m),u=O.hiddenUpdates,x=u[_],x===null?u[_]=[d]:x.push(d),d.lane=m|536870912),O):null}function jh(u){if(50<Lf)throw Lf=0,Eb=null,Error(n(185));for(var d=u.return;d!==null;)u=d,d=u.return;return u.tag===3?u.stateNode:null}var wu={};function oG(u,d,m,x){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(u,d,m,x){return new oG(u,d,m,x)}function pv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function es(u,d){var m=u.alternate;return m===null?(m=ai(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function SO(u,d){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,d=m.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u}function $h(u,d,m,x,_,O){var F=0;if(x=u,typeof u=="function")pv(u)&&(F=1);else if(typeof u=="string")F=dK(u,m,fe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case k:return u=ai(31,m,d,_),u.elementType=k,u.lanes=O,u;case b:return fl(m.children,_,O,d);case v:F=8,_|=24;break;case E:return u=ai(12,m,d,_|2),u.elementType=E,u.lanes=O,u;case T:return u=ai(13,m,d,_),u.elementType=T,u.lanes=O,u;case I:return u=ai(19,m,d,_),u.elementType=I,u.lanes=O,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:F=10;break e;case S:F=9;break e;case A:F=11;break e;case D:F=14;break e;case P:F=16,x=null;break e}F=29,m=Error(n(130,u===null?"null":typeof u,"")),x=null}return d=ai(F,m,d,_),d.elementType=u,d.type=x,d.lanes=O,d}function fl(u,d,m,x){return u=ai(7,u,x,d),u.lanes=m,u}function mv(u,d,m){return u=ai(6,u,null,d),u.lanes=m,u}function EO(u){var d=ai(18,null,null,0);return d.stateNode=u,d}function gv(u,d,m){return d=ai(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}var wO=new WeakMap;function Ri(u,d){if(typeof u=="object"&&u!==null){var m=wO.get(u);return m!==void 0?m:(d={value:u,source:d,stack:Ie(d)},wO.set(u,d),d)}return{value:u,source:d,stack:Ie(d)}}var _u=[],Tu=0,Hh=null,df=0,Pi=[],Li=0,ao=null,ma=1,ga="";function ts(u,d){_u[Tu++]=df,_u[Tu++]=Hh,Hh=u,df=d}function _O(u,d,m){Pi[Li++]=ma,Pi[Li++]=ga,Pi[Li++]=ao,ao=u;var x=ma;u=ga;var _=32-Ze(x)-1;x&=~(1<<_),m+=1;var O=32-Ze(d)+_;if(30<O){var F=_-_%5;O=(x&(1<<F)-1).toString(32),x>>=F,_-=F,ma=1<<32-Ze(d)+_|m<<_|x,ga=O+u}else ma=1<<O|m<<_|x,ga=u}function yv(u){u.return!==null&&(ts(u,1),_O(u,1,0))}function vv(u){for(;u===Hh;)Hh=_u[--Tu],_u[Tu]=null,df=_u[--Tu],_u[Tu]=null;for(;u===ao;)ao=Pi[--Li],Pi[Li]=null,ga=Pi[--Li],Pi[Li]=null,ma=Pi[--Li],Pi[Li]=null}function TO(u,d){Pi[Li++]=ma,Pi[Li++]=ga,Pi[Li++]=ao,ma=d.id,ga=d.overflow,ao=u}var rn=null,er=null,It=!1,so=null,ki=!1,bv=Error(n(519));function oo(u){var d=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hf(Ri(d,u)),bv}function AO(u){var d=u.stateNode,m=u.type,x=u.memoizedProps;switch(d[cr]=u,d[Nr]=x,m){case"dialog":wt("cancel",d),wt("close",d);break;case"iframe":case"object":case"embed":wt("load",d);break;case"video":case"audio":for(m=0;m<Mf.length;m++)wt(Mf[m],d);break;case"source":wt("error",d);break;case"img":case"image":case"link":wt("error",d),wt("load",d);break;case"details":wt("toggle",d);break;case"input":wt("invalid",d),UD(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":wt("invalid",d);break;case"textarea":wt("invalid",d),$D(d,x.value,x.defaultValue,x.children)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||x.suppressHydrationWarning===!0||GC(d.textContent,m)?(x.popover!=null&&(wt("beforetoggle",d),wt("toggle",d)),x.onScroll!=null&&wt("scroll",d),x.onScrollEnd!=null&&wt("scrollend",d),x.onClick!=null&&(d.onclick=Za),d=!0):d=!1,d||oo(u,!0)}function DO(u){for(rn=u.return;rn;)switch(rn.tag){case 5:case 31:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:rn=rn.return}}function Au(u){if(u!==rn)return!1;if(!It)return DO(u),It=!0,!1;var d=u.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||Fb(u.type,u.memoizedProps)),m=!m),m&&er&&oo(u),DO(u),d===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));er=ZC(u)}else if(d===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));er=ZC(u)}else d===27?(d=er,Eo(u.type)?(u=Hb,Hb=null,er=u):er=d):er=rn?Ni(u.stateNode.nextSibling):null;return!0}function dl(){er=rn=null,It=!1}function xv(){var u=so;return u!==null&&(Yn===null?Yn=u:Yn.push.apply(Yn,u),so=null),u}function hf(u){so===null?so=[u]:so.push(u)}var Sv=H(null),hl=null,rs=null;function lo(u,d,m){J(Sv,d._currentValue),d._currentValue=m}function ns(u){u._currentValue=Sv.current,G(Sv)}function Ev(u,d,m){for(;u!==null;){var x=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),u===m)break;u=u.return}}function wv(u,d,m,x){var _=u.child;for(_!==null&&(_.return=u);_!==null;){var O=_.dependencies;if(O!==null){var F=_.child;O=O.firstContext;e:for(;O!==null;){var Q=O;O=_;for(var he=0;he<d.length;he++)if(Q.context===d[he]){O.lanes|=m,Q=O.alternate,Q!==null&&(Q.lanes|=m),Ev(O.return,m,u),x||(F=null);break e}O=Q.next}}else if(_.tag===18){if(F=_.return,F===null)throw Error(n(341));F.lanes|=m,O=F.alternate,O!==null&&(O.lanes|=m),Ev(F,m,u),F=null}else F=_.child;if(F!==null)F.return=_;else for(F=_;F!==null;){if(F===u){F=null;break}if(_=F.sibling,_!==null){_.return=F.return,F=_;break}F=F.return}_=F}}function Du(u,d,m,x){u=null;for(var _=d,O=!1;_!==null;){if(!O){if((_.flags&524288)!==0)O=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var F=_.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var Q=_.type;ii(_.pendingProps.value,F.value)||(u!==null?u.push(Q):u=[Q])}}else if(_===oe.current){if(F=_.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(u!==null?u.push(jf):u=[jf])}_=_.return}u!==null&&wv(d,u,m,x),d.flags|=262144}function Gh(u){for(u=u.firstContext;u!==null;){if(!ii(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function pl(u){hl=u,rs=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function nn(u){return OO(hl,u)}function Kh(u,d){return hl===null&&pl(u),OO(u,d)}function OO(u,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},rs===null){if(u===null)throw Error(n(308));rs=d,u.dependencies={lanes:0,firstContext:d},u.flags|=524288}else rs=rs.next=d;return m}var lG=typeof AbortController<"u"?AbortController:function(){var u=[],d=this.signal={aborted:!1,addEventListener:function(m,x){u.push(x)}};this.abort=function(){d.aborted=!0,u.forEach(function(m){return m()})}},uG=r.unstable_scheduleCallback,cG=r.unstable_NormalPriority,Dr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new lG,data:new Map,refCount:0}}function pf(u){u.refCount--,u.refCount===0&&uG(cG,function(){u.controller.abort()})}var mf=null,Tv=0,Ou=0,Iu=null;function fG(u,d){if(mf===null){var m=mf=[];Tv=0,Ou=Ob(),Iu={status:"pending",value:void 0,then:function(x){m.push(x)}}}return Tv++,d.then(IO,IO),d}function IO(){if(--Tv===0&&mf!==null){Iu!==null&&(Iu.status="fulfilled");var u=mf;mf=null,Ou=0,Iu=null;for(var d=0;d<u.length;d++)(0,u[d])()}}function dG(u,d){var m=[],x={status:"pending",value:null,reason:null,then:function(_){m.push(_)}};return u.then(function(){x.status="fulfilled",x.value=d;for(var _=0;_<m.length;_++)(0,m[_])(d)},function(_){for(x.status="rejected",x.reason=_,_=0;_<m.length;_++)(0,m[_])(void 0)}),x}var CO=$.S;$.S=function(u,d){hC=De(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&fG(u,d),CO!==null&&CO(u,d)};var ml=H(null);function Av(){var u=ml.current;return u!==null?u:Wt.pooledCache}function Yh(u,d){d===null?J(ml,ml.current):J(ml,d.pool)}function RO(){var u=Av();return u===null?null:{parent:Dr._currentValue,pool:u}}var Cu=Error(n(460)),Dv=Error(n(474)),zh=Error(n(542)),qh={then:function(){}};function PO(u){return u=u.status,u==="fulfilled"||u==="rejected"}function LO(u,d,m){switch(m=u[m],m===void 0?u.push(d):m!==d&&(d.then(Za,Za),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,MO(u),u;default:if(typeof d.status=="string")d.then(Za,Za);else{if(u=Wt,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=d,u.status="pending",u.then(function(x){if(d.status==="pending"){var _=d;_.status="fulfilled",_.value=x}},function(x){if(d.status==="pending"){var _=d;_.status="rejected",_.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,MO(u),u}throw yl=d,Cu}}function gl(u){try{var d=u._init;return d(u._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(yl=m,Cu):m}}var yl=null;function kO(){if(yl===null)throw Error(n(459));var u=yl;return yl=null,u}function MO(u){if(u===Cu||u===zh)throw Error(n(483))}var Ru=null,gf=0;function Wh(u){var d=gf;return gf+=1,Ru===null&&(Ru=[]),LO(Ru,u,d)}function yf(u,d){d=d.props.ref,u.ref=d!==void 0?d:null}function Vh(u,d){throw d.$$typeof===p?Error(n(525)):(u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u)))}function NO(u){function d(xe,me){if(u){var Te=xe.deletions;Te===null?(xe.deletions=[me],xe.flags|=16):Te.push(me)}}function m(xe,me){if(!u)return null;for(;me!==null;)d(xe,me),me=me.sibling;return null}function x(xe){for(var me=new Map;xe!==null;)xe.key!==null?me.set(xe.key,xe):me.set(xe.index,xe),xe=xe.sibling;return me}function _(xe,me){return xe=es(xe,me),xe.index=0,xe.sibling=null,xe}function O(xe,me,Te){return xe.index=Te,u?(Te=xe.alternate,Te!==null?(Te=Te.index,Te<me?(xe.flags|=67108866,me):Te):(xe.flags|=67108866,me)):(xe.flags|=1048576,me)}function F(xe){return u&&xe.alternate===null&&(xe.flags|=67108866),xe}function Q(xe,me,Te,Ke){return me===null||me.tag!==6?(me=mv(Te,xe.mode,Ke),me.return=xe,me):(me=_(me,Te),me.return=xe,me)}function he(xe,me,Te,Ke){var lt=Te.type;return lt===b?$e(xe,me,Te.props.children,Ke,Te.key):me!==null&&(me.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===P&&gl(lt)===me.type)?(me=_(me,Te.props),yf(me,Te),me.return=xe,me):(me=$h(Te.type,Te.key,Te.props,null,xe.mode,Ke),yf(me,Te),me.return=xe,me)}function Ae(xe,me,Te,Ke){return me===null||me.tag!==4||me.stateNode.containerInfo!==Te.containerInfo||me.stateNode.implementation!==Te.implementation?(me=gv(Te,xe.mode,Ke),me.return=xe,me):(me=_(me,Te.children||[]),me.return=xe,me)}function $e(xe,me,Te,Ke,lt){return me===null||me.tag!==7?(me=fl(Te,xe.mode,Ke,lt),me.return=xe,me):(me=_(me,Te),me.return=xe,me)}function Ye(xe,me,Te){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=mv(""+me,xe.mode,Te),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case g:return Te=$h(me.type,me.key,me.props,null,xe.mode,Te),yf(Te,me),Te.return=xe,Te;case y:return me=gv(me,xe.mode,Te),me.return=xe,me;case P:return me=gl(me),Ye(xe,me,Te)}if(q(me)||C(me))return me=fl(me,xe.mode,Te,null),me.return=xe,me;if(typeof me.then=="function")return Ye(xe,Wh(me),Te);if(me.$$typeof===w)return Ye(xe,Kh(xe,me),Te);Vh(xe,me)}return null}function Oe(xe,me,Te,Ke){var lt=me!==null?me.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return lt!==null?null:Q(xe,me,""+Te,Ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return Te.key===lt?he(xe,me,Te,Ke):null;case y:return Te.key===lt?Ae(xe,me,Te,Ke):null;case P:return Te=gl(Te),Oe(xe,me,Te,Ke)}if(q(Te)||C(Te))return lt!==null?null:$e(xe,me,Te,Ke,null);if(typeof Te.then=="function")return Oe(xe,me,Wh(Te),Ke);if(Te.$$typeof===w)return Oe(xe,me,Kh(xe,Te),Ke);Vh(xe,Te)}return null}function Le(xe,me,Te,Ke,lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return xe=xe.get(Te)||null,Q(me,xe,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case g:return xe=xe.get(Ke.key===null?Te:Ke.key)||null,he(me,xe,Ke,lt);case y:return xe=xe.get(Ke.key===null?Te:Ke.key)||null,Ae(me,xe,Ke,lt);case P:return Ke=gl(Ke),Le(xe,me,Te,Ke,lt)}if(q(Ke)||C(Ke))return xe=xe.get(Te)||null,$e(me,xe,Ke,lt,null);if(typeof Ke.then=="function")return Le(xe,me,Te,Wh(Ke),lt);if(Ke.$$typeof===w)return Le(xe,me,Te,Kh(me,Ke),lt);Vh(me,Ke)}return null}function nt(xe,me,Te,Ke){for(var lt=null,Ct=null,it=me,bt=me=0,Dt=null;it!==null&&bt<Te.length;bt++){it.index>bt?(Dt=it,it=null):Dt=it.sibling;var Rt=Oe(xe,it,Te[bt],Ke);if(Rt===null){it===null&&(it=Dt);break}u&&it&&Rt.alternate===null&&d(xe,it),me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt,it=Dt}if(bt===Te.length)return m(xe,it),It&&ts(xe,bt),lt;if(it===null){for(;bt<Te.length;bt++)it=Ye(xe,Te[bt],Ke),it!==null&&(me=O(it,me,bt),Ct===null?lt=it:Ct.sibling=it,Ct=it);return It&&ts(xe,bt),lt}for(it=x(it);bt<Te.length;bt++)Dt=Le(it,xe,bt,Te[bt],Ke),Dt!==null&&(u&&Dt.alternate!==null&&it.delete(Dt.key===null?bt:Dt.key),me=O(Dt,me,bt),Ct===null?lt=Dt:Ct.sibling=Dt,Ct=Dt);return u&&it.forEach(function(Do){return d(xe,Do)}),It&&ts(xe,bt),lt}function ct(xe,me,Te,Ke){if(Te==null)throw Error(n(151));for(var lt=null,Ct=null,it=me,bt=me=0,Dt=null,Rt=Te.next();it!==null&&!Rt.done;bt++,Rt=Te.next()){it.index>bt?(Dt=it,it=null):Dt=it.sibling;var Do=Oe(xe,it,Rt.value,Ke);if(Do===null){it===null&&(it=Dt);break}u&&it&&Do.alternate===null&&d(xe,it),me=O(Do,me,bt),Ct===null?lt=Do:Ct.sibling=Do,Ct=Do,it=Dt}if(Rt.done)return m(xe,it),It&&ts(xe,bt),lt;if(it===null){for(;!Rt.done;bt++,Rt=Te.next())Rt=Ye(xe,Rt.value,Ke),Rt!==null&&(me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt);return It&&ts(xe,bt),lt}for(it=x(it);!Rt.done;bt++,Rt=Te.next())Rt=Le(it,xe,bt,Rt.value,Ke),Rt!==null&&(u&&Rt.alternate!==null&&it.delete(Rt.key===null?bt:Rt.key),me=O(Rt,me,bt),Ct===null?lt=Rt:Ct.sibling=Rt,Ct=Rt);return u&&it.forEach(function(wK){return d(xe,wK)}),It&&ts(xe,bt),lt}function Yt(xe,me,Te,Ke){if(typeof Te=="object"&&Te!==null&&Te.type===b&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:e:{for(var lt=Te.key;me!==null;){if(me.key===lt){if(lt=Te.type,lt===b){if(me.tag===7){m(xe,me.sibling),Ke=_(me,Te.props.children),Ke.return=xe,xe=Ke;break e}}else if(me.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===P&&gl(lt)===me.type){m(xe,me.sibling),Ke=_(me,Te.props),yf(Ke,Te),Ke.return=xe,xe=Ke;break e}m(xe,me);break}else d(xe,me);me=me.sibling}Te.type===b?(Ke=fl(Te.props.children,xe.mode,Ke,Te.key),Ke.return=xe,xe=Ke):(Ke=$h(Te.type,Te.key,Te.props,null,xe.mode,Ke),yf(Ke,Te),Ke.return=xe,xe=Ke)}return F(xe);case y:e:{for(lt=Te.key;me!==null;){if(me.key===lt)if(me.tag===4&&me.stateNode.containerInfo===Te.containerInfo&&me.stateNode.implementation===Te.implementation){m(xe,me.sibling),Ke=_(me,Te.children||[]),Ke.return=xe,xe=Ke;break e}else{m(xe,me);break}else d(xe,me);me=me.sibling}Ke=gv(Te,xe.mode,Ke),Ke.return=xe,xe=Ke}return F(xe);case P:return Te=gl(Te),Yt(xe,me,Te,Ke)}if(q(Te))return nt(xe,me,Te,Ke);if(C(Te)){if(lt=C(Te),typeof lt!="function")throw Error(n(150));return Te=lt.call(Te),ct(xe,me,Te,Ke)}if(typeof Te.then=="function")return Yt(xe,me,Wh(Te),Ke);if(Te.$$typeof===w)return Yt(xe,me,Kh(xe,Te),Ke);Vh(xe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,me!==null&&me.tag===6?(m(xe,me.sibling),Ke=_(me,Te),Ke.return=xe,xe=Ke):(m(xe,me),Ke=mv(Te,xe.mode,Ke),Ke.return=xe,xe=Ke),F(xe)):m(xe,me)}return function(xe,me,Te,Ke){try{gf=0;var lt=Yt(xe,me,Te,Ke);return Ru=null,lt}catch(it){if(it===Cu||it===zh)throw it;var Ct=ai(29,it,null,xe.mode);return Ct.lanes=Ke,Ct.return=xe,Ct}finally{}}}var vl=NO(!0),FO=NO(!1),uo=!1;function Ov(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iv(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function co(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function fo(u,d,m){var x=u.updateQueue;if(x===null)return null;if(x=x.shared,(kt&2)!==0){var _=x.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d,d=jh(u),xO(u,null,m),d}return Uh(u,x,d,m),jh(u)}function vf(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,Ve(u,m)}}function Cv(u,d){var m=u.updateQueue,x=u.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var _=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var F={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?_=O=F:O=O.next=F,m=m.next}while(m!==null);O===null?_=O=d:O=O.next=d}else _=O=d;m={baseState:x.baseState,firstBaseUpdate:_,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}var Rv=!1;function bf(){if(Rv){var u=Iu;if(u!==null)throw u}}function xf(u,d,m,x){Rv=!1;var _=u.updateQueue;uo=!1;var O=_.firstBaseUpdate,F=_.lastBaseUpdate,Q=_.shared.pending;if(Q!==null){_.shared.pending=null;var he=Q,Ae=he.next;he.next=null,F===null?O=Ae:F.next=Ae,F=he;var $e=u.alternate;$e!==null&&($e=$e.updateQueue,Q=$e.lastBaseUpdate,Q!==F&&(Q===null?$e.firstBaseUpdate=Ae:Q.next=Ae,$e.lastBaseUpdate=he))}if(O!==null){var Ye=_.baseState;F=0,$e=Ae=he=null,Q=O;do{var Oe=Q.lane&-536870913,Le=Oe!==Q.lane;if(Le?(At&Oe)===Oe:(x&Oe)===Oe){Oe!==0&&Oe===Ou&&(Rv=!0),$e!==null&&($e=$e.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var nt=u,ct=Q;Oe=d;var Yt=m;switch(ct.tag){case 1:if(nt=ct.payload,typeof nt=="function"){Ye=nt.call(Yt,Ye,Oe);break e}Ye=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ct.payload,Oe=typeof nt=="function"?nt.call(Yt,Ye,Oe):nt,Oe==null)break e;Ye=h({},Ye,Oe);break e;case 2:uo=!0}}Oe=Q.callback,Oe!==null&&(u.flags|=64,Le&&(u.flags|=8192),Le=_.callbacks,Le===null?_.callbacks=[Oe]:Le.push(Oe))}else Le={lane:Oe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},$e===null?(Ae=$e=Le,he=Ye):$e=$e.next=Le,F|=Oe;if(Q=Q.next,Q===null){if(Q=_.shared.pending,Q===null)break;Le=Q,Q=Le.next,Le.next=null,_.lastBaseUpdate=Le,_.shared.pending=null}}while(!0);$e===null&&(he=Ye),_.baseState=he,_.firstBaseUpdate=Ae,_.lastBaseUpdate=$e,O===null&&(_.shared.lanes=0),yo|=F,u.lanes=F,u.memoizedState=Ye}}function BO(u,d){if(typeof u!="function")throw Error(n(191,u));u.call(d)}function UO(u,d){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)BO(m[u],d)}var Pu=H(null),Qh=H(0);function jO(u,d){u=ds,J(Qh,u),J(Pu,d),ds=u|d.baseLanes}function Pv(){J(Qh,ds),J(Pu,Pu.current)}function Lv(){ds=Qh.current,G(Pu),G(Qh)}var si=H(null),Mi=null;function ho(u){var d=u.alternate;J(Sr,Sr.current&1),J(si,u),Mi===null&&(d===null||Pu.current!==null||d.memoizedState!==null)&&(Mi=u)}function kv(u){J(Sr,Sr.current),J(si,u),Mi===null&&(Mi=u)}function $O(u){u.tag===22?(J(Sr,Sr.current),J(si,u),Mi===null&&(Mi=u)):po()}function po(){J(Sr,Sr.current),J(si,si.current)}function oi(u){G(si),Mi===u&&(Mi=null),G(Sr)}var Sr=H(0);function Xh(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||jb(m)||$b(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var is=0,vt=null,Gt=null,Or=null,Zh=!1,Lu=!1,bl=!1,Jh=0,Sf=0,ku=null,hG=0;function gr(){throw Error(n(321))}function Mv(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!ii(u[m],d[m]))return!1;return!0}function Nv(u,d,m,x,_,O){return is=O,vt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,$.H=u===null||u.memoizedState===null?_I:Xv,bl=!1,O=m(x,_),bl=!1,Lu&&(O=GO(d,m,x,_)),HO(u),O}function HO(u){$.H=_f;var d=Gt!==null&&Gt.next!==null;if(is=0,Or=Gt=vt=null,Zh=!1,Sf=0,ku=null,d)throw Error(n(300));u===null||Ir||(u=u.dependencies,u!==null&&Gh(u)&&(Ir=!0))}function GO(u,d,m,x){vt=u;var _=0;do{if(Lu&&(ku=null),Sf=0,Lu=!1,25<=_)throw Error(n(301));if(_+=1,Or=Gt=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}$.H=TI,O=d(m,x)}while(Lu);return O}function pG(){var u=$.H,d=u.useState()[0];return d=typeof d.then=="function"?Ef(d):d,u=u.useState()[0],(Gt!==null?Gt.memoizedState:null)!==u&&(vt.flags|=1024),d}function Fv(){var u=Jh!==0;return Jh=0,u}function Bv(u,d,m){d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~m}function Uv(u){if(Zh){for(u=u.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Zh=!1}is=0,Or=Gt=vt=null,Lu=!1,Sf=Jh=0,ku=null}function An(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?vt.memoizedState=Or=u:Or=Or.next=u,Or}function Er(){if(Gt===null){var u=vt.alternate;u=u!==null?u.memoizedState:null}else u=Gt.next;var d=Or===null?vt.memoizedState:Or.next;if(d!==null)Or=d,Gt=u;else{if(u===null)throw vt.alternate===null?Error(n(467)):Error(n(310));Gt=u,u={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Or===null?vt.memoizedState=Or=u:Or=Or.next=u}return Or}function ep(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ef(u){var d=Sf;return Sf+=1,ku===null&&(ku=[]),u=LO(ku,u,d),d=vt,(Or===null?d.memoizedState:Or.next)===null&&(d=d.alternate,$.H=d===null||d.memoizedState===null?_I:Xv),u}function tp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Ef(u);if(u.$$typeof===w)return nn(u)}throw Error(n(438,String(u)))}function jv(u){var d=null,m=vt.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var x=vt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(_){return _.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=ep(),vt.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(u),x=0;x<u;x++)m[x]=M;return d.index++,m}function as(u,d){return typeof d=="function"?d(u):d}function rp(u){var d=Er();return $v(d,Gt,u)}function $v(u,d,m){var x=u.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=m;var _=u.baseQueue,O=x.pending;if(O!==null){if(_!==null){var F=_.next;_.next=O.next,O.next=F}d.baseQueue=_=O,x.pending=null}if(O=u.baseState,_===null)u.memoizedState=O;else{d=_.next;var Q=F=null,he=null,Ae=d,$e=!1;do{var Ye=Ae.lane&-536870913;if(Ye!==Ae.lane?(At&Ye)===Ye:(is&Ye)===Ye){var Oe=Ae.revertLane;if(Oe===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Ye===Ou&&($e=!0);else if((is&Oe)===Oe){Ae=Ae.next,Oe===Ou&&($e=!0);continue}else Ye={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},he===null?(Q=he=Ye,F=O):he=he.next=Ye,vt.lanes|=Oe,yo|=Oe;Ye=Ae.action,bl&&m(O,Ye),O=Ae.hasEagerState?Ae.eagerState:m(O,Ye)}else Oe={lane:Ye,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},he===null?(Q=he=Oe,F=O):he=he.next=Oe,vt.lanes|=Ye,yo|=Ye;Ae=Ae.next}while(Ae!==null&&Ae!==d);if(he===null?F=O:he.next=Q,!ii(O,u.memoizedState)&&(Ir=!0,$e&&(m=Iu,m!==null)))throw m;u.memoizedState=O,u.baseState=F,u.baseQueue=he,x.lastRenderedState=O}return _===null&&(x.lanes=0),[u.memoizedState,x.dispatch]}function Hv(u){var d=Er(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var x=m.dispatch,_=m.pending,O=d.memoizedState;if(_!==null){m.pending=null;var F=_=_.next;do O=u(O,F.action),F=F.next;while(F!==_);ii(O,d.memoizedState)||(Ir=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),m.lastRenderedState=O}return[O,x]}function KO(u,d,m){var x=vt,_=Er(),O=It;if(O){if(m===void 0)throw Error(n(407));m=m()}else m=d();var F=!ii((Gt||_).memoizedState,m);if(F&&(_.memoizedState=m,Ir=!0),_=_.queue,Yv(qO.bind(null,x,_,u),[u]),_.getSnapshot!==d||F||Or!==null&&Or.memoizedState.tag&1){if(x.flags|=2048,Mu(9,{destroy:void 0},zO.bind(null,x,_,m,d),null),Wt===null)throw Error(n(349));O||(is&127)!==0||YO(x,d,m)}return m}function YO(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=vt.updateQueue,d===null?(d=ep(),vt.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function zO(u,d,m,x){d.value=m,d.getSnapshot=x,WO(d)&&VO(u)}function qO(u,d,m){return m(function(){WO(d)&&VO(u)})}function WO(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!ii(u,m)}catch{return!0}}function VO(u){var d=cl(u,2);d!==null&&zn(d,u,2)}function Gv(u){var d=An();if(typeof u=="function"){var m=u;if(u=m(),bl){tt(!0);try{m()}finally{tt(!1)}}}return d.memoizedState=d.baseState=u,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:u},d}function QO(u,d,m,x){return u.baseState=m,$v(u,Gt,typeof x=="function"?x:as)}function mG(u,d,m,x,_){if(ap(u))throw Error(n(485));if(u=d.action,u!==null){var O={payload:_,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){O.listeners.push(F)}};$.T!==null?m(!0):O.isTransition=!1,x(O),m=d.pending,m===null?(O.next=d.pending=O,XO(d,O)):(O.next=m.next,d.pending=m.next=O)}}function XO(u,d){var m=d.action,x=d.payload,_=u.state;if(d.isTransition){var O=$.T,F={};$.T=F;try{var Q=m(_,x),he=$.S;he!==null&&he(F,Q),ZO(u,d,Q)}catch(Ae){Kv(u,d,Ae)}finally{O!==null&&F.types!==null&&(O.types=F.types),$.T=O}}else try{O=m(_,x),ZO(u,d,O)}catch(Ae){Kv(u,d,Ae)}}function ZO(u,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){JO(u,d,x)},function(x){return Kv(u,d,x)}):JO(u,d,m)}function JO(u,d,m){d.status="fulfilled",d.value=m,eI(d),u.state=m,d=u.pending,d!==null&&(m=d.next,m===d?u.pending=null:(m=m.next,d.next=m,XO(u,m)))}function Kv(u,d,m){var x=u.pending;if(u.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=m,eI(d),d=d.next;while(d!==x)}u.action=null}function eI(u){u=u.listeners;for(var d=0;d<u.length;d++)(0,u[d])()}function tI(u,d){return d}function rI(u,d){if(It){var m=Wt.formState;if(m!==null){e:{var x=vt;if(It){if(er){t:{for(var _=er,O=ki;_.nodeType!==8;){if(!O){_=null;break t}if(_=Ni(_.nextSibling),_===null){_=null;break t}}O=_.data,_=O==="F!"||O==="F"?_:null}if(_){er=Ni(_.nextSibling),x=_.data==="F!";break e}}oo(x)}x=!1}x&&(d=m[0])}}return m=An(),m.memoizedState=m.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tI,lastRenderedState:d},m.queue=x,m=SI.bind(null,vt,x),x.dispatch=m,x=Gv(!1),O=Qv.bind(null,vt,!1,x.queue),x=An(),_={state:d,dispatch:null,action:u,pending:null},x.queue=_,m=mG.bind(null,vt,_,O,m),_.dispatch=m,x.memoizedState=u,[d,m,!1]}function nI(u){var d=Er();return iI(d,Gt,u)}function iI(u,d,m){if(d=$v(u,d,tI)[0],u=rp(as)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=Ef(d)}catch(F){throw F===Cu?zh:F}else x=d;d=Er();var _=d.queue,O=_.dispatch;return m!==d.memoizedState&&(vt.flags|=2048,Mu(9,{destroy:void 0},gG.bind(null,_,m),null)),[x,O,u]}function gG(u,d){u.action=d}function aI(u){var d=Er(),m=Gt;if(m!==null)return iI(d,m,u);Er(),d=d.memoizedState,m=Er();var x=m.queue.dispatch;return m.memoizedState=u,[d,x,!1]}function Mu(u,d,m,x){return u={tag:u,create:m,deps:x,inst:d,next:null},d=vt.updateQueue,d===null&&(d=ep(),vt.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=u.next=u:(x=m.next,m.next=u,u.next=x,d.lastEffect=u),u}function sI(){return Er().memoizedState}function np(u,d,m,x){var _=An();vt.flags|=u,_.memoizedState=Mu(1|d,{destroy:void 0},m,x===void 0?null:x)}function ip(u,d,m,x){var _=Er();x=x===void 0?null:x;var O=_.memoizedState.inst;Gt!==null&&x!==null&&Mv(x,Gt.memoizedState.deps)?_.memoizedState=Mu(d,O,m,x):(vt.flags|=u,_.memoizedState=Mu(1|d,O,m,x))}function oI(u,d){np(8390656,8,u,d)}function Yv(u,d){ip(2048,8,u,d)}function yG(u){vt.flags|=4;var d=vt.updateQueue;if(d===null)d=ep(),vt.updateQueue=d,d.events=[u];else{var m=d.events;m===null?d.events=[u]:m.push(u)}}function lI(u){var d=Er().memoizedState;return yG({ref:d,nextImpl:u}),function(){if((kt&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}function uI(u,d){return ip(4,2,u,d)}function cI(u,d){return ip(4,4,u,d)}function fI(u,d){if(typeof d=="function"){u=u();var m=d(u);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function dI(u,d,m){m=m!=null?m.concat([u]):null,ip(4,4,fI.bind(null,d,u),m)}function zv(){}function hI(u,d){var m=Er();d=d===void 0?null:d;var x=m.memoizedState;return d!==null&&Mv(d,x[1])?x[0]:(m.memoizedState=[u,d],u)}function pI(u,d){var m=Er();d=d===void 0?null:d;var x=m.memoizedState;if(d!==null&&Mv(d,x[1]))return x[0];if(x=u(),bl){tt(!0);try{u()}finally{tt(!1)}}return m.memoizedState=[x,d],x}function qv(u,d,m){return m===void 0||(is&1073741824)!==0&&(At&261930)===0?u.memoizedState=d:(u.memoizedState=m,u=mC(),vt.lanes|=u,yo|=u,m)}function mI(u,d,m,x){return ii(m,d)?m:Pu.current!==null?(u=qv(u,m,x),ii(u,d)||(Ir=!0),u):(is&42)===0||(is&1073741824)!==0&&(At&261930)===0?(Ir=!0,u.memoizedState=m):(u=mC(),vt.lanes|=u,yo|=u,d)}function gI(u,d,m,x,_){var O=z.p;z.p=O!==0&&8>O?O:8;var F=$.T,Q={};$.T=Q,Qv(u,!1,d,m);try{var he=_(),Ae=$.S;if(Ae!==null&&Ae(Q,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var $e=dG(he,x);wf(u,d,$e,ci(u))}else wf(u,d,x,ci(u))}catch(Ye){wf(u,d,{then:function(){},status:"rejected",reason:Ye},ci())}finally{z.p=O,F!==null&&Q.types!==null&&(F.types=Q.types),$.T=F}}function vG(){}function Wv(u,d,m,x){if(u.tag!==5)throw Error(n(476));var _=yI(u).queue;gI(u,_,d,K,m===null?vG:function(){return vI(u),m(x)})}function yI(u){var d=u.memoizedState;if(d!==null)return d;d={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:K},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:m},next:null},u.memoizedState=d,u=u.alternate,u!==null&&(u.memoizedState=d),d}function vI(u){var d=yI(u);d.next===null&&(d=u.alternate.memoizedState),wf(u,d.next.queue,{},ci())}function Vv(){return nn(jf)}function bI(){return Er().memoizedState}function xI(){return Er().memoizedState}function bG(u){for(var d=u.return;d!==null;){switch(d.tag){case 24:case 3:var m=ci();u=co(m);var x=fo(d,u,m);x!==null&&(zn(x,d,m),vf(x,d,m)),d={cache:_v()},u.payload=d;return}d=d.return}}function xG(u,d,m){var x=ci();m={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ap(u)?EI(d,m):(m=hv(u,d,m,x),m!==null&&(zn(m,u,x),wI(m,d,x)))}function SI(u,d,m){var x=ci();wf(u,d,m,x)}function wf(u,d,m,x){var _={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(ap(u))EI(d,_);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var F=d.lastRenderedState,Q=O(F,m);if(_.hasEagerState=!0,_.eagerState=Q,ii(Q,F))return Uh(u,d,_,0),Wt===null&&Bh(),!1}catch{}finally{}if(m=hv(u,d,_,x),m!==null)return zn(m,u,x),wI(m,d,x),!0}return!1}function Qv(u,d,m,x){if(x={lane:2,revertLane:Ob(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},ap(u)){if(d)throw Error(n(479))}else d=hv(u,m,x,2),d!==null&&zn(d,u,2)}function ap(u){var d=u.alternate;return u===vt||d!==null&&d===vt}function EI(u,d){Lu=Zh=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function wI(u,d,m){if((m&4194048)!==0){var x=d.lanes;x&=u.pendingLanes,m|=x,d.lanes=m,Ve(u,m)}}var _f={readContext:nn,use:tp,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useLayoutEffect:gr,useInsertionEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useSyncExternalStore:gr,useId:gr,useHostTransitionStatus:gr,useFormState:gr,useActionState:gr,useOptimistic:gr,useMemoCache:gr,useCacheRefresh:gr};_f.useEffectEvent=gr;var _I={readContext:nn,use:tp,useCallback:function(u,d){return An().memoizedState=[u,d===void 0?null:d],u},useContext:nn,useEffect:oI,useImperativeHandle:function(u,d,m){m=m!=null?m.concat([u]):null,np(4194308,4,fI.bind(null,d,u),m)},useLayoutEffect:function(u,d){return np(4194308,4,u,d)},useInsertionEffect:function(u,d){np(4,2,u,d)},useMemo:function(u,d){var m=An();d=d===void 0?null:d;var x=u();if(bl){tt(!0);try{u()}finally{tt(!1)}}return m.memoizedState=[x,d],x},useReducer:function(u,d,m){var x=An();if(m!==void 0){var _=m(d);if(bl){tt(!0);try{m(d)}finally{tt(!1)}}}else _=d;return x.memoizedState=x.baseState=_,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:_},x.queue=u,u=u.dispatch=xG.bind(null,vt,u),[x.memoizedState,u]},useRef:function(u){var d=An();return u={current:u},d.memoizedState=u},useState:function(u){u=Gv(u);var d=u.queue,m=SI.bind(null,vt,d);return d.dispatch=m,[u.memoizedState,m]},useDebugValue:zv,useDeferredValue:function(u,d){var m=An();return qv(m,u,d)},useTransition:function(){var u=Gv(!1);return u=gI.bind(null,vt,u.queue,!0,!1),An().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,d,m){var x=vt,_=An();if(It){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),Wt===null)throw Error(n(349));(At&127)!==0||YO(x,d,m)}_.memoizedState=m;var O={value:m,getSnapshot:d};return _.queue=O,oI(qO.bind(null,x,O,u),[u]),x.flags|=2048,Mu(9,{destroy:void 0},zO.bind(null,x,O,m,d),null),m},useId:function(){var u=An(),d=Wt.identifierPrefix;if(It){var m=ga,x=ma;m=(x&~(1<<32-Ze(x)-1)).toString(32)+m,d="_"+d+"R_"+m,m=Jh++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=hG++,d="_"+d+"r_"+m.toString(32)+"_";return u.memoizedState=d},useHostTransitionStatus:Vv,useFormState:rI,useActionState:rI,useOptimistic:function(u){var d=An();d.memoizedState=d.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=Qv.bind(null,vt,!0,m),m.dispatch=d,[u,d]},useMemoCache:jv,useCacheRefresh:function(){return An().memoizedState=bG.bind(null,vt)},useEffectEvent:function(u){var d=An(),m={impl:u};return d.memoizedState=m,function(){if((kt&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}},Xv={readContext:nn,use:tp,useCallback:hI,useContext:nn,useEffect:Yv,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:rp,useRef:sI,useState:function(){return rp(as)},useDebugValue:zv,useDeferredValue:function(u,d){var m=Er();return mI(m,Gt.memoizedState,u,d)},useTransition:function(){var u=rp(as)[0],d=Er().memoizedState;return[typeof u=="boolean"?u:Ef(u),d]},useSyncExternalStore:KO,useId:bI,useHostTransitionStatus:Vv,useFormState:nI,useActionState:nI,useOptimistic:function(u,d){var m=Er();return QO(m,Gt,u,d)},useMemoCache:jv,useCacheRefresh:xI};Xv.useEffectEvent=lI;var TI={readContext:nn,use:tp,useCallback:hI,useContext:nn,useEffect:Yv,useImperativeHandle:dI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:Hv,useRef:sI,useState:function(){return Hv(as)},useDebugValue:zv,useDeferredValue:function(u,d){var m=Er();return Gt===null?qv(m,u,d):mI(m,Gt.memoizedState,u,d)},useTransition:function(){var u=Hv(as)[0],d=Er().memoizedState;return[typeof u=="boolean"?u:Ef(u),d]},useSyncExternalStore:KO,useId:bI,useHostTransitionStatus:Vv,useFormState:aI,useActionState:aI,useOptimistic:function(u,d){var m=Er();return Gt!==null?QO(m,Gt,u,d):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:jv,useCacheRefresh:xI};TI.useEffectEvent=lI;function Zv(u,d,m,x){d=u.memoizedState,m=m(x,d),m=m==null?d:h({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var Jv={enqueueSetState:function(u,d,m){u=u._reactInternals;var x=ci(),_=co(x);_.payload=d,m!=null&&(_.callback=m),d=fo(u,_,x),d!==null&&(zn(d,u,x),vf(d,u,x))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var x=ci(),_=co(x);_.tag=1,_.payload=d,m!=null&&(_.callback=m),d=fo(u,_,x),d!==null&&(zn(d,u,x),vf(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=ci(),x=co(m);x.tag=2,d!=null&&(x.callback=d),d=fo(u,x,m),d!==null&&(zn(d,u,m),vf(d,u,m))}};function AI(u,d,m,x,_,O,F){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(x,O,F):d.prototype&&d.prototype.isPureReactComponent?!cf(m,x)||!cf(_,O):!0}function DI(u,d,m,x){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,x),d.state!==u&&Jv.enqueueReplaceState(d,d.state,null)}function xl(u,d){var m=d;if("ref"in d){m={};for(var x in d)x!=="ref"&&(m[x]=d[x])}if(u=u.defaultProps){m===d&&(m=h({},m));for(var _ in u)m[_]===void 0&&(m[_]=u[_])}return m}function OI(u){Fh(u)}function II(u){console.error(u)}function CI(u){Fh(u)}function sp(u,d){try{var m=u.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function RI(u,d,m){try{var x=u.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function eb(u,d,m){return m=co(m),m.tag=3,m.payload={element:null},m.callback=function(){sp(u,d)},m}function PI(u){return u=co(u),u.tag=3,u}function LI(u,d,m,x){var _=m.type.getDerivedStateFromError;if(typeof _=="function"){var O=x.value;u.payload=function(){return _(O)},u.callback=function(){RI(d,m,x)}}var F=m.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(u.callback=function(){RI(d,m,x),typeof _!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var Q=x.stack;this.componentDidCatch(x.value,{componentStack:Q!==null?Q:""})})}function SG(u,d,m,x,_){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=m.alternate,d!==null&&Du(d,m,_,!0),m=si.current,m!==null){switch(m.tag){case 31:case 13:return Mi===null?vp():m.alternate===null&&yr===0&&(yr=3),m.flags&=-257,m.flags|=65536,m.lanes=_,x===qh?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([x]):d.add(x),Tb(u,x,_)),!1;case 22:return m.flags|=65536,x===qh?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([x]):m.add(x)),Tb(u,x,_)),!1}throw Error(n(435,m.tag))}return Tb(u,x,_),vp(),!1}if(It)return d=si.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=_,x!==bv&&(u=Error(n(422),{cause:x}),hf(Ri(u,m)))):(x!==bv&&(d=Error(n(423),{cause:x}),hf(Ri(d,m))),u=u.current.alternate,u.flags|=65536,_&=-_,u.lanes|=_,x=Ri(x,m),_=eb(u.stateNode,x,_),Cv(u,_),yr!==4&&(yr=2)),!1;var O=Error(n(520),{cause:x});if(O=Ri(O,m),Pf===null?Pf=[O]:Pf.push(O),yr!==4&&(yr=2),d===null)return!0;x=Ri(x,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,u=_&-_,m.lanes|=u,u=eb(m.stateNode,x,u),Cv(m,u),!1;case 1:if(d=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(vo===null||!vo.has(O))))return m.flags|=65536,_&=-_,m.lanes|=_,_=PI(_),LI(_,u,m,x),Cv(m,_),!1}m=m.return}while(m!==null);return!1}var tb=Error(n(461)),Ir=!1;function an(u,d,m,x){d.child=u===null?FO(d,null,m,x):vl(d,u.child,m,x)}function kI(u,d,m,x,_){m=m.render;var O=d.ref;if("ref"in x){var F={};for(var Q in x)Q!=="ref"&&(F[Q]=x[Q])}else F=x;return pl(d),x=Nv(u,d,m,F,O,_),Q=Fv(),u!==null&&!Ir?(Bv(u,d,_),ss(u,d,_)):(It&&Q&&yv(d),d.flags|=1,an(u,d,x,_),d.child)}function MI(u,d,m,x,_){if(u===null){var O=m.type;return typeof O=="function"&&!pv(O)&&O.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=O,NI(u,d,O,x,_)):(u=$h(m.type,null,x,d,d.mode,_),u.ref=d.ref,u.return=d,d.child=u)}if(O=u.child,!ub(u,_)){var F=O.memoizedProps;if(m=m.compare,m=m!==null?m:cf,m(F,x)&&u.ref===d.ref)return ss(u,d,_)}return d.flags|=1,u=es(O,x),u.ref=d.ref,u.return=d,d.child=u}function NI(u,d,m,x,_){if(u!==null){var O=u.memoizedProps;if(cf(O,x)&&u.ref===d.ref)if(Ir=!1,d.pendingProps=x=O,ub(u,_))(u.flags&131072)!==0&&(Ir=!0);else return d.lanes=u.lanes,ss(u,d,_)}return rb(u,d,m,x,_)}function FI(u,d,m,x){var _=x.children,O=u!==null?u.memoizedState:null;if(u===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((d.flags&128)!==0){if(O=O!==null?O.baseLanes|m:m,u!==null){for(x=d.child=u.child,_=0;x!==null;)_=_|x.lanes|x.childLanes,x=x.sibling;x=_&~O}else x=0,d.child=null;return BI(u,d,O,m,x)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},u!==null&&Yh(d,O!==null?O.cachePool:null),O!==null?jO(d,O):Pv(),$O(d);else return x=d.lanes=536870912,BI(u,d,O!==null?O.baseLanes|m:m,m,x)}else O!==null?(Yh(d,O.cachePool),jO(d,O),po(),d.memoizedState=null):(u!==null&&Yh(d,null),Pv(),po());return an(u,d,_,m),d.child}function Tf(u,d){return u!==null&&u.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function BI(u,d,m,x,_){var O=Av();return O=O===null?null:{parent:Dr._currentValue,pool:O},d.memoizedState={baseLanes:m,cachePool:O},u!==null&&Yh(d,null),Pv(),$O(d),u!==null&&Du(u,d,x,!0),d.childLanes=_,null}function op(u,d){return d=up({mode:d.mode,children:d.children},u.mode),d.ref=u.ref,u.child=d,d.return=u,d}function UI(u,d,m){return vl(d,u.child,null,m),u=op(d,d.pendingProps),u.flags|=2,oi(d),d.memoizedState=null,u}function EG(u,d,m){var x=d.pendingProps,_=(d.flags&128)!==0;if(d.flags&=-129,u===null){if(It){if(x.mode==="hidden")return u=op(d,x),d.lanes=536870912,Tf(null,u);if(kv(d),(u=er)?(u=XC(u,ki),u=u!==null&&u.data==="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:ao!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},m=EO(u),m.return=d,d.child=m,rn=d,er=null)):u=null,u===null)throw oo(d);return d.lanes=536870912,null}return op(d,x)}var O=u.memoizedState;if(O!==null){var F=O.dehydrated;if(kv(d),_)if(d.flags&256)d.flags&=-257,d=UI(u,d,m);else if(d.memoizedState!==null)d.child=u.child,d.flags|=128,d=null;else throw Error(n(558));else if(Ir||Du(u,d,m,!1),_=(m&u.childLanes)!==0,Ir||_){if(x=Wt,x!==null&&(F=Je(x,m),F!==0&&F!==O.retryLane))throw O.retryLane=F,cl(u,F),zn(x,u,F),tb;vp(),d=UI(u,d,m)}else u=O.treeContext,er=Ni(F.nextSibling),rn=d,It=!0,so=null,ki=!1,u!==null&&TO(d,u),d=op(d,x),d.flags|=4096;return d}return u=es(u.child,{mode:x.mode,children:x.children}),u.ref=d.ref,d.child=u,u.return=d,u}function lp(u,d){var m=d.ref;if(m===null)u!==null&&u.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(u===null||u.ref!==m)&&(d.flags|=4194816)}}function rb(u,d,m,x,_){return pl(d),m=Nv(u,d,m,x,void 0,_),x=Fv(),u!==null&&!Ir?(Bv(u,d,_),ss(u,d,_)):(It&&x&&yv(d),d.flags|=1,an(u,d,m,_),d.child)}function jI(u,d,m,x,_,O){return pl(d),d.updateQueue=null,m=GO(d,x,m,_),HO(u),x=Fv(),u!==null&&!Ir?(Bv(u,d,O),ss(u,d,O)):(It&&x&&yv(d),d.flags|=1,an(u,d,m,O),d.child)}function $I(u,d,m,x,_){if(pl(d),d.stateNode===null){var O=wu,F=m.contextType;typeof F=="object"&&F!==null&&(O=nn(F)),O=new m(x,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Jv,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=x,O.state=d.memoizedState,O.refs={},Ov(d),F=m.contextType,O.context=typeof F=="object"&&F!==null?nn(F):wu,O.state=d.memoizedState,F=m.getDerivedStateFromProps,typeof F=="function"&&(Zv(d,m,F,x),O.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(F=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),F!==O.state&&Jv.enqueueReplaceState(O,O.state,null),xf(d,x,O,_),bf(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(u===null){O=d.stateNode;var Q=d.memoizedProps,he=xl(m,Q);O.props=he;var Ae=O.context,$e=m.contextType;F=wu,typeof $e=="object"&&$e!==null&&(F=nn($e));var Ye=m.getDerivedStateFromProps;$e=typeof Ye=="function"||typeof O.getSnapshotBeforeUpdate=="function",Q=d.pendingProps!==Q,$e||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q||Ae!==F)&&DI(d,O,x,F),uo=!1;var Oe=d.memoizedState;O.state=Oe,xf(d,x,O,_),bf(),Ae=d.memoizedState,Q||Oe!==Ae||uo?(typeof Ye=="function"&&(Zv(d,m,Ye,x),Ae=d.memoizedState),(he=uo||AI(d,m,he,x,Oe,Ae,F))?($e||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=Ae),O.props=x,O.state=Ae,O.context=F,x=he):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{O=d.stateNode,Iv(u,d),F=d.memoizedProps,$e=xl(m,F),O.props=$e,Ye=d.pendingProps,Oe=O.context,Ae=m.contextType,he=wu,typeof Ae=="object"&&Ae!==null&&(he=nn(Ae)),Q=m.getDerivedStateFromProps,(Ae=typeof Q=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(F!==Ye||Oe!==he)&&DI(d,O,x,he),uo=!1,Oe=d.memoizedState,O.state=Oe,xf(d,x,O,_),bf();var Le=d.memoizedState;F!==Ye||Oe!==Le||uo||u!==null&&u.dependencies!==null&&Gh(u.dependencies)?(typeof Q=="function"&&(Zv(d,m,Q,x),Le=d.memoizedState),($e=uo||AI(d,m,$e,x,Oe,Le,he)||u!==null&&u.dependencies!==null&&Gh(u.dependencies))?(Ae||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,Le,he),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,Le,he)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||F===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||F===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=Le),O.props=x,O.state=Le,O.context=he,x=$e):(typeof O.componentDidUpdate!="function"||F===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||F===u.memoizedProps&&Oe===u.memoizedState||(d.flags|=1024),x=!1)}return O=x,lp(u,d),x=(d.flags&128)!==0,O||x?(O=d.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,u!==null&&x?(d.child=vl(d,u.child,null,_),d.child=vl(d,null,m,_)):an(u,d,m,_),d.memoizedState=O.state,u=d.child):u=ss(u,d,_),u}function HI(u,d,m,x){return dl(),d.flags|=256,an(u,d,m,x),d.child}var nb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ib(u){return{baseLanes:u,cachePool:RO()}}function ab(u,d,m){return u=u!==null?u.childLanes&~m:0,d&&(u|=ui),u}function GI(u,d,m){var x=d.pendingProps,_=!1,O=(d.flags&128)!==0,F;if((F=O)||(F=u!==null&&u.memoizedState===null?!1:(Sr.current&2)!==0),F&&(_=!0,d.flags&=-129),F=(d.flags&32)!==0,d.flags&=-33,u===null){if(It){if(_?ho(d):po(),(u=er)?(u=XC(u,ki),u=u!==null&&u.data!=="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:ao!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},m=EO(u),m.return=d,d.child=m,rn=d,er=null)):u=null,u===null)throw oo(d);return $b(u)?d.lanes=32:d.lanes=536870912,null}var Q=x.children;return x=x.fallback,_?(po(),_=d.mode,Q=up({mode:"hidden",children:Q},_),x=fl(x,_,m,null),Q.return=d,x.return=d,Q.sibling=x,d.child=Q,x=d.child,x.memoizedState=ib(m),x.childLanes=ab(u,F,m),d.memoizedState=nb,Tf(null,x)):(ho(d),sb(d,Q))}var he=u.memoizedState;if(he!==null&&(Q=he.dehydrated,Q!==null)){if(O)d.flags&256?(ho(d),d.flags&=-257,d=ob(u,d,m)):d.memoizedState!==null?(po(),d.child=u.child,d.flags|=128,d=null):(po(),Q=x.fallback,_=d.mode,x=up({mode:"visible",children:x.children},_),Q=fl(Q,_,m,null),Q.flags|=2,x.return=d,Q.return=d,x.sibling=Q,d.child=x,vl(d,u.child,null,m),x=d.child,x.memoizedState=ib(m),x.childLanes=ab(u,F,m),d.memoizedState=nb,d=Tf(null,x));else if(ho(d),$b(Q)){if(F=Q.nextSibling&&Q.nextSibling.dataset,F)var Ae=F.dgst;F=Ae,x=Error(n(419)),x.stack="",x.digest=F,hf({value:x,source:null,stack:null}),d=ob(u,d,m)}else if(Ir||Du(u,d,m,!1),F=(m&u.childLanes)!==0,Ir||F){if(F=Wt,F!==null&&(x=Je(F,m),x!==0&&x!==he.retryLane))throw he.retryLane=x,cl(u,x),zn(F,u,x),tb;jb(Q)||vp(),d=ob(u,d,m)}else jb(Q)?(d.flags|=192,d.child=u.child,d=null):(u=he.treeContext,er=Ni(Q.nextSibling),rn=d,It=!0,so=null,ki=!1,u!==null&&TO(d,u),d=sb(d,x.children),d.flags|=4096);return d}return _?(po(),Q=x.fallback,_=d.mode,he=u.child,Ae=he.sibling,x=es(he,{mode:"hidden",children:x.children}),x.subtreeFlags=he.subtreeFlags&65011712,Ae!==null?Q=es(Ae,Q):(Q=fl(Q,_,m,null),Q.flags|=2),Q.return=d,x.return=d,x.sibling=Q,d.child=x,Tf(null,x),x=d.child,Q=u.child.memoizedState,Q===null?Q=ib(m):(_=Q.cachePool,_!==null?(he=Dr._currentValue,_=_.parent!==he?{parent:he,pool:he}:_):_=RO(),Q={baseLanes:Q.baseLanes|m,cachePool:_}),x.memoizedState=Q,x.childLanes=ab(u,F,m),d.memoizedState=nb,Tf(u.child,x)):(ho(d),m=u.child,u=m.sibling,m=es(m,{mode:"visible",children:x.children}),m.return=d,m.sibling=null,u!==null&&(F=d.deletions,F===null?(d.deletions=[u],d.flags|=16):F.push(u)),d.child=m,d.memoizedState=null,m)}function sb(u,d){return d=up({mode:"visible",children:d},u.mode),d.return=u,u.child=d}function up(u,d){return u=ai(22,u,null,d),u.lanes=0,u}function ob(u,d,m){return vl(d,u.child,null,m),u=sb(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function KI(u,d,m){u.lanes|=d;var x=u.alternate;x!==null&&(x.lanes|=d),Ev(u.return,d,m)}function lb(u,d,m,x,_,O){var F=u.memoizedState;F===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:_,treeForkCount:O}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=x,F.tail=m,F.tailMode=_,F.treeForkCount=O)}function YI(u,d,m){var x=d.pendingProps,_=x.revealOrder,O=x.tail;x=x.children;var F=Sr.current,Q=(F&2)!==0;if(Q?(F=F&1|2,d.flags|=128):F&=1,J(Sr,F),an(u,d,x,m),x=It?df:0,!Q&&u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&KI(u,m,d);else if(u.tag===19)KI(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(_){case"forwards":for(m=d.child,_=null;m!==null;)u=m.alternate,u!==null&&Xh(u)===null&&(_=m),m=m.sibling;m=_,m===null?(_=d.child,d.child=null):(_=m.sibling,m.sibling=null),lb(d,!1,_,m,O,x);break;case"backwards":case"unstable_legacy-backwards":for(m=null,_=d.child,d.child=null;_!==null;){if(u=_.alternate,u!==null&&Xh(u)===null){d.child=_;break}u=_.sibling,_.sibling=m,m=_,_=u}lb(d,!0,m,null,O,x);break;case"together":lb(d,!1,null,null,void 0,x);break;default:d.memoizedState=null}return d.child}function ss(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),yo|=d.lanes,(m&d.childLanes)===0)if(u!==null){if(Du(u,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,m=es(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=es(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function ub(u,d){return(u.lanes&d)!==0?!0:(u=u.dependencies,!!(u!==null&&Gh(u)))}function wG(u,d,m){switch(d.tag){case 3:re(d,d.stateNode.containerInfo),lo(d,Dr,u.memoizedState.cache),dl();break;case 27:case 5:le(d);break;case 4:re(d,d.stateNode.containerInfo);break;case 10:lo(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,kv(d),null;break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?(ho(d),d.flags|=128,null):(m&d.child.childLanes)!==0?GI(u,d,m):(ho(d),u=ss(u,d,m),u!==null?u.sibling:null);ho(d);break;case 19:var _=(u.flags&128)!==0;if(x=(m&d.childLanes)!==0,x||(Du(u,d,m,!1),x=(m&d.childLanes)!==0),_){if(x)return YI(u,d,m);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),J(Sr,Sr.current),x)break;return null;case 22:return d.lanes=0,FI(u,d,m,d.pendingProps);case 24:lo(d,Dr,u.memoizedState.cache)}return ss(u,d,m)}function zI(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps)Ir=!0;else{if(!ub(u,m)&&(d.flags&128)===0)return Ir=!1,wG(u,d,m);Ir=(u.flags&131072)!==0}else Ir=!1,It&&(d.flags&1048576)!==0&&_O(d,df,d.index);switch(d.lanes=0,d.tag){case 16:e:{var x=d.pendingProps;if(u=gl(d.elementType),d.type=u,typeof u=="function")pv(u)?(x=xl(u,x),d.tag=1,d=$I(null,d,u,x,m)):(d.tag=0,d=rb(null,d,u,x,m));else{if(u!=null){var _=u.$$typeof;if(_===A){d.tag=11,d=kI(null,d,u,x,m);break e}else if(_===D){d.tag=14,d=MI(null,d,u,x,m);break e}}throw d=Y(u)||u,Error(n(306,d,""))}}return d;case 0:return rb(u,d,d.type,d.pendingProps,m);case 1:return x=d.type,_=xl(x,d.pendingProps),$I(u,d,x,_,m);case 3:e:{if(re(d,d.stateNode.containerInfo),u===null)throw Error(n(387));x=d.pendingProps;var O=d.memoizedState;_=O.element,Iv(u,d),xf(d,x,null,m);var F=d.memoizedState;if(x=F.cache,lo(d,Dr,x),x!==O.cache&&wv(d,[Dr],m,!0),bf(),x=F.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:F.cache},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){d=HI(u,d,x,m);break e}else if(x!==_){_=Ri(Error(n(424)),d),hf(_),d=HI(u,d,x,m);break e}else{switch(u=d.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(er=Ni(u.firstChild),rn=d,It=!0,so=null,ki=!0,m=FO(d,null,x,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(dl(),x===_){d=ss(u,d,m);break e}an(u,d,x,m)}d=d.child}return d;case 26:return lp(u,d),u===null?(m=nR(d.type,null,d.pendingProps,null))?d.memoizedState=m:It||(m=d.type,u=d.pendingProps,x=Tp(be.current).createElement(m),x[cr]=d,x[Nr]=u,sn(x,m,u),Yr(x),d.stateNode=x):d.memoizedState=nR(d.type,u.memoizedProps,d.pendingProps,u.memoizedState),null;case 27:return le(d),u===null&&It&&(x=d.stateNode=eR(d.type,d.pendingProps,be.current),rn=d,ki=!0,_=er,Eo(d.type)?(Hb=_,er=Ni(x.firstChild)):er=_),an(u,d,d.pendingProps.children,m),lp(u,d),u===null&&(d.flags|=4194304),d.child;case 5:return u===null&&It&&((_=x=er)&&(x=JG(x,d.type,d.pendingProps,ki),x!==null?(d.stateNode=x,rn=d,er=Ni(x.firstChild),ki=!1,_=!0):_=!1),_||oo(d)),le(d),_=d.type,O=d.pendingProps,F=u!==null?u.memoizedProps:null,x=O.children,Fb(_,O)?x=null:F!==null&&Fb(_,F)&&(d.flags|=32),d.memoizedState!==null&&(_=Nv(u,d,pG,null,null,m),jf._currentValue=_),lp(u,d),an(u,d,x,m),d.child;case 6:return u===null&&It&&((u=m=er)&&(m=eK(m,d.pendingProps,ki),m!==null?(d.stateNode=m,rn=d,er=null,u=!0):u=!1),u||oo(d)),null;case 13:return GI(u,d,m);case 4:return re(d,d.stateNode.containerInfo),x=d.pendingProps,u===null?d.child=vl(d,null,x,m):an(u,d,x,m),d.child;case 11:return kI(u,d,d.type,d.pendingProps,m);case 7:return an(u,d,d.pendingProps,m),d.child;case 8:return an(u,d,d.pendingProps.children,m),d.child;case 12:return an(u,d,d.pendingProps.children,m),d.child;case 10:return x=d.pendingProps,lo(d,d.type,x.value),an(u,d,x.children,m),d.child;case 9:return _=d.type._context,x=d.pendingProps.children,pl(d),_=nn(_),x=x(_),d.flags|=1,an(u,d,x,m),d.child;case 14:return MI(u,d,d.type,d.pendingProps,m);case 15:return NI(u,d,d.type,d.pendingProps,m);case 19:return YI(u,d,m);case 31:return EG(u,d,m);case 22:return FI(u,d,m,d.pendingProps);case 24:return pl(d),x=nn(Dr),u===null?(_=Av(),_===null&&(_=Wt,O=_v(),_.pooledCache=O,O.refCount++,O!==null&&(_.pooledCacheLanes|=m),_=O),d.memoizedState={parent:x,cache:_},Ov(d),lo(d,Dr,_)):((u.lanes&m)!==0&&(Iv(u,d),xf(d,null,null,m),bf()),_=u.memoizedState,O=d.memoizedState,_.parent!==x?(_={parent:x,cache:x},d.memoizedState=_,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=_),lo(d,Dr,x)):(x=O.cache,lo(d,Dr,x),x!==_.cache&&wv(d,[Dr],m,!0))),an(u,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function os(u){u.flags|=4}function cb(u,d,m,x,_){if((d=(u.mode&32)!==0)&&(d=!1),d){if(u.flags|=16777216,(_&335544128)===_)if(u.stateNode.complete)u.flags|=8192;else if(bC())u.flags|=8192;else throw yl=qh,Dv}else u.flags&=-16777217}function qI(u,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!lR(d))if(bC())u.flags|=8192;else throw yl=qh,Dv}function cp(u,d){d!==null&&(u.flags|=4),u.flags&16384&&(d=u.tag!==22?Wa():536870912,u.lanes|=d,Uu|=d)}function Af(u,d){if(!It)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:x.sibling=null}}function tr(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,x=0;if(d)for(var _=u.child;_!==null;)m|=_.lanes|_.childLanes,x|=_.subtreeFlags&65011712,x|=_.flags&65011712,_.return=u,_=_.sibling;else for(_=u.child;_!==null;)m|=_.lanes|_.childLanes,x|=_.subtreeFlags,x|=_.flags,_.return=u,_=_.sibling;return u.subtreeFlags|=x,u.childLanes=m,d}function _G(u,d,m){var x=d.pendingProps;switch(vv(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(d),null;case 1:return tr(d),null;case 3:return m=d.stateNode,x=null,u!==null&&(x=u.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),ns(Dr),te(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Au(d)?os(d):u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,xv())),tr(d),null;case 26:var _=d.type,O=d.memoizedState;return u===null?(os(d),O!==null?(tr(d),qI(d,O)):(tr(d),cb(d,_,null,x,m))):O?O!==u.memoizedState?(os(d),tr(d),qI(d,O)):(tr(d),d.flags&=-16777217):(u=u.memoizedProps,u!==x&&os(d),tr(d),cb(d,_,u,x,m)),null;case 27:if(ce(d),m=be.current,_=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return tr(d),null}u=fe.current,Au(d)?AO(d):(u=eR(_,x,m),d.stateNode=u,os(d))}return tr(d),null;case 5:if(ce(d),_=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return tr(d),null}if(O=fe.current,Au(d))AO(d);else{var F=Tp(be.current);switch(O){case 1:O=F.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:O=F.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":O=F.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":O=F.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":O=F.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?F.createElement("select",{is:x.is}):F.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?F.createElement(_,{is:x.is}):F.createElement(_)}}O[cr]=d,O[Nr]=x;e:for(F=d.child;F!==null;){if(F.tag===5||F.tag===6)O.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===d)break e;for(;F.sibling===null;){if(F.return===null||F.return===d)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}d.stateNode=O;e:switch(sn(O,_,x),_){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&os(d)}}return tr(d),cb(d,d.type,u===null?null:u.memoizedProps,d.pendingProps,m),null;case 6:if(u&&d.stateNode!=null)u.memoizedProps!==x&&os(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(u=be.current,Au(d)){if(u=d.stateNode,m=d.memoizedProps,x=null,_=rn,_!==null)switch(_.tag){case 27:case 5:x=_.memoizedProps}u[cr]=d,u=!!(u.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||GC(u.nodeValue,m)),u||oo(d,!0)}else u=Tp(u).createTextNode(x),u[cr]=d,d.stateNode=u}return tr(d),null;case 31:if(m=d.memoizedState,u===null||u.memoizedState!==null){if(x=Au(d),m!==null){if(u===null){if(!x)throw Error(n(318));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[cr]=d}else dl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;tr(d),u=!1}else m=xv(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=m),u=!0;if(!u)return d.flags&256?(oi(d),d):(oi(d),null);if((d.flags&128)!==0)throw Error(n(558))}return tr(d),null;case 13:if(x=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(_=Au(d),x!==null&&x.dehydrated!==null){if(u===null){if(!_)throw Error(n(318));if(_=d.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[cr]=d}else dl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;tr(d),_=!1}else _=xv(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=_),_=!0;if(!_)return d.flags&256?(oi(d),d):(oi(d),null)}return oi(d),(d.flags&128)!==0?(d.lanes=m,d):(m=x!==null,u=u!==null&&u.memoizedState!==null,m&&(x=d.child,_=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(_=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==_&&(x.flags|=2048)),m!==u&&m&&(d.child.flags|=8192),cp(d,d.updateQueue),tr(d),null);case 4:return te(),u===null&&Pb(d.stateNode.containerInfo),tr(d),null;case 10:return ns(d.type),tr(d),null;case 19:if(G(Sr),x=d.memoizedState,x===null)return tr(d),null;if(_=(d.flags&128)!==0,O=x.rendering,O===null)if(_)Af(x,!1);else{if(yr!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(O=Xh(u),O!==null){for(d.flags|=128,Af(x,!1),u=O.updateQueue,d.updateQueue=u,cp(d,u),d.subtreeFlags=0,u=m,m=d.child;m!==null;)SO(m,u),m=m.sibling;return J(Sr,Sr.current&1|2),It&&ts(d,x.treeForkCount),d.child}u=u.sibling}x.tail!==null&&De()>mp&&(d.flags|=128,_=!0,Af(x,!1),d.lanes=4194304)}else{if(!_)if(u=Xh(O),u!==null){if(d.flags|=128,_=!0,u=u.updateQueue,d.updateQueue=u,cp(d,u),Af(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!It)return tr(d),null}else 2*De()-x.renderingStartTime>mp&&m!==536870912&&(d.flags|=128,_=!0,Af(x,!1),d.lanes=4194304);x.isBackwards?(O.sibling=d.child,d.child=O):(u=x.last,u!==null?u.sibling=O:d.child=O,x.last=O)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=De(),u.sibling=null,m=Sr.current,J(Sr,_?m&1|2:m&1),It&&ts(d,x.treeForkCount),u):(tr(d),null);case 22:case 23:return oi(d),Lv(),x=d.memoizedState!==null,u!==null?u.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(m&536870912)!==0&&(d.flags&128)===0&&(tr(d),d.subtreeFlags&6&&(d.flags|=8192)):tr(d),m=d.updateQueue,m!==null&&cp(d,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048),u!==null&&G(ml),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),ns(Dr),tr(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function TG(u,d){switch(vv(d),d.tag){case 1:return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return ns(Dr),te(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 26:case 27:case 5:return ce(d),null;case 31:if(d.memoizedState!==null){if(oi(d),d.alternate===null)throw Error(n(340));dl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 13:if(oi(d),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));dl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return G(Sr),null;case 4:return te(),null;case 10:return ns(d.type),null;case 22:case 23:return oi(d),Lv(),u!==null&&G(ml),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 24:return ns(Dr),null;case 25:return null;default:return null}}function WI(u,d){switch(vv(d),d.tag){case 3:ns(Dr),te();break;case 26:case 27:case 5:ce(d);break;case 4:te();break;case 31:d.memoizedState!==null&&oi(d);break;case 13:oi(d);break;case 19:G(Sr);break;case 10:ns(d.type);break;case 22:case 23:oi(d),Lv(),u!==null&&G(ml);break;case 24:ns(Dr)}}function Df(u,d){try{var m=d.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var _=x.next;m=_;do{if((m.tag&u)===u){x=void 0;var O=m.create,F=m.inst;x=O(),F.destroy=x}m=m.next}while(m!==_)}}catch(Q){Ft(d,d.return,Q)}}function mo(u,d,m){try{var x=d.updateQueue,_=x!==null?x.lastEffect:null;if(_!==null){var O=_.next;x=O;do{if((x.tag&u)===u){var F=x.inst,Q=F.destroy;if(Q!==void 0){F.destroy=void 0,_=d;var he=m,Ae=Q;try{Ae()}catch($e){Ft(_,he,$e)}}}x=x.next}while(x!==O)}}catch($e){Ft(d,d.return,$e)}}function VI(u){var d=u.updateQueue;if(d!==null){var m=u.stateNode;try{UO(d,m)}catch(x){Ft(u,u.return,x)}}}function QI(u,d,m){m.props=xl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(x){Ft(u,d,x)}}function Of(u,d){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var x=u.stateNode;break;case 30:x=u.stateNode;break;default:x=u.stateNode}typeof m=="function"?u.refCleanup=m(x):m.current=x}}catch(_){Ft(u,d,_)}}function ya(u,d){var m=u.ref,x=u.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(_){Ft(u,d,_)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(_){Ft(u,d,_)}else m.current=null}function XI(u){var d=u.type,m=u.memoizedProps,x=u.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(_){Ft(u,u.return,_)}}function fb(u,d,m){try{var x=u.stateNode;qG(x,u.type,m,d),x[Nr]=d}catch(_){Ft(u,u.return,_)}}function ZI(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Eo(u.type)||u.tag===4}function db(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ZI(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Eo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function hb(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(u),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Za));else if(x!==4&&(x===27&&Eo(u.type)&&(m=u.stateNode,d=null),u=u.child,u!==null))for(hb(u,d,m),u=u.sibling;u!==null;)hb(u,d,m),u=u.sibling}function fp(u,d,m){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?m.insertBefore(u,d):m.appendChild(u);else if(x!==4&&(x===27&&Eo(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(fp(u,d,m),u=u.sibling;u!==null;)fp(u,d,m),u=u.sibling}function JI(u){var d=u.stateNode,m=u.memoizedProps;try{for(var x=u.type,_=d.attributes;_.length;)d.removeAttributeNode(_[0]);sn(d,x,m),d[cr]=u,d[Nr]=m}catch(O){Ft(u,u.return,O)}}var ls=!1,Cr=!1,pb=!1,eC=typeof WeakSet=="function"?WeakSet:Set,zr=null;function AG(u,d){if(u=u.containerInfo,Mb=Pp,u=dO(u),ov(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var _=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{m.nodeType,O.nodeType}catch{m=null;break e}var F=0,Q=-1,he=-1,Ae=0,$e=0,Ye=u,Oe=null;t:for(;;){for(var Le;Ye!==m||_!==0&&Ye.nodeType!==3||(Q=F+_),Ye!==O||x!==0&&Ye.nodeType!==3||(he=F+x),Ye.nodeType===3&&(F+=Ye.nodeValue.length),(Le=Ye.firstChild)!==null;)Oe=Ye,Ye=Le;for(;;){if(Ye===u)break t;if(Oe===m&&++Ae===_&&(Q=F),Oe===O&&++$e===x&&(he=F),(Le=Ye.nextSibling)!==null)break;Ye=Oe,Oe=Ye.parentNode}Ye=Le}m=Q===-1||he===-1?null:{start:Q,end:he}}else m=null}m=m||{start:0,end:0}}else m=null;for(Nb={focusedElem:u,selectionRange:m},Pp=!1,zr=d;zr!==null;)if(d=zr,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,zr=u;else for(;zr!==null;){switch(d=zr,O=d.alternate,u=d.flags,d.tag){case 0:if((u&4)!==0&&(u=d.updateQueue,u=u!==null?u.events:null,u!==null))for(m=0;m<u.length;m++)_=u[m],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&O!==null){u=void 0,m=d,_=O.memoizedProps,O=O.memoizedState,x=m.stateNode;try{var nt=xl(m.type,_);u=x.getSnapshotBeforeUpdate(nt,O),x.__reactInternalSnapshotBeforeUpdate=u}catch(ct){Ft(m,m.return,ct)}}break;case 3:if((u&1024)!==0){if(u=d.stateNode.containerInfo,m=u.nodeType,m===9)Ub(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Ub(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=d.sibling,u!==null){u.return=d.return,zr=u;break}zr=d.return}}function tC(u,d,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:cs(u,m),x&4&&Df(5,m);break;case 1:if(cs(u,m),x&4)if(u=m.stateNode,d===null)try{u.componentDidMount()}catch(F){Ft(m,m.return,F)}else{var _=xl(m.type,d.memoizedProps);d=d.memoizedState;try{u.componentDidUpdate(_,d,u.__reactInternalSnapshotBeforeUpdate)}catch(F){Ft(m,m.return,F)}}x&64&&VI(m),x&512&&Of(m,m.return);break;case 3:if(cs(u,m),x&64&&(u=m.updateQueue,u!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{UO(u,d)}catch(F){Ft(m,m.return,F)}}break;case 27:d===null&&x&4&&JI(m);case 26:case 5:cs(u,m),d===null&&x&4&&XI(m),x&512&&Of(m,m.return);break;case 12:cs(u,m);break;case 31:cs(u,m),x&4&&iC(u,m);break;case 13:cs(u,m),x&4&&aC(u,m),x&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=MG.bind(null,m),tK(u,m))));break;case 22:if(x=m.memoizedState!==null||ls,!x){d=d!==null&&d.memoizedState!==null||Cr,_=ls;var O=Cr;ls=x,(Cr=d)&&!O?fs(u,m,(m.subtreeFlags&8772)!==0):cs(u,m),ls=_,Cr=O}break;case 30:break;default:cs(u,m)}}function rC(u){var d=u.alternate;d!==null&&(u.alternate=null,rC(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Ky(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var ar=null,Hn=!1;function us(u,d,m){for(m=m.child;m!==null;)nC(u,d,m),m=m.sibling}function nC(u,d,m){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(ge,m)}catch{}switch(m.tag){case 26:Cr||ya(m,d),us(u,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Cr||ya(m,d);var x=ar,_=Hn;Eo(m.type)&&(ar=m.stateNode,Hn=!1),us(u,d,m),Ff(m.stateNode),ar=x,Hn=_;break;case 5:Cr||ya(m,d);case 6:if(x=ar,_=Hn,ar=null,us(u,d,m),ar=x,Hn=_,ar!==null)if(Hn)try{(ar.nodeType===9?ar.body:ar.nodeName==="HTML"?ar.ownerDocument.body:ar).removeChild(m.stateNode)}catch(O){Ft(m,d,O)}else try{ar.removeChild(m.stateNode)}catch(O){Ft(m,d,O)}break;case 18:ar!==null&&(Hn?(u=ar,VC(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),qu(u)):VC(ar,m.stateNode));break;case 4:x=ar,_=Hn,ar=m.stateNode.containerInfo,Hn=!0,us(u,d,m),ar=x,Hn=_;break;case 0:case 11:case 14:case 15:mo(2,m,d),Cr||mo(4,m,d),us(u,d,m);break;case 1:Cr||(ya(m,d),x=m.stateNode,typeof x.componentWillUnmount=="function"&&QI(m,d,x)),us(u,d,m);break;case 21:us(u,d,m);break;case 22:Cr=(x=Cr)||m.memoizedState!==null,us(u,d,m),Cr=x;break;default:us(u,d,m)}}function iC(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{qu(u)}catch(m){Ft(d,d.return,m)}}}function aC(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{qu(u)}catch(m){Ft(d,d.return,m)}}function DG(u){switch(u.tag){case 31:case 13:case 19:var d=u.stateNode;return d===null&&(d=u.stateNode=new eC),d;case 22:return u=u.stateNode,d=u._retryCache,d===null&&(d=u._retryCache=new eC),d;default:throw Error(n(435,u.tag))}}function dp(u,d){var m=DG(u);d.forEach(function(x){if(!m.has(x)){m.add(x);var _=NG.bind(null,u,x);x.then(_,_)}})}function Gn(u,d){var m=d.deletions;if(m!==null)for(var x=0;x<m.length;x++){var _=m[x],O=u,F=d,Q=F;e:for(;Q!==null;){switch(Q.tag){case 27:if(Eo(Q.type)){ar=Q.stateNode,Hn=!1;break e}break;case 5:ar=Q.stateNode,Hn=!1;break e;case 3:case 4:ar=Q.stateNode.containerInfo,Hn=!0;break e}Q=Q.return}if(ar===null)throw Error(n(160));nC(O,F,_),ar=null,Hn=!1,O=_.alternate,O!==null&&(O.return=null),_.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)sC(d,u),d=d.sibling}var Zi=null;function sC(u,d){var m=u.alternate,x=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Gn(d,u),Kn(u),x&4&&(mo(3,u,u.return),Df(3,u),mo(5,u,u.return));break;case 1:Gn(d,u),Kn(u),x&512&&(Cr||m===null||ya(m,m.return)),x&64&&ls&&(u=u.updateQueue,u!==null&&(x=u.callbacks,x!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var _=Zi;if(Gn(d,u),Kn(u),x&512&&(Cr||m===null||ya(m,m.return)),x&4){var O=m!==null?m.memoizedState:null;if(x=u.memoizedState,m===null)if(x===null)if(u.stateNode===null){e:{x=u.type,m=u.memoizedProps,_=_.ownerDocument||_;t:switch(x){case"title":O=_.getElementsByTagName("title")[0],(!O||O[Tn]||O[cr]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=_.createElement(x),_.head.insertBefore(O,_.querySelector("head > title"))),sn(O,x,m),O[cr]=u,Yr(O),x=O;break e;case"link":var F=sR("link","href",_).get(x+(m.href||""));if(F){for(var Q=0;Q<F.length;Q++)if(O=F[Q],O.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&O.getAttribute("rel")===(m.rel==null?null:m.rel)&&O.getAttribute("title")===(m.title==null?null:m.title)&&O.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){F.splice(Q,1);break t}}O=_.createElement(x),sn(O,x,m),_.head.appendChild(O);break;case"meta":if(F=sR("meta","content",_).get(x+(m.content||""))){for(Q=0;Q<F.length;Q++)if(O=F[Q],O.getAttribute("content")===(m.content==null?null:""+m.content)&&O.getAttribute("name")===(m.name==null?null:m.name)&&O.getAttribute("property")===(m.property==null?null:m.property)&&O.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&O.getAttribute("charset")===(m.charSet==null?null:m.charSet)){F.splice(Q,1);break t}}O=_.createElement(x),sn(O,x,m),_.head.appendChild(O);break;default:throw Error(n(468,x))}O[cr]=u,Yr(O),x=O}u.stateNode=x}else oR(_,u.type,u.stateNode);else u.stateNode=aR(_,x,u.memoizedProps);else O!==x?(O===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):O.count--,x===null?oR(_,u.type,u.stateNode):aR(_,x,u.memoizedProps)):x===null&&u.stateNode!==null&&fb(u,u.memoizedProps,m.memoizedProps)}break;case 27:Gn(d,u),Kn(u),x&512&&(Cr||m===null||ya(m,m.return)),m!==null&&x&4&&fb(u,u.memoizedProps,m.memoizedProps);break;case 5:if(Gn(d,u),Kn(u),x&512&&(Cr||m===null||ya(m,m.return)),u.flags&32){_=u.stateNode;try{gu(_,"")}catch(nt){Ft(u,u.return,nt)}}x&4&&u.stateNode!=null&&(_=u.memoizedProps,fb(u,_,m!==null?m.memoizedProps:_)),x&1024&&(pb=!0);break;case 6:if(Gn(d,u),Kn(u),x&4){if(u.stateNode===null)throw Error(n(162));x=u.memoizedProps,m=u.stateNode;try{m.nodeValue=x}catch(nt){Ft(u,u.return,nt)}}break;case 3:if(Op=null,_=Zi,Zi=Ap(d.containerInfo),Gn(d,u),Zi=_,Kn(u),x&4&&m!==null&&m.memoizedState.isDehydrated)try{qu(d.containerInfo)}catch(nt){Ft(u,u.return,nt)}pb&&(pb=!1,oC(u));break;case 4:x=Zi,Zi=Ap(u.stateNode.containerInfo),Gn(d,u),Kn(u),Zi=x;break;case 12:Gn(d,u),Kn(u);break;case 31:Gn(d,u),Kn(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,dp(u,x)));break;case 13:Gn(d,u),Kn(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(pp=De()),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,dp(u,x)));break;case 22:_=u.memoizedState!==null;var he=m!==null&&m.memoizedState!==null,Ae=ls,$e=Cr;if(ls=Ae||_,Cr=$e||he,Gn(d,u),Cr=$e,ls=Ae,Kn(u),x&8192)e:for(d=u.stateNode,d._visibility=_?d._visibility&-2:d._visibility|1,_&&(m===null||he||ls||Cr||Sl(u)),m=null,d=u;;){if(d.tag===5||d.tag===26){if(m===null){he=m=d;try{if(O=he.stateNode,_)F=O.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{Q=he.stateNode;var Ye=he.memoizedProps.style,Oe=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;Q.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(nt){Ft(he,he.return,nt)}}}else if(d.tag===6){if(m===null){he=d;try{he.stateNode.nodeValue=_?"":he.memoizedProps}catch(nt){Ft(he,he.return,nt)}}}else if(d.tag===18){if(m===null){he=d;try{var Le=he.stateNode;_?QC(Le,!0):QC(he.stateNode,!1)}catch(nt){Ft(he,he.return,nt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=u.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,dp(u,m))));break;case 19:Gn(d,u),Kn(u),x&4&&(x=u.updateQueue,x!==null&&(u.updateQueue=null,dp(u,x)));break;case 30:break;case 21:break;default:Gn(d,u),Kn(u)}}function Kn(u){var d=u.flags;if(d&2){try{for(var m,x=u.return;x!==null;){if(ZI(x)){m=x;break}x=x.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var _=m.stateNode,O=db(u);fp(u,O,_);break;case 5:var F=m.stateNode;m.flags&32&&(gu(F,""),m.flags&=-33);var Q=db(u);fp(u,Q,F);break;case 3:case 4:var he=m.stateNode.containerInfo,Ae=db(u);hb(u,Ae,he);break;default:throw Error(n(161))}}catch($e){Ft(u,u.return,$e)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function oC(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var d=u;oC(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),u=u.sibling}}function cs(u,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)tC(u,d.alternate,d),d=d.sibling}function Sl(u){for(u=u.child;u!==null;){var d=u;switch(d.tag){case 0:case 11:case 14:case 15:mo(4,d,d.return),Sl(d);break;case 1:ya(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&QI(d,d.return,m),Sl(d);break;case 27:Ff(d.stateNode);case 26:case 5:ya(d,d.return),Sl(d);break;case 22:d.memoizedState===null&&Sl(d);break;case 30:Sl(d);break;default:Sl(d)}u=u.sibling}}function fs(u,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,_=u,O=d,F=O.flags;switch(O.tag){case 0:case 11:case 15:fs(_,O,m),Df(4,O);break;case 1:if(fs(_,O,m),x=O,_=x.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Ae){Ft(x,x.return,Ae)}if(x=O,_=x.updateQueue,_!==null){var Q=x.stateNode;try{var he=_.shared.hiddenCallbacks;if(he!==null)for(_.shared.hiddenCallbacks=null,_=0;_<he.length;_++)BO(he[_],Q)}catch(Ae){Ft(x,x.return,Ae)}}m&&F&64&&VI(O),Of(O,O.return);break;case 27:JI(O);case 26:case 5:fs(_,O,m),m&&x===null&&F&4&&XI(O),Of(O,O.return);break;case 12:fs(_,O,m);break;case 31:fs(_,O,m),m&&F&4&&iC(_,O);break;case 13:fs(_,O,m),m&&F&4&&aC(_,O);break;case 22:O.memoizedState===null&&fs(_,O,m),Of(O,O.return);break;case 30:break;default:fs(_,O,m)}d=d.sibling}}function mb(u,d){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(u=d.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&pf(m))}function gb(u,d){u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&pf(u))}function Ji(u,d,m,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)lC(u,d,m,x),d=d.sibling}function lC(u,d,m,x){var _=d.flags;switch(d.tag){case 0:case 11:case 15:Ji(u,d,m,x),_&2048&&Df(9,d);break;case 1:Ji(u,d,m,x);break;case 3:Ji(u,d,m,x),_&2048&&(u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&pf(u)));break;case 12:if(_&2048){Ji(u,d,m,x),u=d.stateNode;try{var O=d.memoizedProps,F=O.id,Q=O.onPostCommit;typeof Q=="function"&&Q(F,d.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(he){Ft(d,d.return,he)}}else Ji(u,d,m,x);break;case 31:Ji(u,d,m,x);break;case 13:Ji(u,d,m,x);break;case 23:break;case 22:O=d.stateNode,F=d.alternate,d.memoizedState!==null?O._visibility&2?Ji(u,d,m,x):If(u,d):O._visibility&2?Ji(u,d,m,x):(O._visibility|=2,Nu(u,d,m,x,(d.subtreeFlags&10256)!==0||!1)),_&2048&&mb(F,d);break;case 24:Ji(u,d,m,x),_&2048&&gb(d.alternate,d);break;default:Ji(u,d,m,x)}}function Nu(u,d,m,x,_){for(_=_&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var O=u,F=d,Q=m,he=x,Ae=F.flags;switch(F.tag){case 0:case 11:case 15:Nu(O,F,Q,he,_),Df(8,F);break;case 23:break;case 22:var $e=F.stateNode;F.memoizedState!==null?$e._visibility&2?Nu(O,F,Q,he,_):If(O,F):($e._visibility|=2,Nu(O,F,Q,he,_)),_&&Ae&2048&&mb(F.alternate,F);break;case 24:Nu(O,F,Q,he,_),_&&Ae&2048&&gb(F.alternate,F);break;default:Nu(O,F,Q,he,_)}d=d.sibling}}function If(u,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=u,x=d,_=x.flags;switch(x.tag){case 22:If(m,x),_&2048&&mb(x.alternate,x);break;case 24:If(m,x),_&2048&&gb(x.alternate,x);break;default:If(m,x)}d=d.sibling}}var Cf=8192;function Fu(u,d,m){if(u.subtreeFlags&Cf)for(u=u.child;u!==null;)uC(u,d,m),u=u.sibling}function uC(u,d,m){switch(u.tag){case 26:Fu(u,d,m),u.flags&Cf&&u.memoizedState!==null&&hK(m,Zi,u.memoizedState,u.memoizedProps);break;case 5:Fu(u,d,m);break;case 3:case 4:var x=Zi;Zi=Ap(u.stateNode.containerInfo),Fu(u,d,m),Zi=x;break;case 22:u.memoizedState===null&&(x=u.alternate,x!==null&&x.memoizedState!==null?(x=Cf,Cf=16777216,Fu(u,d,m),Cf=x):Fu(u,d,m));break;default:Fu(u,d,m)}}function cC(u){var d=u.alternate;if(d!==null&&(u=d.child,u!==null)){d.child=null;do d=u.sibling,u.sibling=null,u=d;while(u!==null)}}function Rf(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];zr=x,dC(x,u)}cC(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)fC(u),u=u.sibling}function fC(u){switch(u.tag){case 0:case 11:case 15:Rf(u),u.flags&2048&&mo(9,u,u.return);break;case 3:Rf(u);break;case 12:Rf(u);break;case 22:var d=u.stateNode;u.memoizedState!==null&&d._visibility&2&&(u.return===null||u.return.tag!==13)?(d._visibility&=-3,hp(u)):Rf(u);break;default:Rf(u)}}function hp(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];zr=x,dC(x,u)}cC(u)}for(u=u.child;u!==null;){switch(d=u,d.tag){case 0:case 11:case 15:mo(8,d,d.return),hp(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,hp(d));break;default:hp(d)}u=u.sibling}}function dC(u,d){for(;zr!==null;){var m=zr;switch(m.tag){case 0:case 11:case 15:mo(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:pf(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,zr=x;else e:for(m=u;zr!==null;){x=zr;var _=x.sibling,O=x.return;if(rC(x),x===m){zr=null;break e}if(_!==null){_.return=O,zr=_;break e}zr=O}}}var OG={getCacheForType:function(u){var d=nn(Dr),m=d.data.get(u);return m===void 0&&(m=u(),d.data.set(u,m)),m},cacheSignal:function(){return nn(Dr).controller.signal}},IG=typeof WeakMap=="function"?WeakMap:Map,kt=0,Wt=null,Et=null,At=0,Nt=0,li=null,go=!1,Bu=!1,yb=!1,ds=0,yr=0,yo=0,El=0,vb=0,ui=0,Uu=0,Pf=null,Yn=null,bb=!1,pp=0,hC=0,mp=1/0,gp=null,vo=null,Fr=0,bo=null,ju=null,hs=0,xb=0,Sb=null,pC=null,Lf=0,Eb=null;function ci(){return(kt&2)!==0&&At!==0?At&-At:$.T!==null?Ob():Fn()}function mC(){if(ui===0)if((At&536870912)===0||It){var u=xr;xr<<=1,(xr&3932160)===0&&(xr=262144),ui=u}else ui=536870912;return u=si.current,u!==null&&(u.flags|=32),ui}function zn(u,d,m){(u===Wt&&(Nt===2||Nt===9)||u.cancelPendingCommit!==null)&&($u(u,0),xo(u,At,ui,!1)),ee(u,m),((kt&2)===0||u!==Wt)&&(u===Wt&&((kt&2)===0&&(El|=m),yr===4&&xo(u,At,ui,!1)),va(u))}function gC(u,d,m){if((kt&6)!==0)throw Error(n(327));var x=!m&&(d&127)===0&&(d&u.expiredLanes)===0||kr(u,d),_=x?PG(u,d):_b(u,d,!0),O=x;do{if(_===0){Bu&&!x&&xo(u,d,0,!1);break}else{if(m=u.current.alternate,O&&!CG(m)){_=_b(u,d,!1),O=!1;continue}if(_===2){if(O=d,u.errorRecoveryDisabledLanes&O)var F=0;else F=u.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){d=F;e:{var Q=u;_=Pf;var he=Q.current.memoizedState.isDehydrated;if(he&&($u(Q,F).flags|=256),F=_b(Q,F,!1),F!==2){if(yb&&!he){Q.errorRecoveryDisabledLanes|=O,El|=O,_=4;break e}O=Yn,Yn=_,O!==null&&(Yn===null?Yn=O:Yn.push.apply(Yn,O))}_=F}if(O=!1,_!==2)continue}}if(_===1){$u(u,0),xo(u,d,0,!0);break}e:{switch(x=u,O=_,O){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:xo(x,d,ui,!go);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(_=pp+300-De(),10<_)){if(xo(x,d,ui,!go),_n(x,0,!0)!==0)break e;hs=d,x.timeoutHandle=qC(yC.bind(null,x,m,Yn,gp,bb,d,ui,El,Uu,go,O,"Throttled",-0,0),_);break e}yC(x,m,Yn,gp,bb,d,ui,El,Uu,go,O,null,-0,0)}}break}while(!0);va(u)}function yC(u,d,m,x,_,O,F,Q,he,Ae,$e,Ye,Oe,Le){if(u.timeoutHandle=-1,Ye=d.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},uC(d,O,Ye);var nt=(O&62914560)===O?pp-De():(O&4194048)===O?hC-De():0;if(nt=pK(Ye,nt),nt!==null){hs=O,u.cancelPendingCommit=nt(TC.bind(null,u,d,O,m,x,_,F,Q,he,$e,Ye,null,Oe,Le)),xo(u,O,F,!Ae);return}}TC(u,d,O,m,x,_,F,Q,he)}function CG(u){for(var d=u;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var _=m[x],O=_.getSnapshot;_=_.value;try{if(!ii(O(),_))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function xo(u,d,m,x){d&=~vb,d&=~El,u.suspendedLanes|=d,u.pingedLanes&=~d,x&&(u.warmLanes|=d),x=u.expirationTimes;for(var _=d;0<_;){var O=31-Ze(_),F=1<<O;x[O]=-1,_&=~F}m!==0&&qe(u,m,d)}function yp(){return(kt&6)===0?(kf(0),!1):!0}function wb(){if(Et!==null){if(Nt===0)var u=Et.return;else u=Et,rs=hl=null,Uv(u),Ru=null,gf=0,u=Et;for(;u!==null;)WI(u.alternate,u),u=u.return;Et=null}}function $u(u,d){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,QG(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),hs=0,wb(),Wt=u,Et=m=es(u.current,null),At=d,Nt=0,li=null,go=!1,Bu=kr(u,d),yb=!1,Uu=ui=vb=El=yo=yr=0,Yn=Pf=null,bb=!1,(d&8)!==0&&(d|=d&32);var x=u.entangledLanes;if(x!==0)for(u=u.entanglements,x&=d;0<x;){var _=31-Ze(x),O=1<<_;d|=u[_],x&=~O}return ds=d,Bh(),m}function vC(u,d){vt=null,$.H=_f,d===Cu||d===zh?(d=kO(),Nt=3):d===Dv?(d=kO(),Nt=4):Nt=d===tb?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,li=d,Et===null&&(yr=1,sp(u,Ri(d,u.current)))}function bC(){var u=si.current;return u===null?!0:(At&4194048)===At?Mi===null:(At&62914560)===At||(At&536870912)!==0?u===Mi:!1}function xC(){var u=$.H;return $.H=_f,u===null?_f:u}function SC(){var u=$.A;return $.A=OG,u}function vp(){yr=4,go||(At&4194048)!==At&&si.current!==null||(Bu=!0),(yo&134217727)===0&&(El&134217727)===0||Wt===null||xo(Wt,At,ui,!1)}function _b(u,d,m){var x=kt;kt|=2;var _=xC(),O=SC();(Wt!==u||At!==d)&&(gp=null,$u(u,d)),d=!1;var F=yr;e:do try{if(Nt!==0&&Et!==null){var Q=Et,he=li;switch(Nt){case 8:wb(),F=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(d=!0);var Ae=Nt;if(Nt=0,li=null,Hu(u,Q,he,Ae),m&&Bu){F=0;break e}break;default:Ae=Nt,Nt=0,li=null,Hu(u,Q,he,Ae)}}RG(),F=yr;break}catch($e){vC(u,$e)}while(!0);return d&&u.shellSuspendCounter++,rs=hl=null,kt=x,$.H=_,$.A=O,Et===null&&(Wt=null,At=0,Bh()),F}function RG(){for(;Et!==null;)EC(Et)}function PG(u,d){var m=kt;kt|=2;var x=xC(),_=SC();Wt!==u||At!==d?(gp=null,mp=De()+500,$u(u,d)):Bu=kr(u,d);e:do try{if(Nt!==0&&Et!==null){d=Et;var O=li;t:switch(Nt){case 1:Nt=0,li=null,Hu(u,d,O,1);break;case 2:case 9:if(PO(O)){Nt=0,li=null,wC(d);break}d=function(){Nt!==2&&Nt!==9||Wt!==u||(Nt=7),va(u)},O.then(d,d);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:PO(O)?(Nt=0,li=null,wC(d)):(Nt=0,li=null,Hu(u,d,O,7));break;case 5:var F=null;switch(Et.tag){case 26:F=Et.memoizedState;case 5:case 27:var Q=Et;if(F?lR(F):Q.stateNode.complete){Nt=0,li=null;var he=Q.sibling;if(he!==null)Et=he;else{var Ae=Q.return;Ae!==null?(Et=Ae,bp(Ae)):Et=null}break t}}Nt=0,li=null,Hu(u,d,O,5);break;case 6:Nt=0,li=null,Hu(u,d,O,6);break;case 8:wb(),yr=6;break e;default:throw Error(n(462))}}LG();break}catch($e){vC(u,$e)}while(!0);return rs=hl=null,$.H=x,$.A=_,kt=m,Et!==null?0:(Wt=null,At=0,Bh(),yr)}function LG(){for(;Et!==null&&!Be();)EC(Et)}function EC(u){var d=zI(u.alternate,u,ds);u.memoizedProps=u.pendingProps,d===null?bp(u):Et=d}function wC(u){var d=u,m=d.alternate;switch(d.tag){case 15:case 0:d=jI(m,d,d.pendingProps,d.type,void 0,At);break;case 11:d=jI(m,d,d.pendingProps,d.type.render,d.ref,At);break;case 5:Uv(d);default:WI(m,d),d=Et=SO(d,ds),d=zI(m,d,ds)}u.memoizedProps=u.pendingProps,d===null?bp(u):Et=d}function Hu(u,d,m,x){rs=hl=null,Uv(d),Ru=null,gf=0;var _=d.return;try{if(SG(u,_,d,m,At)){yr=1,sp(u,Ri(m,u.current)),Et=null;return}}catch(O){if(_!==null)throw Et=_,O;yr=1,sp(u,Ri(m,u.current)),Et=null;return}d.flags&32768?(It||x===1?u=!0:Bu||(At&536870912)!==0?u=!1:(go=u=!0,(x===2||x===9||x===3||x===6)&&(x=si.current,x!==null&&x.tag===13&&(x.flags|=16384))),_C(d,u)):bp(d)}function bp(u){var d=u;do{if((d.flags&32768)!==0){_C(d,go);return}u=d.return;var m=_G(d.alternate,d,ds);if(m!==null){Et=m;return}if(d=d.sibling,d!==null){Et=d;return}Et=d=u}while(d!==null);yr===0&&(yr=5)}function _C(u,d){do{var m=TG(u.alternate,u);if(m!==null){m.flags&=32767,Et=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(u=u.sibling,u!==null)){Et=u;return}Et=u=m}while(u!==null);yr=6,Et=null}function TC(u,d,m,x,_,O,F,Q,he){u.cancelPendingCommit=null;do xp();while(Fr!==0);if((kt&6)!==0)throw Error(n(327));if(d!==null){if(d===u.current)throw Error(n(177));if(O=d.lanes|d.childLanes,O|=dv,ue(u,m,O,F,Q,he),u===Wt&&(Et=Wt=null,At=0),ju=d,bo=u,hs=m,xb=O,Sb=_,pC=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,FG(V,function(){return CC(),null})):(u.callbackNode=null,u.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=$.T,$.T=null,_=z.p,z.p=2,F=kt,kt|=4;try{AG(u,d,m)}finally{kt=F,z.p=_,$.T=x}}Fr=1,AC(),DC(),OC()}}function AC(){if(Fr===1){Fr=0;var u=bo,d=ju,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=$.T,$.T=null;var x=z.p;z.p=2;var _=kt;kt|=4;try{sC(d,u);var O=Nb,F=dO(u.containerInfo),Q=O.focusedElem,he=O.selectionRange;if(F!==Q&&Q&&Q.ownerDocument&&fO(Q.ownerDocument.documentElement,Q)){if(he!==null&&ov(Q)){var Ae=he.start,$e=he.end;if($e===void 0&&($e=Ae),"selectionStart"in Q)Q.selectionStart=Ae,Q.selectionEnd=Math.min($e,Q.value.length);else{var Ye=Q.ownerDocument||document,Oe=Ye&&Ye.defaultView||window;if(Oe.getSelection){var Le=Oe.getSelection(),nt=Q.textContent.length,ct=Math.min(he.start,nt),Yt=he.end===void 0?ct:Math.min(he.end,nt);!Le.extend&&ct>Yt&&(F=Yt,Yt=ct,ct=F);var xe=cO(Q,ct),me=cO(Q,Yt);if(xe&&me&&(Le.rangeCount!==1||Le.anchorNode!==xe.node||Le.anchorOffset!==xe.offset||Le.focusNode!==me.node||Le.focusOffset!==me.offset)){var Te=Ye.createRange();Te.setStart(xe.node,xe.offset),Le.removeAllRanges(),ct>Yt?(Le.addRange(Te),Le.extend(me.node,me.offset)):(Te.setEnd(me.node,me.offset),Le.addRange(Te))}}}}for(Ye=[],Le=Q;Le=Le.parentNode;)Le.nodeType===1&&Ye.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ye.length;Q++){var Ke=Ye[Q];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}Pp=!!Mb,Nb=Mb=null}finally{kt=_,z.p=x,$.T=m}}u.current=d,Fr=2}}function DC(){if(Fr===2){Fr=0;var u=bo,d=ju,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=$.T,$.T=null;var x=z.p;z.p=2;var _=kt;kt|=4;try{tC(u,d.alternate,d)}finally{kt=_,z.p=x,$.T=m}}Fr=3}}function OC(){if(Fr===4||Fr===3){Fr=0,ze();var u=bo,d=ju,m=hs,x=pC;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Fr=5:(Fr=0,ju=bo=null,IC(u,u.pendingLanes));var _=u.pendingLanes;if(_===0&&(vo=null),Mr(m),d=d.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(ge,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=$.T,_=z.p,z.p=2,$.T=null;try{for(var O=u.onRecoverableError,F=0;F<x.length;F++){var Q=x[F];O(Q.value,{componentStack:Q.stack})}}finally{$.T=d,z.p=_}}(hs&3)!==0&&xp(),va(u),_=u.pendingLanes,(m&261930)!==0&&(_&42)!==0?u===Eb?Lf++:(Lf=0,Eb=u):Lf=0,kf(0)}}function IC(u,d){(u.pooledCacheLanes&=d)===0&&(d=u.pooledCache,d!=null&&(u.pooledCache=null,pf(d)))}function xp(){return AC(),DC(),OC(),CC()}function CC(){if(Fr!==5)return!1;var u=bo,d=xb;xb=0;var m=Mr(hs),x=$.T,_=z.p;try{z.p=32>m?32:m,$.T=null,m=Sb,Sb=null;var O=bo,F=hs;if(Fr=0,ju=bo=null,hs=0,(kt&6)!==0)throw Error(n(331));var Q=kt;if(kt|=4,fC(O.current),lC(O,O.current,F,m),kt=Q,kf(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(ge,O)}catch{}return!0}finally{z.p=_,$.T=x,IC(u,d)}}function RC(u,d,m){d=Ri(m,d),d=eb(u.stateNode,d,2),u=fo(u,d,2),u!==null&&(ee(u,2),va(u))}function Ft(u,d,m){if(u.tag===3)RC(u,u,m);else for(;d!==null;){if(d.tag===3){RC(d,u,m);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(vo===null||!vo.has(x))){u=Ri(m,u),m=PI(2),x=fo(d,m,2),x!==null&&(LI(m,x,d,u),ee(x,2),va(x));break}}d=d.return}}function Tb(u,d,m){var x=u.pingCache;if(x===null){x=u.pingCache=new IG;var _=new Set;x.set(d,_)}else _=x.get(d),_===void 0&&(_=new Set,x.set(d,_));_.has(m)||(yb=!0,_.add(m),u=kG.bind(null,u,d,m),d.then(u,u))}function kG(u,d,m){var x=u.pingCache;x!==null&&x.delete(d),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Wt===u&&(At&m)===m&&(yr===4||yr===3&&(At&62914560)===At&&300>De()-pp?(kt&2)===0&&$u(u,0):vb|=m,Uu===At&&(Uu=0)),va(u)}function PC(u,d){d===0&&(d=Wa()),u=cl(u,d),u!==null&&(ee(u,d),va(u))}function MG(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),PC(u,m)}function NG(u,d){var m=0;switch(u.tag){case 31:case 13:var x=u.stateNode,_=u.memoizedState;_!==null&&(m=_.retryLane);break;case 19:x=u.stateNode;break;case 22:x=u.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(d),PC(u,m)}function FG(u,d){return Ue(u,d)}var Sp=null,Gu=null,Ab=!1,Ep=!1,Db=!1,So=0;function va(u){u!==Gu&&u.next===null&&(Gu===null?Sp=Gu=u:Gu=Gu.next=u),Ep=!0,Ab||(Ab=!0,UG())}function kf(u,d){if(!Db&&Ep){Db=!0;do for(var m=!1,x=Sp;x!==null;){if(u!==0){var _=x.pendingLanes;if(_===0)var O=0;else{var F=x.suspendedLanes,Q=x.pingedLanes;O=(1<<31-Ze(42|u)+1)-1,O&=_&~(F&~Q),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,NC(x,O))}else O=At,O=_n(x,x===Wt?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||kr(x,O)||(m=!0,NC(x,O));x=x.next}while(m);Db=!1}}function BG(){LC()}function LC(){Ep=Ab=!1;var u=0;So!==0&&VG()&&(u=So);for(var d=De(),m=null,x=Sp;x!==null;){var _=x.next,O=kC(x,d);O===0?(x.next=null,m===null?Sp=_:m.next=_,_===null&&(Gu=m)):(m=x,(u!==0||(O&3)!==0)&&(Ep=!0)),x=_}Fr!==0&&Fr!==5||kf(u),So!==0&&(So=0)}function kC(u,d){for(var m=u.suspendedLanes,x=u.pingedLanes,_=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var F=31-Ze(O),Q=1<<F,he=_[F];he===-1?((Q&m)===0||(Q&x)!==0)&&(_[F]=cu(Q,d)):he<=d&&(u.expiredLanes|=Q),O&=~Q}if(d=Wt,m=At,m=_n(u,u===d?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x=u.callbackNode,m===0||u===d&&(Nt===2||Nt===9)||u.cancelPendingCommit!==null)return x!==null&&x!==null&&pe(x),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||kr(u,m)){if(d=m&-m,d===u.callbackPriority)return d;switch(x!==null&&pe(x),Mr(m)){case 2:case 8:m=N;break;case 32:m=V;break;case 268435456:m=ve;break;default:m=V}return x=MC.bind(null,u),m=Ue(m,x),u.callbackPriority=d,u.callbackNode=m,d}return x!==null&&x!==null&&pe(x),u.callbackPriority=2,u.callbackNode=null,2}function MC(u,d){if(Fr!==0&&Fr!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(xp()&&u.callbackNode!==m)return null;var x=At;return x=_n(u,u===Wt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),x===0?null:(gC(u,x,d),kC(u,De()),u.callbackNode!=null&&u.callbackNode===m?MC.bind(null,u):null)}function NC(u,d){if(xp())return null;gC(u,d,!0)}function UG(){XG(function(){(kt&6)!==0?Ue(R,BG):LC()})}function Ob(){if(So===0){var u=Ou;u===0&&(u=En,En<<=1,(En&261888)===0&&(En=256)),So=u}return So}function FC(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ch(""+u)}function BC(u,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,u.id&&m.setAttribute("form",u.id),d.parentNode.insertBefore(m,d),u=new FormData(u),m.parentNode.removeChild(m),u}function jG(u,d,m,x,_){if(d==="submit"&&m&&m.stateNode===_){var O=FC((_[Nr]||null).action),F=x.submitter;F&&(d=(d=F[Nr]||null)?FC(d.formAction):F.getAttribute("formAction"),d!==null&&(O=d,F=null));var Q=new kh("action","action",null,x,_);u.push({event:Q,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(So!==0){var he=F?BC(_,F):new FormData(_);Wv(m,{pending:!0,data:he,method:_.method,action:O},null,he)}}else typeof O=="function"&&(Q.preventDefault(),he=F?BC(_,F):new FormData(_),Wv(m,{pending:!0,data:he,method:_.method,action:O},O,he))},currentTarget:_}]})}}for(var Ib=0;Ib<fv.length;Ib++){var Cb=fv[Ib],$G=Cb.toLowerCase(),HG=Cb[0].toUpperCase()+Cb.slice(1);Xi($G,"on"+HG)}Xi(mO,"onAnimationEnd"),Xi(gO,"onAnimationIteration"),Xi(yO,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(iG,"onTransitionRun"),Xi(aG,"onTransitionStart"),Xi(sG,"onTransitionCancel"),Xi(vO,"onTransitionEnd"),pu("onMouseEnter",["mouseout","mouseover"]),pu("onMouseLeave",["mouseout","mouseover"]),pu("onPointerEnter",["pointerout","pointerover"]),pu("onPointerLeave",["pointerout","pointerover"]),sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sl("onBeforeInput",["compositionend","keypress","textInput","paste"]),sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mf));function UC(u,d){d=(d&4)!==0;for(var m=0;m<u.length;m++){var x=u[m],_=x.event;x=x.listeners;e:{var O=void 0;if(d)for(var F=x.length-1;0<=F;F--){var Q=x[F],he=Q.instance,Ae=Q.currentTarget;if(Q=Q.listener,he!==O&&_.isPropagationStopped())break e;O=Q,_.currentTarget=Ae;try{O(_)}catch($e){Fh($e)}_.currentTarget=null,O=he}else for(F=0;F<x.length;F++){if(Q=x[F],he=Q.instance,Ae=Q.currentTarget,Q=Q.listener,he!==O&&_.isPropagationStopped())break e;O=Q,_.currentTarget=Ae;try{O(_)}catch($e){Fh($e)}_.currentTarget=null,O=he}}}}function wt(u,d){var m=d[jn];m===void 0&&(m=d[jn]=new Set);var x=u+"__bubble";m.has(x)||(jC(d,u,2,!1),m.add(x))}function Rb(u,d,m){var x=0;d&&(x|=4),jC(m,u,x,d)}var wp="_reactListening"+Math.random().toString(36).slice(2);function Pb(u){if(!u[wp]){u[wp]=!0,LD.forEach(function(m){m!=="selectionchange"&&(GG.has(m)||Rb(m,!1,u),Rb(m,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[wp]||(d[wp]=!0,Rb("selectionchange",!1,d))}}function jC(u,d,m,x){switch(mR(d)){case 2:var _=yK;break;case 8:_=vK;break;default:_=qb}m=_.bind(null,d,m,u),_=void 0,!Zy||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),x?_!==void 0?u.addEventListener(d,m,{capture:!0,passive:_}):u.addEventListener(d,m,!0):_!==void 0?u.addEventListener(d,m,{passive:_}):u.addEventListener(d,m,!1)}function Lb(u,d,m,x,_){var O=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var F=x.tag;if(F===3||F===4){var Q=x.stateNode.containerInfo;if(Q===_)break;if(F===4)for(F=x.return;F!==null;){var he=F.tag;if((he===3||he===4)&&F.stateNode.containerInfo===_)return;F=F.return}for(;Q!==null;){if(F=fu(Q),F===null)return;if(he=F.tag,he===5||he===6||he===26||he===27){x=O=F;continue e}Q=Q.parentNode}}x=x.return}YD(function(){var Ae=O,$e=Qy(m),Ye=[];e:{var Oe=bO.get(u);if(Oe!==void 0){var Le=kh,nt=u;switch(u){case"keypress":if(Ph(m)===0)break e;case"keydown":case"keyup":Le=NH;break;case"focusin":nt="focus",Le=rv;break;case"focusout":nt="blur",Le=rv;break;case"beforeblur":case"afterblur":Le=rv;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=WD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=_H;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=UH;break;case mO:case gO:case yO:Le=DH;break;case vO:Le=$H;break;case"scroll":case"scrollend":Le=EH;break;case"wheel":Le=GH;break;case"copy":case"cut":case"paste":Le=IH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=QD;break;case"toggle":case"beforetoggle":Le=YH}var ct=(d&4)!==0,Yt=!ct&&(u==="scroll"||u==="scrollend"),xe=ct?Oe!==null?Oe+"Capture":null:Oe;ct=[];for(var me=Ae,Te;me!==null;){var Ke=me;if(Te=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Te===null||xe===null||(Ke=rf(me,xe),Ke!=null&&ct.push(Nf(me,Ke,Te))),Yt)break;me=me.return}0<ct.length&&(Oe=new Le(Oe,nt,null,m,$e),Ye.push({event:Oe,listeners:ct}))}}if((d&7)===0){e:{if(Oe=u==="mouseover"||u==="pointerover",Le=u==="mouseout"||u==="pointerout",Oe&&m!==Vy&&(nt=m.relatedTarget||m.fromElement)&&(fu(nt)||nt[Un]))break e;if((Le||Oe)&&(Oe=$e.window===$e?$e:(Oe=$e.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Le?(nt=m.relatedTarget||m.toElement,Le=Ae,nt=nt?fu(nt):null,nt!==null&&(Yt=a(nt),ct=nt.tag,nt!==Yt||ct!==5&&ct!==27&&ct!==6)&&(nt=null)):(Le=null,nt=Ae),Le!==nt)){if(ct=WD,Ke="onMouseLeave",xe="onMouseEnter",me="mouse",(u==="pointerout"||u==="pointerover")&&(ct=QD,Ke="onPointerLeave",xe="onPointerEnter",me="pointer"),Yt=Le==null?Oe:tf(Le),Te=nt==null?Oe:tf(nt),Oe=new ct(Ke,me+"leave",Le,m,$e),Oe.target=Yt,Oe.relatedTarget=Te,Ke=null,fu($e)===Ae&&(ct=new ct(xe,me+"enter",nt,m,$e),ct.target=Te,ct.relatedTarget=Yt,Ke=ct),Yt=Ke,Le&&nt)t:{for(ct=KG,xe=Le,me=nt,Te=0,Ke=xe;Ke;Ke=ct(Ke))Te++;Ke=0;for(var lt=me;lt;lt=ct(lt))Ke++;for(;0<Te-Ke;)xe=ct(xe),Te--;for(;0<Ke-Te;)me=ct(me),Ke--;for(;Te--;){if(xe===me||me!==null&&xe===me.alternate){ct=xe;break t}xe=ct(xe),me=ct(me)}ct=null}else ct=null;Le!==null&&$C(Ye,Oe,Le,ct,!1),nt!==null&&Yt!==null&&$C(Ye,Yt,nt,ct,!0)}}e:{if(Oe=Ae?tf(Ae):window,Le=Oe.nodeName&&Oe.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Oe.type==="file")var Ct=iO;else if(rO(Oe))if(aO)Ct=tG;else{Ct=JH;var it=ZH}else Le=Oe.nodeName,!Le||Le.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Ae&&Wy(Ae.elementType)&&(Ct=iO):Ct=eG;if(Ct&&(Ct=Ct(u,Ae))){nO(Ye,Ct,m,$e);break e}it&&it(u,Oe,Ae),u==="focusout"&&Ae&&Oe.type==="number"&&Ae.memoizedProps.value!=null&&qy(Oe,"number",Oe.value)}switch(it=Ae?tf(Ae):window,u){case"focusin":(rO(it)||it.contentEditable==="true")&&(xu=it,lv=Ae,ff=null);break;case"focusout":ff=lv=xu=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,hO(Ye,m,$e);break;case"selectionchange":if(nG)break;case"keydown":case"keyup":hO(Ye,m,$e)}var bt;if(iv)e:{switch(u){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else bu?eO(u,m)&&(Dt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(XD&&m.locale!=="ko"&&(bu||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&bu&&(bt=zD()):(io=$e,Jy="value"in io?io.value:io.textContent,bu=!0)),it=_p(Ae,Dt),0<it.length&&(Dt=new VD(Dt,u,null,m,$e),Ye.push({event:Dt,listeners:it}),bt?Dt.data=bt:(bt=tO(m),bt!==null&&(Dt.data=bt)))),(bt=qH?WH(u,m):VH(u,m))&&(Dt=_p(Ae,"onBeforeInput"),0<Dt.length&&(it=new VD("onBeforeInput","beforeinput",null,m,$e),Ye.push({event:it,listeners:Dt}),it.data=bt)),jG(Ye,u,Ae,m,$e)}UC(Ye,d)})}function Nf(u,d,m){return{instance:u,listener:d,currentTarget:m}}function _p(u,d){for(var m=d+"Capture",x=[];u!==null;){var _=u,O=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||O===null||(_=rf(u,m),_!=null&&x.unshift(Nf(u,_,O)),_=rf(u,d),_!=null&&x.push(Nf(u,_,O))),u.tag===3)return x;u=u.return}return[]}function KG(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function $C(u,d,m,x,_){for(var O=d._reactName,F=[];m!==null&&m!==x;){var Q=m,he=Q.alternate,Ae=Q.stateNode;if(Q=Q.tag,he!==null&&he===x)break;Q!==5&&Q!==26&&Q!==27||Ae===null||(he=Ae,_?(Ae=rf(m,O),Ae!=null&&F.unshift(Nf(m,Ae,he))):_||(Ae=rf(m,O),Ae!=null&&F.push(Nf(m,Ae,he)))),m=m.return}F.length!==0&&u.push({event:d,listeners:F})}var YG=/\r\n?/g,zG=/\u0000|\uFFFD/g;function HC(u){return(typeof u=="string"?u:""+u).replace(YG,`
`).replace(zG,"")}function GC(u,d){return d=HC(d),HC(u)===d}function Kt(u,d,m,x,_,O){switch(m){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||gu(u,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&gu(u,""+x);break;case"className":Oh(u,"class",x);break;case"tabIndex":Oh(u,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Oh(u,m,x);break;case"style":GD(u,x,O);break;case"data":if(d!=="object"){Oh(u,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||m!=="href")){u.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=Ch(""+x),u.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(m==="formAction"?(d!=="input"&&Kt(u,d,"name",_.name,_,null),Kt(u,d,"formEncType",_.formEncType,_,null),Kt(u,d,"formMethod",_.formMethod,_,null),Kt(u,d,"formTarget",_.formTarget,_,null)):(Kt(u,d,"encType",_.encType,_,null),Kt(u,d,"method",_.method,_,null),Kt(u,d,"target",_.target,_,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){u.removeAttribute(m);break}x=Ch(""+x),u.setAttribute(m,x);break;case"onClick":x!=null&&(u.onclick=Za);break;case"onScroll":x!=null&&wt("scroll",u);break;case"onScrollEnd":x!=null&&wt("scrollend",u);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(m=x.__html,m!=null){if(_.children!=null)throw Error(n(60));u.innerHTML=m}}break;case"multiple":u.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":u.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){u.removeAttribute("xlink:href");break}m=Ch(""+x),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""+x):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":x===!0?u.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?u.setAttribute(m,x):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?u.setAttribute(m,x):u.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?u.removeAttribute(m):u.setAttribute(m,x);break;case"popover":wt("beforetoggle",u),wt("toggle",u),Dh(u,"popover",x);break;case"xlinkActuate":Xa(u,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Xa(u,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Xa(u,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Xa(u,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Xa(u,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Xa(u,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Xa(u,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Dh(u,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=xH.get(m)||m,Dh(u,m,x))}}function kb(u,d,m,x,_,O){switch(m){case"style":GD(u,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(m=x.__html,m!=null){if(_.children!=null)throw Error(n(60));u.innerHTML=m}}break;case"children":typeof x=="string"?gu(u,x):(typeof x=="number"||typeof x=="bigint")&&gu(u,""+x);break;case"onScroll":x!=null&&wt("scroll",u);break;case"onScrollEnd":x!=null&&wt("scrollend",u);break;case"onClick":x!=null&&(u.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kD.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(_=m.endsWith("Capture"),d=m.slice(2,_?m.length-7:void 0),O=u[Nr]||null,O=O!=null?O[m]:null,typeof O=="function"&&u.removeEventListener(d,O,_),typeof x=="function")){typeof O!="function"&&O!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(d,x,_);break e}m in u?u[m]=x:x===!0?u.setAttribute(m,""):Dh(u,m,x)}}}function sn(u,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",u),wt("load",u);var x=!1,_=!1,O;for(O in m)if(m.hasOwnProperty(O)){var F=m[O];if(F!=null)switch(O){case"src":x=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Kt(u,d,O,F,m,null)}}_&&Kt(u,d,"srcSet",m.srcSet,m,null),x&&Kt(u,d,"src",m.src,m,null);return;case"input":wt("invalid",u);var Q=O=F=_=null,he=null,Ae=null;for(x in m)if(m.hasOwnProperty(x)){var $e=m[x];if($e!=null)switch(x){case"name":_=$e;break;case"type":F=$e;break;case"checked":he=$e;break;case"defaultChecked":Ae=$e;break;case"value":O=$e;break;case"defaultValue":Q=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(n(137,d));break;default:Kt(u,d,x,$e,m,null)}}UD(u,O,Q,he,Ae,F,_,!1);return;case"select":wt("invalid",u),x=F=O=null;for(_ in m)if(m.hasOwnProperty(_)&&(Q=m[_],Q!=null))switch(_){case"value":O=Q;break;case"defaultValue":F=Q;break;case"multiple":x=Q;default:Kt(u,d,_,Q,m,null)}d=O,m=F,u.multiple=!!x,d!=null?mu(u,!!x,d,!1):m!=null&&mu(u,!!x,m,!0);return;case"textarea":wt("invalid",u),O=_=x=null;for(F in m)if(m.hasOwnProperty(F)&&(Q=m[F],Q!=null))switch(F){case"value":x=Q;break;case"defaultValue":_=Q;break;case"children":O=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Kt(u,d,F,Q,m,null)}$D(u,x,_,O);return;case"option":for(he in m)if(m.hasOwnProperty(he)&&(x=m[he],x!=null))switch(he){case"selected":u.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Kt(u,d,he,x,m,null)}return;case"dialog":wt("beforetoggle",u),wt("toggle",u),wt("cancel",u),wt("close",u);break;case"iframe":case"object":wt("load",u);break;case"video":case"audio":for(x=0;x<Mf.length;x++)wt(Mf[x],u);break;case"image":wt("error",u),wt("load",u);break;case"details":wt("toggle",u);break;case"embed":case"source":case"link":wt("error",u),wt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in m)if(m.hasOwnProperty(Ae)&&(x=m[Ae],x!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:Kt(u,d,Ae,x,m,null)}return;default:if(Wy(d)){for($e in m)m.hasOwnProperty($e)&&(x=m[$e],x!==void 0&&kb(u,d,$e,x,m,void 0));return}}for(Q in m)m.hasOwnProperty(Q)&&(x=m[Q],x!=null&&Kt(u,d,Q,x,m,null))}function qG(u,d,m,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,O=null,F=null,Q=null,he=null,Ae=null,$e=null;for(Le in m){var Ye=m[Le];if(m.hasOwnProperty(Le)&&Ye!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":he=Ye;default:x.hasOwnProperty(Le)||Kt(u,d,Le,null,x,Ye)}}for(var Oe in x){var Le=x[Oe];if(Ye=m[Oe],x.hasOwnProperty(Oe)&&(Le!=null||Ye!=null))switch(Oe){case"type":O=Le;break;case"name":_=Le;break;case"checked":Ae=Le;break;case"defaultChecked":$e=Le;break;case"value":F=Le;break;case"defaultValue":Q=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,d));break;default:Le!==Ye&&Kt(u,d,Oe,Le,x,Ye)}}zy(u,F,Q,he,Ae,$e,O,_);return;case"select":Le=F=Q=Oe=null;for(O in m)if(he=m[O],m.hasOwnProperty(O)&&he!=null)switch(O){case"value":break;case"multiple":Le=he;default:x.hasOwnProperty(O)||Kt(u,d,O,null,x,he)}for(_ in x)if(O=x[_],he=m[_],x.hasOwnProperty(_)&&(O!=null||he!=null))switch(_){case"value":Oe=O;break;case"defaultValue":Q=O;break;case"multiple":F=O;default:O!==he&&Kt(u,d,_,O,x,he)}d=Q,m=F,x=Le,Oe!=null?mu(u,!!m,Oe,!1):!!x!=!!m&&(d!=null?mu(u,!!m,d,!0):mu(u,!!m,m?[]:"",!1));return;case"textarea":Le=Oe=null;for(Q in m)if(_=m[Q],m.hasOwnProperty(Q)&&_!=null&&!x.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Kt(u,d,Q,null,x,_)}for(F in x)if(_=x[F],O=m[F],x.hasOwnProperty(F)&&(_!=null||O!=null))switch(F){case"value":Oe=_;break;case"defaultValue":Le=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==O&&Kt(u,d,F,_,x,O)}jD(u,Oe,Le);return;case"option":for(var nt in m)if(Oe=m[nt],m.hasOwnProperty(nt)&&Oe!=null&&!x.hasOwnProperty(nt))switch(nt){case"selected":u.selected=!1;break;default:Kt(u,d,nt,null,x,Oe)}for(he in x)if(Oe=x[he],Le=m[he],x.hasOwnProperty(he)&&Oe!==Le&&(Oe!=null||Le!=null))switch(he){case"selected":u.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:Kt(u,d,he,Oe,x,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in m)Oe=m[ct],m.hasOwnProperty(ct)&&Oe!=null&&!x.hasOwnProperty(ct)&&Kt(u,d,ct,null,x,Oe);for(Ae in x)if(Oe=x[Ae],Le=m[Ae],x.hasOwnProperty(Ae)&&Oe!==Le&&(Oe!=null||Le!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,d));break;default:Kt(u,d,Ae,Oe,x,Le)}return;default:if(Wy(d)){for(var Yt in m)Oe=m[Yt],m.hasOwnProperty(Yt)&&Oe!==void 0&&!x.hasOwnProperty(Yt)&&kb(u,d,Yt,void 0,x,Oe);for($e in x)Oe=x[$e],Le=m[$e],!x.hasOwnProperty($e)||Oe===Le||Oe===void 0&&Le===void 0||kb(u,d,$e,Oe,x,Le);return}}for(var xe in m)Oe=m[xe],m.hasOwnProperty(xe)&&Oe!=null&&!x.hasOwnProperty(xe)&&Kt(u,d,xe,null,x,Oe);for(Ye in x)Oe=x[Ye],Le=m[Ye],!x.hasOwnProperty(Ye)||Oe===Le||Oe==null&&Le==null||Kt(u,d,Ye,Oe,x,Le)}function KC(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WG(){if(typeof performance.getEntriesByType=="function"){for(var u=0,d=0,m=performance.getEntriesByType("resource"),x=0;x<m.length;x++){var _=m[x],O=_.transferSize,F=_.initiatorType,Q=_.duration;if(O&&Q&&KC(F)){for(F=0,Q=_.responseEnd,x+=1;x<m.length;x++){var he=m[x],Ae=he.startTime;if(Ae>Q)break;var $e=he.transferSize,Ye=he.initiatorType;$e&&KC(Ye)&&(he=he.responseEnd,F+=$e*(he<Q?1:(Q-Ae)/(he-Ae)))}if(--x,d+=8*(O+F)/(_.duration/1e3),u++,10<u)break}}if(0<u)return d/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var Mb=null,Nb=null;function Tp(u){return u.nodeType===9?u:u.ownerDocument}function YC(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zC(u,d){if(u===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&d==="foreignObject"?0:u}function Fb(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Bb=null;function VG(){var u=window.event;return u&&u.type==="popstate"?u===Bb?!1:(Bb=u,!0):(Bb=null,!1)}var qC=typeof setTimeout=="function"?setTimeout:void 0,QG=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,XG=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(u){return WC.resolve(null).then(u).catch(ZG)}:qC;function ZG(u){setTimeout(function(){throw u})}function Eo(u){return u==="head"}function VC(u,d){var m=d,x=0;do{var _=m.nextSibling;if(u.removeChild(m),_&&_.nodeType===8)if(m=_.data,m==="/$"||m==="/&"){if(x===0){u.removeChild(_),qu(d);return}x--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")x++;else if(m==="html")Ff(u.ownerDocument.documentElement);else if(m==="head"){m=u.ownerDocument.head,Ff(m);for(var O=m.firstChild;O;){var F=O.nextSibling,Q=O.nodeName;O[Tn]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&O.rel.toLowerCase()==="stylesheet"||m.removeChild(O),O=F}}else m==="body"&&Ff(u.ownerDocument.body);m=_}while(m);qu(d)}function QC(u,d){var m=u;u=0;do{var x=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),x&&x.nodeType===8)if(m=x.data,m==="/$"){if(u===0)break;u--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||u++;m=x}while(m)}function Ub(u){var d=u.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ub(m),Ky(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function JG(u,d,m,x){for(;u.nodeType===1;){var _=m;if(u.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(x){if(!u[Tn])switch(d){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(O=u.getAttribute("rel"),O==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(O!==_.rel||u.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||u.getAttribute("title")!==(_.title==null?null:_.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(O=u.getAttribute("src"),(O!==(_.src==null?null:_.src)||u.getAttribute("type")!==(_.type==null?null:_.type)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&O&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(d==="input"&&u.type==="hidden"){var O=_.name==null?null:""+_.name;if(_.type==="hidden"&&u.getAttribute("name")===O)return u}else return u;if(u=Ni(u.nextSibling),u===null)break}return null}function eK(u,d,m){if(d==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Ni(u.nextSibling),u===null))return null;return u}function XC(u,d){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!d||(u=Ni(u.nextSibling),u===null))return null;return u}function jb(u){return u.data==="$?"||u.data==="$~"}function $b(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function tK(u,d){var m=u.ownerDocument;if(u.data==="$~")u._reactRetry=d;else if(u.data!=="$?"||m.readyState!=="loading")d();else{var x=function(){d(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),u._reactRetry=x}}function Ni(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return u}var Hb=null;function ZC(u){u=u.nextSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"||m==="/&"){if(d===0)return Ni(u.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}u=u.nextSibling}return null}function JC(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return u;d--}else m!=="/$"&&m!=="/&"||d++}u=u.previousSibling}return null}function eR(u,d,m){switch(d=Tp(m),u){case"html":if(u=d.documentElement,!u)throw Error(n(452));return u;case"head":if(u=d.head,!u)throw Error(n(453));return u;case"body":if(u=d.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Ff(u){for(var d=u.attributes;d.length;)u.removeAttributeNode(d[0]);Ky(u)}var Fi=new Map,tR=new Set;function Ap(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var ps=z.d;z.d={f:rK,r:nK,D:iK,C:aK,L:sK,m:oK,X:uK,S:lK,M:cK};function rK(){var u=ps.f(),d=yp();return u||d}function nK(u){var d=du(u);d!==null&&d.tag===5&&d.type==="form"?vI(d):ps.r(u)}var Ku=typeof document>"u"?null:document;function rR(u,d,m){var x=Ku;if(x&&typeof d=="string"&&d){var _=Ii(d);_='link[rel="'+u+'"][href="'+_+'"]',typeof m=="string"&&(_+='[crossorigin="'+m+'"]'),tR.has(_)||(tR.add(_),u={rel:u,crossOrigin:m,href:d},x.querySelector(_)===null&&(d=x.createElement("link"),sn(d,"link",u),Yr(d),x.head.appendChild(d)))}}function iK(u){ps.D(u),rR("dns-prefetch",u,null)}function aK(u,d){ps.C(u,d),rR("preconnect",u,d)}function sK(u,d,m){ps.L(u,d,m);var x=Ku;if(x&&u&&d){var _='link[rel="preload"][as="'+Ii(d)+'"]';d==="image"&&m&&m.imageSrcSet?(_+='[imagesrcset="'+Ii(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(_+='[imagesizes="'+Ii(m.imageSizes)+'"]')):_+='[href="'+Ii(u)+'"]';var O=_;switch(d){case"style":O=Yu(u);break;case"script":O=zu(u)}Fi.has(O)||(u=h({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:u,as:d},m),Fi.set(O,u),x.querySelector(_)!==null||d==="style"&&x.querySelector(Bf(O))||d==="script"&&x.querySelector(Uf(O))||(d=x.createElement("link"),sn(d,"link",u),Yr(d),x.head.appendChild(d)))}}function oK(u,d){ps.m(u,d);var m=Ku;if(m&&u){var x=d&&typeof d.as=="string"?d.as:"script",_='link[rel="modulepreload"][as="'+Ii(x)+'"][href="'+Ii(u)+'"]',O=_;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=zu(u)}if(!Fi.has(O)&&(u=h({rel:"modulepreload",href:u},d),Fi.set(O,u),m.querySelector(_)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Uf(O)))return}x=m.createElement("link"),sn(x,"link",u),Yr(x),m.head.appendChild(x)}}}function lK(u,d,m){ps.S(u,d,m);var x=Ku;if(x&&u){var _=hu(x).hoistableStyles,O=Yu(u);d=d||"default";var F=_.get(O);if(!F){var Q={loading:0,preload:null};if(F=x.querySelector(Bf(O)))Q.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":d},m),(m=Fi.get(O))&&Gb(u,m);var he=F=x.createElement("link");Yr(he),sn(he,"link",u),he._p=new Promise(function(Ae,$e){he.onload=Ae,he.onerror=$e}),he.addEventListener("load",function(){Q.loading|=1}),he.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,Dp(F,d,x)}F={type:"stylesheet",instance:F,count:1,state:Q},_.set(O,F)}}}function uK(u,d){ps.X(u,d);var m=Ku;if(m&&u){var x=hu(m).hoistableScripts,_=zu(u),O=x.get(_);O||(O=m.querySelector(Uf(_)),O||(u=h({src:u,async:!0},d),(d=Fi.get(_))&&Kb(u,d),O=m.createElement("script"),Yr(O),sn(O,"link",u),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(_,O))}}function cK(u,d){ps.M(u,d);var m=Ku;if(m&&u){var x=hu(m).hoistableScripts,_=zu(u),O=x.get(_);O||(O=m.querySelector(Uf(_)),O||(u=h({src:u,async:!0,type:"module"},d),(d=Fi.get(_))&&Kb(u,d),O=m.createElement("script"),Yr(O),sn(O,"link",u),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(_,O))}}function nR(u,d,m,x){var _=(_=be.current)?Ap(_):null;if(!_)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Yu(m.href),m=hu(_).hoistableStyles,x=m.get(d),x||(x={type:"style",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Yu(m.href);var O=hu(_).hoistableStyles,F=O.get(u);if(F||(_=_.ownerDocument||_,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(u,F),(O=_.querySelector(Bf(u)))&&!O._p&&(F.instance=O,F.state.loading=5),Fi.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Fi.set(u,m),O||fK(_,u,m,F.state))),d&&x===null)throw Error(n(528,""));return F}if(d&&x!==null)throw Error(n(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=zu(m),m=hu(_).hoistableScripts,x=m.get(d),x||(x={type:"script",instance:null,count:0,state:null},m.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Yu(u){return'href="'+Ii(u)+'"'}function Bf(u){return'link[rel="stylesheet"]['+u+"]"}function iR(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function fK(u,d,m,x){u.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=u.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),sn(d,"link",m),Yr(d),u.head.appendChild(d))}function zu(u){return'[src="'+Ii(u)+'"]'}function Uf(u){return"script[async]"+u}function aR(u,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var x=u.querySelector('style[data-href~="'+Ii(m.href)+'"]');if(x)return d.instance=x,Yr(x),x;var _=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(u.ownerDocument||u).createElement("style"),Yr(x),sn(x,"style",_),Dp(x,m.precedence,u),d.instance=x;case"stylesheet":_=Yu(m.href);var O=u.querySelector(Bf(_));if(O)return d.state.loading|=4,d.instance=O,Yr(O),O;x=iR(m),(_=Fi.get(_))&&Gb(x,_),O=(u.ownerDocument||u).createElement("link"),Yr(O);var F=O;return F._p=new Promise(function(Q,he){F.onload=Q,F.onerror=he}),sn(O,"link",x),d.state.loading|=4,Dp(O,m.precedence,u),d.instance=O;case"script":return O=zu(m.src),(_=u.querySelector(Uf(O)))?(d.instance=_,Yr(_),_):(x=m,(_=Fi.get(O))&&(x=h({},m),Kb(x,_)),u=u.ownerDocument||u,_=u.createElement("script"),Yr(_),sn(_,"link",x),u.head.appendChild(_),d.instance=_);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,Dp(x,m.precedence,u));return d.instance}function Dp(u,d,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=x.length?x[x.length-1]:null,O=_,F=0;F<x.length;F++){var Q=x[F];if(Q.dataset.precedence===d)O=Q;else if(O!==_)break}O?O.parentNode.insertBefore(u,O.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(u,d.firstChild))}function Gb(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.title==null&&(u.title=d.title)}function Kb(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.integrity==null&&(u.integrity=d.integrity)}var Op=null;function sR(u,d,m){if(Op===null){var x=new Map,_=Op=new Map;_.set(m,x)}else _=Op,x=_.get(m),x||(x=new Map,_.set(m,x));if(x.has(u))return x;for(x.set(u,null),m=m.getElementsByTagName(u),_=0;_<m.length;_++){var O=m[_];if(!(O[Tn]||O[cr]||u==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var F=O.getAttribute(d)||"";F=u+F;var Q=x.get(F);Q?Q.push(O):x.set(F,[O])}}return x}function oR(u,d,m){u=u.ownerDocument||u,u.head.insertBefore(m,d==="title"?u.querySelector("head > title"):null)}function dK(u,d,m){if(m===1||d.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return u=d.disabled,typeof d.precedence=="string"&&u==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function lR(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function hK(u,d,m,x){if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var _=Yu(x.href),O=d.querySelector(Bf(_));if(O){d=O._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(u.count++,u=Ip.bind(u),d.then(u,u)),m.state.loading|=4,m.instance=O,Yr(O);return}O=d.ownerDocument||d,x=iR(x),(_=Fi.get(_))&&Gb(x,_),O=O.createElement("link"),Yr(O);var F=O;F._p=new Promise(function(Q,he){F.onload=Q,F.onerror=he}),sn(O,"link",x),m.instance=O}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(u.count++,m=Ip.bind(u),d.addEventListener("load",m),d.addEventListener("error",m))}}var Yb=0;function pK(u,d){return u.stylesheets&&u.count===0&&Rp(u,u.stylesheets),0<u.count||0<u.imgCount?function(m){var x=setTimeout(function(){if(u.stylesheets&&Rp(u,u.stylesheets),u.unsuspend){var O=u.unsuspend;u.unsuspend=null,O()}},6e4+d);0<u.imgBytes&&Yb===0&&(Yb=62500*WG());var _=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Rp(u,u.stylesheets),u.unsuspend)){var O=u.unsuspend;u.unsuspend=null,O()}},(u.imgBytes>Yb?50:800)+d);return u.unsuspend=m,function(){u.unsuspend=null,clearTimeout(x),clearTimeout(_)}}:null}function Ip(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rp(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Cp=null;function Rp(u,d){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Cp=new Map,d.forEach(mK,u),Cp=null,Ip.call(u))}function mK(u,d){if(!(d.state.loading&4)){var m=Cp.get(u);if(m)var x=m.get(null);else{m=new Map,Cp.set(u,m);for(var _=u.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<_.length;O++){var F=_[O];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(m.set(F.dataset.precedence,F),x=F)}x&&m.set(null,x)}_=d.instance,F=_.getAttribute("data-precedence"),O=m.get(F)||x,O===x&&m.set(null,_),m.set(F,_),this.count++,x=Ip.bind(this),_.addEventListener("load",x),_.addEventListener("error",x),O?O.parentNode.insertBefore(_,O.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(_,u.firstChild)),d.state.loading|=4}}var jf={$$typeof:w,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function gK(u,d,m,x,_,O,F,Q,he){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.hiddenUpdates=Va(null),this.identifierPrefix=x,this.onUncaughtError=_,this.onCaughtError=O,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function uR(u,d,m,x,_,O,F,Q,he,Ae,$e,Ye){return u=new gK(u,d,m,F,he,Ae,$e,Ye,Q),d=1,O===!0&&(d|=24),O=ai(3,null,null,d),u.current=O,O.stateNode=u,d=_v(),d.refCount++,u.pooledCache=d,d.refCount++,O.memoizedState={element:x,isDehydrated:m,cache:d},Ov(O),u}function cR(u){return u?(u=wu,u):wu}function fR(u,d,m,x,_,O){_=cR(_),x.context===null?x.context=_:x.pendingContext=_,x=co(d),x.payload={element:m},O=O===void 0?null:O,O!==null&&(x.callback=O),m=fo(u,x,d),m!==null&&(zn(m,u,d),vf(m,u,d))}function dR(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function zb(u,d){dR(u,d),(u=u.alternate)&&dR(u,d)}function hR(u){if(u.tag===13||u.tag===31){var d=cl(u,67108864);d!==null&&zn(d,u,67108864),zb(u,67108864)}}function pR(u){if(u.tag===13||u.tag===31){var d=ci();d=ur(d);var m=cl(u,d);m!==null&&zn(m,u,d),zb(u,d)}}var Pp=!0;function yK(u,d,m,x){var _=$.T;$.T=null;var O=z.p;try{z.p=2,qb(u,d,m,x)}finally{z.p=O,$.T=_}}function vK(u,d,m,x){var _=$.T;$.T=null;var O=z.p;try{z.p=8,qb(u,d,m,x)}finally{z.p=O,$.T=_}}function qb(u,d,m,x){if(Pp){var _=Wb(x);if(_===null)Lb(u,d,x,Lp,m),gR(u,x);else if(xK(_,u,d,m,x))x.stopPropagation();else if(gR(u,x),d&4&&-1<bK.indexOf(u)){for(;_!==null;){var O=du(_);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var F=Nn(O.pendingLanes);if(F!==0){var Q=O;for(Q.pendingLanes|=2,Q.entangledLanes|=2;F;){var he=1<<31-Ze(F);Q.entanglements[1]|=he,F&=~he}va(O),(kt&6)===0&&(mp=De()+500,kf(0))}}break;case 31:case 13:Q=cl(O,2),Q!==null&&zn(Q,O,2),yp(),zb(O,2)}if(O=Wb(x),O===null&&Lb(u,d,x,Lp,m),O===_)break;_=O}_!==null&&x.stopPropagation()}else Lb(u,d,x,null,m)}}function Wb(u){return u=Qy(u),Vb(u)}var Lp=null;function Vb(u){if(Lp=null,u=fu(u),u!==null){var d=a(u);if(d===null)u=null;else{var m=d.tag;if(m===13){if(u=s(d),u!==null)return u;u=null}else if(m===31){if(u=o(d),u!==null)return u;u=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null)}}return Lp=u,null}function mR(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ft()){case R:return 2;case N:return 8;case V:case de:return 32;case ve:return 268435456;default:return 32}default:return 32}}var Qb=!1,wo=null,_o=null,To=null,$f=new Map,Hf=new Map,Ao=[],bK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gR(u,d){switch(u){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":$f.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(d.pointerId)}}function Gf(u,d,m,x,_,O){return u===null||u.nativeEvent!==O?(u={blockedOn:d,domEventName:m,eventSystemFlags:x,nativeEvent:O,targetContainers:[_]},d!==null&&(d=du(d),d!==null&&hR(d)),u):(u.eventSystemFlags|=x,d=u.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),u)}function xK(u,d,m,x,_){switch(d){case"focusin":return wo=Gf(wo,u,d,m,x,_),!0;case"dragenter":return _o=Gf(_o,u,d,m,x,_),!0;case"mouseover":return To=Gf(To,u,d,m,x,_),!0;case"pointerover":var O=_.pointerId;return $f.set(O,Gf($f.get(O)||null,u,d,m,x,_)),!0;case"gotpointercapture":return O=_.pointerId,Hf.set(O,Gf(Hf.get(O)||null,u,d,m,x,_)),!0}return!1}function yR(u){var d=fu(u.target);if(d!==null){var m=a(d);if(m!==null){if(d=m.tag,d===13){if(d=s(m),d!==null){u.blockedOn=d,no(u.priority,function(){pR(m)});return}}else if(d===31){if(d=o(m),d!==null){u.blockedOn=d,no(u.priority,function(){pR(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function kp(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var m=Wb(u.nativeEvent);if(m===null){m=u.nativeEvent;var x=new m.constructor(m.type,m);Vy=x,m.target.dispatchEvent(x),Vy=null}else return d=du(m),d!==null&&hR(d),u.blockedOn=m,!1;d.shift()}return!0}function vR(u,d,m){kp(u)&&m.delete(d)}function SK(){Qb=!1,wo!==null&&kp(wo)&&(wo=null),_o!==null&&kp(_o)&&(_o=null),To!==null&&kp(To)&&(To=null),$f.forEach(vR),Hf.forEach(vR)}function Mp(u,d){u.blockedOn===d&&(u.blockedOn=null,Qb||(Qb=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,SK)))}var Np=null;function bR(u){Np!==u&&(Np=u,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Np===u&&(Np=null);for(var d=0;d<u.length;d+=3){var m=u[d],x=u[d+1],_=u[d+2];if(typeof x!="function"){if(Vb(x||m)===null)continue;break}var O=du(m);O!==null&&(u.splice(d,3),d-=3,Wv(O,{pending:!0,data:_,method:m.method,action:x},x,_))}}))}function qu(u){function d(he){return Mp(he,u)}wo!==null&&Mp(wo,u),_o!==null&&Mp(_o,u),To!==null&&Mp(To,u),$f.forEach(d),Hf.forEach(d);for(var m=0;m<Ao.length;m++){var x=Ao[m];x.blockedOn===u&&(x.blockedOn=null)}for(;0<Ao.length&&(m=Ao[0],m.blockedOn===null);)yR(m),m.blockedOn===null&&Ao.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var _=m[x],O=m[x+1],F=_[Nr]||null;if(typeof O=="function")F||bR(m);else if(F){var Q=null;if(O&&O.hasAttribute("formAction")){if(_=O,F=O[Nr]||null)Q=F.formAction;else if(Vb(_)!==null)continue}else Q=F.action;typeof Q=="function"?m[x+1]=Q:(m.splice(x,3),x-=3),bR(m)}}}function xR(){function u(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(F){return _=F})},focusReset:"manual",scroll:"manual"})}function d(){_!==null&&(_(),_=null),x||setTimeout(m,20)}function m(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,_=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){x=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),_!==null&&(_(),_=null)}}}function Xb(u){this._internalRoot=u}Fp.prototype.render=Xb.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));var m=d.current,x=ci();fR(m,x,u,d,null,null)},Fp.prototype.unmount=Xb.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;fR(u.current,2,null,u,null,null),yp(),d[Un]=null}};function Fp(u){this._internalRoot=u}Fp.prototype.unstable_scheduleHydration=function(u){if(u){var d=Fn();u={blockedOn:null,target:u,priority:d};for(var m=0;m<Ao.length&&d!==0&&d<Ao[m].priority;m++);Ao.splice(m,0,u),m===0&&yR(u)}};var SR=e.version;if(SR!=="19.2.0")throw Error(n(527,SR,"19.2.0"));z.findDOMNode=function(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=c(d),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var EK={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{ge=Bp.inject(EK),_e=Bp}catch{}}return Yf.createRoot=function(u,d){if(!i(u))throw Error(n(299));var m=!1,x="",_=OI,O=II,F=CI;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(F=d.onRecoverableError)),d=uR(u,1,!1,null,null,m,x,null,_,O,F,xR),u[Un]=d.current,Pb(u),new Xb(d)},Yf.hydrateRoot=function(u,d,m){if(!i(u))throw Error(n(299));var x=!1,_="",O=OI,F=II,Q=CI,he=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(_=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(F=m.onCaughtError),m.onRecoverableError!==void 0&&(Q=m.onRecoverableError),m.formState!==void 0&&(he=m.formState)),d=uR(u,1,!0,d,m??null,x,_,he,O,F,Q,xR),d.context=cR(null),m=d.current,x=ci(),x=ur(x),_=co(x),_.callback=null,fo(m,_,x),m=x,d.current.lanes=m,ee(d,m),va(d),u[Un]=d.current,Pb(u),new Fp(d)},Yf.version="19.2.0",Yf}var RR;function PK(){if(RR)return ex.exports;RR=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ex.exports=RK(),ex.exports}var LK=PK();var PR="popstate";function kK(r={}){function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return xE("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Sd(i)}return NK(e,t,null,r)}function pr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ca(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MK(){return Math.random().toString(36).substring(2,10)}function LR(r,e){return{usr:r.state,key:r.key,idx:e}}function xE(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?jc(e):e,state:t,key:e&&e.key||n||MK()}}function Sd({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function jc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function NK(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,c=f();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let v=f(),E=v==null?null:v-c;c=v,l&&l({action:o,location:b.location,delta:E})}function p(v,E){o="PUSH";let S=xE(b.location,v,E);c=f()+1;let w=LR(S,c),A=b.createHref(S);try{s.pushState(w,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(A)}a&&l&&l({action:o,location:b.location,delta:1})}function g(v,E){o="REPLACE";let S=xE(b.location,v,E);c=f();let w=LR(S,c),A=b.createHref(S);s.replaceState(w,"",A),a&&l&&l({action:o,location:b.location,delta:0})}function y(v){return FK(v)}let b={get action(){return o},get location(){return r(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(PR,h),l=v,()=>{i.removeEventListener(PR,h),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let E=y(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:g,go(v){return s.go(v)}};return b}function FK(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Sd(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function mB(r,e,t="/"){return BK(r,e,t,!1)}function BK(r,e,t,n){let i=typeof e=="string"?jc(e):e,a=Ms(i.pathname||"/",t);if(a==null)return null;let s=gB(r);UK(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=QK(a);o=WK(s[l],c,n)}return o}function gB(r,e=[],t=[],n="",i=!1){let a=(s,o,l=i,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&l)return;pr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let h=Is([n,f.relativePath]),p=t.concat(f);s.children&&s.children.length>0&&(pr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),gB(s.children,e,p,h,l)),!(s.path==null&&!s.index)&&e.push({path:h,score:zK(h,s.index),routesMeta:p})};return r.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let l of yB(s.path))a(s,o,!0,l)}),e}function yB(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=yB(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function UK(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qK(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var jK=/^:[\w-]+$/,$K=3,HK=2,GK=1,KK=10,YK=-2,kR=r=>r==="*";function zK(r,e){let t=r.split("/"),n=t.length;return t.some(kR)&&(n+=YK),e&&(n+=HK),t.filter(i=>!kR(i)).reduce((i,a)=>i+(jK.test(a)?$K:a===""?GK:KK),n)}function qK(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function WK(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Sg({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),p=l.route;if(!h&&c&&t&&!n[n.length-1].route.index&&(h=Sg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Is([a,h.pathname]),pathnameBase:tY(Is([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Is([a,h.pathnameBase]))}return s}function Sg(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=VK(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:f,isOptional:h},p)=>{if(f==="*"){let y=o[p]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[p];return h&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:r}}function VK(r,e=!1,t=!0){ca(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function QK(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ca(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ms(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var XK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZK=r=>XK.test(r);function JK(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?jc(r):r,a;if(t)if(ZK(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),ca(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${t}`)}t.startsWith("/")?a=MR(t.substring(1),"/"):a=MR(t,e)}else a=e;return{pathname:a,search:rY(n),hash:nY(i)}}function MR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ix(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eY(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vB(r){let e=eY(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function bB(r,e,t,n=!1){let i;typeof r=="string"?i=jc(r):(i={...r},pr(!i.pathname||!i.pathname.includes("?"),ix("?","pathname","search",i)),pr(!i.pathname||!i.pathname.includes("#"),ix("#","pathname","hash",i)),pr(!i.search||!i.search.includes("#"),ix("#","search","hash",i)));let a=r===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let h=e.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=JK(i,o),c=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var Is=r=>r.join("/").replace(/\/\/+/g,"/"),tY=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),rY=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,nY=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function iY(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xB=["POST","PUT","PATCH","DELETE"];new Set(xB);var aY=["GET",...xB];new Set(aY);var $c=L.createContext(null);$c.displayName="DataRouter";var U0=L.createContext(null);U0.displayName="DataRouterState";L.createContext(!1);var SB=L.createContext({isTransitioning:!1});SB.displayName="ViewTransition";var sY=L.createContext(new Map);sY.displayName="Fetchers";var oY=L.createContext(null);oY.displayName="Await";var za=L.createContext(null);za.displayName="Navigation";var Qd=L.createContext(null);Qd.displayName="Location";var Ys=L.createContext({outlet:null,matches:[],isDataRoute:!1});Ys.displayName="Route";var VT=L.createContext(null);VT.displayName="RouteError";function lY(r,{relative:e}={}){pr(Xd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=L.useContext(za),{hash:i,pathname:a,search:s}=Zd(r,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:Is([t,a])),n.createHref({pathname:o,search:s,hash:i})}function Xd(){return L.useContext(Qd)!=null}function nu(){return pr(Xd(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Qd).location}var EB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wB(r){L.useContext(za).static||L.useLayoutEffect(r)}function uY(){let{isDataRoute:r}=L.useContext(Ys);return r?EY():cY()}function cY(){pr(Xd(),"useNavigate() may be used only in the context of a <Router> component.");let r=L.useContext($c),{basename:e,navigator:t}=L.useContext(za),{matches:n}=L.useContext(Ys),{pathname:i}=nu(),a=JSON.stringify(vB(n)),s=L.useRef(!1);return wB(()=>{s.current=!0}),L.useCallback((l,c={})=>{if(ca(s.current,EB),!s.current)return;if(typeof l=="number"){t.go(l);return}let f=bB(l,JSON.parse(a),i,c.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Is([e,f.pathname])),(c.replace?t.replace:t.push)(f,c.state,c)},[e,t,a,i,r])}L.createContext(null);function Zd(r,{relative:e}={}){let{matches:t}=L.useContext(Ys),{pathname:n}=nu(),i=JSON.stringify(vB(t));return L.useMemo(()=>bB(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function fY(r,e){return _B(r,e)}function _B(r,e,t,n,i){pr(Xd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=L.useContext(za),{matches:s}=L.useContext(Ys),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let S=h&&h.path||"";TB(c,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=nu(),g;if(e){let S=typeof e=="string"?jc(e):e;pr(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let y=g.pathname||"/",b=y;if(f!=="/"){let S=f.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=mB(r,{pathname:b});ca(h||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ca(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=gY(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Is([f,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:Is([f,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),s,t,n,i);return e&&E?L.createElement(Qd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function dY(){let r=SY(),e=iY(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",r),s=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:i},t):null,s)}var hY=L.createElement(dY,null),pY=class extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?L.createElement(Ys.Provider,{value:this.props.routeContext},L.createElement(VT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mY({routeContext:r,match:e,children:t}){let n=L.useContext($c);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Ys.Provider,{value:r},t)}function gY(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,s=t?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);pr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,l=-1;if(t)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=f),h.route.id){let{loaderData:p,errors:g}=t,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=t&&n?(f,h)=>{n(f,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:h})}:void 0;return a.reduceRight((f,h,p)=>{let g,y=!1,b=null,v=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||hY,o&&(l<0&&p===0?(TB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):l===p&&(y=!0,v=h.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,p+1)),S=()=>{let w;return g?w=b:y?w=v:h.route.Component?w=L.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=f,L.createElement(mY,{match:h,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?L.createElement(pY,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:c}):S()},null)}function QT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yY(r){let e=L.useContext($c);return pr(e,QT(r)),e}function vY(r){let e=L.useContext(U0);return pr(e,QT(r)),e}function bY(r){let e=L.useContext(Ys);return pr(e,QT(r)),e}function XT(r){let e=bY(r),t=e.matches[e.matches.length-1];return pr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function xY(){return XT("useRouteId")}function SY(){let r=L.useContext(VT),e=vY("useRouteError"),t=XT("useRouteError");return r!==void 0?r:e.errors?.[t]}function EY(){let{router:r}=yY("useNavigate"),e=XT("useNavigate"),t=L.useRef(!1);return wB(()=>{t.current=!0}),L.useCallback(async(i,a={})=>{ca(t.current,EB),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var NR={};function TB(r,e,t){!e&&!NR[r]&&(NR[r]=!0,ca(!1,t))}L.memo(wY);function wY({routes:r,future:e,state:t,unstable_onError:n}){return _B(r,void 0,t,n,e)}function SE(r){pr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _Y({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){pr(!Xd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=r.replace(/^\/*/,"/"),o=L.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=jc(t));let{pathname:l="/",search:c="",hash:f="",state:h=null,key:p="default"}=t,g=L.useMemo(()=>{let y=Ms(l,s);return y==null?null:{location:{pathname:y,search:c,hash:f,state:h,key:p},navigationType:n}},[s,l,c,f,h,p,n]);return ca(g!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(za.Provider,{value:o},L.createElement(Qd.Provider,{children:e,value:g}))}function TY({children:r,location:e}){return fY(EE(r),e)}function EE(r,e=[]){let t=[];return L.Children.forEach(r,(n,i)=>{if(!L.isValidElement(n))return;let a=[...e,i];if(n.type===L.Fragment){t.push.apply(t,EE(n.props.children,a));return}pr(n.type===SE,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=EE(n.props.children,a)),t.push(s)}),t}var Cm="get",Rm="application/x-www-form-urlencoded";function j0(r){return r!=null&&typeof r.tagName=="string"}function AY(r){return j0(r)&&r.tagName.toLowerCase()==="button"}function DY(r){return j0(r)&&r.tagName.toLowerCase()==="form"}function OY(r){return j0(r)&&r.tagName.toLowerCase()==="input"}function IY(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function CY(r,e){return r.button===0&&(!e||e==="_self")&&!IY(r)}var Up=null;function RY(){if(Up===null)try{new FormData(document.createElement("form"),0),Up=!1}catch{Up=!0}return Up}var PY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ax(r){return r!=null&&!PY.has(r)?(ca(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rm}"`),null):r}function LY(r,e){let t,n,i,a,s;if(DY(r)){let o=r.getAttribute("action");n=o?Ms(o,e):null,t=r.getAttribute("method")||Cm,i=ax(r.getAttribute("enctype"))||Rm,a=new FormData(r)}else if(AY(r)||OY(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ms(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Cm,i=ax(r.getAttribute("formenctype"))||ax(o.getAttribute("enctype"))||Rm,a=new FormData(o,r),!RY()){let{name:c,type:f,value:h}=r;if(f==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,h)}}else{if(j0(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cm,n=null,i=Rm,s=r}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZT(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function kY(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ms(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function MY(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NY(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function FY(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await MY(a,t);return s.links?s.links():[]}return[]}));return $Y(n.flat(1).filter(NY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function FR(r,e,t,n,i,a){let s=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>t[c].pathname!==l.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==l.params["*"];return a==="assets"?e.filter((l,c)=>s(l,c)||o(l,c)):a==="data"?e.filter((l,c)=>{let f=n.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function BY(r,e,{includeHydrateFallback:t}={}){return UY(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function UY(r){return[...new Set(r)]}function jY(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function $Y(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(jY(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function AB(){let r=L.useContext($c);return ZT(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function HY(){let r=L.useContext(U0);return ZT(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var JT=L.createContext(void 0);JT.displayName="FrameworkContext";function DB(){let r=L.useContext(JT);return ZT(r,"You must render this element inside a <HydratedRouter> element"),r}function GY(r,e){let t=L.useContext(JT),[n,i]=L.useState(!1),[a,s]=L.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:h}=e,p=L.useRef(null);L.useEffect(()=>{if(r==="render"&&s(!0),r==="viewport"){let b=E=>{E.forEach(S=>{s(S.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[r]),L.useEffect(()=>{if(n){let b=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(b)}}},[n]);let g=()=>{i(!0)},y=()=>{i(!1),s(!1)};return t?r!=="intent"?[a,p,{}]:[a,p,{onFocus:zf(o,g),onBlur:zf(l,y),onMouseEnter:zf(c,g),onMouseLeave:zf(f,y),onTouchStart:zf(h,g)}]:[!1,p,{}]}function zf(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function KY({page:r,...e}){let{router:t}=AB(),n=L.useMemo(()=>mB(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?L.createElement(zY,{page:r,matches:n,...e}):null}function YY(r){let{manifest:e,routeModules:t}=DB(),[n,i]=L.useState([]);return L.useEffect(()=>{let a=!1;return FY(r,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[r,e,t]),n}function zY({page:r,matches:e,...t}){let n=nu(),{manifest:i,routeModules:a}=DB(),{basename:s}=AB(),{loaderData:o,matches:l}=HY(),c=L.useMemo(()=>FR(r,e,l,i,n,"data"),[r,e,l,i,n]),f=L.useMemo(()=>FR(r,e,l,i,n,"assets"),[r,e,l,i,n]),h=L.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,b=!1;if(e.forEach(E=>{let S=i.routes[E.route.id];!S||!S.hasLoader||(!c.some(w=>w.route.id===E.route.id)&&E.route.id in o&&a[E.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:y.add(E.route.id))}),y.size===0)return[];let v=kY(r,s,"data");return b&&y.size>0&&v.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[v.pathname+v.search]},[s,o,n,i,c,e,r,a]),p=L.useMemo(()=>BY(f,i),[f,i]),g=YY(f);return L.createElement(L.Fragment,null,h.map(y=>L.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),p.map(y=>L.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:b})=>L.createElement("link",{key:y,nonce:t.nonce,...b})))}function qY(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var OB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OB&&(window.__reactRouterVersion="7.9.6")}catch{}function WY({basename:r,children:e,window:t}){let n=L.useRef();n.current==null&&(n.current=kK({window:t,v5Compat:!0}));let i=n.current,[a,s]=L.useState({action:i.action,location:i.location}),o=L.useCallback(l=>{L.startTransition(()=>s(l))},[s]);return L.useLayoutEffect(()=>i.listen(o),[i,o]),L.createElement(_Y,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var IB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CB=L.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:f,viewTransition:h,...p},g){let{basename:y}=L.useContext(za),b=typeof c=="string"&&IB.test(c),v,E=!1;if(typeof c=="string"&&b&&(v=c,OB))try{let k=new URL(window.location.href),M=c.startsWith("//")?new URL(k.protocol+c):new URL(c),B=Ms(M.pathname,y);M.origin===k.origin&&B!=null?c=B+M.search+M.hash:E=!0}catch{ca(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=lY(c,{relative:i}),[w,A,T]=GY(n,p),I=ZY(c,{replace:s,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:h});function D(k){e&&e(k),k.defaultPrevented||I(k)}let P=L.createElement("a",{...p,...T,href:v||S,onClick:E||a?e:D,ref:qY(g,A),target:l,"data-discover":!b&&t==="render"?"true":void 0});return w&&!b?L.createElement(L.Fragment,null,P,L.createElement(KY,{page:S})):P});CB.displayName="Link";var VY=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...c},f){let h=Zd(s,{relative:c.relative}),p=nu(),g=L.useContext(U0),{navigator:y,basename:b}=L.useContext(za),v=g!=null&&nz(h)&&o===!0,E=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,S=p.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),w=w?w.toLowerCase():null,E=E.toLowerCase()),w&&b&&(w=Ms(w,b)||w);const A=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let T=S===E||!i&&S.startsWith(E)&&S.charAt(A)==="/",I=w!=null&&(w===E||!i&&w.startsWith(E)&&w.charAt(E.length)==="/"),D={isActive:T,isPending:I,isTransitioning:v},P=T?e:void 0,k;typeof n=="function"?k=n(D):k=[n,T?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(D):a;return L.createElement(CB,{...c,"aria-current":P,className:k,ref:f,style:M,to:s,viewTransition:o},typeof l=="function"?l(D):l)});VY.displayName="NavLink";var QY=L.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:s=Cm,action:o,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:h,...p},g)=>{let y=tz(),b=rz(o,{relative:c}),v=s.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&IB.test(o),S=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let A=w.nativeEvent.submitter,T=A?.getAttribute("formmethod")||s;y(A||w.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:i,state:a,relative:c,preventScrollReset:f,viewTransition:h})};return L.createElement("form",{ref:g,method:v,action:b,onSubmit:n?l:S,...p,"data-discover":!E&&r==="render"?"true":void 0})});QY.displayName="Form";function XY(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RB(r){let e=L.useContext($c);return pr(e,XY(r)),e}function ZY(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=uY(),l=nu(),c=Zd(r,{relative:a});return L.useCallback(f=>{if(CY(f,e)){f.preventDefault();let h=t!==void 0?t:Sd(l)===Sd(c);o(r,{replace:h,state:n,preventScrollReset:i,relative:a,viewTransition:s})}},[l,o,c,t,n,e,r,i,a,s])}var JY=0,ez=()=>`__${String(++JY)}__`;function tz(){let{router:r}=RB("useSubmit"),{basename:e}=L.useContext(za),t=xY();return L.useCallback(async(n,i={})=>{let{action:a,method:s,encType:o,formData:l,body:c}=LY(n,e);if(i.navigate===!1){let f=i.fetcherKey||ez();await r.fetch(f,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function rz(r,{relative:e}={}){let{basename:t}=L.useContext(za),n=L.useContext(Ys);pr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Zd(r||".",{relative:e})},s=nu();if(r==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(f=>f==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Is([t,a.pathname])),Sd(a)}function nz(r,{relative:e}={}){let t=L.useContext(SB);pr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=RB("useViewTransitionState"),i=Zd(r,{relative:e});if(!t.isTransitioning)return!1;let a=Ms(t.currentLocation.pathname,n)||t.currentLocation.pathname,s=Ms(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Sg(i.pathname,s)!=null||Sg(i.pathname,a)!=null}var Jd=pB();const iz=Ya(Jd);function az({connectionState:r}){const[e,t]=L.useState(new Date);L.useEffect(()=>{const i=setInterval(()=>{t(new Date)},5e3);return()=>clearInterval(i)},[]);const n=()=>{switch(r){case"connected":return j.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-farm-100 text-farm-700 text-xs font-medium",children:[j.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-farm-500"}),"Connected"]});case"connecting":return j.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-medium",children:[j.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Connecting"]});case"disconnected":return j.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[j.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Disconnected"]});case"error":return j.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[j.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Error"]})}};return j.jsx("header",{className:"bg-farm-500 shadow-lg flex-shrink-0",children:j.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 py-3",children:j.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"text-lg font-bold text-gray-900",children:" | Tansaeng SmartFarm"}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("a",{href:"/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""}),j.jsx("a",{href:"/admin/",target:"_blank",className:"text-xs px-2 py-1 bg-white text-farm-700 rounded hover:bg-farm-50 transition-colors font-medium",children:""})]})]}),j.jsx("div",{className:"text-sm font-medium text-gray-800",children:e.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),j.jsx("div",{className:"flex items-center gap-2",children:n()})]})})})}const sz=[{id:"devices",label:"",icon:""},{id:"mist",label:"",icon:""},{id:"environment",label:"",icon:""},{id:"cameras",label:"",icon:""},{id:"settings",label:"",icon:""}];function oz({activeTab:r,onTabChange:e}){return j.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 safe-area-bottom",children:j.jsx("div",{className:"grid grid-cols-5 h-16",children:sz.map(t=>j.jsxs("button",{onClick:()=>e(t.id),className:`
              flex flex-col items-center justify-center gap-0.5
              transition-all duration-200 relative
              ${r===t.id?"text-farm-600":"text-gray-400 active:text-farm-500"}
            `,children:[r===t.id&&j.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-farm-500 rounded-b-full"}),j.jsx("span",{className:"text-2xl",children:t.icon}),j.jsx("span",{className:"text-[10px] font-medium",children:t.label})]},t.id))})})}const wE=[{id:"fan_front",name:" ",type:"fan",esp32Id:"ctlr-0001",commandTopic:"tansaeng/ctlr-0001/fan1/cmd",stateTopic:"tansaeng/ctlr-0001/fan1/state"},{id:"fan_back",name:" ",type:"fan",esp32Id:"ctlr-0002",commandTopic:"tansaeng/ctlr-0002/fan2/cmd",stateTopic:"tansaeng/ctlr-0002/fan2/state"},{id:"fan_top",name:"",type:"fan",esp32Id:"esp32-node-1",commandTopic:"tansaeng/esp32-node-1/fan_top/cmd",stateTopic:"tansaeng/esp32-node-1/fan_top/state"},{id:"skylight_left",name:" ",type:"skylight",esp32Id:"ctlr-0012",commandTopic:"tansaeng/ctlr-0012/windowL/cmd",stateTopic:"tansaeng/ctlr-0012/windowL/state",extra:{supportsWindowControl:!0}},{id:"skylight_right",name:" ",type:"skylight",esp32Id:"ctlr-0012",commandTopic:"tansaeng/ctlr-0012/windowR/cmd",stateTopic:"tansaeng/ctlr-0012/windowR/state",extra:{supportsWindowControl:!0}},{id:"sidescreen_left",name:" ",type:"sidescreen",esp32Id:"ctlr-0021",commandTopic:"tansaeng/ctlr-0021/sideL/cmd",stateTopic:"tansaeng/ctlr-0021/sideL/state",extra:{supportsWindowControl:!0}},{id:"sidescreen_right",name:" ",type:"sidescreen",esp32Id:"ctlr-0021",commandTopic:"tansaeng/ctlr-0021/sideR/cmd",stateTopic:"tansaeng/ctlr-0021/sideR/state",extra:{supportsWindowControl:!0}},{id:"pump_nutrient_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_nutrient_fill/state"},{id:"pump_water_curtain",name:"",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_water_curtain/cmd",stateTopic:"tansaeng/esp32-node-3/pump_water_curtain/state"},{id:"pump_heating_fill",name:" ",type:"pump",esp32Id:"esp32-node-3",commandTopic:"tansaeng/esp32-node-3/pump_heating_fill/cmd",stateTopic:"tansaeng/esp32-node-3/pump_heating_fill/state"}];function jp(r){return wE.filter(e=>e.type===r)}const BR=[{id:"esp32-in-fan-front",name:" ",controllerId:"ctlr-0001",statusTopic:"tansaeng/ctlr-0001/status"},{id:"esp32-in-fan-back",name:" ",controllerId:"ctlr-0002",statusTopic:"tansaeng/ctlr-0002/status"},{id:"esp32-in-top",name:" ",controllerId:"ctlr-0003",statusTopic:"tansaeng/ctlr-0003/status"},{id:"esp32-in-main-val",name:" ",controllerId:"ctlr-0004",statusTopic:"tansaeng/ctlr-0004/status"},{id:"esp32-in-line-val",name:" ",controllerId:"ctlr-0005",statusTopic:"tansaeng/ctlr-0005/status"},{id:"esp32-out-pressur-pump",name:" ",controllerId:"ctlr-0006",statusTopic:"tansaeng/ctlr-0006/status"},{id:"esp32-out-insert-pump",name:" ",controllerId:"ctlr-0007",statusTopic:"tansaeng/ctlr-0007/status"},{id:"esp32-out-hit-pump-val",name:" ",controllerId:"ctlr-0008",statusTopic:"tansaeng/ctlr-0008/status"},{id:"esp32-out-chiller-pump",name:" ",controllerId:"ctlr-0009",statusTopic:"tansaeng/ctlr-0009/status"},{id:"esp32-in-chil-hit-pump",name:"/  ",controllerId:"ctlr-0010",statusTopic:"tansaeng/ctlr-0010/status"},{id:"esp32-out-skylight-screen",name:" ",controllerId:"ctlr-0012",statusTopic:"tansaeng/ctlr-0012/status"},{id:"esp32-out-side-screen",name:" ",controllerId:"ctlr-0021",statusTopic:"tansaeng/ctlr-0021/status"},{id:"esp32-out-top-chillerline-pump-valve",name:"   ",controllerId:"ctlr-0013",statusTopic:"tansaeng/ctlr-0013/status"}];function UR({device:r,power:e,percentage:t,lastSavedAt:n,onToggle:i,onPercentageChange:a}){const s=e==="on",o=()=>r.type==="fan"?"":r.type==="vent"?"":r.type==="pump"?"":"";return j.jsxs("div",{className:"bg-white rounded-lg shadow-card hover:shadow-card-hover transition-all duration-200 p-3 border border-gray-200",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsxs("div",{className:"flex items-center gap-1.5",children:[j.jsx("div",{className:"text-2xl",children:o()}),j.jsxs("div",{children:[j.jsx("h3",{className:"text-sm font-bold text-gray-800 m-0",children:r.name}),j.jsx("p",{className:"text-2xs text-gray-500 m-0",children:r.type==="fan"?"":r.type==="vent"?"":""})]})]}),!r.extra?.supportsPercentage&&j.jsxs("div",{className:"flex flex-col items-end gap-1",children:[j.jsx("button",{onClick:()=>i?.(!s),className:`
                relative inline-flex h-9 w-18 cursor-pointer rounded-full
                border-2 border-transparent transition-all duration-300
                ${s?"bg-farm-500":"bg-gray-300"}
              `,role:"switch","aria-checked":s,children:j.jsx("span",{className:`
                flex items-center justify-center h-8 w-8 rounded-full
                bg-white shadow-md transition-transform duration-300
                ${s?"translate-x-9":"translate-x-0"}
              `,children:s?j.jsx("svg",{className:"w-4 h-4 text-farm-500",fill:"currentColor",viewBox:"0 0 20 20",children:j.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):j.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:j.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),j.jsx("span",{className:`text-xs font-semibold ${s?"text-farm-500":"text-gray-500"}`,children:s?"ON":"OFF"})]})]}),r.extra?.supportsPercentage&&j.jsxs("div",{className:"mb-3",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsx("span",{className:"text-xs font-medium text-gray-600",children:" "}),j.jsxs("span",{className:"text-2xl font-bold text-farm-500",children:[t??0,"%"]})]}),j.jsx("input",{type:"range",min:"0",max:"100",value:t??0,onChange:l=>a?.(Number(l.target.value)),className:"slider-thumb w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${t??0}%, #e5e7eb ${t??0}%, #e5e7eb 100%)`}}),j.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[j.jsx("span",{children:""}),j.jsx("span",{children:""})]})]}),j.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[j.jsxs("div",{className:"flex items-center gap-1.5",children:[j.jsx("div",{className:`
            w-1.5 h-1.5 rounded-full
            ${s?"bg-farm-500 animate-pulse":"bg-gray-400"}
          `}),j.jsx("span",{className:`
            text-2xs font-semibold
            ${s?"text-farm-700":"text-gray-600"}
          `,children:s?" ":""})]}),j.jsx("div",{className:"text-2xs text-gray-400",children:n?new Date(n).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]})]})}function qf({title:r,icon:e,badge:t,defaultOpen:n=!1,headerColor:i="bg-farm-500",children:a}){const[s,o]=L.useState(n);return j.jsxs("section",{className:"mb-2",children:[j.jsxs("button",{onClick:()=>o(!s),className:`w-full ${i} px-3 py-2.5 rounded-lg flex items-center justify-between touch-manipulation active:opacity-80`,children:[j.jsxs("div",{className:"flex items-center gap-2",children:[e&&j.jsx("span",{className:"text-lg",children:e}),j.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:r}),t!==void 0&&j.jsx("span",{className:"text-xs bg-white/30 text-gray-800 px-1.5 py-0.5 rounded-full",children:t})]}),j.jsx("span",{className:`text-gray-800 transition-transform duration-200 ${s?"rotate-180":""}`,children:""})]}),j.jsx("div",{className:`overflow-hidden transition-all duration-200 ${s?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:j.jsx("div",{className:"bg-white shadow-sm rounded-b-lg p-2 mt-px",children:a})})]})}var e1=Object.defineProperty,lz=Object.getOwnPropertyDescriptor,uz=Object.getOwnPropertyNames,cz=Object.prototype.hasOwnProperty,ei=(r,e)=>()=>(r&&(e=r(r=0)),e),He=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Hc=(r,e)=>{for(var t in e)e1(r,t,{get:e[t],enumerable:!0})},fz=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uz(e))!cz.call(r,i)&&i!==t&&e1(r,i,{get:()=>e[i],enumerable:!(n=lz(e,i))||n.enumerable});return r},qt=r=>fz(e1({},"__esModule",{value:!0}),r),Me=ei(()=>{}),Jt={};Hc(Jt,{_debugEnd:()=>nw,_debugProcess:()=>rw,_events:()=>vw,_eventsCount:()=>bw,_exiting:()=>HE,_fatalExceptions:()=>JE,_getActiveHandles:()=>BB,_getActiveRequests:()=>FB,_kill:()=>YE,_linkedBinding:()=>MB,_maxListeners:()=>yw,_preload_modules:()=>mw,_rawDebug:()=>UE,_startProfilerIdleNotifier:()=>iw,_stopProfilerIdleNotifier:()=>aw,_tickCallback:()=>tw,abort:()=>uw,addListener:()=>xw,allowedNodeEnvironmentFlags:()=>XE,arch:()=>TE,argv:()=>OE,argv0:()=>pw,assert:()=>UB,binding:()=>LE,browser:()=>BE,chdir:()=>NE,config:()=>GE,cpuUsage:()=>sd,cwd:()=>ME,debugPort:()=>hw,default:()=>r1,dlopen:()=>NB,domain:()=>$E,emit:()=>Tw,emitWarning:()=>PE,env:()=>DE,execArgv:()=>IE,execPath:()=>dw,exit:()=>VE,features:()=>ZE,hasUncaughtExceptionCaptureCallback:()=>jB,hrtime:()=>Pm,kill:()=>WE,listeners:()=>HB,memoryUsage:()=>qE,moduleLoadList:()=>jE,nextTick:()=>LB,off:()=>Ew,on:()=>ys,once:()=>Sw,openStdin:()=>QE,pid:()=>cw,platform:()=>AE,ppid:()=>fw,prependListener:()=>Aw,prependOnceListener:()=>Dw,reallyExit:()=>KE,release:()=>FE,removeAllListeners:()=>_w,removeListener:()=>ww,resourceUsage:()=>zE,setSourceMapsEnabled:()=>gw,setUncaughtExceptionCaptureCallback:()=>ew,stderr:()=>ow,stdin:()=>lw,stdout:()=>sw,title:()=>_E,umask:()=>kE,uptime:()=>$B,version:()=>CE,versions:()=>RE});function t1(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function dz(){!jl||!Ll||(jl=!1,Ll.length?Oa=Ll.concat(Oa):md=-1,Oa.length&&PB())}function PB(){if(!jl){var r=setTimeout(dz,0);jl=!0;for(var e=Oa.length;e;){for(Ll=Oa,Oa=[];++md<e;)Ll&&Ll[md].run();md=-1,e=Oa.length}Ll=null,jl=!1,clearTimeout(r)}}function LB(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Oa.push(new kB(r,e)),Oa.length===1&&!jl&&setTimeout(PB,0)}function kB(r,e){this.fun=r,this.array=e}function mn(){}function MB(r){t1("_linkedBinding")}function NB(r){t1("dlopen")}function FB(){return[]}function BB(){return[]}function UB(r,e){if(!r)throw new Error(e||"assertion error")}function jB(){return!1}function $B(){return Ss.now()/1e3}function Pm(r){var e=Math.floor((Date.now()-Ss.now())*.001),t=Ss.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=Lm)),[n,i]}function ys(){return r1}function HB(r){return[]}var Oa,jl,Ll,md,_E,TE,AE,DE,OE,IE,CE,RE,PE,LE,kE,ME,NE,FE,BE,UE,jE,$E,HE,GE,KE,YE,sd,zE,qE,WE,VE,QE,XE,ZE,JE,ew,tw,rw,nw,iw,aw,sw,ow,lw,uw,cw,fw,dw,hw,pw,mw,gw,Ss,sx,Lm,yw,vw,bw,xw,Sw,Ew,ww,_w,Tw,Aw,Dw,r1,hz=ei(()=>{Me(),Fe(),Ne(),Oa=[],jl=!1,md=-1,kB.prototype.run=function(){this.fun.apply(null,this.array)},_E="browser",TE="x64",AE="browser",DE={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},OE=["/usr/bin/node"],IE=[],CE="v16.8.0",RE={},PE=function(r,e){console.warn((e?e+": ":"")+r)},LE=function(r){t1("binding")},kE=function(r){return 0},ME=function(){return"/"},NE=function(r){},FE={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},BE=!0,UE=mn,jE=[],$E={},HE=!1,GE={},KE=mn,YE=mn,sd=function(){return{}},zE=sd,qE=sd,WE=mn,VE=mn,QE=mn,XE={},ZE={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},JE=mn,ew=mn,tw=mn,rw=mn,nw=mn,iw=mn,aw=mn,sw=void 0,ow=void 0,lw=void 0,uw=mn,cw=2,fw=1,dw="/bin/usr/node",hw=9229,pw="node",mw=[],gw=mn,Ss={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Ss.now===void 0&&(sx=Date.now(),Ss.timing&&Ss.timing.navigationStart&&(sx=Ss.timing.navigationStart),Ss.now=()=>Date.now()-sx),Lm=1e9,Pm.bigint=function(r){var e=Pm(r);return typeof BigInt>"u"?e[0]*Lm+e[1]:BigInt(e[0]*Lm)+BigInt(e[1])},yw=10,vw={},bw=0,xw=ys,Sw=ys,Ew=ys,ww=ys,_w=ys,Tw=mn,Aw=ys,Dw=ys,r1={version:CE,versions:RE,arch:TE,platform:AE,browser:BE,release:FE,_rawDebug:UE,moduleLoadList:jE,binding:LE,_linkedBinding:MB,_events:vw,_eventsCount:bw,_maxListeners:yw,on:ys,addListener:xw,once:Sw,off:Ew,removeListener:ww,removeAllListeners:_w,emit:Tw,prependListener:Aw,prependOnceListener:Dw,listeners:HB,domain:$E,_exiting:HE,config:GE,dlopen:NB,uptime:$B,_getActiveRequests:FB,_getActiveHandles:BB,reallyExit:KE,_kill:YE,cpuUsage:sd,resourceUsage:zE,memoryUsage:qE,kill:WE,exit:VE,openStdin:QE,allowedNodeEnvironmentFlags:XE,assert:UB,features:ZE,_fatalExceptions:JE,setUncaughtExceptionCaptureCallback:ew,hasUncaughtExceptionCaptureCallback:jB,emitWarning:PE,nextTick:LB,_tickCallback:tw,_debugProcess:rw,_debugEnd:nw,_startProfilerIdleNotifier:iw,_stopProfilerIdleNotifier:aw,stdout:sw,stdin:lw,stderr:ow,abort:uw,umask:kE,chdir:NE,cwd:ME,env:DE,title:_E,argv:OE,execArgv:IE,pid:cw,ppid:fw,execPath:dw,debugPort:hw,hrtime:Pm,argv0:pw,_preload_modules:mw,setSourceMapsEnabled:gw}}),Ne=ei(()=>{hz()});function pz(){if(Ow)return ic;Ow=!0,ic.byteLength=o,ic.toByteArray=c,ic.fromByteArray=p;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");b===-1&&(b=y);var v=b===y?0:4-b%4;return[b,v]}function o(g){var y=s(g),b=y[0],v=y[1];return(b+v)*3/4-v}function l(g,y,b){return(y+b)*3/4-b}function c(g){var y,b=s(g),v=b[0],E=b[1],S=new t(l(g,v,E)),w=0,A=E>0?v-4:v,T;for(T=0;T<A;T+=4)y=e[g.charCodeAt(T)]<<18|e[g.charCodeAt(T+1)]<<12|e[g.charCodeAt(T+2)]<<6|e[g.charCodeAt(T+3)],S[w++]=y>>16&255,S[w++]=y>>8&255,S[w++]=y&255;return E===2&&(y=e[g.charCodeAt(T)]<<2|e[g.charCodeAt(T+1)]>>4,S[w++]=y&255),E===1&&(y=e[g.charCodeAt(T)]<<10|e[g.charCodeAt(T+1)]<<4|e[g.charCodeAt(T+2)]>>2,S[w++]=y>>8&255,S[w++]=y&255),S}function f(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,y,b){for(var v,E=[],S=y;S<b;S+=3)v=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(g[S+2]&255),E.push(f(v));return E.join("")}function p(g){for(var y,b=g.length,v=b%3,E=[],S=16383,w=0,A=b-v;w<A;w+=S)E.push(h(g,w,w+S>A?A:w+S));return v===1?(y=g[b-1],E.push(r[y>>2]+r[y<<4&63]+"==")):v===2&&(y=(g[b-2]<<8)+g[b-1],E.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),E.join("")}return ic}function mz(){return Iw?od:(Iw=!0,od.read=function(r,e,t,n,i){var a,s,o=i*8-n-1,l=(1<<o)-1,c=l>>1,f=-7,h=t?i-1:0,p=t?-1:1,g=r[e+h];for(h+=p,a=g&(1<<-f)-1,g>>=-f,f+=o;f>0;a=a*256+r[e+h],h+=p,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=p,f-=8);if(a===0)a=1-c;else{if(a===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(g?-1:1)*s*Math.pow(2,a-n)},od.write=function(r,e,t,n,i,a){var s,o,l,c=a*8-i-1,f=(1<<c)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,y=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?e+=p/l:e+=p*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=f?(o=0,s=f):s+h>=1?(o=(e*l-1)*Math.pow(2,i),s=s+h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=o&255,g+=y,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;r[t+g]=s&255,g+=y,s/=256,c-=8);r[t+g-y]|=b*128},od)}function gz(){if(Cw)return Lo;Cw=!0;let r=pz(),e=mz(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Lo.Buffer=s,Lo.SlowBuffer=E,Lo.INSPECT_MAX_BYTES=50;let n=2147483647;Lo.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let R=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(R,N),R.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(R){if(R>n)throw new RangeError('The value "'+R+'" is invalid for option "size"');let N=new Uint8Array(R);return Object.setPrototypeOf(N,s.prototype),N}function s(R,N,V){if(typeof R=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(R)}return o(R,N,V)}s.poolSize=8192;function o(R,N,V){if(typeof R=="string")return h(R,N);if(ArrayBuffer.isView(R))return g(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(pe(R,ArrayBuffer)||R&&pe(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(R,SharedArrayBuffer)||R&&pe(R.buffer,SharedArrayBuffer)))return y(R,N,V);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let de=R.valueOf&&R.valueOf();if(de!=null&&de!==R)return s.from(de,N,V);let ve=b(R);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return s.from(R[Symbol.toPrimitive]("string"),N,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}s.from=function(R,N,V){return o(R,N,V)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function c(R,N,V){return l(R),R<=0?a(R):N!==void 0?typeof V=="string"?a(R).fill(N,V):a(R).fill(N):a(R)}s.alloc=function(R,N,V){return c(R,N,V)};function f(R){return l(R),a(R<0?0:v(R)|0)}s.allocUnsafe=function(R){return f(R)},s.allocUnsafeSlow=function(R){return f(R)};function h(R,N){if((typeof N!="string"||N==="")&&(N="utf8"),!s.isEncoding(N))throw new TypeError("Unknown encoding: "+N);let V=S(R,N)|0,de=a(V),ve=de.write(R,N);return ve!==V&&(de=de.slice(0,ve)),de}function p(R){let N=R.length<0?0:v(R.length)|0,V=a(N);for(let de=0;de<N;de+=1)V[de]=R[de]&255;return V}function g(R){if(pe(R,Uint8Array)){let N=new Uint8Array(R);return y(N.buffer,N.byteOffset,N.byteLength)}return p(R)}function y(R,N,V){if(N<0||R.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<N+(V||0))throw new RangeError('"length" is outside of buffer bounds');let de;return N===void 0&&V===void 0?de=new Uint8Array(R):V===void 0?de=new Uint8Array(R,N):de=new Uint8Array(R,N,V),Object.setPrototypeOf(de,s.prototype),de}function b(R){if(s.isBuffer(R)){let N=v(R.length)|0,V=a(N);return V.length===0||R.copy(V,0,0,N),V}if(R.length!==void 0)return typeof R.length!="number"||Be(R.length)?a(0):p(R);if(R.type==="Buffer"&&Array.isArray(R.data))return p(R.data)}function v(R){if(R>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return R|0}function E(R){return+R!=R&&(R=0),s.alloc(+R)}s.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==s.prototype},s.compare=function(R,N){if(pe(R,Uint8Array)&&(R=s.from(R,R.offset,R.byteLength)),pe(N,Uint8Array)&&(N=s.from(N,N.offset,N.byteLength)),!s.isBuffer(R)||!s.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===N)return 0;let V=R.length,de=N.length;for(let ve=0,Pe=Math.min(V,de);ve<Pe;++ve)if(R[ve]!==N[ve]){V=R[ve],de=N[ve];break}return V<de?-1:de<V?1:0},s.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(R,N){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return s.alloc(0);let V;if(N===void 0)for(N=0,V=0;V<R.length;++V)N+=R[V].length;let de=s.allocUnsafe(N),ve=0;for(V=0;V<R.length;++V){let Pe=R[V];if(pe(Pe,Uint8Array))ve+Pe.length>de.length?(s.isBuffer(Pe)||(Pe=s.from(Pe)),Pe.copy(de,ve)):Uint8Array.prototype.set.call(de,Pe,ve);else if(s.isBuffer(Pe))Pe.copy(de,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Pe.length}return de};function S(R,N){if(s.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||pe(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);let V=R.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&V===0)return 0;let ve=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return ae(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return Re(R).length;default:if(ve)return de?-1:ae(R).length;N=(""+N).toLowerCase(),ve=!0}}s.byteLength=S;function w(R,N,V){let de=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,N>>>=0,V<=N))return"";for(R||(R="utf8");;)switch(R){case"hex":return K(this,N,V);case"utf8":case"utf-8":return W(this,N,V);case"ascii":return $(this,N,V);case"latin1":case"binary":return z(this,N,V);case"base64":return C(this,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,N,V);default:if(de)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),de=!0}}s.prototype._isBuffer=!0;function A(R,N,V){let de=R[N];R[N]=R[V],R[V]=de}s.prototype.swap16=function(){let R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<R;N+=2)A(this,N,N+1);return this},s.prototype.swap32=function(){let R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<R;N+=4)A(this,N,N+3),A(this,N+1,N+2);return this},s.prototype.swap64=function(){let R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<R;N+=8)A(this,N,N+7),A(this,N+1,N+6),A(this,N+2,N+5),A(this,N+3,N+4);return this},s.prototype.toString=function(){let R=this.length;return R===0?"":arguments.length===0?W(this,0,R):w.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(R){if(!s.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:s.compare(this,R)===0},s.prototype.inspect=function(){let R="",N=Lo.INSPECT_MAX_BYTES;return R=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(R+=" ... "),"<Buffer "+R+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(R,N,V,de,ve){if(pe(R,Uint8Array)&&(R=s.from(R,R.offset,R.byteLength)),!s.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(N===void 0&&(N=0),V===void 0&&(V=R?R.length:0),de===void 0&&(de=0),ve===void 0&&(ve=this.length),N<0||V>R.length||de<0||ve>this.length)throw new RangeError("out of range index");if(de>=ve&&N>=V)return 0;if(de>=ve)return-1;if(N>=V)return 1;if(N>>>=0,V>>>=0,de>>>=0,ve>>>=0,this===R)return 0;let Pe=ve-de,We=V-N,ge=Math.min(Pe,We),_e=this.slice(de,ve),tt=R.slice(N,V);for(let Ze=0;Ze<ge;++Ze)if(_e[Ze]!==tt[Ze]){Pe=_e[Ze],We=tt[Ze];break}return Pe<We?-1:We<Pe?1:0};function T(R,N,V,de,ve){if(R.length===0)return-1;if(typeof V=="string"?(de=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,Be(V)&&(V=ve?0:R.length-1),V<0&&(V=R.length+V),V>=R.length){if(ve)return-1;V=R.length-1}else if(V<0)if(ve)V=0;else return-1;if(typeof N=="string"&&(N=s.from(N,de)),s.isBuffer(N))return N.length===0?-1:I(R,N,V,de,ve);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(R,N,V):Uint8Array.prototype.lastIndexOf.call(R,N,V):I(R,[N],V,de,ve);throw new TypeError("val must be string, number or Buffer")}function I(R,N,V,de,ve){let Pe=1,We=R.length,ge=N.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(R.length<2||N.length<2)return-1;Pe=2,We/=2,ge/=2,V/=2}function _e(Ze,ht){return Pe===1?Ze[ht]:Ze.readUInt16BE(ht*Pe)}let tt;if(ve){let Ze=-1;for(tt=V;tt<We;tt++)if(_e(R,tt)===_e(N,Ze===-1?0:tt-Ze)){if(Ze===-1&&(Ze=tt),tt-Ze+1===ge)return Ze*Pe}else Ze!==-1&&(tt-=tt-Ze),Ze=-1}else for(V+ge>We&&(V=We-ge),tt=V;tt>=0;tt--){let Ze=!0;for(let ht=0;ht<ge;ht++)if(_e(R,tt+ht)!==_e(N,ht)){Ze=!1;break}if(Ze)return tt}return-1}s.prototype.includes=function(R,N,V){return this.indexOf(R,N,V)!==-1},s.prototype.indexOf=function(R,N,V){return T(this,R,N,V,!0)},s.prototype.lastIndexOf=function(R,N,V){return T(this,R,N,V,!1)};function D(R,N,V,de){V=Number(V)||0;let ve=R.length-V;de?(de=Number(de),de>ve&&(de=ve)):de=ve;let Pe=N.length;de>Pe/2&&(de=Pe/2);let We;for(We=0;We<de;++We){let ge=parseInt(N.substr(We*2,2),16);if(Be(ge))return We;R[V+We]=ge}return We}function P(R,N,V,de){return Ue(ae(N,R.length-V),R,V,de)}function k(R,N,V,de){return Ue(ye(N),R,V,de)}function M(R,N,V,de){return Ue(Re(N),R,V,de)}function B(R,N,V,de){return Ue(Ie(N,R.length-V),R,V,de)}s.prototype.write=function(R,N,V,de){if(N===void 0)de="utf8",V=this.length,N=0;else if(V===void 0&&typeof N=="string")de=N,V=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(V)?(V=V>>>0,de===void 0&&(de="utf8")):(de=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let ve=this.length-N;if((V===void 0||V>ve)&&(V=ve),R.length>0&&(V<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Pe=!1;for(;;)switch(de){case"hex":return D(this,R,N,V);case"utf8":case"utf-8":return P(this,R,N,V);case"ascii":case"latin1":case"binary":return k(this,R,N,V);case"base64":return M(this,R,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,R,N,V);default:if(Pe)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Pe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(R,N,V){return N===0&&V===R.length?r.fromByteArray(R):r.fromByteArray(R.slice(N,V))}function W(R,N,V){V=Math.min(R.length,V);let de=[],ve=N;for(;ve<V;){let Pe=R[ve],We=null,ge=Pe>239?4:Pe>223?3:Pe>191?2:1;if(ve+ge<=V){let _e,tt,Ze,ht;switch(ge){case 1:Pe<128&&(We=Pe);break;case 2:_e=R[ve+1],(_e&192)===128&&(ht=(Pe&31)<<6|_e&63,ht>127&&(We=ht));break;case 3:_e=R[ve+1],tt=R[ve+2],(_e&192)===128&&(tt&192)===128&&(ht=(Pe&15)<<12|(_e&63)<<6|tt&63,ht>2047&&(ht<55296||ht>57343)&&(We=ht));break;case 4:_e=R[ve+1],tt=R[ve+2],Ze=R[ve+3],(_e&192)===128&&(tt&192)===128&&(Ze&192)===128&&(ht=(Pe&15)<<18|(_e&63)<<12|(tt&63)<<6|Ze&63,ht>65535&&ht<1114112&&(We=ht))}}We===null?(We=65533,ge=1):We>65535&&(We-=65536,de.push(We>>>10&1023|55296),We=56320|We&1023),de.push(We),ve+=ge}return q(de)}let Y=4096;function q(R){let N=R.length;if(N<=Y)return String.fromCharCode.apply(String,R);let V="",de=0;for(;de<N;)V+=String.fromCharCode.apply(String,R.slice(de,de+=Y));return V}function $(R,N,V){let de="";V=Math.min(R.length,V);for(let ve=N;ve<V;++ve)de+=String.fromCharCode(R[ve]&127);return de}function z(R,N,V){let de="";V=Math.min(R.length,V);for(let ve=N;ve<V;++ve)de+=String.fromCharCode(R[ve]);return de}function K(R,N,V){let de=R.length;(!N||N<0)&&(N=0),(!V||V<0||V>de)&&(V=de);let ve="";for(let Pe=N;Pe<V;++Pe)ve+=ze[R[Pe]];return ve}function Z(R,N,V){let de=R.slice(N,V),ve="";for(let Pe=0;Pe<de.length-1;Pe+=2)ve+=String.fromCharCode(de[Pe]+de[Pe+1]*256);return ve}s.prototype.slice=function(R,N){let V=this.length;R=~~R,N=N===void 0?V:~~N,R<0?(R+=V,R<0&&(R=0)):R>V&&(R=V),N<0?(N+=V,N<0&&(N=0)):N>V&&(N=V),N<R&&(N=R);let de=this.subarray(R,N);return Object.setPrototypeOf(de,s.prototype),de};function X(R,N,V){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+N>V)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(R,N,V){R=R>>>0,N=N>>>0,V||X(R,N,this.length);let de=this[R],ve=1,Pe=0;for(;++Pe<N&&(ve*=256);)de+=this[R+Pe]*ve;return de},s.prototype.readUintBE=s.prototype.readUIntBE=function(R,N,V){R=R>>>0,N=N>>>0,V||X(R,N,this.length);let de=this[R+--N],ve=1;for(;N>0&&(ve*=256);)de+=this[R+--N]*ve;return de},s.prototype.readUint8=s.prototype.readUInt8=function(R,N){return R=R>>>0,N||X(R,1,this.length),this[R]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(R,N){return R=R>>>0,N||X(R,2,this.length),this[R]|this[R+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(R,N){return R=R>>>0,N||X(R,2,this.length),this[R]<<8|this[R+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(R,N){return R=R>>>0,N||X(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(R,N){return R=R>>>0,N||X(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},s.prototype.readBigUInt64LE=De(function(R){R=R>>>0,ne(R,"offset");let N=this[R],V=this[R+7];(N===void 0||V===void 0)&&Ce(R,this.length-8);let de=N+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,ve=this[++R]+this[++R]*2**8+this[++R]*2**16+V*2**24;return BigInt(de)+(BigInt(ve)<<BigInt(32))}),s.prototype.readBigUInt64BE=De(function(R){R=R>>>0,ne(R,"offset");let N=this[R],V=this[R+7];(N===void 0||V===void 0)&&Ce(R,this.length-8);let de=N*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],ve=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+V;return(BigInt(de)<<BigInt(32))+BigInt(ve)}),s.prototype.readIntLE=function(R,N,V){R=R>>>0,N=N>>>0,V||X(R,N,this.length);let de=this[R],ve=1,Pe=0;for(;++Pe<N&&(ve*=256);)de+=this[R+Pe]*ve;return ve*=128,de>=ve&&(de-=Math.pow(2,8*N)),de},s.prototype.readIntBE=function(R,N,V){R=R>>>0,N=N>>>0,V||X(R,N,this.length);let de=N,ve=1,Pe=this[R+--de];for(;de>0&&(ve*=256);)Pe+=this[R+--de]*ve;return ve*=128,Pe>=ve&&(Pe-=Math.pow(2,8*N)),Pe},s.prototype.readInt8=function(R,N){return R=R>>>0,N||X(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},s.prototype.readInt16LE=function(R,N){R=R>>>0,N||X(R,2,this.length);let V=this[R]|this[R+1]<<8;return V&32768?V|4294901760:V},s.prototype.readInt16BE=function(R,N){R=R>>>0,N||X(R,2,this.length);let V=this[R+1]|this[R]<<8;return V&32768?V|4294901760:V},s.prototype.readInt32LE=function(R,N){return R=R>>>0,N||X(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},s.prototype.readInt32BE=function(R,N){return R=R>>>0,N||X(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},s.prototype.readBigInt64LE=De(function(R){R=R>>>0,ne(R,"offset");let N=this[R],V=this[R+7];(N===void 0||V===void 0)&&Ce(R,this.length-8);let de=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(V<<24);return(BigInt(de)<<BigInt(32))+BigInt(N+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),s.prototype.readBigInt64BE=De(function(R){R=R>>>0,ne(R,"offset");let N=this[R],V=this[R+7];(N===void 0||V===void 0)&&Ce(R,this.length-8);let de=(N<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(de)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+V)}),s.prototype.readFloatLE=function(R,N){return R=R>>>0,N||X(R,4,this.length),e.read(this,R,!0,23,4)},s.prototype.readFloatBE=function(R,N){return R=R>>>0,N||X(R,4,this.length),e.read(this,R,!1,23,4)},s.prototype.readDoubleLE=function(R,N){return R=R>>>0,N||X(R,8,this.length),e.read(this,R,!0,52,8)},s.prototype.readDoubleBE=function(R,N){return R=R>>>0,N||X(R,8,this.length),e.read(this,R,!1,52,8)};function H(R,N,V,de,ve,Pe){if(!s.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>ve||N<Pe)throw new RangeError('"value" argument is out of bounds');if(V+de>R.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(R,N,V,de){if(R=+R,N=N>>>0,V=V>>>0,!de){let We=Math.pow(2,8*V)-1;H(this,R,N,V,We,0)}let ve=1,Pe=0;for(this[N]=R&255;++Pe<V&&(ve*=256);)this[N+Pe]=R/ve&255;return N+V},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(R,N,V,de){if(R=+R,N=N>>>0,V=V>>>0,!de){let We=Math.pow(2,8*V)-1;H(this,R,N,V,We,0)}let ve=V-1,Pe=1;for(this[N+ve]=R&255;--ve>=0&&(Pe*=256);)this[N+ve]=R/Pe&255;return N+V},s.prototype.writeUint8=s.prototype.writeUInt8=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,1,255,0),this[N]=R&255,N+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,2,65535,0),this[N]=R&255,this[N+1]=R>>>8,N+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,2,65535,0),this[N]=R>>>8,this[N+1]=R&255,N+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,4,4294967295,0),this[N+3]=R>>>24,this[N+2]=R>>>16,this[N+1]=R>>>8,this[N]=R&255,N+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,4,4294967295,0),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255,N+4};function G(R,N,V,de,ve){ce(N,de,ve,R,V,7);let Pe=Number(N&BigInt(4294967295));R[V++]=Pe,Pe=Pe>>8,R[V++]=Pe,Pe=Pe>>8,R[V++]=Pe,Pe=Pe>>8,R[V++]=Pe;let We=Number(N>>BigInt(32)&BigInt(4294967295));return R[V++]=We,We=We>>8,R[V++]=We,We=We>>8,R[V++]=We,We=We>>8,R[V++]=We,V}function J(R,N,V,de,ve){ce(N,de,ve,R,V,7);let Pe=Number(N&BigInt(4294967295));R[V+7]=Pe,Pe=Pe>>8,R[V+6]=Pe,Pe=Pe>>8,R[V+5]=Pe,Pe=Pe>>8,R[V+4]=Pe;let We=Number(N>>BigInt(32)&BigInt(4294967295));return R[V+3]=We,We=We>>8,R[V+2]=We,We=We>>8,R[V+1]=We,We=We>>8,R[V]=We,V+8}s.prototype.writeBigUInt64LE=De(function(R,N=0){return G(this,R,N,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=De(function(R,N=0){return J(this,R,N,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(R,N,V,de){if(R=+R,N=N>>>0,!de){let ge=Math.pow(2,8*V-1);H(this,R,N,V,ge-1,-ge)}let ve=0,Pe=1,We=0;for(this[N]=R&255;++ve<V&&(Pe*=256);)R<0&&We===0&&this[N+ve-1]!==0&&(We=1),this[N+ve]=(R/Pe>>0)-We&255;return N+V},s.prototype.writeIntBE=function(R,N,V,de){if(R=+R,N=N>>>0,!de){let ge=Math.pow(2,8*V-1);H(this,R,N,V,ge-1,-ge)}let ve=V-1,Pe=1,We=0;for(this[N+ve]=R&255;--ve>=0&&(Pe*=256);)R<0&&We===0&&this[N+ve+1]!==0&&(We=1),this[N+ve]=(R/Pe>>0)-We&255;return N+V},s.prototype.writeInt8=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,1,127,-128),R<0&&(R=255+R+1),this[N]=R&255,N+1},s.prototype.writeInt16LE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,2,32767,-32768),this[N]=R&255,this[N+1]=R>>>8,N+2},s.prototype.writeInt16BE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,2,32767,-32768),this[N]=R>>>8,this[N+1]=R&255,N+2},s.prototype.writeInt32LE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,4,2147483647,-2147483648),this[N]=R&255,this[N+1]=R>>>8,this[N+2]=R>>>16,this[N+3]=R>>>24,N+4},s.prototype.writeInt32BE=function(R,N,V){return R=+R,N=N>>>0,V||H(this,R,N,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255,N+4},s.prototype.writeBigInt64LE=De(function(R,N=0){return G(this,R,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=De(function(R,N=0){return J(this,R,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(R,N,V,de,ve,Pe){if(V+de>R.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function se(R,N,V,de,ve){return N=+N,V=V>>>0,ve||fe(R,N,V,4),e.write(R,N,V,de,23,4),V+4}s.prototype.writeFloatLE=function(R,N,V){return se(this,R,N,!0,V)},s.prototype.writeFloatBE=function(R,N,V){return se(this,R,N,!1,V)};function be(R,N,V,de,ve){return N=+N,V=V>>>0,ve||fe(R,N,V,8),e.write(R,N,V,de,52,8),V+8}s.prototype.writeDoubleLE=function(R,N,V){return be(this,R,N,!0,V)},s.prototype.writeDoubleBE=function(R,N,V){return be(this,R,N,!1,V)},s.prototype.copy=function(R,N,V,de){if(!s.isBuffer(R))throw new TypeError("argument should be a Buffer");if(V||(V=0),!de&&de!==0&&(de=this.length),N>=R.length&&(N=R.length),N||(N=0),de>0&&de<V&&(de=V),de===V||R.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),R.length-N<de-V&&(de=R.length-N+V);let ve=de-V;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,V,de):Uint8Array.prototype.set.call(R,this.subarray(V,de),N),ve},s.prototype.fill=function(R,N,V,de){if(typeof R=="string"){if(typeof N=="string"?(de=N,N=0,V=this.length):typeof V=="string"&&(de=V,V=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!s.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(R.length===1){let Pe=R.charCodeAt(0);(de==="utf8"&&Pe<128||de==="latin1")&&(R=Pe)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(N<0||this.length<N||this.length<V)throw new RangeError("Out of range index");if(V<=N)return this;N=N>>>0,V=V===void 0?this.length:V>>>0,R||(R=0);let ve;if(typeof R=="number")for(ve=N;ve<V;++ve)this[ve]=R;else{let Pe=s.isBuffer(R)?R:s.from(R,de),We=Pe.length;if(We===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ve=0;ve<V-N;++ve)this[ve+N]=Pe[ve%We]}return this};let oe={};function re(R,N,V){oe[R]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,this.stack,delete this.name}get code(){return R}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(R,N){return`The "${R}" argument must be of type number. Received type ${typeof N}`},TypeError),re("ERR_OUT_OF_RANGE",function(R,N,V){let de=`The value of "${R}" is out of range.`,ve=V;return Number.isInteger(V)&&Math.abs(V)>2**32?ve=te(String(V)):typeof V=="bigint"&&(ve=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(ve=te(ve)),ve+="n"),de+=` It must be ${N}. Received ${ve}`,de},RangeError);function te(R){let N="",V=R.length,de=R[0]==="-"?1:0;for(;V>=de+4;V-=3)N=`_${R.slice(V-3,V)}${N}`;return`${R.slice(0,V)}${N}`}function le(R,N,V){ne(N,"offset"),(R[N]===void 0||R[N+V]===void 0)&&Ce(N,R.length-(V+1))}function ce(R,N,V,de,ve,Pe){if(R>V||R<N){let We=typeof N=="bigint"?"n":"",ge;throw N===0||N===BigInt(0)?ge=`>= 0${We} and < 2${We} ** ${(Pe+1)*8}${We}`:ge=`>= -(2${We} ** ${(Pe+1)*8-1}${We}) and < 2 ** ${(Pe+1)*8-1}${We}`,new oe.ERR_OUT_OF_RANGE("value",ge,R)}le(de,ve,Pe)}function ne(R,N){if(typeof R!="number")throw new oe.ERR_INVALID_ARG_TYPE(N,"number",R)}function Ce(R,N,V){throw Math.floor(R)!==R?(ne(R,V),new oe.ERR_OUT_OF_RANGE("offset","an integer",R)):N<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${N}`,R)}let Se=/[^+/0-9A-Za-z-_]/g;function ie(R){if(R=R.split("=")[0],R=R.trim().replace(Se,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function ae(R,N){N=N||1/0;let V,de=R.length,ve=null,Pe=[];for(let We=0;We<de;++We){if(V=R.charCodeAt(We),V>55295&&V<57344){if(!ve){if(V>56319){(N-=3)>-1&&Pe.push(239,191,189);continue}else if(We+1===de){(N-=3)>-1&&Pe.push(239,191,189);continue}ve=V;continue}if(V<56320){(N-=3)>-1&&Pe.push(239,191,189),ve=V;continue}V=(ve-55296<<10|V-56320)+65536}else ve&&(N-=3)>-1&&Pe.push(239,191,189);if(ve=null,V<128){if((N-=1)<0)break;Pe.push(V)}else if(V<2048){if((N-=2)<0)break;Pe.push(V>>6|192,V&63|128)}else if(V<65536){if((N-=3)<0)break;Pe.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((N-=4)<0)break;Pe.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return Pe}function ye(R){let N=[];for(let V=0;V<R.length;++V)N.push(R.charCodeAt(V)&255);return N}function Ie(R,N){let V,de,ve,Pe=[];for(let We=0;We<R.length&&!((N-=2)<0);++We)V=R.charCodeAt(We),de=V>>8,ve=V%256,Pe.push(ve),Pe.push(de);return Pe}function Re(R){return r.toByteArray(ie(R))}function Ue(R,N,V,de){let ve;for(ve=0;ve<de&&!(ve+V>=N.length||ve>=R.length);++ve)N[ve+V]=R[ve];return ve}function pe(R,N){return R instanceof N||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===N.name}function Be(R){return R!==R}let ze=(function(){let R="0123456789abcdef",N=new Array(256);for(let V=0;V<16;++V){let de=V*16;for(let ve=0;ve<16;++ve)N[de+ve]=R[V]+R[ve]}return N})();function De(R){return typeof BigInt>"u"?ft:R}function ft(){throw new Error("BigInt not supported")}return Lo}var ic,Ow,od,Iw,Lo,Cw,yz=ei(()=>{Me(),Fe(),Ne(),ic={},Ow=!1,od={},Iw=!1,Lo={},Cw=!1}),Jr={};Hc(Jr,{Buffer:()=>Eg,INSPECT_MAX_BYTES:()=>GB,default:()=>vs,kMaxLength:()=>KB});var vs,Eg,GB,KB,en=ei(()=>{Me(),Fe(),Ne(),yz(),vs=gz(),vs.Buffer,vs.SlowBuffer,vs.INSPECT_MAX_BYTES,vs.kMaxLength,Eg=vs.Buffer,GB=vs.INSPECT_MAX_BYTES,KB=vs.kMaxLength}),Fe=ei(()=>{en()}),mr=He((r,e)=>{Me(),Fe(),Ne();var t=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let i="";for(let a=0;a<n.length;a++)i+=`    ${n[a].stack}
`;super(i),this.name="AggregateError",this.errors=n}};e.exports={AggregateError:t,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,i){return n.includes(i)},ArrayPrototypeIndexOf(n,i){return n.indexOf(i)},ArrayPrototypeJoin(n,i){return n.join(i)},ArrayPrototypeMap(n,i){return n.map(i)},ArrayPrototypePop(n,i){return n.pop(i)},ArrayPrototypePush(n,i){return n.push(i)},ArrayPrototypeSlice(n,i,a){return n.slice(i,a)},Error,FunctionPrototypeCall(n,i,...a){return n.call(i,...a)},FunctionPrototypeSymbolHasInstance(n,i){return Function.prototype[Symbol.hasInstance].call(n,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,i){return Object.defineProperties(n,i)},ObjectDefineProperty(n,i,a){return Object.defineProperty(n,i,a)},ObjectGetOwnPropertyDescriptor(n,i){return Object.getOwnPropertyDescriptor(n,i)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,i){return Object.setPrototypeOf(n,i)},Promise,PromisePrototypeCatch(n,i){return n.catch(i)},PromisePrototypeThen(n,i,a){return n.then(i,a)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,i){return n.test(i)},SafeSet:Set,String,StringPrototypeSlice(n,i,a){return n.slice(i,a)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,i,a){return n.set(i,a)},Boolean,Uint8Array}}),YB=He((r,e)=>{Me(),Fe(),Ne(),e.exports={format(t,...n){return t.replace(/%([sdifj])/g,function(...[i,a]){let s=n.shift();return a==="f"?s.toFixed(6):a==="j"?JSON.stringify(s):a==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),kn=He((r,e)=>{Me(),Fe(),Ne();var{format:t,inspect:n}=YB(),{AggregateError:i}=mr(),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",f={};function h(S,w){if(!S)throw new f.ERR_INTERNAL_ASSERTION(w)}function p(S){let w="",A=S.length,T=S[0]==="-"?1:0;for(;A>=T+4;A-=3)w=`_${S.slice(A-3,A)}${w}`;return`${S.slice(0,A)}${w}`}function g(S,w,A){if(typeof w=="function")return h(w.length<=A.length,`Code: ${S}; The provided arguments length (${A.length}) does not match the required ones (${w.length}).`),w(...A);let T=(w.match(/%[dfijoOs]/g)||[]).length;return h(T===A.length,`Code: ${S}; The provided arguments length (${A.length}) does not match the required ones (${T}).`),A.length===0?w:t(w,...A)}function y(S,w,A){A||(A=Error);class T extends A{constructor(...D){super(g(S,w,D))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=S,T.prototype[s]=!0,f[S]=T}function b(S){let w=c+S.name;return Object.defineProperty(S,"name",{value:w}),S}function v(S,w){if(S&&w&&S!==w){if(Array.isArray(w.errors))return w.errors.push(S),w;let A=new a([w,S],w.message);return A.code=w.code,A}return S||w}var E=class extends Error{constructor(S="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new f.ERR_INVALID_ARG_TYPE("options","Object",w);super(S,w),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(S,w,A)=>{h(typeof S=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let T="The ";S.endsWith(" argument")?T+=`${S} `:T+=`"${S}" ${S.includes(".")?"property":"argument"} `,T+="must be ";let I=[],D=[],P=[];for(let M of w)h(typeof M=="string","All expected entries have to be of type string"),o.includes(M)?I.push(M.toLowerCase()):l.test(M)?D.push(M):(h(M!=="object",'The value "object" should be written as "Object"'),P.push(M));if(D.length>0){let M=I.indexOf("object");M!==-1&&(I.splice(I,M,1),D.push("Object"))}if(I.length>0){switch(I.length){case 1:T+=`of type ${I[0]}`;break;case 2:T+=`one of type ${I[0]} or ${I[1]}`;break;default:{let M=I.pop();T+=`one of type ${I.join(", ")}, or ${M}`}}(D.length>0||P.length>0)&&(T+=" or ")}if(D.length>0){switch(D.length){case 1:T+=`an instance of ${D[0]}`;break;case 2:T+=`an instance of ${D[0]} or ${D[1]}`;break;default:{let M=D.pop();T+=`an instance of ${D.join(", ")}, or ${M}`}}P.length>0&&(T+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(T+="an "),T+=`${P[0]}`;break;case 2:T+=`one of ${P[0]} or ${P[1]}`;break;default:{let M=P.pop();T+=`one of ${P.join(", ")}, or ${M}`}}if(A==null)T+=`. Received ${A}`;else if(typeof A=="function"&&A.name)T+=`. Received function ${A.name}`;else if(typeof A=="object"){var k;if((k=A.constructor)!==null&&k!==void 0&&k.name)T+=`. Received an instance of ${A.constructor.name}`;else{let M=n(A,{depth:-1});T+=`. Received ${M}`}}else{let M=n(A,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),T+=`. Received type ${typeof A} (${M})`}return T},TypeError),y("ERR_INVALID_ARG_VALUE",(S,w,A="is invalid")=>{let T=n(w);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${A}. Received ${T}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(S,w,A)=>{var T;let I=A!=null&&(T=A.constructor)!==null&&T!==void 0&&T.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${S} to be returned from the "${w}" function but got ${I}.`},TypeError),y("ERR_MISSING_ARGS",(...S)=>{h(S.length>0,"At least one arg needs to be specified");let w,A=S.length;switch(S=(Array.isArray(S)?S:[S]).map(T=>`"${T}"`).join(" or "),A){case 1:w+=`The ${S[0]} argument`;break;case 2:w+=`The ${S[0]} and ${S[1]} arguments`;break;default:{let T=S.pop();w+=`The ${S.join(", ")}, and ${T} arguments`}break}return`${w} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(S,w,A)=>{h(w,'Missing "range" argument');let T;if(Number.isInteger(A)&&Math.abs(A)>2**32)T=p(String(A));else if(typeof A=="bigint"){T=String(A);let I=BigInt(2)**BigInt(32);(A>I||A<-I)&&(T=p(T)),T+="n"}else T=n(A);return`The value of "${S}" is out of range. It must be ${w}. Received ${T}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:E,aggregateTwoErrors:b(v),hideStackFrames:b,codes:f}}),Ed=He((r,e)=>{Me(),Fe(),Ne();var{AbortController:t,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t}),el={};Hc(el,{EventEmitter:()=>zB,default:()=>ac,defaultMaxListeners:()=>qB,init:()=>WB,listenerCount:()=>VB,on:()=>QB,once:()=>XB});function vz(){if(Rw)return ld;Rw=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,T,I){return Function.prototype.apply.call(A,T,I)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:t=function(A){return Object.getOwnPropertyNames(A)};function n(A){console&&console.warn&&console.warn(A)}var i=Number.isNaN||function(A){return A!==A};function a(){a.init.call(this)}ld=a,ld.once=E,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");s=A}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function l(A){return A._maxListeners===void 0?a.defaultMaxListeners:A._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(A){for(var T=[],I=1;I<arguments.length;I++)T.push(arguments[I]);var D=A==="error",P=this._events;if(P!==void 0)D=D&&P.error===void 0;else if(!D)return!1;if(D){var k;if(T.length>0&&(k=T[0]),k instanceof Error)throw k;var M=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw M.context=k,M}var B=P[A];if(B===void 0)return!1;if(typeof B=="function")e(B,this,T);else for(var C=B.length,W=y(B,C),I=0;I<C;++I)e(W[I],this,T);return!0};function c(A,T,I,D){var P,k,M;if(o(I),k=A._events,k===void 0?(k=A._events=Object.create(null),A._eventsCount=0):(k.newListener!==void 0&&(A.emit("newListener",T,I.listener?I.listener:I),k=A._events),M=k[T]),M===void 0)M=k[T]=I,++A._eventsCount;else if(typeof M=="function"?M=k[T]=D?[I,M]:[M,I]:D?M.unshift(I):M.push(I),P=l(A),P>0&&M.length>P&&!M.warned){M.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=A,B.type=T,B.count=M.length,n(B)}return A}a.prototype.addListener=function(A,T){return c(this,A,T,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(A,T){return c(this,A,T,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,T,I){var D={fired:!1,wrapFn:void 0,target:A,type:T,listener:I},P=f.bind(D);return P.listener=I,D.wrapFn=P,P}a.prototype.once=function(A,T){return o(T),this.on(A,h(this,A,T)),this},a.prototype.prependOnceListener=function(A,T){return o(T),this.prependListener(A,h(this,A,T)),this},a.prototype.removeListener=function(A,T){var I,D,P,k,M;if(o(T),D=this._events,D===void 0)return this;if(I=D[A],I===void 0)return this;if(I===T||I.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete D[A],D.removeListener&&this.emit("removeListener",A,I.listener||T));else if(typeof I!="function"){for(P=-1,k=I.length-1;k>=0;k--)if(I[k]===T||I[k].listener===T){M=I[k].listener,P=k;break}if(P<0)return this;P===0?I.shift():b(I,P),I.length===1&&(D[A]=I[0]),D.removeListener!==void 0&&this.emit("removeListener",A,M||T)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(A){var T,I,D;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var P=Object.keys(I),k;for(D=0;D<P.length;++D)k=P[D],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=I[A],typeof T=="function")this.removeListener(A,T);else if(T!==void 0)for(D=T.length-1;D>=0;D--)this.removeListener(A,T[D]);return this};function p(A,T,I){var D=A._events;if(D===void 0)return[];var P=D[T];return P===void 0?[]:typeof P=="function"?I?[P.listener||P]:[P]:I?v(P):y(P,P.length)}a.prototype.listeners=function(A){return p(this,A,!0)},a.prototype.rawListeners=function(A){return p(this,A,!1)},a.listenerCount=function(A,T){return typeof A.listenerCount=="function"?A.listenerCount(T):g.call(A,T)},a.prototype.listenerCount=g;function g(A){var T=this._events;if(T!==void 0){var I=T[A];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(A,T){for(var I=new Array(T),D=0;D<T;++D)I[D]=A[D];return I}function b(A,T){for(;T+1<A.length;T++)A[T]=A[T+1];A.pop()}function v(A){for(var T=new Array(A.length),I=0;I<T.length;++I)T[I]=A[I].listener||A[I];return T}function E(A,T){return new Promise(function(I,D){function P(M){A.removeListener(T,k),D(M)}function k(){typeof A.removeListener=="function"&&A.removeListener("error",P),I([].slice.call(arguments))}w(A,T,k,{once:!0}),T!=="error"&&S(A,P,{once:!0})})}function S(A,T,I){typeof A.on=="function"&&w(A,"error",T,I)}function w(A,T,I,D){if(typeof A.on=="function")D.once?A.once(T,I):A.on(T,I);else if(typeof A.addEventListener=="function")A.addEventListener(T,function P(k){D.once&&A.removeEventListener(T,P),I(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return ld}var ld,Rw,ac,zB,qB,WB,VB,QB,XB,iu=ei(()=>{Me(),Fe(),Ne(),ld={},Rw=!1,ac=vz(),ac.once,ac.once=function(r,e){return new Promise((t,n)=>{function i(...s){a!==void 0&&r.removeListener("error",a),t(s)}let a;e!=="error"&&(a=s=>{r.removeListener(name,i),n(s)},r.once("error",a)),r.once(e,i)})},ac.on=function(r,e){let t=[],n=[],i=null,a=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return a?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,o),r.removeListener("error",l),a=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,o),r.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return r.on(e,o),r.on("error",l),s;function o(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function l(c){a=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}},{EventEmitter:zB,defaultMaxListeners:qB,init:WB,listenerCount:VB,on:QB,once:XB}=ac}),Jn=He((r,e)=>{Me(),Fe(),Ne();var t=(en(),qt(Jr)),{format:n,inspect:i}=YB(),{codes:{ERR_INVALID_ARG_TYPE:a}}=kn(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:l}=mr(),c=globalThis.AbortSignal||Ed().AbortSignal,f=globalThis.AbortController||Ed().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||t.Blob,g=typeof p<"u"?function(v){return v instanceof p}:function(v){return!1},y=(v,E)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(E,"AbortSignal",v)},b=(v,E)=>{if(typeof v!="function")throw new a(E,"Function",v)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(v){let E=!1;return function(...S){E||(E=!0,v.apply(this,S))}},createDeferredPromise:function(){let v,E;return{promise:new Promise((S,w)=>{v=S,E=w}),resolve:v,reject:E}},promisify(v){return new Promise((E,S)=>{v((w,...A)=>w?S(w):E(...A))})},debuglog(){return function(){}},format:n,inspect:i,types:{isAsyncFunction(v){return v instanceof h},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:g,deprecate(v,E){return v},addAbortListener:(iu(),qt(el)).addAbortListener||function(v,E){if(v===void 0)throw new a("signal","AbortSignal",v);y(v,"signal"),b(E,"listener");let S;return v.aborted?queueMicrotask(()=>E()):(v.addEventListener("abort",E,{__proto__:null,once:!0,[s]:!0}),S=()=>{v.removeEventListener("abort",E)}),{__proto__:null,[l](){var w;(w=S)===null||w===void 0||w()}}},AbortSignalAny:c.any||function(v){if(v.length===1)return v[0];let E=new f,S=()=>E.abort();return v.forEach(w=>{y(w,"signals"),w.addEventListener("abort",S,{once:!0})}),E.signal.addEventListener("abort",()=>{v.forEach(w=>w.removeEventListener("abort",S))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),eh=He((r,e)=>{Me(),Fe(),Ne();var{ArrayIsArray:t,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:f,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:p,String:g,StringPrototypeToUpperCase:y,StringPrototypeTrim:b}=mr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:T}}=kn(),{normalizeEncoding:I}=Jn(),{isAsyncFunction:D,isArrayBufferView:P}=Jn().types,k={};function M(pe){return pe===(pe|0)}function B(pe){return pe===pe>>>0}var C=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function Y(pe,Be,ze){if(typeof pe>"u"&&(pe=ze),typeof pe=="string"){if(p(C,pe)===null)throw new w(Be,pe,W);pe=f(pe,8)}return z(pe,Be),pe}var q=v((pe,Be,ze=c,De=l)=>{if(typeof pe!="number")throw new S(Be,"number",pe);if(!s(pe))throw new A(Be,"an integer",pe);if(pe<ze||pe>De)throw new A(Be,`>= ${ze} && <= ${De}`,pe)}),$=v((pe,Be,ze=-2147483648,De=2147483647)=>{if(typeof pe!="number")throw new S(Be,"number",pe);if(!s(pe))throw new A(Be,"an integer",pe);if(pe<ze||pe>De)throw new A(Be,`>= ${ze} && <= ${De}`,pe)}),z=v((pe,Be,ze=!1)=>{if(typeof pe!="number")throw new S(Be,"number",pe);if(!s(pe))throw new A(Be,"an integer",pe);let De=ze?1:0,ft=4294967295;if(pe<De||pe>ft)throw new A(Be,`>= ${De} && <= ${ft}`,pe)});function K(pe,Be){if(typeof pe!="string")throw new S(Be,"string",pe)}function Z(pe,Be,ze=void 0,De){if(typeof pe!="number")throw new S(Be,"number",pe);if(ze!=null&&pe<ze||De!=null&&pe>De||(ze!=null||De!=null)&&o(pe))throw new A(Be,`${ze!=null?`>= ${ze}`:""}${ze!=null&&De!=null?" && ":""}${De!=null?`<= ${De}`:""}`,pe)}var X=v((pe,Be,ze)=>{if(!n(ze,pe)){let De="must be one of: "+i(a(ze,ft=>typeof ft=="string"?`'${ft}'`:g(ft)),", ");throw new w(Be,pe,De)}});function H(pe,Be){if(typeof pe!="boolean")throw new S(Be,"boolean",pe)}function G(pe,Be,ze){return pe==null||!h(pe,Be)?ze:pe[Be]}var J=v((pe,Be,ze=null)=>{let De=G(ze,"allowArray",!1),ft=G(ze,"allowFunction",!1);if(!G(ze,"nullable",!1)&&pe===null||!De&&t(pe)||typeof pe!="object"&&(!ft||typeof pe!="function"))throw new S(Be,"Object",pe)}),fe=v((pe,Be)=>{if(pe!=null&&typeof pe!="object"&&typeof pe!="function")throw new S(Be,"a dictionary",pe)}),se=v((pe,Be,ze=0)=>{if(!t(pe))throw new S(Be,"Array",pe);if(pe.length<ze){let De=`must be longer than ${ze}`;throw new w(Be,pe,De)}});function be(pe,Be){se(pe,Be);for(let ze=0;ze<pe.length;ze++)K(pe[ze],`${Be}[${ze}]`)}function oe(pe,Be){se(pe,Be);for(let ze=0;ze<pe.length;ze++)H(pe[ze],`${Be}[${ze}]`)}function re(pe,Be){se(pe,Be);for(let ze=0;ze<pe.length;ze++){let De=pe[ze],ft=`${Be}[${ze}]`;if(De==null)throw new S(ft,"AbortSignal",De);Ce(De,ft)}}function te(pe,Be="signal"){if(K(pe,Be),k[pe]===void 0)throw k[y(pe)]!==void 0?new T(pe+" (signals must use all capital letters)"):new T(pe)}var le=v((pe,Be="buffer")=>{if(!P(pe))throw new S(Be,["Buffer","TypedArray","DataView"],pe)});function ce(pe,Be){let ze=I(Be),De=pe.length;if(ze==="hex"&&De%2!==0)throw new w("encoding",Be,`is invalid for data of length ${De}`)}function ne(pe,Be="Port",ze=!0){if(typeof pe!="number"&&typeof pe!="string"||typeof pe=="string"&&b(pe).length===0||+pe!==+pe>>>0||pe>65535||pe===0&&!ze)throw new E(Be,pe,ze);return pe|0}var Ce=v((pe,Be)=>{if(pe!==void 0&&(pe===null||typeof pe!="object"||!("aborted"in pe)))throw new S(Be,"AbortSignal",pe)}),Se=v((pe,Be)=>{if(typeof pe!="function")throw new S(Be,"Function",pe)}),ie=v((pe,Be)=>{if(typeof pe!="function"||D(pe))throw new S(Be,"Function",pe)}),ae=v((pe,Be)=>{if(pe!==void 0)throw new S(Be,"undefined",pe)});function ye(pe,Be,ze){if(!n(ze,pe))throw new S(Be,`('${i(ze,"|")}')`,pe)}var Ie=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Re(pe,Be){if(typeof pe>"u"||!p(Ie,pe))throw new w(Be,pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ue(pe){if(typeof pe=="string")return Re(pe,"hints"),pe;if(t(pe)){let Be=pe.length,ze="";if(Be===0)return ze;for(let De=0;De<Be;De++){let ft=pe[De];Re(ft,"hints"),ze+=ft,De!==Be-1&&(ze+=", ")}return ze}throw new w("hints",pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:M,isUint32:B,parseFileMode:Y,validateArray:se,validateStringArray:be,validateBooleanArray:oe,validateAbortSignalArray:re,validateBoolean:H,validateBuffer:le,validateDictionary:fe,validateEncoding:ce,validateFunction:Se,validateInt32:$,validateInteger:q,validateNumber:Z,validateObject:J,validateOneOf:X,validatePlainFunction:ie,validatePort:ne,validateSignalName:te,validateString:K,validateUint32:z,validateUndefined:ae,validateUnion:ye,validateAbortSignal:Ce,validateLinkHeaderValue:Ue}}),au=He((r,e)=>{Me(),Fe(),Ne();var t=e.exports={},n,i;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=a}catch{n=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function o(E){if(n===setTimeout)return setTimeout(E,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(E,0);try{return n(E,0)}catch{try{return n.call(null,E,0)}catch{return n.call(this,E,0)}}}function l(E){if(i===clearTimeout)return clearTimeout(E);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{return i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}var c=[],f=!1,h,p=-1;function g(){!f||!h||(f=!1,h.length?c=h.concat(c):p=-1,c.length&&y())}function y(){if(!f){var E=o(g);f=!0;for(var S=c.length;S;){for(h=c,c=[];++p<S;)h&&h[p].run();p=-1,S=c.length}h=null,f=!1,l(E)}}t.nextTick=function(E){var S=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)S[w-1]=arguments[w];c.push(new b(E,S)),c.length===1&&!f&&o(y)};function b(E,S){this.fun=E,this.array=S}b.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function v(){}t.on=v,t.addListener=v,t.once=v,t.off=v,t.removeListener=v,t.removeAllListeners=v,t.emit=v,t.prependListener=v,t.prependOnceListener=v,t.listeners=function(E){return[]},t.binding=function(E){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(E){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),zs=He((r,e)=>{Me(),Fe(),Ne();var{SymbolAsyncIterator:t,SymbolIterator:n,SymbolFor:i}=mr(),a=i("nodejs.stream.destroyed"),s=i("nodejs.stream.errored"),o=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),c=i("nodejs.stream.disturbed"),f=i("nodejs.webstream.isClosedPromise"),h=i("nodejs.webstream.controllerErrorFunction");function p(G,J=!1){var fe;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!J||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((fe=G._readableState)===null||fe===void 0?void 0:fe.readable)!==!1)&&(!G._writableState||G._readableState))}function g(G){var J;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((J=G._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function y(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function b(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!b(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function E(G){return!!(G&&!b(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function S(G){return!!(G&&!b(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function w(G){return v(G)||E(G)||S(G)}function A(G,J){return G==null?!1:J===!0?typeof G[t]=="function":J===!1?typeof G[n]=="function":typeof G[t]=="function"||typeof G[n]=="function"}function T(G){if(!b(G))return null;let J=G._writableState,fe=G._readableState,se=J||fe;return!!(G.destroyed||G[a]||se!=null&&se.destroyed)}function I(G){if(!g(G))return null;if(G.writableEnded===!0)return!0;let J=G._writableState;return J!=null&&J.errored?!1:typeof J?.ended!="boolean"?null:J.ended}function D(G,J){if(!g(G))return null;if(G.writableFinished===!0)return!0;let fe=G._writableState;return fe!=null&&fe.errored?!1:typeof fe?.finished!="boolean"?null:!!(fe.finished||J===!1&&fe.ended===!0&&fe.length===0)}function P(G){if(!p(G))return null;if(G.readableEnded===!0)return!0;let J=G._readableState;return!J||J.errored?!1:typeof J?.ended!="boolean"?null:J.ended}function k(G,J){if(!p(G))return null;let fe=G._readableState;return fe!=null&&fe.errored?!1:typeof fe?.endEmitted!="boolean"?null:!!(fe.endEmitted||J===!1&&fe.ended===!0&&fe.length===0)}function M(G){return G&&G[o]!=null?G[o]:typeof G?.readable!="boolean"?null:T(G)?!1:p(G)&&G.readable&&!k(G)}function B(G){return G&&G[l]!=null?G[l]:typeof G?.writable!="boolean"?null:T(G)?!1:g(G)&&G.writable&&!I(G)}function C(G,J){return b(G)?T(G)?!0:!(J?.readable!==!1&&M(G)||J?.writable!==!1&&B(G)):null}function W(G){var J,fe;return b(G)?G.writableErrored?G.writableErrored:(J=(fe=G._writableState)===null||fe===void 0?void 0:fe.errored)!==null&&J!==void 0?J:null:null}function Y(G){var J,fe;return b(G)?G.readableErrored?G.readableErrored:(J=(fe=G._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&J!==void 0?J:null:null}function q(G){if(!b(G))return null;if(typeof G.closed=="boolean")return G.closed;let J=G._writableState,fe=G._readableState;return typeof J?.closed=="boolean"||typeof fe?.closed=="boolean"?J?.closed||fe?.closed:typeof G._closed=="boolean"&&$(G)?G._closed:null}function $(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function z(G){return typeof G._sent100=="boolean"&&$(G)}function K(G){var J;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((J=G.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function Z(G){if(!b(G))return null;let J=G._writableState,fe=G._readableState,se=J||fe;return!se&&z(G)||!!(se&&se.autoDestroy&&se.emitClose&&se.closed===!1)}function X(G){var J;return!!(G&&((J=G[c])!==null&&J!==void 0?J:G.readableDidRead||G.readableAborted))}function H(G){var J,fe,se,be,oe,re,te,le,ce,ne;return!!(G&&((J=(fe=(se=(be=(oe=(re=G[s])!==null&&re!==void 0?re:G.readableErrored)!==null&&oe!==void 0?oe:G.writableErrored)!==null&&be!==void 0?be:(te=G._readableState)===null||te===void 0?void 0:te.errorEmitted)!==null&&se!==void 0?se:(le=G._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&fe!==void 0?fe:(ce=G._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&J!==void 0?J:!((ne=G._writableState)===null||ne===void 0)&&ne.errored))}e.exports={isDestroyed:T,kIsDestroyed:a,isDisturbed:X,kIsDisturbed:c,isErrored:H,kIsErrored:s,isReadable:M,kIsReadable:o,kIsClosedPromise:f,kControllerErrorFunction:h,kIsWritable:l,isClosed:q,isDuplexNodeStream:y,isFinished:C,isIterable:A,isReadableNodeStream:p,isReadableStream:v,isReadableEnded:P,isReadableFinished:k,isReadableErrored:Y,isNodeStream:b,isWebStream:w,isWritable:B,isWritableNodeStream:g,isWritableStream:E,isWritableEnded:I,isWritableFinished:D,isWritableErrored:W,isServerRequest:K,isServerResponse:z,willEmitClose:Z,isTransformStream:S}}),tl=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{AbortError:n,codes:i}=kn(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:o,once:l}=Jn(),{validateAbortSignal:c,validateFunction:f,validateObject:h,validateBoolean:p}=eh(),{Promise:g,PromisePrototypeThen:y,SymbolDispose:b}=mr(),{isClosed:v,isReadable:E,isReadableNodeStream:S,isReadableStream:w,isReadableFinished:A,isReadableErrored:T,isWritable:I,isWritableNodeStream:D,isWritableStream:P,isWritableFinished:k,isWritableErrored:M,isNodeStream:B,willEmitClose:C,kIsClosedPromise:W}=zs(),Y;function q(X){return X.setHeader&&typeof X.abort=="function"}var $=()=>{};function z(X,H,G){var J,fe;if(arguments.length===2?(G=H,H=o):H==null?H=o:h(H,"options"),f(G,"callback"),c(H.signal,"options.signal"),G=l(G),w(X)||P(X))return K(X,H,G);if(!B(X))throw new a("stream",["ReadableStream","WritableStream","Stream"],X);let se=(J=H.readable)!==null&&J!==void 0?J:S(X),be=(fe=H.writable)!==null&&fe!==void 0?fe:D(X),oe=X._writableState,re=X._readableState,te=()=>{X.writable||ne()},le=C(X)&&S(X)===se&&D(X)===be,ce=k(X,!1),ne=()=>{ce=!0,X.destroyed&&(le=!1),!(le&&(!X.readable||se))&&(!se||Ce)&&G.call(X)},Ce=A(X,!1),Se=()=>{Ce=!0,X.destroyed&&(le=!1),!(le&&(!X.writable||be))&&(!be||ce)&&G.call(X)},ie=pe=>{G.call(X,pe)},ae=v(X),ye=()=>{ae=!0;let pe=M(X)||T(X);if(pe&&typeof pe!="boolean")return G.call(X,pe);if(se&&!Ce&&S(X,!0)&&!A(X,!1))return G.call(X,new s);if(be&&!ce&&!k(X,!1))return G.call(X,new s);G.call(X)},Ie=()=>{ae=!0;let pe=M(X)||T(X);if(pe&&typeof pe!="boolean")return G.call(X,pe);G.call(X)},Re=()=>{X.req.on("finish",ne)};q(X)?(X.on("complete",ne),le||X.on("abort",ye),X.req?Re():X.on("request",Re)):be&&!oe&&(X.on("end",te),X.on("close",te)),!le&&typeof X.aborted=="boolean"&&X.on("aborted",ye),X.on("end",Se),X.on("finish",ne),H.error!==!1&&X.on("error",ie),X.on("close",ye),ae?t.nextTick(ye):oe!=null&&oe.errorEmitted||re!=null&&re.errorEmitted?le||t.nextTick(Ie):(!se&&(!le||E(X))&&(ce||I(X)===!1)||!be&&(!le||I(X))&&(Ce||E(X)===!1)||re&&X.req&&X.aborted)&&t.nextTick(Ie);let Ue=()=>{G=$,X.removeListener("aborted",ye),X.removeListener("complete",ne),X.removeListener("abort",ye),X.removeListener("request",Re),X.req&&X.req.removeListener("finish",ne),X.removeListener("end",te),X.removeListener("close",te),X.removeListener("finish",ne),X.removeListener("end",Se),X.removeListener("error",ie),X.removeListener("close",ye)};if(H.signal&&!ae){let pe=()=>{let Be=G;Ue(),Be.call(X,new n(void 0,{cause:H.signal.reason}))};if(H.signal.aborted)t.nextTick(pe);else{Y=Y||Jn().addAbortListener;let Be=Y(H.signal,pe),ze=G;G=l((...De)=>{Be[b](),ze.apply(X,De)})}}return Ue}function K(X,H,G){let J=!1,fe=$;if(H.signal)if(fe=()=>{J=!0,G.call(X,new n(void 0,{cause:H.signal.reason}))},H.signal.aborted)t.nextTick(fe);else{Y=Y||Jn().addAbortListener;let be=Y(H.signal,fe),oe=G;G=l((...re)=>{be[b](),oe.apply(X,re)})}let se=(...be)=>{J||t.nextTick(()=>G.apply(X,be))};return y(X[W].promise,se,se),$}function Z(X,H){var G;let J=!1;return H===null&&(H=o),(G=H)!==null&&G!==void 0&&G.cleanup&&(p(H.cleanup,"cleanup"),J=H.cleanup),new g((fe,se)=>{let be=z(X,H,oe=>{J&&be(),oe?se(oe):fe()})})}e.exports=z,e.exports.finished=Z}),Gc=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=kn(),{Symbol:s}=mr(),{kIsDestroyed:o,isDestroyed:l,isFinished:c,isServerRequest:f}=zs(),h=s("kDestroy"),p=s("kConstruct");function g(C,W,Y){C&&(C.stack,W&&!W.errored&&(W.errored=C),Y&&!Y.errored&&(Y.errored=C))}function y(C,W){let Y=this._readableState,q=this._writableState,$=q||Y;return q!=null&&q.destroyed||Y!=null&&Y.destroyed?(typeof W=="function"&&W(),this):(g(C,q,Y),q&&(q.destroyed=!0),Y&&(Y.destroyed=!0),$.constructed?b(this,C,W):this.once(h,function(z){b(this,n(z,C),W)}),this)}function b(C,W,Y){let q=!1;function $(z){if(q)return;q=!0;let K=C._readableState,Z=C._writableState;g(z,Z,K),Z&&(Z.closed=!0),K&&(K.closed=!0),typeof Y=="function"&&Y(z),z?t.nextTick(v,C,z):t.nextTick(E,C)}try{C._destroy(W||null,$)}catch(z){$(z)}}function v(C,W){S(C,W),E(C)}function E(C){let W=C._readableState,Y=C._writableState;Y&&(Y.closeEmitted=!0),W&&(W.closeEmitted=!0),(Y!=null&&Y.emitClose||W!=null&&W.emitClose)&&C.emit("close")}function S(C,W){let Y=C._readableState,q=C._writableState;q!=null&&q.errorEmitted||Y!=null&&Y.errorEmitted||(q&&(q.errorEmitted=!0),Y&&(Y.errorEmitted=!0),C.emit("error",W))}function w(){let C=this._readableState,W=this._writableState;C&&(C.constructed=!0,C.closed=!1,C.closeEmitted=!1,C.destroyed=!1,C.errored=null,C.errorEmitted=!1,C.reading=!1,C.ended=C.readable===!1,C.endEmitted=C.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function A(C,W,Y){let q=C._readableState,$=C._writableState;if($!=null&&$.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||$!=null&&$.autoDestroy?C.destroy(W):W&&(W.stack,$&&!$.errored&&($.errored=W),q&&!q.errored&&(q.errored=W),Y?t.nextTick(S,C,W):S(C,W))}function T(C,W){if(typeof C._construct!="function")return;let Y=C._readableState,q=C._writableState;Y&&(Y.constructed=!1),q&&(q.constructed=!1),C.once(p,W),!(C.listenerCount(p)>1)&&t.nextTick(I,C)}function I(C){let W=!1;function Y(q){if(W){A(C,q??new i);return}W=!0;let $=C._readableState,z=C._writableState,K=z||$;$&&($.constructed=!0),z&&(z.constructed=!0),K.destroyed?C.emit(h,q):q?A(C,q,!0):t.nextTick(D,C)}try{C._construct(q=>{t.nextTick(Y,q)})}catch(q){t.nextTick(Y,q)}}function D(C){C.emit(p)}function P(C){return C?.setHeader&&typeof C.abort=="function"}function k(C){C.emit("close")}function M(C,W){C.emit("error",W),t.nextTick(k,C)}function B(C,W){!C||l(C)||(!W&&!c(C)&&(W=new a),f(C)?(C.socket=null,C.destroy(W)):P(C)?C.abort():P(C.req)?C.req.abort():typeof C.destroy=="function"?C.destroy(W):typeof C.close=="function"?C.close():W?t.nextTick(M,C,W):t.nextTick(k,C),C.destroyed||(C[o]=!0))}e.exports={construct:T,destroyer:B,destroy:y,undestroy:w,errorOrDestroy:A}}),n1=He((r,e)=>{Me(),Fe(),Ne();var{ArrayIsArray:t,ObjectSetPrototypeOf:n}=mr(),{EventEmitter:i}=(iu(),qt(el));function a(o){i.call(this,o)}n(a.prototype,i.prototype),n(a,i),a.prototype.pipe=function(o,l){let c=this;function f(E){o.writable&&o.write(E)===!1&&c.pause&&c.pause()}c.on("data",f);function h(){c.readable&&c.resume&&c.resume()}o.on("drain",h),!o._isStdio&&(!l||l.end!==!1)&&(c.on("end",g),c.on("close",y));let p=!1;function g(){p||(p=!0,o.end())}function y(){p||(p=!0,typeof o.destroy=="function"&&o.destroy())}function b(E){v(),i.listenerCount(this,"error")===0&&this.emit("error",E)}s(c,"error",b),s(o,"error",b);function v(){c.removeListener("data",f),o.removeListener("drain",h),c.removeListener("end",g),c.removeListener("close",y),c.removeListener("error",b),o.removeListener("error",b),c.removeListener("end",v),c.removeListener("close",v),o.removeListener("close",v)}return c.on("end",v),c.on("close",v),o.on("close",v),o.emit("pipe",c),o};function s(o,l,c){if(typeof o.prependListener=="function")return o.prependListener(l,c);!o._events||!o._events[l]?o.on(l,c):t(o._events[l])?o._events[l].unshift(c):o._events[l]=[c,o._events[l]]}e.exports={Stream:a,prependListener:s}}),$0=He((r,e)=>{Me(),Fe(),Ne();var{SymbolDispose:t}=mr(),{AbortError:n,codes:i}=kn(),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:o}=zs(),l=tl(),{ERR_INVALID_ARG_TYPE:c}=i,f,h=(p,g)=>{if(typeof p!="object"||!("aborted"in p))throw new c(g,"AbortSignal",p)};e.exports.addAbortSignal=function(p,g){if(h(p,"signal"),!a(g)&&!s(g))throw new c("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(p,g){if(typeof p!="object"||!("aborted"in p))return g;let y=a(g)?()=>{g.destroy(new n(void 0,{cause:p.reason}))}:()=>{g[o](new n(void 0,{cause:p.reason}))};if(p.aborted)y();else{f=f||Jn().addAbortListener;let b=f(p,y);l(g,b[t])}return g}}),bz=He((r,e)=>{Me(),Fe(),Ne();var{StringPrototypeSlice:t,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:a}=mr(),{Buffer:s}=(en(),qt(Jr)),{inspect:o}=Jn();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(l){let c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let c=this.head,f=""+c.data;for(;(c=c.next)!==null;)f+=l+c.data;return f}concat(l){if(this.length===0)return s.alloc(0);let c=s.allocUnsafe(l>>>0),f=this.head,h=0;for(;f;)i(c,f.data,h),h+=f.data.length,f=f.next;return c}consume(l,c){let f=this.head.data;if(l<f.length){let h=f.slice(0,l);return this.head.data=f.slice(l),h}return l===f.length?this.shift():c?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[n](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let c="",f=this.head,h=0;do{let p=f.data;if(l>p.length)c+=p,l-=p.length;else{l===p.length?(c+=p,++h,f.next?this.head=f.next:this.head=this.tail=null):(c+=t(p,0,l),this.head=f,f.data=t(p,l));break}++h}while((f=f.next)!==null);return this.length-=h,c}_getBuffer(l){let c=s.allocUnsafe(l),f=l,h=this.head,p=0;do{let g=h.data;if(l>g.length)i(c,g,f-l),l-=g.length;else{l===g.length?(i(c,g,f-l),++p,h.next?this.head=h.next:this.head=this.tail=null):(i(c,new a(g.buffer,g.byteOffset,l),f-l),this.head=h,h.data=g.slice(l));break}++p}while((h=h.next)!==null);return this.length-=p,c}[Symbol.for("nodejs.util.inspect.custom")](l,c){return o(this,{...c,depth:0,customInspect:!1})}}}),H0=He((r,e)=>{Me(),Fe(),Ne();var{MathFloor:t,NumberIsInteger:n}=mr(),{validateInteger:i}=eh(),{ERR_INVALID_ARG_VALUE:a}=kn().codes,s=16*1024,o=16;function l(p,g,y){return p.highWaterMark!=null?p.highWaterMark:g?p[y]:null}function c(p){return p?o:s}function f(p,g){i(g,"value",0),p?o=g:s=g}function h(p,g,y,b){let v=l(g,b,y);if(v!=null){if(!n(v)||v<0){let E=b?`options.${y}`:"options.highWaterMark";throw new a(E,v)}return t(v)}return c(p.objectMode)}e.exports={getHighWaterMark:h,getDefaultHighWaterMark:c,setDefaultHighWaterMark:f}}),xz=He((r,e)=>{Me(),Fe(),Ne();var t=(en(),qt(Jr)),n=t.Buffer;function i(s,o){for(var l in s)o[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=a);function a(s,o,l){return n(s,o,l)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,o,l)},a.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=n(s);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}}),Sz=He(r=>{Me(),Fe(),Ne();var e=xz().Buffer,t=e.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(S){if(!S)return"utf8";for(var w;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(w)return;S=(""+S).toLowerCase(),w=!0}}function i(S){var w=n(S);if(typeof w!="string"&&(e.isEncoding===t||!t(S)))throw new Error("Unknown encoding: "+S);return w||S}r.StringDecoder=a;function a(S){this.encoding=i(S);var w;switch(this.encoding){case"utf16le":this.text=p,this.end=g,w=4;break;case"utf8":this.fillLast=c,w=4;break;case"base64":this.text=y,this.end=b,w=3;break;default:this.write=v,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}a.prototype.write=function(S){if(S.length===0)return"";var w,A;if(this.lastNeed){if(w=this.fillLast(S),w===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<S.length?w?w+this.text(S,A):this.text(S,A):w||""},a.prototype.end=h,a.prototype.text=f,a.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function s(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function o(S,w,A){var T=w.length-1;if(T<A)return 0;var I=s(w[T]);return I>=0?(I>0&&(S.lastNeed=I-1),I):--T<A||I===-2?0:(I=s(w[T]),I>=0?(I>0&&(S.lastNeed=I-2),I):--T<A||I===-2?0:(I=s(w[T]),I>=0?(I>0&&(I===2?I=0:S.lastNeed=I-3),I):0))}function l(S,w,A){if((w[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return S.lastNeed=2,""}}function c(S){var w=this.lastTotal-this.lastNeed,A=l(this,S);if(A!==void 0)return A;if(this.lastNeed<=S.length)return S.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,w,0,S.length),this.lastNeed-=S.length}function f(S,w){var A=o(this,S,w);if(!this.lastNeed)return S.toString("utf8",w);this.lastTotal=A;var T=S.length-(A-this.lastNeed);return S.copy(this.lastChar,0,T),S.toString("utf8",w,T)}function h(S){var w=S&&S.length?this.write(S):"";return this.lastNeed?w+"":w}function p(S,w){if((S.length-w)%2===0){var A=S.toString("utf16le",w);if(A){var T=A.charCodeAt(A.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",w,S.length-1)}function g(S){var w=S&&S.length?this.write(S):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,A)}return w}function y(S,w){var A=(S.length-w)%3;return A===0?S.toString("base64",w):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",w,S.length-A))}function b(S){var w=S&&S.length?this.write(S):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function v(S){return S.toString(this.encoding)}function E(S){return S&&S.length?this.write(S):""}}),ZB=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:a}=mr(),{Buffer:s}=(en(),qt(Jr)),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:l}=kn().codes;function c(f,h,p){let g;if(typeof h=="string"||h instanceof s)return new f({objectMode:!0,...p,read(){this.push(h),this.push(null)}});let y;if(h&&h[i])y=!0,g=h[i]();else if(h&&h[a])y=!1,g=h[a]();else throw new o("iterable",["Iterable"],h);let b=new f({objectMode:!0,highWaterMark:1,...p}),v=!1;b._read=function(){v||(v=!0,S())},b._destroy=function(w,A){n(E(w),()=>t.nextTick(A,w),T=>t.nextTick(A,T||w))};async function E(w){let A=w!=null,T=typeof g.throw=="function";if(A&&T){let{value:I,done:D}=await g.throw(w);if(await I,D)return}if(typeof g.return=="function"){let{value:I}=await g.return();await I}}async function S(){for(;;){try{let{value:w,done:A}=y?await g.next():g.next();if(A)b.push(null);else{let T=w&&typeof w.then=="function"?await w:w;if(T===null)throw v=!1,new l;if(b.push(T))continue;v=!1}}catch(w){b.destroy(w)}break}}return b}e.exports=c}),G0=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:o,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:f,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:y}=mr();e.exports=De,De.ReadableState=ze;var{EventEmitter:b}=(iu(),qt(el)),{Stream:v,prependListener:E}=n1(),{Buffer:S}=(en(),qt(Jr)),{addAbortSignal:w}=$0(),A=tl(),T=Jn().debuglog("stream",ee=>{T=ee}),I=bz(),D=Gc(),{getHighWaterMark:P,getDefaultHighWaterMark:k}=H0(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:B,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:W,ERR_STREAM_PUSH_AFTER_EOF:Y,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:q},AbortError:$}=kn(),{validateObject:z}=eh(),K=y("kPaused"),{StringDecoder:Z}=Sz(),X=ZB();c(De.prototype,v.prototype),c(De,v);var H=()=>{},{errorOrDestroy:G}=D,J=1,fe=2,se=4,be=8,oe=16,re=32,te=64,le=128,ce=256,ne=512,Ce=1024,Se=2048,ie=4096,ae=8192,ye=16384,Ie=32768,Re=65536,Ue=1<<17,pe=1<<18;function Be(ee){return{enumerable:!1,get(){return(this.state&ee)!==0},set(ue){ue?this.state|=ee:this.state&=~ee}}}o(ze.prototype,{objectMode:Be(J),ended:Be(fe),endEmitted:Be(se),reading:Be(be),constructed:Be(oe),sync:Be(re),needReadable:Be(te),emittedReadable:Be(le),readableListening:Be(ce),resumeScheduled:Be(ne),errorEmitted:Be(Ce),emitClose:Be(Se),autoDestroy:Be(ie),destroyed:Be(ae),closed:Be(ye),closeEmitted:Be(Ie),multiAwaitDrain:Be(Re),readingMore:Be(Ue),dataEmitted:Be(pe)});function ze(ee,ue,qe){typeof qe!="boolean"&&(qe=ue instanceof Ns()),this.state=Se|ie|oe|re,ee&&ee.objectMode&&(this.state|=J),qe&&ee&&ee.readableObjectMode&&(this.state|=J),this.highWaterMark=ee?P(this,ee,"readableHighWaterMark",qe):k(!1),this.buffer=new I,this.length=0,this.pipes=[],this.flowing=null,this[K]=null,ee&&ee.emitClose===!1&&(this.state&=~Se),ee&&ee.autoDestroy===!1&&(this.state&=~ie),this.errored=null,this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ee&&ee.encoding&&(this.decoder=new Z(ee.encoding),this.encoding=ee.encoding)}function De(ee){if(!(this instanceof De))return new De(ee);let ue=this instanceof Ns();this._readableState=new ze(ee,this,ue),ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy),typeof ee.construct=="function"&&(this._construct=ee.construct),ee.signal&&!ue&&w(ee.signal,this)),v.call(this,ee),D.construct(this,()=>{this._readableState.needReadable&&ge(this,this._readableState)})}De.prototype.destroy=D.destroy,De.prototype._undestroy=D.undestroy,De.prototype._destroy=function(ee,ue){ue(ee)},De.prototype[b.captureRejectionSymbol]=function(ee){this.destroy(ee)},De.prototype[p]=function(){let ee;return this.destroyed||(ee=this.readableEnded?null:new $,this.destroy(ee)),new f((ue,qe)=>A(this,Ve=>Ve&&Ve!==ee?qe(Ve):ue(null)))},De.prototype.push=function(ee,ue){return ft(this,ee,ue,!1)},De.prototype.unshift=function(ee,ue){return ft(this,ee,ue,!0)};function ft(ee,ue,qe,Ve){T("readableAddChunk",ue);let Je=ee._readableState,ur;if((Je.state&J)===0&&(typeof ue=="string"?(qe=qe||Je.defaultEncoding,Je.encoding!==qe&&(Ve&&Je.encoding?ue=S.from(ue,qe).toString(Je.encoding):(ue=S.from(ue,qe),qe=""))):ue instanceof S?qe="":v._isUint8Array(ue)?(ue=v._uint8ArrayToBuffer(ue),qe=""):ue!=null&&(ur=new B("chunk",["string","Buffer","Uint8Array"],ue))),ur)G(ee,ur);else if(ue===null)Je.state&=~be,ve(ee,Je);else if((Je.state&J)!==0||ue&&ue.length>0)if(Ve)if((Je.state&se)!==0)G(ee,new q);else{if(Je.destroyed||Je.errored)return!1;R(ee,Je,ue,!0)}else if(Je.ended)G(ee,new Y);else{if(Je.destroyed||Je.errored)return!1;Je.state&=~be,Je.decoder&&!qe?(ue=Je.decoder.write(ue),Je.objectMode||ue.length!==0?R(ee,Je,ue,!1):ge(ee,Je)):R(ee,Je,ue,!1)}else Ve||(Je.state&=~be,ge(ee,Je));return!Je.ended&&(Je.length<Je.highWaterMark||Je.length===0)}function R(ee,ue,qe,Ve){ue.flowing&&ue.length===0&&!ue.sync&&ee.listenerCount("data")>0?((ue.state&Re)!==0?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null,ue.dataEmitted=!0,ee.emit("data",qe)):(ue.length+=ue.objectMode?1:qe.length,Ve?ue.buffer.unshift(qe):ue.buffer.push(qe),(ue.state&te)!==0&&Pe(ee)),ge(ee,ue)}De.prototype.isPaused=function(){let ee=this._readableState;return ee[K]===!0||ee.flowing===!1},De.prototype.setEncoding=function(ee){let ue=new Z(ee);this._readableState.decoder=ue,this._readableState.encoding=this._readableState.decoder.encoding;let qe=this._readableState.buffer,Ve="";for(let Je of qe)Ve+=ue.write(Je);return qe.clear(),Ve!==""&&qe.push(Ve),this._readableState.length=Ve.length,this};var N=1073741824;function V(ee){if(ee>N)throw new W("size","<= 1GiB",ee);return ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++,ee}function de(ee,ue){return ee<=0||ue.length===0&&ue.ended?0:(ue.state&J)!==0?1:a(ee)?ue.flowing&&ue.length?ue.buffer.first().length:ue.length:ee<=ue.length?ee:ue.ended?ue.length:0}De.prototype.read=function(ee){T("read",ee),ee===void 0?ee=NaN:i(ee)||(ee=s(ee,10));let ue=this._readableState,qe=ee;if(ee>ue.highWaterMark&&(ue.highWaterMark=V(ee)),ee!==0&&(ue.state&=~le),ee===0&&ue.needReadable&&((ue.highWaterMark!==0?ue.length>=ue.highWaterMark:ue.length>0)||ue.ended))return T("read: emitReadable",ue.length,ue.ended),ue.length===0&&ue.ended?_n(this):Pe(this),null;if(ee=de(ee,ue),ee===0&&ue.ended)return ue.length===0&&_n(this),null;let Ve=(ue.state&te)!==0;if(T("need readable",Ve),(ue.length===0||ue.length-ee<ue.highWaterMark)&&(Ve=!0,T("length less than watermark",Ve)),ue.ended||ue.reading||ue.destroyed||ue.errored||!ue.constructed)Ve=!1,T("reading, ended or constructing",Ve);else if(Ve){T("do read"),ue.state|=be|re,ue.length===0&&(ue.state|=te);try{this._read(ue.highWaterMark)}catch(ur){G(this,ur)}ue.state&=~re,ue.reading||(ee=de(qe,ue))}let Je;return ee>0?Je=Nn(ee,ue):Je=null,Je===null?(ue.needReadable=ue.length<=ue.highWaterMark,ee=0):(ue.length-=ee,ue.multiAwaitDrain?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null),ue.length===0&&(ue.ended||(ue.needReadable=!0),qe!==ee&&ue.ended&&_n(this)),Je!==null&&!ue.errorEmitted&&!ue.closeEmitted&&(ue.dataEmitted=!0,this.emit("data",Je)),Je};function ve(ee,ue){if(T("onEofChunk"),!ue.ended){if(ue.decoder){let qe=ue.decoder.end();qe&&qe.length&&(ue.buffer.push(qe),ue.length+=ue.objectMode?1:qe.length)}ue.ended=!0,ue.sync?Pe(ee):(ue.needReadable=!1,ue.emittedReadable=!0,We(ee))}}function Pe(ee){let ue=ee._readableState;T("emitReadable",ue.needReadable,ue.emittedReadable),ue.needReadable=!1,ue.emittedReadable||(T("emitReadable",ue.flowing),ue.emittedReadable=!0,t.nextTick(We,ee))}function We(ee){let ue=ee._readableState;T("emitReadable_",ue.destroyed,ue.length,ue.ended),!ue.destroyed&&!ue.errored&&(ue.length||ue.ended)&&(ee.emit("readable"),ue.emittedReadable=!1),ue.needReadable=!ue.flowing&&!ue.ended&&ue.length<=ue.highWaterMark,En(ee)}function ge(ee,ue){!ue.readingMore&&ue.constructed&&(ue.readingMore=!0,t.nextTick(_e,ee,ue))}function _e(ee,ue){for(;!ue.reading&&!ue.ended&&(ue.length<ue.highWaterMark||ue.flowing&&ue.length===0);){let qe=ue.length;if(T("maybeReadMore read 0"),ee.read(0),qe===ue.length)break}ue.readingMore=!1}De.prototype._read=function(ee){throw new C("_read()")},De.prototype.pipe=function(ee,ue){let qe=this,Ve=this._readableState;Ve.pipes.length===1&&(Ve.multiAwaitDrain||(Ve.multiAwaitDrain=!0,Ve.awaitDrainWriters=new h(Ve.awaitDrainWriters?[Ve.awaitDrainWriters]:[]))),Ve.pipes.push(ee),T("pipe count=%d opts=%j",Ve.pipes.length,ue);let Je=(!ue||ue.end!==!1)&&ee!==t.stdout&&ee!==t.stderr?Mr:Qa;Ve.endEmitted?t.nextTick(Je):qe.once("end",Je),ee.on("unpipe",ur);function ur(ni,Tn){T("onunpipe"),ni===qe&&Tn&&Tn.hasUnpiped===!1&&(Tn.hasUnpiped=!0,Bn())}function Mr(){T("onend"),ee.end()}let Fn,no=!1;function Bn(){T("cleanup"),ee.removeListener("close",jn),ee.removeListener("finish",pa),Fn&&ee.removeListener("drain",Fn),ee.removeListener("error",Un),ee.removeListener("unpipe",ur),qe.removeListener("end",Mr),qe.removeListener("end",Qa),qe.removeListener("data",Nr),no=!0,Fn&&Ve.awaitDrainWriters&&(!ee._writableState||ee._writableState.needDrain)&&Fn()}function cr(){no||(Ve.pipes.length===1&&Ve.pipes[0]===ee?(T("false write response, pause",0),Ve.awaitDrainWriters=ee,Ve.multiAwaitDrain=!1):Ve.pipes.length>1&&Ve.pipes.includes(ee)&&(T("false write response, pause",Ve.awaitDrainWriters.size),Ve.awaitDrainWriters.add(ee)),qe.pause()),Fn||(Fn=tt(qe,ee),ee.on("drain",Fn))}qe.on("data",Nr);function Nr(ni){T("ondata");let Tn=ee.write(ni);T("dest.write",Tn),Tn===!1&&cr()}function Un(ni){if(T("onerror",ni),Qa(),ee.removeListener("error",Un),ee.listenerCount("error")===0){let Tn=ee._writableState||ee._readableState;Tn&&!Tn.errorEmitted?G(ee,ni):ee.emit("error",ni)}}E(ee,"error",Un);function jn(){ee.removeListener("finish",pa),Qa()}ee.once("close",jn);function pa(){T("onfinish"),ee.removeListener("close",jn),Qa()}ee.once("finish",pa);function Qa(){T("unpipe"),qe.unpipe(ee)}return ee.emit("pipe",qe),ee.writableNeedDrain===!0?cr():Ve.flowing||(T("pipe resume"),qe.resume()),ee};function tt(ee,ue){return function(){let qe=ee._readableState;qe.awaitDrainWriters===ue?(T("pipeOnDrain",1),qe.awaitDrainWriters=null):qe.multiAwaitDrain&&(T("pipeOnDrain",qe.awaitDrainWriters.size),qe.awaitDrainWriters.delete(ue)),(!qe.awaitDrainWriters||qe.awaitDrainWriters.size===0)&&ee.listenerCount("data")&&ee.resume()}}De.prototype.unpipe=function(ee){let ue=this._readableState,qe={hasUnpiped:!1};if(ue.pipes.length===0)return this;if(!ee){let Je=ue.pipes;ue.pipes=[],this.pause();for(let ur=0;ur<Je.length;ur++)Je[ur].emit("unpipe",this,{hasUnpiped:!1});return this}let Ve=n(ue.pipes,ee);return Ve===-1?this:(ue.pipes.splice(Ve,1),ue.pipes.length===0&&this.pause(),ee.emit("unpipe",this,qe),this)},De.prototype.on=function(ee,ue){let qe=v.prototype.on.call(this,ee,ue),Ve=this._readableState;return ee==="data"?(Ve.readableListening=this.listenerCount("readable")>0,Ve.flowing!==!1&&this.resume()):ee==="readable"&&!Ve.endEmitted&&!Ve.readableListening&&(Ve.readableListening=Ve.needReadable=!0,Ve.flowing=!1,Ve.emittedReadable=!1,T("on readable",Ve.length,Ve.reading),Ve.length?Pe(this):Ve.reading||t.nextTick(ht,this)),qe},De.prototype.addListener=De.prototype.on,De.prototype.removeListener=function(ee,ue){let qe=v.prototype.removeListener.call(this,ee,ue);return ee==="readable"&&t.nextTick(Ze,this),qe},De.prototype.off=De.prototype.removeListener,De.prototype.removeAllListeners=function(ee){let ue=v.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&t.nextTick(Ze,this),ue};function Ze(ee){let ue=ee._readableState;ue.readableListening=ee.listenerCount("readable")>0,ue.resumeScheduled&&ue[K]===!1?ue.flowing=!0:ee.listenerCount("data")>0?ee.resume():ue.readableListening||(ue.flowing=null)}function ht(ee){T("readable nexttick read 0"),ee.read(0)}De.prototype.resume=function(){let ee=this._readableState;return ee.flowing||(T("resume"),ee.flowing=!ee.readableListening,yt(this,ee)),ee[K]=!1,this};function yt(ee,ue){ue.resumeScheduled||(ue.resumeScheduled=!0,t.nextTick(Di,ee,ue))}function Di(ee,ue){T("resume",ue.reading),ue.reading||ee.read(0),ue.resumeScheduled=!1,ee.emit("resume"),En(ee),ue.flowing&&!ue.reading&&ee.read(0)}De.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[K]=!0,this};function En(ee){let ue=ee._readableState;for(T("flow",ue.flowing);ue.flowing&&ee.read()!==null;);}De.prototype.wrap=function(ee){let ue=!1;ee.on("data",Ve=>{!this.push(Ve)&&ee.pause&&(ue=!0,ee.pause())}),ee.on("end",()=>{this.push(null)}),ee.on("error",Ve=>{G(this,Ve)}),ee.on("close",()=>{this.destroy()}),ee.on("destroy",()=>{this.destroy()}),this._read=()=>{ue&&ee.resume&&(ue=!1,ee.resume())};let qe=l(ee);for(let Ve=1;Ve<qe.length;Ve++){let Je=qe[Ve];this[Je]===void 0&&typeof ee[Je]=="function"&&(this[Je]=ee[Je].bind(ee))}return this},De.prototype[g]=function(){return xr(this)},De.prototype.iterator=function(ee){return ee!==void 0&&z(ee,"options"),xr(this,ee)};function xr(ee,ue){typeof ee.read!="function"&&(ee=De.wrap(ee,{objectMode:!0}));let qe=wn(ee,ue);return qe.stream=ee,qe}async function*wn(ee,ue){let qe=H;function Ve(Mr){this===ee?(qe(),qe=H):qe=Mr}ee.on("readable",Ve);let Je,ur=A(ee,{writable:!1},Mr=>{Je=Mr?M(Je,Mr):null,qe(),qe=H});try{for(;;){let Mr=ee.destroyed?null:ee.read();if(Mr!==null)yield Mr;else{if(Je)throw Je;if(Je===null)return;await new f(Ve)}}}catch(Mr){throw Je=M(Je,Mr),Je}finally{(Je||ue?.destroyOnReturn!==!1)&&(Je===void 0||ee._readableState.autoDestroy)?D.destroyer(ee,null):(ee.off("readable",Ve),ur())}}o(De.prototype,{readable:{__proto__:null,get(){let ee=this._readableState;return!!ee&&ee.readable!==!1&&!ee.destroyed&&!ee.errorEmitted&&!ee.endEmitted},set(ee){this._readableState&&(this._readableState.readable=!!ee)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ee){this._readableState&&(this._readableState.destroyed=ee)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(ze.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[K]!==!1},set(ee){this[K]=!!ee}}}),De._fromList=Nn;function Nn(ee,ue){if(ue.length===0)return null;let qe;return ue.objectMode?qe=ue.buffer.shift():!ee||ee>=ue.length?(ue.decoder?qe=ue.buffer.join(""):ue.buffer.length===1?qe=ue.buffer.first():qe=ue.buffer.concat(ue.length),ue.buffer.clear()):qe=ue.buffer.consume(ee,ue.decoder),qe}function _n(ee){let ue=ee._readableState;T("endReadable",ue.endEmitted),ue.endEmitted||(ue.ended=!0,t.nextTick(kr,ue,ee))}function kr(ee,ue){if(T("endReadableNT",ee.endEmitted,ee.length),!ee.errored&&!ee.closeEmitted&&!ee.endEmitted&&ee.length===0){if(ee.endEmitted=!0,ue.emit("end"),ue.writable&&ue.allowHalfOpen===!1)t.nextTick(cu,ue);else if(ee.autoDestroy){let qe=ue._writableState;(!qe||qe.autoDestroy&&(qe.finished||qe.writable===!1))&&ue.destroy()}}}function cu(ee){ee.writable&&!ee.writableEnded&&!ee.destroyed&&ee.end()}De.from=function(ee,ue){return X(De,ee,ue)};var Wa;function Va(){return Wa===void 0&&(Wa={}),Wa}De.fromWeb=function(ee,ue){return Va().newStreamReadableFromReadableStream(ee,ue)},De.toWeb=function(ee,ue){return Va().newReadableStreamFromStreamReadable(ee,ue)},De.wrap=function(ee,ue){var qe,Ve;return new De({objectMode:(qe=(Ve=ee.readableObjectMode)!==null&&Ve!==void 0?Ve:ee.objectMode)!==null&&qe!==void 0?qe:!0,...ue,destroy(Je,ur){D.destroyer(ee,Je),ur(Je)}}).wrap(ee)}}),i1=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:o,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:f,SymbolHasInstance:h}=mr();e.exports=z,z.WritableState=q;var{EventEmitter:p}=(iu(),qt(el)),g=n1().Stream,{Buffer:y}=(en(),qt(Jr)),b=Gc(),{addAbortSignal:v}=$0(),{getHighWaterMark:E,getDefaultHighWaterMark:S}=H0(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:I,ERR_STREAM_DESTROYED:D,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:B}=kn().codes,{errorOrDestroy:C}=b;l(z.prototype,g.prototype),l(z,g);function W(){}var Y=f("kOnFinished");function q(ie,ae,ye){typeof ye!="boolean"&&(ye=ae instanceof Ns()),this.objectMode=!!(ie&&ie.objectMode),ye&&(this.objectMode=this.objectMode||!!(ie&&ie.writableObjectMode)),this.highWaterMark=ie?E(this,ie,"writableHighWaterMark",ye):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Ie=!!(ie&&ie.decodeStrings===!1);this.decodeStrings=!Ie,this.defaultEncoding=ie&&ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,ae),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,$(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ie||ie.emitClose!==!1,this.autoDestroy=!ie||ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Y]=[]}function $(ie){ie.buffered=[],ie.bufferedIndex=0,ie.allBuffers=!0,ie.allNoop=!0}q.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},s(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function z(ie){let ae=this instanceof Ns();if(!ae&&!a(z,this))return new z(ie);this._writableState=new q(ie,this,ae),ie&&(typeof ie.write=="function"&&(this._write=ie.write),typeof ie.writev=="function"&&(this._writev=ie.writev),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.final=="function"&&(this._final=ie.final),typeof ie.construct=="function"&&(this._construct=ie.construct),ie.signal&&v(ie.signal,this)),g.call(this,ie),b.construct(this,()=>{let ye=this._writableState;ye.writing||be(this,ye),le(this,ye)})}s(z,h,{__proto__:null,value:function(ie){return a(this,ie)?!0:this!==z?!1:ie&&ie._writableState instanceof q}}),z.prototype.pipe=function(){C(this,new I)};function K(ie,ae,ye,Ie){let Re=ie._writableState;if(typeof ye=="function")Ie=ye,ye=Re.defaultEncoding;else{if(!ye)ye=Re.defaultEncoding;else if(ye!=="buffer"&&!y.isEncoding(ye))throw new B(ye);typeof Ie!="function"&&(Ie=W)}if(ae===null)throw new k;if(!Re.objectMode)if(typeof ae=="string")Re.decodeStrings!==!1&&(ae=y.from(ae,ye),ye="buffer");else if(ae instanceof y)ye="buffer";else if(g._isUint8Array(ae))ae=g._uint8ArrayToBuffer(ae),ye="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],ae);let Ue;return Re.ending?Ue=new M:Re.destroyed&&(Ue=new D("write")),Ue?(t.nextTick(Ie,Ue),C(ie,Ue,!0),Ue):(Re.pendingcb++,Z(ie,Re,ae,ye,Ie))}z.prototype.write=function(ie,ae,ye){return K(this,ie,ae,ye)===!0},z.prototype.cork=function(){this._writableState.corked++},z.prototype.uncork=function(){let ie=this._writableState;ie.corked&&(ie.corked--,ie.writing||be(this,ie))},z.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=c(ie)),!y.isEncoding(ie))throw new B(ie);return this._writableState.defaultEncoding=ie,this};function Z(ie,ae,ye,Ie,Re){let Ue=ae.objectMode?1:ye.length;ae.length+=Ue;let pe=ae.length<ae.highWaterMark;return pe||(ae.needDrain=!0),ae.writing||ae.corked||ae.errored||!ae.constructed?(ae.buffered.push({chunk:ye,encoding:Ie,callback:Re}),ae.allBuffers&&Ie!=="buffer"&&(ae.allBuffers=!1),ae.allNoop&&Re!==W&&(ae.allNoop=!1)):(ae.writelen=Ue,ae.writecb=Re,ae.writing=!0,ae.sync=!0,ie._write(ye,Ie,ae.onwrite),ae.sync=!1),pe&&!ae.errored&&!ae.destroyed}function X(ie,ae,ye,Ie,Re,Ue,pe){ae.writelen=Ie,ae.writecb=pe,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new D("write")):ye?ie._writev(Re,ae.onwrite):ie._write(Re,Ue,ae.onwrite),ae.sync=!1}function H(ie,ae,ye,Ie){--ae.pendingcb,Ie(ye),se(ae),C(ie,ye)}function G(ie,ae){let ye=ie._writableState,Ie=ye.sync,Re=ye.writecb;if(typeof Re!="function"){C(ie,new T);return}ye.writing=!1,ye.writecb=null,ye.length-=ye.writelen,ye.writelen=0,ae?(ae.stack,ye.errored||(ye.errored=ae),ie._readableState&&!ie._readableState.errored&&(ie._readableState.errored=ae),Ie?t.nextTick(H,ie,ye,ae,Re):H(ie,ye,ae,Re)):(ye.buffered.length>ye.bufferedIndex&&be(ie,ye),Ie?ye.afterWriteTickInfo!==null&&ye.afterWriteTickInfo.cb===Re?ye.afterWriteTickInfo.count++:(ye.afterWriteTickInfo={count:1,cb:Re,stream:ie,state:ye},t.nextTick(J,ye.afterWriteTickInfo)):fe(ie,ye,1,Re))}function J({stream:ie,state:ae,count:ye,cb:Ie}){return ae.afterWriteTickInfo=null,fe(ie,ae,ye,Ie)}function fe(ie,ae,ye,Ie){for(!ae.ending&&!ie.destroyed&&ae.length===0&&ae.needDrain&&(ae.needDrain=!1,ie.emit("drain"));ye-- >0;)ae.pendingcb--,Ie();ae.destroyed&&se(ae),le(ie,ae)}function se(ie){if(ie.writing)return;for(let Re=ie.bufferedIndex;Re<ie.buffered.length;++Re){var ae;let{chunk:Ue,callback:pe}=ie.buffered[Re],Be=ie.objectMode?1:Ue.length;ie.length-=Be,pe((ae=ie.errored)!==null&&ae!==void 0?ae:new D("write"))}let ye=ie[Y].splice(0);for(let Re=0;Re<ye.length;Re++){var Ie;ye[Re]((Ie=ie.errored)!==null&&Ie!==void 0?Ie:new D("end"))}$(ie)}function be(ie,ae){if(ae.corked||ae.bufferProcessing||ae.destroyed||!ae.constructed)return;let{buffered:ye,bufferedIndex:Ie,objectMode:Re}=ae,Ue=ye.length-Ie;if(!Ue)return;let pe=Ie;if(ae.bufferProcessing=!0,Ue>1&&ie._writev){ae.pendingcb-=Ue-1;let Be=ae.allNoop?W:De=>{for(let ft=pe;ft<ye.length;++ft)ye[ft].callback(De)},ze=ae.allNoop&&pe===0?ye:n(ye,pe);ze.allBuffers=ae.allBuffers,X(ie,ae,!0,ae.length,ze,"",Be),$(ae)}else{do{let{chunk:Be,encoding:ze,callback:De}=ye[pe];ye[pe++]=null;let ft=Re?1:Be.length;X(ie,ae,!1,ft,Be,ze,De)}while(pe<ye.length&&!ae.writing);pe===ye.length?$(ae):pe>256?(ye.splice(0,pe),ae.bufferedIndex=0):ae.bufferedIndex=pe}ae.bufferProcessing=!1}z.prototype._write=function(ie,ae,ye){if(this._writev)this._writev([{chunk:ie,encoding:ae}],ye);else throw new A("_write()")},z.prototype._writev=null,z.prototype.end=function(ie,ae,ye){let Ie=this._writableState;typeof ie=="function"?(ye=ie,ie=null,ae=null):typeof ae=="function"&&(ye=ae,ae=null);let Re;if(ie!=null){let Ue=K(this,ie,ae);Ue instanceof i&&(Re=Ue)}return Ie.corked&&(Ie.corked=1,this.uncork()),Re||(!Ie.errored&&!Ie.ending?(Ie.ending=!0,le(this,Ie,!0),Ie.ended=!0):Ie.finished?Re=new P("end"):Ie.destroyed&&(Re=new D("end"))),typeof ye=="function"&&(Re||Ie.finished?t.nextTick(ye,Re):Ie[Y].push(ye)),this};function oe(ie){return ie.ending&&!ie.destroyed&&ie.constructed&&ie.length===0&&!ie.errored&&ie.buffered.length===0&&!ie.finished&&!ie.writing&&!ie.errorEmitted&&!ie.closeEmitted}function re(ie,ae){let ye=!1;function Ie(Re){if(ye){C(ie,Re??T());return}if(ye=!0,ae.pendingcb--,Re){let Ue=ae[Y].splice(0);for(let pe=0;pe<Ue.length;pe++)Ue[pe](Re);C(ie,Re,ae.sync)}else oe(ae)&&(ae.prefinished=!0,ie.emit("prefinish"),ae.pendingcb++,t.nextTick(ce,ie,ae))}ae.sync=!0,ae.pendingcb++;try{ie._final(Ie)}catch(Re){Ie(Re)}ae.sync=!1}function te(ie,ae){!ae.prefinished&&!ae.finalCalled&&(typeof ie._final=="function"&&!ae.destroyed?(ae.finalCalled=!0,re(ie,ae)):(ae.prefinished=!0,ie.emit("prefinish")))}function le(ie,ae,ye){oe(ae)&&(te(ie,ae),ae.pendingcb===0&&(ye?(ae.pendingcb++,t.nextTick((Ie,Re)=>{oe(Re)?ce(Ie,Re):Re.pendingcb--},ie,ae)):oe(ae)&&(ae.pendingcb++,ce(ie,ae))))}function ce(ie,ae){ae.pendingcb--,ae.finished=!0;let ye=ae[Y].splice(0);for(let Ie=0;Ie<ye.length;Ie++)ye[Ie]();if(ie.emit("finish"),ae.autoDestroy){let Ie=ie._readableState;(!Ie||Ie.autoDestroy&&(Ie.endEmitted||Ie.readable===!1))&&ie.destroy()}}o(z.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ie){this._writableState&&(this._writableState.destroyed=ie)}},writable:{__proto__:null,get(){let ie=this._writableState;return!!ie&&ie.writable!==!1&&!ie.destroyed&&!ie.errored&&!ie.ending&&!ie.ended},set(ie){this._writableState&&(this._writableState.writable=!!ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let ie=this._writableState;return ie?!ie.destroyed&&!ie.ending&&ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ne=b.destroy;z.prototype.destroy=function(ie,ae){let ye=this._writableState;return!ye.destroyed&&(ye.bufferedIndex<ye.buffered.length||ye[Y].length)&&t.nextTick(se,ye),ne.call(this,ie,ae),this},z.prototype._undestroy=b.undestroy,z.prototype._destroy=function(ie,ae){ae(ie)},z.prototype[p.captureRejectionSymbol]=function(ie){this.destroy(ie)};var Ce;function Se(){return Ce===void 0&&(Ce={}),Ce}z.fromWeb=function(ie,ae){return Se().newStreamWritableFromWritableStream(ie,ae)},z.toWeb=function(ie){return Se().newWritableStreamFromStreamWritable(ie)}}),Ez=He((r,e)=>{Me(),Fe(),Ne();var t=au(),n=(en(),qt(Jr)),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:o,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:f,isReadableStream:h,isWritableStream:p}=zs(),g=tl(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:v}}=kn(),{destroyer:E}=Gc(),S=Ns(),w=G0(),A=i1(),{createDeferredPromise:T}=Jn(),I=ZB(),D=globalThis.Blob||n.Blob,P=typeof D<"u"?function(Y){return Y instanceof D}:function(Y){return!1},k=globalThis.AbortController||Ed().AbortController,{FunctionPrototypeCall:M}=mr(),B=class extends S{constructor(Y){super(Y),Y?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Y?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function Y(q,$){if(f(q))return q;if(l(q))return W({readable:q});if(c(q))return W({writable:q});if(o(q))return W({writable:!1,readable:!1});if(h(q))return W({readable:w.fromWeb(q)});if(p(q))return W({writable:A.fromWeb(q)});if(typeof q=="function"){let{value:K,write:Z,final:X,destroy:H}=C(q);if(s(K))return I(B,K,{objectMode:!0,write:Z,final:X,destroy:H});let G=K?.then;if(typeof G=="function"){let J,fe=M(G,K,se=>{if(se!=null)throw new v("nully","body",se)},se=>{E(J,se)});return J=new B({objectMode:!0,readable:!1,write:Z,final(se){X(async()=>{try{await fe,t.nextTick(se,null)}catch(be){t.nextTick(se,be)}})},destroy:H})}throw new v("Iterable, AsyncIterable or AsyncFunction",$,K)}if(P(q))return Y(q.arrayBuffer());if(s(q))return I(B,q,{objectMode:!0,writable:!1});if(h(q?.readable)&&p(q?.writable))return B.fromWeb(q);if(typeof q?.writable=="object"||typeof q?.readable=="object"){let K=q!=null&&q.readable?l(q?.readable)?q?.readable:Y(q.readable):void 0,Z=q!=null&&q.writable?c(q?.writable)?q?.writable:Y(q.writable):void 0;return W({readable:K,writable:Z})}let z=q?.then;if(typeof z=="function"){let K;return M(z,q,Z=>{Z!=null&&K.push(Z),K.push(null)},Z=>{E(K,Z)}),K=new B({objectMode:!0,writable:!1,read(){}})}throw new b($,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],q)};function C(Y){let{promise:q,resolve:$}=T(),z=new k,K=z.signal;return{value:Y((async function*(){for(;;){let Z=q;q=null;let{chunk:X,done:H,cb:G}=await Z;if(t.nextTick(G),H)return;if(K.aborted)throw new y(void 0,{cause:K.reason});({promise:q,resolve:$}=T()),yield X}})(),{signal:K}),write(Z,X,H){let G=$;$=null,G({chunk:Z,done:!1,cb:H})},final(Z){let X=$;$=null,X({done:!0,cb:Z})},destroy(Z,X){z.abort(),X(Z)}}}function W(Y){let q=Y.readable&&typeof Y.readable.read!="function"?w.wrap(Y.readable):Y.readable,$=Y.writable,z=!!i(q),K=!!a($),Z,X,H,G,J;function fe(se){let be=G;G=null,be?be(se):se&&J.destroy(se)}return J=new B({readableObjectMode:!!(q!=null&&q.readableObjectMode),writableObjectMode:!!($!=null&&$.writableObjectMode),readable:z,writable:K}),K&&(g($,se=>{K=!1,se&&E(q,se),fe(se)}),J._write=function(se,be,oe){$.write(se,be)?oe():Z=oe},J._final=function(se){$.end(),X=se},$.on("drain",function(){if(Z){let se=Z;Z=null,se()}}),$.on("finish",function(){if(X){let se=X;X=null,se()}})),z&&(g(q,se=>{z=!1,se&&E(q,se),fe(se)}),q.on("readable",function(){if(H){let se=H;H=null,se()}}),q.on("end",function(){J.push(null)}),J._read=function(){for(;;){let se=q.read();if(se===null){H=J._read;return}if(!J.push(se))return}}),J._destroy=function(se,be){!se&&G!==null&&(se=new y),H=null,Z=null,X=null,G===null?be(se):(G=be,E($,se),E(q,se))},J}}),Ns=He((r,e)=>{Me(),Fe(),Ne();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:a}=mr();e.exports=l;var s=G0(),o=i1();a(l.prototype,s.prototype),a(l,s);{let p=i(o.prototype);for(let g=0;g<p.length;g++){let y=p[g];l.prototype[y]||(l.prototype[y]=o.prototype[y])}}function l(p){if(!(this instanceof l))return new l(p);s.call(this,p),o.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(l.prototype,{writable:{__proto__:null,...n(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(o.prototype,"writableLength")},writableFinished:{__proto__:null,...n(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var c;function f(){return c===void 0&&(c={}),c}l.fromWeb=function(p,g){return f().newStreamDuplexFromReadableWritablePair(p,g)},l.toWeb=function(p){return f().newReadableWritablePairFromDuplex(p)};var h;l.from=function(p){return h||(h=Ez()),h(p,"body")}}),JB=He((r,e)=>{Me(),Fe(),Ne();var{ObjectSetPrototypeOf:t,Symbol:n}=mr();e.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:i}=kn().codes,a=Ns(),{getHighWaterMark:s}=H0();t(l.prototype,a.prototype),t(l,a);var o=n("kCallback");function l(h){if(!(this instanceof l))return new l(h);let p=h?s(this,h,"readableHighWaterMark",!0):null;p===0&&(h={...h,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:h.writableHighWaterMark||0}),a.call(this,h),this._readableState.sync=!1,this[o]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",f)}function c(h){typeof this._flush=="function"&&!this.destroyed?this._flush((p,g)=>{if(p){h?h(p):this.destroy(p);return}g!=null&&this.push(g),this.push(null),h&&h()}):(this.push(null),h&&h())}function f(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(h,p,g){throw new i("_transform()")},l.prototype._write=function(h,p,g){let y=this._readableState,b=this._writableState,v=y.length;this._transform(h,p,(E,S)=>{if(E){g(E);return}S!=null&&this.push(S),b.ended||v===y.length||y.length<y.highWaterMark?g():this[o]=g})},l.prototype._read=function(){if(this[o]){let h=this[o];this[o]=null,h()}}}),eU=He((r,e)=>{Me(),Fe(),Ne();var{ObjectSetPrototypeOf:t}=mr();e.exports=i;var n=JB();t(i.prototype,n.prototype),t(i,n);function i(a){if(!(this instanceof i))return new i(a);n.call(this,a)}i.prototype._transform=function(a,s,o){o(null,a)}}),a1=He((r,e)=>{Me(),Fe(),Ne();var t=au(),{ArrayIsArray:n,Promise:i,SymbolAsyncIterator:a,SymbolDispose:s}=mr(),o=tl(),{once:l}=Jn(),c=Gc(),f=Ns(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:E}=kn(),{validateFunction:S,validateAbortSignal:w}=eh(),{isIterable:A,isReadable:T,isReadableNodeStream:I,isNodeStream:D,isTransformStream:P,isWebStream:k,isReadableStream:M,isReadableFinished:B}=zs(),C=globalThis.AbortController||Ed().AbortController,W,Y,q;function $(se,be,oe){let re=!1;se.on("close",()=>{re=!0});let te=o(se,{readable:be,writable:oe},le=>{re=!le});return{destroy:le=>{re||(re=!0,c.destroyer(se,le||new b("pipe")))},cleanup:te}}function z(se){return S(se[se.length-1],"streams[stream.length - 1]"),se.pop()}function K(se){if(A(se))return se;if(I(se))return Z(se);throw new p("val",["Readable","Iterable","AsyncIterable"],se)}async function*Z(se){Y||(Y=G0()),yield*Y.prototype[a].call(se)}async function X(se,be,oe,{end:re}){let te,le=null,ce=Se=>{if(Se&&(te=Se),le){let ie=le;le=null,ie()}},ne=()=>new i((Se,ie)=>{te?ie(te):le=()=>{te?ie(te):Se()}});be.on("drain",ce);let Ce=o(be,{readable:!1},ce);try{be.writableNeedDrain&&await ne();for await(let Se of se)be.write(Se)||await ne();re&&(be.end(),await ne()),oe()}catch(Se){oe(te!==Se?h(te,Se):Se)}finally{Ce(),be.off("drain",ce)}}async function H(se,be,oe,{end:re}){P(be)&&(be=be.writable);let te=be.getWriter();try{for await(let le of se)await te.ready,te.write(le).catch(()=>{});await te.ready,re&&await te.close(),oe()}catch(le){try{await te.abort(le),oe(le)}catch(ce){oe(ce)}}}function G(...se){return J(se,l(z(se)))}function J(se,be,oe){if(se.length===1&&n(se[0])&&(se=se[0]),se.length<2)throw new y("streams");let re=new C,te=re.signal,le=oe?.signal,ce=[];w(le,"options.signal");function ne(){Re(new E)}q=q||Jn().addAbortListener;let Ce;le&&(Ce=q(le,ne));let Se,ie,ae=[],ye=0;function Ie(ze){Re(ze,--ye===0)}function Re(ze,De){var ft;if(ze&&(!Se||Se.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Se=ze),!(!Se&&!De)){for(;ae.length;)ae.shift()(Se);(ft=Ce)===null||ft===void 0||ft[s](),re.abort(),De&&(Se||ce.forEach(R=>R()),t.nextTick(be,Se,ie))}}let Ue;for(let ze=0;ze<se.length;ze++){let De=se[ze],ft=ze<se.length-1,R=ze>0,N=ft||oe?.end!==!1,V=ze===se.length-1;if(D(De)){let de=function(ve){ve&&ve.name!=="AbortError"&&ve.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ie(ve)};if(N){let{destroy:ve,cleanup:Pe}=$(De,ft,R);ae.push(ve),T(De)&&V&&ce.push(Pe)}De.on("error",de),T(De)&&V&&ce.push(()=>{De.removeListener("error",de)})}if(ze===0)if(typeof De=="function"){if(Ue=De({signal:te}),!A(Ue))throw new g("Iterable, AsyncIterable or Stream","source",Ue)}else A(De)||I(De)||P(De)?Ue=De:Ue=f.from(De);else if(typeof De=="function"){if(P(Ue)){var pe;Ue=K((pe=Ue)===null||pe===void 0?void 0:pe.readable)}else Ue=K(Ue);if(Ue=De(Ue,{signal:te}),ft){if(!A(Ue,!0))throw new g("AsyncIterable",`transform[${ze-1}]`,Ue)}else{var Be;W||(W=eU());let de=new W({objectMode:!0}),ve=(Be=Ue)===null||Be===void 0?void 0:Be.then;if(typeof ve=="function")ye++,ve.call(Ue,ge=>{ie=ge,ge!=null&&de.write(ge),N&&de.end(),t.nextTick(Ie)},ge=>{de.destroy(ge),t.nextTick(Ie,ge)});else if(A(Ue,!0))ye++,X(Ue,de,Ie,{end:N});else if(M(Ue)||P(Ue)){let ge=Ue.readable||Ue;ye++,X(ge,de,Ie,{end:N})}else throw new g("AsyncIterable or Promise","destination",Ue);Ue=de;let{destroy:Pe,cleanup:We}=$(Ue,!1,!0);ae.push(Pe),V&&ce.push(We)}}else if(D(De)){if(I(Ue)){ye+=2;let de=fe(Ue,De,Ie,{end:N});T(De)&&V&&ce.push(de)}else if(P(Ue)||M(Ue)){let de=Ue.readable||Ue;ye++,X(de,De,Ie,{end:N})}else if(A(Ue))ye++,X(Ue,De,Ie,{end:N});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ue);Ue=De}else if(k(De)){if(I(Ue))ye++,H(K(Ue),De,Ie,{end:N});else if(M(Ue)||A(Ue))ye++,H(Ue,De,Ie,{end:N});else if(P(Ue))ye++,H(Ue.readable,De,Ie,{end:N});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ue);Ue=De}else Ue=f.from(De)}return(te!=null&&te.aborted||le!=null&&le.aborted)&&t.nextTick(ne),Ue}function fe(se,be,oe,{end:re}){let te=!1;if(be.on("close",()=>{te||oe(new v)}),se.pipe(be,{end:!1}),re){let le=function(){te=!0,be.end()};B(se)?t.nextTick(le):se.once("end",le)}else oe();return o(se,{readable:!0,writable:!1},le=>{let ce=se._readableState;le&&le.code==="ERR_STREAM_PREMATURE_CLOSE"&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?se.once("end",oe).once("error",oe):oe(le)}),o(be,{readable:!1,writable:!0},oe)}e.exports={pipelineImpl:J,pipeline:G}}),tU=He((r,e)=>{Me(),Fe(),Ne();var{pipeline:t}=a1(),n=Ns(),{destroyer:i}=Gc(),{isNodeStream:a,isReadable:s,isWritable:o,isWebStream:l,isTransformStream:c,isWritableStream:f,isReadableStream:h}=zs(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:y}}=kn(),b=tl();e.exports=function(...v){if(v.length===0)throw new y("streams");if(v.length===1)return n.from(v[0]);let E=[...v];if(typeof v[0]=="function"&&(v[0]=n.from(v[0])),typeof v[v.length-1]=="function"){let C=v.length-1;v[C]=n.from(v[C])}for(let C=0;C<v.length;++C)if(!(!a(v[C])&&!l(v[C]))){if(C<v.length-1&&!(s(v[C])||h(v[C])||c(v[C])))throw new g(`streams[${C}]`,E[C],"must be readable");if(C>0&&!(o(v[C])||f(v[C])||c(v[C])))throw new g(`streams[${C}]`,E[C],"must be writable")}let S,w,A,T,I;function D(C){let W=T;T=null,W?W(C):C?I.destroy(C):!B&&!M&&I.destroy()}let P=v[0],k=t(v,D),M=!!(o(P)||f(P)||c(P)),B=!!(s(k)||h(k)||c(k));if(I=new n({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(k!=null&&k.readableObjectMode),writable:M,readable:B}),M){if(a(P))I._write=function(W,Y,q){P.write(W,Y)?q():S=q},I._final=function(W){P.end(),w=W},P.on("drain",function(){if(S){let W=S;S=null,W()}});else if(l(P)){let W=(c(P)?P.writable:P).getWriter();I._write=async function(Y,q,$){try{await W.ready,W.write(Y).catch(()=>{}),$()}catch(z){$(z)}},I._final=async function(Y){try{await W.ready,W.close().catch(()=>{}),w=Y}catch(q){Y(q)}}}let C=c(k)?k.readable:k;b(C,()=>{if(w){let W=w;w=null,W()}})}if(B){if(a(k))k.on("readable",function(){if(A){let C=A;A=null,C()}}),k.on("end",function(){I.push(null)}),I._read=function(){for(;;){let C=k.read();if(C===null){A=I._read;return}if(!I.push(C))return}};else if(l(k)){let C=(c(k)?k.readable:k).getReader();I._read=async function(){for(;;)try{let{value:W,done:Y}=await C.read();if(!I.push(W))return;if(Y){I.push(null);return}}catch{return}}}}return I._destroy=function(C,W){!C&&T!==null&&(C=new p),A=null,S=null,w=null,T===null?W(C):(T=W,a(k)&&i(k,C))},I}}),wz=He((r,e)=>{Me(),Fe(),Ne();var t=globalThis.AbortController||Ed().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:o}=kn(),{validateAbortSignal:l,validateInteger:c,validateObject:f}=eh(),h=mr().Symbol("kWeak"),p=mr().Symbol("kResistStopPropagation"),{finished:g}=tl(),y=tU(),{addAbortSignalNoValidate:b}=$0(),{isWritable:v,isNodeStream:E}=zs(),{deprecate:S}=Jn(),{ArrayPrototypePush:w,Boolean:A,MathFloor:T,Number:I,NumberIsNaN:D,Promise:P,PromiseReject:k,PromiseResolve:M,PromisePrototypeThen:B,Symbol:C}=mr(),W=C("kEmpty"),Y=C("kEof");function q(le,ce){if(ce!=null&&f(ce,"options"),ce?.signal!=null&&l(ce.signal,"options.signal"),E(le)&&!v(le))throw new n("stream",le,"must be writable");let ne=y(this,le);return ce!=null&&ce.signal&&b(ce.signal,ne),ne}function $(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);ce!=null&&f(ce,"options"),ce?.signal!=null&&l(ce.signal,"options.signal");let ne=1;ce?.concurrency!=null&&(ne=T(ce.concurrency));let Ce=ne-1;return ce?.highWaterMark!=null&&(Ce=T(ce.highWaterMark)),c(ne,"options.concurrency",1),c(Ce,"options.highWaterMark",0),Ce+=ne,(async function*(){let Se=Jn().AbortSignalAny([ce?.signal].filter(A)),ie=this,ae=[],ye={signal:Se},Ie,Re,Ue=!1,pe=0;function Be(){Ue=!0,ze()}function ze(){pe-=1,De()}function De(){Re&&!Ue&&pe<ne&&ae.length<Ce&&(Re(),Re=null)}async function ft(){try{for await(let R of ie){if(Ue)return;if(Se.aborted)throw new o;try{if(R=le(R,ye),R===W)continue;R=M(R)}catch(N){R=k(N)}pe+=1,B(R,ze,Be),ae.push(R),Ie&&(Ie(),Ie=null),!Ue&&(ae.length>=Ce||pe>=ne)&&await new P(N=>{Re=N})}ae.push(Y)}catch(R){let N=k(R);B(N,ze,Be),ae.push(N)}finally{Ue=!0,Ie&&(Ie(),Ie=null)}}ft();try{for(;;){for(;ae.length>0;){let R=await ae[0];if(R===Y)return;if(Se.aborted)throw new o;R!==W&&(yield R),ae.shift(),De()}await new P(R=>{Ie=R})}}finally{Ue=!0,Re&&(Re(),Re=null)}}).call(this)}function z(le=void 0){return le!=null&&f(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),(async function*(){let ce=0;for await(let Ce of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o({cause:le.signal.reason});yield[ce++,Ce]}}).call(this)}async function K(le,ce=void 0){for await(let ne of G.call(this,le,ce))return!0;return!1}async function Z(le,ce=void 0){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);return!await K.call(this,async(...ne)=>!await le(...ne),ce)}async function X(le,ce){for await(let ne of G.call(this,le,ce))return ne}async function H(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Ce,Se){return await le(Ce,Se),W}for await(let Ce of $.call(this,ne,ce));}function G(le,ce){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function ne(Ce,Se){return await le(Ce,Se)?Ce:W}return $.call(this,ne,ce)}var J=class extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function fe(le,ce,ne){var Ce;if(typeof le!="function")throw new i("reducer",["Function","AsyncFunction"],le);ne!=null&&f(ne,"options"),ne?.signal!=null&&l(ne.signal,"options.signal");let Se=arguments.length>1;if(ne!=null&&(Ce=ne.signal)!==null&&Ce!==void 0&&Ce.aborted){let Re=new o(void 0,{cause:ne.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(Re)),Re}let ie=new t,ae=ie.signal;if(ne!=null&&ne.signal){let Re={once:!0,[h]:this,[p]:!0};ne.signal.addEventListener("abort",()=>ie.abort(),Re)}let ye=!1;try{for await(let Re of this){var Ie;if(ye=!0,ne!=null&&(Ie=ne.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new o;Se?ce=await le(ce,Re,{signal:ae}):(ce=Re,Se=!0)}if(!ye&&!Se)throw new J}finally{ie.abort()}return ce}async function se(le){le!=null&&f(le,"options"),le?.signal!=null&&l(le.signal,"options.signal");let ce=[];for await(let Ce of this){var ne;if(le!=null&&(ne=le.signal)!==null&&ne!==void 0&&ne.aborted)throw new o(void 0,{cause:le.signal.reason});w(ce,Ce)}return ce}function be(le,ce){let ne=$.call(this,le,ce);return(async function*(){for await(let Ce of ne)yield*Ce}).call(this)}function oe(le){if(le=I(le),D(le))return 0;if(le<0)throw new s("number",">= 0",le);return le}function re(le,ce=void 0){return ce!=null&&f(ce,"options"),ce?.signal!=null&&l(ce.signal,"options.signal"),le=oe(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let Se of this){var Ce;if(ce!=null&&(Ce=ce.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new o;le--<=0&&(yield Se)}}).call(this)}function te(le,ce=void 0){return ce!=null&&f(ce,"options"),ce?.signal!=null&&l(ce.signal,"options.signal"),le=oe(le),(async function*(){var ne;if(ce!=null&&(ne=ce.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(let Se of this){var Ce;if(ce!=null&&(Ce=ce.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new o;if(le-- >0&&(yield Se),le<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:S(z,"readable.asIndexedPairs will be removed in a future version."),drop:re,filter:G,flatMap:be,map:$,take:te,compose:q},e.exports.promiseReturningOperators={every:Z,forEach:H,reduce:fe,toArray:se,some:K,find:X}}),rU=He((r,e)=>{Me(),Fe(),Ne();var{ArrayPrototypePop:t,Promise:n}=mr(),{isIterable:i,isNodeStream:a,isWebStream:s}=zs(),{pipelineImpl:o}=a1(),{finished:l}=tl();nU();function c(...f){return new n((h,p)=>{let g,y,b=f[f.length-1];if(b&&typeof b=="object"&&!a(b)&&!i(b)&&!s(b)){let v=t(f);g=v.signal,y=v.end}o(f,(v,E)=>{v?p(v):h(E)},{signal:g,end:y})})}e.exports={finished:l,pipeline:c}}),nU=He((r,e)=>{Me(),Fe(),Ne();var{Buffer:t}=(en(),qt(Jr)),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:a}=mr(),{promisify:{custom:s}}=Jn(),{streamReturningOperators:o,promiseReturningOperators:l}=wz(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=kn(),f=tU(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:p}=H0(),{pipeline:g}=a1(),{destroyer:y}=Gc(),b=tl(),v=rU(),E=zs(),S=e.exports=n1().Stream;S.isDestroyed=E.isDestroyed,S.isDisturbed=E.isDisturbed,S.isErrored=E.isErrored,S.isReadable=E.isReadable,S.isWritable=E.isWritable,S.Readable=G0();for(let A of i(o)){let T=function(...D){if(new.target)throw c();return S.Readable.from(a(I,this,D))},I=o[A];n(T,"name",{__proto__:null,value:I.name}),n(T,"length",{__proto__:null,value:I.length}),n(S.Readable.prototype,A,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let A of i(l)){let T=function(...D){if(new.target)throw c();return a(I,this,D)},I=l[A];n(T,"name",{__proto__:null,value:I.name}),n(T,"length",{__proto__:null,value:I.length}),n(S.Readable.prototype,A,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}S.Writable=i1(),S.Duplex=Ns(),S.Transform=JB(),S.PassThrough=eU(),S.pipeline=g;var{addAbortSignal:w}=$0();S.addAbortSignal=w,S.finished=b,S.destroy=y,S.compose=f,S.setDefaultHighWaterMark=h,S.getDefaultHighWaterMark=p,n(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),n(g,s,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),n(b,s,{__proto__:null,enumerable:!0,get(){return v.finished}}),S.Stream=S,S._isUint8Array=function(A){return A instanceof Uint8Array},S._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)}}),su=He((r,e)=>{Me(),Fe(),Ne();var t=nU(),n=rU(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),_z=He((r,e)=>{Me(),Fe(),Ne(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),Tz=He((r,e)=>{Me(),Fe(),Ne();var{Buffer:t}=(en(),qt(Jr)),n=Symbol.for("BufferList");function i(a){if(!(this instanceof i))return new i(a);i._init.call(this,a)}i._init=function(a){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},i.prototype._new=function(a){return new i(a)},i.prototype._offset=function(a){if(a===0)return[0,0];let s=0;for(let o=0;o<this._bufs.length;o++){let l=s+this._bufs[o].length;if(a<l||o===this._bufs.length-1)return[o,a-s];s=l}},i.prototype._reverseOffset=function(a){let s=a[0],o=a[1];for(let l=0;l<s;l++)o+=this._bufs[l].length;return o},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(a){if(a>this.length||a<0)return;let s=this._offset(a);return this._bufs[s[0]][s[1]]},i.prototype.slice=function(a,s){return typeof a=="number"&&a<0&&(a+=this.length),typeof s=="number"&&s<0&&(s+=this.length),this.copy(null,0,a,s)},i.prototype.copy=function(a,s,o,l){if((typeof o!="number"||o<0)&&(o=0),(typeof l!="number"||l>this.length)&&(l=this.length),o>=this.length||l<=0)return a||t.alloc(0);let c=!!a,f=this._offset(o),h=l-o,p=h,g=c&&s||0,y=f[1];if(o===0&&l===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let b=0;b<this._bufs.length;b++)this._bufs[b].copy(a,g),g+=this._bufs[b].length;return a}if(p<=this._bufs[f[0]].length-y)return c?this._bufs[f[0]].copy(a,s,y,y+p):this._bufs[f[0]].slice(y,y+p);c||(a=t.allocUnsafe(h));for(let b=f[0];b<this._bufs.length;b++){let v=this._bufs[b].length-y;if(p>v)this._bufs[b].copy(a,g,y),g+=v;else{this._bufs[b].copy(a,g,y,y+p),g+=v;break}p-=v,y&&(y=0)}return a.length>g?a.slice(0,g):a},i.prototype.shallowSlice=function(a,s){if(a=a||0,s=typeof s!="number"?this.length:s,a<0&&(a+=this.length),s<0&&(s+=this.length),a===s)return this._new();let o=this._offset(a),l=this._offset(s),c=this._bufs.slice(o[0],l[0]+1);return l[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,l[1]),o[1]!==0&&(c[0]=c[0].slice(o[1])),this._new(c)},i.prototype.toString=function(a,s,o){return this.slice(s,o).toString(a)},i.prototype.consume=function(a){if(a=Math.trunc(a),Number.isNaN(a)||a<=0)return this;for(;this._bufs.length;)if(a>=this._bufs[0].length)a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}return this},i.prototype.duplicate=function(){let a=this._new();for(let s=0;s<this._bufs.length;s++)a.append(this._bufs[s]);return a},i.prototype.append=function(a){return this._attach(a,i.prototype._appendBuffer)},i.prototype.prepend=function(a){return this._attach(a,i.prototype._prependBuffer,!0)},i.prototype._attach=function(a,s,o){if(a==null)return this;if(a.buffer)s.call(this,t.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a)){let[l,c]=o?[a.length-1,-1]:[0,1];for(let f=l;f>=0&&f<a.length;f+=c)this._attach(a[f],s,o)}else if(this._isBufferList(a)){let[l,c]=o?[a._bufs.length-1,-1]:[0,1];for(let f=l;f>=0&&f<a._bufs.length;f+=c)this._attach(a._bufs[f],s,o)}else typeof a=="number"&&(a=a.toString()),s.call(this,t.from(a));return this},i.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},i.prototype._prependBuffer=function(a){this._bufs.unshift(a),this.length+=a.length},i.prototype.indexOf=function(a,s,o){if(o===void 0&&typeof s=="string"&&(o=s,s=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=t.from([a]):typeof a=="string"?a=t.from(a,o):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=t.from(a.buffer,a.byteOffset,a.byteLength):t.isBuffer(a)||(a=t.from(a)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),a.length===0)return s>this.length?this.length:s;let l=this._offset(s),c=l[0],f=l[1];for(;c<this._bufs.length;c++){let h=this._bufs[c];for(;f<h.length;)if(h.length-f>=a.length){let p=h.indexOf(a,f);if(p!==-1)return this._reverseOffset([c,p]);f=h.length-a.length+1}else{let p=this._reverseOffset([c,f]);if(this._match(p,a))return p;f++}f=0}return-1},i.prototype._match=function(a,s){if(this.length-a<s.length)return!1;for(let o=0;o<s.length;o++)if(this.get(a+o)!==s[o])return!1;return!0},(function(){let a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let s in a)(function(o){a[o]===null?i.prototype[o]=function(l,c){return this.slice(l,l+c)[o](0,c)}:i.prototype[o]=function(l=0){return this.slice(l,l+a[o])[o](0)}})(s)})(),i.prototype._isBufferList=function(a){return a instanceof i||i.isBufferList(a)},i.isBufferList=function(a){return a!=null&&a[n]},e.exports=i}),Az=He((r,e)=>{Me(),Fe(),Ne();var t=su().Duplex,n=_z(),i=Tz();function a(s){if(!(this instanceof a))return new a(s);if(typeof s=="function"){this._callback=s;let o=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",o)}),this.on("unpipe",function(l){l.removeListener("error",o)}),s=null}i._init.call(this,s),t.call(this)}n(a,t),Object.assign(a.prototype,i.prototype),a.prototype._new=function(s){return new a(s)},a.prototype._write=function(s,o,l){this._appendBuffer(s),typeof l=="function"&&l()},a.prototype._read=function(s){if(!this.length)return this.push(null);s=Math.min(s,this.length),this.push(this.slice(0,s)),this.consume(s)},a.prototype.end=function(s){t.prototype.end.call(this,s),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(s,o){this._bufs.length=0,this.length=0,o(s)},a.prototype._isBufferList=function(s){return s instanceof a||s instanceof i||a.isBufferList(s)},a.isBufferList=i.isBufferList,e.exports=a,e.exports.BufferListStream=a,e.exports.BufferList=i}),Dz=He((r,e)=>{Me(),Fe(),Ne();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),iU=He((r,e)=>{Me(),Fe(),Ne();var t=e.exports,{Buffer:n}=(en(),qt(Jr));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let a in t.requiredHeaderFlags){let s=t.requiredHeaderFlags[a];t.requiredHeaderFlagsErrors[a]="Invalid header flag bits, must be 0x"+s.toString(16)+" for "+t.types[a]+" packet"}t.codes={};for(let a in t.types){let s=t.types[a];t.codes[s]=a}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=n.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=n.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=n.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let a in t.properties){let s=t.properties[a];t.propertiesCodes[s]=a}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function i(a){return[0,1,2].map(s=>[0,1].map(o=>[0,1].map(l=>{let c=n.alloc(1);return c.writeUInt8(t.codes[a]<<t.CMD_SHIFT|(o?t.DUP_MASK:0)|s<<t.QOS_SHIFT|l,0,!0),c})))}t.PUBLISH_HEADER=i("publish"),t.SUBSCRIBE_HEADER=i("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=i("unsubscribe"),t.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},t.SUBACK_HEADER=n.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=n.from([3]),t.VERSION4=n.from([4]),t.VERSION5=n.from([5]),t.VERSION131=n.from([131]),t.VERSION132=n.from([132]),t.QOS=[0,1,2].map(a=>n.from([a])),t.EMPTY={pingreq:n.from([t.codes.pingreq<<4,0]),pingresp:n.from([t.codes.pingresp<<4,0]),disconnect:n.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Oz=He((r,e)=>{Me(),Fe(),Ne();var t=1e3,n=t*60,i=n*60,a=i*24,s=a*7,o=a*365.25;e.exports=function(p,g){g=g||{};var y=typeof p;if(y==="string"&&p.length>0)return l(p);if(y==="number"&&isFinite(p))return g.long?f(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function l(p){if(p=String(p),!(p.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var y=parseFloat(g[1]),b=(g[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return y*o;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*a;case"hours":case"hour":case"hrs":case"hr":case"h":return y*i;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(p){var g=Math.abs(p);return g>=a?Math.round(p/a)+"d":g>=i?Math.round(p/i)+"h":g>=n?Math.round(p/n)+"m":g>=t?Math.round(p/t)+"s":p+"ms"}function f(p){var g=Math.abs(p);return g>=a?h(p,g,a,"day"):g>=i?h(p,g,i,"hour"):g>=n?h(p,g,n,"minute"):g>=t?h(p,g,t,"second"):p+" ms"}function h(p,g,y,b){var v=g>=y*1.5;return Math.round(p/y)+" "+b+(v?"s":"")}}),Iz=He((r,e)=>{Me(),Fe(),Ne();function t(n){a.debug=a,a.default=a,a.coerce=h,a.disable=c,a.enable=o,a.enabled=f,a.humanize=Oz(),a.destroy=p,Object.keys(n).forEach(g=>{a[g]=n[g]}),a.names=[],a.skips=[],a.formatters={};function i(g){let y=0;for(let b=0;b<g.length;b++)y=(y<<5)-y+g.charCodeAt(b),y|=0;return a.colors[Math.abs(y)%a.colors.length]}a.selectColor=i;function a(g){let y,b=null,v,E;function S(...w){if(!S.enabled)return;let A=S,T=Number(new Date),I=T-(y||T);A.diff=I,A.prev=y,A.curr=T,y=T,w[0]=a.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let D=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(P,k)=>{if(P==="%%")return"%";D++;let M=a.formatters[k];if(typeof M=="function"){let B=w[D];P=M.call(A,B),w.splice(D,1),D--}return P}),a.formatArgs.call(A,w),(A.log||a.log).apply(A,w)}return S.namespace=g,S.useColors=a.useColors(),S.color=a.selectColor(g),S.extend=s,S.destroy=a.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(v!==a.namespaces&&(v=a.namespaces,E=a.enabled(g)),E),set:w=>{b=w}}),typeof a.init=="function"&&a.init(S),S}function s(g,y){let b=a(this.namespace+(typeof y>"u"?":":y)+g);return b.log=this.log,b}function o(g){a.save(g),a.namespaces=g,a.names=[],a.skips=[];let y=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let b of y)b[0]==="-"?a.skips.push(b.slice(1)):a.names.push(b)}function l(g,y){let b=0,v=0,E=-1,S=0;for(;b<g.length;)if(v<y.length&&(y[v]===g[b]||y[v]==="*"))y[v]==="*"?(E=v,S=b,v++):(b++,v++);else if(E!==-1)v=E+1,S++,b=S;else return!1;for(;v<y.length&&y[v]==="*";)v++;return v===y.length}function c(){let g=[...a.names,...a.skips.map(y=>"-"+y)].join(",");return a.enable(""),g}function f(g){for(let y of a.skips)if(l(g,y))return!1;for(let y of a.names)if(l(g,y))return!0;return!1}function h(g){return g instanceof Error?g.stack||g.message:g}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}e.exports=t}),Fs=He((r,e)=>{Me(),Fe(),Ne(),r.formatArgs=n,r.save=i,r.load=a,r.useColors=t,r.storage=s(),r.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;l.splice(1,0,c,"color: inherit");let f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(h=f))}),l.splice(h,0,c)}r.log=console.debug||console.log||(()=>{});function i(l){try{l?r.storage.setItem("debug",l):r.storage.removeItem("debug")}catch{}}function a(){let l;try{l=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!l&&typeof Jt<"u"&&"env"in Jt&&(l=Jt.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Iz()(r);var{formatters:o}=e.exports;o.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),Cz=He((r,e)=>{Me(),Fe(),Ne();var t=Az(),{EventEmitter:n}=(iu(),qt(el)),i=Dz(),a=iU(),s=Fs()("mqtt-packet:parser"),o=class Pw extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof Pw?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Pw().parser(c)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),f=c>>a.CMD_SHIFT;this.packet.cmd=a.types[f];let h=c&15,p=a.requiredHeaderFlags[f];return p!=null&&h!==p?this._emitError(new Error(a.requiredHeaderFlagsErrors[f])):(this.packet.retain=(c&a.RETAIN_MASK)!==0,this.packet.qos=c>>a.QOS_SHIFT&a.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&a.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),s("_parseLength %d",c.value),!!c}_parsePayload(){s("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return s("_parsePayload complete result: %s",c),c}_parseConnect(){s("_parseConnect");let c,f,h,p,g={},y=this.packet,b=this._parseString();if(b===null)return this._emitError(new Error("Cannot parse protocolId"));if(b!=="MQTT"&&b!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=b,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK;let v=!!(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT;if(g.will)y.will={},y.will.retain=v,y.will.qos=E;else{if(v)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.properties=w)}let S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(y.clientId=S,s("_parseConnect: packet.clientId: %s",y.clientId),g.will){if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.will.properties=w)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=c,s("_parseConnect: packet.will.topic: %s",y.will.topic),f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=f,s("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(g.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));y.username=p,s("_parseConnect: packet.username: %s",y.username)}if(g.password){if(h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse password"));y.password=h}return this.settings=y,s("_parseConnect: complete"),y}_parseConnack(){s("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let f=this._list.readUInt8(this._pos++);if(f>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(f&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(c.properties=h)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}c.payload=this._list.slice(this._pos,c.length),s("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){s("_parseSubscribe");let c=this.packet,f,h,p,g,y,b,v;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(c.properties=E)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(f=this._parseString(),f===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(h=this._parseByte(),this.settings.protocolVersion===5){if(h&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(h&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=h&a.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(b=(h>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(h>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=h>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));v={topic:f,qos:p},this.settings.protocolVersion===5?(v.nl=b,v.rap=y,v.rh=g):this.settings.bridgeMode&&(v.rh=0,v.rap=!0,v.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",v),c.subscriptions.push(v)}}}_parseSuback(){s("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!a.MQTT5_SUBACK_CODES[f])return this._emitError(new Error("Invalid suback code"))}else if(f>2&&f!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(f)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",f),c.unsubscriptions.push(f)}}}_parseUnsuback(){s("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let f=this._parseProperties();for(Object.getOwnPropertyNames(f).length&&(c.properties=f),c.granted=[];this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(!a.MQTT5_UNSUBACK_CODES[h])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(h)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!a.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!a.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}s("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}}return!0}_parseDisconnect(){let c=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),a.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(c.properties=f)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!a.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let f=this._parseProperties();return Object.getOwnPropertyNames(f).length&&(c.properties=f),s("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let f=this._parseNum(),h=f+this._pos;if(f===-1||h>this._list.length||h>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,h);return this._pos+=f,s("_parseString: result: %s",p),p}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),f=c+this._pos;if(c===-1||f>this._list.length||f>this.packet.length)return null;let h=this._list.slice(this._pos,f);return this._pos+=c,s("_parseBuffer: result: %o",h),h}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){s("_parseVarByteNum");let f=4,h=0,p=1,g=0,y=!1,b,v=this._pos?this._pos:0;for(;h<f&&v+h<this._list.length;){if(b=this._list.readUInt8(v+h++),g+=p*(b&a.VARBYTEINT_MASK),p*=128,(b&a.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=h)break}return!y&&h===f&&this._list.length>=h&&this._emitError(new Error("Invalid variable byte integer")),v&&(this._pos+=h),y?c?y={bytes:h,value:g}:y=g:y=!1,s("_parseVarByteNum: result: %o",y),y}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",c),c}_parseByType(c){switch(s("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let c=this._parseVarByteNum(),f=this._pos+c,h={};for(;this._pos<f;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let g=a.propertiesCodes[p];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){h[g]||(h[g]=Object.create(null));let y=this._parseByType(a.propertiesTypes[g]);if(h[g][y.name])if(Array.isArray(h[g][y.name]))h[g][y.name].push(y.value);else{let b=h[g][y.name];h[g][y.name]=[b],h[g][y.name].push(y.value)}else h[g][y.name]=y.value;continue}h[g]?Array.isArray(h[g])?h[g].push(this._parseByType(a.propertiesTypes[g])):(h[g]=[h[g]],h[g].push(this._parseByType(a.propertiesTypes[g]))):h[g]=this._parseByType(a.propertiesTypes[g])}return h}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(c){s("_emitError",c),this.error=c,this.emit("error",c)}};e.exports=o}),Rz=He((r,e)=>{Me(),Fe(),Ne();var{Buffer:t}=(en(),qt(Jr)),n=65536,i={},a=t.isBuffer(t.from([1,2]).subarray(0,1));function s(f){let h=t.allocUnsafe(2);return h.writeUInt8(f>>8,0),h.writeUInt8(f&255,1),h}function o(){for(let f=0;f<n;f++)i[f]=s(f)}function l(f){let h=0,p=0,g=t.allocUnsafe(4);do h=f%128|0,f=f/128|0,f>0&&(h=h|128),g.writeUInt8(h,p++);while(f>0&&p<4);return f>0&&(p=0),a?g.subarray(0,p):g.slice(0,p)}function c(f){let h=t.allocUnsafe(4);return h.writeUInt32BE(f,0),h}e.exports={cache:i,generateCache:o,generateNumber:s,genBufVariableByteInt:l,generate4ByteBuffer:c}}),Pz=He((r,e)=>{Me(),Fe(),Ne(),typeof Jt>"u"||!Jt.version||Jt.version.indexOf("v0.")===0||Jt.version.indexOf("v1.")===0&&Jt.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=Jt;function t(n,i,a,s){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,l,c;switch(o){case 0:case 1:return Jt.nextTick(n);case 2:return Jt.nextTick(function(){n.call(null,i)});case 3:return Jt.nextTick(function(){n.call(null,i,a)});case 4:return Jt.nextTick(function(){n.call(null,i,a,s)});default:for(l=new Array(o-1),c=0;c<l.length;)l[c++]=arguments[c];return Jt.nextTick(function(){n.apply(null,l)})}}}),aU=He((r,e)=>{Me(),Fe(),Ne();var t=iU(),{Buffer:n}=(en(),qt(Jr)),i=n.allocUnsafe(0),a=n.from([0]),s=Rz(),o=Pz().nextTick,l=Fs()("mqtt-packet:writeToStream"),c=s.cache,f=s.generateNumber,h=s.generateCache,p=s.genBufVariableByteInt,g=s.generate4ByteBuffer,y=z,b=!0;function v(oe,re,te){switch(l("generate called"),re.cork&&(re.cork(),o(E,re)),b&&(b=!1,h()),l("generate: packet.cmd: %s",oe.cmd),oe.cmd){case"connect":return S(oe,re);case"connack":return w(oe,re,te);case"publish":return A(oe,re,te);case"puback":case"pubrec":case"pubrel":case"pubcomp":return T(oe,re,te);case"subscribe":return I(oe,re,te);case"suback":return D(oe,re,te);case"unsubscribe":return P(oe,re,te);case"unsuback":return k(oe,re,te);case"pingreq":case"pingresp":return M(oe,re);case"disconnect":return B(oe,re,te);case"auth":return C(oe,re,te);default:return re.destroy(new Error("Unknown command")),!1}}Object.defineProperty(v,"cacheNumbers",{get(){return y===z},set(oe){oe?((!c||Object.keys(c).length===0)&&(b=!0),y=z):(b=!1,y=K)}});function E(oe){oe.uncork()}function S(oe,re,te){let le=oe||{},ce=le.protocolId||"MQTT",ne=le.protocolVersion||4,Ce=le.will,Se=le.clean,ie=le.keepalive||0,ae=le.clientId||"",ye=le.username,Ie=le.password,Re=le.properties;Se===void 0&&(Se=!0);let Ue=0;if(typeof ce!="string"&&!n.isBuffer(ce))return re.destroy(new Error("Invalid protocolId")),!1;if(Ue+=ce.length+2,ne!==3&&ne!==4&&ne!==5)return re.destroy(new Error("Invalid protocol version")),!1;if(Ue+=1,(typeof ae=="string"||n.isBuffer(ae))&&(ae||ne>=4)&&(ae||Se))Ue+=n.byteLength(ae)+2;else{if(ne<4)return re.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Se*1===0)return re.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof ie!="number"||ie<0||ie>65535||ie%1!==0)return re.destroy(new Error("Invalid keepalive")),!1;Ue+=2,Ue+=1;let pe,Be;if(ne===5){if(pe=H(re,Re),!pe)return!1;Ue+=pe.length}if(Ce){if(typeof Ce!="object")return re.destroy(new Error("Invalid will")),!1;if(!Ce.topic||typeof Ce.topic!="string")return re.destroy(new Error("Invalid will topic")),!1;if(Ue+=n.byteLength(Ce.topic)+2,Ue+=2,Ce.payload)if(Ce.payload.length>=0)typeof Ce.payload=="string"?Ue+=n.byteLength(Ce.payload):Ue+=Ce.payload.length;else return re.destroy(new Error("Invalid will payload")),!1;if(Be={},ne===5){if(Be=H(re,Ce.properties),!Be)return!1;Ue+=Be.length}}let ze=!1;if(ye!=null)if(be(ye))ze=!0,Ue+=n.byteLength(ye)+2;else return re.destroy(new Error("Invalid username")),!1;if(Ie!=null){if(!ze)return re.destroy(new Error("Username is required to use password")),!1;if(be(Ie))Ue+=se(Ie)+2;else return re.destroy(new Error("Invalid password")),!1}re.write(t.CONNECT_HEADER),Y(re,Ue),X(re,ce),le.bridgeMode&&(ne+=128),re.write(ne===131?t.VERSION131:ne===132?t.VERSION132:ne===4?t.VERSION4:ne===5?t.VERSION5:t.VERSION3);let De=0;return De|=ye!=null?t.USERNAME_MASK:0,De|=Ie!=null?t.PASSWORD_MASK:0,De|=Ce&&Ce.retain?t.WILL_RETAIN_MASK:0,De|=Ce&&Ce.qos?Ce.qos<<t.WILL_QOS_SHIFT:0,De|=Ce?t.WILL_FLAG_MASK:0,De|=Se?t.CLEAN_SESSION_MASK:0,re.write(n.from([De])),y(re,ie),ne===5&&pe.write(),X(re,ae),Ce&&(ne===5&&Be.write(),q(re,Ce.topic),X(re,Ce.payload)),ye!=null&&X(re,ye),Ie!=null&&X(re,Ie),!0}function w(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=le===5?ce.reasonCode:ce.returnCode,Ce=ce.properties,Se=2;if(typeof ne!="number")return re.destroy(new Error("Invalid return code")),!1;let ie=null;if(le===5){if(ie=H(re,Ce),!ie)return!1;Se+=ie.length}return re.write(t.CONNACK_HEADER),Y(re,Se),re.write(ce.sessionPresent?t.SESSIONPRESENT_HEADER:a),re.write(n.from([ne])),ie?.write(),!0}function A(oe,re,te){l("publish: packet: %o",oe);let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.qos||0,Ce=ce.retain?t.RETAIN_MASK:0,Se=ce.topic,ie=ce.payload||i,ae=ce.messageId,ye=ce.properties,Ie=0;if(typeof Se=="string")Ie+=n.byteLength(Se)+2;else if(n.isBuffer(Se))Ie+=Se.length+2;else return re.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(ie)?Ie+=ie.length:Ie+=n.byteLength(ie),ne&&typeof ae!="number")return re.destroy(new Error("Invalid messageId")),!1;ne&&(Ie+=2);let Re=null;if(le===5){if(Re=H(re,ye),!Re)return!1;Ie+=Re.length}return re.write(t.PUBLISH_HEADER[ne][ce.dup?1:0][Ce?1:0]),Y(re,Ie),y(re,se(Se)),re.write(Se),ne>0&&y(re,ae),Re?.write(),l("publish: payload: %o",ie),re.write(ie)}function T(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.cmd||"puback",Ce=ce.messageId,Se=ce.dup&&ne==="pubrel"?t.DUP_MASK:0,ie=0,ae=ce.reasonCode,ye=ce.properties,Ie=le===5?3:2;if(ne==="pubrel"&&(ie=1),typeof Ce!="number")return re.destroy(new Error("Invalid messageId")),!1;let Re=null;if(le===5&&typeof ye=="object"){if(Re=G(re,ye,te,Ie),!Re)return!1;Ie+=Re.length}return re.write(t.ACKS[ne][ie][Se][0]),Ie===3&&(Ie+=ae!==0?1:-1),Y(re,Ie),y(re,Ce),le===5&&Ie!==2&&re.write(n.from([ae])),Re!==null?Re.write():Ie===4&&re.write(n.from([0])),!0}function I(oe,re,te){l("subscribe: packet: ");let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.dup?t.DUP_MASK:0,Ce=ce.messageId,Se=ce.subscriptions,ie=ce.properties,ae=0;if(typeof Ce!="number")return re.destroy(new Error("Invalid messageId")),!1;ae+=2;let ye=null;if(le===5){if(ye=H(re,ie),!ye)return!1;ae+=ye.length}if(typeof Se=="object"&&Se.length)for(let Re=0;Re<Se.length;Re+=1){let Ue=Se[Re].topic,pe=Se[Re].qos;if(typeof Ue!="string")return re.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof pe!="number")return re.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(le===5){if(typeof(Se[Re].nl||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Se[Re].rap||!1)!="boolean")return re.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Be=Se[Re].rh||0;if(typeof Be!="number"||Be>2)return re.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}ae+=n.byteLength(Ue)+2+1}else return re.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),re.write(t.SUBSCRIBE_HEADER[1][ne?1:0][0]),Y(re,ae),y(re,Ce),ye!==null&&ye.write();let Ie=!0;for(let Re of Se){let Ue=Re.topic,pe=Re.qos,Be=+Re.nl,ze=+Re.rap,De=Re.rh,ft;q(re,Ue),ft=t.SUBSCRIBE_OPTIONS_QOS[pe],le===5&&(ft|=Be?t.SUBSCRIBE_OPTIONS_NL:0,ft|=ze?t.SUBSCRIBE_OPTIONS_RAP:0,ft|=De?t.SUBSCRIBE_OPTIONS_RH[De]:0),Ie=re.write(n.from([ft]))}return Ie}function D(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.messageId,Ce=ce.granted,Se=ce.properties,ie=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(ie+=2,typeof Ce=="object"&&Ce.length)for(let ye=0;ye<Ce.length;ye+=1){if(typeof Ce[ye]!="number")return re.destroy(new Error("Invalid qos vector")),!1;ie+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let ae=null;if(le===5){if(ae=G(re,Se,te,ie),!ae)return!1;ie+=ae.length}return re.write(t.SUBACK_HEADER),Y(re,ie),y(re,ne),ae!==null&&ae.write(),re.write(n.from(Ce))}function P(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.messageId,Ce=ce.dup?t.DUP_MASK:0,Se=ce.unsubscriptions,ie=ce.properties,ae=0;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(ae+=2,typeof Se=="object"&&Se.length)for(let Re=0;Re<Se.length;Re+=1){if(typeof Se[Re]!="string")return re.destroy(new Error("Invalid unsubscriptions")),!1;ae+=n.byteLength(Se[Re])+2}else return re.destroy(new Error("Invalid unsubscriptions")),!1;let ye=null;if(le===5){if(ye=H(re,ie),!ye)return!1;ae+=ye.length}re.write(t.UNSUBSCRIBE_HEADER[1][Ce?1:0][0]),Y(re,ae),y(re,ne),ye!==null&&ye.write();let Ie=!0;for(let Re=0;Re<Se.length;Re++)Ie=q(re,Se[Re]);return Ie}function k(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.messageId,Ce=ce.dup?t.DUP_MASK:0,Se=ce.granted,ie=ce.properties,ae=ce.cmd,ye=0,Ie=2;if(typeof ne!="number")return re.destroy(new Error("Invalid messageId")),!1;if(le===5)if(typeof Se=="object"&&Se.length)for(let Ue=0;Ue<Se.length;Ue+=1){if(typeof Se[Ue]!="number")return re.destroy(new Error("Invalid qos vector")),!1;Ie+=1}else return re.destroy(new Error("Invalid qos vector")),!1;let Re=null;if(le===5){if(Re=G(re,ie,te,Ie),!Re)return!1;Ie+=Re.length}return re.write(t.ACKS[ae][ye][Ce][0]),Y(re,Ie),y(re,ne),Re!==null&&Re.write(),le===5&&re.write(n.from(Se)),!0}function M(oe,re,te){return re.write(t.EMPTY[oe.cmd])}function B(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.reasonCode,Ce=ce.properties,Se=le===5?1:0,ie=null;if(le===5){if(ie=G(re,Ce,te,Se),!ie)return!1;Se+=ie.length}return re.write(n.from([t.codes.disconnect<<4])),Y(re,Se),le===5&&re.write(n.from([ne])),ie!==null&&ie.write(),!0}function C(oe,re,te){let le=te?te.protocolVersion:4,ce=oe||{},ne=ce.reasonCode,Ce=ce.properties,Se=le===5?1:0;le!==5&&re.destroy(new Error("Invalid mqtt version for auth packet"));let ie=G(re,Ce,te,Se);return ie?(Se+=ie.length,re.write(n.from([t.codes.auth<<4])),Y(re,Se),re.write(n.from([ne])),ie!==null&&ie.write(),!0):!1}var W={};function Y(oe,re){if(re>t.VARBYTEINT_MAX)return oe.destroy(new Error(`Invalid variable byte integer: ${re}`)),!1;let te=W[re];return te||(te=p(re),re<16384&&(W[re]=te)),l("writeVarByteInt: writing to stream: %o",te),oe.write(te)}function q(oe,re){let te=n.byteLength(re);return y(oe,te),l("writeString: %s",re),oe.write(re,"utf8")}function $(oe,re,te){q(oe,re),q(oe,te)}function z(oe,re){return l("writeNumberCached: number: %d",re),l("writeNumberCached: %o",c[re]),oe.write(c[re])}function K(oe,re){let te=f(re);return l("writeNumberGenerated: %o",te),oe.write(te)}function Z(oe,re){let te=g(re);return l("write4ByteNumber: %o",te),oe.write(te)}function X(oe,re){typeof re=="string"?q(oe,re):re?(y(oe,re.length),oe.write(re)):y(oe,0)}function H(oe,re){if(typeof re!="object"||re.length!=null)return{length:1,write(){fe(oe,{},0)}};let te=0;function le(ce,ne){let Ce=t.propertiesTypes[ce],Se=0;switch(Ce){case"byte":{if(typeof ne!="boolean")return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=2;break}case"int8":{if(typeof ne!="number"||ne<0||ne>255)return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=2;break}case"binary":{if(ne&&ne===null)return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=1+n.byteLength(ne)+2;break}case"int16":{if(typeof ne!="number"||ne<0||ne>65535)return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=3;break}case"int32":{if(typeof ne!="number"||ne<0||ne>4294967295)return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=5;break}case"var":{if(typeof ne!="number"||ne<0||ne>268435455)return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=1+n.byteLength(p(ne));break}case"string":{if(typeof ne!="string")return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=3+n.byteLength(ne.toString());break}case"pair":{if(typeof ne!="object")return oe.destroy(new Error(`Invalid ${ce}: ${ne}`)),!1;Se+=Object.getOwnPropertyNames(ne).reduce((ie,ae)=>{let ye=ne[ae];return Array.isArray(ye)?ie+=ye.reduce((Ie,Re)=>(Ie+=3+n.byteLength(ae.toString())+2+n.byteLength(Re.toString()),Ie),0):ie+=3+n.byteLength(ae.toString())+2+n.byteLength(ne[ae].toString()),ie},0);break}default:return oe.destroy(new Error(`Invalid property ${ce}: ${ne}`)),!1}return Se}if(re)for(let ce in re){let ne=0,Ce=0,Se=re[ce];if(Se!==void 0){if(Array.isArray(Se))for(let ie=0;ie<Se.length;ie++){if(Ce=le(ce,Se[ie]),!Ce)return!1;ne+=Ce}else{if(Ce=le(ce,Se),!Ce)return!1;ne=Ce}if(!ne)return!1;te+=ne}}return{length:n.byteLength(p(te))+te,write(){fe(oe,re,te)}}}function G(oe,re,te,le){let ce=["reasonString","userProperties"],ne=te&&te.properties&&te.properties.maximumPacketSize?te.properties.maximumPacketSize:0,Ce=H(oe,re);if(ne)for(;le+Ce.length>ne;){let Se=ce.shift();if(Se&&re[Se])delete re[Se],Ce=H(oe,re);else return!1}return Ce}function J(oe,re,te){switch(t.propertiesTypes[re]){case"byte":{oe.write(n.from([t.properties[re]])),oe.write(n.from([+te]));break}case"int8":{oe.write(n.from([t.properties[re]])),oe.write(n.from([te]));break}case"binary":{oe.write(n.from([t.properties[re]])),X(oe,te);break}case"int16":{oe.write(n.from([t.properties[re]])),y(oe,te);break}case"int32":{oe.write(n.from([t.properties[re]])),Z(oe,te);break}case"var":{oe.write(n.from([t.properties[re]])),Y(oe,te);break}case"string":{oe.write(n.from([t.properties[re]])),q(oe,te);break}case"pair":{Object.getOwnPropertyNames(te).forEach(le=>{let ce=te[le];Array.isArray(ce)?ce.forEach(ne=>{oe.write(n.from([t.properties[re]])),$(oe,le.toString(),ne.toString())}):(oe.write(n.from([t.properties[re]])),$(oe,le.toString(),ce.toString()))});break}default:return oe.destroy(new Error(`Invalid property ${re} value: ${te}`)),!1}}function fe(oe,re,te){Y(oe,te);for(let le in re)if(Object.prototype.hasOwnProperty.call(re,le)&&re[le]!=null){let ce=re[le];if(Array.isArray(ce))for(let ne=0;ne<ce.length;ne++)J(oe,le,ce[ne]);else J(oe,le,ce)}}function se(oe){return oe?oe instanceof n?oe.length:n.byteLength(oe):0}function be(oe){return typeof oe=="string"||oe instanceof n}e.exports=v}),Lz=He((r,e)=>{Me(),Fe(),Ne();var t=aU(),{EventEmitter:n}=(iu(),qt(el)),{Buffer:i}=(en(),qt(Jr));function a(o,l){let c=new s;return t(o,c,l),c.concat()}var s=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0,l=new Array(this._array.length),c=this._array,f=0,h;for(h=0;h<c.length&&c[h]!==void 0;h++)typeof c[h]!="string"?l[h]=c[h].length:l[h]=i.byteLength(c[h]),o+=l[h];let p=i.allocUnsafe(o);for(h=0;h<c.length&&c[h]!==void 0;h++)typeof c[h]!="string"?(c[h].copy(p,f),f+=l[h]):(p.write(c[h],f),f+=l[h]);return p}destroy(o){o&&this.emit("error",o)}};e.exports=a}),kz=He(r=>{Me(),Fe(),Ne(),r.parser=Cz().parser,r.generate=Lz(),r.writeToStream=aU()}),Mz=He((r,e)=>{Me(),Fe(),Ne(),e.exports=n;function t(a){return a instanceof Eg?Eg.from(a):new a.constructor(a.buffer.slice(),a.byteOffset,a.length)}function n(a){if(a=a||{},a.circles)return i(a);let s=new Map;if(s.set(Date,h=>new Date(h)),s.set(Map,(h,p)=>new Map(l(Array.from(h),p))),s.set(Set,(h,p)=>new Set(l(Array.from(h),p))),a.constructorHandlers)for(let h of a.constructorHandlers)s.set(h[0],h[1]);let o=null;return a.proto?f:c;function l(h,p){let g=Object.keys(h),y=new Array(g.length);for(let b=0;b<g.length;b++){let v=g[b],E=h[v];typeof E!="object"||E===null?y[v]=E:E.constructor!==Object&&(o=s.get(E.constructor))?y[v]=o(E,p):ArrayBuffer.isView(E)?y[v]=t(E):y[v]=p(E)}return y}function c(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return l(h,c);if(h.constructor!==Object&&(o=s.get(h.constructor)))return o(h,c);let p={};for(let g in h){if(Object.hasOwnProperty.call(h,g)===!1)continue;let y=h[g];typeof y!="object"||y===null?p[g]=y:y.constructor!==Object&&(o=s.get(y.constructor))?p[g]=o(y,c):ArrayBuffer.isView(y)?p[g]=t(y):p[g]=c(y)}return p}function f(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return l(h,f);if(h.constructor!==Object&&(o=s.get(h.constructor)))return o(h,f);let p={};for(let g in h){let y=h[g];typeof y!="object"||y===null?p[g]=y:y.constructor!==Object&&(o=s.get(y.constructor))?p[g]=o(y,f):ArrayBuffer.isView(y)?p[g]=t(y):p[g]=f(y)}return p}}function i(a){let s=[],o=[],l=new Map;if(l.set(Date,g=>new Date(g)),l.set(Map,(g,y)=>new Map(f(Array.from(g),y))),l.set(Set,(g,y)=>new Set(f(Array.from(g),y))),a.constructorHandlers)for(let g of a.constructorHandlers)l.set(g[0],g[1]);let c=null;return a.proto?p:h;function f(g,y){let b=Object.keys(g),v=new Array(b.length);for(let E=0;E<b.length;E++){let S=b[E],w=g[S];if(typeof w!="object"||w===null)v[S]=w;else if(w.constructor!==Object&&(c=l.get(w.constructor)))v[S]=c(w,y);else if(ArrayBuffer.isView(w))v[S]=t(w);else{let A=s.indexOf(w);A!==-1?v[S]=o[A]:v[S]=y(w)}}return v}function h(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return f(g,h);if(g.constructor!==Object&&(c=l.get(g.constructor)))return c(g,h);let y={};s.push(g),o.push(y);for(let b in g){if(Object.hasOwnProperty.call(g,b)===!1)continue;let v=g[b];if(typeof v!="object"||v===null)y[b]=v;else if(v.constructor!==Object&&(c=l.get(v.constructor)))y[b]=c(v,h);else if(ArrayBuffer.isView(v))y[b]=t(v);else{let E=s.indexOf(v);E!==-1?y[b]=o[E]:y[b]=h(v)}}return s.pop(),o.pop(),y}function p(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return f(g,p);if(g.constructor!==Object&&(c=l.get(g.constructor)))return c(g,p);let y={};s.push(g),o.push(y);for(let b in g){let v=g[b];if(typeof v!="object"||v===null)y[b]=v;else if(v.constructor!==Object&&(c=l.get(v.constructor)))y[b]=c(v,p);else if(ArrayBuffer.isView(v))y[b]=t(v);else{let E=s.indexOf(v);E!==-1?y[b]=o[E]:y[b]=p(v)}}return s.pop(),o.pop(),y}}}),Nz=He((r,e)=>{Me(),Fe(),Ne(),e.exports=Mz()()}),Fz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.validateTopic=e,r.validateTopics=t;function e(n){let i=n.split("/");for(let a=0;a<i.length;a++)if(i[a]!=="+"){if(i[a]==="#")return a===i.length-1;if(i[a].indexOf("+")!==-1||i[a].indexOf("#")!==-1)return!1}return!0}function t(n){if(n.length===0)return"empty_topic_list";for(let i=0;i<n.length;i++)if(!e(n[i]))return n[i];return null}}),sU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=su(),t={objectMode:!0},n={clean:!0},i=class{options;_inflights;constructor(a){this.options=a||{},this.options={...n,...a},this._inflights=new Map}put(a,s){return this._inflights.set(a.messageId,a),s&&s(),this}createStream(){let a=new e.Readable(t),s=[],o=!1,l=0;return this._inflights.forEach((c,f)=>{s.push(c)}),a._read=()=>{!o&&l<s.length?a.push(s[l++]):a.push(null)},a.destroy=c=>{if(!o)return o=!0,setTimeout(()=>{a.emit("close")},0),a},a}del(a,s){let o=this._inflights.get(a.messageId);return o?(this._inflights.delete(a.messageId),s(null,o)):s&&s(new Error("missing packet")),this}get(a,s){let o=this._inflights.get(a.messageId);return o?s(null,o):s&&s(new Error("missing packet")),this}close(a){this.options.clean&&(this._inflights=null),a&&a()}};r.default=i}),Bz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(n,i,a)=>{n.log("handlePublish: packet %o",i),a=typeof a<"u"?a:n.noop;let s=i.topic.toString(),o=i.payload,{qos:l}=i,{messageId:c}=i,{options:f}=n;if(n.options.protocolVersion===5){let h;if(i.properties&&(h=i.properties.topicAlias),typeof h<"u")if(s.length===0)if(h>0&&h<=65535){let p=n.topicAliasRecv.getTopicByAlias(h);if(p)s=p,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,h);else{n.log("handlePublish :: unregistered topic alias. alias: %d",h),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",h),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(s,h))n.log("handlePublish :: registered topic: %s - alias: %d",s,h);else{n.log("handlePublish :: topic alias out of range. alias: %d",h),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",l),l){case 2:{f.customHandleAcks(s,o,i,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return n.emit("error",h);if(e.indexOf(p)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));p?n._sendPacket({cmd:"pubrec",messageId:c,reasonCode:p},a):n.incomingStore.put(i,()=>{n._sendPacket({cmd:"pubrec",messageId:c},a)})});break}case 1:{f.customHandleAcks(s,o,i,(h,p)=>{if(typeof h=="number"&&(p=h,h=null),h)return n.emit("error",h);if(e.indexOf(p)===-1)return n.emit("error",new Error("Wrong reason code for puback"));p||n.emit("message",s,o,i),n.handleMessage(i,g=>{if(g)return a&&a(g);n._sendPacket({cmd:"puback",messageId:c,reasonCode:p},a)})});break}case 0:n.emit("message",s,o,i),n.handleMessage(i,a);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};r.default=t}),Uz=He((r,e)=>{e.exports={version:"5.14.1"}}),Kc=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.MQTTJS_VERSION=r.nextTick=r.ErrorWithSubackPacket=r.ErrorWithReasonCode=void 0,r.applyMixin=n;var e=class oU extends Error{code;constructor(a,s){super(a),this.code=s,Object.setPrototypeOf(this,oU.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};r.ErrorWithReasonCode=e;var t=class lU extends Error{packet;constructor(a,s){super(a),this.packet=s,Object.setPrototypeOf(this,lU.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};r.ErrorWithSubackPacket=t;function n(i,a,s=!1){let o=[a];for(;;){let l=o[0],c=Object.getPrototypeOf(l);if(c?.prototype)o.unshift(c);else break}for(let l of o)for(let c of Object.getOwnPropertyNames(l.prototype))(s||c!=="constructor")&&Object.defineProperty(i.prototype,c,Object.getOwnPropertyDescriptor(l.prototype,c)??Object.create(null))}r.nextTick=typeof Jt?.nextTick=="function"?Jt.nextTick:i=>{setTimeout(i,0)},r.MQTTJS_VERSION=Uz().version}),K0=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=void 0;var e=Kc();r.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(n,i)=>{let{messageId:a}=i,s=i.cmd,o=null,l=n.outgoing[a]?n.outgoing[a].cb:null,c=null;if(!l){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",s),s){case"pubcomp":case"puback":{let f=i.reasonCode;f&&f>0&&f!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[f]}`,f),n._removeOutgoingAndStoreMessage(a,()=>{l(c,i)})):n._removeOutgoingAndStoreMessage(a,l);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:a};let f=i.reasonCode;f&&f>0&&f!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${r.ReasonCodes[f]}`,f),n._removeOutgoingAndStoreMessage(a,()=>{l(c,i)})):n._sendPacket(o);break}case"suback":{delete n.outgoing[a],n.messageIdProvider.deallocate(a);let f=i.granted;for(let h=0;h<f.length;h++){let p=f[h];if((p&128)!==0){c=new Error(`Subscribe error: ${r.ReasonCodes[p]}`),c.code=p;let g=n.messageIdToTopic[a];g&&g.forEach(y=>{delete n._resubscribeTopics[y]})}}delete n.messageIdToTopic[a],n._invokeStoreProcessingQueue(),l(c,i);break}case"unsuback":{delete n.outgoing[a],n.messageIdProvider.deallocate(a),n._invokeStoreProcessingQueue(),l(null,i);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};r.default=t}),jz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=Kc(),t=K0(),n=(i,a)=>{let{options:s}=i,o=s.protocolVersion,l=o===5?a.reasonCode:a.returnCode;if(o!==5){let c=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,l);i.emit("error",c);return}i.handleAuth(a,(c,f)=>{if(c){i.emit("error",c);return}if(l===24)i.reconnecting=!1,i._sendPacket(f);else{let h=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);i.emit("error",h)}})};r.default=n}),$z=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,n=typeof Jt=="object"&&Jt?Jt:{},i=(g,y,b,v)=>{typeof n.emitWarning=="function"?n.emitWarning(g,y,b,v):console.error(`[${b}] ${y}: ${g}`)},a=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof a>"u"){s=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(b,v){this._onabort.push(v)}},a=class{constructor(){y()}signal=new s;abort(b){if(!this.signal.aborted){this.signal.reason=b,this.signal.aborted=!0;for(let v of this.signal._onabort)v(b);this.signal.onabort?.(b)}}};let g=n.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",y=()=>{g&&(g=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",y))}}var o=g=>!t.has(g),l=g=>g&&g===Math.floor(g)&&g>0&&isFinite(g),c=g=>l(g)?g<=Math.pow(2,8)?Uint8Array:g<=Math.pow(2,16)?Uint16Array:g<=Math.pow(2,32)?Uint32Array:g<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(g){super(g),this.fill(0)}},h=class ud{heap;length;static#l=!1;static create(y){let b=c(y);if(!b)return[];ud.#l=!0;let v=new ud(y,b);return ud.#l=!1,v}constructor(y,b){if(!ud.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new b(y),this.length=0}push(y){this.heap[this.length++]=y}pop(){return this.heap[--this.length]}},p=class uU{#l;#f;#m;#g;#C;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#u;#d;#o;#a;#v;#s;#b;#x;#h;#S;#A;#c;static unsafeExposeInternals(y){return{starts:y.#x,ttls:y.#h,sizes:y.#b,keyMap:y.#n,keyList:y.#r,valList:y.#e,next:y.#u,prev:y.#d,get head(){return y.#o},get tail(){return y.#a},free:y.#v,isBackgroundFetch:b=>y.#t(b),backgroundFetch:(b,v,E,S)=>y.#k(b,v,E,S),moveToTail:b=>y.#I(b),indexes:b=>y.#E(b),rindexes:b=>y.#w(b),isStale:b=>y.#p(b)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#C}get memoMethod(){return this.#R}get dispose(){return this.#m}get disposeAfter(){return this.#g}constructor(y){let{max:b=0,ttl:v,ttlResolution:E=1,ttlAutopurge:S,updateAgeOnGet:w,updateAgeOnHas:A,allowStale:T,dispose:I,disposeAfter:D,noDisposeOnSet:P,noUpdateTTL:k,maxSize:M=0,maxEntrySize:B=0,sizeCalculation:C,fetchMethod:W,memoMethod:Y,noDeleteOnFetchRejection:q,noDeleteOnStaleGet:$,allowStaleOnFetchRejection:z,allowStaleOnFetchAbort:K,ignoreFetchAbort:Z}=y;if(b!==0&&!l(b))throw new TypeError("max option must be a nonnegative integer");let X=b?c(b):Array;if(!X)throw new Error("invalid max value: "+b);if(this.#l=b,this.#f=M,this.maxEntrySize=B||this.#f,this.sizeCalculation=C,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Y!==void 0&&typeof Y!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=Y,W!==void 0&&typeof W!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=W,this.#A=!!W,this.#n=new Map,this.#r=new Array(b).fill(void 0),this.#e=new Array(b).fill(void 0),this.#u=new X(b),this.#d=new X(b),this.#o=0,this.#a=0,this.#v=h.create(b),this.#i=0,this.#y=0,typeof I=="function"&&(this.#m=I),typeof D=="function"?(this.#g=D,this.#s=[]):(this.#g=void 0,this.#s=void 0),this.#S=!!this.#m,this.#c=!!this.#g,this.noDisposeOnSet=!!P,this.noUpdateTTL=!!k,this.noDeleteOnFetchRejection=!!q,this.allowStaleOnFetchRejection=!!z,this.allowStaleOnFetchAbort=!!K,this.ignoreFetchAbort=!!Z,this.maxEntrySize!==0){if(this.#f!==0&&!l(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!T,this.noDeleteOnStaleGet=!!$,this.updateAgeOnGet=!!w,this.updateAgeOnHas=!!A,this.ttlResolution=l(E)||E===0?E:1,this.ttlAutopurge=!!S,this.ttl=v||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let H="LRU_CACHE_UNBOUNDED";o(H)&&(t.add(H),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",H,uU))}}getRemainingTTL(y){return this.#n.has(y)?1/0:0}#M(){let y=new f(this.#l),b=new f(this.#l);this.#h=y,this.#x=b,this.#N=(S,w,A=e.now())=>{if(b[S]=w!==0?A:0,y[S]=w,w!==0&&this.ttlAutopurge){let T=setTimeout(()=>{this.#p(S)&&this.#_(this.#r[S],"expire")},w+1);T.unref&&T.unref()}},this.#D=S=>{b[S]=y[S]!==0?e.now():0},this.#T=(S,w)=>{if(y[w]){let A=y[w],T=b[w];if(!A||!T)return;S.ttl=A,S.start=T,S.now=v||E();let I=S.now-T;S.remainingTTL=A-I}};let v=0,E=()=>{let S=e.now();if(this.ttlResolution>0){v=S;let w=setTimeout(()=>v=0,this.ttlResolution);w.unref&&w.unref()}return S};this.getRemainingTTL=S=>{let w=this.#n.get(S);if(w===void 0)return 0;let A=y[w],T=b[w];if(!A||!T)return 1/0;let I=(v||E())-T;return A-I},this.#p=S=>{let w=b[S],A=y[S];return!!A&&!!w&&(v||E())-w>A}}#D=()=>{};#T=()=>{};#N=()=>{};#p=()=>!1;#$(){let y=new f(this.#l);this.#y=0,this.#b=y,this.#O=b=>{this.#y-=y[b],y[b]=0},this.#F=(b,v,E,S)=>{if(this.#t(v))return 0;if(!l(E))if(S){if(typeof S!="function")throw new TypeError("sizeCalculation must be a function");if(E=S(v,b),!l(E))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return E},this.#P=(b,v,E)=>{if(y[b]=v,this.#f){let S=this.#f-y[b];for(;this.#y>S;)this.#L(!0)}this.#y+=y[b],E&&(E.entrySize=v,E.totalCalculatedSize=this.#y)}}#O=y=>{};#P=(y,b,v)=>{};#F=(y,b,v,E)=>{if(v||E)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:y=this.allowStale}={}){if(this.#i)for(let b=this.#a;!(!this.#B(b)||((y||!this.#p(b))&&(yield b),b===this.#o));)b=this.#d[b]}*#w({allowStale:y=this.allowStale}={}){if(this.#i)for(let b=this.#o;!(!this.#B(b)||((y||!this.#p(b))&&(yield b),b===this.#a));)b=this.#u[b]}#B(y){return y!==void 0&&this.#n.get(this.#r[y])===y}*entries(){for(let y of this.#E())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*rentries(){for(let y of this.#w())this.#e[y]!==void 0&&this.#r[y]!==void 0&&!this.#t(this.#e[y])&&(yield[this.#r[y],this.#e[y]])}*keys(){for(let y of this.#E()){let b=this.#r[y];b!==void 0&&!this.#t(this.#e[y])&&(yield b)}}*rkeys(){for(let y of this.#w()){let b=this.#r[y];b!==void 0&&!this.#t(this.#e[y])&&(yield b)}}*values(){for(let y of this.#E())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}*rvalues(){for(let y of this.#w())this.#e[y]!==void 0&&!this.#t(this.#e[y])&&(yield this.#e[y])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(y,b={}){for(let v of this.#E()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;if(S!==void 0&&y(S,this.#r[v],this))return this.get(this.#r[v],b)}}forEach(y,b=this){for(let v of this.#E()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(b,S,this.#r[v],this)}}rforEach(y,b=this){for(let v of this.#w()){let E=this.#e[v],S=this.#t(E)?E.__staleWhileFetching:E;S!==void 0&&y.call(b,S,this.#r[v],this)}}purgeStale(){let y=!1;for(let b of this.#w({allowStale:!0}))this.#p(b)&&(this.#_(this.#r[b],"expire"),y=!0);return y}info(y){let b=this.#n.get(y);if(b===void 0)return;let v=this.#e[b],E=this.#t(v)?v.__staleWhileFetching:v;if(E===void 0)return;let S={value:E};if(this.#h&&this.#x){let w=this.#h[b],A=this.#x[b];if(w&&A){let T=w-(e.now()-A);S.ttl=T,S.start=Date.now()}}return this.#b&&(S.size=this.#b[b]),S}dump(){let y=[];for(let b of this.#E({allowStale:!0})){let v=this.#r[b],E=this.#e[b],S=this.#t(E)?E.__staleWhileFetching:E;if(S===void 0||v===void 0)continue;let w={value:S};if(this.#h&&this.#x){w.ttl=this.#h[b];let A=e.now()-this.#x[b];w.start=Math.floor(Date.now()-A)}this.#b&&(w.size=this.#b[b]),y.unshift([v,w])}return y}load(y){this.clear();for(let[b,v]of y){if(v.start){let E=Date.now()-v.start;v.start=e.now()-E}this.set(b,v.value,v)}}set(y,b,v={}){if(b===void 0)return this.delete(y),this;let{ttl:E=this.ttl,start:S,noDisposeOnSet:w=this.noDisposeOnSet,sizeCalculation:A=this.sizeCalculation,status:T}=v,{noUpdateTTL:I=this.noUpdateTTL}=v,D=this.#F(y,b,v.size||0,A);if(this.maxEntrySize&&D>this.maxEntrySize)return T&&(T.set="miss",T.maxEntrySizeExceeded=!0),this.#_(y,"set"),this;let P=this.#i===0?void 0:this.#n.get(y);if(P===void 0)P=this.#i===0?this.#a:this.#v.length!==0?this.#v.pop():this.#i===this.#l?this.#L(!1):this.#i,this.#r[P]=y,this.#e[P]=b,this.#n.set(y,P),this.#u[this.#a]=P,this.#d[P]=this.#a,this.#a=P,this.#i++,this.#P(P,D,T),T&&(T.set="add"),I=!1;else{this.#I(P);let k=this.#e[P];if(b!==k){if(this.#A&&this.#t(k)){k.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:M}=k;M!==void 0&&!w&&(this.#S&&this.#m?.(M,y,"set"),this.#c&&this.#s?.push([M,y,"set"]))}else w||(this.#S&&this.#m?.(k,y,"set"),this.#c&&this.#s?.push([k,y,"set"]));if(this.#O(P),this.#P(P,D,T),this.#e[P]=b,T){T.set="replace";let M=k&&this.#t(k)?k.__staleWhileFetching:k;M!==void 0&&(T.oldValue=M)}}else T&&(T.set="update")}if(E!==0&&!this.#h&&this.#M(),this.#h&&(I||this.#N(P,E,S),T&&this.#T(T,P)),!w&&this.#c&&this.#s){let k=this.#s,M;for(;M=k?.shift();)this.#g?.(...M)}return this}pop(){try{for(;this.#i;){let y=this.#e[this.#o];if(this.#L(!0),this.#t(y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(this.#c&&this.#s){let y=this.#s,b;for(;b=y?.shift();)this.#g?.(...b)}}}#L(y){let b=this.#o,v=this.#r[b],E=this.#e[b];return this.#A&&this.#t(E)?E.__abortController.abort(new Error("evicted")):(this.#S||this.#c)&&(this.#S&&this.#m?.(E,v,"evict"),this.#c&&this.#s?.push([E,v,"evict"])),this.#O(b),y&&(this.#r[b]=void 0,this.#e[b]=void 0,this.#v.push(b)),this.#i===1?(this.#o=this.#a=0,this.#v.length=0):this.#o=this.#u[b],this.#n.delete(v),this.#i--,b}has(y,b={}){let{updateAgeOnHas:v=this.updateAgeOnHas,status:E}=b,S=this.#n.get(y);if(S!==void 0){let w=this.#e[S];if(this.#t(w)&&w.__staleWhileFetching===void 0)return!1;if(this.#p(S))E&&(E.has="stale",this.#T(E,S));else return v&&this.#D(S),E&&(E.has="hit",this.#T(E,S)),!0}else E&&(E.has="miss");return!1}peek(y,b={}){let{allowStale:v=this.allowStale}=b,E=this.#n.get(y);if(E===void 0||!v&&this.#p(E))return;let S=this.#e[E];return this.#t(S)?S.__staleWhileFetching:S}#k(y,b,v,E){let S=b===void 0?void 0:this.#e[b];if(this.#t(S))return S;let w=new a,{signal:A}=v;A?.addEventListener("abort",()=>w.abort(A.reason),{signal:w.signal});let T={signal:w.signal,options:v,context:E},I=(C,W=!1)=>{let{aborted:Y}=w.signal,q=v.ignoreFetchAbort&&C!==void 0;if(v.status&&(Y&&!W?(v.status.fetchAborted=!0,v.status.fetchError=w.signal.reason,q&&(v.status.fetchAbortIgnored=!0)):v.status.fetchResolved=!0),Y&&!q&&!W)return P(w.signal.reason);let $=M;return this.#e[b]===M&&(C===void 0?$.__staleWhileFetching?this.#e[b]=$.__staleWhileFetching:this.#_(y,"fetch"):(v.status&&(v.status.fetchUpdated=!0),this.set(y,C,T.options))),C},D=C=>(v.status&&(v.status.fetchRejected=!0,v.status.fetchError=C),P(C)),P=C=>{let{aborted:W}=w.signal,Y=W&&v.allowStaleOnFetchAbort,q=Y||v.allowStaleOnFetchRejection,$=q||v.noDeleteOnFetchRejection,z=M;if(this.#e[b]===M&&(!$||z.__staleWhileFetching===void 0?this.#_(y,"fetch"):Y||(this.#e[b]=z.__staleWhileFetching)),q)return v.status&&z.__staleWhileFetching!==void 0&&(v.status.returnedStale=!0),z.__staleWhileFetching;if(z.__returned===z)throw C},k=(C,W)=>{let Y=this.#C?.(y,S,T);Y&&Y instanceof Promise&&Y.then(q=>C(q===void 0?void 0:q),W),w.signal.addEventListener("abort",()=>{(!v.ignoreFetchAbort||v.allowStaleOnFetchAbort)&&(C(void 0),v.allowStaleOnFetchAbort&&(C=q=>I(q,!0)))})};v.status&&(v.status.fetchDispatched=!0);let M=new Promise(k).then(I,D),B=Object.assign(M,{__abortController:w,__staleWhileFetching:S,__returned:void 0});return b===void 0?(this.set(y,B,{...T.options,status:void 0}),b=this.#n.get(y)):this.#e[b]=B,B}#t(y){if(!this.#A)return!1;let b=y;return!!b&&b instanceof Promise&&b.hasOwnProperty("__staleWhileFetching")&&b.__abortController instanceof a}async fetch(y,b={}){let{allowStale:v=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,ttl:w=this.ttl,noDisposeOnSet:A=this.noDisposeOnSet,size:T=0,sizeCalculation:I=this.sizeCalculation,noUpdateTTL:D=this.noUpdateTTL,noDeleteOnFetchRejection:P=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:k=this.allowStaleOnFetchRejection,ignoreFetchAbort:M=this.ignoreFetchAbort,allowStaleOnFetchAbort:B=this.allowStaleOnFetchAbort,context:C,forceRefresh:W=!1,status:Y,signal:q}=b;if(!this.#A)return Y&&(Y.fetch="get"),this.get(y,{allowStale:v,updateAgeOnGet:E,noDeleteOnStaleGet:S,status:Y});let $={allowStale:v,updateAgeOnGet:E,noDeleteOnStaleGet:S,ttl:w,noDisposeOnSet:A,size:T,sizeCalculation:I,noUpdateTTL:D,noDeleteOnFetchRejection:P,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:B,ignoreFetchAbort:M,status:Y,signal:q},z=this.#n.get(y);if(z===void 0){Y&&(Y.fetch="miss");let K=this.#k(y,z,$,C);return K.__returned=K}else{let K=this.#e[z];if(this.#t(K)){let G=v&&K.__staleWhileFetching!==void 0;return Y&&(Y.fetch="inflight",G&&(Y.returnedStale=!0)),G?K.__staleWhileFetching:K.__returned=K}let Z=this.#p(z);if(!W&&!Z)return Y&&(Y.fetch="hit"),this.#I(z),E&&this.#D(z),Y&&this.#T(Y,z),K;let X=this.#k(y,z,$,C),H=X.__staleWhileFetching!==void 0&&v;return Y&&(Y.fetch=Z?"stale":"refresh",H&&Z&&(Y.returnedStale=!0)),H?X.__staleWhileFetching:X.__returned=X}}async forceFetch(y,b={}){let v=await this.fetch(y,b);if(v===void 0)throw new Error("fetch() returned undefined");return v}memo(y,b={}){let v=this.#R;if(!v)throw new Error("no memoMethod provided to constructor");let{context:E,forceRefresh:S,...w}=b,A=this.get(y,w);if(!S&&A!==void 0)return A;let T=v(y,A,{options:w,context:E});return this.set(y,T,w),T}get(y,b={}){let{allowStale:v=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:S=this.noDeleteOnStaleGet,status:w}=b,A=this.#n.get(y);if(A!==void 0){let T=this.#e[A],I=this.#t(T);return w&&this.#T(w,A),this.#p(A)?(w&&(w.get="stale"),I?(w&&v&&T.__staleWhileFetching!==void 0&&(w.returnedStale=!0),v?T.__staleWhileFetching:void 0):(S||this.#_(y,"expire"),w&&v&&(w.returnedStale=!0),v?T:void 0)):(w&&(w.get="hit"),I?T.__staleWhileFetching:(this.#I(A),E&&this.#D(A),T))}else w&&(w.get="miss")}#U(y,b){this.#d[b]=y,this.#u[y]=b}#I(y){y!==this.#a&&(y===this.#o?this.#o=this.#u[y]:this.#U(this.#d[y],this.#u[y]),this.#U(this.#a,y),this.#a=y)}delete(y){return this.#_(y,"delete")}#_(y,b){let v=!1;if(this.#i!==0){let E=this.#n.get(y);if(E!==void 0)if(v=!0,this.#i===1)this.#j(b);else{this.#O(E);let S=this.#e[E];if(this.#t(S)?S.__abortController.abort(new Error("deleted")):(this.#S||this.#c)&&(this.#S&&this.#m?.(S,y,b),this.#c&&this.#s?.push([S,y,b])),this.#n.delete(y),this.#r[E]=void 0,this.#e[E]=void 0,E===this.#a)this.#a=this.#d[E];else if(E===this.#o)this.#o=this.#u[E];else{let w=this.#d[E];this.#u[w]=this.#u[E];let A=this.#u[E];this.#d[A]=this.#d[E]}this.#i--,this.#v.push(E)}}if(this.#c&&this.#s?.length){let E=this.#s,S;for(;S=E?.shift();)this.#g?.(...S)}return v}clear(){return this.#j("delete")}#j(y){for(let b of this.#w({allowStale:!0})){let v=this.#e[b];if(this.#t(v))v.__abortController.abort(new Error("deleted"));else{let E=this.#r[b];this.#S&&this.#m?.(v,E,y),this.#c&&this.#s?.push([v,E,y])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#h&&this.#x&&(this.#h.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#o=0,this.#a=0,this.#v.length=0,this.#y=0,this.#i=0,this.#c&&this.#s){let b=this.#s,v;for(;v=b?.shift();)this.#g?.(...v)}}};r.LRUCache=p}),qs=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.ContainerIterator=r.Container=r.Base=void 0;var e=class{constructor(i=0){this.iteratorType=i}equals(i){return this.o===i.o}};r.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};r.Base=t;var n=class extends t{};r.Container=n}),Hz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[]){super(),this.S=[];let a=this;i.forEach(function(s){a.push(s)})}clear(){this.i=0,this.S=[]}push(i){return this.S.push(i),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=t;r.default=n}),Gz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[]){super(),this.j=0,this.q=[];let a=this;i.forEach(function(s){a.push(s)})}clear(){this.q=[],this.i=this.j=0}push(i){let a=this.q.length;if(this.j/a>.5&&this.j+this.i>=a&&a>4096){let s=this.i;for(let o=0;o<s;++o)this.q[o]=this.q[this.j+o];this.j=0,this.q[this.i]=i}else this.q[this.j+this.i]=i;return++this.i}pop(){if(this.i===0)return;let i=this.q[this.j++];return this.i-=1,i}front(){if(this.i!==0)return this.q[this.j]}},n=t;r.default=n}),Kz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Base{constructor(i=[],a=function(o,l){return o>l?-1:o<l?1:0},s=!0){if(super(),this.v=a,Array.isArray(i))this.C=s?[...i]:i;else{this.C=[];let l=this;i.forEach(function(c){l.C.push(c)})}this.i=this.C.length;let o=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,o)}m(i){let a=this.C[i];for(;i>0;){let s=i-1>>1,o=this.C[s];if(this.v(o,a)<=0)break;this.C[i]=o,i=s}this.C[i]=a}k(i,a){let s=this.C[i];for(;i<a;){let o=i<<1|1,l=o+1,c=this.C[o];if(l<this.i&&this.v(c,this.C[l])>0&&(o=l,c=this.C[l]),this.v(c,s)>=0)break;this.C[i]=c,i=o}this.C[i]=s}clear(){this.i=0,this.C.length=0}push(i){this.C.push(i),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let i=this.C[0],a=this.C.pop();return this.i-=1,this.i&&(this.C[0]=a,this.k(0,this.i>>1)),i}top(){return this.C[0]}find(i){return this.C.indexOf(i)>=0}remove(i){let a=this.C.indexOf(i);return a<0?!1:(a===0?this.pop():a===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(a,1,this.C.pop()),this.i-=1,this.m(a),this.k(a,this.i>>1)),!0)}updateItem(i){let a=this.C.indexOf(i);return a<0?!1:(this.m(a),this.k(a,this.i>>1),!0)}toArray(){return[...this.C]}},n=t;r.default=n}),s1=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=class extends e.Container{},n=t;r.default=n}),Ws=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),cU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.RandomIterator=void 0;var e=qs(),t=Ws(),n=class extends e.ContainerIterator{constructor(i,a){super(a),this.o=i,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(i){this.container.setElementByPos(this.o,i)}};r.RandomIterator=n}),Yz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(s1()),t=cU();function n(o){return o&&o.t?o:{default:o}}var i=class fU extends t.RandomIterator{constructor(l,c,f){super(l,f),this.container=c}copy(){return new fU(this.o,this.container,this.iteratorType)}},a=class extends e.default{constructor(o=[],l=!0){if(super(),Array.isArray(o))this.J=l?[...o]:o,this.i=o.length;else{this.J=[];let c=this;o.forEach(function(f){c.pushBack(f)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J[o]}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J.splice(o,1),this.i-=1,this.i}eraseElementByValue(o){let l=0;for(let c=0;c<this.i;++c)this.J[c]!==o&&(this.J[l++]=this.J[c]);return this.i=this.J.length=l,this.i}eraseElementByIterator(o){let l=o.o;return o=o.next(),this.eraseElementByPos(l),o}pushBack(o){return this.J.push(o),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;this.J[o]=l}insert(o,l,c=1){if(o<0||o>this.i)throw new RangeError;return this.J.splice(o,0,...new Array(c).fill(l)),this.i+=c,this.i}find(o){for(let l=0;l<this.i;++l)if(this.J[l]===o)return new i(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let o=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[o++]=this.J[l]);return this.i=this.J.length=o,this.i}sort(o){this.J.sort(o)}forEach(o){for(let l=0;l<this.i;++l)o(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},s=a;r.default=s}),zz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(s1()),t=qs(),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class dU extends t.ContainerIterator{constructor(c,f,h,p){super(p),this.o=c,this.h=f,this.container=h,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=c}copy(){return new dU(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;l.forEach(function(f){c.pushBack(f)})}V(l){let{L:c,B:f}=l;c.B=f,f.L=c,l===this.p&&(this.p=f),l===this._&&(this._=c),this.i-=1}G(l,c){let f=c.B,h={l,L:c,B:f};c.B=h,f.L=h,c===this.h&&(this.p=h),f===this.h&&(this._=h),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return c.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}eraseElementByValue(l){let c=this.p;for(;c!==this.h;)c.l===l&&this.V(c),c=c.B;return this.i}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,n.throwIteratorAccessError)(),l=l.next(),this.V(c),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,c){if(l<0||l>this.i-1)throw new RangeError;let f=this.p;for(;l--;)f=f.B;f.l=c}insert(l,c,f=1){if(l<0||l>this.i)throw new RangeError;if(f<=0)return this.i;if(l===0)for(;f--;)this.pushFront(c);else if(l===this.i)for(;f--;)this.pushBack(c);else{let h=this.p;for(let g=1;g<l;++g)h=h.B;let p=h.B;for(this.i+=f;f--;)h.B={l:c,L:h},h.B.L=h,h=h.B;h.B=p,p.L=h}return this.i}find(l){let c=this.p;for(;c!==this.h;){if(c.l===l)return new a(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,c=this._,f=0;for(;f<<1<this.i;){let h=l.l;l.l=c.l,c.l=h,l=l.B,c=c.L,f+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let c=l;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;l.B=c.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let c=[];this.forEach(function(h){c.push(h)}),c.sort(l);let f=this.p;c.forEach(function(h){f.l=h,f=f.B})}merge(l){let c=this;if(this.i===0)l.forEach(function(f){c.pushBack(f)});else{let f=this.p;l.forEach(function(h){for(;f!==c.h&&f.l<=h;)f=f.B;c.G(h,f.L)})}return this.i}forEach(l){let c=this.p,f=0;for(;c!==this.h;)l(c.l,f++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},o=s;r.default=o}),qz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=n(s1()),t=cU();function n(o){return o&&o.t?o:{default:o}}var i=class hU extends t.RandomIterator{constructor(l,c,f){super(l,f),this.container=c}copy(){return new hU(this.o,this.container,this.iteratorType)}},a=class extends e.default{constructor(o=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size;if(typeof o.size=="function")return o.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(c/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let f=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(f>>1),this.D=this.N=this.F-c%this.F>>1;let h=this;o.forEach(function(p){h.pushBack(p)})}T(){let o=[],l=Math.max(this.P>>1,1);for(let c=0;c<l;++c)o[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)o[o.length]=this.A[c];for(let c=0;c<this.R;++c)o[o.length]=this.A[c];o[o.length]=[...this.A[this.R]],this.j=l,this.R=o.length-1;for(let c=0;c<l;++c)o[o.length]=new Array(this.F);this.A=o,this.P=o.length}O(o){let l=this.D+o+1,c=l%this.F,f=c-1,h=this.j+(l-c)/this.F;return c===0&&(h-=1),h%=this.P,f<0&&(f+=this.F),{curNodeBucketIndex:h,curNodePointerIndex:f}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(o){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=o,this.i}popBack(){if(this.i===0)return;let o=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,o}pushFront(o){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=o,this.i}popFront(){if(this.i===0)return;let o=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,o}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(o);return this.A[l][c]}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:f}=this.O(o);this.A[c][f]=l}insert(o,l,c=1){if(o<0||o>this.i)throw new RangeError;if(o===0)for(;c--;)this.pushFront(l);else if(o===this.i)for(;c--;)this.pushBack(l);else{let f=[];for(let h=o;h<this.i;++h)f.push(this.getElementByPos(h));this.cut(o-1);for(let h=0;h<c;++h)this.pushBack(l);for(let h=0;h<f.length;++h)this.pushBack(f[h])}return this.i}cut(o){if(o<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(o);return this.R=l,this.N=c,this.i=o+1,this.i}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;if(o===0)this.popFront();else if(o===this.i-1)this.popBack();else{let l=[];for(let f=o+1;f<this.i;++f)l.push(this.getElementByPos(f));this.cut(o),this.popBack();let c=this;l.forEach(function(f){c.pushBack(f)})}return this.i}eraseElementByValue(o){if(this.i===0)return 0;let l=[];for(let f=0;f<this.i;++f){let h=this.getElementByPos(f);h!==o&&l.push(h)}let c=l.length;for(let f=0;f<c;++f)this.setElementByPos(f,l[f]);return this.cut(c-1)}eraseElementByIterator(o){let l=o.o;return this.eraseElementByPos(l),o=o.next(),o}find(o){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===o)return new i(l,this);return this.end()}reverse(){let o=0,l=this.i-1;for(;o<l;){let c=this.getElementByPos(o);this.setElementByPos(o,this.getElementByPos(l)),this.setElementByPos(l,c),o+=1,l-=1}}unique(){if(this.i<=1)return this.i;let o=1,l=this.getElementByPos(0);for(let c=1;c<this.i;++c){let f=this.getElementByPos(c);f!==l&&(l=f,this.setElementByPos(o++,f))}for(;this.i>o;)this.popBack();return this.i}sort(o){let l=[];for(let c=0;c<this.i;++c)l.push(this.getElementByPos(c));l.sort(o);for(let c=0;c<this.i;++c)this.setElementByPos(c,l[c])}shrinkToFit(){if(this.i===0)return;let o=[];this.forEach(function(l){o.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<o.length;++l)this.pushBack(o[l])}forEach(o){for(let l=0;l<this.i;++l)o(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let o=0;o<this.i;++o)yield this.getElementByPos(o)}).bind(this)()}},s=a;r.default=s}),Wz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.TreeNodeEnableIndex=r.TreeNode=void 0;var e=class{constructor(n,i){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=i}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let i=n.tt;for(;i.U===n;)n=i,i=n.tt;n=i}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let i=n.tt;for(;i.W===n;)n=i,i=n.tt;return n.W!==i?i:n}}te(){let n=this.tt,i=this.W,a=i.U;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.U=this,this.tt=i,this.W=a,a&&(a.tt=this),i}se(){let n=this.tt,i=this.U,a=i.W;return n.tt===this?n.tt=i:n.U===this?n.U=i:n.W=i,i.tt=n,i.W=this,this.tt=i,this.U=a,a&&(a.tt=this),i}};r.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};r.TreeNodeEnableIndex=t}),pU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=Wz(),t=qs(),n=Ws(),i=class extends t.Container{constructor(s=function(l,c){return l<c?-1:l>c?1:0},o=!1){super(),this.Y=void 0,this.v=s,o?(this.re=e.TreeNodeEnableIndex,this.M=function(l,c,f){let h=this.ne(l,c,f);if(h){let p=h.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let g=this.he(h);if(g){let{parentNode:y,grandParent:b,curNode:v}=g;y.ie(),b.ie(),v.ie()}}return this.i},this.V=function(l){let c=this.fe(l);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=e.TreeNode,this.M=function(l,c,f){let h=this.ne(l,c,f);return h&&this.he(h),this.i},this.V=this.fe),this.h=new this.re}X(s,o){let l=this.h;for(;s;){let c=this.v(s.u,o);if(c<0)s=s.W;else if(c>0)l=s,s=s.U;else return s}return l}Z(s,o){let l=this.h;for(;s;)this.v(s.u,o)<=0?s=s.W:(l=s,s=s.U);return l}$(s,o){let l=this.h;for(;s;){let c=this.v(s.u,o);if(c<0)l=s,s=s.W;else if(c>0)s=s.U;else return s}return l}rr(s,o){let l=this.h;for(;s;)this.v(s.u,o)<0?(l=s,s=s.W):s=s.U;return l}ue(s){for(;;){let o=s.tt;if(o===this.h)return;if(s.ee===1){s.ee=0;return}if(s===o.U){let l=o.W;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.te():o.te();else if(l.W&&l.W.ee===1){l.ee=o.ee,o.ee=0,l.W.ee=0,o===this.Y?this.Y=o.te():o.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,s=o)}else{let l=o.U;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.se():o.se();else if(l.U&&l.U.ee===1){l.ee=o.ee,o.ee=0,l.U.ee=0,o===this.Y?this.Y=o.se():o.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,s=o)}}}fe(s){if(this.i===1)return this.clear(),this.h;let o=s;for(;o.U||o.W;){if(o.W)for(o=o.W;o.U;)o=o.U;else o=o.U;[s.u,o.u]=[o.u,s.u],[s.l,o.l]=[o.l,s.l],s=o}this.h.U===o?this.h.U=o.tt:this.h.W===o&&(this.h.W=o.tt),this.ue(o);let l=o.tt;return o===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(s,o){return s===void 0?!1:this.oe(s.U,o)||o(s)?!0:this.oe(s.W,o)}he(s){for(;;){let o=s.tt;if(o.ee===0)return;let l=o.tt;if(o===l.U){let c=l.W;if(c&&c.ee===1){if(c.ee=o.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===o.W){if(s.ee=0,s.U&&(s.U.tt=o),s.W&&(s.W.tt=l),o.W=s.U,l.U=s.W,s.U=o,s.W=l,l===this.Y)this.Y=s,this.h.tt=s;else{let f=l.tt;f.U===l?f.U=s:f.W=s}return s.tt=l.tt,o.tt=s,l.tt=s,l.ee=1,{parentNode:o,grandParent:l,curNode:s}}else o.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let c=l.U;if(c&&c.ee===1){if(c.ee=o.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===o.U){if(s.ee=0,s.U&&(s.U.tt=l),s.W&&(s.W.tt=o),l.W=s.U,o.U=s.W,s.U=l,s.W=o,l===this.Y)this.Y=s,this.h.tt=s;else{let f=l.tt;f.U===l?f.U=s:f.W=s}return s.tt=l.tt,o.tt=s,l.tt=s,l.ee=1,{parentNode:o,grandParent:l,curNode:s}}else o.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(s,o,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(s,o),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,f=this.h.U,h=this.v(f.u,s);if(h===0){f.l=o;return}else if(h>0)f.U=new this.re(s,o),f.U.tt=f,c=f.U,this.h.U=c;else{let p=this.h.W,g=this.v(p.u,s);if(g===0){p.l=o;return}else if(g<0)p.W=new this.re(s,o),p.W.tt=p,c=p.W,this.h.W=c;else{if(l!==void 0){let y=l.o;if(y!==this.h){let b=this.v(y.u,s);if(b===0){y.l=o;return}else if(b>0){let v=y.L(),E=this.v(v.u,s);if(E===0){v.l=o;return}else E<0&&(c=new this.re(s,o),v.W===void 0?(v.W=c,c.tt=v):(y.U=c,c.tt=y))}}}if(c===void 0)for(c=this.Y;;){let y=this.v(c.u,s);if(y>0){if(c.U===void 0){c.U=new this.re(s,o),c.U.tt=c,c=c.U;break}c=c.U}else if(y<0){if(c.W===void 0){c.W=new this.re(s,o),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=o;return}}}}return this.i+=1,c}I(s,o){for(;s;){let l=this.v(s.u,o);if(l<0)s=s.W;else if(l>0)s=s.U;else return s}return s||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(s,o){let l=s.o;if(l===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return l.u=o,!0;if(l===this.h.U)return this.v(l.B().u,o)>0?(l.u=o,!0):!1;if(l===this.h.W)return this.v(l.L().u,o)<0?(l.u=o,!0):!1;let c=l.L().u;if(this.v(c,o)>=0)return!1;let f=l.B().u;return this.v(f,o)<=0?!1:(l.u=o,!0)}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=0,l=this;return this.oe(this.Y,function(c){return s===o?(l.V(c),!0):(o+=1,!1)}),this.i}eraseElementByKey(s){if(this.i===0)return!1;let o=this.I(this.Y,s);return o===this.h?!1:(this.V(o),!0)}eraseElementByIterator(s){let o=s.o;o===this.h&&(0,n.throwIteratorAccessError)();let l=o.W===void 0;return s.iteratorType===0?l&&s.next():(!l||o.U===void 0)&&s.next(),this.V(o),s}forEach(s){let o=0;for(let l of this)s(l,o++,this)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o,l=0;for(let c of this){if(l===s){o=c;break}l+=1}return o}getHeight(){if(this.i===0)return 0;let s=function(o){return o?Math.max(s(o.U),s(o.W))+1:0};return s(this.Y)}},a=i;r.default=a}),mU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=qs(),t=Ws(),n=class extends e.ContainerIterator{constructor(a,s,o){super(o),this.o=a,this.h=s,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let a=this.o,s=this.h.tt;if(a===this.h)return s?s.rt-1:0;let o=0;for(a.U&&(o+=a.U.rt);a!==s;){let l=a.tt;a===l.W&&(o+=1,l.U&&(o+=l.U.rt)),a=l}return o}},i=n;r.default=i}),Vz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(pU()),t=i(mU()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class gU extends t.default{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new gU(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[],c,f){super(c,f);let h=this;l.forEach(function(p){h.insert(p)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,c){return this.M(l,void 0,c)}find(l){let c=this.I(this.Y,l);return new a(c,this.h,this)}lowerBound(l){let c=this.X(this.Y,l);return new a(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new a(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new a(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new a(c,this.h,this)}union(l){let c=this;return l.forEach(function(f){c.insert(f)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=s;r.default=o}),Qz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=i(pU()),t=i(mU()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class yU extends t.default{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(f,h){if(h==="0")return c.o.u;if(h==="1")return c.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return c.o.l=p,!0}})}copy(){return new yU(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.default{constructor(l=[],c,f){super(c,f);let h=this;l.forEach(function(p){h.setElement(p[0],p[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let c=this.X(this.Y,l);return new a(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new a(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new a(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new a(c,this.h,this)}setElement(l,c,f){return this.M(l,c,f)}find(l){let c=this.I(this.Y,l);return new a(c,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let c=this;return l.forEach(function(f){c.setElement(f[0],f[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=s;r.default=o}),vU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=e;function e(t){let n=typeof t;return n==="object"&&t!==null||n==="function"}}),bU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.HashContainerIterator=r.HashContainer=void 0;var e=qs(),t=i(vU()),n=Ws();function i(o){return o&&o.t?o:{default:o}}var a=class extends e.ContainerIterator{constructor(o,l,c){super(c),this.o=o,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};r.HashContainerIterator=a;var s=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(o){let{L:l,B:c}=o;l.B=c,c.L=l,o===this.p&&(this.p=c),o===this._&&(this._=l),this.i-=1}M(o,l,c){c===void 0&&(c=(0,t.default)(o));let f;if(c){let h=o[this.HASH_TAG];if(h!==void 0)return this.H[h].l=l,this.i;Object.defineProperty(o,this.HASH_TAG,{value:this.H.length,configurable:!0}),f={u:o,l,L:this._,B:this.h},this.H.push(f)}else{let h=this.g[o];if(h)return h.l=l,this.i;f={u:o,l,L:this._,B:this.h},this.g[o]=f}return this.i===0?(this.p=f,this.h.B=f):this._.B=f,this._=f,this.h.L=f,++this.i}I(o,l){if(l===void 0&&(l=(0,t.default)(o)),l){let c=o[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[o]||this.h}clear(){let o=this.HASH_TAG;this.H.forEach(function(l){delete l.u[o]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(o,l){let c;if(l===void 0&&(l=(0,t.default)(o)),l){let f=o[this.HASH_TAG];if(f===void 0)return!1;delete o[this.HASH_TAG],c=this.H[f],delete this.H[f]}else{if(c=this.g[o],c===void 0)return!1;delete this.g[o]}return this.V(c),!0}eraseElementByIterator(o){let l=o.o;return l===this.h&&(0,n.throwIteratorAccessError)(),this.V(l),o.next()}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return this.V(l),this.i}};r.HashContainer=s}),Xz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=bU(),t=Ws(),n=class xU extends e.HashContainerIterator{constructor(o,l,c,f){super(o,l,f),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new xU(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(s=[]){super();let o=this;s.forEach(function(l){o.insert(l)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(s,o){return this.M(s,void 0,o)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=this.p;for(;s--;)o=o.B;return o.u}find(s,o){let l=this.I(s,o);return new n(l,this.h,this)}forEach(s){let o=0,l=this.p;for(;l!==this.h;)s(l.u,o++,this),l=l.B}[Symbol.iterator](){return(function*(){let s=this.p;for(;s!==this.h;)yield s.u,s=s.B}).bind(this)()}},a=i;r.default=a}),Zz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),r.default=void 0;var e=bU(),t=i(vU()),n=Ws();function i(l){return l&&l.t?l:{default:l}}var a=class SU extends e.HashContainerIterator{constructor(c,f,h,p){super(c,f,p),this.container=h}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(f,h){if(h==="0")return c.o.u;if(h==="1")return c.o.l},set(f,h,p){if(h!=="1")throw new TypeError("props must be 1");return c.o.l=p,!0}})}copy(){return new SU(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(f){c.setElement(f[0],f[1])})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,c,f){return this.M(l,c,f)}getElementByKey(l,c){if(c===void 0&&(c=(0,t.default)(l)),c){let h=l[this.HASH_TAG];return h!==void 0?this.H[h].l:void 0}let f=this.g[l];return f?f.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return[c.u,c.l]}find(l,c){let f=this.I(l,c);return new a(f,this.h,this)}forEach(l){let c=0,f=this.p;for(;f!==this.h;)l([f.u,f.l],c++,this),f=f.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},o=s;r.default=o}),Jz=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"t",{value:!0}),Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return i.default}});var e=h(Hz()),t=h(Gz()),n=h(Kz()),i=h(Yz()),a=h(zz()),s=h(qz()),o=h(Vz()),l=h(Qz()),c=h(Xz()),f=h(Zz());function h(p){return p&&p.t?p:{default:p}}}),eq=He((r,e)=>{Me(),Fe(),Ne();var t=Jz().OrderedSet,n=Fs()("number-allocator:trace"),i=Fs()("number-allocator:error");function a(o,l){this.low=o,this.high=l}a.prototype.equals=function(o){return this.low===o.low&&this.high===o.high},a.prototype.compare=function(o){return this.low<o.low&&this.high<o.low?-1:o.low<this.low&&o.high<this.low?1:0};function s(o,l){if(!(this instanceof s))return new s(o,l);this.min=o,this.max=l,this.ss=new t([],(c,f)=>c.compare(f)),n("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let o=this.ss.begin(),l=o.pointer.low,c=o.pointer.high,f=l;return f+1<=c?this.ss.updateKeyByIterator(o,new a(l+1,c)):this.ss.eraseElementByPos(0),n("alloc():"+f),f},s.prototype.use=function(o){let l=new a(o,o),c=this.ss.lowerBound(l);if(!c.equals(this.ss.end())){let f=c.pointer.low,h=c.pointer.high;return c.pointer.equals(l)?(this.ss.eraseElementByIterator(c),n("use():"+o),!0):f>o?!1:f===o?(this.ss.updateKeyByIterator(c,new a(f+1,h)),n("use():"+o),!0):h===o?(this.ss.updateKeyByIterator(c,new a(f,h-1)),n("use():"+o),!0):(this.ss.updateKeyByIterator(c,new a(o+1,h)),this.ss.insert(new a(f,o-1)),n("use():"+o),!0)}return n("use():failed"),!1},s.prototype.free=function(o){if(o<this.min||o>this.max){i("free():"+o+" is out of range");return}let l=new a(o,o),c=this.ss.upperBound(l);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(l);return}c.pre();let f=c.pointer.high;c.pointer.high+1===o?this.ss.updateKeyByIterator(c,new a(f,o)):this.ss.insert(l)}else if(c.equals(this.ss.begin()))if(o+1===c.pointer.low){let f=c.pointer.high;this.ss.updateKeyByIterator(c,new a(o,f))}else this.ss.insert(l);else{let f=c.pointer.low,h=c.pointer.high;c.pre();let p=c.pointer.low;c.pointer.high+1===o?o+1===f?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new a(p,h))):this.ss.updateKeyByIterator(c,new a(p,o)):o+1===f?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new a(o,h))):this.ss.insert(l)}n("free():"+o)},s.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let o of this.ss)console.log(o)},e.exports=s}),EU=He((r,e)=>{Me(),Fe(),Ne();var t=eq();e.exports.NumberAllocator=t}),tq=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=$z(),t=EU(),n=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(i){i>0&&(this.aliasToTopic=new e.LRUCache({max:i}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,i),this.max=i,this.length=0)}put(i,a){if(a===0||a>this.max)return!1;let s=this.aliasToTopic.get(a);return s&&delete this.topicToAlias[s],this.aliasToTopic.set(a,i),this.topicToAlias[i]=a,this.numberAllocator.use(a),this.length=this.aliasToTopic.size,!0}getTopicByAlias(i){return this.aliasToTopic.get(i)}getAliasByTopic(i){let a=this.topicToAlias[i];return typeof a<"u"&&this.aliasToTopic.get(a),a}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};r.default=n}),rq=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(r,"__esModule",{value:!0});var t=K0(),n=e(tq()),i=Kc(),a=(s,o)=>{s.log("_handleConnack");let{options:l}=s,c=l.protocolVersion===5?o.reasonCode:o.returnCode;if(clearTimeout(s.connackTimer),delete s.topicAliasSend,o.properties){if(o.properties.topicAliasMaximum){if(o.properties.topicAliasMaximum>65535){s.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}o.properties.topicAliasMaximum>0&&(s.topicAliasSend=new n.default(o.properties.topicAliasMaximum))}o.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=o.properties.serverKeepAlive),o.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=o.properties.maximumPacketSize)}if(c===0)s.reconnecting=!1,s._onConnect(o);else if(c>0){let f=new i.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);s.emit("error",f),s.options.reconnectOnConnackError&&s._cleanUp(!0)}};r.default=a}),nq=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(t,n,i)=>{t.log("handling pubrel packet");let a=typeof i<"u"?i:t.noop,{messageId:s}=n,o={cmd:"pubcomp",messageId:s};t.incomingStore.get(n,(l,c)=>{l?t._sendPacket(o,a):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,f=>{if(f)return a(f);t.incomingStore.del(c,t.noop),t._sendPacket(o,a)}))})};r.default=e}),iq=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(Bz()),n=e(jz()),i=e(rq()),a=e(K0()),s=e(nq()),o=(l,c,f)=>{let{options:h}=l;if(h.protocolVersion===5&&h.properties&&h.properties.maximumPacketSize&&h.properties.maximumPacketSize<c.length)return l.emit("error",new Error(`exceeding packets size ${c.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(l,c,f);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,a.default)(l,c),f();break;case"pubrel":l.reschedulePing(),(0,s.default)(l,c,f);break;case"connack":(0,i.default)(l,c),f();break;case"auth":l.reschedulePing(),(0,n.default)(l,c),f();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),f();break;case"disconnect":l.emit("disconnect",c),f();break;default:l.log("_handlePacket :: unknown command"),f();break}};r.default=o}),wU=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};r.default=e}),aq=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=class{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};r.default=e}),sq=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedEventEmitter=void 0;var t=e((iu(),qt(el))),n=Kc(),i=class{};r.TypedEventEmitter=i,(0,n.applyMixin)(i,t.default)}),Y0=He((r,e)=>{Me(),Fe(),Ne();function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),oq=He((r,e)=>{Me(),Fe(),Ne();var t=Y0().default;function n(i,a){if(t(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var o=s.call(i,a||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),lq=He((r,e)=>{Me(),Fe(),Ne();var t=Y0().default,n=oq();function i(a){var s=n(a,"string");return t(s)=="symbol"?s:s+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),uq=He((r,e)=>{Me(),Fe(),Ne();var t=lq();function n(i,a,s){return(a=t(a))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),cq=He((r,e)=>{Me(),Fe(),Ne();function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),fq=He((r,e)=>{Me(),Fe(),Ne();function t(n,i){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var s,o,l,c,f=[],h=!0,p=!1;try{if(l=(a=a.call(n)).next,i===0){if(Object(a)!==a)return;h=!1}else for(;!(h=(s=l.call(a)).done)&&(f.push(s.value),f.length!==i);h=!0);}catch(g){p=!0,o=g}finally{try{if(!h&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(p)throw o}}return f}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),dq=He((r,e)=>{Me(),Fe(),Ne();function t(n,i){(i==null||i>n.length)&&(i=n.length);for(var a=0,s=Array(i);a<i;a++)s[a]=n[a];return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),hq=He((r,e)=>{Me(),Fe(),Ne();var t=dq();function n(i,a){if(i){if(typeof i=="string")return t(i,a);var s={}.toString.call(i).slice(8,-1);return s==="Object"&&i.constructor&&(s=i.constructor.name),s==="Map"||s==="Set"?Array.from(i):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(i,a):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),pq=He((r,e)=>{Me(),Fe(),Ne();function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),mq=He((r,e)=>{Me(),Fe(),Ne();var t=cq(),n=fq(),i=hq(),a=pq();function s(o,l){return t(o)||n(o,l)||i(o,l)||a()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),_U=He((r,e)=>{Me(),Fe(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.fastUniqueNumbers={}))})(r,function(t){var n=function(g){return function(y){var b=g(y);return y.add(b),b}},i=function(g){return function(y,b){return g.set(y,b),b}},a=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,o=s*2,l=function(g,y){return function(b){var v=y.get(b),E=v===void 0?b.size:v<o?v+1:0;if(!b.has(E))return g(b,E);if(b.size<s){for(;b.has(E);)E=Math.floor(Math.random()*o);return g(b,E)}if(b.size>a)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;b.has(E);)E=Math.floor(Math.random()*a);return g(b,E)}},c=new WeakMap,f=i(c),h=l(f,c),p=n(h);t.addUniqueNumber=p,t.generateUniqueNumber=h})}),gq=He((r,e)=>{Me(),Fe(),Ne();function t(i,a,s,o,l,c,f){try{var h=i[c](f),p=h.value}catch(g){return void s(g)}h.done?a(p):Promise.resolve(p).then(o,l)}function n(i){return function(){var a=this,s=arguments;return new Promise(function(o,l){var c=i.apply(a,s);function f(p){t(c,o,l,f,h,"next",p)}function h(p){t(c,o,l,f,h,"throw",p)}f(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),TU=He((r,e)=>{Me(),Fe(),Ne();function t(n,i){this.v=n,this.k=i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),AU=He((r,e)=>{Me(),Fe(),Ne();function t(n,i,a,s){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}e.exports=t=function(l,c,f,h){function p(g,y){t(l,g,function(b){return this._invoke(g,y,b)})}c?o?o(l,c,{value:f,enumerable:!h,configurable:!h,writable:!h}):l[c]=f:(p("next",0),p("throw",1),p("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,a,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),DU=He((r,e)=>{Me(),Fe(),Ne();var t=AU();function n(){var i,a,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",l=s.toStringTag||"@@toStringTag";function c(E,S,w,A){var T=S&&S.prototype instanceof h?S:h,I=Object.create(T.prototype);return t(I,"_invoke",(function(D,P,k){var M,B,C,W=0,Y=k||[],q=!1,$={p:0,n:0,v:i,a:z,f:z.bind(i,4),d:function(K,Z){return M=K,B=0,C=i,$.n=Z,f}};function z(K,Z){for(B=K,C=Z,a=0;!q&&W&&!X&&a<Y.length;a++){var X,H=Y[a],G=$.p,J=H[2];K>3?(X=J===Z)&&(C=H[(B=H[4])?5:(B=3,3)],H[4]=H[5]=i):H[0]<=G&&((X=K<2&&G<H[1])?(B=0,$.v=Z,$.n=H[1]):G<J&&(X=K<3||H[0]>Z||Z>J)&&(H[4]=K,H[5]=Z,$.n=J,B=0))}if(X||K>1)return f;throw q=!0,Z}return function(K,Z,X){if(W>1)throw TypeError("Generator is already running");for(q&&Z===1&&z(Z,X),B=Z,C=X;(a=B<2?i:C)||!q;){M||(B?B<3?(B>1&&($.n=-1),z(B,C)):$.n=C:$.v=C);try{if(W=2,M){if(B||(K="next"),a=M[K]){if(!(a=a.call(M,C)))throw TypeError("iterator result is not an object");if(!a.done)return a;C=a.value,B<2&&(B=0)}else B===1&&(a=M.return)&&a.call(M),B<2&&(C=TypeError("The iterator does not provide a '"+K+"' method"),B=1);M=i}else if((a=(q=$.n<0)?C:D.call(P,$))!==f)break}catch(H){M=i,B=1,C=H}finally{W=1}}return{value:a,done:q}}})(E,w,A),!0),I}var f={};function h(){}function p(){}function g(){}a=Object.getPrototypeOf;var y=[][o]?a(a([][o]())):(t(a={},o,function(){return this}),a),b=g.prototype=h.prototype=Object.create(y);function v(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,g):(E.__proto__=g,t(E,l,"GeneratorFunction")),E.prototype=Object.create(b),E}return p.prototype=g,t(b,"constructor",g),t(g,"constructor",p),p.displayName="GeneratorFunction",t(g,l,"GeneratorFunction"),t(b),t(b,l,"Generator"),t(b,o,function(){return this}),t(b,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:c,m:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),OU=He((r,e)=>{Me(),Fe(),Ne();var t=TU(),n=AU();function i(a,s){function o(c,f,h,p){try{var g=a[c](f),y=g.value;return y instanceof t?s.resolve(y.v).then(function(b){o("next",b,h,p)},function(b){o("throw",b,h,p)}):s.resolve(y).then(function(b){g.value=b,h(g)},function(b){return o("throw",b,h,p)})}catch(b){p(b)}}var l;this.next||(n(i.prototype),n(i.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(c,f,h){function p(){return new s(function(g,y){o(c,h,g,y)})}return l=l?l.then(p,p):p()},!0)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),IU=He((r,e)=>{Me(),Fe(),Ne();var t=DU(),n=OU();function i(a,s,o,l,c){return new n(t().w(a,s,o,l),c||Promise)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),yq=He((r,e)=>{Me(),Fe(),Ne();var t=IU();function n(i,a,s,o,l){var c=t(i,a,s,o,l);return c.next().then(function(f){return f.done?f.value:c.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),vq=He((r,e)=>{Me(),Fe(),Ne();function t(n){var i=Object(n),a=[];for(var s in i)a.unshift(s);return function o(){for(;a.length;)if((s=a.pop())in i)return o.value=s,o.done=!1,o;return o.done=!0,o}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),bq=He((r,e)=>{Me(),Fe(),Ne();var t=Y0().default;function n(i){if(i!=null){var a=i[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(a)return a.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length))return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}}}throw new TypeError(t(i)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),xq=He((r,e)=>{Me(),Fe(),Ne();var t=TU(),n=DU(),i=yq(),a=IU(),s=OU(),o=vq(),l=bq();function c(){var f=n(),h=f.m(c),p=(Object.getPrototypeOf?Object.getPrototypeOf(h):h.__proto__).constructor;function g(v){var E=typeof v=="function"&&v.constructor;return!!E&&(E===p||(E.displayName||E.name)==="GeneratorFunction")}var y={throw:1,return:2,break:3,continue:3};function b(v){var E,S;return function(w){E||(E={stop:function(){return S(w.a,2)},catch:function(){return w.v},abrupt:function(A,T){return S(w.a,y[A],T)},delegateYield:function(A,T,I){return E.resultName=T,S(w.d,l(A),I)},finish:function(A){return S(w.f,A)}},S=function(A,T,I){w.p=E.prev,w.n=E.next;try{return A(T,I)}finally{E.next=w.n}}),E.resultName&&(E[E.resultName]=w.v,E.resultName=void 0),E.sent=w.v,E.next=w.n;try{return v.call(this,E)}finally{w.p=E.prev,w.n=E.next}}}return(e.exports=c=function(){return{wrap:function(v,E,S,w){return f.w(b(v),E,S,w&&w.reverse())},isGeneratorFunction:g,mark:f.m,awrap:function(v,E){return new t(v,E)},AsyncIterator:s,async:function(v,E,S,w,A){return(g(E)?a:i)(b(v),E,S,w,A)},keys:o,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}),Sq=He((r,e)=>{Me(),Fe(),Ne();var t=xq()();e.exports=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),Eq=He((r,e)=>{Me(),Fe(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,uq(),mq(),_U(),gq(),Sq()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.brokerFactory={},t._defineProperty,t._slicedToArray,t.fastUniqueNumbers,t._asyncToGenerator,t._regeneratorRuntime))})(r,function(t,n,i,a,s,o){var l=function(S){return typeof S.start=="function"},c=new WeakMap;function f(S,w){var A=Object.keys(S);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(S);w&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(S,I).enumerable})),A.push.apply(A,T)}return A}function h(S){for(var w=1;w<arguments.length;w++){var A=arguments[w]!=null?arguments[w]:{};w%2?f(Object(A),!0).forEach(function(T){n(S,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(T){Object.defineProperty(S,T,Object.getOwnPropertyDescriptor(A,T))})}return S}var p=function(S){return h(h({},S),{},{connect:function(w){var A=w.call;return s(o.mark(function T(){var I,D,P,k;return o.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return I=new MessageChannel,D=I.port1,P=I.port2,M.next=1,A("connect",{port:D},[D]);case 1:return k=M.sent,c.set(P,k),M.abrupt("return",P);case 2:case"end":return M.stop()}},T)}))},disconnect:function(w){var A=w.call;return(function(){var T=s(o.mark(function I(D){var P;return o.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(P=c.get(D),P!==void 0){k.next=1;break}throw new Error("The given port is not connected.");case 1:return k.next=2,A("disconnect",{portId:P});case 2:case"end":return k.stop()}},I)}));return function(I){return T.apply(this,arguments)}})()},isSupported:function(w){var A=w.call;return function(){return A("isSupported")}}})};function g(S,w){var A=Object.keys(S);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(S);w&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(S,I).enumerable})),A.push.apply(A,T)}return A}function y(S){for(var w=1;w<arguments.length;w++){var A=arguments[w]!=null?arguments[w]:{};w%2?g(Object(A),!0).forEach(function(T){n(S,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function(T){Object.defineProperty(S,T,Object.getOwnPropertyDescriptor(A,T))})}return S}var b=new WeakMap,v=function(S){if(b.has(S))return b.get(S);var w=new Map;return b.set(S,w),w},E=function(S){var w=p(S);return function(A){var T=v(A);A.addEventListener("message",function(Y){var q=Y.data,$=q.id;if($!==null&&T.has($)){var z=T.get($),K=z.reject,Z=z.resolve;T.delete($),q.error===void 0?Z(q.result):K(new Error(q.error.message))}}),l(A)&&A.start();for(var I=function(Y){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(z,K){var Z=a.generateUniqueNumber(T);T.set(Z,{reject:K,resolve:z}),q===null?A.postMessage({id:Z,method:Y},$):A.postMessage({id:Z,method:Y,params:q},$)})},D=function(Y,q){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];A.postMessage({id:null,method:Y,params:q},$)},P={},k=0,M=Object.entries(w);k<M.length;k++){var B=i(M[k],2),C=B[0],W=B[1];P=y(y({},P),{},n({},C,W({call:I,notify:D})))}return y({},P)}};t.createBroker=E})}),wq=He((r,e)=>{Me(),Fe(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,Y0(),Eq(),_U()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimersBroker={},t._typeof,t.brokerFactory,t.fastUniqueNumbers))})(r,function(t,n,i,a){var s=new Map([[0,null]]),o=new Map([[0,null]]),l=i.createBroker({clearInterval:function(f){var h=f.call;return function(p){n(s.get(p))==="symbol"&&(s.set(p,null),h("clear",{timerId:p,timerType:"interval"}).then(function(){s.delete(p)}))}},clearTimeout:function(f){var h=f.call;return function(p){n(o.get(p))==="symbol"&&(o.set(p,null),h("clear",{timerId:p,timerType:"timeout"}).then(function(){o.delete(p)}))}},setInterval:function(f){var h=f.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,b=new Array(y>2?y-2:0),v=2;v<y;v++)b[v-2]=arguments[v];var E=Symbol(),S=a.generateUniqueNumber(s);s.set(S,E);var w=function(){return h("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"interval"}).then(function(){var A=s.get(S);if(A===void 0)throw new Error("The timer is in an undefined state.");A===E&&(p.apply(void 0,b),s.get(S)===E&&w())})};return w(),S}},setTimeout:function(f){var h=f.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=arguments.length,b=new Array(y>2?y-2:0),v=2;v<y;v++)b[v-2]=arguments[v];var E=Symbol(),S=a.generateUniqueNumber(o);return o.set(S,E),h("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:S,timerType:"timeout"}).then(function(){var w=o.get(S);if(w===void 0)throw new Error("The timer is in an undefined state.");w===E&&(o.delete(S),p.apply(void 0,b))}),S}}}),c=function(f){var h=new Worker(f);return l(h)};t.load=c,t.wrap=l})}),_q=He((r,e)=>{Me(),Fe(),Ne(),(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,wq()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.workerTimers={},t.workerTimersBroker))})(r,function(t,n){var i=function(h,p){var g=null;return function(){if(g!==null)return g;var y=new Blob([p],{type:"application/javascript; charset=utf-8"}),b=URL.createObjectURL(y);return g=h(b),setTimeout(function(){return URL.revokeObjectURL(b)}),g}},a=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,s=i(n.load,a),o=function(h){return s().clearInterval(h)},l=function(h){return s().clearTimeout(h)},c=function(){var h;return(h=s()).setInterval.apply(h,arguments)},f=function(){var h;return(h=s()).setTimeout.apply(h,arguments)};t.clearInterval=o,t.clearTimeout=l,t.setInterval=c,t.setTimeout=f})}),z0=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNativeBrowser=r.isWebWorker=void 0;var e=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&Jt?.versions?!Object.prototype.hasOwnProperty.call(Jt.versions,"electron"):typeof window.document<"u":!1,t=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i=e()||t()||n();r.isWebWorker=t(),r.isReactNativeBrowser=n(),r.default=i}),Tq=He(r=>{Me(),Fe(),Ne();var e=r&&r.__createBinding||(Object.create?function(c,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,p,g)}:function(c,f,h,p){p===void 0&&(p=h),c[p]=f[h]}),t=r&&r.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),n=r&&r.__importStar||(function(){var c=function(f){return c=Object.getOwnPropertyNames||function(h){var p=[];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[p.length]=g);return p},c(f)};return function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var p=c(f),g=0;g<p.length;g++)p[g]!=="default"&&e(h,f,p[g]);return t(h,f),h}})();Object.defineProperty(r,"__esModule",{value:!0});var i=_q(),a=n(z0()),s={set:i.setInterval,clear:i.clearInterval},o={set:(c,f)=>setInterval(c,f),clear:c=>clearInterval(c)},l=c=>{switch(c){case"native":return o;case"worker":return s;case"auto":default:return a.default&&!a.isWebWorker&&!a.isReactNativeBrowser?s:o}};r.default=l}),CU=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0});var t=e(Tq()),n=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(i,a){this.client=i,this.timer=typeof a=="object"&&"set"in a&&"clear"in a?a:(0,t.default)(a),this.setKeepalive(i.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(i){if(i*=1e3,isNaN(i)||i<=0||i>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${i}`);this._keepalive=i,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${i}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let i=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+i,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};r.default=n}),Lw=He(r=>{Me(),Fe(),Ne();var e=r&&r.__createBinding||(Object.create?function(T,I,D,P){P===void 0&&(P=D);var k=Object.getOwnPropertyDescriptor(I,D);(!k||("get"in k?!I.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return I[D]}}),Object.defineProperty(T,P,k)}:function(T,I,D,P){P===void 0&&(P=D),T[P]=I[D]}),t=r&&r.__setModuleDefault||(Object.create?function(T,I){Object.defineProperty(T,"default",{enumerable:!0,value:I})}:function(T,I){T.default=I}),n=r&&r.__importStar||(function(){var T=function(I){return T=Object.getOwnPropertyNames||function(D){var P=[];for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&(P[P.length]=k);return P},T(I)};return function(I){if(I&&I.__esModule)return I;var D={};if(I!=null)for(var P=T(I),k=0;k<P.length;k++)P[k]!=="default"&&e(D,I,P[k]);return t(D,I),D}})(),i=r&&r.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(r,"__esModule",{value:!0});var a=i(kz()),s=su(),o=i(Nz()),l=i(Fs()),c=n(Fz()),f=i(sU()),h=i(iq()),p=i(wU()),g=i(aq()),y=Kc(),b=sq(),v=i(CU()),E=n(z0()),S=globalThis.setImmediate||((...T)=>{let I=T.shift();(0,y.nextTick)(()=>{I(...T)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},A=class kw extends b.TypedEventEmitter{static VERSION=y.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(I,D){super(),this.options=D||{};for(let P in w)typeof this.options[P]>"u"?this.options[P]=w[P]:this.options[P]=D[P];this.log=this.options.log||(0,l.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",kw.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",D.protocol),this.log("MqttClient :: options.protocolVersion",D.protocolVersion),this.log("MqttClient :: options.username",D.username),this.log("MqttClient :: options.keepalive",D.keepalive),this.log("MqttClient :: options.reconnectPeriod",D.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",D.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",D.properties?D.properties.topicAliasMaximum:void 0),this.options.clientId=typeof D.clientId=="string"?D.clientId:kw.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=D.protocolVersion===5&&D.customHandleAcks?D.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(a.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=D.outgoingStore||new f.default,this.incomingStore=D.incomingStore||new f.default,this.queueQoSZero=D.queueQoSZero===void 0?!0:D.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,D.properties&&D.properties.topicAliasMaximum>0&&(D.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new g.default(D.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,k=()=>{let M=P.shift();this.log("deliver :: entry %o",M);let B=null;if(!M){this._resubscribe();return}B=M.packet,this.log("deliver :: call _sendPacket for %o",B);let C=!0;B.messageId&&B.messageId!==0&&(this.messageIdProvider.register(B.messageId)||(C=!1)),C?this._sendPacket(B,W=>{M.cb&&M.cb(W),k()}):(this.log("messageId: %d has already used. The message is skipped and removed.",B.messageId),k())};this.log("connect :: sending queued packets"),k()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(I,D){D()}handleMessage(I,D){D()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let I=new s.Writable,D=a.default.parser(this.options),P=null,k=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),D.on("packet",Y=>{this.log("parser :: on packet push to packets array."),k.push(Y)});let M=()=>{this.log("work :: getting next packet in queue");let Y=k.shift();if(Y)this.log("work :: packet pulled from queue"),(0,h.default)(this,Y,B);else{this.log("work :: no packets in queue");let q=P;P=null,this.log("work :: done flag is %s",!!q),q&&q()}},B=()=>{if(k.length)(0,y.nextTick)(M);else{let Y=P;P=null,Y()}};I._write=(Y,q,$)=>{P=$,this.log("writable stream :: parsing buffer"),D.parse(Y),M()};let C=Y=>{this.log("streamErrorHandler :: error",Y.message),Y.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",Y)):this.noop(Y)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",C),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let W={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(W.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(W.properties||(W.properties={}),this.topicAliasRecv&&(W.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(W),D.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let Y={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(Y)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,D,P,k){this.log("publish :: message `%s` to topic `%s`",D,I);let{options:M}=this;typeof P=="function"&&(k=P,P=null),P=P||{},P={qos:0,retain:!1,dup:!1,...P};let{qos:B,retain:C,dup:W,properties:Y,cbStorePut:q}=P;if(this._checkDisconnecting(k))return this;let $=()=>{let z=0;if((B===1||B===2)&&(z=this._nextId(),z===null))return this.log("No messageId left"),!1;let K={cmd:"publish",topic:I,payload:D,qos:B,retain:C,messageId:z,dup:W};switch(M.protocolVersion===5&&(K.properties=Y),this.log("publish :: qos",B),B){case 1:case 2:this.outgoing[K.messageId]={volatile:!1,cb:k||this.noop},this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,void 0,q);break;default:this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,k,q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!$())&&this._storeProcessingQueue.push({invoke:$,cbStorePut:P.cbStorePut,callback:k}),this}publishAsync(I,D,P){return new Promise((k,M)=>{this.publish(I,D,P,(B,C)=>{B?M(B):k(C)})})}subscribe(I,D,P){let k=this.options.protocolVersion;typeof D=="function"&&(P=D),P=P||this.noop;let M=!1,B=[];typeof I=="string"?(I=[I],B=I):Array.isArray(I)?B=I:typeof I=="object"&&(M=I.resubscribe,delete I.resubscribe,B=Object.keys(I));let C=c.validateTopics(B);if(C!==null)return S(P,new Error(`Invalid topic ${C}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let W={qos:0};k===5&&(W.nl=!1,W.rap=!1,W.rh=0),D={...W,...D};let{properties:Y}=D,q=[],$=(Z,X)=>{if(X=X||D,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,Z)||this._resubscribeTopics[Z].qos<X.qos||M){let H={topic:Z,qos:X.qos};k===5&&(H.nl=X.nl,H.rap=X.rap,H.rh=X.rh,H.properties=Y),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",H.topic,H.qos),q.push(H)}};if(Array.isArray(I)?I.forEach(Z=>{this.log("subscribe: array topic %s",Z),$(Z)}):Object.keys(I).forEach(Z=>{this.log("subscribe: object topic %s, %o",Z,I[Z]),$(Z,I[Z])}),!q.length)return P(null,[]),this;let z=(Z,X)=>{let H={cmd:"subscribe",subscriptions:Z,messageId:X};if(Y&&(H.properties=Y),this.options.resubscribe){this.log("subscribe :: resubscribe true");let J=[];Z.forEach(fe=>{if(this.options.reconnectPeriod>0){let se={qos:fe.qos};k===5&&(se.nl=fe.nl||!1,se.rap=fe.rap||!1,se.rh=fe.rh||0,se.properties=fe.properties),this._resubscribeTopics[fe.topic]=se,J.push(fe.topic)}}),this.messageIdToTopic[H.messageId]=J}let G=new Promise((J,fe)=>{this.outgoing[H.messageId]={volatile:!0,cb(se,be){if(!se){let{granted:oe}=be;for(let re=0;re<oe.length;re+=1)Z[re].qos=oe[re]}se?fe(new y.ErrorWithSubackPacket(se.message,be)):J(be)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(H),G},K=()=>{let Z=this.options.subscribeBatchSize??q.length,X=[];for(let H=0;H<q.length;H+=Z){let G=q.slice(H,H+Z),J=this._nextId();if(J===null)return this.log("No messageId left"),!1;X.push(z(G,J))}return Promise.all(X).then(H=>{P(null,q,H.at(-1))}).catch(H=>{P(H,q,H.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:P}),this}subscribeAsync(I,D){return new Promise((P,k)=>{this.subscribe(I,D,(M,B)=>{M?k(M):P(B)})})}unsubscribe(I,D,P){typeof I=="string"&&(I=[I]),typeof D=="function"&&(P=D),P=P||this.noop;let k=c.validateTopics(I);if(k!==null)return S(P,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(P))return this;let M=()=>{let B=this._nextId();if(B===null)return this.log("No messageId left"),!1;let C={cmd:"unsubscribe",messageId:B,unsubscriptions:[]};return typeof I=="string"?C.unsubscriptions=[I]:Array.isArray(I)&&(C.unsubscriptions=I),this.options.resubscribe&&C.unsubscriptions.forEach(W=>{delete this._resubscribeTopics[W]}),typeof D=="object"&&D.properties&&(C.properties=D.properties),this.outgoing[C.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(C),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!M())&&this._storeProcessingQueue.push({invoke:M,callback:P}),this}unsubscribeAsync(I,D){return new Promise((P,k)=>{this.unsubscribe(I,D,(M,B)=>{M?k(M):P(B)})})}end(I,D,P){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(P=P||D,D=I,I=!1),typeof D!="object"&&(P=P||D,D=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let k=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(B=>{this.outgoingStore.close(C=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let W=B||C;this.log("end :: closeStores: invoking callback with args"),P(W)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},M=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(k)},D)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,M,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),M()),this)}endAsync(I,D){return new Promise((P,k)=>{this.end(I,D,M=>{M?k(M):P()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:D}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{D(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let D=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let D;I.properties&&(D=I.properties.topicAlias);let P=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",D,P),P.length===0){if(typeof D>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(D),typeof P>"u")return new Error("Unregistered Topic Alias");I.topic=P}D&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,D,P={}){if(D&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",D)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let k={cmd:"disconnect",...P};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(k,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),S(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),D&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",D),D())}_storeAndSend(I,D,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let k=I,M;if(k.cmd==="publish"&&(k=(0,o.default)(I),M=this._removeTopicAliasAndRecoverTopicName(k),M))return D&&D(M);this.outgoingStore.put(k,B=>{if(B)return D&&D(B);P(),this._writePacket(I,D)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let D;I.properties&&(D=I.properties.topicAlias);let P=I.topic.toString();if(this.topicAliasSend)if(D){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,D),!this.topicAliasSend.put(P,D)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,D),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(D=this.topicAliasSend.getAliasByTopic(P),D?(I.topic="",I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,D)):(D=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,D),I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,D))):this.options.autoUseTopicAlias&&(D=this.topicAliasSend.getAliasByTopic(P),D&&(I.topic="",I.properties={...I.properties,topicAlias:D},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,D))));else if(D)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,D),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,D){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let P=a.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&D&&D!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",D)):D&&(this.log("_writePacket :: invoking cb"),D())}_sendPacket(I,D,P,k){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,D=D||this.noop;let M=this._applyTopicAlias(I);if(M){D(M);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,D);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,D,P);return}if(k){this._writePacket(I,D);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,D,P);return;default:this._writePacket(I,D);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,D,P);break;case 0:default:this._writePacket(I,D);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,D,P){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!D),P=P||this.noop;let k=I;if(k.cmd==="publish"){k=(0,o.default)(I);let B=this._removeTopicAliasAndRecoverTopicName(k);if(B)return D&&D(B)}let M=k.qos||0;M===0&&this.queueQoSZero||k.cmd!=="publish"?this.queue.push({packet:k,cb:D}):M>0?(D=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoingStore.put(k,B=>{if(B)return D&&D(B);P()})):D&&D(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new v.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let D=0;D<I.length;D++){let P={};P[I[D]]=this._resubscribeTopics[I[D]],P.resubscribe=!0,this.subscribe(P,{properties:P[I[D]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let D=()=>{let P=this.outgoingStore.createStream(),k=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),M()},M=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",k),P.on("error",C=>{M(),this._flushStoreProcessingQueue(),this.removeListener("close",k),this.emit("error",C)});let B=()=>{if(!P)return;let C=P.read(1),W;if(!C){P.once("readable",B);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[C.messageId]){B();return}!this.disconnecting&&!this.reconnectTimer?(W=this.outgoing[C.messageId]?this.outgoing[C.messageId].cb:null,this.outgoing[C.messageId]={volatile:!1,cb(Y,q){W&&W(Y,q),B()}},this._packetIdsDuringStoreProcessing[C.messageId]=!0,this.messageIdProvider.register(C.messageId)?this._sendPacket(C,void 0,void 0,!0):this.log("messageId: %d has already used.",C.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let C=!0;for(let W in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[W]){C=!1;break}this.removeListener("close",k),C?(M(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):D()}),B()};D()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,D){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(P,k)=>{D(P,k),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}};r.default=A}),Aq=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=EU(),t=class{numberAllocator;lastId;constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};r.default=t});function Dq(){if(Mw)return km;Mw=!0;let r=2147483647,e=36,t=1,n=26,i=38,a=700,s=72,o=128,l="-",c=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=e-t,y=Math.floor,b=String.fromCharCode;function v(M){throw new RangeError(p[M])}function E(M,B){let C=[],W=M.length;for(;W--;)C[W]=B(M[W]);return C}function S(M,B){let C=M.split("@"),W="";C.length>1&&(W=C[0]+"@",M=C[1]),M=M.replace(h,".");let Y=M.split("."),q=E(Y,B).join(".");return W+q}function w(M){let B=[],C=0,W=M.length;for(;C<W;){let Y=M.charCodeAt(C++);if(Y>=55296&&Y<=56319&&C<W){let q=M.charCodeAt(C++);(q&64512)==56320?B.push(((Y&1023)<<10)+(q&1023)+65536):(B.push(Y),C--)}else B.push(Y)}return B}let A=M=>String.fromCodePoint(...M),T=function(M){return M>=48&&M<58?26+(M-48):M>=65&&M<91?M-65:M>=97&&M<123?M-97:e},I=function(M,B){return M+22+75*(M<26)-((B!=0)<<5)},D=function(M,B,C){let W=0;for(M=C?y(M/a):M>>1,M+=y(M/B);M>g*n>>1;W+=e)M=y(M/g);return y(W+(g+1)*M/(M+i))},P=function(M){let B=[],C=M.length,W=0,Y=o,q=s,$=M.lastIndexOf(l);$<0&&($=0);for(let z=0;z<$;++z)M.charCodeAt(z)>=128&&v("not-basic"),B.push(M.charCodeAt(z));for(let z=$>0?$+1:0;z<C;){let K=W;for(let X=1,H=e;;H+=e){z>=C&&v("invalid-input");let G=T(M.charCodeAt(z++));G>=e&&v("invalid-input"),G>y((r-W)/X)&&v("overflow"),W+=G*X;let J=H<=q?t:H>=q+n?n:H-q;if(G<J)break;let fe=e-J;X>y(r/fe)&&v("overflow"),X*=fe}let Z=B.length+1;q=D(W-K,Z,K==0),y(W/Z)>r-Y&&v("overflow"),Y+=y(W/Z),W%=Z,B.splice(W++,0,Y)}return String.fromCodePoint(...B)},k=function(M){let B=[];M=w(M);let C=M.length,W=o,Y=0,q=s;for(let K of M)K<128&&B.push(b(K));let $=B.length,z=$;for($&&B.push(l);z<C;){let K=r;for(let X of M)X>=W&&X<K&&(K=X);let Z=z+1;K-W>y((r-Y)/Z)&&v("overflow"),Y+=(K-W)*Z,W=K;for(let X of M)if(X<W&&++Y>r&&v("overflow"),X===W){let H=Y;for(let G=e;;G+=e){let J=G<=q?t:G>=q+n?n:G-q;if(H<J)break;let fe=H-J,se=e-J;B.push(b(I(J+fe%se,0))),H=y(fe/se)}B.push(b(I(H,0))),q=D(Y,Z,z===$),Y=0,++z}++Y,++W}return B.join("")};return km={version:"2.3.1",ucs2:{decode:w,encode:A},decode:P,encode:k,toASCII:function(M){return S(M,function(B){return f.test(B)?"xn--"+k(B):B})},toUnicode:function(M){return S(M,function(B){return c.test(B)?P(B.slice(4).toLowerCase()):B})}},km}var km,Mw,ko,Oq=ei(()=>{Me(),Fe(),Ne(),km={},Mw=!1,ko=Dq(),ko.decode,ko.encode,ko.toASCII,ko.toUnicode,ko.ucs2,ko.version});function Iq(){return Fw||(Fw=!0,Nw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;var n=42;r[e]=n;for(e in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(r,e);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),Nw}function Cq(){return Uw||(Uw=!0,Bw=Error),Bw}function Rq(){return $w||($w=!0,jw=EvalError),jw}function Pq(){return Gw||(Gw=!0,Hw=RangeError),Hw}function Lq(){return Yw||(Yw=!0,Kw=ReferenceError),Kw}function RU(){return qw||(qw=!0,zw=SyntaxError),zw}function th(){return Vw||(Vw=!0,Ww=TypeError),Ww}function kq(){return Xw||(Xw=!0,Qw=URIError),Qw}function Mq(){if(Zw)return Mm;Zw=!0;var r=typeof Symbol<"u"&&Symbol,e=Iq();return Mm=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Mm}function Nq(){if(Jw)return Nm;Jw=!0;var r={__proto__:null,foo:{}},e=Object;return Nm=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},Nm}function Fq(){if(e_)return Fm;e_=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(o,l){for(var c=[],f=0;f<o.length;f+=1)c[f]=o[f];for(var h=0;h<l.length;h+=1)c[h+o.length]=l[h];return c},a=function(o,l){for(var c=[],f=l,h=0;f<o.length;f+=1,h+=1)c[h]=o[f];return c},s=function(o,l){for(var c="",f=0;f<o.length;f+=1)c+=o[f],f+1<o.length&&(c+=l);return c};return Fm=function(o){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var c=a(arguments,1),f,h=function(){if(this instanceof f){var v=l.apply(this,i(c,arguments));return Object(v)===v?v:this}return l.apply(o,i(c,arguments))},p=t(0,l.length-c.length),g=[],y=0;y<p;y++)g[y]="$"+y;if(f=Function("binder","return function ("+s(g,",")+"){ return binder.apply(this,arguments); }")(h),l.prototype){var b=function(){};b.prototype=l.prototype,f.prototype=new b,b.prototype=null}return f},Fm}function o1(){if(t_)return Bm;t_=!0;var r=Fq();return Bm=Function.prototype.bind||r,Bm}function Bq(){if(r_)return Um;r_=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=o1();return Um=t.call(r,e),Um}function Yc(){if(n_)return jm;n_=!0;var r,e=Cq(),t=Rq(),n=Pq(),i=Lq(),a=RU(),s=th(),o=kq(),l=Function,c=function(z){try{return l('"use strict"; return ('+z+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new s},p=f?(function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}})():h,g=Mq()(),y=Nq()(),b=Object.getPrototypeOf||(y?function(z){return z.__proto__}:null),v={},E=typeof Uint8Array>"u"||!b?r:b(Uint8Array),S={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!b?r:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!b?r:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":p,"%TypedArray%":E,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":o,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(b)try{null.error}catch(z){var w=b(b(z));S["%Error.prototype%"]=w}var A=function z(K){var Z;if(K==="%AsyncFunction%")Z=c("async function () {}");else if(K==="%GeneratorFunction%")Z=c("function* () {}");else if(K==="%AsyncGeneratorFunction%")Z=c("async function* () {}");else if(K==="%AsyncGenerator%"){var X=z("%AsyncGeneratorFunction%");X&&(Z=X.prototype)}else if(K==="%AsyncIteratorPrototype%"){var H=z("%AsyncGenerator%");H&&b&&(Z=b(H.prototype))}return S[K]=Z,Z},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=o1(),D=Bq(),P=I.call(Function.call,Array.prototype.concat),k=I.call(Function.apply,Array.prototype.splice),M=I.call(Function.call,String.prototype.replace),B=I.call(Function.call,String.prototype.slice),C=I.call(Function.call,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,q=function(z){var K=B(z,0,1),Z=B(z,-1);if(K==="%"&&Z!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(Z==="%"&&K!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var X=[];return M(z,W,function(H,G,J,fe){X[X.length]=J?M(fe,Y,"$1"):G||H}),X},$=function(z,K){var Z=z,X;if(D(T,Z)&&(X=T[Z],Z="%"+X[0]+"%"),D(S,Z)){var H=S[Z];if(H===v&&(H=A(Z)),typeof H>"u"&&!K)throw new s("intrinsic "+z+" exists, but is not available. Please file an issue!");return{alias:X,name:Z,value:H}}throw new a("intrinsic "+z+" does not exist!")};return jm=function(z,K){if(typeof z!="string"||z.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof K!="boolean")throw new s('"allowMissing" argument must be a boolean');if(C(/^%?[^%]*%?$/,z)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Z=q(z),X=Z.length>0?Z[0]:"",H=$("%"+X+"%",K),G=H.name,J=H.value,fe=!1,se=H.alias;se&&(X=se[0],k(Z,P([0,1],se)));for(var be=1,oe=!0;be<Z.length;be+=1){var re=Z[be],te=B(re,0,1),le=B(re,-1);if((te==='"'||te==="'"||te==="`"||le==='"'||le==="'"||le==="`")&&te!==le)throw new a("property names with quotes must have matching quotes");if((re==="constructor"||!oe)&&(fe=!0),X+="."+re,G="%"+X+"%",D(S,G))J=S[G];else if(J!=null){if(!(re in J)){if(!K)throw new s("base intrinsic for "+z+" exists, but the property is not available.");return}if(f&&be+1>=Z.length){var ce=f(J,re);oe=!!ce,oe&&"get"in ce&&!("originalValue"in ce.get)?J=ce.get:J=J[re]}else oe=D(J,re),J=J[re];oe&&!fe&&(S[G]=J)}}return J},jm}function l1(){if(i_)return $m;i_=!0;var r=Yc(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return $m=e,$m}function PU(){if(a_)return Hm;a_=!0;var r=Yc(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return Hm=e,Hm}function Uq(){if(s_)return Gm;s_=!0;var r=l1(),e=RU(),t=th(),n=PU();return Gm=function(i,a,s){if(!i||typeof i!="object"&&typeof i!="function")throw new t("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,h=!!n&&n(i,a);if(r)r(i,a,{configurable:c===null&&h?h.configurable:!c,enumerable:o===null&&h?h.enumerable:!o,value:s,writable:l===null&&h?h.writable:!l});else if(f||!o&&!l&&!c)i[a]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Gm}function jq(){if(o_)return Km;o_=!0;var r=l1(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Km=e,Km}function $q(){if(l_)return Ym;l_=!0;var r=Yc(),e=Uq(),t=jq()(),n=PU(),i=th(),a=r("%Math.floor%");return Ym=function(s,o){if(typeof s!="function")throw new i("`fn` is not a function");if(typeof o!="number"||o<0||o>4294967295||a(o)!==o)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],c=!0,f=!0;if("length"in s&&n){var h=n(s,"length");h&&!h.configurable&&(c=!1),h&&!h.writable&&(f=!1)}return(c||f||!l)&&(t?e(s,"length",o,!0,!0):e(s,"length",o)),s},Ym}function Hq(){if(u_)return sc;u_=!0;var r=o1(),e=Yc(),t=$q(),n=th(),i=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||r.call(a,i),o=l1(),l=e("%Math.max%");sc=function(f){if(typeof f!="function")throw new n("a function is required");var h=s(r,a,arguments);return t(h,1+l(0,f.length-(arguments.length-1)),!0)};var c=function(){return s(r,i,arguments)};return o?o(sc,"apply",{value:c}):sc.apply=c,sc}function Gq(){if(c_)return zm;c_=!0;var r=Yc(),e=Hq(),t=e(r("String.prototype.indexOf"));return zm=function(n,i){var a=r(n,!!i);return typeof a=="function"&&t(n,".prototype.")>-1?e(a):a},zm}var Nw,Fw,Bw,Uw,jw,$w,Hw,Gw,Kw,Yw,zw,qw,Ww,Vw,Qw,Xw,Mm,Zw,Nm,Jw,Fm,e_,Bm,t_,Um,r_,jm,n_,$m,i_,Hm,a_,Gm,s_,Km,o_,Ym,l_,sc,u_,zm,c_,Kq=ei(()=>{Me(),Fe(),Ne(),Nw={},Fw=!1,Bw={},Uw=!1,jw={},$w=!1,Hw={},Gw=!1,Kw={},Yw=!1,zw={},qw=!1,Ww={},Vw=!1,Qw={},Xw=!1,Mm={},Zw=!1,Nm={},Jw=!1,Fm={},e_=!1,Bm={},t_=!1,Um={},r_=!1,jm={},n_=!1,$m={},i_=!1,Hm={},a_=!1,Gm={},s_=!1,Km={},o_=!1,Ym={},l_=!1,sc={},u_=!1,zm={},c_=!1});function u1(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function Yq(){!$l||!kl||($l=!1,kl.length?Ia=kl.concat(Ia):gd=-1,Ia.length&&LU())}function LU(){if(!$l){var r=setTimeout(Yq,0);$l=!0;for(var e=Ia.length;e;){for(kl=Ia,Ia=[];++gd<e;)kl&&kl[gd].run();gd=-1,e=Ia.length}kl=null,$l=!1,clearTimeout(r)}}function zq(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ia.push(new kU(r,e)),Ia.length===1&&!$l&&setTimeout(LU,0)}function kU(r,e){this.fun=r,this.array=e}function gn(){}function qq(r){u1("_linkedBinding")}function Wq(r){u1("dlopen")}function Vq(){return[]}function Qq(){return[]}function Xq(r,e){if(!r)throw new Error(e||"assertion error")}function Zq(){return!1}function Jq(){return Es.now()/1e3}function ox(r){var e=Math.floor((Date.now()-Es.now())*.001),t=Es.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=qm)),[n,i]}function Oo(){return c1}function eW(r){return[]}var Ia,$l,kl,gd,jR,$R,HR,GR,KR,YR,zR,qR,WR,VR,QR,XR,ZR,JR,eP,tP,rP,nP,iP,aP,sP,$p,oP,lP,uP,cP,fP,dP,hP,pP,mP,gP,yP,vP,bP,xP,SP,EP,wP,_P,TP,AP,DP,OP,IP,CP,RP,Es,lx,qm,PP,LP,kP,MP,NP,FP,BP,UP,jP,$P,HP,c1,MU=ei(()=>{Me(),Fe(),Ne(),Ia=[],$l=!1,gd=-1,kU.prototype.run=function(){this.fun.apply(null,this.array)},jR="browser",$R="x64",HR="browser",GR={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},KR=["/usr/bin/node"],YR=[],zR="v16.8.0",qR={},WR=function(r,e){console.warn((e?e+": ":"")+r)},VR=function(r){u1("binding")},QR=function(r){return 0},XR=function(){return"/"},ZR=function(r){},JR={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},eP=gn,tP=[],rP={},nP=!1,iP={},aP=gn,sP=gn,$p=function(){return{}},oP=$p,lP=$p,uP=gn,cP=gn,fP=gn,dP={},hP={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},pP=gn,mP=gn,gP=gn,yP=gn,vP=gn,bP=gn,xP=gn,SP=void 0,EP=void 0,wP=void 0,_P=gn,TP=2,AP=1,DP="/bin/usr/node",OP=9229,IP="node",CP=[],RP=gn,Es={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Es.now===void 0&&(lx=Date.now(),Es.timing&&Es.timing.navigationStart&&(lx=Es.timing.navigationStart),Es.now=()=>Date.now()-lx),qm=1e9,ox.bigint=function(r){var e=ox(r);return typeof BigInt>"u"?e[0]*qm+e[1]:BigInt(e[0]*qm)+BigInt(e[1])},PP=10,LP={},kP=0,MP=Oo,NP=Oo,FP=Oo,BP=Oo,UP=Oo,jP=gn,$P=Oo,HP=Oo,c1={version:zR,versions:qR,arch:$R,platform:HR,release:JR,_rawDebug:eP,moduleLoadList:tP,binding:VR,_linkedBinding:qq,_events:LP,_eventsCount:kP,_maxListeners:PP,on:Oo,addListener:MP,once:NP,off:FP,removeListener:BP,removeAllListeners:UP,emit:jP,prependListener:$P,prependOnceListener:HP,listeners:eW,domain:rP,_exiting:nP,config:iP,dlopen:Wq,uptime:Jq,_getActiveRequests:Vq,_getActiveHandles:Qq,reallyExit:aP,_kill:sP,cpuUsage:$p,resourceUsage:oP,memoryUsage:lP,kill:uP,exit:cP,openStdin:fP,allowedNodeEnvironmentFlags:dP,assert:Xq,features:hP,_fatalExceptions:pP,setUncaughtExceptionCaptureCallback:mP,hasUncaughtExceptionCaptureCallback:Zq,emitWarning:WR,nextTick:zq,_tickCallback:gP,_debugProcess:yP,_debugEnd:vP,_startProfilerIdleNotifier:bP,_stopProfilerIdleNotifier:xP,stdout:SP,stdin:wP,stderr:EP,abort:_P,umask:QR,chdir:ZR,cwd:XR,env:GR,title:jR,argv:KR,execArgv:YR,pid:TP,ppid:AP,execPath:DP,debugPort:OP,hrtime:ox,argv0:IP,_preload_modules:CP,setSourceMapsEnabled:RP}});function tW(){if(f_)return Wm;f_=!0;var r=c1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,s){for(var o="",l=0,c=-1,f=0,h,p=0;p<=a.length;++p){if(p<a.length)h=a.charCodeAt(p);else{if(h===47)break;h=47}if(h===47){if(!(c===p-1||f===1))if(c!==p-1&&f===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var g=o.lastIndexOf("/");if(g!==o.length-1){g===-1?(o="",l=0):(o=o.slice(0,g),l=o.length-1-o.lastIndexOf("/")),c=p,f=0;continue}}else if(o.length===2||o.length===1){o="",l=0,c=p,f=0;continue}}s&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+a.slice(c+1,p):o=a.slice(c+1,p),l=p-c-1;c=p,f=0}else h===46&&f!==-1?++f:f=-1}return o}function n(a,s){var o=s.dir||s.root,l=s.base||(s.name||"")+(s.ext||"");return o?o===s.root?o+l:o+a+l:l}var i={resolve:function(){for(var a="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=r.cwd()),c=o),e(c),c.length!==0&&(a=c+"/"+a,s=c.charCodeAt(0)===47)}return a=t(a,!s),s?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(e(a),a.length===0)return".";var s=a.charCodeAt(0)===47,o=a.charCodeAt(a.length-1)===47;return a=t(a,!s),a.length===0&&!s&&(a="."),a.length>0&&o&&(a+="/"),s?"/"+a:a},isAbsolute:function(a){return e(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(a===void 0?a=o:a+="/"+o)}return a===void 0?".":i.normalize(a)},relative:function(a,s){if(e(a),e(s),a===s||(a=i.resolve(a),s=i.resolve(s),a===s))return"";for(var o=1;o<a.length&&a.charCodeAt(o)===47;++o);for(var l=a.length,c=l-o,f=1;f<s.length&&s.charCodeAt(f)===47;++f);for(var h=s.length,p=h-f,g=c<p?c:p,y=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(s.charCodeAt(f+b)===47)return s.slice(f+b+1);if(b===0)return s.slice(f+b)}else c>g&&(a.charCodeAt(o+b)===47?y=b:b===0&&(y=0));break}var v=a.charCodeAt(o+b),E=s.charCodeAt(f+b);if(v!==E)break;v===47&&(y=b)}var S="";for(b=o+y+1;b<=l;++b)(b===l||a.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(f+y):(f+=y,s.charCodeAt(f)===47&&++f,s.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(e(a),a.length===0)return".";for(var s=a.charCodeAt(0),o=s===47,l=-1,c=!0,f=a.length-1;f>=1;--f)if(s=a.charCodeAt(f),s===47){if(!c){l=f;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":a.slice(0,l)},basename:function(a,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(a);var o=0,l=-1,c=!0,f;if(s!==void 0&&s.length>0&&s.length<=a.length){if(s.length===a.length&&s===a)return"";var h=s.length-1,p=-1;for(f=a.length-1;f>=0;--f){var g=a.charCodeAt(f);if(g===47){if(!c){o=f+1;break}}else p===-1&&(c=!1,p=f+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=f):(h=-1,l=p))}return o===l?l=p:l===-1&&(l=a.length),a.slice(o,l)}else{for(f=a.length-1;f>=0;--f)if(a.charCodeAt(f)===47){if(!c){o=f+1;break}}else l===-1&&(c=!1,l=f+1);return l===-1?"":a.slice(o,l)}},extname:function(a){e(a);for(var s=-1,o=0,l=-1,c=!0,f=0,h=a.length-1;h>=0;--h){var p=a.charCodeAt(h);if(p===47){if(!c){o=h+1;break}continue}l===-1&&(c=!1,l=h+1),p===46?s===-1?s=h:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?"":a.slice(s,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return n("/",a)},parse:function(a){e(a);var s={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return s;var o=a.charCodeAt(0),l=o===47,c;l?(s.root="/",c=1):c=0;for(var f=-1,h=0,p=-1,g=!0,y=a.length-1,b=0;y>=c;--y){if(o=a.charCodeAt(y),o===47){if(!g){h=y+1;break}continue}p===-1&&(g=!1,p=y+1),o===46?f===-1?f=y:b!==1&&(b=1):f!==-1&&(b=-1)}return f===-1||p===-1||b===0||b===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&l?s.base=s.name=a.slice(1,p):s.base=s.name=a.slice(h,p)):(h===0&&l?(s.name=a.slice(1,f),s.base=a.slice(1,p)):(s.name=a.slice(h,f),s.base=a.slice(h,p)),s.ext=a.slice(f,p)),h>0?s.dir=a.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Wm=i,Wm}var Wm,f_,d_,rW=ei(()=>{Me(),Fe(),Ne(),MU(),Wm={},f_=!1,d_=tW()}),NU={};Hc(NU,{URL:()=>zU,Url:()=>$U,default:()=>yn,fileURLToPath:()=>BU,format:()=>HU,parse:()=>YU,pathToFileURL:()=>UU,resolve:()=>GU,resolveObject:()=>KU});function nW(){if(h_)return Vm;h_=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&a&&typeof a.get=="function"?a.get:null,o=i&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,c=l?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,g=p?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,b=Object.prototype.toString,v=Function.prototype.toString,E=String.prototype.match,S=String.prototype.slice,w=String.prototype.replace,A=String.prototype.toUpperCase,T=String.prototype.toLowerCase,I=RegExp.prototype.test,D=Array.prototype.concat,P=Array.prototype.join,k=Array.prototype.slice,M=Math.floor,B=typeof BigInt=="function"?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Y=typeof Symbol=="function"&&typeof Symbol.iterator=="object",q=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Y||!0)?Symbol.toStringTag:null,$=Object.prototype.propertyIsEnumerable,z=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ge){return ge.__proto__}:null);function K(ge,_e){if(ge===1/0||ge===-1/0||ge!==ge||ge&&ge>-1e3&&ge<1e3||I.call(/e/,_e))return _e;var tt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ge=="number"){var Ze=ge<0?-M(-ge):M(ge);if(Ze!==ge){var ht=String(Ze),yt=S.call(_e,ht.length+1);return w.call(ht,tt,"$&_")+"."+w.call(w.call(yt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(_e,tt,"$&_")}var Z=jU,X=Z.custom,H=ce(X)?X:null;Vm=function ge(_e,tt,Ze,ht){var yt=tt||{};if(Se(yt,"quoteStyle")&&yt.quoteStyle!=="single"&&yt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Se(yt,"maxStringLength")&&(typeof yt.maxStringLength=="number"?yt.maxStringLength<0&&yt.maxStringLength!==1/0:yt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Di=Se(yt,"customInspect")?yt.customInspect:!0;if(typeof Di!="boolean"&&Di!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Se(yt,"indent")&&yt.indent!==null&&yt.indent!=="	"&&!(parseInt(yt.indent,10)===yt.indent&&yt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Se(yt,"numericSeparator")&&typeof yt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var En=yt.numericSeparator;if(typeof _e>"u")return"undefined";if(_e===null)return"null";if(typeof _e=="boolean")return _e?"true":"false";if(typeof _e=="string")return De(_e,yt);if(typeof _e=="number"){if(_e===0)return 1/0/_e>0?"0":"-0";var xr=String(_e);return En?K(_e,xr):xr}if(typeof _e=="bigint"){var wn=String(_e)+"n";return En?K(_e,wn):wn}var Nn=typeof yt.depth>"u"?5:yt.depth;if(typeof Ze>"u"&&(Ze=0),Ze>=Nn&&Nn>0&&typeof _e=="object")return fe(_e)?"[Array]":"[Object]";var _n=ve(yt,Ze);if(typeof ht>"u")ht=[];else if(ye(ht,_e)>=0)return"[Circular]";function kr(jn,pa,Qa){if(pa&&(ht=k.call(ht),ht.push(pa)),Qa){var ni={depth:yt.depth};return Se(yt,"quoteStyle")&&(ni.quoteStyle=yt.quoteStyle),ge(jn,ni,Ze+1,ht)}return ge(jn,yt,Ze+1,ht)}if(typeof _e=="function"&&!be(_e)){var cu=ae(_e),Wa=We(_e,kr);return"[Function"+(cu?": "+cu:" (anonymous)")+"]"+(Wa.length>0?" { "+P.call(Wa,", ")+" }":"")}if(ce(_e)){var Va=Y?w.call(String(_e),/^(Symbol\(.*\))_[^)]*$/,"$1"):W.call(_e);return typeof _e=="object"&&!Y?R(Va):Va}if(ze(_e)){for(var ee="<"+T.call(String(_e.nodeName)),ue=_e.attributes||[],qe=0;qe<ue.length;qe++)ee+=" "+ue[qe].name+"="+G(J(ue[qe].value),"double",yt);return ee+=">",_e.childNodes&&_e.childNodes.length&&(ee+="..."),ee+="</"+T.call(String(_e.nodeName))+">",ee}if(fe(_e)){if(_e.length===0)return"[]";var Ve=We(_e,kr);return _n&&!de(Ve)?"["+Pe(Ve,_n)+"]":"[ "+P.call(Ve,", ")+" ]"}if(oe(_e)){var Je=We(_e,kr);return!("cause"in Error.prototype)&&"cause"in _e&&!$.call(_e,"cause")?"{ ["+String(_e)+"] "+P.call(D.call("[cause]: "+kr(_e.cause),Je),", ")+" }":Je.length===0?"["+String(_e)+"]":"{ ["+String(_e)+"] "+P.call(Je,", ")+" }"}if(typeof _e=="object"&&Di){if(H&&typeof _e[H]=="function"&&Z)return Z(_e,{depth:Nn-Ze});if(Di!=="symbol"&&typeof _e.inspect=="function")return _e.inspect()}if(Ie(_e)){var ur=[];return n&&n.call(_e,function(jn,pa){ur.push(kr(pa,_e,!0)+" => "+kr(jn,_e))}),V("Map",t.call(_e),ur,_n)}if(pe(_e)){var Mr=[];return o&&o.call(_e,function(jn){Mr.push(kr(jn,_e))}),V("Set",s.call(_e),Mr,_n)}if(Re(_e))return N("WeakMap");if(Be(_e))return N("WeakSet");if(Ue(_e))return N("WeakRef");if(te(_e))return R(kr(Number(_e)));if(ne(_e))return R(kr(B.call(_e)));if(le(_e))return R(y.call(_e));if(re(_e))return R(kr(String(_e)));if(typeof window<"u"&&_e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_e===globalThis||typeof Qm<"u"&&_e===Qm)return"{ [object globalThis] }";if(!se(_e)&&!be(_e)){var Fn=We(_e,kr),no=z?z(_e)===Object.prototype:_e instanceof Object||_e.constructor===Object,Bn=_e instanceof Object?"":"null prototype",cr=!no&&q&&Object(_e)===_e&&q in _e?S.call(ie(_e),8,-1):Bn?"Object":"",Nr=no||typeof _e.constructor!="function"?"":_e.constructor.name?_e.constructor.name+" ":"",Un=Nr+(cr||Bn?"["+P.call(D.call([],cr||[],Bn||[]),": ")+"] ":"");return Fn.length===0?Un+"{}":_n?Un+"{"+Pe(Fn,_n)+"}":Un+"{ "+P.call(Fn,", ")+" }"}return String(_e)};function G(ge,_e,tt){var Ze=(tt.quoteStyle||_e)==="double"?'"':"'";return Ze+ge+Ze}function J(ge){return w.call(String(ge),/"/g,"&quot;")}function fe(ge){return ie(ge)==="[object Array]"&&(!q||!(typeof ge=="object"&&q in ge))}function se(ge){return ie(ge)==="[object Date]"&&(!q||!(typeof ge=="object"&&q in ge))}function be(ge){return ie(ge)==="[object RegExp]"&&(!q||!(typeof ge=="object"&&q in ge))}function oe(ge){return ie(ge)==="[object Error]"&&(!q||!(typeof ge=="object"&&q in ge))}function re(ge){return ie(ge)==="[object String]"&&(!q||!(typeof ge=="object"&&q in ge))}function te(ge){return ie(ge)==="[object Number]"&&(!q||!(typeof ge=="object"&&q in ge))}function le(ge){return ie(ge)==="[object Boolean]"&&(!q||!(typeof ge=="object"&&q in ge))}function ce(ge){if(Y)return ge&&typeof ge=="object"&&ge instanceof Symbol;if(typeof ge=="symbol")return!0;if(!ge||typeof ge!="object"||!W)return!1;try{return W.call(ge),!0}catch{}return!1}function ne(ge){if(!ge||typeof ge!="object"||!B)return!1;try{return B.call(ge),!0}catch{}return!1}var Ce=Object.prototype.hasOwnProperty||function(ge){return ge in(this||Qm)};function Se(ge,_e){return Ce.call(ge,_e)}function ie(ge){return b.call(ge)}function ae(ge){if(ge.name)return ge.name;var _e=E.call(v.call(ge),/^function\s*([\w$]+)/);return _e?_e[1]:null}function ye(ge,_e){if(ge.indexOf)return ge.indexOf(_e);for(var tt=0,Ze=ge.length;tt<Ze;tt++)if(ge[tt]===_e)return tt;return-1}function Ie(ge){if(!t||!ge||typeof ge!="object")return!1;try{t.call(ge);try{s.call(ge)}catch{return!0}return ge instanceof Map}catch{}return!1}function Re(ge){if(!c||!ge||typeof ge!="object")return!1;try{c.call(ge,c);try{h.call(ge,h)}catch{return!0}return ge instanceof WeakMap}catch{}return!1}function Ue(ge){if(!g||!ge||typeof ge!="object")return!1;try{return g.call(ge),!0}catch{}return!1}function pe(ge){if(!s||!ge||typeof ge!="object")return!1;try{s.call(ge);try{t.call(ge)}catch{return!0}return ge instanceof Set}catch{}return!1}function Be(ge){if(!h||!ge||typeof ge!="object")return!1;try{h.call(ge,h);try{c.call(ge,c)}catch{return!0}return ge instanceof WeakSet}catch{}return!1}function ze(ge){return!ge||typeof ge!="object"?!1:typeof HTMLElement<"u"&&ge instanceof HTMLElement?!0:typeof ge.nodeName=="string"&&typeof ge.getAttribute=="function"}function De(ge,_e){if(ge.length>_e.maxStringLength){var tt=ge.length-_e.maxStringLength,Ze="... "+tt+" more character"+(tt>1?"s":"");return De(S.call(ge,0,_e.maxStringLength),_e)+Ze}var ht=w.call(w.call(ge,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ft);return G(ht,"single",_e)}function ft(ge){var _e=ge.charCodeAt(0),tt={8:"b",9:"t",10:"n",12:"f",13:"r"}[_e];return tt?"\\"+tt:"\\x"+(_e<16?"0":"")+A.call(_e.toString(16))}function R(ge){return"Object("+ge+")"}function N(ge){return ge+" { ? }"}function V(ge,_e,tt,Ze){var ht=Ze?Pe(tt,Ze):P.call(tt,", ");return ge+" ("+_e+") {"+ht+"}"}function de(ge){for(var _e=0;_e<ge.length;_e++)if(ye(ge[_e],`
`)>=0)return!1;return!0}function ve(ge,_e){var tt;if(ge.indent==="	")tt="	";else if(typeof ge.indent=="number"&&ge.indent>0)tt=P.call(Array(ge.indent+1)," ");else return null;return{base:tt,prev:P.call(Array(_e+1),tt)}}function Pe(ge,_e){if(ge.length===0)return"";var tt=`
`+_e.prev+_e.base;return tt+P.call(ge,","+tt)+`
`+_e.prev}function We(ge,_e){var tt=fe(ge),Ze=[];if(tt){Ze.length=ge.length;for(var ht=0;ht<ge.length;ht++)Ze[ht]=Se(ge,ht)?_e(ge[ht],ge):""}var yt=typeof C=="function"?C(ge):[],Di;if(Y){Di={};for(var En=0;En<yt.length;En++)Di["$"+yt[En]]=yt[En]}for(var xr in ge)Se(ge,xr)&&(tt&&String(Number(xr))===xr&&xr<ge.length||Y&&Di["$"+xr]instanceof Symbol||(I.call(/[^\w$]/,xr)?Ze.push(_e(xr,ge)+": "+_e(ge[xr],ge)):Ze.push(xr+": "+_e(ge[xr],ge))));if(typeof C=="function")for(var wn=0;wn<yt.length;wn++)$.call(ge,yt[wn])&&Ze.push("["+_e(yt[wn])+"]: "+_e(ge[yt[wn]],ge));return Ze}return Vm}function iW(){if(p_)return Xm;p_=!0;var r=Yc(),e=Gq(),t=nW(),n=th(),i=r("%WeakMap%",!0),a=r("%Map%",!0),s=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),f=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),p=function(v,E){for(var S=v,w;(w=S.next)!==null;S=w)if(w.key===E)return S.next=w.next,w.next=v.next,v.next=w,w},g=function(v,E){var S=p(v,E);return S&&S.value},y=function(v,E,S){var w=p(v,E);w?w.value=S:v.next={key:E,next:v.next,value:S}},b=function(v,E){return!!p(v,E)};return Xm=function(){var v,E,S,w={assert:function(A){if(!w.has(A))throw new n("Side channel does not contain "+t(A))},get:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(v)return s(v,A)}else if(a){if(E)return c(E,A)}else if(S)return g(S,A)},has:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(v)return l(v,A)}else if(a){if(E)return h(E,A)}else if(S)return b(S,A);return!1},set:function(A,T){i&&A&&(typeof A=="object"||typeof A=="function")?(v||(v=new i),o(v,A,T)):a?(E||(E=new a),f(E,A,T)):(S||(S={key:{},next:null}),y(S,A,T))}};return w},Xm}function f1(){if(m_)return Zm;m_=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Zm={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Zm}function FU(){if(g_)return Jm;g_=!0;var r=f1(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var v=[],E=0;E<256;++E)v.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return v})(),i=function(v){for(;v.length>1;){var E=v.pop(),S=E.obj[E.prop];if(t(S)){for(var w=[],A=0;A<S.length;++A)typeof S[A]<"u"&&w.push(S[A]);E.obj[E.prop]=w}}},a=function(v,E){for(var S=E&&E.plainObjects?Object.create(null):{},w=0;w<v.length;++w)typeof v[w]<"u"&&(S[w]=v[w]);return S},s=function v(E,S,w){if(!S)return E;if(typeof S!="object"){if(t(E))E.push(S);else if(E&&typeof E=="object")(w&&(w.plainObjects||w.allowPrototypes)||!e.call(Object.prototype,S))&&(E[S]=!0);else return[E,S];return E}if(!E||typeof E!="object")return[E].concat(S);var A=E;return t(E)&&!t(S)&&(A=a(E,w)),t(E)&&t(S)?(S.forEach(function(T,I){if(e.call(E,I)){var D=E[I];D&&typeof D=="object"&&T&&typeof T=="object"?E[I]=v(D,T,w):E.push(T)}else E[I]=T}),E):Object.keys(S).reduce(function(T,I){var D=S[I];return e.call(T,I)?T[I]=v(T[I],D,w):T[I]=D,T},A)},o=function(v,E){return Object.keys(E).reduce(function(S,w){return S[w]=E[w],S},v)},l=function(v,E,S){var w=v.replace(/\+/g," ");if(S==="iso-8859-1")return w.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(w)}catch{return w}},c=1024,f=function(v,E,S,w,A){if(v.length===0)return v;var T=v;if(typeof v=="symbol"?T=Symbol.prototype.toString.call(v):typeof v!="string"&&(T=String(v)),S==="iso-8859-1")return escape(T).replace(/%u[0-9a-f]{4}/gi,function(C){return"%26%23"+parseInt(C.slice(2),16)+"%3B"});for(var I="",D=0;D<T.length;D+=c){for(var P=T.length>=c?T.slice(D,D+c):T,k=[],M=0;M<P.length;++M){var B=P.charCodeAt(M);if(B===45||B===46||B===95||B===126||B>=48&&B<=57||B>=65&&B<=90||B>=97&&B<=122||A===r.RFC1738&&(B===40||B===41)){k[k.length]=P.charAt(M);continue}if(B<128){k[k.length]=n[B];continue}if(B<2048){k[k.length]=n[192|B>>6]+n[128|B&63];continue}if(B<55296||B>=57344){k[k.length]=n[224|B>>12]+n[128|B>>6&63]+n[128|B&63];continue}M+=1,B=65536+((B&1023)<<10|P.charCodeAt(M)&1023),k[k.length]=n[240|B>>18]+n[128|B>>12&63]+n[128|B>>6&63]+n[128|B&63]}I+=k.join("")}return I},h=function(v){for(var E=[{obj:{o:v},prop:"o"}],S=[],w=0;w<E.length;++w)for(var A=E[w],T=A.obj[A.prop],I=Object.keys(T),D=0;D<I.length;++D){var P=I[D],k=T[P];typeof k=="object"&&k!==null&&S.indexOf(k)===-1&&(E.push({obj:T,prop:P}),S.push(k))}return i(E),v},p=function(v){return Object.prototype.toString.call(v)==="[object RegExp]"},g=function(v){return!v||typeof v!="object"?!1:!!(v.constructor&&v.constructor.isBuffer&&v.constructor.isBuffer(v))},y=function(v,E){return[].concat(v,E)},b=function(v,E){if(t(v)){for(var S=[],w=0;w<v.length;w+=1)S.push(E(v[w]));return S}return E(v)};return Jm={arrayToObject:a,assign:o,combine:y,compact:h,decode:l,encode:f,isBuffer:g,isRegExp:p,maybeMap:b,merge:s},Jm}function aW(){if(y_)return eg;y_=!0;var r=iW(),e=FU(),t=f1(),n=Object.prototype.hasOwnProperty,i={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,v){return b+"["+v+"]"},repeat:function(b){return b}},a=Array.isArray,s=Array.prototype.push,o=function(b,v){s.apply(b,a(v)?v:[v])},l=Date.prototype.toISOString,c=t.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(b){return l.call(b)},skipNulls:!1,strictNullHandling:!1},h=function(b){return typeof b=="string"||typeof b=="number"||typeof b=="boolean"||typeof b=="symbol"||typeof b=="bigint"},p={},g=function b(v,E,S,w,A,T,I,D,P,k,M,B,C,W,Y,q,$,z){for(var K=v,Z=z,X=0,H=!1;(Z=Z.get(p))!==void 0&&!H;){var G=Z.get(v);if(X+=1,typeof G<"u"){if(G===X)throw new RangeError("Cyclic object value");H=!0}typeof Z.get(p)>"u"&&(X=0)}if(typeof k=="function"?K=k(E,K):K instanceof Date?K=C(K):S==="comma"&&a(K)&&(K=e.maybeMap(K,function(ie){return ie instanceof Date?C(ie):ie})),K===null){if(T)return P&&!q?P(E,f.encoder,$,"key",W):E;K=""}if(h(K)||e.isBuffer(K)){if(P){var J=q?E:P(E,f.encoder,$,"key",W);return[Y(J)+"="+Y(P(K,f.encoder,$,"value",W))]}return[Y(E)+"="+Y(String(K))]}var fe=[];if(typeof K>"u")return fe;var se;if(S==="comma"&&a(K))q&&P&&(K=e.maybeMap(K,P)),se=[{value:K.length>0?K.join(",")||null:void 0}];else if(a(k))se=k;else{var be=Object.keys(K);se=M?be.sort(M):be}var oe=D?E.replace(/\./g,"%2E"):E,re=w&&a(K)&&K.length===1?oe+"[]":oe;if(A&&a(K)&&K.length===0)return re+"[]";for(var te=0;te<se.length;++te){var le=se[te],ce=typeof le=="object"&&typeof le.value<"u"?le.value:K[le];if(!(I&&ce===null)){var ne=B&&D?le.replace(/\./g,"%2E"):le,Ce=a(K)?typeof S=="function"?S(re,ne):re:re+(B?"."+ne:"["+ne+"]");z.set(v,X);var Se=r();Se.set(p,z),o(fe,b(ce,Ce,S,w,A,T,I,D,S==="comma"&&q&&a(K)?null:P,k,M,B,C,W,Y,q,$,Se))}}return fe},y=function(b){if(!b)return f;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!="function")throw new TypeError("Encoder has to be a function.");var v=b.charset||f.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof b.format<"u"){if(!n.call(t.formatters,b.format))throw new TypeError("Unknown format option provided.");E=b.format}var S=t.formatters[E],w=f.filter;(typeof b.filter=="function"||a(b.filter))&&(w=b.filter);var A;if(b.arrayFormat in i?A=b.arrayFormat:"indices"in b?A=b.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in b&&typeof b.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var T=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:f.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix=="boolean"?b.addQueryPrefix:f.addQueryPrefix,allowDots:T,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:v,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:f.charsetSentinel,commaRoundTrip:b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?f.delimiter:b.delimiter,encode:typeof b.encode=="boolean"?b.encode:f.encode,encodeDotInKeys:typeof b.encodeDotInKeys=="boolean"?b.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof b.encoder=="function"?b.encoder:f.encoder,encodeValuesOnly:typeof b.encodeValuesOnly=="boolean"?b.encodeValuesOnly:f.encodeValuesOnly,filter:w,format:E,formatter:S,serializeDate:typeof b.serializeDate=="function"?b.serializeDate:f.serializeDate,skipNulls:typeof b.skipNulls=="boolean"?b.skipNulls:f.skipNulls,sort:typeof b.sort=="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:f.strictNullHandling}};return eg=function(b,v){var E=b,S=y(v),w,A;typeof S.filter=="function"?(A=S.filter,E=A("",E)):a(S.filter)&&(A=S.filter,w=A);var T=[];if(typeof E!="object"||E===null)return"";var I=i[S.arrayFormat],D=I==="comma"&&S.commaRoundTrip;w||(w=Object.keys(E)),S.sort&&w.sort(S.sort);for(var P=r(),k=0;k<w.length;++k){var M=w[k];S.skipNulls&&E[M]===null||o(T,g(E[M],M,I,D,S.allowEmptyArrays,S.strictNullHandling,S.skipNulls,S.encodeDotInKeys,S.encode?S.encoder:null,S.filter,S.sort,S.allowDots,S.serializeDate,S.format,S.formatter,S.encodeValuesOnly,S.charset,P))}var B=T.join(S.delimiter),C=S.addQueryPrefix===!0?"?":"";return S.charsetSentinel&&(S.charset==="iso-8859-1"?C+="utf8=%26%2310003%3B&":C+="utf8=%E2%9C%93&"),B.length>0?C+B:""},eg}function sW(){if(v_)return tg;v_=!0;var r=FU(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(p){return p.replace(/&#(\d+);/g,function(g,y){return String.fromCharCode(parseInt(y,10))})},a=function(p,g){return p&&typeof p=="string"&&g.comma&&p.indexOf(",")>-1?p.split(","):p},s="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",l=function(p,g){var y={__proto__:null},b=g.ignoreQueryPrefix?p.replace(/^\?/,""):p;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var v=g.parameterLimit===1/0?void 0:g.parameterLimit,E=b.split(g.delimiter,v),S=-1,w,A=g.charset;if(g.charsetSentinel)for(w=0;w<E.length;++w)E[w].indexOf("utf8=")===0&&(E[w]===o?A="utf-8":E[w]===s&&(A="iso-8859-1"),S=w,w=E.length);for(w=0;w<E.length;++w)if(w!==S){var T=E[w],I=T.indexOf("]="),D=I===-1?T.indexOf("="):I+1,P,k;D===-1?(P=g.decoder(T,n.decoder,A,"key"),k=g.strictNullHandling?null:""):(P=g.decoder(T.slice(0,D),n.decoder,A,"key"),k=r.maybeMap(a(T.slice(D+1),g),function(B){return g.decoder(B,n.decoder,A,"value")})),k&&g.interpretNumericEntities&&A==="iso-8859-1"&&(k=i(k)),T.indexOf("[]=")>-1&&(k=t(k)?[k]:k);var M=e.call(y,P);M&&g.duplicates==="combine"?y[P]=r.combine(y[P],k):(!M||g.duplicates==="last")&&(y[P]=k)}return y},c=function(p,g,y,b){for(var v=b?g:a(g,y),E=p.length-1;E>=0;--E){var S,w=p[E];if(w==="[]"&&y.parseArrays)S=y.allowEmptyArrays&&(v===""||y.strictNullHandling&&v===null)?[]:[].concat(v);else{S=y.plainObjects?Object.create(null):{};var A=w.charAt(0)==="["&&w.charAt(w.length-1)==="]"?w.slice(1,-1):w,T=y.decodeDotInKeys?A.replace(/%2E/g,"."):A,I=parseInt(T,10);!y.parseArrays&&T===""?S={0:v}:!isNaN(I)&&w!==T&&String(I)===T&&I>=0&&y.parseArrays&&I<=y.arrayLimit?(S=[],S[I]=v):T!=="__proto__"&&(S[T]=v)}v=S}return v},f=function(p,g,y,b){if(p){var v=y.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,E=/(\[[^[\]]*])/,S=/(\[[^[\]]*])/g,w=y.depth>0&&E.exec(v),A=w?v.slice(0,w.index):v,T=[];if(A){if(!y.plainObjects&&e.call(Object.prototype,A)&&!y.allowPrototypes)return;T.push(A)}for(var I=0;y.depth>0&&(w=S.exec(v))!==null&&I<y.depth;){if(I+=1,!y.plainObjects&&e.call(Object.prototype,w[1].slice(1,-1))&&!y.allowPrototypes)return;T.push(w[1])}if(w){if(y.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+y.depth+" and strictDepth is true");T.push("["+v.slice(w.index)+"]")}return c(T,g,y,b)}},h=function(p){if(!p)return n;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof p.charset>"u"?n.charset:p.charset,y=typeof p.duplicates>"u"?n.duplicates:p.duplicates;if(y!=="combine"&&y!=="first"&&y!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var b=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:n.allowDots:!!p.allowDots;return{allowDots:b,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:n.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:n.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:n.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:n.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:n.decoder,delimiter:typeof p.delimiter=="string"||r.isRegExp(p.delimiter)?p.delimiter:n.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:n.depth,duplicates:y,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:n.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:n.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:n.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:n.strictNullHandling}};return tg=function(p,g){var y=h(g);if(p===""||p===null||typeof p>"u")return y.plainObjects?Object.create(null):{};for(var b=typeof p=="string"?l(p,y):p,v=y.plainObjects?Object.create(null):{},E=Object.keys(b),S=0;S<E.length;++S){var w=E[S],A=f(w,b[w],y,typeof p=="string");v=r.merge(v,A,y)}return y.allowSparse===!0?v:r.compact(v)},tg}function oW(){if(b_)return rg;b_=!0;var r=aW(),e=sW(),t=f1();return rg={formats:t,parse:e,stringify:r},rg}function lW(){if(x_)return Mo;x_=!0;var r=ko;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(a),o=["'"].concat(s),l=["%","/","?",";","#"].concat(o),c=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=oW();function E(T,I,D){if(T&&typeof T=="object"&&T instanceof e)return T;var P=new e;return P.parse(T,I,D),P}e.prototype.parse=function(T,I,D){if(typeof T!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof T);var P=T.indexOf("?"),k=P!==-1&&P<T.indexOf("#")?"?":"#",M=T.split(k),B=/\\/g;M[0]=M[0].replace(B,"/"),T=M.join(k);var C=T;if(C=C.trim(),!D&&T.split("#").length===1){var W=i.exec(C);if(W)return this.path=C,this.href=C,this.pathname=W[1],W[2]?(this.search=W[2],I?this.query=v.parse(this.search.substr(1)):this.query=this.search.substr(1)):I&&(this.search="",this.query={}),this}var Y=t.exec(C);if(Y){Y=Y[0];var q=Y.toLowerCase();this.protocol=q,C=C.substr(Y.length)}if(D||Y||C.match(/^\/\/[^@/]+@[^@/]+/)){var $=C.substr(0,2)==="//";$&&!(Y&&y[Y])&&(C=C.substr(2),this.slashes=!0)}if(!y[Y]&&($||Y&&!b[Y])){for(var z=-1,K=0;K<c.length;K++){var Z=C.indexOf(c[K]);Z!==-1&&(z===-1||Z<z)&&(z=Z)}var X,H;z===-1?H=C.lastIndexOf("@"):H=C.lastIndexOf("@",z),H!==-1&&(X=C.slice(0,H),C=C.slice(H+1),this.auth=decodeURIComponent(X)),z=-1;for(var K=0;K<l.length;K++){var Z=C.indexOf(l[K]);Z!==-1&&(z===-1||Z<z)&&(z=Z)}z===-1&&(z=C.length),this.host=C.slice(0,z),C=C.slice(z),this.parseHost(),this.hostname=this.hostname||"";var G=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!G)for(var J=this.hostname.split(/\./),K=0,fe=J.length;K<fe;K++){var se=J[K];if(se&&!se.match(h)){for(var be="",oe=0,re=se.length;oe<re;oe++)se.charCodeAt(oe)>127?be+="x":be+=se[oe];if(!be.match(h)){var te=J.slice(0,K),le=J.slice(K+1),ce=se.match(p);ce&&(te.push(ce[1]),le.unshift(ce[2])),le.length&&(C="/"+le.join(".")+C),this.hostname=te.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),G||(this.hostname=r.toASCII(this.hostname));var ne=this.port?":"+this.port:"",Ce=this.hostname||"";this.host=Ce+ne,this.href+=this.host,G&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),C[0]!=="/"&&(C="/"+C))}if(!g[q])for(var K=0,fe=o.length;K<fe;K++){var Se=o[K];if(C.indexOf(Se)!==-1){var ie=encodeURIComponent(Se);ie===Se&&(ie=escape(Se)),C=C.split(Se).join(ie)}}var ae=C.indexOf("#");ae!==-1&&(this.hash=C.substr(ae),C=C.slice(0,ae));var ye=C.indexOf("?");if(ye!==-1?(this.search=C.substr(ye),this.query=C.substr(ye+1),I&&(this.query=v.parse(this.query)),C=C.slice(0,ye)):I&&(this.search="",this.query={}),C&&(this.pathname=C),b[q]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ne=this.pathname||"",Ie=this.search||"";this.path=ne+Ie}return this.href=this.format(),this};function S(T){return typeof T=="string"&&(T=E(T)),T instanceof e?T.format():e.prototype.format.call(T)}e.prototype.format=function(){var T=this.auth||"";T&&(T=encodeURIComponent(T),T=T.replace(/%3A/i,":"),T+="@");var I=this.protocol||"",D=this.pathname||"",P=this.hash||"",k=!1,M="";this.host?k=T+this.host:this.hostname&&(k=T+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(M=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var B=this.search||M&&"?"+M||"";return I&&I.substr(-1)!==":"&&(I+=":"),this.slashes||(!I||b[I])&&k!==!1?(k="//"+(k||""),D&&D.charAt(0)!=="/"&&(D="/"+D)):k||(k=""),P&&P.charAt(0)!=="#"&&(P="#"+P),B&&B.charAt(0)!=="?"&&(B="?"+B),D=D.replace(/[?#]/g,function(C){return encodeURIComponent(C)}),B=B.replace("#","%23"),I+k+D+B+P};function w(T,I){return E(T,!1,!0).resolve(I)}e.prototype.resolve=function(T){return this.resolveObject(E(T,!1,!0)).format()};function A(T,I){return T?E(T,!1,!0).resolveObject(I):I}return e.prototype.resolveObject=function(T){if(typeof T=="string"){var I=new e;I.parse(T,!1,!0),T=I}for(var D=new e,P=Object.keys(this),k=0;k<P.length;k++){var M=P[k];D[M]=this[M]}if(D.hash=T.hash,T.href==="")return D.href=D.format(),D;if(T.slashes&&!T.protocol){for(var B=Object.keys(T),C=0;C<B.length;C++){var W=B[C];W!=="protocol"&&(D[W]=T[W])}return b[D.protocol]&&D.hostname&&!D.pathname&&(D.pathname="/",D.path=D.pathname),D.href=D.format(),D}if(T.protocol&&T.protocol!==D.protocol){if(!b[T.protocol]){for(var Y=Object.keys(T),q=0;q<Y.length;q++){var $=Y[q];D[$]=T[$]}return D.href=D.format(),D}if(D.protocol=T.protocol,!T.host&&!y[T.protocol]){for(var fe=(T.pathname||"").split("/");fe.length&&!(T.host=fe.shift()););T.host||(T.host=""),T.hostname||(T.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),D.pathname=fe.join("/")}else D.pathname=T.pathname;if(D.search=T.search,D.query=T.query,D.host=T.host||"",D.auth=T.auth,D.hostname=T.hostname||T.host,D.port=T.port,D.pathname||D.search){var z=D.pathname||"",K=D.search||"";D.path=z+K}return D.slashes=D.slashes||T.slashes,D.href=D.format(),D}var Z=D.pathname&&D.pathname.charAt(0)==="/",X=T.host||T.pathname&&T.pathname.charAt(0)==="/",H=X||Z||D.host&&T.pathname,G=H,J=D.pathname&&D.pathname.split("/")||[],fe=T.pathname&&T.pathname.split("/")||[],se=D.protocol&&!b[D.protocol];if(se&&(D.hostname="",D.port=null,D.host&&(J[0]===""?J[0]=D.host:J.unshift(D.host)),D.host="",T.protocol&&(T.hostname=null,T.port=null,T.host&&(fe[0]===""?fe[0]=T.host:fe.unshift(T.host)),T.host=null),H=H&&(fe[0]===""||J[0]==="")),X)D.host=T.host||T.host===""?T.host:D.host,D.hostname=T.hostname||T.hostname===""?T.hostname:D.hostname,D.search=T.search,D.query=T.query,J=fe;else if(fe.length)J||(J=[]),J.pop(),J=J.concat(fe),D.search=T.search,D.query=T.query;else if(T.search!=null){if(se){D.host=J.shift(),D.hostname=D.host;var be=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;be&&(D.auth=be.shift(),D.hostname=be.shift(),D.host=D.hostname)}return D.search=T.search,D.query=T.query,(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.href=D.format(),D}if(!J.length)return D.pathname=null,D.search?D.path="/"+D.search:D.path=null,D.href=D.format(),D;for(var oe=J.slice(-1)[0],re=(D.host||T.host||J.length>1)&&(oe==="."||oe==="..")||oe==="",te=0,le=J.length;le>=0;le--)oe=J[le],oe==="."?J.splice(le,1):oe===".."?(J.splice(le,1),te++):te&&(J.splice(le,1),te--);if(!H&&!G)for(;te--;te)J.unshift("..");H&&J[0]!==""&&(!J[0]||J[0].charAt(0)!=="/")&&J.unshift(""),re&&J.join("/").substr(-1)!=="/"&&J.push("");var ce=J[0]===""||J[0]&&J[0].charAt(0)==="/";if(se){D.hostname=ce?"":J.length?J.shift():"",D.host=D.hostname;var be=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;be&&(D.auth=be.shift(),D.hostname=be.shift(),D.host=D.hostname)}return H=H||D.host&&J.length,H&&!ce&&J.unshift(""),J.length>0?D.pathname=J.join("/"):(D.pathname=null,D.path=null),(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.auth=T.auth||D.auth,D.slashes=D.slashes||T.slashes,D.href=D.format(),D},e.prototype.parseHost=function(){var T=this.host,I=n.exec(T);I&&(I=I[0],I!==":"&&(this.port=I.substr(1)),T=T.substr(0,T.length-I.length)),T&&(this.hostname=T)},Mo.parse=E,Mo.resolve=w,Mo.resolveObject=A,Mo.format=S,Mo.Url=e,Mo}function BU(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return wg?uW(r):cW(r)}function uW(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(XU,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<VU||n>QU||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function cW(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function UU(r){let e=d_.resolve(r),t=r.charCodeAt(r.length-1);(t===WU||wg&&t===qU)&&e[e.length-1]!==d_.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(ZU,"%25")),!wg&&e.includes("\\")&&(e=e.replace(JU,"%5C")),e.includes(`
`)&&(e=e.replace(ej,"%0A")),e.includes("\r")&&(e=e.replace(tj,"%0D")),e.includes("	")&&(e=e.replace(rj,"%09")),n.pathname=e,n}var jU,Vm,h_,Qm,Xm,p_,Zm,m_,Jm,g_,eg,y_,tg,v_,rg,b_,Mo,x_,yn,GP,$U,HU,GU,KU,YU,zU,qU,WU,VU,QU,wg,XU,ZU,JU,ej,tj,rj,fW=ei(()=>{Me(),Fe(),Ne(),Oq(),Kq(),rW(),MU(),jU=Object.freeze(Object.create(null)),Vm={},h_=!1,Qm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Xm={},p_=!1,Zm={},m_=!1,Jm={},g_=!1,eg={},y_=!1,tg={},v_=!1,rg={},b_=!1,Mo={},x_=!1,yn=lW(),yn.parse,yn.resolve,yn.resolveObject,yn.format,yn.Url,GP=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,yn.URL=typeof URL<"u"?URL:null,yn.pathToFileURL=UU,yn.fileURLToPath=BU,$U=yn.Url,HU=yn.format,GU=yn.resolve,KU=yn.resolveObject,YU=yn.parse,zU=yn.URL,qU=92,WU=47,VU=97,QU=122,wg=GP==="win32",XU=/\//g,ZU=/%/g,JU=/\\/g,ej=/\n/g,tj=/\r/g,rj=/\t/g}),dW=He((r,e)=>{Me(),Fe(),Ne(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),d1=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferedDuplex=void 0,r.writev=n;var e=su(),t=(en(),qt(Jr));function n(a,s){let o=new Array(a.length);for(let l=0;l<a.length;l++)typeof a[l].chunk=="string"?o[l]=t.Buffer.from(a[l].chunk,"utf8"):o[l]=a[l].chunk;this._write(t.Buffer.concat(o),"binary",s)}var i=class extends e.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(a,s,o){super({objectMode:!0}),this.proxy=s,this.socket=o,this.writeQueue=[],a.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{!this.destroyed&&this.readable&&this.push(l)})}_read(a){this.proxy.read(a)}_write(a,s,o){this.isSocketOpen?this.writeToProxy(a,s,o):this.writeQueue.push({chunk:a,encoding:s,cb:o})}_final(a){this.writeQueue=[],this.proxy.end(a)}_destroy(a,s){this.writeQueue=[],this.proxy.destroy(),s(a)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(a,s,o){this.proxy.write(a,s)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:a,encoding:s,cb:o}=this.writeQueue.shift();this.writeToProxy(a,s,o)}}};r.BufferedDuplex=i}),Hp=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(r,"__esModule",{value:!0}),r.streamBuilder=r.browserStreamBuilder=void 0;var t=(en(),qt(Jr)),n=e(dW()),i=e(Fs()),a=su(),s=e(z0()),o=d1(),l=(0,i.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function f(E,S){let w=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(w=E.transformWsUrl(w,E,S)),w}function h(E){let S=E;return E.port||(E.protocol==="wss"?S.port=443:S.port=80),E.path||(S.path="/"),E.wsOptions||(S.wsOptions={}),!s.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&c.forEach(w=>{Object.prototype.hasOwnProperty.call(E,w)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,w)&&(S.wsOptions[w]=E[w])}),S}function p(E){let S=h(E);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);S.hostname=w.hostname,S.port||(S.port=Number(w.port))}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function g(E,S,w){l("createWebSocket"),l(`protocol: ${w.protocolId} ${w.protocolVersion}`);let A=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${S} and protocol: ${A}`);let T;return w.createWebsocket?T=w.createWebsocket(S,[A],w):T=new n.default(S,[A],w.wsOptions),T}function y(E,S){let w=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",A=f(S,E),T;return S.createWebsocket?T=S.createWebsocket(A,[w],S):T=new WebSocket(A,[w]),T.binaryType="arraybuffer",T}var b=(E,S)=>{l("streamBuilder");let w=h(S);w.hostname=w.hostname||w.host||"localhost";let A=f(w,E),T=g(E,A,w),I=n.default.createWebSocketStream(T,w.wsOptions);return I.url=A,T.on("close",()=>{I.destroy()}),I};r.streamBuilder=b;var v=(E,S)=>{l("browserStreamBuilder");let w,A=p(S).browserBufferSize||1024*512,T=S.browserBufferTimeout||1e3,I=!S.objectMode,D=y(E,S),P=M(S,q,$);S.objectMode||(P._writev=o.writev.bind(P)),P.on("close",()=>{D.close()});let k=typeof D.addEventListener<"u";D.readyState===D.OPEN?(w=P,w.socket=D):(w=new o.BufferedDuplex(S,P,D),k?D.addEventListener("open",B):D.onopen=B),k?(D.addEventListener("close",C),D.addEventListener("error",W),D.addEventListener("message",Y)):(D.onclose=C,D.onerror=W,D.onmessage=Y);function M(z,K,Z){let X=new a.Transform({objectMode:z.objectMode});return X._write=K,X._flush=Z,X}function B(){l("WebSocket onOpen"),w instanceof o.BufferedDuplex&&w.socketReady()}function C(z){l("WebSocket onClose",z),w.end(),w.destroy()}function W(z){l("WebSocket onError",z);let K=new Error("WebSocket error");K.event=z,w.destroy(K)}async function Y(z){if(!P||!P.readable||!P.writable)return;let{data:K}=z;K instanceof ArrayBuffer?K=t.Buffer.from(K):K instanceof Blob?K=t.Buffer.from(await new Response(K).arrayBuffer()):K=t.Buffer.from(K,"utf8"),P.push(K)}function q(z,K,Z){if(D.bufferedAmount>A){setTimeout(q,T,z,K,Z);return}I&&typeof z=="string"&&(z=t.Buffer.from(z,"utf8"));try{D.send(z)}catch(X){return Z(X)}Z()}function $(z){D.close(),z()}return w};r.browserStreamBuilder=v}),h1={};Hc(h1,{Server:()=>sr,Socket:()=>sr,Stream:()=>sr,_createServerHandle:()=>sr,_normalizeArgs:()=>sr,_setSimultaneousAccepts:()=>sr,connect:()=>sr,createConnection:()=>sr,createServer:()=>sr,default:()=>nj,isIP:()=>sr,isIPv4:()=>sr,isIPv6:()=>sr});function sr(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var nj,ij=ei(()=>{Me(),Fe(),Ne(),nj={_createServerHandle:sr,_normalizeArgs:sr,_setSimultaneousAccepts:sr,connect:sr,createConnection:sr,createServer:sr,isIP:sr,isIPv4:sr,isIPv6:sr,Server:sr,Socket:sr,Stream:sr}}),aj=He((r,e)=>{Me(),Fe(),Ne(),e.exports={}}),KP=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0});var t=e((ij(),qt(h1))),n=e(Fs()),i=e(aj()),a=(0,n.default)("mqttjs:tcp"),s=(o,l)=>{if(l.port=l.port||1883,l.hostname=l.hostname||l.host||"localhost",l.socksProxy)return(0,i.default)(l.hostname,l.port,l.socksProxy,{timeout:l.socksTimeout});let{port:c,path:f}=l,h=l.hostname;return a("port %d and host %s",c,h),t.default.createConnection({port:c,host:h,path:f})};r.default=s}),sj={};Hc(sj,{default:()=>oj});var oj,hW=ei(()=>{Me(),Fe(),Ne(),oj={}}),YP=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0});var t=(hW(),qt(sj)),n=e((ij(),qt(h1))),i=e(Fs()),a=e(aj()),s=(0,i.default)("mqttjs:tls");function o(c){let{host:f,port:h,socksProxy:p,...g}=c;if(p!==void 0){let y=(0,a.default)(f,h,p,{timeout:c.socksTimeout});return(0,t.connect)({...g,socket:y})}return(0,t.connect)(c)}var l=(c,f)=>{f.port=f.port||8883,f.host=f.hostname||f.host||"localhost",n.default.isIP(f.host)===0&&(f.servername=f.host),f.rejectUnauthorized=f.rejectUnauthorized!==!1,delete f.path,s("port %d host %s rejectUnauthorized %b",f.port,f.host,f.rejectUnauthorized);let h=o(f);h.on("secureConnect",()=>{f.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",p)});function p(g){f.rejectUnauthorized&&c.emit("error",g),h.end()}return h.on("error",p),h};r.default=l}),zP=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(en(),qt(Jr)),t=su(),n=d1(),i,a,s;function o(){let p=new t.Transform;return p._write=(g,y,b)=>{i.send({data:g.buffer,success(){b()},fail(v){b(new Error(v))}})},p._flush=g=>{i.close({success(){g()}})},p}function l(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function c(p,g){let y=p.protocol==="wxs"?"wss":"ws",b=`${y}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(b=`${y}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(b=p.transformWsUrl(b,p,g)),b}function f(){i.onOpen(()=>{s.socketReady()}),i.onMessage(p=>{let{data:g}=p;g instanceof ArrayBuffer?g=e.Buffer.from(g):g=e.Buffer.from(g,"utf8"),a.push(g)}),i.onClose(()=>{s.emit("close"),s.end(),s.destroy()}),i.onError(p=>{let g=new Error(p.errMsg);s.destroy(g)})}var h=(p,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let y=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";l(g);let b=c(g,p);i=wx.connectSocket({url:b,protocols:[y]}),a=o(),s=new n.BufferedDuplex(g,a,i),s._destroy=(E,S)=>{i.close({success(){S&&S(E)}})};let v=s.destroy;return s.destroy=(E,S)=>(s.destroy=v,setTimeout(()=>{i.close({fail(){s._destroy(E,S)}})},0),s),f(),s};r.default=h}),qP=He(r=>{Me(),Fe(),Ne(),Object.defineProperty(r,"__esModule",{value:!0});var e=(en(),qt(Jr)),t=su(),n=d1(),i,a,s,o=!1;function l(){let g=new t.Transform;return g._write=(y,b,v)=>{i.sendSocketMessage({data:y.buffer,success(){v()},fail(){v(new Error)}})},g._flush=y=>{i.closeSocket({success(){y()}})},g}function c(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function f(g,y){let b=g.protocol==="alis"?"wss":"ws",v=`${b}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(v=`${b}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(v=g.transformWsUrl(v,g,y)),v}function h(){o||(o=!0,i.onSocketOpen(()=>{s.socketReady()}),i.onSocketMessage(g=>{if(typeof g.data=="string"){let y=e.Buffer.from(g.data,"base64");a.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{if(y.result instanceof ArrayBuffer){a.push(e.Buffer.from(y.result));return}a.push(e.Buffer.from(y.result,"utf-8"))}),y.readAsArrayBuffer(g.data)}}),i.onSocketClose(()=>{s.end(),s.destroy()}),i.onSocketError(g=>{s.destroy(g)}))}var p=(g,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let b=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";c(y);let v=f(y,g);return i=y.my,i.connectSocket({url:v,protocols:b}),a=l(),s=new n.BufferedDuplex(y,a,i),h(),s};r.default=p}),pW=He(r=>{Me(),Fe(),Ne();var e=r&&r.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(r,"__esModule",{value:!0}),r.connectAsync=f;var t=e(Fs()),n=e((fW(),qt(NU))),i=e(Lw()),a=e(z0());typeof Jt?.nextTick!="function"&&(Jt.nextTick=setImmediate);var s=(0,t.default)("mqttjs"),o=null;function l(h){let p;if(h.auth)if(p=h.auth.match(/^(.+):(.+)$/),p){let[,g,y]=p;h.username=g,h.password=y}else h.username=h.auth}function c(h,p){if(s("connecting to an MQTT broker..."),typeof h=="object"&&!p&&(p=h,h=""),p=p||{},h&&typeof h=="string"){let b=n.default.parse(h,!0),v={};if(b.port!=null&&(v.port=Number(b.port)),v.host=b.hostname,v.query=b.query,v.auth=b.auth,v.protocol=b.protocol,v.path=b.path,p={...v,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||p.protocol?.includes("+unix"),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!p.protocol?.startsWith("ws")&&!p.protocol?.startsWith("wx")&&delete p.path,l(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),a.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Jt<"u"&&(p.socksProxy=Jt.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(o||(o={},!a.default&&!p.forceNativeWebSocket?(o.ws=Hp().streamBuilder,o.wss=Hp().streamBuilder,o.mqtt=KP().default,o.tcp=KP().default,o.ssl=YP().default,o.tls=o.ssl,o.mqtts=YP().default):(o.ws=Hp().browserStreamBuilder,o.wss=Hp().browserStreamBuilder,o.wx=zP().default,o.wxs=zP().default,o.ali=qP().default,o.alis=qP().default)),!o[p.protocol]){let b=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,E)=>b&&E%2===0?!1:typeof o[v]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function g(b){return p.servers&&((!b._reconnectCount||b._reconnectCount===p.servers.length)&&(b._reconnectCount=0),p.host=p.servers[b._reconnectCount].host,p.port=p.servers[b._reconnectCount].port,p.protocol=p.servers[b._reconnectCount].protocol?p.servers[b._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,b._reconnectCount++),s("calling streambuilder for",p.protocol),o[p.protocol](b,p)}let y=new i.default(g,p);return y.on("error",()=>{}),y}function f(h,p,g=!0){return new Promise((y,b)=>{let v=c(h,p),E={connect:w=>{S(),y(v)},end:()=>{S(),y(v)},error:w=>{S(),v.end(),b(w)}};g===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function S(){Object.keys(E).forEach(w=>{v.off(w,E[w])})}Object.keys(E).forEach(w=>{v.on(w,E[w])})})}r.default=c}),WP=He(r=>{Me(),Fe(),Ne();var e=r&&r.__createBinding||(Object.create?function(g,y,b,v){v===void 0&&(v=b);var E=Object.getOwnPropertyDescriptor(y,b);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,v,E)}:function(g,y,b,v){v===void 0&&(v=b),g[v]=y[b]}),t=r&&r.__setModuleDefault||(Object.create?function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}:function(g,y){g.default=y}),n=r&&r.__importStar||(function(){var g=function(y){return g=Object.getOwnPropertyNames||function(b){var v=[];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(v[v.length]=E);return v},g(y)};return function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var v=g(y),E=0;E<v.length;E++)v[E]!=="default"&&e(b,y,v[E]);return t(b,y),b}})(),i=r&&r.__exportStar||function(g,y){for(var b in g)b!=="default"&&!Object.prototype.hasOwnProperty.call(y,b)&&e(y,g,b)},a=r&&r.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(r,"__esModule",{value:!0}),r.ReasonCodes=r.KeepaliveManager=r.UniqueMessageIdProvider=r.DefaultMessageIdProvider=r.Store=r.MqttClient=r.connectAsync=r.connect=r.Client=void 0;var s=a(Lw());r.MqttClient=s.default;var o=a(wU());r.DefaultMessageIdProvider=o.default;var l=a(Aq());r.UniqueMessageIdProvider=l.default;var c=a(sU());r.Store=c.default;var f=n(pW());r.connect=f.default,Object.defineProperty(r,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});var h=a(CU());r.KeepaliveManager=h.default,r.Client=s.default,i(Lw(),r),i(Kc(),r);var p=K0();Object.defineProperty(r,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),mW=He(r=>{Me(),Fe(),Ne();var e=r&&r.__createBinding||(Object.create?function(s,o,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(o,l);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(s,c,f)}:function(s,o,l,c){c===void 0&&(c=l),s[c]=o[l]}),t=r&&r.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=r&&r.__importStar||(function(){var s=function(o){return s=Object.getOwnPropertyNames||function(l){var c=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[c.length]=f);return c},s(o)};return function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var c=s(o),f=0;f<c.length;f++)c[f]!=="default"&&e(l,o,c[f]);return t(l,o),l}})(),i=r&&r.__exportStar||function(s,o){for(var l in s)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,s,l)};Object.defineProperty(r,"__esModule",{value:!0});var a=n(WP());r.default=a,i(WP(),r)});const gW=mW();const yW="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",vW="8884",bW="esp32-client-01",xW="Qjawns3445";let di=null;const hc=[],SW=new Map;function wd(){if(di)return di;const r=`wss://${yW}:${vW}/mqtt`;return console.log(` Connecting to HiveMQ Cloud: ${r}`),di=gW.connect(r,{username:bW,password:xW,clean:!0,reconnectPeriod:3e3,clientId:`tansaeng-web-${Math.random().toString(16).slice(2,10)}`}),di.setMaxListeners(20),di.on("connect",()=>{console.log(" MQTT Connected to HiveMQ Cloud"),hc.forEach(e=>e(!0))}),di.on("error",e=>{console.error(" MQTT Connection Error:",e),hc.forEach(t=>t(!1))}),di.on("reconnect",()=>{console.log(" MQTT Reconnecting...")}),di.on("offline",()=>{console.log(" MQTT Offline"),hc.forEach(e=>e(!1))}),di.on("message",(e,t)=>{const n=SW.get(e);if(n){const i=t.toString();n.forEach(a=>a(i))}}),di}function VP(){return di?.connected??!1}function lj(r){return hc.push(r),di&&r(di.connected),()=>{const e=hc.indexOf(r);e>-1&&hc.splice(e,1)}}function Io(r,e){const t=wd();let n;"power"in e?n=e.power.toUpperCase():n=JSON.stringify(e),t.publish(r,n,{qos:1},i=>{i?console.error(` Failed to publish to ${r}:`,i):console.log(` Published to ${r}:`,n)})}async function Gp(r,e,t){try{return await(await fetch("https://www.tansaeng.com/api/smartfarm/device_control.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({controllerId:r,deviceId:e,command:t})})).json()}catch(n){return console.error("[API Error]",n),{success:!1,message:n instanceof Error?n.message:"Unknown error"}}}function EW({deviceState:r,setDeviceState:e}){const[t,n]=L.useState({}),[i,a]=L.useState(!1),[s,o]=L.useState({}),l=L.useRef({}),[c,f]=L.useState({}),[h,p]=L.useState({}),g=jp("fan"),y=jp("pump"),b=jp("skylight"),v=jp("sidescreen");L.useEffect(()=>{wd();const P=lj(k=>a(k));return()=>P()},[]),L.useEffect(()=>{const P=async()=>{try{const B=await(await fetch("/api/device_status.php")).json();if(B.success){const C={};Object.entries(B.devices).forEach(([W,Y])=>{C[W]=Y.is_online}),n(C)}}catch(M){console.error("[API] Failed to fetch ESP32 status:",M)}};P();const k=setInterval(P,5e3);return()=>clearInterval(k)},[]);const E=async(P,k)=>{const M={...r,[P]:{...r[P],power:k?"on":"off",lastSavedAt:new Date().toISOString()}};e(M);const B=[...g,...y].find(C=>C.id===P);if(B){const W=B.commandTopic.split("/")[2];await Gp(B.esp32Id,W,k?"ON":"OFF")}},S=async(P,k)=>{const M=[...b,...v].find(B=>B.id===P);if(M){const C=M.commandTopic.split("/")[2];f(k==="OPEN"||k==="CLOSE"?W=>({...W,[P]:"running"}):W=>({...W,[P]:"idle"})),await Gp(M.esp32Id,C,k)}},w=P=>{const k=s[P];if(!k)return;const M=parseInt(k);if(isNaN(M)||M<0||M>100){alert("0~100   .");return}e({...r,[P]:{...r[P],targetPercentage:M,lastSavedAt:new Date().toISOString()}})},A=async P=>{const k=r[P]?.targetPercentage??0,M=h[P]??0,B=[...b,...v].find(K=>K.id===P);if(!B)return;const C=k-M;if(C===0)return;l.current[P]&&clearTimeout(l.current[P]),f({...c,[P]:"running"});const W=B.esp32Id==="ctlr-0012"?300:120,Y=Math.abs(C)/100*W,q=C>0?"OPEN":"CLOSE",z=B.commandTopic.split("/")[2];await Gp(B.esp32Id,z,q),l.current[P]=setTimeout(async()=>{await Gp(B.esp32Id,z,"STOP"),p(K=>({...K,[P]:k})),f(K=>({...K,[P]:"completed"}))},Y*1e3)},T=Object.values(t).filter(Boolean).length,I=BR.length,D=(P,k,M)=>j.jsxs("div",{className:`bg-white border-2 ${k} rounded-lg p-3 shadow-sm`,children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:P.name}),c[P.id]==="running"&&j.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full",children:[j.jsx("span",{className:"animate-pulse",children:""})," "]})]}),j.jsxs("div",{className:"flex gap-1.5 mb-2",children:[j.jsx("button",{onClick:()=>S(P.id,"OPEN"),className:"flex-1 bg-green-500 active:bg-green-600 text-white font-bold py-2.5 rounded text-sm",children:""}),j.jsx("button",{onClick:()=>S(P.id,"STOP"),className:"flex-1 bg-yellow-500 active:bg-yellow-600 text-white font-bold py-2.5 rounded text-sm",children:""}),j.jsx("button",{onClick:()=>S(P.id,"CLOSE"),className:"flex-1 bg-red-500 active:bg-red-600 text-white font-bold py-2.5 rounded text-sm",children:""})]}),j.jsxs("div",{className:"flex items-center gap-1.5",children:[j.jsx("input",{type:"number",min:"0",max:"100",value:s[P.id]??r[P.id]?.targetPercentage??0,onChange:B=>o({...s,[P.id]:B.target.value}),className:"w-16 px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-farm-500"}),j.jsx("span",{className:"text-sm text-gray-600",children:"%"}),j.jsx("button",{onClick:()=>w(P.id),className:"px-2 py-1.5 bg-gray-500 text-white text-xs rounded",children:""}),j.jsx("button",{onClick:()=>A(P.id),className:`px-3 py-1.5 ${M} text-white text-xs font-bold rounded disabled:bg-gray-400`,disabled:c[P.id]==="running",children:""}),j.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[h[P.id]??0,"%"]})]})]},P.id);return j.jsx("div",{className:"bg-gray-50 min-h-full",children:j.jsxs("div",{className:"p-2",children:[j.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg px-3 py-2 mb-2 shadow-sm",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${i?"bg-green-500 animate-pulse":"bg-red-500"}`}),j.jsx("span",{className:"text-xs font-medium text-gray-700",children:"MQTT"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${T>0?"bg-farm-500 animate-pulse":"bg-gray-400"}`}),j.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[" ",T,"/",I]})]})]}),j.jsx(qf,{title:"ESP32  ",icon:"",badge:`${T}/${I}`,defaultOpen:!1,children:j.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:BR.map(P=>{const k=t[P.controllerId]===!0;return j.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1.5 rounded border text-xs ${k?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[j.jsx("div",{className:`w-2 h-2 rounded-full ${k?"bg-green-500":"bg-gray-400"}`}),j.jsx("span",{className:"truncate flex-1 text-gray-700",children:P.name})]},P.id)})})}),j.jsx(qf,{title:" ",icon:"",badge:g.length,defaultOpen:!0,children:j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:g.map(P=>j.jsx(UR,{device:P,power:r[P.id]?.power??"off",lastSavedAt:r[P.id]?.lastSavedAt,onToggle:k=>E(P.id,k)},P.id))})}),j.jsx(qf,{title:" ",icon:"",badge:b.length,headerColor:"bg-amber-400",defaultOpen:!1,children:j.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.map(P=>D(P,"border-amber-200","bg-amber-500"))})}),j.jsx(qf,{title:" ",icon:"",badge:v.length,headerColor:"bg-blue-400",defaultOpen:!1,children:j.jsx("div",{className:"grid grid-cols-1 gap-2",children:v.map(P=>D(P,"border-blue-200","bg-blue-500"))})}),j.jsx(qf,{title:" ",icon:"",badge:y.length,defaultOpen:!1,children:j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:y.map(P=>j.jsx(UR,{device:P,power:r[P.id]?.power??"off",lastSavedAt:r[P.id]?.lastSavedAt,onToggle:k=>E(P.id,k)},P.id))})})]})})}const wW={zone_a:"ctlr-0004",zone_b:"ctlr-0005",zone_c:"ctlr-0006",zone_d:"ctlr-0007",zone_e:"ctlr-0008"};function _W({zones:r,setZones:e}){const[t,n]=L.useState({}),[i,a]=L.useState({}),[s,o]=L.useState({}),[l,c]=L.useState({}),f=L.useRef({}),[h,p]=L.useState(!1);L.useEffect(()=>{wd();const C=lj(W=>{p(W),console.log(`[MQTT] Connection status: ${W?"Connected":"Disconnected"}`)});return()=>C()},[]),L.useEffect(()=>{const C=async()=>{try{const q=await(await fetch("/api/device_status.php")).json();if(q.success){const $={};Object.entries(q.devices).forEach(([z,K])=>{$[z]=K.is_online}),a($),n(z=>{const K={...z};return Object.entries(wW).forEach(([Z,X])=>{K[Z]?K[Z]={...K[Z],online:$[X]??!1}:K[Z]={valveState:"UNKNOWN",online:$[X]??!1,lastUpdated:""}}),K})}}catch(Y){console.error("[API] Failed to fetch ESP32 status:",Y)}};C();const W=setInterval(C,5e3);return()=>clearInterval(W)},[]),L.useEffect(()=>{const C=wd(),W=(q,$)=>{const z=$.toString();q==="tansaeng/ctlr-0004/valve1/state"&&(n(K=>({...K,zone_a:{...K.zone_a,valveState:z==="OPEN"?"OPEN":"CLOSE",lastUpdated:new Date().toLocaleTimeString()}})),o(K=>({...K,zone_a:z==="OPEN"?"spraying":"stopped"}))),q==="tansaeng/ctlr-0004/status"&&n(K=>({...K,zone_a:{...K.zone_a,online:z==="online",lastUpdated:new Date().toLocaleTimeString()}})),q==="tansaeng/ctlr-0005/valve1/state"&&(n(K=>({...K,zone_b:{...K.zone_b,valveState:z==="OPEN"?"OPEN":"CLOSE",lastUpdated:new Date().toLocaleTimeString()}})),o(K=>({...K,zone_b:z==="OPEN"?"spraying":"stopped"}))),q==="tansaeng/ctlr-0005/status"&&n(K=>({...K,zone_b:{...K.zone_b,online:z==="online",lastUpdated:new Date().toLocaleTimeString()}})),q==="tansaeng/ctlr-0006/valve1/state"&&(n(K=>({...K,zone_c:{...K.zone_c,valveState:z==="OPEN"?"OPEN":"CLOSE",lastUpdated:new Date().toLocaleTimeString()}})),o(K=>({...K,zone_c:z==="OPEN"?"spraying":"stopped"}))),q==="tansaeng/ctlr-0006/status"&&n(K=>({...K,zone_c:{...K.zone_c,online:z==="online",lastUpdated:new Date().toLocaleTimeString()}})),q==="tansaeng/ctlr-0007/valve1/state"&&(n(K=>({...K,zone_d:{...K.zone_d,valveState:z==="OPEN"?"OPEN":"CLOSE",lastUpdated:new Date().toLocaleTimeString()}})),o(K=>({...K,zone_d:z==="OPEN"?"spraying":"stopped"}))),q==="tansaeng/ctlr-0007/status"&&n(K=>({...K,zone_d:{...K.zone_d,online:z==="online",lastUpdated:new Date().toLocaleTimeString()}})),q==="tansaeng/ctlr-0008/valve1/state"&&(n(K=>({...K,zone_e:{...K.zone_e,valveState:z==="OPEN"?"OPEN":"CLOSE",lastUpdated:new Date().toLocaleTimeString()}})),o(K=>({...K,zone_e:z==="OPEN"?"spraying":"stopped"}))),q==="tansaeng/ctlr-0008/status"&&n(K=>({...K,zone_e:{...K.zone_e,online:z==="online",lastUpdated:new Date().toLocaleTimeString()}}))};return C.on("message",W),["tansaeng/ctlr-0004/valve1/state","tansaeng/ctlr-0004/status","tansaeng/ctlr-0005/valve1/state","tansaeng/ctlr-0005/status","tansaeng/ctlr-0006/valve1/state","tansaeng/ctlr-0006/status","tansaeng/ctlr-0007/valve1/state","tansaeng/ctlr-0007/status","tansaeng/ctlr-0008/valve1/state","tansaeng/ctlr-0008/status"].forEach(q=>{C.subscribe(q,$=>{$||console.log(`[MQTT] Subscribed: ${q}`)})}),()=>{C.off("message",W)}},[]);const g=(C,W)=>{e(Y=>Y.map(q=>q.id===C?{...q,...W}:q))},y=(C,W)=>{e(Y=>Y.map(q=>q.id===C?{...q,daySchedule:{...q.daySchedule,...W}}:q))},b=(C,W)=>{e(Y=>Y.map(q=>q.id===C?{...q,nightSchedule:{...q.nightSchedule,...W}}:q))},v=C=>`tansaeng/${C}/valve1/cmd`,E=C=>{if(C.mode==="AUTO"){if(C.daySchedule.enabled&&!C.daySchedule.sprayDurationSeconds){alert("   . ()  .");return}if(C.nightSchedule.enabled&&!C.nightSchedule.sprayDurationSeconds){alert("   . ()  .");return}if(!C.daySchedule.enabled&&!C.nightSchedule.enabled){alert("AUTO         .");return}}C.controllerId&&Io(`tansaeng/mist/${C.id}/config`,{mode:C.mode,controllerId:C.controllerId,daySchedule:C.daySchedule,nightSchedule:C.nightSchedule}),alert(`${C.name}  .`)},S=C=>{const W=f.current[C];W&&(W.stopTimer&&clearTimeout(W.stopTimer),W.sprayTimer&&clearTimeout(W.sprayTimer),W.isRunning=!1),c(Y=>({...Y,[C]:"idle"}))},w=(C,W)=>{const Y=C.id,q=C.controllerId;if(!q)return;const $=v(q),z=(W.sprayDurationSeconds??0)*1e3,K=(W.stopDurationSeconds??0)*1e3;console.log(`[AUTO] Starting cycle for ${C.name}`),console.log(`[AUTO] Topic: ${$}`),console.log(`[AUTO] Spray: ${z/1e3}s, Stop: ${K/1e3}s`),console.log(`[AUTO] MQTT Connected: ${VP()}`),S(Y),f.current[Y]={stopTimer:null,sprayTimer:null,isRunning:!0};const Z=()=>{if(f.current[Y]?.isRunning){if(!VP()){console.error("[AUTO] MQTT not connected! Retrying in 3 seconds..."),f.current[Y].stopTimer=setTimeout(Z,3e3);return}console.log(`[AUTO] ${C.name}: Sending OFF to ${$}`),Io($,{power:"off"}),c(X=>({...X,[Y]:"waiting"})),o(X=>({...X,[Y]:"stopped"})),f.current[Y].stopTimer=setTimeout(()=>{f.current[Y]?.isRunning&&(console.log(`[AUTO] ${C.name}: Sending ON to ${$}`),Io($,{power:"on"}),c(X=>({...X,[Y]:"spraying"})),o(X=>({...X,[Y]:"spraying"})),f.current[Y].sprayTimer=setTimeout(()=>{f.current[Y]?.isRunning&&Z()},z))},K)}};Z()},A=C=>{const W=new Date,Y=W.getHours()*60+W.getMinutes(),q=$=>{if(!$)return 0;const[z,K]=$.split(":").map(Number);return z*60+K};if(C.daySchedule.enabled){const $=q(C.daySchedule.startTime),z=q(C.daySchedule.endTime);if($<=Y&&Y<z)return C.daySchedule}if(C.nightSchedule.enabled){const $=q(C.nightSchedule.startTime),z=q(C.nightSchedule.endTime);if($>z){if(Y>=$||Y<z)return C.nightSchedule}else if($<=Y&&Y<z)return C.nightSchedule}return null},T=C=>{if(!C.controllerId){alert("   .");return}if(C.mode==="OFF"){alert("   MANUAL  AUTO .");return}if(C.mode==="AUTO"){const W=A(C);if(!W){alert("    . /  .");return}w(C,W),g(C.id,{isRunning:!0}),alert(`${C.name} AUTO  .
 ${W.stopDurationSeconds??0}   ${W.sprayDurationSeconds??0}  `)}else Io(`tansaeng/mist/${C.id}/control`,{action:"start",controllerId:C.controllerId}),g(C.id,{isRunning:!0}),alert(`${C.name}  .`)},I=C=>{if(!C.controllerId){alert("   .");return}S(C.id);const W=v(C.controllerId);Io(W,{power:"off"}),Io(`tansaeng/mist/${C.id}/control`,{action:"stop",controllerId:C.controllerId}),g(C.id,{isRunning:!1}),alert(`${C.name}  .`)};L.useEffect(()=>()=>{Object.keys(f.current).forEach(C=>{S(C)})},[]);const D=C=>{if(!C.controllerId){alert("   .");return}const W=v(C.controllerId);Io(W,{power:"on"}),o(Y=>({...Y,[C.id]:"spraying"})),console.log(`[MQTT] Published to ${W}: ON`)},P=C=>{if(!C.controllerId){alert("   .");return}const W=v(C.controllerId);Io(W,{power:"off"}),o(Y=>({...Y,[C.id]:"stopped"})),console.log(`[MQTT] Published to ${W}: OFF`)},k=C=>C==="OFF"?{bg:"#f3f4f6",text:"#4b5563"}:C==="MANUAL"?{bg:"#dbeafe",text:"#1e40af"}:{bg:"#d1fae5",text:"#065f46"},M=({state:C,zoneId:W,controllerId:Y})=>{const q=t[W],$=Y?i[Y]===!0:q?.online??!1,z=q?.valveState??"UNKNOWN",K=z==="OPEN"?"spraying":z==="CLOSE"?"stopped":C;return K==="spraying"?j.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-100 rounded-lg border border-green-300",children:[j.jsxs("div",{className:"relative",children:[j.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse"}),j.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-green-400 rounded-full animate-ping opacity-75"})]}),j.jsx("span",{className:"text-green-700 font-semibold",children:""}),$&&j.jsx("span",{className:"text-xs text-green-600 ml-2",children:"()"})]}):K==="stopped"?j.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-100 rounded-lg border border-red-300",children:[j.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),j.jsx("span",{className:"text-red-700 font-semibold",children:""}),$&&j.jsx("span",{className:"text-xs text-red-600 ml-2",children:"()"})]}):j.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-100 rounded-lg border border-gray-300",children:[j.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full"}),j.jsx("span",{className:"text-gray-600 font-medium",children:""}),!$&&j.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"()"})]})},B=({schedule:C,label:W})=>C.enabled?j.jsxs("div",{className:"text-xs bg-white/80 rounded px-2 py-1 border",children:[j.jsxs("span",{className:"font-medium",children:[W,":"]})," ",C.startTime||"--:--"," ~ ",C.endTime||"--:--",","," "," ",C.stopDurationSeconds??0,"   ",C.sprayDurationSeconds??0,""]}):null;return j.jsx("div",{className:"bg-gray-50 min-h-full",children:j.jsxs("div",{className:"p-2",children:[j.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg px-3 py-2 mb-2 shadow-sm",children:[j.jsx("span",{className:"text-sm font-bold text-gray-800",children:" "}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${h?"bg-green-500 animate-pulse":"bg-red-500"}`}),j.jsx("span",{className:"text-xs text-gray-600",children:"MQTT"})]})]}),r.map(C=>{const W=k(C.mode),Y=s[C.id]||"idle",q=C.controllerId?i[C.controllerId]===!0:!1;return j.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-2 overflow-hidden",children:[j.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-farm-500",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("span",{className:"text-sm font-bold text-gray-900",children:C.name}),C.controllerId&&j.jsx("span",{className:`w-2 h-2 rounded-full ${q?"bg-green-400 animate-pulse":"bg-red-400"}`})]}),j.jsxs("div",{className:"flex items-center gap-1.5",children:[C.isRunning&&j.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:""}),j.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{background:W.bg,color:W.text},children:C.mode})]})]}),j.jsxs("div",{className:"p-3",children:[j.jsx("div",{className:"flex gap-1 mb-3",children:["OFF","MANUAL","AUTO"].map($=>j.jsx("button",{onClick:()=>g(C.id,{mode:$}),className:`flex-1 py-2 text-xs font-bold rounded transition-all ${C.mode===$?"bg-farm-500 text-white":"bg-gray-100 text-gray-600 active:bg-gray-200"}`,children:$},$))}),C.mode==="MANUAL"&&j.jsxs("div",{className:"space-y-2",children:[j.jsx(M,{state:Y,zoneId:C.id,controllerId:C.controllerId}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("button",{onClick:()=>D(C),disabled:!C.controllerId,className:"flex-1 bg-green-500 active:bg-green-600 disabled:bg-gray-300 text-white font-bold py-3 rounded text-sm",children:" "}),j.jsx("button",{onClick:()=>P(C),disabled:!C.controllerId,className:"flex-1 bg-red-500 active:bg-red-600 disabled:bg-gray-300 text-white font-bold py-3 rounded text-sm",children:" "})]})]}),C.mode==="AUTO"&&j.jsxs("div",{children:[j.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-xl border border-yellow-200",children:[j.jsxs("div",{className:"flex items-center justify-between mb-3",children:[j.jsx("h3",{className:"text-lg font-semibold text-yellow-800 m-0",children:"  "}),j.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[j.jsx("input",{type:"checkbox",checked:C.daySchedule.enabled,onChange:$=>y(C.id,{enabled:$.target.checked}),className:"w-4 h-4 accent-yellow-500"}),j.jsx("span",{className:"text-sm text-yellow-700",children:""})]})]}),C.daySchedule.enabled&&j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"time",value:C.daySchedule.startTime,onChange:$=>y(C.id,{startTime:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"time",value:C.daySchedule.endTime,onChange:$=>y(C.id,{endTime:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[j.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[j.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"  ()"}),j.jsx("input",{type:"number",min:"1",value:C.daySchedule.sprayDurationSeconds??"",onChange:$=>y(C.id,{sprayDurationSeconds:Number($.target.value)||null}),placeholder:"  ",className:"w-full px-3 py-2 border border-green-300 rounded-lg text-base"}),j.jsx("p",{className:"text-xs text-green-600 mt-1",children:"  "})]}),j.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[j.jsx("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"  ()"}),j.jsx("input",{type:"number",min:"0",value:C.daySchedule.stopDurationSeconds??"",onChange:$=>y(C.id,{stopDurationSeconds:Number($.target.value)||null}),placeholder:"   ",className:"w-full px-3 py-2 border border-red-300 rounded-lg text-base"}),j.jsx("p",{className:"text-xs text-red-600 mt-1",children:"   "})]})]}),j.jsxs("div",{className:"text-xs text-gray-500 bg-gray-100 p-2 rounded",children:[" : (",C.daySchedule.stopDurationSeconds??0,")  (",C.daySchedule.sprayDurationSeconds??0,")  "]})]})]}),j.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-200",children:[j.jsxs("div",{className:"flex items-center justify-between mb-3",children:[j.jsx("h3",{className:"text-lg font-semibold text-indigo-800 m-0",children:"  "}),j.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[j.jsx("input",{type:"checkbox",checked:C.nightSchedule.enabled,onChange:$=>b(C.id,{enabled:$.target.checked}),className:"w-4 h-4 accent-indigo-500"}),j.jsx("span",{className:"text-sm text-indigo-700",children:""})]})]}),C.nightSchedule.enabled&&j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"time",value:C.nightSchedule.startTime,onChange:$=>b(C.id,{startTime:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"time",value:C.nightSchedule.endTime,onChange:$=>b(C.id,{endTime:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[j.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[j.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"  ()"}),j.jsx("input",{type:"number",min:"1",value:C.nightSchedule.sprayDurationSeconds??"",onChange:$=>b(C.id,{sprayDurationSeconds:Number($.target.value)||null}),placeholder:"  ",className:"w-full px-3 py-2 border border-green-300 rounded-lg text-base"}),j.jsx("p",{className:"text-xs text-green-600 mt-1",children:"  "})]}),j.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[j.jsx("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"  ()"}),j.jsx("input",{type:"number",min:"0",value:C.nightSchedule.stopDurationSeconds??"",onChange:$=>b(C.id,{stopDurationSeconds:Number($.target.value)||null}),placeholder:"   ",className:"w-full px-3 py-2 border border-red-300 rounded-lg text-base"}),j.jsx("p",{className:"text-xs text-red-600 mt-1",children:"   "})]})]}),j.jsxs("div",{className:"text-xs text-gray-500 bg-gray-100 p-2 rounded",children:[" : (",C.nightSchedule.stopDurationSeconds??0,")  (",C.nightSchedule.sprayDurationSeconds??0,")  "]})]})]}),j.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[j.jsx(B,{schedule:C.daySchedule,label:" "}),j.jsx(B,{schedule:C.nightSchedule,label:" "})]}),j.jsx("div",{className:"mb-4",children:j.jsx(M,{state:s[C.id]||"idle",zoneId:C.id,controllerId:C.controllerId})}),C.isRunning&&j.jsxs("div",{className:`mb-4 p-3 rounded-lg border flex items-center gap-3 ${l[C.id]==="spraying"?"bg-green-100 border-green-300":l[C.id]==="waiting"?"bg-yellow-100 border-yellow-300":"bg-gray-100 border-gray-300"}`,children:[j.jsxs("div",{className:"relative",children:[j.jsx("div",{className:`w-4 h-4 rounded-full ${l[C.id]==="spraying"?"bg-green-500 animate-pulse":l[C.id]==="waiting"?"bg-yellow-500":"bg-gray-400"}`}),l[C.id]==="spraying"&&j.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-green-400 rounded-full animate-ping opacity-75"})]}),j.jsx("span",{className:`font-semibold ${l[C.id]==="spraying"?"text-green-700":l[C.id]==="waiting"?"text-yellow-700":"text-gray-600"}`,children:l[C.id]==="spraying"?"  ...":l[C.id]==="waiting"?"   ...":""})]}),j.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[j.jsx("button",{onClick:()=>E(C),className:"bg-farm-500 hover:bg-farm-600 text-white font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:"  "}),j.jsx("button",{onClick:()=>T(C),disabled:!C.controllerId||C.isRunning,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:" "}),j.jsx("button",{onClick:()=>I(C),disabled:!C.controllerId||!C.isRunning,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium px-4 py-3 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:" "})]})]}),C.mode==="OFF"&&j.jsx("p",{className:"text-gray-500 text-xs text-center py-2",children:" "})]})]},C.id)})]})})}function wl({label:r,value:e,unit:t}){const n=e!=null;return j.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[j.jsx("dt",{className:"text-sm text-gray-600",children:r}),j.jsx("dd",{className:`text-base font-semibold ${n?"text-gray-800":"text-gray-400"}`,children:n?`${e}${t}`:" "})]})}function uj(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=uj(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function mt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=uj(r))&&(n&&(n+=" "),n+=e);return n}var TW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function p1(r){if(typeof r!="string")return!1;var e=TW;return e.includes(r)}var AW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],DW=new Set(AW);function cj(r){return typeof r!="string"?!1:DW.has(r)}function fj(r){return typeof r=="string"&&r.startsWith("data-")}function Fa(r){if(typeof r!="object"||r===null)return{};var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(cj(t)||fj(t))&&(e[t]=r[t]);return e}function q0(r){if(r==null)return null;if(L.isValidElement(r)&&typeof r.props=="object"&&r.props!==null){var e=r.props;return Fa(e)}return typeof r=="object"&&!Array.isArray(r)?Fa(r):null}function Pn(r){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(cj(t)||fj(t)||p1(t))&&(e[t]=r[t]);return e}function OW(r){return r==null?null:L.isValidElement(r)?Pn(r.props):typeof r=="object"&&!Array.isArray(r)?Pn(r):null}var IW=["children","width","height","viewBox","className","style","title","desc"];function S_(){return S_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},S_.apply(null,arguments)}function CW(r,e){if(r==null)return{};var t,n,i=RW(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function RW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var m1=L.forwardRef((r,e)=>{var{children:t,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:c}=r,f=CW(r,IW),h=a||{width:n,height:i,x:0,y:0},p=mt("recharts-surface",s);return L.createElement("svg",S_({},Pn(f),{className:p,width:n,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),L.createElement("title",null,l),L.createElement("desc",null,c),t)}),PW=["children","className"];function E_(){return E_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},E_.apply(null,arguments)}function LW(r,e){if(r==null)return{};var t,n,i=kW(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function kW(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var qo=L.forwardRef((r,e)=>{var{children:t,className:n}=r,i=LW(r,PW),a=mt("recharts-layer",n);return L.createElement("g",E_({className:a},Pn(i),{ref:e}),t)}),dj=L.createContext(null),MW=()=>L.useContext(dj);function Zt(r){return function(){return r}}const hj=Math.cos,_g=Math.sin,ha=Math.sqrt,Tg=Math.PI,W0=2*Tg,w_=Math.PI,__=2*w_,Al=1e-6,NW=__-Al;function pj(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function FW(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return pj;const t=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+n[i]}}class BW{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?pj:FW(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,a,s){this._append`C${+e},${+t},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,n,i,a){if(e=+e,t=+t,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-e,c=i-t,f=s-e,h=o-t,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(p>Al)if(!(Math.abs(h*l-c*f)>Al)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let g=n-s,y=i-o,b=l*l+c*c,v=g*g+y*y,E=Math.sqrt(b),S=Math.sqrt(p),w=a*Math.tan((w_-Math.acos((b+p-v)/(2*E*S)))/2),A=w/S,T=w/E;Math.abs(A-1)>Al&&this._append`L${e+A*f},${t+A*h}`,this._append`A${a},${a},0,0,${+(h*g>f*y)},${this._x1=e+T*l},${this._y1=t+T*c}`}}arc(e,t,n,i,a,s){if(e=+e,t=+t,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=e+o,f=t+l,h=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Al||Math.abs(this._y1-f)>Al)&&this._append`L${c},${f}`,n&&(p<0&&(p=p%__+__),p>NW?this._append`A${n},${n},0,1,${h},${e-o},${t-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=f}`:p>Al&&this._append`A${n},${n},0,${+(p>=w_)},${h},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function g1(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return r},()=>new BW(e)}function y1(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function mj(r){this._context=r}mj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function V0(r){return new mj(r)}function gj(r){return r[0]}function yj(r){return r[1]}function vj(r,e){var t=Zt(!0),n=null,i=V0,a=null,s=g1(o);r=typeof r=="function"?r:r===void 0?gj:Zt(r),e=typeof e=="function"?e:e===void 0?yj:Zt(e);function o(l){var c,f=(l=y1(l)).length,h,p=!1,g;for(n==null&&(a=i(g=s())),c=0;c<=f;++c)!(c<f&&t(h=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+r(h,c,l),+e(h,c,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(r=typeof l=="function"?l:Zt(+l),o):r},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zt(+l),o):e},o.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Zt(!!l),o):t},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function Kp(r,e,t){var n=null,i=Zt(!0),a=null,s=V0,o=null,l=g1(c);r=typeof r=="function"?r:r===void 0?gj:Zt(+r),e=typeof e=="function"?e:Zt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?yj:Zt(+t);function c(h){var p,g,y,b=(h=y1(h)).length,v,E=!1,S,w=new Array(b),A=new Array(b);for(a==null&&(o=s(S=l())),p=0;p<=b;++p){if(!(p<b&&i(v=h[p],p,h))===E)if(E=!E)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=g;--y)o.point(w[y],A[y]);o.lineEnd(),o.areaEnd()}E&&(w[p]=+r(v,p,h),A[p]=+e(v,p,h),o.point(n?+n(v,p,h):w[p],t?+t(v,p,h):A[p]))}if(S)return o=null,S+""||null}function f(){return vj().defined(i).curve(s).context(a)}return c.x=function(h){return arguments.length?(r=typeof h=="function"?h:Zt(+h),n=null,c):r},c.x0=function(h){return arguments.length?(r=typeof h=="function"?h:Zt(+h),c):r},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Zt(+h),c):n},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),t=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Zt(+h),c):e},c.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:Zt(+h),c):t},c.lineX0=c.lineY0=function(){return f().x(r).y(e)},c.lineY1=function(){return f().x(r).y(t)},c.lineX1=function(){return f().x(n).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Zt(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),c):s},c.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),c):a},c}class bj{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function UW(r){return new bj(r,!0)}function jW(r){return new bj(r,!1)}const v1={draw(r,e){const t=ha(e/Tg);r.moveTo(t,0),r.arc(0,0,t,0,W0)}},$W={draw(r,e){const t=ha(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},xj=ha(1/3),HW=xj*2,GW={draw(r,e){const t=ha(e/HW),n=t*xj;r.moveTo(0,-t),r.lineTo(n,0),r.lineTo(0,t),r.lineTo(-n,0),r.closePath()}},KW={draw(r,e){const t=ha(e),n=-t/2;r.rect(n,n,t,t)}},YW=.8908130915292852,Sj=_g(Tg/10)/_g(7*Tg/10),zW=_g(W0/10)*Sj,qW=-hj(W0/10)*Sj,WW={draw(r,e){const t=ha(e*YW),n=zW*t,i=qW*t;r.moveTo(0,-t),r.lineTo(n,i);for(let a=1;a<5;++a){const s=W0*a/5,o=hj(s),l=_g(s);r.lineTo(l*t,-o*t),r.lineTo(o*n-l*i,l*n+o*i)}r.closePath()}},ux=ha(3),VW={draw(r,e){const t=-ha(e/(ux*3));r.moveTo(0,t*2),r.lineTo(-ux*t,-t),r.lineTo(ux*t,-t),r.closePath()}},Bi=-.5,Ui=ha(3)/2,T_=1/ha(12),QW=(T_/2+1)*3,XW={draw(r,e){const t=ha(e/QW),n=t/2,i=t*T_,a=n,s=t*T_+t,o=-a,l=s;r.moveTo(n,i),r.lineTo(a,s),r.lineTo(o,l),r.lineTo(Bi*n-Ui*i,Ui*n+Bi*i),r.lineTo(Bi*a-Ui*s,Ui*a+Bi*s),r.lineTo(Bi*o-Ui*l,Ui*o+Bi*l),r.lineTo(Bi*n+Ui*i,Bi*i-Ui*n),r.lineTo(Bi*a+Ui*s,Bi*s-Ui*a),r.lineTo(Bi*o+Ui*l,Bi*l-Ui*o),r.closePath()}};function ZW(r,e){let t=null,n=g1(i);r=typeof r=="function"?r:Zt(r||v1),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function i(){let a;if(t||(t=a=n()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(r=typeof a=="function"?a:Zt(a),i):r},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Zt(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function Ag(){}function Dg(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function Ej(r){this._context=r}Ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function JW(r){return new Ej(r)}function wj(r){this._context=r}wj.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:Dg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function eV(r){return new wj(r)}function _j(r){this._context=r}_j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 3:this._point=4;default:Dg(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function tV(r){return new _j(r)}function Tj(r){this._context=r}Tj.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function rV(r){return new Tj(r)}function QP(r){return r<0?-1:1}function XP(r,e,t){var n=r._x1-r._x0,i=e-r._x1,a=(r._y1-r._y0)/(n||i<0&&-0),s=(t-r._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(QP(a)+QP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function ZP(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function cx(r,e,t){var n=r._x0,i=r._y0,a=r._x1,s=r._y1,o=(a-n)/3;r._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*t,a,s)}function Og(r){this._context=r}Og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cx(this,this._t0,ZP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,cx(this,ZP(this,t=XP(this,r,e)),t);break;default:cx(this,this._t0,t=XP(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function Aj(r){this._context=new Dj(r)}(Aj.prototype=Object.create(Og.prototype)).point=function(r,e){Og.prototype.point.call(this,e,r)};function Dj(r){this._context=r}Dj.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,n,i,a){this._context.bezierCurveTo(e,r,n,t,a,i)}};function nV(r){return new Og(r)}function iV(r){return new Aj(r)}function Oj(r){this._context=r}Oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var n=JP(r),i=JP(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],r[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function JP(r){var e,t=r.length-1,n,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=r[0]+2*r[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*r[e]+2*r[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(r[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*r[e+1]-i[e+1];return[i,a]}function aV(r){return new Oj(r)}function Q0(r,e){this._context=r,this._t=e}Q0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function sV(r){return new Q0(r,.5)}function oV(r){return new Q0(r,0)}function lV(r){return new Q0(r,1)}function Ec(r,e){if((s=r.length)>1)for(var t=1,n,i,a=r[e[0]],s,o=a.length;t<s;++t)for(i=a,a=r[e[t]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function A_(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function uV(r,e){return r[e]}function cV(r){const e=[];return e.key=r,e}function fV(){var r=Zt([]),e=A_,t=Ec,n=uV;function i(a){var s=Array.from(r.apply(this,arguments),cV),o,l=s.length,c=-1,f;for(const h of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(h,s[o].key,c,a)]).data=h;for(o=0,f=y1(e(s));o<l;++o)s[f[o]].index=o;return t(s,f),s}return i.keys=function(a){return arguments.length?(r=typeof a=="function"?a:Zt(Array.from(a)),i):r},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Zt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?A_:typeof a=="function"?a:Zt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Ec,i):t},i}function dV(r,e){if((n=r.length)>0){for(var t,n,i=0,a=r[0].length,s;i<a;++i){for(s=t=0;t<n;++t)s+=r[t][i][1]||0;if(s)for(t=0;t<n;++t)r[t][i][1]/=s}Ec(r,e)}}function hV(r,e){if((i=r.length)>0){for(var t=0,n=r[e[0]],i,a=n.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=r[s][t][1]||0;n[t][1]+=n[t][0]=-o/2}Ec(r,e)}}function pV(r,e){if(!(!((s=r.length)>0)||!((a=(i=r[e[0]]).length)>0))){for(var t=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var f=r[e[o]],h=f[n][1]||0,p=f[n-1][1]||0,g=(h-p)/2,y=0;y<o;++y){var b=r[e[y]],v=b[n][1]||0,E=b[n-1][1]||0;g+=v-E}l+=h,c+=g*h}i[n-1][1]+=i[n-1][0]=t,l&&(t-=c/l)}i[n-1][1]+=i[n-1][0]=t,Ec(r,e)}}var fx={},dx={},eL;function mV(){return eL||(eL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}r.isUnsafeProperty=e})(dx)),dx}var hx={},tL;function Ij(){return tL||(tL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}r.isDeepKey=e})(hx)),hx}var px={},rL;function b1(){return rL||(rL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}r.toKey=e})(px)),px}var mx={},gx={},nL;function gV(){return nL||(nL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return n==="0"&&Object.is(Number(t),-0)?"-0":n}r.toString=e})(gx)),gx}var iL;function x1(){return iL||(iL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=gV(),t=b1();function n(i){if(Array.isArray(i))return i.map(t.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",c="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];c?h==="\\"&&o+1<s?(o++,l+=i[o]):h===c?c="":l+=h:f?h==='"'||h==="'"?c=h:h==="]"?(f=!1,a.push(l),l=""):l+=h:h==="["?(f=!0,l&&(a.push(l),l="")):h==="."?l&&(a.push(l),l=""):l+=h,o++}return l&&a.push(l),a}r.toPath=n})(mx)),mx}var aL;function S1(){return aL||(aL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=mV(),t=Ij(),n=b1(),i=x1();function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?t.isDeepKey(l)?a(o,i.toPath(l),c):c:f}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const f=o[l];return f===void 0?c:f}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?c:f}}}function s(o,l,c){if(l.length===0)return c;let f=o;for(let h=0;h<l.length;h++){if(f==null||e.isUnsafeProperty(l[h]))return c;f=f[l[h]]}return f===void 0?c:f}r.get=a})(fx)),fx}var yx,sL;function yV(){return sL||(sL=1,yx=S1().get),yx}var vV=yV();const X0=Ya(vV);var Gi=r=>r===0?0:r>0?1:-1,Ba=r=>typeof r=="number"&&r!=+r,Bs=r=>typeof r=="string"&&r.indexOf("%")===r.length-1,ut=r=>(typeof r=="number"||r instanceof Number)&&!Ba(r),Ua=r=>ut(r)||typeof r=="string",bV=0,_d=r=>{var e=++bV;return"".concat(r||"").concat(e)},Wo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(e)&&typeof e!="string")return n;var a;if(Bs(e)){if(t==null)return n;var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Ba(a)&&(a=n),i&&t!=null&&a>t&&(a=t),a},Cj=r=>{if(!Array.isArray(r))return!1;for(var e=r.length,t={},n=0;n<e;n++)if(!t[r[n]])t[r[n]]=!0;else return!0;return!1};function Vn(r,e,t){return ut(r)&&ut(e)?r+t*(e-r):e}function Rj(r,e,t){if(!(!r||!r.length))return r.find(n=>n&&(typeof e=="function"?e(n):X0(n,e))===t)}var Xr=r=>r===null||typeof r>"u",rh=r=>Xr(r)?r:"".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));function xV(r){return r!=null}function nh(){}var SV=["type","size","sizeType"];function D_(){return D_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},D_.apply(null,arguments)}function oL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function lL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(t),!0).forEach(function(n){EV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EV(r,e,t){return(e=wV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wV(r){var e=_V(r,"string");return typeof e=="symbol"?e:e+""}function _V(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function TV(r,e){if(r==null)return{};var t,n,i=AV(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function AV(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Pj={symbolCircle:v1,symbolCross:$W,symbolDiamond:GW,symbolSquare:KW,symbolStar:WW,symbolTriangle:VW,symbolWye:XW},DV=Math.PI/180,OV=r=>{var e="symbol".concat(rh(r));return Pj[e]||v1},IV=(r,e,t)=>{if(e==="area")return r;switch(t){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*DV;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},CV=(r,e)=>{Pj["symbol".concat(rh(r))]=e},E1=r=>{var{type:e="circle",size:t=64,sizeType:n="area"}=r,i=TV(r,SV),a=lL(lL({},i),{},{type:e,size:t,sizeType:n}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var p=OV(s),g=ZW().type(p).size(IV(t,n,s)),y=g();if(y!==null)return y},{className:l,cx:c,cy:f}=a,h=Pn(a);return ut(c)&&ut(f)&&ut(t)?L.createElement("path",D_({},h,{className:mt("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(f,")"),d:o()})):null};E1.registerSymbol=CV;var Lj=r=>"radius"in r&&"startAngle"in r&&"endAngle"in r,w1=(r,e)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var t=r;if(L.isValidElement(r)&&(t=r.props),typeof t!="object"&&typeof t!="function")return null;var n={};return Object.keys(t).forEach(i=>{p1(i)&&(n[i]=(a=>t[i](t,a)))}),n},RV=(r,e,t)=>n=>(r(e,t,n),null),kj=(r,e,t)=>{if(r===null||typeof r!="object"&&typeof r!="function")return null;var n=null;return Object.keys(r).forEach(i=>{var a=r[i];p1(i)&&typeof a=="function"&&(n||(n={}),n[i]=RV(a,e,t))}),n};function uL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function PV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uL(Object(t),!0).forEach(function(n){LV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function LV(r,e,t){return(e=kV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kV(r){var e=MV(r,"string");return typeof e=="symbol"?e:e+""}function MV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Sn(r,e){var t=PV({},r),n=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),t);return a}function Ig(){return Ig=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ig.apply(null,arguments)}function cL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function NV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(t),!0).forEach(function(n){FV(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function FV(r,e,t){return(e=BV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function BV(r){var e=UV(r,"string");return typeof e=="symbol"?e:e+""}function UV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var $i=32,jV={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function $V(r){var{data:e,iconType:t,inactiveColor:n}=r,i=$i/2,a=$i/6,s=$i/3,o=e.inactive?n:e.color,l=t??e.type;if(l==="none")return null;if(l==="plainline"){var c;return L.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:$i,y2:i,className:"recharts-legend-icon"})}if(l==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat($i,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return L.createElement("path",{stroke:"none",fill:o,d:"M0,".concat($i/8,"h").concat($i,"v").concat($i*3/4,"h").concat(-$i,"z"),className:"recharts-legend-icon"});if(L.isValidElement(e.legendIcon)){var f=NV({},e);return delete f.legendIcon,L.cloneElement(e.legendIcon,f)}return L.createElement(E1,{fill:o,cx:i,cy:i,size:$i,sizeType:"diameter",type:l})}function HV(r){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:a,iconType:s}=r,o={x:0,y:0,width:$i,height:$i},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,h)=>{var p=f.formatter||i,g=mt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:f.inactive});if(f.type==="none")return null;var y=f.inactive?a:f.color,b=p?p(f.value,f,h):f.value;return L.createElement("li",Ig({className:g,style:l,key:"legend-item-".concat(h)},kj(r,f,h)),L.createElement(m1,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(b," legend icon")},L.createElement($V,{data:f,iconType:s,inactiveColor:a})),L.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},b))})}var GV=r=>{var e=Sn(r,jV),{payload:t,layout:n,align:i}=e;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:a},L.createElement(HV,Ig({},e,{payload:t})))},vx={},bx={},fL;function KV(){return fL||(fL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){const i=new Map;for(let a=0;a<t.length;a++){const s=t[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}r.uniqBy=e})(bx)),bx}var xx={},dL;function Mj(){return dL||(dL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t}r.identity=e})(xx)),xx}var Sx={},Ex={},_x={},hL;function YV(){return hL||(hL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}r.isLength=e})(_x)),_x}var pL;function _1(){return pL||(pL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=YV();function t(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}r.isArrayLike=t})(Ex)),Ex}var Tx={},mL;function zV(){return mL||(mL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}r.isObjectLike=e})(Tx)),Tx}var gL;function qV(){return gL||(gL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=_1(),t=zV();function n(i){return t.isObjectLike(i)&&e.isArrayLike(i)}r.isArrayLikeObject=n})(Sx)),Sx}var Ax={},Dx={},yL;function WV(){return yL||(yL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=S1();function t(n){return function(i){return e.get(i,n)}}r.property=t})(Dx)),Dx}var Ox={},Ix={},Cx={},Rx={},vL;function Nj(){return vL||(vL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}r.isObject=e})(Rx)),Rx}var Px={},bL;function Fj(){return bL||(bL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}r.isPrimitive=e})(Px)),Px}var Lx={},xL;function Bj(){return xL||(xL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n){return t===n||Number.isNaN(t)&&Number.isNaN(n)}r.eq=e})(Lx)),Lx}var SL;function VV(){return SL||(SL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Nj(),t=Fj(),n=Bj();function i(f,h,p){return typeof p!="function"?i(f,h,()=>{}):a(f,h,function g(y,b,v,E,S,w){const A=p(y,b,v,E,S,w);return A!==void 0?!!A:a(y,b,g,w)},new Map)}function a(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,p,g);case"function":return Object.keys(h).length>0?a(f,{...h},p,g):n.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:n.eq(f,h)}}function s(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return l(f,h,p,g);if(h instanceof Map)return o(f,h,p,g);if(h instanceof Set)return c(f,h,p,g);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(g?.has(h))return g.get(h)===f;g?.set(h,f);try{for(let b=0;b<y.length;b++){const v=y[b];if(!t.isPrimitive(f)&&!(v in f)||h[v]===void 0&&f[v]!==void 0||h[v]===null&&f[v]!==null||!p(f[v],h[v],v,f,h,g))return!1}return!0}finally{g?.delete(h)}}function o(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,b]of h.entries()){const v=f.get(y);if(p(v,b,y,f,h,g)===!1)return!1}return!0}function l(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let b=0;b<h.length;b++){const v=h[b];let E=!1;for(let S=0;S<f.length;S++){if(y.has(S))continue;const w=f[S];let A=!1;if(p(w,v,b,f,h,g)&&(A=!0),A){y.add(S),E=!0;break}}if(!E)return!1}return!0}function c(f,h,p,g){return h.size===0?!0:f instanceof Set?l([...f],[...h],p,g):!1}r.isMatchWith=i,r.isSetMatch=c})(Cx)),Cx}var EL;function Uj(){return EL||(EL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=VV();function t(n,i){return e.isMatchWith(n,i,()=>{})}r.isMatch=t})(Ix)),Ix}var kx={},Mx={},Nx={},wL;function QV(){return wL||(wL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(n=>Object.prototype.propertyIsEnumerable.call(t,n))}r.getSymbols=e})(Nx)),Nx}var Fx={},_L;function jj(){return _L||(_L=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.getTag=e})(Fx)),Fx}var Bx={},TL;function $j(){return TL||(TL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",f="[object Array]",h="[object Function]",p="[object ArrayBuffer]",g="[object Object]",y="[object Error]",b="[object DataView]",v="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]",A="[object BigUint64Array]",T="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",P="[object BigInt64Array]",k="[object Float32Array]",M="[object Float64Array]";r.argumentsTag=a,r.arrayBufferTag=p,r.arrayTag=f,r.bigInt64ArrayTag=P,r.bigUint64ArrayTag=A,r.booleanTag=i,r.dataViewTag=b,r.dateTag=o,r.errorTag=y,r.float32ArrayTag=k,r.float64ArrayTag=M,r.functionTag=h,r.int16ArrayTag=I,r.int32ArrayTag=D,r.int8ArrayTag=T,r.mapTag=l,r.numberTag=n,r.objectTag=g,r.regexpTag=e,r.setTag=c,r.stringTag=t,r.symbolTag=s,r.uint16ArrayTag=S,r.uint32ArrayTag=w,r.uint8ArrayTag=v,r.uint8ClampedArrayTag=E})(Bx)),Bx}var Ux={},AL;function XV(){return AL||(AL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}r.isTypedArray=e})(Ux)),Ux}var DL;function Hj(){return DL||(DL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=QV(),t=jj(),n=$j(),i=Fj(),a=XV();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,p,g=new Map,y=void 0){const b=y?.(f,h,p,g);if(b!==void 0)return b;if(i.isPrimitive(f))return f;if(g.has(f))return g.get(f);if(Array.isArray(f)){const v=new Array(f.length);g.set(f,v);for(let E=0;E<f.length;E++)v[E]=o(f[E],E,p,g,y);return Object.hasOwn(f,"index")&&(v.index=f.index),Object.hasOwn(f,"input")&&(v.input=f.input),v}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const v=new RegExp(f.source,f.flags);return v.lastIndex=f.lastIndex,v}if(f instanceof Map){const v=new Map;g.set(f,v);for(const[E,S]of f)v.set(E,o(S,E,p,g,y));return v}if(f instanceof Set){const v=new Set;g.set(f,v);for(const E of f)v.add(o(E,void 0,p,g,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const v=new(Object.getPrototypeOf(f)).constructor(f.length);g.set(f,v);for(let E=0;E<f.length;E++)v[E]=o(f[E],E,p,g,y);return v}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const v=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return g.set(f,v),l(v,f,p,g,y),v}if(typeof File<"u"&&f instanceof File){const v=new File([f],f.name,{type:f.type});return g.set(f,v),l(v,f,p,g,y),v}if(typeof Blob<"u"&&f instanceof Blob){const v=new Blob([f],{type:f.type});return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof Error){const v=new f.constructor;return g.set(f,v),v.message=f.message,v.name=f.name,v.stack=f.stack,v.cause=f.cause,l(v,f,p,g,y),v}if(f instanceof Boolean){const v=new Boolean(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof Number){const v=new Number(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(f instanceof String){const v=new String(f.valueOf());return g.set(f,v),l(v,f,p,g,y),v}if(typeof f=="object"&&c(f)){const v=Object.create(Object.getPrototypeOf(f));return g.set(f,v),l(v,f,p,g,y),v}return f}function l(f,h,p=f,g,y){const b=[...Object.keys(h),...e.getSymbols(h)];for(let v=0;v<b.length;v++){const E=b[v],S=Object.getOwnPropertyDescriptor(f,E);(S==null||S.writable)&&(f[E]=o(h[E],E,p,g,y))}}function c(f){switch(t.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}r.cloneDeepWith=s,r.cloneDeepWithImpl=o,r.copyProperties=l})(Mx)),Mx}var OL;function ZV(){return OL||(OL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Hj();function t(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}r.cloneDeep=t})(kx)),kx}var IL;function JV(){return IL||(IL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Uj(),t=ZV();function n(i){return i=t.cloneDeep(i),a=>e.isMatch(a,i)}r.matches=n})(Ox)),Ox}var jx={},$x={},Hx={},CL;function e9(){return CL||(CL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Hj(),t=$j();function n(i,a){return e.cloneDeepWith(i,(s,o,l,c)=>{const f=a?.(s,o,l,c);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case t.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}r.cloneDeepWith=n})(Hx)),Hx}var RL;function t9(){return RL||(RL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=e9();function t(n){return e.cloneDeepWith(n)}r.cloneDeep=t})($x)),$x}var Gx={},Kx={},PL;function Gj(){return PL||(PL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}r.isIndex=t})(Kx)),Kx}var Yx={},LL;function r9(){return LL||(LL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=jj();function t(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}r.isArguments=t})(Yx)),Yx}var kL;function n9(){return kL||(kL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Ij(),t=Gj(),n=r9(),i=x1();function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let f=0;f<l.length;f++){const h=l[f];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&t.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}r.has=a})(Gx)),Gx}var ML;function i9(){return ML||(ML=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Uj(),t=b1(),n=t9(),i=S1(),a=n9();function s(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return l=n.cloneDeep(l),function(c){const f=i.get(c,o);return f===void 0?a.has(c,o):l===void 0?f===void 0:e.isMatch(f,l)}}r.matchesProperty=s})(jx)),jx}var NL;function a9(){return NL||(NL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Mj(),t=WV(),n=JV(),i=i9();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return t.property(s)}}r.iteratee=a})(Ax)),Ax}var FL;function s9(){return FL||(FL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=KV(),t=Mj(),n=qV(),i=a9();function a(s,o=t.identity){return n.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}r.uniqBy=a})(vx)),vx}var zx,BL;function o9(){return BL||(BL=1,zx=s9().uniqBy),zx}var l9=o9();const UL=Ya(l9);function Kj(r,e,t){return e===!0?UL(r,t):typeof e=="function"?UL(r,e):r}var qx={exports:{}},Wx={},Vx={exports:{}},Qx={};var jL;function u9(){if(jL)return Qx;jL=1;var r=Uc();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,a=r.useLayoutEffect,s=r.useDebugValue;function o(h,p){var g=p(),y=n({inst:{value:g,getSnapshot:p}}),b=y[0].inst,v=y[1];return a(function(){b.value=g,b.getSnapshot=p,l(b)&&v({inst:b})},[h,g,p]),i(function(){return l(b)&&v({inst:b}),h(function(){l(b)&&v({inst:b})})},[h]),s(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!t(h,g)}catch{return!0}}function c(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return Qx.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:f,Qx}var $L;function c9(){return $L||($L=1,Vx.exports=u9()),Vx.exports}var HL;function f9(){if(HL)return Wx;HL=1;var r=Uc(),e=c9();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=r.useRef,s=r.useEffect,o=r.useMemo,l=r.useDebugValue;return Wx.useSyncExternalStoreWithSelector=function(c,f,h,p,g){var y=a(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function E(I){if(!S){if(S=!0,w=I,I=p(I),g!==void 0&&b.hasValue){var D=b.value;if(g(D,I))return A=D}return A=I}if(D=A,n(w,I))return D;var P=p(I);return g!==void 0&&g(D,P)?(w=I,D):(w=I,A=P)}var S=!1,w,A,T=h===void 0?null:h;return[function(){return E(f())},T===null?void 0:function(){return E(T())}]},[f,h,p,g]);var v=i(c,y[0],y[1]);return s(function(){b.hasValue=!0,b.value=v},[v]),l(v),v},Wx}var GL;function d9(){return GL||(GL=1,qx.exports=f9()),qx.exports}var h9=d9(),T1=L.createContext(null),p9=r=>r,Lr=()=>{var r=L.useContext(T1);return r?r.store.dispatch:p9},ng=()=>{},m9=()=>ng,g9=(r,e)=>r===e;function ot(r){var e=L.useContext(T1);return h9.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:m9,e?e.store.getState:ng,e?e.store.getState:ng,e?r:ng,g9)}function y9(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function v9(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function b9(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${t}]`)}}var KL=r=>Array.isArray(r)?r:[r];function x9(r){const e=Array.isArray(r[0])?r[0]:r;return b9(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function S9(r,e){const t=[],{length:n}=r;for(let i=0;i<n;i++)t.push(r[i].apply(null,e));return t}var E9=class{constructor(r){this.value=r}deref(){return this.value}},w9=typeof WeakRef<"u"?WeakRef:E9,_9=0,YL=1;function Yp(){return{s:_9,v:void 0,o:null,p:null}}function Yj(r,e={}){let t=Yp();const{resultEqualityCheck:n}=e;let i,a=0;function s(){let o=t;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const b=y.get(g);b===void 0?(o=Yp(),y.set(g,o)):o=b}else{let y=o.p;y===null&&(o.p=y=new Map);const b=y.get(g);b===void 0?(o=Yp(),y.set(g,o)):o=b}}const c=o;let f;if(o.s===YL)f=o.v;else if(f=r.apply(null,arguments),a++,n){const h=i?.deref?.()??i;h!=null&&n(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new w9(f):f}return c.s=YL,c.v=f,f}return s.clearCache=()=>{t=Yp(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function T9(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,n=(...i)=>{let a=0,s=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),y9(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const f={...t,...l},{memoize:h,memoizeOptions:p=[],argsMemoize:g=Yj,argsMemoizeOptions:y=[]}=f,b=KL(p),v=KL(y),E=x9(i),S=h(function(){return a++,c.apply(null,arguments)},...b),w=g(function(){s++;const T=S9(E,arguments);return o=S.apply(null,T),o},...v);return Object.assign(w,{resultFunc:c,memoizedResultFunc:S,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var ke=T9(Yj),A9=Object.assign((r,e=ke)=>{v9(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),n=t.map(a=>r[a]);return e(n,(...a)=>a.reduce((s,o,l)=>(s[t[l]]=o,s),{}))},{withTypes:()=>A9}),Xx={},Zx={},Jx={},zL;function D9(){return zL||(zL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const t=(n,i,a)=>{if(n!==i){const s=e(n),o=e(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};r.compareValues=t})(Jx)),Jx}var eS={},tS={},qL;function zj(){return qL||(qL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}r.isSymbol=e})(tS)),tS}var WL;function O9(){return WL||(WL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=zj(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!t.test(a))||s!=null&&Object.hasOwn(s,a)}r.isKey=i})(eS)),eS}var VL;function I9(){return VL||(VL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=D9(),t=O9(),n=x1();function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const c=(g,y)=>{let b=g;for(let v=0;v<y.length&&b!=null;++v)b=b[y[v]];return b},f=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:c(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?c(y,g):typeof y=="object"?y[g]:y,h=s.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||t.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:h.map(y=>f(y,g))})).slice().sort((g,y)=>{for(let b=0;b<h.length;b++){const v=e.compareValues(g.criteria[b],y.criteria[b],o[b]);if(v!==0)return v}return 0}).map(g=>g.original)}r.orderBy=i})(Zx)),Zx}var rS={},QL;function C9(){return QL||(QL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const f=o[c];Array.isArray(f)&&l<a?s(f,l+1):i.push(f)}};return s(t,0),i}r.flatten=e})(rS)),rS}var nS={},XL;function qj(){return XL||(XL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Gj(),t=_1(),n=Nj(),i=Bj();function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&t.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}r.isIterateeCall=a})(nS)),nS}var ZL;function R9(){return ZL||(ZL=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=I9(),t=C9(),n=qj();function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,t.flatten(s),["asc"])}r.sortBy=i})(Xx)),Xx}var iS,JL;function P9(){return JL||(JL=1,iS=R9().sortBy),iS}var L9=P9();const Z0=Ya(L9);var Wj=r=>r.legend.settings,k9=r=>r.legend.size,M9=r=>r.legend.payload,N9=ke([M9,Wj],(r,e)=>{var{itemSorter:t}=e,n=r.flat(1);return t?Z0(n,t):n});function F9(){return ot(N9)}var zp=1;function Vj(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=L.useState({height:0,left:0,top:0,width:0}),n=L.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>zp||Math.abs(s.left-e.left)>zp||Math.abs(s.top-e.top)>zp||Math.abs(s.width-e.width)>zp)&&t({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...r]);return[e,n]}function on(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var B9=typeof Symbol=="function"&&Symbol.observable||"@@observable",ek=B9,aS=()=>Math.random().toString(36).substring(7).split("").join("."),U9={INIT:`@@redux/INIT${aS()}`,REPLACE:`@@redux/REPLACE${aS()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${aS()}`},Cg=U9;function A1(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function Qj(r,e,t){if(typeof r!="function")throw new Error(on(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(on(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(on(1));return t(Qj)(r,e)}let n=r,i=e,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((v,E)=>{s.set(E,v)}))}function f(){if(l)throw new Error(on(3));return i}function h(v){if(typeof v!="function")throw new Error(on(4));if(l)throw new Error(on(5));let E=!0;c();const S=o++;return s.set(S,v),function(){if(E){if(l)throw new Error(on(6));E=!1,c(),s.delete(S),a=null}}}function p(v){if(!A1(v))throw new Error(on(7));if(typeof v.type>"u")throw new Error(on(8));if(typeof v.type!="string")throw new Error(on(17));if(l)throw new Error(on(9));try{l=!0,i=n(i,v)}finally{l=!1}return(a=s).forEach(S=>{S()}),v}function g(v){if(typeof v!="function")throw new Error(on(10));n=v,p({type:Cg.REPLACE})}function y(){const v=h;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(on(11));function S(){const A=E;A.next&&A.next(f())}return S(),{unsubscribe:v(S)}},[ek](){return this}}}return p({type:Cg.INIT}),{dispatch:p,subscribe:h,getState:f,replaceReducer:g,[ek]:y}}function j9(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Cg.INIT})>"u")throw new Error(on(12));if(typeof t(void 0,{type:Cg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(on(13))})}function Xj(r){const e=Object.keys(r),t={};for(let a=0;a<e.length;a++){const s=e[a];typeof r[s]=="function"&&(t[s]=r[s])}const n=Object.keys(t);let i;try{j9(t)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const c={};for(let f=0;f<n.length;f++){const h=n[f],p=t[h],g=s[h],y=p(g,o);if(typeof y>"u")throw o&&o.type,new Error(on(14));c[h]=y,l=l||y!==g}return l=l||n.length!==Object.keys(s).length,l?c:s}}function Rg(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function $9(...r){return e=>(t,n)=>{const i=e(t,n);let a=()=>{throw new Error(on(15))};const s={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},o=r.map(l=>l(s));return a=Rg(...o)(i.dispatch),{...i,dispatch:a}}}function Zj(r){return A1(r)&&"type"in r&&typeof r.type=="string"}var Jj=Symbol.for("immer-nothing"),tk=Symbol.for("immer-draftable"),Ln=Symbol.for("immer-state");function na(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Ei=Object,wc=Ei.getPrototypeOf,Pg="constructor",J0="prototype",O_="configurable",Lg="enumerable",ig="writable",Td="value",Us=r=>!!r&&!!r[Ln];function fa(r){return r?e3(r)||ey(r)||!!r[tk]||!!r[Pg]?.[tk]||ty(r)||ry(r):!1}var H9=Ei[J0][Pg].toString(),rk=new WeakMap;function e3(r){if(!r||!D1(r))return!1;const e=wc(r);if(e===null||e===Ei[J0])return!0;const t=Ei.hasOwnProperty.call(e,Pg)&&e[Pg];if(t===Object)return!0;if(!oc(t))return!1;let n=rk.get(t);return n===void 0&&(n=Function.toString.call(t),rk.set(t,n)),n===H9}function ih(r,e,t=!0){ah(r)===0?(t?Reflect.ownKeys(r):Ei.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function ah(r){const e=r[Ln];return e?e.type_:ey(r)?1:ty(r)?2:ry(r)?3:0}var nk=(r,e,t=ah(r))=>t===2?r.has(e):Ei[J0].hasOwnProperty.call(r,e),I_=(r,e,t=ah(r))=>t===2?r.get(e):r[e],kg=(r,e,t,n=ah(r))=>{n===2?r.set(e,t):n===3?r.add(t):r[e]=t};function G9(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var ey=Array.isArray,ty=r=>r instanceof Map,ry=r=>r instanceof Set,D1=r=>typeof r=="object",oc=r=>typeof r=="function",sS=r=>typeof r=="boolean",ws=r=>r.copy_||r.base_,O1=r=>r.modified_?r.copy_:r.base_;function C_(r,e){if(ty(r))return new Map(r);if(ry(r))return new Set(r);if(ey(r))return Array[J0].slice.call(r);const t=e3(r);if(e===!0||e==="class_only"&&!t){const n=Ei.getOwnPropertyDescriptors(r);delete n[Ln];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[ig]===!1&&(o[ig]=!0,o[O_]=!0),(o.get||o.set)&&(n[s]={[O_]:!0,[ig]:!0,[Lg]:o[Lg],[Td]:r[s]})}return Ei.create(wc(r),n)}else{const n=wc(r);if(n!==null&&t)return{...r};const i=Ei.create(n);return Ei.assign(i,r)}}function I1(r,e=!1){return ny(r)||Us(r)||!fa(r)||(ah(r)>1&&Ei.defineProperties(r,{set:qp,add:qp,clear:qp,delete:qp}),Ei.freeze(r),e&&ih(r,(t,n)=>{I1(n,!0)},!1)),r}function K9(){na(2)}var qp={[Td]:K9};function ny(r){return r===null||!D1(r)?!0:Ei.isFrozen(r)}var Mg="MapSet",R_="Patches",t3={};function _c(r){const e=t3[r];return e||na(0,r),e}var Y9=r=>!!t3[r],Ad,r3=()=>Ad,z9=(r,e)=>({drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Y9(Mg)?_c(Mg):void 0});function ik(r,e){e&&(r.patchPlugin_=_c(R_),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function P_(r){L_(r),r.drafts_.forEach(q9),r.drafts_=null}function L_(r){r===Ad&&(Ad=r.parent_)}var ak=r=>Ad=z9(Ad,r);function q9(r){const e=r[Ln];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sk(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(r!==void 0&&r!==t){t[Ln].modified_&&(P_(e),na(4)),fa(r)&&(r=ok(e,r));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(t[Ln].base_,r,e)}else r=ok(e,t);return W9(e,r,!0),P_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Jj?r:void 0}function ok(r,e){if(ny(e))return e;const t=e[Ln];if(!t)return C1(e,r.handledSet_,r);if(!iy(t,r))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:n}=t;if(n)for(;n.length>0;)n.pop()(r);a3(t,r)}return t.copy_}function W9(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&I1(e,t)}function n3(r){r.finalized_=!0,r.scope_.unfinalizedDrafts_--}var iy=(r,e)=>r.scope_===e,V9=[];function i3(r,e,t,n){const i=ws(r),a=r.type_;if(n!==void 0&&I_(i,n,a)===e){kg(i,n,t,a);return}if(!r.draftLocations_){const o=r.draftLocations_=new Map;ih(i,(l,c)=>{if(Us(c)){const f=o.get(c)||[];f.push(l),o.set(c,f)}})}const s=r.draftLocations_.get(e)??V9;for(const o of s)kg(i,o,t,a)}function Q9(r,e,t){r.callbacks_.push(function(i){const a=e;if(!a||!iy(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=O1(a);i3(r,a.draft_??a,s,t),a3(a,i)})}function a3(r,e){if(r.modified_&&!r.finalized_&&(r.type_===3||(r.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(r);i&&n.generatePatches_(r,i,e)}n3(r)}}function X9(r,e,t){const{scope_:n}=r;if(Us(t)){const i=t[Ln];iy(i,n)&&i.callbacks_.push(function(){ag(r);const s=O1(i);i3(r,t,s,e)})}else fa(t)&&r.callbacks_.push(function(){const a=ws(r);I_(a,e,r.type_)===t&&n.drafts_.length>1&&(r.assigned_.get(e)??!1)===!0&&r.copy_&&C1(I_(r.copy_,e,r.type_),n.handledSet_,n)})}function C1(r,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Us(r)||e.has(r)||!fa(r)||ny(r)||(e.add(r),ih(r,(n,i)=>{if(Us(i)){const a=i[Ln];if(iy(a,t)){const s=O1(a);kg(r,n,s,r.type_),n3(a)}}else fa(i)&&C1(i,e,t)})),r}function Z9(r,e){const t=ey(r),n={type_:t?1:0,scope_:e?e.scope_:r3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=R1;t&&(i=[n],a=Dd);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var R1={get(r,e){if(e===Ln)return r;const t=ws(r);if(!nk(t,e,r.type_))return J9(r,t,e);const n=t[e];if(r.finalized_||!fa(n))return n;if(n===oS(r.base_,e)){ag(r);const i=r.type_===1?+e:e,a=M_(r.scope_,n,r,i);return r.copy_[i]=a}return n},has(r,e){return e in ws(r)},ownKeys(r){return Reflect.ownKeys(ws(r))},set(r,e,t){const n=s3(ws(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=oS(ws(r),e),a=i?.[Ln];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_.set(e,!1),!0;if(G9(t,i)&&(t!==void 0||nk(r.base_,e,r.type_)))return!0;ag(r),k_(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_.set(e,!0),X9(r,e,t)),!0},deleteProperty(r,e){return ag(r),oS(r.base_,e)!==void 0||e in r.base_?(r.assigned_.set(e,!1),k_(r)):r.assigned_.delete(e),r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=ws(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{[ig]:!0,[O_]:r.type_!==1||e!=="length",[Lg]:n[Lg],[Td]:t[e]}},defineProperty(){na(11)},getPrototypeOf(r){return wc(r.base_)},setPrototypeOf(){na(12)}},Dd={};ih(R1,(r,e)=>{Dd[r]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}});Dd.deleteProperty=function(r,e){return Dd.set.call(this,r,e,void 0)};Dd.set=function(r,e,t){return R1.set.call(this,r[0],e,t,r[0])};function oS(r,e){const t=r[Ln];return(t?ws(t):r)[e]}function J9(r,e,t){const n=s3(e,t);return n?Td in n?n[Td]:n.get?.call(r.draft_):void 0}function s3(r,e){if(!(e in r))return;let t=wc(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=wc(t)}}function k_(r){r.modified_||(r.modified_=!0,r.parent_&&k_(r.parent_))}function ag(r){r.copy_||(r.assigned_=new Map,r.copy_=C_(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var e7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,i)=>{if(oc(t)&&!oc(n)){const s=n;n=t;const o=this;return function(c=s,...f){return o.produce(c,h=>n.call(this,h,...f))}}oc(n)||na(6),i!==void 0&&!oc(i)&&na(7);let a;if(fa(t)){const s=ak(this),o=M_(s,t,void 0);let l=!0;try{a=n(o),l=!1}finally{l?P_(s):L_(s)}return ik(s,i),sk(a,s)}else if(!t||!D1(t)){if(a=n(t),a===void 0&&(a=t),a===Jj&&(a=void 0),this.autoFreeze_&&I1(a,!0),i){const s=[],o=[];_c(R_).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else na(1,t)},this.produceWithPatches=(t,n)=>{if(oc(t))return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let i,a;return[this.produce(t,n,(o,l)=>{i=o,a=l}),i,a]},sS(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),sS(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),sS(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){fa(e)||na(8),Us(e)&&(e=la(e));const t=ak(this),n=M_(t,e,void 0);return n[Ln].isManual_=!0,L_(t),n}finishDraft(e,t){const n=e&&e[Ln];(!n||!n.isManual_)&&na(9);const{scope_:i}=n;return ik(i,t),sk(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=_c(R_).applyPatches_;return Us(e)?i(e,t):this.produce(e,a=>i(a,t))}};function M_(r,e,t,n){const[i,a]=ty(e)?_c(Mg).proxyMap_(e,t):ry(e)?_c(Mg).proxySet_(e,t):Z9(e,t);return(t?.scope_??r3()).drafts_.push(i),a.callbacks_=t?.callbacks_??[],a.key_=n,t&&n!==void 0?Q9(t,a,n):a.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),i}function la(r){return Us(r)||na(10,r),o3(r)}function o3(r){if(!fa(r)||ny(r))return r;const e=r[Ln];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=C_(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=C_(r,!0);return ih(t,(i,a)=>{kg(t,i,o3(a))},n),e&&(e.finalized_=!1),t}var t7=new e7,l3=t7.produce;function u3(r){return({dispatch:t,getState:n})=>i=>a=>typeof a=="function"?a(t,n,r):i(a)}var r7=u3(),n7=u3,i7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rg:Rg.apply(null,arguments)};function Yi(r,e){function t(...n){if(e){let i=e(...n);if(!i)throw new Error(wi(0));return{type:r,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:r,payload:n[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=n=>Zj(n)&&n.type===r,t}var c3=class cd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cd.prototype)}static get[Symbol.species](){return cd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cd(...e[0].concat(this)):new cd(...e.concat(this))}};function lk(r){return fa(r)?l3(r,()=>{}):r}function Wp(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function a7(r){return typeof r=="boolean"}var s7=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new c3;return t&&(a7(t)?s.push(r7):s.push(n7(t.extraArgument))),s},f3="RTK_autoBatch",or=()=>r=>({payload:r,meta:{[f3]:!0}}),uk=r=>e=>{setTimeout(e,r)},d3=(r={type:"raf"})=>e=>(...t)=>{const n=e(...t);let i=!0,a=!1,s=!1;const o=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uk(10):r.type==="callback"?r.queueNotification:uk(r.timeout),c=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const h=()=>i&&f(),p=n.subscribe(h);return o.add(f),()=>{p(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[f3],a=!i,a&&(s||(s=!0,l(c))),n.dispatch(f)}finally{i=!0}}})},o7=r=>function(t){const{autoBatch:n=!0}=t??{};let i=new c3(r);return n&&i.push(d3(typeof n=="object"?n:void 0)),i};function l7(r){const e=s7(),{reducer:t=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(A1(t))o=Xj(t);else throw new Error(wi(1));let l;typeof n=="function"?l=n(e):l=e();let c=Rg;i&&(c=i7({trace:!1,...typeof i=="object"&&i}));const f=$9(...l),h=o7(f);let p=typeof s=="function"?s(h):h();const g=c(...p);return Qj(o,a,g)}function h3(r){const e={},t=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(wi(28));if(o in e)throw new Error(wi(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&t.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return t.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return r(i),[e,t,n]}function u7(r){return typeof r=="function"}function c7(r,e){let[t,n,i]=h3(e),a;if(u7(r))a=()=>lk(r());else{const o=lk(r);a=()=>o}function s(o=a(),l){let c=[t[l.type],...n.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return c.filter(f=>!!f).length===0&&(c=[i]),c.reduce((f,h)=>{if(h)if(Us(f)){const g=h(f,l);return g===void 0?f:g}else{if(fa(f))return l3(f,p=>h(p,l));{const p=h(f,l);if(p===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return f},o)}return s.getInitialState=a,s}var f7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",d7=(r=21)=>{let e="",t=r;for(;t--;)e+=f7[Math.random()*64|0];return e},h7=Symbol.for("rtk-slice-createasyncthunk");function p7(r,e){return`${r}/${e}`}function m7({creators:r}={}){const e=r?.asyncThunk?.[h7];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(wi(11));const s=(typeof n.reducers=="function"?n.reducers(y7()):n.reducers)||{},o=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,A){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(wi(12));if(T in l.sliceCaseReducersByType)throw new Error(wi(13));return l.sliceCaseReducersByType[T]=A,c},addMatcher(w,A){return l.sliceMatchers.push({matcher:w,reducer:A}),c},exposeAction(w,A){return l.actionCreators[w]=A,c},exposeCaseReducer(w,A){return l.sliceCaseReducersByName[w]=A,c}};o.forEach(w=>{const A=s[w],T={reducerName:w,type:p7(i,w),createNotation:typeof n.reducers=="function"};b7(A)?S7(T,A,c,e):v7(T,A,c)});function f(){const[w={},A=[],T=void 0]=typeof n.extraReducers=="function"?h3(n.extraReducers):[n.extraReducers],I={...w,...l.sliceCaseReducersByType};return c7(n.initialState,D=>{for(let P in I)D.addCase(P,I[P]);for(let P of l.sliceMatchers)D.addMatcher(P.matcher,P.reducer);for(let P of A)D.addMatcher(P.matcher,P.reducer);T&&D.addDefaultCase(T)})}const h=w=>w,p=new Map,g=new WeakMap;let y;function b(w,A){return y||(y=f()),y(w,A)}function v(){return y||(y=f()),y.getInitialState()}function E(w,A=!1){function T(D){let P=D[w];return typeof P>"u"&&A&&(P=Wp(g,T,v)),P}function I(D=h){const P=Wp(p,A,()=>new WeakMap);return Wp(P,D,()=>{const k={};for(const[M,B]of Object.entries(n.selectors??{}))k[M]=g7(B,D,()=>Wp(g,D,v),A);return k})}return{reducerPath:w,getSelectors:I,get selectors(){return I(T)},selectSlice:T}}const S={name:i,reducer:b,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...E(a),injectInto(w,{reducerPath:A,...T}={}){const I=A??a;return w.inject({reducerPath:I,reducer:b},T),{...S,...E(I,!0)}}};return S}}function g7(r,e,t,n){function i(a,...s){let o=e(a);return typeof o>"u"&&n&&(o=t()),r(o,...s)}return i.unwrapped=r,i}var ti=m7();function y7(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function v7({type:r,reducerName:e,createNotation:t},n,i){let a,s;if("reducer"in n){if(t&&!x7(n))throw new Error(wi(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(r,a).exposeCaseReducer(e,a).exposeAction(e,s?Yi(r,s):Yi(r))}function b7(r){return r._reducerDefinitionType==="asyncThunk"}function x7(r){return r._reducerDefinitionType==="reducerWithPrepare"}function S7({type:r,reducerName:e},t,n,i){if(!i)throw new Error(wi(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:c,options:f}=t,h=i(r,a,f);n.exposeAction(e,h),s&&n.addCase(h.fulfilled,s),o&&n.addCase(h.pending,o),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:s||Vp,pending:o||Vp,rejected:l||Vp,settled:c||Vp})}function Vp(){}var E7="task",p3="listener",m3="completed",P1="cancelled",w7=`task-${P1}`,_7=`task-${m3}`,N_=`${p3}-${P1}`,T7=`${p3}-${m3}`,ay=class{constructor(r){this.code=r,this.message=`${E7} ${P1} (reason: ${r})`}name="TaskAbortError";message},L1=(r,e)=>{if(typeof r!="function")throw new TypeError(wi(32))},Ng=()=>{},g3=(r,e=Ng)=>(r.catch(e),r),y3=(r,e)=>(r.addEventListener("abort",e,{once:!0}),()=>r.removeEventListener("abort",e)),Hl=(r,e)=>{const t=r.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),r.abort(e))},Gl=r=>{if(r.aborted){const{reason:e}=r;throw new ay(e)}};function v3(r,e){let t=Ng;return new Promise((n,i)=>{const a=()=>i(new ay(r.reason));if(r.aborted){a();return}t=y3(r,a),e.finally(()=>t()).then(n,i)}).finally(()=>{t=Ng})}var A7=async(r,e)=>{try{return await Promise.resolve(),{status:"ok",value:await r()}}catch(t){return{status:t instanceof ay?"cancelled":"rejected",error:t}}finally{e?.()}},Fg=r=>e=>g3(v3(r,e).then(t=>(Gl(r),t))),b3=r=>{const e=Fg(r);return t=>e(new Promise(n=>setTimeout(n,t)))},{assign:pc}=Object,ck={},sy="listenerMiddleware",D7=(r,e)=>{const t=n=>y3(r,()=>Hl(n,r.reason));return(n,i)=>{L1(n);const a=new AbortController;t(a);const s=A7(async()=>{Gl(r),Gl(a.signal);const o=await n({pause:Fg(a.signal),delay:b3(a.signal),signal:a.signal});return Gl(a.signal),o},()=>Hl(a,_7));return i?.autoJoin&&e.push(s.catch(Ng)),{result:Fg(r)(s),cancel(){Hl(a,w7)}}}},O7=(r,e)=>{const t=async(n,i)=>{Gl(e);let a=()=>{};const o=[new Promise((l,c)=>{let f=r({predicate:n,effect:(h,p)=>{p.unsubscribe(),l([h,p.getState(),p.getOriginalState()])}});a=()=>{f(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await v3(e,Promise.race(o));return Gl(e),l}finally{a()}};return(n,i)=>g3(t(n,i))},x3=r=>{let{type:e,actionCreator:t,matcher:n,predicate:i,effect:a}=r;if(e)i=Yi(e).match;else if(t)e=t.type,i=t.match;else if(n)i=n;else if(!i)throw new Error(wi(21));return L1(a),{predicate:i,type:e,effect:a}},S3=pc(r=>{const{type:e,predicate:t,effect:n}=x3(r);return{id:d7(),effect:n,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(wi(22))}}},{withTypes:()=>S3}),fk=(r,e)=>{const{type:t,effect:n,predicate:i}=x3(e);return Array.from(r.values()).find(a=>(typeof t=="string"?a.type===t:a.predicate===i)&&a.effect===n)},F_=r=>{r.pending.forEach(e=>{Hl(e,N_)})},I7=(r,e)=>()=>{for(const t of e.keys())F_(t);r.clear()},dk=(r,e,t)=>{try{r(e,t)}catch(n){setTimeout(()=>{throw n},0)}},E3=pc(Yi(`${sy}/add`),{withTypes:()=>E3}),C7=Yi(`${sy}/removeAll`),w3=pc(Yi(`${sy}/remove`),{withTypes:()=>w3}),R7=(...r)=>{console.error(`${sy}/error`,...r)},sh=(r={})=>{const e=new Map,t=new Map,n=g=>{const y=t.get(g)??0;t.set(g,y+1)},i=g=>{const y=t.get(g)??1;y===1?t.delete(g):t.set(g,y-1)},{extra:a,onError:s=R7}=r;L1(s);const o=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),y=>{g.unsubscribe(),y?.cancelActive&&F_(g)}),l=g=>{const y=fk(e,g)??S3(g);return o(y)};pc(l,{withTypes:()=>l});const c=g=>{const y=fk(e,g);return y&&(y.unsubscribe(),g.cancelActive&&F_(y)),!!y};pc(c,{withTypes:()=>c});const f=async(g,y,b,v)=>{const E=new AbortController,S=O7(l,E.signal),w=[];try{g.pending.add(E),n(g),await Promise.resolve(g.effect(y,pc({},b,{getOriginalState:v,condition:(A,T)=>S(A,T).then(Boolean),take:S,delay:b3(E.signal),pause:Fg(E.signal),extra:a,signal:E.signal,fork:D7(E.signal,w),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((A,T,I)=>{A!==E&&(Hl(A,N_),I.delete(A))})},cancel:()=>{Hl(E,N_),g.pending.delete(E)},throwIfCancelled:()=>{Gl(E.signal)}})))}catch(A){A instanceof ay||dk(s,A,{raisedBy:"effect"})}finally{await Promise.all(w),Hl(E,T7),i(g),g.pending.delete(E)}},h=I7(e,t);return{middleware:g=>y=>b=>{if(!Zj(b))return y(b);if(E3.match(b))return l(b.payload);if(C7.match(b)){h();return}if(w3.match(b))return c(b.payload);let v=g.getState();const E=()=>{if(v===ck)throw new Error(wi(23));return v};let S;try{if(S=y(b),e.size>0){const w=g.getState(),A=Array.from(e.values());for(const T of A){let I=!1;try{I=T.predicate(b,w,v)}catch(D){I=!1,dk(s,D,{raisedBy:"predicate"})}I&&f(T,b,g,E)}}}finally{v=ck}return S},startListening:l,stopListening:c,clearListeners:h}};function wi(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var P7={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},_3=ti({name:"chartLayout",initialState:P7,reducers:{setLayout(r,e){r.layoutType=e.payload},setChartSize(r,e){r.width=e.payload.width,r.height=e.payload.height},setMargin(r,e){var t,n,i,a;r.margin.top=(t=e.payload.top)!==null&&t!==void 0?t:0,r.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,r.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,r.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(r,e){r.scale=e.payload}}}),{setMargin:L7,setLayout:k7,setChartSize:M7,setScale:N7}=_3.actions,F7=_3.reducer;function T3(r,e,t){return Array.isArray(r)&&r&&e+t!==0?r.slice(e,t+1):r}function hk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(t),!0).forEach(function(n){B7(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function B7(r,e,t){return(e=U7(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function U7(r){var e=j7(r,"string");return typeof e=="symbol"?e:e+""}function j7(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function xn(r,e,t){return Xr(r)||Xr(e)?t:Ua(e)?X0(r,e,t):typeof e=="function"?e(r):t}var $7=(r,e,t)=>{if(e&&t){var{width:n,height:i}=t,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ut(r[a]))return cc(cc({},r),{},{[a]:r[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ut(r[s]))return cc(cc({},r),{},{[s]:r[s]+(i||0)})}return r},rl=(r,e)=>r==="horizontal"&&e==="xAxis"||r==="vertical"&&e==="yAxis"||r==="centric"&&e==="angleAxis"||r==="radial"&&e==="radiusAxis",A3=(r,e,t,n)=>{if(n)return r.map(o=>o.coordinate);var i,a,s=r.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(t),s},D3=(r,e,t)=>{if(!r)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:f,ticks:h,niceTicks:p,axisType:g}=r;if(!s)return null;var y=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,b=i==="category"&&s.bandwidth?s.bandwidth()/y:0;if(b=g==="angleAxis"&&a&&a.length>=2?Gi(a[0]-a[1])*2*b:b,h||p){var v=(h||p||[]).map((E,S)=>{var w=n?n.indexOf(E):E;return{coordinate:s(w)+b,value:E,offset:b,index:S}});return v.filter(E=>!Ba(E.coordinate))}return l&&c?c.map((E,S)=>({coordinate:s(E)+b,value:E,index:S,offset:b})):s.ticks&&f!=null?s.ticks(f).map((E,S)=>({coordinate:s(E)+b,value:E,offset:b,index:S})):s.domain().map((E,S)=>({coordinate:s(E)+b,value:n?n[E]:E,index:S,offset:b}))},pk=1e-4,H7=r=>{var e=r.domain();if(!(!e||e.length<=2)){var t=e.length,n=r.range(),i=Math.min(n[0],n[1])-pk,a=Math.max(n[0],n[1])+pk,s=r(e[0]),o=r(e[t-1]);(s<i||s>a||o<i||o>a)&&r.domain([e[0],e[t-1]])}},G7=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,a=0,s=0;s<e;++s){var o=Ba(r[s][t][1])?r[s][t][0]:r[s][t][1];o>=0?(r[s][t][0]=i,r[s][t][1]=i+o,i=r[s][t][1]):(r[s][t][0]=a,r[s][t][1]=a+o,a=r[s][t][1])}},K7=r=>{var e=r.length;if(!(e<=0))for(var t=0,n=r[0].length;t<n;++t)for(var i=0,a=0;a<e;++a){var s=Ba(r[a][t][1])?r[a][t][0]:r[a][t][1];s>=0?(r[a][t][0]=i,r[a][t][1]=i+s,i=r[a][t][1]):(r[a][t][0]=0,r[a][t][1]=0)}},Y7={sign:G7,expand:dV,none:Ec,silhouette:hV,wiggle:pV,positive:K7},z7=(r,e,t)=>{var n=Y7[t],i=fV().keys(e).value((a,s)=>Number(xn(a,s,0))).order(A_).offset(n);return i(r)};function mk(r){var{axis:e,ticks:t,bandSize:n,entry:i,index:a,dataKey:s}=r;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Xr(i[e.dataKey])){var o=Rj(t,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return t[a]?t[a].coordinate+n/2:null}var l=xn(i,Xr(s)?e.dataKey:s);return Xr(l)?null:e.scale(l)}var q7=r=>{var e=r.flat(2).filter(ut);return[Math.min(...e),Math.max(...e)]},W7=r=>[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]],V7=(r,e,t)=>{if(r!=null)return W7(Object.keys(r).reduce((n,i)=>{var a=r[i],{stackedData:s}=a,o=s.reduce((l,c)=>{var f=T3(c,e,t),h=q7(f);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},gk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bg=(r,e,t)=>{if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!t||n>0)return n}if(r&&e&&e.length>=2){for(var i=Z0(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return t?void 0:0};function vk(r){var{tooltipEntrySettings:e,dataKey:t,payload:n,value:i,name:a}=r;return cc(cc({},e),{},{dataKey:t,payload:n,value:i,name:a})}function O3(r,e){if(r)return String(r);if(typeof e=="string")return e}var Q7=(r,e)=>{if(e==="horizontal")return r.chartX;if(e==="vertical")return r.chartY},X7=(r,e)=>e==="centric"?r.angle:r.radius,Vs=r=>r.layout.width,Qs=r=>r.layout.height,Z7=r=>r.layout.scale,I3=r=>r.layout.margin,oy=ke(r=>r.cartesianAxis.xAxis,r=>Object.values(r)),ly=ke(r=>r.cartesianAxis.yAxis,r=>Object.values(r)),J7="data-recharts-item-index",eQ="data-recharts-item-data-key",oh=60;function bk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bk(Object(t),!0).forEach(function(n){tQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tQ(r,e,t){return(e=rQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rQ(r){var e=nQ(r,"string");return typeof e=="symbol"?e:e+""}function nQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var iQ=r=>r.brush.height;function aQ(r){var e=ly(r);return e.reduce((t,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:oh;return t+i}return t},0)}function sQ(r){var e=ly(r);return e.reduce((t,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:oh;return t+i}return t},0)}function oQ(r){var e=oy(r);return e.reduce((t,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?t+n.height:t,0)}function lQ(r){var e=oy(r);return e.reduce((t,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?t+n.height:t,0)}var dn=ke([Vs,Qs,I3,iQ,aQ,sQ,oQ,lQ,Wj,k9],(r,e,t,n,i,a,s,o,l,c)=>{var f={left:(t.left||0)+i,right:(t.right||0)+a},h={top:(t.top||0)+s,bottom:(t.bottom||0)+o},p=Qp(Qp({},h),f),g=p.bottom;p.bottom+=n,p=$7(p,l,c);var y=r-p.left-p.right,b=e-p.top-p.bottom;return Qp(Qp({brushBottom:g},p),{},{width:Math.max(y,0),height:Math.max(b,0)})}),uQ=ke(dn,r=>({x:r.left,y:r.top,width:r.width,height:r.height})),C3=ke(Vs,Qs,(r,e)=>({x:0,y:0,width:r,height:e})),cQ=L.createContext(null),ri=()=>L.useContext(cQ)!=null,uy=r=>r.brush,cy=ke([uy,dn,I3],(r,e,t)=>({height:r.height,x:ut(r.x)?r.x:e.left,y:ut(r.y)?r.y:e.top+e.height+e.brushBottom-(t?.bottom||0),width:ut(r.width)?r.width:e.width})),lS={},uS={},cS={},xk;function fQ(){return xk||(xk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),f=()=>{o!==null&&(t.apply(s,o),s=void 0,o=null)},h=()=>{c&&f(),b()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},n)},y=()=>{p!==null&&(clearTimeout(p),p=null)},b=()=>{y(),s=void 0,o=null},v=()=>{f()},E=function(...S){if(i?.aborted)return;s=this,o=S;const w=p==null;g(),l&&w&&f()};return E.schedule=g,E.cancel=b,E.flush=v,i?.addEventListener("abort",b,{once:!0}),E}r.debounce=e})(cS)),cS}var Sk;function dQ(){return Sk||(Sk=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=fQ();function t(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let f,h=null;const p=e.debounce(function(...b){f=n.apply(this,b),h=null},i,{edges:c}),g=function(...b){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(f=n.apply(this,b),h=Date.now(),p.cancel(),p.schedule(),f):(p.apply(this,b),f)},y=()=>(p.flush(),f);return g.cancel=p.cancel,g.flush=y,g}r.debounce=t})(uS)),uS}var Ek;function hQ(){return Ek||(Ek=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=dQ();function t(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(n,i,{leading:s,maxWait:i,trailing:o})}r.throttle=t})(lS)),lS}var fS,wk;function pQ(){return wk||(wk=1,fS=hQ().throttle),fS}var mQ=pQ();const gQ=Ya(mQ);var Ug=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(t===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(t===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>i[s++]))}},R3=(r,e,t)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=t,o=Bs(n)?r:Number(n),l=Bs(i)?e:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},yQ={width:0,height:0,overflow:"visible"},vQ={width:0,overflowX:"visible"},bQ={height:0,overflowY:"visible"},xQ={},SQ=r=>{var{width:e,height:t}=r,n=Bs(e),i=Bs(t);return n&&i?yQ:n?vQ:i?bQ:xQ};function EQ(r){var{width:e,height:t,aspect:n}=r,i=e,a=t;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function Zr(r){return Number.isFinite(r)}function ja(r){return typeof r=="number"&&r>0&&Number.isFinite(r)}function B_(){return B_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},B_.apply(null,arguments)}function _k(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(t),!0).forEach(function(n){wQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_k(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wQ(r,e,t){return(e=_Q(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _Q(r){var e=TQ(r,"string");return typeof e=="symbol"?e:e+""}function TQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var P3=L.createContext({width:-1,height:-1});function AQ(r){return ja(r.width)&&ja(r.height)}function L3(r){var{children:e,width:t,height:n}=r,i=L.useMemo(()=>({width:t,height:n}),[t,n]);return AQ(i)?L.createElement(P3.Provider,{value:i},e):null}var k1=()=>L.useContext(P3),DQ=L.forwardRef((r,e)=>{var{aspect:t,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:f=0,id:h,className:p,onResize:g,style:y={}}=r,b=L.useRef(null),v=L.useRef();v.current=g,L.useImperativeHandle(e,()=>b.current);var[E,S]=L.useState({containerWidth:n.width,containerHeight:n.height}),w=L.useCallback((P,k)=>{S(M=>{var B=Math.round(P),C=Math.round(k);return M.containerWidth===B&&M.containerHeight===C?M:{containerWidth:B,containerHeight:C}})},[]);L.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return nh;var P=C=>{var W,{width:Y,height:q}=C[0].contentRect;w(Y,q),(W=v.current)===null||W===void 0||W.call(v,Y,q)};f>0&&(P=gQ(P,f,{trailing:!0,leading:!1}));var k=new ResizeObserver(P),{width:M,height:B}=b.current.getBoundingClientRect();return w(M,B),k.observe(b.current),()=>{k.disconnect()}},[w,f]);var{containerWidth:A,containerHeight:T}=E;Ug(!t||t>0,"The aspect(%s) must be greater than zero.",t);var{calculatedWidth:I,calculatedHeight:D}=R3(A,T,{width:i,height:a,aspect:t,maxHeight:l});return Ug(I!=null&&I>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,D,i,a,s,o,t),L.createElement("div",{id:h?"".concat(h):void 0,className:mt("recharts-responsive-container",p),style:Tk(Tk({},y),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:b},L.createElement("div",{style:SQ({width:i,height:a})},L.createElement(L3,{width:I,height:D},c)))}),Ak=L.forwardRef((r,e)=>{var t=k1();if(ja(t.width)&&ja(t.height))return r.children;var{width:n,height:i}=EQ({width:r.width,height:r.height,aspect:r.aspect}),{calculatedWidth:a,calculatedHeight:s}=R3(void 0,void 0,{width:n,height:i,aspect:r.aspect,maxHeight:r.maxHeight});return ut(a)&&ut(s)?L.createElement(L3,{width:a,height:s},r.children):L.createElement(DQ,B_({},r,{width:n,height:i,ref:e}))});function k3(r){if(r)return{x:r.x,y:r.y,upperWidth:"upperWidth"in r?r.upperWidth:r.width,lowerWidth:"lowerWidth"in r?r.lowerWidth:r.width,width:r.width,height:r.height}}var fy=()=>{var r,e=ri(),t=ot(uQ),n=ot(cy),i=(r=ot(uy))===null||r===void 0?void 0:r.padding;return!e||!n||!i?t:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},OQ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},M3=()=>{var r;return(r=ot(dn))!==null&&r!==void 0?r:OQ},M1=()=>ot(Vs),N1=()=>ot(Qs),IQ=()=>ot(r=>r.layout.margin),ir=r=>r.layout.layoutType,dy=()=>ot(ir),CQ=()=>{var r=dy();return r!==void 0},hy=r=>{var e=Lr(),t=ri(),{width:n,height:i}=r,a=k1(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),L.useEffect(()=>{!t&&ja(s)&&ja(o)&&e(M7({width:s,height:o}))},[e,t,s,o]),null},N3=Symbol.for("immer-nothing"),Dk=Symbol.for("immer-draftable"),Ai=Symbol.for("immer-state");function ia(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Od=Object.getPrototypeOf;function Tc(r){return!!r&&!!r[Ai]}function Vl(r){return r?F3(r)||Array.isArray(r)||!!r[Dk]||!!r.constructor?.[Dk]||lh(r)||my(r):!1}var RQ=Object.prototype.constructor.toString(),Ok=new WeakMap;function F3(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let n=Ok.get(t);return n===void 0&&(n=Function.toString.call(t),Ok.set(t,n)),n===RQ}function jg(r,e,t=!0){py(r)===0?(t?Reflect.ownKeys(r):Object.keys(r)).forEach(i=>{e(i,r[i],r)}):r.forEach((n,i)=>e(i,n,r))}function py(r){const e=r[Ai];return e?e.type_:Array.isArray(r)?1:lh(r)?2:my(r)?3:0}function U_(r,e){return py(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function B3(r,e,t){const n=py(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function PQ(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function lh(r){return r instanceof Map}function my(r){return r instanceof Set}function Dl(r){return r.copy_||r.base_}function j_(r,e){if(lh(r))return new Map(r);if(my(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=F3(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[Ai];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[s]})}return Object.create(Od(r),n)}else{const n=Od(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function F1(r,e=!1){return gy(r)||Tc(r)||!Vl(r)||(py(r)>1&&Object.defineProperties(r,{set:Xp,add:Xp,clear:Xp,delete:Xp}),Object.freeze(r),e&&Object.values(r).forEach(t=>F1(t,!0))),r}function LQ(){ia(2)}var Xp={value:LQ};function gy(r){return r===null||typeof r!="object"?!0:Object.isFrozen(r)}var kQ={};function Ql(r){const e=kQ[r];return e||ia(0,r),e}var Id;function U3(){return Id}function MQ(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ik(r,e){e&&(Ql("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function $_(r){H_(r),r.drafts_.forEach(NQ),r.drafts_=null}function H_(r){r===Id&&(Id=r.parent_)}function Ck(r){return Id=MQ(Id,r)}function NQ(r){const e=r[Ai];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Rk(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Ai].modified_&&($_(e),ia(4)),Vl(r)&&(r=$g(e,r),e.parent_||Hg(e,r)),e.patches_&&Ql("Patches").generateReplacementPatches_(t[Ai].base_,r,e.patches_,e.inversePatches_)):r=$g(e,t,[]),$_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==N3?r:void 0}function $g(r,e,t){if(gy(e))return e;const n=r.immer_.shouldUseStrictIteration(),i=e[Ai];if(!i)return jg(e,(a,s)=>Pk(r,i,e,a,s,t),n),e;if(i.scope_!==r)return e;if(!i.modified_)return Hg(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),jg(s,(l,c)=>Pk(r,i,a,l,c,t,o),n),Hg(r,a,!1),t&&r.patches_&&Ql("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function Pk(r,e,t,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=gy(i);if(!(o&&!s)){if(Tc(i)){const l=a&&e&&e.type_!==3&&!U_(e.assigned_,n)?a.concat(n):void 0,c=$g(r,i,l);if(B3(t,n,c),Tc(c))r.canAutoFreeze_=!1;else return}else s&&t.add(i);if(Vl(i)&&!o){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;$g(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(lh(t)?t.has(n):Object.prototype.propertyIsEnumerable.call(t,n))&&Hg(r,i)}}}function Hg(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&F1(e,t)}function FQ(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:U3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=B1;t&&(i=[n],a=Cd);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var B1={get(r,e){if(e===Ai)return r;const t=Dl(r);if(!U_(t,e))return BQ(r,t,e);const n=t[e];return r.finalized_||!Vl(n)?n:n===dS(r.base_,e)?(hS(r),r.copy_[e]=K_(n,r)):n},has(r,e){return e in Dl(r)},ownKeys(r){return Reflect.ownKeys(Dl(r))},set(r,e,t){const n=j3(Dl(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=dS(Dl(r),e),a=i?.[Ai];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(PQ(t,i)&&(t!==void 0||U_(r.base_,e)))return!0;hS(r),G_(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return dS(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,hS(r),G_(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Dl(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){ia(11)},getPrototypeOf(r){return Od(r.base_)},setPrototypeOf(){ia(12)}},Cd={};jg(B1,(r,e)=>{Cd[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Cd.deleteProperty=function(r,e){return Cd.set.call(this,r,e,void 0)};Cd.set=function(r,e,t){return B1.set.call(this,r[0],e,t,r[0])};function dS(r,e){const t=r[Ai];return(t?Dl(t):r)[e]}function BQ(r,e,t){const n=j3(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function j3(r,e){if(!(e in r))return;let t=Od(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Od(t)}}function G_(r){r.modified_||(r.modified_=!0,r.parent_&&G_(r.parent_))}function hS(r){r.copy_||(r.copy_=j_(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var UQ=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(l=a,...c){return s.produce(l,f=>t.call(this,f,...c))}}typeof t!="function"&&ia(6),n!==void 0&&typeof n!="function"&&ia(7);let i;if(Vl(e)){const a=Ck(this),s=K_(e,void 0);let o=!0;try{i=t(s),o=!1}finally{o?$_(a):H_(a)}return Ik(a,n),Rk(i,a)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===N3&&(i=void 0),this.autoFreeze_&&F1(i,!0),n){const a=[],s=[];Ql("Patches").generateReplacementPatches_(e,i,a,s),n(a,s)}return i}else ia(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let n,i;return[this.produce(e,t,(s,o)=>{n=s,i=o}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),typeof r?.useStrictIteration=="boolean"&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Vl(r)||ia(8),Tc(r)&&(r=jQ(r));const e=Ck(this),t=K_(r,void 0);return t[Ai].isManual_=!0,H_(e),t}finishDraft(r,e){const t=r&&r[Ai];(!t||!t.isManual_)&&ia(9);const{scope_:n}=t;return Ik(n,e),Rk(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=Ql("Patches").applyPatches_;return Tc(r)?n(r,e):this.produce(r,i=>n(i,e))}};function K_(r,e){const t=lh(r)?Ql("MapSet").proxyMap_(r,e):my(r)?Ql("MapSet").proxySet_(r,e):FQ(r,e);return(e?e.scope_:U3()).drafts_.push(t),t}function jQ(r){return Tc(r)||ia(10,r),$3(r)}function $3(r){if(!Vl(r)||gy(r))return r;const e=r[Ai];let t,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=j_(r,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else t=j_(r,!0);return jg(t,(i,a)=>{B3(t,i,$3(a))},n),e&&(e.finalized_=!1),t}var $Q=new UQ;$Q.produce;var HQ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},H3=ti({name:"legend",initialState:HQ,reducers:{setLegendSize(r,e){r.size.width=e.payload.width,r.size.height=e.payload.height},setLegendSettings(r,e){r.settings.align=e.payload.align,r.settings.layout=e.payload.layout,r.settings.verticalAlign=e.payload.verticalAlign,r.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(r,e){r.payload.push(e.payload)},prepare:or()},replaceLegendPayload:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).payload.indexOf(t);i>-1&&(r.payload[i]=n)},prepare:or()},removeLegendPayload:{reducer(r,e){var t=la(r).payload.indexOf(e.payload);t>-1&&r.payload.splice(t,1)},prepare:or()}}}),{setLegendSize:Lk,setLegendSettings:GQ,addLegendPayload:KQ,replaceLegendPayload:YQ,removeLegendPayload:zQ}=H3.actions,qQ=H3.reducer,WQ=["contextPayload"];function Y_(){return Y_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Y_.apply(null,arguments)}function kk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ac(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(t),!0).forEach(function(n){VQ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function VQ(r,e,t){return(e=QQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function QQ(r){var e=XQ(r,"string");return typeof e=="symbol"?e:e+""}function XQ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ZQ(r,e){if(r==null)return{};var t,n,i=JQ(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function JQ(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function eX(r){return r.value}function tX(r){var{contextPayload:e}=r,t=ZQ(r,WQ),n=Kj(e,r.payloadUniqBy,eX),i=Ac(Ac({},t),{},{payload:n});return L.isValidElement(r.content)?L.cloneElement(r.content,i):typeof r.content=="function"?L.createElement(r.content,i):L.createElement(GV,i)}function rX(r,e,t,n,i,a){var{layout:s,align:o,verticalAlign:l}=e,c,f;return(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))&&(o==="center"&&s==="vertical"?c={left:((n||0)-a.width)/2}:c=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))&&(l==="middle"?f={top:((i||0)-a.height)/2}:f=l==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),Ac(Ac({},c),f)}function nX(r){var e=Lr();return L.useEffect(()=>{e(GQ(r))},[e,r]),null}function iX(r){var e=Lr();return L.useEffect(()=>(e(Lk(r)),()=>{e(Lk({width:0,height:0}))}),[e,r]),null}function aX(r,e,t,n){return r==="vertical"&&ut(e)?{height:e}:r==="horizontal"?{width:t||n}:null}var sX={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function z_(r){var e=Sn(r,sX),t=F9(),n=MW(),i=IQ(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,f]=Vj([t]),h=M1(),p=N1();if(h==null||p==null)return null;var g=h-(i?.left||0)-(i?.right||0),y=aX(e.layout,s,a,g),b=l?o:Ac(Ac({position:"absolute",width:y?.width||a||"auto",height:y?.height||s||"auto"},rX(o,e,i,h,p,c)),o),v=l??n;if(v==null||t==null)return null;var E=L.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:f},L.createElement(nX,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&L.createElement(iX,{width:c.width,height:c.height}),L.createElement(tX,Y_({},e,y,{margin:i,chartWidth:h,chartHeight:p,contextPayload:t})));return Jd.createPortal(E,v)}z_.displayName="Legend";function q_(){return q_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},q_.apply(null,arguments)}function Mk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(t),!0).forEach(function(n){oX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oX(r,e,t){return(e=lX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lX(r){var e=uX(r,"string");return typeof e=="symbol"?e:e+""}function uX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cX(r){return Array.isArray(r)&&Ua(r[0])&&Ua(r[1])?r.join(" ~ "):r}var fX=r=>{var{separator:e=" : ",contentStyle:t={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:f,labelFormatter:h,accessibilityLayer:p=!1}=r,g=()=>{if(a&&a.length){var T={padding:0,margin:0},I=(o?Z0(a,o):a).map((D,P)=>{if(D.type==="none")return null;var k=D.formatter||s||cX,{value:M,name:B}=D,C=M,W=B;if(k){var Y=k(M,B,D,P,a);if(Array.isArray(Y))[C,W]=Y;else if(Y!=null)C=Y;else return null}var q=pS({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},n);return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:q},Ua(W)?L.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Ua(W)?L.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,L.createElement("span",{className:"recharts-tooltip-item-value"},C),L.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:T},I)}return null},y=pS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),b=pS({margin:0},i),v=!Xr(f),E=v?f:"",S=mt("recharts-default-tooltip",l),w=mt("recharts-tooltip-label",c);v&&h&&a!==void 0&&a!==null&&(E=h(f,a));var A=p?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",q_({className:S,style:y},A),L.createElement("p",{className:w,style:b},L.isValidElement(E)?E:"".concat(E)),g())},Wf="recharts-tooltip-wrapper",dX={visibility:"hidden"};function hX(r){var{coordinate:e,translateX:t,translateY:n}=r;return mt(Wf,{["".concat(Wf,"-right")]:ut(t)&&e&&ut(e.x)&&t>=e.x,["".concat(Wf,"-left")]:ut(t)&&e&&ut(e.x)&&t<e.x,["".concat(Wf,"-bottom")]:ut(n)&&e&&ut(e.y)&&n>=e.y,["".concat(Wf,"-top")]:ut(n)&&e&&ut(e.y)&&n<e.y})}function Nk(r){var{allowEscapeViewBox:e,coordinate:t,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=r;if(a&&ut(a[n]))return a[n];var f=t[n]-o-(i>0?i:0),h=t[n]+i;if(e[n])return s[n]?f:h;var p=l[n];if(p==null)return 0;if(s[n]){var g=f,y=p;return g<y?Math.max(h,p):Math.max(f,p)}if(c==null)return 0;var b=h+o,v=p+c;return b>v?Math.max(f,p):Math.max(h,p)}function pX(r){var{translateX:e,translateY:t,useTranslate3d:n}=r;return{transform:n?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function mX(r){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=r,c,f,h;return s.height>0&&s.width>0&&t?(f=Nk({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=Nk({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=pX({translateX:f,translateY:h,useTranslate3d:o})):c=dX,{cssProperties:c,cssClasses:hX({translateX:f,translateY:h,coordinate:t})}}function Fk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Zp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(t),!0).forEach(function(n){W_(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Fk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function W_(r,e,t){return(e=gX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gX(r){var e=yX(r,"string");return typeof e=="symbol"?e:e+""}function yX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class vX extends L.PureComponent{constructor(){super(...arguments),W_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),W_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&t!==void 0?t:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:f,reverseDirection:h,useTranslate3d:p,viewBox:g,wrapperStyle:y,lastBoundingBox:b,innerRef:v,hasPortalFromProps:E}=this.props,{cssClasses:S,cssProperties:w}=mX({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:c,position:f,reverseDirection:h,tooltipBox:{height:b.height,width:b.width},useTranslate3d:p,viewBox:g}),A=E?{}:Zp(Zp({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),T=Zp(Zp({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return L.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:T,ref:v},a)}}var G3=()=>{var r;return(r=ot(e=>e.rootProps.accessibilityLayer))!==null&&r!==void 0?r:!0};function V_(){return V_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},V_.apply(null,arguments)}function Bk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Uk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(t),!0).forEach(function(n){bX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bX(r,e,t){return(e=xX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xX(r){var e=SX(r,"string");return typeof e=="symbol"?e:e+""}function SX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var jk={curveBasisClosed:eV,curveBasisOpen:tV,curveBasis:JW,curveBumpX:UW,curveBumpY:jW,curveLinearClosed:rV,curveLinear:V0,curveMonotoneX:nV,curveMonotoneY:iV,curveNatural:aV,curveStep:sV,curveStepAfter:lV,curveStepBefore:oV},Gg=r=>Zr(r.x)&&Zr(r.y),$k=r=>r.base!=null&&Gg(r.base)&&Gg(r),Vf=r=>r.x,Qf=r=>r.y,EX=(r,e)=>{if(typeof r=="function")return r;var t="curve".concat(rh(r));return(t==="curveMonotone"||t==="curveBump")&&e?jk["".concat(t).concat(e==="vertical"?"Y":"X")]:jk[t]||V0},wX=r=>{var{type:e="linear",points:t=[],baseLine:n,layout:i,connectNulls:a=!1}=r,s=EX(e,i),o=a?t.filter(Gg):t,l;if(Array.isArray(n)){var c=t.map((g,y)=>Uk(Uk({},g),{},{base:n[y]}));i==="vertical"?l=Kp().y(Qf).x1(Vf).x0(g=>g.base.x):l=Kp().x(Vf).y1(Qf).y0(g=>g.base.y);var f=l.defined($k).curve(s),h=a?c.filter($k):c;return f(h)}i==="vertical"&&ut(n)?l=Kp().y(Qf).x1(Vf).x0(n):ut(n)?l=Kp().x(Vf).y1(Qf).y0(n):l=vj().x(Vf).y(Qf);var p=l.defined(Gg).curve(s);return p(o)},K3=r=>{var{className:e,points:t,path:n,pathRef:i}=r;if((!t||!t.length)&&!n)return null;var a=t&&t.length?wX(r):n;return L.createElement("path",V_({},Fa(r),w1(r),{className:mt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},_X=["x","y","top","left","width","height","className"];function Q_(){return Q_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Q_.apply(null,arguments)}function Hk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function TX(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(t),!0).forEach(function(n){AX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Hk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function AX(r,e,t){return(e=DX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function DX(r){var e=OX(r,"string");return typeof e=="symbol"?e:e+""}function OX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function IX(r,e){if(r==null)return{};var t,n,i=CX(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function CX(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var RX=(r,e,t,n,i,a)=>"M".concat(r,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(t),PX=r=>{var{x:e=0,y:t=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=r,l=IX(r,_X),c=TX({x:e,y:t,top:n,left:i,width:a,height:s},l);return!ut(e)||!ut(t)||!ut(a)||!ut(s)||!ut(n)||!ut(i)?null:L.createElement("path",Q_({},Pn(c),{className:mt("recharts-cross",o),d:RX(e,t,a,s,n,i)}))};function LX(r,e,t,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-i:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-i,width:r==="horizontal"?n:t.width-1,height:r==="horizontal"?t.height-1:n}}function Gk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Kk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(t),!0).forEach(function(n){kX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kX(r,e,t){return(e=MX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function MX(r){var e=NX(r,"string");return typeof e=="symbol"?e:e+""}function NX(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var FX=r=>r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Y3=(r,e,t)=>r.map(n=>"".concat(FX(n)," ").concat(e,"ms ").concat(t)).join(","),BX=(r,e)=>[Object.keys(r),Object.keys(e)].reduce((t,n)=>t.filter(i=>n.includes(i))),Rd=(r,e)=>Object.keys(e).reduce((t,n)=>Kk(Kk({},t),{},{[n]:r(n,e[n])}),{});function Yk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ur(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(t),!0).forEach(function(n){UX(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Yk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function UX(r,e,t){return(e=jX(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jX(r){var e=$X(r,"string");return typeof e=="symbol"?e:e+""}function $X(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Kg=(r,e,t)=>r+(e-r)*t,X_=r=>{var{from:e,to:t}=r;return e!==t},z3=(r,e,t)=>{var n=Rd((i,a)=>{if(X_(a)){var[s,o]=r(a.from,a.to,a.velocity);return Ur(Ur({},a),{},{from:s,velocity:o})}return a},e);return t<1?Rd((i,a)=>X_(a)?Ur(Ur({},a),{},{velocity:Kg(a.velocity,n[i].velocity,t),from:Kg(a.from,n[i].from,t)}):a,e):z3(r,n,t-1)};function HX(r,e,t,n,i,a){var s,o=n.reduce((p,g)=>Ur(Ur({},p),{},{[g]:{from:r[g],velocity:0,to:e[g]}}),{}),l=()=>Rd((p,g)=>g.from,o),c=()=>!Object.values(o).filter(X_).length,f=null,h=p=>{s||(s=p);var g=p-s,y=g/t.dt;o=z3(t,o,y),i(Ur(Ur(Ur({},r),e),l())),s=p,c()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var p;(p=f)===null||p===void 0||p()})}function GX(r,e,t,n,i,a,s){var o=null,l=i.reduce((h,p)=>Ur(Ur({},h),{},{[p]:[r[p],e[p]]}),{}),c,f=h=>{c||(c=h);var p=(h-c)/n,g=Rd((b,v)=>Kg(...v,t(p)),l);if(a(Ur(Ur(Ur({},r),e),g)),p<1)o=s.setTimeout(f);else{var y=Rd((b,v)=>Kg(...v,t(1)),l);a(Ur(Ur(Ur({},r),e),y))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const KX=(r,e,t,n,i,a)=>{var s=BX(r,e);return t==null?()=>(i(Ur(Ur({},r),e)),()=>{}):t.isStepper===!0?HX(r,e,t,s,i,a):GX(r,e,t,n,s,i,a)};var Yg=1e-4,q3=(r,e)=>[0,3*r,3*e-6*r,3*r-3*e+1],W3=(r,e)=>r.map((t,n)=>t*e**n).reduce((t,n)=>t+n),zk=(r,e)=>t=>{var n=q3(r,e);return W3(n,t)},YX=(r,e)=>t=>{var n=q3(r,e),i=[...n.map((a,s)=>a*s).slice(1),0];return W3(i,t)},zX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===1)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=t[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return t.length===4?t:[0,0,1,1]},qX=(r,e,t,n)=>{var i=zk(r,t),a=zk(e,n),s=YX(r,t),o=c=>c>1?1:c<0?0:c,l=c=>{for(var f=c>1?1:c,h=f,p=0;p<8;++p){var g=i(h)-f,y=s(h);if(Math.abs(g-f)<Yg||y<Yg)return a(h);h=o(h-g/y)}return a(h)};return l.isStepper=!1,l},qk=function(){return qX(...zX(...arguments))},WX=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,a=(s,o,l)=>{var c=-(s-o)*t,f=l*n,h=l+(c-f)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<Yg&&Math.abs(h)<Yg?[o,0]:[p,h]};return a.isStepper=!0,a.dt=i,a},VX=r=>{if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qk(r);case"spring":return WX();default:if(r.split("(")[0]==="cubic-bezier")return qk(r)}return typeof r=="function"?r:null};function QX(r){var e,t=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){i=r.setTimeout(a.bind(null,c),l);return}a(l),i=r.setTimeout(a.bind(null,c));return}typeof s=="string"&&(e=s,t(e)),typeof s=="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(t=s,()=>{t=()=>null}),getTimeoutController:()=>r}}class XX{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=t?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function ZX(){return QX(new XX)}var JX=L.createContext(ZX);function eZ(r,e){var t=L.useContext(JX);return L.useMemo(()=>e??t(r),[r,e,t])}var tZ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),uh={devToolsEnabled:!1,isSsr:tZ()},rZ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Wk={t:0},mS={t:1};function U1(r){var e=Sn(r,rZ),{isActive:t,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=e,f=t==="auto"?!uh.isSsr:t,h=eZ(e.animationId,e.animationManager),[p,g]=L.useState(f?Wk:mS),y=L.useRef(null);return L.useEffect(()=>{f||g(mS)},[f]),L.useEffect(()=>{if(!f||!n)return nh;var b=KX(Wk,mS,VX(a),i,g,h.getTimeoutController()),v=()=>{y.current=b()};return h.start([l,s,v,i,o]),()=>{h.stop(),y.current&&y.current(),o()}},[f,n,i,a,s,l,o,h]),c(p.t)}function j1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=L.useRef(_d(e)),n=L.useRef(r);return n.current!==r&&(t.current=_d(e),n.current=r),t.current}var nZ=["radius"],iZ=["radius"];function Vk(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(t),!0).forEach(function(n){aZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vk(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function aZ(r,e,t){return(e=sZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sZ(r){var e=oZ(r,"string");return typeof e=="symbol"?e:e+""}function oZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function zg(){return zg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zg.apply(null,arguments)}function Xk(r,e){if(r==null)return{};var t,n,i=lZ(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function lZ(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Zk=(r,e,t,n,i)=>{var a=Math.min(Math.abs(t)/2,Math.abs(n)/2),s=n>=0?1:-1,o=t>=0?1:-1,l=n>=0&&t>=0||n<0&&t<0?1:0,c;if(a>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>a?a:i[h];c="M".concat(r,",").concat(e+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(r+o*f[0],",").concat(e)),c+="L ".concat(r+t-o*f[1],",").concat(e),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(r+t,",").concat(e+s*f[1])),c+="L ".concat(r+t,",").concat(e+n-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(r+t-o*f[2],",").concat(e+n)),c+="L ".concat(r+o*f[3],",").concat(e+n),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(r,",").concat(e+n-s*f[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var g=Math.min(a,i);c="M ".concat(r,",").concat(e+s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+o*g,",").concat(e,`
            L `).concat(r+t-o*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+t,",").concat(e+s*g,`
            L `).concat(r+t,",").concat(e+n-s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r+t-o*g,",").concat(e+n,`
            L `).concat(r+o*g,",").concat(e+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(r,",").concat(e+n-s*g," Z")}else c="M ".concat(r,",").concat(e," h ").concat(t," v ").concat(n," h ").concat(-t," Z");return c},Jk={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V3=r=>{var e=Sn(r,Jk),t=L.useRef(null),[n,i]=L.useState(-1);L.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var z=t.current.getTotalLength();z&&i(z)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:c,className:f}=e,{animationEasing:h,animationDuration:p,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:b}=e,v=L.useRef(o),E=L.useRef(l),S=L.useRef(a),w=L.useRef(s),A=L.useMemo(()=>({x:a,y:s,width:o,height:l,radius:c}),[a,s,o,l,c]),T=j1(A,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var I=mt("recharts-rectangle",f);if(!b){var D=Pn(e),{radius:P}=D,k=Xk(D,nZ);return L.createElement("path",zg({},k,{radius:typeof c=="number"?c:void 0,className:I,d:Zk(a,s,o,l,c)}))}var M=v.current,B=E.current,C=S.current,W=w.current,Y="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),$=Y3(["strokeDasharray"],p,typeof h=="string"?h:Jk.animationEasing);return L.createElement(U1,{animationId:T,key:T,canBegin:n>0,duration:p,easing:h,isActive:b,begin:g},z=>{var K=Vn(M,o,z),Z=Vn(B,l,z),X=Vn(C,a,z),H=Vn(W,s,z);t.current&&(v.current=K,E.current=Z,S.current=X,w.current=H);var G;y?z>0?G={transition:$,strokeDasharray:q}:G={strokeDasharray:Y}:G={strokeDasharray:q};var J=Pn(e),{radius:fe}=J,se=Xk(J,iZ);return L.createElement("path",zg({},se,{radius:typeof c=="number"?c:void 0,className:I,d:Zk(X,H,K,Z,c),ref:t,style:Qk(Qk({},G),e.style)}))})};function eM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(t),!0).forEach(function(n){uZ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):eM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function uZ(r,e,t){return(e=cZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cZ(r){var e=fZ(r,"string");return typeof e=="symbol"?e:e+""}function fZ(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var qg=Math.PI/180,dZ=r=>r*180/Math.PI,fn=(r,e,t,n)=>({x:r+Math.cos(-qg*n)*t,y:e+Math.sin(-qg*n)*t}),hZ=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},pZ=(r,e)=>{var{x:t,y:n}=r,{x:i,y:a}=e;return Math.sqrt((t-i)**2+(n-a)**2)},mZ=(r,e)=>{var{x:t,y:n}=r,{cx:i,cy:a}=e,s=pZ({x:t,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(t-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:dZ(l),angleInRadian:l}},gZ=r=>{var{startAngle:e,endAngle:t}=r,n=Math.floor(e/360),i=Math.floor(t/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:t-a*360}},yZ=(r,e)=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),a=Math.floor(n/360),s=Math.min(i,a);return r+s*360},vZ=(r,e)=>{var{chartX:t,chartY:n}=r,{radius:i,angle:a}=mZ({x:t,y:n},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:c}=gZ(e),f=a,h;if(l<=c){for(;f>c;)f-=360;for(;f<l;)f+=360;h=f>=l&&f<=c}else{for(;f>l;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=l}return h?tM(tM({},e),{},{radius:i,angle:yZ(f,e)}):null};function Q3(r){var{cx:e,cy:t,radius:n,startAngle:i,endAngle:a}=r,s=fn(e,t,n,i),o=fn(e,t,n,a);return{points:[s,o],cx:e,cy:t,radius:n,startAngle:i,endAngle:a}}function Z_(){return Z_=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Z_.apply(null,arguments)}var bZ=(r,e)=>{var t=Gi(e-r),n=Math.min(Math.abs(e-r),359.999);return t*n},Jp=r=>{var{cx:e,cy:t,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=r,c=o*(s?1:-1)+n,f=Math.asin(o/c)/qg,h=l?i:i+a*f,p=fn(e,t,c,h),g=fn(e,t,n,h),y=l?i-a*f:i,b=fn(e,t,c*Math.cos(f*qg),y);return{center:p,circleTangency:g,lineTangency:b,theta:f}},X3=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=r,o=bZ(a,s),l=a+o,c=fn(e,t,i,a),f=fn(e,t,i,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var p=fn(e,t,n,a),g=fn(e,t,n,l);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(e,",").concat(t," Z");return h},xZ=r=>{var{cx:e,cy:t,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=r,f=Gi(c-l),{circleTangency:h,lineTangency:p,theta:g}=Jp({cx:e,cy:t,radius:i,angle:l,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:y,lineTangency:b,theta:v}=Jp({cx:e,cy:t,radius:i,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:o}),E=o?Math.abs(l-c):Math.abs(l-c)-g-v;if(E<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):X3({cx:e,cy:t,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var S="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:A,theta:T}=Jp({cx:e,cy:t,radius:n,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:I,lineTangency:D,theta:P}=Jp({cx:e,cy:t,radius:n,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-T-P;if(k<0&&a===0)return"".concat(S,"L").concat(e,",").concat(t,"Z");S+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(f>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(e,",").concat(t,"Z");return S},SZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Z3=r=>{var e=Sn(r,SZ),{cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f,className:h}=e;if(a<i||c===f)return null;var p=mt("recharts-sector",h),g=a-i,y=Wo(s,g,0,!0),b;return y>0&&Math.abs(c-f)<360?b=xZ({cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(y,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f}):b=X3({cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:f}),L.createElement("path",Z_({},Pn(e),{className:p,d:b}))};function EZ(r,e,t){if(r==="horizontal")return[{x:e.x,y:t.top},{x:e.x,y:t.top+t.height}];if(r==="vertical")return[{x:t.left,y:e.y},{x:t.left+t.width,y:e.y}];if(Lj(e)){if(r==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,l=fn(n,i,a,o),c=fn(n,i,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Q3(e)}}var gS={},yS={},vS={},rM;function wZ(){return rM||(rM=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=zj();function t(n){return e.isSymbol(n)?NaN:Number(n)}r.toNumber=t})(vS)),vS}var nM;function _Z(){return nM||(nM=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=wZ();function t(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}r.toFinite=t})(yS)),yS}var iM;function TZ(){return iM||(iM=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=qj(),t=_Z();function n(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=t.toFinite(i),a===void 0?(a=i,i=0):a=t.toFinite(a),s=s===void 0?i<a?1:-1:t.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=s;return l}r.range=n})(gS)),gS}var bS,aM;function AZ(){return aM||(aM=1,bS=TZ().range),bS}var DZ=AZ();const J3=Ya(DZ);function Go(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function OZ(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function $1(r){let e,t,n;r.length!==2?(e=Go,t=(o,l)=>Go(r(o),l),n=(o,l)=>r(o)-l):(e=r===Go||r===OZ?r:IZ,t=r,n=r);function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;t(o[h],l)<0?c=h+1:f=h}while(c<f)}return c}function a(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;t(o[h],l)<=0?c=h+1:f=h}while(c<f)}return c}function s(o,l,c=0,f=o.length){const h=i(o,l,c,f-1);return h>c&&n(o[h-1],l)>-n(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function IZ(){return 0}function e$(r){return r===null?NaN:+r}function*CZ(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const RZ=$1(Go),ch=RZ.right;$1(e$).center;class sM extends Map{constructor(e,t=kZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(oM(this,e))}has(e){return super.has(oM(this,e))}set(e,t){return super.set(PZ(this,e),t)}delete(e){return super.delete(LZ(this,e))}}function oM({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):t}function PZ({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function LZ({_intern:r,_key:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function kZ(r){return r!==null&&typeof r=="object"?r.valueOf():r}function MZ(r=Go){if(r===Go)return t$;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const n=r(e,t);return n||n===0?n:(r(t,t)===0)-(r(e,e)===0)}}function t$(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const NZ=Math.sqrt(50),FZ=Math.sqrt(10),BZ=Math.sqrt(2);function Wg(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=NZ?10:a>=FZ?5:a>=BZ?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(r*c),l=Math.round(e*c),o/c<r&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(r/c),l=Math.round(e/c),o*c<r&&++o,l*c>e&&--l),l<o&&.5<=t&&t<2?Wg(r,e,t*2):[o,l,c]}function J_(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,a,s]=n?Wg(e,r,t):Wg(r,e,t);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function eT(r,e,t){return e=+e,r=+r,t=+t,Wg(r,e,t)[2]}function tT(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?eT(e,r,t):eT(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function lM(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function uM(r,e){let t;for(const n of r)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);return t}function r$(r,e,t=0,n=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),n=Math.floor(Math.min(r.length-1,n)),!(t<=e&&e<=n))return r;for(i=i===void 0?t$:MZ(i);n>t;){if(n-t>600){const l=n-t+1,c=e-t+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(t,Math.floor(e-c*h/l+p)),y=Math.min(n,Math.floor(e+(l-c)*h/l+p));r$(r,e,g,y,i)}const a=r[e];let s=t,o=n;for(Xf(r,t,e),i(r[n],a)>0&&Xf(r,t,n);s<o;){for(Xf(r,s,o),++s,--o;i(r[s],a)<0;)++s;for(;i(r[o],a)>0;)--o}i(r[t],a)===0?Xf(r,t,o):(++o,Xf(r,o,n)),o<=e&&(t=o+1),e<=o&&(n=o-1)}return r}function Xf(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function UZ(r,e,t){if(r=Float64Array.from(CZ(r)),!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return uM(r);if(e>=1)return lM(r);var n,i=(n-1)*e,a=Math.floor(i),s=lM(r$(r,a).subarray(0,a+1)),o=uM(r.subarray(a+1));return s+(o-s)*(i-a)}}function jZ(r,e,t=e$){if(!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(r[0],0,r);if(e>=1)return+t(r[n-1],n-1,r);var n,i=(n-1)*e,a=Math.floor(i),s=+t(r[a],a,r),o=+t(r[a+1],a+1,r);return s+(o-s)*(i-a)}}function $Z(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,a=new Array(i);++n<i;)a[n]=r+n*t;return a}function Vi(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Xs(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const rT=Symbol("implicit");function H1(){var r=new sM,e=[],t=[],n=rT;function i(a){let s=r.get(a);if(s===void 0){if(n!==rT)return n;r.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],r=new sM;for(const s of a)r.has(s)||r.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return H1(e,t).unknown(n)},Vi.apply(i,arguments),i}function G1(){var r=H1().unknown(void 0),e=r.domain,t=r.range,n=0,i=1,a,s,o=!1,l=0,c=0,f=.5;delete r.unknown;function h(){var p=e().length,g=i<n,y=g?i:n,b=g?n:i;a=(b-y)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),y+=(b-y-a*(p-l))*f,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var v=$Z(p).map(function(E){return y+a*E});return t(g?v.reverse():v)}return r.domain=function(p){return arguments.length?(e(p),h()):e()},r.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,h()):[n,i]},r.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,h()},r.bandwidth=function(){return s},r.step=function(){return a},r.round=function(p){return arguments.length?(o=!!p,h()):o},r.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),h()):l},r.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),h()):l},r.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},r.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),h()):f},r.copy=function(){return G1(e(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},Vi.apply(h(),arguments)}function n$(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return n$(e())},r}function HZ(){return n$(G1.apply(null,arguments).paddingInner(1))}function K1(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function i$(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function fh(){}var Pd=.7,Vg=1/Pd,mc="\\s*([+-]?\\d+)\\s*",Ld="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GZ=/^#([0-9a-f]{3,8})$/,KZ=new RegExp(`^rgb\\(${mc},${mc},${mc}\\)$`),YZ=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),zZ=new RegExp(`^rgba\\(${mc},${mc},${mc},${Ld}\\)$`),qZ=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${Ld}\\)$`),WZ=new RegExp(`^hsl\\(${Ld},${Ma},${Ma}\\)$`),VZ=new RegExp(`^hsla\\(${Ld},${Ma},${Ma},${Ld}\\)$`),cM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K1(fh,kd,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:fM,formatHex:fM,formatHex8:QZ,formatHsl:XZ,formatRgb:dM,toString:dM});function fM(){return this.rgb().formatHex()}function QZ(){return this.rgb().formatHex8()}function XZ(){return a$(this).formatHsl()}function dM(){return this.rgb().formatRgb()}function kd(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=GZ.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?hM(e):t===3?new Xn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?em(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?em(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=KZ.exec(r))?new Xn(e[1],e[2],e[3],1):(e=YZ.exec(r))?new Xn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zZ.exec(r))?em(e[1],e[2],e[3],e[4]):(e=qZ.exec(r))?em(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=WZ.exec(r))?gM(e[1],e[2]/100,e[3]/100,1):(e=VZ.exec(r))?gM(e[1],e[2]/100,e[3]/100,e[4]):cM.hasOwnProperty(r)?hM(cM[r]):r==="transparent"?new Xn(NaN,NaN,NaN,0):null}function hM(r){return new Xn(r>>16&255,r>>8&255,r&255,1)}function em(r,e,t,n){return n<=0&&(r=e=t=NaN),new Xn(r,e,t,n)}function ZZ(r){return r instanceof fh||(r=kd(r)),r?(r=r.rgb(),new Xn(r.r,r.g,r.b,r.opacity)):new Xn}function nT(r,e,t,n){return arguments.length===1?ZZ(r):new Xn(r,e,t,n??1)}function Xn(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}K1(Xn,nT,i$(fh,{brighter(r){return r=r==null?Vg:Math.pow(Vg,r),new Xn(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Pd:Math.pow(Pd,r),new Xn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Xn(Kl(this.r),Kl(this.g),Kl(this.b),Qg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pM,formatHex:pM,formatHex8:JZ,formatRgb:mM,toString:mM}));function pM(){return`#${Ml(this.r)}${Ml(this.g)}${Ml(this.b)}`}function JZ(){return`#${Ml(this.r)}${Ml(this.g)}${Ml(this.b)}${Ml((isNaN(this.opacity)?1:this.opacity)*255)}`}function mM(){const r=Qg(this.opacity);return`${r===1?"rgb(":"rgba("}${Kl(this.r)}, ${Kl(this.g)}, ${Kl(this.b)}${r===1?")":`, ${r})`}`}function Qg(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Kl(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Ml(r){return r=Kl(r),(r<16?"0":"")+r.toString(16)}function gM(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new aa(r,e,t,n)}function a$(r){if(r instanceof aa)return new aa(r.h,r.s,r.l,r.opacity);if(r instanceof fh||(r=kd(r)),!r)return new aa;if(r instanceof aa)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(t-n)/o+(t<n)*6:t===a?s=(n-e)/o+2:s=(e-t)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new aa(s,o,l,r.opacity)}function eJ(r,e,t,n){return arguments.length===1?a$(r):new aa(r,e,t,n??1)}function aa(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}K1(aa,eJ,i$(fh,{brighter(r){return r=r==null?Vg:Math.pow(Vg,r),new aa(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Pd:Math.pow(Pd,r),new aa(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Xn(xS(r>=240?r-240:r+120,i,n),xS(r,i,n),xS(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new aa(yM(this.h),tm(this.s),tm(this.l),Qg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Qg(this.opacity);return`${r===1?"hsl(":"hsla("}${yM(this.h)}, ${tm(this.s)*100}%, ${tm(this.l)*100}%${r===1?")":`, ${r})`}`}}));function yM(r){return r=(r||0)%360,r<0?r+360:r}function tm(r){return Math.max(0,Math.min(1,r||0))}function xS(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const Y1=r=>()=>r;function tJ(r,e){return function(t){return r+t*e}}function rJ(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function nJ(r){return(r=+r)==1?s$:function(e,t){return t-e?rJ(e,t,r):Y1(isNaN(e)?t:e)}}function s$(r,e){var t=e-r;return t?tJ(r,t):Y1(isNaN(r)?e:r)}const vM=(function r(e){var t=nJ(e);function n(i,a){var s=t((i=nT(i)).r,(a=nT(a)).r),o=t(i.g,a.g),l=t(i.b,a.b),c=s$(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return n.gamma=r,n})(1);function iJ(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function aJ(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function sJ(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),s;for(s=0;s<n;++s)i[s]=zc(r[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function oJ(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function Xg(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function lJ(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=zc(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var iT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SS=new RegExp(iT.source,"g");function uJ(r){return function(){return r}}function cJ(r){return function(e){return r(e)+""}}function fJ(r,e){var t=iT.lastIndex=SS.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(r=r+"",e=e+"";(n=iT.exec(r))&&(i=SS.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Xg(n,i)})),t=SS.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?cJ(l[0].x):uJ(e):(e=l.length,function(c){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(c);return o.join("")})}function zc(r,e){var t=typeof e,n;return e==null||t==="boolean"?Y1(e):(t==="number"?Xg:t==="string"?(n=kd(e))?(e=n,vM):fJ:e instanceof kd?vM:e instanceof Date?oJ:aJ(e)?iJ:Array.isArray(e)?sJ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lJ:Xg)(r,e)}function z1(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function dJ(r,e){e===void 0&&(e=r,r=zc);for(var t=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);t<n;)a[t]=r(i,i=e[++t]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function hJ(r){return function(){return r}}function Zg(r){return+r}var bM=[0,1];function On(r){return r}function aT(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:hJ(isNaN(e)?NaN:.5)}function pJ(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function mJ(r,e,t){var n=r[0],i=r[1],a=e[0],s=e[1];return i<n?(n=aT(i,n),a=t(s,a)):(n=aT(n,i),a=t(a,s)),function(o){return a(n(o))}}function gJ(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=aT(r[s],r[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var l=ch(r,o,1,n)-1;return a[l](i[l](o))}}function dh(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function yy(){var r=bM,e=bM,t=zc,n,i,a,s=On,o,l,c;function f(){var p=Math.min(r.length,e.length);return s!==On&&(s=pJ(r[0],r[p-1])),o=p>2?gJ:mJ,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(r.map(n),e,t)))(n(s(p)))}return h.invert=function(p){return s(i((c||(c=o(e,r.map(n),Xg)))(p)))},h.domain=function(p){return arguments.length?(r=Array.from(p,Zg),f()):r.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),t=z1,f()},h.clamp=function(p){return arguments.length?(s=p?!0:On,f()):s!==On},h.interpolate=function(p){return arguments.length?(t=p,f()):t},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,g){return n=p,i=g,f()}}function q1(){return yy()(On,On)}function yJ(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Jg(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function Dc(r){return r=Jg(Math.abs(r)),r?r[1]:NaN}function vJ(r,e){return function(t,n){for(var i=t.length,a=[],s=0,o=r[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(t.substring(i-=o,i+o)),!((l+=o+1)>n));)o=r[s=(s+1)%r.length];return a.reverse().join(e)}}function bJ(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var xJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Md(r){if(!(e=xJ.exec(r)))throw new Error("invalid format: "+r);var e;return new W1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Md.prototype=W1.prototype;function W1(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}W1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SJ(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var o$;function EJ(r,e){var t=Jg(r,e);if(!t)return r+"";var n=t[0],i=t[1],a=i-(o$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Jg(r,Math.max(0,e+a-1))[0]}function xM(r,e){var t=Jg(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const SM={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:yJ,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>xM(r*100,e),r:xM,s:EJ,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function EM(r){return r}var wM=Array.prototype.map,_M=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wJ(r){var e=r.grouping===void 0||r.thousands===void 0?EM:vJ(wM.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?EM:bJ(wM.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"":r.minus+"",l=r.nan===void 0?"NaN":r.nan+"";function c(h){h=Md(h);var p=h.fill,g=h.align,y=h.sign,b=h.symbol,v=h.zero,E=h.width,S=h.comma,w=h.precision,A=h.trim,T=h.type;T==="n"?(S=!0,T="g"):SM[T]||(w===void 0&&(w=12),A=!0,T="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var I=b==="$"?t:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",D=b==="$"?n:/[%p]/.test(T)?s:"",P=SM[T],k=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(B){var C=I,W=D,Y,q,$;if(T==="c")W=P(B)+W,B="";else{B=+B;var z=B<0||1/B<0;if(B=isNaN(B)?l:P(Math.abs(B),w),A&&(B=SJ(B)),z&&+B==0&&y!=="+"&&(z=!1),C=(z?y==="("?y:o:y==="-"||y==="("?"":y)+C,W=(T==="s"?_M[8+o$/3]:"")+W+(z&&y==="("?")":""),k){for(Y=-1,q=B.length;++Y<q;)if($=B.charCodeAt(Y),48>$||$>57){W=($===46?i+B.slice(Y+1):B.slice(Y))+W,B=B.slice(0,Y);break}}}S&&!v&&(B=e(B,1/0));var K=C.length+B.length+W.length,Z=K<E?new Array(E-K+1).join(p):"";switch(S&&v&&(B=e(Z+B,Z.length?E-W.length:1/0),Z=""),g){case"<":B=C+B+W+Z;break;case"=":B=C+Z+B+W;break;case"^":B=Z.slice(0,K=Z.length>>1)+C+B+W+Z.slice(K);break;default:B=Z+C+B+W;break}return a(B)}return M.toString=function(){return h+""},M}function f(h,p){var g=c((h=Md(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Dc(p)/3)))*3,b=Math.pow(10,-y),v=_M[8+y/3];return function(E){return g(b*E)+v}}return{format:c,formatPrefix:f}}var rm,V1,l$;_J({thousands:",",grouping:[3],currency:["$",""]});function _J(r){return rm=wJ(r),V1=rm.format,l$=rm.formatPrefix,rm}function TJ(r){return Math.max(0,-Dc(Math.abs(r)))}function AJ(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dc(e)/3)))*3-Dc(Math.abs(r)))}function DJ(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,Dc(e)-Dc(r))+1}function u$(r,e,t,n){var i=tT(r,e,t),a;switch(n=Md(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(a=AJ(i,s))&&(n.precision=a),l$(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=DJ(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=TJ(i))&&(n.precision=a-(n.type==="%")*2);break}}return V1(n)}function nl(r){var e=r.domain;return r.ticks=function(t){var n=e();return J_(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return u$(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,f=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);f-- >0;){if(c=eT(s,o,t),c===l)return n[i]=s,n[a]=o,e(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return r},r}function c$(){var r=q1();return r.copy=function(){return dh(r,c$())},Vi.apply(r,arguments),nl(r)}function f$(r){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(r=Array.from(n,Zg),t):r.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return f$(r).unknown(e)},r=arguments.length?Array.from(r,Zg):[0,1],nl(t)}function d$(r,e){r=r.slice();var t=0,n=r.length-1,i=r[t],a=r[n],s;return a<i&&(s=t,t=n,n=s,s=i,i=a,a=s),r[t]=e.floor(i),r[n]=e.ceil(a),r}function TM(r){return Math.log(r)}function AM(r){return Math.exp(r)}function OJ(r){return-Math.log(-r)}function IJ(r){return-Math.exp(-r)}function CJ(r){return isFinite(r)?+("1e"+r):r<0?0:r}function RJ(r){return r===10?CJ:r===Math.E?Math.exp:e=>Math.pow(r,e)}function PJ(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function DM(r){return(e,t)=>-r(-e,t)}function Q1(r){const e=r(TM,AM),t=e.domain;let n=10,i,a;function s(){return i=PJ(n),a=RJ(n),t()[0]<0?(i=DM(i),a=DM(a),r(OJ,IJ)):r(TM,AM),e}return e.base=function(o){return arguments.length?(n=+o,s()):n},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const l=t();let c=l[0],f=l[l.length-1];const h=f<c;h&&([c,f]=[f,c]);let p=i(c),g=i(f),y,b;const v=o==null?10:+o;let E=[];if(!(n%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<n;++y)if(b=p<0?y/a(-p):y*a(p),!(b<c)){if(b>f)break;E.push(b)}}else for(;p<=g;++p)for(y=n-1;y>=1;--y)if(b=p>0?y/a(-p):y*a(p),!(b<c)){if(b>f)break;E.push(b)}E.length*2<v&&(E=J_(c,f,v))}else E=J_(p,g,Math.min(g-p,v)).map(a);return h?E.reverse():E},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Md(l)).precision==null&&(l.trim=!0),l=V1(l)),o===1/0)return l;const c=Math.max(1,n*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*n<n-.5&&(h*=n),h<=c?l(f):""}},e.nice=()=>t(d$(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function h$(){const r=Q1(yy()).domain([1,10]);return r.copy=()=>dh(r,h$()).base(r.base()),Vi.apply(r,arguments),r}function OM(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function IM(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function X1(r){var e=1,t=r(OM(e),IM(e));return t.constant=function(n){return arguments.length?r(OM(e=+n),IM(e)):e},nl(t)}function p$(){var r=X1(yy());return r.copy=function(){return dh(r,p$()).constant(r.constant())},Vi.apply(r,arguments)}function CM(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function LJ(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function kJ(r){return r<0?-r*r:r*r}function Z1(r){var e=r(On,On),t=1;function n(){return t===1?r(On,On):t===.5?r(LJ,kJ):r(CM(t),CM(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,n()):t},nl(e)}function J1(){var r=Z1(yy());return r.copy=function(){return dh(r,J1()).exponent(r.exponent())},Vi.apply(r,arguments),r}function MJ(){return J1.apply(null,arguments).exponent(.5)}function RM(r){return Math.sign(r)*r*r}function NJ(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function m$(){var r=q1(),e=[0,1],t=!1,n;function i(a){var s=NJ(r(a));return isNaN(s)?n:t?Math.round(s):s}return i.invert=function(a){return r.invert(RM(a))},i.domain=function(a){return arguments.length?(r.domain(a),i):r.domain()},i.range=function(a){return arguments.length?(r.range((e=Array.from(a,Zg)).map(RM)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(r.clamp(a),i):r.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return m$(r.domain(),e).round(t).clamp(r.clamp()).unknown(n)},Vi.apply(i,arguments),nl(i)}function g$(){var r=[],e=[],t=[],n;function i(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=jZ(r,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:e[ch(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:r[0],o<t.length?t[o]:r[r.length-1]]},a.domain=function(s){if(!arguments.length)return r.slice();r=[];for(let o of s)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(Go),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return t.slice()},a.copy=function(){return g$().domain(r).range(e).unknown(n)},Vi.apply(a,arguments)}function y$(){var r=0,e=1,t=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[ch(n,l,0,t)]:a}function o(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*r)/(t+1);return s}return s.domain=function(l){return arguments.length?([r,e]=l,r=+r,e=+e,o()):[r,e]},s.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[r,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return y$().domain([r,e]).range(i).unknown(a)},Vi.apply(nl(s),arguments)}function v$(){var r=[.5],e=[0,1],t,n=1;function i(a){return a!=null&&a<=a?e[ch(r,a,0,n)]:t}return i.domain=function(a){return arguments.length?(r=Array.from(a),n=Math.min(r.length,e.length-1),i):r.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(r.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[r[s-1],r[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return v$().domain(r).range(e).unknown(t)},Vi.apply(i,arguments)}const ES=new Date,wS=new Date;function $r(r,e,t,n){function i(a){return r(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(r(a=new Date(+a)),a),i.ceil=a=>(r(a=new Date(a-1)),e(a,1),r(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),e(a,o),r(a);while(c<a&&a<s);return l},i.filter=a=>$r(s=>{if(s>=s)for(;r(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(ES.setTime(+a),wS.setTime(+s),r(ES),r(wS),Math.floor(t(ES,wS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const e0=$r(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);e0.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?$r(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):e0);e0.range;const As=1e3,Ki=As*60,Ds=Ki*60,js=Ds*24,eA=js*7,PM=js*30,_S=js*365,Nl=$r(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*As)},(r,e)=>(e-r)/As,r=>r.getUTCSeconds());Nl.range;const tA=$r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*As)},(r,e)=>{r.setTime(+r+e*Ki)},(r,e)=>(e-r)/Ki,r=>r.getMinutes());tA.range;const rA=$r(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*Ki)},(r,e)=>(e-r)/Ki,r=>r.getUTCMinutes());rA.range;const nA=$r(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*As-r.getMinutes()*Ki)},(r,e)=>{r.setTime(+r+e*Ds)},(r,e)=>(e-r)/Ds,r=>r.getHours());nA.range;const iA=$r(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*Ds)},(r,e)=>(e-r)/Ds,r=>r.getUTCHours());iA.range;const hh=$r(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Ki)/js,r=>r.getDate()-1);hh.range;const vy=$r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/js,r=>r.getUTCDate()-1);vy.range;const b$=$r(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/js,r=>Math.floor(r/js));b$.range;function ou(r){return $r(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ki)/eA)}const by=ou(0),t0=ou(1),FJ=ou(2),BJ=ou(3),Oc=ou(4),UJ=ou(5),jJ=ou(6);by.range;t0.range;FJ.range;BJ.range;Oc.range;UJ.range;jJ.range;function lu(r){return $r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/eA)}const xy=lu(0),r0=lu(1),$J=lu(2),HJ=lu(3),Ic=lu(4),GJ=lu(5),KJ=lu(6);xy.range;r0.range;$J.range;HJ.range;Ic.range;GJ.range;KJ.range;const aA=$r(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());aA.range;const sA=$r(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());sA.range;const $s=$r(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());$s.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:$r(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});$s.range;const Hs=$r(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());Hs.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:$r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});Hs.range;function x$(r,e,t,n,i,a){const s=[[Nl,1,As],[Nl,5,5*As],[Nl,15,15*As],[Nl,30,30*As],[a,1,Ki],[a,5,5*Ki],[a,15,15*Ki],[a,30,30*Ki],[i,1,Ds],[i,3,3*Ds],[i,6,6*Ds],[i,12,12*Ds],[n,1,js],[n,2,2*js],[t,1,eA],[e,1,PM],[e,3,3*PM],[r,1,_S]];function o(c,f,h){const p=f<c;p&&([c,f]=[f,c]);const g=h&&typeof h.range=="function"?h:l(c,f,h),y=g?g.range(c,+f+1):[];return p?y.reverse():y}function l(c,f,h){const p=Math.abs(f-c)/h,g=$1(([,,v])=>v).right(s,p);if(g===s.length)return r.every(tT(c/_S,f/_S,h));if(g===0)return e0.every(Math.max(tT(c,f,h),1));const[y,b]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return y.every(b)}return[o,l]}const[YJ,zJ]=x$(Hs,sA,xy,b$,iA,rA),[qJ,WJ]=x$($s,aA,by,hh,nA,tA);function TS(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function AS(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Zf(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function VJ(r){var e=r.dateTime,t=r.date,n=r.time,i=r.periods,a=r.days,s=r.shortDays,o=r.months,l=r.shortMonths,c=Jf(i),f=ed(i),h=Jf(a),p=ed(a),g=Jf(s),y=ed(s),b=Jf(o),v=ed(o),E=Jf(l),S=ed(l),w={a:z,A:K,b:Z,B:X,c:null,d:BM,e:BM,f:vee,g:Oee,G:Cee,H:mee,I:gee,j:yee,L:S$,m:bee,M:xee,p:H,q:G,Q:$M,s:HM,S:See,u:Eee,U:wee,V:_ee,w:Tee,W:Aee,x:null,X:null,y:Dee,Y:Iee,Z:Ree,"%":jM},A={a:J,A:fe,b:se,B:be,c:null,d:UM,e:UM,f:Mee,g:Yee,G:qee,H:Pee,I:Lee,j:kee,L:w$,m:Nee,M:Fee,p:oe,q:re,Q:$M,s:HM,S:Bee,u:Uee,U:jee,V:$ee,w:Hee,W:Gee,x:null,X:null,y:Kee,Y:zee,Z:Wee,"%":jM},T={a:M,A:B,b:C,B:W,c:Y,d:NM,e:NM,f:fee,g:MM,G:kM,H:FM,I:FM,j:oee,L:cee,m:see,M:lee,p:k,q:aee,Q:hee,s:pee,S:uee,u:eee,U:tee,V:ree,w:JJ,W:nee,x:q,X:$,y:MM,Y:kM,Z:iee,"%":dee};w.x=I(t,w),w.X=I(n,w),w.c=I(e,w),A.x=I(t,A),A.X=I(n,A),A.c=I(e,A);function I(te,le){return function(ce){var ne=[],Ce=-1,Se=0,ie=te.length,ae,ye,Ie;for(ce instanceof Date||(ce=new Date(+ce));++Ce<ie;)te.charCodeAt(Ce)===37&&(ne.push(te.slice(Se,Ce)),(ye=LM[ae=te.charAt(++Ce)])!=null?ae=te.charAt(++Ce):ye=ae==="e"?" ":"0",(Ie=le[ae])&&(ae=Ie(ce,ye)),ne.push(ae),Se=Ce+1);return ne.push(te.slice(Se,Ce)),ne.join("")}}function D(te,le){return function(ce){var ne=Zf(1900,void 0,1),Ce=P(ne,te,ce+="",0),Se,ie;if(Ce!=ce.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(le&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Se=AS(Zf(ne.y,0,1)),ie=Se.getUTCDay(),Se=ie>4||ie===0?r0.ceil(Se):r0(Se),Se=vy.offset(Se,(ne.V-1)*7),ne.y=Se.getUTCFullYear(),ne.m=Se.getUTCMonth(),ne.d=Se.getUTCDate()+(ne.w+6)%7):(Se=TS(Zf(ne.y,0,1)),ie=Se.getDay(),Se=ie>4||ie===0?t0.ceil(Se):t0(Se),Se=hh.offset(Se,(ne.V-1)*7),ne.y=Se.getFullYear(),ne.m=Se.getMonth(),ne.d=Se.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),ie="Z"in ne?AS(Zf(ne.y,0,1)).getUTCDay():TS(Zf(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(ie+5)%7:ne.w+ne.U*7-(ie+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,AS(ne)):TS(ne)}}function P(te,le,ce,ne){for(var Ce=0,Se=le.length,ie=ce.length,ae,ye;Ce<Se;){if(ne>=ie)return-1;if(ae=le.charCodeAt(Ce++),ae===37){if(ae=le.charAt(Ce++),ye=T[ae in LM?le.charAt(Ce++):ae],!ye||(ne=ye(te,ce,ne))<0)return-1}else if(ae!=ce.charCodeAt(ne++))return-1}return ne}function k(te,le,ce){var ne=c.exec(le.slice(ce));return ne?(te.p=f.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function M(te,le,ce){var ne=g.exec(le.slice(ce));return ne?(te.w=y.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function B(te,le,ce){var ne=h.exec(le.slice(ce));return ne?(te.w=p.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function C(te,le,ce){var ne=E.exec(le.slice(ce));return ne?(te.m=S.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function W(te,le,ce){var ne=b.exec(le.slice(ce));return ne?(te.m=v.get(ne[0].toLowerCase()),ce+ne[0].length):-1}function Y(te,le,ce){return P(te,e,le,ce)}function q(te,le,ce){return P(te,t,le,ce)}function $(te,le,ce){return P(te,n,le,ce)}function z(te){return s[te.getDay()]}function K(te){return a[te.getDay()]}function Z(te){return l[te.getMonth()]}function X(te){return o[te.getMonth()]}function H(te){return i[+(te.getHours()>=12)]}function G(te){return 1+~~(te.getMonth()/3)}function J(te){return s[te.getUTCDay()]}function fe(te){return a[te.getUTCDay()]}function se(te){return l[te.getUTCMonth()]}function be(te){return o[te.getUTCMonth()]}function oe(te){return i[+(te.getUTCHours()>=12)]}function re(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var le=I(te+="",w);return le.toString=function(){return te},le},parse:function(te){var le=D(te+="",!1);return le.toString=function(){return te},le},utcFormat:function(te){var le=I(te+="",A);return le.toString=function(){return te},le},utcParse:function(te){var le=D(te+="",!0);return le.toString=function(){return te},le}}}var LM={"-":"",_:" ",0:"0"},tn=/^\s*\d+/,QJ=/^%/,XJ=/[\\^$*+?|[\]().{}]/g;function Lt(r,e,t){var n=r<0?"-":"",i=(n?-r:r)+"",a=i.length;return n+(a<t?new Array(t-a+1).join(e)+i:i)}function ZJ(r){return r.replace(XJ,"\\$&")}function Jf(r){return new RegExp("^(?:"+r.map(ZJ).join("|")+")","i")}function ed(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function JJ(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.w=+n[0],t+n[0].length):-1}function eee(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.u=+n[0],t+n[0].length):-1}function tee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.U=+n[0],t+n[0].length):-1}function ree(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.V=+n[0],t+n[0].length):-1}function nee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.W=+n[0],t+n[0].length):-1}function kM(r,e,t){var n=tn.exec(e.slice(t,t+4));return n?(r.y=+n[0],t+n[0].length):-1}function MM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function iee(r,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function aee(r,e,t){var n=tn.exec(e.slice(t,t+1));return n?(r.q=n[0]*3-3,t+n[0].length):-1}function see(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.m=n[0]-1,t+n[0].length):-1}function NM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.d=+n[0],t+n[0].length):-1}function oee(r,e,t){var n=tn.exec(e.slice(t,t+3));return n?(r.m=0,r.d=+n[0],t+n[0].length):-1}function FM(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.H=+n[0],t+n[0].length):-1}function lee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.M=+n[0],t+n[0].length):-1}function uee(r,e,t){var n=tn.exec(e.slice(t,t+2));return n?(r.S=+n[0],t+n[0].length):-1}function cee(r,e,t){var n=tn.exec(e.slice(t,t+3));return n?(r.L=+n[0],t+n[0].length):-1}function fee(r,e,t){var n=tn.exec(e.slice(t,t+6));return n?(r.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function dee(r,e,t){var n=QJ.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function hee(r,e,t){var n=tn.exec(e.slice(t));return n?(r.Q=+n[0],t+n[0].length):-1}function pee(r,e,t){var n=tn.exec(e.slice(t));return n?(r.s=+n[0],t+n[0].length):-1}function BM(r,e){return Lt(r.getDate(),e,2)}function mee(r,e){return Lt(r.getHours(),e,2)}function gee(r,e){return Lt(r.getHours()%12||12,e,2)}function yee(r,e){return Lt(1+hh.count($s(r),r),e,3)}function S$(r,e){return Lt(r.getMilliseconds(),e,3)}function vee(r,e){return S$(r,e)+"000"}function bee(r,e){return Lt(r.getMonth()+1,e,2)}function xee(r,e){return Lt(r.getMinutes(),e,2)}function See(r,e){return Lt(r.getSeconds(),e,2)}function Eee(r){var e=r.getDay();return e===0?7:e}function wee(r,e){return Lt(by.count($s(r)-1,r),e,2)}function E$(r){var e=r.getDay();return e>=4||e===0?Oc(r):Oc.ceil(r)}function _ee(r,e){return r=E$(r),Lt(Oc.count($s(r),r)+($s(r).getDay()===4),e,2)}function Tee(r){return r.getDay()}function Aee(r,e){return Lt(t0.count($s(r)-1,r),e,2)}function Dee(r,e){return Lt(r.getFullYear()%100,e,2)}function Oee(r,e){return r=E$(r),Lt(r.getFullYear()%100,e,2)}function Iee(r,e){return Lt(r.getFullYear()%1e4,e,4)}function Cee(r,e){var t=r.getDay();return r=t>=4||t===0?Oc(r):Oc.ceil(r),Lt(r.getFullYear()%1e4,e,4)}function Ree(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function UM(r,e){return Lt(r.getUTCDate(),e,2)}function Pee(r,e){return Lt(r.getUTCHours(),e,2)}function Lee(r,e){return Lt(r.getUTCHours()%12||12,e,2)}function kee(r,e){return Lt(1+vy.count(Hs(r),r),e,3)}function w$(r,e){return Lt(r.getUTCMilliseconds(),e,3)}function Mee(r,e){return w$(r,e)+"000"}function Nee(r,e){return Lt(r.getUTCMonth()+1,e,2)}function Fee(r,e){return Lt(r.getUTCMinutes(),e,2)}function Bee(r,e){return Lt(r.getUTCSeconds(),e,2)}function Uee(r){var e=r.getUTCDay();return e===0?7:e}function jee(r,e){return Lt(xy.count(Hs(r)-1,r),e,2)}function _$(r){var e=r.getUTCDay();return e>=4||e===0?Ic(r):Ic.ceil(r)}function $ee(r,e){return r=_$(r),Lt(Ic.count(Hs(r),r)+(Hs(r).getUTCDay()===4),e,2)}function Hee(r){return r.getUTCDay()}function Gee(r,e){return Lt(r0.count(Hs(r)-1,r),e,2)}function Kee(r,e){return Lt(r.getUTCFullYear()%100,e,2)}function Yee(r,e){return r=_$(r),Lt(r.getUTCFullYear()%100,e,2)}function zee(r,e){return Lt(r.getUTCFullYear()%1e4,e,4)}function qee(r,e){var t=r.getUTCDay();return r=t>=4||t===0?Ic(r):Ic.ceil(r),Lt(r.getUTCFullYear()%1e4,e,4)}function Wee(){return"+0000"}function jM(){return"%"}function $M(r){return+r}function HM(r){return Math.floor(+r/1e3)}var Wu,T$,A$;Vee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vee(r){return Wu=VJ(r),T$=Wu.format,Wu.parse,A$=Wu.utcFormat,Wu.utcParse,Wu}function Qee(r){return new Date(r)}function Xee(r){return r instanceof Date?+r:+new Date(+r)}function oA(r,e,t,n,i,a,s,o,l,c){var f=q1(),h=f.invert,p=f.domain,g=c(".%L"),y=c(":%S"),b=c("%I:%M"),v=c("%I %p"),E=c("%a %d"),S=c("%b %d"),w=c("%B"),A=c("%Y");function T(I){return(l(I)<I?g:o(I)<I?y:s(I)<I?b:a(I)<I?v:n(I)<I?i(I)<I?E:S:t(I)<I?w:A)(I)}return f.invert=function(I){return new Date(h(I))},f.domain=function(I){return arguments.length?p(Array.from(I,Xee)):p().map(Qee)},f.ticks=function(I){var D=p();return r(D[0],D[D.length-1],I??10)},f.tickFormat=function(I,D){return D==null?T:c(D)},f.nice=function(I){var D=p();return(!I||typeof I.range!="function")&&(I=e(D[0],D[D.length-1],I??10)),I?p(d$(D,I)):f},f.copy=function(){return dh(f,oA(r,e,t,n,i,a,s,o,l,c))},f}function Zee(){return Vi.apply(oA(qJ,WJ,$s,aA,by,hh,nA,tA,Nl,T$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jee(){return Vi.apply(oA(YJ,zJ,Hs,sA,xy,vy,iA,rA,Nl,A$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sy(){var r=0,e=1,t,n,i,a,s=On,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-t)*i,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([r,e]=h,t=a(r=+r),n=a(e=+e),i=t===n?0:1/(n-t),c):[r,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s};function f(h){return function(p){var g,y;return arguments.length?([g,y]=p,s=h(g,y),c):[s(0),s(1)]}}return c.range=f(zc),c.rangeRound=f(z1),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return a=h,t=h(r),n=h(e),i=t===n?0:1/(n-t),c}}function il(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function D$(){var r=nl(Sy()(On));return r.copy=function(){return il(r,D$())},Xs.apply(r,arguments)}function O$(){var r=Q1(Sy()).domain([1,10]);return r.copy=function(){return il(r,O$()).base(r.base())},Xs.apply(r,arguments)}function I$(){var r=X1(Sy());return r.copy=function(){return il(r,I$()).constant(r.constant())},Xs.apply(r,arguments)}function lA(){var r=Z1(Sy());return r.copy=function(){return il(r,lA()).exponent(r.exponent())},Xs.apply(r,arguments)}function ete(){return lA.apply(null,arguments).exponent(.5)}function C$(){var r=[],e=On;function t(n){if(n!=null&&!isNaN(n=+n))return e((ch(r,n,1)-1)/(r.length-1))}return t.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let i of n)i!=null&&!isNaN(i=+i)&&r.push(i);return r.sort(Go),t},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.range=function(){return r.map((n,i)=>e(i/(r.length-1)))},t.quantiles=function(n){return Array.from({length:n+1},(i,a)=>UZ(r,a/n))},t.copy=function(){return C$(e).domain(r)},Xs.apply(t,arguments)}function Ey(){var r=0,e=.5,t=1,n=1,i,a,s,o,l,c=On,f,h=!1,p;function g(b){return isNaN(b=+b)?p:(b=.5+((b=+f(b))-a)*(n*b<n*a?o:l),c(h?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([r,e,t]=b,i=f(r=+r),a=f(e=+e),s=f(t=+t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g):[r,e,t]},g.clamp=function(b){return arguments.length?(h=!!b,g):h},g.interpolator=function(b){return arguments.length?(c=b,g):c};function y(b){return function(v){var E,S,w;return arguments.length?([E,S,w]=v,c=dJ(b,[E,S,w]),g):[c(0),c(.5),c(1)]}}return g.range=y(zc),g.rangeRound=y(z1),g.unknown=function(b){return arguments.length?(p=b,g):p},function(b){return f=b,i=b(r),a=b(e),s=b(t),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,g}}function R$(){var r=nl(Ey()(On));return r.copy=function(){return il(r,R$())},Xs.apply(r,arguments)}function P$(){var r=Q1(Ey()).domain([.1,1,10]);return r.copy=function(){return il(r,P$()).base(r.base())},Xs.apply(r,arguments)}function L$(){var r=X1(Ey());return r.copy=function(){return il(r,L$()).constant(r.constant())},Xs.apply(r,arguments)}function uA(){var r=Z1(Ey());return r.copy=function(){return il(r,uA()).exponent(r.exponent())},Xs.apply(r,arguments)}function tte(){return uA.apply(null,arguments).exponent(.5)}const fd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:G1,scaleDiverging:R$,scaleDivergingLog:P$,scaleDivergingPow:uA,scaleDivergingSqrt:tte,scaleDivergingSymlog:L$,scaleIdentity:f$,scaleImplicit:rT,scaleLinear:c$,scaleLog:h$,scaleOrdinal:H1,scalePoint:HZ,scalePow:J1,scaleQuantile:g$,scaleQuantize:y$,scaleRadial:m$,scaleSequential:D$,scaleSequentialLog:O$,scaleSequentialPow:lA,scaleSequentialQuantile:C$,scaleSequentialSqrt:ete,scaleSequentialSymlog:I$,scaleSqrt:MJ,scaleSymlog:p$,scaleThreshold:v$,scaleTime:Zee,scaleUtc:Jee,tickFormat:u$},Symbol.toStringTag,{value:"Module"}));var al=r=>r.chartData,rte=ke([al],r=>{var e=r.chartData!=null?r.chartData.length-1:0;return{chartData:r.chartData,computedData:r.computedData,dataEndIndex:e,dataStartIndex:0}}),cA=(r,e,t,n)=>n?rte(r):al(r);function Vo(r){if(Array.isArray(r)&&r.length===2){var[e,t]=r;if(Zr(e)&&Zr(t))return!0}return!1}function GM(r,e,t){return t?r:[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}function k$(r,e){if(e&&typeof r!="function"&&Array.isArray(r)&&r.length===2){var[t,n]=r,i,a;if(Zr(t))i=t;else if(typeof t=="function")return;if(Zr(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(Vo(s))return s}}function nte(r,e,t){if(!(!t&&e==null)){if(typeof r=="function"&&e!=null)try{var n=r(e,t);if(Vo(n))return GM(n,e,t)}catch{}if(Array.isArray(r)&&r.length===2){var[i,a]=r,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(ut(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&gk.test(i)){var l=gk.exec(i);if(l==null||e==null)s=void 0;else{var c=+l[1];s=e[0]-c}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(ut(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&yk.test(a)){var f=yk.exec(a);if(f==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var p=[s,o];if(Vo(p))return e==null?p:GM(p,e,t)}}}var qc=1e9,ite={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},dA,lr=!0,zi="[DecimalError] ",Yl=zi+"Invalid argument: ",fA=zi+"Exponent out of range: ",Wc=Math.floor,Ol=Math.pow,ate=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xi,Qr=1e7,rr=7,M$=9007199254740991,n0=Wc(M$/rr),rt={};rt.absoluteValue=rt.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};rt.comparedTo=rt.cmp=function(r){var e,t,n,i,a=this;if(r=new a.constructor(r),a.s!==r.s)return a.s||-r.s;if(a.e!==r.e)return a.e>r.e^a.s<0?1:-1;for(n=a.d.length,i=r.d.length,e=0,t=n<i?n:i;e<t;++e)if(a.d[e]!==r.d[e])return a.d[e]>r.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};rt.decimalPlaces=rt.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*rr;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};rt.dividedBy=rt.div=function(r){return Cs(this,new this.constructor(r))};rt.dividedToIntegerBy=rt.idiv=function(r){var e=this,t=e.constructor;return Qt(Cs(e,new t(r),0,1),t.precision)};rt.equals=rt.eq=function(r){return!this.cmp(r)};rt.exponent=function(){return Pr(this)};rt.greaterThan=rt.gt=function(r){return this.cmp(r)>0};rt.greaterThanOrEqualTo=rt.gte=function(r){return this.cmp(r)>=0};rt.isInteger=rt.isint=function(){return this.e>this.d.length-2};rt.isNegative=rt.isneg=function(){return this.s<0};rt.isPositive=rt.ispos=function(){return this.s>0};rt.isZero=function(){return this.s===0};rt.lessThan=rt.lt=function(r){return this.cmp(r)<0};rt.lessThanOrEqualTo=rt.lte=function(r){return this.cmp(r)<1};rt.logarithm=rt.log=function(r){var e,t=this,n=t.constructor,i=n.precision,a=i+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(xi))throw Error(zi+"NaN");if(t.s<1)throw Error(zi+(t.s?"NaN":"-Infinity"));return t.eq(xi)?new n(0):(lr=!1,e=Cs(Nd(t,a),Nd(r,a),a),lr=!0,Qt(e,i))};rt.minus=rt.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?B$(e,r):N$(e,(r.s=-r.s,r))};rt.modulo=rt.mod=function(r){var e,t=this,n=t.constructor,i=n.precision;if(r=new n(r),!r.s)throw Error(zi+"NaN");return t.s?(lr=!1,e=Cs(t,r,0,1).times(r),lr=!0,t.minus(e)):Qt(new n(t),i)};rt.naturalExponential=rt.exp=function(){return F$(this)};rt.naturalLogarithm=rt.ln=function(){return Nd(this)};rt.negated=rt.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};rt.plus=rt.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?N$(e,r):B$(e,(r.s=-r.s,r))};rt.precision=rt.sd=function(r){var e,t,n,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Yl+r);if(e=Pr(i)+1,n=i.d.length-1,t=n*rr+1,n=i.d[n],n){for(;n%10==0;n/=10)t--;for(n=i.d[0];n>=10;n/=10)t++}return r&&e>t?e:t};rt.squareRoot=rt.sqrt=function(){var r,e,t,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(zi+"NaN")}for(r=Pr(o),lr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ca(o.d),(e.length+r)%2==0&&(e+="0"),i=Math.sqrt(e),r=Wc((r+1)/2)-(r<0||r%2),i==1/0?e="5e"+r:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new l(e)):n=new l(i.toString()),t=l.precision,i=s=t+3;;)if(a=n,n=a.plus(Cs(o,a,s+2)).times(.5),Ca(a.d).slice(0,s)===(e=Ca(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Qt(a,t+1,0),a.times(a).eq(o)){n=a;break}}else if(e!="9999")break;s+=4}return lr=!0,Qt(n,t)};rt.times=rt.mul=function(r){var e,t,n,i,a,s,o,l,c,f=this,h=f.constructor,p=f.d,g=(r=new h(r)).d;if(!f.s||!r.s)return new h(0);for(r.s*=f.s,t=f.e+r.e,l=p.length,c=g.length,l<c&&(a=p,p=g,g=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+g[n]*p[i-n-1]+e,a[i--]=o%Qr|0,e=o/Qr|0;a[i]=(a[i]+e)%Qr|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=t,lr?Qt(r,h.precision):r};rt.toDecimalPlaces=rt.todp=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:($a(r,0,qc),e===void 0?e=n.rounding:$a(e,0,8),Qt(t,r+Pr(t)+1,e))};rt.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Xl(n,!0):($a(r,0,qc),e===void 0?e=i.rounding:$a(e,0,8),n=Qt(new i(n),r+1,e),t=Xl(n,!0,r+1)),t};rt.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?Xl(i):($a(r,0,qc),e===void 0?e=a.rounding:$a(e,0,8),n=Qt(new a(i),r+Pr(i)+1,e),t=Xl(n.abs(),!1,r+Pr(n)+1),i.isneg()&&!i.isZero()?"-"+t:t)};rt.toInteger=rt.toint=function(){var r=this,e=r.constructor;return Qt(new e(r),Pr(r)+1,e.rounding)};rt.toNumber=function(){return+this};rt.toPower=rt.pow=function(r){var e,t,n,i,a,s,o=this,l=o.constructor,c=12,f=+(r=new l(r));if(!r.s)return new l(xi);if(o=new l(o),!o.s){if(r.s<1)throw Error(zi+"Infinity");return o}if(o.eq(xi))return o;if(n=l.precision,r.eq(xi))return Qt(o,n);if(e=r.e,t=r.d.length-1,s=e>=t,a=o.s,s){if((t=f<0?-f:f)<=M$){for(i=new l(xi),e=Math.ceil(n/rr+4),lr=!1;t%2&&(i=i.times(o),YM(i.d,e)),t=Wc(t/2),t!==0;)o=o.times(o),YM(o.d,e);return lr=!0,r.s<0?new l(xi).div(i):Qt(i,n)}}else if(a<0)throw Error(zi+"NaN");return a=a<0&&r.d[Math.max(e,t)]&1?-1:1,o.s=1,lr=!1,i=r.times(Nd(o,n+c)),lr=!0,i=F$(i),i.s=a,i};rt.toPrecision=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?(t=Pr(i),n=Xl(i,t<=a.toExpNeg||t>=a.toExpPos)):($a(r,1,qc),e===void 0?e=a.rounding:$a(e,0,8),i=Qt(new a(i),r,e),t=Pr(i),n=Xl(i,r<=t||t<=a.toExpNeg,r)),n};rt.toSignificantDigits=rt.tosd=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):($a(r,1,qc),e===void 0?e=n.rounding:$a(e,0,8)),Qt(new n(t),r,e)};rt.toString=rt.valueOf=rt.val=rt.toJSON=rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=Pr(r),t=r.constructor;return Xl(r,e<=t.toExpNeg||e>=t.toExpPos)};function N$(r,e){var t,n,i,a,s,o,l,c,f=r.constructor,h=f.precision;if(!r.s||!e.s)return e.s||(e=new f(r)),lr?Qt(e,h):e;if(l=r.d,c=e.d,s=r.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(h/rr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),t=0;a;)t=(l[--a]=l[a]+c[a]+t)/Qr|0,l[a]%=Qr;for(t&&(l.unshift(t),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,lr?Qt(e,h):e}function $a(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Yl+r)}function Ca(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=rr-n.length,t&&(a+=No(t)),a+=n;s=r[e],n=s+"",t=rr-n.length,t&&(a+=No(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Cs=(function(){function r(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%Qr|0,s=a/Qr|0;return s&&n.unshift(s),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*Qr+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,f,h,p,g,y,b,v,E,S,w,A,T,I,D,P,k=n.constructor,M=n.s==i.s?1:-1,B=n.d,C=i.d;if(!n.s)return new k(n);if(!i.s)throw Error(zi+"Division by zero");for(l=n.e-i.e,D=C.length,T=B.length,g=new k(M),y=g.d=[],c=0;C[c]==(B[c]||0);)++c;if(C[c]>(B[c]||0)&&--l,a==null?S=a=k.precision:s?S=a+(Pr(n)-Pr(i))+1:S=a,S<0)return new k(0);if(S=S/rr+2|0,c=0,D==1)for(f=0,C=C[0],S++;(c<T||f)&&S--;c++)w=f*Qr+(B[c]||0),y[c]=w/C|0,f=w%C|0;else{for(f=Qr/(C[0]+1)|0,f>1&&(C=r(C,f),B=r(B,f),D=C.length,T=B.length),A=D,b=B.slice(0,D),v=b.length;v<D;)b[v++]=0;P=C.slice(),P.unshift(0),I=C[0],C[1]>=Qr/2&&++I;do f=0,o=e(C,b,D,v),o<0?(E=b[0],D!=v&&(E=E*Qr+(b[1]||0)),f=E/I|0,f>1?(f>=Qr&&(f=Qr-1),h=r(C,f),p=h.length,v=b.length,o=e(h,b,p,v),o==1&&(f--,t(h,D<p?P:C,p))):(f==0&&(o=f=1),h=C.slice()),p=h.length,p<v&&h.unshift(0),t(b,h,v),o==-1&&(v=b.length,o=e(C,b,D,v),o<1&&(f++,t(b,D<v?P:C,v))),v=b.length):o===0&&(f++,b=[0]),y[c++]=f,o&&b[0]?b[v++]=B[A]||0:(b=[B[A]],v=1);while((A++<T||b[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=l,Qt(g,s?a+Pr(g)+1:a)}})();function F$(r,e){var t,n,i,a,s,o,l=0,c=0,f=r.constructor,h=f.precision;if(Pr(r)>16)throw Error(fA+Pr(r));if(!r.s)return new f(xi);for(lr=!1,o=h,s=new f(.03125);r.abs().gte(.1);)r=r.times(s),c+=5;for(n=Math.log(Ol(2,c))/Math.LN10*2+5|0,o+=n,t=i=a=new f(xi),f.precision=o;;){if(i=Qt(i.times(r),o),t=t.times(++l),s=a.plus(Cs(i,t,o)),Ca(s.d).slice(0,o)===Ca(a.d).slice(0,o)){for(;c--;)a=Qt(a.times(a),o);return f.precision=h,e==null?(lr=!0,Qt(a,h)):a}a=s}}function Pr(r){for(var e=r.e*rr,t=r.d[0];t>=10;t/=10)e++;return e}function DS(r,e,t){if(e>r.LN10.sd())throw lr=!0,t&&(r.precision=t),Error(zi+"LN10 precision limit exceeded");return Qt(new r(r.LN10),e)}function No(r){for(var e="";r--;)e+="0";return e}function Nd(r,e){var t,n,i,a,s,o,l,c,f,h=1,p=10,g=r,y=g.d,b=g.constructor,v=b.precision;if(g.s<1)throw Error(zi+(g.s?"NaN":"-Infinity"));if(g.eq(xi))return new b(0);if(e==null?(lr=!1,c=v):c=e,g.eq(10))return e==null&&(lr=!0),DS(b,c);if(c+=p,b.precision=c,t=Ca(y),n=t.charAt(0),a=Pr(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)g=g.times(r),t=Ca(g.d),n=t.charAt(0),h++;a=Pr(g),n>1?(g=new b("0."+t),a++):g=new b(n+"."+t.slice(1))}else return l=DS(b,c+2,v).times(a+""),g=Nd(new b(n+"."+t.slice(1)),c-p).plus(l),b.precision=v,e==null?(lr=!0,Qt(g,v)):g;for(o=s=g=Cs(g.minus(xi),g.plus(xi),c),f=Qt(g.times(g),c),i=3;;){if(s=Qt(s.times(f),c),l=o.plus(Cs(s,new b(i),c)),Ca(l.d).slice(0,c)===Ca(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(DS(b,c+2,v).times(a+""))),o=Cs(o,new b(h),c),b.precision=v,e==null?(lr=!0,Qt(o,v)):o;o=l,i+=2}}function KM(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,t=t-n-1,r.e=Wc(t/rr),r.d=[],n=(t+1)%rr,t<0&&(n+=rr),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=rr;n<i;)r.d.push(+e.slice(n,n+=rr));e=e.slice(n),n=rr-e.length}else n-=i;for(;n--;)e+="0";if(r.d.push(+e),lr&&(r.e>n0||r.e<-n0))throw Error(fA+t)}else r.s=0,r.e=0,r.d=[0];return r}function Qt(r,e,t){var n,i,a,s,o,l,c,f,h=r.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=rr,i=e,c=h[f=0];else{if(f=Math.ceil((n+1)/rr),a=h.length,f>=a)return r;for(c=a=h[f],s=1;a>=10;a/=10)s++;n%=rr,i=n-rr+s}if(t!==void 0&&(a=Ol(10,s-i-1),o=c/a%10|0,l=e<0||h[f+1]!==void 0||c%a,l=t<4?(o||l)&&(t==0||t==(r.s<0?3:2)):o>5||o==5&&(t==4||l||t==6&&(n>0?i>0?c/Ol(10,s-i):0:h[f-1])%10&1||t==(r.s<0?8:7))),e<1||!h[0])return l?(a=Pr(r),h.length=1,e=e-a-1,h[0]=Ol(10,(rr-e%rr)%rr),r.e=Wc(-e/rr)||0):(h.length=1,h[0]=r.e=r.s=0),r;if(n==0?(h.length=f,a=1,f--):(h.length=f+1,a=Ol(10,rr-n),h[f]=i>0?(c/Ol(10,s-i)%Ol(10,i)|0)*a:0),l)for(;;)if(f==0){(h[0]+=a)==Qr&&(h[0]=1,++r.e);break}else{if(h[f]+=a,h[f]!=Qr)break;h[f--]=0,a=1}for(n=h.length;h[--n]===0;)h.pop();if(lr&&(r.e>n0||r.e<-n0))throw Error(fA+Pr(r));return r}function B$(r,e){var t,n,i,a,s,o,l,c,f,h,p=r.constructor,g=p.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new p(r),lr?Qt(e,g):e;if(l=r.d,h=e.d,n=e.e,c=r.e,l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=h.length):(t=h,n=c,o=l.length),i=Math.max(Math.ceil(g/rr),o)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=l.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){f=l[i]<h[i];break}s=0}for(f&&(t=l,l=h,h=t,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=Qr-1;--l[a],l[i]+=Qr}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,lr?Qt(e,g):e):new p(0)}function Xl(r,e,t){var n,i=Pr(r),a=Ca(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+No(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+No(-i-1)+a,t&&(n=t-s)>0&&(a+=No(n))):i>=s?(a+=No(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+No(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=No(n))),r.s<0?"-"+a:a}function YM(r,e){if(r.length>e)return r.length=e,!0}function U$(r){var e,t,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Yl+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return KM(s,a.toString())}else if(typeof a!="string")throw Error(Yl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ate.test(a))KM(s,a);else throw Error(Yl+a)}if(i.prototype=rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=U$,i.config=i.set=ste,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function ste(r){if(!r||typeof r!="object")throw Error(zi+"Object expected");var e,t,n,i=["precision",1,qc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=r[t=i[e]])!==void 0)if(Wc(n)===n&&n>=i[e+1]&&n<=i[e+2])this[t]=n;else throw Error(Yl+t+": "+n);if((n=r[t="LN10"])!==void 0)if(n==Math.LN10)this[t]=new this(n);else throw Error(Yl+t+": "+n);return this}var dA=U$(ite);xi=new dA(1);const jt=dA;var ote=r=>r,j$={},$$=r=>r===j$,zM=r=>function e(){return arguments.length===0||arguments.length===1&&$$(arguments.length<=0?void 0:arguments[0])?e:r(...arguments)},H$=(r,e)=>r===1?e:zM(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n.filter(s=>s!==j$).length;return a>=r?e(...n):H$(r-a,zM(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(f=>$$(f)?o.shift():f);return e(...c,...o)}))}),lte=r=>H$(r.length,r),sT=(r,e)=>{for(var t=[],n=r;n<e;++n)t[n-r]=n;return t},ute=lte((r,e)=>Array.isArray(e)?e.map(r):Object.keys(e).map(t=>e[t]).map(r)),cte=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return ote;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},oT=r=>Array.isArray(r)?r.reverse():r.split("").reverse().join("");function G$(r){var e;return r===0?e=1:e=Math.floor(new jt(r).abs().log(10).toNumber())+1,e}function K$(r,e,t){for(var n=new jt(r),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(t),i++;return a}var Y$=r=>{var[e,t]=r,[n,i]=[e,t];return e>t&&([n,i]=[t,e]),[n,i]},z$=(r,e,t)=>{if(r.lte(0))return new jt(0);var n=G$(r.toNumber()),i=new jt(10).pow(n),a=r.div(i),s=n!==1?.05:.1,o=new jt(Math.ceil(a.div(s).toNumber())).add(t).mul(s),l=o.mul(i);return e?new jt(l.toNumber()):new jt(Math.ceil(l.toNumber()))},fte=(r,e,t)=>{var n=new jt(1),i=new jt(r);if(!i.isint()&&t){var a=Math.abs(r);a<1?(n=new jt(10).pow(G$(r)-1),i=new jt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new jt(Math.floor(r)))}else r===0?i=new jt(Math.floor((e-1)/2)):t||(i=new jt(Math.floor(r)));var s=Math.floor((e-1)/2),o=cte(ute(l=>i.add(new jt(l-s).mul(n)).toNumber()),sT);return o(0,e)},q$=function(e,t,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var s=z$(new jt(t).sub(e).div(n-1),i,a),o;e<=0&&t>=0?o=new jt(0):(o=new jt(e).add(t).div(2),o=o.sub(new jt(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new jt(t).sub(o).div(s).toNumber()),f=l+c+1;return f>n?q$(e,t,n,i,a+1):(f<n&&(c=t>0?c+(n-f):c,l=t>0?l:l+(n-f)),{step:s,tickMin:o.sub(new jt(l).mul(s)),tickMax:o.add(new jt(c).mul(s))})},dte=function(e){var[t,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=Y$([t,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...sT(0,i-1).map(()=>1/0)]:[...sT(0,i-1).map(()=>-1/0),l];return t>n?oT(c):c}if(o===l)return fte(o,i,a);var{step:f,tickMin:h,tickMax:p}=q$(o,l,s,a,0),g=K$(h,p.add(new jt(.1).mul(f)),f);return t>n?oT(g):g},hte=function(e,t){var[n,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Y$([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(t,2),c=z$(new jt(o).sub(s).div(l-1),a,0),f=[...K$(new jt(s),new jt(o),c),o];return a===!1&&(f=f.map(h=>Math.round(h))),n>i?oT(f):f},pte=r=>r.rootProps.barCategoryGap,wy=r=>r.rootProps.stackOffset,W$=r=>r.rootProps.reverseStackOrder,hA=r=>r.options.chartName,pA=r=>r.rootProps.syncId,V$=r=>r.rootProps.syncMethod,mA=r=>r.options.eventEmitter,In={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},_s={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},yi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},_y=(r,e)=>{if(!(!r||!e))return r!=null&&r.reversed?[e[1],e[0]]:e},mte={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:_s.reversed,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:_s.type,unit:void 0},gte={allowDataOverflow:yi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yi.scale,tick:yi.tick,tickCount:yi.tickCount,ticks:void 0,type:yi.type,unit:void 0},yte={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},vte={allowDataOverflow:yi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yi.scale,tick:yi.tick,tickCount:yi.tickCount,ticks:void 0,type:"category",unit:void 0},gA=(r,e)=>r.polarAxis.angleAxis[e]!=null?r.polarAxis.angleAxis[e]:r.layout.layoutType==="radial"?yte:mte,yA=(r,e)=>r.polarAxis.radiusAxis[e]!=null?r.polarAxis.radiusAxis[e]:r.layout.layoutType==="radial"?vte:gte,Ty=r=>r.polarOptions,vA=ke([Vs,Qs,dn],hZ),Q$=ke([Ty,vA],(r,e)=>{if(r!=null)return Wo(r.innerRadius,e,0)}),X$=ke([Ty,vA],(r,e)=>{if(r!=null)return Wo(r.outerRadius,e,e*.8)}),bte=r=>{if(r==null)return[0,0];var{startAngle:e,endAngle:t}=r;return[e,t]},Z$=ke([Ty],bte);ke([gA,Z$],_y);var J$=ke([vA,Q$,X$],(r,e,t)=>{if(!(r==null||e==null||t==null))return[e,t]});ke([yA,J$],_y);var e4=ke([ir,Ty,Q$,X$,Vs,Qs],(r,e,t,n,i,a)=>{if(!(r!=="centric"&&r!=="radial"||e==null||t==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=e;return{cx:Wo(s,i,i/2),cy:Wo(o,a,a/2),innerRadius:t,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Hr=(r,e)=>e,Ay=(r,e,t)=>t;function t4(r){return r?.id}function r4(r,e,t){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=t,s=new Map;return r.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var f=t4(o);c.forEach((h,p)=>{var g=a==null||i?p:String(xn(h,a,null)),y=xn(h,o.dataKey,0),b;s.has(g)?b=s.get(g):b={},Object.assign(b,{[f]:y}),s.set(g,b)})}}),Array.from(s.values())}function bA(r){return r.stackId!=null&&r.dataKey!=null}var Dy=(r,e)=>r===e?!0:r==null||e==null?!1:r[0]===e[0]&&r[1]===e[1];function Oy(r,e){return Array.isArray(r)&&Array.isArray(e)&&r.length===0&&e.length===0?!0:r===e}function xte(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return!1}var Gr=r=>{var e=ir(r);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Vc=r=>r.tooltip.settings.axisId;function qM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function i0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(t),!0).forEach(function(n){Ste(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ste(r,e,t){return(e=Ete(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ete(r){var e=wte(r,"string");return typeof e=="symbol"?e:e+""}function wte(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var lT=[0,"auto"],Wr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},n4=(r,e)=>r.cartesianAxis.xAxis[e],Zs=(r,e)=>{var t=n4(r,e);return t??Wr},Vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:lT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:oh},i4=(r,e)=>r.cartesianAxis.yAxis[e],Js=(r,e)=>{var t=i4(r,e);return t??Vr},_te={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},xA=(r,e)=>{var t=r.cartesianAxis.zAxis[e];return t??_te},Mn=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);case"zAxis":return xA(r,t);case"angleAxis":return gA(r,t);case"radiusAxis":return yA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Tte=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},ph=(r,e,t)=>{switch(e){case"xAxis":return Zs(r,t);case"yAxis":return Js(r,t);case"angleAxis":return gA(r,t);case"radiusAxis":return yA(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},a4=r=>r.graphicalItems.cartesianItems.some(e=>e.type==="bar")||r.graphicalItems.polarItems.some(e=>e.type==="radialBar");function s4(r,e){return t=>{switch(r){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var o4=r=>r.graphicalItems.cartesianItems,Ate=ke([Hr,Ay],s4),l4=(r,e,t)=>r.filter(t).filter(n=>e?.includeHidden===!0?!0:!n.hide),mh=ke([o4,Mn,Ate],l4,{memoizeOptions:{resultEqualityCheck:Oy}}),u4=ke([mh],r=>r.filter(e=>e.type==="area"||e.type==="bar").filter(bA)),c4=r=>r.filter(e=>!("stackId"in e)||e.stackId===void 0),Dte=ke([mh],c4),f4=r=>r.map(e=>e.data).filter(Boolean).flat(1),Ote=ke([mh],f4,{memoizeOptions:{resultEqualityCheck:Oy}}),d4=(r,e)=>{var{chartData:t=[],dataStartIndex:n,dataEndIndex:i}=e;return r.length>0?r:t.slice(n,i+1)},SA=ke([Ote,cA],d4),h4=(r,e,t)=>e?.dataKey!=null?r.map(n=>({value:xn(n,e.dataKey)})):t.length>0?t.map(n=>n.dataKey).flatMap(n=>r.map(i=>({value:xn(i,n)}))):r.map(n=>({value:n})),Iy=ke([SA,Mn,mh],h4);function p4(r,e){switch(r){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function sg(r){if(Ua(r)||r instanceof Date){var e=Number(r);if(Zr(e))return e}}function WM(r){if(Array.isArray(r)){var e=[sg(r[0]),sg(r[1])];return Vo(e)?e:void 0}var t=sg(r);if(t!=null)return[t,t]}function Gs(r){return r.map(sg).filter(xV)}function Ite(r,e,t){return!t||typeof e!="number"||Ba(e)?[]:t.length?Gs(t.flatMap(n=>{var i=xn(r,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Zr(a)||!Zr(s)))return[e-a,e+s]})):[]}var Kr=r=>{var e=Gr(r),t=Vc(r);return ph(r,e,t)},gh=ke([Kr],r=>r?.dataKey),Cte=ke([u4,cA,Kr],r4),m4=(r,e,t,n)=>{var i={},a=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=n?[...l].reverse():l,f=c.map(t4);return[o,{stackedData:z7(r,f,t),graphicalItems:c}]}))},Rte=ke([Cte,u4,wy,W$],m4),g4=(r,e,t,n)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(n==null&&t!=="zAxis"){var s=V7(r,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Pte=ke([Mn],r=>r.allowDataOverflow),EA=r=>{var e;if(r==null||!("domain"in r))return lT;if(r.domain!=null)return r.domain;if(r.ticks!=null){if(r.type==="number"){var t=Gs(r.ticks);return[Math.min(...t),Math.max(...t)]}if(r.type==="category")return r.ticks.map(String)}return(e=r?.domain)!==null&&e!==void 0?e:lT},y4=ke([Mn],EA),v4=ke([y4,Pte],k$),Lte=ke([Rte,al,Hr,v4],g4,{memoizeOptions:{resultEqualityCheck:Dy}}),wA=r=>r.errorBars,kte=(r,e,t)=>r.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>p4(t,n)),a0=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},b4=(r,e,t,n,i)=>{var a,s;if(t.length>0&&r.forEach(o=>{t.forEach(l=>{var c,f,h=(c=n[l.id])===null||c===void 0?void 0:c.filter(E=>p4(i,E)),p=xn(o,(f=e.dataKey)!==null&&f!==void 0?f:l.dataKey),g=Ite(o,p,h);if(g.length>=2){var y=Math.min(...g),b=Math.max(...g);(a==null||y<a)&&(a=y),(s==null||b>s)&&(s=b)}var v=WM(p);v!=null&&(a=a==null?v[0]:Math.min(a,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),e?.dataKey!=null&&r.forEach(o=>{var l=WM(xn(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),Zr(a)&&Zr(s))return[a,s]},Mte=ke([SA,Mn,Dte,wA,Hr],b4,{memoizeOptions:{resultEqualityCheck:Dy}});function Nte(r){var{value:e}=r;if(Ua(e)||e instanceof Date)return e}var Fte=(r,e,t)=>{var n=r.map(Nte).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&Cj(n))?J3(0,r.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},x4=r=>r.referenceElements.dots,Qc=(r,e,t)=>r.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===t:n.yAxisId===t),Bte=ke([x4,Hr,Ay],Qc),S4=r=>r.referenceElements.areas,Ute=ke([S4,Hr,Ay],Qc),E4=r=>r.referenceElements.lines,jte=ke([E4,Hr,Ay],Qc),w4=(r,e)=>{var t=Gs(r.map(n=>e==="xAxis"?n.x:n.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},$te=ke(Bte,Hr,w4),_4=(r,e)=>{var t=Gs(r.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},Hte=ke([Ute,Hr],_4);function Gte(r){var e;if(r.x!=null)return Gs([r.x]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.x);return t==null||t.length===0?[]:Gs(t)}function Kte(r){var e;if(r.y!=null)return Gs([r.y]);var t=(e=r.segment)===null||e===void 0?void 0:e.map(n=>n.y);return t==null||t.length===0?[]:Gs(t)}var T4=(r,e)=>{var t=r.flatMap(n=>e==="xAxis"?Gte(n):Kte(n));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},Yte=ke([jte,Hr],T4),zte=ke($te,Yte,Hte,(r,e,t)=>a0(r,t,e)),A4=(r,e,t,n,i,a,s,o)=>{if(t!=null)return t;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?a0(n,a,i):a0(a,i);return nte(e,c,r.allowDataOverflow)},qte=ke([Mn,y4,v4,Lte,Mte,zte,ir,Hr],A4,{memoizeOptions:{resultEqualityCheck:Dy}}),Wte=[0,1],D4=(r,e,t,n,i,a,s)=>{if(!((r==null||t==null||t.length===0)&&s===void 0)){var{dataKey:o,type:l}=r,c=rl(e,a);if(c&&o==null){var f;return J3(0,(f=t?.length)!==null&&f!==void 0?f:0)}return l==="category"?Fte(n,r,c):i==="expand"?Wte:s}},_A=ke([Mn,ir,SA,Iy,wy,Hr,qte],D4),O4=(r,e,t,n,i)=>{if(r!=null){var{scale:a,type:s}=r;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(rh(a));return o in fd?o:"point"}}},yh=ke([Mn,ir,a4,hA,Hr],O4);function Vte(r){if(r!=null){if(r in fd)return fd[r]();var e="scale".concat(rh(r));if(e in fd)return fd[e]()}}function TA(r,e,t,n){if(!(t==null||n==null)){if(typeof r.scale=="function")return r.scale.copy().domain(t).range(n);var i=Vte(e);if(i!=null){var a=i.domain(t).range(n);return H7(a),a}}}var I4=(r,e,t)=>{var n=EA(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Vo(r))return dte(r,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Vo(r))return hte(r,e.tickCount,e.allowDecimals)}},AA=ke([_A,ph,yh],I4),C4=(r,e,t,n)=>{if(n!=="angleAxis"&&r?.type==="number"&&Vo(e)&&Array.isArray(t)&&t.length>0){var i=e[0],a=t[0],s=e[1],o=t[t.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},Qte=ke([Mn,_A,AA,Hr],C4),Xte=ke(Iy,Mn,(r,e)=>{if(!(!e||e.type!=="number")){var t=1/0,n=Array.from(Gs(r.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];t=Math.min(t,s)}return t/i}}),R4=ke(Xte,ir,pte,dn,(r,e,t,n)=>n,(r,e,t,n,i)=>{if(!Zr(r))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return r*a/2;if(i==="no-gap"){var s=Wo(t,r*a),o=r*a/2;return o-s-(o-s)/a*s}return 0}),Zte=(r,e)=>{var t=Zs(r,e);return t==null||typeof t.padding!="string"?0:R4(r,"xAxis",e,t.padding)},Jte=(r,e)=>{var t=Js(r,e);return t==null||typeof t.padding!="string"?0:R4(r,"yAxis",e,t.padding)},ere=ke(Zs,Zte,(r,e)=>{var t,n;if(r==null)return{left:0,right:0};var{padding:i}=r;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),tre=ke(Js,Jte,(r,e)=>{var t,n;if(r==null)return{top:0,bottom:0};var{padding:i}=r;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),rre=ke([dn,ere,cy,uy,(r,e,t)=>t],(r,e,t,n,i)=>{var{padding:a}=n;return i?[a.left,t.width-a.right]:[r.left+e.left,r.left+r.width-e.right]}),nre=ke([dn,ir,tre,cy,uy,(r,e,t)=>t],(r,e,t,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:e==="horizontal"?[r.top+r.height-t.bottom,r.top+t.top]:[r.top+t.top,r.top+r.height-t.bottom]}),vh=(r,e,t,n)=>{var i;switch(e){case"xAxis":return rre(r,t,n);case"yAxis":return nre(r,t,n);case"zAxis":return(i=xA(r,t))===null||i===void 0?void 0:i.range;case"angleAxis":return Z$(r);case"radiusAxis":return J$(r,t);default:return}},P4=ke([Mn,vh],_y),Xc=ke([Mn,yh,Qte,P4],TA);ke([mh,wA,Hr],kte);function L4(r,e){return r.id<e.id?-1:r.id>e.id?1:0}var Cy=(r,e)=>e,Ry=(r,e,t)=>t,ire=ke(oy,Cy,Ry,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(L4)),are=ke(ly,Cy,Ry,(r,e,t)=>r.filter(n=>n.orientation===e).filter(n=>n.mirror===t).sort(L4)),k4=(r,e)=>({width:r.width,height:e.height}),sre=(r,e)=>{var t=typeof e.width=="number"?e.width:oh;return{width:t,height:r.height}},ore=ke(dn,Zs,k4),lre=(r,e,t)=>{switch(e){case"top":return r.top;case"bottom":return t-r.bottom;default:return 0}},ure=(r,e,t)=>{switch(e){case"left":return r.left;case"right":return t-r.right;default:return 0}},cre=ke(Qs,dn,ire,Cy,Ry,(r,e,t,n,i)=>{var a={},s;return t.forEach(o=>{var l=k4(e,o);s==null&&(s=lre(e,n,r));var c=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),a}),fre=ke(Vs,dn,are,Cy,Ry,(r,e,t,n,i)=>{var a={},s;return t.forEach(o=>{var l=sre(e,o);s==null&&(s=ure(e,n,r));var c=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),a}),dre=(r,e)=>{var t=Zs(r,e);if(t!=null)return cre(r,t.orientation,t.mirror)},hre=ke([dn,Zs,dre,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}}),pre=(r,e)=>{var t=Js(r,e);if(t!=null)return fre(r,t.orientation,t.mirror)},mre=ke([dn,Js,pre,(r,e)=>e],(r,e,t,n)=>{if(e!=null){var i=t?.[n];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}}),gre=ke(dn,Js,(r,e)=>{var t=typeof e.width=="number"?e.width:oh;return{width:t,height:r.height}}),M4=(r,e,t,n)=>{if(t!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=t,o=rl(r,n),l=e.map(c=>c.value);if(s&&o&&a==="category"&&i&&Cj(l))return l}},DA=ke([ir,Iy,Mn,Hr],M4),N4=(r,e,t,n)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:a}=t,s=rl(r,n);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},OA=ke([ir,Iy,ph,Hr],N4),VM=ke([ir,Tte,yh,Xc,DA,OA,vh,AA,Hr],(r,e,t,n,i,a,s,o,l)=>{if(e!=null){var c=rl(r,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:t,scale:n}}}),yre=(r,e,t,n,i,a,s,o,l)=>{if(!(e==null||n==null)){var c=rl(r,l),{type:f,ticks:h,tickCount:p}=e,g=t==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=f==="category"&&n.bandwidth?n.bandwidth()/g:0;y=l==="angleAxis"&&a!=null&&a.length>=2?Gi(a[0]-a[1])*2*y:y;var b=h||i;if(b){var v=b.map((E,S)=>{var w=s?s.indexOf(E):E;return{index:S,coordinate:n(w)+y,value:E,offset:y}});return v.filter(E=>Zr(E.coordinate))}return c&&o?o.map((E,S)=>({coordinate:n(E)+y,value:E,index:S,offset:y})).filter(E=>Zr(E.coordinate)):n.ticks?n.ticks(p).map(E=>({coordinate:n(E)+y,value:E,offset:y})):n.domain().map((E,S)=>({coordinate:n(E)+y,value:s?s[E]:E,index:S,offset:y}))}},F4=ke([ir,ph,yh,Xc,AA,vh,DA,OA,Hr],yre),vre=(r,e,t,n,i,a,s)=>{if(!(e==null||t==null||n==null||n[0]===n[1])){var o=rl(r,s),{tickCount:l}=e,c=0;return c=s==="angleAxis"&&n?.length>=2?Gi(n[0]-n[1])*2*c:c,o&&a?a.map((f,h)=>({coordinate:t(f)+c,value:f,index:h,offset:c})):t.ticks?t.ticks(l).map(f=>({coordinate:t(f)+c,value:f,offset:c})):t.domain().map((f,h)=>({coordinate:t(f)+c,value:i?i[f]:f,index:h,offset:c}))}},B4=ke([ir,ph,Xc,vh,DA,OA,Hr],vre),U4=ke(Mn,Xc,(r,e)=>{if(!(r==null||e==null))return i0(i0({},r),{},{scale:e})}),bre=ke([Mn,yh,_A,P4],TA);ke((r,e,t)=>xA(r,t),bre,(r,e)=>{if(!(r==null||e==null))return i0(i0({},r),{},{scale:e})});var xre=ke([ir,oy,ly],(r,e,t)=>{switch(r){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),j4=r=>r.options.defaultTooltipEventType,$4=r=>r.options.validateTooltipEventTypes;function H4(r,e,t){if(r==null)return e;var n=r?"axis":"item";return t==null?e:t.includes(n)?n:e}function IA(r,e){var t=j4(r),n=$4(r);return H4(e,t,n)}function Sre(r){return ot(e=>IA(e,r))}var G4=(r,e)=>{var t,n=Number(e);if(!(Ba(n)||e==null))return n>=0?r==null||(t=r[n])===null||t===void 0?void 0:t.value:void 0},Ere=r=>r.tooltip.settings,jo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},wre={itemInteraction:{click:jo,hover:jo},axisInteraction:{click:jo,hover:jo},keyboardInteraction:jo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},K4=ti({name:"tooltip",initialState:wre,reducers:{addTooltipEntrySettings:{reducer(r,e){r.tooltipItemPayloads.push(e.payload)},prepare:or()},replaceTooltipEntrySettings:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).tooltipItemPayloads.indexOf(t);i>-1&&(r.tooltipItemPayloads[i]=n)},prepare:or()},removeTooltipEntrySettings:{reducer(r,e){var t=la(r).tooltipItemPayloads.indexOf(e.payload);t>-1&&r.tooltipItemPayloads.splice(t,1)},prepare:or()},setTooltipSettingsState(r,e){r.settings=e.payload},setActiveMouseOverItemIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.itemInteraction.hover.active=!0,r.itemInteraction.hover.index=e.payload.activeIndex,r.itemInteraction.hover.dataKey=e.payload.activeDataKey,r.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(r){r.itemInteraction.hover.active=!1,r.axisInteraction.hover.active=!1},mouseLeaveItem(r){r.itemInteraction.hover.active=!1},setActiveClickItemIndex(r,e){r.syncInteraction.active=!1,r.itemInteraction.click.active=!0,r.keyboardInteraction.active=!1,r.itemInteraction.click.index=e.payload.activeIndex,r.itemInteraction.click.dataKey=e.payload.activeDataKey,r.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,r.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(r,e){r.syncInteraction.active=!1,r.axisInteraction.hover.active=!0,r.keyboardInteraction.active=!1,r.axisInteraction.hover.index=e.payload.activeIndex,r.axisInteraction.hover.dataKey=e.payload.activeDataKey,r.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.axisInteraction.click.active=!0,r.axisInteraction.click.index=e.payload.activeIndex,r.axisInteraction.click.dataKey=e.payload.activeDataKey,r.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(r,e){r.syncInteraction=e.payload},setKeyboardInteraction(r,e){r.keyboardInteraction.active=e.payload.active,r.keyboardInteraction.index=e.payload.activeIndex,r.keyboardInteraction.coordinate=e.payload.activeCoordinate,r.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:_re,replaceTooltipEntrySettings:Tre,removeTooltipEntrySettings:Are,setTooltipSettingsState:Dre,setActiveMouseOverItemIndex:Ore,mouseLeaveItem:Kve,mouseLeaveChart:Y4,setActiveClickItemIndex:Yve,setMouseOverAxisIndex:z4,setMouseClickAxisIndex:Ire,setSyncInteraction:uT,setKeyboardInteraction:cT}=K4.actions,Cre=K4.reducer;function QM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(t),!0).forEach(function(n){Rre(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Rre(r,e,t){return(e=Pre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Pre(r){var e=Lre(r,"string");return typeof e=="symbol"?e:e+""}function Lre(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function kre(r,e,t){return e==="axis"?t==="click"?r.axisInteraction.click:r.axisInteraction.hover:t==="click"?r.itemInteraction.click:r.itemInteraction.hover}function Mre(r){return r.index!=null}var q4=(r,e,t,n)=>{if(e==null)return jo;var i=kre(r,e,t);if(i==null)return jo;if(i.active)return i;if(r.keyboardInteraction.active)return r.keyboardInteraction;if(r.syncInteraction.active&&r.syncInteraction.index!=null)return r.syncInteraction;var a=r.settings.active===!0;if(Mre(i)){if(a)return nm(nm({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return nm(nm({},jo),{},{coordinate:i.coordinate})};function Nre(r){if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(r instanceof Date){var e=r.valueOf();return Number.isFinite(e)?e:void 0}var t=Number(r);return Number.isFinite(t)?t:void 0}function Fre(r,e){var t=Nre(r),n=e[0],i=e[1];if(t===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return t>=a&&t<=s}function Bre(r,e,t){if(t==null||e==null)return!0;var n=xn(r,e);return n==null||!Vo(t)?!0:Fre(n,t)}var CA=(r,e,t,n)=>{var i=r?.index;if(i==null)return null;var a=Number(i);if(!Zr(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(a,o)),c=e[l];return c==null||Bre(c,t,n)?String(l):null},W4=(r,e,t,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,a);if(c!=null)return c;var f=i?.[Number(a)];if(f)switch(t){case"horizontal":return{x:f.coordinate,y:(n.top+e)/2};default:return{x:(n.left+r)/2,y:f.coordinate}}}},V4=(r,e,t,n)=>{if(e==="axis")return r.tooltipItemPayloads;if(r.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=r.itemInteraction.hover.dataKey:i=r.itemInteraction.click.dataKey,i==null&&n!=null?[r.tooltipItemPayloads[0]]:r.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},bh=r=>r.options.tooltipPayloadSearcher,Zc=r=>r.tooltip;function XM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ZM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(t),!0).forEach(function(n){Ure(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):XM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ure(r,e,t){return(e=jre(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jre(r){var e=$re(r,"string");return typeof e=="symbol"?e:e+""}function $re(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Hre(r,e){return r??e}var Q4=(r,e,t,n,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:f}=t,h=[];return r.reduce((p,g)=>{var y,{dataDefinedOnItem:b,settings:v}=g,E=Hre(b,o),S=Array.isArray(E)?T3(E,c,f):E,w=(y=v?.dataKey)!==null&&y!==void 0?y:n,A=v?.nameKey,T;if(n&&Array.isArray(S)&&!Array.isArray(S[0])&&s==="axis"?T=Rj(S,n,i):T=a(S,e,l,A),Array.isArray(T))T.forEach(D=>{var P=ZM(ZM({},v),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});p.push(vk({tooltipEntrySettings:P,dataKey:D.dataKey,payload:D.payload,value:xn(D.payload,D.dataKey),name:D.name}))});else{var I;p.push(vk({tooltipEntrySettings:v,dataKey:w,payload:T,value:xn(T,w),name:(I=xn(T,A))!==null&&I!==void 0?I:v?.name}))}return p},h)}},RA=ke([Kr,ir,a4,hA,Gr],O4),Gre=ke([r=>r.graphicalItems.cartesianItems,r=>r.graphicalItems.polarItems],(r,e)=>[...r,...e]),Kre=ke([Gr,Vc],s4),xh=ke([Gre,Kr,Kre],l4,{memoizeOptions:{resultEqualityCheck:Oy}}),Yre=ke([xh],r=>r.filter(bA)),zre=ke([xh],f4,{memoizeOptions:{resultEqualityCheck:Oy}}),Jc=ke([zre,al],d4),qre=ke([Yre,al,Kr],r4),PA=ke([Jc,Kr,xh],h4),X4=ke([Kr],EA),Wre=ke([Kr],r=>r.allowDataOverflow),Z4=ke([X4,Wre],k$),Vre=ke([xh],r=>r.filter(bA)),Qre=ke([qre,Vre,wy,W$],m4),Xre=ke([Qre,al,Gr,Z4],g4),Zre=ke([xh],c4),Jre=ke([Jc,Kr,Zre,wA,Gr],b4,{memoizeOptions:{resultEqualityCheck:Dy}}),ene=ke([x4,Gr,Vc],Qc),tne=ke([ene,Gr],w4),rne=ke([S4,Gr,Vc],Qc),nne=ke([rne,Gr],_4),ine=ke([E4,Gr,Vc],Qc),ane=ke([ine,Gr],T4),sne=ke([tne,ane,nne],a0),one=ke([Kr,X4,Z4,Xre,Jre,sne,ir,Gr],A4),Sh=ke([Kr,ir,Jc,PA,wy,Gr,one],D4),lne=ke([Sh,Kr,RA],I4),une=ke([Kr,Sh,lne,Gr],C4),J4=r=>{var e=Gr(r),t=Vc(r),n=!1;return vh(r,e,t,n)},e6=ke([Kr,J4],_y),t6=ke([Kr,RA,une,e6],TA),cne=ke([ir,PA,Kr,Gr],M4),fne=ke([ir,PA,Kr,Gr],N4),dne=(r,e,t,n,i,a,s,o)=>{if(e){var{type:l}=e,c=rl(r,o);if(n){var f=t==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Gi(i[0]-i[1])*2*h:h,c&&s?s.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:a?a[p]:p,index:g,offset:h}))}}},eo=ke([ir,Kr,RA,t6,J4,cne,fne,Gr],dne),LA=ke([j4,$4,Ere],(r,e,t)=>H4(t.shared,r,e)),r6=r=>r.tooltip.settings.trigger,kA=r=>r.tooltip.settings.defaultIndex,Eh=ke([Zc,LA,r6,kA],q4),Fd=ke([Eh,Jc,gh,Sh],CA),n6=ke([eo,Fd],G4),hne=ke([Eh],r=>{if(r)return r.dataKey});ke([Eh],r=>{if(r)return r.graphicalItemId});var i6=ke([Zc,LA,r6,kA],V4),pne=ke([Vs,Qs,ir,dn,eo,kA,i6,bh],W4),mne=ke([Eh,pne],(r,e)=>r!=null&&r.coordinate?r.coordinate:e),gne=ke([Eh],r=>r.active),yne=ke([i6,Fd,al,gh,n6,bh,LA],Q4),vne=ke([yne],r=>{if(r!=null){var e=r.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function JM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(t),!0).forEach(function(n){bne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bne(r,e,t){return(e=xne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xne(r){var e=Sne(r,"string");return typeof e=="symbol"?e:e+""}function Sne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ene=()=>ot(Kr),wne=()=>{var r=Ene(),e=ot(eo),t=ot(t6);return Bg(!r||!t?void 0:eN(eN({},r),{},{scale:t}),e)};function tN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tN(Object(t),!0).forEach(function(n){_ne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _ne(r,e,t){return(e=Tne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Tne(r){var e=Ane(r,"string");return typeof e=="symbol"?e:e+""}function Ane(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Dne=(r,e,t,n)=>{var i=e.find(a=>a&&a.index===t);if(i){if(r==="horizontal")return{x:i.coordinate,y:n.chartY};if(r==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},One=(r,e,t,n)=>{var i=e.find(c=>c&&c.index===t);if(i){if(r==="centric"){var a=i.coordinate,{radius:s}=n;return Vu(Vu(Vu({},n),fn(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return Vu(Vu(Vu({},n),fn(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Ine(r,e){var{chartX:t,chartY:n}=r;return t>=e.left&&t<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var a6=(r,e,t,n,i)=>{var a,s=-1,o=(a=e?.length)!==null&&a!==void 0?a:0;if(o<=1||r==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?t[l-1].coordinate:t[o-1].coordinate,f=t[l].coordinate,h=l>=o-1?t[0].coordinate:t[l+1].coordinate,p=void 0;if(Gi(f-c)!==Gi(h-f)){var g=[];if(Gi(h-f)===Gi(i[1]-i[0])){p=h;var y=f+i[1]-i[0];g[0]=Math.min(y,(y+c)/2),g[1]=Math.max(y,(y+c)/2)}else{p=c;var b=h+i[1]-i[0];g[0]=Math.min(f,(b+f)/2),g[1]=Math.max(f,(b+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(r>v[0]&&r<=v[1]||r>=g[0]&&r<=g[1]){({index:s}=t[l]);break}}else{var E=Math.min(c,h),S=Math.max(c,h);if(r>(E+f)/2&&r<=(S+f)/2){({index:s}=t[l]);break}}}else if(e){for(var w=0;w<o;w++)if(w===0&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w>0&&w<o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w===o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2){({index:s}=e[w]);break}}return s},Cne=()=>ot(hA),MA=(r,e)=>e,s6=(r,e,t)=>t,NA=(r,e,t,n)=>n,Rne=ke(eo,r=>Z0(r,e=>e.coordinate)),FA=ke([Zc,MA,s6,NA],q4),BA=ke([FA,Jc,gh,Sh],CA),Pne=(r,e,t)=>{if(e!=null){var n=Zc(r);return e==="axis"?t==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:t==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},o6=ke([Zc,MA,s6,NA],V4),s0=ke([Vs,Qs,ir,dn,eo,NA,o6,bh],W4),Lne=ke([FA,s0],(r,e)=>{var t;return(t=r.coordinate)!==null&&t!==void 0?t:e}),l6=ke([eo,BA],G4),kne=ke([o6,BA,al,gh,l6,bh,MA],Q4),Mne=ke([FA,BA],(r,e)=>({isActive:r.active&&e!=null,activeIndex:e})),Nne=(r,e,t,n,i,a,s)=>{if(!(!r||!t||!n||!i)&&Ine(r,s)){var o=Q7(r,e),l=a6(o,a,i,t,n),c=Dne(e,i,l,r);return{activeIndex:String(l),activeCoordinate:c}}},Fne=(r,e,t,n,i,a,s)=>{if(!(!r||!n||!i||!a||!t)){var o=vZ(r,t);if(o){var l=X7(o,e),c=a6(l,s,a,n,i),f=One(e,a,c,o);return{activeIndex:String(c),activeCoordinate:f}}}},Bne=(r,e,t,n,i,a,s,o)=>{if(!(!r||!e||!n||!i||!a))return e==="horizontal"||e==="vertical"?Nne(r,e,n,i,a,s,o):Fne(r,e,t,n,i,a,s)},Une=ke(r=>r.zIndex.zIndexMap,(r,e)=>e,(r,e,t)=>t,(r,e,t)=>{if(e!=null){var n=r[e];if(n!=null)return t?n.panoramaElementId:n.elementId}}),jne=ke(r=>r.zIndex.zIndexMap,r=>{var e=Object.keys(r).map(n=>parseInt(n,10)).concat(Object.values(In)),t=Array.from(new Set(e));return t.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:xte}});function rN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rN(Object(t),!0).forEach(function(n){$ne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function $ne(r,e,t){return(e=Hne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Hne(r){var e=Gne(r,"string");return typeof e=="symbol"?e:e+""}function Gne(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Kne={},Yne={zIndexMap:Object.values(In).reduce((r,e)=>nN(nN({},r),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Kne)},zne=new Set(Object.values(In));function qne(r){return zne.has(r)}var u6=ti({name:"zIndex",initialState:Yne,reducers:{registerZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]?r.zIndexMap[t].consumers+=1:r.zIndexMap[t]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:or()},unregisterZIndexPortal:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(r.zIndexMap[t].consumers-=1,r.zIndexMap[t].consumers<=0&&!qne(t)&&delete r.zIndexMap[t])},prepare:or()},registerZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t,elementId:n,isPanorama:i}=e.payload;r.zIndexMap[t]?i?r.zIndexMap[t].panoramaElementId=n:r.zIndexMap[t].elementId=n:r.zIndexMap[t]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:or()},unregisterZIndexPortalId:{reducer:(r,e)=>{var{zIndex:t}=e.payload;r.zIndexMap[t]&&(e.payload.isPanorama?r.zIndexMap[t].panoramaElementId=void 0:r.zIndexMap[t].elementId=void 0)},prepare:or()}}}),{registerZIndexPortal:Wne,unregisterZIndexPortal:Vne,registerZIndexPortalId:Qne,unregisterZIndexPortalId:Xne}=u6.actions,Zne=u6.reducer;function to(r){var{zIndex:e,children:t}=r,n=CQ(),i=n&&e!==void 0&&e!==0,a=ri(),s=Lr();L.useLayoutEffect(()=>i?(s(Wne({zIndex:e})),()=>{s(Vne({zIndex:e}))}):nh,[s,e,i]);var o=ot(c=>Une(c,e,a));if(!i)return t;if(!o)return null;var l=document.getElementById(o);return l?Jd.createPortal(t,l):null}function fT(){return fT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},fT.apply(null,arguments)}function iN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function im(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(t),!0).forEach(function(n){Jne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):iN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Jne(r,e,t){return(e=eie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function eie(r){var e=tie(r,"string");return typeof e=="symbol"?e:e+""}function tie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rie(r){var{cursor:e,cursorComp:t,cursorProps:n}=r;return L.isValidElement(e)?L.cloneElement(e,n):L.createElement(t,n)}function nie(r){var e,{coordinate:t,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:f}=r,h=t,p=n,g=i;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var y,b,v;if(f==="ScatterChart")y=h,b=PX,v=In.cursorLine;else if(f==="BarChart")y=LX(o,h,a,s),b=V3,v=In.cursorRectangle;else if(o==="radial"&&Lj(h)){var{cx:E,cy:S,radius:w,startAngle:A,endAngle:T}=Q3(h);y={cx:E,cy:S,startAngle:A,endAngle:T,innerRadius:w,outerRadius:w},b=Z3,v=In.cursorLine}else y={points:EZ(o,h,a)},b=K3,v=In.cursorLine;var I=typeof l=="object"&&"className"in l?l.className:void 0,D=im(im(im(im({stroke:"#ccc",pointerEvents:"none"},a),y),q0(l)),{},{payload:p,payloadIndex:g,className:mt("recharts-tooltip-cursor",I)});return L.createElement(to,{zIndex:(e=r.zIndex)!==null&&e!==void 0?e:v},L.createElement(rie,{cursor:l,cursorComp:b,cursorProps:D}))}function iie(r){var e=wne(),t=M3(),n=dy(),i=Cne();return e==null||t==null||n==null||i==null?null:L.createElement(nie,fT({},r,{offset:t,layout:n,tooltipAxisBandSize:e,chartName:i}))}var c6=L.createContext(null),aie=()=>L.useContext(c6),OS={exports:{}},aN;function sie(){return aN||(aN=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,h||l,p),y=t?t+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=t?t+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,y=new Array(g);p<g;p++)y[p]=h[p].fn;return y},o.prototype.listenerCount=function(c){var f=t?t+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,y){var b=t?t+c:c;if(!this._events[b])return!1;var v=this._events[b],E=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,y),!0}for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var A=v.length,T;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),E){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,h);break;case 4:v[w].fn.call(v[w].context,f,h,p);break;default:if(!S)for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];v[w].fn.apply(v[w].context,S)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=t?t+c:c;if(!this._events[g])return this;if(!f)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!h||y.context===h)&&s(this,g);else{for(var b=0,v=[],E=y.length;b<E;b++)(y[b].fn!==f||p&&!y[b].once||h&&y[b].context!==h)&&v.push(y[b]);v.length?this._events[g]=v.length===1?v[0]:v:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=t?t+c:c,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(OS)),OS.exports}var oie=sie();const lie=Ya(oie);var Bd=new lie,dT="recharts.syncEvent.tooltip",sN="recharts.syncEvent.brush";function uie(r,e){if(e){var t=Number.parseInt(e,10);if(!Ba(t))return r?.[t]}}var cie={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},f6=ti({name:"options",initialState:cie,reducers:{createEventEmitter:r=>{r.eventEmitter==null&&(r.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fie=f6.reducer,{createEventEmitter:die}=f6.actions;function hie(r){return r.tooltip.syncInteraction}var pie={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},d6=ti({name:"chartData",initialState:pie,reducers:{setChartData(r,e){if(r.chartData=e.payload,e.payload==null){r.dataStartIndex=0,r.dataEndIndex=0;return}e.payload.length>0&&r.dataEndIndex!==e.payload.length-1&&(r.dataEndIndex=e.payload.length-1)},setComputedData(r,e){r.computedData=e.payload},setDataStartEndIndexes(r,e){var{startIndex:t,endIndex:n}=e.payload;t!=null&&(r.dataStartIndex=t),n!=null&&(r.dataEndIndex=n)}}}),{setChartData:oN,setDataStartEndIndexes:mie,setComputedData:zve}=d6.actions,gie=d6.reducer,yie=["x","y"];function lN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Qu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lN(Object(t),!0).forEach(function(n){vie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vie(r,e,t){return(e=bie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bie(r){var e=xie(r,"string");return typeof e=="symbol"?e:e+""}function xie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Sie(r,e){if(r==null)return{};var t,n,i=Eie(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Eie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function wie(){var r=ot(pA),e=ot(mA),t=Lr(),n=ot(V$),i=ot(eo),a=dy(),s=fy(),o=ot(l=>l.rootProps.className);L.useEffect(()=>{if(r==null)return nh;var l=(c,f,h)=>{if(e!==h&&r===c){if(n==="index"){var p;if(s&&f!==null&&f!==void 0&&(p=f.payload)!==null&&p!==void 0&&p.coordinate&&f.payload.sourceViewBox){var g=f.payload.coordinate,{x:y,y:b}=g,v=Sie(g,yie),{x:E,y:S,width:w,height:A}=f.payload.sourceViewBox,T=Qu(Qu({},v),{},{x:s.x+(w?(y-E)/w:0)*s.width,y:s.y+(A?(b-S)/A:0)*s.height});t(Qu(Qu({},f),{},{payload:Qu(Qu({},f.payload),{},{coordinate:T})}))}else t(f);return}if(i!=null){var I;if(typeof n=="function"){var D={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=n(i,D);I=i[P]}else n==="value"&&(I=i.find($=>String($.value)===f.payload.label));var{coordinate:k}=f.payload;if(I==null||f.payload.active===!1||k==null||s==null){t(uT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:B}=k,C=Math.min(M,s.x+s.width),W=Math.min(B,s.y+s.height),Y={x:a==="horizontal"?I.coordinate:C,y:a==="horizontal"?W:I.coordinate},q=uT({active:f.payload.active,coordinate:Y,dataKey:f.payload.dataKey,index:String(I.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});t(q)}}};return Bd.on(dT,l),()=>{Bd.off(dT,l)}},[o,t,e,r,n,i,a,s])}function _ie(){var r=ot(pA),e=ot(mA),t=Lr();L.useEffect(()=>{if(r==null)return nh;var n=(i,a,s)=>{e!==s&&r===i&&t(mie(a))};return Bd.on(sN,n),()=>{Bd.off(sN,n)}},[t,e,r])}function Tie(){var r=Lr();L.useEffect(()=>{r(die())},[r]),wie(),_ie()}function Aie(r,e,t,n,i,a){var s=ot(g=>Pne(g,r,e)),o=ot(mA),l=ot(pA),c=ot(V$),f=ot(hie),h=f?.active,p=fy();L.useEffect(()=>{if(!h&&l!=null&&o!=null){var g=uT({active:a,coordinate:t,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});Bd.emit(dT,l,g,o)}},[h,t,s,i,n,o,l,c,a,p])}function uN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uN(Object(t),!0).forEach(function(n){Die(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Die(r,e,t){return(e=Oie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Oie(r){var e=Iie(r,"string");return typeof e=="symbol"?e:e+""}function Iie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Cie(r){return r.dataKey}function Rie(r,e){return L.isValidElement(r)?L.cloneElement(r,e):typeof r=="function"?L.createElement(r,e):L.createElement(fX,e)}var fN=[],Pie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function dN(r){var e,t,n=Sn(r,Pie),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:f,offset:h,payloadUniqBy:p,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:v,cursor:E,shared:S,trigger:w,defaultIndex:A,portal:T,axisId:I}=n,D=Lr(),P=typeof A=="number"?String(A):A;L.useEffect(()=>{D(Dre({shared:S,trigger:w,axisId:I,active:i,defaultIndex:P}))},[D,S,w,I,i,P]);var k=fy(),M=G3(),B=Sre(S),{activeIndex:C,isActive:W}=(e=ot(oe=>Mne(oe,B,w,P)))!==null&&e!==void 0?e:{},Y=ot(oe=>kne(oe,B,w,P)),q=ot(oe=>l6(oe,B,w,P)),$=ot(oe=>Lne(oe,B,w,P)),z=Y,K=aie(),Z=(t=i??W)!==null&&t!==void 0?t:!1,[X,H]=Vj([z,Z]),G=B==="axis"?q:void 0;Aie(B,w,$,G,C,Z);var J=T??K;if(J==null||k==null||B==null)return null;var fe=z??fN;Z||(fe=fN),c&&fe.length&&(fe=Kj(fe.filter(oe=>oe.value!=null&&(oe.hide!==!0||n.includeHidden)),p,Cie));var se=fe.length>0,be=L.createElement(vX,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:Z,coordinate:$,hasPayload:se,offset:h,position:g,reverseDirection:y,useTranslate3d:b,viewBox:k,wrapperStyle:v,lastBoundingBox:X,innerRef:H,hasPortalFromProps:!!T},Rie(l,cN(cN({},n),{},{payload:fe,label:G,active:Z,activeIndex:C,coordinate:$,accessibilityLayer:M})));return L.createElement(L.Fragment,null,Jd.createPortal(be,J),Z&&L.createElement(iie,{cursor:E,tooltipEventType:B,coordinate:$,payload:fe,index:C}))}function Lie(r,e,t){return(e=kie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kie(r){var e=Mie(r,"string");return typeof e=="symbol"?e:e+""}function Mie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class Nie{constructor(e){Lie(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function hN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Fie(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hN(Object(t),!0).forEach(function(n){Bie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Bie(r,e,t){return(e=Uie(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Uie(r){var e=jie(r,"string");return typeof e=="symbol"?e:e+""}function jie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var $ie={cacheSize:2e3,enableCache:!0},h6=Fie({},$ie),pN=new Nie(h6.cacheSize),Hie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mN="recharts_measurement_span";function Gie(r,e){var t=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(r,"|").concat(t,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var gN=(r,e)=>{try{var t=document.getElementById(mN);t||(t=document.createElement("span"),t.setAttribute("id",mN),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,Hie,e),t.textContent="".concat(r);var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},yd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||uh.isSsr)return{width:0,height:0};if(!h6.enableCache)return gN(e,t);var n=Gie(e,t),i=pN.get(n);if(i)return i;var a=gN(e,t);return pN.set(n,a),a},yN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Yie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,p6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zie=Object.keys(p6),fc="NaN";function qie(r,e){return r*p6[e]}class Wn{static parse(e){var t,[,n,i]=(t=Yie.exec(e))!==null&&t!==void 0?t:[];return new Wn(parseFloat(n),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Ba(e)&&(this.unit=""),t!==""&&!Kie.test(t)&&(this.num=NaN,this.unit=""),zie.includes(t)&&(this.num=qie(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Wn(NaN,""):new Wn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Wn(NaN,""):new Wn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Wn(NaN,""):new Wn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Wn(NaN,""):new Wn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ba(this.num)}}function m6(r){if(r.includes(fc))return fc;for(var e=r;e.includes("*")||e.includes("/");){var t,[,n,i,a]=(t=yN.exec(e))!==null&&t!==void 0?t:[],s=Wn.parse(n??""),o=Wn.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return fc;e=e.replace(yN,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,f,h,p]=(c=vN.exec(e))!==null&&c!==void 0?c:[],g=Wn.parse(f??""),y=Wn.parse(p??""),b=h==="+"?g.add(y):g.subtract(y);if(b.isNaN())return fc;e=e.replace(vN,b.toString())}return e}var bN=/\(([^()]*)\)/;function Wie(r){for(var e=r,t;(t=bN.exec(e))!=null;){var[,n]=t;e=e.replace(bN,m6(n))}return e}function Vie(r){var e=r.replace(/\s+/g,"");return e=Wie(e),e=m6(e),e}function Qie(r){try{return Vie(r)}catch{return fc}}function IS(r){var e=Qie(r.slice(5,-1));return e===fc?"":e}var Xie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Zie=["dx","dy","angle","className","breakAll"];function hT(){return hT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hT.apply(null,arguments)}function xN(r,e){if(r==null)return{};var t,n,i=Jie(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Jie(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var g6=/[ \f\n\r\t\v\u2028\u2029]+/,y6=r=>{var{children:e,breakAll:t,style:n}=r;try{var i=[];Xr(e)||(t?i=e.toString().split(""):i=e.toString().split(g6));var a=i.map(o=>({word:o,width:yd(o,n).width})),s=t?0:yd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function eae(r){return r==="start"||r==="middle"||r==="end"||r==="inherit"}var v6=(r,e,t,n)=>r.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(e==null||n||l.width+o+t<Number(e)))l.words.push(s),l.width+=o+t;else{var c={words:[s],width:o};i.push(c)}return i},[]),b6=r=>r.reduce((e,t)=>e.width>t.width?e:t),tae="",SN=(r,e,t,n,i,a,s,o)=>{var l=r.slice(0,e),c=y6({breakAll:t,style:n,children:l+tae});if(!c)return[!1,[]];var f=v6(c.wordsWithComputedWidth,a,s,o),h=f.length>i||b6(f).width>Number(a);return[h,f]},rae=(r,e,t,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=r,c=ut(a),f=String(s),h=v6(e,n,t,i);if(!c||i)return h;var p=h.length>a||b6(h).width>Number(n);if(!p)return h;for(var g=0,y=f.length-1,b=0,v;g<=y&&b<=f.length-1;){var E=Math.floor((g+y)/2),S=E-1,[w,A]=SN(f,S,l,o,a,n,t,i),[T]=SN(f,E,l,o,a,n,t,i);if(!w&&!T&&(g=E+1),w&&T&&(y=E-1),!w&&T){v=A;break}b++}return v||h},EN=r=>{var e=Xr(r)?[]:r.toString().split(g6);return[{words:e,width:void 0}]},nae=r=>{var{width:e,scaleToFit:t,children:n,style:i,breakAll:a,maxLines:s}=r;if((e||t)&&!uh.isSsr){var o,l,c=y6({breakAll:a,children:n,style:i});if(c){var{wordsWithComputedWidth:f,spaceWidth:h}=c;o=f,l=h}else return EN(n);return rae({breakAll:a,children:n,maxLines:s,style:i},o,l,e,!!t)}return EN(n)},x6="#808080",iae={angle:0,breakAll:!1,capHeight:"0.71em",fill:x6,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},UA=L.forwardRef((r,e)=>{var t=Sn(r,iae),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:f}=t,h=xN(t,Xie),p=L.useMemo(()=>nae({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:y,angle:b,className:v,breakAll:E}=h,S=xN(h,Zie);if(!Ua(n)||!Ua(i)||p.length===0)return null;var w=Number(n)+(ut(g)?g:0),A=Number(i)+(ut(y)?y:0);if(!Zr(w)||!Zr(A))return null;var T;switch(f){case"start":T=IS("calc(".concat(s,")"));break;case"middle":T=IS("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:T=IS("calc(".concat(p.length-1," * -").concat(a,")"));break}var I=[];if(l){var D=p[0].width,{width:P}=h;I.push("scale(".concat(ut(P)&&ut(D)?P/D:1,")"))}return b&&I.push("rotate(".concat(b,", ").concat(w,", ").concat(A,")")),I.length&&(S.transform=I.join(" ")),L.createElement("text",hT({},Pn(S),{ref:e,x:w,y:A,className:mt("recharts-text",v),textAnchor:c,fill:o.includes("url")?x6:o}),p.map((k,M)=>{var B=k.words.join(E?"":" ");return L.createElement("tspan",{x:w,dy:M===0?T:a,key:"".concat(B,"-").concat(M)},B)}))});UA.displayName="Text";var aae=["labelRef"];function sae(r,e){if(r==null)return{};var t,n,i=oae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function oae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function wN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function wr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wN(Object(t),!0).forEach(function(n){lae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function lae(r,e,t){return(e=uae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uae(r){var e=cae(r,"string");return typeof e=="symbol"?e:e+""}function cae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ts(){return Ts=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ts.apply(null,arguments)}var S6=L.createContext(null),fae=r=>{var{x:e,y:t,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=r,l=L.useMemo(()=>({x:e,y:t,upperWidth:n,lowerWidth:i,width:a,height:s}),[e,t,n,i,a,s]);return L.createElement(S6.Provider,{value:l},o)},E6=()=>{var r=L.useContext(S6),e=fy();return r||k3(e)},dae=L.createContext(null),hae=()=>{var r=L.useContext(dae),e=ot(e4);return r||e},pae=r=>{var{value:e,formatter:t}=r,n=Xr(r.children)?e:r.children;return typeof t=="function"?t(n):n},jA=r=>r!=null&&typeof r=="function",mae=(r,e)=>{var t=Gi(e-r),n=Math.min(Math.abs(e-r),360);return t*n},gae=(r,e,t,n,i)=>{var{offset:a,className:s}=r,{cx:o,cy:l,innerRadius:c,outerRadius:f,startAngle:h,endAngle:p,clockWise:g}=i,y=(c+f)/2,b=mae(h,p),v=b>=0?1:-1,E,S;switch(e){case"insideStart":E=h+v*a,S=g;break;case"insideEnd":E=p-v*a,S=!g;break;case"end":E=p+v*a,S=g;break;default:throw new Error("Unsupported position ".concat(e))}S=b<=0?S:!S;var w=fn(o,l,y,E),A=fn(o,l,y,E+(S?1:-1)*359),T="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(A.x,",").concat(A.y),I=Xr(r.id)?_d("recharts-radial-line-"):r.id;return L.createElement("text",Ts({},n,{dominantBaseline:"central",className:mt("recharts-radial-bar-label",s)}),L.createElement("defs",null,L.createElement("path",{id:I,d:T})),L.createElement("textPath",{xlinkHref:"#".concat(I)},t))},yae=(r,e,t)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=r,c=(o+l)/2;if(t==="outside"){var{x:f,y:h}=fn(n,i,s+e,c);return{x:f,y:h,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:g,y}=fn(n,i,p,c);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},pT=r=>"cx"in r&&ut(r.cx),vae=(r,e)=>{var{parentViewBox:t,offset:n,position:i}=r,a;t!=null&&!pT(t)&&(a=t);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:f}=e,h=s,p=s+(l-c)/2,g=(h+p)/2,y=(l+c)/2,b=h+l/2,v=f>=0?1:-1,E=v*n,S=v>0?"end":"start",w=v>0?"start":"end",A=l>=0?1:-1,T=A*n,I=A>0?"end":"start",D=A>0?"start":"end";if(i==="top"){var P={x:h+l/2,y:o-E,textAnchor:"middle",verticalAnchor:S};return wr(wr({},P),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var k={x:p+c/2,y:o+f+E,textAnchor:"middle",verticalAnchor:w};return wr(wr({},k),a?{height:Math.max(a.y+a.height-(o+f),0),width:c}:{})}if(i==="left"){var M={x:g-T,y:o+f/2,textAnchor:I,verticalAnchor:"middle"};return wr(wr({},M),a?{width:Math.max(M.x-a.x,0),height:f}:{})}if(i==="right"){var B={x:g+y+T,y:o+f/2,textAnchor:D,verticalAnchor:"middle"};return wr(wr({},B),a?{width:Math.max(a.x+a.width-B.x,0),height:f}:{})}var C=a?{width:y,height:f}:{};return i==="insideLeft"?wr({x:g+T,y:o+f/2,textAnchor:D,verticalAnchor:"middle"},C):i==="insideRight"?wr({x:g+y-T,y:o+f/2,textAnchor:I,verticalAnchor:"middle"},C):i==="insideTop"?wr({x:h+l/2,y:o+E,textAnchor:"middle",verticalAnchor:w},C):i==="insideBottom"?wr({x:p+c/2,y:o+f-E,textAnchor:"middle",verticalAnchor:S},C):i==="insideTopLeft"?wr({x:h+T,y:o+E,textAnchor:D,verticalAnchor:w},C):i==="insideTopRight"?wr({x:h+l-T,y:o+E,textAnchor:I,verticalAnchor:w},C):i==="insideBottomLeft"?wr({x:p+T,y:o+f-E,textAnchor:D,verticalAnchor:S},C):i==="insideBottomRight"?wr({x:p+c-T,y:o+f-E,textAnchor:I,verticalAnchor:S},C):i&&typeof i=="object"&&(ut(i.x)||Bs(i.x))&&(ut(i.y)||Bs(i.y))?wr({x:s+Wo(i.x,y),y:o+Wo(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):wr({x:b,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},bae={angle:0,offset:5,zIndex:In.label,position:"middle",textBreakAll:!1};function Fo(r){var e=Sn(r,bae),{viewBox:t,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:c}=e,f=hae(),h=E6(),p=n==="center"?h:f??h,g,y,b;if(t==null?g=p:pT(t)?g=t:g=k3(t),!g||Xr(i)&&Xr(a)&&!L.isValidElement(s)&&typeof s!="function")return null;var v=wr(wr({},e),{},{viewBox:g});if(L.isValidElement(s)){var{labelRef:E}=v,S=sae(v,aae);return L.cloneElement(s,S)}if(typeof s=="function"){if(y=L.createElement(s,v),L.isValidElement(y))return y}else y=pae(e);var w=Pn(e);if(pT(g)){if(n==="insideStart"||n==="insideEnd"||n==="end")return gae(e,n,y,w,g);b=yae(g,e.offset,e.position)}else b=vae(e,g);return L.createElement(to,{zIndex:e.zIndex},L.createElement(UA,Ts({ref:c,className:mt("recharts-label",o)},w,b,{textAnchor:eae(w.textAnchor)?w.textAnchor:b.textAnchor,breakAll:l}),y))}Fo.displayName="Label";var xae=(r,e,t)=>{if(!r)return null;var n={viewBox:e,labelRef:t};return r===!0?L.createElement(Fo,Ts({key:"label-implicit"},n)):Ua(r)?L.createElement(Fo,Ts({key:"label-implicit",value:r},n)):L.isValidElement(r)?r.type===Fo?L.cloneElement(r,wr({key:"label-implicit"},n)):L.createElement(Fo,Ts({key:"label-implicit",content:r},n)):jA(r)?L.createElement(Fo,Ts({key:"label-implicit",content:r},n)):r&&typeof r=="object"?L.createElement(Fo,Ts({},r,{key:"label-implicit"},n)):null};function Sae(r){var{label:e,labelRef:t}=r,n=E6();return xae(e,n,t)||null}var CS={},RS={},_N;function Eae(){return _N||(_N=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}r.last=e})(RS)),RS}var PS={},TN;function wae(){return TN||(TN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}r.toArray=e})(PS)),PS}var AN;function _ae(){return AN||(AN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Eae(),t=wae(),n=_1();function i(a){if(n.isArrayLike(a))return e.last(t.toArray(a))}r.last=i})(CS)),CS}var LS,DN;function Tae(){return DN||(DN=1,LS=_ae().last),LS}var Aae=Tae();const Dae=Ya(Aae);var Oae=["valueAccessor"],Iae=["dataKey","clockWise","id","textBreakAll","zIndex"];function o0(){return o0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},o0.apply(null,arguments)}function ON(r,e){if(r==null)return{};var t,n,i=Cae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Cae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Rae=r=>Array.isArray(r.value)?Dae(r.value):r.value,w6=L.createContext(void 0),Pae=w6.Provider,_6=L.createContext(void 0);_6.Provider;function Lae(){return L.useContext(w6)}function kae(){return L.useContext(_6)}function og(r){var{valueAccessor:e=Rae}=r,t=ON(r,Oae),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=t,l=ON(t,Iae),c=Lae(),f=kae(),h=c||f;return!h||!h.length?null:L.createElement(to,{zIndex:o??In.label},L.createElement(qo,{className:"recharts-label-list"},h.map((p,g)=>{var y,b=Xr(n)?e(p,g):xn(p&&p.payload,n),v=Xr(a)?{}:{id:"".concat(a,"-").concat(g)};return L.createElement(Fo,o0({key:"label-".concat(g)},Pn(p),l,v,{fill:(y=t.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:b,textBreakAll:s,viewBox:p.viewBox,index:g,zIndex:0}))})))}og.displayName="LabelList";function Mae(r){var{label:e}=r;return e?e===!0?L.createElement(og,{key:"labelList-implicit"}):L.isValidElement(e)||jA(e)?L.createElement(og,{key:"labelList-implicit",content:e}):typeof e=="object"?L.createElement(og,o0({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function mT(){return mT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},mT.apply(null,arguments)}var T6=r=>{var{cx:e,cy:t,r:n,className:i}=r,a=mt("recharts-dot",i);return ut(e)&&ut(t)&&ut(n)?L.createElement("circle",mT({},Fa(r),w1(r),{className:a,cx:e,cy:t,r:n})):null},Nae={radiusAxis:{},angleAxis:{}},A6=ti({name:"polarAxis",initialState:Nae,reducers:{addRadiusAxis(r,e){r.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(r,e){delete r.radiusAxis[e.payload.id]},addAngleAxis(r,e){r.angleAxis[e.payload.id]=e.payload},removeAngleAxis(r,e){delete r.angleAxis[e.payload.id]}}}),{addRadiusAxis:qve,removeRadiusAxis:Wve,addAngleAxis:Vve,removeAngleAxis:Qve}=A6.actions,Fae=A6.reducer,D6=r=>r&&typeof r=="object"&&"clipDot"in r?!!r.clipDot:!0,kS={},IN;function Bae(){return IN||(IN=1,(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}r.isPlainObject=e})(kS)),kS}var MS,CN;function Uae(){return CN||(CN=1,MS=Bae().isPlainObject),MS}var jae=Uae();const $ae=Ya(jae);function RN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function PN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(t),!0).forEach(function(n){Hae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):RN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Hae(r,e,t){return(e=Gae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Gae(r){var e=Kae(r,"string");return typeof e=="symbol"?e:e+""}function Kae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function l0(){return l0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},l0.apply(null,arguments)}var LN=(r,e,t,n,i)=>{var a=t-n,s;return s="M ".concat(r,",").concat(e),s+="L ".concat(r+t,",").concat(e),s+="L ".concat(r+t-a/2,",").concat(e+i),s+="L ".concat(r+t-a/2-n,",").concat(e+i),s+="L ".concat(r,",").concat(e," Z"),s},Yae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zae=r=>{var e=Sn(r,Yae),{x:t,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:f,isUpdateAnimationActive:h}=e,p=L.useRef(null),[g,y]=L.useState(-1),b=L.useRef(i),v=L.useRef(a),E=L.useRef(s),S=L.useRef(t),w=L.useRef(n),A=j1(r,"trapezoid-");if(L.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var Y=p.current.getTotalLength();Y&&y(Y)}catch{}},[]),t!==+t||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var T=mt("recharts-trapezoid",o);if(!h)return L.createElement("g",null,L.createElement("path",l0({},Pn(e),{className:T,d:LN(t,n,i,a,s)})));var I=b.current,D=v.current,P=E.current,k=S.current,M=w.current,B="0px ".concat(g===-1?1:g,"px"),C="".concat(g,"px 0px"),W=Y3(["strokeDasharray"],c,l);return L.createElement(U1,{animationId:A,key:A,canBegin:g>0,duration:c,easing:l,isActive:h,begin:f},Y=>{var q=Vn(I,i,Y),$=Vn(D,a,Y),z=Vn(P,s,Y),K=Vn(k,t,Y),Z=Vn(M,n,Y);p.current&&(b.current=q,v.current=$,E.current=z,S.current=K,w.current=Z);var X=Y>0?{transition:W,strokeDasharray:C}:{strokeDasharray:B};return L.createElement("path",l0({},Pn(e),{className:T,d:LN(K,Z,q,$,z),ref:p,style:PN(PN({},X),e.style)}))})},qae=["option","shapeType","propTransformer","activeClassName"];function Wae(r,e){if(r==null)return{};var t,n,i=Vae(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Vae(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function kN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function u0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(t),!0).forEach(function(n){Qae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Qae(r,e,t){return(e=Xae(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xae(r){var e=Zae(r,"string");return typeof e=="symbol"?e:e+""}function Zae(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jae(r,e){return u0(u0({},e),r)}function ese(r,e){return r==="symbols"}function MN(r){var{shapeType:e,elementProps:t}=r;switch(e){case"rectangle":return L.createElement(V3,t);case"trapezoid":return L.createElement(zae,t);case"sector":return L.createElement(Z3,t);case"symbols":if(ese(e))return L.createElement(E1,t);break;case"curve":return L.createElement(K3,t);default:return null}}function tse(r){return L.isValidElement(r)?r.props:r}function rse(r){var{option:e,shapeType:t,propTransformer:n=Jae,activeClassName:i="recharts-active-shape"}=r,a=Wae(r,qae),s;if(L.isValidElement(e))s=L.cloneElement(e,u0(u0({},a),tse(e)));else if(typeof e=="function")s=e(a,a.index);else if($ae(e)&&typeof e!="boolean"){var o=n(e,a);s=L.createElement(MN,{shapeType:t,elementProps:o})}else{var l=a;s=L.createElement(MN,{shapeType:t,elementProps:l})}return a.isActive?L.createElement(qo,{className:i},s):s}function nse(r){var{tooltipEntrySettings:e}=r,t=Lr(),n=ri(),i=L.useRef(null);return L.useLayoutEffect(()=>{n||(i.current===null?t(_re(e)):i.current!==e&&t(Tre({prev:i.current,next:e})),i.current=e)},[e,t,n]),L.useLayoutEffect(()=>()=>{i.current&&(t(Are(i.current)),i.current=null)},[t]),null}function ise(r){var{legendPayload:e}=r,t=Lr(),n=ri(),i=L.useRef(null);return L.useLayoutEffect(()=>{n||(i.current===null?t(KQ(e)):i.current!==e&&t(YQ({prev:i.current,next:e})),i.current=e)},[t,n,e]),L.useLayoutEffect(()=>()=>{i.current&&(t(zQ(i.current)),i.current=null)},[t]),null}var NS,ase=()=>{var[r]=L.useState(()=>_d("uid-"));return r},sse=(NS=WT.useId)!==null&&NS!==void 0?NS:ase;function O6(r,e){var t=sse();return e||(r?"".concat(r,"-").concat(t):t)}var ose=L.createContext(void 0),lse=r=>{var{id:e,type:t,children:n}=r,i=O6("recharts-".concat(t),e);return L.createElement(ose.Provider,{value:i},n(i))},use={cartesianItems:[],polarItems:[]},I6=ti({name:"graphicalItems",initialState:use,reducers:{addCartesianGraphicalItem:{reducer(r,e){r.cartesianItems.push(e.payload)},prepare:or()},replaceCartesianGraphicalItem:{reducer(r,e){var{prev:t,next:n}=e.payload,i=la(r).cartesianItems.indexOf(t);i>-1&&(r.cartesianItems[i]=n)},prepare:or()},removeCartesianGraphicalItem:{reducer(r,e){var t=la(r).cartesianItems.indexOf(e.payload);t>-1&&r.cartesianItems.splice(t,1)},prepare:or()},addPolarGraphicalItem:{reducer(r,e){r.polarItems.push(e.payload)},prepare:or()},removePolarGraphicalItem:{reducer(r,e){var t=la(r).polarItems.indexOf(e.payload);t>-1&&r.polarItems.splice(t,1)},prepare:or()}}}),{addCartesianGraphicalItem:cse,replaceCartesianGraphicalItem:fse,removeCartesianGraphicalItem:dse,addPolarGraphicalItem:Xve,removePolarGraphicalItem:Zve}=I6.actions,hse=I6.reducer,pse=r=>{var e=Lr(),t=L.useRef(null);return L.useLayoutEffect(()=>{t.current===null?e(cse(r)):t.current!==r&&e(fse({prev:t.current,next:r})),t.current=r},[e,r]),L.useLayoutEffect(()=>()=>{t.current&&(e(dse(t.current)),t.current=null)},[e]),null},mse=L.memo(pse),gse=["points"];function NN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function FS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(t),!0).forEach(function(n){yse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):NN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yse(r,e,t){return(e=vse(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vse(r){var e=bse(r,"string");return typeof e=="symbol"?e:e+""}function bse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function c0(){return c0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},c0.apply(null,arguments)}function xse(r,e){if(r==null)return{};var t,n,i=Sse(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Sse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Ese(r){var{option:e,dotProps:t,className:n}=r;if(L.isValidElement(e))return L.cloneElement(e,t);if(typeof e=="function")return e(t);var i=mt(n,typeof e!="boolean"?e.className:""),a=t??{},{points:s}=a,o=xse(a,gse);return L.createElement(T6,c0({},o,{className:i}))}function wse(r,e){return r==null?!1:e?!0:r.length===1}function _se(r){var{points:e,dot:t,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:c=In.scatter}=r;if(!wse(e,t))return null;var f=D6(t),h=OW(t),p=e.map((y,b)=>{var v,E,S=FS(FS(FS({r:3},s),h),{},{index:b,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(E=y.y)!==null&&E!==void 0?E:void 0,dataKey:a,value:y.value,payload:y.payload,points:e});return L.createElement(Ese,{key:"dot-".concat(b),option:t,dotProps:S,className:i})}),g={};return o&&l!=null&&(g.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(l,")")),L.createElement(to,{zIndex:c},L.createElement(qo,c0({className:n},g),p))}function FN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function BN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(t),!0).forEach(function(n){Tse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):FN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tse(r,e,t){return(e=Ase(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ase(r){var e=Dse(r,"string");return typeof e=="symbol"?e:e+""}function Dse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ose={xAxis:{},yAxis:{},zAxis:{}},C6=ti({name:"cartesianAxis",initialState:Ose,reducers:{addXAxis:{reducer(r,e){r.xAxis[e.payload.id]=e.payload},prepare:or()},replaceXAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.xAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.xAxis[t.id],r.xAxis[n.id]=n)},prepare:or()},removeXAxis:{reducer(r,e){delete r.xAxis[e.payload.id]},prepare:or()},addYAxis:{reducer(r,e){r.yAxis[e.payload.id]=e.payload},prepare:or()},replaceYAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.yAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.yAxis[t.id],r.yAxis[n.id]=n)},prepare:or()},removeYAxis:{reducer(r,e){delete r.yAxis[e.payload.id]},prepare:or()},addZAxis:{reducer(r,e){r.zAxis[e.payload.id]=e.payload},prepare:or()},replaceZAxis:{reducer(r,e){var{prev:t,next:n}=e.payload;r.zAxis[t.id]!==void 0&&(t.id!==n.id&&delete r.zAxis[t.id],r.zAxis[n.id]=n)},prepare:or()},removeZAxis:{reducer(r,e){delete r.zAxis[e.payload.id]},prepare:or()},updateYAxisWidth(r,e){var{id:t,width:n}=e.payload,i=r.yAxis[t];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);r.yAxis[t]=BN(BN({},r.yAxis[t]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Ise,replaceXAxis:Cse,removeXAxis:Rse,addYAxis:Pse,replaceYAxis:Lse,removeYAxis:kse,addZAxis:Jve,replaceZAxis:ebe,removeZAxis:tbe,updateYAxisWidth:Mse}=C6.actions,Nse=C6.reducer,Fse=ke([dn],r=>({top:r.top,bottom:r.bottom,left:r.left,right:r.right})),Bse=ke([Fse,Vs,Qs],(r,e,t)=>{if(!(!r||e==null||t==null))return{x:r.left,y:r.top,width:Math.max(0,e-r.left-r.right),height:Math.max(0,t-r.top-r.bottom)}}),$A=()=>ot(Bse),Use=()=>ot(vne);function UN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function BS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UN(Object(t),!0).forEach(function(n){jse(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):UN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function jse(r,e,t){return(e=$se(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $se(r){var e=Hse(r,"string");return typeof e=="symbol"?e:e+""}function Hse(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Gse=r=>{var{point:e,childIndex:t,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=r;if(i===!1||e.x==null||e.y==null)return null;var o={index:t,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=BS(BS(BS({},o),q0(i)),w1(i)),c;return L.isValidElement(i)?c=L.cloneElement(i,l):typeof i=="function"?c=i(l):c=L.createElement(T6,l),L.createElement(qo,{className:"recharts-active-dot",clipPath:s},c)};function Kse(r){var{points:e,mainColor:t,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=In.activeDot}=r,o=ot(Fd),l=Use();if(e==null||l==null)return null;var c=e.find(f=>l.includes(f.payload));return Xr(c)?null:L.createElement(to,{zIndex:s},L.createElement(Gse,{point:c,childIndex:Number(o),mainColor:t,dataKey:i,activeDot:n,clipPath:a}))}var Yse={},R6=ti({name:"errorBars",initialState:Yse,reducers:{addErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]||(r[t]=[]),r[t].push(n)},replaceErrorBar:(r,e)=>{var{itemId:t,prev:n,next:i}=e.payload;r[t]&&(r[t]=r[t].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(r,e)=>{var{itemId:t,errorBar:n}=e.payload;r[t]&&(r[t]=r[t].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:rbe,replaceErrorBar:nbe,removeErrorBar:ibe}=R6.actions,zse=R6.reducer,qse=["children"];function Wse(r,e){if(r==null)return{};var t,n,i=Vse(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Vse(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Qse={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Xse=L.createContext(Qse);function Zse(r){var{children:e}=r,t=Wse(r,qse);return L.createElement(Xse.Provider,{value:t},e)}function P6(r,e){var t,n,i=ot(c=>Zs(c,r)),a=ot(c=>Js(c,e)),s=(t=i?.allowDataOverflow)!==null&&t!==void 0?t:Wr.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Vr.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function Jse(r){var{xAxisId:e,yAxisId:t,clipPathId:n}=r,i=$A(),{needClipX:a,needClipY:s,needClip:o}=P6(e,t);if(!o||!i)return null;var{x:l,y:c,width:f,height:h}=i;return L.createElement("clipPath",{id:"clipPath-".concat(n)},L.createElement("rect",{x:a?l:l-f/2,y:s?c:c-h/2,width:a?f:f*2,height:s?h:h*2}))}var US={exports:{}},jS={};var jN;function eoe(){if(jN)return jS;jN=1;var r=Uc();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,a=r.useEffect,s=r.useMemo,o=r.useDebugValue;return jS.useSyncExternalStoreWithSelector=function(l,c,f,h,p){var g=i(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=s(function(){function v(T){if(!E){if(E=!0,S=T,T=h(T),p!==void 0&&y.hasValue){var I=y.value;if(p(I,T))return w=I}return w=T}if(I=w,t(S,T))return I;var D=h(T);return p!==void 0&&p(I,D)?(S=T,I):(S=T,w=D)}var E=!1,S,w,A=f===void 0?null:f;return[function(){return v(c())},A===null?void 0:function(){return v(A())}]},[c,f,h,p]);var b=n(l,g[0],g[1]);return a(function(){y.hasValue=!0,y.value=b},[b]),o(b),b},jS}var $N;function toe(){return $N||($N=1,US.exports=eoe()),US.exports}toe();function roe(r){r()}function noe(){let r=null,e=null;return{clear(){r=null,e=null},notify(){roe(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var HN={notify(){},get:()=>[]};function ioe(r,e){let t,n=HN,i=0,a=!1;function s(b){f();const v=n.subscribe(b);let E=!1;return()=>{E||(E=!0,v(),h())}}function o(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return a}function f(){i++,t||(t=r.subscribe(l),n=noe())}function h(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=HN)}function p(){a||(a=!0,f())}function g(){a&&(a=!1,h())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>n};return y}var aoe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",soe=aoe(),ooe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",loe=ooe(),uoe=()=>soe||loe?L.useLayoutEffect:L.useEffect,coe=uoe();function GN(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function foe(r,e){if(GN(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!GN(r[t[i]],e[t[i]]))return!1;return!0}var doe=Symbol.for("react-redux-context"),hoe=typeof globalThis<"u"?globalThis:{};function poe(){if(!L.createContext)return{};const r=hoe[doe]??=new Map;let e=r.get(L.createContext);return e||(e=L.createContext(null),r.set(L.createContext,e)),e}var moe=poe();function goe(r){const{children:e,context:t,serverState:n,store:i}=r,a=L.useMemo(()=>{const l=ioe(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=L.useMemo(()=>i.getState(),[i]);coe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=t||moe;return L.createElement(o.Provider,{value:a},e)}var yoe=goe,voe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function boe(r,e){return r==null&&e==null?!0:typeof r=="number"&&typeof e=="number"?r===e||r!==r&&e!==e:r===e}function HA(r,e){var t=new Set([...Object.keys(r),...Object.keys(e)]);for(var n of t)if(voe.has(n)){if(r[n]==null&&e[n]==null)continue;if(!foe(r[n],e[n]))return!1}else if(!boe(r[n],e[n]))return!1;return!0}var xoe=r=>{var{chartData:e}=r,t=Lr(),n=ri();return L.useEffect(()=>n?()=>{}:(t(oN(e)),()=>{t(oN(void 0))}),[e,t,n]),null},KN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},L6=ti({name:"brush",initialState:KN,reducers:{setBrushSettings(r,e){return e.payload==null?KN:e.payload}}}),{setBrushSettings:abe}=L6.actions,Soe=L6.reducer;function Eoe(r,e,t){return(e=woe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function woe(r){var e=_oe(r,"string");return typeof e=="symbol"?e:e+""}function _oe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class GA{static create(e){return new GA(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}Eoe(GA,"EPS",1e-4);function Toe(r){return(r%180+180)%180}var Aoe=function(e){var{width:t,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Toe(i),s=a*Math.PI/180,o=Math.atan(n/t),l=s>o&&s<Math.PI-o?n/Math.sin(s):t/Math.cos(s);return Math.abs(l)},Doe={dots:[],areas:[],lines:[]},k6=ti({name:"referenceElements",initialState:Doe,reducers:{addDot:(r,e)=>{r.dots.push(e.payload)},removeDot:(r,e)=>{var t=la(r).dots.findIndex(n=>n===e.payload);t!==-1&&r.dots.splice(t,1)},addArea:(r,e)=>{r.areas.push(e.payload)},removeArea:(r,e)=>{var t=la(r).areas.findIndex(n=>n===e.payload);t!==-1&&r.areas.splice(t,1)},addLine:(r,e)=>{r.lines.push(e.payload)},removeLine:(r,e)=>{var t=la(r).lines.findIndex(n=>n===e.payload);t!==-1&&r.lines.splice(t,1)}}}),{addDot:sbe,removeDot:obe,addArea:lbe,removeArea:ube,addLine:cbe,removeLine:fbe}=k6.actions,Ooe=k6.reducer,Ioe=L.createContext(void 0),Coe=r=>{var{children:e}=r,[t]=L.useState("".concat(_d("recharts"),"-clip")),n=$A();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return L.createElement(Ioe.Provider,{value:t},L.createElement("defs",null,L.createElement("clipPath",{id:t},L.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function M6(r,e){if(e<1)return[];if(e===1)return r;for(var t=[],n=0;n<r.length;n+=e)t.push(r[n]);return t}function Roe(r,e,t){var n={width:r.width+e.width,height:r.height+e.height};return Aoe(n,t)}function Poe(r,e,t){var n=t==="width",{x:i,y:a,width:s,height:o}=r;return e===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function f0(r,e,t,n,i){if(r*e<r*n||r*e>r*i)return!1;var a=t();return r*(e-r*a/2-n)>=0&&r*(e+r*a/2-i)<=0}function Loe(r,e){return M6(r,e+1)}function koe(r,e,t,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=e,l=0,c=1,f=s,h=function(){var y=n?.[l];if(y===void 0)return{v:M6(n,c)};var b=l,v,E=()=>(v===void 0&&(v=t(y,b)),v),S=y.coordinate,w=l===0||f0(r,S,E,f,o);w||(l=0,f=s,c+=1),w&&(f=S+r*(E()/2+i),l+=c)},p;c<=a.length;)if(p=h(),p)return p.v;return[]}function YN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(t),!0).forEach(function(n){Moe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Moe(r,e,t){return(e=Noe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Noe(r){var e=Foe(r,"string");return typeof e=="symbol"?e:e+""}function Foe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Boe(r,e,t,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=e,{end:l}=e,c=function(p){var g=a[p],y,b=()=>(y===void 0&&(y=t(g,p)),y);if(p===s-1){var v=r*(g.coordinate+r*b()/2-l);a[p]=g=vn(vn({},g),{},{tickCoord:v>0?g.coordinate-v*r:g.coordinate})}else a[p]=g=vn(vn({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var E=f0(r,g.tickCoord,b,o,l);E&&(l=g.tickCoord-r*(b()/2+i),a[p]=vn(vn({},g),{},{isShow:!0}))}},f=s-1;f>=0;f--)c(f);return a}function Uoe(r,e,t,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=e;if(a){var f=n[o-1],h=t(f,o-1),p=r*(f.coordinate+r*h/2-c);if(s[o-1]=f=vn(vn({},f),{},{tickCoord:p>0?f.coordinate-p*r:f.coordinate}),f.tickCoord!=null){var g=f0(r,f.tickCoord,()=>h,l,c);g&&(c=f.tickCoord-r*(h/2+i),s[o-1]=vn(vn({},f),{},{isShow:!0}))}}for(var y=a?o-1:o,b=function(S){var w=s[S],A,T=()=>(A===void 0&&(A=t(w,S)),A);if(S===0){var I=r*(w.coordinate-r*T()/2-l);s[S]=w=vn(vn({},w),{},{tickCoord:I<0?w.coordinate-I*r:w.coordinate})}else s[S]=w=vn(vn({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var D=f0(r,w.tickCoord,T,l,c);D&&(l=w.tickCoord+r*(T()/2+i),s[S]=vn(vn({},w),{},{isShow:!0}))}},v=0;v<y;v++)b(v);return s}function KA(r,e,t){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:f,angle:h}=r;if(!i||!i.length||!n)return[];if(ut(l)||uh.isSsr){var p;return(p=Loe(i,ut(l)?l:0))!==null&&p!==void 0?p:[]}var g=[],y=o==="top"||o==="bottom"?"width":"height",b=f&&y==="width"?yd(f,{fontSize:e,letterSpacing:t}):{width:0,height:0},v=(w,A)=>{var T=typeof c=="function"?c(w.value,A):w.value;return y==="width"?Roe(yd(T,{fontSize:e,letterSpacing:t}),b,h):yd(T,{fontSize:e,letterSpacing:t})[y]},E=i.length>=2?Gi(i[1].coordinate-i[0].coordinate):1,S=Poe(a,E,y);return l==="equidistantPreserveStart"?koe(E,S,v,i,s):(l==="preserveStart"||l==="preserveStartEnd"?g=Uoe(E,S,v,i,s,l==="preserveStartEnd"):g=Boe(E,S,v,i,s),g.filter(w=>w.isShow))}var joe=r=>{var{ticks:e,label:t,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=r,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=t?t.getBoundingClientRect().width:0,l=i+a,c=s+l+o+(t?n:0);return Math.round(c)}return 0},$oe=["axisLine","width","height","className","hide","ticks","axisType"];function Hoe(r,e){if(r==null)return{};var t,n,i=Goe(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Goe(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Zl(){return Zl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zl.apply(null,arguments)}function zN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(t),!0).forEach(function(n){Koe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Koe(r,e,t){return(e=Yoe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Yoe(r){var e=zoe(r,"string");return typeof e=="symbol"?e:e+""}function zoe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Rs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:In.axis};function qoe(r){var{x:e,y:t,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=r;if(!o)return null;var c=Rr(Rr(Rr({},l),Fa(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);c=Rr(Rr({},c),{},{x1:e,y1:t+f*i,x2:e+n,y2:t+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);c=Rr(Rr({},c),{},{x1:e+h*n,y1:t,x2:e+h*n,y2:t+i})}return L.createElement("line",Zl({},c,{className:mt("recharts-cartesian-axis-line",X0(o,"className"))}))}function Woe(r,e,t,n,i,a,s,o,l){var c,f,h,p,g,y,b=o?-1:1,v=r.tickSize||s,E=ut(r.tickCoord)?r.tickCoord:r.coordinate;switch(a){case"top":c=f=r.coordinate,p=t+ +!o*i,h=p-b*v,y=h-b*l,g=E;break;case"left":h=p=r.coordinate,f=e+ +!o*n,c=f-b*v,g=c-b*l,y=E;break;case"right":h=p=r.coordinate,f=e+ +o*n,c=f+b*v,g=c+b*l,y=E;break;default:c=f=r.coordinate,p=t+ +o*i,h=p+b*v,y=h+b*l,g=E;break}return{line:{x1:c,y1:h,x2:f,y2:p},tick:{x:g,y}}}function Voe(r,e){switch(r){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Qoe(r,e){switch(r){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Xoe(r){var{option:e,tickProps:t,value:n}=r,i,a=mt(t.className,"recharts-cartesian-axis-tick-value");if(L.isValidElement(e))i=L.cloneElement(e,Rr(Rr({},t),{},{className:a}));else if(typeof e=="function")i=e(Rr(Rr({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=mt(s,e?.className)),i=L.createElement(UA,Zl({},t,{className:s}),n)}return i}var Zoe=L.forwardRef((r,e)=>{var{ticks:t=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:f,mirror:h,x:p,y:g,width:y,height:b,tickSize:v,tickMargin:E,fontSize:S,letterSpacing:w,getTicksConfig:A,events:T,axisType:I}=r,D=KA(Rr(Rr({},A),{},{ticks:t}),S,w),P=Voe(f,h),k=Qoe(f,h),M=Fa(A),B=q0(n),C={};typeof i=="object"&&(C=i);var W=Rr(Rr({},M),{},{fill:"none"},C),Y=D.map(z=>Rr({entry:z},Woe(z,p,g,y,b,f,v,h,E))),q=Y.map(z=>{var{entry:K,line:Z}=z;return L.createElement(qo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},i&&L.createElement("line",Zl({},W,Z,{className:mt("recharts-cartesian-axis-tick-line",X0(i,"className"))})))}),$=Y.map((z,K)=>{var{entry:Z,tick:X}=z,H=Rr(Rr(Rr(Rr({textAnchor:P,verticalAnchor:k},M),{},{stroke:"none",fill:a},B),X),{},{index:K,payload:Z,visibleTicksCount:D.length,tickFormatter:s,padding:l},c);return L.createElement(qo,Zl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},kj(T,Z,K)),n&&L.createElement(Xoe,{option:n,tickProps:H,value:"".concat(typeof s=="function"?s(Z.value,K):Z.value).concat(o||"")}))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},$.length>0&&L.createElement(to,{zIndex:In.label},L.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},$)),q.length>0&&L.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},q))}),Joe=L.forwardRef((r,e)=>{var{axisLine:t,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=r,c=Hoe(r,$oe),[f,h]=L.useState(""),[p,g]=L.useState(""),y=L.useRef(null);L.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return joe({ticks:y.current,label:(v=r.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:r.tickSize,tickMargin:r.tickMargin})}}));var b=L.useCallback(v=>{if(v){var E=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=E;var S=E[0];if(S){var w=window.getComputedStyle(S),A=w.fontSize,T=w.letterSpacing;(A!==f||T!==p)&&(h(A),g(T))}}},[f,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:L.createElement(to,{zIndex:r.zIndex},L.createElement(qo,{className:mt("recharts-cartesian-axis",a)},L.createElement(qoe,{x:r.x,y:r.y,width:n,height:i,orientation:r.orientation,mirror:r.mirror,axisLine:t,otherSvgProps:Fa(r)}),L.createElement(Zoe,{ref:b,axisType:l,events:c,fontSize:f,getTicksConfig:r,height:r.height,letterSpacing:p,mirror:r.mirror,orientation:r.orientation,padding:r.padding,stroke:r.stroke,tick:r.tick,tickFormatter:r.tickFormatter,tickLine:r.tickLine,tickMargin:r.tickMargin,tickSize:r.tickSize,tickTextProps:r.tickTextProps,ticks:o,unit:r.unit,width:r.width,x:r.x,y:r.y}),L.createElement(fae,{x:r.x,y:r.y,width:r.width,height:r.height,lowerWidth:r.width,upperWidth:r.width},L.createElement(Sae,{label:r.label,labelRef:r.labelRef}),r.children)))}),YA=L.forwardRef((r,e)=>{var t=Sn(r,Rs);return L.createElement(Joe,Zl({},t,{ref:e}))});YA.displayName="CartesianAxis";var ele=["x1","y1","x2","y2","key"],tle=["offset"],rle=["xAxisId","yAxisId"],nle=["xAxisId","yAxisId"];function qN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(t),!0).forEach(function(n){ile(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ile(r,e,t){return(e=ale(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ale(r){var e=sle(r,"string");return typeof e=="symbol"?e:e+""}function sle(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fl.apply(null,arguments)}function d0(r,e){if(r==null)return{};var t,n,i=ole(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function ole(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var lle=r=>{var{fill:e}=r;if(!e||e==="none")return null;var{fillOpacity:t,x:n,y:i,width:a,height:s,ry:o}=r;return L.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function N6(r){var{option:e,lineItemProps:t}=r,n;if(L.isValidElement(e))n=L.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var i,{x1:a,y1:s,x2:o,y2:l,key:c}=t,f=d0(t,ele),h=(i=Fa(f))!==null&&i!==void 0?i:{},{offset:p}=h,g=d0(h,tle);n=L.createElement("line",Fl({},g,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return n}function ule(r){var{x:e,width:t,horizontal:n=!0,horizontalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=r,o=d0(r,rle),l=i.map((c,f)=>{var h=bn(bn({},o),{},{x1:e,y1:c,x2:e+t,y2:c,key:"line-".concat(f),index:f});return L.createElement(N6,{key:"line-".concat(f),option:n,lineItemProps:h})});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function cle(r){var{y:e,height:t,vertical:n=!0,verticalPoints:i}=r;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=r,o=d0(r,nle),l=i.map((c,f)=>{var h=bn(bn({},o),{},{x1:c,y1:e,x2:c,y2:e+t,key:"line-".concat(f),index:f});return L.createElement(N6,{option:n,lineItemProps:h,key:"line-".concat(f)})});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function fle(r){var{horizontalFill:e,fillOpacity:t,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=r;if(!l||!e||!e.length||o==null)return null;var c=o.map(h=>Math.round(h+i-i)).sort((h,p)=>h-p);i!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],y=g?i+s-h:c[p+1]-h;if(y<=0)return null;var b=p%e.length;return L.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:y,width:a,stroke:"none",fill:e[b],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function dle(r){var{vertical:e=!0,verticalFill:t,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=r;if(!e||!t||!t.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,p)=>h-p);i!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],y=g?i+s-h:c[p+1]-h;if(y<=0)return null;var b=p%t.length;return L.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:y,height:o,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var hle=(r,e)=>{var{xAxis:t,width:n,height:i,offset:a}=r;return A3(KA(bn(bn(bn({},Rs),t),{},{ticks:D3(t),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},ple=(r,e)=>{var{yAxis:t,width:n,height:i,offset:a}=r;return A3(KA(bn(bn(bn({},Rs),t),{},{ticks:D3(t),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},mle={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:In.grid};function gT(r){var e=M1(),t=N1(),n=M3(),i=bn(bn({},Sn(r,mle)),{},{x:ut(r.x)?r.x:n.left,y:ut(r.y)?r.y:n.top,width:ut(r.width)?r.width:n.width,height:ut(r.height)?r.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:c,height:f,syncWithTicks:h,horizontalValues:p,verticalValues:g}=i,y=ri(),b=ot(k=>VM(k,"xAxis",a,y)),v=ot(k=>VM(k,"yAxis",s,y));if(!ja(c)||!ja(f)||!ut(o)||!ut(l))return null;var E=i.verticalCoordinatesGenerator||hle,S=i.horizontalCoordinatesGenerator||ple,{horizontalPoints:w,verticalPoints:A}=i;if((!w||!w.length)&&typeof S=="function"){var T=p&&p.length,I=S({yAxis:v?bn(bn({},v),{},{ticks:T?p:v.ticks}):void 0,width:e??c,height:t??f,offset:n},T?!0:h);Ug(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(w=I)}if((!A||!A.length)&&typeof E=="function"){var D=g&&g.length,P=E({xAxis:b?bn(bn({},b),{},{ticks:D?g:b.ticks}):void 0,width:e??c,height:t??f,offset:n},D?!0:h);Ug(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(A=P)}return L.createElement(to,{zIndex:i.zIndex},L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(lle,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),L.createElement(fle,Fl({},i,{horizontalPoints:w})),L.createElement(dle,Fl({},i,{verticalPoints:A})),L.createElement(ule,Fl({},i,{offset:n,horizontalPoints:w,xAxis:b,yAxis:v})),L.createElement(cle,Fl({},i,{offset:n,verticalPoints:A,xAxis:b,yAxis:v}))))}gT.displayName="CartesianGrid";var F6=(r,e,t,n)=>U4(r,"xAxis",e,n),B6=(r,e,t,n)=>B4(r,"xAxis",e,n),U6=(r,e,t,n)=>U4(r,"yAxis",t,n),j6=(r,e,t,n)=>B4(r,"yAxis",t,n),gle=ke([ir,F6,U6,B6,j6],(r,e,t,n,i)=>rl(r,"xAxis")?Bg(e,n,!1):Bg(t,i,!1)),yle=(r,e,t,n,i)=>i;function vle(r){return r.type==="line"}var ble=ke([o4,yle],(r,e)=>r.filter(vle).find(t=>t.id===e)),xle=ke([ir,F6,U6,B6,j6,ble,gle,cA],(r,e,t,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:f}=o;if(!(a==null||e==null||t==null||n==null||i==null||n.length===0||i.length===0||s==null||r!=="horizontal"&&r!=="vertical")){var{dataKey:h,data:p}=a,g;if(p!=null&&p.length>0?g=p:g=l?.slice(c,f+1),g!=null)return $le({layout:r,xAxis:e,yAxis:t,xAxisTicks:n,yAxisTicks:i,dataKey:h,bandSize:s,displayedData:g})}});function Sle(r){var e=q0(r),t=3,n=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=t),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r:t,strokeWidth:n}}var Ele=["id"],wle=["type","layout","connectNulls","needClip","shape"],_le=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ud(){return Ud=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ud.apply(null,arguments)}function WN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function wa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(t),!0).forEach(function(n){Tle(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tle(r,e,t){return(e=Ale(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ale(r){var e=Dle(r,"string");return typeof e=="symbol"?e:e+""}function Dle(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function zA(r,e){if(r==null)return{};var t,n,i=Ole(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Ole(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Ile=r=>{var{dataKey:e,name:t,stroke:n,legendType:i,hide:a}=r;return[{inactive:a,dataKey:e,type:i,color:n,value:O3(t,e),payload:r}]},Cle=L.memo(r=>{var{dataKey:e,data:t,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:c}=r,f={dataDefinedOnItem:t,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:O3(s,e),hide:o,type:c,color:n,unit:l}};return L.createElement(nse,{tooltipEntrySettings:f})}),$6=(r,e)=>"".concat(e,"px ").concat(r-e,"px");function Rle(r,e){for(var t=r.length%2!==0?[...r,0]:r,n=[],i=0;i<e;++i)n=[...n,...t];return n}var Ple=(r,e,t)=>{var n=t.reduce((h,p)=>h+p);if(!n)return $6(e,r);for(var i=Math.floor(r/n),a=r%n,s=e-r,o=[],l=0,c=0;l<t.length;c+=t[l],++l)if(c+t[l]>a){o=[...t.slice(0,l),a-c];break}var f=o.length%2===0?[0,s]:[s];return[...Rle(t,i),...o,...f].map(h=>"".concat(h,"px")).join(", ")};function Lle(r){var{clipPathId:e,points:t,props:n}=r,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,l=zA(n,Ele),c=Fa(l);return L.createElement(_se,{points:t,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:c,needClip:s,clipPathId:e})}function kle(r){var{showLabels:e,children:t,points:n}=r,i=L.useMemo(()=>n?.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wa(wa({},l),{},{value:a.value,payload:a.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return L.createElement(Pae,{value:e?i:void 0},t)}function VN(r){var{clipPathId:e,pathRef:t,points:n,strokeDasharray:i,props:a}=r,{type:s,layout:o,connectNulls:l,needClip:c,shape:f}=a,h=zA(a,wle),p=wa(wa({},Pn(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:n,type:s,layout:o,connectNulls:l,strokeDasharray:i??a.strokeDasharray});return L.createElement(L.Fragment,null,n?.length>1&&L.createElement(rse,Ud({shapeType:"curve",option:f},p,{pathRef:t})),L.createElement(Lle,{points:n,clipPathId:e,props:a}))}function Mle(r){try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}function Nle(r){var{clipPathId:e,props:t,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=r,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:f,animationEasing:h,animateNewValues:p,width:g,height:y,onAnimationEnd:b,onAnimationStart:v}=t,E=i.current,S=j1(s,"recharts-line-"),w=L.useRef(S),[A,T]=L.useState(!1),I=!A,D=L.useCallback(()=>{typeof b=="function"&&b(),T(!1)},[b]),P=L.useCallback(()=>{typeof v=="function"&&v(),T(!0)},[v]),k=Mle(n.current),M=L.useRef(0);w.current!==S&&(M.current=a.current,w.current=S);var B=M.current;return L.createElement(kle,{points:s,showLabels:I},t.children,L.createElement(U1,{animationId:S,begin:c,duration:f,isActive:l,easing:h,onAnimationEnd:D,onAnimationStart:P,key:S},C=>{var W=Vn(B,k+B,C),Y=Math.min(W,k),q;if(l)if(o){var $="".concat(o).split(/[,\s]+/gim).map(Z=>parseFloat(Z));q=Ple(Y,k,$)}else q=$6(k,Y);else q=o==null?void 0:String(o);if(C>0&&k>0&&(i.current=s,a.current=Math.max(a.current,Y)),E){var z=E.length/s.length,K=C===1?s:s.map((Z,X)=>{var H=Math.floor(X*z);if(E[H]){var G=E[H];return wa(wa({},Z),{},{x:Vn(G.x,Z.x,C),y:Vn(G.y,Z.y,C)})}return p?wa(wa({},Z),{},{x:Vn(g*2,Z.x,C),y:Vn(y/2,Z.y,C)}):wa(wa({},Z),{},{x:Z.x,y:Z.y})});return i.current=K,L.createElement(VN,{props:t,points:K,clipPathId:e,pathRef:n,strokeDasharray:q})}return L.createElement(VN,{props:t,points:s,clipPathId:e,pathRef:n,strokeDasharray:q})}),L.createElement(Mae,{label:t.label}))}function Fle(r){var{clipPathId:e,props:t}=r,n=L.useRef(null),i=L.useRef(0),a=L.useRef(null);return L.createElement(Nle,{props:t,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var Ble=(r,e)=>{var t,n;return{x:(t=r.x)!==null&&t!==void 0?t:void 0,y:(n=r.y)!==null&&n!==void 0?n:void 0,value:r.value,errorVal:xn(r.payload,e)}};class Ule extends L.Component{render(){var{hide:e,dot:t,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:l,width:c,height:f,id:h,needClip:p,zIndex:g}=this.props;if(e)return null;var y=mt("recharts-line",i),b=h,{r:v,strokeWidth:E}=Sle(t),S=D6(t),w=v*2+E,A=p?"url(#clipPath-".concat(S?"":"dots-").concat(b,")"):void 0;return L.createElement(to,{zIndex:g},L.createElement(qo,{className:y},p&&L.createElement("defs",null,L.createElement(Jse,{clipPathId:b,xAxisId:a,yAxisId:s}),!S&&L.createElement("clipPath",{id:"clipPath-dots-".concat(b)},L.createElement("rect",{x:l-w/2,y:o-w/2,width:c+w,height:f+w}))),L.createElement(Zse,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:Ble,errorBarOffset:0},L.createElement(Fle,{props:this.props,clipPathId:b}))),L.createElement(Kse,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var H6={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:In.line,type:"linear"};function jle(r){var e=Sn(r,H6),{activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,hide:c,isAnimationActive:f,label:h,legendType:p,xAxisId:g,yAxisId:y,id:b}=e,v=zA(e,_le),{needClip:E}=P6(g,y),S=$A(),w=dy(),A=ri(),T=ot(M=>xle(M,g,y,A,b));if(w!=="horizontal"&&w!=="vertical"||T==null||S==null)return null;var{height:I,width:D,x:P,y:k}=S;return L.createElement(Ule,Ud({},v,{id:b,connectNulls:o,dot:l,activeDot:t,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:f,hide:c,label:h,legendType:p,xAxisId:g,yAxisId:y,points:T,layout:w,height:I,width:D,left:P,top:k,needClip:E}))}function $le(r){var{layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=r;return l.map((c,f)=>{var h=xn(c,s);if(e==="horizontal"){var p=mk({axis:t,ticks:i,bandSize:o,entry:c,index:f}),g=Xr(h)?null:n.scale(h);return{x:p,y:g,value:h,payload:c}}var y=Xr(h)?null:t.scale(h),b=mk({axis:n,ticks:a,bandSize:o,entry:c,index:f});return y==null||b==null?null:{x:y,y:b,value:h,payload:c}}).filter(Boolean)}function Hle(r){var e=Sn(r,H6),t=ri();return L.createElement(lse,{id:e.id,type:"line"},n=>L.createElement(L.Fragment,null,L.createElement(ise,{legendPayload:Ile(e)}),L.createElement(Cle,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),L.createElement(mse,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:t}),L.createElement(jle,Ud({},e,{id:n}))))}var Il=L.memo(Hle,HA);Il.displayName="Line";var Gle=["domain","range"],Kle=["domain","range"];function QN(r,e){if(r==null)return{};var t,n,i=Yle(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Yle(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function XN(r,e){return r===e?!0:Array.isArray(r)&&r.length===2&&Array.isArray(e)&&e.length===2?r[0]===e[0]&&r[1]===e[1]:!1}function G6(r,e){if(r===e)return!0;var{domain:t,range:n}=r,i=QN(r,Gle),{domain:a,range:s}=e,o=QN(e,Kle);return!XN(t,a)||!XN(n,s)?!1:HA(i,o)}var zle=["dangerouslySetInnerHTML","ticks"],qle=["id"];function yT(){return yT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yT.apply(null,arguments)}function ZN(r,e){if(r==null)return{};var t,n,i=Wle(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Wle(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Vle(r){var e=Lr(),t=L.useRef(null);return L.useLayoutEffect(()=>{t.current===null?e(Ise(r)):t.current!==r&&e(Cse({prev:t.current,next:r})),t.current=r},[r,e]),L.useLayoutEffect(()=>()=>{t.current&&(e(Rse(t.current)),t.current=null)},[e]),null}var Qle=r=>{var{xAxisId:e,className:t}=r,n=ot(C3),i=ri(),a="xAxis",s=ot(v=>Xc(v,a,e,i)),o=ot(v=>F4(v,a,e,i)),l=ot(v=>ore(v,e)),c=ot(v=>hre(v,e)),f=ot(v=>n4(v,e));if(l==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:h,ticks:p}=r,g=ZN(r,zle),{id:y}=f,b=ZN(f,qle);return L.createElement(YA,yT({},g,b,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:mt("recharts-".concat(a," ").concat(a),t),viewBox:n,ticks:o,axisType:a}))},Xle={allowDataOverflow:Wr.allowDataOverflow,allowDecimals:Wr.allowDecimals,allowDuplicatedCategory:Wr.allowDuplicatedCategory,angle:Wr.angle,axisLine:Rs.axisLine,height:Wr.height,hide:!1,includeHidden:Wr.includeHidden,interval:Wr.interval,minTickGap:Wr.minTickGap,mirror:Wr.mirror,orientation:Wr.orientation,padding:Wr.padding,reversed:Wr.reversed,scale:Wr.scale,tick:Wr.tick,tickCount:Wr.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:Wr.type,xAxisId:0},Zle=r=>{var e=Sn(r,Xle);return L.createElement(L.Fragment,null,L.createElement(Vle,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),L.createElement(Qle,e))},vT=L.memo(Zle,G6);vT.displayName="XAxis";var Jle=["dangerouslySetInnerHTML","ticks"],eue=["id"];function bT(){return bT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},bT.apply(null,arguments)}function JN(r,e){if(r==null)return{};var t,n,i=tue(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function tue(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function rue(r){var e=Lr(),t=L.useRef(null);return L.useLayoutEffect(()=>{t.current===null?e(Pse(r)):t.current!==r&&e(Lse({prev:t.current,next:r})),t.current=r},[r,e]),L.useLayoutEffect(()=>()=>{t.current&&(e(kse(t.current)),t.current=null)},[e]),null}var nue=r=>{var{yAxisId:e,className:t,width:n,label:i}=r,a=L.useRef(null),s=L.useRef(null),o=ot(C3),l=ri(),c=Lr(),f="yAxis",h=ot(T=>Xc(T,f,e,l)),p=ot(T=>gre(T,e)),g=ot(T=>mre(T,e)),y=ot(T=>F4(T,f,e,l)),b=ot(T=>i4(T,e));if(L.useLayoutEffect(()=>{if(!(n!=="auto"||!p||jA(i)||L.isValidElement(i)||b==null)){var T=a.current;if(T){var I=T.getCalculatedWidth();Math.round(p.width)!==Math.round(I)&&c(Mse({id:e,width:I}))}}},[y,p,c,i,e,n,b]),p==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:v,ticks:E}=r,S=JN(r,Jle),{id:w}=b,A=JN(b,eue);return L.createElement(YA,bT({},S,A,{ref:a,labelRef:s,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:mt("recharts-".concat(f," ").concat(f),t),viewBox:o,ticks:y,axisType:f}))},iue={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:Vr.allowDecimals,allowDuplicatedCategory:Vr.allowDuplicatedCategory,angle:Vr.angle,axisLine:Rs.axisLine,hide:!1,includeHidden:Vr.includeHidden,interval:Vr.interval,minTickGap:Vr.minTickGap,mirror:Vr.mirror,orientation:Vr.orientation,padding:Vr.padding,reversed:Vr.reversed,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:Vr.type,width:Vr.width,yAxisId:0},aue=r=>{var e=Sn(r,iue);return L.createElement(L.Fragment,null,L.createElement(rue,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),L.createElement(nue,e))},xT=L.memo(aue,G6);xT.displayName="YAxis";var sue=(r,e)=>e,qA=ke([sue,ir,e4,Gr,e6,eo,Rne,dn],Bne),WA=r=>{var e=r.currentTarget.getBoundingClientRect(),t=e.width/r.currentTarget.offsetWidth,n=e.height/r.currentTarget.offsetHeight;return{chartX:Math.round((r.clientX-e.left)/t),chartY:Math.round((r.clientY-e.top)/n)}},K6=Yi("mouseClick"),Y6=sh();Y6.startListening({actionCreator:K6,effect:(r,e)=>{var t=r.payload,n=qA(e.getState(),WA(t));n?.activeIndex!=null&&e.dispatch(Ire({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ST=Yi("mouseMove"),z6=sh(),am=null;z6.startListening({actionCreator:ST,effect:(r,e)=>{var t=r.payload;am!==null&&cancelAnimationFrame(am);var n=WA(t);am=requestAnimationFrame(()=>{var i=e.getState(),a=IA(i,i.tooltip.settings.shared);if(a==="axis"){var s=qA(i,n);s?.activeIndex!=null?e.dispatch(z4({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(Y4())}am=null})}});var e2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},q6=ti({name:"rootProps",initialState:e2,reducers:{updateOptions:(r,e)=>{var t;r.accessibilityLayer=e.payload.accessibilityLayer,r.barCategoryGap=e.payload.barCategoryGap,r.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:e2.barGap,r.barSize=e.payload.barSize,r.maxBarSize=e.payload.maxBarSize,r.stackOffset=e.payload.stackOffset,r.syncId=e.payload.syncId,r.syncMethod=e.payload.syncMethod,r.className=e.payload.className,r.baseValue=e.payload.baseValue,r.reverseStackOrder=e.payload.reverseStackOrder}}}),oue=q6.reducer,{updateOptions:lue}=q6.actions,W6=ti({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(r,e)=>e.payload}}),{updatePolarOptions:dbe}=W6.actions,uue=W6.reducer,V6=Yi("keyDown"),Q6=Yi("focus"),VA=sh();VA.startListening({actionCreator:V6,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip,a=r.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=CA(i,Jc(t),gh(t),Sh(t)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=eo(t);if(a==="Enter"){var c=s0(t,"axis","hover",String(i.index));e.dispatch(cT({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=xre(t),h=f==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,g=o+p*h;if(!(l==null||g>=l.length||g<0)){var y=s0(t,"axis","hover",String(g));e.dispatch(cT({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}}});VA.startListening({actionCreator:Q6,effect:(r,e)=>{var t=e.getState(),n=t.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var a="0",s=s0(t,"axis","hover",String(a));e.dispatch(cT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ji=Yi("externalEvent"),X6=sh(),$S=new Map;X6.startListening({actionCreator:ji,effect:(r,e)=>{var{handler:t,reactEvent:n}=r.payload;if(t!=null){n.persist();var i=n.type,a=$S.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:mne(o),activeDataKey:hne(o),activeIndex:Fd(o),activeLabel:n6(o),activeTooltipIndex:Fd(o),isTooltipActive:gne(o)};t(l,n)}finally{$S.delete(i)}});$S.set(i,s)}}});var cue=ke([Zc],r=>r.tooltipItemPayloads),fue=ke([cue,bh,(r,e,t)=>e,(r,e,t)=>t],(r,e,t,n)=>{var i=r.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,t);return s}}}),Z6=Yi("touchMove"),J6=sh();J6.startListening({actionCreator:Z6,effect:(r,e)=>{var t=r.payload;if(!(t.touches==null||t.touches.length===0)){var n=e.getState(),i=IA(n,n.tooltip.settings.shared);if(i==="axis"){var a=qA(n,WA({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));a?.activeIndex!=null&&e.dispatch(z4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=t.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(J7),f=(s=l.getAttribute(eQ))!==null&&s!==void 0?s:void 0,h=fue(e.getState(),c,f);e.dispatch(Ore({activeDataKey:f,activeIndex:c,activeCoordinate:h}))}}}});var due=Xj({brush:Soe,cartesianAxis:Nse,chartData:gie,errorBars:zse,graphicalItems:hse,layout:F7,legend:qQ,options:fie,polarAxis:Fae,polarOptions:uue,referenceElements:Ooe,rootProps:oue,tooltip:Cre,zIndex:Zne}),hue=function(e){return l7({reducer:due,preloadedState:e,middleware:t=>{var n;return t({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([Y6.middleware,z6.middleware,VA.middleware,X6.middleware,J6.middleware])},enhancers:t=>{var n=t;return typeof t=="function"&&(n=t()),n.concat(d3({type:"raf"}))},devTools:uh.devToolsEnabled})};function pue(r){var{preloadedState:e,children:t,reduxStoreName:n}=r,i=ri(),a=L.useRef(null);if(i)return t;a.current==null&&(a.current=hue(e));var s=T1;return L.createElement(yoe,{context:s,store:a.current},t)}function mue(r){var{layout:e,margin:t}=r,n=Lr(),i=ri();return L.useEffect(()=>{i||(n(k7(e)),n(L7(t)))},[n,i,e,t]),null}var gue=L.memo(mue,HA);function yue(r){var e=Lr();return L.useEffect(()=>{e(lue(r))},[e,r]),null}function t2(r){var{zIndex:e,isPanorama:t}=r,n=t?"recharts-zindex-panorama-":"recharts-zindex-",i=O6("".concat(n).concat(e)),a=Lr();return L.useLayoutEffect(()=>(a(Qne({zIndex:e,elementId:i,isPanorama:t})),()=>{a(Xne({zIndex:e,isPanorama:t}))}),[a,e,i,t]),L.createElement("g",{tabIndex:-1,id:i})}function r2(r){var{children:e,isPanorama:t}=r,n=ot(jne);if(!n||n.length===0)return e;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return L.createElement(L.Fragment,null,i.map(s=>L.createElement(t2,{key:s,zIndex:s,isPanorama:t})),e,a.map(s=>L.createElement(t2,{key:s,zIndex:s,isPanorama:t})))}var vue=["children"];function bue(r,e){if(r==null)return{};var t,n,i=xue(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function xue(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function h0(){return h0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},h0.apply(null,arguments)}var Sue={width:"100%",height:"100%",display:"block"},Eue=L.forwardRef((r,e)=>{var t=M1(),n=N1(),i=G3();if(!ja(t)||!ja(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=r,c,f;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),L.createElement(m1,h0({},s,{title:o,desc:l,role:f,tabIndex:c,width:t,height:n,style:Sue,ref:e}),a)}),wue=r=>{var{children:e}=r,t=ot(cy);if(!t)return null;var{width:n,height:i,y:a,x:s}=t;return L.createElement(m1,{width:n,height:i,x:s,y:a},e)},n2=L.forwardRef((r,e)=>{var{children:t}=r,n=bue(r,vue),i=ri();return i?L.createElement(wue,null,L.createElement(r2,{isPanorama:!0},t)):L.createElement(Eue,h0({ref:e},n),L.createElement(r2,{isPanorama:!1},t))});function _ue(){var r=Lr(),[e,t]=L.useState(null),n=ot(Z7);return L.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Zr(a)&&a!==n&&r(N7(a))}},[e,r,n]),t}function i2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(t),!0).forEach(function(n){Aue(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):i2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Aue(r,e,t){return(e=Due(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Due(r){var e=Oue(r,"string");return typeof e=="symbol"?e:e+""}function Oue(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jl(){return Jl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jl.apply(null,arguments)}var Iue=()=>(Tie(),null);function p0(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=parseFloat(r);if(!Number.isNaN(e))return e}return 0}var Cue=L.forwardRef((r,e)=>{var t,n,i=L.useRef(null),[a,s]=L.useState({containerWidth:p0((t=r.style)===null||t===void 0?void 0:t.width),containerHeight:p0((n=r.style)===null||n===void 0?void 0:n.height)}),o=L.useCallback((c,f)=>{s(h=>{var p=Math.round(c),g=Math.round(f);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),l=L.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=c.getBoundingClientRect();o(f,h);var p=y=>{var{width:b,height:v}=y[0].contentRect;o(b,v)},g=new ResizeObserver(p);g.observe(c),i.current=g}},[e,o]);return L.useEffect(()=>()=>{var c=i.current;c?.disconnect()},[o]),L.createElement(L.Fragment,null,L.createElement(hy,{width:a.containerWidth,height:a.containerHeight}),L.createElement("div",Jl({ref:l},r)))}),Rue=L.forwardRef((r,e)=>{var{width:t,height:n}=r,[i,a]=L.useState({containerWidth:p0(t),containerHeight:p0(n)}),s=L.useCallback((l,c)=>{a(f=>{var h=Math.round(l),p=Math.round(c);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),o=L.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:f}=l.getBoundingClientRect();s(c,f)}},[e,s]);return L.createElement(L.Fragment,null,L.createElement(hy,{width:i.containerWidth,height:i.containerHeight}),L.createElement("div",Jl({ref:o},r)))}),Pue=L.forwardRef((r,e)=>{var{width:t,height:n}=r;return L.createElement(L.Fragment,null,L.createElement(hy,{width:t,height:n}),L.createElement("div",Jl({ref:e},r)))}),Lue=L.forwardRef((r,e)=>{var{width:t,height:n}=r;return Bs(t)||Bs(n)?L.createElement(Rue,Jl({},r,{ref:e})):L.createElement(Pue,Jl({},r,{ref:e}))});function kue(r){return r===!0?Cue:Lue}var Mue=L.forwardRef((r,e)=>{var{children:t,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:f,onMouseMove:h,onMouseUp:p,onTouchEnd:g,onTouchMove:y,onTouchStart:b,style:v,width:E,responsive:S,dispatchTouchEvents:w=!0}=r,A=L.useRef(null),T=Lr(),[I,D]=L.useState(null),[P,k]=L.useState(null),M=_ue(),B=k1(),C=B?.width>0?B.width:E,W=B?.height>0?B.height:i,Y=L.useCallback(te=>{M(te),typeof e=="function"&&e(te),D(te),k(te),te!=null&&(A.current=te)},[M,e,D,k]),q=L.useCallback(te=>{T(K6(te)),T(ji({handler:a,reactEvent:te}))},[T,a]),$=L.useCallback(te=>{T(ST(te)),T(ji({handler:c,reactEvent:te}))},[T,c]),z=L.useCallback(te=>{T(Y4()),T(ji({handler:f,reactEvent:te}))},[T,f]),K=L.useCallback(te=>{T(ST(te)),T(ji({handler:h,reactEvent:te}))},[T,h]),Z=L.useCallback(()=>{T(Q6())},[T]),X=L.useCallback(te=>{T(V6(te.key))},[T]),H=L.useCallback(te=>{T(ji({handler:s,reactEvent:te}))},[T,s]),G=L.useCallback(te=>{T(ji({handler:o,reactEvent:te}))},[T,o]),J=L.useCallback(te=>{T(ji({handler:l,reactEvent:te}))},[T,l]),fe=L.useCallback(te=>{T(ji({handler:p,reactEvent:te}))},[T,p]),se=L.useCallback(te=>{T(ji({handler:b,reactEvent:te}))},[T,b]),be=L.useCallback(te=>{w&&T(Z6(te)),T(ji({handler:y,reactEvent:te}))},[T,w,y]),oe=L.useCallback(te=>{T(ji({handler:g,reactEvent:te}))},[T,g]),re=kue(S);return L.createElement(c6.Provider,{value:I},L.createElement(dj.Provider,{value:P},L.createElement(re,{width:C??v?.width,height:W??v?.height,className:mt("recharts-wrapper",n),style:Tue({position:"relative",cursor:"default",width:C,height:W},v),onClick:q,onContextMenu:H,onDoubleClick:G,onFocus:Z,onKeyDown:X,onMouseDown:J,onMouseEnter:$,onMouseLeave:z,onMouseMove:K,onMouseUp:fe,onTouchEnd:oe,onTouchMove:be,onTouchStart:se,ref:Y},L.createElement(Iue,null),t)))}),Nue=["width","height","responsive","children","className","style","compact","title","desc"];function Fue(r,e){if(r==null)return{};var t,n,i=Bue(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Bue(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}var Uue=L.forwardRef((r,e)=>{var{width:t,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:c,desc:f}=r,h=Fue(r,Nue),p=Fa(h);return l?L.createElement(L.Fragment,null,L.createElement(hy,{width:t,height:n}),L.createElement(n2,{otherAttributes:p,title:c,desc:f},a)):L.createElement(Mue,{className:s,style:o,width:t,height:n,responsive:i??!1,onClick:r.onClick,onMouseLeave:r.onMouseLeave,onMouseEnter:r.onMouseEnter,onMouseMove:r.onMouseMove,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,onContextMenu:r.onContextMenu,onDoubleClick:r.onDoubleClick,onTouchStart:r.onTouchStart,onTouchMove:r.onTouchMove,onTouchEnd:r.onTouchEnd},L.createElement(n2,{otherAttributes:p,title:c,desc:f,ref:e},L.createElement(Coe,null,a)))});function ET(){return ET=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ET.apply(null,arguments)}var jue={top:5,right:5,bottom:5,left:5},$ue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:jue,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Hue=L.forwardRef(function(e,t){var n,i=Sn(e.categoricalChartProps,$ue),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return L.createElement(pue,{preloadedState:{options:f},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:a},L.createElement(xoe,{chartData:c.data}),L.createElement(gue,{layout:i.layout,margin:i.margin}),L.createElement(yue,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),L.createElement(Uue,ET({},i,{ref:t})))}),Gue=["axis"],a2=L.forwardRef((r,e)=>L.createElement(Hue,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Gue,tooltipPayloadSearcher:uie,categoricalChartProps:r,ref:e}));const e8=6048e5,Kue=864e5,Py=6e4,Ly=36e5,Yue=1e3,s2=Symbol.for("constructDateFrom");function Ht(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&s2 in r?r[s2](e):r instanceof Date?new r.constructor(e):new Date(e)}function st(r,e){return Ht(e||r,r)}function ua(r,e,t){const n=st(r,t?.in);return isNaN(e)?Ht(t?.in||r,NaN):(e&&n.setDate(n.getDate()+e),n)}function da(r,e,t){const n=st(r,t?.in);if(isNaN(e))return Ht(r,NaN);if(!e)return n;const i=n.getDate(),a=Ht(r,n.getTime());a.setMonth(n.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function t8(r,e,t){return Ht(r,+st(r)+e)}function zue(r,e,t){return t8(r,e*Ly)}let que={};function uu(){return que}function Ks(r,e){const t=uu(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=st(r,e?.in),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Cc(r,e){return Ks(r,{...e,weekStartsOn:1})}function r8(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=Ht(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=Cc(i),s=Ht(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Cc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function m0(r){const e=st(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function ro(r,...e){const t=Ht.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function eu(r,e){const t=st(r,e?.in);return t.setHours(0,0,0,0),t}function Rc(r,e,t){const[n,i]=ro(t?.in,r,e),a=eu(n),s=eu(i),o=+a-m0(a),l=+s-m0(s);return Math.round((o-l)/Kue)}function Wue(r,e){const t=r8(r,e),n=Ht(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Cc(n)}function jd(r,e,t){const n=st(r,t?.in);return n.setTime(n.getTime()+e*Py),n}function QA(r,e,t){return da(r,e*3,t)}function Vue(r,e,t){return t8(r,e*1e3)}function g0(r,e,t){return ua(r,e*7,t)}function Ps(r,e,t){return da(r,e*12,t)}function o2(r,e){let t,n=e?.in;return r.forEach(i=>{!n&&typeof i=="object"&&(n=Ht.bind(null,i));const a=st(i,n);(!t||t<a||isNaN(+a))&&(t=a)}),Ht(n,t||NaN)}function l2(r,e){let t,n=e?.in;return r.forEach(i=>{!n&&typeof i=="object"&&(n=Ht.bind(null,i));const a=st(i,n);(!t||t>a||isNaN(+a))&&(t=a)}),Ht(n,t||NaN)}function Que(r,e,t){const[n,i]=ro(t?.in,r,e);return+eu(n)==+eu(i)}function Ls(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function y0(r){return!(!Ls(r)&&typeof r!="number"||isNaN(+st(r)))}function v0(r,e,t){const[n,i]=ro(t?.in,r,e),a=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return a*12+s}function $o(r,e){const t=st(r,e?.in);return Math.trunc(t.getMonth()/3)+1}function b0(r,e,t){const[n,i]=ro(t?.in,r,e),a=n.getFullYear()-i.getFullYear(),s=$o(n)-$o(i);return a*4+s}function x0(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()-i.getFullYear()}function Xue(r,e,t){const[n,i]=ro(t?.in,r,e),a=u2(n,i),s=Math.abs(Rc(n,i));n.setDate(n.getDate()-a*s);const o=+(u2(n,i)===-a),l=a*(s-o);return l===0?0:l}function u2(r,e){const t=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function n8(r,e){const t=st(r,e?.in);return t.setHours(23,59,59,999),t}function i8(r,e){const t=st(r,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wT(r,e){const t=st(r,e?.in),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function a8(r,e){const t=st(r,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function s8(r,e){const t=st(r,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function ky(r,e){const t=st(r,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Zue(r,e){const t=uu(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=st(r,e?.in),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const Jue={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ece=(r,e,t)=>{let n;const i=Jue[r];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function HS(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const tce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ice={date:HS({formats:tce,defaultWidth:"full"}),time:HS({formats:rce,defaultWidth:"full"}),dateTime:HS({formats:nce,defaultWidth:"full"})},ace={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sce=(r,e,t,n)=>ace[r];function td(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=t?.width?String(t.width):s;i=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=t?.width?String(t.width):r.defaultWidth;i=r.values[o]||r.values[s]}const a=r.argumentCallback?r.argumentCallback(e):e;return i[a]}}const oce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hce=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},pce={ordinalNumber:hce,era:td({values:oce,defaultWidth:"wide"}),quarter:td({values:lce,defaultWidth:"wide",argumentCallback:r=>r-1}),month:td({values:uce,defaultWidth:"wide"}),day:td({values:cce,defaultWidth:"wide"}),dayPeriod:td({values:fce,defaultWidth:"wide",formattingValues:dce,defaultFormattingWidth:"wide"})};function rd(r){return(e,t={})=>{const n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?gce(o,h=>h.test(s)):mce(o,h=>h.test(s));let c;c=r.valueCallback?r.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(s.length);return{value:c,rest:f}}}function mce(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function gce(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function yce(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const i=n[0],a=e.match(r.parsePattern);if(!a)return null;let s=r.valueCallback?r.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const vce=/^(\d+)(th|st|nd|rd)?/i,bce=/\d+/i,xce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sce={any:[/^b/i,/^(a|c)/i]},Ece={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wce={any:[/1/i,/2/i,/3/i,/4/i]},_ce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ace={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Dce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ice={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cce={ordinalNumber:yce({matchPattern:vce,parsePattern:bce,valueCallback:r=>parseInt(r,10)}),era:rd({matchPatterns:xce,defaultMatchWidth:"wide",parsePatterns:Sce,defaultParseWidth:"any"}),quarter:rd({matchPatterns:Ece,defaultMatchWidth:"wide",parsePatterns:wce,defaultParseWidth:"any",valueCallback:r=>r+1}),month:rd({matchPatterns:_ce,defaultMatchWidth:"wide",parsePatterns:Tce,defaultParseWidth:"any"}),day:rd({matchPatterns:Ace,defaultMatchWidth:"wide",parsePatterns:Dce,defaultParseWidth:"any"}),dayPeriod:rd({matchPatterns:Oce,defaultMatchWidth:"any",parsePatterns:Ice,defaultParseWidth:"any"})},o8={code:"en-US",formatDistance:ece,formatLong:ice,formatRelative:sce,localize:pce,match:Cce,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rce(r,e){const t=st(r,e?.in);return Rc(t,ky(t))+1}function XA(r,e){const t=st(r,e?.in),n=+Cc(t)-+Wue(t);return Math.round(n/e8)+1}function ZA(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=uu(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Ht(e?.in||r,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);const o=Ks(s,e),l=Ht(e?.in||r,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=Ks(l,e);return+t>=+o?n+1:+t>=+c?n:n-1}function Pce(r,e){const t=uu(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=ZA(r,e),a=Ht(e?.in||r,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ks(a,e)}function l8(r,e){const t=st(r,e?.in),n=+Ks(t,e)-+Pce(t,e);return Math.round(n/e8)+1}function Bt(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Co={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Bt(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Bt(t+1,2)},d(r,e){return Bt(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Bt(r.getHours()%12||12,e.length)},H(r,e){return Bt(r.getHours(),e.length)},m(r,e){return Bt(r.getMinutes(),e.length)},s(r,e){return Bt(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return Bt(i,e.length)}},Xu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},c2={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Co.y(r,e)},Y:function(r,e,t,n){const i=ZA(r,n),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Bt(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Bt(a,e.length)},R:function(r,e){const t=r8(r);return Bt(t,e.length)},u:function(r,e){const t=r.getFullYear();return Bt(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Bt(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Bt(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Co.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Bt(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const i=l8(r,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Bt(i,e.length)},I:function(r,e,t){const n=XA(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Bt(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Co.d(r,e)},D:function(r,e,t){const n=Rce(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Bt(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Bt(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Bt(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Bt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let i;switch(n===12?i=Xu.noon:n===0?i=Xu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let i;switch(n>=17?i=Xu.evening:n>=12?i=Xu.afternoon:n>=4?i=Xu.morning:i=Xu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Co.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Co.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Bt(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Bt(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Co.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Co.s(r,e)},S:function(r,e){return Co.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return d2(n);case"XXXX":case"XX":return Cl(n);case"XXXXX":case"XXX":default:return Cl(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return d2(n);case"xxxx":case"xx":return Cl(n);case"xxxxx":case"xxx":default:return Cl(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+f2(n,":");case"OOOO":default:return"GMT"+Cl(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+f2(n,":");case"zzzz":default:return"GMT"+Cl(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return Bt(n,e.length)},T:function(r,e,t){return Bt(+r,e.length)}};function f2(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),a=n%60;return a===0?t+String(i):t+String(i)+e+Bt(a,2)}function d2(r,e){return r%60===0?(r>0?"-":"+")+Bt(Math.abs(r)/60,2):Cl(r,e)}function Cl(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Bt(Math.trunc(n/60),2),a=Bt(n%60,2);return t+i+e+a}const h2=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},u8=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Lce=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return h2(r,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",h2(n,e)).replace("{{time}}",u8(i,e))},_T={p:u8,P:Lce},kce=/^D+$/,Mce=/^Y+$/,Nce=["D","DD","YY","YYYY"];function Fce(r){return kce.test(r)}function Bce(r){return Mce.test(r)}function Uce(r,e,t){const n=jce(r,e,t);if(console.warn(n),Nce.includes(r))throw new RangeError(n)}function jce(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $ce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gce=/^'([^]*?)'?$/,Kce=/''/g,Yce=/[a-zA-Z]/;function p2(r,e,t){const n=uu(),i=t?.locale??n.locale??o8,a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=st(r,t?.in);if(!y0(o))throw new RangeError("Invalid time value");let l=e.match(Hce).map(f=>{const h=f[0];if(h==="p"||h==="P"){const p=_T[h];return p(f,i.formatLong)}return f}).join("").match($ce).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const h=f[0];if(h==="'")return{isToken:!1,value:zce(f)};if(c2[h])return{isToken:!0,value:f};if(h.match(Yce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(f=>{if(!f.isToken)return f.value;const h=f.value;(!t?.useAdditionalWeekYearTokens&&Bce(h)||!t?.useAdditionalDayOfYearTokens&&Fce(h))&&Uce(h,e,String(r));const p=c2[h[0]];return p(o,h,i.localize,c)}).join("")}function zce(r){const e=r.match(Gce);return e?e[1].replace(Kce,"'"):r}function m2(r,e){return st(r,e?.in).getDate()}function qce(r,e){return st(r,e?.in).getDay()}function Wce(r,e){const t=st(r,e?.in),n=t.getFullYear(),i=t.getMonth(),a=Ht(t,0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}function Vce(){return Object.assign({},uu())}function sa(r,e){return st(r,e?.in).getHours()}function Qce(r,e){const t=st(r,e?.in).getDay();return t===0?7:t}function oa(r,e){return st(r,e?.in).getMinutes()}function Qn(r,e){return st(r,e?.in).getMonth()}function Ko(r){return st(r).getSeconds()}function TT(r){return+st(r)}function Tt(r,e){return st(r,e?.in).getFullYear()}function Qo(r,e){return+st(r)>+st(e)}function Ra(r,e){return+st(r)<+st(e)}function Xce(r,e){return+st(r)==+st(e)}function Zce(r,e){const t=Jce(e)?new e(0):Ht(e,0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}function Jce(r){return typeof r=="function"&&r.prototype?.constructor===r}const efe=10;class c8{subPriority=0;validate(e,t){return!0}}class tfe extends c8{constructor(e,t,n,i,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class rfe extends c8{priority=efe;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>Ht(t,n))}set(e,t){return t.timestampIsSet?e:Ht(e,Zce(e,this.context))}}class Mt{run(e,t,n,i){const a=this.parse(e,t,n,i);return a?{setter:new tfe(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}class nfe extends Mt{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Tr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Aa={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ar(r,e){return r&&{value:e(r.value),rest:r.rest}}function hr(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Da(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:n*(i*Ly+a*Py+s*Yue),rest:e.slice(t[0].length)}}function f8(r){return hr(Tr.anyDigitsSigned,r)}function br(r,e){switch(r){case 1:return hr(Tr.singleDigit,e);case 2:return hr(Tr.twoDigits,e);case 3:return hr(Tr.threeDigits,e);case 4:return hr(Tr.fourDigits,e);default:return hr(new RegExp("^\\d{1,"+r+"}"),e)}}function S0(r,e){switch(r){case 1:return hr(Tr.singleDigitSigned,e);case 2:return hr(Tr.twoDigitsSigned,e);case 3:return hr(Tr.threeDigitsSigned,e);case 4:return hr(Tr.fourDigitsSigned,e);default:return hr(new RegExp("^-?\\d{1,"+r+"}"),e)}}function JA(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function d8(r,e){const t=e>0,n=t?e:1-e;let i;if(n<=50)i=r||100;else{const a=n+50,s=Math.trunc(a/100)*100,o=r>=a%100;i=r+s-(o?100:0)}return t?i:1-i}function h8(r){return r%400===0||r%4===0&&r%100!==0}class ife extends Mt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const i=a=>({year:a,isTwoDigitYear:t==="yy"});switch(t){case"y":return Ar(br(4,e),i);case"yo":return Ar(n.ordinalNumber(e,{unit:"year"}),i);default:return Ar(br(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const i=e.getFullYear();if(n.isTwoDigitYear){const s=d8(n.year,i);return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}const a=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class afe extends Mt{priority=130;parse(e,t,n){const i=a=>({year:a,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Ar(br(4,e),i);case"Yo":return Ar(n.ordinalNumber(e,{unit:"year"}),i);default:return Ar(br(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,i){const a=ZA(e,i);if(n.isTwoDigitYear){const o=d8(n.year,a);return e.setFullYear(o,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ks(e,i)}const s=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(s,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ks(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class sfe extends Mt{priority=130;parse(e,t){return S0(t==="R"?4:t.length,e)}set(e,t,n){const i=Ht(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Cc(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class ofe extends Mt{priority=130;parse(e,t){return S0(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class lfe extends Mt{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return br(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class ufe extends Mt{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return br(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class cfe extends Mt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const i=a=>a-1;switch(t){case"M":return Ar(hr(Tr.month,e),i);case"MM":return Ar(br(2,e),i);case"Mo":return Ar(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class ffe extends Mt{priority=110;parse(e,t,n){const i=a=>a-1;switch(t){case"L":return Ar(hr(Tr.month,e),i);case"LL":return Ar(br(2,e),i);case"Lo":return Ar(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function dfe(r,e,t){const n=st(r,t?.in),i=l8(n,t)-e;return n.setDate(n.getDate()-i*7),st(n,t?.in)}class hfe extends Mt{priority=100;parse(e,t,n){switch(t){case"w":return hr(Tr.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,i){return Ks(dfe(e,n,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function pfe(r,e,t){const n=st(r,t?.in),i=XA(n,t)-e;return n.setDate(n.getDate()-i*7),n}class mfe extends Mt{priority=100;parse(e,t,n){switch(t){case"I":return hr(Tr.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Cc(pfe(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const gfe=[31,28,31,30,31,30,31,31,30,31,30,31],yfe=[31,29,31,30,31,30,31,31,30,31,30,31];class vfe extends Mt{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return hr(Tr.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return br(t.length,e)}}validate(e,t){const n=e.getFullYear(),i=h8(n),a=e.getMonth();return i?t>=1&&t<=yfe[a]:t>=1&&t<=gfe[a]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class bfe extends Mt{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return hr(Tr.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return br(t.length,e)}}validate(e,t){const n=e.getFullYear();return h8(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function eD(r,e,t){const n=uu(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=st(r,t?.in),s=a.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(s+c)%7:(l+c)%7-(s+c)%7;return ua(a,f,t)}class xfe extends Mt{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=eD(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Sfe extends Mt{priority=90;parse(e,t,n,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return Ar(br(t.length,e),a);case"eo":return Ar(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=eD(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Efe extends Mt{priority=90;parse(e,t,n,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return Ar(br(t.length,e),a);case"co":return Ar(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return e=eD(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function wfe(r,e,t){const n=st(r,t?.in),i=Qce(n,t),a=e-i;return ua(n,a,t)}class _fe extends Mt{priority=90;parse(e,t,n){const i=a=>a===0?7:a;switch(t){case"i":case"ii":return br(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Ar(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return Ar(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Ar(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Ar(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=wfe(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Tfe extends Mt{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(JA(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Afe extends Mt{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(JA(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Dfe extends Mt{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(JA(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Ofe extends Mt{priority=70;parse(e,t,n){switch(t){case"h":return hr(Tr.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):!i&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Ife extends Mt{priority=70;parse(e,t,n){switch(t){case"H":return hr(Tr.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Cfe extends Mt{priority=70;parse(e,t,n){switch(t){case"K":return hr(Tr.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Rfe extends Mt{priority=70;parse(e,t,n){switch(t){case"k":return hr(Tr.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return br(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Pfe extends Mt{priority=60;parse(e,t,n){switch(t){case"m":return hr(Tr.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class Lfe extends Mt{priority=50;parse(e,t,n){switch(t){case"s":return hr(Tr.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return br(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class kfe extends Mt{priority=30;parse(e,t){const n=i=>Math.trunc(i*Math.pow(10,-t.length+3));return Ar(br(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class Mfe extends Mt{priority=10;parse(e,t){switch(t){case"X":return Da(Aa.basicOptionalMinutes,e);case"XX":return Da(Aa.basic,e);case"XXXX":return Da(Aa.basicOptionalSeconds,e);case"XXXXX":return Da(Aa.extendedOptionalSeconds,e);case"XXX":default:return Da(Aa.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Ht(e,e.getTime()-m0(e)-n)}incompatibleTokens=["t","T","x"]}class Nfe extends Mt{priority=10;parse(e,t){switch(t){case"x":return Da(Aa.basicOptionalMinutes,e);case"xx":return Da(Aa.basic,e);case"xxxx":return Da(Aa.basicOptionalSeconds,e);case"xxxxx":return Da(Aa.extendedOptionalSeconds,e);case"xxx":default:return Da(Aa.extended,e)}}set(e,t,n){return t.timestampIsSet?e:Ht(e,e.getTime()-m0(e)-n)}incompatibleTokens=["t","T","X"]}class Ffe extends Mt{priority=40;parse(e){return f8(e)}set(e,t,n){return[Ht(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Bfe extends Mt{priority=20;parse(e){return f8(e)}set(e,t,n){return[Ht(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Ufe={G:new nfe,y:new ife,Y:new afe,R:new sfe,u:new ofe,Q:new lfe,q:new ufe,M:new cfe,L:new ffe,w:new hfe,I:new mfe,d:new vfe,D:new bfe,E:new xfe,e:new Sfe,c:new Efe,i:new _fe,a:new Tfe,b:new Afe,B:new Dfe,h:new Ofe,H:new Ife,K:new Cfe,k:new Rfe,m:new Pfe,s:new Lfe,S:new kfe,X:new Mfe,x:new Nfe,t:new Ffe,T:new Bfe},jfe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$fe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hfe=/^'([^]*?)'?$/,Gfe=/''/g,Kfe=/\S/,Yfe=/[a-zA-Z]/;function zfe(r,e,t,n){const i=()=>Ht(n?.in||t,NaN),a=Vce(),s=n?.locale??a.locale??o8,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!e)return r?i():st(t,n?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:s},f=[new rfe(n?.in,t)],h=e.match($fe).map(v=>{const E=v[0];if(E in _T){const S=_T[E];return S(v,s.formatLong)}return v}).join("").match(jfe),p=[];for(let v of h){const E=v[0],S=Ufe[E];if(S){const{incompatibleTokens:w}=S;if(Array.isArray(w)){const T=p.find(I=>w.includes(I.token)||I.token===E);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${v}\` at the same time`)}else if(S.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${v}\` and any other token at the same time`);p.push({token:E,fullToken:v});const A=S.run(r,v,s.match,c);if(!A)return i();f.push(A.setter),r=A.rest}else{if(E.match(Yfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(v==="''"?v="'":E==="'"&&(v=qfe(v)),r.indexOf(v)===0)r=r.slice(v.length);else return i()}}if(r.length>0&&Kfe.test(r))return i();const g=f.map(v=>v.priority).sort((v,E)=>E-v).filter((v,E,S)=>S.indexOf(v)===E).map(v=>f.filter(E=>E.priority===v).sort((E,S)=>S.subPriority-E.subPriority)).map(v=>v[0]);let y=st(t,n?.in);if(isNaN(+y))return i();const b={};for(const v of g){if(!v.validate(y,c))return i();const E=v.set(y,b,c);Array.isArray(E)?(y=E[0],Object.assign(b,E[1])):y=E}return y}function qfe(r){return r.match(Hfe)[1].replace(Gfe,"'")}function Wfe(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function Vfe(r,e,t){const[n,i]=ro(t?.in,r,e);return+wT(n)==+wT(i)}function Qfe(r,e,t){const[n,i]=ro(t?.in,r,e);return n.getFullYear()===i.getFullYear()}function $d(r,e,t){const n=+st(r,t?.in),[i,a]=[+st(e.start,t?.in),+st(e.end,t?.in)].sort((s,o)=>s-o);return n>=i&&n<=a}function Xfe(r,e,t){return ua(r,-1,t)}function Zfe(r,e){const t=()=>Ht(e?.in,NaN),i=rde(r);let a;if(i.date){const c=nde(i.date,2);a=ide(c.restDateString,c.year)}if(!a||isNaN(+a))return t();const s=+a;let o=0,l;if(i.time&&(o=ade(i.time),isNaN(o)))return t();if(i.timezone){if(l=sde(i.timezone),isNaN(l))return t()}else{const c=new Date(s+o),f=st(0,e?.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return st(s+o+l,e?.in)}const sm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jfe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ede=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tde=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rde(r){const e={},t=r.split(sm.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],sm.timeZoneDelimiter.test(e.date)&&(e.date=r.split(sm.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const i=sm.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function nde(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?i:a*100,restDateString:r.slice((n[1]||n[2]).length)}}function ide(r,e){if(e===null)return new Date(NaN);const t=r.match(Jfe);if(!t)return new Date(NaN);const n=!!t[4],i=nd(t[1]),a=nd(t[2])-1,s=nd(t[3]),o=nd(t[4]),l=nd(t[5])-1;if(n)return fde(e,o,l)?ode(e,o,l):new Date(NaN);{const c=new Date(0);return!ude(e,a,s)||!cde(e,i)?new Date(NaN):(c.setUTCFullYear(e,a,Math.max(i,s)),c)}}function nd(r){return r?parseInt(r):1}function ade(r){const e=r.match(ede);if(!e)return NaN;const t=GS(e[1]),n=GS(e[2]),i=GS(e[3]);return dde(t,n,i)?t*Ly+n*Py+i*1e3:NaN}function GS(r){return r&&parseFloat(r.replace(",","."))||0}function sde(r){if(r==="Z")return 0;const e=r.match(tde);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return hde(n,i)?t*(n*Ly+i*Py):NaN}function ode(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const i=n.getUTCDay()||7,a=(e-1)*7+t+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const lde=[31,null,31,30,31,30,31,31,30,31,30,31];function p8(r){return r%400===0||r%4===0&&r%100!==0}function ude(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(lde[e]||(p8(r)?29:28))}function cde(r,e){return e>=1&&e<=(p8(r)?366:365)}function fde(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function dde(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function hde(r,e){return e>=0&&e<=59}function gi(r,e,t){const n=st(r,t?.in),i=n.getFullYear(),a=n.getDate(),s=Ht(r,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=Wce(s);return n.setMonth(e,Math.min(a,o)),n}function lg(r,e,t){const n=st(r,t?.in);return n.setHours(e),n}function ug(r,e,t){const n=st(r,t?.in);return n.setMinutes(e),n}function lc(r,e,t){const n=st(r,t?.in),i=Math.trunc(n.getMonth()/3)+1,a=e-i;return gi(n,n.getMonth()+a*3)}function cg(r,e,t){const n=st(r,t?.in);return n.setSeconds(e),n}function Ea(r,e,t){const n=st(r,t?.in);return isNaN(+n)?Ht(r,NaN):(n.setFullYear(e),n)}function zl(r,e,t){return da(r,-e,t)}function m8(r,e,t){return QA(r,-1,t)}function g2(r,e,t){return g0(r,-1,t)}function Pc(r,e,t){return Ps(r,-e,t)}function My(){return typeof window<"u"}function ef(r){return g8(r)?(r.nodeName||"").toLowerCase():"#document"}function _i(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function qa(r){var e;return(e=(g8(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function g8(r){return My()?r instanceof Node||r instanceof _i(r).Node:!1}function Cn(r){return My()?r instanceof Element||r instanceof _i(r).Element:!1}function Ha(r){return My()?r instanceof HTMLElement||r instanceof _i(r).HTMLElement:!1}function y2(r){return!My()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof _i(r).ShadowRoot}const pde=new Set(["inline","contents"]);function wh(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=qi(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!pde.has(i)}const mde=new Set(["table","td","th"]);function gde(r){return mde.has(ef(r))}const yde=[":popover-open",":modal"];function Ny(r){return yde.some(e=>{try{return r.matches(e)}catch{return!1}})}const vde=["transform","translate","scale","rotate","perspective"],bde=["transform","translate","scale","rotate","perspective","filter"],xde=["paint","layout","strict","content"];function tD(r){const e=rD(),t=Cn(r)?qi(r):r;return vde.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||bde.some(n=>(t.willChange||"").includes(n))||xde.some(n=>(t.contain||"").includes(n))}function Sde(r){let e=Xo(r);for(;Ha(e)&&!Lc(e);){if(tD(e))return e;if(Ny(e))return null;e=Xo(e)}return null}function rD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ede=new Set(["html","body","#document"]);function Lc(r){return Ede.has(ef(r))}function qi(r){return _i(r).getComputedStyle(r)}function Fy(r){return Cn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Xo(r){if(ef(r)==="html")return r;const e=r.assignedSlot||r.parentNode||y2(r)&&r.host||qa(r);return y2(e)?e.host:e}function y8(r){const e=Xo(r);return Lc(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ha(e)&&wh(e)?e:y8(e)}function Hd(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=y8(r),a=i===((n=r.ownerDocument)==null?void 0:n.body),s=_i(i);if(a){const o=AT(s);return e.concat(s,s.visualViewport||[],wh(i)?i:[],o&&t?Hd(o):[])}return e.concat(i,Hd(i,[],t))}function AT(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}const kc=Math.min,ql=Math.max,E0=Math.round,om=Math.floor,Na=r=>({x:r,y:r}),wde={left:"right",right:"left",bottom:"top",top:"bottom"},_de={start:"end",end:"start"};function Tde(r,e,t){return ql(r,kc(e,t))}function By(r,e){return typeof r=="function"?r(e):r}function Mc(r){return r.split("-")[0]}function _h(r){return r.split("-")[1]}function Ade(r){return r==="x"?"y":"x"}function nD(r){return r==="y"?"height":"width"}const Dde=new Set(["top","bottom"]);function Bl(r){return Dde.has(Mc(r))?"y":"x"}function iD(r){return Ade(Bl(r))}function Ode(r,e,t){t===void 0&&(t=!1);const n=_h(r),i=iD(r),a=nD(i);let s=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=w0(s)),[s,w0(s)]}function Ide(r){const e=w0(r);return[DT(r),e,DT(e)]}function DT(r){return r.replace(/start|end/g,e=>_de[e])}const v2=["left","right"],b2=["right","left"],Cde=["top","bottom"],Rde=["bottom","top"];function Pde(r,e,t){switch(r){case"top":case"bottom":return t?e?b2:v2:e?v2:b2;case"left":case"right":return e?Cde:Rde;default:return[]}}function Lde(r,e,t,n){const i=_h(r);let a=Pde(Mc(r),t==="start",n);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(DT)))),a}function w0(r){return r.replace(/left|right|bottom|top/g,e=>wde[e])}function kde(r){return{top:0,right:0,bottom:0,left:0,...r}}function v8(r){return typeof r!="number"?kde(r):{top:r,right:r,bottom:r,left:r}}function _0(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}var Mde=typeof document<"u",Nde=function(){},T0=Mde?L.useLayoutEffect:Nde;const Fde={...WT},Bde=Fde.useInsertionEffect,Ude=Bde||(r=>r());function jde(r){const e=L.useRef(()=>{});return Ude(()=>{e.current=r}),L.useCallback(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function x2(r,e,t){let{reference:n,floating:i}=r;const a=Bl(e),s=iD(e),o=nD(s),l=Mc(e),c=a==="y",f=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,p=n[o]/2-i[o]/2;let g;switch(l){case"top":g={x:f,y:n.y-i.height};break;case"bottom":g={x:f,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-i.width,y:h};break;default:g={x:n.x,y:n.y}}switch(_h(e)){case"start":g[s]-=p*(t&&c?-1:1);break;case"end":g[s]+=p*(t&&c?-1:1);break}return g}const $de=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:r,floating:e,strategy:i}),{x:f,y:h}=x2(c,n,l),p=n,g={},y=0;for(let b=0;b<o.length;b++){const{name:v,fn:E}=o[b],{x:S,y:w,data:A,reset:T}=await E({x:f,y:h,initialPlacement:n,placement:p,strategy:i,middlewareData:g,rects:c,platform:s,elements:{reference:r,floating:e}});f=S??f,h=w??h,g={...g,[v]:{...g[v],...A}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await s.getElementRects({reference:r,floating:e,strategy:i}):T.rects),{x:f,y:h}=x2(c,p,l)),b=-1)}return{x:f,y:h,placement:p,strategy:i,middlewareData:g}};async function Hde(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=By(e,r),y=v8(g),v=o[p?h==="floating"?"reference":"floating":h],E=_0(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(v)))==null||t?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:f,strategy:l})),S=h==="floating"?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},T=_0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:w,strategy:l}):S);return{top:(E.top-T.top+y.top)/A.y,bottom:(T.bottom-E.bottom+y.bottom)/A.y,left:(E.left-T.left+y.left)/A.x,right:(T.right-E.right+y.right)/A.x}}const Gde=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:f=0}=By(r,e)||{};if(c==null)return{};const h=v8(f),p={x:t,y:n},g=iD(i),y=nD(g),b=await s.getDimensions(c),v=g==="y",E=v?"top":"left",S=v?"bottom":"right",w=v?"clientHeight":"clientWidth",A=a.reference[y]+a.reference[g]-p[g]-a.floating[y],T=p[g]-a.reference[g],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let D=I?I[w]:0;(!D||!await(s.isElement==null?void 0:s.isElement(I)))&&(D=o.floating[w]||a.floating[y]);const P=A/2-T/2,k=D/2-b[y]/2-1,M=kc(h[E],k),B=kc(h[S],k),C=M,W=D-b[y]-B,Y=D/2-b[y]/2+P,q=Tde(C,Y,W),$=!l.arrow&&_h(i)!=null&&Y!==q&&a.reference[y]/2-(Y<C?M:B)-b[y]/2<0,z=$?Y<C?Y-C:Y-W:0;return{[g]:p[g]+z,data:{[g]:q,centerOffset:Y-q-z,...$&&{alignmentOffset:z}},reset:$}}}),Kde=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=By(r,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const E=Mc(i),S=Bl(o),w=Mc(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=p||(w||!b?[w0(o)]:Ide(o)),I=y!=="none";!p&&I&&T.push(...Lde(o,b,y,A));const D=[o,...T],P=await Hde(e,v),k=[];let M=((n=a.flip)==null?void 0:n.overflows)||[];if(f&&k.push(P[E]),h){const Y=Ode(i,s,A);k.push(P[Y[0]],P[Y[1]])}if(M=[...M,{placement:i,overflows:k}],!k.every(Y=>Y<=0)){var B,C;const Y=(((B=a.flip)==null?void 0:B.index)||0)+1,q=D[Y];if(q&&(!(h==="alignment"?S!==Bl(q):!1)||M.every(K=>Bl(K.placement)===S?K.overflows[0]>0:!0)))return{data:{index:Y,overflows:M},reset:{placement:q}};let $=(C=M.filter(z=>z.overflows[0]<=0).sort((z,K)=>z.overflows[1]-K.overflows[1])[0])==null?void 0:C.placement;if(!$)switch(g){case"bestFit":{var W;const z=(W=M.filter(K=>{if(I){const Z=Bl(K.placement);return Z===S||Z==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,X)=>Z+X,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:W[0];z&&($=z);break}case"initialPlacement":$=o;break}if(i!==$)return{reset:{placement:$}}}return{}}}},Yde=new Set(["left","top"]);async function zde(r,e){const{placement:t,platform:n,elements:i}=r,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=Mc(t),o=_h(t),l=Bl(t)==="y",c=Yde.has(s)?-1:1,f=a&&l?-1:1,h=By(e,r);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),l?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const qde=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await zde(e,r);return s===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}};function b8(r){const e=qi(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ha(r),a=i?r.offsetWidth:t,s=i?r.offsetHeight:n,o=E0(t)!==a||E0(n)!==s;return o&&(t=a,n=s),{width:t,height:n,$:o}}function aD(r){return Cn(r)?r:r.contextElement}function gc(r){const e=aD(r);if(!Ha(e))return Na(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=b8(e);let s=(a?E0(t.width):t.width)/n,o=(a?E0(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Wde=Na(0);function x8(r){const e=_i(r);return!rD()||!e.visualViewport?Wde:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vde(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==_i(r)?!1:e}function tu(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),a=aD(r);let s=Na(1);e&&(n?Cn(n)&&(s=gc(n)):s=gc(r));const o=Vde(a,t,n)?x8(a):Na(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(a){const p=_i(a),g=n&&Cn(n)?_i(n):n;let y=p,b=AT(y);for(;b&&n&&g!==y;){const v=gc(b),E=b.getBoundingClientRect(),S=qi(b),w=E.left+(b.clientLeft+parseFloat(S.paddingLeft))*v.x,A=E.top+(b.clientTop+parseFloat(S.paddingTop))*v.y;l*=v.x,c*=v.y,f*=v.x,h*=v.y,l+=w,c+=A,y=_i(b),b=AT(y)}}return _0({width:f,height:h,x:l,y:c})}function Uy(r,e){const t=Fy(r).scrollLeft;return e?e.left+t:tu(qa(r)).left+t}function S8(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-Uy(r,t),i=t.top+e.scrollTop;return{x:n,y:i}}function Qde(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const a=i==="fixed",s=qa(n),o=e?Ny(e.floating):!1;if(n===s||o&&a)return t;let l={scrollLeft:0,scrollTop:0},c=Na(1);const f=Na(0),h=Ha(n);if((h||!h&&!a)&&((ef(n)!=="body"||wh(s))&&(l=Fy(n)),Ha(n))){const g=tu(n);c=gc(n),f.x=g.x+n.clientLeft,f.y=g.y+n.clientTop}const p=s&&!h&&!a?S8(s,l):Na(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+f.x+p.x,y:t.y*c.y-l.scrollTop*c.y+f.y+p.y}}function Xde(r){return Array.from(r.getClientRects())}function Zde(r){const e=qa(r),t=Fy(r),n=r.ownerDocument.body,i=ql(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=ql(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let s=-t.scrollLeft+Uy(r);const o=-t.scrollTop;return qi(n).direction==="rtl"&&(s+=ql(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:s,y:o}}const S2=25;function Jde(r,e){const t=_i(r),n=qa(r),i=t.visualViewport;let a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const f=rD();(!f||f&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=Uy(n);if(c<=0){const f=n.ownerDocument,h=f.body,p=getComputedStyle(h),g=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(n.clientWidth-h.clientWidth-g);y<=S2&&(a-=y)}else c<=S2&&(a+=c);return{width:a,height:s,x:o,y:l}}const ehe=new Set(["absolute","fixed"]);function the(r,e){const t=tu(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,a=Ha(r)?gc(r):Na(1),s=r.clientWidth*a.x,o=r.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:s,height:o,x:l,y:c}}function E2(r,e,t){let n;if(e==="viewport")n=Jde(r,t);else if(e==="document")n=Zde(qa(r));else if(Cn(e))n=the(e,t);else{const i=x8(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return _0(n)}function E8(r,e){const t=Xo(r);return t===e||!Cn(t)||Lc(t)?!1:qi(t).position==="fixed"||E8(t,e)}function rhe(r,e){const t=e.get(r);if(t)return t;let n=Hd(r,[],!1).filter(o=>Cn(o)&&ef(o)!=="body"),i=null;const a=qi(r).position==="fixed";let s=a?Xo(r):r;for(;Cn(s)&&!Lc(s);){const o=qi(s),l=tD(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&ehe.has(i.position)||wh(s)&&!l&&E8(r,s))?n=n.filter(f=>f!==s):i=o,s=Xo(s)}return e.set(r,n),n}function nhe(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=[...t==="clippingAncestors"?Ny(e)?[]:rhe(e,this._c):[].concat(t),n],o=s[0],l=s.reduce((c,f)=>{const h=E2(e,f,i);return c.top=ql(h.top,c.top),c.right=kc(h.right,c.right),c.bottom=kc(h.bottom,c.bottom),c.left=ql(h.left,c.left),c},E2(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ihe(r){const{width:e,height:t}=b8(r);return{width:e,height:t}}function ahe(r,e,t){const n=Ha(e),i=qa(e),a=t==="fixed",s=tu(r,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=Na(0);function c(){l.x=Uy(i)}if(n||!n&&!a)if((ef(e)!=="body"||wh(i))&&(o=Fy(e)),n){const g=tu(e,!0,a,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();a&&!n&&i&&c();const f=i&&!n&&!a?S8(i,o):Na(0),h=s.left+o.scrollLeft-l.x-f.x,p=s.top+o.scrollTop-l.y-f.y;return{x:h,y:p,width:s.width,height:s.height}}function KS(r){return qi(r).position==="static"}function w2(r,e){if(!Ha(r)||qi(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return qa(r)===t&&(t=t.ownerDocument.body),t}function w8(r,e){const t=_i(r);if(Ny(r))return t;if(!Ha(r)){let i=Xo(r);for(;i&&!Lc(i);){if(Cn(i)&&!KS(i))return i;i=Xo(i)}return t}let n=w2(r,e);for(;n&&gde(n)&&KS(n);)n=w2(n,e);return n&&Lc(n)&&KS(n)&&!tD(n)?t:n||Sde(r)||t}const she=async function(r){const e=this.getOffsetParent||w8,t=this.getDimensions,n=await t(r.floating);return{reference:ahe(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ohe(r){return qi(r).direction==="rtl"}const lhe={convertOffsetParentRelativeRectToViewportRelativeRect:Qde,getDocumentElement:qa,getClippingRect:nhe,getOffsetParent:w8,getElementRects:she,getClientRects:Xde,getDimensions:ihe,getScale:gc,isElement:Cn,isRTL:ohe};function _8(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function uhe(r,e){let t=null,n;const i=qa(r);function a(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=r.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(o||e(),!p||!g)return;const y=om(h),b=om(i.clientWidth-(f+p)),v=om(i.clientHeight-(h+g)),E=om(f),w={rootMargin:-y+"px "+-b+"px "+-v+"px "+-E+"px",threshold:ql(0,kc(1,l))||1};let A=!0;function T(I){const D=I[0].intersectionRatio;if(D!==l){if(!A)return s();D?s(!1,D):n=setTimeout(()=>{s(!1,1e-7)},1e3)}D===1&&!_8(c,r.getBoundingClientRect())&&s(),A=!1}try{t=new IntersectionObserver(T,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(T,w)}t.observe(r)}return s(!0),a}function che(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=aD(r),f=i||a?[...c?Hd(c):[],...Hd(e)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",t,{passive:!0}),a&&E.addEventListener("resize",t)});const h=c&&o?uhe(c,t):null;let p=-1,g=null;s&&(g=new ResizeObserver(E=>{let[S]=E;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let y,b=l?tu(r):null;l&&v();function v(){const E=tu(r);b&&!_8(b,E)&&t(),b=E,y=requestAnimationFrame(v)}return t(),()=>{var E;f.forEach(S=>{i&&S.removeEventListener("scroll",t),a&&S.removeEventListener("resize",t)}),h?.(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const fhe=qde,dhe=Kde,_2=Gde,hhe=(r,e,t)=>{const n=new Map,i={platform:lhe,...t},a={...i.platform,_c:n};return $de(r,e,{...i,platform:a})};var phe=typeof document<"u",mhe=function(){},fg=phe?L.useLayoutEffect:mhe;function A0(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,i;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!A0(r[n],e[n]))return!1;return!0}if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const a=i[n];if(!(a==="_owner"&&r.$$typeof)&&!A0(r[a],e[a]))return!1}return!0}return r!==r&&e!==e}function T8(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function T2(r,e){const t=T8(r);return Math.round(e*t)/t}function YS(r){const e=L.useRef(r);return fg(()=>{e.current=r}),e}function ghe(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=r,[f,h]=L.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=L.useState(n);A0(p,n)||g(n);const[y,b]=L.useState(null),[v,E]=L.useState(null),S=L.useCallback(K=>{K!==I.current&&(I.current=K,b(K))},[]),w=L.useCallback(K=>{K!==D.current&&(D.current=K,E(K))},[]),A=a||y,T=s||v,I=L.useRef(null),D=L.useRef(null),P=L.useRef(f),k=l!=null,M=YS(l),B=YS(i),C=YS(c),W=L.useCallback(()=>{if(!I.current||!D.current)return;const K={placement:e,strategy:t,middleware:p};B.current&&(K.platform=B.current),hhe(I.current,D.current,K).then(Z=>{const X={...Z,isPositioned:C.current!==!1};Y.current&&!A0(P.current,X)&&(P.current=X,Jd.flushSync(()=>{h(X)}))})},[p,e,t,B,C]);fg(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const Y=L.useRef(!1);fg(()=>(Y.current=!0,()=>{Y.current=!1}),[]),fg(()=>{if(A&&(I.current=A),T&&(D.current=T),A&&T){if(M.current)return M.current(A,T,W);W()}},[A,T,W,M,k]);const q=L.useMemo(()=>({reference:I,floating:D,setReference:S,setFloating:w}),[S,w]),$=L.useMemo(()=>({reference:A,floating:T}),[A,T]),z=L.useMemo(()=>{const K={position:t,left:0,top:0};if(!$.floating)return K;const Z=T2($.floating,f.x),X=T2($.floating,f.y);return o?{...K,transform:"translate("+Z+"px, "+X+"px)",...T8($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Z,top:X}},[t,o,$.floating,f.x,f.y]);return L.useMemo(()=>({...f,update:W,refs:q,elements:$,floatingStyles:z}),[f,W,q,$,z])}const yhe=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:i}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?_2({element:n.current,padding:i}).fn(t):{}:n?_2({element:n,padding:i}).fn(t):{}}}},vhe=(r,e)=>({...fhe(r),options:[r,e]}),bhe=(r,e)=>({...dhe(r),options:[r,e]}),xhe=(r,e)=>({...yhe(r),options:[r,e]}),She={...WT};let A2=!1,Ehe=0;const D2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ehe++;function whe(){const[r,e]=L.useState(()=>A2?D2():void 0);return T0(()=>{r==null&&e(D2())},[]),L.useEffect(()=>{A2=!0},[]),r}const _he=She.useId,A8=_he||whe,The=L.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:i},middlewareData:{arrow:a,shift:s}},width:o=14,height:l=7,tipRadius:c=0,strokeWidth:f=0,staticOffset:h,stroke:p,d:g,style:{transform:y,...b}={},...v}=e,E=A8(),[S,w]=L.useState(!1);if(T0(()=>{if(!i)return;qi(i).direction==="rtl"&&w(!0)},[i]),!i)return null;const[A,T]=n.split("-"),I=A==="top"||A==="bottom";let D=h;(I&&s!=null&&s.x||!I&&s!=null&&s.y)&&(D=null);const P=f*2,k=P/2,M=o/2*(c/-8+1),B=l/2*c/4,C=!!g,W=D&&T==="end"?"bottom":"top";let Y=D&&T==="end"?"right":"left";D&&S&&(Y=T==="end"?"left":"right");const q=a?.x!=null?D||a.x:"",$=a?.y!=null?D||a.y:"",z=g||"M0,0"+(" H"+o)+(" L"+(o-M)+","+(l-B))+(" Q"+o/2+","+l+" "+M+","+(l-B))+" Z",K={top:C?"rotate(180deg)":"",left:C?"rotate(90deg)":"rotate(-90deg)",bottom:C?"":"rotate(180deg)",right:C?"rotate(-90deg)":"rotate(90deg)"}[A];return j.jsxs("svg",{...v,"aria-hidden":!0,ref:t,width:C?o:o+P,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[Y]:q,[W]:$,[A]:I||C?"100%":"calc(100% - "+P/2+"px)",transform:[K,y].filter(Z=>!!Z).join(" "),...b},children:[P>0&&j.jsx("path",{clipPath:"url(#"+E+")",fill:"none",stroke:p,strokeWidth:P+(g?0:1),d:z}),j.jsx("path",{stroke:P&&!g?v.fill:"none",d:z}),j.jsx("clipPath",{id:E,children:j.jsx("rect",{x:-k,y:k*(C?-1:1),width:o+P,height:o})})]})});function Ahe(){const r=new Map;return{emit(e,t){var n;(n=r.get(e))==null||n.forEach(i=>i(t))},on(e,t){r.has(e)||r.set(e,new Set),r.get(e).add(t)},off(e,t){var n;(n=r.get(e))==null||n.delete(t)}}}const Dhe=L.createContext(null),Ohe=L.createContext(null),Ihe=()=>{var r;return((r=L.useContext(Dhe))==null?void 0:r.id)||null},Che=()=>L.useContext(Ohe);function Rhe(r){const{open:e=!1,onOpenChange:t,elements:n}=r,i=A8(),a=L.useRef({}),[s]=L.useState(()=>Ahe()),o=Ihe()!=null,[l,c]=L.useState(n.reference),f=jde((g,y,b)=>{a.current.openEvent=g?y:void 0,s.emit("openchange",{open:g,event:y,reason:b,nested:o}),t?.(g,y,b)}),h=L.useMemo(()=>({setPositionReference:c}),[]),p=L.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return L.useMemo(()=>({dataRef:a,open:e,onOpenChange:f,elements:p,events:s,floatingId:i,refs:h}),[e,f,p,s,i,h])}function Phe(r){r===void 0&&(r={});const{nodeId:e}=r,t=Rhe({...r,elements:{reference:null,floating:null,...r.elements}}),n=r.rootContext||t,i=n.elements,[a,s]=L.useState(null),[o,l]=L.useState(null),f=i?.domReference||a,h=L.useRef(null),p=Che();T0(()=>{f&&(h.current=f)},[f]);const g=ghe({...r,elements:{...i,...o&&{reference:o}}}),y=L.useCallback(w=>{const A=Cn(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(A),g.refs.setReference(A)},[g.refs]),b=L.useCallback(w=>{(Cn(w)||w===null)&&(h.current=w,s(w)),(Cn(g.refs.reference.current)||g.refs.reference.current===null||w!==null&&!Cn(w))&&g.refs.setReference(w)},[g.refs]),v=L.useMemo(()=>({...g.refs,setReference:b,setPositionReference:y,domReference:h}),[g.refs,b,y]),E=L.useMemo(()=>({...g.elements,domReference:f}),[g.elements,f]),S=L.useMemo(()=>({...g,...n,refs:v,elements:E,nodeId:e}),[g,v,E,e,n]);return T0(()=>{n.dataRef.current.floatingContext=S;const w=p?.nodesRef.current.find(A=>A.id===e);w&&(w.context=S)}),L.useMemo(()=>({...g,context:S,refs:v,elements:E}),[g,v,E,S])}var OT=function(e,t){return OT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},OT(e,t)};function hn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");OT(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _t=function(){return _t=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_t.apply(this,arguments)};function Pa(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}var Lhe=function(r){var e=r.showTimeSelectOnly,t=e===void 0?!1:e,n=r.showTime,i=n===void 0?!1:n,a=r.className,s=r.children,o=r.inline,l=t?"Choose Time":"Choose Date".concat(i?" and Time":"");return je.createElement("div",{className:a,"aria-label":l,role:o?void 0:"dialog","aria-modal":o?void 0:"true"},s)},khe=function(r,e){var t=L.useRef(null),n=L.useRef(r);L.useEffect(function(){n.current=r},[r]);var i=L.useCallback(function(a){var s,o=a.composed&&a.composedPath&&a.composedPath().find(function(l){return l instanceof Node})||a.target;t.current&&!t.current.contains(o)&&(e&&o instanceof HTMLElement&&o.classList.contains(e)||(s=n.current)===null||s===void 0||s.call(n,a))},[e]);return L.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),t},jy=function(r){var e=r.children,t=r.onClickOutside,n=r.className,i=r.containerRef,a=r.style,s=r.ignoreClass,o=khe(t,s);return je.createElement("div",{className:n,style:a,ref:function(l){o.current=l,i&&(i.current=l)}},e)},Qe;(function(r){r.ArrowUp="ArrowUp",r.ArrowDown="ArrowDown",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.PageUp="PageUp",r.PageDown="PageDown",r.Home="Home",r.End="End",r.Enter="Enter",r.Space=" ",r.Tab="Tab",r.Escape="Escape",r.Backspace="Backspace",r.X="x"})(Qe||(Qe={}));function D8(){var r=typeof window<"u"?window:globalThis;return r}var Th=12;function Pt(r){if(r==null)return new Date;var e=typeof r=="string"?Zfe(r):st(r);return Si(e)?e:new Date}function Zu(r,e,t,n,i){i===void 0&&(i=Pt());for(var a=Nc(t)||Nc(sD()),s=Array.isArray(e)?e:[e],o=0,l=s;o<l.length;o++){var c=l[o],f=zfe(r,c,i,{locale:a});if(Si(f)&&(!n||r===nr(f,c,t)))return f}return null}function Si(r,e){return y0(r)&&!Ra(r,new Date("1/1/1800"))}function nr(r,e,t){if(t==="en")return p2(r,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?Nc(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||Nc(sD()),p2(r,e,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function pi(r,e){var t=e.dateFormat,n=e.locale,i=Array.isArray(t)&&t.length>0?t[0]:t;return r&&nr(r,i,n)||""}var O8=" - ";function Mhe(r,e,t){if(!r&&!e)return"";var n=r?pi(r,t):"",i=e?pi(e,t):"",a=t.rangeSeparator||O8;return"".concat(n).concat(a).concat(i)}function Nhe(r,e){if(!r?.length)return"";var t=r[0]?pi(r[0],e):"";if(r.length===1)return t;if(r.length===2&&r[1]){var n=pi(r[1],e);return"".concat(t,", ").concat(n)}var i=r.length-1;return"".concat(t," (+").concat(i,")")}function lm(r,e){var t=e.hour,n=t===void 0?0:t,i=e.minute,a=i===void 0?0:i,s=e.second,o=s===void 0?0:s;return lg(ug(cg(r,o),a),n)}function Fhe(r){return XA(r)}function Bhe(r,e){return nr(r,"ddd",e)}function dd(r){return eu(r)}function Yo(r,e,t){var n=Nc(e||sD());return Ks(r,{locale:n,weekStartsOn:t})}function ks(r){return a8(r)}function hd(r){return ky(r)}function O2(r){return wT(r)}function I2(){return eu(Pt())}function C2(r){return n8(r)}function Uhe(r){return Zue(r)}function jhe(r){return i8(r)}function _a(r,e){return r&&e?Qfe(r,e):!r&&!e}function Dn(r,e){return r&&e?Wfe(r,e):!r&&!e}function D0(r,e){return r&&e?Vfe(r,e):!r&&!e}function Ot(r,e){return r&&e?Que(r,e):!r&&!e}function Ul(r,e){return r&&e?Xce(r,e):!r&&!e}function Rl(r,e,t){var n,i=eu(e),a=n8(t);try{n=$d(r,{start:i,end:a})}catch{n=!1}return n}function sD(){var r=D8();return r.__localeId__}function Nc(r){if(typeof r=="string"){var e=D8();return e.__localeData__?e.__localeData__[r]:void 0}else return r}function $he(r,e,t){return e(nr(r,"EEEE",t))}function Hhe(r,e){return nr(r,"EEEEEE",e)}function Ghe(r,e){return nr(r,"EEE",e)}function oD(r,e){return nr(gi(Pt(),r),"LLLL",e)}function I8(r,e){return nr(gi(Pt(),r),"LLL",e)}function Khe(r,e){return nr(lc(Pt(),r),"QQQ",e)}function Hi(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.excludeDateIntervals,o=t.includeDates,l=t.includeDateIntervals,c=t.filterDate,f=t.disabled;return f?!0:Ah(r,{minDate:n,maxDate:i})||a&&a.some(function(h){return h instanceof Date?Ot(r,h):Ot(r,h.date)})||s&&s.some(function(h){var p=h.start,g=h.end;return $d(r,{start:p,end:g})})||o&&!o.some(function(h){return Ot(r,h)})||l&&!l.some(function(h){var p=h.start,g=h.end;return $d(r,{start:p,end:g})})||c&&!c(Pt(r))||!1}function lD(r,e){var t=e===void 0?{}:e,n=t.excludeDates,i=t.excludeDateIntervals;return i&&i.length>0?i.some(function(a){var s=a.start,o=a.end;return $d(r,{start:s,end:o})}):n&&n.some(function(a){var s;return a instanceof Date?Ot(r,a):Ot(r,(s=a.date)!==null&&s!==void 0?s:new Date)})||!1}function C8(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate;return Ah(r,{minDate:n?a8(n):void 0,maxDate:i?i8(i):void 0})||a?.some(function(l){return Dn(r,l instanceof Date?l:l.date)})||s&&!s.some(function(l){return Dn(r,l)})||o&&!o(Pt(r))||!1}function um(r,e,t,n){var i=Tt(r),a=Qn(r),s=Tt(e),o=Qn(e),l=Tt(n);return i===s&&i===l?a<=t&&t<=o:i<s?l===i&&a<=t||l===s&&o>=t||l<s&&l>i:!1}function Yhe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates;return Ah(r,{minDate:n,maxDate:i})||a&&a.some(function(o){return Dn(o instanceof Date?o:o.date,r)})||s&&!s.some(function(o){return Dn(o,r)})||!1}function cm(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate,l=t.disabled;return l?!0:Ah(r,{minDate:n,maxDate:i})||a?.some(function(c){return D0(r,c instanceof Date?c:c.date)})||s&&!s.some(function(c){return D0(r,c)})||o&&!o(Pt(r))||!1}function fm(r,e,t){if(!e||!t||!y0(e)||!y0(t))return!1;var n=Tt(e),i=Tt(t);return n<=r&&i>=r}function dg(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate,l=t.disabled;if(l)return!0;var c=new Date(r,0,1);return Ah(c,{minDate:n?ky(n):void 0,maxDate:i?s8(i):void 0})||a?.some(function(f){return _a(c,f instanceof Date?f:f.date)})||s&&!s.some(function(f){return _a(c,f)})||o&&!o(Pt(c))||!1}function dm(r,e,t,n){var i=Tt(r),a=$o(r),s=Tt(e),o=$o(e),l=Tt(n);return i===s&&i===l?a<=t&&t<=o:i<s?l===i&&a<=t||l===s&&o>=t||l<s&&l>i:!1}function Ah(r,e){var t,n=e===void 0?{}:e,i=n.minDate,a=n.maxDate;return(t=i&&Rc(r,i)<0||a&&Rc(r,a)>0)!==null&&t!==void 0?t:!1}function R2(r,e){return e.some(function(t){return sa(t)===sa(r)&&oa(t)===oa(r)&&Ko(t)===Ko(r)})}function P2(r,e){var t=e===void 0?{}:e,n=t.excludeTimes,i=t.includeTimes,a=t.filterTime;return n&&R2(r,n)||i&&!R2(r,i)||a&&!a(r)||!1}function L2(r,e){var t=e.minTime,n=e.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var i=Pt();i=lg(i,sa(r)),i=ug(i,oa(r)),i=cg(i,Ko(r));var a=Pt();a=lg(a,sa(t)),a=ug(a,oa(t)),a=cg(a,Ko(t));var s=Pt();s=lg(s,sa(n)),s=ug(s,oa(n)),s=cg(s,Ko(n));var o;try{o=!$d(i,{start:a,end:s})}catch{o=!1}return o}function k2(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=zl(r,1);return n&&v0(n,a)>0||i&&i.every(function(s){return v0(s,a)>0})||!1}function M2(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=da(r,1);return n&&v0(a,n)>0||i&&i.every(function(s){return v0(a,s)>0})||!1}function zhe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=ky(r),s=m8(a);return n&&b0(n,s)>0||i&&i.every(function(o){return b0(o,s)>0})||!1}function qhe(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=s8(r),s=QA(a,1);return n&&b0(s,n)>0||i&&i.every(function(o){return b0(s,o)>0})||!1}function N2(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.includeDates,a=Pc(r,1);return n&&x0(n,a)>0||i&&i.every(function(s){return x0(s,a)>0})||!1}function Whe(r,e){var t=e===void 0?{}:e,n=t.minDate,i=t.yearItemNumber,a=i===void 0?Th:i,s=hd(Pc(r,a)),o=Os(s,a).endPeriod,l=n&&Tt(n);return l&&l>o||!1}function F2(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.includeDates,a=Ps(r,1);return n&&x0(a,n)>0||i&&i.every(function(s){return x0(a,s)>0})||!1}function Vhe(r,e){var t=e===void 0?{}:e,n=t.maxDate,i=t.yearItemNumber,a=i===void 0?Th:i,s=Ps(r,a),o=Os(s,a).startPeriod,l=n&&Tt(n);return l&&l<o||!1}function R8(r){var e=r.minDate,t=r.includeDates;if(t&&e){var n=t.filter(function(i){return Rc(i,e)>=0});return l2(n)}else return t?l2(t):e}function P8(r){var e=r.maxDate,t=r.includeDates;if(t&&e){var n=t.filter(function(i){return Rc(i,e)<=0});return o2(n)}else return t?o2(t):e}function B2(r,e){var t;r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var n=new Map,i=0,a=r.length;i<a;i++){var s=r[i];if(Ls(s)){var o=nr(s,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(e)||(l.push(e),n.set(o,l))}else if(typeof s=="object"){var c=Object.keys(s),f=(t=c[0])!==null&&t!==void 0?t:"",h=s[f];if(typeof f=="string"&&Array.isArray(h))for(var p=0,g=h.length;p<g;p++){var y=h[p];if(y){var o=nr(y,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(f)||(l.push(f),n.set(o,l))}}}}return n}function Qhe(r,e){return r.length!==e.length?!1:r.every(function(t,n){return t===e[n]})}function Xhe(r,e){r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return r.forEach(function(n){var i=n.date,a=n.holidayName;if(Ls(i)){var s=nr(i,"MM.dd.yyyy"),o=t.get(s)||{className:"",holidayNames:[]};if(!("className"in o&&o.className===e&&Qhe(o.holidayNames,[a]))){o.className=e;var l=o.holidayNames;o.holidayNames=l?Pa(Pa([],l,!0),[a],!1):[a],t.set(s,o)}}}),t}function Zhe(r,e,t,n,i){for(var a=i.length,s=[],o=0;o<a;o++){var l=r,c=i[o];c&&(l=zue(l,sa(c)),l=jd(l,oa(c)),l=Vue(l,Ko(c)));var f=jd(r,(t+1)*n);Qo(l,e)&&Ra(l,f)&&c!=null&&s.push(c)}return s}function U2(r){return r<10?"0".concat(r):"".concat(r)}function Os(r,e){e===void 0&&(e=Th);var t=Math.ceil(Tt(r)/e)*e,n=t-(e-1);return{startPeriod:n,endPeriod:t}}function Jhe(r){var e=new Date(r.getFullYear(),r.getMonth(),r.getDate()),t=new Date(r.getFullYear(),r.getMonth(),r.getDate(),24);return Math.round((+t-+e)/36e5)}function j2(r){var e=r.getSeconds(),t=r.getMilliseconds();return st(r.getTime()-e*1e3-t)}function L8(r,e){return j2(r).getTime()===j2(e).getTime()}function $2(r){if(!Ls(r))throw new Error("Invalid date");var e=new Date(r);return e.setHours(0,0,0,0),e}function zS(r,e){if(!Ls(r)||!Ls(e))throw new Error("Invalid date received");var t=$2(r),n=$2(e);return Ra(t,n)}function k8(r){return r.key===Qe.Space}var epe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.inputRef=je.createRef(),n.onTimeChange=function(i){var a,s;n.setState({time:i});var o=n.props.date,l=o instanceof Date&&!isNaN(+o),c=l?o:new Date;if(i?.includes(":")){var f=i.split(":"),h=f[0],p=f[1];c.setHours(Number(h)),c.setMinutes(Number(p))}(s=(a=n.props).onChange)===null||s===void 0||s.call(a,c)},n.renderTimeInput=function(){var i=n.state.time,a=n.props,s=a.date,o=a.timeString,l=a.customTimeInput;return l?L.cloneElement(l,{date:s,value:i,onChange:n.onTimeChange}):je.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var c;(c=n.inputRef.current)===null||c===void 0||c.focus()},required:!0,value:i,onChange:function(c){n.onTimeChange(c.target.value||o)}})},n.state={time:n.props.timeString},n}return e.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},e.prototype.render=function(){return je.createElement("div",{className:"react-datepicker__input-time-container"},je.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),je.createElement("div",{className:"react-datepicker-time__input-container"},je.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(L.Component),tpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dayEl=L.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var i,a,s=n.key;s===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,n)},t.isSameDay=function(n){return Ot(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var i=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return t.isSameDayOrWeek(s)}):t.isSameDayOrWeek(t.props.selected),a=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!i&&t.isSameDayOrWeek(t.props.preSelection)&&!a},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Hi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(){return lD(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Ot(t.props.day,Yo(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&Ot(n,Yo(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,i=n.day,a=n.highlightDates;if(!a)return!1;var s=nr(i,"MM.dd.yyyy");return a.get(s)},t.getHolidaysClass=function(){var n,i=t.props,a=i.day,s=i.holidays;if(!s)return[void 0];var o=nr(a,"MM.dd.yyyy");return s.has(o)?[(n=s.get(o))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Rl(i,a,s)},t.isInSelectingRange=function(){var n,i=t.props,a=i.day,s=i.selectsStart,o=i.selectsEnd,l=i.selectsRange,c=i.selectsDisabledDaysInRange,f=i.startDate,h=i.swapRange,p=i.endDate,g=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;if(!(s||o||l)||!g||!c&&t.isDisabled())return!1;if(s&&p&&(Ra(g,p)||Ul(g,p)))return Rl(a,g,p);if(o&&f&&(Qo(g,f)||Ul(g,f)))return Rl(a,f,g);if(l&&f&&!p){if(Ul(g,f)||Qo(g,f))return Rl(a,f,g);if(h&&Ra(g,f))return Rl(a,g,f)}return!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.startDate,o=i.selectsStart,l=i.swapRange,c=i.selectsRange,f=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return o?Ot(a,f):c&&l&&s&&f?Ot(a,Ra(f,s)?f:s):Ot(a,s)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var i=t.props,a=i.day,s=i.endDate,o=i.selectsEnd,l=i.selectsRange,c=i.swapRange,f=i.startDate,h=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return o?Ot(a,h):l&&c&&f&&h?Ot(a,Ra(h,f)?f:h):l?Ot(a,h):Ot(a,s)},t.isRangeStart=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Ot(a,i)},t.isRangeEnd=function(){var n=t.props,i=n.day,a=n.startDate,s=n.endDate;return!a||!s?!1:Ot(s,i)},t.isWeekend=function(){var n=qce(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Qn(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Qn(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Pt())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(i){return t.isSameDayOrWeek(i)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var i=t.props.dayClassName?t.props.dayClassName(n):void 0;return mt("react-datepicker__day",i,"react-datepicker__day--"+Bhe(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,i=n.day,a=n.ariaLabelPrefixWhenEnabled,s=a===void 0?"Choose":a,o=n.ariaLabelPrefixWhenDisabled,l=o===void 0?"Not available":o,c=t.isDisabled()||t.isExcluded()?l:s;return"".concat(c," ").concat(nr(i,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,i=n.day,a=n.holidays,s=a===void 0?new Map:a,o=n.excludeDates,l=nr(i,"MM.dd.yyyy"),c=[];return s.has(l)&&c.push.apply(c,s.get(l).holidayNames),t.isExcluded()&&c.push(o?.filter(function(f){return f instanceof Date?Ot(f,i):Ot(f?.date,i)}).map(function(f){if(!(f instanceof Date))return f?.message})),c.join(", ")},t.getTabIndex=function(){var n=t.props.selected,i=t.props.preSelection,a=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&Ot(i,n))?0:-1;return a},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(m2(t.props.day),t.props.day):m2(t.props.day)},t.render=function(){return je.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&je.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,n,i;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(L.Component),rpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.weekNumberEl=L.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var i,a,s=n.key;s===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(a=(i=t.props).handleOnKeyDown)===null||a===void 0||a.call(i,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ot(t.props.date,t.props.selected)&&Ot(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Ot(t.props.date,t.props.selected)&&Ot(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var i=!1;t.getTabIndex()===0&&!n?.isInputFocused&&Ot(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(i=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,n=t.weekNumber,i=t.isWeekDisabled,a=t.ariaLabelPrefix,s=a===void 0?e.defaultProps.ariaLabelPrefix:a,o=t.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!i,"react-datepicker__week-number--selected":!!o&&Ot(this.props.date,this.props.selected)};return je.createElement("div",{ref:this.weekNumberEl,className:mt(l),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},e})(L.Component),npe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isDisabled=function(n){return Hi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,i){t.props.onDayClick&&t.props.onDayClick(n,i)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,i,a){for(var s,o,l,c=new Date(n),f=0;f<7;f++){var h=new Date(n);h.setDate(h.getDate()+f);var p=!t.isDisabled(h);if(p){c=h;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(c,i,a),t.props.showWeekPicker&&t.handleDayClick(c,a),((s=t.props.shouldCloseOnSelect)!==null&&s!==void 0?s:e.defaultProps.shouldCloseOnSelect)&&((l=(o=t.props).setOpen)===null||l===void 0||l.call(o,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):Fhe(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),i=ua(n,6),a=new Date(n);a<=i;){if(!t.isDisabled(a))return!1;a=ua(a,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),i=[],a=t.formatWeekNumber(n);if(t.props.showWeekNumber){var s=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,a):void 0;i.push(je.createElement(rpe,_t({key:"W"},e.defaultProps,t.props,{weekNumber:a,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map(function(o){var l=ua(n,o);return je.createElement(tpe,_t({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:t.handleDayClick.bind(t,l),onMouseEnter:t.handleDayMouseEnter.bind(t,l)}))}))},t.startOfWeek=function(){return Yo(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ot(t.startOfWeek(),t.props.selected)&&Ot(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Ot(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return je.createElement("div",{className:mt(t,n),role:"row"},this.renderDays())},e})(L.Component),id,ipe=6,yc={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},qS=(id={},id[yc.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},id[yc.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},id[yc.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},id),hm=1;function H2(r,e){return r?yc.FOUR_COLUMNS:e?yc.TWO_COLUMNS:yc.THREE_COLUMNS}var ape=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.MONTH_REFS=Pa([],Array(12),!0).map(function(){return L.createRef()}),t.QUARTER_REFS=Pa([],Array(4),!0).map(function(){return L.createRef()}),t.isDisabled=function(n){return Hi(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(n){return lD(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,i){var a,s;(s=(a=t.props).onDayClick)===null||s===void 0||s.call(a,n,i,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var i,a;(a=(i=t.props).onDayMouseEnter)===null||a===void 0||a.call(i,n)},t.handleMouseLeave=function(){var n,i;(i=(n=t.props).onMouseLeave)===null||i===void 0||i.call(n)},t.isRangeStartMonth=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:Dn(gi(a,n),s)},t.isRangeStartQuarter=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:D0(lc(a,n),s)},t.isRangeEndMonth=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:Dn(gi(a,n),o)},t.isRangeEndQuarter=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:D0(lc(a,n),o)},t.isInSelectingRangeMonth=function(n){var i,a=t.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,f=a.startDate,h=a.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(o||l||c)||!p?!1:o&&h?um(p,h,n,s):l&&f||c&&f&&!h?um(f,p,n,s):!1},t.isSelectingMonthRangeStart=function(n){var i;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,s=a.day,o=a.startDate,l=a.selectsStart,c=gi(s,n),f=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l?Dn(c,f):Dn(c,o)},t.isSelectingMonthRangeEnd=function(n){var i;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,s=a.day,o=a.endDate,l=a.selectsEnd,c=a.selectsRange,f=gi(s,n),h=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l||c?Dn(f,h):Dn(f,o)},t.isInSelectingRangeQuarter=function(n){var i,a=t.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,f=a.startDate,h=a.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(o||l||c)||!p?!1:o&&h?dm(p,h,n,s):l&&f||c&&f&&!h?dm(f,p,n,s):!1},t.isWeekInMonth=function(n){var i=t.props.day,a=ua(n,6);return Dn(n,i)||Dn(a,i)},t.isCurrentMonth=function(n,i){return Tt(n)===Tt(Pt())&&i===Qn(Pt())},t.isCurrentQuarter=function(n,i){return Tt(n)===Tt(Pt())&&i===$o(Pt())},t.isSelectedMonth=function(n,i,a){return Qn(a)===i&&Tt(n)===Tt(a)},t.isSelectMonthInList=function(n,i,a){return a.some(function(s){return t.isSelectedMonth(n,i,s)})},t.isSelectedQuarter=function(n,i,a){return $o(a)===i&&Tt(n)===Tt(a)},t.isSelectQuarterInList=function(n,i,a){return a.some(function(s){return t.isSelectedQuarter(n,i,s)})},t.isMonthSelected=function(){var n=t.props,i=n.day,a=n.selected,s=n.selectedDates,o=n.selectsMultiple,l=Qn(i);return o?s?.some(function(c){return t.isSelectedMonth(i,l,c)}):!!a&&t.isSelectedMonth(i,l,a)},t.isQuarterSelected=function(){var n=t.props,i=n.day,a=n.selected,s=n.selectedDates,o=n.selectsMultiple,l=$o(i);return o?s?.some(function(c){return t.isSelectedQuarter(i,l,c)}):!!a&&t.isSelectedQuarter(i,l,a)},t.renderWeeks=function(){if(!Si(t.props.day))return[];for(var n=[],i=t.props.fixedHeight,a=0,s=!1,o=Yo(ks(t.props.day),t.props.locale,t.props.calendarStartDay),l=function(y){return t.props.showWeekPicker?Yo(y,t.props.locale,t.props.calendarStartDay):t.props.preSelection},c=function(y){return t.props.showWeekPicker?Yo(y,t.props.locale,t.props.calendarStartDay):t.props.selected},f=t.props.selected?c(t.props.selected):void 0,h=t.props.preSelection?l(t.props.preSelection):void 0;n.push(je.createElement(npe,_t({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:a,day:o,month:Qn(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:f,preSelection:h,showWeekNumber:t.props.showWeekNumbers}))),!s;){a++,o=g0(o,1);var p=i&&a>=ipe,g=!i&&!t.isWeekInMonth(o);if(p||g)if(t.props.peekNextMonth)s=!0;else break}return n},t.onMonthClick=function(n,i){var a=t.isMonthDisabledForLabelDate(i),s=a.isDisabled,o=a.labelDate;s||t.handleDayClick(ks(o),n)},t.onMonthMouseEnter=function(n){var i=t.isMonthDisabledForLabelDate(n),a=i.isDisabled,s=i.labelDate;a||t.handleDayMouseEnter(ks(s))},t.handleMonthNavigation=function(n,i){var a,s,o,l;(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=t.MONTH_REFS[n])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()},t.handleKeyboardNavigation=function(n,i,a){var s,o=t.props,l=o.selected,c=o.preSelection,f=o.setPreSelection,h=o.minDate,p=o.maxDate,g=o.showFourColumnMonthYearPicker,y=o.showTwoColumnMonthYearPicker;if(c){var b=H2(g,y),v=t.getVerticalOffset(b),E=(s=qS[b])===null||s===void 0?void 0:s.grid,S=function(D,P,k){var M,B,C=P,W=k;switch(D){case Qe.ArrowRight:C=da(P,hm),W=k===11?0:k+hm;break;case Qe.ArrowLeft:C=zl(P,hm),W=k===0?11:k-hm;break;case Qe.ArrowUp:C=zl(P,v),W=!((M=E?.[0])===null||M===void 0)&&M.includes(k)?k+12-v:k-v;break;case Qe.ArrowDown:C=da(P,v),W=!((B=E?.[E.length-1])===null||B===void 0)&&B.includes(k)?k-12+v:k+v;break}return{newCalculatedDate:C,newCalculatedMonth:W}},w=function(D,P,k){for(var M=40,B=D,C=!1,W=0,Y=S(B,P,k),q=Y.newCalculatedDate,$=Y.newCalculatedMonth;!C;){if(W>=M){q=P,$=k;break}if(h&&q<h){B=Qe.ArrowRight;var z=S(B,q,$);q=z.newCalculatedDate,$=z.newCalculatedMonth}if(p&&q>p){B=Qe.ArrowLeft;var z=S(B,q,$);q=z.newCalculatedDate,$=z.newCalculatedMonth}if(Yhe(q,t.props)){var z=S(B,q,$);q=z.newCalculatedDate,$=z.newCalculatedMonth}else C=!0;W++}return{newCalculatedDate:q,newCalculatedMonth:$}};if(i===Qe.Enter){t.isMonthDisabled(a)||(t.onMonthClick(n,a),f?.(l));return}var A=w(i,c,a),T=A.newCalculatedDate,I=A.newCalculatedMonth;switch(i){case Qe.ArrowRight:case Qe.ArrowLeft:case Qe.ArrowUp:case Qe.ArrowDown:t.handleMonthNavigation(I,T);break}}},t.getVerticalOffset=function(n){var i,a;return(a=(i=qS[n])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&a!==void 0?a:0},t.onMonthKeyDown=function(n,i){var a=t.props,s=a.disabledKeyboardNavigation,o=a.handleOnMonthKeyDown,l=n.key;l!==Qe.Tab&&n.preventDefault(),s||t.handleKeyboardNavigation(n,l,i),o&&o(n)},t.onQuarterClick=function(n,i){var a=lc(t.props.day,i);cm(a,t.props)||t.handleDayClick(O2(a),n)},t.onQuarterMouseEnter=function(n){var i=lc(t.props.day,n);cm(i,t.props)||t.handleDayMouseEnter(O2(i))},t.handleQuarterNavigation=function(n,i){var a,s,o,l;t.isDisabled(i)||t.isExcluded(i)||((s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=t.QUARTER_REFS[n-1])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus())},t.onQuarterKeyDown=function(n,i){var a,s,o=n.key;if(!t.props.disabledKeyboardNavigation)switch(o){case Qe.Enter:t.onQuarterClick(n,i),(s=(a=t.props).setPreSelection)===null||s===void 0||s.call(a,t.props.selected);break;case Qe.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===4?1:i+1,QA(t.props.preSelection,1));break;case Qe.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===1?4:i-1,m8(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var i,a=t.props,s=a.day,o=a.disabled,l=a.minDate,c=a.maxDate,f=a.excludeDates,h=a.includeDates,p=gi(s,n);return o?{isDisabled:!0,labelDate:gi(s,n)}:{isDisabled:(i=(l||c||f||h)&&C8(p,t.props))!==null&&i!==void 0?i:!1,labelDate:p}},t.isMonthDisabled=function(n){var i=t.isMonthDisabledForLabelDate(n).isDisabled;return i},t.getMonthClassNames=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate,l=i.preSelection,c=i.monthClassName,f=c?c(gi(a,n)):void 0,h=t.getSelection();return mt("react-datepicker__month-text","react-datepicker__month-".concat(n),f,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":h?t.isSelectMonthInList(a,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&l&&t.isSelectedMonth(a,n,l)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":s&&o?um(s,o,n,a):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(a,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var i=Qn(t.props.preSelection),a=t.isMonthDisabledForLabelDate(i).isDisabled,s=n===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var i=$o(t.props.preSelection),a=cm(t.props.day,t.props),s=n===i&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return s},t.getAriaLabel=function(n){var i=t.props,a=i.chooseDayAriaLabelPrefix,s=a===void 0?"Choose":a,o=i.disabledDayAriaLabelPrefix,l=o===void 0?"Not available":o,c=i.day,f=i.locale,h=gi(c,n),p=t.isDisabled(h)||t.isExcluded(h)?l:s;return"".concat(p," ").concat(nr(h,"MMMM yyyy",f))},t.getQuarterClassNames=function(n){var i=t.props,a=i.day,s=i.startDate,o=i.endDate,l=i.minDate,c=i.maxDate,f=i.excludeDates,h=i.includeDates,p=i.filterDate,g=i.preSelection,y=i.disabledKeyboardNavigation,b=i.disabled,v=(l||c||f||h||p||b)&&cm(lc(a,n),t.props),E=t.getSelection();return mt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":v,"react-datepicker__quarter-text--selected":E?t.isSelectQuarterInList(a,n,E):void 0,"react-datepicker__quarter-text--keyboard-selected":!y&&g&&t.isSelectedQuarter(a,n,g)&&!t.isQuarterSelected()&&!v,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":s&&o?dm(s,o,n,a):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(a,n)})},t.getMonthContent=function(n){var i=t.props,a=i.showFullMonthYearPicker,s=i.renderMonthContent,o=i.locale,l=i.day,c=I8(n,o),f=oD(n,o);return s?s(n,c,f,l):a?f:c},t.getQuarterContent=function(n){var i,a=t.props,s=a.renderQuarterContent,o=a.locale,l=Khe(n,o);return(i=s?.(n,l))!==null&&i!==void 0?i:l},t.renderMonths=function(){var n,i=t.props,a=i.showTwoColumnMonthYearPicker,s=i.showFourColumnMonthYearPicker,o=i.day,l=i.selected,c=(n=qS[H2(s,a)])===null||n===void 0?void 0:n.grid;return c?.map(function(f,h){return je.createElement("div",{className:"react-datepicker__month-wrapper",key:h},f.map(function(p,g){return je.createElement("div",{ref:t.MONTH_REFS[p],key:g,onClick:function(y){t.onMonthClick(y,p)},onKeyDown:function(y){k8(y)&&(y.preventDefault(),y.key=Qe.Enter),t.onMonthKeyDown(y,p)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(p)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(p)}:void 0,tabIndex:Number(t.getTabIndex(p)),className:t.getMonthClassNames(p),"aria-disabled":t.isMonthDisabled(p),role:"option","aria-label":t.getAriaLabel(p),"aria-current":t.isCurrentMonth(o,p)?"date":void 0,"aria-selected":l?t.isSelectedMonth(o,p,l):void 0},t.getMonthContent(p))}))})},t.renderQuarters=function(){var n=t.props,i=n.day,a=n.selected,s=[1,2,3,4];return je.createElement("div",{className:"react-datepicker__quarter-wrapper"},s.map(function(o,l){return je.createElement("div",{key:l,ref:t.QUARTER_REFS[l],role:"option",onClick:function(c){t.onQuarterClick(c,o)},onKeyDown:function(c){t.onQuarterKeyDown(c,o)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(o)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(o)}:void 0,className:t.getQuarterClassNames(o),"aria-selected":a?t.isSelectedQuarter(i,o,a):void 0,tabIndex:Number(t.getQuarterTabIndex(o)),"aria-current":t.isCurrentQuarter(i,o)?"date":void 0},t.getQuarterContent(o))}))},t.getClassNames=function(){var n=t.props,i=n.selectingDate,a=n.selectsStart,s=n.selectsEnd,o=n.showMonthYearPicker,l=n.showQuarterYearPicker,c=n.showWeekPicker;return mt("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(a||s)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},t}return e.prototype.getSelection=function(){var t=this.props,n=t.selected,i=t.selectedDates,a=t.selectsMultiple;if(a)return i;if(n)return[n]},e.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,i=t.showQuarterYearPicker,a=t.day,s=t.ariaLabelPrefix,o=s===void 0?"Month ":s,l=o?o.trim()+" ":"",c=Si(a)?"".concat(l).concat(nr(a,"MMMM, yyyy",this.props.locale)):"",f=n||i;return f?je.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":c,role:"listbox"},n?this.renderMonths():this.renderQuarters()):je.createElement("div",{role:"table"},this.props.dayNamesHeader&&je.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),je.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":c,role:"rowgroup"},this.renderWeeks()))},e})(L.Component),spe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(n){return t.props.month===n},t.handleOptionKeyDown=function(n,i){var a;switch(i.key){case"Enter":i.preventDefault(),t.onChange(n);break;case"Escape":i.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":{i.preventDefault();var s=(n+(i.key==="ArrowUp"?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;(a=t.monthOptionButtonsRef[s])===null||a===void 0||a.focus();break}}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(n,i){return je.createElement("div",{ref:function(a){t.monthOptionButtonsRef[i]=a,t.isSelectedMonth(i)&&a?.focus()},role:"button",tabIndex:0,className:t.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,i),onKeyDown:t.handleOptionKeyDown.bind(t,i),"aria-selected":t.isSelectedMonth(i)?"true":void 0},t.isSelectedMonth(i)?je.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return je.createElement(jy,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(L.Component),ope=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(i,a){return je.createElement("option",{key:i,value:a},i)})},t.renderSelectMode=function(n){return je.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(i){return t.onChange(parseInt(i.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,i){return je.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},je.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),je.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[t.props.month]))},t.renderDropdown=function(n){return je.createElement(spe,_t({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var i=t.state.dropdownVisible,a=[t.renderReadView(!i,n)];return i&&a.unshift(t.renderDropdown(n)),a},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return I8(a,t.props.locale)}:function(a){return oD(a,t.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(n);break;case"select":i=this.renderSelectMode(n);break}return je.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},e})(L.Component);function lpe(r,e){for(var t=[],n=ks(r),i=ks(e);!Qo(n,i);)t.push(Pt(n)),n=da(n,1);return t}var upe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(i){var a=TT(i),s=_a(n.props.date,i)&&Dn(n.props.date,i);return je.createElement("div",{className:s?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:n.onChange.bind(n,a),"aria-selected":s?"true":void 0},s?je.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",nr(i,n.props.dateFormat,n.props.locale))})},n.onChange=function(i){return n.props.onChange(i)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:lpe(n.props.minDate,n.props.maxDate)},n}return e.prototype.render=function(){var t=mt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return je.createElement(jy,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(L.Component),cpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=ks(t.props.minDate),i=ks(t.props.maxDate),a=[];!Qo(n,i);){var s=TT(n);a.push(je.createElement("option",{key:s,value:s},nr(n,t.props.dateFormat,t.props.locale))),n=da(n,1)}return a},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return je.createElement("select",{value:TT(ks(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var i=nr(t.props.date,t.props.dateFormat,t.props.locale);return je.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},je.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),je.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},t.renderDropdown=function(){return je.createElement(upe,_t({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,i=[t.renderReadView(!n)];return n&&i.unshift(t.renderDropdown()),i},t.onChange=function(n){t.toggleDropdown();var i=Pt(n);_a(t.props.date,i)&&Dn(t.props.date,i)||t.props.onChange(i)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return je.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(L.Component),fpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,i,a;t.list&&(t.list.scrollTop=(a=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((i=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&i!==void 0?i:0):t.list.clientHeight,t.centerLi))!==null&&a!==void 0?a:0)})},t.handleClick=function(n){var i,a;(t.props.minTime||t.props.maxTime)&&L2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&P2(n,t.props)||(a=(i=t.props).onChange)===null||a===void 0||a.call(i,n)},t.isSelectedTime=function(n){return t.props.selected&&L8(t.props.selected,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&L2(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&P2(n,t.props)},t.liClasses=function(n){var i,a=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&a.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&a.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(sa(n)*3600+oa(n)*60+Ko(n))%(((i=t.props.intervals)!==null&&i!==void 0?i:e.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},t.handleOnKeyDown=function(n,i){var a,s;n.key===Qe.Space&&(n.preventDefault(),n.key=Qe.Enter),(n.key===Qe.ArrowUp||n.key===Qe.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Qe.ArrowDown||n.key===Qe.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Qe.Enter&&t.handleClick(i),(s=(a=t.props).handleOnKeyDown)===null||s===void 0||s.call(a,n)},t.renderTimes=function(){for(var n,i=[],a=typeof t.props.format=="string"?t.props.format:"p",s=(n=t.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals,o=t.props.selected||t.props.openToDate||Pt(),l=dd(o),c=t.props.injectTimes&&t.props.injectTimes.sort(function(v,E){return v.getTime()-E.getTime()}),f=60*Jhe(o),h=f/s,p=0;p<h;p++){var g=jd(l,p*s);if(i.push(g),c){var y=Zhe(l,g,p,s,c);i=i.concat(y)}}var b=i.reduce(function(v,E){return E.getTime()<=o.getTime()?E:v},i[0]);return i.map(function(v){return je.createElement("li",{key:v.valueOf(),onClick:t.handleClick.bind(t,v),className:t.liClasses(v),ref:function(E){v===b&&(t.centerLi=E)},onKeyDown:function(E){t.handleOnKeyDown(E,v)},tabIndex:v===b?0:-1,role:"option","aria-selected":t.isSelectedTime(v)?"true":void 0,"aria-disabled":t.isDisabledTime(v)?"true":void 0},nr(v,a,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?je.createElement(je.Fragment,null):je.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},je.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var t=this,n,i=this.state.height;return je.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),je.createElement("div",{className:"react-datepicker__time"},je.createElement("div",{className:"react-datepicker__time-box"},je.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){t.list=a},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},e})(L.Component),G2=3,dpe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.YEAR_REFS=Pa([],Array(n.props.yearItemNumber),!0).map(function(){return L.createRef()}),n.isDisabled=function(i){return Hi(i,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(i){return lD(i,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var i;return(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection},n.updateFocusOnPaginate=function(i){var a=function(){var s,o;(o=(s=n.YEAR_REFS[i])===null||s===void 0?void 0:s.current)===null||o===void 0||o.focus()};window.requestAnimationFrame(a)},n.handleYearClick=function(i,a){n.props.onDayClick&&n.props.onDayClick(i,a)},n.handleYearNavigation=function(i,a){var s,o,l,c,f=n.props,h=f.date,p=f.yearItemNumber;if(!(h===void 0||p===void 0)){var g=Os(h,p).startPeriod;n.isDisabled(a)||n.isExcluded(a)||((o=(s=n.props).setPreSelection)===null||o===void 0||o.call(s,a),i-g<0?n.updateFocusOnPaginate(p-(g-i)):i-g>=p?n.updateFocusOnPaginate(Math.abs(p-(i-g))):(c=(l=n.YEAR_REFS[i-g])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},n.isSameDay=function(i,a){return Ot(i,a)},n.isCurrentYear=function(i){return i===Tt(Pt())},n.isRangeStart=function(i){return n.props.startDate&&n.props.endDate&&_a(Ea(Pt(),i),n.props.startDate)},n.isRangeEnd=function(i){return n.props.startDate&&n.props.endDate&&_a(Ea(Pt(),i),n.props.endDate)},n.isInRange=function(i){return fm(i,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(i){var a=n.props,s=a.selectsStart,o=a.selectsEnd,l=a.selectsRange,c=a.startDate,f=a.endDate;return!(s||o||l)||!n.selectingDate()?!1:s&&f?fm(i,n.selectingDate(),f):o&&c||l&&c&&!f?fm(i,c,n.selectingDate()):!1},n.isSelectingRangeStart=function(i){var a;if(!n.isInSelectingRange(i))return!1;var s=n.props,o=s.startDate,l=s.selectsStart,c=Ea(Pt(),i);return l?_a(c,(a=n.selectingDate())!==null&&a!==void 0?a:null):_a(c,o??null)},n.isSelectingRangeEnd=function(i){var a;if(!n.isInSelectingRange(i))return!1;var s=n.props,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,f=Ea(Pt(),i);return l||c?_a(f,(a=n.selectingDate())!==null&&a!==void 0?a:null):_a(f,o??null)},n.isKeyboardSelected=function(i){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var a=n.props,s=a.minDate,o=a.maxDate,l=a.excludeDates,c=a.includeDates,f=a.filterDate,h=a.selected,p=hd(Ea(n.props.date,i)),g=(s||o||l||c||f)&&dg(i,n.props),y=!!h&&Ot(p,hd(h)),b=Ot(p,hd(n.props.preSelection));return!n.props.inline&&!y&&b&&!g}},n.isSelectedYear=function(i){var a=n.props,s=a.selectsMultiple,o=a.selected,l=a.selectedDates;return s?l?.some(function(c){return i===Tt(c)}):!!o&&i===Tt(o)},n.onYearClick=function(i,a){var s=n.props.date;s!==void 0&&n.handleYearClick(hd(Ea(s,a)),i)},n.onYearKeyDown=function(i,a){var s,o,l=i.key,c=n.props,f=c.date,h=c.yearItemNumber,p=c.handleOnKeyDown;if(l!==Qe.Tab&&i.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case Qe.Enter:if(n.props.selected==null)break;n.onYearClick(i,a),(o=(s=n.props).setPreSelection)===null||o===void 0||o.call(s,n.props.selected);break;case Qe.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(a+1,Ps(n.props.preSelection,1));break;case Qe.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(a-1,Pc(n.props.preSelection,1));break;case Qe.ArrowUp:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var g=Os(f,h).startPeriod,y=G2,b=a-y;if(b<g){var v=h%y;a>=g&&a<g+v?y=v:y+=v,b=a-y}n.handleYearNavigation(b,Pc(n.props.preSelection,y));break}case Qe.ArrowDown:{if(f===void 0||h===void 0||n.props.preSelection==null)break;var E=Os(f,h).endPeriod,y=G2,b=a+y;if(b>E){var v=h%y;a<=E&&a>E-v?y=v:y+=v,b=a+y}n.handleYearNavigation(b,Ps(n.props.preSelection,y));break}}p&&p(i)},n.getYearClassNames=function(i){var a=n.props,s=a.date,o=a.disabled,l=a.minDate,c=a.maxDate,f=a.excludeDates,h=a.includeDates,p=a.filterDate,g=a.yearClassName;return mt("react-datepicker__year-text","react-datepicker__year-".concat(i),s?g?.(Ea(s,i)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(i),"react-datepicker__year-text--disabled":(l||c||f||h||p||o)&&dg(i,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(i),"react-datepicker__year-text--range-start":n.isRangeStart(i),"react-datepicker__year-text--range-end":n.isRangeEnd(i),"react-datepicker__year-text--in-range":n.isInRange(i),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(i),"react-datepicker__year-text--today":n.isCurrentYear(i)})},n.getYearTabIndex=function(i){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var a=Tt(n.props.preSelection),s=dg(i,n.props);return i===a&&!s?"0":"-1"},n.getYearContent=function(i){return n.props.renderYearContent?n.props.renderYearContent(i):i},n}return e.prototype.render=function(){var t=this,n=[],i=this.props,a=i.date,s=i.yearItemNumber,o=i.onYearMouseEnter,l=i.onYearMouseLeave;if(a===void 0)return null;for(var c=Os(a,s),f=c.startPeriod,h=c.endPeriod,p=function(b){n.push(je.createElement("div",{ref:g.YEAR_REFS[b-f],onClick:function(v){t.onYearClick(v,b)},onKeyDown:function(v){k8(v)&&(v.preventDefault(),v.key=Qe.Enter),t.onYearKeyDown(v,b)},tabIndex:Number(g.getYearTabIndex(b)),className:g.getYearClassNames(b),onMouseEnter:g.props.usePointerEvent?void 0:function(v){return o(v,b)},onPointerEnter:g.props.usePointerEvent?function(v){return o(v,b)}:void 0,onMouseLeave:g.props.usePointerEvent?void 0:function(v){return l(v,b)},onPointerLeave:g.props.usePointerEvent?function(v){return l(v,b)}:void 0,key:b,"aria-current":g.isCurrentYear(b)?"date":void 0},g.getYearContent(b)))},g=this,y=f;y<=h;y++)p(y);return je.createElement("div",{className:"react-datepicker__year"},je.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},e})(L.Component);function hpe(r,e,t,n){for(var i=[],a=0;a<2*e+1;a++){var s=r+e-a,o=!0;t&&(o=Tt(t)<=s),n&&o&&(o=Tt(n)>=s),o&&i.push(s)}return i}var ppe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(o,l){var c;switch(l.key){case"Enter":l.preventDefault(),n.onChange(o);break;case"Escape":l.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{l.preventDefault();var f=o+(l.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[f]&&((c=n.yearOptionButtonsRef[f])===null||c===void 0||c.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var o=n.props.year,l=n.state.yearsList.map(function(h){return je.createElement("div",{ref:function(p){n.yearOptionButtonsRef[h]=p,h===o&&p?.focus()},role:"button",tabIndex:0,className:o===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),onKeyDown:n.handleOptionKeyDown.bind(n,h),"aria-selected":o===h?"true":void 0},o===h?je.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),c=n.props.minDate?Tt(n.props.minDate):null,f=n.props.maxDate?Tt(n.props.maxDate):null;return(!f||!n.state.yearsList.find(function(h){return h===f}))&&l.unshift(je.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},je.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!n.state.yearsList.find(function(h){return h===c}))&&l.push(je.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},je.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(o){n.props.onChange(o)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(o){var l=n.state.yearsList.map(function(c){return c+o});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var i=t.yearDropdownItemNumber,a=t.scrollableYearDropdown,s=i||(a?10:5);return n.state={yearsList:hpe(n.props.year,s,n.props.minDate,n.props.maxDate)},n.dropdownRef=L.createRef(),n}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,i=n?n.find(function(a){return a.ariaSelected}):null;t.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=mt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return je.createElement(jy,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(L.Component),mpe=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Tt(t.props.minDate):1900,i=t.props.maxDate?Tt(t.props.maxDate):2100,a=[],s=n;s<=i;s++)a.push(je.createElement("option",{key:s,value:s},s));return a},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return je.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return je.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},je.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),je.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return je.createElement(ppe,_t({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,i=[t.renderReadView(!n)];return n&&i.unshift(t.renderDropdown()),i},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,i){var a;(a=t.onSelect)===null||a===void 0||a.call(t,n,i),t.setOpen()},t.onSelect=function(n,i){var a,s;(s=(a=t.props).onSelect)===null||s===void 0||s.call(a,n,i)},t.setOpen=function(){var n,i;(i=(n=t.props).setOpen)===null||i===void 0||i.call(n,!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return je.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(L.Component),gpe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],M8="react-datepicker-ignore-onclickoutside",ype=function(r){var e=(r.className||"").split(/\s+/);return gpe.some(function(t){return e.indexOf(t)>=0})},vpe=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(i){n.props.onClickOutside(i)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(i){var a,s;ype(i.target)&&((s=(a=n.props).onDropdownFocus)===null||s===void 0||s.call(a,i))},n.getDateInView=function(){var i=n.props,a=i.preSelection,s=i.selected,o=i.openToDate,l=R8(n.props),c=P8(n.props),f=Pt(),h=o||s||a;return h||(l&&Ra(f,l)?l:c&&Qo(f,c)?c:f)},n.increaseMonth=function(){n.setState(function(i){var a=i.date;return{date:da(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(i){var a=i.date;return{date:zl(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(i,a,s){n.props.onSelect(i,a,s),n.props.setPreSelection&&n.props.setPreSelection(i)},n.handleDayMouseEnter=function(i){n.setState({selectingDate:i}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(i)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(i,a){n.setState({selectingDate:Ea(Pt(),a)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(i,a)},n.handleYearMouseLeave=function(i,a){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(i,a)},n.handleYearChange=function(i){var a,s,o,l;(s=(a=n.props).onYearChange)===null||s===void 0||s.call(a,i),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(i),(l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(i)},n.getEnabledPreSelectionDateForMonth=function(i){if(!Hi(i,n.props))return i;for(var a=ks(i),s=jhe(i),o=Xue(s,a),l=null,c=0;c<=o;c++){var f=ua(a,c);if(!Hi(f,n.props)){l=f;break}}return l},n.handleMonthChange=function(i){var a,s,o,l=(a=n.getEnabledPreSelectionDateForMonth(i))!==null&&a!==void 0?a:i;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(o=(s=n.props).setOpen)===null||o===void 0||o.call(s,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(i){var a,s;(s=(a=n.props).onMonthChange)===null||s===void 0||s.call(a,i),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(i){n.handleYearChange(i),n.handleMonthChange(i)},n.changeYear=function(i){n.setState(function(a){var s=a.date;return{date:Ea(s,Number(i))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(i){n.setState(function(a){var s=a.date;return{date:gi(s,Number(i))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(i){n.setState(function(a){var s=a.date;return{date:Ea(gi(s,Qn(i)),Tt(i))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(i){if(i===void 0&&(i=n.state.date),!Si(i))return[];var a=n.props.disabled,s=Yo(i,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(je.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(a?"react-datepicker__day-name--disabled":""),role:"columnheader"},je.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),je.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),o.concat([0,1,2,3,4,5,6].map(function(l){var c=ua(s,l),f=n.formatWeekday(c,n.props.locale),h=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return je.createElement("div",{key:l,role:"columnheader",className:mt("react-datepicker__day-name",h,a?"react-datepicker__day-name--disabled":"")},je.createElement("span",{className:"react-datepicker__sr-only"},nr(c,"EEEE",n.props.locale)),je.createElement("span",{"aria-hidden":"true"},f))}))},n.formatWeekday=function(i,a){return n.props.formatWeekDay?$he(i,n.props.formatWeekDay,a):n.props.useWeekdaysShort?Ghe(i,a):Hhe(i,a)},n.decreaseYear=function(){n.setState(function(i){var a,s=i.date;return{date:Pc(s,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var i,a,s;if(!n.props.renderCustomHeader){var o=(i=n.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=n.props.showPreviousMonths?o-1:0,c=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:l,f=zl(n.state.date,c),h;switch(!0){case n.props.disabled:h=!0;break;case n.props.showMonthYearPicker:h=N2(n.state.date,n.props);break;case n.props.showYearPicker:h=Whe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=zhe(n.state.date,n.props);break;default:h=k2(f,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var p=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],g=["react-datepicker__navigation","react-datepicker__navigation--previous"],y=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(y=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(g.push("react-datepicker__navigation--previous--disabled"),y=void 0);var b=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,v=n.props,E=v.previousMonthButtonLabel,S=E===void 0?e.defaultProps.previousMonthButtonLabel:E,w=v.previousYearButtonLabel,A=w===void 0?e.defaultProps.previousYearButtonLabel:w,T=n.props,I=T.previousMonthAriaLabel,D=I===void 0?typeof S=="string"?S:"Previous Month":I,P=T.previousYearAriaLabel,k=P===void 0?typeof A=="string"?A:"Previous Year":P;return je.createElement("button",{type:"button",className:g.join(" "),onClick:y,onKeyDown:n.props.handleOnKeyDown,"aria-label":b?k:D},je.createElement("span",{className:p.join(" ")},b?A:S))}}},n.increaseYear=function(){n.setState(function(i){var a,s=i.date;return{date:Ps(s,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var i;if(!n.props.renderCustomHeader){var a;switch(!0){case n.props.disabled:a=!0;break;case n.props.showMonthYearPicker:a=F2(n.state.date,n.props);break;case n.props.showYearPicker:a=Vhe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:a=qhe(n.state.date,n.props);break;default:a=M2(n.state.date,n.props);break}if(!(!((i=n.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&a||n.props.showTimeSelectOnly)){var s=["react-datepicker__navigation","react-datepicker__navigation--next"],o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),a&&n.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,f=n.props,h=f.nextMonthButtonLabel,p=h===void 0?e.defaultProps.nextMonthButtonLabel:h,g=f.nextYearButtonLabel,y=g===void 0?e.defaultProps.nextYearButtonLabel:g,b=n.props,v=b.nextMonthAriaLabel,E=v===void 0?typeof p=="string"?p:"Next Month":v,S=b.nextYearAriaLabel,w=S===void 0?typeof y=="string"?y:"Next Year":S;return je.createElement("button",{type:"button",className:s.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":c?w:E},je.createElement("span",{className:o.join(" ")},c?y:p))}}},n.renderCurrentMonth=function(i){i===void 0&&(i=n.state.date);var a=["react-datepicker__current-month"];return n.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),je.createElement("h2",{className:a.join(" ")},Si(i)?nr(i,n.props.dateFormat,n.props.locale):"")},n.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showYearDropdown||i))return je.createElement(mpe,_t({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Tt(n.state.date)}))},n.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showMonthDropdown||i))return je.createElement(ope,_t({},e.defaultProps,n.props,{month:Qn(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!n.props.showMonthYearDropdown||i))return je.createElement(cpe,_t({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(i){n.props.onSelect(I2(),i),n.props.setPreSelection&&n.props.setPreSelection(I2())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return je.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(i){return je.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(i))},n.renderDefaultHeader=function(i){var a=i.monthDate,s=i.i;return je.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(a),je.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(s!==0),n.renderMonthYearDropdown(s!==0),n.renderYearDropdown(s!==0)))},n.renderCustomHeader=function(i){var a,s,o=i.monthDate,l=i.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var c=n.props,f=c.showYearPicker,h=c.yearItemNumber,p;if(f){var g=Os(o,h),y=g.startPeriod,b=g.endPeriod;p={startYear:y,endYear:b}}var v=k2(n.state.date,n.props),E=M2(n.state.date,n.props),S=N2(n.state.date,n.props),w=F2(n.state.date,n.props);return je.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(s=(a=n.props).renderCustomHeader)===null||s===void 0?void 0:s.call(a,_t(_t(_t({},n.state),f&&{visibleYearsRange:p}),{customHeaderCount:l,monthDate:o,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:v,nextMonthButtonDisabled:E,prevYearButtonDisabled:S,nextYearButtonDisabled:w})))},n.renderYearHeader=function(i){var a=i.monthDate,s=n.props,o=s.showYearPicker,l=s.yearItemNumber,c=l===void 0?e.defaultProps.yearItemNumber:l,f=Os(a,c),h=f.startPeriod,p=f.endPeriod;return je.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(h," - ").concat(p):Tt(a))},n.renderHeader=function(i){var a=i.monthDate,s=i.i,o=s===void 0?0:s,l={monthDate:a,i:o};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var i,a;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var s=[],o=(i=n.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=n.props.showPreviousMonths?o-1:0,c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ps(n.state.date,l):zl(n.state.date,l),f=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:l,h=0;h<o;++h){var p=h-f+l,g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Ps(c,p):da(c,p),y="month-".concat(h),b=h<o-1,v=h>0;s.push(je.createElement("div",{key:y,ref:function(E){n.monthContainer=E??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:g,i:h}),je.createElement(ape,_t({},e.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:g,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:v,dayNamesHeader:n.renderDayNamesHeader(g)}))))}return s}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return je.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),je.createElement(dpe,_t({},e.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return je.createElement(fpe,_t({},e.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var i=n.props.selected?new Date(n.props.selected):void 0,a=i&&Si(i)&&!!n.props.selected,s=a?"".concat(U2(i.getHours()),":").concat(U2(i.getMinutes())):"";if(n.props.showTimeInput)return je.createElement(epe,_t({},e.defaultProps,n.props,{date:i,timeString:s,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var i;if(!Si(n.state.date))return je.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var a=Os(n.state.date,(i=n.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber),s=a.startPeriod,o=a.endPeriod,l;return n.props.showYearPicker?l="".concat(s," - ").concat(o):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=Tt(n.state.date):l="".concat(oD(Qn(n.state.date),n.props.locale)," ").concat(Tt(n.state.date)),je.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return je.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=L.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:M8,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Th}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){t.setState({monthContainer:t.monthContainer})})())},e.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&Si(this.props.preSelection)&&(!Ot(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var i=!Dn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Ot(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||Lhe;return je.createElement(jy,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},je.createElement("div",{style:{display:"contents"},ref:this.containerRef},je.createElement(t,{className:mt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(L.Component),bpe=function(r){var e=r.icon,t=r.className,n=t===void 0?"":t,i=r.onClick,a="react-datepicker__calendar-icon";if(typeof e=="string")return je.createElement("i",{className:"".concat(a," ").concat(e," ").concat(n),"aria-hidden":"true",onClick:i});if(je.isValidElement(e)){var s=e;return je.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(a," ").concat(n),onClick:function(o){typeof s.props.onClick=="function"&&s.props.onClick(o),typeof i=="function"&&i(o)}})}return je.createElement("svg",{className:"".concat(a," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},je.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},N8=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return iz.createPortal(this.props.children,this.el)},e})(L.Component),xpe="[tabindex], a, button, input, select, textarea",Spe=function(r){return(r instanceof HTMLAnchorElement||!r.disabled)&&r.tabIndex!==-1},F8=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.getTabChildren=function(){var i;return Array.prototype.slice.call((i=n.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(xpe),1,-1).filter(Spe)},n.handleFocusStart=function(){var i=n.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},n.handleFocusEnd=function(){var i=n.getTabChildren();i&&i.length>1&&i[0].focus()},n.tabLoopRef=L.createRef(),n}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?je.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},je.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,je.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(L.Component);function Epe(r){function e(t){var n,i=typeof t.hidePopper=="boolean"?t.hidePopper:!0,a=L.useRef(null),s=Phe(_t({open:!i,whileElementsMounted:che,placement:t.popperPlacement,middleware:Pa([bhe({padding:15}),vhe(10),xhe({element:a})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),o=_t(_t({},t),{hidePopper:i,popperProps:_t(_t({},s),{arrowRef:a})});return je.createElement(r,_t({},o))}return e.displayName="withFloating(".concat(r.displayName||r.name||"Component",")"),e}var wpe=function(r){var e=r.className,t=r.wrapperClassName,n=r.hidePopper,i=n===void 0?!0:n,a=r.popperComponent,s=r.targetComponent,o=r.enableTabLoop,l=r.popperOnKeyDown,c=r.portalId,f=r.portalHost,h=r.popperProps,p=r.showArrow,g=void 0;if(!i){var y=mt("react-datepicker-popper",e);g=je.createElement(F8,{enableTabLoop:o},je.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:y,"data-placement":h.placement,onKeyDown:l},a,p&&je.createElement(The,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}r.popperContainer&&(g=L.createElement(r.popperContainer,{},g)),c&&!i&&(g=je.createElement(N8,{portalId:c,portalHost:f},g));var b=mt("react-datepicker-wrapper",t);return je.createElement(je.Fragment,null,je.createElement("div",{ref:h.refs.setReference,className:b},s),g)},_pe=Epe(wpe);function Tpe(r,e){return r&&e?Qn(r)!==Qn(e)||Tt(r)!==Tt(e):r!==e}var WS="Date input not valid.",K2=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Pt()},n.modifyHolidays=function(){var i;return(i=n.props.holidays)===null||i===void 0?void 0:i.reduce(function(a,s){var o=new Date(s.date);return Si(o)?Pa(Pa([],a,!0),[_t(_t({},s),{date:o})],!1):a},[])},n.calcInitialState=function(){var i,a=n.getPreSelection(),s=R8(n.props),o=P8(n.props),l=s&&Ra(a,dd(s))?s:o&&Qo(a,C2(o))?o:a;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&i!==void 0?i:l,highlightDates:B2(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var i,a=n.props,s=a.locale,o=a.startDate,l=a.endDate,c=a.rangeSeparator,f=a.selected,h=a.selectedDates,p=a.selectsMultiple,g=a.selectsRange,y=a.value,b=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,v=n.state.inputValue;return typeof y=="string"?y:typeof v=="string"?v:g?Mhe(o,l,{dateFormat:b,locale:s,rangeSeparator:c}):p?Nhe(h??[],{dateFormat:b,locale:s}):pi(f,{dateFormat:b,locale:s})},n.resetHiddenStatus=function(){n.setState(_t(_t({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(_t(_t({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var i,a;(a=(i=n.input)===null||i===void 0?void 0:i.focus)===null||a===void 0||a.call(i,{preventScroll:!0})},n.setBlur=function(){var i,a;(a=(i=n.input)===null||i===void 0?void 0:i.blur)===null||a===void 0||a.call(i),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(i,a){a===void 0&&(a=!1),n.setState({open:i,preSelection:i&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:VS},function(){i||n.setState(function(s){return{focused:a?s.focused:!1}},function(){!a&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Ls(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(i){var a,s,o=n.state.wasHidden,l=o?n.state.open:!0;o&&n.resetHiddenStatus(),n.state.preventFocus||((s=(a=n.props).onFocus)===null||s===void 0||s.call(a,i),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(_t(_t({},n.state),{inputValue:null}))},n.handleBlur=function(i){var a,s;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((s=(a=n.props).onBlur)===null||s===void 0||s.call(a,i)),n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(i){var a,s;n.props.inline||n.setOpen(!1),(s=(a=n.props).onClickOutside)===null||s===void 0||s.call(a,i),n.props.withPortal&&i.preventDefault()},n.handleChange=function(){for(var i,a,s,o,l,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=c[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,c),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:Ape});var p=n.props,g=p.selectsRange,y=p.startDate,b=p.endDate,v=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,E=(a=n.props.strictParsing)!==null&&a!==void 0?a:e.defaultProps.strictParsing,S=h?.target instanceof HTMLInputElement?h.target.value:"";if(g){var w=n.props.rangeSeparator,A=w.trim(),T=S.split(v.includes(A)?w:A,2).map(function(W){return W.trim()}),I=T[0],D=T[1],P=Zu(I??"",v,n.props.locale,E),k=P?Zu(D??"",v,n.props.locale,E):null,M=y?.getTime()!==P?.getTime(),B=b?.getTime()!==k?.getTime();if(!M&&!B||P&&Hi(P,n.props)||k&&Hi(k,n.props))return;(o=(s=n.props).onChange)===null||o===void 0||o.call(s,[P,k],h)}else{var C=Zu(S,v,n.props.locale,E,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(C||!S)&&n.setSelected(C,h,!0)}}},n.handleSelect=function(i,a,s){var o;if(!n.props.readOnly){var l=n.props,c=l.selectsRange,f=l.startDate,h=l.endDate,p=l.locale,g=l.swapRange,y=(o=n.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,b=!c||f&&!h&&(g||!zS(i,f));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&b&&n.sendFocusBackToInput(),n.props.onChangeRaw){var v=pi(i,{dateFormat:y,locale:p});n.props.onChangeRaw(a,{date:i,formattedDate:v})}n.setSelected(i,a,!1,s),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(i):b&&n.setOpen(!1)}},n.setSelected=function(i,a,s,o){var l,c,f=i;if(n.props.showYearPicker){if(f!==null&&dg(Tt(f),n.props))return}else if(n.props.showMonthYearPicker){if(f!==null&&C8(f,n.props))return}else if(f!==null&&Hi(f,n.props))return;var h=n.props,p=h.onChange,g=h.selectsRange,y=h.startDate,b=h.endDate,v=h.selectsMultiple,E=h.selectedDates,S=h.minTime,w=h.swapRange;if(!Ul(n.props.selected,f)||n.props.allowSameDay||g||v)if(f!==null&&(n.props.selected&&(!s||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(f=lm(f,{hour:sa(n.props.selected),minute:oa(n.props.selected),second:Ko(n.props.selected)})),!s&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&S&&(f=lm(f,{hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds()})),n.props.inline||n.setState({preSelection:f}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:o})),g){var A=!y&&!b,T=y&&!b,I=!y&&!!b,D=y&&b;A?p?.([f,null],a):T?f===null?p?.([null,null],a):zS(f,y)?p?.(w?[f,y]:[f,null],a):p?.([y,f],a):I&&(f&&zS(f,b)?p?.([f,b],a):p?.([f,null],a)),D&&p?.([f,null],a)}else if(v){if(f!==null)if(!E?.length)p?.([f],a);else{var P=E.some(function(M){return Ot(M,f)});if(P){var k=E.filter(function(M){return!Ot(M,f)});p?.(k,a)}else p?.(Pa(Pa([],E,!0),[f],!1),a)}}else p?.(f,a);s||((c=(l=n.props).onSelect)===null||c===void 0||c.call(l,f,a),n.setState({inputValue:null}))},n.setPreSelection=function(i){if(!n.props.readOnly){var a=Ls(n.props.minDate),s=Ls(n.props.maxDate),o=!0;if(i){var l=dd(i);if(a&&s)o=Rl(i,n.props.minDate,n.props.maxDate);else if(a){var c=dd(n.props.minDate);o=Qo(i,c)||Ul(l,c)}else if(s){var f=C2(n.props.maxDate);o=Ra(i,f)||Ul(l,f)}}o&&n.setState({preSelection:i})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(i){var a,s;if(!(n.props.selectsRange||n.props.selectsMultiple)){var o=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?i:lm(o,{hour:sa(i),minute:oa(i)});n.setState({preSelection:l}),(s=(a=n.props).onChange)===null||s===void 0||s.call(a,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var i,a;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(a=(i=n.props).onInputClick)===null||a===void 0||a.call(i)},n.handleTimeOnlyArrowKey=function(i){var a,s,o,l,c=n.props.selected||n.state.preSelection||Pt(),f=(a=n.props.timeIntervals)!==null&&a!==void 0?a:30,h=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,p=Array.isArray(h)?h[0]:h,g=dd(c),y=sa(c)*60+oa(c),b=1440-f,v;if(i===Qe.ArrowUp){var E=Math.max(0,y-f);v=jd(g,E)}else{var E=Math.min(b,y+f);v=jd(g,E)}var S=nr(v,p||e.defaultProps.dateFormat,n.props.locale);if(n.setState({preSelection:v,inputValue:S}),!(n.props.selectsRange||n.props.selectsMultiple)){var w=n.props.selected?n.props.selected:n.getPreSelection(),A=n.props.selected?v:lm(w,{hour:sa(v),minute:oa(v)});(l=(o=n.props).onChange)===null||l===void 0||l.call(o,A),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){n.scrollToTimeOption(v)})}},n.handleTimeOnlyEnterKey=function(i){var a,s,o,l,c=i.target,f=c.value,h=(a=n.props.dateFormat)!==null&&a!==void 0?a:e.defaultProps.dateFormat,p=n.props.timeFormat||"p",g=n.state.preSelection||n.props.selected||Pt(),y=Zu(f,h,n.props.locale,(s=n.props.strictParsing)!==null&&s!==void 0?s:!1,g),b=g;if(y&&Si(y))b=y;else{var v=((o=n.calendar)===null||o===void 0?void 0:o.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(v instanceof HTMLElement){var E=(l=v.textContent)===null||l===void 0?void 0:l.trim();if(E){var S=Zu(E,p,n.props.locale,!1,g);S&&Si(S)&&(b=S)}}}n.handleTimeChange(b),n.setOpen(!1),n.sendFocusBackToInput()},n.scrollToTimeOption=function(i){var a,s;if(!((a=n.calendar)===null||a===void 0)&&a.containerRef.current){for(var o=n.calendar.containerRef.current,l=Array.from(o.querySelectorAll(".react-datepicker__time-list-item")),c=null,f=1/0,h=n.props.timeFormat||"p",p=0,g=l;p<g.length;p++){var y=g[p],b=(s=y.textContent)===null||s===void 0?void 0:s.trim();if(b){var v=Zu(b,h,n.props.locale,!1,i);if(v&&Si(v)){if(L8(v,i)){c=y;break}var E=Math.abs(v.getTime()-i.getTime());E<f&&(f=E,c=y)}}}c&&(l.forEach(function(S){S.setAttribute("tabindex","-1")}),c.setAttribute("tabindex","0"),c.scrollIntoView({behavior:"smooth",block:"center"}))}},n.onInputKeyDown=function(i){var a,s,o,l,c,f;(s=(a=n.props).onKeyDown)===null||s===void 0||s.call(a,i);var h=i.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Qe.ArrowDown||h===Qe.ArrowUp||h===Qe.Enter)&&((o=n.onInputClick)===null||o===void 0||o.call(n));return}if(n.state.open&&n.props.showTimeSelectOnly){if(h===Qe.ArrowDown||h===Qe.ArrowUp){i.preventDefault(),n.handleTimeOnlyArrowKey(h);return}if(h===Qe.Enter){i.preventDefault(),n.handleTimeOnlyEnterKey(i);return}}if(n.state.open){if(h===Qe.ArrowDown||h===Qe.ArrowUp){i.preventDefault();var p=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',g=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(p);g instanceof HTMLElement&&g.focus({preventScroll:!0});return}var y=Pt(n.state.preSelection);h===Qe.Enter?(i.preventDefault(),i.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===VS?(n.handleSelect(y,i),!n.props.shouldCloseOnSelect&&n.setPreSelection(y)):n.setOpen(!1)):h===Qe.Escape?(i.preventDefault(),i.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Qe.Tab&&n.setOpen(!1),n.inputOk()||(f=(c=n.props).onInputError)===null||f===void 0||f.call(c,{code:1,msg:WS})}},n.onPortalKeyDown=function(i){var a=i.key;a===Qe.Escape&&(i.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(i){var a,s,o,l,c,f,h=n.props,p=h.minDate,g=h.maxDate,y=h.disabledKeyboardNavigation,b=h.showWeekPicker,v=h.shouldCloseOnSelect,E=h.locale,S=h.calendarStartDay,w=h.adjustDateOnChange,A=h.inline;if((s=(a=n.props).onKeyDown)===null||s===void 0||s.call(a,i),!y){var T=i.key,I=i.shiftKey,D=Pt(n.state.preSelection),P=function(B,C){var W=C;switch(B){case Qe.ArrowRight:W=b?g0(C,1):ua(C,1);break;case Qe.ArrowLeft:W=b?g2(C):Xfe(C);break;case Qe.ArrowUp:W=g2(C);break;case Qe.ArrowDown:W=g0(C,1);break;case Qe.PageUp:W=I?Pc(C,1):zl(C,1);break;case Qe.PageDown:W=I?Ps(C,1):da(C,1);break;case Qe.Home:W=Yo(C,E,S);break;case Qe.End:W=Uhe(C);break}return W},k=function(B,C){for(var W=40,Y=B,q=!1,$=0,z=P(B,C);!q;){if($>=W){z=C;break}p&&z<p&&(Y=Qe.ArrowRight,z=Hi(p,n.props)?P(Y,z):p),g&&z>g&&(Y=Qe.ArrowLeft,z=Hi(g,n.props)?P(Y,z):g),Hi(z,n.props)?((Y===Qe.PageUp||Y===Qe.Home)&&(Y=Qe.ArrowRight),(Y===Qe.PageDown||Y===Qe.End)&&(Y=Qe.ArrowLeft),z=P(Y,z)):q=!0,$++}return z};if(T===Qe.Enter){i.preventDefault(),n.handleSelect(D,i),!v&&n.setPreSelection(D);return}else if(T===Qe.Escape){i.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(o=n.props).onInputError)===null||l===void 0||l.call(o,{code:1,msg:WS});return}var M=null;switch(T){case Qe.ArrowLeft:case Qe.ArrowRight:case Qe.ArrowUp:case Qe.ArrowDown:case Qe.PageUp:case Qe.PageDown:case Qe.Home:case Qe.End:M=k(T,D);break}if(!M){(f=(c=n.props).onInputError)===null||f===void 0||f.call(c,{code:1,msg:WS});return}i.preventDefault(),n.setState({lastPreSelectChange:VS}),w&&n.setSelected(M),n.setPreSelection(M),A&&n.setState({shouldFocusDayInline:!0})}},n.onPopperKeyDown=function(i){var a=i.key;a===Qe.Escape&&(i.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),n.sendFocusBackToInput();var a=n.props,s=a.selectsRange,o=a.onChange;o?.(s?[null,null]:null,i),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(i){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(i)&&n.setOpen(!1)},n.renderCalendar=function(){var i,a;return!n.props.inline&&!n.isCalendarOpen()?null:je.createElement(vpe,_t({showMonthYearDropdown:void 0,ref:function(s){n.calendar=s}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(i=n.props.dateFormatCalendar)!==null&&i!==void 0?i:e.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:Xhe(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(a=n.props.dropdownMode)!==null&&a!==void 0?a:e.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var i,a=n.props.locale,s=(i=n.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,o=n.props.showTimeInput||n.props.showTimeSelect,l=o?"PPPPp":"PPPP",c;return n.props.selectsRange?c="Selected start date: ".concat(pi(n.props.startDate,{dateFormat:l,locale:a}),". ").concat(n.props.endDate?"End date: "+pi(n.props.endDate,{dateFormat:l,locale:a}):""):n.props.showTimeSelectOnly?c="Selected time: ".concat(pi(n.props.selected,{dateFormat:s,locale:a})):n.props.showYearPicker?c="Selected year: ".concat(pi(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?c="Selected month: ".concat(pi(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?c="Selected quarter: ".concat(pi(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):c="Selected date: ".concat(pi(n.props.selected,{dateFormat:l,locale:a})),je.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},c)},n.renderDateInput=function(){var i,a,s,o,l,c,f=mt(n.props.className,(i={},i[n.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=n.state.open,i)),h=n.props.customInput||je.createElement("input",{type:"text"}),p=n.props.customInputRef||"ref",g={},y=(s=n.props["aria-describedby"])!==null&&s!==void 0?s:n.props.ariaDescribedBy,b=(o=n.props["aria-invalid"])!==null&&o!==void 0?o:n.props.ariaInvalid,v=(l=n.props["aria-labelledby"])!==null&&l!==void 0?l:n.props.ariaLabelledBy,E=(c=n.props["aria-required"])!==null&&c!==void 0?c:n.props.ariaRequired;return y!=null&&(g["aria-describedby"]=y),b!=null&&(g["aria-invalid"]=b),v!=null&&(g["aria-labelledby"]=v),E!=null&&(g["aria-required"]=E),L.cloneElement(h,_t((a={},a[p]=function(S){n.input=S},a.value=n.getInputValue(),a.onBlur=n.handleBlur,a.onChange=n.handleChange,a.onClick=n.onInputClick,a.onFocus=n.handleFocus,a.onKeyDown=n.onInputKeyDown,a.id=n.props.id,a.name=n.props.name,a.form=n.props.form,a.autoFocus=n.props.autoFocus,a.placeholder=n.props.placeholderText,a.disabled=n.props.disabled,a.autoComplete=n.props.autoComplete,a.className=mt(h.props.className,f),a.title=n.props.title,a.readOnly=n.props.readOnly,a.required=n.props.required,a.tabIndex=n.props.tabIndex,a),g))},n.renderClearButton=function(){var i=n.props,a=i.isClearable,s=i.disabled,o=i.selected,l=i.startDate,c=i.endDate,f=i.clearButtonTitle,h=i.clearButtonClassName,p=h===void 0?"":h,g=i.ariaLabelClose,y=g===void 0?"Close":g,b=i.selectedDates,v=i.readOnly;return a&&!v&&(o!=null||l!=null||c!=null||b?.length)?je.createElement("button",{type:"button",className:mt("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":s}),disabled:s,"aria-label":y,onClick:n.onClearClick,title:f,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:M8,readOnly:!1,rangeSeparator:O8,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Th,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,n){var i,a,s,o;t.inline&&Tpe(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:B2(this.props.highlightDates)}),!n.focused&&!Ul(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((a=(i=this.props).onCalendarOpen)===null||a===void 0||a.call(i)),n.open===!0&&this.state.open===!1&&((o=(s=this.props).onCalendarClose)===null||o===void 0||o.call(s)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,i=t.icon,a=t.calendarIconClassname,s=t.calendarIconClassName,o=t.toggleCalendarOnIconClick,l=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),je.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&je.createElement(bpe,_t({icon:i,className:mt(s,!s&&a,l&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?je.createElement(F8,{enableTabLoop:this.props.enableTabLoop},je.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=je.createElement(N8,_t({portalId:this.props.portalId},this.props),n)),je.createElement("div",null,this.renderInputContainer(),n)}return je.createElement(_pe,_t({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(L.Component),Ape="input",VS="navigate";function Dpe(){const[r,e]=L.useState("current"),[t,n]=L.useState("all"),[i,a]=L.useState(!0),[s,o]=L.useState({temperature:null,humidity:null,lastUpdate:null}),[l,c]=L.useState({temperature:null,humidity:null,lastUpdate:null}),[f,h]=L.useState({temperature:null,humidity:null,lastUpdate:null}),[p,g]=L.useState([]),[y,b]=L.useState({temperature:null,humidity:null}),[v,E]=L.useState(new Date),[S,w]=L.useState(new Date),[A,T]=L.useState([]),[I,D]=L.useState(!1),[P]=L.useState({rootTemp:null,rootHumidity:null,ec:null,ph:null,tankLevel:null,co2:null,ppfd:null});L.useEffect(()=>{const Y=async()=>{try{const $=await fetch("/api/smartfarm/get_realtime_sensor_data.php");a($.ok)}catch{a(!1)}};Y();const q=setInterval(Y,1e4);return()=>clearInterval(q)},[]),L.useEffect(()=>{const Y=async()=>{try{const z=await(await fetch("/api/smartfarm/get_realtime_sensor_data.php")).json();if(z.success){const K=z.data;o({temperature:K.front.temperature,humidity:K.front.humidity,lastUpdate:K.front.lastUpdate?Date.now():null}),c({temperature:K.back.temperature,humidity:K.back.humidity,lastUpdate:K.back.lastUpdate?Date.now():null}),h({temperature:K.top.temperature,humidity:K.top.humidity,lastUpdate:K.top.lastUpdate?Date.now():null})}}catch($){console.error("Failed to fetch sensor data:",$)}};Y();const q=setInterval(Y,1e3);return()=>clearInterval(q)},[]),L.useEffect(()=>{(async()=>{if(r!=="current")try{const q=new Date,$=new Date;r==="1h"?$.setHours($.getHours()-1):r==="1w"?$.setDate($.getDate()-7):r==="1m"&&$.setMonth($.getMonth()-1);const z=$.toISOString().split("T")[0],K=q.toISOString().split("T")[0],X=await(await fetch(`/api/smartfarm/get_sensor_data.php?start_date=${z}&end_date=${K}`)).json();if(X.success&&X.data){const H=new Map;X.data.forEach(J=>{const fe=new Date(J.recorded_at).toLocaleString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});H.has(fe)||H.set(fe,{timestamp:fe,frontTemp:null,backTemp:null,topTemp:null,frontHum:null,backHum:null,topHum:null});const se=H.get(fe),be=J.sensor_location;be==="front"?(J.temperature!==null&&(se.frontTemp=parseFloat(J.temperature)),J.humidity!==null&&(se.frontHum=parseFloat(J.humidity))):be==="back"?(J.temperature!==null&&(se.backTemp=parseFloat(J.temperature)),J.humidity!==null&&(se.backHum=parseFloat(J.humidity))):be==="top"&&(J.temperature!==null&&(se.topTemp=parseFloat(J.temperature)),J.humidity!==null&&(se.topHum=parseFloat(J.humidity)))});const G=Array.from(H.values()).reverse();g(G)}}catch(q){console.error("Failed to load historical chart data:",q)}})()},[r]),L.useEffect(()=>{if(r==="current"&&(s.temperature!==null||l.temperature!==null||f.temperature!==null)){const Y={timestamp:new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),frontTemp:s.temperature,backTemp:l.temperature,topTemp:f.temperature,frontHum:s.humidity,backHum:l.humidity,topHum:f.humidity};g(q=>[...q,Y].slice(-20))}},[s,l,f,r]),L.useEffect(()=>{if(p.length>0){const Y=p.slice(-10),q=Y.reduce((z,K)=>{const Z=[K.frontTemp,K.backTemp,K.topTemp].filter(X=>X!==null);return z+(Z.length>0?Z.reduce((X,H)=>X+H,0)/Z.length:0)},0)/Y.length,$=Y.reduce((z,K)=>{const Z=[K.frontHum,K.backHum,K.topHum].filter(X=>X!==null);return z+(Z.length>0?Z.reduce((X,H)=>X+H,0)/Z.length:0)},0)/Y.length;b({temperature:isNaN(q)?null:parseFloat(q.toFixed(1)),humidity:isNaN($)?null:parseFloat($.toFixed(1))})}},[p]);const k=async()=>{if(!(!v||!S)){D(!0);try{const Y=v.toISOString().split("T")[0],q=S.toISOString().split("T")[0],z=await(await fetch(`/api/smartfarm/get_sensor_data.php?start_date=${Y}&end_date=${q}`)).json();z.success?T(z.data):console.error("Failed to load historical data:",z.error)}catch(Y){console.error("Error loading historical data:",Y)}finally{D(!1)}}},M=[s.temperature,l.temperature,f.temperature].filter(Y=>Y!==null),B=[s.humidity,l.humidity,f.humidity].filter(Y=>Y!==null),C=M.length>0?M.reduce((Y,q)=>Y+q,0)/M.length:null,W=B.length>0?B.reduce((Y,q)=>Y+q,0)/B.length:null;return j.jsx("div",{className:"bg-gray-50",children:j.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[j.jsx("header",{className:"bg-farm-500 p-4 sm:px-6 rounded-xl mb-6",children:j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsxs("div",{children:[j.jsx("h1",{className:"text-2xl font-bold m-0",children:"  "}),j.jsx("p",{className:"text-sm text-gray-800 mt-1 m-0",children:", , EC, pH     "})]}),j.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg",children:[j.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-green-300 animate-pulse":"bg-red-300"}`}),j.jsxs("span",{className:"text-sm font-medium",children:[" ",i?" ":" "]})]})]})}),j.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-6",children:[j.jsxs("section",{className:"lg:col-span-1",children:[j.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:j.jsx("h3",{className:"text-sm font-semibold m-0",children:" "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-3",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),j.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[C!==null?C.toFixed(1):"0.0","C"]})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),j.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[W!==null?W.toFixed(1):"0.0","%"]})]})]})]}),j.jsxs("section",{className:"lg:col-span-1",children:[j.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:j.jsx("h3",{className:"text-sm font-semibold m-0",children:"  "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[s.temperature!==null?s.temperature.toFixed(1):"0.0","C"]})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[s.humidity!==null?s.humidity.toFixed(1):"0.0","%"]})]})]})]}),j.jsxs("section",{className:"lg:col-span-1",children:[j.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:j.jsx("h3",{className:"text-sm font-semibold m-0",children:"  "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[l.temperature!==null?l.temperature.toFixed(1):"0.0","C"]})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[l.humidity!==null?l.humidity.toFixed(1):"0.0","%"]})]})]})]}),j.jsxs("section",{className:"lg:col-span-1",children:[j.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:j.jsx("h3",{className:"text-sm font-semibold m-0",children:" "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-2",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-green-600",children:[f.temperature!==null?f.temperature.toFixed(1):"0.0","C"]})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600",children:" "}),j.jsxs("div",{className:"text-xl font-semibold text-blue-600",children:[f.humidity!==null?f.humidity.toFixed(1):"0.0","%"]})]})]})]}),j.jsxs("section",{className:"lg:col-span-1",children:[j.jsx("header",{className:"bg-farm-500 px-3 py-2 rounded-t-xl",children:j.jsx("h3",{className:"text-sm font-semibold m-0",children:" 10 "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-3 space-y-3",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),j.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[y.temperature!==null?y.temperature.toFixed(1):"0.0","C"]})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" "}),j.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[y.humidity!==null?y.humidity.toFixed(1):"0.0","%"]})]})]})]})]}),j.jsxs("section",{className:"mb-6",children:[j.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:j.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),j.jsxs("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:[j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),j.jsx(K2,{selected:v,onChange:Y=>E(Y),dateFormat:"yyyy-MM-dd",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",maxDate:new Date})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),j.jsx(K2,{selected:S,onChange:Y=>w(Y),dateFormat:"yyyy-MM-dd",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",maxDate:new Date})]}),j.jsx("div",{children:j.jsx("button",{onClick:k,disabled:I,className:"w-full px-6 py-2 bg-farm-500 text-gray-900 rounded-lg font-medium hover:bg-farm-600 disabled:opacity-50 disabled:cursor-not-allowed",children:I?" ...":" "})})]}),A.length>0&&j.jsxs("div",{className:"mt-6 overflow-x-auto",children:[j.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[j.jsx("thead",{className:"bg-gray-50",children:j.jsxs("tr",{children:[j.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),j.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" (C)"}),j.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" (%)"}),j.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" "})]})}),j.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.slice(0,100).map((Y,q)=>j.jsxs("tr",{className:"hover:bg-gray-50",children:[j.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Y.sensor_location}),j.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Y.temperature??"-"}),j.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Y.humidity??"-"}),j.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(Y.recorded_at).toLocaleString("ko-KR")})]},q))})]}),A.length>100&&j.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:[" 100   (: ",A.length,")"]})]})]})]}),j.jsxs("section",{className:"mb-6",children:[j.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:j.jsx("h2",{className:"text-xl font-semibold m-0",children:"    "})}),j.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:j.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),j.jsxs("select",{value:r,onChange:Y=>e(Y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[j.jsx("option",{value:"current",children:""}),j.jsx("option",{value:"1h",children:" 1"}),j.jsx("option",{value:"1w",children:" 1"}),j.jsx("option",{value:"1m",children:" 1"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zone"}),j.jsxs("select",{value:t,onChange:Y=>n(Y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-base",children:[j.jsx("option",{value:"all",children:""}),j.jsx("option",{value:"zone_a",children:"Zone A ()"}),j.jsx("option",{value:"zone_b",children:"Zone B ()"}),j.jsx("option",{value:"zone_c",children:"Zone C ()"})]})]})]})})]}),j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[j.jsxs("section",{children:[j.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:j.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),j.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:p.length===0?j.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):j.jsx(Ak,{width:"100%",height:400,children:j.jsxs(a2,{data:p,children:[j.jsx(gT,{strokeDasharray:"3 3"}),j.jsx(vT,{dataKey:"timestamp"}),j.jsx(xT,{}),j.jsx(dN,{}),j.jsx(z_,{}),j.jsx(Il,{type:"monotone",dataKey:"frontTemp",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),j.jsx(Il,{type:"monotone",dataKey:"backTemp",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),j.jsx(Il,{type:"monotone",dataKey:"topTemp",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]}),j.jsxs("section",{children:[j.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:j.jsx("h2",{className:"text-xl font-semibold m-0",children:"  "})}),j.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:p.length===0?j.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"  ..."}):j.jsx(Ak,{width:"100%",height:400,children:j.jsxs(a2,{data:p,children:[j.jsx(gT,{strokeDasharray:"3 3"}),j.jsx(vT,{dataKey:"timestamp"}),j.jsx(xT,{}),j.jsx(dN,{}),j.jsx(z_,{}),j.jsx(Il,{type:"monotone",dataKey:"frontHum",stroke:"#22c55e",name:" ",strokeWidth:2,dot:!1}),j.jsx(Il,{type:"monotone",dataKey:"backHum",stroke:"#3b82f6",name:" ",strokeWidth:2,dot:!1}),j.jsx(Il,{type:"monotone",dataKey:"topHum",stroke:"#f59e0b",name:" ",strokeWidth:2,dot:!1})]})})})]})]}),j.jsxs("section",{className:"mb-6",children:[j.jsx("header",{className:"bg-farm-500 px-6 py-4 rounded-t-xl",children:j.jsx("h2",{className:"text-xl font-semibold m-0",children:"   "})}),j.jsx("div",{className:"bg-white rounded-b-xl shadow-card p-6",children:j.jsxs("dl",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-3",children:[j.jsx(wl,{label:" ",value:P.rootTemp,unit:"C"}),j.jsx(wl,{label:" ",value:P.rootHumidity,unit:"%"}),j.jsx(wl,{label:"EC",value:P.ec,unit:"mS/cm"}),j.jsx(wl,{label:"pH",value:P.ph,unit:""}),j.jsx(wl,{label:" ",value:P.tankLevel,unit:"%"}),j.jsx(wl,{label:"CO",value:P.co2,unit:"ppm"}),j.jsx(wl,{label:"PPFD",value:P.ppfd,unit:"mol/m/s"})]})})]})]})})}const Xe=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},Ope=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=Ipe},Ipe=Number.MAX_SAFE_INTEGER||9007199254740991;let at=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),we=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",r.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",r.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.ASSET_LIST_LOAD_ERROR="assetListLoadError",r.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",r.ASSET_LIST_PARSING_ERROR="assetListParsingError",r.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.ATTACH_MEDIA_ERROR="attachMediaError",r.UNKNOWN="unknown",r})({}),U=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.MEDIA_ENDED="hlsMediaEnded",r.STALL_RESOLVED="hlsStallResolved",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFERED_TO_END="hlsBufferedToEnd",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r.ASSET_LIST_LOADING="hlsAssetListLoading",r.ASSET_LIST_LOADED="hlsAssetListLoaded",r.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",r.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",r.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",r.INTERSTITIAL_STARTED="hlsInterstitialStarted",r.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",r.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",r.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",r.INTERSTITIAL_ENDED="hlsInterstitialEnded",r.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",r.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",r.EVENT_CUE_ENTER="hlsEventCueEnter",r})({});var St={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},et={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Ju{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Cpe{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ju(e),this.fast_=new Ju(t),this.defaultTTFB_=i,this.ttfb_=new Ju(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:a}=this;n.halfLife!==e&&(this.slow_=new Ju(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Ju(t,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Ju(e,a.getEstimate(),a.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,a=n/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Rpe(r,e,t){return(e=Lpe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zt(){return zt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zt.apply(null,arguments)}function Y2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ut(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y2(Object(t),!0).forEach(function(n){Rpe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Y2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ppe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lpe(r){var e=Ppe(r,"string");return typeof e=="symbol"?e:e+""}class Qi{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Bo,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Bo=function(){},kpe={trace:Bo,debug:Bo,log:Bo,warn:Bo,info:Bo,error:Bo};function IT(){return zt({},kpe)}function Mpe(r,e){const t=self.console[r];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${r}] >`):Bo}function z2(r,e,t){return e[r]?e[r].bind(e):Mpe(r,t)}const CT=IT();function Npe(r,e,t){const n=IT();if(typeof console=="object"&&r===!0||typeof r=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{n[a]=z2(a,r,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return IT()}i.forEach(a=>{CT[a]=z2(a,r)})}else zt(CT,n);return n}const $t=CT;function Zo(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Fpe(r){return typeof self<"u"&&r===self.ManagedMediaSource}function B8(r,e){const t=Object.keys(r),n=Object.keys(e),i=t.length,a=n.length;return!i||!a||i===a&&!t.some(s=>n.indexOf(s)===-1)}function Ti(r,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(r);if(e){const f=c.indexOf("\0");return f!==-1?c.substring(0,f):c}return c.replace(/\0/g,"")}const t=r.length;let n,i,a,s="",o=0;for(;o<t;){if(n=r[o++],n===0&&e)return s;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(n);break;case 12:case 13:i=r[o++],s+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=r[o++],a=r[o++],s+=String.fromCharCode((n&15)<<12|(i&63)<<6|(a&63)<<0);break}}return s}function un(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function U8(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Bpe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var QS={exports:{}},q2;function Upe(){return q2||(q2=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,f){if(f=f||{},l=l.trim(),c=c.trim(),!c){if(!f.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(c);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return f.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):c;var g=o.parseURL(l);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var y=i.exec(g.path);g.netLoc=y[1],g.path=y[2]}g.netLoc&&!g.path&&(g.path="/");var b={scheme:g.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(b.netLoc=g.netLoc,p.path[0]!=="/"))if(!p.path)b.path=g.path,p.params||(b.params=g.params,p.query||(b.query=g.query));else{var v=g.path,E=v.substring(0,v.lastIndexOf("/")+1)+p.path;b.path=o.normalizePath(E)}return b.path===null&&(b.path=f.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(b)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(QS)),QS.exports}var uD=Upe();class cD{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Vt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class j8{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,$pe(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Vt.AUDIO]:null,[Vt.VIDEO]:null,[Vt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new cD),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=uD.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Vt.AUDIO]=null,e[Vt.VIDEO]=null,e[Vt.AUDIOVIDEO]=null}}function _r(r){return r.sn!=="initSegment"}class XS extends j8{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Xe(e)&&Xe(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(t);if(n.length===1){const i=this._decryptdata=t[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Xe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return _r(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const i=t[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,a,s=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:a,partial:s};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,a)}}class jpe extends j8{constructor(e,t,n,i,a){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function $8(r,e){const t=Object.getPrototypeOf(r);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||$8(t,e)}}function $pe(r,e){const t=$8(r,e);t&&(t.enumerable=!0,Object.defineProperty(r,e,t))}const W2=Math.pow(2,32)-1,Hpe=[].push,H8={video:1,audio:2,id3:3,text:4};function Br(r){return String.fromCharCode.apply(null,r)}function G8(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function dt(r,e){const t=K8(r,e);return t<0?4294967296+t:t}function V2(r,e){let t=dt(r,e);return t*=Math.pow(2,32),t+=dt(r,e+4),t}function K8(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function Gpe(r){const e=r.byteLength;for(let t=0;t<e;){const n=dt(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function xt(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const a=dt(r,i),s=Br(r.subarray(i+4,i+8)),o=a>1?i+a:n;if(s===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const l=xt(r.subarray(i+8,o),e.slice(1));l.length&&Hpe.apply(t,l)}i=o}return t}function Kpe(r){const e=[],t=r[0];let n=8;const i=dt(r,n);n+=4;let a=0,s=0;t===0?(a=dt(r,n),s=dt(r,n+4),n+=8):(a=V2(r,n),s=V2(r,n+8),n+=16),n+=2;let o=r.length+s;const l=G8(r,n);n+=2;for(let c=0;c<l;c++){let f=n;const h=dt(r,f);f+=4;const p=h&2147483647;if((h&2147483648)>>>31===1)return $t.warn("SIDX has hierarchical references (not supported)"),null;const y=dt(r,f);f+=4,e.push({referenceSize:p,subsegmentDuration:y,info:{duration:y/i,start:o,end:o+p-1}}),o+=p,f+=4,n=f}return{earliestPresentationTime:a,timescale:i,version:t,referencesCount:l,references:e}}function Y8(r){const e=[],t=xt(r,["moov","trak"]);for(let i=0;i<t.length;i++){const a=t[i],s=xt(a,["tkhd"])[0];if(s){let o=s[0];const l=dt(s,o===0?12:20),c=xt(a,["mdia","mdhd"])[0];if(c){o=c[0];const f=dt(c,o===0?12:20),h=xt(a,["mdia","hdlr"])[0];if(h){const p=Br(h.subarray(8,12)),g={soun:Vt.AUDIO,vide:Vt.VIDEO}[p],y=xt(a,["mdia","minf","stbl","stsd"])[0],b=Ype(y);g?(e[l]={timescale:f,type:g,stsd:b},e[g]=Ut({timescale:f,id:l},b)):e[l]={timescale:f,type:p,stsd:b}}}}}return xt(r,["moov","mvex","trex"]).forEach(i=>{const a=dt(i,4),s=e[a];s&&(s.default={duration:dt(i,12),flags:dt(i,20)})}),e}function Ype(r){const e=r.subarray(8),t=e.subarray(86),n=Br(e.subarray(4,8));let i=n,a;const s=n==="enca"||n==="encv";if(s){const c=xt(e,[n])[0].subarray(n==="enca"?28:78);xt(c,["sinf"]).forEach(h=>{const p=xt(h,["schm"])[0];if(p){const g=Br(p.subarray(4,8));if(g==="cbcs"||g==="cenc"){const y=xt(h,["frma"])[0];y&&(i=Br(y))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=xt(t,["avcC"])[0];l&&l.length>3&&(i+="."+mm(l[1])+mm(l[2])+mm(l[3]),a=pm(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=xt(e,[n])[0],c=xt(l.subarray(28),["esds"])[0];if(c&&c.length>7){let f=4;if(c[f++]!==3)break;f=ZS(c,f),f+=2;const h=c[f++];if(h&128&&(f+=2),h&64&&(f+=c[f++]),c[f++]!==4)break;f=ZS(c,f);const p=c[f++];if(p===64)i+="."+mm(p);else break;if(f+=12,c[f++]!==5)break;f=ZS(c,f);const g=c[f++];let y=(g&248)>>3;y===31&&(y+=1+((g&7)<<3)+((c[f]&224)>>5)),i+="."+y}break}case"hvc1":case"hev1":{const l=xt(t,["hvcC"])[0];if(l&&l.length>12){const c=l[1],f=["","A","B","C"][c>>6],h=c&31,p=dt(l,2),g=(c&32)>>5?"H":"L",y=l[12],b=l.subarray(6,12);i+="."+f+h,i+="."+zpe(p).toString(16).toUpperCase(),i+="."+g+y;let v="";for(let E=b.length;E--;){const S=b[E];(S||v)&&(v="."+S.toString(16).toUpperCase()+v)}i+=v}a=pm(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=pm(i,t)||i;break}case"vp09":{const l=xt(t,["vpcC"])[0];if(l&&l.length>6){const c=l[4],f=l[5],h=l[6]>>4&15;i+="."+Sa(c)+"."+Sa(f)+"."+Sa(h)}break}case"av01":{const l=xt(t,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,f=l[1]&31,h=l[2]>>>7?"H":"M",p=(l[2]&64)>>6,g=(l[2]&32)>>5,y=c===2&&p?g?12:10:p?10:8,b=(l[2]&16)>>4,v=(l[2]&8)>>3,E=(l[2]&4)>>2,S=l[2]&3;i+="."+c+"."+Sa(f)+h+"."+Sa(y)+"."+b+"."+v+E+S+"."+Sa(1)+"."+Sa(1)+"."+Sa(1)+"."+0,a=pm("dav1",t)}break}}return{codec:i,encrypted:s,supplemental:a}}function pm(r,e){const t=xt(e,["dvvC"]),n=t.length?t[0]:xt(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,a=n[2]<<5&32|n[3]>>3&31;return r+"."+Sa(i)+"."+Sa(a)}}function zpe(r){let e=0;for(let t=0;t<32;t++)e|=(r>>t&1)<<31-t;return e>>>0}function ZS(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function mm(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function Sa(r){return(r<10?"0":"")+r}function qpe(r,e){if(!r||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&z8(r,(n,i)=>{const a=n.subarray(8,24);a.some(s=>s!==0)||($t.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${un(a)} -> ${un(t)}`),n.set(t,8))})}function Wpe(r){const e=[];return z8(r,t=>e.push(t.subarray(8,24))),e}function z8(r,e){xt(r,["moov","trak"]).forEach(n=>{const i=xt(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const a=i.subarray(8);let s=xt(a,["enca"]);const o=s.length>0;o||(s=xt(a,["encv"])),s.forEach(l=>{const c=o?l.subarray(28):l.subarray(78);xt(c,["sinf"]).forEach(h=>{const p=q8(h);p&&e(p,o)})})})}function q8(r){const e=xt(r,["schm"])[0];if(e){const t=Br(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const n=xt(r,["schi","tenc"])[0];if(n)return n}}}function Vpe(r,e,t){const n={},i=xt(r,["moof","traf"]);for(let a=0;a<i.length;a++){const s=i[a],o=xt(s,["tfhd"])[0],l=dt(o,4),c=e[l];if(!c)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const f=n[l],h=xt(s,["tfdt"])[0];if(h){const w=h[0];let A=dt(h,4);w===1&&(A===W2?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(A*=W2+1,A+=dt(h,8))),Xe(A)&&(!Xe(f.start)||A<f.start)&&(f.start=A)}const p=c.default,g=dt(o,0)|p?.flags;let y=p?.duration||0;g&8&&(g&2?y=dt(o,12):y=dt(o,8));const b=xt(s,["trun"]);let v=f.start||0,E=0,S=y;for(let w=0;w<b.length;w++){const A=b[w],T=dt(A,4),I=f.sampleCount;f.sampleCount+=T;const D=A[3]&1,P=A[3]&4,k=A[2]&1,M=A[2]&2,B=A[2]&4,C=A[2]&8;let W=8,Y=T;for(D&&(W+=4),P&&T&&(!(A[W+1]&1)&&f.keyFrameIndex===void 0&&(f.keyFrameIndex=I),W+=4,k?(S=dt(A,W),W+=4):S=y,M&&(W+=4),C&&(W+=4),v+=S,E+=S,Y--);Y--;)k?(S=dt(A,W),W+=4):S=y,M&&(W+=4),B&&(A[W+1]&1||f.keyFrameIndex===void 0&&(f.keyFrameIndex=f.sampleCount-(Y+1),f.keyFrameStart=v),W+=4),C&&(W+=4),v+=S,E+=S;!E&&y&&(E+=y*T)}f.duration+=E}if(!Object.keys(n).some(a=>n[a].duration)){let a=1/0,s=0;const o=xt(r,["sidx"]);for(let l=0;l<o.length;l++){const c=Kpe(o[l]);if(c!=null&&c.references){a=Math.min(a,c.earliestPresentationTime/c.timescale);const f=c.references.reduce((h,p)=>h+p.info.duration||0,0);s=Math.max(s,f+c.earliestPresentationTime/c.timescale)}}s&&Xe(s)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=s*n[l].timescale-n[l].start)})}return n}function Qpe(r){const e={valid:null,remainder:null},t=xt(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=r.slice(0,n.byteOffset-8),e.remainder=r.slice(n.byteOffset-8),e}function Wi(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Q2(r,e){const t=[],n=e.samples,i=e.timescale,a=e.id;let s=!1;return xt(n,["moof"]).map(l=>{const c=l.byteOffset-8;xt(l,["traf"]).map(h=>{const p=xt(h,["tfdt"]).map(g=>{const y=g[0];let b=dt(g,4);return y===1&&(b*=Math.pow(2,32),b+=dt(g,8)),b/i})[0];return p!==void 0&&(r=p),xt(h,["tfhd"]).map(g=>{const y=dt(g,4),b=dt(g,0)&16777215,v=(b&1)!==0,E=(b&2)!==0,S=(b&8)!==0;let w=0;const A=(b&16)!==0;let T=0;const I=(b&32)!==0;let D=8;y===a&&(v&&(D+=8),E&&(D+=4),S&&(w=dt(g,D),D+=4),A&&(T=dt(g,D),D+=4),I&&(D+=4),e.type==="video"&&(s=$y(e.codec)),xt(h,["trun"]).map(P=>{const k=P[0],M=dt(P,0)&16777215,B=(M&1)!==0;let C=0;const W=(M&4)!==0,Y=(M&256)!==0;let q=0;const $=(M&512)!==0;let z=0;const K=(M&1024)!==0,Z=(M&2048)!==0;let X=0;const H=dt(P,4);let G=8;B&&(C=dt(P,G),G+=4),W&&(G+=4);let J=C+c;for(let fe=0;fe<H;fe++){if(Y?(q=dt(P,G),G+=4):q=w,$?(z=dt(P,G),G+=4):z=T,K&&(G+=4),Z&&(k===0?X=dt(P,G):X=K8(P,G),G+=4),e.type===Vt.VIDEO){let se=0;for(;se<z;){const be=dt(n,J);if(J+=4,Xpe(s,n[J])){const oe=n.subarray(J,J+be);fD(oe,s?2:1,r+X/i,t)}J+=be,se+=be+4}}r+=q/i}}))})})}),t}function $y(r){if(!r)return!1;const e=r.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Xpe(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function fD(r,e,t,n){const i=W8(r);let a=0;a+=e;let s=0,o=0,l=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(l===255);o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(l===255);const c=i.length-a;let f=a;if(o<c)a+=o;else if(o>c){$t.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(s===4){if(i[f++]===181){const p=G8(i,f);if(f+=2,p===49){const g=dt(i,f);if(f+=4,g===1195456820){const y=i[f++];if(y===3){const b=i[f++],v=31&b,E=64&b,S=E?2+v*3:0,w=new Uint8Array(S);if(E){w[0]=b;for(let A=1;A<S;A++)w[A]=i[f++]}n.push({type:y,payloadType:s,pts:t,bytes:w})}}}}}else if(s===5&&o>16){const h=[];for(let y=0;y<16;y++){const b=i[f++].toString(16);h.push(b.length==1?"0"+b:b),(y===3||y===5||y===7||y===9)&&h.push("-")}const p=o-16,g=new Uint8Array(p);for(let y=0;y<p;y++)g[y]=i[f++];n.push({payloadType:s,pts:t,uuid:h.join(""),userData:Ti(g),userDataBytes:g})}}}function W8(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,a=new Uint8Array(i);let s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),a[n]=r[s];return a}function Zpe(r){const e=r[0];let t="",n="",i=0,a=0,s=0,o=0,l=0,c=0;if(e===0){for(;Br(r.subarray(c,c+1))!=="\0";)t+=Br(r.subarray(c,c+1)),c+=1;for(t+=Br(r.subarray(c,c+1)),c+=1;Br(r.subarray(c,c+1))!=="\0";)n+=Br(r.subarray(c,c+1)),c+=1;n+=Br(r.subarray(c,c+1)),c+=1,i=dt(r,12),a=dt(r,16),o=dt(r,20),l=dt(r,24),c=28}else if(e===1){c+=4,i=dt(r,c),c+=4;const h=dt(r,c);c+=4;const p=dt(r,c);for(c+=4,s=2**32*h+p,Ope(s)||(s=Number.MAX_SAFE_INTEGER,$t.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=dt(r,c),c+=4,l=dt(r,c),c+=4;Br(r.subarray(c,c+1))!=="\0";)t+=Br(r.subarray(c,c+1)),c+=1;for(t+=Br(r.subarray(c,c+1)),c+=1;Br(r.subarray(c,c+1))!=="\0";)n+=Br(r.subarray(c,c+1)),c+=1;n+=Br(r.subarray(c,c+1)),c+=1}const f=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:f}}function Jpe(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(r,4),i=0,n=8;i<t;i++)a.set(e[i],n),n+=e[i].byteLength;return a}function eme(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let a;n>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const s=new Uint8Array(4);return t.byteLength>0&&new DataView(s.buffer).setUint32(0,t.byteLength,!1),Jpe([112,115,115,104],new Uint8Array([n,0,0,0]),r,a,i,s,t)}function tme(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),a=rme(i);e.push(a),n+=a.size}}return e}function rme(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const a=r.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:t,size:e};const s=r.buffer,o=un(new Uint8Array(s,t+12,16));let l=null,c=null,f=0;if(a===0)f=28;else{const p=r.getUint32(28);if(!p||n<32+p*16)return{offset:t,size:e};l=[];for(let g=0;g<p;g++)l.push(new Uint8Array(s,t+32+g*16,16));f=32+p*16}if(!f)return{offset:t,size:e};const h=r.getUint32(f);return e-32<h?{offset:t,size:e}:(c=new Uint8Array(s,t+f+4,h),{version:a,systemId:o,kids:l,data:c,offset:t,size:e})}const V8=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Fc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function dD(r,e){const t=Fc[e];return!!t&&!!t[r.slice(0,4)]}function Gd(r,e,t=!0){return!r.split(",").some(n=>!hD(n,e,t))}function hD(r,e,t=!0){var n;const i=Zo(t);return(n=i?.isTypeSupported(Kd(r,e)))!=null?n:!1}function Kd(r,e){return`${e}/mp4;codecs=${r}`}function X2(r){if(r){const e=r.substring(0,4);return Fc.video[e]}return 2}function O0(r){const e=V8();return r.split(",").reduce((t,n)=>{const a=e&&$y(n)?9:Fc.video[n];return a?(a*2+t)/(t?3:2):(Fc.audio[n]+t)/(t?2:1)},0)}const JS={};function nme(r,e=!0){if(JS[r])return JS[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[r];for(let i=0;i<t.length;i++){var n;if(hD(t[i],"audio",e))return JS[r]=t[i],t[i];if(t[i]==="mp3"&&(n=Zo(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return r}const ime=/flac|opus|mp4a\.40\.34/i;function I0(r,e=!0){return r.replace(ime,t=>nme(t.toLowerCase(),e))}function ame(r,e){const t=[];if(r){const n=r.split(",");for(let i=0;i<n.length;i++)dD(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function hg(r,e){if(r&&(r.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(r)!==-1)&&(Z2(r,"audio")||Z2(r,"video")))return r;if(e){const t=e.split(",");if(t.length>1){if(r){for(let n=t.length;n--;)if(t[n].substring(0,4)===r.substring(0,4))return t[n]}return t[0]}}return e||r}function Z2(r,e){return dD(r,e)&&hD(r,e)}function sme(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function ome(r){if(r.startsWith("av01.")){const e=r.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return r}function J2(r){const e=Zo(r)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function RT(r){return r.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const lme={supported:!0,powerEfficient:!0,smooth:!0},ume={supported:!1,smooth:!1,powerEfficient:!1},Q8={supported:!0,configurations:[],decodingInfoResults:[lme]};function X8(r,e){return{supported:!1,configurations:e,decodingInfoResults:[ume],error:r}}function cme(r,e,t,n,i,a){const s=r.videoCodec,o=r.audioCodec?r.audioGroups:null,l=a?.audioCodec,c=a?.channels,f=c?parseInt(c):l?1/0:2;let h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((p,g)=>{if(g){const y=e.groups[g];if(!y)throw new Error(`Audio track group ${g} not found`);Object.keys(y.channels).forEach(b=>{p[b]=(p[b]||0)+y.channels[b]})}return p},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(p=>$y(p))||r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!h&&Xe(f)&&Object.keys(h).some(p=>parseInt(p)>f)}function Z8(r,e,t,n={}){const i=r.videoCodec;if(!i&&!r.audioCodec||!t)return Promise.resolve(Q8);const a=[],s=fme(r),o=s.length,l=dme(r,e,o>0),c=l.length;for(let f=o||1*c||1;f--;){const h={type:"media-source"};if(o&&(h.video=s[f%o]),c){h.audio=l[f%c];const p=h.audio.bitrate;h.video&&p&&(h.video.bitrate-=p)}a.push(h)}if(i){const f=navigator.userAgent;if(i.split(",").some(h=>$y(h))&&V8())return Promise.resolve(X8(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${f})`),a))}return Promise.all(a.map(f=>{const h=pme(f);return n[h]||(n[h]=t.decodingInfo(f))})).then(f=>({supported:!f.some(h=>!h.supported),configurations:a,decodingInfoResults:f})).catch(f=>({supported:!1,configurations:a,decodingInfoResults:[],error:f}))}function fme(r){var e;const t=(e=r.videoCodec)==null?void 0:e.split(","),n=J8(r),i=r.width||640,a=r.height||480,s=r.frameRate||30,o=r.videoRange.toLowerCase();return t?t.map(l=>{const c={contentType:Kd(ome(l),"video"),width:i,height:a,bitrate:n,framerate:s};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function dme(r,e,t){var n;const i=(n=r.audioCodec)==null?void 0:n.split(","),a=J8(r);return i&&r.audioGroups?r.audioGroups.reduce((s,o)=>{var l;const c=o?(l=e.groups[o])==null?void 0:l.tracks:null;return c?c.reduce((f,h)=>{if(h.groupId===o){const p=parseFloat(h.channels||"");i.forEach(g=>{const y={contentType:Kd(g,"audio"),bitrate:t?hme(g,a):a};p&&(y.channels=""+p),f.push(y)})}return f},s):s},[]):[]}function hme(r,e){if(e<=1)return 1;let t=128e3;return r==="ec-3"?t=768e3:r==="ac-3"&&(t=64e4),Math.min(e/2,t)}function J8(r){return Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)/1e3)*1e3||1}function pme(r){let e="";const{audio:t,video:n}=r;if(n){const i=RT(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const i=RT(t.contentType);e+=`${n?"_":""}${i}_c${t.channels}`}return e}const PT=["NONE","TYPE-0","TYPE-1",null];function mme(r){return PT.indexOf(r)>-1}const C0=["SDR","PQ","HLG"];function gme(r){return!!r&&C0.indexOf(r)>-1}var pg={No:"",Yes:"YES",v2:"v2"};function eF(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?pg.v2:pg.Yes:pg.No}class tF{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Yd{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return rF(this._audioGroups,e)}hasSubtitleGroup(e){return rF(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function rF(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function yme(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function vme(r,e){let t=!1,n=[];if(r&&(t=r!=="SDR",n=[r]),e){n=e.allowedVideoRanges||C0.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&yme(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const bme=r=>{const e=new WeakSet;return(t,n)=>{if(r&&(n=r(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Xt=(r,e)=>JSON.stringify(r,bme(e));function xme(r,e,t,n,i){const a=Object.keys(r),s=n?.channels,o=n?.audioCodec,l=i?.videoCodec,c=s&&parseInt(s)===2;let f=!1,h=!1,p=1/0,g=1/0,y=1/0,b=1/0,v=0,E=[];const{preferHDR:S,allowedVideoRanges:w}=vme(e,i);for(let P=a.length;P--;){const k=r[a[P]];f||(f=k.channels[2]>0),p=Math.min(p,k.minHeight),g=Math.min(g,k.minFramerate),y=Math.min(y,k.minBitrate),w.filter(B=>k.videoRanges[B]>0).length>0&&(h=!0)}p=Xe(p)?p:0,g=Xe(g)?g:0;const A=Math.max(1080,p),T=Math.max(30,g);y=Xe(y)?y:t,t=Math.max(y,t),h||(e=void 0);const I=a.length>1;return{codecSet:a.reduce((P,k)=>{const M=r[k];if(k===P)return P;if(E=h?w.filter(B=>M.videoRanges[B]>0):[],I){if(M.minBitrate>t)return ba(k,`min bitrate of ${M.minBitrate} > current estimate of ${t}`),P;if(!M.hasDefaultAudio)return ba(k,"no renditions with default or auto-select sound found"),P;if(o&&k.indexOf(o.substring(0,4))%5!==0)return ba(k,`audio codec preference "${o}" not found`),P;if(s&&!c){if(!M.channels[s])return ba(k,`no renditions with ${s} channel sound found (channels options: ${Object.keys(M.channels)})`),P}else if((!o||c)&&f&&M.channels[2]===0)return ba(k,"no renditions with stereo sound found"),P;if(M.minHeight>A)return ba(k,`min resolution of ${M.minHeight} > maximum of ${A}`),P;if(M.minFramerate>T)return ba(k,`min framerate of ${M.minFramerate} > maximum of ${T}`),P;if(!E.some(B=>M.videoRanges[B]>0))return ba(k,`no variants with VIDEO-RANGE of ${Xt(E)} found`),P;if(l&&k.indexOf(l.substring(0,4))%5!==0)return ba(k,`video codec preference "${l}" not found`),P;if(M.maxScore<v)return ba(k,`max score of ${M.maxScore} < selected max of ${v}`),P}return P&&(O0(k)>=O0(P)||M.fragmentError>r[P].fragmentError)?P:(b=M.minIndex,v=M.maxScore,k)},void 0),videoRanges:E,preferHDR:S,minFramerate:g,minBitrate:y,minIndex:b}}function ba(r,e){$t.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function e5(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Sme(r,e,t,n){return r.slice(t,n+1).reduce((i,a,s)=>{if(!a.codecSet)return i;const o=a.audioGroups;let l=i[a.codecSet];l||(i[a.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,a.bitrate);const c=Math.min(a.height,a.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,a.frameRate),l.minIndex=Math.min(l.minIndex,s),l.maxScore=Math.max(l.maxScore,a.score),l.fragmentError+=a.fragmentError,l.videoRanges[a.videoRange]=(l.videoRanges[a.videoRange]||0)+1,o&&o.forEach(f=>{if(!f)return;const h=e.groups[f];h&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{l.channels[p]=(l.channels[p]||0)+h.channels[p]}))}),i},{})}function nF(r){if(!r)return r;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:a}=r;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:a}}function La(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Wl(r,i,t))return n}return-1}function Wl(r,e,t){const{groupId:n,name:i,lang:a,assocLang:s,default:o}=r,l=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(a===void 0||Eme(a,e.lang))&&(a===void 0||e.assocLang===s)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in r)||wme(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function Eme(r,e="--"){return r.length===e.length?r===e:r.startsWith(e)||e.startsWith(r)}function wme(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Pl(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function _me(r,e,t,n,i){const a=e[n],o=e.reduce((p,g,y)=>{const b=g.uri;return(p[b]||(p[b]=[])).push(y),p},{})[a.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=a.videoRange,c=a.frameRate,f=a.codecSet.substring(0,4),h=iF(e,n,p=>{if(p.videoRange!==l||p.frameRate!==c||p.codecSet.substring(0,4)!==f)return!1;const g=p.audioGroups,y=t.filter(b=>!g||g.indexOf(b.groupId)!==-1);return La(r,y,i)>-1});return h>-1?h:iF(e,n,p=>{const g=p.audioGroups,y=t.filter(b=>!g||g.indexOf(b.groupId)!==-1);return La(r,y,i)>-1})}function iF(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}function R0(r,e){var t;return!!r&&r!==((t=e.loadLevelObj)==null?void 0:t.uri)}class Tme extends Qi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:a,hls:s}=this,{autoLevelEnabled:o,media:l}=s;if(!i||!l)return;const c=performance.now(),f=a?a.stats:i.stats,h=a?a.duration:i.duration,p=c-f.loading.start,g=s.minAutoLevel,y=i.level,b=this._nextAutoLevel;if(f.aborted||f.loaded&&f.loaded===f.total||y<=g){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const v=b>-1&&b!==y,E=!!t||v;if(!E&&(l.paused||!l.playbackRate||!l.readyState))return;const S=s.mainForwardBufferInfo;if(!E&&S===null)return;const w=this.bwEstimator.getEstimateTTFB(),A=Math.abs(l.playbackRate);if(p<=Math.max(w,1e3*(h/(A*2))))return;const T=S?S.len/A:0,I=f.loading.first?f.loading.first-f.loading.start:-1,D=f.loaded&&I>-1,P=this.getBwEstimate(),k=s.levels,M=k[y],B=Math.max(f.loaded,Math.round(h*(i.bitrate||M.averageBitrate)/8));let C=D?p-I:p;C<1&&D&&(C=Math.min(p,f.loaded*8/P));const W=D?f.loaded*1e3/C:0,Y=w/1e3,q=W?(B-f.loaded)/W:B*8/P+Y;if(q<=T)return;const $=W?W*8:P,z=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,K=this.hls.config.abrBandWidthUpFactor;let Z=Number.POSITIVE_INFINITY,X;for(X=y-1;X>g;X--){const fe=k[X].maxBitrate,se=!k[X].details||z;if(Z=this.getTimeToLoadFrag(Y,$,h*fe,se),Z<Math.min(T,h+Y))break}if(Z>=q||Z>h*10)return;D?this.bwEstimator.sample(p-Math.min(w,I),f.loaded):this.bwEstimator.sampleTTFB(p);const H=k[X].maxBitrate;this.getBwEstimate()*K>H&&this.resetEstimator(H);const G=this.findBestLevel(H,g,X,0,T,1,1);G>-1&&(X=G),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${T.toFixed(3)} s
      Estimated load time for current fragment: ${q.toFixed(3)} s
      Estimated load time for down switch fragment: ${Z.toFixed(3)} s
      TTFB estimate: ${I|0} ms
      Current BW estimate: ${Xe(P)?P|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${X} @ ${H|0} bps`),s.nextLoadLevel=s.nextAutoLevel=X,this.clearTimer();const J=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===X&&X>0){const fe=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${X>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${fe.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,X>g){let se=this.findBestLevel(this.hls.levels[g].bitrate,g,X,0,fe,1,1);se===-1&&(se=g),this.hls.nextLoadLevel=this.hls.nextAutoLevel=se,this.resetEstimator(this.hls.levels[se].bitrate)}}};v||q>Z*2?J():this.timer=self.setInterval(J,Z*1e3),s.trigger(U.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:f})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Cpe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.FRAG_LOADING,this.onFragLoading,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.FRAG_LOADING,this.onFragLoading,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(U.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case we.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:a}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const s=performance.now(),o=a?a.stats:n.stats,l=s-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(h,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,n,i){const a=e+n/t,s=i?e+this.lastLevelLoadSec:0;return a+s}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,a=i.end-i.first;Xe(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===et.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=n?n.duration:t.duration,s=this.hls.levels[t.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const a={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(U.FRAG_BUFFERED,a),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,a=i!=null&&i.stats.loaded?i.stats:n.stats;if(a.aborted||this.ignoreFragment(n))return;const s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==et.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,t,e,0,i,1,1);if(a>-1)return a;const s=this.hls.firstLevel,o=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,a)&&s[e].loadError<=s[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:s}=n,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let f=a.abrBandWidthFactor,h=a.abrBandWidthUpFactor;if(c){const v=this.findBestLevel(l,s,i,c,0,f,h);if(v>=0)return this.rebufferNotice=-1,v}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!c){const v=this.bitrateTestDelay;v&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-v,this.info(`bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),f=h=1)}const g=this.findBestLevel(l,s,i,c,p,f,h);if(this.rebufferNotice!==g&&(this.rebufferNotice=g,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${g}`)),g>-1)return g;const y=n.levels[s],b=n.loadLevelObj;return b&&y?.bitrate<b.bitrate?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,a,s,o){var l;const c=i+a,f=this.lastLoadedFragLevel,h=f===-1?this.hls.firstLevel:f,{fragCurrent:p,partCurrent:g}=this,{levels:y,allAudioTracks:b,loadLevel:v,config:E}=this.hls;if(y.length===1)return 0;const S=y[h],w=!!((l=this.hls.latestLevelDetails)!=null&&l.live),A=v===-1||f===-1;let T,I="SDR",D=S?.frameRate||0;const{audioPreference:P,videoPreference:k}=E,M=this.audioTracksByGroup||(this.audioTracksByGroup=e5(b));let B=-1;if(A){if(this.firstSelection!==-1)return this.firstSelection;const $=this.codecTiers||(this.codecTiers=Sme(y,M,t,n)),z=xme($,I,e,P,k),{codecSet:K,videoRanges:Z,minFramerate:X,minBitrate:H,minIndex:G,preferHDR:J}=z;B=G,T=K,I=J?Z[Z.length-1]:Z[0],D=X,e=Math.max(e,H),this.log(`picked start tier ${Xt(z)}`)}else T=S?.codecSet,I=S?.videoRange;const C=g?g.duration:p?p.duration:0,W=this.bwEstimator.getEstimateTTFB()/1e3,Y=[];for(let $=n;$>=t;$--){var q;const z=y[$],K=$>h;if(!z)continue;if(E.useMediaCapabilities&&!z.supportedResult&&!z.supportedPromise){const se=navigator.mediaCapabilities;typeof se?.decodingInfo=="function"&&cme(z,M,I,D,e,P)?(z.supportedPromise=Z8(z,M,se,this.supportedCache),z.supportedPromise.then(be=>{if(!this.hls)return;z.supportedResult=be;const oe=this.hls.levels,re=oe.indexOf(z);be.error?this.warn(`MediaCapabilities decodingInfo error: "${be.error}" for level ${re} ${Xt(be)}`):be.supported?be.decodingInfoResults.some(te=>te.smooth===!1||te.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${re} not smooth or powerEfficient: ${Xt(be)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${re} ${Xt(be)}`),re>-1&&oe.length>1&&(this.log(`Removing unsupported level ${re}`),this.hls.removeLevel(re),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(be=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${be}`)})):z.supportedResult=Q8}if((T&&z.codecSet!==T||I&&z.videoRange!==I||K&&D>z.frameRate||!K&&D>0&&D<z.frameRate||(q=z.supportedResult)!=null&&(q=q.decodingInfoResults)!=null&&q.some(se=>se.smooth===!1))&&(!A||$!==B)){Y.push($);continue}const Z=z.details,X=(g?Z?.partTarget:Z?.averagetargetduration)||C;let H;K?H=o*e:H=s*e;const G=C&&i>=C*2&&a===0?z.averageBitrate:z.maxBitrate,J=this.getTimeToLoadFrag(W,H,G*X,Z===void 0);if(H>=G&&($===f||z.loadError===0&&z.fragmentError===0)&&(J<=W||!Xe(J)||w&&!this.bitrateTestDelay||J<c)){const se=this.forcedAutoLevel;return $!==v&&(se===-1||se!==v)&&(Y.length&&this.trace(`Skipped level(s) ${Y.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${y[Y[0]].codecs}" ${y[Y[0]].videoRange}; not compatible with "${T}" ${I}`),this.info(`switch candidate:${h}->${$} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-G)} ttfb:${W.toFixed(1)} avgDuration:${X.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${J.toFixed(1)} firstSelection:${A} codecSet:${z.codecSet} videoRange:${z.videoRange} hls.loadLevel:${v}`)),A&&(this.firstSelection=$),$}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const t5={search:function(r,e){let t=0,n=r.length-1,i=null,a=null;for(;t<=n;){i=(t+n)/2|0,a=r[i];const s=e(a);if(s>0)t=i+1;else if(s<0)n=i-1;else return a}return null}};function Ame(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Xe(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<r.length;++a){const s=r[a];if(Ome(e,t,s))return s}return null}function ru(r,e,t=0,n=0,i=.005){let a=null;if(r){a=e[1+r.sn-e[0].sn]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),a&&r.level!==a.level&&a.end<=r.end&&(a=e[2+r.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(a=e[0]);if(a&&((!r||r.level===a.level)&&aF(t,n,a)===0||Dme(a,r,Math.min(i,n))))return a;const s=t5.search(e,aF.bind(null,t,n));return s&&(s!==r||!a)?s:a}function Dme(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),t);return r.start<=n}return!1}function aF(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function Ome(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function r5(r,e,t){if(r&&r.startCC<=e&&r.endCC>=e){let n=r.fragments;const{fragmentHint:i}=r;i&&(n=n.concat(i));let a;return t5.search(n,s=>s.cc<e?1:s.cc>e?-1:(a=s,s.end<=t?1:s.start>t?-1:0)),a||null}return null}function P0(r){switch(r.details){case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_TIMEOUT:case we.LEVEL_LOAD_TIMEOUT:case we.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function n5(r){return r.details.startsWith("key")}function i5(r){return n5(r)&&!!r.frag&&!r.frag.decryptdata}function sF(r,e){const t=P0(e);return r.default[`${t?"timeout":"error"}Retry`]}function pD(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function oF(r){return Ut(Ut({},r),{errorRetry:null,timeoutRetry:null})}function L0(r,e,t,n){if(!r)return!1;const i=n?.code,a=e<r.maxNumRetry&&(Ime(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,a):a}function Ime(r){return LT(r)||!!r&&(r<400||r>499)}function LT(r){return r===0&&navigator.onLine===!1}var ln={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},hi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class Cme extends Qi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(U.ERROR,this.onError,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(U.ERROR,this.onError,this),e.off(U.ERROR,this.onErrorOut,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===et.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(s=>i.indexOf(s.groupId)>=0).some(s=>{var o;return(o=s.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,a=t.context;switch(t.details){case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case we.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=vc();return}case we.FRAG_GAP:case we.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=ln.SendAlternateToPenaltyBox;return}case we.LEVEL_EMPTY_ERROR:case we.LEVEL_PARSING_ERROR:{var s;const l=t.parent===et.MAIN?t.level:i.loadLevel;t.details===we.LEVEL_EMPTY_ERROR&&((s=t.context)!=null&&(s=s.levelDetails)!=null&&s.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l))}return;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.SUBTITLE_LOAD_ERROR:case we.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const l=i.loadLevelObj;if(l&&(a.type===St.AUDIO_TRACK&&l.hasAudioGroup(a.groupId)||a.type===St.SUBTITLE_TRACK&&l.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=ln.SendAlternateToPenaltyBox,t.errorAction.flags=hi.MoveAllAlternatesMatchingHost;return}}return;case we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingHDCP};return;case we.KEY_SYSTEM_SESSION_UPDATE_FAILED:case we.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case we.KEY_SYSTEM_NO_SESSION:t.errorAction={action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingKey};return;case we.BUFFER_ADD_CODEC_ERROR:case we.REMUX_ALLOC_ERROR:case we.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:i.loadLevel)}return;case we.INTERNAL_EXCEPTION:case we.BUFFER_APPENDING_ERROR:case we.BUFFER_FULL_ERROR:case we.LEVEL_SWITCH_ERROR:case we.BUFFER_STALLED_ERROR:case we.BUFFER_SEEK_OVER_HOLE:case we.BUFFER_NUDGE_ON_STALL:t.errorAction=vc();return}t.type===at.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=vc())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=sF(n.config.playlistLoadPolicy,e),a=this.playlistError++;if(L0(i,a,P0(e),e.response))return{action:ln.RetryRequest,flags:hi.None,retryConfig:i,retryCount:a};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:a,keyLoadPolicy:s}=t.config,o=sF(n5(e)?s:a,e),l=t.levels.reduce((f,h)=>f+h.fragmentError,0);if(i&&(e.details!==we.FRAG_GAP&&i.fragmentError++,!i5(e)&&L0(o,l,P0(e),e.response)))return{action:ln.RetryRequest,flags:hi.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var a,s;const c=e.details;i.loadError++,c===we.BUFFER_APPEND_ERROR&&i.fragmentError++;let f=-1;const{levels:h,loadLevel:p,minAutoLevel:g,maxAutoLevel:y}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const b=(a=e.frag)==null?void 0:a.type,E=(b===et.AUDIO&&c===we.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===we.BUFFER_ADD_CODEC_ERROR||c===we.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:I})=>i.audioCodec!==I),w=e.sourceBufferName==="video"&&(c===we.BUFFER_ADD_CODEC_ERROR||c===we.BUFFER_APPEND_ERROR)&&h.some(({codecSet:I,audioCodec:D})=>i.codecSet!==I&&i.audioCodec===D),{type:A,groupId:T}=(s=e.context)!=null?s:{};for(let I=h.length;I--;){const D=(I+p)%h.length;if(D!==p&&D>=g&&D<=y&&h[D].loadError===0){var o,l;const P=h[D];if(c===we.FRAG_GAP&&b===et.MAIN&&e.frag){const k=h[D].details;if(k){const M=ru(e.frag,k.fragments,e.frag.start);if(M!=null&&M.gap)continue}}else{if(A===St.AUDIO_TRACK&&P.hasAudioGroup(T)||A===St.SUBTITLE_TRACK&&P.hasSubtitleGroup(T))continue;if(b===et.AUDIO&&(o=i.audioGroups)!=null&&o.some(k=>P.hasAudioGroup(k))||b===et.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(k=>P.hasSubtitleGroup(k))||E&&i.audioCodec===P.audioCodec||w&&i.codecSet===P.codecSet||!E&&i.codecSet!==P.codecSet)continue}f=D;break}}if(f>-1&&n.loadLevel!==f)return e.levelRetry=!0,this.playlistError=0,{action:ln.SendAlternateToPenaltyBox,flags:hi.None,nextAutoLevel:f}}return{action:ln.SendAlternateToPenaltyBox,flags:hi.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case ln.DoNothing:break;case ln.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==we.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,a=n.nextAutoLevel;switch(i){case hi.None:this.switchLevel(e,a);break;case hi.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),c=t.levels[l],f=c?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=f,f==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(f){t.maxHdcpLevel=PT[PT.indexOf(f)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case hi.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const c=this.hls.levels,f=c.length;for(let p=f;p--;)if(this.variantHasKey(c[p],l)){var s,o;this.log(`Banned key found in level ${p} (${c[p].bitrate}bps) or audio group "${(s=c[p].audioGroups)==null?void 0:s.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${un(l.keyId||[])}`),c[p].fragmentError++,c[p].loadError++,this.log(`Removing level ${p} with key error (${e.error})`),this.hls.removeLevel(p)}const h=e.frag;if(this.hls.levels.length<f)n.resolved=!0;else if(h&&h.type!==et.MAIN){const p=h.decryptdata;p&&!l.matches(p)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===we.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=RT(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${a} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(a))}}}function vc(r){const e={action:ln.DoNothing,flags:hi.None};return r&&(e.resolved=!0),e}var jr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Rme{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.BUFFER_APPENDED,this.onBufferAppended,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.BUFFER_APPENDED,this.onBufferAppended,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const a=n[i];if(!a)break;if(a.start<=e&&e<=a.end&&a.loaded)return a}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,a=Object.keys(i);for(let s=a.length;s--;){const o=i[a[s]];if(o?.body.type===t&&(!n||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,n,i,a){this.timeRanges&&(this.timeRanges[e]=t);const s=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||s>=l.body.sn)return;if(!l.buffered&&(!l.loaded||a)){l.body.type===n&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(f=>{const h=!this.isTimeBuffered(f.startPTS,f.endPTS,t);return h&&this.removeFragment(l.body),h})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=ec(n),a=this.fragments[i];if(!a||a.buffered&&n.gap)return;const s=!n.relurl;Object.keys(t).forEach(o=>{const l=n.elementaryStreams[o];if(!l)return;const c=t[o],f=s||l.partial===!0;a.range[o]=this.getBufferedTimes(n,e.part,f,c)}),a.loaded=null,Object.keys(a.range).length?(this.bufferedEnd(a,n),gm(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=lF(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=ec(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,n,i){const a={time:[],partial:n},s=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||s;for(let f=0;f<i.length;f++){const h=i.start(f)-this.bufferPadding,p=i.end(f)+this.bufferPadding;if(c>=h&&l<=p){a.time.push({startPTS:Math.max(s,i.start(f)),endPTS:Math.min(o,i.end(f))});break}else if(s<p&&o>h){const g=Math.max(s,i.start(f)),y=Math.min(o,i.end(f));y>g&&(a.partial=!0,a.time.push({startPTS:g,endPTS:y}))}else if(o<=h)break}return a}getPartialFragment(e){let t=null,n,i,a,s=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const f=l[c];f&&gm(f)&&(i=f.body.start-o,a=f.body.end+o,e>=i&&e<=a&&(n=Math.min(e-i,a-e),s<=n&&(t=f.body,s=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||gm(t))}getState(e){const t=ec(e),n=this.fragments[t];return n?n.buffered?gm(n)?jr.PARTIAL:jr.OK:jr.APPENDING:jr.NOT_LOADED}isTimeBuffered(e,t,n){let i,a;for(let s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,a=n.end(s)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,a=ec(n);this.fragments[a]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:a,type:s}=t;if(n.sn==="initSegment")return;const o=n.type;if(i){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(i)}this.timeRanges=a;const l=a[s];this.detectEvictedFragments(s,l,o,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ec(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const a=t[n[i]];if(a?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const o=this.fragments[s];if(!o)return;const l=o.body;l.type!==n||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||a)&&this.removeFragment(l)})}removeFragment(e){const t=ec(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=lF(n,a=>a.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function gm(r){var e,t,n;return r.buffered&&!!(r.body.gap||(e=r.range.video)!=null&&e.partial||(t=r.range.audio)!=null&&t.partial||(n=r.range.audiovideo)!=null&&n.partial)}function ec(r){return`${r.type}_${r.level}_${r.sn}`}function lF(r,e){return r.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var Jo={cbc:0,ctr:1};class Pme{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Jo.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Jo.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Lme(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?r.slice(0,e-t):r}class kme{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],a=n[1],s=n[2],o=n[3],l=this.invSubMix,c=l[0],f=l[1],h=l[2],p=l[3],g=new Uint32Array(256);let y=0,b=0,v=0;for(v=0;v<256;v++)v<128?g[v]=v<<1:g[v]=v<<1^283;for(v=0;v<256;v++){let E=b^b<<1^b<<2^b<<3^b<<4;E=E>>>8^E&255^99,e[y]=E,t[E]=y;const S=g[y],w=g[S],A=g[w];let T=g[E]*257^E*16843008;i[y]=T<<24|T>>>8,a[y]=T<<16|T>>>16,s[y]=T<<8|T>>>24,o[y]=T,T=A*16843009^w*65537^S*257^y*16843008,c[E]=T<<24|T>>>8,f[E]=T<<16|T>>>16,h[E]=T<<8|T>>>24,p[E]=T,y?(y=S^g[g[g[A^S]]],b^=g[g[b]]):y=b=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const a=this.keySize=t.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const s=this.ksRows=(a+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(s),f=this.invKeySchedule=new Uint32Array(s),h=this.sBox,p=this.rcon,g=this.invSubMix,y=g[0],b=g[1],v=g[2],E=g[3];let S,w;for(o=0;o<s;o++){if(o<a){S=c[o]=t[o];continue}w=S,o%a===0?(w=w<<8|w>>>24,w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255],w^=p[o/a|0]<<24):a>6&&o%a===4&&(w=h[w>>>24]<<24|h[w>>>16&255]<<16|h[w>>>8&255]<<8|h[w&255]),c[o]=S=(c[o-a]^w)>>>0}for(l=0;l<s;l++)o=s-l,l&3?w=c[o]:w=c[o-4],l<4||o<=4?f[l]=w:f[l]=y[h[w>>>24]]^b[h[w>>>16&255]]^v[h[w>>>8&255]]^E[h[w&255]],f[l]=f[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],f=o[2],h=o[3],p=this.uint8ArrayToUint32Array_(n);let g=p[0],y=p[1],b=p[2],v=p[3];const E=new Int32Array(e),S=new Int32Array(E.length);let w,A,T,I,D,P,k,M,B,C,W,Y,q,$;const z=this.networkToHostOrderSwap;for(;t<E.length;){for(B=z(E[t]),C=z(E[t+1]),W=z(E[t+2]),Y=z(E[t+3]),D=B^a[0],P=Y^a[1],k=W^a[2],M=C^a[3],q=4,$=1;$<i;$++)w=l[D>>>24]^c[P>>16&255]^f[k>>8&255]^h[M&255]^a[q],A=l[P>>>24]^c[k>>16&255]^f[M>>8&255]^h[D&255]^a[q+1],T=l[k>>>24]^c[M>>16&255]^f[D>>8&255]^h[P&255]^a[q+2],I=l[M>>>24]^c[D>>16&255]^f[P>>8&255]^h[k&255]^a[q+3],D=w,P=A,k=T,M=I,q=q+4;w=s[D>>>24]<<24^s[P>>16&255]<<16^s[k>>8&255]<<8^s[M&255]^a[q],A=s[P>>>24]<<24^s[k>>16&255]<<16^s[M>>8&255]<<8^s[D&255]^a[q+1],T=s[k>>>24]<<24^s[M>>16&255]<<16^s[D>>8&255]<<8^s[P&255]^a[q+2],I=s[M>>>24]<<24^s[D>>16&255]<<16^s[P>>8&255]<<8^s[k&255]^a[q+3],S[t]=z(w^g),S[t+1]=z(I^y),S[t+2]=z(T^b),S[t+3]=z(A^v),g=B,y=C,b=W,v=Y,t=t+4}return S.buffer}}class Mme{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=Nme(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Nme(r){switch(r){case Jo.cbc:return"AES-CBC";case Jo.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${r}`)}}const Fme=16;class mD{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Lme(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((a,s)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,n,i);const l=this.flush();l?a(l.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:a,currentResult:s,remainderData:o}=this;if(i!==Jo.cbc||t.byteLength!==16)return $t.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Wi(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;a&&(n=a);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new kme),c.expandKey(t);const f=s;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,f||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new Mme(this.subtle,t,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Pme(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>($t.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%Fme;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&($t.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const uF=Math.pow(2,17);class Bme{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){l(fF(e));return}else e.gap=!1;const c=this.loader=a?new a(i):new s(i),f=cF(e);e.loader=c;const h=oF(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:uF};e.stats=c.stats;const g={onSuccess:(y,b,v,E)=>{this.resetLoader(e,c);let S=y.data;v.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),o({frag:e,part:null,payload:S,networkDetails:E})},onError:(y,b,v,E)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ut({url:n,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:v,stats:E}))},onAbort:(y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:v,stats:y}))},onTimeout:(y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:v,stats:y}))}};t&&(g.onProgress=(y,b,v,E)=>t({frag:e,part:null,payload:v,networkDetails:E})),c.load(f,p,g)})}loadPart(e,t,n){this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(fF(e,t));return}const c=this.loader=a?new a(i):new s(i),f=cF(e,t);e.loader=c;const h=oF(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:uF};t.stats=c.stats,c.load(f,p,{onSuccess:(g,y,b,v)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const E={frag:e,part:t,payload:g.data,networkDetails:v};n(E),o(E)},onError:(g,y,b,v)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Ut({url:f.url,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:b,stats:v}))},onAbort:(g,y,b)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:g}))},onTimeout:(g,y,b)=>{this.resetLoader(e,c),l(new bs({type:at.NETWORK_ERROR,details:we.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:b,stats:g}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,a=i.total;if(n.loaded+=i.loaded,a){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/a),l),h=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+h}else n.total=Math.max(n.loaded,n.total);const s=n.loading,o=i.loading;s.start?s.first+=o.first-o.start:(s.start=o.start,s.first=o.first),s.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function cF(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,a=t.byteRangeEndOffset;if(Xe(i)&&Xe(a)){var s;let o=i,l=a;if(r.sn==="initSegment"&&Ume((s=r.decryptdata)==null?void 0:s.method)){const c=a-i;c%16&&(l=a+(16-c%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=l}return n}function fF(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:at.MEDIA_ERROR,details:we.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new bs(n)}function Ume(r){return r==="AES-128"||r==="AES-256"}class bs extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class a5 extends Qi{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class gD{constructor(e,t,n,i=0,a=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=ym(),this.buffering={audio:ym(),video:ym(),audiovideo:ym()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=a,this.partial=s}}function ym(){return{start:0,executeStart:0,executeEnd:0,end:0}}const dF={length:0,start:()=>0,end:()=>0};class pt{static isBuffered(e,t){if(e){const n=pt.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=pt.getBuffered(e);return pt.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=pt.bufferedRanges(e);if(i.length)return pt.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((f,h)=>f.start-h.start||h.end-f.end);let i=-1,a=[];if(n)for(let f=0;f<e.length;f++){t>=e[f].start&&t<=e[f].end&&(i=f);const h=a.length;if(h){const p=a[h-1].end;e[f].start-p<n?e[f].end>p&&(a[h-1].end=e[f].end):a.push(e[f])}else a.push(e[f])}else a=e;let s=0,o,l=t,c=t;for(let f=0;f<a.length;f++){const h=a[f].start,p=a[f].end;if(i===-1&&t>=h&&t<=p&&(i=f),t+n>=h&&t<p)l=h,c=p,s=c-t;else if(t+n<h){o=h;break}}return{len:s,start:l||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||dF}catch(t){return $t.log("failed to get media.buffered",t),dF}}}const s5=/\{\$([a-zA-Z0-9-_]+)\}/g;function hF(r){return s5.test(r)}function kT(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(s5,n=>{const i=n.substring(2,n.length-1),a=t?.[i];return a===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):a})}return e}function pF(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(t).searchParams;if(s.has(i))a=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(s){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,a=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=a||""}function jme(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const $me=/^(\d+)x(\d+)$/,mF=/(.+?)=(".*?"|.*?)(?:,|$)/g;class fr{constructor(e,t){typeof e=="string"&&(e=fr.parseAttrList(e,t)),zt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=$me.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={};for(mF.lastIndex=0;(n=mF.exec(e))!==null;){const s=n[1].trim();let o=n[2];const l=o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1;let c=!1;if(l)o=o.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(l||c))o=kT(t,o);else if(!c&&!l)switch(s){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":$t.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=o}return i}}const Hme="com.apple.hls.interstitial";function Gme(r){return r!=="ID"&&r!=="CLASS"&&r!=="CUE"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function Kme(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"||r==="SCTE35-CMD"}class o5{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(i=t?.tagOrder)!=null?i:n,t){const a=t.attr;for(const s in a)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==a[s]){$t.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=zt(new fr({}),a,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=t?.endDate||new Date(this.attr["END-DATE"]);Xe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?($t.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Hme}get isValid(){return!!this.id&&!this._badValueForSameId&&Xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Yme=10;class zme{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Yme}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function k0(r,e){return r.length===e.length?!r.some((t,n)=>t!==e[n]):!1}function gF(r,e){return!r&&!e?!0:!r||!e?!1:k0(r,e)}function bc(r){return r==="AES-128"||r==="AES-256"||r==="AES-256-CTR"}function yD(r){switch(r){case"AES-128":case"AES-256":return Jo.cbc;case"AES-256-CTR":return Jo.ctr;default:throw new Error(`invalid full segment method ${r}`)}}function vD(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function MT(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}function qme(r){const e=MT(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function l5(r){const e=function(n,i,a){const s=n[i];n[i]=n[a],n[a]=s};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function u5(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const a=i[0]==="base64",s=i[1];a?(n.splice(-1,1),t=vD(s)):t=qme(s)}}return t}const M0=typeof self<"u"?self:void 0;var dr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function mg(r){switch(r){case cn.FAIRPLAY:return dr.FAIRPLAY;case cn.PLAYREADY:return dr.PLAYREADY;case cn.WIDEVINE:return dr.WIDEVINE;case cn.CLEARKEY:return dr.CLEARKEY}}function eE(r){switch(r){case dr.FAIRPLAY:return cn.FAIRPLAY;case dr.PLAYREADY:return cn.PLAYREADY;case dr.WIDEVINE:return cn.WIDEVINE;case dr.CLEARKEY:return cn.CLEARKEY}}function pd(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[dr.FAIRPLAY,dr.WIDEVINE,dr.PLAYREADY,dr.CLEARKEY].filter(i=>!!e[i]):[];return!n[dr.WIDEVINE]&&t&&n.push(dr.WIDEVINE),n}const c5=(function(r){return M0!=null&&(r=M0.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function Wme(r,e,t,n){let i;switch(r){case dr.FAIRPLAY:i=["cenc","sinf"];break;case dr.WIDEVINE:case dr.PLAYREADY:i=["cenc"];break;case dr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return Vme(i,e,t,n)}function Vme(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Qme(r){var e;return!!r&&(r.sessionType==="persistent-license"||!!((e=r.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function f5(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(s){const o=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(o){const l=vD(o).subarray(0,16);return l5(l),l}}return null}let tc={};class zo{static clearKeyUriToKeyIdMap(){tc={}}static setKeyIdForUri(e,t){tc[e]=t}static addKeyIdForUri(e){const t=Object.keys(tc).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,t),tc[e]=n,n}constructor(e,t,n,i=[1],a=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!bc(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(U8(s)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&k0(e.keyFormatVersions,this.keyFormatVersions)&&gF(e.iv,this.iv)&&gF(e.keyId,this.keyId)}isSupported(){if(this.method){if(bc(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case cn.FAIRPLAY:case cn.WIDEVINE:case cn.PLAYREADY:case cn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(bc(this.method)){let a=this.iv;return a||(typeof e!="number"&&($t.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),a=Zme(e)),new zo(this.method,this.uri,"identity",this.keyFormatVersions,a)}if(this.keyId){const a=tc[this.uri];if(a&&!k0(this.keyId,a)&&zo.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=u5(this.uri);if(n)switch(this.keyFormat){case cn.WIDEVINE:if(this.pssh=n,!this.keyId){const a=tme(n.buffer);if(a.length){var i;const s=a[0];this.keyId=(i=s.kids)!=null&&i.length?s.kids[0]:null}}this.keyId||(this.keyId=yF(t));break;case cn.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=eme(a,null,n),this.keyId=f5(n);break}default:{let a=n.subarray(0,16);if(a.length!==16){const s=new Uint8Array(16);s.set(a,16-a.length),a=s}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a;a=Xme(t),a||(a=yF(t),a||(a=tc[this.uri])),a&&(this.keyId=a,zo.setKeyIdForUri(this.uri,a))}return this}}function Xme(r){const e=r?.[cn.WIDEVINE];return e?e.keyId:null}function yF(r){const e=r?.[cn.PLAYREADY];if(e){const t=u5(e.uri);if(t)return f5(t)}return null}function Zme(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const vF=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,bF=/#EXT-X-MEDIA:(.*)/g,Jme=/^#EXT(?:INF|-X-TARGETDURATION):/m,tE=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),ege=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ka{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return uD.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Jme.test(e)}static parseMasterPlaylist(e,t){const n=hF(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},a=[];if(vF.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let s;for(;(s=vF.exec(e))!=null;)if(s[1]){var o;const c=new fr(s[1],i),f=kT(i,s[2]),h={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:ka.resolve(f,t)},p=c.decimalResolution("RESOLUTION");p&&(h.width=p.width,h.height=p.height),EF(c.CODECS,h);const g=c["SUPPLEMENTAL-CODECS"];g&&(h.supplemental={},EF(g,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||a.push(h),i.levels.push(h)}else if(s[3]){const c=s[3],f=s[4];switch(c){case"SESSION-DATA":{const h=new fr(f,i),p=h["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=h);break}case"SESSION-KEY":{const h=xF(f,t,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):$t.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${f}"`);break}case"DEFINE":{{const h=new fr(f,i);pF(i,h,t)}break}case"CONTENT-STEERING":{const h=new fr(f,i);i.contentSteering={uri:ka.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=SF(f);break}}}const l=a.length>0&&a.length<i.levels.length;return i.levels=l?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const a={},s=n.levels,o={AUDIO:s.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:s.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(bF.lastIndex=0;(i=bF.exec(e))!==null;){const c=new fr(i[1],n),f=c.TYPE;if(f){const h=o[f],p=a[f]||[];a[f]=p;const g=c.LANGUAGE,y=c["ASSOC-LANGUAGE"],b=c.CHANNELS,v=c.CHARACTERISTICS,E=c["INSTREAM-ID"],S={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||g||"",type:f,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:g,url:c.URI?ka.resolve(c.URI,t):""};if(y&&(S.assocLang=y),b&&(S.channels=b),v&&(S.characteristics=v),E&&(S.instreamId=E),h!=null&&h.length){const w=ka.findGroup(h,S.groupId)||h[0];wF(S,w,"audioCodec"),wF(S,w,"textCodec")}p.push(S)}}return a}static parseLevelPlaylist(e,t,n,i,a,s){var o;const l={url:t},c=new zme(t),f=c.fragments,h=[];let p=null,g=0,y=0,b=0,v=0,E=0,S=null,w=new XS(i,l),A,T,I,D=-1,P=!1,k=null,M;if(tE.lastIndex=0,c.m3u8=e,c.hasVariableRefs=hF(e),((o=tE.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(A=tE.exec(e))!==null;){P&&(P=!1,w=new XS(i,l),w.playlistOffset=b,w.setStart(b),w.sn=g,w.cc=v,E&&(w.bitrate=E),w.level=n,p&&(w.initSegment=p,p.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),k&&(w.setByteRange(k),k=null)));const Y=A[1];if(Y){w.duration=parseFloat(Y);const q=(" "+A[2]).slice(1);w.title=q||null,w.tagList.push(q?["INF",Y,q]:["INF",Y])}else if(A[3]){if(Xe(w.duration)){w.playlistOffset=b,w.setStart(b),I&&TF(w,I,c),w.sn=g,w.level=n,w.cc=v,f.push(w);const q=(" "+A[3]).slice(1);w.relurl=kT(c,q),NT(w,S,h),S=w,b+=w.duration,g++,y=0,P=!0}}else{if(A=A[0].match(ege),!A){$t.warn("No matches on slow regex match for level playlist!");continue}for(T=1;T<A.length&&A[T]===void 0;T++);const q=(" "+A[T]).slice(1),$=(" "+A[T+1]).slice(1),z=A[T+2]?(" "+A[T+2]).slice(1):null;switch(q){case"BYTERANGE":S?w.setByteRange($,S):w.setByteRange($);break;case"PROGRAM-DATE-TIME":w.rawProgramDateTime=$,w.tagList.push(["PROGRAM-DATE-TIME",$]),D===-1&&(D=f.length);break;case"PLAYLIST-TYPE":c.type&&ms(c,q,A),c.type=$.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?ms(c,q,A):f.length>0&&AF(c,q,A),g=c.startSN=parseInt($);break;case"SKIP":{c.skippedSegments&&ms(c,q,A);const K=new fr($,c),Z=K.decimalInteger("SKIPPED-SEGMENTS");if(Xe(Z)){c.skippedSegments+=Z;for(let H=Z;H--;)f.push(null);g+=Z}const X=K.enumeratedString("RECENTLY-REMOVED-DATERANGES");X&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(X.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&ms(c,q,A),c.targetduration=Math.max(parseInt($),1);break;case"VERSION":c.version!==null&&ms(c,q,A),c.version=parseInt($);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||ms(c,q,A),c.live=!1;break;case"#":($||z)&&w.tagList.push(z?[$,z]:[$]);break;case"DISCONTINUITY":v++,w.tagList.push(["DIS"]);break;case"GAP":w.gap=!0,w.tagList.push([q]);break;case"BITRATE":w.tagList.push([q,$]),E=parseInt($)*1e3,Xe(E)?w.bitrate=E:E=0;break;case"DATERANGE":{const K=new fr($,c),Z=new o5(K,c.dateRanges[K.ID],c.dateRangeTagCount);c.dateRangeTagCount++,Z.isValid||c.skippedSegments?c.dateRanges[Z.id]=Z:$t.warn(`Ignoring invalid DATERANGE tag: "${$}"`),w.tagList.push(["EXT-X-DATERANGE",$]);break}case"DEFINE":{{const K=new fr($,c);"IMPORT"in K?jme(c,K,s):pF(c,K,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?ms(c,q,A):f.length>0&&AF(c,q,A),c.startCC=v=parseInt($);break;case"KEY":{const K=xF($,t,c);if(K.isSupported()){if(K.method==="NONE"){I=void 0;break}I||(I={});const Z=I[K.keyFormat];Z!=null&&Z.matches(K)||(Z&&(I=zt({},I)),I[K.keyFormat]=K)}else $t.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${$}"`);break}case"START":c.startTimeOffset=SF($);break;case"MAP":{const K=new fr($,c);if(w.duration){const Z=new XS(i,l);_F(Z,K,n,I),p=Z,w.initSegment=p,p.rawProgramDateTime&&!w.rawProgramDateTime&&(w.rawProgramDateTime=p.rawProgramDateTime)}else{const Z=w.byteRangeEndOffset;if(Z){const X=w.byteRangeStartOffset;k=`${Z-X}@${X}`}else k=null;_F(w,K,n,I),p=w,P=!0}p.cc=v;break}case"SERVER-CONTROL":{M&&ms(c,q,A),M=new fr($),c.canBlockReload=M.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=M.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&M.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=M.optionalFloat("PART-HOLD-BACK",0),c.holdBack=M.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&ms(c,q,A);const K=new fr($);c.partTarget=K.decimalFloatingPoint("PART-TARGET");break}case"PART":{let K=c.partList;K||(K=c.partList=[]);const Z=y>0?K[K.length-1]:void 0,X=y++,H=new fr($,c),G=new jpe(H,w,l,X,Z);K.push(G),w.duration+=G.duration;break}case"PRELOAD-HINT":{const K=new fr($,c);c.preloadHint=K;break}case"RENDITION-REPORT":{const K=new fr($,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(K);break}default:$t.warn(`line parsed but not handled: ${A}`);break}}}S&&!S.relurl?(f.pop(),b-=S.duration,c.partList&&(c.fragmentHint=S)):c.partList&&(NT(w,S,h),w.cc=v,c.fragmentHint=w,I&&TF(w,I,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const B=f.length,C=f[0],W=f[B-1];if(b+=c.skippedSegments*c.targetduration,b>0&&B&&W){c.averagetargetduration=b/B;const Y=W.sn;c.endSN=Y!=="initSegment"?Y:0,c.live||(W.endList=!0),D>0&&(rge(f,D),C&&h.unshift(C))}return c.fragmentHint&&(b+=c.fragmentHint.duration),c.totalduration=b,h.length&&c.dateRangeTagCount&&C&&d5(h,c),c.endCC=v,c}}function d5(r,e){let t=r.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];r.push(o),t++}else return;const n=r[t-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let o=a.length;o--;){const l=e.dateRanges[a[o]],c=l.startDate.getTime();l.tagAnchor=n.ref;for(let f=t;f--;){var s;if(((s=r[f])==null?void 0:s.sn)<e.startSN)break;const h=tge(e,c,r,f,i);if(h!==-1){l.tagAnchor=e.fragments[h].ref;break}}}}function tge(r,e,t,n,i){const a=t[n];if(a){const o=a.programDateTime;if(e>=o||n===0){var s;const l=(((s=t[n+1])==null?void 0:s.start)||i)-a.start;if(e<=o+l*1e3){const c=t[n].sn-r.startSN;if(c<0)return-1;const f=r.fragments;if(f.length>t.length){const p=(t[n+1]||f[f.length-1]).sn-r.startSN;for(let g=p;g>c;g--){const y=f[g].programDateTime;if(e>=y&&e<y+f[g].duration*1e3)return g}}return c}}}return-1}function xF(r,e,t){var n,i;const a=new fr(r,t),s=(n=a.METHOD)!=null?n:"",o=a.URI,l=a.hexadecimalInteger("IV"),c=a.KEYFORMATVERSIONS,f=(i=a.KEYFORMAT)!=null?i:"identity";o&&a.IV&&!l&&$t.error(`Invalid IV: ${a.IV}`);const h=o?ka.resolve(o,e):"",p=(c||"1").split("/").map(Number).filter(Number.isFinite);return new zo(s,h,f,p,l,a.KEYID)}function SF(r){const t=new fr(r).decimalFloatingPoint("TIME-OFFSET");return Xe(t)?t:null}function EF(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(a=>dD(a,n));i.length&&(e[`${n}Codec`]=i.map(a=>a.split("/")[0]).join(","),t=t.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=t}function wF(r,e,t){const n=e[t];n&&(r[t]=n)}function rge(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function NT(r,e,t){r.rawProgramDateTime?t.push(r):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime)}function _F(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function TF(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}function ms(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function AF(r,e,t){r.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function rE(r,e){const t=e.startPTS;if(Xe(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.setStart(r.start+(r.minEndPTS-r.start)):e.setStart(r.start+r.duration):e.setStart(Math.max(r.start-e.duration,0))}function h5(r,e,t,n,i,a,s){n-t<=0&&(s.warn("Fragment should have a positive duration",e),n=t+e.duration,a=i+e.duration);let l=t,c=n;const f=e.startPTS,h=e.endPTS;if(Xe(f)){const E=Math.abs(f-t);r&&E>r.totalduration?s.warn(`media timestamps and playlist times differ by ${E}s for level ${e.level} ${r.url}`):Xe(e.deltaPTS)?e.deltaPTS=Math.max(E,e.deltaPTS):e.deltaPTS=E,l=Math.max(t,f),t=Math.min(t,f),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,c=Math.min(n,h),n=Math.max(n,h),a=e.endDTS!==void 0?Math.max(a,e.endDTS):a}const p=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=l,e.startDTS=i,e.endPTS=n,e.minEndPTS=c,e.endDTS=a;const g=e.sn;if(!r||g<r.startSN||g>r.endSN)return 0;let y;const b=g-r.startSN,v=r.fragments;for(v[b]=e,y=b;y>0;y--)rE(v[y],v[y-1]);for(y=b;y<v.length-1;y++)rE(v[y],v[y+1]);return r.fragmentHint&&rE(v[v.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,p}function nge(r,e,t){if(r===e)return;let n=null;const i=r.fragments;for(let f=i.length-1;f>=0;f--){const h=i[f].initSegment;if(h){n=h;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let a;sge(r,e,(f,h,p,g)=>{if((!e.startCC||e.skippedSegments)&&h.cc!==f.cc){const y=f.cc-h.cc;for(let b=p;b<g.length;b++)g[b].cc+=y;e.endCC=g[g.length-1].cc}Xe(f.startPTS)&&Xe(f.endPTS)&&(h.setStart(h.startPTS=f.startPTS),h.startDTS=f.startDTS,h.maxStartPTS=f.maxStartPTS,h.endPTS=f.endPTS,h.endDTS=f.endDTS,h.minEndPTS=f.minEndPTS,h.setDuration(f.endPTS-f.startPTS),h.duration&&(a=h),e.PTSKnown=e.alignedSliding=!0),f.hasStreams&&(h.elementaryStreams=f.elementaryStreams),h.loader=f.loader,f.hasStats&&(h.stats=f.stats),f.initSegment&&(h.initSegment=f.initSegment,n=f.initSegment)});const s=e.fragments,o=e.fragmentHint?s.concat(e.fragmentHint):s;if(n&&o.forEach(f=>{var h;f&&(!f.initSegment||f.initSegment.relurl===((h=n)==null?void 0:h.relurl))&&(f.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(f=>!f),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let f=e.skippedSegments;f--;)s.shift();e.startSN=s[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=ige(r.dateRanges,e,t));const f=r.fragments.filter(h=>h.rawProgramDateTime);if(r.hasProgramDateTime&&!e.hasProgramDateTime)for(let h=1;h<o.length;h++)o[h].programDateTime===null&&NT(o[h],o[h-1],f);d5(f,e)}e.endCC=s[s.length-1].cc}if(!e.startCC){var l;const f=g5(r,e.startSN-1);e.startCC=(l=f?.cc)!=null?l:s[0].cc}age(r.partList,e.partList,(f,h)=>{h.elementaryStreams=f.elementaryStreams,h.stats=f.stats}),a?h5(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS,t):p5(r,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const f=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=f),e.driftEndTime=c,e.driftEnd=f}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=r.requestScheduled)}function ige(r,e,t){const{dateRanges:n,recentlyRemovedDateranges:i}=e,a=zt({},r);i&&i.forEach(l=>{delete a[l]});const o=Object.keys(a).length;return o?(Object.keys(n).forEach(l=>{const c=a[l],f=new o5(n[l].attr,c);f.isValid?(a[l]=f,c||(f.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Xt(n[l].attr)}"`)}),a):n}function age(r,e,t){if(r&&e){let n=0;for(let i=0,a=r.length;i<=a;i++){const s=r[i],o=e[i+n];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?t(s,o):n--}}}function sge(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,a=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,s=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=i;c<=a;c++){const f=l[s+c];let h=o[c];if(n&&!h&&f&&(h=e.fragments[c]=f),f&&h){t(f,h,c,o);const p=f.relurl,g=h.relurl;if(p&&oge(p,g)){e.playlistParsingError=DF(`media sequence mismatch ${h.sn}:`,r,e,f,h);return}else if(f.cc!==h.cc){e.playlistParsingError=DF(`discontinuity sequence mismatch (${f.cc}!=${h.cc})`,r,e,f,h);return}}}}function DF(r,e,t,n,i){return new Error(`${r} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function p5(r,e,t=!0){const n=e.startSN+e.skippedSegments-r.startSN,i=r.fragments,a=n>=0;let s=0;if(a&&n<i.length)s=i[n].start;else if(a&&e.startSN===r.endSN+1)s=r.fragmentEnd;else if(a&&t)s=r.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=r.fragmentStart;else return;FT(e,s)}function FT(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].addStart(e);r.fragmentHint&&r.fragmentHint.addStart(e)}}function m5(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const a=n[n.length-1].duration*1e3;a<t&&(t=a)}}else t/=2;return Math.round(t)}function g5(r,e,t){if(!r)return null;let n=r.fragments[e-r.startSN];return n||(n=r.fragmentHint,n&&n.sn===e)?n:e<r.startSN&&t&&t.sn===e?t:null}function OF(r,e,t){return r?y5(r.partList,e,t):null}function y5(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function v5(r){r.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function oge(r,e){return r!==e&&e?IF(r)!==IF(e):!1}function IF(r){return r.replace(/\?[^?]*$/,"")}function vd(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function lge(r,e){return!!(r&&e.startCC<r.endCC&&e.endCC>r.startCC)}function CF(r,e){const t=r.start+e;r.startPTS=t,r.setStart(t),r.endPTS=t+r.duration}function b5(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)CF(t[n],r);e.fragmentHint&&CF(e.fragmentHint,r),e.alignedSliding=!0}function uge(r,e){r&&(x5(e,r),e.alignedSliding||N0(e,r),!e.alignedSliding&&!e.skippedSegments&&p5(r,e,!1))}function x5(r,e){if(!lge(e,r))return;const t=Math.min(e.endCC,r.endCC),n=vd(e.fragments,t),i=vd(r.fragments,t);if(!n||!i)return;$t.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const a=n.start-i.start;b5(a,r)}function N0(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,a;const s=Math.min(e.endCC,r.endCC);e.startCC<s&&r.startCC<s&&(i=vd(n,s),a=vd(t,s)),(!i||!a)&&(i=n[Math.floor(n.length/2)],a=vd(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,l=a.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(a.start-i.start);b5(c,r)}function Rn(r,e,t){Zn(r,e,t),r.addEventListener(e,t)}function Zn(r,e,t){r.removeEventListener(e,t)}const cge={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},Ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class bD extends a5{constructor(e,t,n,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ge.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:o,media:l,mediaBuffer:c,state:f}=this,h=l?l.currentTime:0,p=pt.bufferInfo(c||l,h,s.maxBufferHole),g=!p.len;if(this.log(`Media seeking to ${Xe(h)?h.toFixed(3):h}, state: ${f}, ${g?"out of":"in"} buffer`),this.state===Ge.ENDED)this.resetLoadingState();else if(o){const y=s.maxFragLookUpTolerance,b=o.start-y,v=o.start+o.duration+y;if(g||v<p.start||b>p.end){const E=h>v;(h<b||E)&&(E&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(h>y&&(this.lastCurrentTime=h),!this.loadingParts){const b=Math.max(p.end,h),v=this.shouldLoadParts(this.getLevelDetails(),b);v&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${b.toFixed(2)}`),this.loadingParts=v)}}this.hls.hasEnoughToStart||(this.log(`Setting ${g?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,g&&(this.startPosition=h)),g&&this.state===Ge.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Bme(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new mD(e.config)}registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Ge.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ge.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=pt.bufferedInfo(a,e.start,0));const s=e.nextStart;if(s&&s>i&&s<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const f=l[l.length-1];return pt.isBuffered(this.media,f.start+f.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Rn(n,"seeking",this.onMediaSeeking),Rn(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Ge.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Zn(i,"seeking",this.onMediaSeeking),Zn(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Ge.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=a=>{const s=a.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(s,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,t,n,i).then(a=>{if(!a)return;const s=this.state,o=a.frag;if(this.fragContextChanged(o)){(s===Ge.FRAG_LOADING||!this.fragCurrent&&s===Ge.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=Ge.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(U.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(`Frag error: ${a?.message||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===jr.APPENDING){const a=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,s?s.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===jr.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(U.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:a,payload:s}=n,o=a.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&bc(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer,yD(o.method)).catch(c=>{throw i.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:a}),c}).then(c=>{const f=self.performance.now();return i.trigger(U.FRAG_DECRYPTED,{frag:a,payload:c,stats:{tstart:l,tdecrypt:f}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Ge.STOPPED&&(this.state=Ge.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,i;const a=e.tracks;if(a&&!t.encrypted&&((n=a.audio)!=null&&n.encrypted||(i=a.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const s=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${s?"attached mediaKeys: "+s.mediaKeys:"detached"})`);return this.warn(o.message),!s||s.mediaKeys?!1:(this.hls.trigger(U.ERROR,{type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?cge.toString(pt.getBuffered(n)):"(detached)"})`),_r(e)){var i;if(e.type!==et.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(o=>!!s[o])){this.state=Ge.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=Ge.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:a}=e,s=!a||a.length===0||a.some(l=>!l),o=new gD(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!s);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var a;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;if(e.encrypted&&!((a=e.decryptdata)!=null&&a.key)){if(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Ge.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(p=>{if(!this.fragContextChanged(p.frag))return this.hls.trigger(U.KEY_LOADED,p),this.state===Ge.KEY_LOADING&&(this.state=Ge.IDLE),p}),this.hls.trigger(U.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(_r(e)&&(!l||e.sn!==l.sn)){const p=this.shouldLoadParts(t.details,e.end);p!==this.loadingParts&&(this.log(`LL-Part loading ${p?"ON":"OFF"} loading sn ${l?.sn}->${e.sn}`),this.loadingParts=p)}if(n=Math.max(e.start,n||0),this.loadingParts&&_r(e)){const p=s.partList;if(p&&i){n>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const g=this.getNextPart(p,e,n);if(g>-1){const y=p[g];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${g}/${p.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=Ge.FRAG_LOADING;let b;return o?b=o.then(v=>!v||this.fragContextChanged(v.frag)?null:this.doFragPartsLoad(e,y,t,i)).catch(v=>this.handleFragLoadError(v)):b=this.doFragPartsLoad(e,y,t,i).catch(v=>this.handleFragLoadError(v)),this.hls.trigger(U.FRAG_LOADING,{frag:e,part:y,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):b}else if(!e.url||this.loadedEndOfParts(p,n))return Promise.resolve(null)}}if(_r(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=s.partList)==null?void 0:c.filter(p=>p.loaded).map(p=>`[${p.start}-${p.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ge.FRAG_LOADING;const f=this.config.progressive&&e.type!==et.SUBTITLE;let h;return f&&o?h=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.fragmentLoader.load(e,i)).catch(p=>this.handleFragLoadError(p)):h=Promise.all([this.fragmentLoader.load(e,f?i:void 0),o]).then(([p])=>(!f&&i&&i(p),p)).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(U.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(e,t,n,i){return new Promise((a,s)=>{var o;const l=[],c=(o=n.details)==null?void 0:o.partList,f=h=>{this.fragmentLoader.loadPart(e,h,i).then(p=>{l[h.index]=p;const g=p.part;this.hls.trigger(U.FRAG_LOADED,p);const y=OF(n.details,e.sn,h.index+1)||y5(c,e.sn,h.index+1);if(y)f(y);else return a({frag:e,part:g,partsLoaded:l})}).catch(s)};f(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===we.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===at.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(U.ERROR,t)}else this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Ge.PARSING){!this.fragCurrent&&this.state!==Ge.STOPPED&&this.state!==Ge.ERROR&&(this.state=Ge.IDLE);return}const{frag:n,part:i,level:a}=t,s=self.performance.now();n.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const o=this.getLevelDetails(),c=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(n,i,a,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const a=e.partList[0];if(a.fragment.type===et.SUBTITLE)return!1;const s=a.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:a,part:s}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=t[i],l=o.details,c=s>-1?OF(l,a,s):null,f=c?c.fragment:g5(l,a,n);return f?(n&&n!==f&&(f.stats=n.stats),{frag:f,part:c,level:o}):null}bufferFragmentData(e,t,n,i,a){if(this.state!==Ge.PARSING)return;const{data1:s,data2:o}=e;let l=s;if(o&&(l=Wi(s,o)),!l.length)return;const c=this.initPTS[t.cc],f=c?-c.baseTime/c.timescale:void 0,h={type:e.type,frag:t,part:n,chunkMeta:i,offset:f,parent:t.type,data:l};if(this.hls.trigger(U.BUFFER_APPENDING,h),e.dropped&&e.independent&&!n){if(a)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!pt.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=pt.bufferInfo(t,n,0),a=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-s,i.end-s),n+s);e.start-o>s&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!Xe(i))return null;const s=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,s)}getFwdBufferInfoAtPos(e,t,n,i){const a=pt.bufferInfo(e,t,i);if(a.len===0&&a.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&(a.nextStart<=s.end||s.gap)){const o=Math.max(Math.min(a.nextStart,s.end)-t,i);return pt.bufferInfo(e,t,o)}}return a}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),a=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return a>=i?(n.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,t=et.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:a}=this,s=n[0].start,o=a.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const h=a.initialLiveManifestSize;if(i<h)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${h})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);const p=this.hls.startPosition,g=this.hls.liveSyncPosition,y=l?(p!==-1&&p>=s?p:g)||l.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${g} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=s&&(l=n[0]);if(!l){const h=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,h,t)}let f=this.filterReplacedPrimary(l,t);if(!f&&l){const h=l.sn-t.startSN;f=this.filterReplacedPrimary(n[h+1]||null,t)}return this.mapToInitFragWhenRequired(f)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===jr.OK||n===jr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,a){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(o!==null&&n.len+o.len>=a){const l=s.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(RF(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(RF(this.config)&&e.type!==et.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&t?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=n?.playerQueue;if(a)for(let s=a.length;s--;){const o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,a=!1,s=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(s=s&&!c.independent,i>-1&&n<c.start)break;const f=c.loaded;f?i=-1:(a||(c.independent||s)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),i=o),a=f}return i}loadedEndOfParts(e,t){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=Ame(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=n.sn+1;if(a>=e.startSN&&a<=e.endSN){const s=t[a-e.startSN];n.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=r5(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:a}=this,{fragments:s,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=i,f=n.partList,h=!!(this.loadingParts&&f!=null&&f.length&&l);h&&!this.bitrateTest&&f[f.length-1].fragment.sn===l.sn&&(s=s.concat(l),o=l.sn);let p;if(e<t){var g;const b=e<this.lastCurrentTime||e>t-c||(g=this.media)!=null&&g.paused||!this.startFragRequested?0:c;p=ru(a,s,e,b)}else p=s[s.length-1];if(p){const y=p.sn-n.startSN,b=this.fragmentTracker.getState(p);if((b===jr.OK||b===jr.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!h||f[0].fragment.sn>p.sn||!n.live)&&p.level===a.level){const E=s[y+1];p.sn<o&&this.fragmentTracker.getState(E)!==jr.OK?p=E:p=null}}return p}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!t,o=e.alignedSliding&&Xe(a);if(s||!o&&!a){uge(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),l}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const a=this.startTimeOffset!==null,s=a?this.startTimeOffset:e.startTimeOffset;s!==null&&Xe(s)?(n=t+s,s<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&_r(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Ge.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ge.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const E=this.getCurrentContext(t.chunkMeta);E&&(t.frag=E.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var a;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(a=this.fragCurrent)==null?void 0:a.url}`);return}const s=t.details===we.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction;if(!o){this.state=Ge.ERROR;return}const{action:l,flags:c,retryCount:f=0,retryConfig:h}=o,p=!!h,g=p&&l===ln.RetryRequest,y=p&&!o.resolved&&c===hi.MoveAllAlternatesMatchingHost,b=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!g&&y&&_r(i)&&!i.endList&&b&&!i5(t))this.resetFragmentErrors(e),this.treatAsGap(i),o.resolved=!0;else if((g||y)&&f<h.maxNumRetry){var v;const E=LT((v=t.response)==null?void 0:v.code),S=pD(h,f);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+S,this.state=Ge.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,E){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${f+1}/${h.maxNumRetry} in ${S}ms`)}else if(h)if(this.resetFragmentErrors(e),f<h.maxNumRetry)!s&&l!==ln.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${f})`);return}else l===ln.SendAlternateToPenaltyBox?this.state=Ge.WAITING_LEVEL:this.state=Ge.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!LT(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Ge.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Ge.PARSING||this.state===Ge.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,t?.duration||10);const s=!a;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===et.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=pt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ge.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ge.STOPPED&&(this.state=Ge.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const f=e.elementaryStreams[c];if(f){const h=f.endPTS-f.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${h})`),l||!1;const p=i?0:h5(a,e,f.startPTS,f.endPTS,f.startDTS,f.endDTS,this);return this.hls.trigger(U.LEVEL_PTS_UPDATED,{details:a,level:n,drift:p,type:c,frag:e,start:f.startPTS,end:f.endPTS}),!0}return l},!1)){var o;const l=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||l&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),l){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Ge.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(U.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===et.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,a;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((a=t&&!n?e.endPTS:(n||e).end)!=null?a:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function RF(r){return!!r.interstitialsController&&r.enableInterstitialPlayback!==!1}class S5{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=fge(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function fge(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const a=r[i];t.set(a,n),n+=a.length}return t}var nE={exports:{}},PF;function dge(){return PF||(PF=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,h||l,p),y=t?t+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=t?t+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,y=new Array(g);p<g;p++)y[p]=h[p].fn;return y},o.prototype.listenerCount=function(c){var f=t?t+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,y){var b=t?t+c:c;if(!this._events[b])return!1;var v=this._events[b],E=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,y),!0}for(w=1,S=new Array(E-1);w<E;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var A=v.length,T;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),E){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,h);break;case 4:v[w].fn.call(v[w].context,f,h,p);break;default:if(!S)for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];v[w].fn.apply(v[w].context,S)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=t?t+c:c;if(!this._events[g])return this;if(!f)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!h||y.context===h)&&s(this,g);else{for(var b=0,v=[],E=y.length;b<E;b++)(y[b].fn!==f||p&&!y[b].once||h&&y[b].context!==h)&&v.push(y[b]);v.length?this._events[g]=v.length===1?v[0]:v:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=t?t+c:c,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(nE)),nE.exports}var hge=dge(),xD=Bpe(hge);const zd="1.6.15",Bc={};function pge(){return typeof __HLS_WORKER_BUNDLE__=="function"}function mge(){const r=Bc[zd];if(r)return r.clientCount++,r;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Bc[zd]=i,i}function gge(r){const e=Bc[r];if(e)return e.clientCount++,e;const t=new self.URL(r,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Bc[r]=i,i}function yge(r){const e=Bc[r||zd];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete Bc[r||zd],i&&self.URL.revokeObjectURL(i),n.terminate()}}function E5(r,e){return e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function SD(r,e){return e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128}function Hy(r,e){let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t}function qd(r,e){const t=e;let n=0;for(;SD(r,e);){n+=10;const i=Hy(r,e+6);n+=i,E5(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)}function vge(r,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[t+2],s=a>>2&15;if(s>12){const g=new Error(`invalid ADTS sampling index:${s}`);r.emit(U.ERROR,U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}const o=(a>>6&3)+1,l=e[t+3]>>6&3|(a&1)<<2,c="mp4a.40."+o,f=i[s];let h=s;(o===5||o===29)&&(h-=3);const p=[o<<3|(h&14)>>1,(h&1)<<7|l<<3];return $t.log(`manifest codec:${n}, parsed codec:${c}, channels:${l}, rate:${f} (ADTS object type:${o} sampling index:${s})`),{config:p,samplerate:f,channelCount:l,codec:c,parsedCodec:c,manifestCodec:n}}function w5(r,e){return r[e]===255&&(r[e+1]&246)===240}function _5(r,e){return r[e+1]&1?7:9}function ED(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function bge(r,e){return e+5<r.length}function F0(r,e){return e+1<r.length&&w5(r,e)}function xge(r,e){return bge(r,e)&&w5(r,e)&&ED(r,e)<=r.length-e}function Sge(r,e){if(F0(r,e)){const t=_5(r,e);if(e+t>=r.length)return!1;const n=ED(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||F0(r,i)}return!1}function T5(r,e,t,n,i){if(!r.samplerate){const a=vge(e,t,n,i);if(!a)return;zt(r,a)}}function A5(r){return 1024*9e4/r}function Ege(r,e){const t=_5(r,e);if(e+t<=r.length){const n=ED(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function D5(r,e,t,n,i){const a=A5(r.samplerate),s=n+i*a,o=Ege(e,t);let l;if(o){const{frameLength:h,headerLength:p}=o,g=p+h,y=Math.max(0,t+g-e.length);y?(l=new Uint8Array(g-p),l.set(e.subarray(t+p,e.length),0)):l=e.subarray(t+p,t+g);const b={unit:l,pts:s};return y||r.samples.push(b),{sample:b,length:g,missing:y}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:s},length:c,missing:-1}}function wge(r,e){return SD(r,e)&&Hy(r,e+6)+10<=r.length-e}function _ge(r){return r instanceof ArrayBuffer?r:r.byteOffset==0&&r.byteLength==r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}function iE(r,e=0,t=1/0){return Tge(r,e,t,Uint8Array)}function Tge(r,e,t,n){const i=Age(r);let a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);const s=Dge(r)?r.byteOffset:0,o=(s+r.byteLength)/a,l=(s+e)/a,c=Math.floor(Math.max(0,Math.min(l,o))),f=Math.floor(Math.min(c+Math.max(t,0),o));return new n(i,c,f-c)}function Age(r){return r instanceof ArrayBuffer?r:r.buffer}function Dge(r){return r&&r.buffer instanceof ArrayBuffer&&r.byteLength!==void 0&&r.byteOffset!==void 0}function Oge(r){const e={key:r.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(r.size<2)return;if(r.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=r.data.subarray(1).indexOf(0);if(n===-1)return;const i=Ti(iE(r.data,1,n)),a=r.data[2+n],s=r.data.subarray(3+n).indexOf(0);if(s===-1)return;const o=Ti(iE(r.data,3+n,s));let l;return i==="-->"?l=Ti(iE(r.data,4+n+s)):l=_ge(r.data.subarray(4+n+s)),e.mimeType=i,e.pictureType=a,e.description=o,e.data=l,e}function Ige(r){if(r.size<2)return;const e=Ti(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}}function Cge(r){if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=Ti(r.data.subarray(t),!0);t+=n.length+1;const i=Ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Ti(r.data.subarray(1));return{key:r.type,info:"",data:e}}function Rge(r){if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=Ti(r.data.subarray(t),!0);t+=n.length+1;const i=Ti(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Ti(r.data);return{key:r.type,info:"",data:e}}function Pge(r){return r.type==="PRIV"?Ige(r):r.type[0]==="W"?Rge(r):r.type==="APIC"?Oge(r):Cge(r)}function Lge(r){const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Hy(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}}const vm=10,kge=10;function O5(r){let e=0;const t=[];for(;SD(r,e);){const n=Hy(r,e+6);r[e+5]>>6&1&&(e+=vm),e+=vm;const i=e+n;for(;e+kge<i;){const a=Lge(r.subarray(e)),s=Pge(a);s&&t.push(s),e+=a.size+vm}E5(r,e)&&(e+=vm)}return t}function I5(r){return r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp"}function Mge(r){if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function wD(r){const e=O5(r);for(let t=0;t<e.length;t++){const n=e[t];if(I5(n))return Mge(n)}}let vi=(function(r){return r.audioId3="org.id3",r.dateRange="com.apple.quicktime.HLS",r.emsg="https://aomedia.org/emsg/ID3",r.misbklv="urn:misb:KLV:bin:1910.1",r})({});function Ta(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class _D{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Wi(this.cachedData,e),this.cachedData=null);let n=qd(e,0),i=n?n.length:0,a;const s=this._audioTrack,o=this._id3Track,l=n?wD(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Xe(l))&&(this.basePTS=Nge(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:vi.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const f=this.appendFrame(s,e,i);f?(this.frameIndex++,this.lastPTS=f.sample.pts,i+=f.length,a=i):i=c}else wge(e,i)?(n=qd(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:vi.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,a=i):i++;if(i===c&&a!==c){const f=e.slice(a);this.cachedData?this.cachedData=Wi(this.cachedData,f):this.cachedData=f}}return{audioTrack:s,videoTrack:Ta(),id3Track:o,textTrack:Ta()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Ta(),id3Track:this._id3Track,textTrack:Ta()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Nge=(r,e,t)=>{if(Xe(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let bm=null;const Fge=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Bge=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Uge=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],jge=[0,1,1,4];function C5(r,e,t,n,i){if(t+24>e.length)return;const a=R5(e,t);if(a&&t+a.frameLength<=e.length){const s=a.samplesPerFrame*9e4/a.sampleRate,o=n+i*s,l={unit:e.subarray(t,t+a.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=a.channelCount,r.samplerate=a.sampleRate,r.samples.push(l),{sample:l,length:a.frameLength,missing:0}}}function R5(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,a=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&a!==3){const s=r[e+2]>>1&1,o=r[e+3]>>6,l=t===3?3-n:n===3?3:4,c=Fge[l*14+i-1]*1e3,h=Bge[(t===3?0:t===2?1:2)*3+a],p=o===3?1:2,g=Uge[t][n],y=jge[n],b=g*8*y,v=Math.floor(g*c/h+s)*y;if(bm===null){const w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bm=w?parseInt(w[1]):0}return!!bm&&bm<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:h,channelCount:p,frameLength:v,samplesPerFrame:b}}}function TD(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function P5(r,e){return e+1<r.length&&TD(r,e)}function $ge(r,e){return TD(r,e)&&4<=r.length-e}function L5(r,e){if(e+1<r.length&&TD(r,e)){const n=R5(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const a=e+i;return a===r.length||P5(r,a)}return!1}class Hge extends _D{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=qd(e,0);let i=n?.length||0;if(L5(e,i))return!1;for(let a=e.length;i<a;i++)if(Sge(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return xge(e,t)}appendFrame(e,t,n){T5(e,this.observer,t,n,e.manifestCodec);const i=D5(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const k5=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;n>0;){s[0]=r[e];const o=Math.min(n,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,t=t?t<<o|i[0]:i[0],e+=1,n-=o}return t};class Gge extends _D{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=M5(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=qd(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&wD(t)!==void 0&&k5(e,n)<16}}function M5(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const a=e[t+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],l=e[t+4]&63,f=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+a]*2;if(t+f>e.length)return-1;const h=e[t+6]>>5;let p=0;h===2?p+=2:(h&1&&h!==1&&(p+=2),h&4&&(p+=2));const g=(e[t+6]<<8|e[t+7])>>12-p&1,b=[2,1,2,3,3,4,4,5][h]+g,v=e[t+5]>>3,E=e[t+5]&7,S=new Uint8Array([a<<6|v<<1|E>>2,(E&3)<<6|h<<3|g<<2|l>>4,l<<4&224]),w=1536/o*9e4,A=n+i*w,T=e.subarray(t,t+f);return r.config=S,r.channelCount=b,r.samplerate=o,r.samples.push({unit:T,pts:A}),f}class Kge extends _D{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=qd(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&wD(t)!==void 0&&k5(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(L5(e,n))return $t.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return $ge(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return C5(e,t,n,this.basePTS,this.frameIndex)}}const Yge=/\/emsg[-/]ID3/i;class zge{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const a=this.videoTrack=Ta("video",1),s=this.audioTrack=Ta("audio",1),o=this.txtTrack=Ta("text",1);if(this.id3Track=Ta("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Y8(e);if(l.video){const{id:c,timescale:f,codec:h,supplemental:p}=l.video;a.id=c,a.timescale=o.timescale=f,a.codec=h,a.supplemental=p}if(l.audio){const{id:c,timescale:f,codec:h}=l.audio;s.id=c,s.timescale=f,s.codec=h}o.id=H8.text,a.sampleDuration=0,a.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return Gpe(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Wi(this.remainderData,e));const o=Qpe(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const s=this.extractID3Track(i,t);return a.samples=Q2(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=Q2(e,t),{videoTrack:t,audioTrack:Ta(),id3Track:i,textTrack:Ta()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=xt(e.samples,["emsg"]);i&&i.forEach(a=>{const s=Zpe(a);if(Yge.test(s.schemeIdUri)){const o=LF(s,t);let l=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=s.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:vi.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=LF(s,t);n.samples.push({data:s.payload,len:s.payload.byteLength,dts:o,pts:o,type:vi.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function LF(r,e){return Xe(r.presentationTime)?r.presentationTime/r.timeScale:e+r.presentationTimeDelta/r.timeScale}class qge{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new mD(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Jo.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)n.set(e.subarray(a,a+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(n.subarray(i,i+16),a);return e}decryptAvcSample(e,t,n,i,a){const s=W8(a.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(l=>{a.data=this.getAvcDecryptedUnit(s,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}).catch(i)}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const a=e[t].units;for(;!(n>=a.length);n++){const s=a[n];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,t,n,i,s),!this.decrypter.isSync()))return}}}}class N5{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const a=n.units;i=a[a.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const a=n[i-1];e.pts=a.pts,e.dts=a.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let a=e.naluState||0;const s=a,o=[];let l=0,c,f,h,p=-1,g=0;for(a===-1&&(p=0,g=this.getNALuType(t,0),a=0,l=1);l<i;){if(c=t[l++],!a){a=c?0:1;continue}if(a===1){a=c?0:2;continue}if(!c)a=3;else if(c===1){if(f=l-a-1,p>=0){const y={data:t.subarray(p,f),type:g};o.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(s&&l<=4-s&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-s)),f>0&&(y.data=Wi(y.data,t.subarray(0,f)),y.state=0))}l<i?(h=this.getNALuType(t,l),p=l,g=h,a=0):a=-1}else a=0}if(p>=0&&a>=0){const y={data:t.subarray(p,i),type:g,state:a};o.push(y)}if(o.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=Wi(y.data,t))}return e.naluState=a,o}}class bd{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(a===0)throw new Error("no bytes available");i.set(e.subarray(n,n+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&$t.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Wge extends N5{parsePES(e,t,n,i){const a=this.parseNALu(e,n.data,i);let s=this.VideoSample,o,l=!1;n.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(c=>{var f,h;switch(c.type){case 1:{let b=!1;o=!0;const v=c.data;if(l&&v.length>4){const E=this.readSliceType(v);(E===2||E===4||E===7||E===9)&&(b=!0)}if(b){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.frame=!0,s.key=b;break}case 5:o=!0,(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 6:{o=!0,fD(c.data,1,n.pts,t.samples);break}case 7:{var g,y;o=!0,l=!0;const b=c.data,v=this.readSPS(b);if(!e.sps||e.width!==v.width||e.height!==v.height||((g=e.pixelRatio)==null?void 0:g[0])!==v.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[b];const E=b.subarray(1,4);let S="avc1.";for(let w=0;w<3;w++){let A=E[w].toString(16);A.length<2&&(A="0"+A),S+=A}e.codec=S}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}s&&o&&s.units.push(c)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new bd(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,a;for(let s=0;s<e;s++)i!==0&&(a=t.readEG(),i=(n+a+256)%256),n=i===0?n:i}readSPS(e){const t=new bd(e);let n=0,i=0,a=0,s=0,o,l,c;const f=t.readUByte.bind(t),h=t.readBits.bind(t),p=t.readUEG.bind(t),g=t.readBoolean.bind(t),y=t.skipBits.bind(t),b=t.skipEG.bind(t),v=t.skipUEG.bind(t),E=this.skipScalingList.bind(this);f();const S=f();if(h(5),y(3),f(),v(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const P=p();if(P===3&&y(1),v(),v(),y(1),g())for(l=P!==3?8:12,c=0;c<l;c++)g()&&(c<6?E(16,t):E(64,t))}v();const w=p();if(w===0)p();else if(w===1)for(y(1),b(),b(),o=p(),c=0;c<o;c++)b();v(),y(1);const A=p(),T=p(),I=h(1);I===0&&y(1),y(1),g()&&(n=p(),i=p(),a=p(),s=p());let D=[1,1];if(g()&&g())switch(f()){case 1:D=[1,1];break;case 2:D=[12,11];break;case 3:D=[10,11];break;case 4:D=[16,11];break;case 5:D=[40,33];break;case 6:D=[24,11];break;case 7:D=[20,11];break;case 8:D=[32,11];break;case 9:D=[80,33];break;case 10:D=[18,11];break;case 11:D=[15,11];break;case 12:D=[64,33];break;case 13:D=[160,99];break;case 14:D=[4,3];break;case 15:D=[3,2];break;case 16:D=[2,1];break;case 255:{D=[f()<<8|f(),f()<<8|f()];break}}return{width:Math.ceil((A+1)*16-n*2-i*2),height:(2-I)*(T+1)*16-(I?2:4)*(a+s),pixelRatio:D}}}class Vge extends N5{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const a=this.parseNALu(e,n.data,i);let s=this.VideoSample,o,l=!1;n.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(c=>{var f,h;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:o=!0,(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 39:o=!0,fD(c.data,2,n.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=zt(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const g=this.readSPS(c.data);e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.codec=g.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in g.params)e.params[y]=g.params[y]}this.pushParameterSet(e.sps,c.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const g=this.readPPS(c.data);for(const y in g)e.params[y]=g[y]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}s&&o&&s.units.push(c)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new bd(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new bd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),a=t.readBoolean(),s=t.readBits(5),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),f=t.readUByte(),h=t.readUByte(),p=t.readUByte(),g=t.readUByte(),y=t.readUByte(),b=t.readUByte(),v=t.readUByte(),E=t.readUByte(),S=[],w=[];for(let ae=0;ae<n;ae++)S.push(t.readBoolean()),w.push(t.readBoolean());if(n>0)for(let ae=n;ae<8;ae++)t.readBits(2);for(let ae=0;ae<n;ae++)S[ae]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),w[ae]&&t.readUByte();t.readUEG();const A=t.readUEG();A==3&&t.skipBits(1);const T=t.readUEG(),I=t.readUEG(),D=t.readBoolean();let P=0,k=0,M=0,B=0;D&&(P+=t.readUEG(),k+=t.readUEG(),M+=t.readUEG(),B+=t.readUEG());const C=t.readUEG(),W=t.readUEG(),Y=t.readUEG(),q=t.readBoolean();for(let ae=q?0:n;ae<=n;ae++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ye=0;ye<4;ye++)for(let Ie=0;Ie<(ye===3?2:6);Ie++)if(!t.readBoolean())t.readUEG();else{const Ue=Math.min(64,1<<4+(ye<<1));ye>1&&t.readEG();for(let pe=0;pe<Ue;pe++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const K=t.readUEG();let Z=0;for(let ae=0;ae<K;ae++){let ye=!1;if(ae!==0&&(ye=t.readBoolean()),ye){ae===K&&t.readUEG(),t.readBoolean(),t.readUEG();let Ie=0;for(let Re=0;Re<=Z;Re++){const Ue=t.readBoolean();let pe=!1;Ue||(pe=t.readBoolean()),(Ue||pe)&&Ie++}Z=Ie}else{const Ie=t.readUEG(),Re=t.readUEG();Z=Ie+Re;for(let Ue=0;Ue<Ie;Ue++)t.readUEG(),t.readBoolean();for(let Ue=0;Ue<Re;Ue++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const ae=t.readUEG();for(let ye=0;ye<ae;ye++){for(let Ie=0;Ie<Y+4;Ie++)t.readBits(1);t.readBits(1)}}let H=0,G=1,J=1,fe=!0,se=1,be=0;t.readBoolean(),t.readBoolean();let oe=!1;if(t.readBoolean()){if(t.readBoolean()){const Be=t.readUByte(),ze=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],De=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Be>0&&Be<16?(G=ze[Be-1],J=De[Be-1]):Be===255&&(G=t.readBits(16),J=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),oe=t.readBoolean(),oe&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(se=t.readBits(32),be=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const De=t.readBoolean(),ft=t.readBoolean();let R=!1;(De||ft)&&(R=t.readBoolean(),R&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),R&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let N=0;N<=n;N++){fe=t.readBoolean();const V=fe||t.readBoolean();let de=!1;V?t.readEG():de=t.readBoolean();const ve=de?1:t.readUEG()+1;if(De)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),R&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(ft)for(let Pe=0;Pe<ve;Pe++)t.readUEG(),t.readUEG(),R&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),H=t.readUEG())}let te=T,le=I;if(D){let ae=1,ye=1;A===1?ae=ye=2:A==2&&(ae=2),te=T-ae*k-ae*P,le=I-ye*B-ye*M}const ce=i?["A","B","C"][i]:"",ne=o<<24|l<<16|c<<8|f;let Ce=0;for(let ae=0;ae<32;ae++)Ce=(Ce|(ne>>ae&1)<<31-ae)>>>0;let Se=Ce.toString(16);return s===1&&Se==="2"&&(Se="6"),{codecString:`hvc1.${ce}${s}.${Se}.${a?"H":"L"}${E}.B0`,params:{general_tier_flag:a,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[o,l,c,f],general_constraint_indicator_flags:[h,p,g,y,b,v],general_level_idc:E,bit_depth:C+8,bit_depth_luma_minus8:C,bit_depth_chroma_minus8:W,min_spatial_segmentation_idc:H,chroma_format_idc:A,frame_rate:{fixed:fe,fps:be/se}},width:te,height:le,pixelRatio:[G,J]}}readPPS(e){const t=new bd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),a=t.readBoolean();let s=1;return a&&i?s=0:a?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const qr=188;class Uo{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Uo.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(qr*5,t-qr)+1,i=0;for(;i<n;){let a=!1,s=-1,o=0;for(let l=i;l<t;l+=qr)if(e[l]===71&&(t-l===qr||e[l+qr]===71)){if(o++,s===-1&&(s=l,s!==0&&(n=Math.min(s+qr*99,e.length-qr)+1)),a||(a=BT(e,l)===0),a&&o>1&&(s===0&&o>2||l+qr>n))return s}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:H8[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Uo.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Uo.createTrack("audio",i),this._id3Track=Uo.createTrack("id3"),this._txtTrack=Uo.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let a;const s=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let f=s.pid,h=s.pesData,p=o.pid,g=l.pid,y=o.pesData,b=l.pesData,v=null,E=this.pmtParsed,S=this._pmtId,w=e.length;if(this.remainderData&&(e=Wi(this.remainderData,e),w=e.length,this.remainderData=null),w<qr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:c};const A=Math.max(0,Uo.syncOffset(e));w-=(w-A)%qr,w<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,w,e.buffer.byteLength-w));let T=0;for(let D=A;D<w;D+=qr)if(e[D]===71){const P=!!(e[D+1]&64),k=BT(e,D),M=(e[D+3]&48)>>4;let B;if(M>1){if(B=D+5+e[D+4],B===D+qr)continue}else B=D+4;switch(k){case f:P&&(h&&(a=rc(h,this.logger))&&(this.readyVideoParser(s.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(s,c,a,!1)),h={data:[],size:0}),h&&(h.data.push(e.subarray(B,D+qr)),h.size+=D+qr-B);break;case p:if(P){if(y&&(a=rc(y,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(B,D+qr)),y.size+=D+qr-B);break;case g:P&&(b&&(a=rc(b,this.logger))&&this.parseID3PES(l,a),b={data:[],size:0}),b&&(b.data.push(e.subarray(B,D+qr)),b.size+=D+qr-B);break;case 0:P&&(B+=e[B]+1),S=this._pmtId=Qge(e,B);break;case S:{P&&(B+=e[B]+1);const C=Xge(e,B,this.typeSupported,n,this.observer,this.logger);f=C.videoPid,f>0&&(s.pid=f,s.segmentCodec=C.segmentVideoCodec),p=C.audioPid,p>0&&(o.pid=p,o.segmentCodec=C.segmentAudioCodec),g=C.id3Pid,g>0&&(l.pid=g),v!==null&&!E&&(this.logger.warn(`MPEG-TS PMT found at ${D} after unknown PID '${v}'. Backtracking to sync byte @${A} to parse all TS packets.`),v=null,D=A-188),E=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=k;break}}else T++;T>0&&UT(this.observer,new Error(`Found ${T} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=h,o.pesData=y,l.pesData=b;const I={audioTrack:o,videoTrack:s,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(I),I}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:a}=e,s=n.pesData,o=t.pesData,l=i.pesData;let c;if(s&&(c=rc(s,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,a,c,!0),n.pesData=null)):n.pesData=s,o&&(c=rc(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=rc(l,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),a=this.sampleAes=new qge(this.observer,this.config,t);return this.decrypt(i,a)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Wge:e==="hevc"&&(this.videoParser=new Vge))}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{a.samples?t.decryptAvcSamples(a.samples,0,0,()=>{n(e)}):n(e)}):a.samples&&t.decryptAvcSamples(a.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let a=t.data;if(i){this.aacOverFlow=null;const h=i.missing,p=i.sample.unit.byteLength;if(h===-1)a=Wi(i.sample.unit,a);else{const g=p-h;i.sample.unit.set(a.subarray(0,h),g),e.samples.push(i.sample),n=i.missing}}let s,o;for(s=n,o=a.length;s<o-1&&!F0(a,s);s++);if(s!==n){let h;const p=s<o-1;if(p?h=`AAC PES did not start with ADTS header,offset:${s}`:h="No ADTS header found in AAC PES",UT(this.observer,new Error(h),p,this.logger),!p)return}T5(e,this.observer,a,s,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const h=A5(e.samplerate);l=i.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,f;for(;s<o;)if(f=D5(e,a,s,l,c),s+=f.length,f.missing){this.aacOverFlow=f;break}else for(c++;s<o-1&&!F0(a,s);s++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let a=0,s=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(P5(n,s)){const l=C5(e,n,s,o,a);if(l)s+=l.length,a++;else break}else s++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=n.length;let s=0,o=0,l;for(;o<a&&(l=M5(e,n,o,i,s++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=zt({},t,{type:this._videoTrack?vi.emsg:vi.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function BT(r,e){return((r[e+1]&31)<<8)+r[e+2]}function Qge(r,e){return(r[e+10]&31)<<8|r[e+11]}function Xge(r,e,t,n,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(r[e+1]&15)<<8|r[e+2],l=e+3+o-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<l;){const f=BT(r,e),h=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){aE("ADTS AAC",a);break}case 15:s.audioPid===-1&&(s.audioPid=f);break;case 21:s.id3Pid===-1&&(s.id3Pid=f);break;case 219:if(!n){aE("H.264",a);break}case 27:s.videoPid===-1&&(s.videoPid=f);break;case 3:case 4:!t.mpeg&&!t.mp3?a.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=f,s.segmentAudioCodec="mp3");break;case 193:if(!n){aE("AC-3",a);break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=f,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,g=h;for(;g>2;){switch(r[p]){case 106:t.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=f,s.segmentAudioCodec="ac3");break}const b=r[p+1]+2;p+=b,g-=b}}break;case 194:case 135:return UT(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:s.videoPid===-1&&(s.videoPid=f,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=h+5}return s}function UT(r,e,t,n){n.warn(`parsing error: ${e.message}`),r.emit(U.ERROR,U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function aE(r,e){e.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function rc(r,e){let t=0,n,i,a,s,o;const l=r.data;if(!r||r.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Wi(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>r.size-6)return null;const f=n[7];f&192&&(s=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,f&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,s-o>60*9e4&&(e.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),a=n[8];let h=a+9;if(r.size<=h)return null;r.size-=h;const p=new Uint8Array(r.size);for(let g=0,y=l.length;g<y;g++){n=l[g];let b=n.byteLength;if(h)if(h>b){h-=b;continue}else n=n.subarray(h),b-=h,h=0;p.set(n,t),t+=b}return i&&(i-=a+3),{data:p,pts:s,dts:o,len:i}}return null}class Zge{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ro=Math.pow(2,32)-1;class Ee{static init(){Ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ee.types)Ee.types.hasOwnProperty(e)&&(Ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ee.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Ee.STTS=Ee.STSC=Ee.STCO=a,Ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Ee.FTYP=Ee.box(Ee.types.ftyp,s,l,s,o),Ee.DINF=Ee.box(Ee.types.dinf,Ee.box(Ee.types.dref,i))}static box(e,...t){let n=8,i=t.length;const a=i;for(;i--;)n+=t[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(e,4),i=0,n=8;i<a;i++)s.set(t[i],n),n+=t[i].byteLength;return s}static hdlr(e){return Ee.box(Ee.types.hdlr,Ee.HDLR_TYPES[e])}static mdat(e){return Ee.box(Ee.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Ro+1)),i=Math.floor(t%(Ro+1));return Ee.box(Ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return Ee.box(Ee.types.mdia,Ee.mdhd(e.timescale||0,e.duration||0),Ee.hdlr(e.type),Ee.minf(e))}static mfhd(e){return Ee.box(Ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ee.box(Ee.types.minf,Ee.box(Ee.types.smhd,Ee.SMHD),Ee.DINF,Ee.stbl(e)):Ee.box(Ee.types.minf,Ee.box(Ee.types.vmhd,Ee.VMHD),Ee.DINF,Ee.stbl(e))}static moof(e,t,n){return Ee.box(Ee.types.moof,Ee.mfhd(e),Ee.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trak(e[t]);return Ee.box.apply(null,[Ee.types.moov,Ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Ee.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Ee.trex(e[t]);return Ee.box.apply(null,[Ee.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Ro+1)),i=Math.floor(t%(Ro+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ee.box(Ee.types.mvhd,a)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,a;for(i=0;i<t.length;i++)a=t[i].flags,n[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return Ee.box(Ee.types.sdtp,n)}static stbl(e){return Ee.box(Ee.types.stbl,Ee.stsd(e),Ee.box(Ee.types.stts,Ee.STTS),Ee.box(Ee.types.stsc,Ee.STSC),Ee.box(Ee.types.stsz,Ee.STSZ),Ee.box(Ee.types.stco,Ee.STCO))}static avc1(e){let t=[],n=[],i,a,s;for(i=0;i<e.sps.length;i++)a=e.sps[i],s=a.byteLength,t.push(s>>>8&255),t.push(s&255),t=t.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],s=a.byteLength,n.push(s>>>8&255),n.push(s&255),n=n.concat(Array.prototype.slice.call(a));const o=Ee.box(Ee.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return Ee.box(Ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ee.box(Ee.types.mp4a,Ee.audioStsd(e),Ee.box(Ee.types.esds,Ee.esds(e)))}static mp3(e){return Ee.box(Ee.types[".mp3"],Ee.audioStsd(e))}static ac3(e){return Ee.box(Ee.types["ac-3"],Ee.audioStsd(e),Ee.box(Ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp4a(e));if(t==="ac3"&&e.config)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.avc1(e));if(t==="hevc"&&e.vps)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,s=Math.floor(n/(Ro+1)),o=Math.floor(n%(Ro+1));return Ee.box(Ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,t){const n=Ee.sdtp(e),i=e.id,a=Math.floor(t/(Ro+1)),s=Math.floor(t%(Ro+1));return Ee.box(Ee.types.traf,Ee.box(Ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),Ee.box(Ee.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,s>>24,s>>16&255,s>>8&255,s&255])),Ee.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Ee.box(Ee.types.trak,Ee.tkhd(e),Ee.mdia(e))}static trex(e){const t=e.id;return Ee.box(Ee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,a=12+16*i,s=new Uint8Array(a);let o,l,c,f,h,p;for(t+=8+a,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)l=n[o],c=l.duration,f=l.size,h=l.flags,p=l.cts,s.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return Ee.box(Ee.types.trun,s)}static initSegment(e){Ee.types||Ee.init();const t=Ee.moov(e);return Wi(Ee.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let s=a.length;for(let y=0;y<n.length;y+=1){s+=3;for(let b=0;b<n[y].length;b+=1)s+=2+n[y][b].length}const o=new Uint8Array(s);o.set(a,0),s=a.length;const l=n.length-1;for(let y=0;y<n.length;y+=1){o.set(new Uint8Array([32+y|(y===l?128:0),0,n[y].length]),s),s+=3;for(let b=0;b<n[y].length;b+=1)o.set(new Uint8Array([n[y][b].length>>8,n[y][b].length&255]),s),s+=2,o.set(n[y][b],s),s+=n[y][b].length}const c=Ee.box(Ee.types.hvcC,o),f=e.width,h=e.height,p=e.pixelRatio[0],g=e.pixelRatio[1];return Ee.box(Ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,g>>24,g>>16&255,g>>8&255,g&255])))}}Ee.types=void 0;Ee.HDLR_TYPES=void 0;Ee.STTS=void 0;Ee.STSC=void 0;Ee.STCO=void 0;Ee.STSZ=void 0;Ee.VMHD=void 0;Ee.SMHD=void 0;Ee.STSD=void 0;Ee.FTYP=void 0;Ee.DINF=void 0;const F5=9e4;function AD(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function Jge(r,e,t=1,n=!1){return AD(r,e,1/t,n)}function ad(r,e=!1){return AD(r,1e3,1/F5,e)}function e0e(r,e=1){return AD(r,F5,1/e)}function kF(r){const{baseTime:e,timescale:t,trackId:n}=r;return`${e/t} (${e}/${t}) trackId: ${n}`}const t0e=10*1e3,r0e=1024,n0e=1152,i0e=1536;let nc=null,sE=null;function MF(r,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:r?2:1,isNonSync:r?0:1}}}class gg extends Qi{constructor(e,t,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,nc===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);nc=s?parseInt(s[1]):0}if(sE===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);sE=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&kF(t)} > ${e&&kF(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((a,s)=>{let o=s.pts,l=o-a;return l<-4294967296&&(t=!0,o=mi(o,n),l=o-a),l>0?a:o},n);return t&&this.debug("PTS rollover detected"),i}remux(e,t,n,i,a,s,o,l){let c,f,h,p,g,y,b=a,v=a;const E=e.pid>-1,S=t.pid>-1,w=t.samples.length,A=e.samples.length>0,T=o&&w>0||w>1;if((!E||A)&&(!S||T)||this.ISGenerated||o){if(this.ISGenerated){var D,P,k,M;const Y=this.videoTrackConfig;(Y&&(t.width!==Y.width||t.height!==Y.height||((D=t.pixelRatio)==null?void 0:D[0])!==((P=Y.pixelRatio)==null?void 0:P[0])||((k=t.pixelRatio)==null?void 0:k[1])!==((M=Y.pixelRatio)==null?void 0:M[1]))||!Y&&T||this.nextAudioTs===null&&A)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,t,a,s));const B=this.isVideoContiguous;let C=-1,W;if(T&&(C=a0e(t.samples),!B&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,C>0){this.warn(`Dropped ${C} out of ${w} video samples due to a missing keyframe`);const Y=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(C),t.dropped+=C,v+=(t.samples[0].pts-Y)/t.inputTimeScale,W=v}else C===-1&&(this.warn(`No keyframe found out of ${w} video samples`),y=!1);if(this.ISGenerated){if(A&&T){const Y=this.getVideoStartPts(t.samples),$=(mi(e.samples[0].pts,Y)-Y)/t.inputTimeScale;b+=Math.max(0,$),v+=Math.max(0,-$)}if(A){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,t,a,s)),f=this.remuxAudio(e,b,this.isAudioContiguous,s,S||T||l===et.AUDIO?v:void 0),T){const Y=f?f.endPTS-f.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,t,a,s)),c=this.remuxVideo(t,v,B,Y)}}else T&&(c=this.remuxVideo(t,v,B,0));c&&(c.firstKeyFrame=C,c.independent=C!==-1,c.firstKeyFramePTS=W)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(g=B5(n,a,this._initPTS,this._initDTS)),i.samples.length&&(p=U5(i,a,this._initPTS))),{audio:f,video:c,initSegment:h,independent:y,text:p,id3:g}}computeInitPts(e,t,n,i){const a=Math.round(n*t);let s=mi(e,a);if(s<a+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(a-s)/t} ${i}`);s<a+t;)s+=8589934592;return s-a}generateIS(e,t,n,i){const a=e.samples,s=t.samples,o=this.typeSupported,l={},c=this._initPTS;let f=!c||i,h="audio/mp4",p,g,y,b=-1;if(f&&(p=g=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ee.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(b=e.id,y=e.inputTimeScale,!c||y!==c.timescale?p=g=this.computeInitPts(a[0].pts,y,n,"audio"):f=!1)}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ee.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(b=t.id,y=t.inputTimeScale,!c||y!==c.timescale){const v=this.getVideoStartPts(s),E=mi(s[0].dts,v),S=this.computeInitPts(E,y,n,"video"),w=this.computeInitPts(v,y,n,"video");g=Math.min(g,S),p=Math.min(p,w)}else f=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,f?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${p/y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${p/y} (${p}/${y}) trackId: ${b}`),this._initPTS={baseTime:p,timescale:y,trackId:b},this._initDTS={baseTime:g,timescale:y,trackId:b}):p=y=void 0,{tracks:l,initPTS:p,timescale:y,trackId:b}}remuxVideo(e,t,n,i){const a=e.inputTimeScale,s=e.samples,o=[],l=s.length,c=this._initPTS,f=c.baseTime*a/c.timescale;let h=this.nextVideoTs,p=8,g=this.videoSampleDuration,y,b,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=!1;if(!n||h===null){const H=f+t*a,G=s[0].pts-mi(s[0].dts,s[0].pts);nc&&h!==null&&Math.abs(H-G-(h+f))<15e3?n=!0:h=H-G-f}const w=h+f;for(let H=0;H<l;H++){const G=s[H];G.pts=mi(G.pts,w),G.dts=mi(G.dts,w),G.dts<s[H>0?H-1:H].dts&&(S=!0)}S&&s.sort(function(H,G){const J=H.dts-G.dts,fe=H.pts-G.pts;return J||fe}),y=s[0].dts,b=s[s.length-1].dts;const A=b-y,T=A?Math.round(A/(l-1)):g||e.inputTimeScale/30;if(n){const H=y-w,G=H>T,J=H<-1;if((G||J)&&(G?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ad(H,!0)} ms (${H}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ad(-H,!0)} ms (${H}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!J||w>=s[0].pts||nc)){y=w;const fe=s[0].pts-H;if(G)s[0].dts=y,s[0].pts=fe;else{let se=!0;for(let be=0;be<s.length&&!(s[be].dts>fe&&se);be++){const oe=s[be].pts;if(s[be].dts-=H,s[be].pts-=H,be<s.length-1){const re=s[be+1].pts,te=s[be].pts,le=re<=te,ce=re<=oe;se=le==ce}}}this.log(`Video: Initial PTS/DTS adjusted: ${ad(fe,!0)}/${ad(y,!0)}, delta: ${ad(H,!0)} ms`)}}y=Math.max(0,y);let I=0,D=0,P=y;for(let H=0;H<l;H++){const G=s[H],J=G.units,fe=J.length;let se=0;for(let be=0;be<fe;be++)se+=J[be].data.length;D+=se,I+=fe,G.length=se,G.dts<P?(G.dts=P,P+=T/4|0||1):P=G.dts,v=Math.min(G.pts,v),E=Math.max(G.pts,E)}b=s[l-1].dts;const k=D+4*I+8;let M;try{M=new Uint8Array(k)}catch(H){this.observer.emit(U.ERROR,U.ERROR,{type:at.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:k,reason:`fail allocating video mdat ${k}`});return}const B=new DataView(M.buffer);B.setUint32(0,k),M.set(Ee.types.mdat,4);let C=!1,W=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,$=Number.NEGATIVE_INFINITY;for(let H=0;H<l;H++){const G=s[H],J=G.units;let fe=0;for(let oe=0,re=J.length;oe<re;oe++){const te=J[oe],le=te.data,ce=te.data.byteLength;B.setUint32(p,ce),p+=4,M.set(le,p),p+=ce,fe+=4+ce}let se;if(H<l-1)g=s[H+1].dts-G.dts,se=s[H+1].pts-G.pts;else{const oe=this.config,re=H>0?G.dts-s[H-1].dts:T;if(se=H>0?G.pts-s[H-1].pts:T,oe.stretchShortVideoTrack&&this.nextAudioTs!==null){const te=Math.floor(oe.maxBufferHole*a),le=(i?v+i*a:this.nextAudioTs+f)-G.pts;le>te?(g=le-re,g<0?g=re:C=!0,this.log(`It is approximately ${le/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=re}else g=re}const be=Math.round(G.pts-G.dts);W=Math.min(W,g),q=Math.max(q,g),Y=Math.min(Y,se),$=Math.max($,se),o.push(MF(G.key,g,fe,be))}if(o.length){if(nc){if(nc<70){const H=o[0].flags;H.dependsOn=2,H.isNonSync=0}}else if(sE&&$-Y<q-W&&T/q<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let H=y;for(let G=0,J=o.length;G<J;G++){const fe=H+o[G].duration,se=H+o[G].cts;if(G<J-1){const be=fe+o[G+1].cts;o[G].duration=be-se}else o[G].duration=G?o[G-1].duration:T;o[G].cts=0,H=fe}}}g=C||!g?T:g;const z=b+g;this.nextVideoTs=h=z-f,this.videoSampleDuration=g,this.isVideoContiguous=!0;const X={data1:Ee.moof(e.sequenceNumber++,y,zt(e,{samples:o})),data2:M,startPTS:(v-f)/a,endPTS:(E+g-f)/a,startDTS:(y-f)/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,X}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return n0e;case"ac3":return i0e;default:return r0e}}remuxAudio(e,t,n,i,a){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,l=s/o,c=this.getSamplesPerFrame(e),f=c*l,h=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,g=[],y=a!==void 0;let b=e.samples,v=p?0:8,E=this.nextAudioTs||-1;const S=h.baseTime*s/h.timescale,w=S+t*s;if(this.isAudioContiguous=n=n||b.length&&E>0&&(i&&Math.abs(w-(E+S))<9e3||Math.abs(mi(b[0].pts,w)-(E+S))<20*f),b.forEach(function($){$.pts=mi($.pts,w)}),!n||E<0){const $=b.length;if(b=b.filter(z=>z.pts>=0),$!==b.length&&this.warn(`Removed ${b.length-$} of ${$} samples (initPTS ${S} / ${s})`),!b.length)return;a===0?E=0:i&&!y?E=Math.max(0,w-S):E=b[0].pts-S}if(e.segmentCodec==="aac"){const $=this.config.maxAudioFramesDrift;for(let z=0,K=E+S;z<b.length;z++){const Z=b[z],X=Z.pts,H=X-K,G=Math.abs(1e3*H/s);if(H<=-$*f&&y)z===0&&(this.warn(`Audio frame @ ${(X/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*H/s)} ms.`),this.nextAudioTs=E=X-S,K=X);else if(H>=$*f&&G<t0e&&y){let J=Math.round(H/f);for(K=X-J*f;K<0&&J&&f;)J--,K+=f;z===0&&(this.nextAudioTs=E=K-S),this.warn(`Injecting ${J} audio frames @ ${((K-S)/s).toFixed(3)}s due to ${Math.round(1e3*H/s)} ms gap.`);for(let fe=0;fe<J;fe++){let se=Zge.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);se||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),se=Z.unit.subarray()),b.splice(z,0,{unit:se,pts:K}),K+=f,z++}}Z.pts=K,K+=f}}let A=null,T=null,I,D=0,P=b.length;for(;P--;)D+=b[P].unit.byteLength;for(let $=0,z=b.length;$<z;$++){const K=b[$],Z=K.unit;let X=K.pts;if(T!==null){const G=g[$-1];G.duration=Math.round((X-T)/l)}else if(n&&e.segmentCodec==="aac"&&(X=E+S),A=X,D>0){D+=v;try{I=new Uint8Array(D)}catch(G){this.observer.emit(U.ERROR,U.ERROR,{type:at.MUX_ERROR,details:we.REMUX_ALLOC_ERROR,fatal:!1,error:G,bytes:D,reason:`fail allocating audio mdat ${D}`});return}p||(new DataView(I.buffer).setUint32(0,D),I.set(Ee.types.mdat,4))}else return;I.set(Z,v);const H=Z.byteLength;v+=H,g.push(MF(!0,c,H,0)),T=X}const k=g.length;if(!k)return;const M=g[g.length-1];E=T-S,this.nextAudioTs=E+l*M.duration;const B=p?new Uint8Array(0):Ee.moof(e.sequenceNumber++,A/l,zt({},e,{samples:g}));e.samples=[];const C=(A-S)/s,W=this.nextAudioTs/s,q={data1:B,data2:I,startPTS:C,endPTS:W,startDTS:C,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,q}}function mi(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function a0e(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function B5(r,e,t,n){const i=r.samples.length;if(!i)return;const a=r.inputTimeScale;for(let o=0;o<i;o++){const l=r.samples[o];l.pts=mi(l.pts-t.baseTime*a/t.timescale,e*a)/a,l.dts=mi(l.dts-n.baseTime*a/n.timescale,e*a)/a}const s=r.samples;return r.samples=[],{samples:s}}function U5(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let s=0;s<n;s++){const o=r.samples[s];o.pts=mi(o.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((s,o)=>s.pts-o.pts);const a=r.samples;return r.samples=[],{samples:a}}class s0e extends Qi{constructor(e,t,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:a,video:s}=this.initData=Y8(e);if(t)qpe(e,t);else{const l=a||s;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}a&&(n=NF(a,Vt.AUDIO,this)),s&&(i=NF(s,Vt.VIDEO,this));const o={};a&&s?o.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:a?o.audio={container:"audio/mp4",codec:n,encrypted:a.encrypted,initSegment:e,id:"audio"}:s?o.video={container:"video/mp4",codec:i,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,a,s){var o,l;let{initPTS:c,lastEndTime:f}=this;const h={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Xe(f)||(f=this.lastEndTime=a||0);const p=t.samples;if(!p.length)return h;const g={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((o=y)!=null&&o.length||(this.generateInitSegment(p),y=this.initData),!((l=y)!=null&&l.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(g.tracks=this.initTracks,this.emitInitSegment=!1);const b=Vpe(p,y,this),v=y.audio?b[y.audio.id]:null,E=y.video?b[y.video.id]:null,S=xm(E,1/0),w=xm(v,1/0),A=xm(E,0,!0),T=xm(v,0,!0);let I=a,D=0;const P=v&&(!E||!c&&w<S||c&&c.trackId===y.audio.id),k=P?v:E;if(k){const K=k.timescale,Z=k.start-a*K,X=P?y.audio.id:y.video.id;I=k.start/K,D=P?T-w:A-S,(s||!c)&&(o0e(c,I,a,D)||K!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${a} ${Z/K} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${I-a} (${Z}/${K}) trackId: ${X}`),c=null,g.initPTS=Z,g.timescale=K,g.trackId=X)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);c?(g.initPTS=c.baseTime,g.timescale=c.timescale,g.trackId=c.trackId):((!g.timescale||g.trackId===void 0||g.initPTS===void 0)&&(this.warn("Could not set initPTS"),g.initPTS=I,g.timescale=1,g.trackId=-1),this.initPTS=c={baseTime:g.initPTS,timescale:g.timescale,trackId:g.trackId});const M=I-c.baseTime/c.timescale,B=M+D;D>0?this.lastEndTime=B:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const C=!!y.audio,W=!!y.video;let Y="";C&&(Y+="audio"),W&&(Y+="video");const q=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),$={data1:p,startPTS:M,startDTS:M,endPTS:B,endDTS:B,type:Y,hasAudio:C,hasVideo:W,nb:1,dropped:0,encrypted:q};h.audio=C&&!W?$:void 0,h.video=W?$:void 0;const z=E?.sampleCount;if(z){const K=E.keyFrameIndex,Z=K!==-1;$.nb=z,$.dropped=K===0||this.isVideoContiguous?0:Z?K:z,$.independent=Z,$.firstKeyFrame=K,Z&&E.keyFrameStart&&($.firstKeyFramePTS=(E.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(h.independent=Z),this.isVideoContiguous||(this.isVideoContiguous=Z),$.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${K}/${z} dropped: ${$.dropped} start: ${$.firstKeyFramePTS||"NA"}`)}return h.initSegment=g,h.id3=B5(n,a,c,c),i.samples.length&&(h.text=U5(i,a,c)),h}}function xm(r,e,t=!1){return r?.start!==void 0?(r.start+(t?r.duration:0))/r.timescale:e}function o0e(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),a=e-r.baseTime/r.timescale;return Math.abs(a-t)>i}function NF(r,e,t){const n=r.codec;return n&&n.length>4?n:e===Vt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?I0(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let xs;try{xs=self.performance.now.bind(self.performance)}catch{xs=Date.now}const yg=[{demux:zge,remux:s0e},{demux:Uo,remux:gg},{demux:Hge,remux:gg},{demux:Kge,remux:gg}];yg.splice(2,0,{demux:Gge,remux:gg});class FF{constructor(e,t,n,i,a,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=a,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const a=n.transmuxing;a.executeStart=xs();let s=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:f,trackSwitch:h,accurateTimeOffset:p,timeOffset:g,initSegmentChange:y}=i||o,{audioCodec:b,videoCodec:v,defaultInitPts:E,duration:S,initSegmentData:w}=l,A=l0e(s,t);if(A&&bc(A.method)){const P=this.getDecrypter(),k=yD(A.method);if(P.isSync()){let M=P.softwareDecrypt(s,A.key.buffer,A.iv.buffer,k);if(n.part>-1){const C=P.flush();M=C&&C.buffer}if(!M)return a.executeEnd=xs(),oE(n);s=new Uint8Array(M)}else return this.asyncResult=!0,this.decryptionPromise=P.webCryptoDecrypt(s,A.key.buffer,A.iv.buffer,k).then(M=>{const B=this.push(M,null,n);return this.decryptionPromise=null,B}),this.decryptionPromise}const T=this.needsProbing(f,h);if(T){const P=this.configureTransmuxer(s);if(P)return this.logger.warn(`[transmuxer] ${P.message}`),this.observer.emit(U.ERROR,U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message}),a.executeEnd=xs(),oE(n)}(f||h||y||T)&&this.resetInitSegment(w,b,v,S,t),(f||y||T)&&this.resetInitialTimestamp(E),c||this.resetContiguity();const I=this.transmux(s,A,g,p,n);this.asyncResult=Wd(I);const D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,a.executeEnd=xs(),I}flush(e){const t=e.transmuxing;t.executeStart=xs();const{decrypter:n,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const s=[],{timeOffset:o}=i;if(n){const h=n.flush();h&&s.push(this.push(h.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){t.executeEnd=xs();const h=[oE(e)];return this.asyncResult?Promise.resolve(h):h}const f=l.flush(o);return Wd(f)?(this.asyncResult=!0,f.then(h=>(this.flushRemux(s,h,e),s))):(this.flushRemux(s,f,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===et.MAIN?"level":"track"} ${n.level}`);const f=this.remuxer.remux(i,a,s,o,c,l,!0,this.id);e.push({remuxResult:f,chunkMeta:n}),n.transmuxing.executeEnd=xs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,a){const{demuxer:s,remuxer:o}=this;!s||!o||(s.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,a){let s;return t&&t.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,t,n,i,a):s=this.transmuxUnencrypted(e,n,i,a),s}transmuxUnencrypted(e,t,n,i){const{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,s,o,l,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,a){return this.demuxer.demuxSampleAes(e,t,n).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,n,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let a;for(let h=0,p=yg.length;h<p;h++){var s;if((s=yg[h].demux)!=null&&s.probe(e,this.logger)){a=yg[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=a.remux,f=a.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(n,t,i,this.logger)),(!o||!(o instanceof f))&&(this.demuxer=new f(n,t,i,this.logger),this.probe=f.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new mD(this.config)),e}}function l0e(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const oE=r=>({remuxResult:{},chunkMeta:r});function Wd(r){return"then"in r&&r.then instanceof Function}class u0e{constructor(e,t,n,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=a||null}}class c0e{constructor(e,t,n,i,a,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=s}}let BF=0;class j5{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=BF++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,f=this.hls;if(!(!f||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var h;const p=(h=this.workerContext)==null?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{f.logger[c.data.logType]&&f.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,f.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const s=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===U.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new xD,this.observer.on(U.FRAG_DECRYPTED,s),this.observer.on(U.ERROR,s);const o=J2(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(a.workerPath||pge()){try{a.workerPath?(l.log(`loading Web Worker ${a.workerPath} for "${t}"`),this.workerContext=gge(a.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=mge());const{worker:f}=this.workerContext;f.addEventListener("message",this.onWorkerMessage),f.addEventListener("error",this.onWorkerError),f.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:Xt(a)})}catch(f){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,f),this.terminateWorker(),this.error=null,this.transmuxer=new FF(this.observer,o,a,"",t,e.logger)}return}}this.transmuxer=new FF(this.observer,o,a,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=BF++;const t=this.hls.config,n=J2(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Xt(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),yge(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,a,s,o,l,c,f){var h,p;c.transmuxing.start=self.performance.now();const{instanceNo:g,transmuxer:y}=this,b=s?s.start:a.start,v=a.decryptdata,E=this.frag,S=!(E&&a.cc===E.cc),w=!(E&&c.level===E.level),A=E?c.sn-E.sn:-1,T=this.part?c.part-this.part.index:-1,I=A===0&&c.id>1&&c.id===E?.stats.chunkCount,D=!w&&(A===1||A===0&&(T===1||I&&T<=0)),P=self.performance.now();(w||A||a.stats.parsing.start===0)&&(a.stats.parsing.start=P),s&&(T||!D)&&(s.stats.parsing.start=P);const k=!(E&&((h=a.initSegment)==null?void 0:h.url)===((p=E.initSegment)==null?void 0:p.url)),M=new c0e(S,D,l,w,b,k);if(!D||S||k){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===et.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${S}
        trackSwitch: ${w}
        contiguous: ${D}
        accurateTimeOffset: ${l}
        timeOffset: ${b}
        initSegmentChange: ${k}`);const B=new u0e(n,i,t,o,f);this.configureTransmuxer(B)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:g,cmd:"demux",data:e,decryptdata:v,chunkMeta:c,state:M},e instanceof ArrayBuffer?[e]:[]);else if(y){const B=y.push(e,v,c,M);Wd(B)?B.then(C=>{this.handleTransmuxComplete(C)}).catch(C=>{this.transmuxerError(C,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(B)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);Wd(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const UF=100;class f0e extends bD{constructor(e,t,n){super(e,t,n,"audio-stream-controller",et.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(U.BUFFER_RESET,this.onBufferReset,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(U.FRAG_LOADING,this.onFragLoading,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(U.BUFFER_RESET,this.onBufferReset,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(U.FRAG_LOADING,this.onFragLoading,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:a,trackId:s}){if(n===et.MAIN){const o=t.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:i,timescale:a,trackId:s},this.log(`InitPTS for cc: ${o} found from main: ${i/a} (${i}/${a}) trackId: ${s}`),this.mainAnchor=t,this.state===Ge.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(t,l)):this.state===Ge.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&i?.cc===t.cc)return;const a=(i||e).cc,s=this.getLevelDetails(),o=this.getLoadPosition(),l=r5(s,a,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===Ge.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Ge.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(UF),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ge.IDLE):this.state=Ge.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Ge.IDLE:this.doTickIdle();break;case Ge.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e?.[t],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Ge.WAITING_INIT_PTS}break}case Ge.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Ge.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:a}=e,s=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Ge.FRAG_LOADING;const o=i.flush().buffer,l={frag:t,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),a&&super._handleFragmentLoadComplete(l)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=Ge.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:a}=this,s=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(n!=null&&n[a]))return;const o=n[a],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=Ge.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Vt.AUDIO,et.AUDIO));const f=this.getFwdBufferInfo(c,et.AUDIO);if(f===null)return;if(!this.switchingTrack&&this._streamEnded(f,l)){t.trigger(U.BUFFER_EOS,{type:"audio"}),this.state=Ge.ENDED;return}const h=f.len,p=t.maxBufferLength,g=l.fragments,y=g[0].start,b=this.getLoadPosition(),v=this.flushing?b:f.end;if(this.switchingTrack&&i){const w=b;l.PTSKnown&&w<y&&(f.end>y||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=y+.05)}if(h>=p&&!this.switchingTrack&&v<g[g.length-1].start)return;let E=this.getNextFragment(v,l);if(E&&this.isLoopLoading(E,v)&&(E=this.getNextFragmentLoopLoading(E,l,f,et.MAIN,p)),!E){this.bufferFlushed=!0;return}let S=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&S&&_r(E)&&!E.endList&&(!l.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(S)===jr.OK&&(this.mainFragLoading=S=null),S&&_r(S))){if(E.start>S.end){const A=this.fragmentTracker.getFragAtPos(v,et.MAIN);A&&A.end>S.end&&(S=A,this.mainFragLoading={frag:A,targetBufferTime:null})}if(E.start>S.end)return}this.loadFragment(E,o,v)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Yd(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ge.STOPPED&&(this.setInterval(UF),this.state=Ge.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(U.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:a,id:s,groupId:o,track:l}=t;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${l.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||a.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${l.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const f=i[s];let h=0;if(a.live||(n=f.details)!=null&&n.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(f.details){var p;h=this.alignPlaylists(a,f.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(x5(a,c),a.alignedSliding||N0(a,c),h=a.fragmentStart)}f.details=a,this.levelLastLoaded=f,this.startFragRequested||this.setStartPosition(c,h),this.hls.trigger(U.AUDIO_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.state===Ge.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=Ge.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:a}=e,{config:s,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const f=c.details;if(!f){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const h=s.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new j5(this.hls,et.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const g=this.initPTS[n.cc],y=(t=n.initSegment)==null?void 0:t.data;if(g!==void 0){const v=i?i.index:-1,E=v!==-1,S=new gD(n.level,n.sn,n.stats.chunkCount,a.byteLength,v,E);p.push(a,y,h,"",n,i,f.totalduration,!1,S,g)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${f.startSN} ,${f.endSN}],track ${o}`);const{cache:b}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new S5,complete:!1};b.push(new Uint8Array(a)),this.state!==Ge.STOPPED&&(this.state=Ge.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===et.MAIN&&_r(t.frag)&&(this.mainFragLoading=t,this.state===Ge.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==et.AUDIO){!this.audioOnly&&n.type===et.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(_r(n)){this.fragPrevious=n;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(U.AUDIO_TRACK_SWITCHED,Ut({},a)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.AUDIO,t);break;case we.AUDIO_TRACK_LOAD_ERROR:case we.AUDIO_TRACK_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===St.AUDIO_TRACK&&(this.state=Ge.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Vt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Vt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ge.ENDED&&(this.state=Ge.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,et.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:l,part:c,level:f}=o,{details:h}=f,{audio:p,text:g,id3:y,initSegment:b}=a;if(this.fragContextChanged(l)||!h){this.fragmentTracker.removeFragment(l);return}if(this.state=Ge.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){const v=l.initSegment||l;if(this.unhandledEncryptionError(b,l))return;this._bufferInitSegment(f,b.tracks,v,s),i.trigger(U.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:n,tracks:b.tracks})}if(p){const{startPTS:v,endPTS:E,startDTS:S,endDTS:w}=p;c&&(c.elementaryStreams[Vt.AUDIO]={startPTS:v,endPTS:E,startDTS:S,endDTS:w}),l.setElementaryStreamInfo(Vt.AUDIO,v,E,S,w),this.bufferFragmentData(p,l,c,s)}if(y!=null&&(t=y.samples)!=null&&t.length){const v=zt({id:n,frag:l,details:h},y);i.trigger(U.FRAG_PARSING_METADATA,v)}if(g){const v=zt({id:n,frag:l,details:h},g);i.trigger(U.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const a=t.audio;a.id=et.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${s}/${a.codec}]`),s&&s.split(",").length===1&&(a.levelCodec=s),this.hls.trigger(U.BUFFER_CODECS,t);const o=a.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(U.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===jr.NOT_LOADED||i===jr.PARTIAL){var a;if(!_r(e))this._loadInitSegment(e,t);else if((a=t.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ge.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==t.details.fragmentStart&&N0(t.details,s)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o}=this.bufferedTrack;Wl({name:t,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o},e,Pl)||(R0(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(U.AUDIO_TRACK_SWITCHED,Ut({},e))}}class DD extends Qi{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let a=-1;for(let s=0;s<i.length;s++){const o=i[s];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){a=s;break}else l===e.substring(0,l.length)&&(a=s)}if(a!==-1){const s=i[a],o=parseInt(s["LAST-MSN"])||t.lastPartSn;let l=parseInt(s["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const f=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&f>t.partTarget&&(l+=1)}const c=n&&eF(n);return new tF(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:a}=t,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;i.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){const f=Math.max(l||0,0);i.appliedTimelineOffset=f,i.fragments.forEach(h=>{h.setStart(h.playlistOffset+f)})}if(i.live||n!=null&&n.live){const f="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){nge(n,i,this);const S=i.playlistParsingError;if(S){this.warn(S);const w=this.hls;if(!w.config.ignorePlaylistParsingErrors){var c;const{networkDetails:A}=t;w.trigger(U.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:S,reason:S.message,level:t.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:A,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const h=this.hls.mainForwardBufferInfo,p=h?h.end-h.len:0,g=(i.edge-p)*1e3,y=m5(i,g);if(i.requestScheduled+y<s?i.requestScheduled=s:i.requestScheduled+=y,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let b,v,E;if(i.canBlockReload&&i.endSN&&i.advanced){const S=this.hls.config.lowLatencyMode,w=i.lastPartSn,A=i.endSN,T=i.lastPartIndex,I=T!==-1,D=w===A;I?D?(v=A+1,E=S?0:T):(v=w,E=S?T+1:i.maxPartIndex):v=A+1;const P=i.age,k=P+i.ageHeader;let M=Math.min(k-i.partTarget,i.targetduration*1.5);if(M>0){if(k>i.targetduration*3)this.log(`Playlist last advanced ${P.toFixed(2)}s ago. Omitting segment and part directives.`),v=void 0,E=void 0;else if(n!=null&&n.tuneInGoal&&k-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${M} with playlist age: ${i.age}`),M=0;else{const B=Math.floor(M/i.targetduration);if(v+=B,E!==void 0){const C=Math.round(M%i.targetduration/i.partTarget);E+=C}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${M} skip sn ${B} to part ${E}`)}i.tuneInGoal=M}if(b=this.getDeliveryDirectives(i,t.deliveryDirectives,v,E),S||!D){i.requestScheduled=s,this.loadingPlaylist(f,b);return}}else(i.canBlockReload||i.canSkipUntil)&&(b=this.getDeliveryDirectives(i,t.deliveryDirectives,v,E));b&&v!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(y-o*2,y/2)),this.scheduleLoading(f,b,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const a=self.performance.now(),s=i.requestScheduled;if(a>=s){this.loadingPlaylist(e,t);return}const o=s-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,n,i){let a=eF(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,a=pg.No),new tF(n,i,a)}checkRetry(e){const t=e.details,n=P0(e),i=e.errorAction,{action:a,retryCount:s=0,retryConfig:o}=i||{},l=!!i&&!!o&&(a===ln.RetryRequest||!i.resolved&&a===ln.SendAlternateToPenaltyBox);if(l){var c;if(s>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const f=pD(o,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),f),this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${t}" in ${f}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}function $5(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Vd(r[t].attrs,e[t].attrs))return!1;return!0}function Vd(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function jT(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class d0e extends DD{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(U.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:a}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${s?.groupId}`);return}const o=s.details;s.details=t.details,this.log(`Audio track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!n||n.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,g)=>{p.id=g});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!a&&l){const p=La(l,o,Pl);if(p>-1)a=o[p];else{const g=La(l,this.tracks);a=this.tracks[g]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const f={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(U.AUDIO_TRACKS_UPDATED,f);const h=this.trackId;if(c!==-1&&h===-1)this.setAudioTrack(c);else if(o.length&&h===-1){var s;const p=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,t){t.fatal||!t.context||t.context.type===St.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Wl(e,i,Pl))return i;const a=La(e,this.tracksInGroup,Pl);if(a>-1){const s=this.tracksInGroup[a];return this.setAudioTrack(a),s}else if(i){let s=t.loadLevel;s===-1&&(s=t.firstAutoLevel);const o=_me(e,t.levels,n,s,Pl);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const s=La(e,n);if(s>-1)return n[s]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===n&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(U.AUDIO_TRACK_SWITCHING,Ut({},i)),a))return;const s=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Wl(e,i,Pl)))return n}if(e){const{name:n,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const f=t[c];if(Wl({name:n,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:l},f,Pl))return c}for(let c=0;c<t.length;c++){const f=t[c];if(Vd(e.attrs,f.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const f=t[c];if(Vd(e.attrs,f.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&R0(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,t),s=e.details,o=s?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(U.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class h0e{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(a){var n;if(i.onError(a),this.queues===null||this.tracks===null)return;const s=(n=this.tracks[e])==null?void 0:n.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const jF=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,H5="HlsJsTrackRemovedError";class p0e extends Error{constructor(e){super(e),this.name=H5}}class m0e extends Qi{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:a}=this;n&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(U.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=Fpe(Zo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.BUFFER_RESET,this.onBufferReset,this),e.on(U.BUFFER_APPENDING,this.onBufferAppending,this),e.on(U.BUFFER_CODECS,this.onBufferCodecs,this),e.on(U.BUFFER_EOS,this.onBufferEos,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(U.FRAG_PARSED,this.onFragParsed,this),e.on(U.FRAG_CHANGED,this.onFragChanged,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.BUFFER_RESET,this.onBufferReset,this),e.off(U.BUFFER_APPENDING,this.onBufferAppending,this),e.off(U.BUFFER_CODECS,this.onBufferCodecs,this),e.off(U.BUFFER_EOS,this.onBufferEos,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(U.FRAG_PARSED,this.onFragParsed,this),e.off(U.FRAG_CHANGED,this.onFragChanged,this),e.off(U.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const s=this.isQueued();(a||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?zt(n,i.tracks):this.sourceBuffers.forEach(a=>{const[s]=a;s&&(n[s]=zt({},this.tracks[s]),this.removeBuffer(s)),a[0]=a[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const i=Zo(this.appendSource);if(i){const a=!!t.mediaSource;(a||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(s),a)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&s instanceof l,$F(n),g0e(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&a&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Xt(n,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${Xt(i,(l,c)=>l==="initSegment"?void 0:c)}}`),!B8(i,n)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,c=this.details,f=Math.max(l,c?.fragments[0].start||0);if(f-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${f}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${f} currentTime: ${l}`),this.onMediaDetaching(U.MEDIA_DETACHING,{}),this.onMediaAttaching(U.MEDIA_ATTACHING,t),e.currentTime=f;return}this.transferData=void 0,a.forEach(l=>{const c=l,f=i[c];if(f){const h=f.buffer;if(h){const p=this.fragmentTracker,g=f.id;if(p.hasFragments(g)||p.hasParts(g)){const v=pt.getBuffered(h);p.detectEvictedFragments(c,v,g,null,!0)}const y=lE(c),b=[c,h];this.sourceBuffers[y]=b,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,f)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:s}=this;if(a){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const l=a.sourceBuffers;for(let c=l.length;c--;)o&&l[c].abort(),a.removeSourceBuffer(l[c]);o&&a.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&$F(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(U.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[lE(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new h0e(this.tracks)}onBufferCodecs(e,t){var n;const i=this.tracks,a=Object.keys(t);this.log(`BUFFER_CODECS: "${a}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),o=!s&&this.sourceBufferCount&&this.media&&a.some(l=>!i[l]);if(s||o){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${a}" SourceBuffers`);return}a.forEach(l=>{var c,f;const h=t[l],{id:p,codec:g,levelCodec:y,container:b,metadata:v,supplemental:E}=h;let S=i[l];const w=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[l],A=w!=null&&w.buffer?w:S,T=A?.pendingCodec||A?.codec,I=A?.levelCodec;S||(S=i[l]={buffer:void 0,listeners:[],codec:g,supplemental:E,container:b,levelCodec:y,metadata:v,id:p});const D=hg(T,I),P=D?.replace(jF,"$1");let k=hg(g,y);const M=(f=k)==null?void 0:f.replace(jF,"$1");k&&D&&P!==M&&(l.slice(0,5)==="audio"&&(k=I0(k,this.appendSource)),this.log(`switching codec ${T} to ${k}`),k!==(S.pendingCodec||S.codec)&&(S.pendingCodec=k),S.container=b,this.appendChangeType(l,b,k))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((n=t.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,a={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const o=s.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),s.codec=n,s.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,et.MAIN))==null?void 0:t.gap)===!0)return;const s={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>i||l!=null&&l.buffer&&pt.isBuffered(l.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,et.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:a,parent:s,frag:o,part:l,chunkMeta:c,offset:f}=t,h=c.buffering[a],{sn:p,cc:g}=o,y=self.performance.now();h.start=y;const b=o.stats.buffering,v=l?l.stats.buffering:null;b.start===0&&(b.start=y),v&&v.start===0&&(v.start=y);const E=n.audio;let S=!1;a==="audio"&&E?.container==="audio/mpeg"&&(S=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const w=n.video,A=w?.buffer;if(A&&p!=="initSegment"){const D=l||o,P=this.blockedAudioAppend;if(a==="audio"&&s!=="main"&&!this.blockedAudioAppend&&!(w.ending||w.ended)){const M=D.start+D.duration*.05,B=A.buffered,C=this.currentOp("video");!B.length&&!C?this.blockAudio(D):!C&&!pt.isBuffered(A,M)&&this.lastVideoAppendEnd<M&&this.blockAudio(D)}else if(a==="video"){const k=D.end;if(P){const M=P.frag.start;(k>M||k<this.lastVideoAppendEnd||pt.isBuffered(A,M))&&this.unblockAudio()}this.lastVideoAppendEnd=k}}const T=(l||o).start,I={label:`append-${a}`,execute:()=>{var D;h.executeStart=self.performance.now();const P=(D=this.tracks[a])==null?void 0:D.buffer;P&&(S?this.updateTimestampOffset(P,T,.1,a,p,g):f!==void 0&&Xe(f)&&this.updateTimestampOffset(P,f,1e-6,a,p,g)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const D=self.performance.now();h.executeEnd=h.end=D,b.first===0&&(b.first=D),v&&v.first===0&&(v.first=D);const P={};this.sourceBuffers.forEach(([k,M])=>{k&&(P[k]=pt.getBuffered(M))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(U.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:P})},onError:D=>{var P;const k={type:at.MEDIA_ERROR,parent:o.type,details:we.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:c,error:D,err:D,fatal:!1},M=(P=this.media)==null?void 0:P.error;if(D.code===DOMException.QUOTA_EXCEEDED_ERR||D.name=="QuotaExceededError"||"quota"in D)k.details=we.BUFFER_FULL_ERROR;else if(D.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!M)k.errorAction=vc(!0);else if(D.name===H5&&this.sourceBufferCount===0)k.errorAction=vc(!0);else{const B=++this.appendErrors[a];this.warn(`Failed ${B}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${M||"no media error"})`),(B>=this.hls.config.appendErrorMaxRetry||M)&&(k.fatal=!0)}this.hls.trigger(U.ERROR,k)}};this.log(`queuing "${a}" append sn: ${p}${l?" p: "+l.index:""} of ${o.type===et.MAIN?"level":"track"} ${o.level} cc: ${g}`),this.append(I,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(U.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:a}=t;n?this.append(this.getFlushOp(n,i,a),n):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,a),s)})}onFragParsed(e,t){const{frag:n,part:i}=t,a=[],s=i?i.elementaryStreams:n.elementaryStreams;s[Vt.AUDIOVIDEO]?a.push("audiovideo"):(s[Vt.AUDIO]&&a.push("audio"),s[Vt.VIDEO]&&a.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:n.stats;this.hls.trigger(U.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,a).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([s])=>{if(s){const o=this.tracks[s];(!t.type||t.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(U.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(U.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===we.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;Xe(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,a=n.currentTime,s=t.levelTargetDuration,o=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Xe(o)&&o>=0){const c=Math.max(o,s),f=Math.floor(a/s)*s-c;this.flushBackBuffer(a,s,f)}const l=i.frontBufferFlushThreshold;if(Xe(l)&&l>0){const c=Math.max(i.maxBufferLength,l),f=Math.max(c,s),h=Math.floor(a/s)*s+f;this.flushFrontBuffer(a,s,h)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=pt.getBuffered(a);if(o.length>0&&n>o.start(0)){var s;this.hls.trigger(U.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger(U.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(U.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const s=pt.getBuffered(a),o=s.length;if(o<2)return;const l=s.start(o-1),c=s.end(o-1);if(n>l||e>=l&&e<=c)return;this.hls.trigger(U.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),f=Math.max(c,i);return{duration:1/0,start:c,end:f}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return Xe(a)?{duration:a}:null;const s=this.media.duration,o=Xe(n.duration)?n.duration:0;return i>o&&i>s||!Xe(s)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Xe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Xt(n)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(U.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,o=e[s];if(this.isPending(o)){const l=this.getTrackCodec(o,s),c=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(s)?" Queued":""} ${Xt(o)}`);try{const f=n.addSourceBuffer(c),h=lE(s),p=[s,f];t[h]=p,o.buffer=f}catch(f){var i;this.error(`error while trying to add sourceBuffer: ${f.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,sourceBufferName:s,mimeType:c,parent:o.id});return}this.trackSourceBuffer(s,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&Gd(n,"video")&&(i=ame(i,n));const a=hg(i,e.levelCodec);return a?t.slice(0,5)==="audio"?I0(a,this.appendSource):a:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,s)=>{const o=s.removedRanges;o!=null&&o.length&&this.hls.trigger(U.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,t,n,i,a,s){const o=t-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${a} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=s?.buffer;if(!i||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Xe(i.duration)?i.duration:1/0,c=Xe(a.duration)?a.duration:1/0,f=Math.max(0,t),h=Math.min(n,l,c);h>f&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${f},${h}] from the ${e} SourceBuffer`),o.remove(f,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n?.buffer;if(!i)throw new p0e(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(s=>this.appendBlocker(s));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const s=n.bind(this,e);i.listeners.push({event:t,listener:s}),a.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function $F(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function g0e(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}function lE(r){return r==="audio"?1:0}class OD{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(U.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.BUFFER_CODECS,this.onBufferCodecs,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(U.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.BUFFER_CODECS,this.onBufferCodecs,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,OD.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let a=e.length-1;const s=Math.max(t,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=s||l.height>=s)&&i(l,e[o+1])){a=o;break}}return a}}const y0e={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},qn=y0e,v0e={HLS:"h"},b0e=v0e;class Ga{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof Ga?n:new Ga(n))),this.value=e,this.params=t}}const x0e="Dict";function S0e(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function E0e(r,e,t,n){return new Error(`failed to ${r} "${S0e(e)}" as ${t}`,{cause:n})}function Ka(r,e,t){return E0e("serialize",r,e,t)}class G5{constructor(e){this.description=e}}const HF="Bare Item",w0e="Boolean";function _0e(r){if(typeof r!="boolean")throw Ka(r,w0e);return r?"?1":"?0"}function T0e(r){return btoa(String.fromCharCode(...r))}const A0e="Byte Sequence";function D0e(r){if(ArrayBuffer.isView(r)===!1)throw Ka(r,A0e);return`:${T0e(r)}:`}const O0e="Integer";function I0e(r){return r<-999999999999999||999999999999999<r}function K5(r){if(I0e(r))throw Ka(r,O0e);return r.toString()}function C0e(r){return`@${K5(r.getTime()/1e3)}`}function Y5(r,e){if(r<0)return-Y5(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}const R0e="Decimal";function P0e(r){const e=Y5(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ka(r,R0e);const t=e.toString();return t.includes(".")?t:`${t}.0`}const L0e="String",k0e=/[\x00-\x1f\x7f]+/;function M0e(r){if(k0e.test(r))throw Ka(r,L0e);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function N0e(r){return r.description||r.toString().slice(7,-1)}const F0e="Token";function GF(r){const e=N0e(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ka(e,F0e);return e}function $T(r){switch(typeof r){case"number":if(!Xe(r))throw Ka(r,HF);return Number.isInteger(r)?K5(r):P0e(r);case"string":return M0e(r);case"symbol":return GF(r);case"boolean":return _0e(r);case"object":if(r instanceof Date)return C0e(r);if(r instanceof Uint8Array)return D0e(r);if(r instanceof G5)return GF(r);default:throw Ka(r,HF)}}const B0e="Key";function HT(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw Ka(r,B0e);return r}function ID(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${HT(e)}`:`;${HT(e)}=${$T(t)}`).join("")}function z5(r){return r instanceof Ga?`${$T(r.value)}${ID(r.params)}`:$T(r)}function U0e(r){return`(${r.value.map(z5).join(" ")})${ID(r.params)}`}function j0e(r,e={whitespace:!0}){if(typeof r!="object"||r==null)throw Ka(r,x0e);const t=r instanceof Map?r.entries():Object.entries(r),n=e?.whitespace?" ":"";return Array.from(t).map(([i,a])=>{a instanceof Ga||(a=new Ga(a));let s=HT(i);return a.value===!0?s+=ID(a.params):(s+="=",Array.isArray(a.value)?s+=U0e(a):s+=z5(a)),s}).join(`,${n}`)}function q5(r,e){return j0e(r,e)}const xa="CMCD-Object",vr="CMCD-Request",_l="CMCD-Session",Po="CMCD-Status",$0e={br:xa,ab:xa,d:xa,ot:xa,tb:xa,tpb:xa,lb:xa,tab:xa,lab:xa,url:xa,pb:vr,bl:vr,tbl:vr,dl:vr,ltc:vr,mtp:vr,nor:vr,nrr:vr,rc:vr,sn:vr,sta:vr,su:vr,ttfb:vr,ttfbb:vr,ttlb:vr,cmsdd:vr,cmsds:vr,smrt:vr,df:vr,cs:vr,ts:vr,cid:_l,pr:_l,sf:_l,sid:_l,st:_l,v:_l,msd:_l,bs:Po,bsd:Po,cdn:Po,rtp:Po,bg:Po,pt:Po,ec:Po,e:Po},H0e={REQUEST:vr};function G0e(r){return Object.keys(r).reduce((e,t)=>{var n;return(n=r[t])===null||n===void 0||n.forEach(i=>e[i]=t),e},{})}function K0e(r,e){const t={};if(!r)return t;const n=Object.keys(r),i=e?G0e(e):{};return n.reduce((a,s)=>{var o;const l=$0e[s]||i[s]||H0e.REQUEST,c=(o=a[l])!==null&&o!==void 0?o:a[l]={};return c[s]=r[s],a},t)}function Y0e(r){return["ot","sf","st","e","sta"].includes(r)}function z0e(r){return typeof r=="number"?Xe(r):r!=null&&r!==""&&r!==!1}const W5="event";function q0e(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const vg=r=>Math.round(r),GT=(r,e)=>Array.isArray(r)?r.map(t=>GT(t,e)):r instanceof Ga&&typeof r.value=="string"?new Ga(GT(r.value,e),r.params):(e.baseUrl&&(r=q0e(r,e.baseUrl)),e.version===1?encodeURIComponent(r):r),Sm=r=>vg(r/100)*100,W0e=(r,e)=>{let t=r;return e.version>=2&&(r instanceof Ga&&typeof r.value=="string"?t=new Ga([r]):typeof r=="string"&&(t=[r])),GT(t,e)},V0e={br:vg,d:vg,bl:Sm,dl:Sm,mtp:Sm,nor:W0e,rtp:Sm,tb:vg},V5="request",Q5="response",CD=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],Q0e=["e"],X0e=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Gy(r){return X0e.test(r)}function Z0e(r){return CD.includes(r)||Q0e.includes(r)||Gy(r)}const X5=["d","dl","nor","ot","rtp","su"];function J0e(r){return CD.includes(r)||X5.includes(r)||Gy(r)}const eye=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function tye(r){return CD.includes(r)||X5.includes(r)||eye.includes(r)||Gy(r)}const rye=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function nye(r){return rye.includes(r)||Gy(r)}const iye={[Q5]:tye,[W5]:Z0e,[V5]:J0e};function Z5(r,e={}){const t={};if(r==null||typeof r!="object")return t;const n=e.version||r.v||1,i=e.reportingMode||V5,a=n===1?nye:iye[i];let s=Object.keys(r).filter(a);const o=e.filter;typeof o=="function"&&(s=s.filter(o));const l=i===Q5||i===W5;l&&!s.includes("ts")&&s.push("ts"),n>1&&!s.includes("v")&&s.push("v");const c=zt({},V0e,e.formatters),f={version:n,reportingMode:i,baseUrl:e.baseUrl};return s.sort().forEach(h=>{let p=r[h];const g=c[h];if(typeof g=="function"&&(p=g(p,f)),h==="v"){if(n===1)return;p=n}h=="pr"&&p===1||(l&&h==="ts"&&!Xe(p)&&(p=Date.now()),z0e(p)&&(Y0e(h)&&typeof p=="string"&&(p=new G5(p)),t[h]=p))}),t}function aye(r,e={}){const t={};if(!r)return t;const n=Z5(r,e),i=K0e(n,e?.customHeaderMap);return Object.entries(i).reduce((a,[s,o])=>{const l=q5(o,{whitespace:!1});return l&&(a[s]=l),a},t)}function sye(r,e,t){return zt(r,aye(e,t))}const oye="CMCD";function lye(r,e={}){return r?q5(Z5(r,e),{whitespace:!1}):""}function uye(r,e={}){if(!r)return"";const t=lye(r,e);return encodeURIComponent(t)}function cye(r,e={}){if(!r)return"";const t=uye(r,e);return`${oye}=${t}`}const KF=/CMCD=[^&#]+/;function fye(r,e,t){const n=cye(e,t);if(!n)return r;if(KF.test(r))return r.replace(KF,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class dye{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:qn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:s}=i,o=this.hls.levels[a.level],l=this.getObjectType(a),c={d:(s||a).duration*1e3,ot:l};(l===qn.VIDEO||l===qn.AUDIO||l==qn.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const f=s?this.getNextPart(s):this.getNextFrag(a);f!=null&&f.url&&f.url!==a.url&&(c.nor=f.url),this.apply(i,c)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHED,this.onMediaDetached,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHED,this.onMediaDetached,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:b0e.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){zt(t,this.createData());const n=t.ot===qn.INIT||t.ot===qn.VIDEO||t.ot===qn.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((s,o)=>(i.includes(o)&&(s[o]=t[o]),s),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),sye(e.headers,t,a)):e.url=fye(e.url,t,a)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t;const{index:n,fragment:i}=e,a=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(a){const{sn:s}=i;for(let o=a.length-1;o>=0;o--){const l=a[o];if(l.index===n&&l.fragment.sn===s)return a[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return qn.TIMED_TEXT;if(e.sn==="initSegment")return qn.INIT;if(t==="audio")return qn.AUDIO;if(t==="main")return this.hls.audioTracks.length?qn.VIDEO:qn.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===qn.AUDIO)n=i.audioTracks;else{const a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;n=i.levels.slice(0,s)}return n.forEach(a=>{a.bitrate>t&&(t=a.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===qn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:pt.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){t(a),this.loader.load(a,s,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){t(a),this.loader.load(a,s,o)}}}}const hye=3e5;class pye extends Qi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===ln.SendAlternateToPenaltyBox&&n.flags===hi.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,s=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&i?s=this.getPathwayForGroupId(o,c,s):l&&(s=l)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),n.resolved=this.pathwayId!==s),t.details===we.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Xt(a)} penalized: ${Xt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(a=>{i-n[a]>hye&&delete n[a]});for(let a=0;a<e.length;a++){const s=e[a];if(s in n)continue;if(s===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(s),t.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,v5(t),this.hls.trigger(U.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(t===St.AUDIO_TRACK&&i[a].hasAudioGroup(e)||t===St.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(a=>{const{ID:s,"BASE-ID":o,"URI-REPLACEMENT":l}=a;if(t.some(f=>f.pathwayId===s))return;const c=this.getLevelsForPathway(o).map(f=>{const h=new fr(f.attrs);h["PATHWAY-ID"]=s;const p=h.AUDIO&&`${h.AUDIO}_clone_${s}`,g=h.SUBTITLES&&`${h.SUBTITLES}_clone_${s}`;p&&(n[h.AUDIO]=p,h.AUDIO=p),g&&(i[h.SUBTITLES]=g,h.SUBTITLES=g);const y=J5(f.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),b=new Yd({attrs:h,audioCodec:f.audioCodec,bitrate:f.bitrate,height:f.height,name:f.name,url:y,videoCodec:f.videoCodec,width:f.width});if(f.audioGroups)for(let v=1;v<f.audioGroups.length;v++)b.addGroupId("audio",`${f.audioGroups[v]}_clone_${s}`);if(f.subtitleGroups)for(let v=1;v<f.subtitleGroups.length;v++)b.addGroupId("text",`${f.subtitleGroups[v]}_clone_${s}`);return b});t.push(...c),YF(this.audioTracks,n,l,s),YF(this.subtitleTracks,i,l,s)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const f=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+f)}const a={responseType:"json",url:i.href},s=t.steeringManifestLoadPolicy.default,o=s.errorRetry||s.timeoutRetry||{},l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(f,h,p,g)=>{this.log(`Loaded steering manifest: "${i}"`);const y=f.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":b,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":E}=y;if(b)try{this.uri=new self.URL(b,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||p.url),v&&this.clonePathways(v);const S={steeringManifest:y,url:i.toString()};this.hls.trigger(U.STEERING_MANIFEST_LOADED,S),E&&this.updatePathwayPriority(E)},onError:(f,h,p,g)=>{if(this.log(`Error loading steering manifest: ${f.code} ${f.text} (${h.url})`),this.stopLoad(),f.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let y=this.timeToLoad*1e3;if(f.code===429){const b=this.loader;if(typeof b?.getResponseHeader=="function"){const v=b.getResponseHeader("Retry-After");v&&(y=parseFloat(v)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,y)},onTimeout:(f,h,p)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function YF(r,e,t,n){r&&Object.keys(e).forEach(i=>{const a=r.filter(s=>s.groupId===i).map(s=>{const o=zt({},s);return o.details=void 0,o.attrs=new fr(o.attrs),o.url=o.attrs.URI=J5(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...a)})}function J5(r,e,t,n){const{HOST:i,PARAMS:a,[t]:s}=n;let o;e&&(o=s?.[e],o&&(r=o));const l=new self.URL(r);return i&&!o&&(l.host=i),a&&Object.keys(a).sort().forEach(c=>{c&&l.searchParams.set(c,a[c])}),l.href}class xc extends Qi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=xc.CDMCleanupPromise?[xc.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,a=`"${t.type}" event: init data type: "${n}"`;if(this.debug(a),i!==null){if(!this.keyFormatPromise){let s=Object.keys(this.keySystemAccessPromises);s.length||(s=pd(this.config));const o=s.map(eE).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(s=>{const o=mg(s);if(n!=="sinf"||o!==dr.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let l;try{const g=Br(new Uint8Array(i)),y=vD(JSON.parse(g).sinf),b=q8(y);if(!b)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(b.subarray(8,24))}catch(g){this.warn(`${a} Failed to parse sinf: ${g}`);return}const c=un(l),{keyIdToKeySessionPromise:f,mediaKeySessions:h}=this;let p=f[c];for(let g=0;g<h.length;g++){const y=h[g],b=y.decryptdata;if(!b.keyId)continue;const v=un(b.keyId);if(k0(l,b.keyId)||b.uri.replace(/-/g,"").indexOf(c)!==-1){if(p=f[v],!p)continue;if(b.pssh)break;delete f[v],b.pssh=new Uint8Array(i),b.keyId=l,p=f[c]=p.then(()=>this.generateRequestWithPreferredKeySession(y,n,i,"encrypted-event-key-match")),p.catch(E=>this.handleError(E));break}}p||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${h.length}.`))}).catch(s=>this.handleError(s))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(U.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(U.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(U.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(U.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t?.[e];if(i)return i.licenseUrl;if(e===dr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(s,o,l)=>!!s&&l.indexOf(s)===o,i=t.map(s=>s.audioCodec).filter(n),a=t.map(s=>s.videoCodec).filter(n);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((s,o)=>{const l=c=>{const f=c.shift();this.getMediaKeysPromise(f,i,a).then(h=>s({keySystem:f,mediaKeys:h})).catch(h=>{c.length?l(c):h instanceof fi?o(h):o(new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return c5===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){var i;const a=Wme(e,t,n,this.config.drmSystemOptions||{});let s=this.keySystemAccessPromises[e],o=(i=s)==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Xt(a)}`),o=this.requestMediaKeySystemAccess(e,a);const l=s=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const f=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const h=l.mediaKeys=c.createMediaKeys().then(p=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,f.then(g=>g?this.setMediaKeysServerCertificate(p,e,g):p)));return h.catch(p=>{this.error(`Failed to create media-keys for "${e}"}: ${p}`)}),h})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${un(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),a={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=Em(t),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,a,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${un(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>eE(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=eE(i);a?t(a):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=pd(this.config),n=e.map(mg).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const i=mye(e,t[n]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,n=Em(t),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(t)==="internal-error"){const o=zF(i||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const a=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${a}`);const s=this.keyIdToKeySessionPromise[n];if(!s){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${a}`),this.attemptSetMediaKeys(l,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:t}))))).then(l=>{const c="cenc",f=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,c,f,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return s.catch(o=>{if(o instanceof fi){const l=Ut({},o.data);this.getKeyStatus(t)==="internal-error"&&(l.decryptdata=t);const c=new fi(l,o.message);this.handleError(c,e.frag)}}),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof fi){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${un(n.keyId||[])})`:""}`),this.hls.trigger(U.ERROR,e.data)}else this.error(e.message),this.hls.trigger(U.ERROR,{type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Em(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=mg(e.keyFormat),a=i?[i]:pd(this.config);return this.attemptKeySystemAccess(a)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=pd(this.config)),e.length===0)throw new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Xt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((a,s)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return s(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(a).catch(s)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>n.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var a;const s=(a=this.config.drmSystems)==null||(a=a[e.keySystem])==null?void 0:a.generateRequest;if(s)try{const y=s.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=y.initData?y.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const o=Em(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${o} URI: ${l} (init data type: ${t} length: ${n.byteLength})`);const c=new xD,f=e._onmessage=y=>{const b=e.mediaKeysSession;if(!b){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:E}=y;this.log(`"${v}" message event for session "${b.sessionId}" message size: ${E.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,E).catch(S=>{c.eventNames().length?c.emit("error",S):this.handleError(S)}):v==="license-release"?e.keySystem===dr.FAIRPLAY&&this.updateKeySession(e,MT("acknowledged")).then(()=>this.removeSession(e)).catch(S=>this.handleError(S)):this.warn(`unhandled media key message type "${v}"`)},h=(y,b)=>{b.keyStatus=y;let v;y.startsWith("usable")?c.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?v=zF(y,b.decryptdata):y==="expired"?v=new Error(`key expired (keyId: ${o})`):y==="released"?v=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${o})`),v&&(c.eventNames().length?c.emit("error",v):this.handleError(v))},p=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const v=this.getKeyStatuses(e);if(!Object.keys(v).some(A=>v[A]!=="status-pending"))return;if(v[o]==="expired"){this.log(`Expired key ${Xt(v)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let S=v[o];if(S)h(S,e);else{var w;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(w=e.keyStatusTimeouts)[o]||(w[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const T=this.getKeyStatus(e.decryptdata);if(T&&T!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${T} from other session.`),h(T,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),S="internal-error",h(S,e)},1e3)),this.log(`No status for keyId ${o} (${Xt(v)}).`)}};Rn(e.mediaKeysSession,"message",f),Rn(e.mediaKeysSession,"keystatuseschange",p);const g=new Promise((y,b)=>{c.on("error",b),c.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(y=>{throw new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>g).catch(y=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const o=i;i=n,n=o}const a="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===dr.PLAYREADY&&a.length===16){const o=un(a);t[o]=n,l5(a)}const s=un(a);n==="internal-error"&&(this.bannedKeyIds[s]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${s} key-session "${e.mediaKeysSession.sessionId}"`),t[s]=n}),t}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,o)=>{const l={responseType:"arraybuffer",url:a},c=t.certLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{s(p.data)},onError:(p,g,y,b)=>{o(new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Ut({url:l.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,g,y)=>{o(new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,g,y)=>{o(new Error("aborted"))}};i.load(l,f,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,a)=>{e.setServerCertificate(n).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),i(e)}).catch(s=>{a(new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let f;for(let h=0,p=a.length;h<p;h++){var s,o;f=a[h];const g=(s=f.querySelector("name"))==null?void 0:s.textContent,y=(o=f.querySelector("value"))==null?void 0:o.textContent;g&&y&&e.setRequestHeader(g,y)}}const l=i.querySelector("Challenge"),c=l?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return MT(atob(c))}setupLicenseXHR(e,t,n,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,t,n,i)}).catch(s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),a.call(this.hls,e,t,n,i)}).then(s=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,s,e)}catch(f){this.error(f)}i(l)}else{const l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)a(new fi({type:at.KEY_SYSTEM_ERROR,details:we.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${s}). Status: ${o.status} (${o.statusText})`));else{const f=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${f} attempts left`),this.requestLicense(e,t).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,s,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==dr.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)}).catch(a)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Rn(n,"encrypted",this.onMediaEncrypted),Rn(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Zn(e,"encrypted",this.onMediaEncrypted),Zn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,zo.clearKeyUriToKeyIdMap();const a=i.length;xc.CDMCleanupPromise=Promise.all(i.map(s=>this.removeSession(s)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(s=>{this.log(`Could not clear media keys: ${s}`),this.hls&&this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))||Promise.resolve())).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`),this.hls&&this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})}).then(()=>{a&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${un(i?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const a=this.mediaKeySessions.indexOf(e);a>-1&&this.mediaKeySessions.splice(a,1);const{keyStatusTimeouts:s}=e;s&&Object.keys(s).forEach(c=>self.clearTimeout(s[c]));const{drmSystemOptions:o}=this.config;return(Qme(o)?new Promise((c,f)=>{self.setTimeout(()=>f(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(f)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}xc.CDMCleanupPromise=void 0;function Em(r){if(!r)throw new Error("Could not read keyId of undefined decryptdata");if(r.keyId===null)throw new Error("keyId is null");return un(r.keyId)}function mye(r,e){if(r.keyId&&e.mediaKeysSession.keyStatuses.has(r.keyId))return e.mediaKeysSession.keyStatuses.get(r.keyId);if(r.matches(e.decryptdata))return e.keyStatus}class fi extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function zF(r,e){const t=r==="output-restricted",n=t?we.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:we.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new fi({type:at.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${r}"`)}class gye{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(U.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(U.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const a=i-this.lastTime,s=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*s/a,c=this.hls;if(c.trigger(U.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:n}),l>0&&s>c.config.fpsDroppedMonitoringThreshold*o){let f=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=f)&&(f=f-1,c.trigger(U.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:c.currentLevel}),c.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function eH(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function tH(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){$t.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){$t.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function dc(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues)for(let n=r.cues.length;n--;)e&&r.cues[n].removeEventListener("enter",e),r.removeCue(r.cues[n]);t==="disabled"&&(r.mode=t)}function KT(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const a=vye(r.cues,e,t);for(let s=0;s<a.length;s++)(!n||n(a[s]))&&r.removeCue(a[s])}i==="disabled"&&(r.mode=i)}function yye(r,e){if(e<=r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t,a;for(;n<=i;)if(a=Math.floor((i+n)/2),e<r[a].startTime)i=a-1;else if(e>r[a].startTime&&n<t)n=a+1;else return a;return r[n].startTime-e<e-r[i].startTime?n:i}function vye(r,e,t){const n=[],i=yye(r,e);if(i>-1)for(let a=i,s=r.length;a<s;a++){const o=r[a];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function bg(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class bye extends DD{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=bg(this.media.textTracks);for(let a=0;a<n.length;a++)if(n[a].mode==="hidden")t=n[a];else if(n[a].mode==="showing"){t=n[a];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(U.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;bg(n.textTracks).forEach(s=>{dc(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:a}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${s?.groupId}`);return}const o=s.details;s.details=t.details,this.log(`Subtitle track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(s=>i?.indexOf(s)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(f=>f.default)&&(this.selectDefaultTrack=!1),s.forEach((f,h)=>{f.id=h});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const f=La(o,s);if(f>-1)a=s[f];else{const h=La(o,this.tracks);a=this.tracks[h]}}let l=this.findTrackId(a);l===-1&&a&&(l=this.findTrackId(null));const c={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(U.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const a=t[i];if(!(n&&!a.default||!n&&!e)&&(!e||Wl(a,e)))return i}if(e){for(let i=0;i<t.length;i++){const a=t[i];if(Vd(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const a=t[i];if(Vd(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(jT(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===St.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Wl(e,n))return n;const i=La(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(n)return null;{const a=La(e,t);if(a>-1)return t[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,t),s=e.details,o=s?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(U.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=bg(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(a=>jT(n,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(U.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:l,type:c,url:f}=i;this.hls.trigger(U.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:l,type:c,url:f});const h=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(h)}}function xye(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?a:a&3|8).toString(16)})}}}function xd(r){let e=5381,t=r.length;for(;t;)e=e*33^r.charCodeAt(--t);return(e>>>0).toString()}const Sc=.025;let B0=(function(r){return r[r.Point=0]="Point",r[r.Range=1]="Range",r})({});function Sye(r,e,t){return`${r.identifier}-${t+1}-${xd(e)}`}class Eye{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return uE(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=uE(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Xe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return uE(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Sc))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?B0.Range:B0.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return wye(this)}}function uE(r,e){return r-e.start<e.duration/2&&!(Math.abs(r-(e.start+e.duration))<Sc)?e.start:e.start+e.duration}function rH(r,e,t){const n=new self.URL(r,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function cE(r,e){for(;(t=r.assetList[++e])!=null&&t.error;)var t;return e}function wye(r){return`["${r.identifier}" ${r.cue.pre?"<pre>":r.cue.post?"<post>":""}${r.timelineStart.toFixed(2)}-${r.resumeTime.toFixed(2)}]`}function uc(r){const e=r.timelineStart,t=r.duration||0;return`["${r.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class _ye{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(U.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(t);this.interstitial=n,this.assetItem=i;const s=()=>{this.hasDetails=!0};a.once(U.LEVEL_LOADED,s),a.once(U.AUDIO_TRACK_LOADED,s),a.once(U.SUBTITLE_TRACK_LOADED,s),a.on(U.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(U.BUFFER_APPENDED,()=>{const f=this.bufferedEnd;this.reachedPlayout(f)&&(this._bufferedEosTime=f,a.trigger(U.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=rH(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,a=pt.bufferInfo(e,i,0);return this.getAssetTime(a.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=pt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,n){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,n){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${uc(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const qF=.033;class Tye extends Qi{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(a=i[n])!=null&&a.event;){var a;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let a=n[i];if(t&&t!=="primary"&&(a=a[t]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const a=n[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let a=0;a<i;a++){const s=n[a];if(!s.error){const o=s.timelineStart;if(t===o||t>o&&(t<o+(s.duration||0)||a===i-1))return a}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,a=this.events,s=this.parseDateRanges(i,{url:n.url},t),o=Object.keys(i),l=a?a.filter(c=>!o.includes(c.identifier)):[];s.length&&s.sort((c,f)=>{const h=c.cue.pre,p=c.cue.post,g=f.cue.pre,y=f.cue.post;if(h&&!g)return-1;if(g&&!h||p&&!y)return 1;if(y&&!p)return-1;if(!h&&!g&&!p&&!y){const b=c.startTime,v=f.startTime;if(b!==v)return b-v}return c.dateRange.tagOrder-f.dateRange.tagOrder}),this.events=s,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,t=[],n=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const a=this.items,s=this.parseSchedule(i,e);(n||t.length||a?.length!==s.length||s.some((l,c)=>Math.abs(l.playout.start-a[c].playout.start)>.005||Math.abs(l.playout.end-a[c].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(t,a))}}parseDateRanges(e,t,n){const i=[],a=Object.keys(e);for(let s=0;s<a.length;s++){const o=a[s],l=e[o];if(l.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(l):(c=new Eye(l,t),this.eventMap[o]=c,n===!1&&(c.appendInPlace=n)),i.push(c)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,a=i.live?1/0:i.edge;let s=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,c=0;if(e.forEach((f,h)=>{const p=f.cue.pre,g=f.cue.post,y=e[h-1]||null,b=f.appendInPlace,v=g?a:f.startOffset,E=f.duration,S=f.timelineOccupancy===B0.Range?E:0,w=f.resumptionOffset,A=y?.startTime===v,T=v+f.cumulativeDuration;let I=b?T+E:v+w;if(p||!g&&v<=0){const P=c;c+=S,f.timelineStart=T;const k=s;s+=E,n.push({event:f,start:T,end:I,playout:{start:k,end:s},integrated:{start:P,end:c}})}else if(v<=a){if(!A){const M=v-l;if(M>qF){const B=l,C=c;c+=M;const W=s;s+=M;const Y={previousEvent:e[h-1]||null,nextEvent:f,start:B,end:B+M,playout:{start:W,end:s},integrated:{start:C,end:c}};n.push(Y)}else M>0&&y&&(y.cumulativeDuration+=M,n[n.length-1].end=v)}g&&(I=T),f.timelineStart=T;const P=c;c+=S;const k=s;s+=E,n.push({event:f,start:T,end:I,playout:{start:k,end:s},integrated:{start:P,end:c}})}else return;const D=f.resumeTime;g||D>a?l=a:l=D}),l<a){var o;const f=l,h=c,p=a-l;c+=p;const g=s;s+=p,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:f+p,playout:{start:g,end:s},integrated:{start:h,end:c}})}this.setDurations(a,s,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let a=0,s=-1;e.forEach((o,l)=>{const c=o.cue.pre,f=o.cue.post,h=c?0:f?i:o.startTime;this.updateAssetDurations(o),s===h?o.cumulativeDuration=a:(a=0,s=h),!f&&o.snapOptions.in&&(o.resumeAnchor=ru(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<qF&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const g=Xe(o.resumeOffset)?o.resumeOffset:o.duration;a+=g})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>Sc?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(s=>{const o=t[s].details,l=o.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${s} playlist end ${l}`),!1;const c=ru(null,o.fragments,n);if(!c)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const f=s==="audio"?.175:0;return Math.abs(c.start-n)<Sc+f||Math.abs(c.end-n)<Sc+f?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${s} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,a=!1;for(let s=0;s<e.assetList.length;s++){const o=e.assetList[s],l=t+n;o.startOffset=n,o.timelineStart=l,i||(i=o.duration===null),a||(a=!!o.error);const c=o.error?0:o.duration||0;n+=c}i&&!a?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function ea(r){return`[${r.event?'"'+r.event.identifier+'"':"primary"}: ${r.start.toFixed(2)}-${r.end.toFixed(2)}]`}class Aye{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=rH(n,this.hls.sessionId,e.baseUrl)}catch(p){const g=this.assignAssetListError(e,we.ASSET_LIST_LOAD_ERROR,p,n);this.hls.trigger(U.ERROR,g);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const a=this.hls.config,s=a.loader,o=new s(a),l={responseType:"json",url:i.href},c=a.interstitialAssetListLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{const v=p.data,E=v?.ASSETS;if(!Array.isArray(E)){const S=this.assignAssetListError(e,we.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,g,b);this.hls.trigger(U.ERROR,S);return}e.assetListResponse=v,this.hls.trigger(U.ASSET_LIST_LOADED,{event:e,assetListResponse:v,networkDetails:b})},onError:(p,g,y,b)=>{const v=this.assignAssetListError(e,we.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${g.url})`),g.url,b,y);this.hls.trigger(U.ERROR,v)},onTimeout:(p,g,y)=>{const b=this.assignAssetListError(e,we.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${g.url})`),g.url,p,y);this.hls.trigger(U.ERROR,b)}};return o.load(l,f,h),this.hls.trigger(U.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,n,i,a,s){return e.error=n,{type:at.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:s,stats:a}}}function WF(r){var e;r==null||(e=r.play())==null||e.catch(()=>{})}function wm(r,e){return`[${r}] Advancing timeline position to ${e}`}class Dye extends Qi{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),s&&n<o.start||n>=o.end){var l;const g=this.findItemIndex(o);let y=this.schedule.findItemIndexAtTime(n);if(y===-1&&(y=g+(s?-1:1),this.log(`seeked ${s?"back ":""}to position not covered by schedule ${n} (resolving from ${g} to ${y})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!s&&y>g){const b=this.schedule.findJumpRestrictedIndex(g+1,y);if(b>g){this.setSchedulePosition(b);return}}this.setSchedulePosition(y);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const g=o.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,g))}return}const f=c.timelineStart,h=c.duration||0;if(s&&n<f||n>=f+h){var p;(p=o.event)!=null&&p.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,c)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const s=a.timelineStart+(a.duration||0);n>=s&&this.setScheduleToAssetAtTime(n,a)},this.onScheduleUpdate=(n,i)=>{const a=this.schedule;if(!a)return;const s=this.playingItem,o=a.events||[],l=a.items||[],c=a.durations,f=n.map(b=>b.identifier),h=!!(o.length||f.length);(h||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(b=>ea(b))} pos: ${this.timelinePos}`),f.length&&this.log(`Removed events ${f}`);let p=null,g=null;s&&(p=this.updateItem(s,this.timelinePos),this.itemsMatch(s,p)?this.playingItem=p:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(g=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,g)?this.bufferingItem=g:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),n.forEach(b=>{b.assetList.forEach(v=>{this.clearAssetPlayer(v.identifier,null)})}),this.playerQueue.forEach(b=>{if(b.interstitial.appendInPlace){const v=b.assetItem.timelineStart,E=b.timelineOffset-v;if(E)try{b.timelineOffset=v}catch(S){Math.abs(E)>Sc&&this.warn(`${S} ("${b.assetId}" ${b.timelineOffset}->${v})`)}}}),h||i){if(this.hls.trigger(U.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:c,removedIds:f}),this.isInterstitial(s)&&f.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}s&&this.trimInPlace(p,s),y&&g!==p&&this.trimInPlace(g,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Aye(e),this.schedule=new Tye(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(U.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(U.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(U.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(U.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(U.BUFFER_APPENDED,this.onBufferAppended,this),e.on(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(U.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(U.MEDIA_ENDED,this.onMediaEnded,this),e.on(U.ERROR,this.onError,this),e.on(U.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(U.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(U.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(U.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(U.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(U.BUFFER_CODECS,this.onBufferCodecs,this),e.off(U.BUFFER_APPENDED,this.onBufferAppended,this),e.off(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(U.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(U.MEDIA_ENDED,this.onMediaEnded,this),e.off(U.ERROR,this.onError,this),e.off(U.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Zn(e,"play",this.onPlay),Zn(e,"pause",this.onPause),Zn(e,"seeking",this.onSeeking),Zn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Rn(n,"seeking",this.onSeeking),Rn(n,"timeupdate",this.onTimeupdate),Rn(n,"play",this.onPlay),Rn(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(n);this.setSchedulePosition(a)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.log(`Removing schedule state for detachedData and ${a}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=h=>h&&e.getAssetPlayer(h.identifier),i=(h,p,g,y,b)=>{if(h){let v=h[p].start;const E=h.event;if(E){if(p==="playout"||E.timelineOccupancy!==B0.Point){const S=n(g);S?.interstitial===E&&(v+=S.assetItem.startOffset+S[b])}}else{const S=y==="bufferedPos"?s():e[y];v+=S-h.start}return v}return 0},a=(h,p)=>{var g;if(h!==0&&p!=="primary"&&(g=e.schedule)!=null&&g.length){var y;const b=e.schedule.findItemIndexAtTime(h),v=(y=e.schedule.items)==null?void 0:y[b];if(v){const E=v[p].start-v.start;return h+E}}return h},s=()=>{const h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var p,g;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:((g=e.schedule)==null?void 0:g.durations[h])||0},l=(h,p)=>{var g,y;const b=e.effectivePlayingItem;if(b!=null&&(g=b.event)!=null&&g.restrictions.skip||!e.schedule)return;e.log(`seek to ${h} "${p}"`);const v=e.effectivePlayingItem,E=e.schedule.findItemIndexAtTime(h,p),S=(y=e.schedule.items)==null?void 0:y[E],w=e.getBufferingPlayer(),A=w?.interstitial,T=A?.appendInPlace,I=v&&e.itemsMatch(v,S);if(v&&(T||I)){const D=n(e.playingAsset),P=D?.media||e.primaryMedia;if(P){const k=p==="primary"?P.currentTime:i(v,p,e.playingAsset,"timelinePos","currentTime"),M=h-k,B=(T?k:P.currentTime)+M;if(B>=0&&(!D||T||B<=D.duration)){P.currentTime=B;return}}}if(S){let D=h;if(p!=="primary"){const k=S[p].start,M=h-k;D=S.start+M}const P=!e.isInterstitial(S);if((!e.isInterstitial(v)||v.event.appendInPlace)&&(P||S.event.appendInPlace)){const k=e.media||(T?w?.media:null);k&&(k.currentTime=D)}else if(v){const k=e.findItemIndex(v);if(E>k){const B=e.schedule.findJumpRestrictedIndex(k+1,E);if(B>k){e.setSchedulePosition(B);return}}let M=0;if(P)e.timelinePos=D,e.checkBuffer();else{const B=S.event.assetList,C=h-(S[p]||S).start;for(let W=B.length;W--;){const Y=B[W];if(Y.duration&&C>=Y.startOffset&&C<Y.startOffset+Y.duration){M=W;break}}}e.setSchedulePosition(E,M)}}},c=()=>{const h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;const p=t();return e.isInterstitial(p)?p:null},f={get bufferedEnd(){const h=t(),p=e.bufferingItem;if(p&&p===h){var g;return i(p,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-p.playout.start||((g=e.bufferingAsset)==null?void 0:g.startOffset)||0}return 0},get currentTime(){const h=c(),p=e.effectivePlayingItem;return p&&p===h?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(h){const p=c(),g=e.effectivePlayingItem;g&&g===p&&l(h+g.playout.start,"playout")},get duration(){const h=c();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;const p=(h=c())==null?void 0:h.event.assetList;return p?p.map(g=>e.getAssetPlayer(g.identifier)):[]},get playingIndex(){var h;const p=(h=c())==null?void 0:h.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var h;return((h=e.schedule)==null||(h=h.events)==null?void 0:h.slice(0))||[]},get schedule(){var h;return((h=e.schedule)==null||(h=h.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return c()?f:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const h=t();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return s()},get currentTime(){const h=e.timelinePos;return h>0?h:0},set currentTime(h){l(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){l(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return a(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{const h=e.effectivePlayingItem,p=h?.event;if(p&&!p.restrictions.skip){const g=e.findItemIndex(h);if(p.appendInPlace){const y=h.playout.start+h.event.duration;l(y+.001,"playout")}else e.advanceAfterAssetEnded(p,g,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const a=(t=i)==null?void 0:t.currentTime;if(!(a===void 0||!Xe(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Xt(a)}`),this.detachedData=a}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let a=null;const s=this.hls,o=e!==s,l=o&&e.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource;let f;if(s.media)l&&(a=s.transferMedia(),this.detachedData=a),f="Primary";else if(c){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),f=`${y}`):f="detached MediaSource"}else f="detached media";if(!a){if(c)a=this.detachedData,this.log(`using detachedData: MediaSource ${Xt(a)}`);else if(!this.detachedData||s.media===t){const y=this.playerQueue;y.length>1&&y.forEach(b=>{if(o&&b.interstitial.appendInPlace!==l){const v=b.interstitial;this.clearInterstitial(b.interstitial,null),v.appendInPlace=!1,v.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${v}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const h=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",p=h&&a?a:t;this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${f} (media.currentTime: ${t.currentTime})`);const g=this.schedule;if(p===a&&g){const y=o&&e.assetId===g.assetIdAtEnd;p.overrides={duration:g.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const a=this.hls.startPosition;if(this.log(wm("checkStart",a)),this.timelinePos=a,t.length&&t[0].cue.pre){const s=e.findEventIndex(t[0].identifier);this.setSchedulePosition(s)}else if(a>=0||!this.primaryLive){const s=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAssetBuffering(e,t){const n=e.event,i=n.findAssetIndex(t),a=cE(n,i);if(!n.isAssetPastPlayoutLimit(a))this.bufferedToEvent(e,a);else if(this.schedule){var s;const o=(s=this.schedule.items)==null?void 0:s[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,n){const i=cE(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const a=this.schedule.items;if(a){const s=t+1,o=a.length;if(s>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(wm("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(s)}}}else{if(e.appendInPlace){const a=e.assetList[i];a&&this.advanceInPlace(a.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const i=t.parentIdentifier,a=n.getEvent(i);if(a){const s=n.findEventIndex(i),o=n.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,s,o-1)}}setSchedulePosition(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const a=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${a&&ea(a)}) pos: ${this.timelinePos}`);const s=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(s)){const f=s.event,h=this.playingAsset,p=h?.identifier,g=p?this.getAssetPlayer(p):null;if(g&&p&&(!this.eventItemsMatch(s,a)||t!==void 0&&p!==f.assetList[t].identifier)){var l;const y=f.findAssetIndex(h);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${f.assetList.length} ${uc(h)}`),this.endedAsset=h,this.playingAsset=null,this.hls.trigger(U.INTERSTITIAL_ASSET_ENDED,{asset:h,assetListIndex:y,event:f,schedule:i.slice(0),scheduleIndex:e,player:g}),s!==this.playingItem){this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(f,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(p,a),g.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(s,a)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${f} ${ea(s)}`),f.hasPlayed=!0,this.hls.trigger(U.INTERSTITIAL_ENDED,{event:f,schedule:i.slice(0),scheduleIndex:e}),f.cue.once)){var c;this.updateSchedule();const y=(c=this.schedule)==null?void 0:c.items;if(a&&y){const b=this.findItemIndex(a);this.advanceSchedule(b,y,t,s,o)}return}}this.advanceSchedule(e,i,t,s,o)}advanceSchedule(e,t,n,i,a){const s=this.schedule;if(!s)return;const o=t[e]||null,l=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(f=>{const h=f.interstitial,p=s.findEventIndex(h.identifier);(p<e||p>e+1)&&this.clearInterstitial(h,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const f=o.event;if(n===void 0){n=s.findAssetIndex(f,this.timelinePos);const y=cE(f,n-1);if(f.isAssetPastPlayoutLimit(y)||f.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(f,e,n);return}n=y}const h=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let p=this.preloadAssets(f,n);if(this.eventItemsMatch(o,h||i)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${ea(o)} ${f.appendInPlace?"append in place":""}`),this.hls.trigger(U.INTERSTITIAL_STARTED,{event:f,schedule:t.slice(0),scheduleIndex:e})),!f.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${f}`);return}if(f.assetListLoader&&(f.assetListLoader.destroy(),f.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${f}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const g=f.assetList[n];if(!g){this.advanceAfterAssetEnded(f,e,n||0);return}if(p||(p=this.getAssetPlayer(g.identifier)),p===null||p.destroyed){const y=f.assetList.length;this.warn(`asset ${n+1}/${y} player destroyed ${f}`),p=this.createAssetPlayer(f,g,n),p.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&f.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(p,n,t,e,l),this.shouldPlay&&WF(p.media)}else o?(this.resumePrimary(o,e,i),this.shouldPlay&&WF(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i,a;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${ea(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(wm("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const s=(a=this.schedule)==null?void 0:a.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ea(e)}`),this.hls.trigger(U.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:pt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(wm("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(U.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(U.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const i=Ut(Ut({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Ut(Ut({},this.altSelection),{},{audio:n});return}const a=Ut(Ut({},i),{},{audio:n});this.mediaSelection=a}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=Ut(Ut({},this.altSelection),{},{subtitles:n});return}const a=Ut(Ut({},i),{},{subtitles:n});this.mediaSelection=a}onAudioTrackSwitching(e,t){const n=nF(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=nF(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const a=t[i];if(a.cue.post){var n;const s=this.schedule.findEventIndex(a.identifier),o=(n=this.schedule.items)==null?void 0:n[s];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const a=this.findItemIndex(e,t);return i[a]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((a,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(a.identifier,null)});const n=e.end+.25,i=pt.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${ea(e)} (was ${ea(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const i=pt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,t,n){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],a)){this.bufferedPos=e;return}const s=this.playingItem,o=this.findItemIndex(s);let l=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const f=this.findItemIndex(a),h=Math.min(f+1,t.length-1),p=t[h];if((l===-1&&a&&e>=a.end||(c=p.event)!=null&&c.appendInPlace&&e+.01>=p.start)&&(l=h),this.isInterstitial(a)){const g=a.event;if(h-o>1&&g.appendInPlace===!1||g.assetList.length===0&&g.assetListLoader)return}if(this.bufferedPos=e,l>f&&l>o)this.bufferedToItem(p);else{const g=this.primaryDetails;this.primaryLive&&g&&e>g.edge-g.targetduration&&p.start<g.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(p)&&this.preloadAssets(p.event,0)}}else n&&s&&!this.itemsMatch(s,a)&&(l===o?this.bufferedToItem(s):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:i,events:a}=n;if(!i||!a)return t;const s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ea(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const c=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((f,h)=>{const p=this.getAssetPlayer(f.identifier);p&&(h===c&&p.loadSource(),p.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(U.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,a=n.cue.once;if(i||!a){const s=this.preloadAssets(n,t);if(s!=null&&s.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(s,o)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,s=e.cue.once;if(a){const l=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,f=0;if(!this.playingItem&&this.primaryLive&&(f=this.hls.startPosition,f===-1&&(f=this.hls.liveSyncPosition||0)),f&&!(e.cue.pre||e.cue.post)){const p=f-l;p>0&&(c=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${c?` live-start: ${f} start-offset: ${c}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const h=this.assetListLoader.loadAssetList(e,c);h&&(e.assetListLoader=h)}else if(!s&&i){for(let c=t;c<i;c++){const f=e.assetList[c],h=this.getAssetPlayerQueueIndex(f.identifier);(h===-1||this.playerQueue[h].destroyed)&&!f.error&&this.createAssetPlayer(e,f,c)}const l=e.assetList[t];if(l){const c=this.getAssetPlayer(l.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(U.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,a,s){const o={parentIdentifier:e.identifier,identifier:Sye(e,s,t),duration:a,startOffset:n,timelineStart:i,uri:s};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,n){const i=this.hls,a=i.userConfig;let s=a.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(s||o)&&(s=zt({},s),o.videoCodec&&(s.videoCodec=o.videoCodec),o.videoRange&&(s.allowedVideoRanges=[o.videoRange]));const l=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack];let f=0;if(this.primaryLive||e.appendInPlace){const A=this.timelinePos-t.timelineStart;if(A>1){const T=t.duration;T&&A<T&&(f=A)}}const h=t.identifier,p=Ut(Ut({},a),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:f,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:l||a.audioPreference,subtitlePreference:c||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const g=p.cmcd;g!=null&&g.sessionId&&g.contentId&&(p.cmcd=zt({},g,{contentId:xd(t.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);const y=new _ye(this.HlsPlayerClass,p,e,t);this.playerQueue.push(y),e.assetList[n]=t;let b=!0;const v=A=>{if(A.live){var T;const P=new Error(`Interstitials MUST be VOD assets ${e}`),k={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:P},M=((T=this.schedule)==null?void 0:T.findEventIndex(e.identifier))||-1;this.handleAssetItemError(k,e,M,n,P.message);return}const I=A.edge-A.fragmentStart,D=t.duration;(b||D===null||I>D)&&(b=!1,this.log(`Interstitial asset "${h}" duration change ${D} > ${I}`),t.duration=I,this.updateSchedule())};y.on(U.LEVEL_UPDATED,(A,{details:T})=>v(T)),y.on(U.LEVEL_PTS_UPDATED,(A,{details:T})=>v(T)),y.on(U.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const E=(A,T)=>{const I=this.getAssetPlayer(h);if(I&&T.tracks){I.off(U.BUFFER_CODECS,E),I.tracks=T.tracks;const D=this.primaryMedia;this.bufferingAsset===I.assetItem&&D&&!I.media&&this.bufferAssetPlayer(I,D)}};y.on(U.BUFFER_CODECS,E);const S=()=>{var A;const T=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${T}`),!T||!this.schedule)return;const I=this.schedule.findEventIndex(e.identifier),D=(A=this.schedule.items)==null?void 0:A[I];this.isInterstitial(D)&&this.advanceAssetBuffering(D,t)};y.on(U.BUFFERED_TO_END,S);const w=A=>()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;this.shouldPlay=!0;const I=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,I,A)};return y.once(U.MEDIA_ENDED,w(n)),y.once(U.PLAYOUT_LIMIT_REACHED,w(1/0)),y.on(U.ERROR,(A,T)=>{if(!this.schedule)return;const I=this.getAssetPlayer(h);if(T.details===we.BUFFER_STALLED_ERROR){if(I!=null&&I.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(T,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${T.error} ${e}`)}),y.on(U.DESTROYING,()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;const T=new Error(`Asset player destroyed unexpectedly ${h}`),I={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:T};this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),n,T.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${uc(t)}`),this.hls.trigger(U.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${t&&ea(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,a){const{interstitial:s,assetItem:o,assetId:l}=e,c=s.assetList.length,f=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!f||f.identifier!==l)&&(f&&(this.clearAssetPlayer(f.identifier,n[i]),delete f.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${uc(o)}`),this.hls.trigger(U.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:s,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,t){var n,i;if(!this.schedule)return;const{interstitial:a,assetItem:s}=e,o=this.schedule.findEventIndex(a.identifier),l=(n=this.schedule.items)==null?void 0:n[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=s;const c=this.getBufferingPlayer();if(c===e)return;const f=a.appendInPlace;if(f&&c?.interstitial.appendInPlace===!1)return;const h=c?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(f&&s!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(h&&!B8(h,e.tracks)){const p=new Error(`Asset ${uc(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),g={fatal:!0,type:at.OTHER_ERROR,details:we.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},y=a.findAssetIndex(s);this.handleAssetItemError(g,a,o,y,p.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const i=n.currentTime,a=t.findAssetIndex(e,i),s=e.assetList[a];if(s){const o=this.getAssetPlayer(s.identifier);if(o){const l=o.currentTime||i-s.timelineStart,c=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+c} in ${o} ${e} (media.currentTime: ${i})`),l&&(c/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const f=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,f,a)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,i,a){if(e.details===we.BUFFER_STALLED_ERROR)return;const s=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&uc(s)} ${e.error}`),!this.schedule)return;const o=s?.identifier||"",l=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[l]||null,f=this.schedule.items,h=zt({},e,{fatal:!1,errorAction:vc(!0),asset:s,assetListIndex:i,event:t,schedule:f,scheduleIndex:n,player:c});if(this.hls.trigger(U.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const p=this.playingAsset,g=this.bufferingAsset,y=new Error(a);if(s&&(this.clearAssetPlayer(o,null),s.error=y),!t.assetList.some(b=>!b.error))t.error=y;else for(let b=i;b<t.assetList.length;b++)this.resetAssetPlayer(t.assetList[b].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):p&&p.identifier===o?this.advanceAfterAssetEnded(t,n,i):g&&g.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${ea(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const s=this.updateItem(n,i);this.itemsMatch(n,s)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const a=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(a)}onAssetListLoaded(e,t){var n,i;const a=t.event,s=a.identifier,o=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(s)))return;const l=a.timelineStart,c=a.duration;let f=0;o.forEach((b,v)=>{const E=parseFloat(b.DURATION);this.createAsset(a,v,f,l+f,E,b.URI),f+=E}),a.duration=f,this.log(`Loaded asset-list with duration: ${f} (was: ${c}) ${a}`);const h=this.waitingItem,p=h?.event.identifier===s;this.updateSchedule();const g=(i=this.bufferingItem)==null?void 0:i.event;if(p){var y;const b=this.schedule.findEventIndex(s),v=(y=this.schedule.items)==null?void 0:y[b];if(v){if(!this.playingItem&&this.timelinePos>v.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==b){a.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${a}`),this.log(a.error.message),this.updateSchedule(!0),this.primaryFallback(a);return}this.setBufferingItem(v)}this.setSchedulePosition(b)}else if(g?.identifier===s){const b=a.assetList[0];if(b){const v=this.getAssetPlayer(b.identifier);if(g.appendInPlace){const E=this.primaryMedia;v&&E&&this.bufferAssetPlayer(v,E)}else v&&v.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case we.ASSET_LIST_PARSING_ERROR:case we.ASSET_LIST_LOAD_ERROR:case we.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case we.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const VF=500;class Oye extends bD{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",et.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(U.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(U.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Ge.IDLE,this.setInterval(VF),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragContextChanged(n)||(_r(n)&&(this.fragPrevious=n),this.state=Ge.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s;const o=n.start;for(let c=0;c<a.length;c++)if(o>=a[c].start&&o<=a[c].end){s=a[c];break}const l=n.start+n.duration;s?s.end=l:(s={start:o,end:l},a.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;t.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(s=>{for(let o=0;o<s.length;){if(s[o].end<=a){s.shift();continue}else if(s[o].start<a)s[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,a,et.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===et.SUBTITLE&&(t.details===we.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ge.STOPPED&&(this.state=Ge.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&$5(this.levels,t)){this.levels=t.map(n=>new Yd(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new Yd(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,et.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Ge.STOPPED&&this.setInterval(VF)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:a}=this,{details:s,id:o}=t;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=a[o];if(o>=a.length||!l)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(s.live||(n=l.details)!=null&&n.live){if(s.deltaUpdateFailed)return;const h=this.mainDetails;if(!h){this.startFragRequested=!1;return}const p=h.fragments[0];if(!l.details)s.hasProgramDateTime&&h.hasProgramDateTime?(N0(s,h),c=s.fragmentStart):p&&(c=p.start,FT(s,c));else{var f;c=this.alignPlaylists(s,l.details,(f=this.levelLastLoaded)==null?void 0:f.details),c===0&&p&&(c=p.start,FT(s,c))}h&&!this.startFragRequested&&this.setStartPosition(h,c)}l.details=s,this.levelLastLoaded=l,o===i&&(this.hls.trigger(U.SUBTITLE_TRACK_UPDATED,{details:s,id:o,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===Ge.IDLE&&(ru(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&bc(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,yD(i.method)).catch(o=>{throw a.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();a.trigger(U.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:s,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=Ge.IDLE})}}doTick(){if(!this.media){this.state=Ge.IDLE;return}if(this.state===Ge.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,a=this.getLoadPosition(),s=pt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:o,len:l}=s,c=n.details,f=this.hls.maxBufferLength+c.levelTargetDuration;if(l>f)return;const h=c.fragments,p=h.length,g=c.edge;let y=null;const b=this.fragPrevious;if(o<g){const S=i.maxFragLookUpTolerance,w=o>g-S?0:S;y=ru(b,h,Math.max(h[0].start,o),w),!y&&b&&b.start<h[0].start&&(y=h[0])}else y=h[p-1];if(y=this.filterReplacedPrimary(y,n.details),!y)return;const v=y.sn-c.startSN,E=h[v-1];if(E&&E.cc===y.cc&&this.fragmentTracker.getState(E)===jr.NOT_LOADED&&(y=E),this.fragmentTracker.getState(y)===jr.NOT_LOADED){const S=this.mapToInitFragWhenRequired(y);S&&this.loadFragment(S,n,o)}}}loadFragment(e,t,n){_r(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Iye(this.tracksBuffered[this.currentTrackId]||[])}}class Iye{constructor(e){this.buffered=void 0;const t=(n,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const Cye={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},nH=r=>String.fromCharCode(Cye[r]||r),ra=15,gs=100,Rye={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Pye={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Lye={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},kye={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Mye=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Nye{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;$t.log(`${this.time} [${e}] ${n}`)}}}const Tl=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class iH{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Fye{constructor(){this.uchar=" ",this.penState=new iH}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Bye{constructor(e){this.chars=[],this.pos=0,this.currPenState=new iH,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<gs;t++)this.chars.push(new Fye);this.logger=e}equals(e){for(let t=0;t<gs;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<gs;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<gs;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>gs&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=gs)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=nH(e);if(this.pos>=gs){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<gs;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<gs;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class fE{constructor(e){this.rows=[],this.currRow=ra-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ra;t++)this.rows.push(new Bye(e));this.logger=e}reset(){for(let e=0;e<ra;e++)this.rows[e].clear();this.currRow=ra-1}equals(e){let t=!0;for(let n=0;n<ra;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<ra;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ra;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Xt(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<ra;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const o=s.rows[a].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(s.rows[a+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,s=Math.max(a-1,0);n.setCursor(e.indent),e.color=n.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Xt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let a=0;a<ra;a++){const s=this.rows[a].getTextString();s&&(i=a+1,e?t.push("Row "+i+": '"+s+"'"):t.push(s.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class QF{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new fE(n),this.nonDisplayedMemory=new fE(n),this.lastOutputScreen=new fE(n),this.currRollUpRow=this.displayedMemory.rows[ra-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ra-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+Xt(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class XF{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=jye(),this.logger=void 0;const i=this.logger=new Nye;this.channels=[null,new QF(e,t,i),new QF(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,a=t[n+1]&127;let s=!1,o=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+Tl([t[n],t[n+1]])+"] -> ("+Tl([i,a])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(Uye(i,a,l)){_m(null,null,l),this.logger.log(3,()=>"Repeated command ("+Tl([i,a])+") is dropped");continue}_m(i,a,this.cmdHistory),s=this.parseCmd(i,a),s||(s=this.parseMidrow(i,a)),s||(s=this.parsePAC(i,a)),s||(s=this.parseBackgroundAttributes(i,a))}else _m(null,null,l);if(!s&&(o=this.parseChars(i,a),o)){const f=this.currentChannel;f&&f>0?this.channels[f].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Tl([i,a])+" orig: "+Tl([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const a=e===20||e===21||e===23?1:2,s=this.channels[a];return e===20||e===21||e===28||e===29?t===32?s.ccRCL():t===33?s.ccBS():t===34?s.ccAOF():t===35?s.ccAON():t===36?s.ccDER():t===37?s.ccRU(2):t===38?s.ccRU(3):t===39?s.ccRU(4):t===40?s.ccFON():t===41?s.ccRDC():t===42?s.ccTR():t===43?s.ccRTD():t===44?s.ccEDM():t===45?s.ccCR():t===46?s.ccENM():t===47&&s.ccEOC():s.ccTO(t-32),this.currentChannel=a,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Tl([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(i||a))return!1;const s=e<=23?1:2;t>=64&&t<=95?n=s===1?Rye[e]:Lye[e]:n=s===1?Pye[e]:kye[e];const o=this.channels[s];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=s,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19){let s;a===17?s=t+80:a===18?s=t+112:s=t+144,this.logger.log(2,()=>"Special char '"+nH(s)+"' in channel "+n),i=[s]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Tl(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let a;const s={};e===16||e===24?(a=Math.floor((t-32)/2),s.background=Mye[a],t%2===1&&(s.background=s.background+"_semi")):t===45?s.background="transparent":(s.foreground="black",t===47&&(s.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}_m(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function _m(r,e,t){t.a=r,t.b=e}function Uye(r,e,t){return t.a===r&&t.b===e}function jye(){return{a:null,b:null}}var RD=(function(){if(M0!=null&&M0.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function a(o,...l){let c=1;for(;c<arguments.length;c++){const f=arguments[c];for(const h in f)o[h]=f[h]}return o}function s(o,l,c){const f=this,h={enumerable:!0};f.hasBeenReset=!1;let p="",g=!1,y=o,b=l,v=c,E=null,S="",w=!0,A="auto",T="start",I=50,D="middle",P=50,k="middle";Object.defineProperty(f,"id",a({},h,{get:function(){return p},set:function(M){p=""+M}})),Object.defineProperty(f,"pauseOnExit",a({},h,{get:function(){return g},set:function(M){g=!!M}})),Object.defineProperty(f,"startTime",a({},h,{get:function(){return y},set:function(M){if(typeof M!="number")throw new TypeError("Start time must be set to a number.");y=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"endTime",a({},h,{get:function(){return b},set:function(M){if(typeof M!="number")throw new TypeError("End time must be set to a number.");b=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"text",a({},h,{get:function(){return v},set:function(M){v=""+M,this.hasBeenReset=!0}})),Object.defineProperty(f,"region",a({},h,{get:function(){return E},set:function(M){E=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"vertical",a({},h,{get:function(){return S},set:function(M){const B=n(M);if(B===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=B,this.hasBeenReset=!0}})),Object.defineProperty(f,"snapToLines",a({},h,{get:function(){return w},set:function(M){w=!!M,this.hasBeenReset=!0}})),Object.defineProperty(f,"line",a({},h,{get:function(){return A},set:function(M){if(typeof M!="number"&&M!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");A=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"lineAlign",a({},h,{get:function(){return T},set:function(M){const B=i(M);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");T=B,this.hasBeenReset=!0}})),Object.defineProperty(f,"position",a({},h,{get:function(){return I},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");I=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"positionAlign",a({},h,{get:function(){return D},set:function(M){const B=i(M);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");D=B,this.hasBeenReset=!0}})),Object.defineProperty(f,"size",a({},h,{get:function(){return P},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");P=M,this.hasBeenReset=!0}})),Object.defineProperty(f,"align",a({},h,{get:function(){return k},set:function(M){const B=i(M);if(!B)throw new SyntaxError("An invalid or illegal string was specified.");k=B,this.hasBeenReset=!0}})),f.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s})();class $ye{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function aH(r){function e(n,i,a,s){return(n|0)*3600+(i|0)*60+(a|0)+parseFloat(s||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}let Hye=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}};function sH(r,e,t,n){const i=n?r.split(n):[r];for(const a in i){if(typeof i[a]!="string")continue;const s=i[a].split(t);if(s.length!==2)continue;const o=s[0],l=s[1];e(o,l)}}const YT=new RD(0,0,""),Tm=YT.align==="middle"?"middle":"center";function Gye(r,e,t){const n=r;function i(){const o=aH(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){const c=new Hye;sH(o,function(p,g){let y;switch(p){case"region":for(let b=t.length-1;b>=0;b--)if(t[b].id===g){c.set(p,t[b].region);break}break;case"vertical":c.alt(p,g,["rl","lr"]);break;case"line":y=g.split(","),c.integer(p,y[0]),c.percent(p,y[0])&&c.set("snapToLines",!1),c.alt(p,y[0],["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start",Tm,"end"]);break;case"position":y=g.split(","),c.percent(p,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start",Tm,"end","line-left","line-right","auto"]);break;case"size":c.percent(p,g);break;case"align":c.alt(p,g,["start",Tm,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let f=c.get("line","auto");f==="auto"&&YT.line===-1&&(f=-1),l.line=f,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Tm);let h=c.get("position","auto");h==="auto"&&YT.position===50&&(h=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=h}function s(){r=r.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),s(),e.endTime=i(),s(),a(r,e)}function oH(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class Kye{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new $ye,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let a=t.buffer,s=0;for(a=oH(a);s<a.length&&a[s]!=="\r"&&a[s]!==`
`;)++s;const o=a.slice(0,s);return a[s]==="\r"&&++s,a[s]===`
`&&++s,t.buffer=a.slice(s),o}function i(a){sH(a,function(s,o){},/:/)}try{let a="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;a=n();const o=a.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let s=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:a=n(),t.state){case"HEADER":/:/.test(a)?i(a):a||(t.state="ID");continue;case"NOTE":a||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){t.state="NOTE";break}if(!a)continue;if(t.cue=new RD(0,0,""),t.state="CUE",a.indexOf("-->")===-1){t.cue.id=a;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Gye(a,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=a}continue;case"BADCUE":a||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Yye=/\r\n|\n\r|\n|\r/g,dE=function(e,t,n=0){return e.slice(n,n+t.length)===t},zye=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Xe(t)||!Xe(n)||!Xe(i)||!Xe(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*a,t};function PD(r,e,t){return xd(r.toString())+xd(e.toString())+xd(t)}const qye=function(e,t,n){let i=e[t],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=a)!=null&&s.new;){var s;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=n};function Wye(r,e,t,n,i,a,s){const o=new Kye,l=Ti(new Uint8Array(r)).trim().replace(Yye,`
`).split(`
`),c=[],f=e?e0e(e.baseTime,e.timescale):0;let h="00:00.000",p=0,g=0,y,b=!0;o.oncue=function(v){const E=t[n];let S=t.ccOffset;const w=(p-f)/9e4;if(E!=null&&E.new&&(g!==void 0?S=t.ccOffset=E.start:qye(t,n,w)),w){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}S=w-t.presentationOffset}const A=v.endTime-v.startTime,T=mi((v.startTime+S-g)*9e4,i*9e4)/9e4;v.startTime=Math.max(T,0),v.endTime=Math.max(T+A,0);const I=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(I)),v.id||(v.id=PD(v.startTime,v.endTime,I)),v.endTime>0&&c.push(v)},o.onparsingerror=function(v){y=v},o.onflush=function(){if(y){s(y);return}a(c)},l.forEach(v=>{if(b)if(dE(v,"X-TIMESTAMP-MAP=")){b=!1,v.slice(16).split(",").forEach(E=>{dE(E,"LOCAL:")?h=E.slice(6):dE(E,"MPEGTS:")&&(p=parseInt(E.slice(7)))});try{g=zye(h)/1e3}catch(E){y=E}return}else v===""&&(b=!1);o.parse(v+`
`)}),o.flush()}const hE="stpp.ttml.im1t",lH=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,uH=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Vye={left:"start",center:"center",right:"end",start:"start",end:"end"};function ZF(r,e,t,n){const i=xt(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(o=>Ti(o)),s=Jge(e.baseTime,1,e.timescale);try{a.forEach(o=>t(Qye(o,s)))}catch(o){n(o)}}function Qye(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(a).reduce((h,p)=>(h[p]=i.getAttribute(`ttp:${p}`)||a[p],h),{}),o=i.getAttribute("xml:space")!=="preserve",l=JF(pE(i,"styling","style")),c=JF(pE(i,"layout","region")),f=pE(i,"body","[begin]");return[].map.call(f,h=>{const p=cH(h,o);if(!p||!h.hasAttribute("begin"))return null;const g=gE(h.getAttribute("begin"),s),y=gE(h.getAttribute("dur"),s);let b=gE(h.getAttribute("end"),s);if(g===null)throw eB(h);if(b===null){if(y===null)throw eB(h);b=g+y}const v=new RD(g-e,b-e,p);v.id=PD(v.startTime,v.endTime,v.text);const E=c[h.getAttribute("region")],S=l[h.getAttribute("style")],w=Xye(E,S,l),{textAlign:A}=w;if(A){const T=Vye[A];T&&(v.lineAlign=T),v.align=A}return zt(v,w),v}).filter(h=>h!==null)}function pE(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function JF(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function cH(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var a;return n.nodeName==="br"&&i?t+`
`:(a=n.childNodes)!=null&&a.length?cH(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Xye(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return s&&t.hasOwnProperty(s)&&(i=t[s]),a.reduce((o,l)=>{const c=mE(e,n,l)||mE(r,n,l)||mE(i,n,l);return c&&(o[l]=c),o},{})}function mE(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function eB(r){return new Error(`Could not parse ttml timestamp ${r}`)}function gE(r,e){if(!r)return null;let t=aH(r);return t===null&&(lH.test(r)?t=Zye(r,e):uH.test(r)&&(t=Jye(r,e))),t}function Zye(r,e){const t=lH.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function Jye(r,e){const t=uH.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Am{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class eve{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rB(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(U.FRAG_LOADING,this.onFragLoading,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this),e.on(U.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(U.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(U.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(U.FRAG_LOADING,this.onFragLoading,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this),e.off(U.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(U.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(U.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Am(this,"textTrack1"),t=new Am(this,"textTrack2"),n=new Am(this,"textTrack3"),i=new Am(this,"textTrack4");this.cea608Parser1=new XF(1,e,t),this.cea608Parser2=new XF(3,n,i)}addCues(e,t,n,i,a){let s=!1;for(let o=a.length;o--;){const l=a[o],c=tve(l[0],l[1],t,n);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],n),s=!0,c/(n-t)>.5))return}if(s||a.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger(U.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:a,trackId:s}){const{unparsedVttFrags:o}=this;n===et.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:a,trackId:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(U.FRAG_LOADED,l):this.hls.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const a=n.textTracks[i];if(tB(a,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:a,languageCode:s}=t[e],o=this.getExistingTrack(a,s);if(o)n[e]=o,dc(n[e]),eH(n[e],i);else{const l=this.createTextTrack("captions",a,s);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(U.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{dc(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rB(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)dc(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(a=>a.textCodec===hE);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if($5(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const s=this.media,o=s?bg(s.textTracks):null;if(this.tracks.forEach((l,c)=>{let f;if(o){let h=null;for(let p=0;p<o.length;p++)if(o[p]&&tB(o[p],l)){h=o[p],o[p]=null;break}h&&(f=h)}if(f)dc(f);else{const h=fH(l);f=this.createTextTrack(h,l.name,l.lang),f&&(f.mode="disabled")}f&&this.textTracks.push(f)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(U.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const a=`textTrack${i[1]}`,s=this.captionsProperties[a];s&&(s.label=n.name,n.lang&&(s.languageCode=n.lang),s.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===et.MAIN){var n,i;const{cea608Parser1:a,cea608Parser2:s,lastSn:o}=this,{cc:l,sn:c}=t.frag,f=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;a&&s&&(c!==o+1||c===o&&f!==this.lastPartIndex+1||l!==this.lastCc)&&(a.reset(),s.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=f}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===et.SUBTITLE)if(i.byteLength){const a=n.decryptdata,s="stats"in t;if(a==null||!a.encrypted||s){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===hE?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;ZF(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[n.cc]&&o===-1){s.push(e);return}const l=this.hls,c=(t=n.initSegment)!=null&&t.data?Wi(n.initSegment.data,new Uint8Array(i)).buffer:i;Wye(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,f=>{this._appendCues(f,n.level),l.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},f=>{const h=f.message==="Missing initPTS for VTT MPEGTS";h?s.push(e):this._fallbackToIMSC1(n,i),l.logger.log(`Failed to parse VTT cue: ${f}`),!(h&&o>n.cc)&&l.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:f})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||ZF(t,this.initPTS[e.cc],()=>{n.textCodec=hE,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(a=>tH(i,a))}else{const i=this.tracks[t];if(!i)return;const a=i.default?"default":"subtitles"+t;n.trigger(U.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===et.SUBTITLE&&this.onFragLoaded(U.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===et.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let a=0;a<i.length;a++){const s=i[a].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(s);this.cea608Parser1.addData(i[a].pts,o[0]),this.cea608Parser2.addData(i[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:a}){const{media:s}=this;if(!(!s||s.currentTime<n)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>KT(o[l],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>KT(o[l],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let a=0;a<n;a++){const s=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&s)!==0){const f=3&s;(f===0||f===1)&&(t[f].push(o),t[f].push(l))}}return t}}function fH(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function tB(r,e){return!!r&&r.kind===fH(e)&&jT(e,r)}function tve(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function rB(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const rve=/\s/,nve={newCue(r,e,t,n){const i=[];let a,s,o,l,c;const f=self.VTTCue||self.TextTrackCue;for(let p=0;p<n.rows.length;p++)if(a=n.rows[p],o=!0,l=0,c="",!a.isEmpty()){var h;for(let b=0;b<a.chars.length;b++)rve.test(a.chars[b].uchar)&&o?l++:(c+=a.chars[b].uchar,o=!1);a.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const g=oH(c.trim()),y=PD(e,t,g);r!=null&&(h=r.cues)!=null&&h.getCueById(y)||(s=new f(e,t,g),s.id=y,s.line=p+1,s.align="left",s.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(s))}return r&&i.length&&(i.sort((p,g)=>p.line==="auto"||g.line==="auto"?0:p.line>8&&g.line>8?g.line-p.line:p.line-g.line),i.forEach(p=>tH(r,p))),i}};function ive(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const ave=/(\d+)-(\d+)\/(\d+)/;class nB{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||uve,this.controller=new self.AbortController,this.stats=new cD}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=sve(e,this.controller.signal),s=e.responseType==="arraybuffer",o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=l&&Xe(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(Wd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var p;this.response=this.loader=h;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},c-(g-i.loading.start)),!h.ok){const{status:b,statusText:v}=h;throw new cve(v||"fetch, bad network response",b,h)}i.loading.first=g,i.total=lve(h.headers)||i.total;const y=(p=this.callbacks)==null?void 0:p.onProgress;return y&&Xe(t.highWaterMark)?this.loadProgressively(h,i,e,t.highWaterMark,y):s?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var p,g;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const b=h[o];b&&(i.loaded=i.total=b);const v={url:y.url,data:h,code:y.status},E=(p=this.callbacks)==null?void 0:p.onProgress;E&&!Xe(t.highWaterMark)&&E(i,e,h,y),(g=this.callbacks)==null||g.onSuccess(v,i,e,y)}).catch(h=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=h&&h.code||0,y=h?h.message:null;(p=this.callbacks)==null||p.onError({code:g,text:y},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,a){const s=new S5,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return s.dataLength&&a(t,n,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const f=c.value,h=f.length;return t.loaded+=h,h<i||s.dataLength?(s.push(f),s.dataLength>=i&&a(t,n,s.flush().buffer,e)):a(t,n,f.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function sve(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(zt({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function ove(r){const e=ave.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function lve(r){const e=r.get("Content-Range");if(e){const n=ove(e);if(Xe(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function uve(r,e){return new self.Request(r.url,e)}class cve extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const fve=/^age:\s*[\d.]+\s*$/im;class dH{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new cD,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return a(n,t.url)}).catch(s=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),a(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(s=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:s.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&Xe(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,a=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,f=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const y=f??t.response;if(y!=null){var s,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const b=t.responseType==="arraybuffer"?y.byteLength:y.length;n.loaded=n.total=b,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const v=(s=this.callbacks)==null?void 0:s.onProgress;v&&v(n,e,y,t);const E={url:t.responseURL,data:y,code:c};(o=this.callbacks)==null||o.onSuccess(E,n,e,t);return}}const h=a.loadPolicy.errorRetry,p=n.retry,g={url:e.url,data:void 0,code:c};if(L0(h,p,!1,g))this.retry(h);else{var l;$t.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(L0(e,t,!0))this.retry(e);else{var n;$t.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=pD(e,n.retry),n.retry++,$t.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&fve.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const dve={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hve=Ut(Ut({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:dH,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Tme,bufferController:m0e,capLevelController:OD,errorController:Cme,fpsController:gye,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:c5,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:dve},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},pve()),{},{subtitleStreamController:Oye,subtitleTrackController:bye,timelineController:eve,audioStreamController:f0e,audioTrackController:d0e,emeController:xc,cmcdController:dye,contentSteeringController:pye,interstitialsController:Dye});function pve(){return{cueHandler:nve,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mve(r,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=zT(r),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,l=e[o]===void 0,c=[];a.forEach(f=>{const h=`${s}Loading${f}`,p=e[h];if(p!==void 0&&l){c.push(h);const g=n[o].default;switch(e[o]={default:g},f){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${Xt(e[o])}`)}),Ut(Ut({},n),e)}function zT(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(zT):Object.keys(r).reduce((e,t)=>(e[t]=zT(r[t]),e),{}):r}function gve(r,e){const t=r.loader;t!==nB&&t!==dH?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):ive()&&(r.loader=nB,r.progressive=!0,r.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const xg=2,yve=.1,vve=.05,bve=100;class xve extends a5{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(U.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(bve),this.mediaSource=t.mediaSource;const n=this.media=t.media;Rn(n,"playing",this.onMediaPlaying),Rn(n,"waiting",this.onMediaWaiting),Rn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Zn(n,"playing",this.onMediaPlaying),Zn(n,"waiting",this.onMediaWaiting),Zn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const a=(n=this.hls)==null?void 0:n.config;if(!a)return;const s=this.media;if(!s)return;const{seeking:o}=s,l=this.seeking&&!o,c=!this.seeking&&o,f=s.paused&&!o||s.ended||s.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!f&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||l){l&&this.stallResolved(e);return}if(f){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(U.MEDIA_ENDED,{stalled:!1}));return}if(!pt.getBuffered(s).length){this.nudgeRetry=0;return}const h=pt.bufferInfo(s,e,0),p=h.nextStart||0,g=this.fragmentTracker;if(o&&g&&this.hls){const I=iB(this.hls.inFlightFragments,e),D=h.len>xg,P=!p||I||p-e>xg&&!g.getPartialFragment(e);if(D||P)return;this.moved=!1}const y=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&g){if(!(h.len>0)&&!p)return;const D=Math.max(p,h.start||0)-e,k=!!(y!=null&&y.live)?y.targetduration*2:xg,M=Dm(e,g);if(D>0&&(D<=k||M)){s.paused||this._trySkipBufferHole(M);return}}const b=a.detectStallWithCurrentTimeMs,v=self.performance.now(),E=this.waiting;let S=this.stalled;if(S===null)if(E>0&&v-E<b)S=this.stalled=E;else{this.stalled=v;return}const w=v-S;if(!o&&(w>=b||E)&&this.hls){var A;if(((A=this.mediaSource)==null?void 0:A.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(U.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const T=pt.bufferInfo(s,e,a.maxBufferHole);this._tryFixBufferStall(T,w,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(U.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const a=pt.bufferedInfo(pt.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&t>=a.start){const s=pt.timeRangesToArray(i),o=pt.bufferedInfo(s,t,0).bufferedIndex;if(o>-1&&o<s.length-1){const l=pt.bufferedInfo(s,e,0).bufferedIndex,c=s[o].end,f=s[o+1].start;if((l===-1||l>o)&&f-c<1&&e-c<2){const h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${f} buffered index: ${l}`);this.warn(h.message),this.media.currentTime+=1e-6;let p=Dm(e,this.fragmentTracker);p&&"fragment"in p?p=p.fragment:p||(p=void 0);const g=pt.bufferInfo(this.media,e,0);this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:p,buffer:g.len,bufferInfo:g})}}}}}_tryFixBufferStall(e,t,n){var i,a;const{fragmentTracker:s,media:o}=this,l=(i=this.hls)==null?void 0:i.config;if(!o||!s||!l)return;const c=(a=this.hls)==null?void 0:a.latestLevelDetails,f=Dm(n,s);if((f||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(f)||!this.media))return;const h=e.buffered,p=this.adjacentTraversal(e,n);(h&&h.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||p))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const a=n.getFragAtPos(t,et.MAIN),s=n.getFragAtPos(i,et.MAIN);if(a&&s)return s.sn-a.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:a}=this;if(!i&&a!==null&&n&&t){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Xt(e)})`);this.warn(s.message),t.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,a=(t=this.hls)==null?void 0:t.config;if(!i||!n||!a)return 0;const s=i.currentTime,o=pt.bufferInfo(i,s,0),l=s<o.start?o.start:o.nextStart;if(l&&this.hls){const f=o.len<=a.maxBufferHole,h=o.len>0&&o.len<1&&i.readyState<3,p=l-s;if(p>0&&(f||h)){if(p>a.maxBufferHole){let y=!1;if(s===0){const b=n.getAppendedFrag(0,et.MAIN);b&&l<b.end&&(y=!0)}if(!y&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||iB(this.hls.inFlightFragments,l))return 0;let v=!1,E=e.end;for(;E<l;){const S=Dm(E,n);if(S)E+=S.duration;else{v=!0;break}}if(v)return 0}}const g=Math.max(l+vve,s+yve);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${g}`),this.moved=!0,i.currentTime=g,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${g}`),b={type:at.MEDIA_ERROR,details:we.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?b.part=e:b.frag=e),this.hls.trigger(U.ERROR,b)}return g}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,a=t?.config;if(!n||!a)return 0;const s=n.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const o=s+(i+1)*a.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${s} to ${o}`);this.warn(l.message),n.currentTime=o,t.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function iB(r,e){const t=aB(r.main);if(t&&t.start<=e)return t;const n=aB(r.audio);return n&&n.start<=e?n:null}function aB(r){if(!r)return null;switch(r.state){case Ge.IDLE:case Ge.STOPPED:case Ge.ENDED:case Ge.ERROR:return null}return r.frag}function Dm(r,e){return e.getAppendedFrag(r,et.MAIN)||e.getPartialFragment(r)}const Sve=.25;function qT(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function yE(r,e,t,n,i){let a=new r(e,t,"");try{a.value=n,i&&(a.type=i)}catch{a=new r(e,t,Xt(i?Ut({type:i},n):n))}return a}const Om=(()=>{const r=qT();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Eve{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(U.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(U.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(U.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&dc(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return eH(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:a}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=qT();if(s)for(let o=0;o<a.length;o++){const l=a[o].type;if(l===vi.emsg&&!n||!i)continue;const c=O5(a[o].data),f=a[o].pts;let h=f+a[o].duration;h>Om&&(h=Om),h-f<=0&&(h=f+Sve);for(let g=0;g<c.length;g++){const y=c[g];if(!I5(y)){this.updateId3CueEnds(f,l);const b=yE(s,f,h,y,l);b&&this.id3Track.addCue(b)}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let a=i.length;a--;){const s=i[a];s.type===t&&s.startTime<e&&s.endTime===Om&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:a,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=s;if(a&&(o||l)){let c;i==="audio"?c=f=>f.type===vi.audioId3&&l:i==="video"?c=f=>f.type===vi.emsg&&o:c=f=>f.type===vi.audioId3&&l||f.type===vi.emsg&&o,KT(a,t,n,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:a,interstitialsController:s}=this.hls.config;if(!a)return;const o=qT();if(n&&i&&!s){const{fragmentStart:b,fragmentEnd:v}=e;let E=this.assetCue;E?(E.startTime=b,E.endTime=v):o&&(E=this.assetCue=yE(o,b,v,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),E&&(E.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(E),E.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:c}=e,f=Object.keys(c);let h=this.dateRangeCuesAppended;if(l&&t){var p;if((p=l.cues)!=null&&p.length){const b=Object.keys(h).filter(v=>!f.includes(v));for(let v=b.length;v--;){var g;const E=b[v],S=(g=h[E])==null?void 0:g.cues;delete h[E],S&&Object.keys(S).forEach(w=>{const A=S[w];if(A){A.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(A)}catch{}}})}}else h=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(f.length===0||!Xe(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let b=0;b<f.length;b++){const v=f[b],E=c[v],S=E.startTime,w=h[v],A=w?.cues||{};let T=w?.durationKnown||!1,I=Om;const{duration:D,endDate:P}=E;if(P&&D!==null)I=S+D,T=!0;else if(E.endOnNext&&!T){const M=f.reduce((B,C)=>{if(C!==E.id){const W=c[C];if(W.class===E.class&&W.startDate>E.startDate&&(!B||E.startDate<B.startDate))return W}return B},null);M&&(I=M.startTime,T=!0)}const k=Object.keys(E.attr);for(let M=0;M<k.length;M++){const B=k[M];if(!Gme(B))continue;const C=A[B];if(C)T&&!(w!=null&&w.durationKnown)?C.endTime=I:Math.abs(C.startTime-S)>.01&&(C.startTime=S,C.endTime=I);else if(o){let W=E.attr[B];Kme(B)&&(W=U8(W));const q=yE(o,S,I,{key:B,data:W},vi.dateRange);q&&(q.id=v,this.id3Track.addCue(q),A[B]=q,s&&(B==="X-ASSET-LIST"||B==="X-ASSET-URL")&&q.addEventListener("enter",this.onEventCueEnter))}}h[v]={cues:A,dateRange:E,durationKnown:T}}}}}class wve{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:s}=this.config;if(!a||s===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const l=i-o,c=Math.min(this.maxLatency,o+n.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,g=Math.min(h,Math.max(1,p));this.changeMediaPlaybackRate(t,g)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:s,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&n||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=a!==void 0?a:s*i);const f=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,f)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,a=e-t-this.edgeStalled,s=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(U.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(U.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===we.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class _ve extends DD{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this),e.on(U.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this),e.off(U.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],a={},s={};let o=!1,l=!1,c=!1;t.levels.forEach(f=>{const h=f.attrs;let{audioCodec:p,videoCodec:g}=f;p&&(f.audioCodec=p=I0(p,n)||void 0),g&&(g=f.videoCodec=sme(g));const{width:y,height:b,unknownCodecs:v}=f,E=v?.length||0;if(o||(o=!!(y&&b)),l||(l=!!g),c||(c=!!p),E||p&&!this.isAudioSupported(p)||g&&!this.isVideoSupported(g)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:S,"FRAME-RATE":w,"HDCP-LEVEL":A,"PATHWAY-ID":T,RESOLUTION:I,"VIDEO-RANGE":D}=h,k=`${`${T||"."}-`}${f.bitrate}-${I}-${w}-${S}-${D}-${A}`;if(a[k])if(a[k].uri!==f.url&&!f.attrs["PATHWAY-ID"]){const M=s[k]+=1;f.attrs["PATHWAY-ID"]=new Array(M+1).join(".");const B=this.createLevel(f);a[k]=B,i.push(B)}else a[k].addGroupId("audio",h.AUDIO),a[k].addGroupId("text",h.SUBTITLES);else{const M=this.createLevel(f);a[k]=M,s[k]=1,i.push(M)}}),this.filterAndSortMediaOptions(i,t,o,l,c)}createLevel(e){const t=new Yd(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=X8(i,[])}return t}isAudioSupported(e){return Gd(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Gd(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,a){var s;let o=[],l=[],c=e;const f=((s=t.stats)==null?void 0:s.parsing)||{};if((n||i)&&a&&(c=c.filter(({videoCodec:S,videoRange:w,width:A,height:T})=>(!!S||!!(A&&T))&&gme(w))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let S="no level with compatible codecs found in manifest",w=S;t.levels.length&&(w=`one or more CODECS in variant not supported: ${Xt(t.levels.map(T=>T.attrs.CODECS).filter((T,I,D)=>D.indexOf(T)===I))}`,this.warn(w),S+=` (${w})`);const A=new Error(S);this.hls.trigger(U.ERROR,{type:at.MEDIA_ERROR,details:we.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:A,reason:w})}}),f.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(S=>!S.audioCodec||this.isAudioSupported(S.audioCodec)),sB(o)),t.subtitles&&(l=t.subtitles,sB(l));const h=c.slice(0);c.sort((S,w)=>{if(S.attrs["HDCP-LEVEL"]!==w.attrs["HDCP-LEVEL"])return(S.attrs["HDCP-LEVEL"]||"")>(w.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&S.height!==w.height)return S.height-w.height;if(S.frameRate!==w.frameRate)return S.frameRate-w.frameRate;if(S.videoRange!==w.videoRange)return C0.indexOf(S.videoRange)-C0.indexOf(w.videoRange);if(S.videoCodec!==w.videoCodec){const A=X2(S.videoCodec),T=X2(w.videoCodec);if(A!==T)return T-A}if(S.uri===w.uri&&S.codecSet!==w.codecSet){const A=O0(S.codecSet),T=O0(w.codecSet);if(A!==T)return T-A}return S.averageBitrate!==w.averageBitrate?S.averageBitrate-w.averageBitrate:0});let p=h[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==h.length)){for(let S=0;S<h.length;S++)if(h[S].pathwayId===c[0].pathwayId){p=h[S];break}}this._levels=c;for(let S=0;S<c.length;S++)if(c[S]===p){var g;this._firstLevel=S;const w=p.bitrate,A=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${w}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const T=Math.min(w,this.hls.config.abrEwmaDefaultEstimateMax);T>A&&A===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=T)}break}const y=a&&!i,b=this.hls.config,v=!!(b.audioStreamController&&b.audioTrackController),E={levels:c,audioTracks:o,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:i,altAudio:v&&!y&&o.some(S=>!!S.url)};f.end=performance.now(),this.hls.trigger(U.MANIFEST_PARSED,E)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const f=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:f,reason:f.message}),h)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,s=t[e],o=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&i&&a===o)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${o?" with Pathway "+o:""} from level ${n}${a?" with Pathway "+a:""}`);const l={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(U.LEVEL_SWITCHING,l);const c=s.details;if(!c||c.live){const f=this.switchParams(s.uri,i?.details,c);this.loadPlaylist(f)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===St.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===et.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(a=>!!n[a]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:a}=t,s=t.levelInfo;if(!s){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(s===this.currentLevel||t.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let l=s.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,t,l)}else(n=t.deliveryDirectives)!=null&&n.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],s=e.details,o=s?.age;this.log(`Loading level index ${i}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${a?" Pathway "+a:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${n}`),this.hls.trigger(U.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((a,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));v5(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(U.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(U.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function sB(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function hH(){return self.SourceBuffer||self.WebKitSourceBuffer}function pH(){if(!Zo())return!1;const e=hH();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Tve(){if(!pH())return!1;const r=Zo();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(Kd(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(Kd(e,"audio"))))}function Ave(){var r;const e=hH();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const Dve=100;class Ove extends bD{constructor(e,t,n){super(e,t,n,"stream-controller",et.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!Xe(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const s=this.getFwdBufferInfoAtPos(i,a,et.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this),e.on(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this),e.off(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Dve),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ge.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Ge.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ge.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e?.[t],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Ge.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Ge.IDLE;break}break}case Ge.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Ge.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[a]))return;const s=n[a],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const b={};this.altAudio===2&&(b.type="video"),this.hls.trigger(U.BUFFER_EOS,b),this.state=Ge.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const c=s.details;if(!c||this.state===Ge.WAITING_LEVEL||this.waitForLive(s)){this.level=a,this.state=Ge.WAITING_LEVEL,this.startFragRequested=!1;return}const f=o.len,h=this.getMaxBufferLength(s.maxBitrate);if(f>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let g=this.getNextFragment(p,c);if(this.couldBacktrack&&!this.fragPrevious&&g&&_r(g)&&this.fragmentTracker.getState(g)!==jr.OK){var y;const v=((y=this.backtrackFragment)!=null?y:g).sn-c.startSN,E=c.fragments[v-1];E&&g.cc===E.cc&&(g=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,p)){if(!g.gap){const v=this.audioOnly&&!this.altAudio?Vt.AUDIO:Vt.VIDEO,E=(v===Vt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,v,et.MAIN)}g=this.getNextFragmentLoopLoading(g,c,o,et.MAIN,h)}g&&(g.initSegment&&!g.initSegment.data&&!this.bitrateTest&&(g=g.initSegment),this.loadFragment(g,s,p))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===jr.NOT_LOADED||i===jr.PARTIAL?_r(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,et.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,f=Math.max(s.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(f,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ge.KEY_LOADING:case Ge.FRAG_LOADING:case Ge.FRAG_LOADING_WAITING_RETRY:case Ge.PARSING:case Ge.PARSED:this.state=Ge.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Rn(n,"playing",this.onMediaPlaying),Rn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Zn(n,"playing",this.onMediaPlaying),Zn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(U.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;for(let a=0;a<t.levels.length;a++){const s=t.levels[a].audioCodec;s&&(n=n||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!Ave(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Ge.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Ge.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:a}=this,s=t.level,o=t.details,l=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const c=t.levelInfo,f=this.fragCurrent;f&&(this.state===Ge.FRAG_LOADING||this.state===Ge.FRAG_LOADING_WAITING_RETRY)&&f.level!==t.level&&f.loader&&this.abortCurrentFrag();let h=0;if(o.live||(n=c.details)!=null&&n.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,c.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(c.details=o,this.levelLastLoaded=c,a||this.setStartPosition(o,h),this.hls.trigger(U.LEVEL_UPDATED,{details:o,level:s}),this.state===Ge.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Ge.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),s=e.fragmentStart,o=e.edge,l=a>=s-t.maxFragLookUpTolerance&&a<=o;if(i!==null&&n.duration>i&&(a<i||!l)){const f=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||a<o-f)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const h=pt.bufferInfo(n,i,0);if(!((c=h.buffered)!=null&&c.length)){n.currentTime=i;return}if(h.start<=a){n.currentTime=i;return}const{nextStart:g}=pt.bufferedInfo(h.buffered,a,0);g&&(n.currentTime=g)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:a}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=s[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,f=l.PTSKnown||!l.live,h=(t=n.initSegment)==null?void 0:t.data,p=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new j5(this.hls,et.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=i?i.index:-1,b=y!==-1,v=new gD(n.level,n.sn,n.stats.chunkCount,a.byteLength,y,b),E=this.initPTS[n.cc];g.push(a,h,p,c,n,i,l.totalduration,f,v,E)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio!==0;if(R0(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(U.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(U.AUDIO_TRACK_SWITCHED,t)}),n.trigger(U.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(U.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=R0(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,a,s=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(a=o,i=l,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,a=n.type===et.MAIN;if(a){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Ge.PARSED&&(this.state=Ge.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),_r(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const s=this.media;s&&(!this._hasEnoughToStart&&pt.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Ge.ERROR;return}switch(t.details){case we.FRAG_GAP:case we.FRAG_PARSING_ERROR:case we.FRAG_DECRYPT_ERROR:case we.FRAG_LOAD_ERROR:case we.FRAG_LOAD_TIMEOUT:case we.KEY_LOAD_ERROR:case we.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.MAIN,t);break;case we.LEVEL_LOAD_ERROR:case we.LEVEL_LOAD_TIMEOUT:case we.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Ge.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===St.LEVEL&&(this.state=Ge.IDLE);break;case we.BUFFER_ADD_CODEC_ERROR:case we.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case we.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case we.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Ge.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Vt.AUDIO||!this.altAudio){const n=(t===Vt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,et.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const a=this.getLevelDetails(),s=pt.getBuffered(e),o=s.length?s.start(0):0,l=o-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<c||this.loadingParts&&l<2*(a?.partTarget||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,a=n?.frag;if(!a||this.fragContextChanged(a))return;t.fragmentError=0,this.state=Ge.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=a.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(U.FRAG_LOADED,n),a.bitrateTest=!1}).catch(n=>{this.state===Ge.STOPPED||this.state===Ge.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s){this.resetWhenMissingContext(a);return}const{frag:o,part:l,level:c}=s,{video:f,text:h,id3:p,initSegment:g}=i,{details:y}=c,b=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=Ge.PARSING,g){const v=g.tracks;if(v){const A=o.initSegment||o;if(this.unhandledEncryptionError(g,o))return;this._bufferInitSegment(c,v,A,a),n.trigger(U.FRAG_PARSING_INIT_SEGMENT,{frag:A,id:t,tracks:v})}const E=g.initPTS,S=g.timescale,w=this.initPTS[o.cc];if(Xe(E)&&(!w||w.baseTime!==E||w.timescale!==S)){const A=g.trackId;this.initPTS[o.cc]={baseTime:E,timescale:S,trackId:A},n.trigger(U.INIT_PTS_FOUND,{frag:o,id:t,initPTS:E,timescale:S,trackId:A})}}if(f&&y){b&&f.type==="audiovideo"&&this.logMuxedErr(o);const v=y.fragments[o.sn-1-y.startSN],E=o.sn===y.startSN,S=!v||o.cc>v.cc;if(i.independent!==!1){const{startPTS:w,endPTS:A,startDTS:T,endDTS:I}=f;if(l)l.elementaryStreams[f.type]={startPTS:w,endPTS:A,startDTS:T,endDTS:I};else if(f.firstKeyFrame&&f.independent&&a.id===1&&!S&&(this.couldBacktrack=!0),f.dropped&&f.independent){const D=this.getMainFwdBufferInfo(),P=(D?D.end:this.getLoadPosition())+this.config.maxBufferHole,k=f.firstKeyFramePTS?f.firstKeyFramePTS:w;if(!E&&P<k-this.config.maxBufferHole&&!S){this.backtrack(o);return}else S&&(o.gap=!0);o.setElementaryStreamInfo(f.type,o.start,A,o.start,I,!0)}else E&&w-(y.appliedTimelineOffset||0)>xg&&(o.gap=!0);o.setElementaryStreamInfo(f.type,w,A,T,I),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(f,o,l,a,E||S)}else if(E||S)o.gap=!0;else{this.backtrack(o);return}}if(b){const{startPTS:v,endPTS:E,startDTS:S,endDTS:w}=b;l&&(l.elementaryStreams[Vt.AUDIO]={startPTS:v,endPTS:E,startDTS:S,endDTS:w}),o.setElementaryStreamInfo(Vt.AUDIO,v,E,S,w),this.bufferFragmentData(b,o,l,a)}if(y&&p!=null&&p.samples.length){const v={id:t,frag:o,details:y,samples:p.samples};n.trigger(U.FRAG_PARSING_METADATA,v)}if(y&&h){const v={id:t,frag:o,details:y,samples:h.samples};n.trigger(U.FRAG_PARSING_USERDATA,v)}}logMuxedErr(e){this.warn(`${_r(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==Ge.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:a,video:s,audiovideo:o}=t;if(a){const c=e.audioCodec;let f=hg(a.codec,c);f==="mp4a"&&(f="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){f&&(f.indexOf("mp4a.40.5")!==-1?f="mp4a.40.2":f="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(f="mp4a.40.5")}f&&f.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(f="mp4a.40.2",this.log(`Android: force audio codec to ${f}`)),c&&c!==f&&this.log(`Swapping manifest audio codec "${c}" for "${f}"`),a.levelCodec=f,a.id=et.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${f||""}/${c||""}/${a.codec}]`),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=et.MAIN;const c=s.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${s.codec!==c?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger(U.BUFFER_CODECS,t),!this.hls)return;l.forEach(c=>{const h=t[c].initSegment;h!=null&&h.byteLength&&this.hls.trigger(U.BUFFER_APPENDING,{type:c,data:h,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,et.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ge.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(pt.isBuffered(e,n)?t=this.getAppendedFrag(n):pt.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,a=t.level;(!i||t.sn!==i.sn||i.level!==a)&&(this.fragPlaying=t,this.hls.trigger(U.FRAG_CHANGED,{frag:t}),(!i||i.level!==a)&&this.hls.trigger(U.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Xe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Xe(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?ru(null,n.fragments,t):null);if(i){const a=i.programDateTime;if(a!==null){const s=a+(t-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Ive extends Qi{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=we.KEY_LOAD_ERROR,n,i,a){return new bs({type:at.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:n,networkDetails:i})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,a=t.length;i<a;i++){const s=t[i];if(e.cc<=s.cc&&(!_r(e)||!_r(s)||e.sn<s.sn)||!n&&i==a-1)return this.emeController.selectKeySystemFormat(s).then(o=>{if(!this.emeController)return;s.setKeyFormat(o);const l=mg(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const i=pd(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const a=e.decryptdata;if(!a){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,c))}const s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));const o=vE(a);let l=this.keyIdToKeyInfo[o];if((n=l)!=null&&n.decryptdata.key)return a.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(i=l)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(f=>{const{keyInfo:h}=f;return a.key=h.decryptdata.key,{frag:e,keyInfo:h}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${a.keyId?" keyId: "+un(a.keyId):""} URI: ${a.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,we.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const s=Wpe(t.initSegment.data);if(s.length){let o=s[0];o.some(l=>l!==0)?(this.log(`Using keyId found in init segment ${un(o)}`),zo.setKeyIdForUri(e.decryptdata.uri,o)):(o=zo.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${un(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!_r(t))return Promise.resolve(n);const a=this.emeController.loadKey(n);return(e.keyLoadPromise=a.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,"data"in s&&(s.data.frag=t),s})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,a=new i(n);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((s,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,g,y,b)=>{const{frag:v,keyInfo:E}=y,S=vE(E.decryptdata);if(!v.decryptdata||E!==this.keyIdToKeyInfo[S])return o(this.createKeyLoadError(v,we.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));E.decryptdata.key=v.decryptdata.key=new Uint8Array(p.data),v.keyLoader=null,E.loader=null,s({frag:v,keyInfo:E})},onError:(p,g,y,b)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),y,Ut({url:l.url,data:void 0},p)))},onTimeout:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,we.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};a.load(l,f,h)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,a=n.loader;t.keyLoader===a&&(t.keyLoader=null,n.loader=null);const s=vE(n.decryptdata)||i;delete this.keyIdToKeyInfo[s],a&&a.destroy()}}function vE(r){if(r.keyFormat!==cn.FAIRPLAY){const e=r.keyId;if(e)return un(e)}return r.uri}function oB(r){const{type:e}=r;switch(e){case St.AUDIO_TRACK:return et.AUDIO;case St.SUBTITLE_TRACK:return et.SUBTITLE;default:return et.MAIN}}function bE(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Cve{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(U.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(U.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,a=n||i,s=new a(t);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:St.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:a,url:s,deliveryDirectives:o,levelInfo:l}=t;this.load({id:n,level:i,pathwayId:a,responseType:"text",type:St.LEVEL,url:s,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:a,deliveryDirectives:s,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:St.AUDIO_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:a,deliveryDirectives:s,track:o}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:St.SUBTITLE_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onLevelsUpdated(e,t){const n=this.loaders[St.LEVEL];if(n){const i=n.context;i&&!t.levels.some(a=>a===i.levelOrTrack)&&(n.abort(),delete this.loaders[St.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=this.hls.logger,f=i.context;if(f&&f.levelOrTrack===e.levelOrTrack&&(f.url===e.url||f.deliveryDirectives&&!e.deliveryDirectives)){f.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${f.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===St.MANIFEST?a=n.manifestLoadPolicy.default:a=zt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Xe((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===St.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===St.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===St.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const f=c.partTarget,h=c.targetduration;if(f&&h){const p=Math.max(f*3,h*.8)*1e3;a=zt({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(c,f,h,p)=>{const g=this.getInternalLoader(h);this.resetInternalLoader(h.type);const y=c.data;f.parsing.start=performance.now(),ka.isMediaPlaylist(y)||h.type!==St.MANIFEST?this.handleTrackOrLevelPlaylist(c,f,h,p||null,g):this.handleMasterPlaylist(c,f,h,p)},onError:(c,f,h,p)=>{this.handleNetworkError(f,h,!1,c,p)},onTimeout:(c,f,h)=>{this.handleNetworkError(f,h,!0,void 0,c)}};i.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const a=this.hls,s=e.data,o=bE(e,n),l=ka.parseMasterPlaylist(s,o);if(l.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,i,t);return}const{contentSteering:c,levels:f,sessionData:h,sessionKeys:p,startTimeOffset:g,variableList:y}=l;this.variableList=y,f.forEach(S=>{const{unknownCodecs:w}=S;if(w){const{preferManagedMediaSource:A}=this.hls.config;let{audioCodec:T,videoCodec:I}=S;for(let D=w.length;D--;){const P=w[D];Gd(P,"audio",A)?(S.audioCodec=T=T?`${T},${P}`:P,Fc.audio[T.substring(0,4)]=2,w.splice(D,1)):Gd(P,"video",A)&&(S.videoCodec=I=I?`${I},${P}`:P,Fc.video[I.substring(0,4)]=2,w.splice(D,1))}}});const{AUDIO:b=[],SUBTITLES:v,"CLOSED-CAPTIONS":E}=ka.parseMasterPlaylistMedia(s,o,l);b.length&&!b.some(w=>!w.url)&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new fr({}),bitrate:0,url:""})),a.trigger(U.MANIFEST_LOADED,{levels:f,audioTracks:b,subtitles:v,captions:E,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:h,sessionKeys:p,startTimeOffset:g,variableList:y})}handleTrackOrLevelPlaylist(e,t,n,i,a){const s=this.hls,{id:o,level:l,type:c}=n,f=bE(e,n),h=Xe(l)?l:Xe(o)?o:0,p=oB(n),g=ka.parseLevelPlaylist(e.data,f,h,p,0,this.variableList);if(c===St.MANIFEST){const y={attrs:new fr({}),bitrate:0,details:g,name:"",url:f};g.requestScheduled=t.loading.start+m5(g,0),s.trigger(U.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=g,this.handlePlaylistLoaded(g,e,t,n,i,a)}handleManifestParsingError(e,t,n,i,a){this.hls.trigger(U.ERROR,{type:at.NETWORK_ERROR,details:we.MANIFEST_PARSING_ERROR,fatal:t.type===St.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:a})}handleNetworkError(e,t,n=!1,i,a){let s=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===St.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===St.AUDIO_TRACK||e.type===St.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let l=we.UNKNOWN,c=!1;const f=this.getInternalLoader(e);switch(e.type){case St.MANIFEST:l=n?we.MANIFEST_LOAD_TIMEOUT:we.MANIFEST_LOAD_ERROR,c=!0;break;case St.LEVEL:l=n?we.LEVEL_LOAD_TIMEOUT:we.LEVEL_LOAD_ERROR,c=!1;break;case St.AUDIO_TRACK:l=n?we.AUDIO_TRACK_LOAD_TIMEOUT:we.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case St.SUBTITLE_TRACK:l=n?we.SUBTITLE_TRACK_LOAD_TIMEOUT:we.SUBTITLE_LOAD_ERROR,c=!1;break}f&&this.resetInternalLoader(e.type);const h={type:at.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:f,context:e,error:o,networkDetails:t,stats:a};if(i){const p=t?.url||e.url;h.response=Ut({url:p,data:void 0},i)}this.hls.trigger(U.ERROR,h)}handlePlaylistLoaded(e,t,n,i,a,s){const o=this.hls,{type:l,level:c,levelOrTrack:f,id:h,groupId:p,deliveryDirectives:g}=i,y=bE(t,i),b=oB(i);let v=typeof i.level=="number"&&b===et.MAIN?c:void 0;const E=e.playlistParsingError;if(E){if(this.hls.logger.warn(`${E} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(U.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:E,reason:E.message,response:t,context:i,level:v,parent:b,networkDetails:a,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const S=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(U.ERROR,{type:at.NETWORK_ERROR,details:we.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:S,reason:S.message,response:t,context:i,level:v,parent:b,networkDetails:a,stats:n});return}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case St.MANIFEST:case St.LEVEL:if(v){if(!f)v=0;else if(f!==o.levels[v]){const S=o.levels.indexOf(f);S>-1&&(v=S)}}o.trigger(U.LEVEL_LOADED,{details:e,levelInfo:f||o.levels[0],level:v||0,id:h||0,stats:n,networkDetails:a,deliveryDirectives:g,withoutMultiVariant:l===St.MANIFEST});break;case St.AUDIO_TRACK:o.trigger(U.AUDIO_TRACK_LOADED,{details:e,track:f,id:h||0,groupId:p||"",stats:n,networkDetails:a,deliveryDirectives:g});break;case St.SUBTITLE_TRACK:o.trigger(U.SUBTITLE_TRACK_LOADED,{details:e,track:f,id:h||0,groupId:p||"",stats:n,networkDetails:a,deliveryDirectives:g});break}}}class bi{static get version(){return zd}static isMSESupported(){return pH()}static isSupported(){return Tve()}static getMediaSource(){return Zo()}static get Events(){return U}static get MetadataSchema(){return vi}static get ErrorTypes(){return at}static get ErrorDetails(){return we}static get DefaultConfig(){return bi.defaultConfig?bi.defaultConfig:hve}static set DefaultConfig(e){bi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new xD,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Npe(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=mve(bi.DefaultConfig,e,t);this.userConfig=e,n.progressive&&gve(n,t);const{abrController:i,bufferController:a,capLevelController:s,errorController:o,fpsController:l}=n,c=new o(this),f=this.abrController=new i(this),h=new Rme(this),p=n.interstitialsController,g=p?this.interstitialsController=new p(this,bi):null,y=this.bufferController=new a(this,h),b=this.capLevelController=new s(this),v=new l(this),E=new Cve(this),S=n.contentSteeringController,w=S?new S(this):null,A=this.levelController=new _ve(this,w),T=new Eve(this),I=new Ive(this.config,this.logger),D=this.streamController=new Ove(this,h,I),P=this.gapController=new xve(this,h);b.setStreamController(D),v.setStreamController(D);const k=[E,A,D];g&&k.splice(1,0,g),w&&k.splice(1,0,w),this.networkControllers=k;const M=[f,y,P,b,v,T,h];this.audioTrackController=this.createController(n.audioTrackController,k);const B=n.audioStreamController;B&&k.push(this.audioStreamController=new B(this,h,I)),this.subtitleTrackController=this.createController(n.subtitleTrackController,k);const C=n.subtitleStreamController;C&&k.push(this.subtititleStreamController=new C(this,h,I)),this.createController(n.timelineController,M),I.emeController=this.emeController=this.createController(n.emeController,M),this.cmcdController=this.createController(n.cmcdController,M),this.latencyController=this.createController(wve,M),this.coreComponents=M,k.push(c);const W=c.onErrorOut;typeof W=="function"&&this.on(U.ERROR,W,c),this.on(U.MANIFEST_LOADED,E.onManifestLoaded,E)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===U.ERROR;this.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(U.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(U.ERROR,{type:at.OTHER_ERROR,details:we.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger(U.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(U.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(U.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=uD.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(U.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[et.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[et.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[et.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=xye()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){mme(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let a=i;a--;){const s=e[a].attrs["HDCP-LEVEL"];if(s&&s<=n)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=e5(t);return Z8(e,n,navigator.mediaCapabilities)}}bi.defaultConfig=void 0;function Ho({cameraId:r,title:e}){const t=L.useRef(null),n=L.useRef(null),[i,a]=L.useState(null),[s,o]=L.useState(!0),c={1:"https://www.tansaeng.com/live/tapo1.m3u8",2:"https://www.tansaeng.com/live/tapo2.m3u8",3:"https://www.tansaeng.com/live/tapo3.m3u8",4:"https://www.tansaeng.com/live/tapo4.m3u8"}[r];return L.useEffect(()=>{const f=t.current;if(!f||!c){a(" URL  ."),o(!1);return}if(a(null),o(!0),bi.isSupported()){const h=new bi({liveBackBufferLength:0,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,enableWorker:!0,lowLatencyMode:!0});return n.current=h,h.loadSource(c),h.attachMedia(f),h.on(bi.Events.MANIFEST_PARSED,()=>{o(!1),f.play().catch(p=>{console.warn("Auto-play failed:",p),a("  ")})}),h.on(bi.Events.ERROR,(p,g)=>{if(console.error("HLS error:",g),g.fatal)switch(g.type){case bi.ErrorTypes.NETWORK_ERROR:a(" :    "),setTimeout(()=>{h.startLoad()},3e3);break;case bi.ErrorTypes.MEDIA_ERROR:a(" :     "),h.recoverMediaError();break;default:a(" :    "),h.destroy();break}}),()=>{h.destroy(),n.current=null}}else{if(f.canPlayType("application/vnd.apple.mpegurl"))return f.src=c,f.addEventListener("loadedmetadata",()=>{o(!1),f.play().catch(h=>{console.warn("Auto-play failed:",h),a("  ")})}),f.addEventListener("error",()=>{a("  ")}),()=>{f.src=""};a("  HLS   "),o(!1)}},[c]),j.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden",children:[e&&j.jsx("div",{className:"bg-farm-500 px-4 py-2",children:j.jsx("h3",{className:"text-base font-semibold text-gray-900 m-0",children:e})}),j.jsxs("div",{className:"relative bg-black aspect-video",children:[j.jsx("video",{ref:t,className:"w-full h-full",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),s&&j.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:j.jsxs("div",{className:"text-white text-center",children:[j.jsx("div",{className:"text-2xl mb-2",children:""}),j.jsx("div",{className:"text-sm",children:"  ..."})]})}),i&&j.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70",children:j.jsxs("div",{className:"text-white text-center p-4",children:[j.jsx("div",{className:"text-3xl mb-2",children:""}),j.jsx("div",{className:"text-sm",children:i})]})})]}),j.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:j.jsxs("div",{className:"text-xs text-gray-500 truncate",title:c,children:[" ",c]})})]})}const Im="tansaeng_rpi_ip";function Rve(){const[r,e]=L.useState(""),[t,n]=L.useState(null),[i,a]=L.useState("");L.useEffect(()=>{const f=localStorage.getItem(Im);f&&n(f)},[]);const s=f=>/^(\d{1,3}\.){3}\d{1,3}$/.test(f)?f.split(".").every(g=>{const y=parseInt(g,10);return y>=0&&y<=255}):!1,o=()=>{const f=r.trim();if(console.log("[RpiIpSettings]   , :",f),!f){console.log("[RpiIpSettings]  "),a(" IP  ");return}if(!s(f)){console.log("[RpiIpSettings] IP  :",f),a("  IP    (: 192.168.1.100)");return}localStorage.setItem(Im,f),console.log("[RpiIpSettings] localStorage  :",f),console.log("[RpiIpSettings]  :",localStorage.getItem(Im)),n(f),e(""),a("  IP "),setTimeout(()=>a(""),3e3)},l=()=>{t&&window.confirm("  IP ?")&&(localStorage.removeItem(Im),n(null),a("  IP "),setTimeout(()=>a(""),3e3))},c=f=>{f.key==="Enter"&&o()};return j.jsxs("div",{className:"mb-6 rounded-lg border border-slate-600 bg-slate-800 p-4",children:[j.jsx("h2",{className:"mb-3 text-lg font-semibold text-slate-100",children:"  IP "}),j.jsxs("div",{className:"mb-3 flex gap-2",children:[j.jsx("input",{type:"text",value:r,onChange:f=>e(f.target.value),onKeyPress:c,placeholder:": 192.168.219.170",className:"flex-1 rounded border border-slate-600 bg-slate-700 px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-blue-500 focus:outline-none"}),j.jsx("button",{onClick:o,className:"rounded bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:""})]}),i&&j.jsx("div",{className:`mb-3 rounded p-2 text-sm ${i.includes("")?"bg-red-900/30 text-red-300":i.includes("")?"bg-yellow-900/30 text-yellow-300":"bg-green-900/30 text-green-300"}`,children:i}),t&&j.jsxs("div",{className:"rounded border border-slate-600 bg-slate-700 p-3",children:[j.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[j.jsx("span",{className:"text-sm text-slate-400",children:"  IP:"}),j.jsx("button",{onClick:l,className:"rounded bg-red-600 px-3 py-1 text-sm font-medium text-white transition hover:bg-red-700",children:""})]}),j.jsx("div",{className:"rounded bg-slate-800 p-2 font-mono text-green-400",children:t}),j.jsx("div",{className:"mt-2 text-xs text-slate-400",children:"  IP HLS   "})]}),!t&&j.jsx("div",{className:"rounded border border-yellow-600/30 bg-yellow-900/20 p-3 text-sm text-yellow-300",children:"  IP  .    IP ."})]})}function Pve(r){return j.jsxs("div",{className:"p-4",children:[j.jsx("h1",{className:"mb-4 text-2xl font-bold text-slate-100",children:"   "}),j.jsx(Rve,{}),j.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[j.jsx(Ho,{cameraId:1,title:"  1"}),j.jsx(Ho,{cameraId:2,title:"  2"}),j.jsx(Ho,{cameraId:3,title:"  3"}),j.jsx(Ho,{cameraId:4,title:" "})]})]})}function Lve({farmSettings:r,setFarmSettings:e}){const t="22ada06fd6cf4059bd700ddbf6004d68.s1.eu.hivemq.cloud",n="8884",i="esp32-client-01",a=s=>s==="fan"?{bg:"#dbeafe",text:"#1e40af"}:s==="vent"?{bg:"#d1fae5",text:"#065f46"}:s==="pump"?{bg:"#f3e8ff",text:"#6b21a8"}:s==="camera"?{bg:"#fed7aa",text:"#c2410c"}:{bg:"#f3f4f6",text:"#4b5563"};return j.jsx("div",{className:"bg-gray-50",children:j.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[j.jsxs("div",{className:"bg-gradient-to-r from-farm-500 to-farm-600 rounded-2xl px-6 py-4 mb-6",children:[j.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" "}),j.jsx("p",{className:"text-white/80 text-sm mt-1 m-0",children:"MQTT ,  ,    "})]}),j.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[j.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"MQTT   ( )"}),j.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"HiveMQ Cloud Host"}),j.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:t})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"WebSocket Port"}),j.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:n})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Username"}),j.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:i})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Password"}),j.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700",children:""})]})]}),j.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:"MQTT   .env  ."})]}),j.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[j.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),j.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[" ",wE.length,"   ."]}),j.jsx("div",{className:"overflow-x-auto",children:j.jsxs("table",{className:"w-full text-sm border-collapse",children:[j.jsx("thead",{className:"bg-gray-50",children:j.jsxs("tr",{children:[j.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ID"}),j.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),j.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:""}),j.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"ESP32 "}),j.jsx("th",{className:"px-4 py-2 text-left text-gray-600 font-medium",children:"Command Topic"})]})}),j.jsx("tbody",{children:wE.map((s,o)=>{const l=a(s.type);return j.jsxs("tr",{className:o%2===0?"bg-white":"bg-gray-50",children:[j.jsx("td",{className:"px-4 py-2 text-gray-700",children:s.id}),j.jsx("td",{className:"px-4 py-2 text-gray-700",children:s.name}),j.jsx("td",{className:"px-4 py-2",children:j.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{background:l.bg,color:l.text},children:s.type})}),j.jsx("td",{className:"px-4 py-2 text-gray-600 text-xs",children:s.esp32Id}),j.jsx("td",{className:"px-4 py-2 text-gray-500 text-xs font-mono",children:s.commandTopic})]},s.id)})})]})}),j.jsx("p",{className:"text-sm text-gray-500 mt-4 mb-0",children:" / src/config/devices.ts  ."})]}),j.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 mb-6",children:[j.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"  "}),j.jsxs("div",{children:[j.jsxs("div",{className:"mb-4",children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"text",value:r.farmName,onChange:s=>e({...r,farmName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),j.jsxs("div",{className:"mb-4",children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),j.jsx("input",{type:"text",value:r.adminName,onChange:s=>e({...r,adminName:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base"})]}),j.jsxs("div",{className:"mb-4",children:[j.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),j.jsx("textarea",{value:r.notes,onChange:s=>e({...r,notes:s.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-base resize-vertical"})]}),j.jsx("button",{className:"w-full bg-farm-500 hover:bg-farm-600 text-gray-900 font-medium px-4 py-2 rounded-lg border-none cursor-pointer transition-all duration-200 hover:-translate-y-0.5",children:""})]})]})]})})}const lB="tansaeng-smartfarm-device-state-v1",uB="tansaeng-smartfarm-mist-zones-v1",cB="tansaeng-smartfarm-cameras-v1",fB="tansaeng-smartfarm-farm-settings-v1";function kve(){const[r,e]=L.useState({});return L.useEffect(()=>{const t=localStorage.getItem(lB);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse device state from localStorage:",n)}},[]),L.useEffect(()=>{localStorage.setItem(lB,JSON.stringify(r))},[r]),[r,e]}const ta={sprayDurationSeconds:null,stopDurationSeconds:null,startTime:"",endTime:"",enabled:!1},dB=[{id:"zone_a",name:"Zone A",mode:"OFF",controllerId:"ctlr-0004",isRunning:!1,intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1,daySchedule:{...ta,startTime:"06:00",endTime:"18:00"},nightSchedule:{...ta,startTime:"18:00",endTime:"06:00"}},{id:"zone_b",name:"Zone B",mode:"OFF",controllerId:"",isRunning:!1,intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1,daySchedule:{...ta,startTime:"06:00",endTime:"18:00"},nightSchedule:{...ta,startTime:"18:00",endTime:"06:00"}},{id:"zone_c",name:"Zone C",mode:"OFF",controllerId:"",isRunning:!1,intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1,daySchedule:{...ta,startTime:"06:00",endTime:"18:00"},nightSchedule:{...ta,startTime:"18:00",endTime:"06:00"}},{id:"zone_d",name:"Zone D",mode:"OFF",controllerId:"",isRunning:!1,intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1,daySchedule:{...ta,startTime:"06:00",endTime:"18:00"},nightSchedule:{...ta,startTime:"18:00",endTime:"06:00"}},{id:"zone_e",name:"Zone E",mode:"OFF",controllerId:"",isRunning:!1,intervalMinutes:null,spraySeconds:null,startTime:"",endTime:"",allowNightOperation:!1,daySchedule:{...ta,startTime:"06:00",endTime:"18:00"},nightSchedule:{...ta,startTime:"18:00",endTime:"06:00"}}];function Mve(r){return r?r.startsWith("ctrl-")?r.replace("ctrl-","ctlr-"):r:""}function hB(r){return r?{sprayDurationSeconds:r.sprayDurationSeconds??r.spraySeconds??null,stopDurationSeconds:r.stopDurationSeconds??(r.intervalMinutes?r.intervalMinutes*60:null),startTime:r.startTime??"",endTime:r.endTime??"",enabled:r.enabled??!1}:{...ta}}function Nve(r,e){const t=Mve(r.controllerId)||e.controllerId,n=hB(r.daySchedule),i=hB(r.nightSchedule);return n.startTime||(n.startTime="06:00"),n.endTime||(n.endTime="18:00"),i.startTime||(i.startTime="18:00"),i.endTime||(i.endTime="06:00"),{...e,...r,controllerId:t,isRunning:r.isRunning??!1,daySchedule:n,nightSchedule:i}}function Fve(){const[r,e]=L.useState(dB);return L.useEffect(()=>{const t=localStorage.getItem(uB);if(t)try{const n=JSON.parse(t),i=dB.map(a=>{const s=n.find(o=>o.id===a.id);return s?Nve(s,a):a});e(i)}catch(n){console.error("Failed to parse mist zones from localStorage:",n)}},[]),L.useEffect(()=>{localStorage.setItem(uB,JSON.stringify(r))},[r]),[r,e]}function Bve(){const[r,e]=L.useState([]);return L.useEffect(()=>{const t=localStorage.getItem(cB);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse cameras from localStorage:",n)}},[]),L.useEffect(()=>{localStorage.setItem(cB,JSON.stringify(r))},[r]),[r,e]}const Uve={farmName:"",adminName:"",notes:""};function jve(){const[r,e]=L.useState(Uve);return L.useEffect(()=>{const t=localStorage.getItem(fB);if(t)try{e(JSON.parse(t))}catch(n){console.error("Failed to parse farm settings from localStorage:",n)}},[]),L.useEffect(()=>{localStorage.setItem(fB,JSON.stringify(r))},[r]),[r,e]}function $ve(){const[r,e]=L.useState("devices"),[t,n]=L.useState("connecting"),[i,a]=kve(),[s,o]=Fve(),[l,c]=Bve(),[f,h]=jve();return L.useEffect(()=>{const p=wd();return p.on("connect",()=>{n("connected")}),p.on("error",()=>{n("error")}),p.on("reconnect",()=>{n("connecting")}),p.on("offline",()=>{n("disconnected")}),()=>{}},[]),j.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[j.jsx(az,{connectionState:t}),j.jsxs("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pb-20 min-h-0",children:[r==="devices"&&j.jsx(EW,{deviceState:i,setDeviceState:a}),r==="mist"&&j.jsx(_W,{zones:s,setZones:o}),r==="environment"&&j.jsx(Dpe,{}),r==="cameras"&&j.jsx(Pve,{cameras:l,setCameras:c}),r==="settings"&&j.jsx(Lve,{farmSettings:f,setFarmSettings:h})]}),j.jsx(oz,{activeTab:r,onTabChange:e})]})}const Hve=()=>j.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:j.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4",children:[j.jsxs("header",{className:"bg-farm-500 rounded-lg px-6 py-4 mb-6 shadow-md",children:[j.jsx("h1",{className:"text-gray-900 font-bold text-2xl m-0",children:" Tapo  "}),j.jsx("p",{className:"text-gray-800 text-sm mt-1 m-0",children:"TP-Link Tapo  4  HLS "})]}),j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j.jsx(Ho,{cameraId:1,title:"  1"}),j.jsx(Ho,{cameraId:2,title:"  2"}),j.jsx(Ho,{cameraId:3,title:"  3"}),j.jsx(Ho,{cameraId:4,title:" "})]}),j.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4",children:[j.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),j.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[j.jsx("li",{children:"    HLS  "}),j.jsx("li",{children:"       "}),j.jsx("li",{children:"      "}),j.jsx("li",{children:"  URL .env  VITE_TAPO_CAM*_HLS_URL  "})]})]})]})});LK.createRoot(document.getElementById("root")).render(j.jsx(L.StrictMode,{children:j.jsx(WY,{basename:"/smartfarm-ui",children:j.jsxs(TY,{children:[j.jsx(SE,{path:"/",element:j.jsx($ve,{})}),j.jsx(SE,{path:"/camera",element:j.jsx(Hve,{})})]})})}));
