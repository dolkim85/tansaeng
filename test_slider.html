<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>슬라이더 테스트</title>
    <style>
        .hero-slider {
            position: relative;
            width: 800px;
            height: 400px;
            overflow: hidden;
            border-radius: 12px;
            margin: 50px auto;
            border: 2px solid #ddd;
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            z-index: 1;
        }

        .hero-slide.active {
            opacity: 1;
            z-index: 2;
        }

        .hero-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .hero-slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 10;
            pointer-events: none;
        }

        .slider-prev,
        .slider-next {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .slider-prev:hover,
        .slider-next:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .hero-slider-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .slider-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider-indicator:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: scale(1.2);
        }

        .slider-indicator.active {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .debug-info {
            text-align: center;
            margin: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <h2>히어로 슬라이더 테스트</h2>
        <p>슬라이더가 정상 작동하는지 확인하세요</p>
        <div id="debug-output"></div>
    </div>

    <div class="hero-slider">
        <div class="hero-slide active" data-slide="0">
            <img src="/uploads/media/hero_media_1758429469_0.jpg" alt="스마트팜 이미지 1">
        </div>
        <div class="hero-slide" data-slide="1">
            <img src="/uploads/media/hero_media_1758429469_1.jpg" alt="스마트팜 이미지 2">
        </div>

        <div class="hero-slider-controls">
            <button class="slider-prev" onclick="heroSlider.prev()">‹</button>
            <button class="slider-next" onclick="heroSlider.next()">›</button>
        </div>

        <div class="hero-slider-indicators">
            <button class="slider-indicator active" onclick="heroSlider.goTo(0)"></button>
            <button class="slider-indicator" onclick="heroSlider.goTo(1)"></button>
        </div>
    </div>

    <script>
        const heroSlider = {
            currentSlide: 0,
            totalSlides: 0,
            autoSlideInterval: null,
            autoSlideDelay: 5000,

            init() {
                const slides = document.querySelectorAll('.hero-slide');
                this.totalSlides = slides.length;

                console.log('슬라이더 초기화:', this.totalSlides, '개 슬라이드');
                document.getElementById('debug-output').innerHTML = `슬라이드 개수: ${this.totalSlides}개`;

                if (this.totalSlides > 1) {
                    this.startAutoSlide();
                    console.log('자동 슬라이드 시작');

                    const sliderContainer = document.querySelector('.hero-slider');
                    if (sliderContainer) {
                        sliderContainer.addEventListener('mouseenter', () => {
                            this.stopAutoSlide();
                            console.log('자동 슬라이드 일시정지');
                        });
                        sliderContainer.addEventListener('mouseleave', () => {
                            this.startAutoSlide();
                            console.log('자동 슬라이드 재시작');
                        });
                    }
                }
            },

            goTo(slideIndex) {
                if (slideIndex < 0 || slideIndex >= this.totalSlides) return;

                console.log('슬라이드 이동:', this.currentSlide, '→', slideIndex);

                const currentSlide = document.querySelector('.hero-slide.active');
                const currentIndicator = document.querySelector('.slider-indicator.active');

                if (currentSlide) currentSlide.classList.remove('active');
                if (currentIndicator) currentIndicator.classList.remove('active');

                const newSlide = document.querySelector(`[data-slide="${slideIndex}"]`);
                const newIndicator = document.querySelectorAll('.slider-indicator')[slideIndex];

                if (newSlide) newSlide.classList.add('active');
                if (newIndicator) newIndicator.classList.add('active');

                this.currentSlide = slideIndex;

                document.getElementById('debug-output').innerHTML = `현재 슬라이드: ${slideIndex + 1}/${this.totalSlides}`;
            },

            next() {
                const nextSlide = (this.currentSlide + 1) % this.totalSlides;
                this.goTo(nextSlide);
            },

            prev() {
                const prevSlide = this.currentSlide === 0 ? this.totalSlides - 1 : this.currentSlide - 1;
                this.goTo(prevSlide);
            },

            startAutoSlide() {
                if (this.totalSlides <= 1) return;

                this.stopAutoSlide();
                this.autoSlideInterval = setInterval(() => {
                    this.next();
                }, this.autoSlideDelay);
            },

            stopAutoSlide() {
                if (this.autoSlideInterval) {
                    clearInterval(this.autoSlideInterval);
                    this.autoSlideInterval = null;
                }
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            console.log('페이지 로드 완료, 슬라이더 초기화 시작');
            heroSlider.init();
        });

        // 에러 캐치
        window.addEventListener('error', function(e) {
            console.error('JavaScript 에러:', e.error);
            document.getElementById('debug-output').innerHTML += '<br><span style="color:red">에러: ' + e.message + '</span>';
        });
    </script>
</body>
</html>