<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-section h3 { margin-top: 0; color: #333; }
        .test-link { display: inline-block; background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin: 5px; }
        .test-link:hover { background: #0056b3; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª íƒ„ìƒ ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸</h1>

        <div class="status info">
            <strong>í…ŒìŠ¤íŠ¸ ìˆœì„œ:</strong> ë¡œê·¸ì¸ â†’ ìŠ¤í† ì–´ â†’ ìƒí’ˆ ìƒì„¸ â†’ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ â†’ ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€
        </div>

        <div class="test-section">
            <h3>1ï¸âƒ£ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h3>
            <p>ë¹ ë¥¸ ë¡œê·¸ì¸ìœ¼ë¡œ ê´€ë¦¬ì ê³„ì •ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.</p>
            <a href="/quick_login.php" class="test-link" target="_blank">ë¹ ë¥¸ ë¡œê·¸ì¸</a>
        </div>

        <div class="test-section">
            <h3>2ï¸âƒ£ ìŠ¤í† ì–´ ë©”ì¸ í˜ì´ì§€</h3>
            <p>ìƒí’ˆ ëª©ë¡ì„ í™•ì¸í•˜ê³  ğŸ›’ ë²„íŠ¼ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            <a href="/pages/store/" class="test-link" target="_blank">ìŠ¤í† ì–´ ë©”ì¸</a>
        </div>

        <div class="test-section">
            <h3>3ï¸âƒ£ ìƒí’ˆ ìƒì„¸ í˜ì´ì§€</h3>
            <p>ê°œë³„ ìƒí’ˆ í˜ì´ì§€ì—ì„œ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            <a href="/pages/store/product.php?id=1" class="test-link" target="_blank">ìƒí’ˆ #1</a>
            <a href="/pages/store/product.php?id=2" class="test-link" target="_blank">ìƒí’ˆ #2</a>
            <a href="/pages/store/product.php?id=27" class="test-link" target="_blank">ìƒí’ˆ #27</a>
        </div>

        <div class="test-section">
            <h3>4ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€</h3>
            <p>ì¥ë°”êµ¬ë‹ˆ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ìˆ˜ëŸ‰ ë³€ê²½, ì‚­ì œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            <a href="/pages/store/cart.php" class="test-link" target="_blank">ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€</a>
        </div>

        <div class="test-section">
            <h3>5ï¸âƒ£ API ì§ì ‘ í…ŒìŠ¤íŠ¸</h3>
            <p>ê°œë°œì ë„êµ¬ë¡œ API í˜¸ì¶œì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <button onclick="testCartAPI()" class="test-link" style="border:none;cursor:pointer;">API í…ŒìŠ¤íŠ¸</button>
            <div id="apiResult" style="margin-top: 10px;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ› ë¬¸ì œ í•´ê²°</h3>
            <p>ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒ ë§í¬ë“¤ì„ í™•ì¸í•˜ì„¸ìš”:</p>
            <a href="/debug_session.php" class="test-link" target="_blank">ì„¸ì…˜ ìƒíƒœ</a>
            <a href="/test_api_simple.html" class="test-link" target="_blank">API í…ŒìŠ¤íŠ¸</a>
        </div>
    </div>

    <script>
        async function testCartAPI() {
            const resultDiv = document.getElementById('apiResult');

            try {
                resultDiv.innerHTML = '<div class="status info">API í…ŒìŠ¤íŠ¸ ì¤‘...</div>';

                // 1. ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ
                const response = await fetch('/api/cart.php?action=items');
                const data = await response.json();

                if (data.success) {
                    const itemCount = Object.keys(data.data || {}).length;
                    resultDiv.innerHTML = `
                        <div class="status success">
                            âœ… API í…ŒìŠ¤íŠ¸ ì„±ê³µ!<br>
                            ì¥ë°”êµ¬ë‹ˆì— ${itemCount}ê°œ ìƒí’ˆì´ ìˆìŠµë‹ˆë‹¤.
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="status error">
                            âŒ API ì˜¤ë¥˜: ${data.message}
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="status error">
                        âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}
                    </div>
                `;
            }
        }
    </script>
</body>
</html>